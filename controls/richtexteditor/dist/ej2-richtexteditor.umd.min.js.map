{"version":3,"file":"ej2-richtexteditor.umd.min.js","sources":["../src/rich-text-editor/base/util.js","../src/rich-text-editor/actions/html-attributes.js","../src/rich-text-editor/base/constant.js","../src/rich-text-editor/base/classes.js","../src/rich-text-editor/base/enum.js","../src/rich-text-editor/models/items.js","../src/rich-text-editor/models/default-locale.js","../src/rich-text-editor/renderer/toolbar-renderer.js","../src/rich-text-editor/actions/base-toolbar.js","../src/rich-text-editor/actions/dropdown-buttons.js","../src/rich-text-editor/services/service-locator.js","../src/rich-text-editor/services/renderer-factory.js","../src/rich-text-editor/actions/toolbar-action.js","../src/rich-text-editor/actions/toolbar.js","../src/rich-text-editor/actions/keyboard.js","../src/rich-text-editor/actions/color-picker.js","../src/rich-text-editor/actions/base-quick-toolbar.js","../src/rich-text-editor/renderer/popup-renderer.js","../src/rich-text-editor/actions/quick-toolbar.js","../src/rich-text-editor/actions/count.js","../src/markdown-parser/plugin/markdown-selection.js","../src/rich-text-editor/actions/markdown-toolbar-status.js","../src/rich-text-editor/actions/execute-command-callback.js","../src/common/constant.js","../src/rich-text-editor/formatter/formatter.js","../src/markdown-parser/base/constant.js","../src/markdown-parser/plugin/lists.js","../src/markdown-parser/plugin/formats.js","../src/markdown-parser/plugin/md-selection-formats.js","../src/common/config.js","../src/markdown-parser/plugin/undo.js","../src/markdown-parser/plugin/link.js","../src/markdown-parser/plugin/table.js","../src/markdown-parser/plugin/clearformat.js","../src/markdown-parser/base/markdown-parser.js","../src/rich-text-editor/formatter/markdown-formatter.js","../src/rich-text-editor/renderer/markdown-renderer.js","../src/rich-text-editor/actions/markdown-editor.js","../src/editor-manager/base/constant.js","../src/selection/selection.js","../src/editor-manager/plugin/dom-node.js","../src/editor-manager/plugin/lists.js","../src/editor-manager/plugin/formats.js","../src/editor-manager/plugin/insert-methods.js","../src/editor-manager/plugin/nodecutter.js","../src/editor-manager/plugin/inserthtml.js","../src/editor-manager/plugin/link.js","../src/editor-manager/plugin/alignments.js","../src/editor-manager/plugin/indents.js","../src/editor-manager/base/classes.js","../src/editor-manager/plugin/image.js","../src/editor-manager/plugin/table.js","../src/editor-manager/plugin/isformatted.js","../src/editor-manager/plugin/selection-commands.js","../src/editor-manager/plugin/selection-exec.js","../src/editor-manager/plugin/inserthtml-exec.js","../src/editor-manager/plugin/clearformat.js","../src/editor-manager/plugin/clearformat-exec.js","../src/editor-manager/plugin/undo.js","../src/editor-manager/base/editor-manager.js","../src/rich-text-editor/formatter/html-formatter.js","../src/editor-manager/plugin/toolbar-status.js","../src/rich-text-editor/actions/html-toolbar-status.js","../src/rich-text-editor/renderer/content-renderer.js","../src/rich-text-editor/renderer/iframe-content-renderer.js","../src/rich-text-editor/actions/html-editor.js","../src/rich-text-editor/renderer/render.js","../src/rich-text-editor/renderer/link-module.js","../src/rich-text-editor/renderer/image-module.js","../src/rich-text-editor/renderer/view-source.js","../src/rich-text-editor/renderer/table-module.js","../src/rich-text-editor/base/interface.js","../src/rich-text-editor/models/toolbar-settings.js","../src/rich-text-editor/models/iframe-settings.js","../src/rich-text-editor/models/inline-mode.js","../src/rich-text-editor/actions/full-screen.js","../src/rich-text-editor/base/rich-text-editor.js"],"sourcesContent":["/**\n * Exports util methods used by RichTextEditor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as model from '../models/items';\nimport { toolsLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nexport function getIndex(val, items) {\n    var index = -1;\n    items.some(function (item, i) {\n        if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n            index = i;\n            return true;\n        }\n        return false;\n    });\n    return index;\n}\nexport function hasClass(element, className) {\n    var hasClass = false;\n    if (element.classList.contains(className)) {\n        hasClass = true;\n    }\n    return hasClass;\n}\nexport function getDropDownValue(items, value, type, returnType) {\n    var data;\n    var result;\n    for (var k = 0; k < items.length; k++) {\n        if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n    }\n    if (!isNOU(data)) {\n        switch (returnType) {\n            case 'text':\n                result = data.text;\n                break;\n            case 'value':\n                result = data.value;\n                break;\n            case 'iconCss':\n                result = data.iconCss;\n                break;\n        }\n    }\n    return result;\n}\nexport function isIDevice() {\n    var result = false;\n    var iosDevices = ['iphone', 'ipad', 'ipod'];\n    for (var i = 0; i < iosDevices.length; i++) {\n        if (navigator.platform.toLocaleLowerCase().indexOf(iosDevices[i]) > -1) {\n            result = true;\n            break;\n        }\n    }\n    return result;\n}\nexport function getFormattedFontSize(value) {\n    if (isNOU(value)) {\n        return '';\n    }\n    return value;\n}\nexport function pageYOffset(e, parentElement, isIFrame) {\n    var y = 0;\n    if (isIFrame) {\n        y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n    }\n    else {\n        y = e.pageY;\n    }\n    return y;\n}\nexport function getTooltipText(item, serviceLocator) {\n    var i10n = serviceLocator.getService('rteLocale');\n    var itemLocale = toolsLocale[item];\n    var tooltipText = i10n.getConstant(itemLocale);\n    return tooltipText;\n}\nexport function setToolbarStatus(e, isPopToolbar) {\n    var dropDown = e.dropDownModule;\n    var data = e.args;\n    var keys = Object.keys(e.args);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        for (var j = 0; j < e.tbItems.length; j++) {\n            var item = e.tbItems[j].subCommand;\n            var itemStr = item && item.toLocaleLowerCase();\n            if (item && (itemStr === key) || (item === 'UL' && key === 'unorderedlist') || (item === 'OL' && key === 'orderedlist')) {\n                if (typeof data[key] === 'boolean') {\n                    if (data[key] === true) {\n                        addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                    else {\n                        removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                }\n                else if ((typeof data[key] === 'string' || data[key] === null) &&\n                    getIndex(key, e.parent.toolbarSettings.items) > -1) {\n                    var value = ((data[key]) ? data[key] : '');\n                    var result = '';\n                    switch (key) {\n                        case 'formats':\n                            if (isNOU(dropDown.formatDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var formatItems = e.parent.format.types;\n                            result = getDropDownValue(formatItems, value, 'subCommand', 'text');\n                            dropDown.formatDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.format.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + (isNOU(result) ? 'Paragraph' : result) +\n                                '</span></span>');\n                            dropDown.formatDropDown.dataBind();\n                            break;\n                        case 'alignments':\n                            if (isNOU(dropDown.alignDropDown) ||\n                                (!isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var alignItems = model.alignmentItems;\n                            result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                            dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                            dropDown.alignDropDown.dataBind();\n                            break;\n                        case 'fontname':\n                            if (isNOU(dropDown.fontNameDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var fontNameItems = e.parent.fontFamily.items;\n                            result = getDropDownValue(fontNameItems, value, 'value', 'text');\n                            var name_1 = (isNOU(result) ? 'Segoe UI' : result);\n                            e.tbElements[j].title = name_1;\n                            dropDown.fontNameDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontFamily.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + name_1 + '</span></span>');\n                            dropDown.fontNameDropDown.dataBind();\n                            break;\n                        case 'fontsize':\n                            if (isNOU(dropDown.fontSizeDropDown) ||\n                                (!isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var fontSizeItems = e.parent.fontSize.items;\n                            result = getDropDownValue(fontSizeItems, (value === '' ? e.parent.fontSize.default.replace(/\\s/g, '') : value), 'value', 'text');\n                            dropDown.fontSizeDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontSize.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + getFormattedFontSize(result) + '</span></span>');\n                            dropDown.fontSizeDropDown.dataBind();\n                            break;\n                    }\n                }\n            }\n        }\n    }\n}\nexport function getCollection(items) {\n    if (typeof items === 'object') {\n        return items;\n    }\n    else {\n        return [items];\n    }\n}\nexport function getTBarItemsIndex(items, toolbarItems) {\n    var itemsIndex = [];\n    for (var i = 0; i < items.length; i++) {\n        for (var j = 0; j < toolbarItems.length; j++) {\n            if (toolbarItems[j].type === 'Separator') {\n                continue;\n            }\n            else {\n                if (items[i] === 'OrderedList' && toolbarItems[j].subCommand === 'OL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'UnorderedList' && toolbarItems[j].subCommand === 'UL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === toolbarItems[j].subCommand) {\n                    itemsIndex.push(j);\n                    break;\n                }\n            }\n        }\n    }\n    return itemsIndex;\n}\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n    var i = 0;\n    var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n    var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    var keys = Object.keys(undoRedoStatus);\n    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n        var key = keys_2[_i];\n        var target = tbItems[trgItems[i]];\n        if (target) {\n            baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[key]);\n        }\n        i++;\n    }\n}\n/**\n * To dispatch the event manually\n */\nexport function dispatchEvent(element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n}\nexport function parseHtml(value) {\n    var tempNode = createElement('template');\n    tempNode.innerHTML = value;\n    if (tempNode.content instanceof DocumentFragment) {\n        return tempNode.content;\n    }\n    else {\n        return document.createRange().createContextualFragment(value);\n    }\n}\nexport function getTextNodesUnder(docElement, node) {\n    var nodes = [];\n    for (node = node.firstChild; node; node = node.nextSibling) {\n        if (node.nodeType === 3) {\n            nodes.push(node);\n        }\n        else {\n            nodes = nodes.concat(getTextNodesUnder(docElement, node));\n        }\n    }\n    return nodes;\n}\nexport function toObjectLowerCase(obj) {\n    var convertedValue = {};\n    var keys = Object.keys(obj);\n    for (var i = 0; i < Object.keys(obj).length; i++) {\n        convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n    }\n    return convertedValue;\n}\n","export function setAttributes(htmlAttributes, rte, isFrame, initial) {\n    var target;\n    if (isFrame) {\n        var iFrame = rte.contentModule.getDocument();\n        target = iFrame.querySelector('body');\n    }\n    else {\n        target = rte.element;\n    }\n    if (Object.keys(htmlAttributes).length) {\n        for (var _i = 0, _a = Object.keys(htmlAttributes); _i < _a.length; _i++) {\n            var htmlAttr = _a[_i];\n            if (htmlAttr === 'class') {\n                target.classList.add(htmlAttributes[htmlAttr]);\n            }\n            else if (htmlAttr === 'disabled' && htmlAttributes[htmlAttr] === 'disabled') {\n                rte.enabled = false;\n                rte.setEnable();\n            }\n            else if (htmlAttr === 'readonly' && htmlAttributes[htmlAttr] === 'readonly') {\n                rte.readonly = true;\n                rte.setReadOnly(initial);\n            }\n            else if (htmlAttr === 'style') {\n                target.setAttribute('style', htmlAttributes[htmlAttr]);\n            }\n            else if (htmlAttr === 'placeholder') {\n                rte.placeholder = htmlAttributes[htmlAttr];\n                rte.setPlaceHolder();\n            }\n            else {\n                var validateAttr = ['name', 'required'];\n                if (validateAttr.indexOf(htmlAttr) > -1) {\n                    rte.valueContainer.setAttribute(htmlAttr, htmlAttributes[htmlAttr]);\n                }\n                else {\n                    target.setAttribute(htmlAttr, htmlAttributes[htmlAttr]);\n                }\n            }\n        }\n    }\n}\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/**\n * Specifies RichTextEditor internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var iframeMouseDown = 'iframe-click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var refreshBegin = 'refresh-begin';\n/** @hidden */\nexport var toolbarUpdated = 'toolbar-updated';\n/** @hidden */\nexport var bindOnEnd = 'bind-on-end';\n/** @hidden */\nexport var renderColorPicker = 'render-color-picker';\n/** @hidden */\nexport var htmlToolbarClick = 'html-toolbar-click';\n/** @hidden */\nexport var markdownToolbarClick = 'markdown-toolbar-click';\n/** @hidden */\nexport var destroyColorPicker = 'destroy-color-picker';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var keyUp = 'keyUp';\n/** @hidden */\nexport var keyDown = 'keyDown';\n/** @hidden */\nexport var mouseUp = 'mouseUp';\n/** @hidden */\nexport var toolbarCreated = 'toolbarCreated';\n/** @hidden */\nexport var toolbarRenderComplete = 'toolbarRenderComplete';\n/** @hidden */\nexport var enableFullScreen = 'enableFullScreen';\n/** @hidden */\nexport var disableFullScreen = 'disableFullScreen';\n/** @hidden */\nexport var dropDownSelect = 'dropDownSelect';\n/** @hidden */\nexport var beforeDropDownItemRender = 'beforeDropDownItemRender';\n/** @hidden */\nexport var execCommandCallBack = 'execCommandCallBack';\n/** @hidden */\nexport var imageToolbarAction = 'image-toolbar-action';\n/** @hidden */\nexport var linkToolbarAction = 'link-toolbar-action';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var undo = 'undo';\n/** @hidden */\nexport var redo = 'redo';\n/** @hidden */\nexport var insertLink = 'insertLink';\n/** @hidden */\nexport var unLink = 'unLink';\n/** @hidden */\nexport var editLink = 'editLink';\n/** @hidden */\nexport var openLink = 'openLink';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionSuccess = 'actionSuccess';\n/** @hidden */\nexport var popupOpen = 'popupOpen';\n/** @hidden */\nexport var updateToolbarItem = 'updateToolbarItem';\n/** @hidden */\nexport var insertImage = 'insertImage';\n/** @hidden */\nexport var insertCompleted = 'insertCompleted';\n/** @hidden */\nexport var imageLeft = 'justifyLeft';\n/** @hidden */\nexport var imageRight = 'justifyRight';\n/** @hidden */\nexport var imageCenter = 'justifyCenter';\n/** @hidden */\nexport var imageBreak = 'break';\n/** @hidden */\nexport var imageInline = 'inline';\n/** @hidden */\nexport var imageLink = 'insertImgLink';\n/** @hidden */\nexport var imageAlt = 'imgAltText';\n/** @hidden */\nexport var imageDelete = 'delete';\n/** @hidden */\nexport var imageCaption = 'caption';\n/** @hidden */\nexport var imageSize = 'imageSize';\n/** @hidden */\nexport var sourceCode = 'sourceCode';\n/** @hidden */\nexport var updateSource = 'updateSource';\n/** @hidden */\nexport var toolbarOpen = 'toolbarOpen';\n/** @hidden */\nexport var beforeDropDownOpen = 'beforeDropDownOpen';\n/** @hidden */\nexport var selectionSave = 'selection-save';\n/** @hidden */\nexport var selectionRestore = 'selection-restore';\n/** @hidden */\nexport var expandPopupClick = 'expandPopupClick';\n/** @hidden */\nexport var count = 'count';\n/** @hidden */\nexport var contentFocus = 'contentFocus';\n/** @hidden */\nexport var contentBlur = 'contentBlur';\n/** @hidden */\nexport var mouseDown = 'mouseDown';\n/** @hidden */\nexport var sourceCodeMouseDown = 'sourceCodeMouseDown';\n/** @hidden */\nexport var editAreaClick = 'editAreaClick';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var colorPickerChanged = 'colorPickerChanged';\n/** @hidden */\nexport var tableColorPickerChanged = 'tableColorPickerChanged';\n/** @hidden */\nexport var focusChange = 'focusChange';\n/** @hidden */\nexport var selectAll = 'selectAll';\n/** @hidden */\nexport var selectRange = 'selectRange';\n/** @hidden */\nexport var getSelectedHtml = 'getSelectedHtml';\n/** @hidden */\nexport var renderInlineToolbar = 'renderInlineToolbar';\n/** @hidden */\nexport var paste = 'paste-content';\n/** @hidden */\nexport var imgModule = 'imageModule';\n/** @hidden */\nexport var rtlMode = 'rtl-mode';\n/** @hidden */\nexport var createTable = 'createTable';\n/** @hidden */\nexport var docClick = 'docClick';\n/** @hidden */\nexport var tableToolbarAction = 'table-toolbar-action';\n/** @hidden */\nexport var checkUndo = 'checkUndoStack';\n/** @hidden */\nexport var readOnlyMode = 'readOnlyMode';\n","/**\n * RichTextEditor classes defined here.\n */\n/** @hidden */\nexport var CLS_RTE = 'e-richtexteditor';\n/** @hidden */\nexport var CLS_RTL = 'e-rtl';\n/** @hidden */\nexport var CLS_CONTENT = 'e-content';\n/** @hidden */\nexport var CLS_DISABLED = 'e-disabled';\n/** @hidden */\nexport var CLS_SCRIPT_SHEET = 'rte-iframe-script-sheet';\n/** @hidden */\nexport var CLS_STYLE_SHEET = 'rte-iframe-style-sheet';\n/** @hidden */\nexport var CLS_TOOLBAR = 'e-rte-toolbar';\n/** @hidden */\nexport var CLS_TB_FIXED = 'e-rte-tb-fixed';\n/** @hidden */\nexport var CLS_TB_FLOAT = 'e-rte-tb-float';\n/** @hidden */\nexport var CLS_TB_ABS_FLOAT = 'e-rte-tb-abs-float';\n/** @hidden */\nexport var CLS_INLINE = 'e-rte-inline';\n/** @hidden */\nexport var CLS_TB_INLINE = 'e-rte-tb-inline';\n/** @hidden */\nexport var CLS_RTE_EXPAND_TB = 'e-rte-tb-expand';\n/** @hidden */\nexport var CLS_FULL_SCREEN = 'e-rte-full-screen';\n/** @hidden */\nexport var CLS_QUICK_TB = 'e-rte-quick-toolbar';\n/** @hidden */\nexport var CLS_POP = 'e-rte-pop';\n/** @hidden */\nexport var CLS_QUICK_POP = 'e-rte-quick-popup';\n/** @hidden */\nexport var CLS_QUICK_DROPDOWN = 'e-quick-dropdown';\n/** @hidden */\nexport var CLS_IMAGE_POP = 'e-rte-image-popup';\n/** @hidden */\nexport var CLS_INLINE_POP = 'e-rte-inline-popup';\n/** @hidden */\nexport var CLS_INLINE_DROPDOWN = 'e-rte-inline-dropdown';\n/** @hidden */\nexport var CLS_DROPDOWN_POPUP = 'e-rte-dropdown-popup';\n/** @hidden */\nexport var CLS_DROPDOWN_ICONS = 'e-rte-dropdown-icons';\n/** @hidden */\nexport var CLS_DROPDOWN_ITEMS = 'e-rte-dropdown-items';\n/** @hidden */\nexport var CLS_DROPDOWN_BTN = 'e-rte-dropdown-btn';\n/** @hidden */\nexport var CLS_RTE_CONTENT = 'e-rte-content';\n/** @hidden */\nexport var CLS_TB_ITEM = 'e-toolbar-item';\n/** @hidden */\nexport var CLS_TB_EXTENDED = 'e-toolbar-extended';\n/** @hidden */\nexport var CLS_TB_WRAP = 'e-toolbar-wrapper';\n/** @hidden */\nexport var CLS_POPUP = 'e-popup';\n/** @hidden */\nexport var CLS_SEPARATOR = 'e-separator';\n/** @hidden */\nexport var CLS_MINIMIZE = 'e-minimize';\n/** @hidden */\nexport var CLS_MAXIMIZE = 'e-maximize';\n/** @hidden */\nexport var CLS_BACK = 'e-back';\n/** @hidden */\nexport var CLS_SHOW = 'e-show';\n/** @hidden */\nexport var CLS_HIDE = 'e-hide';\n/** @hidden */\nexport var CLS_VISIBLE = 'e-visible';\n/** @hidden */\nexport var CLS_FOCUS = 'e-focused';\n/** @hidden */\nexport var CLS_RM_WHITE_SPACE = 'e-remove-white-space';\n/** @hidden */\nexport var CLS_IMGRIGHT = 'e-imgright';\n/** @hidden */\nexport var CLS_IMGLEFT = 'e-imgleft';\n/** @hidden */\nexport var CLS_IMGCENTER = 'e-imgcenter';\n/** @hidden */\nexport var CLS_IMGBREAK = 'e-imgbreak';\n/** @hidden */\nexport var CLS_CAPTION = 'e-img-caption';\n/** @hidden */\nexport var CLS_CAPINLINE = 'e-caption-inline';\n/** @hidden */\nexport var CLS_IMGINLINE = 'e-imginline';\n/** @hidden */\nexport var CLS_COUNT = 'e-rte-character-count';\n/** @hidden */\nexport var CLS_WARNING = 'e-warning';\n/** @hidden */\nexport var CLS_ERROR = 'e-error';\n/** @hidden */\nexport var CLS_ICONS = 'e-icons';\n/** @hidden */\nexport var CLS_ACTIVE = 'e-active';\n/** @hidden */\nexport var CLS_EXPAND_OPEN = 'e-expand-open';\n/** @hidden */\nexport var CLS_RTE_ELEMENTS = 'e-rte-elements';\n/** @hidden */\nexport var CLS_TB_BTN = 'e-tbar-btn';\n/** @hidden */\nexport var CLS_HR_SEPARATOR = 'e-rte-horizontal-separator';\n/** @hidden */\nexport var CLS_TB_IOS_FIX = 'e-tbar-ios-fixed';\n/** @hidden */\nexport var CLS_TB_STATIC = 'e-tb-static';\n/** @hidden */\nexport var CLS_FORMATS_TB_BTN = 'e-formats-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_NAME_TB_BTN = 'e-font-name-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_SIZE_TB_BTN = 'e-font-size-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_COLOR_TARGET = 'e-rte-fontcolor-element';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_TARGET = 'e-rte-backgroundcolor-element';\n/** @hidden */\nexport var CLS_COLOR_CONTENT = 'e-rte-color-content';\n/** @hidden */\nexport var CLS_FONT_COLOR_DROPDOWN = 'e-rte-fontcolor-dropdown';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_DROPDOWN = 'e-rte-backgroundcolor-dropdown';\n/** @hidden */\nexport var CLS_COLOR_PALETTE = 'e-rte-square-palette';\n/** @hidden */\nexport var CLS_FONT_COLOR_PICKER = 'e-rte-fontcolor-colorpicker';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_PICKER = 'e-rte-backgroundcolor-colorpicker';\n/** @hidden */\nexport var CLS_RTE_READONLY = 'e-rte-readonly';\n/** @hidden */\nexport var CLS_TABLE_SEL = 'e-cell-select';\n/** @hidden */\nexport var CLS_TB_DASH_BOR = 'e-dashed-border';\n/** @hidden */\nexport var CLS_TB_ALT_BOR = 'e-alternate-border';\n/** @hidden */\nexport var CLS_TB_COL_RES = 'e-column-resize';\n/** @hidden */\nexport var CLS_TB_ROW_RES = 'e-row-resize';\n/** @hidden */\nexport var CLS_TB_BOX_RES = 'e-table-box';\n/** @hidden */\nexport var CLS_RTE_HIDDEN = 'e-rte-hidden';\n","/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Toolbar */\n    RenderType[RenderType[\"Toolbar\"] = 0] = \"Toolbar\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Popup\"] = 2] = \"Popup\";\n    /**  Defines RenderType as LinkToolbar */\n    RenderType[RenderType[\"LinkToolbar\"] = 3] = \"LinkToolbar\";\n    /**  Defines RenderType as TextToolbar */\n    RenderType[RenderType[\"TextToolbar\"] = 4] = \"TextToolbar\";\n    /**  Defines RenderType as ImageToolbar */\n    RenderType[RenderType[\"ImageToolbar\"] = 5] = \"ImageToolbar\";\n    /**  Defines RenderType as ImageToolbar */\n    RenderType[RenderType[\"InlineToolbar\"] = 6] = \"InlineToolbar\";\n    RenderType[RenderType[\"TableToolbar\"] = 7] = \"TableToolbar\";\n})(RenderType || (RenderType = {}));\nexport var ToolbarType;\n(function (ToolbarType) {\n    /**  Defines ToolbarType as Standard */\n    ToolbarType[\"Expand\"] = \"Expand\";\n    /**  Defines ToolbarType as MultiRow */\n    ToolbarType[\"MultiRow\"] = \"MultiRow\";\n})(ToolbarType || (ToolbarType = {}));\n","// tslint:disable\n/**\n * Export items model\n */\nexport var templateItems = ['alignments', 'formats', 'fontname', 'fontsize', 'fontcolor', 'backgroundcolor', 'align', 'display', 'tablerows', 'tablecolumns', 'tablecellhorizontalalign', 'tablecellverticalalign', 'styles'];\nexport var tools = {\n    'alignments': {\n        'id': 'Alignments',\n        'icon': 'e-alignments',\n        'tooltip': 'Alignments',\n        'command': 'Alignments',\n        'subCommand': 'Alignments'\n    },\n    'justifyleft': {\n        'id': 'JustifyLeft',\n        'icon': 'e-justify-left',\n        'tooltip': 'JustifyLeft',\n        'command': 'Alignments',\n        'subCommand': 'JustifyLeft'\n    },\n    'justifycenter': {\n        'id': 'JustifyCenter',\n        'icon': 'e-justify-center',\n        'tooltip': 'JustifyCenter',\n        'command': 'Alignments',\n        'subCommand': 'JustifyCenter'\n    },\n    'justifyright': {\n        'id': 'JustifyRight',\n        'icon': 'e-justify-right',\n        'tooltip': 'JustifyRight',\n        'command': 'Alignments',\n        'subCommand': 'JustifyRight'\n    },\n    'justifyfull': {\n        'id': 'JustifyFull',\n        'icon': 'e-justify-full',\n        'tooltip': 'JustifyFull',\n        'command': 'Alignments',\n        'subCommand': 'JustifyFull'\n    },\n    'fontname': {\n        'id': 'FontName',\n        'icon': 'e-font-name',\n        'tooltip': 'Font Name',\n        'command': 'Font',\n        'subCommand': 'FontName'\n    },\n    'fontsize': {\n        'id': 'FontSize',\n        'icon': 'e-font-size',\n        'tooltip': 'Font Size',\n        'command': 'Font',\n        'subCommand': 'FontSize'\n    },\n    'fontcolor': {\n        'id': 'FontColor',\n        'icon': 'e-font-color',\n        'tooltip': 'Font Color',\n        'command': 'Font',\n        'subCommand': 'FontColor',\n        'value': '#ff0000ff'\n    },\n    'backgroundcolor': {\n        'id': 'BackgroundColor',\n        'icon': 'e-background-color',\n        'tooltip': 'Background Color',\n        'command': 'Font',\n        'subCommand': 'BackgroundColor',\n        'value': '#ffff00ff'\n    },\n    'bold': {\n        'id': 'Bold',\n        'icon': 'e-bold',\n        'tooltip': 'Bold',\n        'command': 'Style',\n        'subCommand': 'Bold'\n    },\n    'italic': {\n        'id': 'Italic',\n        'icon': 'e-italic',\n        'tooltip': 'Italic',\n        'command': 'Style',\n        'subCommand': 'Italic'\n    },\n    'underline': {\n        'id': 'Underline',\n        'icon': 'e-underline',\n        'tooltip': 'Underline',\n        'command': 'Style',\n        'subCommand': 'Underline'\n    },\n    'strikethrough': {\n        'id': 'StrikeThrough',\n        'icon': 'e-strike-through',\n        'tooltip': 'StrikeThrough',\n        'command': 'Style',\n        'subCommand': 'StrikeThrough'\n    },\n    'clearformat': {\n        'id': 'ClearFormat',\n        'icon': 'e-clear-format',\n        'tooltip': 'Clear Format',\n        'command': 'Clear',\n        'subCommand': 'ClearFormat'\n    },\n    'clearall': {\n        'id': 'ClearAll',\n        'icon': 'e-clear-all',\n        'tooltip': 'Clear All',\n        'command': 'Clear',\n        'subCommand': 'ClearAll'\n    },\n    'cut': {\n        'id': 'Cut',\n        'icon': 'e-cut',\n        'tooltip': 'Cut',\n        'command': 'ClipBoard',\n        'subCommand': 'Cut'\n    },\n    'copy': {\n        'id': 'Copy',\n        'icon': 'e-copy',\n        'tooltip': 'Copy',\n        'command': 'ClipBoard',\n        'subCommand': 'Copy'\n    },\n    'paste': {\n        'id': 'Paste',\n        'icon': 'e-paste',\n        'tooltip': 'Paste',\n        'command': 'ClipBoard',\n        'subCommand': 'Paste'\n    },\n    'unorderedlist': {\n        'id': 'UnorderedList',\n        'icon': 'e-unorder-list',\n        'tooltip': 'Bulleted List',\n        'command': 'Lists',\n        'subCommand': 'UL'\n    },\n    'orderedlist': {\n        'id': 'OrderedList',\n        'icon': 'e-order-list',\n        'tooltip': 'Numbered List',\n        'command': 'Lists',\n        'subCommand': 'OL'\n    },\n    'indent': {\n        'id': 'Indent',\n        'icon': 'e-indent',\n        'tooltip': 'Increase Indent',\n        'command': 'Indents',\n        'subCommand': 'Indent'\n    },\n    'outdent': {\n        'id': 'Outdent',\n        'icon': 'e-outdent',\n        'tooltip': 'Decrease Indent',\n        'command': 'Indents',\n        'subCommand': 'Outdent'\n    },\n    'undo': {\n        'id': 'Undo',\n        'icon': 'e-undo',\n        'tooltip': 'Undo',\n        'command': 'Actions',\n        'subCommand': 'Undo'\n    },\n    'redo': {\n        'id': 'Redo',\n        'icon': 'e-redo',\n        'tooltip': 'Redo',\n        'command': 'Actions',\n        'subCommand': 'Redo'\n    },\n    'superscript': {\n        'id': 'SuperScript',\n        'icon': 'e-super-script',\n        'tooltip': 'Superscript',\n        'command': 'Effects',\n        'subCommand': 'SuperScript'\n    },\n    'subscript': {\n        'id': 'SubScript',\n        'icon': 'e-sub-script',\n        'tooltip': 'Subscript',\n        'command': 'Effects',\n        'subCommand': 'SubScript'\n    },\n    'createlink': {\n        'id': 'CreateLink',\n        'icon': 'e-create-link',\n        'tooltip': 'Insert Hyperlink',\n        'command': 'Links',\n        'subCommand': 'CreateLink'\n    },\n    'openlink': {\n        'id': 'OpenLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Links',\n        'subCommand': 'OpenLink'\n    },\n    'editlink': {\n        'id': 'EditLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Links',\n        'subCommand': 'EditLink'\n    },\n    'removelink': {\n        'id': 'RemoveLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Links',\n        'subCommand': 'RemoveLink'\n    },\n    'image': {\n        'id': 'Image',\n        'icon': 'e-image',\n        'tooltip': 'Insert Image',\n        'command': 'Images',\n        'subCommand': 'Image'\n    },\n    'createtable': {\n        'id': 'CreateTable',\n        'icon': 'e-create-table',\n        'tooltip': 'Create Table',\n        'command': 'Table',\n        'subCommand': 'CreateTable'\n    },\n    'removetable': {\n        'id': 'removeTable',\n        'icon': 'e-remove-table',\n        'tooltip': 'Remove Table',\n        'command': 'removeTable',\n        'subCommand': 'removeTable'\n    },\n    'replace': {\n        'id': 'Replace',\n        'icon': 'e-replace',\n        'tooltip': 'Replace',\n        'command': 'Images',\n        'subCommand': 'Replace'\n    },\n    'align': {\n        'id': 'Align',\n        'icon': 'e-align',\n        'tooltip': 'Align',\n        'command': 'Images',\n        'subCommand': 'Align'\n    },\n    'caption': {\n        'id': 'Caption',\n        'icon': 'e-caption',\n        'tooltip': 'Image Caption',\n        'command': 'Images',\n        'subCommand': 'Caption'\n    },\n    'remove': {\n        'id': 'Remove',\n        'icon': 'e-remove',\n        'tooltip': 'Remove',\n        'command': 'Images',\n        'subCommand': 'Remove'\n    },\n    'openimagelink': {\n        'id': 'OpenImageLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Images',\n        'subCommand': 'OpenImageLink'\n    },\n    'editimagelink': {\n        'id': 'EditIamgeLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Images',\n        'subCommand': 'EditImageLink'\n    },\n    'removeimagelink': {\n        'id': 'RemoveImageLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Images',\n        'subCommand': 'RemoveImageLink'\n    },\n    'insertlink': {\n        'id': 'InsertLink',\n        'icon': 'e-insert-link',\n        'tooltip': 'Insert Link',\n        'command': 'Images',\n        'subCommand': 'InsertLink'\n    },\n    'display': {\n        'id': 'Display',\n        'icon': 'e-display',\n        'tooltip': 'Display',\n        'command': 'Images',\n        'subCommand': 'Display'\n    },\n    'alttext': {\n        'id': 'AltText',\n        'icon': 'e-alt-text',\n        'tooltip': 'Alternative Text',\n        'command': 'Images',\n        'subCommand': 'AltText'\n    },\n    'dimension': {\n        'id': 'Dimension',\n        'icon': 'e-dimension',\n        'tooltip': 'Change Size',\n        'command': 'Images',\n        'subCommand': 'Dimension'\n    },\n    'fullscreen': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'View',\n        'subCommand': 'Maximize'\n    },\n    'maximize': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'FullScreen',\n        'subCommand': 'Maximize'\n    },\n    'minimize': {\n        'id': 'Minimize',\n        'icon': 'e-minimize',\n        'tooltip': 'Minimize',\n        'command': 'FullScreen',\n        'subCommand': 'Minimize'\n    },\n    'lowercase': {\n        'id': 'LowerCase',\n        'icon': 'e-lower-case',\n        'tooltip': 'Lower Case',\n        'command': 'Casing',\n        'subCommand': 'LowerCase'\n    },\n    'uppercase': {\n        'id': 'UpperCase',\n        'icon': 'e-upper-case',\n        'tooltip': 'Upper Case',\n        'command': 'Casing',\n        'subCommand': 'UpperCase'\n    },\n    'print': {\n        'id': 'Print',\n        'icon': 'e-print',\n        'tooltip': 'Print',\n        'command': 'Print',\n        'subCommand': 'Print'\n    },\n    'formats': {\n        'id': 'Formats',\n        'icon': 'e-formats',\n        'tooltip': 'Formats',\n        'command': 'Formats',\n        'subCommand': 'Formats'\n    },\n    'sourcecode': {\n        'id': 'SourceCode',\n        'icon': 'e-source-code',\n        'tooltip': 'Source Code',\n        'command': 'SourceCode',\n        'subCommand': 'SourceCode'\n    },\n    'preview': {\n        'id': 'Preview',\n        'icon': 'e-preview',\n        'tooltip': 'Preview',\n        'command': 'Preview',\n        'subCommand': 'Preview'\n    },\n    'viewside': {\n        'id': 'ViewSide',\n        'icon': 'e-view-side',\n        'tooltip': 'ViewSide',\n        'command': 'ViewSide',\n        'subCommand': 'ViewSide'\n    },\n    'insertcode': {\n        'id': 'InsertCode',\n        'icon': 'e-insert-code',\n        'tooltip': 'Insert Code',\n        'command': 'InsertCode',\n        'subCommand': 'InsertCode'\n    },\n    'tableheader': {\n        'id': 'TableHeader',\n        'icon': 'e-table-header',\n        'tooltip': 'Table Header',\n        'command': 'Table',\n        'subCommand': 'TableHeader'\n    },\n    'tableremove': {\n        'id': 'TableRemove',\n        'icon': 'e-table-remove',\n        'tooltip': 'Table Remove',\n        'command': 'Table',\n        'subCommand': 'TableRemove'\n    },\n    'tablerows': {\n        'id': 'TableRows',\n        'icon': 'e-table-rows',\n        'tooltip': 'Table Rows',\n        'command': 'Table',\n        'subCommand': 'TableRows'\n    },\n    'tablecolumns': {\n        'id': 'TableColumns',\n        'icon': 'e-table-columns',\n        'tooltip': 'Table Columns',\n        'command': 'Table',\n        'subCommand': 'TableColumns'\n    },\n    'tablecellbackground': {\n        'id': 'TableCellBackground',\n        'icon': 'e-table-cell-background',\n        'tooltip': 'Table Cell Background',\n        'command': 'Table',\n        'subCommand': 'TableCellBackground'\n    },\n    'tablecellhorizontalalign': {\n        'id': 'TableCellHorizontalAlign',\n        'icon': 'e-table-cell-horizontalAlign',\n        'tooltip': 'Table Cell HorizontalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellHorizontalAlign'\n    },\n    'tablecellverticalalign': {\n        'id': 'TableCellVerticalAlign',\n        'icon': 'e-table-cell-verticalAlign',\n        'tooltip': 'Table Cell VerticalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellVerticalAlign'\n    },\n    'tableeditproperties': {\n        'id': 'TableEditProperties',\n        'icon': 'e-table-edit-properties',\n        'tooltip': 'Table Edit Properties',\n        'command': 'Table',\n        'subCommand': 'TableEditProperties'\n    },\n    'styles': {\n        'id': 'Styles',\n        'icon': 'e-table-styles',\n        'tooltip': 'Styles',\n        'command': 'Table',\n        'subCommand': 'Styles'\n    }\n};\nexport var alignmentItems = [\n    { iconCss: 'e-icons e-justify-left', text: 'Align Left', command: 'Alignments', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', text: 'Align Center', command: 'Alignments', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', text: 'Align Right', command: 'Alignments', subCommand: 'JustifyRight' },\n    { iconCss: 'e-icons e-justify-full', text: 'Align Justify', command: 'Alignments', subCommand: 'JustifyFull' }\n];\nexport var imageAlignItems = [\n    { iconCss: 'e-icons e-justify-left', command: 'Images', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', command: 'Images', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', command: 'Images', subCommand: 'JustifyRight' },\n];\nexport var imageDisplayItems = [\n    { text: 'Inline', cssClass: 'e-inline', command: 'Images', subCommand: 'Inline' },\n    { text: 'Break', cssClass: 'e-break', command: 'Images', subCommand: 'Break' },\n];\nexport var tableRowsItems = [\n    { iconCss: 'e-icons e-insert-row-before', text: 'Insert row before', command: 'Table', subCommand: 'InsertRowBefore' },\n    { iconCss: 'e-icons e-insert-row-after', text: 'Insert row after', command: 'Table', subCommand: 'InsertRowAfter' },\n    { iconCss: 'e-icons e-delete-row', text: 'Delete row', command: 'Table', subCommand: 'DeleteRow' },\n];\nexport var tableColumnsItems = [\n    { iconCss: 'e-icons e-insert-column-left', text: 'Insert column left', command: 'Table', subCommand: 'InsertColumnLeft' },\n    { iconCss: 'e-icons e-insert-column-right', text: 'Insert column right', command: 'Table', subCommand: 'InsertColumnRight' },\n    { iconCss: 'e-icons e-delete-column', text: 'Delete column', command: 'Table', subCommand: 'DeleteColumn' },\n];\nexport var TableCellVerticalAlignItems = [\n    { iconCss: 'e-icons e-align-top', text: 'Align Top', command: 'Table', subCommand: 'AlignTop' },\n    { iconCss: 'e-icons e-align-middle', text: 'Align Middle', command: 'Table', subCommand: 'AlignMiddle' },\n    { iconCss: 'e-icons e-align-bottom', text: 'Align Bottom', command: 'Table', subCommand: 'AlignBottom' },\n];\nexport var TableStyleItems = [\n    { text: 'Dashed Borders', cssClass: 'e-dashed-borders', command: 'Table', subCommand: 'Dashed' },\n    { text: 'Alternate Rows', cssClass: 'e-alternate-rows', command: 'Table', subCommand: 'Alternate' }\n];\n","// tslint:disable\n/**\n * Export default locale\n */\nexport var defaultLocale = {\n    'alignments': 'Alignments',\n    'justifyLeft': 'Align Left',\n    'justifyCenter': 'Align Center',\n    'justifyRight': 'Align Right',\n    'justifyFull': 'Align Justify',\n    'fontName': 'Font Name',\n    'fontSize': 'Font Size',\n    'fontColor': 'Font Color',\n    'backgroundColor': 'Background Color',\n    'bold': 'Bold',\n    'italic': 'Italic',\n    'underline': 'Underline',\n    'strikethrough': 'Strikethrough',\n    'clearFormat': 'Clear Format',\n    'clearAll': 'Clear All',\n    'cut': 'Cut',\n    'copy': 'Copy',\n    'paste': 'Paste',\n    'unorderedList': 'Bulleted List',\n    'orderedList': 'Numbered List',\n    'indent': 'Increase Indent',\n    'outdent': 'Decrease Indent',\n    'undo': 'Undo',\n    'redo': 'Redo',\n    'superscript': 'Superscript',\n    'subscript': 'Subscript',\n    'createLink': 'Insert Hyperlink',\n    'openLink': 'Open Link',\n    'editLink': 'Edit Link',\n    'removeLink': 'Remove Link',\n    'image': 'Insert Image',\n    'replace': 'Replace',\n    'align': 'Align',\n    'caption': 'Image Caption',\n    'remove': 'Remove',\n    'insertLink': 'Insert Link',\n    'display': 'Display',\n    'altText': 'Alternative Text',\n    'dimension': 'Change Size',\n    'fullscreen': 'Maximize',\n    'maximize': 'Maximize',\n    'minimize': 'Minimize',\n    'lowerCase': 'Lower Case',\n    'upperCase': 'Upper Case',\n    'print': 'Print',\n    'formats': 'Formats',\n    'sourcecode': 'Code View',\n    'preview': 'Preview',\n    'viewside': 'ViewSide',\n    'insertCode': 'Insert Code',\n    'linkText': 'Display Text',\n    'linkTooltipLabel': 'Title',\n    'linkWebUrl': 'Web Address',\n    'linkTitle': 'Enter a title',\n    'linkurl': 'http://example.com',\n    'linkOpenInNewWindow': 'Open Link in New Window',\n    'linkHeader': 'Insert Link',\n    'dialogInsert': 'Insert',\n    'dialogCancel': 'Cancel',\n    'dialogUpdate': 'Update',\n    'imageHeader': 'Insert Image',\n    'imageLinkHeader': 'You can also provide a link from the web',\n    'mdimageLink': 'Please provide a URL for your image',\n    'imageUploadMessage': 'Drop image here or browse to upload',\n    'imageDeviceUploadMessage': 'Click here to upload',\n    'imageAlternateText': 'Alternate Text',\n    'alternateHeader': 'Alternative Text',\n    'browse': 'Browse',\n    'imageUrl': 'http://example.com/image.png',\n    'imageCaption': 'Caption',\n    'imageSizeHeader': 'Image Size',\n    'imageHeight': 'Height',\n    'imageWidth': 'Width',\n    'textPlaceholder': 'Enter Text',\n    'tblhead': '1X1',\n    'inserttablebtn': 'Insert Table',\n    'tabledialogHeader': 'Insert Table',\n    'tableWidth': 'Width',\n    'cellpadding': 'Cell Padding',\n    'cellspacing': 'Cell Spacing',\n    'columns': 'Number of columns',\n    'rows': 'Number of rows',\n    'tableRows': 'Table Rows',\n    'tableColumns': 'Table Columns',\n    'tableCellHorizontalAlign': 'Table Cell Horizontal Align',\n    'tableCellVerticalAlign': 'Table Cell Vertical Align',\n    'createTable': 'Create Table',\n    'removeTable': 'Remove Table',\n    'tableHeader': 'Table Header',\n    'tableRemove': 'Table Remove',\n    'tableCellBackground': 'Table Cell Background',\n    'tableEditProperties': 'Table Edit Properties',\n    'styles': 'Styles',\n    'insertColumnLeft': 'Insert Column Left',\n    'insertColumnRight': 'Insert Column Right',\n    'deleteColumn': 'Delete Column',\n    'insertRowBefore': 'Insert Row Before',\n    'insertRowAfter': 'Insert Row After',\n    'deleteRow': 'Delete Row',\n    'tableEditHeader': 'Edit Table',\n    'TableHeadingText': 'Heading',\n    'TableColText': 'Col'\n};\nexport var toolsLocale = {\n    'alignments': 'alignments',\n    'justifyleft': 'justifyLeft',\n    'justifycenter': 'justifyCenter',\n    'justifyright': 'justifyRight',\n    'justifyfull': 'justifyFull',\n    'fontname': 'fontName',\n    'fontsize': 'fontSize',\n    'fontcolor': 'fontColor',\n    'backgroundcolor': 'backgroundColor',\n    'bold': 'bold',\n    'italic': 'italic',\n    'underline': 'underline',\n    'strikethrough': 'strikethrough',\n    'clearformat': 'clearFormat',\n    'clearall': 'clearAll',\n    'cut': 'cut',\n    'copy': 'copy',\n    'paste': 'paste',\n    'unorderedlist': 'unorderedList',\n    'orderedlist': 'orderedList',\n    'indent': 'indent',\n    'outdent': 'outdent',\n    'undo': 'undo',\n    'redo': 'redo',\n    'superscript': 'superscript',\n    'subscript': 'subscript',\n    'createlink': 'createLink',\n    'openlink': 'openLink',\n    'editlink': 'editLink',\n    'removelink': 'removeLink',\n    'openimagelink': 'openLink',\n    'editimagelink': 'editLink',\n    'removeimagelink': 'removeLink',\n    'image': 'image',\n    'replace': 'replace',\n    'align': 'align',\n    'caption': 'caption',\n    'remove': 'remove',\n    'insertlink': 'insertLink',\n    'display': 'display',\n    'alttext': 'altText',\n    'dimension': 'dimension',\n    'fullscreen': 'fullscreen',\n    'maximize': 'maximize',\n    'minimize': 'minimize',\n    'lowercase': 'lowerCase',\n    'uppercase': 'upperCase',\n    'print': 'print',\n    'formats': 'formats',\n    'sourcecode': 'sourcecode',\n    'preview': 'preview',\n    'viewside': 'viewside',\n    'insertcode': 'insertCode',\n    'tablerows': 'tableRows',\n    'tablecolumns': 'tableColumns',\n    'tablecellhorizontalalign': 'tableCellHorizontalAlign',\n    'tablecellverticalalign': 'tableCellVerticalAlign',\n    'createtable': 'createTable',\n    'removetable': 'removeTable',\n    'tableheader': 'tableHeader',\n    'tableremove': 'tableRemove',\n    'tablecellbackground': 'tableCellBackground',\n    'tableeditproperties': 'tableEditProperties',\n    'styles': 'styles',\n    'insertcolumnleft': 'insertColumnLeft',\n    'insertcolumnright': 'insertColumnRight',\n    'deletecolumn': 'deleteColumn',\n    'aligntop': 'AlignTop',\n    'alignmiddle': 'AlignMiddle',\n    'alignbottom': 'AlignBottom',\n    'insertrowbefore': 'insertRowBefore',\n    'insertrowafter': 'insertRowAfter',\n    'deleterow': 'deleteRow'\n};\n","import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER } from '../base/classes';\nimport { isIDevice } from '../base/util';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n * @hidden\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     */\n    function ToolbarRenderer(parent) {\n        this.parent = parent;\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n        if (this.popupOverlay) {\n            EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n        }\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.toolbarClick, args);\n        this.parent.trigger('toolbarClick', args);\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.onPopupOverlay();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n            this.popupModal(args.element.parentElement);\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.parent.notify(events.selectionRestore, args);\n    };\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl\n        });\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    };\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                for (var index = 0; index < args.element.childNodes.length; index++) {\n                    var divNode = _this.parent.createElement('div');\n                    divNode.innerHTML = dropDown.content.trim();\n                    if (divNode.textContent.trim() !== ''\n                        && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                        if (!args.element.childNodes[index].classList.contains('e-active')) {\n                            addClass([args.element.childNodes[index]], 'e-active');\n                        }\n                    }\n                    else {\n                        removeClass([args.element.childNodes[index]], 'e-active');\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n        if (!isNullOrUndefined(this.popupOverlay)) {\n            closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n            this.popupOverlay.style.display = 'none';\n            removeClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.setIsModel = function (element) {\n        if (!closest(element, '.e-popup-container')) {\n            var popupContainer = this.parent.createElement('div', {\n                className: 'e-rte-modal-popup e-popup-container e-center'\n            });\n            element.parentNode.insertBefore(popupContainer, element);\n            popupContainer.appendChild(element);\n            popupContainer.style.zIndex = element.style.zIndex;\n            popupContainer.style.display = 'flex';\n            element.style.position = 'relative';\n            addClass([element], 'e-popup-modal');\n            this.popupOverlay = this.parent.createElement('div', { className: 'e-popup-overlay' });\n            this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n            this.popupOverlay.style.display = 'block';\n            popupContainer.appendChild(this.popupOverlay);\n            EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n        }\n        else {\n            element.parentElement.style.display = 'flex';\n            this.popupOverlay = element.nextElementSibling;\n            this.popupOverlay.style.display = 'block';\n            addClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker) {\n        var _this = this;\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement,\n            cssClass: css,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                var focusEle;\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                if (Browser.isDevice) {\n                    _this.popupModal(dropDownArgs.element.parentElement);\n                }\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    /* tslint:enable */\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n                var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n                if (dropElement) {\n                    dropElement.style.display = 'none';\n                    dropElement.lastElementChild.style.display = 'none';\n                    removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n                }\n            }\n        });\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.onmousedown = function () { proxy.parent.notify(events.selectionSave, {}); };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.popupModal = function (element) {\n        var popupInst = getInstance(element, Popup);\n        popupInst.relateTo = document.body;\n        popupInst.position = { X: 0, Y: 0 };\n        popupInst.targetType = 'container';\n        popupInst.collision = { X: 'fit', Y: 'fit' };\n        popupInst.offsetY = 4;\n        popupInst.dataBind();\n        this.setIsModel(element);\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        var _this = this;\n        var proxy = this;\n        this.colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: true,\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                _this.colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n            },\n            change: function (colorPickerArgs) {\n                /* tslint:disable */\n                var colorpickerValue = Browser.info.name === 'msie' || Browser.info.name === 'edge' || isIDevice() ? colorPickerArgs.currentValue.rgba : colorPickerArgs.currentValue.hex;\n                /* tslint:enable */\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                _this.colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        this.colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        this.colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        this.colorPicker.cssClass = (item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n        this.colorPicker.createElement = this.parent.createElement;\n        this.colorPicker.appendTo(document.body.querySelector(args.target));\n        return this.colorPicker;\n    };\n    /**\n     * The function is used to render RichTextEditor toolbar\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     * @return {Element}\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     * @param  {Element} panel\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n","import { RenderType } from '../base/enum';\nimport { CLS_HR_SEPARATOR } from '../base/classes';\nimport * as events from '../base/constant';\nimport { getTooltipText, toObjectLowerCase } from '../base/util';\nimport { tools, templateItems } from '../models/items';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar BaseToolbar = /** @class */ (function () {\n    function BaseToolbar(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    BaseToolbar.prototype.addEventListener = function () {\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    BaseToolbar.prototype.removeEventListener = function () {\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    BaseToolbar.prototype.setRtl = function (args) {\n        if (!isNullOrUndefined(this.toolbarObj)) {\n            this.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    BaseToolbar.prototype.getTemplateObject = function (itemStr, container) {\n        var tagName;\n        switch (itemStr) {\n            case 'fontcolor':\n            case 'backgroundcolor':\n                tagName = 'span';\n                break;\n            default:\n                tagName = 'button';\n                break;\n        }\n        return {\n            command: this.tools[itemStr.toLocaleLowerCase()].command,\n            subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand,\n            template: this.parent.createElement(tagName, {\n                id: this.parent.getID() + '_' + container\n                    + '_' + this.tools[itemStr.toLocaleLowerCase()].id\n            }).outerHTML,\n            tooltipText: getTooltipText(itemStr, this.locator)\n        };\n    };\n    BaseToolbar.prototype.getObject = function (item, container) {\n        var itemStr = item.toLowerCase();\n        if (templateItems.indexOf(itemStr) !== -1) {\n            return this.getTemplateObject(itemStr, container);\n        }\n        else {\n            switch (itemStr) {\n                case '|':\n                    return { type: 'Separator' };\n                case '-':\n                    return { type: 'Separator', cssClass: CLS_HR_SEPARATOR };\n                default:\n                    return {\n                        id: this.parent.getID() + '_' + container + '_' + this.tools[itemStr.toLocaleLowerCase()].id,\n                        prefixIcon: this.tools[itemStr.toLocaleLowerCase()].icon,\n                        tooltipText: getTooltipText(itemStr, this.locator),\n                        command: this.tools[itemStr.toLocaleLowerCase()].command,\n                        subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand\n                    };\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseToolbar.prototype.getItems = function (tbItems, container) {\n        if (this.parent.toolbarSettings.items.length < 1) {\n            return [];\n        }\n        var items = [];\n        for (var _i = 0, tbItems_1 = tbItems; _i < tbItems_1.length; _i++) {\n            var item = tbItems_1[_i];\n            switch (typeof item) {\n                case 'string':\n                    items.push(this.getObject(item, container));\n                    break;\n                default:\n                    items.push(item);\n            }\n        }\n        return items;\n    };\n    BaseToolbar.prototype.getToolbarOptions = function (args) {\n        return {\n            target: args.target,\n            rteToolbarObj: this,\n            items: this.getItems(args.items, args.container),\n            overflowMode: args.mode,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl\n        };\n    };\n    BaseToolbar.prototype.render = function (args) {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.toolbarRenderer.renderToolbar(this.getToolbarOptions(args));\n    };\n    return BaseToolbar;\n}());\nexport { BaseToolbar };\n","import { addClass, isNullOrUndefined, removeClass, select, closest } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport { getIndex } from '../base/util';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getDropDownValue, getFormattedFontSize, getTooltipText } from '../base/util';\nimport * as model from '../models/items';\nimport { dispatchEvent } from '../base/util';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar DropDownButtons = /** @class */ (function () {\n    function DropDownButtons(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    DropDownButtons.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    DropDownButtons.prototype.beforeRender = function (args) {\n        var item = args.item;\n        if (item.cssClass) {\n            addClass([args.element], item.cssClass);\n        }\n        if (item.command === 'Alignments' || item.subCommand === 'JustifyLeft'\n            || item.subCommand === 'JustifyRight' || item.subCommand === 'JustifyCenter') {\n            args.element.setAttribute('title', getTooltipText(item.subCommand.toLocaleLowerCase(), this.locator));\n        }\n    };\n    DropDownButtons.prototype.dropdownContent = function (width, type, content) {\n        return ('<span style=\"display: inline-flex;' + 'width:' + ((type === 'quick') ? 'auto' : width) + '\" >' +\n            '<span class=\"e-rte-dropdown-btn-text\">' + content + '</span></span>');\n    };\n    DropDownButtons.prototype.renderDropDowns = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var type = args.containerType;\n        var tbElement = args.container;\n        model.templateItems.forEach(function (item) {\n            var targetElement = undefined;\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'formats':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Formats', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var formatItem = _this.parent.format.types.slice();\n                        formatItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Formats', enumerable: true }, subCommand: { value: item.value, enumerable: true }\n                            });\n                        });\n                        _this.formatDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-formats e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.format.width, type, ((type === 'quick') ? '' : getDropDownValue(formatItem, _this.parent.format.default, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FORMATS_TB_BTN,\n                            itemName: 'Formats',\n                            items: formatItem,\n                            element: targetElement\n                        });\n                        break;\n                    case 'fontname':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontName', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontItem = _this.parent.fontFamily.items.slice();\n                        fontItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontName', enumerable: true }\n                            });\n                        });\n                        _this.fontNameDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-font-name e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.fontFamily.width, type, ((type === 'quick') ? '' : getDropDownValue(fontItem, _this.parent.fontFamily.default, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_NAME_TB_BTN,\n                            itemName: 'FontName',\n                            items: fontItem,\n                            element: targetElement\n                        });\n                        break;\n                    case 'fontsize':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontSize', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontsize = _this.parent.fontSize.items.slice();\n                        fontsize.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontSize', enumerable: true }\n                            });\n                        });\n                        _this.fontSizeDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            content: _this.dropdownContent(_this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, _this.parent.fontSize.default.replace(/\\s/g, ''), 'value', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_SIZE_TB_BTN,\n                            itemName: 'FontSize',\n                            items: fontsize,\n                            element: targetElement\n                        });\n                        break;\n                    case 'alignments':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Alignments', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        _this.alignDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: 'e-justify-left e-icons',\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS,\n                            itemName: 'Alignments',\n                            items: model.alignmentItems,\n                            element: targetElement\n                        });\n                        break;\n                    case 'align':\n                        _this.imageAlignmentDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'display':\n                        _this.imageDisplayDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablerows':\n                        _this.rowDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecolumns':\n                        _this.columnDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecellverticalalign':\n                        _this.verticalAlignDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'styles':\n                        _this.tableStylesDropDown(type, tbElement, targetElement);\n                        break;\n                }\n            }\n        });\n    };\n    DropDownButtons.prototype.getUpdateItems = function (items, value) {\n        var dropDownItems = items.slice();\n        dropDownItems.forEach(function (item) {\n            Object.defineProperties(item, {\n                command: { value: (value === 'Format' ? 'Formats' : 'Font'), enumerable: true },\n                subCommand: { value: (value === 'Format' ? item.value : value), enumerable: true }\n            });\n        });\n        return dropDownItems;\n    };\n    DropDownButtons.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontFamily':\n                    if (this.fontNameDropDown) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontFamily); _b < _c.length; _b++) {\n                            var fontFamily = _c[_b];\n                            switch (fontFamily) {\n                                case 'default':\n                                case 'width':\n                                    var fontItems = this.fontNameDropDown.items;\n                                    var type = !isNullOrUndefined(closest(this.fontNameDropDown.element, '.' + classes.CLS_QUICK_TB)) ?\n                                        'quick' : 'toolbar';\n                                    var content = this.dropdownContent(this.parent.fontFamily.width, type, ((type === 'quick') ? '' :\n                                        getDropDownValue(fontItems, this.parent.fontFamily.default, 'text', 'text')));\n                                    this.fontNameDropDown.setProperties({ content: content });\n                                    break;\n                                case 'items':\n                                    this.fontNameDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontFamily.items, 'FontSize')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'fontSize':\n                    if (this.fontSizeDropDown) {\n                        for (var _d = 0, _e = Object.keys(newProp.fontSize); _d < _e.length; _d++) {\n                            var fontSize = _e[_d];\n                            switch (fontSize) {\n                                case 'default':\n                                case 'width':\n                                    var fontsize = this.fontSizeDropDown.items;\n                                    var type = !isNullOrUndefined(closest(this.fontSizeDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var content = this.dropdownContent(this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, this.parent.fontSize.default.replace(/\\s/g, ''), 'value', 'text')));\n                                    this.fontSizeDropDown.setProperties({ content: content });\n                                    break;\n                                case 'items':\n                                    this.fontSizeDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontSize.items, 'FontSize')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'format':\n                    if (this.formatDropDown) {\n                        for (var _f = 0, _g = Object.keys(newProp.format); _f < _g.length; _f++) {\n                            var format = _g[_f];\n                            switch (format) {\n                                case 'default':\n                                case 'width':\n                                    var formatItems = this.formatDropDown.items;\n                                    var type = !isNullOrUndefined(closest(this.formatDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var content = this.dropdownContent(this.parent.format.width, type, ((type === 'quick') ? '' :\n                                        getDropDownValue(formatItems, this.parent.format.default, 'text', 'text')));\n                                    this.formatDropDown.setProperties({ content: content });\n                                    break;\n                                case 'types':\n                                    this.formatDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.format.types, 'Format')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownButtons.prototype.rowDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableRows', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableRowsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-rows e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableRows',\n            items: model.tableRowsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.columnDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableColumns', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableColumnsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-columns e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableColumns',\n            items: model.tableColumnsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.verticalAlignDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableCellVerticalAlign', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableCellVerticalAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-cell-ver-align e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableCellVerticalAlign',\n            items: model.TableCellVerticalAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.imageDisplayDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Display', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.displayDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-display e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Display',\n            items: model.imageDisplayItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.imageAlignmentDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Align', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-justify-left e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Align',\n            items: model.imageAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.tableStylesDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Styles', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-style e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Styles',\n            items: this.parent.tableSettings.styles,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.removeDropDownClasses = function (target) {\n        removeClass([target], [\n            classes.CLS_DROPDOWN_BTN,\n            classes.CLS_DROPDOWN_POPUP,\n            classes.CLS_DROPDOWN_ICONS,\n            classes.CLS_DROPDOWN_ITEMS\n        ]);\n    };\n    DropDownButtons.prototype.destroyDropDowns = function () {\n        if (this.formatDropDown) {\n            this.removeDropDownClasses(this.formatDropDown.element);\n            this.formatDropDown.destroy();\n        }\n        if (this.fontNameDropDown) {\n            this.removeDropDownClasses(this.fontNameDropDown.element);\n            this.fontNameDropDown.destroy();\n        }\n        if (this.fontSizeDropDown) {\n            this.removeDropDownClasses(this.fontSizeDropDown.element);\n            this.fontSizeDropDown.destroy();\n        }\n        if (this.alignDropDown) {\n            this.removeDropDownClasses(this.alignDropDown.element);\n            this.alignDropDown.destroy();\n        }\n        if (this.imageAlignDropDown) {\n            this.removeDropDownClasses(this.imageAlignDropDown.element);\n            this.imageAlignDropDown.destroy();\n        }\n        if (this.displayDropDown) {\n            this.removeDropDownClasses(this.displayDropDown.element);\n            this.displayDropDown.destroy();\n        }\n        if (this.tableRowsDropDown) {\n            this.removeDropDownClasses(this.tableRowsDropDown.element);\n            this.tableRowsDropDown.destroy();\n        }\n        if (this.tableColumnsDropDown) {\n            this.removeDropDownClasses(this.tableColumnsDropDown.element);\n            this.tableColumnsDropDown.destroy();\n        }\n        if (this.tableCellVerticalAlignDropDown) {\n            this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element);\n            this.tableCellVerticalAlignDropDown.destroy();\n        }\n    };\n    DropDownButtons.prototype.setRtl = function (args) {\n        if (this.formatDropDown) {\n            this.formatDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontNameDropDown) {\n            this.fontNameDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontSizeDropDown) {\n            this.fontSizeDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.alignDropDown) {\n            this.alignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageAlignDropDown) {\n            this.imageAlignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.displayDropDown) {\n            this.displayDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    DropDownButtons.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.beforeDropDownItemRender, this.beforeRender, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    };\n    DropDownButtons.prototype.onIframeMouseDown = function () {\n        dispatchEvent(document, 'mousedown');\n    };\n    DropDownButtons.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.beforeDropDownItemRender, this.beforeRender);\n        this.parent.off(events.destroy, this.removeEventListener);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n    };\n    return DropDownButtons;\n}());\nexport { DropDownButtons };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\n/**\n * `ToolbarAction` module is used to toolbar click action\n */\nvar ToolbarAction = /** @class */ (function () {\n    function ToolbarAction(parent) {\n        this.parent = parent;\n        this.addEventListener();\n        this.serviceLocator = new ServiceLocator;\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n    }\n    ToolbarAction.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarClick, this.toolbarClick, this);\n        this.parent.on(events.dropDownSelect, this.dropDownSelect, this);\n        this.parent.on(events.colorPickerChanged, this.renderSelection, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ToolbarAction.prototype.toolbarClick = function (args) {\n        if (isNOU(args.item)) {\n            return;\n        }\n        if (!isNOU(args.item.controlParent)) {\n            var activeEle = args.item.controlParent\n                .activeEle;\n            if (activeEle) {\n                activeEle.tabIndex = -1;\n            }\n        }\n        this.parent.notify(events.htmlToolbarClick, args);\n        this.parent.notify(events.markdownToolbarClick, args);\n    };\n    ToolbarAction.prototype.dropDownSelect = function (e) {\n        this.parent.notify(events.selectionRestore, {});\n        if (!(document.body.contains(document.body.querySelector('.e-rte-quick-toolbar'))\n            && e.item && (e.item.command === 'Images' || e.item.command === 'Display' || e.item.command === 'Table'))) {\n            this.parent.formatter.process(this.parent, e, e.originalEvent, null);\n        }\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.renderSelection = function (args) {\n        this.parent.notify(events.selectionRestore, {});\n        this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarClick, this.toolbarClick);\n        this.parent.off(events.dropDownSelect, this.dropDownSelect);\n        this.parent.off(events.colorPickerChanged, this.renderSelection);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ToolbarAction;\n}());\nexport { ToolbarAction };\n","import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.parent = parent;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent));\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n            keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable) {\n            return;\n        }\n        else {\n            if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.element.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice) {\n            return false;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: 'MultiRow',\n            target: ele\n        });\n        addClass([ele], ['e-rte-tb-mobile']);\n        if (this.parent.inlineMode.enable) {\n            this.addFixedTBarClass();\n        }\n        else {\n            addClass([ele], [classes.CLS_TB_STATIC]);\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.parent.notify(events.renderColorPicker, {\n            container: this.tbElement,\n            containerType: 'toolbar',\n            items: this.parent.toolbarSettings.items\n        });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            if (transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function (e) {\n        var topValue;\n        var isBody = false;\n        var isFloat = false;\n        var scrollParent;\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (e && e.target !== document) {\n            scrollParent = e.target;\n        }\n        else {\n            isBody = true;\n            scrollParent = document.body;\n        }\n        var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n        if (this.isTransformChild) {\n            topValue = 0;\n            var scrollParentRelativeTop = 0;\n            var trgHeight = this.parent.element.offsetHeight;\n            if (isBody) {\n                var bodyStyle = window.getComputedStyle(scrollParent);\n                scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n            }\n            var targetTop = this.parent.element.getBoundingClientRect().top;\n            var scrollParentYOffset = (Browser.isMSPointer && isBody) ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n            var scrollParentRect = scrollParent.getBoundingClientRect();\n            var scrollParentTop = (!isBody) ? scrollParentRect.top : (scrollParentRect.top + scrollParentYOffset);\n            var outOfRange = ((targetTop - ((!isBody) ? scrollParentTop : 0)) + trgHeight > tbHeight + floatOffset) ? false : true;\n            if (targetTop > (scrollParentTop + floatOffset) || targetTop < -trgHeight || ((targetTop < 0) ? outOfRange : false)) {\n                isFloat = false;\n                removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n            }\n            else if (targetTop < (scrollParentTop + floatOffset)) {\n                if (targetTop < 0) {\n                    topValue = (-targetTop) + scrollParentTop;\n                }\n                else {\n                    topValue = scrollParentTop - targetTop;\n                }\n                topValue = (isBody) ? topValue - scrollParentRelativeTop : topValue;\n                addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n                isFloat = true;\n            }\n        }\n        else {\n            var parent_1 = this.parent.element.getBoundingClientRect();\n            if (window.innerHeight < parent_1.top) {\n                return;\n            }\n            topValue = (e && e.target !== document) ? scrollParent.getBoundingClientRect().top : 0;\n            if ((parent_1.bottom < (floatOffset + tbHeight + topValue)) || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n                isFloat = false;\n            }\n            else if (parent_1.top < floatOffset) {\n                isFloat = true;\n            }\n        }\n        if (!isFloat) {\n            removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { top: 0 + 'px', width: '100%' });\n        }\n        else {\n            addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { width: this.parent.element.offsetWidth + 'px', top: (floatOffset + topValue) + 'px' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement\n            });\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.parent.notify(events.renderColorPicker, {\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.refreshToolbarOverflow();\n        }\n    };\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        if (this.parent.inlineMode.enable) {\n            setToolbarStatus(options, true);\n        }\n        else {\n            setToolbarStatus(options, false);\n        }\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.e-rte-srctextarea', this.parent.element)) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    Toolbar.prototype.getToolbarElement = function () {\n        return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    };\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.baseToolbar.toolbarObj.refreshOverflow();\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.parent.notify(events.destroyColorPicker, {});\n            this.dropDownModule.destroyDropDowns();\n            this.baseToolbar.toolbarObj.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            else if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n            }\n        }\n    };\n    Toolbar.prototype.scrollHandler = function (e) {\n        if (this.parent.toolbarSettings.enableFloating) {\n            this.toggleFloatClass(e.args);\n        }\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    Toolbar.prototype.toolbarMouseDownHandler = function (e) {\n        var trg = closest(e.target, '.e-hor-nav');\n        if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n            if (!trg.classList.contains('e-nav-active')) {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', false);\n            }\n            else {\n                addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', true);\n            }\n        }\n        else if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.isToolbar = true;\n        }\n        if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        EventHandler.add(this.tbElement, 'click mousedown', this.toolbarMouseDownHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'click mousedown', this.toolbarMouseDownHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        if (!this.parent.inlineMode.enable) {\n            this.parent.on(events.scroll, this.scrollHandler, this);\n            this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n            this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        }\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        if (!this.parent.inlineMode.enable) {\n            this.parent.off(events.scroll, this.scrollHandler);\n            this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n            this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        }\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n    };\n    Toolbar.prototype.onRefresh = function () {\n        this.refreshToolbarOverflow();\n        this.parent.setContentHeight();\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        if (e.newProp.inlineMode.enable) {\n                            this.parent.off(events.scroll, this.scrollHandler);\n                            this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n                            this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n                        }\n                        else {\n                            this.parent.on(events.scroll, this.scrollHandler, this);\n                            this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n                            this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n                        }\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.e-rte-srctextarea', this.parent.element)) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, NotifyPropertyChanges, Event } from '@syncfusion/ej2-base';\nimport { Base } from '@syncfusion/ej2-base';\nvar keyCode = {\n    'backspace': 8,\n    'tab': 9,\n    'enter': 13,\n    'shift': 16,\n    'control': 17,\n    'alt': 18,\n    'pause': 19,\n    'capslock': 20,\n    'space': 32,\n    'escape': 27,\n    'pageup': 33,\n    'pagedown': 34,\n    'end': 35,\n    'home': 36,\n    'leftarrow': 37,\n    'uparrow': 38,\n    'rightarrow': 39,\n    'downarrow': 40,\n    'insert': 45,\n    'delete': 46,\n    'f1': 112,\n    'f2': 113,\n    'f3': 114,\n    'f4': 115,\n    'f5': 116,\n    'f6': 117,\n    'f7': 118,\n    'f8': 119,\n    'f9': 120,\n    'f10': 121,\n    'f11': 122,\n    'f12': 123,\n    'semicolon': 186,\n    'plus': 187,\n    'comma': 188,\n    'minus': 189,\n    'dot': 190,\n    'forwardslash': 191,\n    'graveaccent': 192,\n    'openbracket': 219,\n    'backslash': 220,\n    'closebracket': 221,\n    'singlequote': 222,\n    ']': 221,\n    '[': 219,\n    '=': 187\n};\n/**\n * KeyboardEvents class enables you to bind key action desired key combinations for ex., Ctrl+A, Delete, Alt+Space etc.\n * ```html\n * <div id='testEle'>  </div>;\n * <script>\n *   let node: HTMLElement = document.querySelector('#testEle');\n *   let kbInstance = new KeyboardEvents({\n *       element: node,\n *       keyConfigs:{ selectAll : 'ctrl+a' },\n *       keyAction: function (e:KeyboardEvent, action:string) {\n *           // handler function code\n *       }\n *   });\n * </script>\n * ```\n */\nvar KeyboardEvents = /** @class */ (function (_super) {\n    __extends(KeyboardEvents, _super);\n    /**\n     * Initializes the KeyboardEvents\n     * @param {HTMLElement} element\n     * @param {KeyboardEventsModel} options\n     */\n    function KeyboardEvents(element, options) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * To handle a key press event returns null\n         */\n        _this.keyPressHandler = function (e) {\n            var isAltKey = e.altKey;\n            var isCtrlKey = e.ctrlKey;\n            var isShiftKey = e.shiftKey;\n            var curkeyCode = e.which;\n            var keys = Object.keys(_this.keyConfigs);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                var configCollection = _this.keyConfigs[key].split(',');\n                for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {\n                    var rconfig = configCollection_1[_a];\n                    var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());\n                    if (isAltKey === rKeyObj.altKey && isCtrlKey === rKeyObj.ctrlKey &&\n                        isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {\n                        e.action = key;\n                    }\n                }\n            }\n            if (_this.keyAction) {\n                _this.keyAction(e);\n            }\n        };\n        _this.bind();\n        return _this;\n    }\n    KeyboardEvents_1 = KeyboardEvents;\n    /**\n     * Unwire bound events and destroy the instance.\n     * @return {void}\n     */\n    KeyboardEvents.prototype.destroy = function () {\n        this.unwireEvents();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Function can be used to specify certain action if a property is changed\n     * @param newProp\n     * @param oldProp\n     * @returns {void}\n     * @private\n     */\n    KeyboardEvents.prototype.onPropertyChanged = function (newProp, oldProp) {\n        // No code are needed\n    };\n    ;\n    KeyboardEvents.prototype.bind = function () {\n        this.wireEvents();\n    };\n    /**\n     * To get the module name, returns 'keyboard'.\n     * @private\n     */\n    KeyboardEvents.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * Wiring event handlers to events\n     */\n    KeyboardEvents.prototype.wireEvents = function () {\n        this.element.addEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * Unwiring event handlers to events\n     */\n    KeyboardEvents.prototype.unwireEvents = function () {\n        this.element.removeEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * To get the key configuration data\n     * @param {string} config - configuration data\n     * returns {KeyData}\n     */\n    KeyboardEvents.getKeyConfigData = function (config) {\n        if (config in this.configCache) {\n            return this.configCache[config];\n        }\n        var keys = config.toLowerCase().split('+');\n        var keyData = {\n            altKey: (keys.indexOf('alt') !== -1 ? true : false),\n            ctrlKey: (keys.indexOf('ctrl') !== -1 ? true : false),\n            shiftKey: (keys.indexOf('shift') !== -1 ? true : false),\n            keyCode: null\n        };\n        if (keys[keys.length - 1].length > 1 && !!Number(keys[keys.length - 1])) {\n            keyData.keyCode = Number(keys[keys.length - 1]);\n        }\n        else {\n            keyData.keyCode = KeyboardEvents_1.getKeyCode(keys[keys.length - 1]);\n        }\n        KeyboardEvents_1.configCache[config] = keyData;\n        return keyData;\n    };\n    // Return the keycode value as string \n    KeyboardEvents.getKeyCode = function (keyVal) {\n        return keyCode[keyVal] || keyVal.toUpperCase().charCodeAt(0);\n    };\n    var KeyboardEvents_1;\n    KeyboardEvents.configCache = {};\n    __decorate([\n        Property({})\n    ], KeyboardEvents.prototype, \"keyConfigs\", void 0);\n    __decorate([\n        Property('keyup')\n    ], KeyboardEvents.prototype, \"eventName\", void 0);\n    __decorate([\n        Event()\n    ], KeyboardEvents.prototype, \"keyAction\", void 0);\n    KeyboardEvents = KeyboardEvents_1 = __decorate([\n        NotifyPropertyChanges\n    ], KeyboardEvents);\n    return KeyboardEvents;\n}(Base));\nexport { KeyboardEvents };\n","import { select, detach, extend } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getIndex, toObjectLowerCase } from '../base/util';\nimport { templateItems, tools } from '../models/items';\n/**\n * `Color Picker` module is used to handle ColorPicker actions.\n */\nvar ColorPickerInput = /** @class */ (function () {\n    function ColorPickerInput(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    ColorPickerInput.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    ColorPickerInput.prototype.renderColorPickerInput = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var suffixID = args.containerType;\n        var tbElement = args.container;\n        templateItems.forEach(function (item) {\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'fontcolor':\n                        var targetID = _this.parent.getID() + '_' + suffixID + '_FontColor_Target';\n                        var fontNode = _this.parent.createElement('input');\n                        fontNode.id = targetID;\n                        fontNode.classList.add(classes.CLS_FONT_COLOR_TARGET);\n                        document.body.appendChild(fontNode);\n                        var args_1 = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_FontColor', tbElement),\n                            target: ('#' + targetID)\n                        };\n                        _this.fontColorPicker = _this.toolbarRenderer.renderColorPicker(args_1, 'fontcolor');\n                        _this.fontColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(args_1, 'fontcolor', _this.fontColorPicker);\n                        break;\n                    case 'backgroundcolor':\n                        targetID = _this.parent.getID() + '_' + suffixID + '_BackgroundColor_Target';\n                        var backNode = _this.parent.createElement('input');\n                        backNode.id = targetID;\n                        backNode.classList.add(classes.CLS_BACKGROUND_COLOR_TARGET);\n                        document.body.appendChild(backNode);\n                        args_1 = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_BackgroundColor', tbElement),\n                            target: ('#' + targetID)\n                        };\n                        _this.backgroundColorPicker = _this.toolbarRenderer.renderColorPicker(args_1, 'backgroundcolor');\n                        _this.backgroundColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(args_1, 'backgroundcolor', _this.backgroundColorPicker);\n                        break;\n                }\n            }\n        });\n    };\n    ColorPickerInput.prototype.destroy = function () {\n        this.removeEventListener();\n        this.destroyColorPicker();\n    };\n    ColorPickerInput.prototype.destroyColorPicker = function () {\n        if (this.fontColorPicker && !this.fontColorPicker.isDestroyed) {\n            this.fontColorPicker.destroy();\n        }\n        if (this.backgroundColorPicker && !this.backgroundColorPicker.isDestroyed) {\n            this.backgroundColorPicker.destroy();\n        }\n        if (this.fontColorDropDown && !this.fontColorDropDown.isDestroyed) {\n            var innerEle = this.fontColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                detach(innerEle);\n            }\n            this.fontColorDropDown.destroy();\n        }\n        if (this.backgroundColorDropDown && !this.backgroundColorDropDown.isDestroyed) {\n            var innerEle = this.backgroundColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                detach(innerEle);\n            }\n            this.backgroundColorDropDown.destroy();\n        }\n    };\n    ColorPickerInput.prototype.setRtl = function (args) {\n        if (this.fontColorPicker) {\n            this.fontColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.fontColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.backgroundColorPicker) {\n            this.backgroundColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.backgroundColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    ColorPickerInput.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRenderComplete, this.renderColorPickerInput, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.destroyColorPicker, this.destroyColorPicker, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    };\n    ColorPickerInput.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontColor':\n                    if (this.fontColorPicker) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontColor); _b < _c.length; _b++) {\n                            var font = _c[_b];\n                            switch (font) {\n                                case 'default':\n                                    this.fontColorPicker.setProperties({ value: newProp.fontColor.default });\n                                    var element = this.fontColorDropDown.element;\n                                    var fontBorder = element.querySelector('.' + this.tools['fontcolor'].icon);\n                                    fontBorder.style.borderBottomColor = newProp.fontColor.default;\n                                    break;\n                                case 'mode':\n                                    this.fontColorPicker.setProperties({ mode: newProp.fontColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.fontColorPicker.setProperties({ columns: newProp.fontColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.fontColorPicker.setProperties({ presetColors: newProp.fontColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.fontColorPicker.setProperties({ modeSwitcher: newProp.fontColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'backgroundColor':\n                    if (this.backgroundColorPicker) {\n                        for (var _d = 0, _e = Object.keys(newProp.backgroundColor); _d < _e.length; _d++) {\n                            var background = _e[_d];\n                            switch (background) {\n                                case 'default':\n                                    this.backgroundColorPicker.setProperties({ value: newProp.backgroundColor.default });\n                                    var element = this.backgroundColorDropDown.element;\n                                    var backgroundBorder = element.querySelector('.' + this.tools['backgroundcolor'].icon);\n                                    backgroundBorder.style.borderBottomColor = newProp.backgroundColor.default;\n                                    break;\n                                case 'mode':\n                                    this.backgroundColorPicker.setProperties({ mode: newProp.backgroundColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.backgroundColorPicker.setProperties({ columns: newProp.backgroundColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.backgroundColorPicker.setProperties({ presetColors: newProp.backgroundColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.backgroundColorPicker.setProperties({ modeSwitcher: newProp.backgroundColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    ColorPickerInput.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRenderComplete, this.renderColorPickerInput);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.destroyColorPicker, this.destroyColorPicker);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n    };\n    return ColorPickerInput;\n}());\nexport { ColorPickerInput };\n","import { detach, getUniqueID, append, closest, selectAll, select, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, Browser, isNullOrUndefined, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isCollide } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus } from '../base/util';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ColorPickerInput } from './color-picker';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar BaseQuickToolbar = /** @class */ (function () {\n    function BaseQuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.isDOMElement = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.popupRenderer = this.renderFactory.getRenderer(RenderType.Popup);\n        this.dropDownButtons = new DropDownButtons(this.parent, this.locator);\n        this.colorPickerObj = new ColorPickerInput(this.parent, this.locator);\n    }\n    BaseQuickToolbar.prototype.appendPopupContent = function () {\n        this.toolbarElement = this.parent.createElement('div', { className: classes.CLS_QUICK_TB });\n        this.element.appendChild(this.toolbarElement);\n    };\n    BaseQuickToolbar.prototype.render = function (args) {\n        var className;\n        if (args.popupType === 'Image') {\n            className = classes.CLS_IMAGE_POP;\n        }\n        else if (args.popupType === 'Inline') {\n            className = classes.CLS_INLINE_POP;\n        }\n        else {\n            className = '';\n        }\n        var popupId = getUniqueID(args.popupType + '_Quick_Popup');\n        this.stringItems = args.toolbarItems;\n        this.element = this.parent.createElement('div', { id: popupId, className: className + ' ' + classes.CLS_RTE_ELEMENTS });\n        this.element.setAttribute('aria-owns', this.parent.getID());\n        this.appendPopupContent();\n        this.createToolbar(args.toolbarItems, args.mode);\n        this.popupRenderer.renderPopup(this);\n        this.addEventListener();\n    };\n    BaseQuickToolbar.prototype.createToolbar = function (items, mode) {\n        this.quickTBarObj = new BaseToolbar(this.parent, this.locator);\n        this.quickTBarObj.render({\n            container: 'quick',\n            target: this.toolbarElement,\n            items: items,\n            mode: mode\n        });\n        this.quickTBarObj.toolbarObj.refresh();\n    };\n    BaseQuickToolbar.prototype.setPosition = function (e) {\n        var x;\n        var y;\n        var imgWrapper = closest(e.target, '.e-img-caption');\n        var target = !isNOU(imgWrapper) ? imgWrapper : e.target;\n        addClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n        var targetOffsetTop = target.offsetTop;\n        var parentOffsetTop = window.pageYOffset + e.parentData.top;\n        if ((targetOffsetTop - e.editTop) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) - e.popHeight - 5;\n        }\n        else if (((e.editTop + e.editHeight) - (targetOffsetTop + target.offsetHeight)) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) + target.offsetHeight + 5;\n        }\n        else {\n            y = e.y;\n        }\n        if (target.offsetWidth > e.popWidth) {\n            x = (target.offsetWidth / 2) - (e.popWidth / 2) + e.parentData.left + target.offsetLeft;\n        }\n        else {\n            x = e.parentData.left + target.offsetLeft;\n        }\n        this.popupObj.position.X = ((x + e.popWidth) > e.parentData.right) ? e.parentData.right - e.popWidth : x;\n        this.popupObj.position.Y = y;\n        this.popupObj.dataBind();\n        removeClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n    };\n    BaseQuickToolbar.prototype.checkCollision = function (e, viewPort, type) {\n        var x;\n        var y;\n        var parentTop = e.parentData.top;\n        var contentTop = e.windowY + parentTop + e.tBarElementHeight;\n        var collision = [];\n        if (viewPort === 'document') {\n            collision = isCollide(e.popup);\n        }\n        else {\n            collision = isCollide(e.popup, e.parentElement);\n        }\n        for (var i = 0; i < collision.length; i++) {\n            switch (collision[i]) {\n                case 'top':\n                    if (viewPort === 'document') {\n                        y = e.windowY;\n                    }\n                    else {\n                        y = (window.pageYOffset + parentTop) + e.tBarElementHeight;\n                    }\n                    break;\n                case 'bottom':\n                    var posY = void 0;\n                    if (viewPort === 'document') {\n                        if (type === 'inline') {\n                            posY = (e.y - e.popHeight - 10);\n                        }\n                        else {\n                            if ((e.windowHeight - (parentTop + e.tBarElementHeight)) > e.popHeight) {\n                                if ((contentTop - e.windowHeight) > e.popHeight) {\n                                    posY = (contentTop + (e.windowHeight - parentTop)) - e.popHeight;\n                                }\n                                else {\n                                    posY = contentTop;\n                                }\n                            }\n                            else {\n                                posY = e.windowY + (parentTop + e.tBarElementHeight);\n                            }\n                        }\n                    }\n                    else {\n                        if (e.target.tagName !== 'IMG') {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 10;\n                        }\n                        else {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 5;\n                        }\n                    }\n                    y = posY;\n                    break;\n                case 'right':\n                    if (type === 'inline') {\n                        x = e.windowWidth - (e.popWidth + e.bodyRightSpace + 10);\n                    }\n                    else {\n                        x = e.x - (e.popWidth + e.parentData.left);\n                    }\n                    break;\n                case 'left':\n                    if (type === 'inline') {\n                        x = 0;\n                    }\n                    else {\n                        x = e.parentData.left;\n                    }\n                    break;\n            }\n        }\n        this.popupObj.position.X = (x) ? x : this.popupObj.position.X;\n        this.popupObj.position.Y = (y) ? y : this.popupObj.position.Y;\n        this.popupObj.dataBind();\n    };\n    BaseQuickToolbar.prototype.showPopup = function (x, y, target) {\n        var editPanelTop;\n        var editPanelHeight;\n        var bodyStyle = window.getComputedStyle(document.body);\n        var bodyRight = parseFloat(bodyStyle.marginRight.split('px')[0]) + parseFloat(bodyStyle.paddingRight.split('px')[0]);\n        var windowHeight = window.innerHeight;\n        var windowWidth = window.innerWidth;\n        var parent = this.parent.element;\n        var toolbarAvail = !isNullOrUndefined(this.parent.getToolbar());\n        var tbHeight = toolbarAvail && this.parent.toolbarModule.getToolbarHeight();\n        var expTBHeight = toolbarAvail && this.parent.toolbarModule.getExpandTBarPopHeight();\n        var tBarHeight = (toolbarAvail) ? (tbHeight + expTBHeight) : 0;\n        addClass([this.element], [classes.CLS_HIDE]);\n        if (Browser.isDevice) {\n            addClass([this.parent.getToolbar()], [classes.CLS_HIDE]);\n        }\n        if (this.parent.iframeSettings.enable) {\n            var cntEle = this.contentRenderer.getPanel().contentWindow;\n            editPanelTop = cntEle.pageYOffset;\n            editPanelHeight = cntEle.innerHeight;\n        }\n        else {\n            var cntEle = closest(target, '.' + classes.CLS_RTE_CONTENT);\n            editPanelTop = (cntEle) ? cntEle.scrollTop : 0;\n            editPanelHeight = (cntEle) ? cntEle.offsetHeight : 0;\n        }\n        if (!this.parent.inlineMode.enable && !closest(target, 'table')) {\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n            this.parent.enableToolbarItem(['Undo', 'Redo']);\n        }\n        append([this.element], document.body);\n        this.popupObj.position.X = x + 20;\n        this.popupObj.position.Y = y + ((this.parent.iframeSettings.enable) ? 35 : 20);\n        this.popupObj.dataBind();\n        this.popupObj.show();\n        this.dropDownButtons.renderDropDowns({\n            container: this.toolbarElement,\n            containerType: 'quick',\n            items: this.stringItems\n        });\n        this.colorPickerObj.renderColorPickerInput({\n            container: this.toolbarElement,\n            containerType: 'quick',\n            items: this.stringItems\n        });\n        var showPopupData = {\n            x: x, y: y,\n            target: target,\n            editTop: editPanelTop,\n            editHeight: editPanelHeight,\n            popup: this.popupObj.element,\n            popHeight: this.popupObj.element.offsetHeight,\n            popWidth: this.popupObj.element.offsetWidth,\n            parentElement: parent,\n            bodyRightSpace: bodyRight,\n            windowY: window.pageYOffset,\n            windowHeight: windowHeight,\n            windowWidth: windowWidth,\n            parentData: parent.getBoundingClientRect(),\n            tBarElementHeight: tBarHeight\n        };\n        if (target.tagName === 'IMG') {\n            this.setPosition(showPopupData);\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.checkCollision(showPopupData, 'parent', '');\n        }\n        this.checkCollision(showPopupData, 'document', ((this.parent.inlineMode.enable) ? 'inline' : ''));\n        this.popupObj.hide();\n        removeClass([this.element], [classes.CLS_HIDE]);\n        this.popupObj.show({ name: 'ZoomIn', duration: 400 });\n        setStyleAttribute(this.element, {\n            maxWidth: this.parent.element.offsetWidth + 'px'\n        });\n        addClass([this.element], [classes.CLS_POP]);\n        this.isDOMElement = true;\n    };\n    BaseQuickToolbar.prototype.hidePopup = function () {\n        var viewSourcePanel = this.parent.sourceCodeModule.getViewPanel();\n        if (Browser.isDevice) {\n            removeClass([this.parent.getToolbar()], [classes.CLS_HIDE]);\n        }\n        if (!isNullOrUndefined(this.parent.getToolbar()) && !this.parent.inlineMode.enable) {\n            if (isNullOrUndefined(viewSourcePanel) || viewSourcePanel.style.display === 'none') {\n                this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n            }\n        }\n        this.removeEleFromDOM();\n        this.isDOMElement = false;\n    };\n    /**\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.addQTBarItem = function (item, index) {\n        this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(item, 'toolbar'), index);\n    };\n    /**\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.removeQTBarItem = function (index) {\n        this.quickTBarObj.toolbarObj.removeItems(index);\n    };\n    BaseQuickToolbar.prototype.removeEleFromDOM = function () {\n        var element = this.popupObj.element;\n        if (this.isDOMElement) {\n            this.dropDownButtons.destroyDropDowns();\n            this.colorPickerObj.destroyColorPicker();\n            removeClass([this.element], [classes.CLS_POP]);\n            detach(element);\n        }\n    };\n    BaseQuickToolbar.prototype.updateStatus = function (args) {\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownButtons,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.element),\n            tbItems: this.quickTBarObj.toolbarObj.items\n        };\n        setToolbarStatus(options, true);\n        if (!select('.e-rte-srctextarea', this.parent.element)) {\n            updateUndoRedoStatus(this.parent.getBaseToolbarObject(), this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * Destroys the Quick toolbar.\n     * @method destroy\n     * @return {void}\n     */\n    BaseQuickToolbar.prototype.destroy = function () {\n        if (this.popupObj && !this.popupObj.isDestroyed) {\n            this.popupObj.destroy();\n            this.removeEleFromDOM();\n        }\n        this.removeEventListener();\n    };\n    BaseQuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.inlineMode.enable) {\n            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        if (e.newProp.inlineMode.enable) {\n                            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n                        }\n                        else {\n                            this.parent.off(events.toolbarUpdated, this.updateStatus);\n                        }\n                        break;\n                }\n            }\n        }\n    };\n    BaseQuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.inlineMode.enable) {\n            this.parent.off(events.toolbarUpdated, this.updateStatus);\n        }\n    };\n    return BaseQuickToolbar;\n}());\nexport { BaseQuickToolbar };\n","import { Popup } from '@syncfusion/ej2-popups';\nimport { CLS_QUICK_POP } from '../base/classes';\nimport { popupOpen } from '../base/constant';\n/**\n * `Popup renderer` module is used to render popup in RichTextEditor.\n * @hidden\n */\nvar PopupRenderer = /** @class */ (function () {\n    /**\n     * Constructor for popup renderer module\n     */\n    function PopupRenderer(parent) {\n        this.parent = parent;\n    }\n    PopupRenderer.prototype.popupOpen = function () {\n        this.parent.notify(popupOpen, this);\n    };\n    PopupRenderer.prototype.renderPopup = function (args) {\n        this.setPanel(args.element);\n        this.renderPanel();\n        args.popupObj = new Popup(args.element, {\n            targetType: 'relative',\n            relateTo: this.parent.element,\n            open: this.popupOpen.bind(this)\n        });\n        this.popupObj = args.popupObj;\n        args.popupObj.hide();\n    };\n    /**\n     * The function is used to add popup class in Quick Toolbar\n     */\n    PopupRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_QUICK_POP);\n    };\n    /**\n     * Get the popup element of RichTextEditor\n     * @return {Element}\n     */\n    PopupRenderer.prototype.getPanel = function () {\n        return this.popupPanel;\n    };\n    /**\n     * Set the popup element of RichTextEditor\n     * @param  {Element} panel\n     */\n    PopupRenderer.prototype.setPanel = function (panel) {\n        this.popupPanel = panel;\n    };\n    return PopupRenderer;\n}());\nexport { PopupRenderer };\n","import { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar QuickToolbar = /** @class */ (function () {\n    function QuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n        this.addEventListener();\n    }\n    QuickToolbar.prototype.formatItems = function (items) {\n        var formattedItems = [];\n        items.forEach(function (item) {\n            if (typeof item === 'string') {\n                switch (item.toLocaleLowerCase()) {\n                    case 'open':\n                        formattedItems.push('openLink');\n                        break;\n                    case 'edit':\n                        formattedItems.push('editLink');\n                        break;\n                    case 'unlink':\n                        formattedItems.push('removeLink');\n                        break;\n                    default:\n                        formattedItems.push(item);\n                        break;\n                }\n            }\n            else {\n                formattedItems.push(item);\n            }\n        });\n        return formattedItems;\n    };\n    QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n        return {\n            popupType: popType,\n            toolbarItems: items,\n            mode: mode,\n            renderType: type\n        };\n    };\n    QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n        if (items.length < 1) {\n            return null;\n        }\n        var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n        qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n        return qTBar;\n    };\n    QuickToolbar.prototype.initializeQuickToolbars = function () {\n        this.parent.quickToolbarModule = this;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    };\n    QuickToolbar.prototype.onMouseDown = function (e) {\n        this.parent.isBlur = false;\n        this.parent.isRTE = true;\n    };\n    QuickToolbar.prototype.renderQuickToolbars = function () {\n        if (this.linkQTBar || this.imageQTBar || this.textQTBar || this.tableQTBar) {\n            return;\n        }\n        this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n        this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n        this.textQTBar = this.createQTBar('Text', 'Scrollable', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n        this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n        this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n        this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n        this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n        this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n        if (this.linkQTBar) {\n            EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.imageQTBar) {\n            EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.textQTBar) {\n            EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.tableQTBar) {\n            EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n    };\n    QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n        addClass([this.parent.element], [CLS_INLINE]);\n        this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n        this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n        EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n    };\n    QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n        this.inlineQTBar.showPopup(x, y, target);\n    };\n    QuickToolbar.prototype.hideInlineQTBar = function () {\n        if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n            this.inlineQTBar.hidePopup();\n        }\n    };\n    QuickToolbar.prototype.hideQuickToolbars = function () {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close')) {\n            this.textQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.deBounce = function (x, y, target) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () { _this.showInlineQTBar(x, y, target); }, 1000);\n    };\n    QuickToolbar.prototype.mouseUpHandler = function (e) {\n        var args = e.args;\n        var range = this.parent.getRange();\n        var target = args.target;\n        if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n            this.hideInlineQTBar();\n            this.offsetX = args.pageX;\n            this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n            if (target.nodeName === 'TEXTAREA') {\n                this.showInlineQTBar(this.offsetX, this.offsetY, target);\n            }\n            else {\n                var closestAnchor = closest(target, 'a');\n                target = closestAnchor ? closestAnchor : target;\n                if (target.tagName !== 'IMG' && target.tagName !== 'A' && (!closest(target, 'td,th') || !range.collapsed)) {\n                    if (this.parent.inlineMode.onSelection && range.collapsed) {\n                        return;\n                    }\n                    this.target = target;\n                    this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                }\n            }\n        }\n    };\n    QuickToolbar.prototype.keyDownHandler = function () {\n        if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n        if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.keyUpHandler = function (e) {\n        if (this.parent.inlineMode.onSelection) {\n            return;\n        }\n        var args = e.args;\n        this.deBounce(this.offsetX, this.offsetY, args.target);\n    };\n    QuickToolbar.prototype.getInlineBaseToolbar = function () {\n        return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    QuickToolbar.prototype.destroy = function () {\n        if (this.linkQTBar) {\n            EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n            this.linkQTBar.destroy();\n        }\n        if (this.textQTBar) {\n            EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n            this.textQTBar.destroy();\n        }\n        if (this.imageQTBar) {\n            EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n            this.imageQTBar.destroy();\n        }\n        if (this.tableQTBar) {\n            EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n            this.tableQTBar.destroy();\n        }\n        if (this.inlineQTBar) {\n            EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n            this.inlineQTBar.destroy();\n        }\n        this.removeEventListener();\n    };\n    QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n        this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n        this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n        this.parent.on(events.keyDown, this.keyDownHandler, this);\n        this.parent.on(events.keyUp, this.keyUpHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n        this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n    };\n    QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n        this.parent.off(events.mouseUp, this.mouseUpHandler);\n        this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n        this.parent.off(events.keyDown, this.keyDownHandler);\n        this.parent.off(events.keyUp, this.keyUpHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n        this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n    };\n    QuickToolbar.prototype.toolbarUpdated = function (args) {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n    };\n    QuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n        this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n        this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            this.wireInlineQTBarEvents();\n        }\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n        }\n        this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n    };\n    QuickToolbar.prototype.onKeyDown = function (e) {\n        var args = e.args;\n        if (args.which === 8 || args.which === 46) {\n            if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n                this.imageQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.onIframeMouseDown = function () {\n        this.hideQuickToolbars();\n        this.hideInlineQTBar();\n    };\n    QuickToolbar.prototype.setRtl = function (args) {\n        if (this.inlineQTBar) {\n            this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.linkQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    QuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n        this.parent.off(events.mouseDown, this.renderQuickToolbars);\n        this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            this.unWireInlineQTBarEvents();\n        }\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.off(events.scroll, this.hideQuickToolbars);\n        }\n        this.parent.off(events.focusChange, this.hideQuickToolbars);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    QuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'actionOnScroll':\n                        if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n                            this.parent.off(events.scroll, this.hideQuickToolbars);\n                        }\n                        else {\n                            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n                        }\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.inlineQTBar) {\n            removeClass([this.parent.element], [CLS_INLINE]);\n            this.unWireInlineQTBarEvents();\n            this.hideInlineQTBar();\n        }\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.wireInlineQTBarEvents();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    QuickToolbar.prototype.getModuleName = function () {\n        return 'quickToolbar';\n    };\n    return QuickToolbar;\n}());\nexport { QuickToolbar };\n","import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\nvar Count = /** @class */ (function () {\n    function Count(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Count.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editPanel = this.contentRenderer.getEditPanel();\n    };\n    Count.prototype.renderCount = function () {\n        this.initializeInstance();\n        this.element = this.parent.createElement('span', { className: CLS_COUNT });\n        this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n        this.appendCount();\n        if (this.parent.maxLength !== -1) {\n            this.charCountBackground(this.htmlLength);\n        }\n    };\n    Count.prototype.appendCount = function () {\n        var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value.trim() :\n            this.editPanel.textContent.trim();\n        this.htmlLength = htmlText.length;\n        var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n        this.element.innerHTML = string;\n    };\n    Count.prototype.charCountBackground = function (htmlLength) {\n        var percentage = (htmlLength / this.parent.maxLength) * 100;\n        if (percentage < 85) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.remove(CLS_ERROR);\n        }\n        else if (percentage > 85 && percentage <= 90) {\n            this.element.classList.remove(CLS_ERROR);\n            this.element.classList.add(CLS_WARNING);\n        }\n        else if (percentage > 90) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.add(CLS_ERROR);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Count.prototype.refresh = function () {\n        if (!isNullOrUndefined(this.editPanel)) {\n            this.appendCount();\n            if (this.parent.maxLength !== -1) {\n                this.charCountBackground(this.htmlLength);\n            }\n        }\n    };\n    Count.prototype.restrict = function (e) {\n        if (this.parent.showCharCount) {\n            var element = e.args.currentTarget.textContent.trim();\n            var array = [8, 16, 17, 37, 38, 39, 40, 65];\n            var arrayKey = void 0;\n            for (var i = 0; i <= array.length - 1; i++) {\n                if (e.args.which === array[i]) {\n                    if (e.args.ctrlKey && e.args.which === 65) {\n                        return;\n                    }\n                    else if (e.args.which !== 65) {\n                        arrayKey = array[i];\n                        return;\n                    }\n                }\n            }\n            if ((element.length >= this.parent.maxLength && this.parent.maxLength !== -1) && e.args.which !== arrayKey) {\n                e.args.preventDefault();\n            }\n        }\n    };\n    /**\n     * Destroys the Count.\n     * @method destroy\n     * @return {void}\n     */\n    Count.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Count.prototype.toggle = function (e) {\n        this.element.style.display = (e.member === 'viewSource') ? 'none' : 'block';\n    };\n    Count.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.showCharCount) {\n            this.parent.on(events.initialEnd, this.renderCount, this);\n            this.parent.on(events.keyUp, this.refresh, this);\n            this.parent.on(events.keyDown, this.restrict, this);\n            this.parent.on(events.count, this.refresh, this);\n            this.parent.on(events.refreshBegin, this.refresh, this);\n            this.parent.on(events.mouseDown, this.refresh, this);\n            this.parent.on(events.destroy, this.destroy, this);\n            this.parent.on(events.sourceCode, this.toggle, this);\n            this.parent.on(events.updateSource, this.toggle, this);\n        }\n    };\n    Count.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        detach(this.element);\n        this.parent.off(events.initialEnd, this.renderCount);\n        this.parent.off(events.keyUp, this.refresh);\n        this.parent.off(events.refreshBegin, this.refresh);\n        this.parent.off(events.keyDown, this.restrict);\n        this.parent.off(events.count, this.refresh);\n        this.parent.off(events.mouseDown, this.refresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.sourceCode, this.toggle);\n        this.parent.off(events.updateSource, this.toggle);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Count.prototype.getModuleName = function () {\n        return 'count';\n    };\n    return Count;\n}());\nexport { Count };\n","/**\n * MarkdownSelection internal module\n * @hidden\n */\nvar MarkdownSelection = /** @class */ (function () {\n    function MarkdownSelection() {\n    }\n    MarkdownSelection.prototype.getLineNumber = function (textarea, point) {\n        return textarea.value.substr(0, point).split('\\n').length;\n    };\n    MarkdownSelection.prototype.getSelectedText = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        return textarea.value.substring(start, end);\n    };\n    MarkdownSelection.prototype.getAllParents = function (value) {\n        return value.split('\\n');\n    };\n    MarkdownSelection.prototype.getSelectedLine = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var index = this.getLineNumber(textarea, textarea.selectionStart);\n        return lines[index - 1];\n    };\n    MarkdownSelection.prototype.getLine = function (textarea, index) {\n        var lines = this.getAllParents(textarea.value);\n        return lines[index];\n    };\n    MarkdownSelection.prototype.getSelectedParentPoints = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var start = this.getLineNumber(textarea, textarea.selectionStart);\n        var end = this.getLineNumber(textarea, textarea.selectionEnd);\n        var parents = this.getSelectedText(textarea).split('\\n');\n        var selectedPoints = [];\n        var selectedLine = lines[start - 1];\n        var startLength = lines.slice(0, start - 1).join('').length;\n        var firstPoint = {};\n        firstPoint.line = start - 1;\n        firstPoint.start = startLength + firstPoint.line;\n        firstPoint.end = selectedLine !== '' ? firstPoint.start +\n            selectedLine.length + 1 : firstPoint.start + selectedLine.length;\n        firstPoint.text = selectedLine;\n        selectedPoints.push(firstPoint);\n        if (parents.length > 1) {\n            for (var i = 1; i < parents.length - 1; i++) {\n                var points = {};\n                points.line = selectedPoints[i - 1].line + 1;\n                points.start = parents[i] !== '' ? selectedPoints[i - 1].end : selectedPoints[i - 1].end;\n                points.end = points.start + parents[i].length + 1;\n                points.text = parents[i];\n                selectedPoints.push(points);\n            }\n            var lastPoint = {};\n            lastPoint.line = selectedPoints[selectedPoints.length - 1].line + 1;\n            lastPoint.start = selectedPoints[selectedPoints.length - 1].end;\n            lastPoint.end = lastPoint.start + lines[end - 1].length + 1;\n            lastPoint.text = lines[end - 1];\n            selectedPoints.push(lastPoint);\n        }\n        return selectedPoints;\n    };\n    MarkdownSelection.prototype.setSelection = function (textarea, start, end) {\n        textarea.setSelectionRange(start, end);\n        textarea.focus();\n    };\n    MarkdownSelection.prototype.save = function (start, end) {\n        this.selectionStart = start;\n        this.selectionEnd = end;\n    };\n    MarkdownSelection.prototype.restore = function (textArea) {\n        this.setSelection(textArea, this.selectionStart, this.selectionEnd);\n    };\n    MarkdownSelection.prototype.isStartWith = function (line, command) {\n        var isStart = false;\n        if (line) {\n            var reg = line.trim() === command.trim() ?\n                new RegExp('^(' + this.replaceSpecialChar(command.trim()) + ')', 'gim') :\n                new RegExp('^(' + this.replaceSpecialChar(command) + ')', 'gim');\n            isStart = reg.test(line.trim());\n        }\n        return isStart;\n    };\n    MarkdownSelection.prototype.replaceSpecialChar = function (value) {\n        return value.replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/g, '\\\\$&');\n    };\n    MarkdownSelection.prototype.isClear = function (parents, regex) {\n        var isClear = false;\n        for (var i = 0; i < parents.length; i++) {\n            if (new RegExp(regex, 'gim').test(parents[i].text)) {\n                return true;\n            }\n        }\n        return isClear;\n    };\n    MarkdownSelection.prototype.getRegex = function (syntax) {\n        syntax = this.replaceSpecialChar(syntax);\n        var regex = '^(' + syntax + ')|^(' + syntax.trim() + ')';\n        return new RegExp(regex);\n    };\n    MarkdownSelection.prototype.getSelectedInlinePoints = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        var selection = this.getSelectedText(textarea);\n        return { start: start, end: end, text: selection };\n    };\n    return MarkdownSelection;\n}());\nexport { MarkdownSelection };\n","import { MarkdownSelection } from '../../markdown-parser/plugin/markdown-selection';\nimport * as events from '../base/constant';\n/**\n * MarkdownToolbarStatus module for refresh the toolbar status\n */\nvar MarkdownToolbarStatus = /** @class */ (function () {\n    function MarkdownToolbarStatus(parent) {\n        this.toolbarStatus = {\n            bold: false,\n            italic: false,\n            subscript: false,\n            superscript: false,\n            strikethrough: false,\n            orderedlist: false,\n            uppercase: false,\n            inlinecode: false,\n            unorderedlist: false,\n            underline: false,\n            alignments: null,\n            backgroundcolor: null,\n            fontcolor: null,\n            fontname: null,\n            fontsize: null,\n            formats: null\n        };\n        this.selection = new MarkdownSelection();\n        this.parent = parent;\n        this.element = this.parent.contentModule.getEditPanel();\n        this.addEventListener();\n    }\n    MarkdownToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    MarkdownToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n        this.parent.off(events.destroy, this.onRefreshHandler);\n    };\n    MarkdownToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var parentsLines = this.selection.getSelectedParentPoints(this.element);\n        this.toolbarStatus = {\n            orderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'OL'),\n            unorderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'UL'),\n            formats: this.currentFormat(parentsLines, args.documentNode),\n            bold: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Bold'),\n            italic: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Italic'),\n            inlinecode: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode'),\n            strikethrough: args.documentNode ? false :\n                this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('StrikeThrough'),\n            subscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SubScript'),\n            superscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SuperScript'),\n            uppercase: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('UpperCase')\n        };\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n    };\n    MarkdownToolbarStatus.prototype.isListsApplied = function (lines, type) {\n        var isApply = true;\n        for (var i = 0; i < lines.length; i++) {\n            if (!this.selection.isStartWith(lines[i].text, this.parent.formatter.listTags[type])) {\n                isApply = false;\n                break;\n            }\n        }\n        return isApply;\n    };\n    MarkdownToolbarStatus.prototype.currentFormat = function (lines, documentNode) {\n        var format = 'p';\n        var keys = Object.keys(this.parent.formatter.formatTags);\n        var direction = this.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.parent.formatter.formatTags[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                var parentLines = this.selection.getAllParents(this.element.value);\n                var firstPrevText = parentLines[lines[0].line - 1];\n                var lastNextText = parentLines[lines.length + 1];\n                if (this.selection.isStartWith(firstPrevText, this.parent.formatter.formatTags[keys[i]].split('\\n')[0]) &&\n                    this.selection.isStartWith(lastNextText, this.parent.formatter.formatTags[keys[i]].split('\\n')[0])) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    return MarkdownToolbarStatus;\n}());\nexport { MarkdownToolbarStatus };\n","import * as events from '../base/constant';\n/**\n * `ExecCommandCallBack` module is used to run the editor manager command\n */\nvar ExecCommandCallBack = /** @class */ (function () {\n    function ExecCommandCallBack(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ExecCommandCallBack.prototype.addEventListener = function () {\n        this.parent.on(events.execCommandCallBack, this.commandCallBack, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ExecCommandCallBack.prototype.commandCallBack = function (args) {\n        if (args.requestType !== 'Undo' && args.requestType !== 'Redo') {\n            this.parent.formatter.saveData();\n        }\n        this.parent.notify(events.toolbarRefresh, { args: args });\n        this.parent.notify(events.count, {});\n    };\n    ExecCommandCallBack.prototype.removeEventListener = function () {\n        this.parent.off(events.execCommandCallBack, this.commandCallBack);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ExecCommandCallBack;\n}());\nexport { ExecCommandCallBack };\n","/**\n * Constant values for Common\n */\n/* Keydown event trigger\n * @hidden\n */\nexport var KEY_DOWN = 'keydown';\n/* Undo and Redo action HTML plugin events\n * @hidden\n */\nexport var ACTION = 'action';\n/* Formats plugin events\n * @hidden\n */\nexport var FORMAT_TYPE = 'format-type';\n/* Keydown handler event trigger\n * @hidden\n */\nexport var KEY_DOWN_HANDLER = 'keydown-handler';\n/* List plugin events\n * @hidden\n */\nexport var LIST_TYPE = 'list-type';\n/* Keyup handler event trigger\n * @hidden\n */\nexport var KEY_UP_HANDLER = 'keyup-handler';\n/* Keyup event trigger\n * @hidden\n */\nexport var KEY_UP = 'keyup';\n/* Model changed plugin event trigger\n * @hidden\n */\nexport var MODEL_CHANGED_PLUGIN = 'model_changed_plugin';\n/* Model changed event trigger\n * @hidden\n */\nexport var MODEL_CHANGED = 'model_changed';\n","import { extend, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n * @hidden\n */\nvar Formatter = /** @class */ (function () {\n    function Formatter() {\n    }\n    /**\n     * To execute the command\n     * @param  {IRichTextEditor} self\n     * @param  {ActionBeginEventArgs} args\n     * @param  {MouseEvent|KeyboardEvent} event\n     * @param  {NotifyArgs} value\n     */\n    Formatter.prototype.process = function (self, args, event, value) {\n        var selection = self.contentModule.getDocument().getSelection();\n        var range = (selection.rangeCount > 0) ? selection.getRangeAt(selection.rangeCount - 1) : null;\n        if (!isNullOrUndefined(args)\n            && args.item.command\n            && args.item.command !== 'Table'\n            && args.item.command !== 'Actions'\n            && args.item.command !== 'Links'\n            && args.item.command !== 'Images'\n            && range\n            && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer))\n                || self.contentModule.getEditPanel() === range.commonAncestorContainer\n                || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n            return;\n        }\n        if (isNullOrUndefined(args)) {\n            var action = event.action;\n            if (action !== 'tab' && action !== 'enter' && action !== 'space' && action !== 'escape') {\n                args = {};\n                var items = {\n                    originalEvent: event, cancel: false,\n                    requestType: action || (event.key + 'Key'),\n                    itemCollection: value\n                };\n                extend(args, args, items, true);\n                self.trigger(CONSTANT.actionBegin, args);\n                if (args.cancel) {\n                    if (action === 'paste' || action === 'cut' || action === 'copy') {\n                        event.preventDefault();\n                    }\n                    return;\n                }\n            }\n            this.editorManager.observer.notify((event.type === 'keydown' ? KEY_DOWN : KEY_UP), {\n                event: event,\n                callBack: this.onSuccess.bind(this, self),\n                value: value\n            });\n        }\n        else if (!isNullOrUndefined(args) && args.item.command && args.item.subCommand && ((args.item.command !== args.item.subCommand\n            && args.item.command !== 'Font')\n            || ((args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect')\n            || ((args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor')\n                && args.name === 'colorPickerChanged'))) {\n            extend(args, args, { requestType: args.item.subCommand, cancel: false, itemCollection: value }, true);\n            self.trigger(CONSTANT.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            if (this.getUndoRedoStack().length === 0 && args.item.command !== 'Links' && args.item.command !== 'Images') {\n                this.saveData();\n            }\n            self.isBlur = false;\n            self.contentModule.getEditPanel().focus();\n            var command = args.item.subCommand.toLocaleLowerCase();\n            if (command === 'paste' || command === 'cut' || command === 'copy') {\n                self.clipboardAction(command, event);\n            }\n            else {\n                this.editorManager.observer.notify(CONSTANT.checkUndo, { subCommand: args.item.subCommand });\n                this.editorManager.execCommand(args.item.command, args.item.subCommand, event, this.onSuccess.bind(this, self), args.item.value, value);\n            }\n        }\n        this.enableUndo(self);\n    };\n    Formatter.prototype.getAncestorNode = function (node) {\n        node = node.nodeType === 3 ? node.parentNode : node;\n        return node;\n    };\n    Formatter.prototype.onKeyHandler = function (self, e) {\n        var _this = this;\n        this.editorManager.observer.notify(KEY_UP, {\n            event: e, callBack: function () {\n                _this.enableUndo(self);\n            }\n        });\n    };\n    Formatter.prototype.onSuccess = function (self, events) {\n        this.enableUndo(self);\n        self.notify(CONSTANT.execCommandCallBack, events);\n        self.trigger(CONSTANT.actionComplete, events);\n        if (events.requestType === 'Images' || events.requestType === 'Links' && self.editorMode === 'HTML') {\n            var args = events;\n            if (events.requestType === 'Links' && events.event &&\n                events.event.type === 'keydown' &&\n                events.event.keyCode === 32) {\n                return;\n            }\n            self.notify(CONSTANT.insertCompleted, {\n                args: args.event, type: events.requestType, isNotify: true,\n                elements: args.elements\n            });\n        }\n        self.autoResize();\n    };\n    /**\n     * Save the data for undo and redo action.\n     */\n    Formatter.prototype.saveData = function (e) {\n        this.editorManager.undoRedoManager.saveData(e);\n    };\n    Formatter.prototype.getUndoStatus = function () {\n        return this.editorManager.undoRedoManager.getUndoStatus();\n    };\n    Formatter.prototype.getUndoRedoStack = function () {\n        return this.editorManager.undoRedoManager.undoRedoStack;\n    };\n    Formatter.prototype.enableUndo = function (self) {\n        var status = this.getUndoStatus();\n        if (self.inlineMode.enable && !Browser.isDevice) {\n            updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n        }\n        else {\n            if (self.toolbarModule) {\n                updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n            }\n        }\n    };\n    return Formatter;\n}());\nexport { Formatter };\n","/**\n * Constant values for Markdown Parser\n */\n/* List plugin events\n * @hidden\n */\nexport var LISTS_COMMAND = 'lists-commands';\n/* selectioncommand plugin events\n * @hidden\n */\nexport var selectionCommand = 'command-type';\n/* Link plugin events\n * @hidden\n */\nexport var LINK_COMMAND = 'link-commands';\n/* Clear plugin events\n * @hidden\n */\nexport var CLEAR_COMMAND = 'clear-commands';\n/* Table plugin events\n * @hidden\n */\nexport var MD_TABLE = 'insert-table';\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * Lists internal component\n * @hidden\n */\nvar MDLists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     * @hidden\n     */\n    function MDLists(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLists.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LISTS_COMMAND, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.keyUpHandler, this);\n    };\n    MDLists.prototype.keyDownHandler = function (event) {\n        switch (event.event.which) {\n            case 9:\n                this.tabKey(event);\n                break;\n        }\n        switch (event.event.action) {\n            case 'ordered-list':\n                this.applyListsHandler({ subCommand: 'OL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n            case 'unordered-list':\n                this.applyListsHandler({ subCommand: 'UL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n        }\n    };\n    MDLists.prototype.keyUpHandler = function (event) {\n        switch (event.event.which) {\n            case 13:\n                this.enterKey(event);\n                break;\n        }\n    };\n    MDLists.prototype.tabKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var addedLength = 0;\n        var isNotFirst = this.isNotFirstLine(textArea, parents[0]);\n        if (!isNotFirst && !event.event.shiftKey) {\n            this.restore(textArea, start, end + addedLength, event);\n            return;\n        }\n        var regex = this.getListRegex();\n        this.currentAction = this.getAction(parents[0].text);\n        for (var i = 0; i < parents.length; i++) {\n            var prevIndex = event.event.shiftKey ? parents[i].line : parents[i].line - 1;\n            var prevLine = this.selection.getLine(textArea, prevIndex);\n            if (prevLine && (!event.event.shiftKey && isNotFirst || (event.event.shiftKey && /^(\\t)/.test(prevLine)))) {\n                prevLine = prevLine.trim();\n                if (regex.test(prevLine)) {\n                    event.event.preventDefault();\n                    var tabSpace = '\\t';\n                    var tabSpaceLength = event.event.shiftKey ? -tabSpace.length : tabSpace.length;\n                    var splitTab = parents[i].text.split('\\t');\n                    parents[i].text = event.event.shiftKey ? splitTab.splice(1, splitTab.length).join('\\t') : tabSpace + parents[i].text;\n                    textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                        textArea.value.substr(parents[i].end, textArea.value.length);\n                    start = i === 0 ? start + tabSpaceLength : start;\n                    addedLength += tabSpaceLength;\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? parents[j].start + tabSpaceLength : parents[j].start;\n                            parents[j].end = parents[j].end + tabSpaceLength;\n                        }\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, event);\n    };\n    MDLists.prototype.getTabSpace = function (line) {\n        var split = line.split('\\t');\n        var tabs = '';\n        for (var i = 0; i < split.length; i++) {\n            if (split[i] === '') {\n                tabs += '\\t';\n            }\n            else {\n                break;\n            }\n        }\n        return tabs;\n    };\n    MDLists.prototype.isNotFirstLine = function (textArea, points) {\n        var currentLine = points.text;\n        var prevIndex = points.line - 1;\n        var prevLine = this.selection.getLine(textArea, prevIndex);\n        var regex = this.getListRegex();\n        var isNotFirst = false;\n        if (prevLine && regex.test(prevLine.trim())) {\n            var curTabSpace = this.getTabSpace(currentLine);\n            var prevTabSpace = this.getTabSpace(prevLine);\n            isNotFirst = curTabSpace === prevTabSpace ? true : isNotFirst;\n            for (; prevTabSpace.length > curTabSpace.length; null) {\n                prevIndex = prevIndex - 1;\n                prevLine = this.selection.getLine(textArea, prevIndex);\n                if (regex.test(prevLine.trim())) {\n                    prevTabSpace = this.getTabSpace(prevLine);\n                    if (prevTabSpace.length <= curTabSpace.length) {\n                        isNotFirst = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return isNotFirst;\n    };\n    MDLists.prototype.getAction = function (line) {\n        var ol = line.trim().split(new RegExp('^(' + this.selection.replaceSpecialChar(this.syntax.OL) + ')'))[1];\n        var ul = line.trim().split(new RegExp('^(' + this.selection.replaceSpecialChar(this.syntax.UL) + ')'))[1];\n        return (ol ? 'OL' : 'UL');\n    };\n    MDLists.prototype.enterKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prevLine = this.selection.getLine(textArea, parents[0].line - 1);\n        var regex = this.getListRegex();\n        if (regex.test(prevLine.trim()) && prevLine.trim().replace(regex, '') !== '') {\n            var addedLength = 0;\n            var tabSpace = this.getTabSpace(prevLine);\n            this.currentAction = this.getAction(prevLine);\n            var prefix = this.syntax[this.currentAction];\n            parents[0].text = tabSpace + prefix + parents[0].text;\n            textArea.value = textArea.value.substr(0, parents[0].start) + parents[0].text +\n                textArea.value.substr(parents[0].end, textArea.value.length);\n            start = start + prefix.length + tabSpace.length;\n            addedLength += prefix.length + tabSpace.length;\n            this.restore(textArea, start, end + addedLength, event);\n        }\n    };\n    MDLists.prototype.applyListsHandler = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        this.currentAction = e.subCommand;\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var startLength = 0;\n        var endLength = 0;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prefix = '';\n        var regex = this.syntax[this.currentAction];\n        for (var i = 0; i < parents.length; i++) {\n            if (!this.selection.isStartWith(parents[i].text, regex)) {\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n                var replace = this.appliedLine(parents[i].text);\n                prefix = replace.line ? prefix : this.syntax[this.currentAction];\n                parents[i].text = replace.line ? replace.line : prefix + parents[i].text;\n                replace.space = replace.space ? replace.space : 0;\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? (start + prefix.length + replace.space) > 0 ?\n                    start + prefix.length + replace.space : 0 : start;\n                addedLength += prefix.length + replace.space;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? prefix.length +\n                            parents[j].start + replace.space : parents[j].start;\n                        parents[j].end = prefix.length + parents[j].end + replace.space;\n                    }\n                }\n                this.restore(textArea, start, end + addedLength, e);\n            }\n            else {\n                parents[i].text = parents[i].text.replace(regex, '');\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end + endLength, textArea.value.length);\n                endLength -= this.syntax[this.currentAction].length;\n                startLength = this.syntax[this.currentAction].length;\n                this.restore(textArea, start - startLength, end + endLength, e);\n            }\n        }\n    };\n    MDLists.prototype.appliedLine = function (line) {\n        var points = {};\n        var regex = this.getListRegex();\n        var isExist = regex.test(line.trim()) || line.trim() === this.syntax.OL.trim()\n            || line.trim() === this.syntax.UL.trim();\n        if (isExist) {\n            var replace = void 0;\n            var pattern = void 0;\n            var space = 0;\n            if (this.selection.getRegex(this.syntax.OL).test(line.trim())) {\n                pattern = this.selection.getRegex(this.syntax.OL);\n                replace = this.syntax.UL;\n                points.space = this.syntax.UL.length - this.syntax.OL.length;\n            }\n            else {\n                pattern = this.selection.getRegex(this.syntax.UL);\n                replace = this.syntax.OL;\n                points.space = this.syntax.OL.length - this.syntax.UL.length;\n            }\n            points.line = this.getTabSpace(line) + line.trim().replace(pattern, replace);\n        }\n        return points;\n    };\n    MDLists.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDLists.prototype.getListRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length; j++) {\n            var syntax = this.selection.replaceSpecialChar(this.syntax[configKey[j]]);\n            regex += regex === '' ? '^(' + syntax + ')|^(' + syntax.trim() + ')' :\n                '|^(' + syntax + ')|^(' + syntax.trim() + ')';\n        }\n        return new RegExp(regex);\n    };\n    return MDLists;\n}());\nexport { MDLists };\n","import { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport * as CONSTANT from './../../markdown-parser/base/constant';\n/**\n * MDFormats internal plugin\n * @hidden\n */\nvar MDFormats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDFormats(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n    };\n    MDFormats.prototype.applyFormats = function (e) {\n        e.subCommand = e.subCommand.toLowerCase();\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        if (this.isAppliedFormat(parents) === e.subCommand) {\n            if (e.subCommand === 'pre') {\n                if (parents.length > 1) {\n                    this.applyCodeBlock(textArea, e, parents);\n                }\n                else {\n                    return;\n                }\n            }\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        if (e.subCommand === 'p') {\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        else {\n            this.cleanFormat(textArea, e.subCommand);\n        }\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        parents = this.selection.getSelectedParentPoints(textArea);\n        if (e.subCommand === 'pre') {\n            if (parents.length > 1) {\n                this.applyCodeBlock(textArea, e, parents);\n            }\n            else {\n                extend(e, e, { subCommand: 'InlineCode' }, true);\n                this.parent.observer.notify(CONSTANT.selectionCommand, e);\n            }\n            return;\n        }\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i].text !== '' && !this.selection.isStartWith(parents[i].text, '\\\\' + this.syntax[e.subCommand])) {\n                parents[i].text = this.syntax[e.subCommand] + parents[i].text;\n                textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? start + this.syntax[e.subCommand].length : start;\n                addedLength += this.syntax[e.subCommand].length;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ?\n                            this.syntax[e.subCommand].length + parents[j].start : parents[j].start;\n                        parents[j].end = this.syntax[e.subCommand].length + parents[j].end;\n                    }\n                }\n            }\n            else if (parents[i].text === '' && i === 0) {\n                this.selection.save(start, end);\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                        parents[j].end = 1 + parents[j].end;\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, e);\n    };\n    MDFormats.prototype.clearRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length && configKey[j] !== 'pre' && configKey[j] !== 'p'; j++) {\n            regex += regex === '' ? '^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')' :\n                '|^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')';\n        }\n        return regex;\n    };\n    MDFormats.prototype.cleanFormat = function (textArea, command) {\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var removeLength = 0;\n        if (this.selection.isClear(parents, this.clearRegex())) {\n            for (var i = 0; i < parents.length; i++) {\n                var configKey = Object.keys(this.syntax);\n                for (var j = 0; parents[i].text !== '' && j < configKey.length; j++) {\n                    var removeText = this.syntax[configKey[j]];\n                    if (configKey[j] === command) {\n                        continue;\n                    }\n                    var regex = new RegExp('^(' + this.selection.replaceSpecialChar(removeText) + ')', 'gim');\n                    if (regex.test(parents[i].text)) {\n                        parents[i].text = parents[i].text.replace(regex, '');\n                        textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                            textArea.value.substr(parents[i].end, textArea.value.length);\n                        start = i === 0 ? (start - (removeText.length)) > 0 ? start - (removeText.length) : 0 : start;\n                        removeLength += removeText.length;\n                        if (parents.length !== 1) {\n                            for (var k = 0; k < parents.length; k++) {\n                                parents[k].start = k !== 0 ?\n                                    parents[k].start - removeText.length : parents[k].start;\n                                parents[k].end = parents[k].end - removeText.length;\n                            }\n                        }\n                        break;\n                    }\n                }\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n            }\n            this.restore(textArea, start, end - removeLength);\n        }\n    };\n    MDFormats.prototype.applyCodeBlock = function (textArea, event, parents) {\n        var command = event.subCommand;\n        var start = parents[0].start;\n        var end = parents[parents.length - 1].end;\n        var parentLines = this.selection.getAllParents(textArea.value);\n        var firstPrevText = parentLines[parents[0].line - 1];\n        var lastNextText = parentLines[(parents.length + 1) + 1];\n        var addedLength = 0;\n        if (!this.selection.isStartWith(firstPrevText, this.syntax.pre.split('\\n')[0]) &&\n            !this.selection.isStartWith(lastNextText, this.syntax.pre.split('\\n')[0])) {\n            var lines = textArea.value.substring(start, end).split('\\n');\n            var lastLine = lines[lines.length - 1] === '' ? '' : '\\n';\n            textArea.value = textArea.value.substr(0, start) + this.syntax[command] + textArea.value.substring(start, end) +\n                lastLine + this.syntax[command] +\n                textArea.value.substr(end, textArea.value.length);\n            start = this.selection.selectionStart + this.syntax[command].length;\n            end = this.selection.selectionEnd + this.syntax[command].length - 1;\n        }\n        else {\n            var cmd = this.syntax[command];\n            var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n            var startNo = textArea.value.substr(0, textArea.selectionStart).lastIndexOf(cmd);\n            var endNo = textArea.value.substr(textArea.selectionEnd, textArea.selectionEnd).indexOf(cmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), cmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), cmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            start = this.selection.selectionStart - cmd.length;\n            end = this.selection.selectionEnd - cmd.length;\n        }\n        this.restore(textArea, start, end, event);\n    };\n    MDFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDFormats.prototype.isAppliedFormat = function (lines, documentNode) {\n        var format = 'p';\n        var configKey = Object.keys(this.syntax);\n        var keys = Object.keys(this.syntax);\n        var direction = this.parent.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.syntax[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                var parentLines = this.selection.getAllParents(this.parent.element.value);\n                var firstPrevText = parentLines[lines[0].line - 1];\n                var lastNextText = parentLines[lines.length + 1];\n                if (this.selection.isStartWith(firstPrevText, this.syntax[keys[i]].split('\\n')[0]) &&\n                    this.selection.isStartWith(lastNextText, this.syntax[keys[i]].split('\\n')[0])) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    return MDFormats;\n}());\nexport { MDFormats };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * SelectionCommands internal component\n * @hidden\n */\nvar MDSelectionFormats = /** @class */ (function () {\n    function MDSelectionFormats(parent) {\n        extend(this, this, parent, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDSelectionFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.selectionCommand, this.applyCommands, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    MDSelectionFormats.prototype.keyDownHandler = function (e) {\n        switch (e.event.action) {\n            case 'bold':\n                this.applyCommands({ subCommand: 'Bold', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'italic':\n                this.applyCommands({ subCommand: 'Italic', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'strikethrough':\n                this.applyCommands({ subCommand: 'StrikeThrough', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'uppercase':\n                this.applyCommands({ subCommand: 'UpperCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'lowercase':\n                this.applyCommands({ subCommand: 'LowerCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'superscript':\n                this.applyCommands({ subCommand: 'SuperScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'subscript':\n                this.applyCommands({ subCommand: 'SubScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    MDSelectionFormats.prototype.isBold = function (text, cmd) {\n        return text.search('\\\\' + cmd + '\\\\' + cmd + '') !== -1;\n    };\n    MDSelectionFormats.prototype.isItalic = function (text, cmd) {\n        return text.search('\\\\' + cmd) !== -1;\n    };\n    MDSelectionFormats.prototype.isMatch = function (text, cmd) {\n        var matchText = [''];\n        switch (cmd) {\n            case this.syntax.Italic:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.InlineCode:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.StrikeThrough:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n        }\n        return matchText;\n    };\n    MDSelectionFormats.prototype.multiCharRegx = function (cmd) {\n        return new RegExp('(\\\\' + cmd + '\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.singleCharRegx = function (cmd) {\n        return new RegExp('(\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.isAppliedCommand = function (cmd) {\n        var selectCmd = '';\n        var isFormat = false;\n        var textArea = this.parent.element;\n        var start = textArea.selectionStart;\n        var splitAt = function (index) { return function (x) { return [x.slice(0, index), x.slice(index)]; }; };\n        var splitText = splitAt(start)(textArea.value);\n        var cmdB = this.syntax.Bold.substr(0, 1);\n        var cmdI = this.syntax.Italic;\n        var beforeText = textArea.value.substr(splitText[0].length - 1, 1);\n        var afterText = splitText[1].substr(0, 1);\n        if ((beforeText !== '' && afterText !== '' && beforeText.match(/[a-z]/i)) &&\n            beforeText === beforeText.toUpperCase() && afterText === afterText.toUpperCase() && cmd === 'UpperCase') {\n            return true;\n        }\n        if (!(this.isBold(splitText[0], cmdB)) && !(this.isItalic(splitText[0], cmdI)) && !(this.isBold(splitText[1], cmdB)) &&\n            !(this.isItalic(splitText[1], cmdI))) {\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n                (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n                (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n                (splitText[0].match(/\\<sub>/g).length % 2 === 1 &&\n                    splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n                (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) &&\n                cmd === 'SuperScript') {\n                isFormat = true;\n            }\n        }\n        if ((this.isBold(splitText[0], cmdB) && this.isBold(splitText[1], cmdB)) &&\n            (splitText[0].match(this.multiCharRegx(cmdB)).length % 2 === 1 &&\n                splitText[1].match(this.multiCharRegx(cmdB)).length % 2 === 1) && cmd === 'Bold') {\n            isFormat = true;\n        }\n        splitText[0] = this.isBold(splitText[0], cmdB) ? splitText[0].replace(this.multiCharRegx(cmdB), '$%@') : splitText[0];\n        splitText[1] = this.isBold(splitText[1], cmdB) ? splitText[1].replace(this.multiCharRegx(cmdB), '$%@') : splitText[1];\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.Italic)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.Italic))) &&\n            (this.isMatch(splitText[0], this.syntax.Italic).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.Italic).length % 2 === 1) && cmd === 'Italic') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n            (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n            (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n            (splitText[0].match(/\\<sub>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n            (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) && cmd === 'SuperScript') {\n            isFormat = true;\n        }\n        return isFormat;\n    };\n    MDSelectionFormats.prototype.applyCommands = function (e) {\n        this.currentAction = e.subCommand;\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n        if (this.isAppliedCommand(e.subCommand) && selection.text !== '') {\n            var startCmd = this.syntax[e.subCommand];\n            var endCmd = e.subCommand === 'SubScript' ? '</sub>' :\n                e.subCommand === 'SuperScript' ? '</sup>' : this.syntax[e.subCommand];\n            var startLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 : startCmd.length;\n            var startNo = textArea.value.substr(0, selection.start).lastIndexOf(startCmd);\n            var endNo = textArea.value.substr(selection.end, selection.end).indexOf(endCmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), startCmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), endCmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            this.restore(textArea, start - startLength, end - startLength, e);\n            return;\n        }\n        if (selection.text !== '' && !this.isApplied(selection, e.subCommand)) {\n            addedLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 :\n                this.syntax[e.subCommand].length;\n            var repStart = textArea.value.substr(selection.start - this.syntax[e.subCommand].length, this.syntax[e.subCommand].length);\n            var repEnd = void 0;\n            if ((repStart === e.subCommand) || ((selection.start - this.syntax[e.subCommand].length ===\n                textArea.value.indexOf(this.syntax[e.subCommand])) && (selection.end === textArea.value.lastIndexOf(this.syntax[e.subCommand]) || selection.end === textArea.value.lastIndexOf('</' + this.syntax[e.subCommand].substring(1, 5))))) {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length + 1);\n                }\n                else {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length);\n                }\n                var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), repStart, '', selection.start - this.syntax[e.subCommand].length, selection.start);\n                var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), repEnd, '', 0, repEnd.length);\n                textArea.value = repStartText + selection.text + repEndText;\n                this.restore(textArea, start - addedLength, end - addedLength, e);\n            }\n            else {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    selection.text = this.syntax[e.subCommand] + selection.text\n                        + '</' + this.syntax[e.subCommand].substring(1, 5);\n                }\n                else if (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') {\n                    selection.text = (e.subCommand === 'UpperCase') ? selection.text.toUpperCase()\n                        : selection.text.toLowerCase();\n                }\n                else {\n                    selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n                }\n                textArea.value = textArea.value.substr(0, selection.start) + selection.text +\n                    textArea.value.substr(selection.end, textArea.value.length);\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n        }\n        else if (e.subCommand !== 'UpperCase' && e.subCommand !== 'LowerCase') {\n            if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text\n                    + '</' + this.syntax[e.subCommand].substring(1, 5);\n            }\n            else {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n            }\n            textArea.value = textArea.value.substr(0, selection.start)\n                + selection.text + textArea.value.substr(selection.end, textArea.value.length);\n            addedLength = this.syntax[e.subCommand].length;\n            if (selection.start === selection.end) {\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n            else {\n                this.restore(textArea, start + addedLength, end - addedLength, e);\n            }\n        }\n        else {\n            this.restore(textArea, start, end, e);\n        }\n        this.parent.undoRedoManager.saveData();\n    };\n    MDSelectionFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDSelectionFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDSelectionFormats.prototype.textReplace = function (text, command) {\n        var regx = this.singleCharRegx(this.syntax[command]);\n        switch (command) {\n            case 'Bold':\n                regx = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                text = text.replace(regx, '');\n                break;\n            case 'Italic':\n                if (!this.isBold(text, this.syntax[command].substr(0, 1))) {\n                    text = text.replace(regx, '');\n                }\n                else {\n                    var regxB = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                    var repText = text;\n                    repText = repText.replace(regxB, '$%@').replace(regx, '');\n                    var regxTemp = new RegExp('\\\\$%@', 'g');\n                    text = repText.replace(regxTemp, this.syntax[command].substr(0, 1) + this.syntax[command].substr(0, 1));\n                }\n                break;\n            case 'StrikeThrough':\n                text = text.replace(regx, '');\n                break;\n            case 'InlineCode':\n                text = text.replace(regx, '');\n                break;\n            case 'SubScript':\n                text = text.replace(/<sub>/g, '').replace(/<\\/sub>/g, '');\n                break;\n            case 'SuperScript':\n                text = text.replace(/<sup>/g, '').replace(/<\\/sup>/g, '');\n                break;\n        }\n        return text;\n    };\n    MDSelectionFormats.prototype.isApplied = function (line, command) {\n        var regx = this.singleCharRegx(this.syntax[command]);\n        switch (command) {\n            case 'SubScript':\n            case 'SuperScript':\n                regx = this.singleCharRegx(this.syntax[command]);\n                return regx.test(line.text);\n            case 'Bold':\n            case 'StrikeThrough':\n                regx = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                return regx.test(line.text);\n            case 'UpperCase':\n            case 'LowerCase':\n                regx = new RegExp('^[' + this.syntax[command] + ']*$', 'g');\n                return regx.test(line.text);\n            case 'Italic':\n                var regTest = void 0;\n                var regxB = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                if (regxB.test(line.text)) {\n                    var repText = line.text;\n                    repText = repText.replace(regxB, '$%#');\n                    regTest = regx.test(repText);\n                }\n                else {\n                    regTest = regx.test(line.text);\n                }\n                return regTest;\n            case 'InlineCode':\n                return regx.test(line.text);\n        }\n    };\n    return MDSelectionFormats;\n}());\nexport { MDSelectionFormats };\n","/**\n * Default Markdown formats config for adapter\n */\nexport var markdownFormatTags = {\n    'h6': '###### ',\n    'h5': '##### ',\n    'h4': '#### ',\n    'h3': '### ',\n    'h2': '## ',\n    'h1': '# ',\n    'blockquote': '> ',\n    'pre': '```\\n',\n    'p': ''\n};\n/**\n * Default selection formats config for adapter\n */\nexport var markdownSelectionTags = {\n    'Bold': '**',\n    'Italic': '*',\n    'StrikeThrough': '~~',\n    'InlineCode': '`',\n    'SubScript': '<sub>',\n    'SuperScript': '<sup>',\n    'UpperCase': 'A-Z',\n    'LowerCase': 'a-z'\n};\n/**\n * Default Markdown lists config for adapter\n */\nexport var markdownListsTags = {\n    'OL': '1. ',\n    'UL': '- ',\n};\n/**\n * Default html key config for adapter\n */\nexport var htmlKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'underline': 'ctrl+u',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'indents': 'ctrl+]',\n    'outdents': 'ctrl+[',\n    'html-source': 'ctrl+shift+h',\n    'full-screen': 'ctrl+shift+f',\n    'decrease-fontsize': 'ctrl+shift+<',\n    'increase-fontsize': 'ctrl+shift+>',\n    'justify-center': 'ctrl+e',\n    'justify-full': 'ctrl+j',\n    'justify-left': 'ctrl+l',\n    'justify-right': 'ctrl+r',\n    'clear-format': 'ctrl+shift+r',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o',\n    'space': '32',\n    'enter': '13',\n    'tab': '9'\n};\n/**\n * Default  markdown key config for adapter\n */\nexport var markdownKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'full-screen': 'ctrl+shift+f',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o'\n};\n","import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoCommands = /** @class */ (function () {\n    function UndoRedoCommands(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    UndoRedoCommands.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoCommands.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoCommands.prototype.removeEventListener = function () {\n        var debounceListener = debounce(this.keyUp, 300);\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, debounceListener);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n        this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoCommands.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    UndoRedoCommands.prototype.keyDown = function (e) {\n        var event = e.event;\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoCommands.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * MD collection stored string format.\n     * @method saveData\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.saveData = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var textValue = this.parent.element.value;\n        var changEle = { text: textValue, start: start, end: end };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].start === start) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].end === end)) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     * @method undo\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            this.currentAction = 'Undo';\n            var start = this.undoRedoStack[this.steps - 1].start;\n            var end = this.undoRedoStack[this.steps - 1].end;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.element.value = removedContent;\n            this.parent.element.focus();\n            this.steps--;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    /**\n     * Redo the editable text.\n     * @method redo\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            this.currentAction = 'Redo';\n            var start = this.undoRedoStack[this.steps + 1].start;\n            var end = this.undoRedoStack[this.steps + 1].end;\n            this.parent.element.value = this.undoRedoStack[this.steps + 1].text;\n            this.parent.element.focus();\n            this.steps++;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    UndoRedoCommands.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    UndoRedoCommands.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoCommands;\n}());\nexport { UndoRedoCommands };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar MDLink = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDLink(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLink.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK_COMMAND, this.createLink, this);\n    };\n    MDLink.prototype.createLink = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = (e.subCommand === 'Image') ? this.selection.getSelectedText(textArea) : e.item.text;\n        var startOffset = (e.subCommand === 'Image') ? (start + 2) : (start + 1);\n        var endOffset = (e.subCommand === 'Image') ? (end + 2) : (end + 1);\n        text = (e.subCommand === 'Image') ? '![' + text + '](' + e.item.url + ')' : '[' + text + '](' + e.item.url + ')';\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, startOffset, endOffset);\n        this.restore(textArea, startOffset, endOffset, e);\n    };\n    MDLink.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDLink;\n}());\nexport { MDLink };\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\n/**\n * Link internal component\n * @hidden\n */\nvar MDTable = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDTable(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDTable.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.MD_TABLE, this.createTable, this);\n    };\n    MDTable.prototype.removeEventListener = function () {\n        this.parent.observer.off(CONSTANT.MD_TABLE, this.createTable);\n    };\n    MDTable.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    MDTable.prototype.createTable = function (e) {\n        this.element = this.parent.element;\n        var start = this.element.selectionStart;\n        var end = this.element.selectionEnd;\n        var textAreaInitial;\n        textAreaInitial = this.element.value;\n        this.locale = e;\n        this.selection.save(start, end);\n        this.restore(this.element.selectionStart, this.element.selectionEnd, e);\n        this.insertTable(start, end, textAreaInitial, e);\n    };\n    MDTable.prototype.getTable = function () {\n        var table = '';\n        table += this.textNonEmpty();\n        table += this.tableHeader(this.locale);\n        table += this.tableCell(this.locale);\n        return table;\n    };\n    MDTable.prototype.tableHeader = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                if (i === 1) {\n                    text += e.item.headingText + ' ' + j + '|';\n                }\n                else {\n                    text += '---------|';\n                }\n            }\n            text += this.insertLine();\n        }\n        return text;\n    };\n    MDTable.prototype.tableCell = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                text += e.item.colText + ' ' + this.convertToLetters(i) + j + '|';\n            }\n            text += this.insertLine();\n        }\n        text += this.insertLine();\n        return text;\n    };\n    MDTable.prototype.insertLine = function () {\n        var dummyElement = document.createElement('div');\n        dummyElement.innerHTML = '\\n';\n        return dummyElement.textContent;\n    };\n    MDTable.prototype.insertTable = function (start, end, textAreaInitial, e) {\n        var parentText = this.selection.getSelectedParentPoints(this.element);\n        var lastLineSplit = parentText[parentText.length - 1].text.split(' ', 2);\n        var syntaxArr = this.getFormatTag();\n        var syntaxCount = 0;\n        if (lastLineSplit.length < 2) {\n            this.element.value = this.updateValue(this.getTable());\n            this.makeSelection(textAreaInitial, start, end);\n        }\n        else {\n            if (this.ensureFormatApply(parentText[parentText.length - 1].text)) {\n                this.checkValid(start, end, this.getTable(), textAreaInitial, e, lastLineSplit, parentText, syntaxArr);\n            }\n            else {\n                this.element.value = this.updateValue(this.getTable());\n                this.makeSelection(textAreaInitial, start, end);\n            }\n        }\n        this.restore(this.element.selectionStart, this.element.selectionEnd, e);\n    };\n    MDTable.prototype.makeSelection = function (textAreaInitial, start, end) {\n        end = start + (textAreaInitial.length > 0 ? 12 : 10); //end is added 12 or 10 because to make the table heading selected\n        start += textAreaInitial.length > 0 ? 3 : 1; // Start is added 3 or 1 because new lines are added when inserting table\n        this.selection.setSelection(this.element, start, end);\n    };\n    MDTable.prototype.getFormatTag = function () {\n        var syntaxFormatKey = Object.keys(this.syntaxTag.Formats);\n        var syntaxListKey = Object.keys(this.syntaxTag.List);\n        var syntaxArr = [];\n        for (var i = 0; i < syntaxFormatKey.length; i++) {\n            syntaxArr.push(this.syntaxTag.Formats[syntaxFormatKey[i]]);\n        }\n        for (var j = 0; j < syntaxListKey.length; j++) {\n            syntaxArr.push(this.syntaxTag.List[syntaxListKey[j]]);\n        }\n        return syntaxArr;\n    };\n    MDTable.prototype.ensureFormatApply = function (line) {\n        var formatTags = this.getFormatTag();\n        var formatSplitZero = line.split(' ', 2)[0] + ' ';\n        for (var i = 0; i < formatTags.length; i++) {\n            if (formatSplitZero === formatTags[i]) {\n                return true;\n            }\n        }\n        return false;\n    };\n    MDTable.prototype.ensureStartValid = function (firstLine, parentText) {\n        var firstLineSplit = parentText[0].text.split(' ', 2);\n        for (var i = firstLine + 1; i <= firstLine + firstLineSplit[0].length + 1; i++) {\n            if (this.element.selectionStart === i || this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.ensureEndValid = function (lastLine, formatSplitLength) {\n        for (var i = lastLine + 1; i <= lastLine + formatSplitLength + 1; i++) {\n            if (this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.updateValueWithFormat = function (formatSplit, text) {\n        var textApplyFormat = this.element.value.substring(this.element.selectionEnd, this.element.value.length);\n        text += textApplyFormat.replace(textApplyFormat, (formatSplit[0] + ' ' + textApplyFormat));\n        return this.element.value.substr(0, this.element.selectionStart) + text;\n    };\n    MDTable.prototype.updateValue = function (text) {\n        return this.element.value.substr(0, this.element.selectionStart) + text +\n            this.element.value.substr(this.element.selectionEnd, this.element.value.length);\n    };\n    MDTable.prototype.checkValid = function (start, end, text, textAreaInitial, e, formatSplit, parentText, syntaxArr) {\n        if (this.ensureStartValid(parentText[0].start, parentText) &&\n            this.ensureEndValid(parentText[parentText.length - 1].start, formatSplit[0].length)) {\n            if (start === parentText[0].start) {\n                if (start !== end && end !== (parentText[parentText.length - 1].end - 1)) {\n                    this.element.value = this.updateValueWithFormat(formatSplit, text);\n                }\n                else {\n                    this.element.value = this.updateValue(text);\n                }\n            }\n            else if (end === parentText[parentText.length - 1].end - 1) {\n                this.element.value = this.updateValue(text);\n            }\n            else {\n                this.element.value = this.updateValueWithFormat(formatSplit, text);\n            }\n            this.makeSelection(textAreaInitial, start, end);\n        }\n    };\n    MDTable.prototype.convertToLetters = function (rowNumber) {\n        var baseChar = ('A').charCodeAt(0);\n        var letters = '';\n        do {\n            rowNumber -= 1;\n            letters = String.fromCharCode(baseChar + (rowNumber % 26)) + letters;\n            rowNumber = (rowNumber / 26) >> 0;\n        } while (rowNumber > 0);\n        return letters;\n    };\n    MDTable.prototype.textNonEmpty = function () {\n        var emptyText = '';\n        if (this.isCursorBased() || this.isSelectionBased()) {\n            if (this.element.value.length > 0) {\n                emptyText += this.insertLine();\n                emptyText += this.insertLine(); // to append two new line when textarea having content.               \n            }\n        }\n        return emptyText;\n    };\n    MDTable.prototype.isCursorBased = function () {\n        return this.element.selectionStart === this.element.selectionEnd;\n    };\n    MDTable.prototype.isSelectionBased = function () {\n        return this.element.selectionStart !== this.element.selectionEnd;\n    };\n    MDTable.prototype.restore = function (start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(this.element);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(this.element),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDTable;\n}());\nexport { MDTable };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar ClearFormat = /** @class */ (function () {\n    /**\n     * Constructor for creating the clear format plugin\n     * @hidden\n     */\n    function ClearFormat(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    ClearFormat.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n    };\n    ClearFormat.prototype.replaceRegex = function (data) {\n        return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&')\n            .replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^')\n            .replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.')\n            .replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?')\n            .replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-')\n            .replace(/\\&/ig, '\\\\&');\n    };\n    ClearFormat.prototype.clearSelectionTags = function (text) {\n        var data = this.parent.selectionTags;\n        var keys = Object.keys(data);\n        for (var num = 0; num < keys.length; num++) {\n            var key = keys[num];\n            if (data.hasOwnProperty(key) && data[key] !== '') {\n                var expString = this.replaceRegex(data[key]);\n                var regExp = void 0;\n                var startExp = void 0;\n                var endExp = void 0;\n                if (data[key] === '<sup>') {\n                    regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n                }\n                else if (data[key] === '<sub>') {\n                    regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n                }\n                else {\n                    regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n                }\n                startExp = data[key].length;\n                endExp = (data[key] === '<sup>' || data[key] === '<sub>') ? data[key].length + 1 : data[key].length;\n                var val = text.match(regExp);\n                for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n                    text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n                }\n            }\n        }\n        return text;\n    };\n    ClearFormat.prototype.clearFormatTags = function (text) {\n        var lines = text.split('\\n');\n        var tags = [this.parent.formatTags, this.parent.listTags];\n        var str = '';\n        for (var len = 0; len < lines.length; len++) {\n            for (var num = 0; num < tags.length; num++) {\n                var data = tags[num];\n                var keys = Object.keys(data);\n                for (var index = 0; index < keys.length; index++) {\n                    var key = keys[index];\n                    if (data.hasOwnProperty(key) && data[key] !== '') {\n                        if (lines[len].indexOf(data[key]) === 0) {\n                            lines[len] = lines[len].replace(data[key], '');\n                        }\n                    }\n                }\n            }\n            str = str + lines[len] + ((len !== lines.length - 1) ? '\\n' : '');\n        }\n        return str;\n    };\n    ClearFormat.prototype.clear = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = this.selection.getSelectedText(textArea);\n        text = this.clearSelectionTags(text);\n        text = this.clearFormatTags(text);\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n        this.restore(textArea, start, start + text.length, e);\n    };\n    ClearFormat.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { MDLists } from './../plugin/lists';\nimport { MDFormats } from './../plugin/formats';\nimport { MDSelectionFormats } from './../plugin/md-selection-formats';\nimport { MarkdownSelection } from './../plugin/markdown-selection';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownFormatTags, markdownListsTags, markdownSelectionTags } from './../../common/config';\nimport { UndoRedoCommands } from './../plugin/undo';\nimport { MDLink } from './../plugin/link';\nimport { MDTable } from './../plugin/table';\nimport * as EVENTS from './../../common/constant';\nimport { ClearFormat } from './../plugin/clearformat';\n/**\n * MarkdownParser internal component\n * @hidden\n */\nvar MarkdownParser = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function MarkdownParser(options) {\n        this.initialize();\n        extend(this, this, options, true);\n        this.observer = new Observer(this);\n        this.markdownSelection = new MarkdownSelection();\n        this.listObj = new MDLists({ parent: this, syntax: this.listTags });\n        this.formatObj = new MDFormats({ parent: this, syntax: this.formatTags });\n        this.undoRedoManager = new UndoRedoCommands(this, options.options);\n        this.mdSelectionFormats = new MDSelectionFormats({ parent: this, syntax: this.selectionTags });\n        this.linkObj = new MDLink(this);\n        this.tableObj = new MDTable({ parent: this, syntaxTag: ({ Formats: this.formatTags, List: this.listTags }) });\n        this.clearObj = new ClearFormat(this);\n        this.wireEvents();\n    }\n    MarkdownParser.prototype.initialize = function () {\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    MarkdownParser.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n    };\n    MarkdownParser.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    MarkdownParser.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    MarkdownParser.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    MarkdownParser.prototype.execCommand = function (command, value, event, callBack, text, exeValue) {\n        switch (command.toLocaleLowerCase()) {\n            case 'lists':\n                this.observer.notify(CONSTANT.LISTS_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.selectionCommand, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'links':\n            case 'images':\n                this.observer.notify(CONSTANT.LINK_COMMAND, { subCommand: value, event: event, callBack: callBack, item: exeValue });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.MD_TABLE, { subCommand: value, item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n        }\n    };\n    return MarkdownParser;\n}());\nexport { MarkdownParser };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { MarkdownParser } from './../../markdown-parser/base/markdown-parser';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownKeyConfig, markdownListsTags, markdownFormatTags, markdownSelectionTags } from './../../common/config';\n/**\n * Markdown adapter\n * @hidden\n */\nvar MarkdownFormatter = /** @class */ (function (_super) {\n    __extends(MarkdownFormatter, _super);\n    function MarkdownFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (options && _this.element) {\n            _this.updateFormatter(_this.element, document, options.options);\n        }\n        return _this;\n    }\n    MarkdownFormatter.prototype.initialize = function () {\n        this.keyConfig = markdownKeyConfig;\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     * @param  {Element} editElement\n     * @param  {Document} doc\n     */\n    MarkdownFormatter.prototype.updateFormatter = function (editElement, doc, options) {\n        if (editElement) {\n            this.editorManager = new MarkdownParser({\n                element: editElement,\n                formatTags: this.formatTags,\n                listTags: this.listTags,\n                selectionTags: this.selectionTags,\n                options: options\n            });\n        }\n    };\n    return MarkdownFormatter;\n}(Formatter));\nexport { MarkdownFormatter };\n","/**\n * Markdown module is used to render RichTextEditor as Markdown editor content\n * @hidden\n */\nvar MarkdownRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function MarkdownRender(parent) {\n        this.parent = parent;\n    }\n    /**\n     * The function is used to render RichTextEditor content div\n     */\n    MarkdownRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { id: this.parent.getID() + '_view', className: 'e-rte-content' });\n        this.editableElement = this.parent.createElement('textarea', {\n            className: 'e-content',\n            id: this.parent.getID() + '_editable-content'\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     * @return {Element}\n     */\n    MarkdownRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    MarkdownRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    MarkdownRender.prototype.getText = function () {\n        return this.getEditPanel().value;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     * @param  {Element} panel\n     */\n    MarkdownRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @param  {Document}\n     */\n    MarkdownRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return MarkdownRender;\n}());\nexport { MarkdownRender };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { MarkdownFormatter } from '../formatter/markdown-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { MarkdownToolbarStatus } from './markdown-toolbar-status';\nimport { MarkdownRender } from '../renderer/markdown-renderer';\nimport { MarkdownSelection } from './../../markdown-parser/plugin/markdown-selection';\n/**\n * `MarkdownEditor` module is used to markdown editor\n */\nvar MarkdownEditor = /** @class */ (function () {\n    function MarkdownEditor(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     * @method destroy\n     * @return {void}\n     */\n    MarkdownEditor.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    MarkdownEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.saveSelection = new MarkdownSelection();\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.markdownToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n    };\n    MarkdownEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            this.parent.contentModule.getEditPanel().setAttribute('readonly', 'readonly');\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            this.parent.contentModule.getEditPanel().removeAttribute('readonly');\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    MarkdownEditor.prototype.onSelectionSave = function () {\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.save(textArea.selectionStart, textArea.selectionEnd);\n    };\n    MarkdownEditor.prototype.onSelectionRestore = function (e) {\n        this.contentRenderer.getEditPanel().focus();\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.restore(textArea);\n    };\n    MarkdownEditor.prototype.onToolbarClick = function (args) {\n        var text;\n        var startOffset;\n        var endOffset;\n        var item = args.item;\n        if (this.parent.editorMode === 'Markdown') {\n            var textArea = this.parent.contentModule.getEditPanel();\n            textArea.focus();\n            startOffset = textArea.selectionStart;\n            endOffset = textArea.selectionEnd;\n            text = textArea.value.substring(startOffset, endOffset);\n        }\n        switch (item.subCommand) {\n            case 'Maximize':\n                this.parent.notify(events.enableFullScreen, { args: args });\n                break;\n            case 'Minimize':\n                this.parent.notify(events.disableFullScreen, { args: args });\n                break;\n            case 'CreateLink':\n                this.parent.notify(events.insertLink, { member: 'link', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'Image':\n                this.parent.notify(events.insertImage, { member: 'image', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'CreateTable':\n                var tableConstant = {\n                    'headingText': this.parent.localeObj.getConstant('TableHeadingText'),\n                    'colText': this.parent.localeObj.getConstant('TableColText')\n                };\n                this.parent.formatter.process(this.parent, args, args.originalEvent, tableConstant);\n                break;\n            default:\n                this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                break;\n        }\n    };\n    MarkdownEditor.prototype.instantiateRenderer = function () {\n        this.renderFactory.addRenderer(RenderType.Content, new MarkdownRender(this.parent));\n    };\n    MarkdownEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.markdownToolbarClick, this.onToolbarClick);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n    };\n    MarkdownEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            this.parent.formatter = new MarkdownFormatter({\n                element: editElement,\n                options: option\n            });\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new MarkdownToolbarStatus(this.parent);\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    MarkdownEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    MarkdownEditor.prototype.getModuleName = function () {\n        return 'markdownEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    MarkdownEditor.prototype.selectAll = function () {\n        this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.contentModule.getEditPanel(), 0, this.parent.contentModule.getEditPanel().value.length);\n    };\n    /**\n     * For get a selected text in RTE\n     * @private\n     */\n    MarkdownEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()));\n    };\n    return MarkdownEditor;\n}());\nexport { MarkdownEditor };\n","/**\n * Constant values for EditorManager\n */\n/* Image plugin events\n * @hidden\n */\nexport var IMAGE = 'INSERT-IMAGE';\nexport var TABLE = 'INSERT-TABLE';\nexport var LINK = 'INSERT-LINK';\nexport var INSERT_ROW = 'INSERT-ROW';\nexport var INSERT_COLUMN = 'INSERT-COLUMN';\nexport var DELETEROW = 'DELETE-ROW';\nexport var DELETECOLUMN = 'DELETE-COLUMN';\nexport var REMOVETABLE = 'REMOVE-TABLE';\nexport var TABLEHEADER = 'TABLE-HEADER';\nexport var TABLE_VERTICAL_ALIGN = 'TABLE_VERTICAL_ALIGN';\n/* Alignments plugin events\n * @hidden\n */\nexport var ALIGNMENT_TYPE = 'alignment-type';\n/* Indents plugin events\n * @hidden\n */\nexport var INDENT_TYPE = 'indent-type';\n/* Constant tag names\n */\n/** @hidden */\nexport var DEFAULT_TAG = 'p';\n/** @hidden */\nexport var BLOCK_TAGS = ['address', 'article', 'aside', 'audio', 'blockquote',\n    'canvas', 'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n    'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'li', 'main', 'nav',\n    'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr', 'ul', 'video'];\n/** @hidden */\nexport var IGNORE_BLOCK_TAGS = ['td', 'th'];\n/** @hidden */\nexport var TABLE_BLOCK_TAGS = ['table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr'];\n/* Selection plugin events\n * @hidden\n */\nexport var SELECTION_TYPE = 'selection-type';\n/* Insert HTML plugin events\n * @hidden\n */\nexport var INSERTHTML_TYPE = 'inserthtml-type';\n/* Clear Format HTML plugin events\n * @hidden\n */\nexport var CLEAR_TYPE = 'clear-type';\n","/**\n * `Selection` module is used to handle RTE Selections.\n */\nvar NodeSelection = /** @class */ (function () {\n    function NodeSelection() {\n        this.startNodeName = [];\n        this.endNodeName = [];\n    }\n    NodeSelection.prototype.saveInstance = function (range, body) {\n        this.range = range.cloneRange();\n        this.rootNode = this.documentFromRange(range);\n        this.body = body;\n        this.startContainer = this.getNodeArray(range.startContainer, true);\n        this.endContainer = this.getNodeArray(range.endContainer, false);\n        this.startOffset = range.startOffset;\n        this.endOffset = range.endOffset;\n        this.html = this.body.innerHTML;\n        return this;\n    };\n    NodeSelection.prototype.documentFromRange = function (range) {\n        return (9 === range.startContainer.nodeType) ? range.startContainer : range.startContainer.ownerDocument;\n    };\n    NodeSelection.prototype.getRange = function (docElement) {\n        var select = this.get(docElement);\n        var range = select && select.rangeCount > 0 ? select.getRangeAt(select.rangeCount - 1) : docElement.createRange();\n        return (range.startContainer !== docElement || range.endContainer !== docElement\n            || range.startOffset || range.endOffset || (range.setStart(docElement.body, 0),\n            range.collapse(!0)),\n            range);\n    };\n    NodeSelection.prototype.get = function (docElement) {\n        return docElement.defaultView.getSelection();\n    };\n    NodeSelection.prototype.save = function (range, docElement) {\n        range = (range) ? range.cloneRange() : this.getRange(docElement);\n        return this.saveInstance(range, docElement.body);\n    };\n    NodeSelection.prototype.getIndex = function (node) {\n        var index;\n        var num = 0;\n        node = !node.previousSibling && node.tagName === 'BR' ? node : node.previousSibling;\n        if (node) {\n            for (var type = node.nodeType; node; null) {\n                index = node.nodeType;\n                num++;\n                type = index;\n                node = node.previousSibling;\n            }\n        }\n        return num;\n    };\n    NodeSelection.prototype.isChildNode = function (nodeCollection, parentNode) {\n        for (var index = 0; index < parentNode.childNodes.length; index++) {\n            if (nodeCollection.indexOf(parentNode.childNodes[index]) > -1) {\n                return true;\n            }\n        }\n        return false;\n    };\n    NodeSelection.prototype.getNode = function (startNode, endNode, nodeCollection) {\n        if (endNode === startNode &&\n            (startNode.nodeType === 3 || !startNode.firstChild || nodeCollection.indexOf(startNode.firstChild) !== -1\n                || this.isChildNode(nodeCollection, startNode))) {\n            return null;\n        }\n        if (nodeCollection.indexOf(startNode.firstChild) === -1 && startNode.firstChild && !this.isChildNode(nodeCollection, startNode)) {\n            return startNode.firstChild;\n        }\n        if (startNode.nextSibling) {\n            return startNode.nextSibling;\n        }\n        if (!startNode.parentNode) {\n            return null;\n        }\n        else {\n            return startNode.parentNode;\n        }\n    };\n    NodeSelection.prototype.getNodeCollection = function (range) {\n        var startNode = range.startContainer.childNodes[range.startOffset]\n            || range.startContainer;\n        var endNode = range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer;\n        if (startNode === endNode && startNode.childNodes.length === 0) {\n            return [startNode];\n        }\n        var nodeCollection = [];\n        do {\n            if (nodeCollection.indexOf(startNode) === -1) {\n                nodeCollection.push(startNode);\n            }\n            startNode = this.getNode(startNode, endNode, nodeCollection);\n        } while (startNode);\n        return nodeCollection;\n    };\n    NodeSelection.prototype.getParentNodeCollection = function (range) {\n        return this.getParentNodes(this.getNodeCollection(range), range);\n    };\n    NodeSelection.prototype.getParentNodes = function (nodeCollection, range) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection.indexOf(nodeCollection[index].parentNode) !== -1)\n                || (nodeCollection[index].nodeType === 3 &&\n                    range.startContainer !== range.endContainer)) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n            else if (nodeCollection[index].nodeType === 3) {\n                nodeCollection[index] = nodeCollection[index].parentNode;\n            }\n        }\n        return nodeCollection;\n    };\n    NodeSelection.prototype.getSelectionNodeCollection = function (range) {\n        return this.getSelectionNodes(this.getNodeCollection(range));\n    };\n    NodeSelection.prototype.getSelectionNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if (nodeCollection[index].nodeType !== 3 || nodeCollection[index].textContent.trim() === '') {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    NodeSelection.prototype.getInsertNodeCollection = function (range) {\n        return this.getInsertNodes(this.getNodeCollection(range));\n    };\n    NodeSelection.prototype.getInsertNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection[index].childNodes.length !== 0 &&\n                nodeCollection[index].nodeType !== 3) ||\n                (nodeCollection[index].nodeType === 3 &&\n                    nodeCollection[index].textContent === '')) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    NodeSelection.prototype.getNodeArray = function (node, isStart, root) {\n        var array = [];\n        ((isStart) ? (this.startNodeName = []) : (this.endNodeName = []));\n        for (; node !== (root ? root : this.rootNode); null) {\n            (isStart) ? this.startNodeName.push(node.nodeName.toLowerCase()) : this.endNodeName.push(node.nodeName.toLowerCase());\n            array.push(this.getIndex(node));\n            node = node.parentNode;\n        }\n        return array;\n    };\n    NodeSelection.prototype.setRangePoint = function (range, isvalid, num, size) {\n        var node = this.rootNode;\n        var index = num.length;\n        var constant = size;\n        for (; index--; null) {\n            node = node.childNodes[num[index]];\n        }\n        if (node && constant >= 0) {\n            range[isvalid ? 'setStart' : 'setEnd'](node, constant);\n        }\n        return range;\n    };\n    NodeSelection.prototype.restore = function () {\n        var range = this.range.cloneRange();\n        range = this.setRangePoint(range, true, this.startContainer, this.startOffset);\n        range = this.setRangePoint(range, false, this.endContainer, this.endOffset);\n        this.selectRange(this.rootNode, range);\n        return range;\n    };\n    NodeSelection.prototype.selectRange = function (docElement, range) {\n        this.setRange(docElement, range);\n        this.save(range, docElement);\n    };\n    NodeSelection.prototype.setRange = function (docElement, range) {\n        var selection = this.get(docElement);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    NodeSelection.prototype.setSelectionText = function (docElement, startNode, endNode, startIndex, endIndex) {\n        var range = docElement.createRange();\n        range.setStart(startNode, startIndex);\n        range.setEnd(endNode, endIndex);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.setSelectionContents = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNode(element);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.setSelectionNode = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNodeContents(element);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.getSelectedNodes = function (docElement) {\n        return this.getNodeCollection(this.getRange(docElement));\n    };\n    NodeSelection.prototype.Clear = function (docElement) {\n        this.get(docElement).removeAllRanges();\n    };\n    NodeSelection.prototype.insertParentNode = function (docElement, newNode, range) {\n        range.surroundContents(newNode);\n        this.selectRange(docElement, range);\n    };\n    NodeSelection.prototype.setCursorPoint = function (docElement, element, point) {\n        var range = docElement.createRange();\n        var selection = docElement.defaultView.getSelection();\n        range.setStart(element, point);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    return NodeSelection;\n}());\nexport { NodeSelection };\n","import * as CONSTANT from './../base/constant';\nimport { append, detach, createElement } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/index';\nexport var markerClassName = {\n    startSelection: 'e-editor-select-start',\n    endSelection: 'e-editor-select-end'\n};\n/**\n * DOMNode internal plugin\n * @hidden\n */\nvar DOMNode = /** @class */ (function () {\n    /**\n     * Constructor for creating the DOMNode plugin\n     * @hidden\n     */\n    function DOMNode(parent, currentDocument) {\n        this.parent = parent;\n        this.nodeSelection = new NodeSelection();\n        this.currentDocument = currentDocument;\n    }\n    DOMNode.prototype.contents = function (element) {\n        return (element && 'IFRAME' !== element.tagName ? Array.prototype.slice.call(element.childNodes || []) : []);\n    };\n    DOMNode.prototype.isBlockNode = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && CONSTANT.BLOCK_TAGS.indexOf(element.tagName.toLowerCase()) >= 0));\n    };\n    DOMNode.prototype.isLink = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && 'a' === element.tagName.toLowerCase()));\n    };\n    DOMNode.prototype.blockParentNode = function (element) {\n        for (; element && element.parentNode !== this.parent && ((!element.parentNode ||\n            !this.hasClass(element.parentNode, 'e-node-inner'))); null) {\n            element = element.parentNode;\n            if (this.isBlockNode(element)) {\n                return element;\n            }\n        }\n        return element;\n    };\n    DOMNode.prototype.rawAttributes = function (element) {\n        var rawAttr = {};\n        var attributes = element.attributes;\n        if (attributes.length > 0) {\n            for (var d = 0; d < attributes.length; d++) {\n                var e = attributes[d];\n                rawAttr[e.nodeName] = e.value;\n            }\n        }\n        return rawAttr;\n    };\n    DOMNode.prototype.attributes = function (element) {\n        if (!element) {\n            return '';\n        }\n        var attr = '';\n        var rawAttr = this.rawAttributes(element);\n        var orderRawAttr = Object.keys(rawAttr).sort();\n        for (var e = 0; e < orderRawAttr.length; e++) {\n            var attrKey = orderRawAttr[e];\n            var attrValue = rawAttr[attrKey];\n            /* tslint:disable */\n            if (attrValue.indexOf(\"'\") < 0 && attrValue.indexOf('\"') >= 0) {\n                attr += ' ' + attrKey + \"='\" + attrValue + \"'\";\n            }\n            else if (attrValue.indexOf('\"') >= 0 && attrValue.indexOf(\"'\") >= 0) {\n                /* tslint:enable */\n                attrValue = attrValue.replace(/\"/g, '&quot;');\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n            else {\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n        }\n        return attr;\n    };\n    DOMNode.prototype.clearAttributes = function (element) {\n        for (var attr = element.attributes, c = attr.length - 1; c >= 0; c--) {\n            var key = attr[c];\n            element.removeAttribute(key.nodeName);\n        }\n    };\n    DOMNode.prototype.openTagString = function (element) {\n        return '<' + element.tagName.toLowerCase() + this.attributes(element) + '>';\n    };\n    DOMNode.prototype.closeTagString = function (element) {\n        return '</' + element.tagName.toLowerCase() + '>';\n    };\n    DOMNode.prototype.createTagString = function (tagName, relativeElement, innerHTML) {\n        return '<' + tagName.toLowerCase() + this.attributes(relativeElement) + '>' + innerHTML + '</' + tagName.toLowerCase() + '>';\n    };\n    DOMNode.prototype.isList = function (element) {\n        return !!element && ['UL', 'OL'].indexOf(element.tagName) >= 0;\n    };\n    DOMNode.prototype.isElement = function (element) {\n        return element === this.parent;\n    };\n    DOMNode.prototype.isEditable = function (element) {\n        return ((!element.getAttribute || element.getAttribute('contenteditable') === 'true')\n            && ['STYLE', 'SCRIPT'].indexOf(element.tagName) < 0);\n    };\n    DOMNode.prototype.hasClass = function (element, className) {\n        return element && element.classList && element.classList.contains(className);\n    };\n    DOMNode.prototype.replaceWith = function (element, value) {\n        var parentNode = element.parentNode;\n        parentNode.insertBefore(this.parseHTMLFragment(value), element);\n        detach(element);\n    };\n    DOMNode.prototype.parseHTMLFragment = function (value) {\n        /* tslint:disable */\n        var temp = createElement('template');\n        temp.innerHTML = value;\n        if (temp.content instanceof DocumentFragment) {\n            return temp.content;\n        }\n        else {\n            return document.createRange().createContextualFragment(value);\n        }\n        /* tslint:enable */\n    };\n    DOMNode.prototype.wrap = function (element, wrapper) {\n        element.parentNode.insertBefore(wrapper, element);\n        wrapper = element.previousSibling;\n        wrapper.appendChild(element);\n        return wrapper;\n    };\n    DOMNode.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    DOMNode.prototype.wrapInner = function (parent, wrapper) {\n        parent.appendChild(wrapper);\n        wrapper = parent.querySelector('.e-rte-wrap-inner');\n        wrapper.classList.remove('e-rte-wrap-inner');\n        if (wrapper.classList.length === 0) {\n            wrapper.removeAttribute('class');\n        }\n        while (parent.firstChild !== wrapper) {\n            wrapper.appendChild(parent.firstChild);\n        }\n        return wrapper;\n    };\n    DOMNode.prototype.unWrap = function (element) {\n        var parent = element.parentNode;\n        var unWrapNode = [];\n        while (element.firstChild) {\n            unWrapNode.push(element.firstChild);\n            parent.insertBefore(element.firstChild, element);\n        }\n        unWrapNode = unWrapNode.length > 0 ? unWrapNode : [element.parentNode];\n        parent.removeChild(element);\n        return unWrapNode;\n    };\n    DOMNode.prototype.getSelectedNode = function (element, index) {\n        if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 &&\n            element.childNodes[index - 1] && element.childNodes[index - 1].nodeType === Node.ELEMENT_NODE &&\n            (element.childNodes[index - 1].classList.contains(markerClassName.startSelection) ||\n                element.childNodes[index - 1].classList.contains(markerClassName.endSelection))) {\n            element = element.childNodes[index - 1];\n        }\n        else if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 && element.childNodes[index]) {\n            element = element.childNodes[index];\n        }\n        if (element.nodeType === Node.TEXT_NODE) {\n            element = element.parentNode;\n        }\n        return element;\n    };\n    DOMNode.prototype.nodeFinds = function (element, elements) {\n        var existNodes = [];\n        for (var i = 0; i < elements.length; i++) {\n            if (element.contains(elements[i]) && element !== elements[i]) {\n                existNodes.push(elements[i]);\n            }\n        }\n        return existNodes;\n    };\n    DOMNode.prototype.isEditorArea = function () {\n        var range = this.getRangePoint(0);\n        var element;\n        for (element = range.commonAncestorContainer; element && !this.isElement(element); null) {\n            element = element.parentNode;\n        }\n        return !!this.isElement(element);\n    };\n    DOMNode.prototype.getRangePoint = function (point) {\n        var selection = this.getSelection();\n        var ranges = [];\n        if (selection && selection.getRangeAt && selection.rangeCount) {\n            ranges = [];\n            for (var f = 0; f < selection.rangeCount; f++) {\n                ranges.push(selection.getRangeAt(f));\n            }\n        }\n        else {\n            ranges = [this.currentDocument.createRange()];\n        }\n        return 'undefined' !== typeof point ? ranges[point] : ranges;\n    };\n    DOMNode.prototype.getSelection = function () {\n        return this.nodeSelection.get(this.currentDocument);\n    };\n    DOMNode.prototype.getPreviousNode = function (element) {\n        element = element.previousSibling;\n        for (; element && element.textContent === '\\n'; null) {\n            element = element.previousSibling;\n        }\n        return element;\n    };\n    DOMNode.prototype.encode = function (value) {\n        var divNode = document.createElement('div');\n        divNode.innerText = value;\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    DOMNode.prototype.saveMarker = function (save) {\n        var start = this.parent.querySelector('.' + markerClassName.startSelection);\n        var startTextNode;\n        if (this.hasClass(start, markerClassName.startSelection) && start.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, start, this.encode(start.textContent));\n            this.replaceWith(start, replace);\n            start = this.parent.querySelector('.' + markerClassName.startSelection);\n            start.classList.remove(markerClassName.startSelection);\n            startTextNode = start.childNodes[0];\n        }\n        else {\n            startTextNode = this.unWrap(start)[0];\n        }\n        var endTextNode;\n        var end = this.parent.querySelector('.' + markerClassName.endSelection);\n        if (this.hasClass(end, markerClassName.endSelection) && end.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, end, this.encode(end.textContent));\n            this.replaceWith(end, replace);\n            end = this.parent.querySelector('.' + markerClassName.endSelection);\n            end.classList.remove(markerClassName.endSelection);\n            endTextNode = end.childNodes[0];\n        }\n        else {\n            endTextNode = end ? this.unWrap(end)[0] : startTextNode;\n        }\n        save.startContainer = save.getNodeArray(startTextNode, true);\n        save.endContainer = save.getNodeArray(endTextNode, false);\n        return save;\n    };\n    DOMNode.prototype.marker = function (className, textContent) {\n        return '<span class=\"' + className + '\">' + textContent + '</span>';\n    };\n    DOMNode.prototype.setMarker = function (save) {\n        var range = save.range;\n        var start = (range.startContainer.childNodes[range.startOffset]\n            || range.startContainer);\n        var end = (range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer);\n        if ((start.nodeType === Node.ELEMENT_NODE && end.nodeType === Node.ELEMENT_NODE) && (start.contains(end) || end.contains(start))) {\n            var existNode = start.contains(end) ? start : end;\n            var isElement = existNode.nodeType !== Node.TEXT_NODE;\n            if (isElement) {\n                var nodes = [];\n                var textNodes = [];\n                for (var node = existNode; existNode.contains(node); null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (textNodes.indexOf(node) < 0 && (node.nodeType === Node.TEXT_NODE ||\n                        (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0\n                            && node.tagName === 'BR'))) {\n                        textNodes.push(node);\n                    }\n                }\n                if (textNodes.length) {\n                    start = start.contains(end) ? textNodes[0] : start;\n                    end = textNodes[textNodes.length - 1];\n                }\n            }\n        }\n        if (start !== end) {\n            if (start.nodeType !== Node.TEXT_NODE && start.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(start.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n                var markerStart = range.startContainer.querySelector('.' + markerClassName.startSelection);\n                markerStart.appendChild(start);\n            }\n            else {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n            }\n            if (end.nodeType !== Node.TEXT_NODE && end.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(end.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                this.replaceWith(end, this.marker(markerClassName.endSelection, this.encode(end.textContent)));\n                var markerEnd = range.endContainer.querySelector('.' + markerClassName.endSelection);\n                markerEnd.appendChild(end);\n            }\n            else {\n                this.replaceWith(end, this.marker(markerClassName.endSelection, this.encode(end.textContent)));\n            }\n        }\n        else {\n            if (start.nodeType === 3) {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n            }\n            else {\n                start = start.tagName === 'BR' ? start.parentNode : start;\n                var marker = this.marker(markerClassName.startSelection, '');\n                append([this.parseHTMLFragment(marker)], start);\n            }\n        }\n    };\n    DOMNode.prototype.createTempNode = function (element) {\n        var textContent = element.textContent;\n        if (element.tagName === 'BR') {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var node = element.parentNode;\n            if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.tagName.toLocaleLowerCase()) >= 0) {\n                element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            }\n        }\n        else if (((element.nodeType !== Node.TEXT_NODE &&\n            (element.classList.contains(markerClassName.startSelection) ||\n                element.classList.contains(markerClassName.endSelection))) ||\n            textContent.replace(/\\n/g, '').replace(/(^ *)|( *$)/g, '').length > 0 ||\n            textContent.length && textContent.indexOf('\\n') < 0)) {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var target = element;\n            element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            var ignoreBr = target.nodeType === Node.ELEMENT_NODE && target.firstChild && target.firstChild.nodeName === 'BR'\n                && (target.classList.contains(markerClassName.startSelection) ||\n                    target.classList.contains(markerClassName.endSelection));\n            if (!ignoreBr && element.nextElementSibling && element.nextElementSibling.tagName === 'BR') {\n                element.appendChild(element.nextElementSibling);\n            }\n        }\n        return element;\n    };\n    DOMNode.prototype.blockNodes = function () {\n        var collectionNodes = [];\n        var selection = this.getSelection();\n        if (this.isEditorArea() && selection.rangeCount) {\n            var ranges = this.getRangePoint();\n            for (var j = 0; j < ranges.length; j++) {\n                var parentNode = void 0;\n                var range = ranges[j];\n                var startNode = this.getSelectedNode(range.startContainer, range.startOffset);\n                var endNode = this.getSelectedNode(range.endContainer, range.endOffset);\n                if (this.isBlockNode(startNode) && collectionNodes.indexOf(startNode) < 0) {\n                    collectionNodes.push(startNode);\n                }\n                parentNode = this.blockParentNode(startNode);\n                if (parentNode && collectionNodes.indexOf(parentNode) < 0) {\n                    if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(parentNode.tagName.toLocaleLowerCase()) >= 0 && (startNode.tagName === 'BR' ||\n                        startNode.nodeType === Node.TEXT_NODE ||\n                        startNode.classList.contains(markerClassName.startSelection) ||\n                        startNode.classList.contains(markerClassName.endSelection))) {\n                        var tempNode = startNode.previousSibling &&\n                            startNode.previousSibling.nodeType === Node.TEXT_NODE ?\n                            startNode.previousSibling : startNode;\n                        collectionNodes.push(this.createTempNode(tempNode));\n                    }\n                    else {\n                        collectionNodes.push(parentNode);\n                    }\n                }\n                var nodes = [];\n                for (var node = startNode; node !== endNode && node !== this.parent; null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node && (node.tagName === 'BR' || node.nodeType === Node.TEXT_NODE ||\n                        node.classList.contains(markerClassName.startSelection) ||\n                        node.classList.contains(markerClassName.endSelection)) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node);\n                    }\n                    else if (node.nextSibling && (node.nextSibling.tagName === 'BR' ||\n                        node.nextSibling.nodeType === Node.TEXT_NODE ||\n                        node.nextSibling.classList.contains(markerClassName.startSelection) ||\n                        node.nextSibling.classList.contains(markerClassName.endSelection)) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.nextSibling.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node.nextSibling);\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (collectionNodes.indexOf(node) < 0 && node.nodeType === Node.ELEMENT_NODE &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0 &&\n                        (node.classList.contains(markerClassName.startSelection) ||\n                            node.classList.contains(markerClassName.endSelection))) {\n                        collectionNodes.push(this.createTempNode(node));\n                    }\n                    if (this.isBlockNode(node) && this.ignoreTableTag(node) && nodes.indexOf(node) < 0 &&\n                        collectionNodes.indexOf(node) < 0 && (node !== endNode || range.endOffset > 0)) {\n                        collectionNodes.push(node);\n                    }\n                }\n                parentNode = this.blockParentNode(endNode);\n                if (parentNode && this.ignoreTableTag(parentNode) && collectionNodes.indexOf(parentNode) < 0) {\n                    collectionNodes.push(parentNode);\n                }\n            }\n        }\n        for (var i = collectionNodes.length - 1; i > 0; i--) {\n            var nodes = this.nodeFinds(collectionNodes[i], collectionNodes);\n            if (nodes.length) {\n                var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n                if (collectionNodes[i].tagName === 'LI' && listNodes.length > 0) {\n                    continue;\n                }\n                else {\n                    collectionNodes.splice(i, 1);\n                }\n            }\n        }\n        return collectionNodes;\n    };\n    DOMNode.prototype.ignoreTableTag = function (element) {\n        return !(CONSTANT.TABLE_BLOCK_TAGS.indexOf(element.tagName.toLocaleLowerCase()) >= 0);\n    };\n    return DOMNode;\n}());\nexport { DOMNode };\n","import * as CONSTANT from './../base/constant';\nimport { createElement, detach, prepend, append, attributes } from '@syncfusion/ej2-base';\nimport { markerClassName } from './dom-node';\nimport * as EVENTS from './../../common/constant';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\n/**\n * Lists internal component\n * @hidden\n */\nvar Lists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     * @hidden\n     */\n    function Lists(parent) {\n        this.parent = parent;\n        this.domNode = this.parent.domNode;\n        this.addEventListener();\n    }\n    Lists.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.LIST_TYPE, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    Lists.prototype.keyDownHandler = function (e) {\n        if (e.event.which === 9) {\n            var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n            this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n            var blockNodes = void 0;\n            var startOffset = range.startOffset;\n            var endOffset = range.endOffset;\n            var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n            var endNode = this.parent.domNode.getSelectedNode(range.endContainer, range.endOffset);\n            if ((startNode === endNode && (startNode.nodeName === 'BR' || startNode.nodeName === '#text') &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(startNode.parentNode.tagName.toLocaleLowerCase()) >= 0)) {\n                return;\n            }\n            else {\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.domNode.setMarker(this.saveSelection);\n                }\n                blockNodes = this.domNode.blockNodes();\n            }\n            var nodes = [];\n            var isNested = true;\n            for (var i = 0; i < blockNodes.length; i++) {\n                if (blockNodes[i].parentNode.tagName === 'LI') {\n                    nodes.push(blockNodes[i].parentNode);\n                }\n                else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                    (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                        blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                    nodes.push(blockNodes[i]);\n                }\n            }\n            if (nodes.length > 1 || nodes.length && ((startOffset === 0 && endOffset === 0) || e.ignoreDefault)) {\n                e.event.preventDefault();\n                e.event.stopPropagation();\n                this.currentAction = this.getAction(nodes[0]);\n                if (e.event.shiftKey) {\n                    this.revertList(nodes);\n                    this.revertClean();\n                }\n                else {\n                    isNested = this.nestedList(nodes);\n                }\n                if (isNested) {\n                    this.cleanNode();\n                    this.parent.editableElement.focus();\n                }\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n                    this.saveSelection.restore();\n                    if (e.callBack) {\n                        e.callBack({\n                            requestType: this.currentAction,\n                            editorMode: 'HTML',\n                            range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                            elements: this.parent.domNode.blockNodes(),\n                            event: e.event\n                        });\n                    }\n                }\n            }\n        }\n        else {\n            switch (e.event.action) {\n                case 'ordered-list':\n                    this.applyListsHandler({ subCommand: 'OL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n                case 'unordered-list':\n                    this.applyListsHandler({ subCommand: 'UL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n            }\n        }\n    };\n    Lists.prototype.getAction = function (element) {\n        var parentNode = element.parentNode;\n        return (parentNode.nodeName === 'OL' ? 'OL' : 'UL');\n    };\n    Lists.prototype.revertClean = function () {\n        var collectionNodes = this.parent.editableElement.querySelectorAll('ul, ol');\n        for (var i = 0; i < collectionNodes.length; i++) {\n            var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n            if (listNodes.length > 0) {\n                for (var j = 0; j < listNodes.length; j++) {\n                    var prevSibling = listNodes[j].previousSibling;\n                    if (prevSibling && prevSibling.tagName === 'LI') {\n                        prevSibling.appendChild(listNodes[j]);\n                    }\n                }\n            }\n        }\n    };\n    Lists.prototype.noPreviousElement = function (elements) {\n        var firstNode;\n        var firstNodeOL;\n        var siblingListOL = elements.querySelectorAll('ol, ul');\n        var siblingListLI = elements\n            .querySelectorAll('li');\n        var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n        if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n            firstNode = siblingListLI[0];\n        }\n        else {\n            firstNodeOL = siblingListOL[0];\n        }\n        if (firstNode) {\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                prepend([h], firstNode);\n                setStyleAttribute(elements, { 'list-style-type': 'none' });\n                setStyleAttribute(firstNode, { 'list-style-type': '' });\n                h = nextSibling;\n            }\n        }\n        else if (firstNodeOL) {\n            var nestedElement = createElement('li');\n            prepend([nestedElement], firstNodeOL);\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                nestedElement.appendChild(h);\n                h = nextSibling;\n            }\n            prepend([firstNodeOL], elements.parentNode);\n            detach(elements);\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], firstNodeOL.parentNode);\n            append([firstNodeOL], nestedElementLI);\n        }\n        else {\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], elements.parentNode);\n            var nestedElement = createElement(elements.parentNode.tagName);\n            prepend([nestedElement], nestedElementLI);\n            append([elements], nestedElement);\n        }\n    };\n    Lists.prototype.nestedList = function (elements) {\n        var isNested = false;\n        for (var i = 0; i < elements.length; i++) {\n            var prevSibling = this.domNode.getPreviousNode(elements[i]);\n            if (prevSibling) {\n                isNested = true;\n                var firstNode = void 0;\n                var firstNodeLI = void 0;\n                var siblingListOL = elements[i].querySelectorAll('ol, ul');\n                var siblingListLI = elements[i]\n                    .querySelectorAll('li');\n                var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n                if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n                    firstNodeLI = siblingListLI[0];\n                }\n                else {\n                    firstNode = siblingListOL[0];\n                }\n                if (firstNode) {\n                    var nestedElement = createElement('li');\n                    prepend([nestedElement], firstNode);\n                    for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                        var nextSibling = h.nextSibling;\n                        nestedElement.appendChild(h);\n                        h = nextSibling;\n                    }\n                    append([firstNode], prevSibling);\n                    detach(elements[i]);\n                }\n                else if (firstNodeLI) {\n                    if (prevSibling.tagName === 'LI') {\n                        for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                            var nextSibling = h.nextSibling;\n                            prepend([h], firstNodeLI);\n                            setStyleAttribute(elements[i], { 'list-style-type': 'none' });\n                            setStyleAttribute(firstNodeLI, { 'list-style-type': '' });\n                            h = nextSibling;\n                        }\n                        append([firstNodeLI.parentNode], prevSibling);\n                        detach(elements[i]);\n                    }\n                }\n                else {\n                    if (prevSibling.tagName === 'LI') {\n                        var nestedElement = createElement(elements[i].parentNode.tagName);\n                        append([nestedElement], prevSibling);\n                        append([elements[i]], nestedElement);\n                    }\n                }\n            }\n            else {\n                var element = elements[i];\n                isNested = true;\n                this.noPreviousElement(element);\n            }\n        }\n        return isNested;\n    };\n    Lists.prototype.applyListsHandler = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.currentAction = e.subCommand;\n        this.domNode.setMarker(this.saveSelection);\n        var listsNodes = this.domNode.blockNodes();\n        for (var i = 0; i < listsNodes.length; i++) {\n            if (listsNodes[i].tagName !== 'LI' && 'LI' === listsNodes[i].parentNode.tagName) {\n                listsNodes[i] = listsNodes[i].parentNode;\n            }\n        }\n        this.applyLists(listsNodes, this.currentAction);\n        if (e.callBack) {\n            e.callBack({\n                requestType: this.currentAction,\n                event: e.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Lists.prototype.applyLists = function (elements, type) {\n        var isReverse = true;\n        if (this.isRevert(elements, type)) {\n            this.revertList(elements);\n        }\n        else {\n            this.checkLists(elements, type);\n            for (var i = 0; i < elements.length; i++) {\n                if ('LI' !== elements[i].tagName) {\n                    isReverse = false;\n                    var openTag = '<' + type + this.domNode.attributes(elements[i]) + '>';\n                    var closeTag = '</' + type + '>';\n                    var newTag = 'li class=\"e-rte-replace-tag\"';\n                    var replaceHTML = (elements[i].tagName.toLowerCase() === CONSTANT.DEFAULT_TAG ? elements[i].innerHTML :\n                        elements[i].outerHTML);\n                    var innerHTML = this.domNode.createTagString(newTag, null, replaceHTML);\n                    var collectionString = openTag + innerHTML + closeTag;\n                    this.domNode.replaceWith(elements[i], collectionString);\n                    var element = this.parent.editableElement.querySelector('.e-rte-replace-tag');\n                    element.removeAttribute('class');\n                }\n            }\n        }\n        this.cleanNode();\n        this.parent.editableElement.focus();\n        this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n        this.saveSelection.restore();\n    };\n    Lists.prototype.isRevert = function (nodes, tagName) {\n        var isRevert = true;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].tagName !== 'LI') {\n                return false;\n            }\n            if (nodes[i].parentNode.tagName !== tagName) {\n                isRevert = false;\n            }\n        }\n        return isRevert;\n    };\n    Lists.prototype.checkLists = function (nodes, tagName) {\n        var nodesTemp = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i].parentNode;\n            if (nodes[i].tagName === 'LI' && node.tagName !== tagName && nodesTemp.indexOf(node) < 0) {\n                nodesTemp.push(node);\n            }\n        }\n        for (var j = nodesTemp.length - 1; j >= 0; j--) {\n            var h = nodesTemp[j];\n            var replace = '<' + tagName.toLowerCase() + ' '\n                + this.domNode.attributes(h) + '>' + h.innerHTML + '</' + tagName.toLowerCase() + '>';\n            this.domNode.replaceWith(nodesTemp[j], replace);\n        }\n    };\n    Lists.prototype.cleanNode = function () {\n        var liParents = this.parent.editableElement.querySelectorAll('ol + ol, ul + ul');\n        for (var c = 0; c < liParents.length; c++) {\n            var node = liParents[c];\n            if (this.domNode.isList(node.previousSibling) &&\n                this.domNode.openTagString(node) === this.domNode.openTagString(node.previousSibling)) {\n                var contentNodes = this.domNode.contents(node);\n                for (var f = 0; f < contentNodes.length; f++) {\n                    node.previousSibling.appendChild(contentNodes[f]);\n                }\n                node.parentNode.removeChild(node);\n            }\n        }\n    };\n    Lists.prototype.findUnSelected = function (temp, elements) {\n        temp = temp.slice().reverse();\n        if (temp.length > 0) {\n            var rightIndent = [];\n            var indentElements = [];\n            var lastElement = elements[elements.length - 1];\n            var lastElementChild = [];\n            var childElements = [];\n            lastElementChild = (lastElement.childNodes);\n            for (var z = 0; z < lastElementChild.length; z++) {\n                if (lastElementChild[z].tagName === 'OL' || lastElementChild[z].tagName === 'UL') {\n                    var childLI = lastElementChild[z]\n                        .querySelectorAll('li');\n                    if (childLI.length > 0) {\n                        for (var y = 0; y < childLI.length; y++) {\n                            childElements.push(childLI[y]);\n                        }\n                    }\n                }\n            }\n            for (var i = 0; i < childElements.length; i++) {\n                var count = 0;\n                for (var j = 0; j < temp.length; j++) {\n                    if (!childElements[i].contains((temp[j]))) {\n                        count = count + 1;\n                    }\n                }\n                if (count === temp.length) {\n                    indentElements.push(childElements[i]);\n                }\n            }\n            if (indentElements.length > 0) {\n                for (var x = 0; x < indentElements.length; x++) {\n                    if (this.domNode.contents(indentElements[x])[0].nodeName !== 'OL' &&\n                        this.domNode.contents(indentElements[x])[0].nodeName !== 'UL') {\n                        rightIndent.push(indentElements[x]);\n                    }\n                }\n            }\n            if (rightIndent.length > 0) {\n                this.nestedList(rightIndent);\n            }\n        }\n    };\n    Lists.prototype.revertList = function (elements) {\n        var temp = [];\n        for (var i = elements.length - 1; i >= 0; i--) {\n            for (var j = i - 1; j >= 0; j--) {\n                if (elements[j].contains((elements[i])) || elements[j] === elements[i]) {\n                    temp.push(elements[i]);\n                    elements.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.findUnSelected(temp, elements);\n        var viewNode = [];\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var parentNode = elements[i].parentNode;\n            var className = element.getAttribute('class');\n            if (temp.length === 0) {\n                var siblingList = elements[i].querySelectorAll('ul, ol');\n                var firstNode = siblingList[0];\n                if (firstNode) {\n                    var child = firstNode\n                        .querySelectorAll('li');\n                    if (child) {\n                        var nestedElement = createElement(firstNode.tagName);\n                        append([nestedElement], firstNode.parentNode);\n                        var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n                        append([nestedElementLI], nestedElement);\n                        append([firstNode], nestedElementLI);\n                    }\n                }\n            }\n            if (element.parentNode.insertBefore(this.closeTag(parentNode.tagName), element),\n                'LI' === parentNode.parentNode.tagName) {\n                element.parentNode.insertBefore(this.closeTag('LI'), element);\n            }\n            else {\n                var classAttr = '';\n                if (className) {\n                    classAttr += ' class=\"' + className + '\"';\n                }\n                if (CONSTANT.DEFAULT_TAG && 0 === element.querySelectorAll(CONSTANT.BLOCK_TAGS.join(', ')).length) {\n                    var wrapper = '<' + CONSTANT.DEFAULT_TAG + classAttr + ' class=\"e-rte-wrap-inner\"' +\n                        this.domNode.attributes(parentNode) + '></' + CONSTANT.DEFAULT_TAG + '>';\n                    this.domNode.wrapInner(element, this.domNode.parseHTMLFragment(wrapper));\n                }\n                else if (this.domNode.contents(element)[0].nodeType === 3) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.parent.domNode.encode(this.domNode.contents(element)[0].textContent));\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else if (this.domNode.contents(element)[0].classList.contains(markerClassName.startSelection) ||\n                    this.domNode.contents(element)[0].classList.contains(markerClassName.endSelection)) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.domNode.contents(element)[0].outerHTML);\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else {\n                    var childNode = element.firstChild;\n                    className = childNode.getAttribute('class');\n                    attributes(childNode, this.domNode.rawAttributes(parentNode));\n                    if (className && childNode.getAttribute('class')) {\n                        attributes(childNode, { 'class': className + ' ' + childNode.getAttribute('class') });\n                    }\n                }\n                append([this.openTag('LI')], element);\n                prepend([this.closeTag('LI')], element);\n            }\n            this.domNode.insertAfter(this.openTag(parentNode.tagName), element);\n            if (parentNode.parentNode.tagName === 'LI') {\n                parentNode = parentNode.parentNode.parentNode;\n            }\n            if (viewNode.indexOf(parentNode) < 0) {\n                viewNode.push(parentNode);\n            }\n        }\n        for (var i = 0; i < viewNode.length; i++) {\n            var node = viewNode[i];\n            var nodeInnerHtml = node.innerHTML;\n            var closeTag = /<span class=\"e-rte-list-close-([a-z]*)\"><\\/span>/g;\n            var openTag = /<span class=\"e-rte-list-open-([a-z]*)\"><\\/span>/g;\n            nodeInnerHtml = nodeInnerHtml.replace(closeTag, '</$1>');\n            nodeInnerHtml = nodeInnerHtml.replace(openTag, '<$1 ' + this.domNode.attributes(node) + '>');\n            this.domNode.replaceWith(node, this.domNode.openTagString(node) + nodeInnerHtml.trim() + this.domNode.closeTagString(node));\n        }\n        var emptyUl = this.parent.editableElement.querySelectorAll('ul:empty, ol:empty');\n        for (var i = 0; i < emptyUl.length; i++) {\n            detach(emptyUl[i]);\n        }\n        var emptyLi = this.parent.editableElement.querySelectorAll('li:empty');\n        for (var i = 0; i < emptyLi.length; i++) {\n            detach(emptyLi[i]);\n        }\n    };\n    Lists.prototype.openTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-open-' + type.toLowerCase() + '\"></span>');\n    };\n    Lists.prototype.closeTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-close-' + type.toLowerCase() + '\"></span>');\n    };\n    return Lists;\n}());\nexport { Lists };\n","import * as EVENTS from './../../common/constant';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Formats internal component\n * @hidden\n */\nvar Formats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Formats(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Formats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n    };\n    Formats.prototype.getParentNode = function (node) {\n        for (; node.parentNode && node.parentNode !== this.parent.editableElement; null) {\n            node = node.parentNode;\n        }\n        return node;\n    };\n    Formats.prototype.applyFormats = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var formatsNodes = this.parent.domNode.blockNodes();\n        for (var i = 0; i < formatsNodes.length; i++) {\n            var parentNode = void 0;\n            var replaceHTML = void 0;\n            if (e.subCommand.toLowerCase() === 'blockquote') {\n                parentNode = this.getParentNode(formatsNodes[i]);\n                replaceHTML = this.parent.domNode.isList(parentNode) ||\n                    parentNode.tagName === 'TABLE' ? parentNode.outerHTML : parentNode.innerHTML;\n            }\n            else {\n                parentNode = formatsNodes[i];\n                replaceHTML = parentNode.innerHTML;\n            }\n            if (e.subCommand.toLowerCase() === parentNode.tagName.toLowerCase() ||\n                isNullOrUndefined(parentNode.parentNode) || parentNode.tagName === 'LI') {\n                continue;\n            }\n            this.cleanFormats(parentNode, e.subCommand);\n            var replaceTag = this.parent.domNode.createTagString(e.subCommand, parentNode, replaceHTML.replace(/>\\s+</g, '><'));\n            this.parent.domNode.replaceWith(parentNode, replaceTag);\n        }\n        this.parent.editableElement.focus();\n        save = this.parent.domNode.saveMarker(save);\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Formats.prototype.cleanFormats = function (element, tagName) {\n        var ignoreAttr = ['display', 'font-size', 'margin-top', 'margin-bottom', 'margin-left', 'margin-right', 'font-weight'];\n        tagName = tagName.toLowerCase();\n        for (var i = 0; i < ignoreAttr.length && (tagName !== 'p' && tagName !== 'blockquote' && tagName !== 'pre'); i++) {\n            element.style.removeProperty(ignoreAttr[i]);\n        }\n    };\n    return Formats;\n}());\nexport { Formats };\n","/**\n * Node appending methods.\n * @hidden\n */\nvar InsertMethods = /** @class */ (function () {\n    function InsertMethods() {\n    }\n    InsertMethods.WrapBefore = function (textNode, parentNode, isAfter) {\n        parentNode.innerText = textNode.textContent;\n        (!isAfter) ? this.AppendBefore(parentNode, textNode) : this.AppendBefore(parentNode, textNode, true);\n        if (textNode.parentNode) {\n            textNode.parentNode.removeChild(textNode);\n        }\n        return parentNode.childNodes[0];\n    };\n    InsertMethods.Wrap = function (childNode, parentNode) {\n        this.AppendBefore(parentNode, childNode);\n        parentNode.appendChild(childNode);\n        return childNode;\n    };\n    InsertMethods.unwrap = function (node) {\n        var parent = node.parentNode;\n        var child = [];\n        for (; node.firstChild; null) {\n            child.push(parent.insertBefore(node.firstChild, node));\n        }\n        parent.removeChild(node);\n        return child;\n    };\n    InsertMethods.AppendBefore = function (textNode, parentNode, isAfter) {\n        return (parentNode.parentNode) ? ((!isAfter) ? parentNode.parentNode.insertBefore(textNode, parentNode)\n            : parentNode.parentNode.insertBefore(textNode, parentNode.nextSibling)) :\n            parentNode;\n    };\n    return InsertMethods;\n}());\nexport { InsertMethods };\n","import { NodeSelection } from './../../selection/index';\nimport { InsertMethods } from './insert-methods';\n/**\n * Split the Node based on selection\n * @hidden\n */\nvar NodeCutter = /** @class */ (function () {\n    function NodeCutter() {\n        this.position = -1;\n        this.nodeSelection = new NodeSelection();\n    }\n    // Split Selection Node\n    NodeCutter.prototype.GetSpliceNode = function (range, node) {\n        node = this.SplitNode(range, node, true);\n        node = this.SplitNode(range, node, false);\n        return node;\n    };\n    NodeCutter.prototype.SplitNode = function (range, node, isCollapsed) {\n        if (node) {\n            var clone = range.cloneRange();\n            var parent_1 = node.parentNode;\n            var index = this.nodeSelection.getIndex(node);\n            clone.collapse(isCollapsed);\n            (isCollapsed) ? clone.setStartBefore(node) : clone.setEndAfter(node);\n            var fragment = clone.extractContents();\n            if (isCollapsed) {\n                node = parent_1.childNodes[index];\n                fragment = this.spliceEmptyNode(fragment, false);\n                if (fragment && fragment.textContent !== '') {\n                    if (node) {\n                        InsertMethods.AppendBefore(fragment, node);\n                    }\n                    else {\n                        parent_1.appendChild(fragment);\n                        var divNode = document.createElement('div');\n                        divNode.innerHTML = '&#65279;&#65279;';\n                        node = divNode.firstChild;\n                        parent_1.appendChild(node);\n                    }\n                }\n            }\n            else {\n                node = parent_1.childNodes.length > 1 ? parent_1.childNodes[index] :\n                    parent_1.childNodes[0];\n                fragment = this.spliceEmptyNode(fragment, true);\n                if (fragment && fragment.textContent !== '') {\n                    if (node) {\n                        InsertMethods.AppendBefore(fragment, node, true);\n                    }\n                    else {\n                        parent_1.appendChild(fragment);\n                        var divNode = document.createElement('div');\n                        divNode.innerHTML = '&#65279;&#65279;';\n                        parent_1.insertBefore(divNode.firstChild, parent_1.firstChild);\n                        node = parent_1.firstChild;\n                    }\n                }\n            }\n            return node;\n        }\n        else {\n            return null;\n        }\n    };\n    NodeCutter.prototype.spliceEmptyNode = function (fragment, isStart) {\n        var len = fragment.childNodes.length - 1;\n        if (len > -1 && !isStart) {\n            this.spliceEmptyNode(fragment.childNodes[len], isStart);\n        }\n        else if (len > -1) {\n            this.spliceEmptyNode(fragment.childNodes[0], isStart);\n        }\n        else if (fragment.nodeType !== 3 && fragment.nodeType !== 11) {\n            fragment.parentNode.removeChild(fragment);\n        }\n        return fragment;\n    };\n    // Cursor Position split\n    NodeCutter.prototype.GetCursorStart = function (indexes, index, isStart) {\n        indexes = (isStart) ? indexes : indexes.reverse();\n        var position = indexes[0];\n        for (var num = 0; num < indexes.length && ((isStart) ? (indexes[num] < index) : (indexes[num] >= index)); num++) {\n            position = indexes[num];\n        }\n        return position;\n    };\n    NodeCutter.prototype.GetCursorRange = function (docElement, range, node) {\n        var cursorRange = docElement.createRange();\n        var indexes = [];\n        indexes.push(0);\n        var str = this.TrimLineBreak(node.data);\n        var index = str.indexOf(' ', 0);\n        while (index !== -1) {\n            if (indexes.indexOf(index) < 0) {\n                indexes.push(index);\n            }\n            if (new RegExp('\\\\s').test(str[index - 1]) && (indexes.indexOf(index - 1) < 0)) {\n                indexes.push(index - 1);\n            }\n            if (new RegExp('\\\\s').test(str[index + 1])) {\n                indexes.push(index + 1);\n            }\n            index = str.indexOf(' ', (index + 1));\n        }\n        indexes.push(str.length);\n        if ((indexes.indexOf(range.startOffset) >= 0)\n            || ((indexes.indexOf(range.startOffset - 1) >= 0) && (range.startOffset !== 1\n                || (range.startOffset === 1 && new RegExp('\\\\s').test(str[0])))\n                || ((indexes[indexes.length - 1] - 1) === range.startOffset))) {\n            cursorRange = range;\n            this.position = 1;\n        }\n        else {\n            var startOffset = this.GetCursorStart(indexes, range.startOffset, true);\n            this.position = range.startOffset - startOffset;\n            cursorRange.setStart(range.startContainer, startOffset);\n            cursorRange.setEnd(range.startContainer, this.GetCursorStart(indexes, range.startOffset, false));\n        }\n        return cursorRange;\n    };\n    NodeCutter.prototype.GetCursorNode = function (docElement, range, node) {\n        return this.GetSpliceNode(this.GetCursorRange(docElement, range, node), node);\n    };\n    NodeCutter.prototype.TrimLineBreak = function (line) {\n        return line.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, ' ');\n    };\n    return NodeCutter;\n}());\nexport { NodeCutter };\n","import { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport * as CONSTANT from './../base/constant';\nimport { InsertMethods } from './insert-methods';\n/**\n * Insert a HTML Node or Text\n * @hidden\n */\nvar InsertHtml = /** @class */ (function () {\n    function InsertHtml() {\n    }\n    InsertHtml.Insert = function (docElement, insertNode, editNode) {\n        var node;\n        if (typeof insertNode === 'string') {\n            var divNode = document.createElement('div');\n            divNode.innerHTML = insertNode;\n            node = divNode.firstChild;\n        }\n        else {\n            node = insertNode;\n        }\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        var isCollapsed = range.collapsed;\n        var nodes = nodeSelection.getInsertNodeCollection(range);\n        var closestParentNode = (node.nodeName.toLowerCase() === 'table') ? this.closestEle(nodes[0].parentNode, editNode) : nodes[0];\n        if ((!isCollapsed && !(closestParentNode.nodeType === Node.ELEMENT_NODE &&\n            CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) !== -1))\n            || (node.nodeName.toLowerCase() === 'table' && closestParentNode &&\n                CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) === -1)) {\n            var preNode = nodeCutter.GetSpliceNode(range, closestParentNode);\n            var sibNode = preNode.previousSibling;\n            var parentNode = preNode.parentNode;\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else {\n                var lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1]);\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            range.extractContents();\n            for (var index = 0; index < nodes.length; index++) {\n                if (nodes[index].nodeType !== 3 && nodes[index].parentNode != null) {\n                    nodes[index].parentNode.removeChild(nodes[index]);\n                }\n            }\n            if (sibNode) {\n                InsertMethods.AppendBefore(node, sibNode, true);\n            }\n            else {\n                if (parentNode.firstChild) {\n                    InsertMethods.AppendBefore(node, parentNode.firstChild, false);\n                }\n                else {\n                    parentNode.appendChild(node);\n                }\n            }\n            if (node.nodeType !== 3) {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.childNodes.length);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.textContent.length);\n            }\n        }\n        else {\n            range.deleteContents();\n            range.insertNode(node);\n            if (node.nodeType !== 3 && node.childNodes.length > 0) {\n                nodeSelection.setSelectionText(docElement, node, node, 1, 1);\n            }\n            else if (node.nodeType !== 3) {\n                nodeSelection.setSelectionContents(docElement, node);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, node.textContent.length, node.textContent.length);\n            }\n        }\n    };\n    InsertHtml.closestEle = function (element, editNode) {\n        var el = element;\n        while (el && el.nodeType === 1) {\n            if (el.parentNode === editNode ||\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(el.parentNode.tagName.toLocaleLowerCase()) !== -1) {\n                return el;\n            }\n            el = el.parentNode;\n        }\n        return null;\n    };\n    return InsertHtml;\n}());\nexport { InsertHtml };\n","import { createElement, isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar LinkCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function LinkCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    LinkCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK, this.linkCommand, this);\n    };\n    LinkCommand.prototype.linkCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'createlink':\n            case 'editlink':\n                this.createLink(e);\n                break;\n            case 'openlink':\n                this.openLink(e);\n                break;\n            case 'removelink':\n                this.removeLink(e);\n                break;\n        }\n    };\n    LinkCommand.prototype.createLink = function (e) {\n        var closestAnchor = (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent.length > 0) &&\n            closest(e.item.selectParent[0], 'a');\n        closestAnchor = !isNullOrUndefined(closestAnchor) ? closestAnchor :\n            (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent.length > 0) ? (e.item.selectParent[0]) : null;\n        if (!isNullOrUndefined(closestAnchor) && closestAnchor.tagName === 'A') {\n            var anchorEle = closestAnchor;\n            anchorEle.setAttribute('href', e.item.url);\n            anchorEle.setAttribute('title', e.item.title);\n            anchorEle.innerHTML = e.item.text;\n            anchorEle.setAttribute('target', e.item.target);\n            e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle, anchorEle, 1, 1);\n        }\n        else {\n            var anchor = createElement('a', {\n                className: 'e-rte-anchor', attrs: {\n                    href: e.item.url,\n                    title: isNullOrUndefined(e.item.title) || e.item.title === '' ? e.item.url : e.item.title\n                }\n            });\n            if (!isNullOrUndefined(e.item.target)) {\n                anchor.setAttribute('target', e.item.target);\n            }\n            anchor.innerText = e.item.text === '' ? e.item.url : e.item.text;\n            e.item.selection.restore();\n            InsertHtml.Insert(this.parent.currentDocument, anchor);\n            if (e.event && e.event.type === 'keydown' && e.event.keyCode === 32) {\n                var startContainer = e.item.selection.range.startContainer;\n                startContainer.textContent = this.removeText(startContainer.textContent, e.item.url);\n            }\n            else {\n                var startIndex = e.item.action === 'Paste' ? anchor.childNodes[0].textContent.length : 0;\n                e.item.selection.setSelectionText(this.parent.currentDocument, anchor.childNodes[0], anchor.childNodes[0], startIndex, anchor.childNodes[0].textContent.length);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Links',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    LinkCommand.prototype.removeText = function (text, val) {\n        var arr = text.split(' ');\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === val) {\n                arr.splice(i, 1);\n                i--;\n            }\n        }\n        return arr.join(' ');\n    };\n    LinkCommand.prototype.openLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    LinkCommand.prototype.removeLink = function (e) {\n        this.parent.domNode.setMarker(e.item.selection);\n        var closestAnchor = closest(e.item.selectParent[0], 'a');\n        var selectParent = closestAnchor ? closestAnchor : e.item.selectParent[0];\n        var parent = selectParent.parentNode;\n        var child = [];\n        for (; selectParent.firstChild; null) {\n            child.push(parent.insertBefore(selectParent.firstChild, selectParent));\n        }\n        parent.removeChild(selectParent);\n        if (child && child.length === 1) {\n            e.item.selection.startContainer = e.item.selection.getNodeArray(child[child.length - 1], true);\n            e.item.selection.endContainer = e.item.selection.startContainer;\n        }\n        e.item.selection = this.parent.domNode.saveMarker(e.item.selection);\n        e.item.selection.restore();\n        this.callBack(e);\n    };\n    LinkCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return LinkCommand;\n}());\nexport { LinkCommand };\n","import * as CONSTANT from './../base/constant';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * Formats internal component\n * @hidden\n */\nvar Alignments = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Alignments(parent) {\n        this.alignments = {\n            'JustifyLeft': 'left',\n            'JustifyCenter': 'center',\n            'JustifyRight': 'right',\n            'JustifyFull': 'justify'\n        };\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Alignments.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.ALIGNMENT_TYPE, this.applyAlignment, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Alignments.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'justify-center':\n                this.applyAlignment({ subCommand: 'JustifyCenter', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-full':\n                this.applyAlignment({ subCommand: 'JustifyFull', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-left':\n                this.applyAlignment({ subCommand: 'JustifyLeft', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-right':\n                this.applyAlignment({ subCommand: 'JustifyRight', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Alignments.prototype.applyAlignment = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var alignmentNodes = this.parent.domNode.blockNodes();\n        for (var i = 0; i < alignmentNodes.length; i++) {\n            var parentNode = alignmentNodes[i];\n            setStyleAttribute(parentNode, { 'text-align': this.alignments[e.subCommand] });\n        }\n        this.parent.editableElement.focus();\n        save = this.parent.domNode.saveMarker(save);\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    return Alignments;\n}());\nexport { Alignments };\n","import * as CONSTANT from './../base/constant';\nimport * as EVENTS from './../../common/constant';\n/**\n * Indents internal component\n * @hidden\n */\nvar Indents = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Indents(parent) {\n        this.indentValue = 20;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Indents.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INDENT_TYPE, this.applyIndents, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Indents.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'indents':\n                this.applyIndents({ subCommand: 'Indent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'outdents':\n                this.applyIndents({ subCommand: 'Outdent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Indents.prototype.applyIndents = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var indentsNodes = this.parent.domNode.blockNodes();\n        var parentNodes = indentsNodes.slice();\n        var listsNodes = [];\n        for (var i = 0; i < parentNodes.length; i++) {\n            if (parentNodes[i].tagName !== 'LI' && 'LI' === parentNodes[i].parentNode.tagName) {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i].parentNode);\n            }\n            else if (parentNodes[i].tagName === 'LI') {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i]);\n            }\n        }\n        if (listsNodes.length > 0) {\n            this.parent.observer.notify(EVENTS.KEY_DOWN_HANDLER, {\n                event: {\n                    preventDefault: function () { return; },\n                    stopPropagation: function () { return; },\n                    shiftKey: (e.subCommand === 'Indent' ? false : true),\n                    which: 9,\n                    action: 'indent'\n                },\n                ignoreDefault: true\n            });\n        }\n        for (var i = 0; i < indentsNodes.length; i++) {\n            var parentNode = indentsNodes[i];\n            var marginLeft = parentNode.style.marginLeft;\n            var indentsValue = void 0;\n            if (e.subCommand === 'Indent') {\n                indentsValue = marginLeft === '' ? this.indentValue + 'px' : parseInt(marginLeft, null) + this.indentValue + 'px';\n                parentNode.style.marginLeft = indentsValue;\n            }\n            else {\n                indentsValue = (marginLeft === '' || marginLeft === '0px') ? '' : parseInt(marginLeft, null) - this.indentValue + 'px';\n                parentNode.style.marginLeft = indentsValue;\n            }\n        }\n        this.parent.editableElement.focus();\n        save = this.parent.domNode.saveMarker(save);\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    return Indents;\n}());\nexport { Indents };\n","/**\n * RichTextEditor classes defined here.\n */\n/** @hidden */\nexport var CLASS_IMAGE_RIGHT = 'e-imgright';\nexport var CLASS_IMAGE_LEFT = 'e-imgleft';\nexport var CLASS_IMAGE_CENTER = 'e-imgcenter';\nexport var CLASS_IMAGE_BREAK = 'e-imgbreak';\nexport var CLASS_CAPTION = 'e-img-caption';\nexport var CLASS_CAPTION_INLINE = 'e-caption-inline';\nexport var CLASS_IMAGE_INLINE = 'e-imginline';\n","import { createElement, isNullOrUndefined, detach, closest, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport * as classes from './../base/classes';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar ImageCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function ImageCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ImageCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.IMAGE, this.imageCommand, this);\n    };\n    ImageCommand.prototype.imageCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'image':\n            case 'replace':\n                this.createImage(e);\n                break;\n            case 'insertlink':\n                this.insertImageLink(e);\n                break;\n            case 'openimagelink':\n                this.openImageLink(e);\n                break;\n            case 'editimagelink':\n                this.editImageLink(e);\n                break;\n            case 'removeimagelink':\n                this.removeImageLink(e);\n                break;\n            case 'remove':\n                this.removeImage(e);\n                break;\n            case 'alttext':\n                this.insertAltTextImage(e);\n                break;\n            case 'dimension':\n                this.imageDimension(e);\n                break;\n            case 'caption':\n                this.imageCaption(e);\n                break;\n            case 'justifyleft':\n                this.imageJustifyLeft(e);\n                break;\n            case 'justifycenter':\n                this.imageJustifyCenter(e);\n                break;\n            case 'justifyright':\n                this.imageJustifyRight(e);\n                break;\n            case 'inline':\n                this.imageInline(e);\n                break;\n            case 'break':\n                this.imageBreak(e);\n                break;\n        }\n    };\n    ImageCommand.prototype.createImage = function (e) {\n        if (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent[0].tagName === 'IMG') {\n            var imgEle = e.item.selectParent[0];\n            imgEle.setAttribute('src', e.item.url);\n            imgEle.setAttribute('alt', e.item.altText);\n        }\n        else {\n            var imgElement = createElement('img', {\n                className: 'e-rte-image ' + e.item.cssClass, attrs: {\n                    width: (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.width)) ? 'auto' :\n                        e.item.width.width,\n                    height: (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.height)) ? 'auto' :\n                        e.item.height.height,\n                    alt: (e.item.altText !== '') ? e.item.altText : ''\n                }\n            });\n            imgElement.setAttribute('src', isNullOrUndefined(e.item.url) ? '' : e.item.url);\n            imgElement.style.minWidth = (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.minWidth)) ? 0 + 'px' :\n                e.item.width.minWidth + 'px';\n            imgElement.style.maxWidth = (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.maxWidth)) ? null :\n                e.item.width.maxWidth + 'px';\n            imgElement.style.minHeight = (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.minHeight)) ? 0 + 'px' :\n                e.item.height.minHeight + 'px';\n            imgElement.style.maxHeight = (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.maxHeight)) ? null :\n                e.item.height.maxHeight + 'px';\n            if (!isNullOrUndefined(e.item.selection)) {\n                e.item.selection.restore();\n            }\n            InsertHtml.Insert(this.parent.currentDocument, imgElement);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Image',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    ImageCommand.prototype.insertImageLink = function (e) {\n        var anchor = createElement('a', {\n            attrs: {\n                href: e.item.url,\n                target: e.item.target\n            }\n        });\n        anchor.appendChild(e.item.selectNode[0]);\n        InsertHtml.Insert(this.parent.currentDocument, anchor);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.openImageLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImageLink = function (e) {\n        detach(closest(e.item.selectParent[0], 'a'));\n        InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.editImageLink = function (e) {\n        e.item.selectNode[0].parentElement.href = e.item.url;\n        e.item.selectNode[0].parentElement.target = e.item.target;\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImage = function (e) {\n        if (closest(e.item.selectNode[0], 'a')) {\n            detach(closest(e.item.selectNode[0], 'a'));\n        }\n        else if (!isNullOrUndefined(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION))) {\n            detach(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION));\n        }\n        else {\n            detach(e.item.selectNode[0]);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.insertAltTextImage = function (e) {\n        e.item.selectNode[0].setAttribute('alt', e.item.altText);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageDimension = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.style.height = '';\n        selectNode.style.width = '';\n        selectNode.width = e.item.width;\n        selectNode.height = e.item.height;\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageCaption = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyLeft = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_LEFT);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyCenter = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_CENTER);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_CENTER);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyRight = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_RIGHT);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageInline = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        addClass([selectNode], classes.CLASS_IMAGE_INLINE);\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageBreak = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], classes.CLASS_IMAGE_BREAK);\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return ImageCommand;\n}());\nexport { ImageCommand };\n","import { createElement, closest, detach } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar TableCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function TableCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    TableCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.TABLE, this.createTable, this);\n        this.parent.observer.on(CONSTANT.INSERT_ROW, this.insertRow, this);\n        this.parent.observer.on(CONSTANT.INSERT_COLUMN, this.insertColumn, this);\n        this.parent.observer.on(CONSTANT.DELETEROW, this.deleteRow, this);\n        this.parent.observer.on(CONSTANT.DELETECOLUMN, this.deleteColumn, this);\n        this.parent.observer.on(CONSTANT.REMOVETABLE, this.removeTable, this);\n        this.parent.observer.on(CONSTANT.TABLEHEADER, this.tableHeader, this);\n        this.parent.observer.on(CONSTANT.TABLE_VERTICAL_ALIGN, this.tableVerticalAlign, this);\n    };\n    TableCommand.prototype.createTable = function (e) {\n        var table = createElement('table', { className: 'e-rte-table' });\n        var tblBody = createElement('tbody');\n        table.style.width = e.item.width.width;\n        var tdWid = parseInt(e.item.width.width, 10) / e.item.columns;\n        for (var i = 0; i < e.item.row; i++) {\n            var row = createElement('tr');\n            for (var j = 0; j < e.item.columns; j++) {\n                var cell = createElement('td');\n                cell.appendChild(createElement('br'));\n                cell.style.width = tdWid + '%';\n                row.appendChild(cell);\n            }\n            tblBody.appendChild(row);\n        }\n        table.appendChild(tblBody);\n        e.item.selection.restore();\n        InsertHtml.Insert(this.parent.currentDocument, table, this.parent.editableElement);\n        e.item.selection.setSelectionText(this.parent.currentDocument, table.querySelector('td'), table.querySelector('td'), 0, 0);\n        table.querySelector('td').classList.add('e-cell-select');\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Table',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n        return table;\n    };\n    TableCommand.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    TableCommand.prototype.insertRow = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        if (selectedCell.nodeName.toLowerCase() === 'th' && e.item.subCommand === 'InsertRowBefore') {\n            return;\n        }\n        var curRow = closest(selectedCell, 'tr');\n        var newRow;\n        if (selectedCell.nodeName.toLowerCase() !== 'th') {\n            newRow = closest(selectedCell, 'tr').cloneNode(true);\n            var tabCell = Array.prototype.slice.call(newRow.querySelectorAll('td'));\n            Array.prototype.forEach.call(tabCell, function (cell) {\n                cell.innerHTML = '';\n                cell.appendChild(createElement('br'));\n                cell.removeAttribute('class');\n            });\n        }\n        else {\n            var childNodes = curRow.childNodes;\n            newRow = createElement('tr');\n            for (var i = 0; i < childNodes.length; i++) {\n                var tdElement = createElement('td');\n                tdElement.appendChild(createElement('br'));\n                newRow.appendChild(tdElement);\n            }\n        }\n        (e.item.subCommand === 'InsertRowBefore') ?\n            curRow.parentElement.insertBefore(newRow, curRow) : this.insertAfter(newRow, curRow);\n        e.item.selection.setSelectionText(this.parent.currentDocument, e.item.selection.range.startContainer, e.item.selection.range.startContainer, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.insertColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        selectedCell = (selectedCell.nodeName !== 'TD') ? closest(selectedCell, 'td,th') : selectedCell;\n        var curRow = closest(selectedCell, 'tr');\n        var curCell;\n        var allRows = closest((curRow), 'table').rows;\n        var colIndex = Array.prototype.slice.call(curRow.querySelectorAll('th,td')).indexOf(selectedCell);\n        var width = parseInt(e.item.width, 10) / (curRow.querySelectorAll('td,th').length + 1);\n        for (var j = 0; j < closest(curRow, 'table').querySelectorAll('th,td').length; j++) {\n            closest(curRow, 'table').querySelectorAll('th,td')[j].style.width = width + '%';\n        }\n        for (var i = 0; i < allRows.length; i++) {\n            curCell = allRows[i].querySelectorAll('th,td')[colIndex];\n            var colTemplate = curCell.cloneNode(true);\n            colTemplate.innerHTML = '';\n            colTemplate.appendChild(createElement('br'));\n            colTemplate.removeAttribute('class');\n            (e.item.subCommand === 'InsertColumnLeft') ? curCell.parentElement.insertBefore(colTemplate, curCell) :\n                this.insertAfter(colTemplate, curCell);\n        }\n        e.item.selection.setSelectionText(this.parent.currentDocument, selectedCell, selectedCell, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var curRow = closest(selectedCell, 'tr');\n        var allRows = closest(curRow, 'table').rows;\n        if (curRow.querySelectorAll('th,td').length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            for (var i = 0; i < allRows.length; i++) {\n                allRows[i].deleteCell(selectedCell.cellIndex);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteRow = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var parentTable = closest(selectedCell, 'table');\n        if (parentTable.rows.length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            parentTable.deleteRow(selectedCell.parentNode.rowIndex);\n            e.item.selection.setSelectionText(this.parent.currentDocument, parentTable.querySelector('td'), parentTable.querySelector('td'), 0, 0);\n            parentTable.querySelector('td, th').classList.add('e-cell-select');\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.removeTable = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var seletedTable = closest(selectedCell.parentElement, 'table');\n        if (seletedTable) {\n            e.item.selection.restore();\n            detach(seletedTable);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableHeader = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var table = closest(selectedCell.parentElement, 'table');\n        if (table && 0 === table.querySelectorAll('thead').length) {\n            var cellCount = table.querySelector('tr').querySelectorAll('td').length;\n            var header = table.createTHead();\n            var row = header.insertRow(0);\n            for (var i = 0; i < cellCount; i++) {\n                var th = createElement('th');\n                th.appendChild(createElement('br'));\n                row.appendChild(th);\n            }\n        }\n        else {\n            table.deleteTHead();\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableVerticalAlign = function (e) {\n        if (e.item.subCommand === 'AlignTop') {\n            e.item.tableCell.style.verticalAlign = 'top';\n        }\n        else if (e.item.subCommand === 'AlignMiddle') {\n            e.item.tableCell.style.verticalAlign = 'middle';\n        }\n        else {\n            e.item.tableCell.style.verticalAlign = 'bottom';\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return TableCommand;\n}());\nexport { TableCommand };\n","/**\n * Is formatted or not.\n * @hidden\n */\nvar IsFormatted = /** @class */ (function () {\n    function IsFormatted() {\n    }\n    IsFormatted.prototype.getFormattedNode = function (node, format, endNode) {\n        var parentNode = this.getFormatParent(node, format, endNode);\n        if (parentNode !== null && parentNode !== endNode) {\n            return parentNode;\n        }\n        return null;\n    };\n    IsFormatted.prototype.getFormatParent = function (node, format, endNode) {\n        do {\n            node = node.parentNode;\n        } while (node && (node !== endNode) && !this.isFormattedNode(node, format));\n        return node;\n    };\n    IsFormatted.prototype.isFormattedNode = function (node, format) {\n        switch (format) {\n            case 'bold':\n                return IsFormatted.isBold(node);\n            case 'italic':\n                return IsFormatted.isItalic(node);\n            case 'underline':\n                return IsFormatted.isUnderline(node);\n            case 'strikethrough':\n                return IsFormatted.isStrikethrough(node);\n            case 'superscript':\n                return IsFormatted.isSuperscript(node);\n            case 'subscript':\n                return IsFormatted.isSubscript(node);\n            case 'fontcolor':\n                return this.isFontColor(node);\n            case 'fontname':\n                return this.isFontName(node);\n            case 'fontsize':\n                return this.isFontSize(node);\n            case 'backgroundcolor':\n                return this.isBackgroundColor(node);\n            default:\n                return false;\n        }\n    };\n    IsFormatted.isBold = function (node) {\n        var validTags = ['strong', 'b'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontWeight === 'bold') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isItalic = function (node) {\n        var validTags = ['em', 'i'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontStyle === 'italic') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isUnderline = function (node) {\n        var validTags = ['u'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.textDecoration === 'underline') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isStrikethrough = function (node) {\n        var validTags = ['del', 'strike'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.textDecoration === 'line-through') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isSuperscript = function (node) {\n        var validTags = ['sup'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isSubscript = function (node) {\n        var validTags = ['sub'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontColor = function (node) {\n        var color = node.style && node.style.color;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            color !== null && color !== '' && color !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            backColor !== null && backColor !== '' && backColor !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontSize = function (node) {\n        var size = node.style && node.style.fontSize;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            size !== null && size !== '' && size !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontName = function (node) {\n        var name = node.style && node.style.fontFamily;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            name !== null && name !== '' && name !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    // Get Formatted Node\n    IsFormatted.inlineTags = [\n        'a',\n        'abbr',\n        'acronym',\n        'b',\n        'bdo',\n        'big',\n        'cite',\n        'code',\n        'dfn',\n        'em',\n        'i',\n        'kbd',\n        'label',\n        'q',\n        'samp',\n        'small',\n        'span',\n        'strong',\n        'sub',\n        'sup',\n        'tt',\n        'u',\n        'var'\n    ];\n    return IsFormatted;\n}());\nexport { IsFormatted };\n","/**\n * `Selection` module is used to handle RTE Selections.\n */\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nvar SelectionCommands = /** @class */ (function () {\n    function SelectionCommands() {\n    }\n    SelectionCommands.applyFormat = function (docElement, format, endNode, value) {\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase', 'fontcolor', 'fontname', 'fontsize', 'backgroundcolor'];\n        if (validFormats.indexOf(format) > -1) {\n            var domSelection = new NodeSelection();\n            var nodeCutter = new NodeCutter();\n            var isFormatted = new IsFormatted();\n            var range = domSelection.getRange(docElement);\n            var save = domSelection.save(range, docElement);\n            var nodes = domSelection.getSelectionNodeCollection(range);\n            var isCollapsed = false;\n            var isFormat = false;\n            var isCursor = false;\n            var isFontStyle = (['fontcolor', 'fontname', 'fontsize', 'backgroundcolor'].indexOf(format) > -1);\n            if (range.collapsed) {\n                if (nodes.length > 0) {\n                    isCollapsed = true;\n                    range = nodeCutter.GetCursorRange(docElement, range, nodes[0]);\n                }\n                else if (range.startContainer.nodeName.toLowerCase() !== 'td') {\n                    var cursorNode = this.insertCursorNode(domSelection, range, isFormatted, nodeCutter, format, value, endNode);\n                    domSelection.endContainer = domSelection.startContainer = domSelection.getNodeArray(cursorNode, true);\n                    domSelection.endOffset = domSelection.startOffset = 1;\n                }\n            }\n            isCursor = range.collapsed;\n            for (var index = 0; index < nodes.length; index++) {\n                var formatNode = isFormatted.getFormattedNode(nodes[index], format, endNode);\n                if (index === 0 && formatNode === null) {\n                    isFormat = true;\n                }\n                if (formatNode !== null && (!isFormat || isFontStyle)) {\n                    nodes[index] = this.removeFormat(nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection);\n                }\n                else {\n                    nodes[index] = this.insertFormat(nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value);\n                }\n                domSelection = this.applySelection(nodes, domSelection, nodeCutter, index, isCollapsed);\n            }\n            save.restore();\n        }\n    };\n    SelectionCommands.insertCursorNode = function (domSelection, range, isFormatted, nodeCutter, format, value, endNode) {\n        var cursorNodes = domSelection.getNodeCollection(range);\n        var cursorFormat = (cursorNodes.length > 0) ? isFormatted.getFormattedNode(cursorNodes[0], format, endNode) : null;\n        var cursorNode = null;\n        if (cursorFormat) {\n            cursorNode = cursorNodes[0];\n            InsertMethods.unwrap(cursorFormat);\n        }\n        else {\n            cursorNode = this.getInsertNode(range, format, value).firstChild;\n        }\n        return cursorNode;\n    };\n    SelectionCommands.removeFormat = function (nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection) {\n        var splitNode = null;\n        if (!(range.startContainer === range.endContainer && range.startOffset === 0\n            && range.endOffset === range.startContainer.length)) {\n            var nodeIndex = [];\n            var cloneNode = nodes[index];\n            do {\n                nodeIndex.push(domSelection.getIndex(cloneNode));\n                cloneNode = cloneNode.parentNode;\n            } while (cloneNode && (cloneNode !== formatNode));\n            cloneNode = splitNode = nodeCutter.GetSpliceNode(range, formatNode);\n            if (!isCursor) {\n                while (cloneNode && cloneNode.childNodes.length > 0 && ((nodeIndex.length - 1) >= 0)\n                    && (cloneNode.childNodes.length > nodeIndex[nodeIndex.length - 1])) {\n                    cloneNode = cloneNode.childNodes[nodeIndex[nodeIndex.length - 1]];\n                    nodeIndex.pop();\n                }\n                if (cloneNode.nodeType === 3 && !(isCursor && cloneNode.nodeValue === '')) {\n                    nodes[index] = cloneNode;\n                }\n                else {\n                    var divNode = document.createElement('div');\n                    divNode.innerHTML = '&#65279;&#65279;';\n                    if (cloneNode.nodeType !== 3) {\n                        cloneNode.insertBefore(divNode.firstChild, cloneNode.firstChild);\n                        nodes[index] = cloneNode.firstChild;\n                    }\n                    else {\n                        cloneNode.parentNode.insertBefore(divNode.firstChild, cloneNode);\n                        nodes[index] = cloneNode.previousSibling;\n                        cloneNode.parentNode.removeChild(cloneNode);\n                    }\n                }\n            }\n            else {\n                var lastNode = splitNode;\n                for (; lastNode.firstChild !== null && lastNode.firstChild.nodeType !== 3; null) {\n                    lastNode = lastNode.firstChild;\n                }\n                lastNode.innerHTML = '&#65279;&#65279;';\n                nodes[index] = lastNode.firstChild;\n            }\n        }\n        var child = InsertMethods.unwrap(formatNode);\n        if (child.length > 0 && isFontStyle) {\n            for (var num = 0; num < child.length; num++) {\n                child[num] = InsertMethods.Wrap(child[num], this.GetFormatNode(format, value));\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.insertFormat = function (nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value) {\n        if (!isCursor) {\n            if ((formatNode === null && isFormat) || isFontStyle) {\n                nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n                nodes[index].textContent = nodeCutter.TrimLineBreak(nodes[index].textContent);\n                if (format === 'uppercase' || format === 'lowercase') {\n                    nodes[index].textContent = (format === 'uppercase') ? nodes[index].textContent.toLocaleUpperCase()\n                        : nodes[index].textContent.toLocaleLowerCase();\n                }\n                else if (!(isFontStyle === true && value === '')) {\n                    var element = this.GetFormatNode(format, value);\n                    nodes[index] = (index === (nodes.length - 1)) ? InsertMethods.Wrap(nodes[index], element)\n                        : InsertMethods.WrapBefore(nodes[index], element, true);\n                    nodes[index] = this.getChildNode(nodes[index], element);\n                }\n            }\n            else {\n                nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n            }\n        }\n        else {\n            if (format !== 'uppercase' && format !== 'lowercase') {\n                var element = this.getInsertNode(range, format, value);\n                nodes[index] = element.firstChild;\n                nodeCutter.position = 1;\n            }\n            else {\n                nodeCutter.position = range.startOffset;\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.getInsertNode = function (range, format, value) {\n        var element = this.GetFormatNode(format, value);\n        element.innerHTML = '&#65279;&#65279;';\n        range.insertNode(element);\n        return element;\n    };\n    SelectionCommands.getChildNode = function (node, element) {\n        if (node === undefined || node === null) {\n            element.innerHTML = '&#65279;';\n            node = element.firstChild;\n        }\n        return node;\n    };\n    SelectionCommands.applySelection = function (nodes, domSelection, nodeCutter, index, isCollapsed) {\n        if (nodes.length === 1 && !isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = 0;\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        else if (nodes.length === 1 && isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = nodeCutter.position;\n            domSelection.endOffset = nodeCutter.position;\n        }\n        else if (index === 0) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.startOffset = 0;\n        }\n        else if (index === nodes.length - 1) {\n            domSelection.endContainer = domSelection.getNodeArray(nodes[index], false);\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        return domSelection;\n    };\n    SelectionCommands.GetFormatNode = function (format, value) {\n        var node;\n        switch (format) {\n            case 'bold':\n                return document.createElement('strong');\n            case 'italic':\n                return document.createElement('em');\n            case 'underline':\n                node = document.createElement('span');\n                node.style.textDecoration = 'underline';\n                return node;\n            case 'strikethrough':\n                node = document.createElement('span');\n                node.style.textDecoration = 'line-through';\n                return node;\n            case 'superscript':\n                return document.createElement('sup');\n            case 'subscript':\n                return document.createElement('sub');\n            case 'fontcolor':\n                node = document.createElement('span');\n                node.style.color = value;\n                node.style.textDecoration = 'inherit';\n                return node;\n            case 'fontname':\n                node = document.createElement('span');\n                node.style.fontFamily = value;\n                return node;\n            case 'fontsize':\n                node = document.createElement('span');\n                node.style.fontSize = value;\n                return node;\n            default:\n                node = document.createElement('span');\n                node.style.backgroundColor = value;\n                return node;\n        }\n    };\n    return SelectionCommands;\n}());\nexport { SelectionCommands };\n","import * as CONSTANT from './../base/constant';\nimport { SelectionCommands } from './selection-commands';\nimport * as EVENTS from './../../common/constant';\n/**\n * Selection EXEC internal component\n * @hidden\n */\nvar SelectionBasedExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function SelectionBasedExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    SelectionBasedExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.SELECTION_TYPE, this.applySelection, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    SelectionBasedExec.prototype.keyDownHandler = function (e) {\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase'];\n        if (e.event.ctrlKey && validFormats.indexOf(e.event.action) > -1) {\n            e.event.preventDefault();\n            SelectionCommands.applyFormat(this.parent.currentDocument, e.event.action, this.parent.editableElement);\n            this.callBack(e, e.event.action);\n        }\n    };\n    SelectionBasedExec.prototype.applySelection = function (e) {\n        SelectionCommands.applyFormat(this.parent.currentDocument, e.subCommand.toLocaleLowerCase(), this.parent.editableElement, e.value);\n        this.callBack(e, e.subCommand);\n    };\n    SelectionBasedExec.prototype.callBack = function (event, action) {\n        if (event.callBack) {\n            event.callBack({\n                requestType: action,\n                event: event.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return SelectionBasedExec;\n}());\nexport { SelectionBasedExec };\n","import * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Selection EXEC internal component\n * @hidden\n */\nvar InsertHtmlExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function InsertHtmlExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    InsertHtmlExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERTHTML_TYPE, this.applyHtml, this);\n    };\n    InsertHtmlExec.prototype.applyHtml = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.value);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return InsertHtmlExec;\n}());\nexport { InsertHtmlExec };\n","/**\n * `Clear Format` module is used to handle Clear Format.\n */\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nvar ClearFormat = /** @class */ (function () {\n    function ClearFormat() {\n    }\n    ClearFormat.clear = function (docElement, endNode) {\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        var isCollapsed = range.collapsed;\n        var nodes = nodeSelection.getInsertNodeCollection(range);\n        var save = nodeSelection.save(range, docElement);\n        if (!isCollapsed) {\n            var preNode = nodeCutter.GetSpliceNode(range, nodes[0]);\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else {\n                var lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1]);\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            var exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneSelectNodes = exactNodes.slice();\n            this.clearInlines(nodeSelection.getSelectionNodes(cloneSelectNodes), cloneSelectNodes, nodeSelection.getRange(docElement), nodeCutter, endNode);\n            this.reSelection(docElement, save, exactNodes);\n            range = nodeSelection.getRange(docElement);\n            exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneParentNodes = exactNodes.slice();\n            this.clearBlocks(docElement, cloneParentNodes, endNode, nodeCutter, nodeSelection);\n            this.reSelection(docElement, save, exactNodes);\n        }\n    };\n    ClearFormat.reSelection = function (docElement, save, exactNodes) {\n        var selectionNodes = save.getInsertNodes(exactNodes);\n        save.startContainer = save.getNodeArray(selectionNodes[0], true, docElement);\n        save.startOffset = 0;\n        save.endContainer = save.getNodeArray(selectionNodes[selectionNodes.length - 1], false, docElement);\n        var endIndexNode = selectionNodes[selectionNodes.length - 1];\n        save.endOffset = (endIndexNode.nodeType === 3) ? endIndexNode.textContent.length\n            : endIndexNode.childNodes.length;\n        save.restore();\n    };\n    ClearFormat.clearBlocks = function (docElement, nodes, endNode, nodeCutter, nodeSelection) {\n        var parentNodes = [];\n        for (var index = 0; index < nodes.length; index++) {\n            if (this.BLOCK_TAGS.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1\n                && parentNodes.indexOf(nodes[index]) === -1) {\n                parentNodes.push(nodes[index]);\n            }\n            else if ((this.BLOCK_TAGS.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1)\n                && parentNodes.indexOf(nodes[index].parentNode) === -1\n                && endNode !== nodes[index].parentNode) {\n                parentNodes.push(nodes[index].parentNode);\n            }\n        }\n        parentNodes = this.spliceParent(parentNodes, nodes)[0];\n        parentNodes = this.removeParent(parentNodes);\n        this.unWrap(docElement, parentNodes, nodeCutter, nodeSelection);\n    };\n    ClearFormat.spliceParent = function (parentNodes, nodes) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            var len = parentNodes[index1].childNodes.length;\n            for (var index2 = 0; index2 < len; index2++) {\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) > 0)\n                    && (parentNodes[index1].childNodes[index2].childNodes.length > 0)) {\n                    nodes = this.spliceParent([parentNodes[index1].childNodes[index2]], nodes)[1];\n                }\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) <= -1) &&\n                    (parentNodes[index1].childNodes[index2].textContent.trim() !== '')) {\n                    for (var index3 = 0; index3 < len; index3++) {\n                        if (nodes.indexOf(parentNodes[index1].childNodes[index3]) > -1) {\n                            nodes.splice(nodes.indexOf(parentNodes[index1].childNodes[index3]), 1);\n                        }\n                    }\n                    index2 = parentNodes[index1].childNodes.length;\n                    var parentIndex = parentNodes.indexOf(parentNodes[index1].parentNode);\n                    var nodeIndex = nodes.indexOf(parentNodes[index1].parentNode);\n                    if (parentIndex > -1) {\n                        parentNodes.splice(parentIndex, 1);\n                    }\n                    if (nodeIndex > -1) {\n                        nodes.splice(nodeIndex, 1);\n                    }\n                    var elementIndex = nodes.indexOf(parentNodes[index1]);\n                    if (elementIndex > -1) {\n                        nodes.splice(elementIndex, 1);\n                    }\n                    parentNodes.splice(index1, 1);\n                    index1--;\n                }\n            }\n        }\n        return [parentNodes, nodes];\n    };\n    ClearFormat.removeChild = function (parentNodes, parentNode) {\n        var count = parentNode.childNodes.length;\n        if (count > 0) {\n            for (var index = 0; index < count; index++) {\n                if (parentNodes.indexOf(parentNode.childNodes[index]) > -1) {\n                    parentNodes = this.removeChild(parentNodes, parentNode.childNodes[index]);\n                    parentNodes.splice(parentNodes.indexOf(parentNode.childNodes[index]), 1);\n                }\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.removeParent = function (parentNodes) {\n        for (var index = 0; index < parentNodes.length; index++) {\n            if (parentNodes.indexOf(parentNodes[index].parentNode) > -1) {\n                parentNodes = this.removeChild(parentNodes, parentNodes[index]);\n                parentNodes.splice(index, 1);\n                index--;\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.unWrap = function (docElement, parentNodes, nodeCutter, nodeSelection) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            if (this.NONVALID_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) > -1\n                && parentNodes[index1].parentNode\n                && this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].parentNode.nodeName.toLowerCase()) > -1) {\n                nodeSelection.setSelectionText(docElement, parentNodes[index1], parentNodes[index1], 0, parentNodes[index1].childNodes.length);\n                InsertMethods.unwrap(nodeCutter.GetSpliceNode(nodeSelection.getRange(docElement), parentNodes[index1].parentNode));\n            }\n            if (parentNodes[index1].nodeName.toLocaleLowerCase() !== 'p') {\n                if (this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) < 0\n                    && parentNodes[index1].parentNode.nodeName.toLocaleLowerCase() !== 'p'\n                    && !(parentNodes[index1].childNodes.length === 1\n                        && parentNodes[index1].childNodes[0].nodeName.toLocaleLowerCase() === 'p')) {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                }\n                var childNodes = InsertMethods.unwrap(parentNodes[index1]);\n                if (childNodes.length === 1\n                    && childNodes[0].parentNode.nodeName.toLocaleLowerCase() === 'p') {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                    InsertMethods.unwrap(parentNodes[index1]);\n                }\n                for (var index2 = 0; index2 < childNodes.length; index2++) {\n                    if (this.NONVALID_TAGS.indexOf(childNodes[index2].nodeName.toLowerCase()) > -1) {\n                        this.unWrap(docElement, [childNodes[index2]], nodeCutter, nodeSelection);\n                    }\n                }\n            }\n            else {\n                InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                InsertMethods.unwrap(parentNodes[index1]);\n            }\n        }\n    };\n    ClearFormat.clearInlines = function (textNodes, nodes, range, nodeCutter, endNode) {\n        for (var index = 0; index < textNodes.length; index++) {\n            if (textNodes[index].parentNode &&\n                IsFormatted.inlineTags.indexOf(textNodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1) {\n                nodeCutter.GetSpliceNode(range, textNodes[index].parentNode);\n                this.removeInlineParent(textNodes[index].parentNode);\n            }\n        }\n    };\n    ClearFormat.removeInlineParent = function (textNodes) {\n        var nodes = InsertMethods.unwrap(textNodes);\n        for (var index = 0; index < nodes.length; index++) {\n            if (nodes[index].parentNode.childNodes.length === 1\n                && IsFormatted.inlineTags.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index].parentNode);\n            }\n            else if (IsFormatted.inlineTags.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index]);\n            }\n        }\n    };\n    ClearFormat.BLOCK_TAGS = ['address', 'article', 'aside', 'blockquote',\n        'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n        'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'li', 'main', 'nav',\n        'noscript', 'ol', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th',\n        'thead', 'tr', 'ul'];\n    ClearFormat.NONVALID_PARENT_TAGS = ['thead', 'tbody', 'ul', 'ol', 'table', 'tfoot'];\n    ClearFormat.NONVALID_TAGS = ['thead', 'tbody', 'figcaption', 'td', 'tr',\n        'th', 'tfoot', 'figcaption', 'li'];\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import * as CONSTANT from './../base/constant';\nimport { ClearFormat } from './clearformat';\nimport * as EVENTS from './../../common/constant';\n/**\n * Clear Format EXEC internal component\n * @hidden\n */\nvar ClearFormatExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function ClearFormatExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ClearFormatExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_TYPE, this.applyClear, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ClearFormatExec.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'clear-format':\n                this.applyClear({ subCommand: 'ClearFormat', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    ClearFormatExec.prototype.applyClear = function (e) {\n        if (e.subCommand === 'ClearFormat') {\n            ClearFormat.clear(this.parent.currentDocument, this.parent.editableElement);\n            if (e.callBack) {\n                e.callBack({\n                    requestType: e.subCommand,\n                    event: e.event,\n                    editorMode: 'HTML',\n                    range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n                });\n            }\n        }\n    };\n    return ClearFormatExec;\n}());\nexport { ClearFormatExec };\n","import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    };\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * RTE collection stored html format.\n     * @method saveData\n     * @return {void}\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        var range = new NodeSelection().getRange(this.parent.currentDocument);\n        var save = new NodeSelection().save(range, this.parent.currentDocument);\n        var htmlText = this.parent.editableElement.innerHTML;\n        var changEle = { text: htmlText, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].text.trim() === changEle.text.trim())) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     * @method undo\n     * @return {void}\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = removedContent;\n            this.parent.editableElement.focus();\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     * @method redo\n     * @return {void}\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            this.parent.editableElement.innerHTML = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.focus();\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { Lists } from './../plugin/lists';\nimport { NodeSelection } from './../../selection/index';\nimport { DOMNode } from './../plugin/dom-node';\nimport { Formats } from './../plugin/formats';\nimport { LinkCommand } from './../plugin/link';\nimport { Alignments } from './../plugin/alignments';\nimport { Indents } from './../plugin/indents';\nimport { ImageCommand } from './../plugin/image';\nimport { TableCommand } from './../plugin/table';\nimport { SelectionBasedExec } from './../plugin/selection-exec';\nimport { InsertHtmlExec } from './../plugin/inserthtml-exec';\nimport { ClearFormatExec } from './../plugin/clearformat-exec';\nimport { UndoRedoManager } from './../plugin/undo';\nimport * as EVENTS from './../../common/constant';\n/**\n * EditorManager internal component\n * @hidden\n */\nvar EditorManager = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function EditorManager(options) {\n        this.currentDocument = options.document;\n        this.editableElement = options.editableElement;\n        this.nodeSelection = new NodeSelection();\n        this.domNode = new DOMNode(this.editableElement, this.currentDocument);\n        this.observer = new Observer(this);\n        this.listObj = new Lists(this);\n        this.formatObj = new Formats(this);\n        this.alignmentObj = new Alignments(this);\n        this.indentsObj = new Indents(this);\n        this.linkObj = new LinkCommand(this);\n        this.imgObj = new ImageCommand(this);\n        this.selectionObj = new SelectionBasedExec(this);\n        this.inserthtmlObj = new InsertHtmlExec(this);\n        this.clearObj = new ClearFormatExec(this);\n        this.tableObj = new TableCommand(this);\n        this.undoRedoManager = new UndoRedoManager(this, options.options);\n        this.wireEvents();\n    }\n    EditorManager.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n    };\n    EditorManager.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    EditorManager.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    EditorManager.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    EditorManager.prototype.execCommand = function (command, value, event, callBack, text, exeValue) {\n        switch (command.toLocaleLowerCase()) {\n            case 'lists':\n                this.observer.notify(EVENTS.LIST_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'alignments':\n                this.observer.notify(CONSTANT.ALIGNMENT_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'indents':\n                this.observer.notify(CONSTANT.INDENT_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'links':\n                this.observer.notify(CONSTANT.LINK, { command: command, value: value, item: exeValue, event: event, callBack: callBack });\n                break;\n            case 'images':\n                this.observer.notify(CONSTANT.IMAGE, { command: command, value: value, item: exeValue, event: event, callBack: callBack });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.TABLE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'insertrowbefore':\n                    case 'insertrowafter':\n                        this.observer.notify(CONSTANT.INSERT_ROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'insertcolumnleft':\n                    case 'insertcolumnright':\n                        this.observer.notify(CONSTANT.INSERT_COLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deleterow':\n                        this.observer.notify(CONSTANT.DELETEROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deletecolumn':\n                        this.observer.notify(CONSTANT.DELETECOLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableremove':\n                        this.observer.notify(CONSTANT.REMOVETABLE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableheader':\n                        this.observer.notify(CONSTANT.TABLEHEADER, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'aligntop':\n                    case 'alignmiddle':\n                    case 'alignbottom':\n                        this.observer.notify(CONSTANT.TABLE_VERTICAL_ALIGN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'font':\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.SELECTION_TYPE, { subCommand: value, event: event, callBack: callBack, value: text });\n                break;\n            case 'inserthtml':\n                this.observer.notify(CONSTANT.INSERTHTML_TYPE, { callBack: callBack, value: text });\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack });\n                break;\n        }\n    };\n    return EditorManager;\n}());\nexport { EditorManager };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { EditorManager } from './../../editor-manager/base/editor-manager';\nimport { extend } from '@syncfusion/ej2-base';\nimport { htmlKeyConfig } from './../../common/config';\n/**\n * HTML adapter\n * @hidden\n */\nvar HTMLFormatter = /** @class */ (function (_super) {\n    __extends(HTMLFormatter, _super);\n    function HTMLFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (_this.currentDocument && _this.element) {\n            _this.updateFormatter(_this.element, _this.currentDocument, options.options);\n        }\n        return _this;\n    }\n    HTMLFormatter.prototype.initialize = function () {\n        this.keyConfig = htmlKeyConfig;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     * @param  {Element} editElement\n     * @param  {Document} doc\n     */\n    HTMLFormatter.prototype.updateFormatter = function (editElement, doc, options) {\n        if (editElement && doc) {\n            this.editorManager = new EditorManager({\n                document: doc,\n                editableElement: editElement,\n                options: options\n            });\n        }\n    };\n    return HTMLFormatter;\n}(Formatter));\nexport { HTMLFormatter };\n","import { IsFormatted } from './isformatted';\nimport * as CONSTANT from './../base/constant';\nimport { NodeSelection } from './../../selection/index';\n/**\n * Update Toolbar Status\n * @hidden\n */\nexport var statusCollection = {\n    bold: false,\n    italic: false,\n    subscript: false,\n    superscript: false,\n    strikethrough: false,\n    orderedlist: false,\n    unorderedlist: false,\n    underline: false,\n    alignments: null,\n    backgroundcolor: null,\n    fontcolor: null,\n    fontname: null,\n    fontsize: null,\n    formats: null,\n    createlink: false\n};\nvar ToolbarStatus = /** @class */ (function () {\n    function ToolbarStatus() {\n    }\n    ToolbarStatus.get = function (docElement, targetNode, formatNode, fontSize, fontName, documentNode) {\n        var formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeSelection = new NodeSelection();\n        var nodes = documentNode ? [documentNode] : nodeSelection.getNodeCollection(nodeSelection.getRange(docElement));\n        for (var index = 0; index < nodes.length; index++) {\n            if (nodes[index].nodeType !== 3) {\n                nodes.splice(index, 1);\n                index--;\n            }\n        }\n        for (var index = 0; index < nodes.length; index++) {\n            formatCollection = this.getFormatParent(docElement, formatCollection, nodes[index], targetNode, formatNode, fontSize, fontName);\n            if ((index === 0 && formatCollection.bold) || !formatCollection.bold) {\n                nodeCollection.bold = formatCollection.bold;\n            }\n            if ((index === 0 && formatCollection.italic) || !formatCollection.italic) {\n                nodeCollection.italic = formatCollection.italic;\n            }\n            if ((index === 0 && formatCollection.underline) || !formatCollection.underline) {\n                nodeCollection.underline = formatCollection.underline;\n            }\n            if ((index === 0 && formatCollection.strikethrough) || !formatCollection.strikethrough) {\n                nodeCollection.strikethrough = formatCollection.strikethrough;\n            }\n            if ((index === 0 && formatCollection.superscript) || !formatCollection.superscript) {\n                nodeCollection.superscript = formatCollection.superscript;\n            }\n            if ((index === 0 && formatCollection.subscript) || !formatCollection.subscript) {\n                nodeCollection.subscript = formatCollection.subscript;\n            }\n            if ((index === 0 && formatCollection.fontcolor) || !formatCollection.fontcolor) {\n                nodeCollection.fontcolor = formatCollection.fontcolor;\n            }\n            if ((index === 0 && formatCollection.fontname) || !formatCollection.fontname) {\n                nodeCollection.fontname = formatCollection.fontname;\n            }\n            if ((index === 0 && formatCollection.fontsize) || !formatCollection.fontsize) {\n                nodeCollection.fontsize = formatCollection.fontsize;\n            }\n            if ((index === 0 && formatCollection.backgroundcolor) || !formatCollection.backgroundcolor) {\n                nodeCollection.backgroundcolor = formatCollection.backgroundcolor;\n            }\n            if ((index === 0 && formatCollection.orderedlist) || !formatCollection.orderedlist) {\n                nodeCollection.orderedlist = formatCollection.orderedlist;\n            }\n            if ((index === 0 && formatCollection.unorderedlist) || !formatCollection.unorderedlist) {\n                nodeCollection.unorderedlist = formatCollection.unorderedlist;\n            }\n            if ((index === 0 && formatCollection.alignments) || !formatCollection.alignments) {\n                nodeCollection.alignments = formatCollection.alignments;\n            }\n            if ((index === 0 && formatCollection.formats) || !formatCollection.formats) {\n                nodeCollection.formats = formatCollection.formats;\n            }\n            if ((index === 0 && formatCollection.createlink) || !formatCollection.createlink) {\n                nodeCollection.createlink = formatCollection.createlink;\n            }\n            formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        }\n        return nodeCollection;\n    };\n    ToolbarStatus.getFormatParent = function (docElement, formatCollection, node, targetNode, formatNode, fontSize, fontName) {\n        if (targetNode.contains(node) ||\n            (node.nodeType === 3 && targetNode.nodeType !== 3 && targetNode.contains(node.parentNode))) {\n            do {\n                formatCollection = this.isFormattedNode(docElement, formatCollection, node, formatNode, fontSize, fontName);\n                node = node.parentNode;\n            } while (node && (node !== targetNode));\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFormattedNode = function (docElement, formatCollection, node, formatNode, fontSize, fontName) {\n        if (!formatCollection.bold) {\n            formatCollection.bold = IsFormatted.isBold(node);\n        }\n        if (!formatCollection.italic) {\n            formatCollection.italic = IsFormatted.isItalic(node);\n        }\n        if (!formatCollection.underline) {\n            formatCollection.underline = IsFormatted.isUnderline(node);\n        }\n        if (!formatCollection.strikethrough) {\n            formatCollection.strikethrough = IsFormatted.isStrikethrough(node);\n        }\n        if (!formatCollection.superscript) {\n            formatCollection.superscript = IsFormatted.isSuperscript(node);\n        }\n        if (!formatCollection.subscript) {\n            formatCollection.subscript = IsFormatted.isSubscript(node);\n        }\n        if (!formatCollection.fontcolor) {\n            formatCollection.fontcolor = this.isFontColor(docElement, node);\n        }\n        if (!formatCollection.fontname) {\n            formatCollection.fontname = this.isFontName(docElement, node, fontName);\n        }\n        if (!formatCollection.fontsize) {\n            formatCollection.fontsize = this.isFontSize(node, fontSize);\n        }\n        if (!formatCollection.backgroundcolor) {\n            formatCollection.backgroundcolor = this.isBackgroundColor(node);\n        }\n        if (!formatCollection.orderedlist) {\n            formatCollection.orderedlist = this.isOrderedList(node);\n        }\n        if (!formatCollection.unorderedlist) {\n            formatCollection.unorderedlist = this.isUnorderedList(node);\n        }\n        if (!formatCollection.alignments) {\n            formatCollection.alignments = this.isAlignment(node);\n        }\n        if (!formatCollection.formats) {\n            formatCollection.formats = this.isFormats(node, formatNode);\n        }\n        if (!formatCollection.createlink) {\n            formatCollection.createlink = this.isLink(node);\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFontColor = function (docElement, node) {\n        var color = node.style && node.style.color;\n        if ((color === null || color === undefined || color === '') && node.nodeType !== 3) {\n            color = this.getComputedStyle(docElement, node, 'color');\n        }\n        if (color !== null && color !== '' && color !== undefined) {\n            return color;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isLink = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'a') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (backColor !== null && backColor !== '' && backColor !== undefined) {\n            return backColor;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontSize = function (node, fontSize) {\n        var size = node.style && node.style.fontSize;\n        if ((size !== null && size !== '' && size !== undefined)\n            && (fontSize === null || fontSize === undefined || (fontSize.indexOf(size) > -1))) {\n            return size;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontName = function (docElement, node, fontName) {\n        var name = node.style && node.style.fontFamily;\n        if ((name === null || name === undefined || name === '') && node.nodeType !== 3) {\n            name = this.getComputedStyle(docElement, node, 'font-family');\n        }\n        var index = null;\n        if ((name !== null && name !== '' && name !== undefined)\n            && (fontName === null || fontName === undefined || (fontName.filter(function (value, pos) {\n                var pattern = new RegExp(name, 'i');\n                if ((value.replace(/\"/g, '').replace(/ /g, '') === name.replace(/\"/g, '').replace(/ /g, '')) ||\n                    (value.search(pattern) > -1)) {\n                    index = pos;\n                }\n            }) && (index !== null)))) {\n            return (index !== null) ? fontName[index] : name.replace(/\"/g, '');\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isOrderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ol') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isUnorderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ul') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isAlignment = function (node) {\n        var align = node.style && node.style.textAlign;\n        if (align === 'left') {\n            return 'justifyleft';\n        }\n        else if (align === 'center') {\n            return 'justifycenter';\n        }\n        else if (align === 'right') {\n            return 'justifyright';\n        }\n        else if (align === 'justify') {\n            return 'justifyfull';\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFormats = function (node, formatNode) {\n        if (((formatNode === undefined || formatNode === null)\n            && CONSTANT.BLOCK_TAGS.indexOf(node.nodeName.toLocaleLowerCase()) > -1)\n            || (formatNode !== null && formatNode !== undefined\n                && formatNode.indexOf(node.nodeName.toLocaleLowerCase()) > -1)) {\n            return node.nodeName.toLocaleLowerCase();\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.getComputedStyle = function (docElement, node, prop) {\n        return docElement.defaultView.getComputedStyle(node, null).getPropertyValue(prop);\n    };\n    return ToolbarStatus;\n}());\nexport { ToolbarStatus };\n","import * as events from '../base/constant';\nimport { ToolbarStatus } from '../../editor-manager/plugin/toolbar-status';\n/**\n * HtmlToolbarStatus module for refresh the toolbar status\n */\nvar HtmlToolbarStatus = /** @class */ (function () {\n    function HtmlToolbarStatus(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    HtmlToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    HtmlToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n    };\n    HtmlToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var fontsize = [];\n        var fontName = [];\n        var formats = [];\n        this.parent.fontSize.items.forEach(function (item) { fontsize.push(item.value); });\n        this.parent.fontFamily.items.forEach(function (item) { fontName.push(item.value); });\n        this.parent.format.types.forEach(function (item) {\n            formats.push(item.value.toLocaleLowerCase());\n        });\n        this.toolbarStatus = ToolbarStatus.get(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel(), formats, fontsize, fontName, args.documentNode);\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n    };\n    return HtmlToolbarStatus;\n}());\nexport { HtmlToolbarStatus };\n","/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    /**\n     * The function is used to render RichTextEditor content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-rte-content', id: this.parent.getID() + 'rte-view' });\n        var rteContent = (rteObj.value !== null && rteObj.value !== '') ? rteObj.value : '<p><br/></p>';\n        this.editableElement = this.parent.createElement('div', {\n            className: 'e-content',\n            id: this.parent.getID() + '_rte-edit-view',\n            attrs: {\n                'contenteditable': 'true'\n            },\n            innerHTML: rteContent\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    ContentRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    ContentRender.prototype.getText = function () {\n        return this.getEditPanel().textContent;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     * @param {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @return {Document}\n     */\n    ContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ContentRender } from '../renderer/content-renderer';\n/* tslint:disable */\nvar IFRAMEHEADER = \"\\n<!DOCTYPE html> \\n    <html>\\n         <head>\\n            <meta charset='utf-8' /> \\n            <style>\\n                @charset \\\"UTF-8\\\";\\n                body {\\n                    font-family: \\\"Roboto\\\", sans-serif;\\n                    font-size: 14px;\\n                }\\n                html, body{height: 100%;margin: 0;}\\n                body.e-cursor{cursor:default}\\n                span.e-selected-node\\t{background-color: #939393;color: white;}\\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\\n                .e-rte-image {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\\n                .e-imgleft {float: left;margin: 0 5px 0 0;text-align: left;}\\n                .e-imgright {float: right;margin: 0 0 0 5px;text-align: right;}\\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\\n                .e-imgbreak {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\\n                img::selection { background: transparent;color: transparent;}\\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\\n                p{margin: 0 0 10px;margin-bottom: 10px;}\\n                li{margin-bottom: 10px;}\\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\\n                h4{font-size: 1em;font-weight: 400;margin: 0;}\\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\\n                strong, b{font-weight: 700;}\\n                a{text-decoration: none;user-select: auto;}\\n                a:hover{text-decoration: underline;};\\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\\n                ul:last-child{margin-bottom: 0;}\\n                table.e-rte-table { border-collapse: collapse; empty-cells: show;}\\n                table.e-rte-table td,table.e-rte-table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;}\\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\\n                table.e-rte-table th {background-color: #E0E0E0;}\\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \\n                table.e-rte-table .e-cell-select {border: 1px double #4a90e2;}\\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\\n                .e-row-resize { cursor: row-resize; height: 1px;}\\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\\n                .e-table-rhelper.e-column-helper { width: 1px; }\\n                .e-table-rhelper.e-row-helper {height: 1px;}\\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\\n                .e-table-rhelper { background-color: #4a90e2;}\\n            </style>\\n        </head>\";\n/* tslint:enable */\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar IframeContentRender = /** @class */ (function (_super) {\n    __extends(IframeContentRender, _super);\n    function IframeContentRender() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * The function is used to render RichTextEditor iframe\n     */\n    IframeContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var rteContent = (rteObj.value !== null && rteObj.value !== '') ? rteObj.value : '<p><br/></p>';\n        var iFrameBodyContent = '<body spellcheck=\"false\" autocorrect=\"off\" contenteditable=\"true\">' +\n            rteContent + '</body></html>';\n        var iFrameContent = IFRAMEHEADER + iFrameBodyContent;\n        var iframe = this.parent.createElement('iframe', {\n            innerHTML: iFrameContent,\n            id: this.parent.getID() + '_rte-view',\n            className: 'e-rte-content',\n            styles: 'display:block;'\n        });\n        this.setPanel(iframe);\n        rteObj.element.appendChild(iframe);\n        iframe.contentDocument.body.id = this.parent.getID() + '_rte-edit-view';\n        iframe.contentDocument.body.setAttribute('aria-owns', this.parent.getID());\n        iframe.contentDocument.open();\n        iFrameContent = this.setThemeColor(iFrameContent, { color: '#333' });\n        iframe.contentDocument.write(iFrameContent);\n        iframe.contentDocument.close();\n    };\n    IframeContentRender.prototype.setThemeColor = function (content, styles) {\n        var fontColor = getComputedStyle(this.parent.element, '.e-richtexteditor').getPropertyValue('color');\n        return content.replace(styles.color, fontColor);\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    IframeContentRender.prototype.getEditPanel = function () {\n        return this.contentPanel.contentDocument.body;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @param  {Document}\n     */\n    IframeContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return IframeContentRender;\n}(ContentRender));\nexport { IframeContentRender };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, closest, attributes, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { HTMLFormatter } from '../formatter/html-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { HtmlToolbarStatus } from './html-toolbar-status';\nimport { IframeContentRender } from '../renderer/iframe-content-renderer';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { ColorPickerInput } from './color-picker';\nimport { NodeSelection } from '../../selection/selection';\nimport { InsertHtml } from '../../editor-manager/plugin/inserthtml';\nimport { getTextNodesUnder } from '../base/util';\n/**\n * `HtmlEditor` module is used to HTML editor\n */\nvar HtmlEditor = /** @class */ (function () {\n    function HtmlEditor(parent, serviceLocator) {\n        this.rangeCollection = [];\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     * @method destroy\n     * @return {void}\n     */\n    HtmlEditor.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    HtmlEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.nodeSelectionObj = new NodeSelection();\n        this.colorPickerModule = new ColorPickerInput(this.parent, this.locator);\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.htmlToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.renderColorPicker, this.renderColorPicker, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.selectRange, this.selectRange, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n        this.parent.on(events.paste, this.onPaste, this);\n    };\n    HtmlEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'false' });\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'true' });\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    HtmlEditor.prototype.onSelectionSave = function () {\n        var currentDocument = this.contentRenderer.getDocument();\n        var range = this.nodeSelectionObj.getRange(currentDocument);\n        this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n    };\n    HtmlEditor.prototype.onSelectionRestore = function (e) {\n        this.parent.isBlur = false;\n        this.contentRenderer.getEditPanel().focus();\n        if (isNullOrUndefined(e.items) || (e.items && e.items[0].command !== 'Table')) {\n            this.saveSelection.restore();\n        }\n    };\n    HtmlEditor.prototype.onKeyDown = function (e) {\n        if (e.args.keyCode === 9 && this.parent.enableTabKey) {\n            var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n            var parentNode = this.nodeSelectionObj.getParentNodeCollection(range);\n            if (!((parentNode[0].nodeName === 'LI' || parentNode[0].nodeName === 'BR' || closest(parentNode[0], 'li')) &&\n                range.startOffset === 0)) {\n                e.args.preventDefault();\n                if (!e.args.shiftKey) {\n                    InsertHtml.Insert(this.contentRenderer.getDocument(), '&nbsp;&nbsp;&nbsp;&nbsp;');\n                    this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()));\n                }\n                else if (this.rangeCollection.length > 0 &&\n                    this.rangeCollection[this.rangeCollection.length - 1].startContainer.textContent.length === 4) {\n                    var textCont = this.rangeCollection[this.rangeCollection.length - 1].startContainer;\n                    this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(), textCont, textCont, 0, textCont.textContent.length);\n                    InsertHtml.Insert(this.contentRenderer.getDocument(), document.createTextNode(''));\n                    this.rangeCollection.pop();\n                }\n            }\n        }\n        if (e.args.action === 'space' ||\n            e.args.action === 'enter') {\n            this.spaceLink(e.args);\n        }\n    };\n    HtmlEditor.prototype.onPaste = function (e) {\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (e.text.match(regex)) {\n            e.args.preventDefault();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var saveSelection = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            var args = { url: e.text, text: '', selection: saveSelection, action: 'Paste' };\n            this.parent.formatter.editorManager.execCommand('Links', 'CreateLink', null, null, args, args);\n        }\n    };\n    HtmlEditor.prototype.spaceLink = function (e) {\n        var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n        var selectNodeEle = this.nodeSelectionObj.getParentNodeCollection(range);\n        var text = range.startContainer.textContent;\n        var splitText = text.split(' ');\n        var urlText = splitText[splitText.length - 1];\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (selectNodeEle[0].nodeName !== 'A' && urlText.match(regex)) {\n            var selection = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n            var selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            var value = {\n                url: urlText,\n                selection: selection, selectParent: selectParent,\n                text: '',\n                title: '',\n                target: ''\n            };\n            this.parent.formatter.process(this.parent, {\n                item: {\n                    'command': 'Links',\n                    'subCommand': 'CreateLink'\n                }\n            }, e, value);\n        }\n    };\n    HtmlEditor.prototype.onToolbarClick = function (args) {\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        var item = args.item;\n        var closestElement = closest(args.originalEvent.target, '.e-rte-quick-popup');\n        if (closestElement && !closestElement.classList.contains('e-rte-inline-popup')) {\n            if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n            }\n            if (item.command === 'Images') {\n                this.parent.notify(events.imageToolbarAction, {\n                    member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n            if (item.command === 'Links') {\n                this.parent.notify(events.linkToolbarAction, {\n                    member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n            if (item.command === 'Table') {\n                this.parent.notify(events.tableToolbarAction, {\n                    member: 'table', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n        }\n        else {\n            var linkDialog = this.parent.element.querySelector('#' + this.parent.getID() + '_rtelink');\n            var imageDialog = this.parent.element.querySelector('#' + this.parent.getID() + '_image');\n            if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                if (isNullOrUndefined(linkDialog) && isNullOrUndefined(imageDialog)) {\n                    save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                }\n                selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n            }\n            switch (item.subCommand) {\n                case 'Maximize':\n                    this.parent.notify(events.enableFullScreen, { args: args });\n                    break;\n                case 'Minimize':\n                    this.parent.notify(events.disableFullScreen, { args: args });\n                    break;\n                case 'CreateLink':\n                    this.parent.notify(events.insertLink, {\n                        member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                    break;\n                case 'Print':\n                    this.parent.print();\n                    break;\n                case 'Image':\n                    this.parent.notify(events.insertImage, {\n                        member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                    break;\n                case 'CreateTable':\n                    this.parent.notify(events.createTable, {\n                        member: 'table', args: args, selection: save\n                    });\n                    break;\n                case 'SourceCode':\n                    this.parent.notify(events.sourceCode, { member: 'viewSource', args: args });\n                    break;\n                case 'Preview':\n                    this.parent.notify(events.updateSource, { member: 'updateSource', args: args });\n                    break;\n                case 'FontColor':\n                case 'BackgroundColor':\n                    break;\n                default:\n                    this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                    break;\n            }\n        }\n    };\n    HtmlEditor.prototype.renderColorPicker = function (args) {\n        this.colorPickerModule.renderColorPickerInput(args);\n    };\n    HtmlEditor.prototype.instantiateRenderer = function () {\n        if (this.parent.iframeSettings.enable) {\n            this.renderFactory.addRenderer(RenderType.Content, new IframeContentRender(this.parent, this.locator));\n        }\n        else {\n            this.renderFactory.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        }\n    };\n    HtmlEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.htmlToolbarClick, this.onToolbarClick);\n        this.parent.off(events.renderColorPicker, this.renderColorPicker);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.selectRange, this.selectRange);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n        this.parent.off(events.paste, this.onPaste);\n    };\n    HtmlEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            this.parent.formatter = new HTMLFormatter({\n                currentDocument: this.contentRenderer.getDocument(),\n                element: editElement,\n                options: option\n            });\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new HtmlToolbarStatus(this.parent);\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    HtmlEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    HtmlEditor.prototype.getModuleName = function () {\n        return 'htmlEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    HtmlEditor.prototype.selectAll = function () {\n        var nodes = getTextNodesUnder(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel());\n        this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(), nodes[0], nodes[nodes.length - 1], 0, nodes[nodes.length - 1].textContent.length);\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    HtmlEditor.prototype.selectRange = function (e) {\n        this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(), e.range);\n    };\n    /**\n     * For get a selected text in RTE\n     * @private\n     */\n    HtmlEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString());\n    };\n    return HtmlEditor;\n}());\nexport { HtmlEditor };\n","import { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize RichTextEditor header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var rteObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.contentRenderer.renderPanel();\n    };\n    /**\n     * Refresh the entire RichTextEditor.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     * @return {void}\n     */\n    Render.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Render.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.keyUp, this.keyUp, this);\n    };\n    Render.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.modelChanged, this.refresh);\n        this.parent.off(events.keyUp, this.keyUp);\n    };\n    Render.prototype.keyUp = function (e) {\n        if (this.parent.editorMode === 'HTML') {\n            switch (e.args.which) {\n                case 46:\n                case 8:\n                    var childNodes = this.parent.contentModule.getEditPanel().childNodes;\n                    if ((childNodes.length === 0) ||\n                        (childNodes.length === 1 && ((childNodes[0].tagName === 'BR') ||\n                            (childNodes[0].tagName === 'P' &&\n                                (childNodes[0].childNodes.length === 0 || childNodes[0].textContent === ''))))) {\n                        var node = this.parent.contentModule.getEditPanel();\n                        node.innerHTML = '<p><br/></p>';\n                        this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), node.childNodes[0], 0);\n                    }\n                    break;\n            }\n        }\n    };\n    return Render;\n}());\nexport { Render };\n","import { EventHandler, detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, addClass, removeClass, Browser } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_RTE_ELEMENTS } from '../base/classes';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml } from '../base/util';\n/**\n * `Link` module is used to handle undo actions.\n */\nvar Link = /** @class */ (function () {\n    function Link(parent, serviceLocator) {\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.addEventListener();\n        this.serviceLocator = serviceLocator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n    }\n    Link.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.insertLink, this.linkDialog, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.insertCompleted, this.showLinkQuickToolbar, this);\n        this.parent.on(events.linkToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.unLink, this.removeLink, this);\n        this.parent.on(events.editLink, this.editLink, this);\n        this.parent.on(events.openLink, this.openLink, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    };\n    Link.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'OpenLink':\n                this.parent.notify(events.openLink, args);\n                break;\n            case 'EditLink':\n                this.parent.notify(events.editLink, args);\n                break;\n            case 'RemoveLink':\n                this.parent.notify(events.unLink, args);\n                break;\n        }\n    };\n    Link.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.insertLink, this.linkDialog);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.insertCompleted, this.showLinkQuickToolbar);\n        this.parent.off(events.linkToolbarAction, this.onToolbarAction);\n        this.parent.off(events.unLink, this.removeLink);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.editLink, this.editLink);\n        this.parent.off(events.openLink, this.openLink);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    };\n    Link.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Link.prototype.showLinkQuickToolbar = function (e) {\n        var pageX;\n        var pageY;\n        if (e.type !== 'Links' || isNullOrUndefined(this.parent.quickToolbarModule) ||\n            isNullOrUndefined(this.parent.quickToolbarModule.linkQTBar)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var parentTop = this.parent.element.getBoundingClientRect().top;\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = e.args;\n        var target;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = ((element.nodeName === '#text') ? (element.parentNode) : element);\n            }\n        });\n        if (e.isNotify) {\n            pageX = target.getBoundingClientRect().left;\n            var tbElement = this.parent.toolbarModule.getToolbarElement();\n            var linkTop = target.getBoundingClientRect().top;\n            var linkPos = linkTop - parentTop;\n            var tbHeight = (tbElement) ? (tbElement.offsetHeight + this.parent.toolbarModule.getExpandTBarPopHeight()) : 0;\n            pageY = window.pageYOffset + ((this.parent.iframeSettings.enable) ? (parentTop + tbHeight + linkTop) : (parentTop + linkPos));\n        }\n        else {\n            pageX = args.pageX;\n            pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + parentTop + args.clientY : args.pageY;\n        }\n        if (this.quickToolObj.linkQTBar) {\n            this.quickToolObj.linkQTBar.showPopup(pageX, pageY, range.endContainer);\n        }\n    };\n    Link.prototype.hideLinkQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.linkQTBar && document.body.contains(this.quickToolObj.linkQTBar.element)) {\n            this.quickToolObj.linkQTBar.hidePopup();\n        }\n    };\n    Link.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        if (args.which === 2 || args.which === 3) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.linkQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            target = this.getAnchorNode(target);\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.linkQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'A' && !target.contains(target.querySelector('img'))) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.showLinkQuickToolbar({\n                    args: args,\n                    isNotify: false,\n                    type: 'Links',\n                    elements: [args.target]\n                });\n            }\n            else {\n                this.hideLinkQuickToolbar();\n            }\n        }\n    };\n    Link.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'insert-link':\n                if (this.parent.editorMode === 'HTML') {\n                    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n                    var save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                    var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n                    var selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n                    var eventArgs = {\n                        args: event.args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    };\n                    this.linkDialog(eventArgs);\n                }\n                else {\n                    var textArea = this.parent.contentModule.getEditPanel();\n                    this.parent.formatter.editorManager.markdownSelection.save(textArea.selectionStart, textArea.selectionEnd);\n                    this.linkDialog({\n                        args: {\n                            item: { command: 'Links', subCommand: 'Link' },\n                            originalEvent: originalEvent\n                        },\n                        member: 'link',\n                        text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                        module: 'Markdown',\n                        name: 'insertLink'\n                    });\n                }\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Link.prototype.linkDialog = function (e, inputDetails) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && (e.selectParent.length > 0 &&\n            !isNullOrUndefined(e.selectParent[0].classList) &&\n            e.selectParent[0].classList.contains('e-rte-anchor')) && isNullOrUndefined(inputDetails)) {\n            this.editLink(e);\n            return;\n        }\n        var selectText;\n        var linkWebAddress = this.i10n.getConstant('linkWebUrl');\n        var linkDisplayText = this.i10n.getConstant('linkText');\n        var linkTooltip = this.i10n.getConstant('linkTooltipLabel');\n        var urlPlace = this.i10n.getConstant('linkurl');\n        var textPlace = this.i10n.getConstant('textPlaceholder');\n        var title = this.i10n.getConstant('linkTitle');\n        var linkDialogEle = this.parent.createElement('div', { className: 'e-rte-link-dialog', id: this.rteID + '_rtelink' });\n        this.parent.element.appendChild(linkDialogEle);\n        var linkContent = this.parent.createElement('div', {\n            className: 'e-rte-linkcontent', id: this.rteID + '_linkContent'\n        });\n        var htmlTextbox = (this.parent.editorMode === 'HTML') ? '<label>' + linkTooltip +\n            '</label></div><div class=\"e-rte-field\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder = \"' + title + '\" class=\"e-input e-rte-linkTitle\"></div>' +\n            '<div class=\"e-rte-label\"></div>' + '<div class=\"e-rte-field\">' +\n            '<input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>' : '';\n        var content = '<div class=\"e-rte-label\"><label>' + linkWebAddress + '</label></div>' + '<div class=\"e-rte-field\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder=\"' + urlPlace + '\" class=\"e-input e-rte-linkurl\"/></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + linkDisplayText + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" class=\"e-input e-rte-linkText\" placeholder=\"' + textPlace + '\">' +\n            '</div><div class=\"e-rte-label\">' + htmlTextbox;\n        var contentElem = parseHtml(content);\n        linkContent.appendChild(contentElem);\n        var linkTarget = linkContent.querySelector('.e-rte-linkTarget');\n        var linkUrl = linkContent.querySelector('.e-rte-linkurl');\n        var linkText = linkContent.querySelector('.e-rte-linkText');\n        var linkTitle = linkContent.querySelector('.e-rte-linkTitle');\n        var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n        this.checkBoxObj = new CheckBox({ label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl });\n        this.checkBoxObj.createElement = this.parent.createElement;\n        this.checkBoxObj.appendTo(linkTarget);\n        selectText = (this.parent.editorMode === 'HTML') ? e.selection.getRange(this.parent.contentModule.getDocument()).toString() :\n            e.text;\n        var linkInsert = this.i10n.getConstant('dialogInsert');\n        var linkCancel = this.i10n.getConstant('dialogCancel');\n        var selection = e.selection;\n        var selectObj = { selfLink: this, selection: e.selection, selectParent: e.selectParent, args: e.args };\n        this.dialogObj = new Dialog({\n            header: this.i10n.getConstant('linkHeader'),\n            content: linkContent,\n            cssClass: CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '310px', height: 'initial',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertlink.bind(selectObj),\n                    buttonModel: { content: linkInsert, cssClass: 'e-flat e-insertLink', isPrimary: true }\n                },\n                { click: function (e) { _this.cancelDialog(e); }, buttonModel: { cssClass: 'e-flat', content: linkCancel } }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogObj = null;\n            },\n        });\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(linkDialogEle);\n        linkDialogEle.style.maxHeight = 'initial';\n        if (!isNullOrUndefined(inputDetails)) {\n            linkUrl.value = inputDetails.url;\n            linkText.value = inputDetails.text;\n            linkTitle.value = inputDetails.title;\n            (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n            this.dialogObj.header = inputDetails.header;\n            this.dialogObj.element.querySelector('.e-insertLink').textContent = inputDetails.btnText;\n        }\n        this.checkUrl(false);\n        if ((this.parent.editorMode === 'HTML' && ((!isNullOrUndefined(selectText) && selectText !== '') &&\n            (e.selection.range.startOffset === 0) || e.selection.range.startOffset !== e.selection.range.endOffset))\n            || e.module === 'Markdown') {\n            linkText.value = selectText;\n        }\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        if (this.quickToolObj) {\n            this.hideLinkQuickToolbar();\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n        }\n    };\n    Link.prototype.insertlink = function (e) {\n        var linkEle = this.selfLink.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl').value;\n        var linkText = linkEle.querySelector('.e-rte-linkText').value;\n        var linkTitle;\n        if (this.selfLink.parent.editorMode === 'HTML') {\n            linkTitle = linkEle.querySelector('.e-rte-linkTitle').value;\n        }\n        var target = (this.selfLink.checkBoxObj.checked) ? '_blank' : null;\n        if (linkUrl === '') {\n            this.selfLink.checkUrl(true);\n            return;\n        }\n        if (!this.selfLink.isUrl(linkUrl)) {\n            linkText = (linkText === '') ? linkUrl : linkText;\n            linkUrl = 'http://' + linkUrl;\n        }\n        else {\n            this.selfLink.checkUrl(false);\n        }\n        var proxy = this.selfLink;\n        if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(this.selection.range.startContainer.parentNode, '#' + proxy.parent.contentModule.getPanel().id))) {\n            proxy.parent.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n            this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.parent.contentModule.getDocument());\n            this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        var value = {\n            url: linkUrl, text: linkText, title: linkTitle, target: target,\n            selection: this.selection, selectParent: this.selectParent\n        };\n        if (proxy.parent.editorMode === 'HTML') {\n            this.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        this.selfLink.parent.formatter.process(this.selfLink.parent, this.args, this.args.originalEvent, value);\n        if (document.body.contains(proxy.dialogObj.element)) {\n            this.selfLink.dialogObj.hide({ returnValue: false });\n        }\n        this.selfLink.parent.contentModule.getEditPanel().focus();\n    };\n    Link.prototype.isUrl = function (url) {\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Link.prototype.checkUrl = function (e) {\n        var linkEle = this.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl');\n        if (e) {\n            addClass([linkUrl], 'e-error');\n            linkUrl.setSelectionRange(0, linkUrl.value.length);\n            linkUrl.focus();\n        }\n        else {\n            removeClass([linkUrl], 'e-error');\n        }\n    };\n    Link.prototype.removeLink = function (e) {\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, selectParent: e.selectParent, selection: e.selection,\n            subCommand: e.args.item.subCommand\n        });\n        this.contentModule.getEditPanel().focus();\n        this.hideLinkQuickToolbar();\n    };\n    Link.prototype.openLink = function (e) {\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                url: selectParentEle.href,\n                target: selectParentEle.target === '' ? '_self' : '_blank', selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n        }\n    };\n    Link.prototype.getAnchorNode = function (element) {\n        var selectParent = closest(element, 'a');\n        return (selectParent ? selectParent : element);\n    };\n    Link.prototype.editLink = function (e) {\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var inputDetails = {\n                url: selectParentEle.href, text: selectParentEle.innerText,\n                title: selectParentEle.title, target: selectParentEle.target,\n                header: 'Edit Link', btnText: linkUpdate\n            };\n            this.linkDialog(e, inputDetails);\n        }\n    };\n    Link.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n        this.parent.contentModule.getEditPanel().focus();\n    };\n    Link.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!isNullOrUndefined(this.dialogObj) && ((!closest(target, '#' + this.dialogObj.element.id) && this.parent.toolbarSettings.enable &&\n            this.parent.getToolbarElement() && !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_CreateLink') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_CreateLink')))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Link.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Link.prototype.getModuleName = function () {\n        return 'link';\n    };\n    return Link;\n}());\nexport { Link };\n","import { addClass, detach, EventHandler, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml } from '../base/util';\n/**\n * `Image` module is used to handle image actions.\n */\nvar Image = /** @class */ (function () {\n    function Image(parent, serviceLocator) {\n        this.pageX = null;\n        this.pageY = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Image.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.insertImage, this.insertImage, this);\n        this.parent.on(events.insertCompleted, this.showImageQuickToolbar, this);\n        this.parent.on(events.imageToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.imageCaption, this.caption, this);\n        this.parent.on(events.imageDelete, this.deleteImg, this);\n        this.parent.on(events.imageLink, this.insertImgLink, this);\n        this.parent.on(events.imageAlt, this.insertAltText, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.imageSize, this.imageSize, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.paste, this.imagePaste, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    Image.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.insertImage, this.insertImage);\n        this.parent.off(events.insertCompleted, this.showImageQuickToolbar);\n        this.parent.off(events.imageCaption, this.caption);\n        this.parent.off(events.imageToolbarAction, this.onToolbarAction);\n        this.parent.off(events.imageDelete, this.deleteImg);\n        this.parent.off(events.imageLink, this.insertImgLink);\n        this.parent.off(events.imageAlt, this.insertAltText);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.imageSize, this.imageSize);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.paste, this.imagePaste);\n        this.parent.off(events.destroy, this.removeEventListener);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick);\n            this.parent.formatter.editorManager.observer.off(events.checkUndo, this.undoStack);\n            if (this.parent.insertImageSettings.resize) {\n                EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n                EventHandler.remove(this.contentModule.getDocument(), 'mousedown', this.onDocumentClick);\n            }\n        }\n    };\n    Image.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Image.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick, this);\n        if (this.parent.insertImageSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            EventHandler.add(this.contentModule.getDocument(), 'mousedown', this.onDocumentClick, this);\n        }\n    };\n    Image.prototype.undoStack = function (args) {\n        if (args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = parseHtml(this.parent.formatter.getUndoRedoStack()[i].text);\n                temp.appendChild(contentElem);\n                var img = temp.querySelectorAll('img');\n                if (temp.querySelector('.e-img-resize') && img.length > 0) {\n                    for (var j = 0; j < img.length; j++) {\n                        img[j].style.outline = '';\n                    }\n                    detach(temp.querySelector('.e-img-resize'));\n                    this.parent.formatter.getUndoRedoStack()[i].text = temp.innerHTML;\n                }\n            }\n        }\n    };\n    Image.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        this.imgEle.parentElement.style.cursor = 'auto';\n        if (Browser.isDevice) {\n            removeClass([e.target.parentElement], 'e-mob-span');\n        }\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.resizeStop, args);\n        var pageX = this.getPointX(e);\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + e.clientY : e.pageY;\n        this.parent.formatter.editorManager.observer.on(events.checkUndo, this.undoStack, this);\n        this.parent.formatter.saveData();\n    };\n    Image.prototype.resizeStart = function (e) {\n        if (e.target.tagName === 'IMG') {\n            this.parent.preventDefaultResize(e);\n            var img = e.target;\n            if (this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n                detach(this.imgResizeDiv);\n            }\n            this.imageResize(img);\n        }\n        if (e.target.classList.contains('e-rte-imageboxmark')) {\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.resizeBtnInit();\n            if (this.quickToolObj) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n            if (e.target.classList.contains('e-rte-topLeft')) {\n                this.resizeBtnStat.topLeft = true;\n            }\n            if (e.target.classList.contains('e-rte-topRight')) {\n                this.resizeBtnStat.topRight = true;\n            }\n            if (e.target.classList.contains('e-rte-botLeft')) {\n                this.resizeBtnStat.botLeft = true;\n            }\n            if (e.target.classList.contains('e-rte-botRight')) {\n                this.resizeBtnStat.botRight = true;\n            }\n            if (Browser.isDevice && this.contentModule.getEditPanel().contains(this.imgResizeDiv) &&\n                !this.imgResizeDiv.classList.contains('e-mob-span')) {\n                addClass([this.imgResizeDiv], 'e-mob-span');\n            }\n            else {\n                var args = { event: e, requestType: 'images' };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Image.prototype.imageClick = function (e) {\n        if (Browser.isDevice) {\n            if ((e.target.tagName === 'IMG' &&\n                e.target.parentElement.tagName === 'A') ||\n                (e.target.tagName === 'IMG')) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n            }\n        }\n        if (e.target.tagName === 'A' ||\n            e.target.parentElement.tagName === 'A') {\n            e.preventDefault();\n        }\n    };\n    Image.prototype.imageResize = function (e) {\n        this.resizeBtnInit();\n        this.imgEle = e;\n        addClass([this.imgEle], 'e-resize');\n        this.imgResizeDiv = this.parent.createElement('span', { className: 'e-img-resize', id: this.rteID + '_imgResize' });\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topLeft', styles: 'cursor: nwse-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topRight', styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botLeft', styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botRight', styles: 'cursor: nwse-resize'\n        }));\n        if (Browser.isDevice) {\n            addClass([this.imgResizeDiv], 'e-mob-rte');\n        }\n        e.style.outline = '2px solid #4a90e2';\n        this.imgResizePos(e, this.imgResizeDiv);\n        this.resizeImgDupPos(e);\n        this.contentModule.getEditPanel().appendChild(this.imgResizeDiv);\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n    };\n    Image.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Image.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Image.prototype.imgResizePos = function (e, imgResizeDiv) {\n        var pos = this.calcPos(e);\n        var top = pos.top;\n        var left = pos.left;\n        var imgWid = e.width;\n        var imgHgt = e.height;\n        var borWid = (Browser.isDevice) ? (4 * parseInt((e.style.outline.slice(-3)), 10)) + 2 :\n            (2 * parseInt((e.style.outline.slice(-3)), 10)) + 2; //span border width + image outline width\n        var devWid = ((Browser.isDevice) ? 0 : 2); // span border width\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.top = (top - (borWid)) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.top = (top - borWid) + 'px';\n    };\n    Image.prototype.calcPos = function (elem) {\n        var parentOffset = { top: 0, left: 0 };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = ((elem.offsetParent && elem.offsetParent.classList.contains('e-img-caption')) ?\n            closest(elem, '#' + this.parent.getID() + '_rte-edit-view') : elem.offsetParent) || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Image.prototype.setAspectRatio = function (img, expectedX, expectedY) {\n        if (isNullOrUndefined(img.width)) {\n            return;\n        }\n        var width = img.style.width !== '' ? parseInt(img.style.width, 10) : img.width;\n        var height = img.style.height !== '' ? parseInt(img.style.height, 10) : img.height;\n        if (width > height) {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc((width / height * expectedY), (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = (width / height * expectedY) + 'px';\n                img.style.height = expectedY + 'px';\n            }\n            else {\n                img.setAttribute('width', (width / height * expectedY).toString());\n                img.setAttribute('height', expectedY.toString());\n            }\n        }\n        else if (height > width) {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc(expectedX, (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = expectedX + 'px';\n                img.style.height = (height / width * expectedX) + 'px';\n            }\n            else {\n                img.setAttribute('width', expectedX.toString());\n                img.setAttribute('height', (height / width * expectedX).toString());\n            }\n        }\n        else {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc(expectedX, (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = expectedX + 'px';\n                img.style.height = expectedX + 'px';\n            }\n            else {\n                img.setAttribute('width', expectedX.toString());\n                img.setAttribute('height', expectedX.toString());\n            }\n        }\n    };\n    Image.prototype.pixToPerc = function (expected, parentEle) {\n        return expected / parseFloat(getComputedStyle(parentEle).width) * 100;\n    };\n    Image.prototype.imgDupMouseMove = function (width, height, e) {\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.onResize, args);\n        if (args.cancel) {\n            this.cancelResizeAction();\n            return;\n        }\n        if ((parseInt(this.parent.insertImageSettings.minWidth, 10) >= parseInt(width, 10) ||\n            parseInt(this.parent.insertImageSettings.maxWidth, 10) <= parseInt(width, 10))) {\n            return;\n        }\n        if (!this.parent.insertImageSettings.resizeByPercent &&\n            (parseInt(this.parent.insertImageSettings.minHeight, 10) >= parseInt(height, 10) ||\n                parseInt(this.parent.insertImageSettings.maxHeight, 10) <= parseInt(height, 10))) {\n            return;\n        }\n        this.imgEle.parentElement.style.cursor = 'pointer';\n        this.setAspectRatio(this.imgEle, parseInt(width, 10), parseInt(height, 10));\n        this.resizeImgDupPos(this.imgEle);\n        this.imgResizePos(this.imgEle, this.imgResizeDiv);\n        this.parent.setContentHeight('', false);\n    };\n    Image.prototype.resizing = function (e) {\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.resizeBtnStat.topLeft || this.resizeBtnStat.topRight) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        var width = parseInt(this.imgDupPos.width, 10) + mouseX;\n        var height = parseInt(this.imgDupPos.height, 10) + mouseY;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        if (this.resizeBtnStat.botRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.botLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n    };\n    Image.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.imgEle && this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            detach(this.imgResizeDiv);\n            this.imgEle.style.outline = '';\n            this.imgResizeDiv = null;\n            this.pageX = null;\n            this.pageY = null;\n        }\n    };\n    Image.prototype.resizeImgDupPos = function (e) {\n        this.imgDupPos = {\n            width: (e.style.height !== '') ? this.imgEle.style.width : e.width + 'px',\n            height: (e.style.height !== '') ? this.imgEle.style.height : e.height + 'px'\n        };\n    };\n    Image.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { botLeft: false, botRight: false, topRight: false, topLeft: false };\n    };\n    Image.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'Replace':\n                this.parent.notify(events.insertImage, args);\n                break;\n            case 'Caption':\n                this.parent.notify(events.imageCaption, args);\n                break;\n            case 'InsertLink':\n                this.parent.notify(events.imageLink, args);\n                break;\n            case 'AltText':\n                this.parent.notify(events.imageAlt, args);\n                break;\n            case 'Remove':\n                this.parent.notify(events.imageDelete, args);\n                break;\n            case 'Dimension':\n                this.parent.notify(events.imageSize, args);\n                break;\n            case 'OpenImageLink':\n                this.openImgLink(args);\n                break;\n            case 'EditImageLink':\n                this.editImgLink(args);\n                break;\n            case 'RemoveImageLink':\n                this.removeImgLink(args);\n                break;\n        }\n    };\n    Image.prototype.openImgLink = function (e) {\n        var target = e.selectParent[0].parentNode.target === '' ? '_self' : '_blank';\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            url: e.selectParent[0].parentNode.href, target: target, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n    };\n    Image.prototype.editImgLink = function (e) {\n        var selectParentEle = e.selectParent[0].parentNode;\n        var linkUpdate = this.i10n.getConstant('dialogUpdate');\n        var inputDetails = {\n            url: selectParentEle.href, target: selectParentEle.target,\n            header: 'Edit Link', btnText: linkUpdate\n        };\n        this.insertImgLink(e, inputDetails);\n    };\n    Image.prototype.removeImgLink = function (e) {\n        e.selection.restore();\n        var insertEle = (this.contentModule.getEditPanel().contains(this.captionEle) && closest(this.captionEle, 'a')) ?\n            this.captionEle : e.selectNode[0];\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            insertElement: insertEle, selectParent: e.selectParent,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            if (!isNullOrUndefined(e.selectParent)) {\n                removeClass([e.selectParent[0]], 'e-img-focus');\n            }\n        }\n    };\n    Image.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                (selectParentEle[0].tagName === 'IMG') && selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                    this.remvoeResizEle();\n                }\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], 'e-img-focus');\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && selectNodeEle[0].nodeName === 'IMG') {\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Images', subCommand: 'Remove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteImg(event_1);\n            }\n            if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                this.remvoeResizEle();\n            }\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'insert-image':\n                if (this.parent.editorMode === 'HTML') {\n                    this.insertImage({\n                        args: {\n                            item: { command: 'Images', subCommand: 'Image' },\n                            originalEvent: originalEvent\n                        },\n                        selectNode: selectNodeEle,\n                        selection: save,\n                        selectParent: selectParentEle\n                    });\n                }\n                else {\n                    this.insertImage({\n                        args: {\n                            item: { command: 'Images', subCommand: 'Image' },\n                            originalEvent: originalEvent\n                        },\n                        member: 'image',\n                        text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                        module: 'Markdown',\n                        name: 'insertImage'\n                    });\n                }\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Image.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Images') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = (selectNodeEle[0].nodeName === 'IMG') ? selectNodeEle : [this.imgEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'JustifyLeft':\n                this.justifyImageLeft(args);\n                break;\n            case 'JustifyCenter':\n                this.justifyImageCenter(args);\n                break;\n            case 'JustifyRight':\n                this.justifyImageRight(args);\n                break;\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], 'e-img-focus');\n        }\n        this.cancelResizeAction();\n    };\n    Image.prototype.imageWithLinkQTBarItemUpdate = function () {\n        var separator;\n        var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                addClass([items[i]], 'e-link-groups');\n                items[i].style.display = 'none';\n            }\n            else if (items[i].getAttribute('title') === 'Insert Link') {\n                items[i].style.display = '';\n            }\n            else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                separator = items[i];\n                detach(items[i]);\n            }\n        }\n        var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n        this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n    };\n    Image.prototype.showImageQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Images' || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.imageQTBar)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (target && !closest(target, 'a')) {\n            this.imageWithLinkQTBarItemUpdate();\n        }\n        if (target.nodeName === 'IMG') {\n            addClass([target], ['e-img-focus']);\n        }\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        if (this.parent.quickToolbarModule.imageQTBar) {\n            if (e.isNotify) {\n                setTimeout(function () { _this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target); }, 400);\n            }\n            else {\n                this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target);\n            }\n        }\n    };\n    Image.prototype.hideImageQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.e-img-focus'))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.e-img-focus')], 'e-img-focus');\n            if (this.quickToolObj && this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n    };\n    Image.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        if (args.which === 2 || args.which === 3) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.imageQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.imageQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'IMG' && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                addClass([target], 'e-img-focus');\n                var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n                var separator = void 0;\n                if (closest(target, 'a')) {\n                    for (var i = 0; i < items.length; i++) {\n                        if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                            items[i].style.display = '';\n                            removeClass([items[i]], 'e-link-groups');\n                        }\n                        else if (items[i].getAttribute('title') === 'Insert Link') {\n                            items[i].style.display = 'none';\n                        }\n                        else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                            separator = items[i];\n                            detach(items[i]);\n                        }\n                    }\n                    var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n                    this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n                }\n                else if (!closest(target, 'a')) {\n                    this.imageWithLinkQTBarItemUpdate();\n                }\n                this.showImageQuickToolbar({ args: args, type: 'Images', elements: [args.target] });\n            }\n            else {\n                this.hideImageQuickToolbar();\n            }\n        }\n    };\n    Image.prototype.insertImgLink = function (e, inputDetails) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var linkWrap = this.parent.createElement('div', { className: 'e-img-linkwrap' });\n            var linkUrl = this.i10n.getConstant('linkurl');\n            var content = '<div class=\"e-rte-field\">' +\n                '<input type=\"text\" data-role =\"none\" class=\"e-input e-img-link\" spellcheck=\"false\" placeholder=\"' + linkUrl + '\"/></div>' +\n                '<div class=\"e-rte-label\"></div>' + '<div class=\"e-rte-field\">' +\n                '<input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>';\n            var contentElem = parseHtml(content);\n            linkWrap.appendChild(contentElem);\n            var linkTarget = linkWrap.querySelector('.e-rte-linkTarget');\n            var inputLink = linkWrap.querySelector('.e-img-link');\n            var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n            this.checkBoxObj = new CheckBox({\n                label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl, change: function (e) {\n                    if (e.checked) {\n                        target_1 = '_blank';\n                    }\n                    else {\n                        target_1 = '';\n                    }\n                }\n            });\n            this.checkBoxObj.createElement = this.parent.createElement;\n            this.checkBoxObj.appendTo(linkTarget);\n            var target_1 = this.checkBoxObj.checked ? '_blank' : '';\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var linkargs_1 = {\n                args: e.args,\n                selfImage: this, selection: e.selection,\n                selectNode: e.selectNode, selectParent: e.selectParent, link: inputLink, target: target_1\n            };\n            this.dialogObj.setProperties({\n                height: 'initial', width: '290px', header: 'Insert Link', content: linkWrap, position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertlink(linkargs_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-link', isPrimary: true\n                        }\n                    }]\n            });\n            if (!isNullOrUndefined(inputDetails)) {\n                inputLink.value = inputDetails.url;\n                (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n                this.dialogObj.header = inputDetails.header;\n            }\n            this.dialogObj.element.style.maxHeight = 'none';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAltText = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        var altText = this.i10n.getConstant('altText');\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var altWrap = this.parent.createElement('div', { className: 'e-img-altwrap' });\n            var altHeader = this.i10n.getConstant('alternateHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var getAlt = (e.selectNode[0].getAttribute('alt') === null) ? '' :\n                e.selectNode[0].getAttribute('alt');\n            var content = '<div class=\"e-rte-field\">' +\n                '<input type=\"text\" spellcheck=\"false\" value=\"' + getAlt + '\" class=\"e-input e-img-alt\" placeholder=\"' + altText + '\"/>' +\n                '</div>';\n            var contentElem = parseHtml(content);\n            altWrap.appendChild(contentElem);\n            var inputAlt = altWrap.querySelector('.e-img-alt');\n            var altArgs_1 = {\n                args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode,\n                alt: inputAlt\n            };\n            this.dialogObj.setProperties({\n                height: 'initial', width: '290px', header: altHeader, content: altWrap, position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertAlt(altArgs_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-alt', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'none';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAlt = function (e) {\n        if (!isNullOrUndefined(e.alt)) {\n            e.selection.restore();\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            var altText = e.alt.value;\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                altText: altText, selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            this.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.insertlink = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var url = e.link.value;\n        if (url === '') {\n            addClass([e.link], 'e-error');\n            e.link.setSelectionRange(0, url.length);\n            e.link.focus();\n            return;\n        }\n        if (!this.isUrl(url)) {\n            url = 'http://' + url;\n        }\n        else {\n            removeClass([e.link], 'e-error');\n        }\n        var proxy = e.selfImage;\n        if (proxy.parent.editorMode === 'HTML') {\n            e.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (e.selectNode[0].parentElement.nodeName === 'A') {\n            proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n                url: url, target: proxy.checkBoxObj.checked ? '_blank' : '', selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            proxy.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n            url: url, target: e.target, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        proxy.dialogObj.hide({ returnValue: false });\n    };\n    Image.prototype.isUrl = function (url) {\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Image.prototype.deleteImg = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n            this.remvoeResizEle();\n        }\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode,\n            captionClass: classes.CLS_CAPTION,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n        }\n        this.cancelResizeAction();\n    };\n    Image.prototype.caption = function (e) {\n        var selectNode = e.selectNode[0];\n        if (selectNode.nodeName !== 'IMG') {\n            return;\n        }\n        e.selection.restore();\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        this.cancelResizeAction();\n        addClass([selectNode], 'e-rte-image');\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Caption';\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLS_CAPTION))) {\n            detach(closest(selectNode, '.' + classes.CLS_CAPTION));\n            if (selectNode.parentElement.tagName === 'A') {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode.parentElement, selectNode: e.selectNode, subCommand: subCommand });\n            }\n            else {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode, selectNode: e.selectNode, subCommand: subCommand });\n            }\n        }\n        else {\n            this.captionEle = this.parent.createElement('span', {\n                className: classes.CLS_CAPTION,\n                attrs: { contenteditable: 'false', draggable: 'false' }\n            });\n            var imgWrap = this.parent.createElement('span', { className: 'e-img-wrap' });\n            var imgInner = this.parent.createElement('span', { className: 'e-img-inner', attrs: { contenteditable: 'true' } });\n            imgWrap.appendChild(e.selectNode[0]);\n            imgWrap.appendChild(imgInner);\n            var imgCaption = this.i10n.getConstant('imageCaption');\n            imgInner.innerHTML = imgCaption;\n            this.captionEle.appendChild(imgWrap);\n            if (selectNode.classList.contains(classes.CLS_IMGINLINE)) {\n                addClass([this.captionEle], classes.CLS_CAPINLINE);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGBREAK)) {\n                addClass([this.captionEle], classes.CLS_IMGBREAK);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGLEFT)) {\n                addClass([this.captionEle], classes.CLS_IMGLEFT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGRIGHT)) {\n                addClass([this.captionEle], classes.CLS_IMGRIGHT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGCENTER)) {\n                addClass([this.captionEle], classes.CLS_IMGCENTER);\n            }\n            this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: this.captionEle, selectNode: e.selectNode, subCommand: subCommand });\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), imgInner.childNodes[0], imgInner.childNodes[0], 0, imgInner.childNodes[0].textContent.length);\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNode], 'e-img-focus');\n        }\n    };\n    Image.prototype.imageSize = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var imgSizeHeader = this.i10n.getConstant('imageSizeHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var dialogContent = this.imgsizeInput(e);\n            var selectObj_1 = { args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode };\n            this.dialogObj.setProperties({\n                height: 'initial', width: '290px', header: imgSizeHeader, content: dialogContent, position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertSize(selectObj_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-size', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'none';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageLeft = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyLeft';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageRight = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyRight';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageCenter = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyCenter';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.imagDialog = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var imgDialog = this.parent.createElement('div', { className: 'e-rte-img-dialog', id: this.rteID + '_image' });\n        this.parent.element.appendChild(imgDialog);\n        var imgInsert = this.i10n.getConstant('dialogInsert');\n        var imglinkCancel = this.i10n.getConstant('dialogCancel');\n        var imgHeader = this.i10n.getConstant('imageHeader');\n        var selection = e.selection;\n        var selectObj = { selfImage: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        this.dialogObj = new Dialog({\n            header: imgHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertImageUrl.bind(selectObj),\n                    buttonModel: { content: imgInsert, cssClass: 'e-flat e-insertImage', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: imglinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogObj = null;\n            },\n        });\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(imgDialog);\n        imgDialog.style.maxHeight = 'none';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n                if (!isNullOrUndefined(e.selectParent)) {\n                    removeClass([e.selectParent[0]], 'e-img-focus');\n                }\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n        }\n    };\n    Image.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n    };\n    Image.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (target.nodeName === 'IMG') {\n            this.imgEle = target;\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((!closest(target, '#' + this.dialogObj.element.id) && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Image') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Image')))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        if (e.target.tagName !== 'IMG' && this.imgResizeDiv && !(this.quickToolObj &&\n            this.quickToolObj.imageQTBar && this.quickToolObj.imageQTBar.element.contains(e.target)) &&\n            this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            this.cancelResizeAction();\n        }\n        if (target.tagName !== 'IMG' && this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n            this.remvoeResizEle();\n            this.contentModule.getEditPanel().querySelector('img').style.outline = '';\n        }\n    };\n    Image.prototype.remvoeResizEle = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        detach(this.contentModule.getEditPanel().querySelector('.e-img-resize'));\n    };\n    Image.prototype.imageUrlPopup = function (e) {\n        var imgUrl = this.parent.createElement('div', { className: 'imgUrl' });\n        var placeUrl = this.i10n.getConstant('imageUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-img-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false' }\n        });\n        imgUrl.appendChild(this.inputUrl);\n        return imgUrl;\n    };\n    Image.prototype.insertImageUrl = function (e) {\n        var proxy = this.selfImage;\n        var url = proxy.inputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertImageSettings.display === 'inline' ?\n                classes.CLS_IMGINLINE : classes.CLS_IMGBREAK);\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.dialogObj.hide({ returnValue: false });\n            proxy.uploadUrl.url = '';\n        }\n        else if (url !== '') {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(this.selection.range.startContainer.parentNode, '#' + proxy.contentModule.getPanel().id))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var regex = /[\\w-]+.(jpg|png|jpeg|gif)/g;\n            var matchUrl = (!isNullOrUndefined(url.match(regex)) && proxy.parent.editorMode === 'HTML') ? url.match(regex)[0] : '';\n            var value = {\n                cssClass: (proxy.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                url: url, selection: this.selection, altText: matchUrl,\n                selectParent: this.selectParent, width: {\n                    width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                    maxWidth: proxy.parent.insertImageSettings.maxWidth\n                },\n                height: {\n                    height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                    maxHeight: proxy.parent.insertImageSettings.maxHeight\n                }\n            };\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n            proxy.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.imgsizeInput = function (e) {\n        var selectNode = e.selectNode[0];\n        var imgHeight = this.i10n.getConstant('imageHeight');\n        var imgWidth = this.i10n.getConstant('imageWidth');\n        var imgSizeWrap = this.parent.createElement('div', { className: 'e-img-sizewrap' });\n        var widthVal = (selectNode.getAttribute('width') === 'auto' ||\n            isNullOrUndefined(selectNode.getAttribute('width'))) ? selectNode.width : selectNode.getClientRects()[0].width;\n        var heightVal = (selectNode.getAttribute('height') === 'auto' ||\n            isNullOrUndefined(selectNode.getAttribute('height'))) ? selectNode.height : selectNode.getClientRects()[0].height;\n        var content = '<div class=\"e-rte-label\"><label>' + imgWidth +\n            '</label></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"imgwidth\" class=\"e-img-width\" value=' +\n            widthVal\n            + ' /></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + imgHeight + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" data-role =\"none\" id=\"imgheight\" class=\"e-img-height\" value=' +\n            heightVal\n            + ' /></div>';\n        var contentElem = parseHtml(content);\n        imgSizeWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: '###.### px', min: this.parent.insertImageSettings.minWidth,\n            max: this.parent.insertImageSettings.maxWidth,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.createElement = this.parent.createElement;\n        widthNum.appendTo(imgSizeWrap.querySelector('#imgwidth'));\n        var heightNum = new NumericTextBox({\n            format: '###.### px', min: this.parent.insertImageSettings.minHeight,\n            max: this.parent.insertImageSettings.maxHeight,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        heightNum.createElement = this.parent.createElement;\n        heightNum.appendTo(imgSizeWrap.querySelector('#imgheight'));\n        return imgSizeWrap;\n    };\n    Image.prototype.insertSize = function (e) {\n        e.selection.restore();\n        var proxy = e.selfImage;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        var dialogEle = proxy.dialogObj.element;\n        var width = parseFloat(dialogEle.querySelector('.e-img-width').value);\n        var height = parseFloat(dialogEle.parentElement.querySelector('.e-img-height').value);\n        proxy.parent.formatter.process(this.parent, e.args, e.args, {\n            width: width, height: height, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.imgResizeDiv) {\n            proxy.imgResizePos(e.selectNode[0], this.imgResizeDiv);\n        }\n        proxy.dialogObj.hide({ returnValue: true });\n    };\n    Image.prototype.insertImage = function (e) {\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var dialogContent = this.parent.createElement('div', { className: 'e-img-content' });\n            if ((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n                || this.parent.editorMode === 'HTML') {\n                dialogContent.appendChild(this.imgUpload(e));\n            }\n            var linkHeader = this.parent.createElement('div', { className: 'e-linkheader' });\n            var linkHeaderText = this.i10n.getConstant('imageLinkHeader');\n            if (this.parent.editorMode === 'HTML') {\n                linkHeader.innerHTML = linkHeaderText;\n            }\n            else {\n                linkHeader.innerHTML = this.i10n.getConstant('mdimageLink');\n            }\n            dialogContent.appendChild(linkHeader);\n            dialogContent.appendChild(this.imageUrlPopup(e));\n            if (e.selectNode && e.selectNode[0].nodeName === 'IMG') {\n                this.dialogObj.setProperties({ header: 'Edit Image', content: dialogContent }, false);\n                this.dialogObj.element.querySelector('.e-insertImage').textContent = 'Update';\n            }\n            else {\n                this.dialogObj.setProperties({ content: dialogContent }, false);\n            }\n            this.dialogObj.element.style.maxHeight = 'none';\n            if ((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n                || this.parent.editorMode === 'HTML') {\n                dialogContent.querySelector('#' + this.rteID + '_insertImage').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-img-url').focus();\n            }\n        }\n    };\n    Image.prototype.imgUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        var proxy = this;\n        if (proxy.parent.editorMode === 'HTML' &&\n            isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '#' + this.contentModule.getPanel().id))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-img-uploadwrap e-droparea' });\n        var deviceImgUpMsg = this.i10n.getConstant('imageDeviceUploadMessage');\n        var imgUpMsg = this.i10n.getConstant('imageUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' });\n        span.innerHTML = (Browser.isDevice) ? deviceImgUpMsg : imgUpMsg;\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn', id: this.rteID + '_insertImage',\n            attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        var button = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        button.createElement = this.parent.createElement;\n        button.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var altText;\n        this.uploadObj = new Uploader({\n            asyncSettings: {\n                saveUrl: this.parent.insertImageSettings.saveUrl,\n            },\n            dropArea: span,\n            multiple: false,\n            enableRtl: this.parent.enableRtl,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            selected: function (e) {\n                altText = e.filesData[0].name;\n                if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                    var reader_1 = new FileReader();\n                    reader_1.addEventListener('load', function (e) {\n                        var url = URL.createObjectURL(proxy.url(reader_1.result));\n                        proxy.uploadUrl = {\n                            url: url, selection: save, altText: altText, selectParent: selectParent,\n                            width: {\n                                width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                                maxWidth: proxy.parent.insertImageSettings.maxWidth\n                            },\n                            height: {\n                                height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                                maxHeight: proxy.parent.insertImageSettings.maxHeight\n                            }\n                        };\n                        proxy.inputUrl.setAttribute('disabled', 'true');\n                    });\n                    reader_1.readAsDataURL(e.filesData[0].rawFile);\n                }\n            },\n            success: function (e) {\n                if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                    var url = _this.parent.insertImageSettings.path + e.file.name;\n                    var value = { url: url, selection: save };\n                    proxy.uploadUrl = {\n                        url: url, selection: save, altText: altText, selectParent: selectParent,\n                        width: {\n                            width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                            maxWidth: proxy.parent.insertImageSettings.maxWidth\n                        },\n                        height: {\n                            height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                            maxHeight: proxy.parent.insertImageSettings.maxHeight\n                        }\n                    };\n                    proxy.inputUrl.setAttribute('disabled', 'true');\n                }\n            },\n            removing: function () {\n                proxy.inputUrl.removeAttribute('disabled');\n                proxy.uploadUrl.url = '';\n            }\n        });\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Image.prototype.fileSelect = function () {\n        document.body.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    Image.prototype.imagePaste = function (args) {\n        if (args.text.length === 0) {\n            var proxy_1 = this;\n            var reader_2 = new FileReader();\n            args.args.preventDefault();\n            reader_2.addEventListener('load', function (e) {\n                var url = {\n                    cssClass: (proxy_1.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                    url: URL.createObjectURL(proxy_1.url(reader_2.result)),\n                    width: {\n                        width: proxy_1.parent.insertImageSettings.width, minWidth: proxy_1.parent.insertImageSettings.minWidth,\n                        maxWidth: proxy_1.parent.insertImageSettings.maxWidth\n                    },\n                    height: {\n                        height: proxy_1.parent.insertImageSettings.height, minHeight: proxy_1.parent.insertImageSettings.minHeight,\n                        maxHeight: proxy_1.parent.insertImageSettings.maxHeight\n                    }\n                };\n                proxy_1.parent.formatter.process(proxy_1.parent, { item: { command: 'Images', subCommand: 'Image' } }, args.args, url);\n            });\n            reader_2.readAsDataURL(args.file);\n        }\n    };\n    Image.prototype.url = function (dataurl) {\n        var arr = dataurl.split(',');\n        var mime = arr[0].match(/:(.*?);/)[1];\n        var bstr = atob(arr[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n        while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n        }\n        return new Blob([u8arr], { type: mime });\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Image.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Image.prototype.getModuleName = function () {\n        return 'image';\n    };\n    return Image;\n}());\nexport { Image };\n","import { removeClass, selectAll, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar ViewSource = /** @class */ (function () {\n    /**\n     * Constructor for view source module\n     */\n    function ViewSource(parent, locator) {\n        this.parent = parent;\n        var serviceLocator = locator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    ViewSource.prototype.addEventListener = function () {\n        this.parent.on(events.sourceCode, this.sourceCode, this);\n        this.parent.on(events.initialEnd, this.onInitialEnd, this);\n        this.parent.on(events.updateSource, this.updateSourceCode, this);\n    };\n    ViewSource.prototype.onInitialEnd = function () {\n        this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ViewSource.prototype.removeEventListener = function () {\n        this.unWireEvent();\n        this.parent.off(events.sourceCode, this.sourceCode);\n        this.parent.off(events.updateSource, this.updateSourceCode);\n        this.parent.off(events.initialEnd, this.onInitialEnd);\n        this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    ViewSource.prototype.getSourceCode = function () {\n        return this.parent.createElement('textarea', { className: 'e-rte-srctextarea' });\n    };\n    ViewSource.prototype.wireEvent = function (element) {\n        this.keyboardModule = new KeyboardEvents(element, {\n            keyAction: this.previewKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n        EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n    };\n    ViewSource.prototype.unWireEvent = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        if (this.previewElement) {\n            EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n        }\n    };\n    ViewSource.prototype.wireBaseKeyDown = function () {\n        this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n            keyAction: this.parent.keyDown.bind(this.parent), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n    };\n    ViewSource.prototype.unWireBaseKeyDown = function () {\n        this.parent.keyboardModule.destroy();\n    };\n    ViewSource.prototype.mouseDownHandler = function (e) {\n        this.parent.notify(events.sourceCodeMouseDown, { args: e });\n    };\n    ViewSource.prototype.previewKeyDown = function (event) {\n        switch (event.action) {\n            case 'html-source':\n                this.updateSourceCode(event);\n                event.preventDefault();\n                break;\n        }\n    };\n    ViewSource.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'html-source':\n                e.event.preventDefault();\n                this.sourceCode(e);\n                e.callBack({\n                    requestType: 'SourceCode',\n                    editorMode: 'HTML',\n                    event: e.event\n                });\n                break;\n        }\n    };\n    ViewSource.prototype.sourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.parent.element);\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'SourceCode', updateItem: 'Preview',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (isNullOrUndefined(this.previewElement)) {\n            this.previewElement = this.getSourceCode();\n        }\n        this.parent.updateValueData();\n        if (this.parent.iframeSettings.enable) {\n            var rteContent = void 0;\n            if (isNullOrUndefined(this.parent.element.querySelector('#' + this.parent.element.id + '_source-view'))) {\n                rteContent = this.parent.createElement('div', {\n                    className: 'e-source-content', id: this.parent.element.id + '_source-view'\n                });\n            }\n            else {\n                rteContent = this.parent.element.querySelector('#' + this.parent.element.id + '_source-view');\n            }\n            rteContent.appendChild(this.previewElement);\n            this.parent.element.appendChild(rteContent);\n            rteContent.style.height = this.contentModule.getPanel().style.height;\n            rteContent.style.marginTop = this.contentModule.getPanel().style.marginTop;\n            this.getPanel().value = this.parent.value;\n            this.contentModule.getPanel().style.display = 'none';\n            rteContent.style.display = 'block';\n        }\n        else {\n            this.contentModule.getPanel().appendChild(this.previewElement);\n            this.getPanel().value = (this.contentModule.getEditPanel().innerHTML === '<p><br></p>' ||\n                this.contentModule.getEditPanel().innerHTML.length === 12) ||\n                (this.contentModule.getEditPanel().childNodes.length === 1 &&\n                    this.contentModule.getEditPanel().childNodes[0].tagName === 'P' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 7) ? null : this.parent.value;\n            this.contentModule.getEditPanel().style.display = 'none';\n            this.previewElement.style.display = 'block';\n        }\n        this.parent.isBlur = false;\n        this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        this.parent.enableToolbarItem('SourceCode');\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        removeClass(tbItems, [CLS_ACTIVE]);\n        this.parent.setContentHeight('sourceCode');\n        this.wireEvent(this.previewElement);\n        this.unWireBaseKeyDown();\n        this.previewElement.focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder)) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder');\n            placeHolderWrapper.style.display = 'none';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        this.parent.invokeChangeEvent();\n    };\n    ViewSource.prototype.updateSourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        var editHTML = this.getPanel();\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'Preview', updateItem: 'SourceCode',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (this.parent.iframeSettings.enable) {\n            editHTML.parentElement.style.display = 'none';\n            this.contentModule.getPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = editHTML.value;\n        }\n        else {\n            editHTML.style.display = 'none';\n            this.contentModule.getEditPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = editHTML.value;\n        }\n        this.parent.isBlur = false;\n        this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        this.parent.setContentHeight();\n        this.unWireEvent();\n        this.wireBaseKeyDown();\n        this.contentModule.getEditPanel().focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder) && this.contentModule.getEditPanel().innerText.length === 0) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder');\n            placeHolderWrapper.style.display = 'block';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        this.parent.formatter.enableUndo(this.parent);\n        this.parent.invokeChangeEvent();\n    };\n    ViewSource.prototype.getPanel = function () {\n        return this.parent.element.querySelector('.e-rte-srctextarea');\n    };\n    ViewSource.prototype.getViewPanel = function () {\n        return (this.parent.iframeSettings.enable && this.getPanel()) ? this.getPanel().parentElement : this.getPanel();\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     * @return {void}\n     */\n    ViewSource.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return ViewSource;\n}());\nexport { ViewSource };\n","import { detach, closest, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Dialog, Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, (Browser.isDevice || this.parent.inlineMode.enable) ? this.insertTableDialog : this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.createTable, (Browser.isDevice || this.parent.inlineMode.enable) ?\n            this.insertTableDialog : this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyDown, this.keyDown);\n    };\n    Table.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n        this.parent.on(events.mouseDown, this.cellSelect, this);\n        if (this.parent.tableSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n        }\n        if (!Browser.isDevice && this.parent.tableSettings.resize) {\n            EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n                this.tableStyles(args, item.subCommand);\n                break;\n        }\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        var proxy = this;\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeEle();\n                }\n            }\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? closest(ele, 'td') : ele;\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                switch (event.keyCode) {\n                    case 9:\n                    case 37:\n                    case 39:\n                        proxy.tabSelection(event, selection, ele);\n                        break;\n                    case 40:\n                    case 38:\n                        proxy.tableArrowNavigation(event, selection, ele);\n                        break;\n                }\n            }\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = (args.selection.range.startContainer.nodeName === 'TD' ||\n            args.selection.range.startContainer.nodeName === 'TH') ?\n            args.selection.range.startContainer : args.selection.range.startContainer.parentElement;\n        if (tdEle.nodeName !== 'TD' && tdEle.nodeName !== 'TH') {\n            return;\n        }\n        this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? table.classList.remove(classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? table.classList.remove(classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n        }\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                this.addRow(selection, event, true);\n                nextElement = nextElement.parentElement.nextSibling.firstChild;\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextSibling)) ?\n                closest(ele, 'tr').nextSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousSibling)) ?\n                closest(ele, 'tr').previousSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        var selectedCell = selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? closest(selectedCell.parentNode, 'td,th') : closest(selectedCell, 'td, th');\n        if (selectedCell && (selectedCell.nodeName === 'TD' || selectedCell.nodeName === 'TH')) {\n            var items = closest(selectedCell, 'table').querySelectorAll('.' + classes.CLS_TABLE_SEL);\n            for (var i = 0; i < items.length; i++) {\n                items[i].style.backgroundColor = args.item.value;\n            }\n            this.parent.formatter.saveData();\n        }\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        if (args.which === 2 || args.which === 3) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n                    this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n                this.quickToolObj.tableQTBar.showPopup(args.pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClass([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    Table.prototype.tableCellLeave = function (e) {\n        removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(selectionObj.selection.range.startContainer.parentNode, '#' + proxy.contentModule.getPanel().id))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            row: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width,\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            target.removeAttribute('class');\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            this.removeResizeEle();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n    };\n    Table.prototype.resizeHelper = function (e) {\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table');\n        if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeEle();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = Array.prototype.slice.call(table.rows[0].cells, 1);\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, 1)[0]);\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length > i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                className: classes.CLS_TB_COL_RES, attrs: {\n                    'data-col': (i + 1).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                className: classes.CLS_TB_ROW_RES, attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) +\n                'px; left:' + (this.calcPos(rows[i]).left + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES, attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeEle = function () {\n        var item = this.contentModule.getEditPanel().querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-control');\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                this.columnEle = this.curTable.rows[0].cells[parseInt(target.getAttribute('data-col'), 10)];\n                this.colIndex = this.columnEle.cellIndex;\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper'\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = pos.left + this.calcPos(this.columnEle).left - 1;\n            this.helper.style.left = left + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.resizing = function (e) {\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.onResize, args);\n        if (args.cancel) {\n            this.cancelResizeAction();\n            return;\n        }\n        var tableReBox = this.contentModule.getEditPanel().querySelector('.e-table-box');\n        var tableWidth = parseInt(getComputedStyle(this.curTable).width, 10);\n        var tableHeight = parseInt(getComputedStyle(this.curTable).height, 10);\n        if (this.resizeBtnStat.column) {\n            var cellColl = this.curTable.rows[0].cells;\n            var width = parseFloat(getComputedStyle(this.columnEle).width);\n            var actualwid = width - mouseX;\n            var totalwid = parseFloat(getComputedStyle(this.columnEle).width) +\n                parseFloat(getComputedStyle(cellColl[this.colIndex - 1]).width);\n            for (var i = 0; i < this.curTable.rows.length; i++) {\n                if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                    this.curTable.rows[i].cells[this.colIndex - 1].style.width = totalwid - actualwid + 'px';\n                    this.curTable.rows[i].cells[this.colIndex].style.width = actualwid + 'px';\n                }\n            }\n            this.updateHelper();\n        }\n        else if (this.resizeBtnStat.row) {\n            this.parent.preventDefaultResize(e);\n            var height = parseFloat(getComputedStyle(this.rowEle).height) + mouseY;\n            if (height > 20) {\n                this.rowEle.style.height = height + 'px';\n            }\n            this.curTable.style.height = '';\n            tableReBox.style.cssText = 'top: ' + (this.calcPos(this.curTable).top + tableHeight - 4) +\n                'px; left:' + (this.calcPos(this.curTable).left + tableWidth - 4) + 'px;';\n            this.updateHelper();\n        }\n        else if (this.resizeBtnStat.tableBox) {\n            if (!Browser.isDevice) {\n                EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n            }\n            this.curTable.style.width = tableWidth + mouseX + 'px';\n            this.curTable.style.height = tableHeight + mouseY + 'px';\n            tableReBox.classList.add('e-rbox-select');\n            tableReBox.style.cssText = 'top: ' + (this.calcPos(this.curTable).top + tableHeight - 4) +\n                'px; left:' + (this.calcPos(this.curTable).left + tableWidth - 4) + 'px;';\n        }\n    };\n    Table.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeEle();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            if (!Browser.isDevice) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n            this.removeResizeEle();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n                this.helper = null;\n            }\n            this.pageX = null;\n            this.pageY = null;\n            this.moveEle = null;\n        }\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        this.removeResizeEle();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = this.l10n.getConstant('tblhead');\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup', id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn', id: this.rteID + '_insertTable',\n            attrs: { type: 'button' }\n        });\n        this.dlgDiv.appendChild(btnEle);\n        var button = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        button.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        if (target && target.classList && ((this.popupObj && !closest(target, '#' + this.popupObj.element.id) ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')) {\n            removeClass(this.parent.element.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n            this.hideTableQuickToolbar();\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeEle();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row', attrs: { 'data-column': '' + row } });\n            for (var col = 0; col < 10; col++) {\n                var display = (row > 2) ? 'none' : 'inline-block';\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default', attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = display;\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) { proxy.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' });\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div>'\n            + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', { className: 'e-rte-edit-table', id: this.rteID + '_tabledialog' });\n        this.parent.element.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        this.editdlgObj = new Dialog({\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.editdlgObj = null;\n            },\n        });\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || proxy.parent.inlineMode.enable) ? args : this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n        table.cellPadding = dialogEle.querySelector('.e-cell-padding').value;\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\" '\n            + ' /></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" />'\n            + ' </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        var padding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        padding.appendTo(tableWrap.querySelector('#cellPadding'));\n        var spacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        spacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Table.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    return Table;\n}());\nexport { Table };\n","/** @hidden  */\nexport var executeGroup = {\n    'bold': {\n        command: 'style',\n        subCommand: 'bold',\n        value: 'strong'\n    },\n    'italic': {\n        command: 'style',\n        subCommand: 'italic',\n        value: 'em'\n    },\n    'underline': {\n        command: 'style',\n        subCommand: 'underline',\n        value: 'span'\n    },\n    'strikeThrough': {\n        command: 'style',\n        subCommand: 'strikeThrough',\n        value: 'span'\n    },\n    'superscript': {\n        command: 'effects',\n        subCommand: 'superscript',\n        value: 'sup'\n    },\n    'subscript': {\n        command: 'effects',\n        subCommand: 'subscript',\n        value: 'sub'\n    },\n    'uppercase': {\n        command: 'casing',\n        subCommand: 'uppercase'\n    },\n    'lowercase': {\n        command: 'casing',\n        subCommand: 'lowercase'\n    },\n    'fontColor': {\n        command: 'font',\n        subCommand: 'fontcolor',\n        value: '#ff0000'\n    },\n    'fontName': {\n        command: 'font',\n        subCommand: 'fontname',\n        value: 'Segoe UI'\n    },\n    'fontSize': {\n        command: 'font',\n        subCommand: 'fontsize',\n        value: '10pt'\n    },\n    'backColor': {\n        command: 'font',\n        subCommand: 'backgroundcolor',\n        value: '#ffff00'\n    },\n    'justifyCenter': {\n        command: 'Alignments',\n        subCommand: 'JustifyCenter'\n    },\n    'justifyFull': {\n        command: 'Alignments',\n        subCommand: 'JustifyFull'\n    },\n    'justifyLeft': {\n        command: 'Alignments',\n        subCommand: 'JustifyLeft'\n    },\n    'justifyRight': {\n        command: 'Alignments',\n        subCommand: 'JustifyRight'\n    },\n    'undo': {\n        command: 'Actions',\n        subCommand: 'Undo'\n    },\n    'redo': {\n        command: 'Actions',\n        subCommand: 'Redo'\n    },\n    'createLink': {\n        command: 'Links',\n        subCommand: 'Links'\n    },\n    'createImage': {\n        command: 'Images',\n        subCommand: 'Images'\n    },\n    'formatBlock': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'heading': {\n        command: 'Formats',\n        value: 'H1'\n    },\n    'indent': {\n        command: 'Indents',\n        subCommand: 'Indent'\n    },\n    'outdent': {\n        command: 'Indents',\n        subCommand: 'Outdent'\n    },\n    'insertHTML': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: ''\n    },\n    'insertText': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: ''\n    },\n    'insertHorizontalRule': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<hr/>'\n    },\n    'insertImage': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<img/>'\n    },\n    'insertBrOnReturn': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<br/>'\n    },\n    'insertOrderedList': {\n        command: 'Formats',\n        value: 'OL'\n    },\n    'insertUnorderedList': {\n        command: 'Formats',\n        value: 'UL'\n    },\n    'insertParagraph': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'removeFormat': {\n        command: 'Clear',\n        subCommand: 'ClearFormat'\n    }\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\nimport { ToolbarType } from '../base/enum';\nimport { TableStyleItems } from '../models/items';\nexport var predefinedItems = ['Bold', 'Italic', 'Underline', '|', 'Formats', 'Alignments',\n    'OrderedList', 'UnorderedList', '|', 'CreateLink', 'Image', '|', 'SourceCode', 'Undo', 'Redo'];\nexport var fontFamily = [\n    { text: 'Segoe UI', value: 'Segoe UI', cssClass: 'e-segoe-ui' },\n    { text: 'Arial', value: 'Arial,Helvetica,sans-serif', cssClass: 'e-arial' },\n    { text: 'Georgia', value: 'Georgia,serif', cssClass: 'e-georgia' },\n    { text: 'Impact', value: 'Impact,Charcoal,sans-serif', cssClass: 'e-impact' },\n    { text: 'Tahoma', value: 'Tahoma,Geneva,sans-serif', cssClass: 'e-tahoma' },\n    { text: 'Times New Roman', value: 'Times New Roman,Times,serif', cssClass: 'e-times-new-roman' },\n    { text: 'Verdana', value: 'Verdana,Geneva,sans-serif', cssClass: 'e-verdana' }\n];\nexport var fontSize = [\n    { text: '8 pt', value: '8pt' },\n    { text: '10 pt', value: '10pt' },\n    { text: '12 pt', value: '12pt' },\n    { text: '14 pt', value: '14pt' },\n    { text: '18 pt', value: '18pt' },\n    { text: '24 pt', value: '24pt' },\n    { text: '36 pt', value: '36pt' }\n];\nexport var formatItems = [\n    { text: 'Paragraph', value: 'P', cssClass: 'e-paragraph' },\n    { text: 'Code', value: 'Pre', cssClass: 'e-code' },\n    { text: 'Quotation', value: 'BlockQuote', cssClass: 'e-quote' },\n    { text: 'Heading 1', value: 'H1', cssClass: 'e-h1' },\n    { text: 'Heading 2', value: 'H2', cssClass: 'e-h2' },\n    { text: 'Heading 3', value: 'H3', cssClass: 'e-h3' },\n    { text: 'Heading 4', value: 'H4', cssClass: 'e-h4' }\n];\nexport var fontColor = {\n    'Custom': [\n        '', '#000000', '#e7e6e6', '#44546a', '#4472c4', '#ed7d31', '#a5a5a5', '#ffc000', '#70ad47', '#ff0000',\n        '#f2f2f2', '#808080', '#cfcdcd', '#d5dce4', '#d9e2f3', '#fbe4d5', '#ededed', '#fff2cc', '#e2efd9', '#ffcccc',\n        '#d9d9d9', '#595959', '#aeaaaa', '#acb9ca', '#b4c6e7', '#f7caac', '#dbdbdb', '#ffe599', '#c5e0b3', '#ff8080',\n        '#bfbfbf', '#404040', '#747070', '#8496b0', '#8eaadb', '#f4b083', '#c9c9c9', '#ffd966', '#a8d08d', '#ff3333',\n        '#a6a6a6', '#262626', '#3b3838', '#323e4f', '#2f5496', '#c45911', '#7b7b7b', '#bf8f00', '#538135', '#b30000',\n        '#7f7f7f', '#0d0d0d', '#161616', '#212934', '#1f3763', '#823b0b', '#525252', '#7f5f00', '#375623', '#660000'\n    ]\n};\nexport var backgroundColor = {\n    'Custom': [\n        '', '#000000', '#ffff00', '#00ff00', '#00ffff', '#0000ff', '#ff0000', '#000080', '#800080', '#996633',\n        '#f2f2f2', '#808080', '#ffffcc', '#b3ffb3', '#ccffff', '#ccccff', '#ffcccc', '#ccccff', '#ff80ff', '#f2e6d9',\n        '#d9d9d9', '#595959', '#ffff80', '#80ff80', '#b3ffff', '#8080ff', '#ff8080', '#8080ff', '#ff00ff', '#dfbf9f',\n        '#bfbfbf', '#404040', '#ffff33', '#33ff33', '#33ffff', '#3333ff', '#ff3333', '#0000b3', '#b300b3', '#c68c53',\n        '#a6a6a6', '#262626', '#e6e600', '#00b300', '#009999', '#000099', '#b30000', '#000066', '#660066', '#86592d',\n        '#7f7f7f', '#0d0d0d', '#999900', '#006600', '#006666', '#000066', '#660000', '#00004d', '#4d004d', '#734d26',\n    ]\n};\n/**\n * Configures the toolbar settings of the RTE.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enableFloating\", void 0);\n    __decorate([\n        Property(ToolbarType.Expand)\n    ], ToolbarSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(predefinedItems)\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Property({})\n    ], ToolbarSettings.prototype, \"itemConfigs\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * Configures the image settings of the RTE.\n */\nvar ImageSettings = /** @class */ (function (_super) {\n    __extends(ImageSettings, _super);\n    function ImageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(['.jpeg', '.jpg', '.png'])\n    ], ImageSettings.prototype, \"allowedTypes\", void 0);\n    __decorate([\n        Property('inline')\n    ], ImageSettings.prototype, \"display\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"path\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxWidth\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minHeight\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageSettings.prototype, \"resizeByPercent\", void 0);\n    return ImageSettings;\n}(ChildProperty));\nexport { ImageSettings };\nvar TableSettings = /** @class */ (function (_super) {\n    __extends(TableSettings, _super);\n    function TableSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], TableSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property(TableStyleItems)\n    ], TableSettings.prototype, \"styles\", void 0);\n    __decorate([\n        Property(true)\n    ], TableSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(0)\n    ], TableSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], TableSettings.prototype, \"maxWidth\", void 0);\n    return TableSettings;\n}(ChildProperty));\nexport { TableSettings };\n/**\n * Configures the quick toolbar settings of the RTE.\n */\nvar QuickToolbarSettings = /** @class */ (function (_super) {\n    __extends(QuickToolbarSettings, _super);\n    function QuickToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], QuickToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property('hide')\n    ], QuickToolbarSettings.prototype, \"actionOnScroll\", void 0);\n    __decorate([\n        Property(['Open', 'Edit', 'UnLink'])\n    ], QuickToolbarSettings.prototype, \"link\", void 0);\n    __decorate([\n        Property(['Replace', 'Align', 'Caption', 'Remove', '-', 'InsertLink', 'OpenImageLink', 'EditImageLink', 'RemoveImageLink', 'Display', 'AltText', 'Dimension'])\n    ], QuickToolbarSettings.prototype, \"image\", void 0);\n    __decorate([\n        Property(['Cut', 'Copy', 'Paste'])\n    ], QuickToolbarSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property(['TableHeader', 'TableRows', 'TableColumns', 'BackgroundColor', '-', 'TableRemove', 'Alignments', 'TableCellVerticalAlign', 'Styles'])\n    ], QuickToolbarSettings.prototype, \"table\", void 0);\n    return QuickToolbarSettings;\n}(ChildProperty));\nexport { QuickToolbarSettings };\n/**\n * Configures the font family settings of the RTE.\n */\nvar FontFamily = /** @class */ (function (_super) {\n    __extends(FontFamily, _super);\n    function FontFamily() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Segoe UI')\n    ], FontFamily.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], FontFamily.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontFamily)\n    ], FontFamily.prototype, \"items\", void 0);\n    return FontFamily;\n}(ChildProperty));\nexport { FontFamily };\n/**\n * Configures the font size settings of the RTE.\n */\nvar FontSize = /** @class */ (function (_super) {\n    __extends(FontSize, _super);\n    function FontSize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('10 pt')\n    ], FontSize.prototype, \"default\", void 0);\n    __decorate([\n        Property('35px')\n    ], FontSize.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontSize)\n    ], FontSize.prototype, \"items\", void 0);\n    return FontSize;\n}(ChildProperty));\nexport { FontSize };\n/**\n * Configures the format settings of the RTE.\n */\nvar Format = /** @class */ (function (_super) {\n    __extends(Format, _super);\n    function Format() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Paragraph')\n    ], Format.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], Format.prototype, \"width\", void 0);\n    __decorate([\n        Property(formatItems)\n    ], Format.prototype, \"types\", void 0);\n    return Format;\n}(ChildProperty));\nexport { Format };\n/**\n * Configures the font Color settings of the RTE.\n */\nvar FontColor = /** @class */ (function (_super) {\n    __extends(FontColor, _super);\n    function FontColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ff0000')\n    ], FontColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], FontColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], FontColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(fontColor)\n    ], FontColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], FontColor.prototype, \"modeSwitcher\", void 0);\n    return FontColor;\n}(ChildProperty));\nexport { FontColor };\n/**\n * Configures the background Color settings of the RTE.\n */\nvar BackgroundColor = /** @class */ (function (_super) {\n    __extends(BackgroundColor, _super);\n    function BackgroundColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ffff00')\n    ], BackgroundColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], BackgroundColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], BackgroundColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(backgroundColor)\n    ], BackgroundColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], BackgroundColor.prototype, \"modeSwitcher\", void 0);\n    return BackgroundColor;\n}(ChildProperty));\nexport { BackgroundColor };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\n/**\n * Objects used for configuring the iframe resources properties.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"styles\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"scripts\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n/**\n * Configures the iframe settings of the RTE.\n */\nvar IFrameSettings = /** @class */ (function (_super) {\n    __extends(IFrameSettings, _super);\n    function IFrameSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], IFrameSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(null)\n    ], IFrameSettings.prototype, \"attributes\", void 0);\n    __decorate([\n        Complex({}, Resources)\n    ], IFrameSettings.prototype, \"resources\", void 0);\n    return IFrameSettings;\n}(ChildProperty));\nexport { IFrameSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the inlineMode property of the RTE.\n */\nvar InlineMode = /** @class */ (function (_super) {\n    __extends(InlineMode, _super);\n    function InlineMode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], InlineMode.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], InlineMode.prototype, \"onSelection\", void 0);\n    return InlineMode;\n}(ChildProperty));\nexport { InlineMode };\n","import { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\n/**\n * `FullScreen` module is used to maximize and minimize screen\n */\nvar FullScreen = /** @class */ (function () {\n    function FullScreen(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FullScreen.prototype.showFullScreen = function (event) {\n        this.scrollableParent = getScrollableParent(this.parent.element);\n        if (!this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.parent.trigger(events.actionBegin, { requestType: 'Maximize', targetItem: 'Maximize', args: event });\n            if (this.parent.toolbarSettings.enableFloating && this.parent.toolbarSettings.enable) {\n                this.parent.getToolbarElement().style.width = '100%';\n                this.parent.getToolbarElement().style.top = '0px';\n            }\n            this.parent.element.classList.add(classes.CLS_FULL_SCREEN);\n            this.toggleParentOverflow(true);\n            this.parent.setContentHeight();\n            if (this.parent.toolbarModule) {\n                if (!this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                    this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                }\n                if (Browser.isDevice) {\n                    this.parent.toolbarModule.removeFixedTBarClass();\n                }\n                this.parent.toolbarModule.updateItem({\n                    targetItem: 'Maximize',\n                    updateItem: 'Minimize',\n                    baseToolbar: this.parent.getBaseToolbarObject()\n                });\n            }\n            this.parent.trigger(events.actionComplete, { requestType: 'Maximize', targetItem: 'Maximize', args: event });\n        }\n    };\n    FullScreen.prototype.hideFullScreen = function (event) {\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.parent.element.classList.remove(classes.CLS_FULL_SCREEN);\n            var elem = document.querySelectorAll('.e-overflow');\n            for (var i = 0; i < elem.length; i++) {\n                removeClass([elem[i]], ['e-rte-overflow']);\n            }\n            this.parent.trigger(events.actionBegin, { requestType: 'Minimize', targetItem: 'Minimize', args: event });\n            this.parent.setContentHeight();\n            if (this.parent.toolbarModule) {\n                if (!this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                    this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                }\n                this.parent.toolbarModule.updateItem({\n                    targetItem: 'Minimize',\n                    updateItem: 'Maximize',\n                    baseToolbar: this.parent.getBaseToolbarObject()\n                });\n                if (Browser.isDevice && this.parent.inlineMode.enable) {\n                    this.parent.toolbarModule.addFixedTBarClass();\n                }\n            }\n            this.parent.trigger(events.actionComplete, { requestType: 'Minimize', targetItem: 'Minimize', args: event });\n        }\n    };\n    FullScreen.prototype.toggleParentOverflow = function (isAdd) {\n        if (isNullOrUndefined(this.scrollableParent)) {\n            return;\n        }\n        for (var i = 0; i < this.scrollableParent.length; i++) {\n            if (this.scrollableParent[i].nodeName === '#document') {\n                var elem = document.querySelector('body');\n                addClass([elem], ['e-rte-overflow']);\n            }\n            else {\n                var elem = this.scrollableParent[i];\n                addClass([elem], ['e-rte-overflow']);\n            }\n        }\n    };\n    FullScreen.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'full-screen':\n                this.showFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n            case 'escape':\n                this.hideFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    FullScreen.prototype.addEventListener = function () {\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    FullScreen.prototype.removeEventListener = function () {\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    FullScreen.prototype.destroy = function () {\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.toggleParentOverflow(false);\n        }\n        this.removeEventListener();\n    };\n    return FullScreen;\n}());\nexport { FullScreen };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Complex, Browser, addClass, select, detach } from '@syncfusion/ej2-base';\nimport { Property, NotifyPropertyChanges, formatUnit, L10n, closest } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, Event, removeClass, print as printWindow, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, compile, append, extend, debounce } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Render } from '../renderer/render';\nimport { ViewSource } from '../renderer/view-source';\nimport { executeGroup } from './interface';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { RenderType, ToolbarType } from './enum';\nimport { ExecCommandCallBack } from '../actions/execute-command-callback';\nimport { KeyboardEvents } from '../actions/keyboard';\nimport { ToolbarSettings, ImageSettings, QuickToolbarSettings, FontFamily, FontSize, Format } from '../models/toolbar-settings';\nimport { TableSettings } from '../models/toolbar-settings';\nimport { FontColor, BackgroundColor } from '../models/toolbar-settings';\nimport { IFrameSettings } from '../models/iframe-settings';\nimport { InlineMode } from '../models/inline-mode';\nimport { defaultLocale } from '../models/default-locale';\nimport { setAttributes } from '../actions/html-attributes';\nimport { FullScreen } from '../actions/full-screen';\nimport * as CONSTANT from '../../common/constant';\nimport { dispatchEvent } from '../base/util';\n/**\n * Represents the RichTextEditor component.\n * ```html\n * <textarea id=\"rte\"></textarea>\n * <script>\n *  var rteObj = new RichTextEditor();\n *  rteObj.appendTo(\"#rte\");\n * </script>\n * ```\n */\nvar RichTextEditor = /** @class */ (function (_super) {\n    __extends(RichTextEditor, _super);\n    function RichTextEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * @hidden\n         */\n        _this.isFocusOut = false;\n        /**\n         * @hidden\n         */\n        _this.isRTE = false;\n        /**\n         * @hidden\n         */\n        _this.isBlur = true;\n        _this.needsID = true;\n        _this.onBlurHandler = _this.blurHandler.bind(_this);\n        _this.onFocusHandler = _this.focusHandler.bind(_this);\n        _this.onResizeHandler = _this.resizeHandler.bind(_this);\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    RichTextEditor.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.toolbarSettings.enable) {\n            modules.push({ member: 'toolbar', args: [this, this.serviceLocator] });\n            modules.push({\n                member: 'link',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'table',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'image',\n                args: [this, this.serviceLocator]\n            });\n            if (this.quickToolbarSettings.enable) {\n                modules.push({ member: 'quickToolbar', args: [this, this.serviceLocator] });\n            }\n        }\n        if (this.showCharCount) {\n            modules.push({ member: 'count', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'Markdown') {\n            modules.push({ member: 'markdownEditor', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'HTML') {\n            modules.push({ member: 'htmlEditor', args: [this, this.serviceLocator] });\n        }\n        return modules;\n    };\n    RichTextEditor.prototype.updateEnable = function () {\n        if (this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n            this.element.tabIndex = 0;\n            this.element.setAttribute('aria-disabled', 'false');\n            this.inputElement.setAttribute('tabindex', '0');\n        }\n        else {\n            if (this.getToolbar()) {\n                removeClass(this.getToolbar().querySelectorAll('.' + classes.CLS_ACTIVE), classes.CLS_ACTIVE);\n            }\n            addClass([this.element], classes.CLS_DISABLED);\n            this.element.tabIndex = -1;\n            this.element.setAttribute('aria-disabled', 'true');\n            this.inputElement.setAttribute('tabindex', '-1');\n        }\n    };\n    RichTextEditor.prototype.setEnable = function () {\n        this.updateEnable();\n        (this.enabled) ? this.eventInitializer() : this.unWireEvents();\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    RichTextEditor.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initializeServices();\n        this.setContainer();\n        setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        attributes(this.element, { role: 'application' });\n    };\n    RichTextEditor.prototype.setContainer = function () {\n        this.originalElement = this.element.cloneNode(true);\n        if (this.value === null || this.valueTemplate !== null) {\n            this.setValue();\n            this.element.innerHTML = '';\n        }\n        var invalidAttr = ['class', 'style', 'id', 'ejs-for'];\n        var htmlAttr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(/^data-val/.test(this.element.attributes[a].name))) { // data-val for asp.net core data annotation validation.\n                htmlAttr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(htmlAttr, this.htmlAttributes, htmlAttr);\n        this.setProperties({ htmlAttributes: htmlAttr }, true);\n        if (!isNOU(this.htmlAttributes.id)) {\n            this.element.id = this.htmlAttributes.id;\n        }\n        if (this.element.tagName === 'TEXTAREA') {\n            var rteOuterWrapper = this.createElement('div', {\n                className: 'e-control e-richtexteditor'\n            });\n            rteOuterWrapper.innerHTML = this.element.value;\n            this.element.parentElement.insertBefore(rteOuterWrapper, this.element);\n            this.valueContainer = this.element;\n            this.valueContainer.classList.remove('e-control', 'e-richtexteditor');\n            this.element = rteOuterWrapper;\n        }\n        else {\n            this.valueContainer = this.createElement('textarea', {\n                id: this.getID() + '-value'\n            });\n        }\n        this.valueContainer.name = this.getID();\n        addClass([this.valueContainer], classes.CLS_RTE_HIDDEN);\n        if (this.value !== null) {\n            this.valueContainer.value = this.value;\n        }\n        this.element.appendChild(this.valueContainer);\n    };\n    RichTextEditor.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    /**\n     * Focuses the RichTextEditor component\n     * @public\n     */\n    RichTextEditor.prototype.focusIn = function () {\n        if (this.enabled) {\n            this.inputElement.focus();\n            this.focusHandler({});\n        }\n    };\n    /**\n     * Blurs the RichTextEditor component\n     * @public\n     */\n    RichTextEditor.prototype.focusOut = function () {\n        if (this.enabled) {\n            this.inputElement.blur();\n            this.blurHandler({});\n        }\n    };\n    /**\n     * Selects all the content in RichTextEditor\n     * @public\n     */\n    RichTextEditor.prototype.selectAll = function () {\n        this.notify(events.selectAll, {});\n    };\n    /**\n     * Selects a content range or an element\n     * @public\n     */\n    RichTextEditor.prototype.selectRange = function (range) {\n        this.notify(events.selectRange, { range: range });\n    };\n    /**\n     * Retrieves the HTML markup content from currently selected content of RichTextEditor.\n     * @public\n     */\n    RichTextEditor.prototype.getSelection = function () {\n        var str = '';\n        this.notify(events.getSelectedHtml, {\n            callBack: function (txt) {\n                str = txt;\n            }\n        });\n        return str;\n    };\n    /**\n     * Executes the commands\n     * CommandName - Specifies the name of the command to be executed.\n     * value - Specifies the sub command.\n     * @public\n     */\n    RichTextEditor.prototype.executeCommand = function (commandName, value) {\n        var tool = executeGroup[commandName];\n        this.formatter.editorManager.execCommand(tool.command, tool.subCommand ? tool.subCommand : (value ? value : tool.value), null, null, (value ? value : tool.value), (value ? value : tool.value));\n    };\n    RichTextEditor.prototype.encode = function (value) {\n        var divNode = this.createElement('div');\n        divNode.innerText = value.trim();\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    RichTextEditor.prototype.decode = function (value) {\n        return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<')\n            .replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>')\n            .replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ')\n            .replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    RichTextEditor.prototype.render = function () {\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.sourceCodeModule = new ViewSource(this, this.serviceLocator);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        this.RTERender();\n        var execCommandCallBack = new ExecCommandCallBack(this);\n        this.notify(events.initialEnd, {});\n        if (this.toolbarSettings.enable && this.toolbarSettings.type === 'Expand' && !isNOU(this.getToolbar()) &&\n            (this.toolbarSettings.items.indexOf('Undo') > -1 && this.toolbarSettings.items.indexOf('Redo') > -1)) {\n            this.disableToolbarItem(['Undo', 'Redo']);\n        }\n        this.setContentHeight();\n        (!this.enabled) ? this.unWireEvents() : this.eventInitializer();\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    RichTextEditor.prototype.eventInitializer = function () {\n        this.wireEvents();\n    };\n    /**\n     * For internal use only - keydown the event handler;\n     * @private\n     */\n    RichTextEditor.prototype.keyDown = function (e) {\n        this.notify(events.keyDown, { member: 'keydown', args: e });\n        if (this.formatter.getUndoRedoStack().length === 0) {\n            this.formatter.saveData();\n        }\n        if (e.action || e.which === 9) {\n            this.formatter.process(this, null, e);\n            switch (e.action) {\n                case 'toolbar-focus':\n                    if (this.toolbarSettings.enable) {\n                        var selector = '.e-toolbar-item[aria-disabled=\"false\"][title] [tabindex]';\n                        this.toolbarModule.baseToolbar.toolbarObj.element.querySelector(selector).focus();\n                    }\n                    break;\n                case 'escape':\n                    this.contentModule.getEditPanel().focus();\n                    break;\n            }\n        }\n        if (!isNOU(this.placeholder)) {\n            this.setPlaceHolder();\n        }\n        this.autoResize();\n    };\n    RichTextEditor.prototype.keyUp = function (e) {\n        this.notify(events.keyUp, { member: 'keyup', args: e });\n        var allowedKeys = e.which === 32 || e.which === 13 || e.which === 8 || e.which === 46;\n        if (((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys) || (this.editorMode === 'Markdown'\n            && ((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys)) && !this.inlineMode.enable) {\n            this.formatter.onKeyHandler(this, e);\n        }\n        if (this.inputElement && this.inputElement.textContent.length !== 0) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        if (!isNOU(this.placeholder)) {\n            this.setPlaceHolder();\n        }\n    };\n    RichTextEditor.prototype.updateValue = function (value) {\n        if (isNOU(value)) {\n            this.setProperties({ value: this.inputElement.innerHTML });\n        }\n        else {\n            this.setProperties({ value: value });\n        }\n    };\n    RichTextEditor.prototype.mouseUp = function (e) {\n        this.notify(events.mouseUp, { member: 'mouseUp', args: e });\n        if (this.inputElement && ((this.editorMode === 'HTML' && this.inputElement.textContent.length !== 0) ||\n            (this.editorMode === 'Markdown' && this.inputElement.value.length !== 0))) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        this.notify(events.editAreaClick, { member: 'editAreaClick', args: e });\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    RichTextEditor.prototype.onCopy = function () {\n        this.contentModule.getDocument().execCommand('copy', false, null);\n    };\n    RichTextEditor.prototype.onCut = function () {\n        this.contentModule.getDocument().execCommand('cut', false, null);\n    };\n    RichTextEditor.prototype.onPaste = function (e) {\n        var _this = this;\n        var args = { requestType: 'Paste', editorMode: this.editorMode, event: e };\n        var value = null;\n        if (e && !isNOU(e.clipboardData)) {\n            value = e.clipboardData.getData('text/plain');\n        }\n        var file = e && e.clipboardData && e.clipboardData.items.length > 0 ?\n            e.clipboardData.items[0].getAsFile() : null;\n        if (value !== null) {\n            this.notify(events.paste, {\n                file: file,\n                args: e,\n                text: value\n            });\n        }\n        setTimeout(function () { _this.formatter.onSuccess(_this, args); }, 0);\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.clipboardAction = function (action, event) {\n        switch (action.toLowerCase()) {\n            case 'cut':\n                this.onCut();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Cut',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'copy':\n                this.onCopy();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Copy',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'paste':\n                this.onPaste(event);\n                break;\n        }\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    RichTextEditor.prototype.destroy = function () {\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (!isNOU(this.timeInterval)) {\n            clearInterval(this.timeInterval);\n            this.timeInterval = null;\n        }\n        this.unWireEvents();\n        if (this.originalElement.tagName === 'TEXTAREA') {\n            this.element.parentElement.insertBefore(this.valueContainer, this.element);\n            this.valueContainer.id = this.getID();\n            this.valueContainer.removeAttribute('name');\n            detach(this.element);\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.valueContainer.value = this.originalElement.innerHTML.trim();\n            }\n            else {\n                this.valueContainer.value = '';\n            }\n            this.element = this.valueContainer;\n        }\n        else {\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.element.innerHTML = this.originalElement.innerHTML.trim();\n            }\n            else {\n                this.element.innerHTML = '';\n            }\n        }\n        if (this.placeholder && this.placeHolderWrapper) {\n            detach(this.placeHolderWrapper);\n            this.placeHolderWrapper = null;\n        }\n        if (!isNOU(this.cssClass)) {\n            removeClass([this.element], this.cssClass);\n        }\n        this.removeHtmlAttributes();\n        this.removeAttributes();\n        _super.prototype.destroy.call(this);\n    };\n    RichTextEditor.prototype.removeHtmlAttributes = function () {\n        if (this.htmlAttributes) {\n            var keys = Object.keys(this.htmlAttributes);\n            for (var i = 0; i < keys.length && this.element.hasAttribute(keys[i]); i++) {\n                this.element.removeAttribute(keys[i]);\n            }\n        }\n    };\n    RichTextEditor.prototype.removeAttributes = function () {\n        if (!this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n        }\n        if (this.enableRtl) {\n            removeClass([this.element], classes.CLS_RTL);\n        }\n        if (this.readonly) {\n            removeClass([this.element], classes.CLS_RTE_READONLY);\n        }\n        if (this.element.style.width !== '' && this.originalElement.style.width === '') {\n            this.element.style.removeProperty('width');\n        }\n        if (this.element.style.height !== '' && this.originalElement.style.height === '') {\n            this.element.style.removeProperty('height');\n        }\n        this.element.removeAttribute('aria-disabled');\n        this.element.removeAttribute('role');\n        this.element.removeAttribute('tabindex');\n    };\n    RichTextEditor.prototype.destroyDependentModules = function () {\n        /* destroy dependent modules */\n        this.renderModule.destroy();\n        this.formatter.editorManager.undoRedoManager.destroy();\n        this.sourceCodeModule.destroy();\n    };\n    /**\n     * Returns the HTML or Text inside the RichTextEditor.\n     * @return {Element}\n     */\n    RichTextEditor.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    RichTextEditor.prototype.getText = function () {\n        return this.contentModule.getText();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RichTextEditor.prototype.getModuleName = function () {\n        return 'richtexteditor';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    RichTextEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'value':\n                    this.value = (this.enableHtmlEncode) ? this.encode(this.decode(newProp[prop])) : newProp[prop];\n                    this.updatePanelValue();\n                    this.setPlaceHolder();\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'valueTemplate':\n                    this.setValue();\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'width':\n                    this.setWidth(newProp[prop]);\n                    if (this.toolbarSettings.enable) {\n                        this.toolbarModule.refreshToolbarOverflow();\n                        this.resizeHandler();\n                    }\n                    break;\n                case 'height':\n                    this.setHeight(newProp[prop]);\n                    this.setContentHeight();\n                    this.autoResize();\n                    break;\n                case 'readonly':\n                    this.setReadOnly(false);\n                    break;\n                case 'cssClass':\n                    this.element.classList.remove(oldProp[prop]);\n                    this.setCssClass(newProp[prop]);\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'placeholder':\n                    this.placeholder = newProp[prop];\n                    this.setPlaceHolder();\n                    break;\n                case 'htmlAttributes':\n                    setAttributes(this.htmlAttributes, this, false, false);\n                    break;\n                case 'iframeSettings':\n                    var frameSetting = oldProp[prop];\n                    if (frameSetting.resources) {\n                        var iframe = this.contentModule.getDocument();\n                        var header = iframe.querySelector('head');\n                        var files = void 0;\n                        if (frameSetting.resources.scripts) {\n                            files = header.querySelectorAll('.' + classes.CLS_SCRIPT_SHEET);\n                            this.removeSheets(files);\n                        }\n                        if (frameSetting.resources.styles) {\n                            files = header.querySelectorAll('.' + classes.CLS_STYLE_SHEET);\n                            this.removeSheets(files);\n                        }\n                    }\n                    this.setIframeSettings();\n                    break;\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'inlineMode':\n                    this.notify(events.modelChanged, { module: 'quickToolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'toolbarSettings':\n                    this.notify(events.modelChanged, { module: 'toolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'maxLength':\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'showCharCount':\n                    if (newProp[prop] && this.countModule) {\n                        this.countModule.renderCount();\n                    }\n                    else if (newProp[prop] === false && this.countModule) {\n                        this.countModule.destroy();\n                    }\n                    break;\n                case 'enableHtmlEncode':\n                    this.updateValueData();\n                    break;\n                case 'undoRedoSteps':\n                case 'undoRedoTimer':\n                    this.formatter.editorManager.observer.notify(CONSTANT.MODEL_CHANGED, { newProp: newProp, oldProp: oldProp });\n                    break;\n                default:\n                    this.notify(events.modelChanged, { newProp: newProp, oldProp: oldProp });\n                    break;\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.updateValueData = function () {\n        if (this.enableHtmlEncode) {\n            this.setProperties({ value: this.encode(this.decode(this.inputElement.innerHTML)) });\n        }\n        else {\n            this.setProperties({\n                value: /<[a-z][\\s\\S]*>/i.test(this.inputElement.innerHTML) ? this.inputElement.innerHTML :\n                    this.decode(this.inputElement.innerHTML)\n            });\n        }\n    };\n    RichTextEditor.prototype.removeSheets = function (srcList) {\n        var i;\n        for (i = 0; i < srcList.length; i++) {\n            detach(srcList[i]);\n        }\n    };\n    RichTextEditor.prototype.updatePanelValue = function () {\n        var value;\n        if (this.editorMode === 'HTML' && this.value) {\n            value = this.value.replace(/>\\s+</g, '><');\n        }\n        else {\n            value = this.value;\n        }\n        value = (this.enableHtmlEncode && this.value) ? this.decode(value) : value;\n        if (value) {\n            if (this.valueContainer) {\n                this.valueContainer.value = (this.enableHtmlEncode) ? this.value : value;\n            }\n            if (this.editorMode === 'HTML' && this.inputElement && this.inputElement.innerHTML.trim() !== value.trim()) {\n                this.inputElement.innerHTML = value;\n            }\n            else if (this.editorMode === 'Markdown' && this.inputElement\n                && this.inputElement.value.trim() !== value.trim()) {\n                this.inputElement.value = value;\n            }\n        }\n        else {\n            if (this.editorMode === 'HTML') {\n                this.inputElement.innerHTML = '<p><br/></p>';\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            if (this.valueContainer) {\n                this.valueContainer.value = '';\n            }\n        }\n        if (this.showCharCount) {\n            this.countModule.refresh();\n        }\n    };\n    RichTextEditor.prototype.setHeight = function (height) {\n        if (height !== 'auto') {\n            this.element.style.height = formatUnit(height);\n        }\n        else {\n            this.element.style.height = 'auto';\n        }\n    };\n    RichTextEditor.prototype.setPlaceHolder = function () {\n        if (this.inputElement && this.placeholder && this.iframeSettings.enable !== true) {\n            if (this.editorMode !== 'Markdown') {\n                if (!this.placeHolderWrapper) {\n                    this.placeHolderWrapper = this.createElement('span', { className: 'rte-placeholder' });\n                    if (this.inputElement) {\n                        this.inputElement.parentElement.insertBefore(this.placeHolderWrapper, this.inputElement);\n                    }\n                    attributes(this.placeHolderWrapper, {\n                        'style': 'font-size: 16px; padding: 16px; margin-left: 0px; margin-right: 0px;'\n                    });\n                }\n                this.placeHolderWrapper.innerHTML = this.placeholder;\n                if (this.inputElement.textContent.length !== 0) {\n                    this.placeHolderWrapper.style.display = 'none';\n                }\n                else {\n                    this.placeHolderWrapper.style.display = 'block';\n                }\n            }\n            else {\n                this.inputElement.setAttribute('placeholder', this.placeholder);\n            }\n        }\n    };\n    RichTextEditor.prototype.setWidth = function (width) {\n        if (width !== 'auto') {\n            setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        }\n        else {\n            this.element.style.width = 'auto';\n        }\n    };\n    RichTextEditor.prototype.setCssClass = function (cssClass) {\n        if (!isNOU(cssClass)) {\n            this.element.classList.add(cssClass);\n        }\n    };\n    RichTextEditor.prototype.updateRTL = function () {\n        this.notify(events.rtlMode, { enableRtl: this.enableRtl });\n        if (this.enableRtl) {\n            this.element.classList.add(classes.CLS_RTL);\n        }\n        else {\n            this.element.classList.remove(classes.CLS_RTL);\n        }\n    };\n    RichTextEditor.prototype.updateReadOnly = function () {\n        this.notify(events.readOnlyMode, { editPanel: this.inputElement, mode: this.readonly });\n    };\n    RichTextEditor.prototype.setReadOnly = function (initial) {\n        this.updateReadOnly();\n        if (!initial) {\n            if (this.readonly && this.enabled) {\n                this.unbindEvents();\n            }\n            else if (this.enabled) {\n                this.bindEvents();\n            }\n        }\n    };\n    /**\n     * By default, prints all the pages of the RichTextEditor.\n     * @return {void}\n     */\n    RichTextEditor.prototype.print = function () {\n        var printWind;\n        var printArgs = {\n            element: this.inputElement,\n            requestType: 'print',\n            cancel: false\n        };\n        this.trigger(events.actionBegin, printArgs);\n        printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth);\n        if (Browser.info.name === 'msie') {\n            printWind.resizeTo(screen.availWidth, screen.availHeight);\n        }\n        printWind = printWindow(this.inputElement, printWind);\n        if (printArgs.cancel) {\n            return;\n        }\n        var actionArgs = {\n            requestType: 'print'\n        };\n        this.trigger(events.actionComplete, actionArgs);\n    };\n    /**\n     * Applies all the pending property changes and render the component again.\n     * @public\n     */\n    RichTextEditor.prototype.refresh = function () {\n        this.renderModule.refresh();\n    };\n    /**\n     * Shows the RichTextEditor component in full-screen mode.\n     */\n    RichTextEditor.prototype.showFullScreen = function () {\n        if (this.readonly) {\n            return;\n        }\n        this.fullScreenModule.showFullScreen();\n    };\n    /**\n     * Enables the give toolbar items in the RichTextEditor component.\n     * @public\n     */\n    RichTextEditor.prototype.enableToolbarItem = function (items) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, true);\n    };\n    /**\n     * Disables the given toolbar items in the RichTextEditor component.\n     * @public\n     */\n    RichTextEditor.prototype.disableToolbarItem = function (items) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, false);\n    };\n    /**\n     * Removes the give toolbar items from the RichTextEditor component.\n     * @public\n     */\n    RichTextEditor.prototype.removeToolbarItem = function (items) {\n        this.toolbarModule.removeTBarItems(items);\n    };\n    /**\n     * Get the selected range from the RichTextEditor's content.\n     * @public\n     */\n    RichTextEditor.prototype.getRange = function () {\n        return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n    };\n    RichTextEditor.prototype.initializeServices = function () {\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('rteLocale', this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale));\n    };\n    RichTextEditor.prototype.RTERender = function () {\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.fullScreenModule = new FullScreen(this);\n        this.renderModule.render();\n        this.inputElement = this.contentModule.getEditPanel();\n        this.setHeight(this.height);\n        setAttributes(this.htmlAttributes, this, false, true);\n        if (this.iframeSettings) {\n            this.setIframeSettings();\n        }\n        this.setCssClass(this.cssClass);\n        this.updateEnable();\n        this.setPlaceHolder();\n        this.updateRTL();\n        this.updateReadOnly();\n        this.updatePanelValue();\n        if (this.enableHtmlEncode && !isNOU(this.value)) {\n            this.setProperties({ value: this.encode(this.decode(this.value)) });\n        }\n    };\n    RichTextEditor.prototype.setIframeSettings = function () {\n        if (this.iframeSettings.resources) {\n            var styleSrc = this.iframeSettings.resources.styles;\n            var scriptSrc = this.iframeSettings.resources.scripts;\n            if (this.iframeSettings.resources.scripts.length > 0) {\n                this.InjectSheet(true, scriptSrc);\n            }\n            if (this.iframeSettings.resources.styles.length > 0) {\n                this.InjectSheet(false, styleSrc);\n            }\n        }\n        if (this.iframeSettings.attributes) {\n            setAttributes(this.iframeSettings.attributes, this, true, false);\n        }\n    };\n    RichTextEditor.prototype.InjectSheet = function (scriptSheet, srcList) {\n        try {\n            if (srcList && srcList.length > 0) {\n                var iFrame = this.contentModule.getDocument();\n                var target = iFrame.querySelector('head');\n                for (var i = 0; i < srcList.length; i++) {\n                    if (scriptSheet) {\n                        var scriptEle = this.createScriptElement();\n                        scriptEle.src = srcList[i];\n                        target.appendChild(scriptEle);\n                    }\n                    else {\n                        var styleEle = this.createStyleElement();\n                        styleEle.href = srcList[i];\n                        target.appendChild(styleEle);\n                    }\n                }\n            }\n        }\n        catch (e) {\n            return;\n        }\n    };\n    RichTextEditor.prototype.createScriptElement = function () {\n        var scriptEle = this.createElement('script', {\n            className: classes.CLS_SCRIPT_SHEET\n        });\n        scriptEle.type = 'text/javascript';\n        return scriptEle;\n    };\n    RichTextEditor.prototype.createStyleElement = function () {\n        var styleEle = this.createElement('link', {\n            className: classes.CLS_STYLE_SHEET\n        });\n        styleEle.rel = 'stylesheet';\n        return styleEle;\n    };\n    RichTextEditor.prototype.setValue = function () {\n        if (this.valueTemplate) {\n            if (typeof this.valueTemplate === 'string') {\n                this.setProperties({ value: this.valueTemplate });\n            }\n            else {\n                var compiledString = void 0;\n                compiledString = compile(this.valueTemplate);\n                var compiledTemplate = compiledString({});\n                for (var i = 0; i < compiledTemplate.length; i++) {\n                    var item = compiledTemplate[i];\n                    append([item], this.element);\n                }\n                this.setProperties({ value: this.element.innerHTML.trim() });\n            }\n        }\n        else if (this.element.innerHTML.trim() !== '') {\n            if (this.element.tagName === 'TEXTAREA') {\n                this.setProperties({ value: this.decode(this.element.innerHTML.trim()) });\n            }\n            else {\n                this.setProperties({ value: this.element.innerHTML.trim() });\n            }\n        }\n    };\n    RichTextEditor.prototype.setContentHeight = function (target, isExpand) {\n        var heightValue;\n        var topValue = 0;\n        var cntEle = (this.sourceCodeModule.getPanel() &&\n            this.sourceCodeModule.getPanel().parentElement.style.display === 'block') ? this.sourceCodeModule.getPanel().parentElement :\n            this.contentModule.getPanel();\n        var rteHeight = this.element.offsetHeight;\n        var tbHeight = this.getToolbar() ? this.toolbarModule.getToolbarHeight() : 0;\n        var expandPopHeight = this.getToolbar() ? this.toolbarModule.getExpandTBarPopHeight() : 0;\n        if (this.toolbarSettings.type === ToolbarType.Expand && isExpand && target !== 'preview') {\n            heightValue = (this.height === 'auto') ? 'auto' : rteHeight - (tbHeight + expandPopHeight) + 'px';\n            topValue = (!this.toolbarSettings.enableFloating) ? expandPopHeight : 0;\n        }\n        else {\n            if (this.height === 'auto' && !(this.element.classList.contains('e-rte-full-screen'))) {\n                heightValue = 'auto';\n            }\n            else {\n                heightValue = rteHeight - tbHeight + 'px';\n            }\n        }\n        setStyleAttribute(cntEle, { height: heightValue, marginTop: topValue + 'px' });\n        if (this.iframeSettings.enable && target === 'sourceCode') {\n            var codeElement = select('.' + classes.CLS_RTE_CONTENT, this.element);\n            setStyleAttribute(codeElement, { height: heightValue, marginTop: topValue + 'px' });\n        }\n        if (this.toolbarSettings.enableFloating && this.getToolbar() && !this.inlineMode.enable) {\n            if (isExpand) {\n                setStyleAttribute(this.getToolbar().parentElement, { height: (tbHeight + expandPopHeight) + 'px' });\n            }\n            else {\n                setStyleAttribute(this.getToolbar().parentElement, { height: tbHeight + 'px' });\n            }\n        }\n        this.autoResize();\n    };\n    /**\n     * Retrieves the HTML from RichTextEditor.\n     * @public\n     */\n    RichTextEditor.prototype.getHtml = function () {\n        return this.value;\n    };\n    /**\n     * Shows the source HTML/MD markup.\n     * @public\n     */\n    RichTextEditor.prototype.showSourceCode = function () {\n        if (this.readonly) {\n            return;\n        }\n        this.notify(events.sourceCode, {});\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getBaseToolbarObject = function () {\n        var tbObj;\n        if (this.inlineMode.enable && !Browser.isDevice) {\n            tbObj = this.quickToolbarModule && this.quickToolbarModule.getInlineBaseToolbar();\n        }\n        else {\n            tbObj = this.toolbarModule && this.toolbarModule.getBaseToolbar();\n        }\n        return tbObj;\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getToolbar = function () {\n        return this.toolbarModule ? this.toolbarModule.getToolbarElement() : null;\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getToolbarElement = function () {\n        return this.toolbarModule && this.toolbarModule.getToolbarElement();\n    };\n    RichTextEditor.prototype.getID = function () {\n        return (this.originalElement.tagName === 'TEXTAREA' ? this.valueContainer.id : this.element.id);\n    };\n    RichTextEditor.prototype.mouseDownHandler = function (e) {\n        addClass([this.element], [classes.CLS_FOCUS]);\n        this.preventDefaultResize(e);\n        this.notify(events.mouseDown, { args: e });\n    };\n    RichTextEditor.prototype.preventImgResize = function (e) {\n        if (e.target.nodeName.toLocaleLowerCase() === 'img') {\n            e.preventDefault();\n        }\n    };\n    RichTextEditor.prototype.preventDefaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().addEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', false, 'false');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', false, 'false');\n        }\n    };\n    RichTextEditor.prototype.defaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().removeEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', true, 'true');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', true, 'true');\n        }\n    };\n    RichTextEditor.prototype.resizeHandler = function () {\n        var isExpand = false;\n        if (this.toolbarSettings.enable && !this.inlineMode.enable) {\n            this.toolbarModule.refreshToolbarOverflow();\n            isExpand = this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains(classes.CLS_EXPAND_OPEN);\n        }\n        this.setContentHeight('', isExpand);\n    };\n    RichTextEditor.prototype.scrollHandler = function (e) {\n        this.notify(events.scroll, { args: e });\n    };\n    RichTextEditor.prototype.focusHandler = function (e) {\n        if (!this.isRTE || this.isFocusOut) {\n            this.isRTE = this.isFocusOut ? false : true;\n            this.isFocusOut = false;\n            addClass([this.element], [classes.CLS_FOCUS]);\n            if (this.editorMode === 'HTML') {\n                this.cloneValue = (this.inputElement.innerHTML === '<p><br></p>') ? null : this.enableHtmlEncode ?\n                    this.encode(this.decode(this.inputElement.innerHTML)) : this.inputElement.innerHTML;\n            }\n            else {\n                this.cloneValue = this.inputElement.value === '' ? null :\n                    this.inputElement.value;\n            }\n            if (document.activeElement === this.element) {\n                this.contentModule.getEditPanel().focus();\n            }\n            this.preventDefaultResize(e);\n            this.trigger('focus', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.saveInterval) && this.saveInterval > 0) {\n                this.timeInterval = setInterval(this.updateIntervalValue.bind(this), this.saveInterval);\n            }\n            EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        }\n    };\n    RichTextEditor.prototype.setPanelValue = function () {\n        if (this.editorMode === 'HTML') {\n            this.value = (this.inputElement.innerHTML === '<p><br></p>') ? null : this.enableHtmlEncode ?\n                this.encode(this.decode(this.inputElement.innerHTML)) : this.inputElement.innerHTML;\n        }\n        else {\n            this.value = this.inputElement.value === '' ? null :\n                this.inputElement.value;\n        }\n        this.valueContainer.value = this.value;\n    };\n    RichTextEditor.prototype.updateIntervalValue = function () {\n        this.setPanelValue();\n        this.invokeChangeEvent();\n    };\n    RichTextEditor.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var rteElement = closest(target, '.' + classes.CLS_RTE);\n        if (!this.element.contains(e.target) && document !== e.target && rteElement !== this.element &&\n            !closest(target, '[aria-owns=\"' + this.getID() + '\"]')) {\n            this.isBlur = true;\n            this.isRTE = false;\n        }\n        this.notify(events.docClick, { args: e });\n    };\n    RichTextEditor.prototype.blurHandler = function (e) {\n        var trg = e.relatedTarget;\n        if (trg) {\n            var rteElement = closest(trg, '.' + classes.CLS_RTE);\n            if (rteElement && rteElement === this.element) {\n                this.isBlur = false;\n            }\n            else if (closest(trg, '[aria-owns=\"' + this.getID() + '\"]')) {\n                this.isBlur = false;\n            }\n            else {\n                this.isBlur = true;\n                trg = null;\n            }\n        }\n        if (this.isBlur && isNOU(trg)) {\n            removeClass([this.element], [classes.CLS_FOCUS]);\n            this.notify(events.focusChange, {});\n            this.setPanelValue();\n            this.notify(events.toolbarRefresh, { args: e, documentNode: document });\n            this.invokeChangeEvent();\n            this.isFocusOut = true;\n            this.isBlur = false;\n            dispatchEvent(this.valueContainer, 'focusout');\n            this.defaultResize(e);\n            this.trigger('blur', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.timeInterval)) {\n                clearInterval(this.timeInterval);\n                this.timeInterval = null;\n            }\n            EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        }\n        else {\n            this.isRTE = true;\n        }\n    };\n    RichTextEditor.prototype.invokeChangeEvent = function () {\n        var eventArgs = {\n            value: this.value\n        };\n        if (this.value !== this.cloneValue) {\n            this.trigger('change', eventArgs);\n            this.cloneValue = this.value;\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.wireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.add(element, 'scroll', this.scrollHandler, this);\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.unWireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n    };\n    RichTextEditor.prototype.resetHandler = function () {\n        this.setProperties({ value: null });\n        this.invokeChangeEvent();\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.autoResize = function () {\n        var _this = this;\n        if (this.height === 'auto') {\n            if (this.editorMode === 'Markdown') {\n                setTimeout(function () { _this.setAutoHeight(_this.inputElement); }, 0);\n            }\n            else if (this.iframeSettings.enable) {\n                var iframeElement_1 = this.element.querySelector('#' + this.getID() + '_rte-view');\n                setTimeout(function () { _this.setAutoHeight(iframeElement_1); }, 0);\n            }\n        }\n        else {\n            this.inputElement.style.overflow = null;\n        }\n    };\n    RichTextEditor.prototype.setAutoHeight = function (element) {\n        element.style.height = '';\n        element.style.height = this.inputElement.scrollHeight + 'px';\n        element.style.overflow = 'hidden';\n    };\n    RichTextEditor.prototype.wireEvents = function () {\n        this.element.addEventListener('focusin', this.onFocusHandler, true);\n        this.element.addEventListener('focusout', this.onBlurHandler, true);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.bindEvents();\n    };\n    RichTextEditor.prototype.bindEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.inputElement, {\n            keyAction: this.keyDown.bind(this), keyConfigs: this.formatter.keyConfig, eventName: 'keydown'\n        });\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetHandler, this);\n        }\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        EventHandler.add(this.inputElement, 'paste', this.onPaste, this);\n        EventHandler.add(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30), this);\n        EventHandler.add(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler, this);\n        this.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown, this);\n        this.element.ownerDocument.defaultView.addEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.add(this.inputElement, 'focusin', this.focusHandler, this);\n            EventHandler.add(this.inputElement, 'focusout', this.blurHandler, this);\n            EventHandler.add(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown, this);\n        }\n        this.wireScrollElementsEvents();\n    };\n    RichTextEditor.prototype.onIframeMouseDown = function (e) {\n        this.isBlur = false;\n        this.notify(events.iframeMouseDown, e);\n    };\n    RichTextEditor.prototype.editorKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'copy':\n                this.onCopy();\n                break;\n            case 'cut':\n                this.onCut();\n                break;\n        }\n        if (e.callBack && (e.event.action === 'copy' || e.event.action === 'cut')) {\n            e.callBack({\n                requestType: e.event.action,\n                editorMode: 'HTML',\n                event: e.event\n            });\n        }\n    };\n    RichTextEditor.prototype.unWireEvents = function () {\n        this.element.removeEventListener('focusin', this.onFocusHandler, true);\n        this.element.removeEventListener('focusout', this.onBlurHandler, true);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.unbindEvents();\n    };\n    RichTextEditor.prototype.unbindEvents = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetHandler);\n        }\n        EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n        EventHandler.remove(this.inputElement, 'paste', this.onPaste);\n        EventHandler.remove(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30));\n        EventHandler.remove(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler);\n        if (this.formatter) {\n            this.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown);\n        }\n        this.element.ownerDocument.defaultView.removeEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.remove(this.inputElement, 'focusin', this.focusHandler);\n            EventHandler.remove(this.inputElement, 'focusout', this.blurHandler);\n            EventHandler.remove(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown);\n        }\n        this.unWireScrollElementsEvents();\n    };\n    __decorate([\n        Complex({}, ToolbarSettings)\n    ], RichTextEditor.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Complex({}, QuickToolbarSettings)\n    ], RichTextEditor.prototype, \"quickToolbarSettings\", void 0);\n    __decorate([\n        Complex({}, IFrameSettings)\n    ], RichTextEditor.prototype, \"iframeSettings\", void 0);\n    __decorate([\n        Complex({}, ImageSettings)\n    ], RichTextEditor.prototype, \"insertImageSettings\", void 0);\n    __decorate([\n        Complex({}, TableSettings)\n    ], RichTextEditor.prototype, \"tableSettings\", void 0);\n    __decorate([\n        Property(0)\n    ], RichTextEditor.prototype, \"floatingToolbarOffset\", void 0);\n    __decorate([\n        Complex({}, InlineMode)\n    ], RichTextEditor.prototype, \"inlineMode\", void 0);\n    __decorate([\n        Property('100%')\n    ], RichTextEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property({})\n    ], RichTextEditor.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], RichTextEditor.prototype, \"enabled\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableHtmlEncode\", void 0);\n    __decorate([\n        Property('auto')\n    ], RichTextEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property(30)\n    ], RichTextEditor.prototype, \"undoRedoSteps\", void 0);\n    __decorate([\n        Property(300)\n    ], RichTextEditor.prototype, \"undoRedoTimer\", void 0);\n    __decorate([\n        Property('HTML')\n    ], RichTextEditor.prototype, \"editorMode\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"keyConfig\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"showCharCount\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableTabKey\", void 0);\n    __decorate([\n        Property(-1)\n    ], RichTextEditor.prototype, \"maxLength\", void 0);\n    __decorate([\n        Complex({}, Format)\n    ], RichTextEditor.prototype, \"format\", void 0);\n    __decorate([\n        Complex({}, FontFamily)\n    ], RichTextEditor.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Complex({}, FontSize)\n    ], RichTextEditor.prototype, \"fontSize\", void 0);\n    __decorate([\n        Complex({}, FontColor)\n    ], RichTextEditor.prototype, \"fontColor\", void 0);\n    __decorate([\n        Complex({}, BackgroundColor)\n    ], RichTextEditor.prototype, \"backgroundColor\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"valueTemplate\", void 0);\n    __decorate([\n        Property(10000)\n    ], RichTextEditor.prototype, \"saveInterval\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"blur\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"focus\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"formatter\", void 0);\n    RichTextEditor = __decorate([\n        NotifyPropertyChanges\n    ], RichTextEditor);\n    return RichTextEditor;\n}(Component));\nexport { RichTextEditor };\n"],"names":["getIndex","val","items","index","some","item","i","toLocaleLowerCase","hasClass","element","className","classList","contains","getDropDownValue","value","type","returnType","data","result","k","length","text","subCommand","isNOU","iconCss","getFormattedFontSize","getTooltipText","serviceLocator","i10n","getService","itemLocale","toolsLocale","getConstant","setToolbarStatus","e","isPopToolbar","dropDown","dropDownModule","args","_i","keys_1","Object","keys","key","j","tbItems","itemStr","addClass","tbElements","classes.CLS_ACTIVE","removeClass","parent","toolbarSettings","formatDropDown","isDestroyed","format","types","content","width","dataBind","alignDropDown","model.alignmentItems","fontNameDropDown","fontFamily","name_1","title","fontSizeDropDown","fontSize","default","replace","getCollection","getTBarItemsIndex","toolbarItems","itemsIndex","push","updateUndoRedoStatus","baseToolbar","undoRedoStatus","trgItems","undoRedoItems","toolbarObj","selectAll","classes.CLS_TB_ITEM","keys_2","target","enableItems","dispatchEvent","evt","document","createEvent","initEvent","parseHtml","tempNode","createElement","innerHTML","DocumentFragment","createRange","createContextualFragment","getTextNodesUnder","docElement","node","nodes","firstChild","nextSibling","nodeType","concat","toObjectLowerCase","obj","convertedValue","setAttributes","htmlAttributes","rte","isFrame","initial","contentModule","getDocument","querySelector","_a","htmlAttr","add","enabled","setEnable","readonly","setReadOnly","setAttribute","placeholder","setPlaceHolder","indexOf","valueContainer","initialLoad","initialEnd","iframeMouseDown","destroy","toolbarClick","toolbarRefresh","refreshBegin","toolbarUpdated","bindOnEnd","renderColorPicker","htmlToolbarClick","markdownToolbarClick","destroyColorPicker","modelChanged","keyUp","keyDown","mouseUp","toolbarCreated","toolbarRenderComplete","enableFullScreen","disableFullScreen","dropDownSelect","beforeDropDownItemRender","execCommandCallBack","imageToolbarAction","linkToolbarAction","resizeStart","onResize","resizeStop","insertLink","unLink","editLink","openLink","actionBegin","actionComplete","updateToolbarItem","insertImage","insertCompleted","imageLink","imageAlt","imageDelete","imageCaption","imageSize","sourceCode","updateSource","beforeDropDownOpen","selectionSave","selectionRestore","expandPopupClick","count","mouseDown","sourceCodeMouseDown","editAreaClick","scroll","colorPickerChanged","tableColorPickerChanged","focusChange","selectRange","getSelectedHtml","renderInlineToolbar","paste","rtlMode","createTable","docClick","tableToolbarAction","checkUndo","readOnlyMode","CLS_RTE","CLS_DISABLED","CLS_SCRIPT_SHEET","CLS_STYLE_SHEET","CLS_TOOLBAR","CLS_TB_FIXED","CLS_TB_FLOAT","CLS_TB_ABS_FLOAT","CLS_INLINE","CLS_RTE_EXPAND_TB","CLS_FULL_SCREEN","CLS_QUICK_TB","CLS_QUICK_DROPDOWN","CLS_INLINE_POP","CLS_INLINE_DROPDOWN","CLS_DROPDOWN_POPUP","CLS_DROPDOWN_ICONS","CLS_DROPDOWN_ITEMS","CLS_DROPDOWN_BTN","CLS_RTE_CONTENT","CLS_TB_ITEM","CLS_TB_WRAP","CLS_HIDE","CLS_FOCUS","CLS_RM_WHITE_SPACE","CLS_IMGBREAK","CLS_CAPTION","CLS_IMGINLINE","CLS_WARNING","CLS_ACTIVE","CLS_EXPAND_OPEN","CLS_RTE_ELEMENTS","CLS_TB_IOS_FIX","CLS_COLOR_CONTENT","CLS_RTE_READONLY","CLS_TABLE_SEL","CLS_TB_DASH_BOR","CLS_TB_ALT_BOR","CLS_TB_COL_RES","CLS_TB_ROW_RES","CLS_TB_BOX_RES","RenderType","ToolbarType","templateItems","tools","alignments","id","icon","tooltip","command","justifyleft","justifycenter","justifyright","justifyfull","fontname","fontsize","fontcolor","backgroundcolor","bold","italic","underline","strikethrough","clearformat","clearall","cut","copy","unorderedlist","orderedlist","indent","outdent","undo","redo","superscript","subscript","createlink","openlink","editlink","removelink","image","createtable","removetable","align","caption","remove","openimagelink","editimagelink","removeimagelink","insertlink","display","alttext","dimension","fullscreen","maximize","minimize","lowercase","uppercase","print","formats","sourcecode","preview","viewside","insertcode","tableheader","tableremove","tablerows","tablecolumns","tablecellbackground","tablecellhorizontalalign","tablecellverticalalign","tableeditproperties","styles","alignmentItems","imageAlignItems","imageDisplayItems","cssClass","tableRowsItems","tableColumnsItems","TableCellVerticalAlignItems","TableStyleItems","defaultLocale","justifyLeft","justifyCenter","justifyRight","justifyFull","fontName","fontColor","backgroundColor","clearFormat","clearAll","unorderedList","orderedList","createLink","removeLink","altText","lowerCase","upperCase","insertCode","linkText","linkTooltipLabel","linkWebUrl","linkTitle","linkurl","linkOpenInNewWindow","linkHeader","dialogInsert","dialogCancel","dialogUpdate","imageHeader","imageLinkHeader","mdimageLink","imageUploadMessage","imageDeviceUploadMessage","imageAlternateText","alternateHeader","browse","imageUrl","imageSizeHeader","imageHeight","imageWidth","textPlaceholder","tblhead","inserttablebtn","tabledialogHeader","tableWidth","cellpadding","cellspacing","columns","rows","tableRows","tableColumns","tableCellHorizontalAlign","tableCellVerticalAlign","removeTable","tableHeader","tableRemove","tableCellBackground","tableEditProperties","insertColumnLeft","insertColumnRight","deleteColumn","insertRowBefore","insertRowAfter","deleteRow","tableEditHeader","TableHeadingText","TableColText","insertcolumnleft","insertcolumnright","deletecolumn","aligntop","alignmiddle","alignbottom","insertrowbefore","insertrowafter","deleterow","ToolbarRenderer","this","wireEvent","prototype","on","events.destroy","unWireEvent","off","popupOverlay","EventHandler","onPopupOverlay","toolbarBeforeCreate","mode","enableCollision","notify","events.toolbarCreated","toolbarClicked","events.toolbarClick","trigger","dropDownSelected","events.dropDownSelect","events.beforeDropDownItemRender","dropDownOpen","Browser","isDevice","parentElement","classes.CLS_QUICK_DROPDOWN","popupModal","events.selectionSave","dropDownClose","events.selectionRestore","renderToolbar","setPanel","renderPanel","overflowMode","rteToolbarObj","Toolbar","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","appendTo","renderDropDownButton","css","_this","inlineMode","enable","proxy","DropDownButton","select","beforeOpen","childNodes","divNode","trim","textContent","events.beforeDropDownOpen","cancel","close","open","beforeItemRender","tabIndex","getElementById","getID","isNullOrUndefined","closest","style","setIsModel","nextElementSibling","popupContainer","parentNode","insertBefore","appendChild","zIndex","position","parseInt","toString","paletteSelection","dropDownArgs","currentElement","ele","colorbox","slice","call","borderBottomColor","filter","renderColorPickerDropDown","colorPicker","range","inlineEle","event","currentDropdown","colorpickerValue","formatter","editorManager","nodeSelection","getRange","startContainer","nodeName","collapsed","events.tableColorPickerChanged","events.colorPickerChanged","inst","getInstance","ColorPicker","showButtons","onclick","toggle","setColorPickerContentWidth","focusEle","focus","beforeClose","dropElement","lastElementChild","onmousedown","popupInst","Popup","relateTo","body","X","Y","targetType","collision","offsetY","colorPickerContent","borderWidth","getComputedStyle","borderBottomWidth","formatUnit","children","offsetWidth","inline","setProperties","modeSwitcher","beforeTileRender","change","colorPickerArgs","info","name","iosDevices","navigator","platform","isIDevice","currentValue","rgba","hex","beforeModeSwitch","presetColors","colorCode","getPanel","toolbarPanel","panel","BaseToolbar","locator","renderFactory","addEventListener","itemConfigs","extend","events.rtlMode","setRtl","removeEventListener","getTemplateObject","container","tagName","template","outerHTML","tooltipText","getObject","toLowerCase","prefixIcon","getItems","tbItems_1","getToolbarOptions","render","toolbarRenderer","getRenderer","DropDownButtons","initializeInstance","beforeRender","dropdownContent","renderDropDowns","containerType","tbElement","model.templateItems","forEach","targetElement","undefined","classes.CLS_DROPDOWN_BTN","formatItem","defineProperties","enumerable","classes.CLS_DROPDOWN_POPUP","classes.CLS_DROPDOWN_ITEMS","itemName","fontItem","imageAlignmentDropDown","imageDisplayDropDown","rowDropDown","columnDropDown","verticalAlignDropDown","tableStylesDropDown","getUpdateItems","dropDownItems","onPropertyChanged","model","newProp","_b","_c","fontItems","classes.CLS_QUICK_TB","_d","_e","_f","_g","formatItems","tableRowsDropDown","model.tableRowsItems","tableColumnsDropDown","model.tableColumnsItems","tableCellVerticalAlignDropDown","model.TableCellVerticalAlignItems","displayDropDown","model.imageDisplayItems","imageAlignDropDown","classes.CLS_DROPDOWN_ICONS","model.imageAlignItems","tableSettings","removeDropDownClasses","destroyDropDowns","events.iframeMouseDown","onIframeMouseDown","events.modelChanged","ServiceLocator","services","register","RendererFactory","rendererMap","addRenderer","rName","getEnumValue","ToolbarAction","renderSelection","controlParent","activeEle","events.htmlToolbarClick","events.markdownToolbarClick","process","originalEvent","isToolbar","isTransformChild","model.tools","contentRenderer","Content","editableElement","getEditPanel","editPanel","toolbarBindEvent","keyBoardModule","KeyboardEvents","getToolbarElement","keyAction","toolBarKeyDown","keyConfigs","keyConfig","eventName","action","createToolbarElement","enableFloating","tbWrapper","classes.CLS_TB_WRAP","firstElementChild","getToolbarMode","tbMode","Expand","checkToolbarResponsive","addFixedTBarClass","wireEvents","events.renderColorPicker","checkIsTransformChild","transformElements","toggleFloatClass","topValue","scrollParent","isBody","isFloat","floatOffset","floatingToolbarOffset","tbHeight","getToolbarHeight","getExpandTBarPopHeight","scrollParentRelativeTop","trgHeight","offsetHeight","bodyStyle","window","parseFloat","marginTop","split","paddingTop","targetTop","getBoundingClientRect","top","scrollParentYOffset","isMSPointer","pageYOffset","scrollTop","scrollParentRect","scrollParentTop","classes.CLS_TB_ABS_FLOAT","parent_1","innerHeight","bottom","classes.CLS_TB_FLOAT","setStyleAttribute","events.renderInlineToolbar","classes.CLS_RTE_EXPAND_TB","refreshToolbarOverflow","classes.CLS_TB_FIXED","removeFixedTBarClass","showFixedTBar","isIos","classes.CLS_TB_IOS_FIX","hideFixedTBar","updateItem","targetItem","addTBarItem","prefixId","updateToolbarStatus","options","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","enableTBarItems","isEnable","undoRedoManager","getUndoStatus","removeTBarItems","getBaseToolbarObject","removeItems","popHeight","expandPopup","classes.CLS_EXPAND_OPEN","classes.CLS_TOOLBAR","refreshOverflow","isToolbarDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","events.destroyColorPicker","detach","scrollHandler","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","toolbarMouseDownHandler","trg","setContentHeight","toolbarActionModule","events.initialEnd","events.scroll","events.bindOnEnd","events.toolbarUpdated","events.refreshBegin","onRefresh","events.enableFullScreen","events.disableFullScreen","events.updateToolbarItem","events.expandPopupClick","events.focusChange","events.mouseDown","events.sourceCodeMouseDown","module","getModuleName","wireScrollElementsEvents","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__decorate","decorators","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","keyCode","backspace","tab","enter","shift","control","alt","pause","capslock","space","escape","pageup","pagedown","end","home","leftarrow","uparrow","rightarrow","downarrow","insert","delete","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","semicolon","plus","comma","minus","dot","forwardslash","graveaccent","openbracket","backslash","closebracket","singlequote","]","[","=","_super","keyPressHandler","isAltKey","altKey","isCtrlKey","ctrlKey","isShiftKey","shiftKey","curkeyCode","which","configCollection_1","rconfig","rKeyObj","KeyboardEvents_1","getKeyConfigData","unwireEvents","oldProp","config","configCache","keyData","Number","getKeyCode","keyVal","toUpperCase","charCodeAt","Property","Event","NotifyPropertyChanges","Base","ColorPickerInput","renderColorPickerInput","suffixID","targetID","fontNode","args_1","classes.CLS_RTE_ELEMENTS","fontColorPicker","fontColorDropDown","backNode","backgroundColorPicker","backgroundColorDropDown","innerEle","events.toolbarRenderComplete","BaseQuickToolbar","isDOMElement","popupRenderer","dropDownButtons","colorPickerObj","appendPopupContent","toolbarElement","popupType","classes.CLS_INLINE_POP","popupId","getUniqueID","stringItems","createToolbar","renderPopup","quickTBarObj","refresh","setPosition","x","y","imgWrapper","classes.CLS_RM_WHITE_SPACE","targetOffsetTop","offsetTop","parentOffsetTop","parentData","editTop","tBarElementHeight","editHeight","popWidth","left","offsetLeft","popupObj","right","checkCollision","viewPort","parentTop","contentTop","windowY","isCollide","popup","windowHeight","windowWidth","bodyRightSpace","showPopup","editPanelTop","editPanelHeight","bodyRight","marginRight","paddingRight","innerWidth","toolbarAvail","getToolbar","toolbarModule","expTBHeight","tBarHeight","classes.CLS_HIDE","iframeSettings","cntEle","contentWindow","classes.CLS_RTE_CONTENT","disableToolbarItem","enableToolbarItem","append","show","showPopupData","hide","duration","maxWidth","hidePopup","viewSourcePanel","sourceCodeModule","getViewPanel","removeEleFromDOM","addQTBarItem","removeQTBarItem","updateStatus","PopupRenderer","popupOpen","popupPanel","QuickToolbar","formattedItems","getQTBarOptions","popType","renderType","createQTBar","qTBar","initializeQuickToolbars","quickToolbarModule","onMouseDown","isBlur","isRTE","renderQuickToolbars","linkQTBar","imageQTBar","textQTBar","tableQTBar","quickToolbarSettings","link","LinkToolbar","TextToolbar","ImageToolbar","table","TableToolbar","renderInlineQuickToolbar","inlineQTBar","InlineToolbar","showInlineQTBar","hideInlineQTBar","hideQuickToolbars","deBounce","clearTimeout","deBouncer","setTimeout","mouseUpHandler","offsetX","pageX","isIFrame","clientY","pageY","closestAnchor","onSelection","keyDownHandler","inlineQTBarMouseDownHandler","keyUpHandler","getInlineBaseToolbar","wireInlineQTBarEvents","events.mouseUp","events.keyDown","events.keyUp","unWireInlineQTBarEvents","actionOnScroll","onKeyDown","Count","renderCount","appendCount","maxLength","charCountBackground","htmlLength","htmlText","editorMode","string","percentage","restrict","showCharCount","currentTarget","array","arrayKey","preventDefault","member","events.count","events.sourceCode","events.updateSource","MarkdownSelection","getLineNumber","textarea","point","substr","getSelectedText","start","selectionStart","selectionEnd","substring","getAllParents","getSelectedLine","getLine","getSelectedParentPoints","lines","parents","selectedPoints","selectedLine","startLength","join","firstPoint","line","points","lastPoint","setSelection","setSelectionRange","save","restore","textArea","isStartWith","isStart","RegExp","replaceSpecialChar","test","isClear","regex","getRegex","syntax","getSelectedInlinePoints","MarkdownToolbarStatus","toolbarStatus","inlinecode","selection","events.toolbarRefresh","onRefreshHandler","parentsLines","documentNode","isListsApplied","currentFormat","mdSelectionFormats","isAppliedCommand","isApply","listTags","formatTags","checkLine","selectionDirection","parentLines","firstPrevText","lastNextText","ExecCommandCallBack","events.execCommandCallBack","commandCallBack","requestType","saveData","ACTION","FORMAT_TYPE","KEY_DOWN_HANDLER","KEY_UP_HANDLER","MODEL_CHANGED_PLUGIN","MODEL_CHANGED","Formatter","self","getSelection","rangeCount","getRangeAt","getAncestorNode","commonAncestorContainer","itemCollection","CONSTANT.actionBegin","observer","callBack","onSuccess","getUndoRedoStack","clipboardAction","CONSTANT.checkUndo","execCommand","enableUndo","onKeyHandler","events","CONSTANT.execCommandCallBack","CONSTANT.actionComplete","CONSTANT.insertCompleted","isNotify","elements","autoResize","undoRedoStack","status","LISTS_COMMAND","selectionCommand","LINK_COMMAND","CLEAR_COMMAND","MD_TABLE","MDLists","markdownSelection","CONSTANT.LISTS_COMMAND","applyListsHandler","EVENTS.KEY_DOWN_HANDLER","EVENTS.KEY_UP_HANDLER","tabKey","enterKey","addedLength","isNotFirst","isNotFirstLine","getListRegex","currentAction","getAction","prevIndex","prevLine","tabSpaceLength","splitTab","splice","getTabSpace","tabs","currentLine","curTabSpace","prevTabSpace","ol","OL","UL","tabSpace","prefix","endLength","appliedLine","pattern","selectedText","configKey","MDFormats","EVENTS.FORMAT_TYPE","applyFormats","isAppliedFormat","applyCodeBlock","cleanFormat","CONSTANT.selectionCommand","clearRegex","removeLength","removeText","pre","cmd","startNo","lastIndexOf","endNo","repStartText","replaceAt","repEndText","lastLine","input","search","MDSelectionFormats","applyCommands","isBold","isItalic","isMatch","matchText","Italic","InlineCode","StrikeThrough","match","singleCharRegx","multiCharRegx","isFormat","splitText","splitAt","cmdB","Bold","cmdI","beforeText","afterText","startCmd","endCmd","isApplied","textReplace","repStart","repEnd","regx","regxB","repText","regxTemp","regTest","markdownFormatTags","h6","h5","h4","h3","h2","h1","blockquote","markdownSelectionTags","SubScript","SuperScript","UpperCase","LowerCase","markdownListsTags","htmlKeyConfig","toolbar-focus","insert-link","insert-image","indents","outdents","html-source","full-screen","decrease-fontsize","increase-fontsize","justify-center","justify-full","justify-left","justify-right","clear-format","ordered-list","unordered-list","markdownKeyConfig","UndoRedoCommands","undoRedoSteps","undoRedoTimer","debounceListener","debounce","EVENTS.ACTION","onAction","EVENTS.MODEL_CHANGED_PLUGIN","props","changEle","steps","removedContent","MDLink","CONSTANT.LINK_COMMAND","startOffset","endOffset","url","MDTable","CONSTANT.MD_TABLE","textAreaInitial","locale","insertTable","getTable","textNonEmpty","tableCell","headingText","insertLine","colText","convertToLetters","dummyElement","parentText","lastLineSplit","syntaxArr","getFormatTag","updateValue","makeSelection","ensureFormatApply","checkValid","syntaxFormatKey","syntaxTag","Formats","syntaxListKey","List","formatSplitZero","ensureStartValid","firstLine","firstLineSplit","ensureEndValid","formatSplitLength","updateValueWithFormat","formatSplit","textApplyFormat","rowNumber","baseChar","letters","String","fromCharCode","emptyText","isCursorBased","isSelectionBased","ClearFormat","CONSTANT.CLEAR_COMMAND","clear","replaceRegex","clearSelectionTags","selectionTags","num","expString","regExp","startExp","endExp","clearFormatTags","tags","str","len","MarkdownParser","initialize","Observer","listObj","formatObj","linkObj","tableObj","clearObj","editorKeyDown","editorKeyUp","EVENTS.MODEL_CHANGED","exeValue","MarkdownFormatter","updateFormatter","editElement","doc","MarkdownRender","rteObj","div","contentPanel","getText","ownerDocument","MarkdownEditor","saveSelection","events.initialLoad","instantiateRenderer","onToolbarClick","events.selectAll","events.getSelectedHtml","onSelectionSave","onSelectionRestore","events.readOnlyMode","updateReadOnly","classes.CLS_RTE_READONLY","removeAttribute","events.insertLink","events.insertImage","tableConstant","localeObj","option","toolbarUpdate","IMAGE","TABLE","LINK","INSERT_ROW","INSERT_COLUMN","DELETEROW","DELETECOLUMN","REMOVETABLE","TABLEHEADER","TABLE_VERTICAL_ALIGN","ALIGNMENT_TYPE","INDENT_TYPE","BLOCK_TAGS","IGNORE_BLOCK_TAGS","TABLE_BLOCK_TAGS","SELECTION_TYPE","INSERTHTML_TYPE","CLEAR_TYPE","NodeSelection","startNodeName","endNodeName","saveInstance","cloneRange","rootNode","documentFromRange","getNodeArray","endContainer","html","get","setStart","collapse","defaultView","previousSibling","isChildNode","nodeCollection","getNode","startNode","endNode","getNodeCollection","getParentNodeCollection","getParentNodes","reverse","getSelectionNodeCollection","getSelectionNodes","getInsertNodeCollection","getInsertNodes","root","setRangePoint","isvalid","size","constant","setRange","removeAllRanges","addRange","setSelectionText","startIndex","endIndex","setEnd","setSelectionContents","selectNode","setSelectionNode","selectNodeContents","getSelectedNodes","Clear","insertParentNode","newNode","surroundContents","setCursorPoint","markerClassName","startSelection","endSelection","DOMNode","currentDocument","contents","isBlockNode","Node","ELEMENT_NODE","CONSTANT.BLOCK_TAGS","isLink","blockParentNode","rawAttributes","rawAttr","attributes","attr","orderRawAttr","sort","attrKey","attrValue","clearAttributes","openTagString","closeTagString","createTagString","relativeElement","isList","isElement","isEditable","getAttribute","replaceWith","parseHTMLFragment","temp","wrap","wrapper","insertAfter","referenceNode","wrapInner","unWrap","unWrapNode","removeChild","getSelectedNode","TEXT_NODE","nodeFinds","existNodes","isEditorArea","getRangePoint","ranges","f","getPreviousNode","encode","innerText","saveMarker","startTextNode","endTextNode","marker","setMarker","existNode","textNodes","CONSTANT.IGNORE_BLOCK_TAGS","createTempNode","blockNodes","collectionNodes","ignoreTableTag","listNodes","querySelectorAll","CONSTANT.TABLE_BLOCK_TAGS","Lists","domNode","isNested","ignoreDefault","stopPropagation","revertList","revertClean","nestedList","cleanNode","prevSibling","noPreviousElement","firstNode","firstNodeOL","siblingListOL","siblingListLI","siblingListLIFirst","h","prepend","list-style-type","nestedElement","nestedElementLI","firstNodeLI","listsNodes","applyLists","isRevert","checkLists","openTag","closeTag","replaceHTML","collectionString","nodesTemp","liParents","contentNodes","findUnSelected","rightIndent","indentElements","childElements","z","childLI","viewNode","classAttr","childNode","class","nodeInnerHtml","emptyUl","emptyLi","getParentNode","formatsNodes","cleanFormats","replaceTag","ignoreAttr","removeProperty","InsertMethods","WrapBefore","textNode","isAfter","AppendBefore","Wrap","unwrap","child","NodeCutter","GetSpliceNode","SplitNode","isCollapsed","clone","setStartBefore","setEndAfter","fragment","extractContents","spliceEmptyNode","GetCursorStart","indexes","GetCursorRange","cursorRange","TrimLineBreak","GetCursorNode","InsertHtml","Insert","insertNode","editNode","nodeCutter","closestParentNode","closestEle","preNode","sibNode","lasNode","deleteContents","el","LinkCommand","CONSTANT.LINK","linkCommand","selectParent","anchor","attrs","href","anchorEle","arr","Alignments","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","CONSTANT.ALIGNMENT_TYPE","applyAlignment","alignmentNodes","text-align","Indents","indentValue","CONSTANT.INDENT_TYPE","applyIndents","indentsNodes","parentNodes","marginLeft","indentsValue","CLASS_IMAGE_RIGHT","CLASS_IMAGE_LEFT","CLASS_IMAGE_CENTER","CLASS_IMAGE_BREAK","CLASS_CAPTION","CLASS_CAPTION_INLINE","ImageCommand","CONSTANT.IMAGE","imageCommand","createImage","insertImageLink","openImageLink","editImageLink","removeImageLink","removeImage","insertAltTextImage","imageDimension","imageJustifyLeft","imageJustifyCenter","imageJustifyRight","imageInline","imageBreak","imgElement","height","minWidth","minHeight","maxHeight","imgEle","insertElement","classes.CLASS_CAPTION","classes.CLASS_IMAGE_RIGHT","classes.CLASS_IMAGE_LEFT","classes.CLASS_IMAGE_CENTER","classes.CLASS_IMAGE_BREAK","classes.CLASS_CAPTION_INLINE","TableCommand","CONSTANT.TABLE","CONSTANT.INSERT_ROW","insertRow","CONSTANT.INSERT_COLUMN","insertColumn","CONSTANT.DELETEROW","CONSTANT.DELETECOLUMN","CONSTANT.REMOVETABLE","CONSTANT.TABLEHEADER","CONSTANT.TABLE_VERTICAL_ALIGN","tableVerticalAlign","tblBody","tdWid","row","cell","selectedCell","newRow","curRow","cloneNode","tabCell","tdElement","curCell","allRows","colIndex","colTemplate","deleteCell","cellIndex","parentTable","rowIndex","seletedTable","cellCount","createTHead","th","deleteTHead","verticalAlign","IsFormatted","getFormattedNode","getFormatParent","isFormattedNode","isUnderline","isStrikethrough","isSuperscript","isSubscript","isFontColor","isFontName","isFontSize","isBackgroundColor","inlineTags","fontWeight","fontStyle","textDecoration","color","backColor","SelectionCommands","applyFormat","domSelection","isFormatted","isCursor","isFontStyle","cursorNode","insertCursorNode","formatNode","insertFormat","removeFormat","applySelection","cursorNodes","cursorFormat","getInsertNode","splitNode","nodeIndex","lastNode","pop","nodeValue","GetFormatNode","toLocaleUpperCase","getChildNode","SelectionBasedExec","CONSTANT.SELECTION_TYPE","InsertHtmlExec","CONSTANT.INSERTHTML_TYPE","applyHtml","exactNodes","cloneSelectNodes","clearInlines","reSelection","cloneParentNodes","clearBlocks","selectionNodes","endIndexNode","spliceParent","removeParent","index1","index2","index3","parentIndex","elementIndex","NONVALID_TAGS","NONVALID_PARENT_TAGS","removeInlineParent","ClearFormatExec","CONSTANT.CLEAR_TYPE","applyClear","UndoRedoManager","EditorManager","alignmentObj","indentsObj","imgObj","selectionObj","inserthtmlObj","HTMLFormatter","statusCollection","ToolbarStatus","targetNode","formatCollection","JSON","parse","stringify","isOrderedList","isUnorderedList","isAlignment","isFormats","pos","textAlign","prop","getPropertyValue","HtmlToolbarStatus","ContentRender","rteContent","contenteditable","IframeContentRender","apply","iFrameContent","iframe","contentDocument","setThemeColor","write","HtmlEditor","rangeCollection","nodeSelectionObj","colorPickerModule","events.selectRange","events.paste","onPaste","enableTabKey","textCont","createTextNode","spaceLink","selectNodeEle","urlText","selectParentEle","closestElement","events.imageToolbarAction","events.linkToolbarAction","events.tableToolbarAction","linkDialog","imageDialog","events.createTable","Render","renderer","Link","rteID","rendererFactory","events.insertCompleted","showLinkQuickToolbar","onToolbarAction","events.unLink","events.editLink","events.openLink","events.editAreaClick","editAreaClickHandler","dialogObj","returnValue","quickToolObj","linkTop","linkPos","hideLinkQuickToolbar","getAnchorNode","isPopupOpen","eventArgs","inputDetails","selectText","linkWebAddress","linkDisplayText","linkTooltip","urlPlace","textPlace","linkDialogEle","linkContent","contentElem","linkTarget","linkUrl","linkOpenLabel","checkBoxObj","CheckBox","label","checked","linkInsert","linkCancel","selectObj","selfLink","Dialog","header","showCloseIcon","closeOnEscape","isModal","buttons","click","buttonModel","isPrimary","cancelDialog","animationSettings","effect","btnText","checkUrl","onDocumentClick","linkEle","isUrl","linkUpdate","Image","showImageQuickToolbar","events.imageCaption","events.imageDelete","deleteImg","events.imageLink","insertImgLink","events.imageAlt","insertAltText","events.imageSize","alignmentSelect","afterRender","imagePaste","touchEndEvent","imageClick","events.checkUndo","undoStack","insertImageSettings","resize","touchStartEvent","img","outline","resizeEnd","resizeBtnInit","cursor","events.resizeStop","getPointX","preventDefaultResize","imgResizeDiv","imageResize","getPointY","stopImmediatePropagation","resizeBtnStat","topLeft","topRight","botLeft","botRight","events.resizeStart","cancelResizeAction","imgResizePos","resizeImgDupPos","touchMoveEvent","resizing","touches","calcPos","imgWid","imgHgt","borWid","devWid","elem","parentOffset","offset","offsetParent","documentElement","setAspectRatio","expectedX","expectedY","resizeByPercent","pixToPerc","previousElementSibling","expected","parentEle","imgDupMouseMove","events.onResize","mouseX","mouseY","imgDupPos","openImgLink","editImgLink","removeImgLink","insertEle","captionEle","prev","remvoeResizEle","event_1","justifyImageLeft","justifyImageCenter","justifyImageRight","break","imageWithLinkQTBarItemUpdate","newItems","Math","round","hideImageQuickToolbar","imagDialog","linkWrap","inputLink","target_1","linkargs_1","selfImage","altWrap","altHeader","inputAlt","altArgs_1","insertAlt","captionClass","classes.CLS_CAPTION","draggable","imgWrap","imgInner","imgCaption","classes.CLS_IMGINLINE","classes.CLS_IMGBREAK","imgSizeHeader","dialogContent","imgsizeInput","selectObj_1","insertSize","imgDialog","imgInsert","imglinkCancel","imgHeader","insertImageUrl","imageUrlPopup","imgUrl","placeUrl","inputUrl","spellcheck","uploadUrl","matchUrl","imgHeight","imgWidth","imgSizeWrap","getClientRects","widthNum","NumericTextBox","min","max","heightNum","dialogEle","path","imgUpload","linkHeaderText","uploadParentEle","deviceImgUpMsg","imgUpMsg","span","btnEle","autofocus","browserMsg","button","Button","btnClick","fileSelect","uploadEle","uploadObj","Uploader","asyncSettings","saveUrl","dropArea","multiple","allowedExtensions","allowedTypes","selected","filesData","reader_1","FileReader","URL","createObjectURL","readAsDataURL","rawFile","success","file","removing","getElementsByClassName","proxy_1","reader_2","dataurl","mime","bstr","atob","n","u8arr","Uint8Array","Blob","ViewSource","onInitialEnd","updateSourceCode","CONSTANT.KEY_DOWN_HANDLER","getSourceCode","keyboardModule","previewKeyDown","previewElement","wireBaseKeyDown","unWireBaseKeyDown","events.actionBegin","updateValueData","events.actionComplete","invokeChangeEvent","editHTML","Table","moveEle","l10n","insertTableDialog","renderDlgContent","events.docClick","dropdownSelect","cellSelect","setBGColor","resizeHelper","addRow","addColumn","removeRowColumn","tableStyles","removeResizeEle","tabSelection","tableArrowNavigation","editTable","tdEle","classes.CLS_TB_DASH_BOR","classes.CLS_TB_ALT_BOR","insideList","classes.CLS_TABLE_SEL","prevElement","tHead","clsTble","cells","nextElement","selText","hideTableQuickToolbar","closestTable","range_1","tableCellSelect","col","list","dlgDiv","tblHeader","tableCellLeave","tableCellClick","tableInsert","editdlgObj","tdNode","curTable","helper","targetTouches","tableResizeEleCreation","colReEle","classes.CLS_TB_COL_RES","data-col","unselectable","cssText","rowReEle","classes.CLS_TB_ROW_RES","data-row","tableReBox","classes.CLS_TB_BOX_RES","column","columnEle","appendHelper","rowEle","tableBox","removeHelper","setHelperHeight","updateHelper","top_1","tableHeight","cellColl","actualwid","totalwid","selectCell","tabkey","delKey","insertbtn","tableDiv","drawTable","viewPortElement","refreshPosition","isExist","rowDiv","data-column","data-cell","createDialog","editContent","tableDlgContent","update","editHeader","applyProperties","dlgContent","tableCellDlgContent","customTable","tableColumn","tableRow","tableWrap","columnTextBox","floatLabelType","rowTextBox","tableDialog","argument","cellPadding","cellSpacing","widthVal","executeGroup","strikeThrough","formatBlock","heading","insertHTML","insertText","insertHorizontalRule","insertBrOnReturn","insertOrderedList","insertUnorderedList","insertParagraph","predefinedItems","Custom","ToolbarSettings","ChildProperty","ImageSettings","TableSettings","QuickToolbarSettings","FontFamily","FontSize","Format","FontColor","BackgroundColor","Resources","IFrameSettings","Complex","InlineMode","FullScreen","scrollableParent","getScrollableParent","classes.CLS_FULL_SCREEN","toggleParentOverflow","properties","isAdd","RichTextEditor","isFocusOut","needsID","onBlurHandler","blurHandler","onFocusHandler","focusHandler","onResizeHandler","resizeHandler","requiredModules","modules","updateEnable","classes.CLS_DISABLED","inputElement","eventInitializer","preRender","initializeServices","setContainer","role","originalElement","valueTemplate","setValue","invalidAttr","a","rteOuterWrapper","getPersistData","addOnPersist","focusIn","focusOut","blur","txt","executeCommand","commandName","tool","decode","renderModule","RTERender","allowedKeys","ensureModuleInjected","getInjectedModules","onCopy","onCut","clipboardData","getData","getAsFile","destroyDependentModules","timeInterval","clearInterval","placeHolderWrapper","removeHtmlAttributes","removeAttributes","hasAttribute","getContent","updatePanelValue","countModule","setWidth","setHeight","setCssClass","updateRTL","frameSetting","resources","files","scripts","classes.CLS_SCRIPT_SHEET","removeSheets","classes.CLS_STYLE_SHEET","setIframeSettings","CONSTANT.MODEL_CHANGED","enableHtmlEncode","srcList","unbindEvents","bindEvents","printWind","printArgs","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printWindow","removeToolbarItem","L10n","styleSrc","scriptSrc","InjectSheet","scriptSheet","scriptEle","createScriptElement","src","styleEle","createStyleElement","rel","compiledTemplate","compile","compiledString","isExpand","heightValue","rteHeight","expandPopHeight","codeElement","getHtml","showSourceCode","classes.CLS_FOCUS","preventImgResize","defaultResize","cloneValue","activeElement","isInteracted","saveInterval","setInterval","updateIntervalValue","setPanelValue","rteElement","classes.CLS_RTE","relatedTarget","scrollParentElements","resetHandler","setAutoHeight","iframeElement_1","overflow","scrollHeight","formElement","Component"],"mappings":"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"}