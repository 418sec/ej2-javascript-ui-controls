{"version":3,"file":"ej2-pivotview.min.js","sources":["../../src/base/util.js","../../src/base/engine.js","../../src/common/base/constant.js","../../src/common/base/css-constant.js","../../src/pivotview/renderer/render.js","../../src/pivotview/model/dataSource.js","../../src/pivotview/model/gridsettings.js","../../src/pivotview/actions/excel-export.js","../../src/pivotview/actions/pdf-export.js","../../src/pivotview/actions/keyboard.js","../../src/common/popups/context-menu.js","../../src/pivotview/actions/virtualscroll.js","../../src/common/popups/drillthrough-dialog.js","../../src/pivotview/actions/drill-through.js","../../src/pivotview/base/pivotview.js","../../src/common/actions/keyboard.js","../../src/common/actions/event-base.js","../../src/common/actions/node-state-modified.js","../../src/common/actions/dataSource-update.js","../../src/common/popups/error-dialog.js","../../src/common/popups/filter-dialog.js","../../src/common/base/pivot-common.js","../../src/pivotfieldlist/renderer/dialog-renderer.js","../../src/pivotfieldlist/renderer/tree-renderer.js","../../src/pivotfieldlist/renderer/axis-table-renderer.js","../../src/common/popups/aggregate-menu.js","../../src/common/actions/pivot-button.js","../../src/pivotfieldlist/renderer/axis-field-renderer.js","../../src/pivotfieldlist/renderer/renderer.js","../../src/pivotfieldlist/base/field-list.js","../../src/common/calculatedfield/calculated-field.js","../../src/common/actions/field-list.js","../../src/common/actions/common.js","../../src/common/grouping-bar/axis-field-renderer.js","../../src/common/grouping-bar/grouping-bar.js","../../src/common/conditionalformatting/conditional-formatting.js"],"sourcesContent":["/**\n * This is a file to perform common utility for OLAP and Relational datasource\n * @hidden\n */\nvar PivotUtil = /** @class */ (function () {\n    function PivotUtil() {\n    }\n    PivotUtil.getType = function (value) {\n        var val;\n        val = (value && value.getDay) ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        return val;\n    };\n    PivotUtil.resetTime = function (date) {\n        date.setHours(0, 0, 0, 0);\n        return date;\n    };\n    return PivotUtil;\n}());\nexport { PivotUtil };\n","import { extend, Internationalization, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PivotUtil } from './util';\n/**\n * PivotEngine is used to manipulate the relational or Multi-Dimensional data as pivoting values.\n */\n/** @hidden */\nvar PivotEngine = /** @class */ (function () {\n    /**\n     * Constructor for PivotEngine class\n     * @param  {DataOptions} dataSource?\n     * @param  {string} mode?\n     * @hidden\n     */\n    function PivotEngine(dataSource, mode, savedFieldList, pageSettings, enableValueSoring, isDrillThrough) {\n        /** @hidden */\n        this.formatFields = {};\n        /** @hidden */\n        this.calculatedFields = {};\n        /** @hidden */\n        this.calculatedFormulas = {};\n        /** @hidden */\n        this.valueAxis = 0;\n        /** @hidden */\n        this.saveDataHeaders = {};\n        /** @hidden */\n        this.columnCount = 0;\n        /** @hidden */\n        this.rowCount = 0;\n        /** @hidden */\n        this.colFirstLvl = 0;\n        /** @hidden */\n        this.rowFirstLvl = 0;\n        /** @hidden */\n        this.rowStartPos = 0;\n        /** @hidden */\n        this.colStartPos = 0;\n        /** @hidden */\n        this.enableValueSorting = false;\n        /** @hidden */\n        this.headerCollection = { rowHeaders: [], columnHeaders: [], rowHeadersCount: 0, columnHeadersCount: 0 };\n        this.valueMatrix = [];\n        this.indexMatrix = [];\n        this.rMembers = [];\n        this.cMembers = [];\n        this.memberCnt = -1;\n        this.pageInLimit = false;\n        this.endPos = 0;\n        this.removeCount = 0;\n        this.colHdrBufferCalculated = false;\n        this.colValuesLength = 1;\n        this.rowValuesLength = 1;\n        this.slicedHeaders = [];\n        this.fieldFilterMem = {};\n        this.filterPosObj = {};\n        this.selectedHeaders = { selectedHeader: [], values: [] };\n        this.rawIndexObject = {};\n        this.isEditing = false;\n        this.renderEngine(dataSource, mode, savedFieldList, pageSettings, enableValueSoring, isDrillThrough);\n    }\n    PivotEngine.prototype.renderEngine = function (dataSource, mode, savedFieldList, pageSettings, enableValueSoring, isDrillThrough) {\n        this.formatFields = {};\n        this.calculatedFields = {};\n        this.calculatedFormulas = {};\n        this.valueAxis = 0;\n        this.saveDataHeaders = {};\n        this.columnCount = 0;\n        this.rowCount = 0;\n        this.colFirstLvl = 0;\n        this.rowFirstLvl = 0;\n        this.rowStartPos = 0;\n        this.colStartPos = 0;\n        this.enableValueSorting = false;\n        this.headerCollection = { rowHeaders: [], columnHeaders: [], rowHeadersCount: 0, columnHeadersCount: 0 };\n        this.valueMatrix = [];\n        this.indexMatrix = [];\n        this.rMembers = [];\n        this.cMembers = [];\n        this.memberCnt = -1;\n        this.pageInLimit = false;\n        this.endPos = 0;\n        this.removeCount = 0;\n        this.colHdrBufferCalculated = false;\n        this.colValuesLength = 1;\n        this.rowValuesLength = 1;\n        this.slicedHeaders = [];\n        this.fieldFilterMem = {};\n        this.filterPosObj = {};\n        this.selectedHeaders = { selectedHeader: [], values: [] };\n        this.rawIndexObject = {};\n        this.isEditing = false;\n        var fields;\n        var val;\n        var filterRw;\n        this.globalize = new Internationalization();\n        this.enableSort = dataSource.enableSorting;\n        this.alwaysShowValueHeader = dataSource.alwaysShowValueHeader;\n        this.showSubTotals = isNullOrUndefined(dataSource.showSubTotals) ? true : dataSource.showSubTotals;\n        this.showRowSubTotals = isNullOrUndefined(dataSource.showRowSubTotals) ? true : dataSource.showRowSubTotals;\n        this.showColumnSubTotals = isNullOrUndefined(dataSource.showColumnSubTotals) ? true : dataSource.showColumnSubTotals;\n        this.showGrandTotals = isNullOrUndefined(dataSource.showGrandTotals) ? true : dataSource.showGrandTotals;\n        this.showRowGrandTotals = isNullOrUndefined(dataSource.showRowGrandTotals) ? true : dataSource.showRowGrandTotals;\n        this.showColumnGrandTotals = isNullOrUndefined(dataSource.showColumnGrandTotals) ? true : dataSource.showColumnGrandTotals;\n        this.allowValueFilter = dataSource.allowValueFilter;\n        this.isValueFilterEnabled = false;\n        this.enableValueSorting = enableValueSoring;\n        this.valueContent = [];\n        if (dataSource.data && dataSource.data[0]) {\n            fields = dataSource.data[0];\n            this.fields = Object.keys(fields);\n            this.rows = dataSource.rows ? dataSource.rows : [];\n            this.columns = dataSource.columns ? dataSource.columns : [];\n            this.filters = dataSource.filters ? dataSource.filters : [];\n            this.formats = dataSource.formatSettings ? dataSource.formatSettings : [];\n            this.values = dataSource.values ? dataSource.values : [];\n            this.calculatedFieldSettings = dataSource.calculatedFieldSettings ? dataSource.calculatedFieldSettings : [];\n            this.enableSort = dataSource.enableSorting === undefined ? true : dataSource.enableSorting;\n            this.validateFilters(dataSource);\n            this.isExpandAll = (this.isValueFiltersAvail && dataSource.allowValueFilter) ? true : dataSource.expandAll;\n            this.drilledMembers =\n                dataSource.drilledMembers ? (this.isValueFiltersAvail && dataSource.allowValueFilter) ? [] : dataSource.drilledMembers : [];\n            this.isMutiMeasures = this.values.length > 1 ? true : false;\n            this.valueAxis = dataSource.valueAxis === 'row' ? 1 : 0;\n            this.emptyCellTextContent = dataSource.emptyCellsTextContent ? dataSource.emptyCellsTextContent : '';\n            this.rowValuesLength = this.valueAxis === 1 ? this.values.length : 1;\n            this.colValuesLength = this.valueAxis === 0 ? this.values.length : 1;\n            this.valueSortSettings = dataSource.valueSortSettings ||\n                { sortOrder: 'None', headerDelimiter: '.', headerText: '', columnIndex: undefined };\n            this.valueSortData = [];\n            this.pageSettings = pageSettings ? pageSettings : this.pageSettings;\n            this.savedFieldList = savedFieldList;\n            this.isDrillThrough = isDrillThrough ? isDrillThrough : false;\n            this.getFieldList(fields, this.enableSort, dataSource.allowValueFilter);\n            this.fillFieldMembers(dataSource.data, this.indexMatrix);\n            this.updateSortSettings(dataSource.sortSettings, this.enableSort);\n            this.valueMatrix = this.generateValueMatrix(dataSource.data);\n            this.filterMembers = [];\n            this.updateFilterMembers(dataSource);\n            this.generateGridData(dataSource);\n        }\n    };\n    PivotEngine.prototype.getFormattedFields = function (fields) {\n        var cnt = this.formats.length;\n        while (cnt--) {\n            this.formatFields[this.formats[cnt].name] = this.formats[cnt];\n            // for (let len: number = 0, lnt: number = fields.length; len < lnt; len++) {\n            // if (fields[len] && fields[len].name === this.formats[cnt].name) {\n            //     this.formatFields[fields[len].name] = this.formats[cnt];\n            // }\n            // }\n        }\n    };\n    PivotEngine.prototype.getFieldList = function (fields, isSort, isValueFilteringEnabled) {\n        var type;\n        var keys = this.fields;\n        var dataFields = extend([], this.rows, null, true);\n        dataFields = dataFields.concat(this.columns, this.values, this.filters);\n        this.getFormattedFields(dataFields);\n        this.getCalculatedField(keys);\n        var len = keys.length;\n        if (this.savedFieldList) {\n            this.fieldList = this.savedFieldList;\n            while (len--) { /** while is used for better performance than for */\n                var key = keys[len];\n                if (this.fieldList[key]) {\n                    this.fieldList[key].isSelected = false;\n                    this.fieldList[key].index = len;\n                    this.fieldList[key].filter = [];\n                    this.fieldList[key].isExcelFilter = false;\n                    this.fieldList[key].filterType = '';\n                    if (this.isValueFiltersAvail && isValueFilteringEnabled) {\n                        this.fieldList[key].dateMember = [];\n                        this.fieldList[key].formattedMembers = {};\n                        this.fieldList[key].members = {};\n                    }\n                }\n                else {\n                    this.fieldList[key] = {\n                        id: key,\n                        caption: key,\n                        type: (type === undefined || type === 'undefined') ? 'number' : type,\n                        filterType: '',\n                        index: len,\n                        filter: [],\n                        sort: isSort ? 'Ascending' : 'None',\n                        isSelected: false\n                    };\n                }\n            }\n        }\n        else {\n            while (len--) { /** while is used for better performance than for */\n                var key = keys[len];\n                type = PivotUtil.getType(fields[key]);\n                if (!this.fieldList) {\n                    this.fieldList = {};\n                }\n                this.fieldList[key] = {\n                    id: key,\n                    caption: key,\n                    type: (type === undefined || type === 'undefined') ? 'number' : type,\n                    filterType: '',\n                    index: len,\n                    filter: [],\n                    sort: isSort ? 'Ascending' : 'None',\n                    isSelected: false\n                };\n            }\n        }\n        this.updateTreeViewData(dataFields);\n    };\n    PivotEngine.prototype.updateFieldList = function (savedFieldList) {\n        var keys = this.fields;\n        var len = keys.length;\n        while (len--) { /** while is used for better performance than for */\n            this.fieldList[keys[len]].isExcelFilter = savedFieldList[keys[len]].isExcelFilter;\n        }\n    };\n    PivotEngine.prototype.updateTreeViewData = function (fields) {\n        var cnt = fields.length;\n        var lnt = this.calculatedFieldSettings.length;\n        while (cnt--) {\n            if (this.fieldList[fields[cnt].name]) {\n                var field = this.fieldList[fields[cnt].name];\n                field.caption = fields[cnt].caption ? fields[cnt].caption : fields[cnt].name;\n                field.isSelected = true;\n                field.showNoDataItems = fields[cnt].showNoDataItems;\n                field.aggregateType = fields[cnt].type;\n                field.baseField = fields[cnt].baseField;\n                field.baseItem = fields[cnt].baseItem;\n            }\n        }\n        while (lnt--) {\n            this.fieldList[this.calculatedFieldSettings[lnt].name].aggregateType = 'CalculatedField';\n            this.fieldList[this.calculatedFieldSettings[lnt].name].formula = this.calculatedFieldSettings[lnt].formula;\n        }\n    };\n    PivotEngine.prototype.getCalculatedField = function (keys) {\n        for (var _i = 0, _a = this.calculatedFieldSettings; _i < _a.length; _i++) {\n            var field = _a[_i];\n            this.calculatedFields[field.name] = extend({}, field, null, true);\n            this.calculatedFields[field.name].actualFormula = field.formula;\n        }\n        var fieldKeys = Object.keys(this.calculatedFields);\n        for (var calc = 0, cnt = fieldKeys.length; calc < cnt; calc++) {\n            var field = this.calculatedFields[fieldKeys[calc]];\n            var calcProperties = field.properties;\n            var actualFormula = (calcProperties ? calcProperties.formula : field.formula).replace(/ +/g, '');\n            var formula = actualFormula.replace(/\"/g, '');\n            field.formula = formula.indexOf('^') > -1 ? this.powerFunction(formula) : formula;\n            field.name = calcProperties ? calcProperties.name : field.name;\n            keys.push(field.name);\n            var formulaType = actualFormula.split('\\\"');\n            for (var len = 0, lmt = formulaType.length; len < lmt; len++) {\n                var type = formulaType[len];\n                var aggregateValue = type.split(/[ .:;?!~,`\"&|()<>{}\\[\\]\\r\\n/\\\\]+/);\n                var selectedString = (aggregateValue[0] === 'DistinctCount' ?\n                    'DistinctCount' : aggregateValue[0] === 'PopulationStDev' ?\n                    'PopulationStDev' : aggregateValue[0] === 'SampleStDev' ? 'SampleStDev' : aggregateValue[0] === 'PopulationVar' ?\n                    'PopulationVar' : aggregateValue[0] === 'SampleVar' ? 'SampleVar' : aggregateValue[0]);\n                if (['Sum', 'Count', 'Min', 'Max', 'Avg', 'Product', 'DistinctCount',\n                    'PopulationStDev', 'SampleStDev', 'PopulationVar', 'SampleVar'].indexOf(selectedString) !== -1) {\n                    var index = keys.indexOf(aggregateValue[1]);\n                    if (!this.calculatedFormulas[field.name]) {\n                        this.calculatedFormulas[field.name] = [{\n                                index: index,\n                                type: selectedString,\n                                formula: type,\n                            }];\n                    }\n                    else {\n                        this.calculatedFormulas[field.name].push({\n                            index: index,\n                            type: selectedString,\n                            formula: type,\n                        });\n                    }\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.validateFilters = function (data) {\n        this.isValueFiltersAvail = false;\n        var filterElements = data.filterSettings ? data.filterSettings : [];\n        var dataFields = extend([], this.rows, null, true);\n        dataFields = dataFields.concat(this.columns);\n        for (var _i = 0, filterElements_1 = filterElements; _i < filterElements_1.length; _i++) {\n            var filter = filterElements_1[_i];\n            for (var _a = 0, dataFields_1 = dataFields; _a < dataFields_1.length; _a++) {\n                var field = dataFields_1[_a];\n                if (filter.name === field.name && filter.type === 'Value') {\n                    this.isValueFiltersAvail = true;\n                    break;\n                }\n            }\n            if (this.isValueFiltersAvail) {\n                break;\n            }\n        }\n    };\n    PivotEngine.prototype.fillFieldMembers = function (data, indMat) {\n        var keys = this.fields;\n        var dlen = data.length;\n        var fList = this.fieldList;\n        var kLn = keys.length;\n        for (var kl = 0; kl < kLn; kl++) {\n            var key = keys[kl];\n            if (!fList[key].members) {\n                fList[key].members = {};\n            }\n            if (!fList[key].formattedMembers) {\n                fList[key].formattedMembers = {};\n            }\n            if (!fList[key].dateMember) {\n                fList[key].dateMember = [];\n            }\n            var members = fList[key].members;\n            var isDataAvail = Object.keys(members).length > 0 ? true : false;\n            var formattedMembers = fList[key].formattedMembers;\n            var dateMember = fList[key].dateMember;\n            var membersCnt = 0;\n            var fmembersCnt = 0;\n            //let sort: string[] = [];\n            for (var dl = 0; dl < dlen; dl++) {\n                var mkey = data[dl][key];\n                if (!isNullOrUndefined(mkey)) {\n                    if (!isDataAvail) {\n                        var fKey = mkey;\n                        var formattedValue = (this.pageSettings &&\n                            !(this.formatFields[key] && this.formatFields[key].type === 'date')) ? ({\n                            formattedText: isNullOrUndefined(mkey) ? mkey : mkey.toString(),\n                            actualText: mkey\n                        }) : this.getFormattedValue(mkey, key);\n                        if (formattedValue.formattedText) {\n                            fKey = formattedValue.formattedText;\n                        }\n                        if (!members.hasOwnProperty(mkey)) {\n                            membersCnt++;\n                            members[mkey] = {\n                                index: [dl], ordinal: membersCnt,\n                                isDrilled: this.isExpandAll ? true : false\n                            };\n                            dateMember.push({ formattedText: formattedValue.formattedText, actualText: formattedValue.actualText });\n                            //sort.push(mkey);\n                        }\n                        else {\n                            members[mkey].index.push(dl);\n                        }\n                        if (!formattedMembers.hasOwnProperty(fKey)) {\n                            fmembersCnt++;\n                            formattedMembers[fKey] = {\n                                index: [dl], ordinal: fmembersCnt,\n                                isDrilled: this.isExpandAll ? true : false\n                            };\n                        }\n                        else {\n                            formattedMembers[fKey].index.push(dl);\n                        }\n                    }\n                    if (!(indMat[dl])) {\n                        indMat[dl] = [];\n                        indMat[dl][kl] = members[mkey].ordinal;\n                    }\n                    else {\n                        indMat[dl][kl] = members[mkey].ordinal;\n                    }\n                }\n            }\n            /*sort = Object.keys(members).sort();\n            let sortedMembers: Members = {};\n            for (let sln: number = 0, slt: number = sort.length; sln < slt; sln++) {\n                sortedMembers[sort[sln]] = members[sort[sln]];\n            }\n            fList[key].members = sortedMembers; */\n        }\n        this.fillDrilledInfo();\n    };\n    PivotEngine.prototype.fillDrilledInfo = function () {\n        for (var key = 0; key < this.drilledMembers.length; key++) {\n            var fieldName = this.drilledMembers[key].name;\n            for (var mem = 0; mem < this.drilledMembers[key].items.length; mem++) {\n                var memberName = this.drilledMembers[key].items[mem];\n                var field = this.fieldList[fieldName];\n                if (field && field.members[memberName]) {\n                    field.members[memberName].isDrilled = this.isExpandAll ? false : true;\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.generateValueMatrix = function (data) {\n        var keys = this.fields;\n        var len = data.length;\n        var vMat = [];\n        var keyLen = keys.length;\n        var flList = this.fieldList;\n        while (len--) {\n            var record = data[len];\n            var tkln = keyLen;\n            //if (isNullOrUndefined(vMat[len])) {\n            vMat[len] = [];\n            //}\n            while (tkln--) {\n                var key = keys[tkln];\n                vMat[len][tkln] = (flList[key].type === 'number') ? data[len][key] : 1;\n            }\n        }\n        return vMat;\n    };\n    PivotEngine.prototype.updateSortSettings = function (sortSettings, isSort) {\n        for (var sln = 0, slt = sortSettings ? sortSettings.length : 0; sln < slt && isSort; sln++) {\n            this.fieldList[sortSettings[sln].name].sort = sortSettings[sln].order;\n        }\n    };\n    PivotEngine.prototype.updateFilterMembers = function (source) {\n        var filterRw = this.filterMembers;\n        var list = {};\n        //let eList: {[key: string] : number} = {};\n        var isInclude = this.getFilters(source, list);\n        //this.getFilterExcludeList(source.rows, flist);\n        //this.getFilterExcludeList(source.columns, flist);\n        //this.getFilterExcludeList(source.filters, flist);\n        // let filters: Iterator = isInclude ? iList : eList;\n        var dln = this.indexMatrix.length;\n        if (isInclude) {\n            var keys = list.include.index;\n            for (var ln = 0; ln < keys.length; ln++) {\n                if (list.exclude === undefined || list.exclude.indexObject[keys[ln]] === undefined) {\n                    filterRw.push(keys[ln]);\n                }\n            }\n        }\n        else {\n            for (var ln = 0; ln < dln; ln++) {\n                if (list.exclude === undefined || list.exclude.indexObject[ln] === undefined) {\n                    filterRw.push(ln);\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.getFilters = function (source, ilist) {\n        var filterElements = source.filterSettings ? source.filterSettings : [];\n        var filters = this.filters;\n        var isInclude = false;\n        var filter = [];\n        //let type: string;\n        for (var rln = 0, rlt = filterElements.length; rln < rlt; rln++) {\n            var filterElement = filterElements[rln].properties ?\n                filterElements[rln].properties : filterElements[rln];\n            if (this.fieldList[filterElement.name].isSelected && this.isValidFilterField(filterElement, source.allowLabelFilter)) {\n                this.applyLabelFilter(filterElement);\n                filter = filterElement ? filterElement.items : [];\n                if (filterElement.type && filterElement.type === 'Include') {\n                    /* tslint:disable-next-line:max-line-length */\n                    this.frameFilterList(filter, filterElement.name, ilist, 'include', filterElement.showLabelFilter, isInclude);\n                    isInclude = true;\n                }\n                else {\n                    this.frameFilterList(filter, filterElement.name, ilist, 'exclude', filterElement.showLabelFilter);\n                }\n                if (filterElement.showLabelFilter) {\n                    filterElement.items = [];\n                    filterElement.type = filterElement.showDateFilter ? 'Date' : filterElement.showNumberFilter ? 'Number' : 'Label';\n                }\n            }\n        }\n        /* for (let cln: number = 0, clt: number = cols.length; cln < clt; cln ++) {\n             filter = cols[cln].filter ? cols[cln].filter.items : [];\n             if (filter.length && cols[cln].filter.type && cols[cln].filter.type === 'include') {\n                 //type = cols[cln].filter.type;\n                 this.frameFilterList(filter, cols[cln].name, ilist, 'include', isInclude);\n                 isInclude = true;\n             } else {\n                 this.frameFilterList(filter, cols[cln].name, ilist, 'exclude');\n             }\n         }\n         for (let vln: number = 0, vlt: number = filters.length; vln < vlt; vln ++) {\n             filter = filters[vln].filter ? filters[vln].filter.items : [];\n             if (filter.length && filters[vln].filter.type && filters[vln].filter.type === 'include') {\n                 this.frameFilterList(filter, filters[vln].name, ilist, 'include', isInclude);\n                 isInclude = true;\n             } else {\n                 this.frameFilterList(filter, filters[vln].name, ilist, 'exclude');\n             }\n         } */\n        return isInclude;\n    };\n    PivotEngine.prototype.isValidFilterField = function (filterElement, allowLabelFiltering) {\n        var isValidFilterElement = false;\n        var filterTypes = ['Include', 'Exclude'];\n        var dataFields = extend([], this.rows, null, true);\n        dataFields = dataFields.concat(this.columns);\n        if (this.fieldList[filterElement.name].isSelected && filterTypes.indexOf(filterElement.type) >= 0) {\n            var isNotValidFilterElement = false;\n            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\n                var field = _a[_i];\n                if (filterElement.name === field.name) {\n                    isNotValidFilterElement = true;\n                    break;\n                }\n            }\n            if (!isNotValidFilterElement) {\n                isValidFilterElement = true;\n            }\n        }\n        else {\n            for (var _b = 0, dataFields_2 = dataFields; _b < dataFields_2.length; _b++) {\n                var field = dataFields_2[_b];\n                if (filterElement.name === field.name && allowLabelFiltering &&\n                    (['Label', 'Date', 'Number'].indexOf(filterElement.type) >= 0)) {\n                    isValidFilterElement = true;\n                    break;\n                }\n            }\n        }\n        return isValidFilterElement;\n    };\n    PivotEngine.prototype.applyLabelFilter = function (filterElement) {\n        if (['Label', 'Date', 'Number'].indexOf(filterElement.type) >= 0) {\n            var members = Object.keys(this.fieldList[filterElement.name].members);\n            filterElement.showLabelFilter = true;\n            if (filterElement.type === 'Label') {\n                /* tslint:disable-next-line:max-line-length */\n                filterElement.items = this.getLabelFilterMembers(members, filterElement.condition, filterElement.value1, filterElement.value2);\n            }\n            else if (filterElement.type === 'Date') {\n                filterElement.showDateFilter = true;\n                /* tslint:disable-next-line:max-line-length */\n                filterElement.items = this.getDateFilterMembers(members, filterElement.name, filterElement.condition, filterElement.value1, filterElement.value2);\n            }\n            else {\n                filterElement.showNumberFilter = true;\n                filterElement.items = [];\n                for (var _i = 0, members_1 = members; _i < members_1.length; _i++) {\n                    var member = members_1[_i];\n                    var operand1 = this.getParsedValue(filterElement.name, filterElement.value1);\n                    var operand2 = this.getParsedValue(filterElement.name, filterElement.value2);\n                    var cValue = this.getParsedValue(filterElement.name, member);\n                    /* tslint:disable-next-line:max-line-length */\n                    if (this.validateFilterValue(cValue, filterElement.condition, operand1, operand2)) {\n                        filterElement.items.push(member);\n                    }\n                }\n            }\n            var excludeOperators = ['DoesNotBeginWith', 'DoesNotContains', 'DoesNotEndsWith', 'DoesNotEquals', 'NotBetween'];\n            filterElement.type = (excludeOperators.indexOf(filterElement.condition) > -1 &&\n                !filterElement.showNumberFilter) ? 'Exclude' : 'Include';\n        }\n        else {\n            filterElement.showLabelFilter = false;\n        }\n    };\n    PivotEngine.prototype.getLabelFilterMembers = function (members, operator, value1, value2) {\n        var items = [];\n        for (var _i = 0, members_2 = members; _i < members_2.length; _i++) {\n            var member = members_2[_i];\n            var filterValue = member.toLowerCase();\n            if (value1.toString()) {\n                switch (operator) {\n                    case 'Equals':\n                    case 'DoesNotEquals':\n                        if (filterValue === value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'BeginWith':\n                    case 'DoesNotBeginWith':\n                        if (filterValue.indexOf(value1.toLowerCase()) === 0) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'EndsWith':\n                    case 'DoesNotEndsWith':\n                        if (filterValue.match(value1.toLowerCase() + '$') !== null) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'Contains':\n                    case 'DoesNotContains':\n                        if (filterValue.indexOf(value1.toLowerCase()) > -1) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'GreaterThan':\n                        if (filterValue > value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'GreaterThanOrEqualTo':\n                        if (filterValue >= value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'LessThan':\n                        if (filterValue < value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'LessThanOrEqualTo':\n                        if (filterValue <= value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'Between':\n                    case 'NotBetween':\n                        if ((filterValue >= value1.toLowerCase()) && (filterValue <= value2.toLowerCase())) {\n                            items.push(member);\n                        }\n                        break;\n                }\n            }\n        }\n        return items;\n    };\n    PivotEngine.prototype.getDateFilterMembers = function (members, name, operator, value1, value2) {\n        var items = [];\n        for (var _i = 0, members_3 = members; _i < members_3.length; _i++) {\n            var member = members_3[_i];\n            var filterValue = new Date(member);\n            if (value1) {\n                switch (operator) {\n                    case 'Equals':\n                    case 'DoesNotEquals':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() === (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'After':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() > (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'AfterOrEqualTo':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() >= (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'Before':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() < (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'BeforeOrEqualTo':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() <= (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'Between':\n                    case 'NotBetween':\n                        if (((PivotUtil.resetTime(filterValue)).getTime() >= (PivotUtil.resetTime(value1)).getTime()) &&\n                            ((PivotUtil.resetTime(filterValue)).getTime() <= (PivotUtil.resetTime(value2)).getTime())) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                }\n            }\n        }\n        return items;\n    };\n    PivotEngine.prototype.validateFilterValue = function (val, operator, value1, value2) {\n        var isMemberInclude = false;\n        if (typeof (value1) === 'number') {\n            switch (operator) {\n                case 'Equals':\n                    if (val === value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'DoesNotEquals':\n                    if (val !== value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'GreaterThan':\n                    if (val > value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'GreaterThanOrEqualTo':\n                    if (val >= value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'LessThan':\n                    if (val < value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'LessThanOrEqualTo':\n                    if (val <= value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'Between':\n                    if ((val >= value1) && (val <= value2)) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'NotBetween':\n                    if (!((val >= value1) && (val <= value2))) {\n                        isMemberInclude = true;\n                    }\n                    break;\n            }\n        }\n        return isMemberInclude;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.frameFilterList = function (filter, name, list, type, isLabelFilter, isInclude) {\n        if (!list[type]) {\n            list[type] = { indexObject: {}, index: [] };\n            this.updateFilter(filter, name, list, type, isLabelFilter, isInclude);\n        }\n        else {\n            this.updateFilter(filter, name, list, type, isLabelFilter, isInclude);\n        }\n        // }\n    };\n    PivotEngine.prototype.updateFilter = function (filter, name, list, type, isLabelFilter, isInclude) {\n        var fln = 0;\n        var field = this.fieldList[name];\n        field.filter = filter;\n        field.filterType = type;\n        field.isExcelFilter = isLabelFilter;\n        var members = (this.formatFields[name] && this.formatFields[name].type === 'date') ?\n            field.formattedMembers : field.members;\n        var allowFil = isInclude;\n        var final = {};\n        var filterObj = {};\n        final[type] = { indexObject: {}, index: [] };\n        this.fieldFilterMem[name] = { memberObj: {} };\n        while (filter[fln]) {\n            var indx = members[filter[fln]].index;\n            if (type === 'include') {\n                for (var iln = 0, ilt = indx.length; iln < ilt; iln++) {\n                    if (!allowFil || list[type].indexObject[indx[iln]] !== undefined) {\n                        final[type].indexObject[indx[iln]] = indx[iln];\n                        final[type].index.push(indx[iln]);\n                    }\n                }\n            }\n            else {\n                for (var iln = 0, ilt = indx.length; iln < ilt; iln++) {\n                    if (list[type].indexObject[indx[iln]] === undefined) {\n                        list[type].indexObject[indx[iln]] = indx[iln];\n                        list[type].index.push(indx[iln]);\n                    }\n                }\n                this.fieldFilterMem[name].memberObj[filter[fln]] = filter[fln];\n            }\n            fln++;\n        }\n        if (type === 'include') {\n            list[type] = final[type];\n            for (var iln = 0; iln < filter.length; iln++) {\n                filterObj[filter[iln]] = filter[iln];\n            }\n            var items = Object.keys(members);\n            for (var iln = 0, ilt = items.length; iln < ilt; iln++) {\n                if (filterObj[items[iln]] === undefined) {\n                    this.fieldFilterMem[name].memberObj[items[iln]] = items[iln];\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.applyValueFiltering = function (rowData, level, rows, columns, valueFilter, rowFilterData, type) {\n        this.isValueFiltered = false;\n        var allMember = extend({}, rows[rows.length - 1], null, true);\n        this.getFilteredData(rows, columns, valueFilter, rowFilterData, level, rowData.name, allMember, type);\n        if (this.isValueFiltered) {\n            rowFilterData.push(allMember);\n            rows = rowFilterData;\n        }\n        return rows;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getFilteredData = function (rows, columns, filterSettings, rowFilterData, level, fieldName, allMember, type) {\n        var rLen = rows.length;\n        for (var i = 0; i < rLen; i++) {\n            if (filterSettings[fieldName]) {\n                if (rows[i].level === level) {\n                    this.isValueFiltered = true;\n                    this.fieldList[fieldName].isExcelFilter = true;\n                    var value = 0;\n                    var measure = filterSettings[fieldName].measure;\n                    var mPos = this.fieldList[measure].index;\n                    var aggregate = this.fieldList[measure].aggregateType;\n                    value = (type === 'row' ? this.getAggregateValue(rows[i].index, columns.indexObject, mPos, aggregate) :\n                        this.getAggregateValue(columns.index, rows[i].indexObject, mPos, aggregate));\n                    var operand1 = this.getParsedValue(measure, filterSettings[fieldName].value1);\n                    var operand2 = this.getParsedValue(measure, filterSettings[fieldName].value2);\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!this.validateFilterValue(value, filterSettings[fieldName].condition, operand1, operand2) && rows[i].type !== 'grand sum') {\n                        var data = this.removefilteredData(rows[i], this.valueFilteredData);\n                        var row = data ? data : rows[i];\n                        this.validateFilteredParentData(row, this.valueFilteredData, allMember, 0, level, type);\n                    }\n                    else if (rows[i].type !== 'grand sum') {\n                        rowFilterData.push(extend({}, rows[i], null, true));\n                        rowFilterData[rowFilterData.length - 1].isLevelFiltered = true;\n                    }\n                }\n                else if (rows[i].hasChild && rows[i].members.length > 0 && rows[i].type !== 'grand sum') {\n                    rowFilterData.push(extend({}, rows[i], null, true));\n                    rowFilterData[rowFilterData.length - 1].members = [];\n                    rowFilterData[rowFilterData.length - 1].isLevelFiltered = true;\n                    /* tslint:disable-next-line:max-line-length */\n                    this.getFilteredData(rows[i].members, columns, filterSettings, rowFilterData[rowFilterData.length - 1].members, level, fieldName, allMember, type);\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.getParsedValue = function (measure, value) {\n        var cValue = value ? value.toString() : '';\n        if (this.formatFields[measure] && value) {\n            var formatSetting = extend({}, this.formatFields[measure], null, true);\n            delete formatSetting.name;\n            return this.globalize.parseNumber(cValue, formatSetting);\n        }\n        else {\n            return this.globalize.parseNumber(cValue, { format: 'N' });\n        }\n    };\n    PivotEngine.prototype.removefilteredData = function (row, rowFilterData) {\n        var rows = extend([], rowFilterData, null, true);\n        var filteredData;\n        for (var i = 0; i < rows.length; i++) {\n            if (row.isLevelFiltered && row.axis === rows[i].axis &&\n                row.valueSort.levelName === rows[i].valueSort.levelName &&\n                row.actualText === rows[i].actualText && row.axis === rows[i].axis &&\n                row.level === rows[i].level && row.ordinal === rows[i].ordinal) {\n                filteredData = rows[i];\n                rowFilterData.splice(i, 1);\n                break;\n            }\n            else if (rowFilterData[i].hasChild && rowFilterData[i].members.length > 0) {\n                this.removefilteredData(row, rowFilterData[i].members);\n            }\n        }\n        return filteredData;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.validateFilteredParentData = function (row, rows, allMemberData, i, level, type) {\n        if (rows.length > 0) {\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var rowFilteredData = rows_1[_i];\n                if (rowFilteredData.level === i) {\n                    if (type === 'row') {\n                        var index = row.index;\n                        for (var _a = 0, index_1 = index; _a < index_1.length; _a++) {\n                            var key = index_1[_a];\n                            if (allMemberData.index.indexOf(key) >= 0) {\n                                allMemberData.index.splice(allMemberData.index.indexOf(key), 1);\n                            }\n                            if (((row.valueSort.levelName.toString()).indexOf(rowFilteredData.valueSort.levelName.toString()) >= 0) &&\n                                rowFilteredData.level !== level && rowFilteredData.index.indexOf(key) >= 0) {\n                                rowFilteredData.index.splice(rowFilteredData.index.indexOf(key), 1);\n                            }\n                        }\n                    }\n                    else {\n                        var index = row.indexObject;\n                        for (var _b = 0, _c = Object.keys(index); _b < _c.length; _b++) {\n                            var key = _c[_b];\n                            if (index.hasOwnProperty(key)) {\n                                delete allMemberData.indexObject[key];\n                                if (((row.valueSort.levelName.toString()).indexOf(rowFilteredData.valueSort.levelName.toString()) >= 0) &&\n                                    rowFilteredData.level !== level) {\n                                    delete rowFilteredData.indexObject[key];\n                                }\n                            }\n                        }\n                    }\n                    if (rowFilteredData && rowFilteredData.members.length > 0 &&\n                        rowFilteredData.members[0].level === i + 1 && rowFilteredData.members[0].level !== level) {\n                        this.validateFilteredParentData(row, rowFilteredData.members, allMemberData, i + 1, level, type);\n                    }\n                }\n            }\n        }\n        else {\n            if (type === 'row') {\n                var index = row.index;\n                for (var _d = 0, index_2 = index; _d < index_2.length; _d++) {\n                    var key = index_2[_d];\n                    if (allMemberData.index.indexOf(key) >= 0) {\n                        allMemberData.index.splice(allMemberData.index.indexOf(key), 1);\n                    }\n                }\n            }\n            else {\n                var index = row.indexObject;\n                for (var _e = 0, _f = Object.keys(index); _e < _f.length; _e++) {\n                    var key = _f[_e];\n                    if (index.hasOwnProperty(key)) {\n                        delete allMemberData.indexObject[key];\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.updateFramedHeaders = function (framedHeaders, dataHeaders, filteredHeaders, headers, type) {\n        for (var _i = 0, framedHeaders_1 = framedHeaders; _i < framedHeaders_1.length; _i++) {\n            var dHeader = framedHeaders_1[_i];\n            this.isHeaderAvail = false;\n            if (this.validateFilteredHeaders(dHeader, filteredHeaders, type) || dHeader.type === 'grand sum') {\n                if (type === 'row') {\n                    this.rowCount += this.rowValuesLength;\n                }\n                else {\n                    this.columnCount += this.colValuesLength;\n                }\n                headers.push(extend({}, dHeader, null, true));\n                headers[headers.length - 1].members = [];\n                if (dHeader.hasChild && dHeader.isDrilled && dHeader.members.length > 0) {\n                    this.updateFramedHeaders(dHeader.members, dataHeaders, filteredHeaders, headers[headers.length - 1].members, type);\n                }\n            }\n        }\n        return this.filterFramedHeaders;\n    };\n    PivotEngine.prototype.validateFilteredHeaders = function (dHeader, filteredHeaders, type) {\n        for (var _i = 0, filteredHeaders_1 = filteredHeaders; _i < filteredHeaders_1.length; _i++) {\n            var vHeader = filteredHeaders_1[_i];\n            if (!this.isHeaderAvail) {\n                if (dHeader.actualText === vHeader.actualText &&\n                    dHeader.level === vHeader.level &&\n                    dHeader.valueSort.levelName === vHeader.valueSort.levelName) {\n                    if (type === 'row') {\n                        if (vHeader.index.length > 0) {\n                            this.isHeaderAvail = true;\n                            dHeader.index = vHeader.index;\n                            return true;\n                        }\n                        else {\n                            this.isHeaderAvail = false;\n                            dHeader.index = vHeader.index;\n                            return false;\n                        }\n                    }\n                    else {\n                        if (Object.keys(vHeader.indexObject).length > 0) {\n                            this.isHeaderAvail = true;\n                            dHeader.indexObject = vHeader.indexObject;\n                            return true;\n                        }\n                        else {\n                            this.isHeaderAvail = false;\n                            dHeader.indexObject = vHeader.indexObject;\n                            return false;\n                        }\n                    }\n                }\n                else if (vHeader.hasChild && vHeader.members.length > 0 && vHeader.type !== 'grand sum') {\n                    this.validateFilteredHeaders(dHeader, vHeader.members, type);\n                }\n            }\n        }\n        return this.isHeaderAvail;\n    };\n    PivotEngine.prototype.isEmptyDataAvail = function (rowHeaders, columnHeaders) {\n        this.isEmptyData = false;\n        if (rowHeaders.length > 0 && rowHeaders[rowHeaders.length - 1].type === 'grand sum' &&\n            rowHeaders[rowHeaders.length - 1].index.length === 0) {\n            this.isEmptyData = true;\n        }\n        if (columnHeaders.length > 0 && columnHeaders[columnHeaders.length - 1].type === 'grand sum' &&\n            Object.keys(columnHeaders[columnHeaders.length - 1].indexObject).length === 0) {\n            this.isEmptyData = true;\n        }\n    };\n    /** @hidden */\n    PivotEngine.prototype.updateGridData = function (dataSource) {\n        this.indexMatrix = [];\n        for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {\n            var field = _a[_i];\n            this.fieldList[field].members = {};\n            this.fieldList[field].formattedMembers = {};\n            this.fieldList[field].dateMember = [];\n        }\n        this.fillFieldMembers(dataSource.data, this.indexMatrix);\n        this.valueMatrix = this.generateValueMatrix(dataSource.data);\n        this.filterMembers = [];\n        this.cMembers = [];\n        this.rMembers = [];\n        this.updateFilterMembers(dataSource);\n        this.isEditing = true;\n        this.isDrillThrough = true;\n        this.generateGridData(dataSource);\n        this.isEditing = false;\n    };\n    /* tslint:disable */\n    PivotEngine.prototype.generateGridData = function (dataSource, headerCollection) {\n        var keys = this.fields;\n        var columns = dataSource.columns ? dataSource.columns : [];\n        var data = dataSource.data;\n        var rows = dataSource.rows ? dataSource.rows : [];\n        var filterSettings = dataSource.filterSettings;\n        var values = dataSource.values ? dataSource.values : [];\n        var size = 1;\n        this.removeCount = 0;\n        this.isExpandAll = dataSource.expandAll;\n        this.drilledMembers = dataSource.drilledMembers ? dataSource.drilledMembers : [];\n        this.isEmptyData = false;\n        var filterMembers = [];\n        var showNoDataItems = (rows[0] && rows[0].showNoDataItems) || (columns[0] && columns[0].showNoDataItems);\n        if (showNoDataItems) {\n            for (var ln = 0; ln < this.indexMatrix.length; ln++) {\n                filterMembers.push(ln);\n            }\n        }\n        for (var ln = 0; ln < this.filterMembers.length; ln++) {\n            this.filterPosObj[this.filterMembers[ln]] = this.filterMembers[ln];\n        }\n        //let childrens: Field = this.fieldList[rows[0].name + ''];\n        this.valueSortSettings.columnIndex = undefined;\n        var st1 = new Date().getTime();\n        if (!this.isValueFilterEnabled || this.isEditing) {\n            if (!headerCollection || this.enableValueSorting) {\n                this.columnCount = 0;\n                this.rowCount = 0;\n                this.cMembers = [];\n                this.rMembers = [];\n                if (rows.length !== 0) {\n                    this.rMembers =\n                        this.getIndexedHeaders(rows, data, 0, rows[0].showNoDataItems ? filterMembers : this.filterMembers, 'row', '');\n                }\n                if (columns.length !== 0) {\n                    this.cMembers = this.getIndexedHeaders(columns, data, 0, columns[0].showNoDataItems ?\n                        filterMembers : this.filterMembers, 'column', '');\n                }\n                this.insertAllMembersCommon();\n            }\n            this.saveDataHeaders = (this.isValueFiltersAvail && dataSource.allowValueFilter) ? {\n                rowHeaders: extend([], this.rMembers, null, true),\n                columnHeaders: extend([], this.cMembers, null, true)\n            } : {};\n        }\n        this.pivotValues = [];\n        var gridData = [];\n        this.headerContent = [];\n        this.valueContent = [];\n        this.valueFilteredData = [];\n        this.filterFramedHeaders = [];\n        var rowheads = [];\n        var colheads = [];\n        var rowFilteredData = [];\n        var columnFilteredData = [];\n        var valuesCount = (this.values.length);\n        if ((this.isValueFiltersAvail && dataSource.allowValueFilter)) {\n            this.valueFilteredData = [];\n            var rowHeaders = this.saveDataHeaders.rowHeaders;\n            var columnHeaders = this.saveDataHeaders.columnHeaders;\n            if (filterSettings.length > 0) {\n                var valueFilters = {};\n                var valueFields = {};\n                for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                    var value = values_1[_i];\n                    valueFields[value.name] = value;\n                }\n                for (var _a = 0, filterSettings_1 = filterSettings; _a < filterSettings_1.length; _a++) {\n                    var filter = filterSettings_1[_a];\n                    rowHeaders = (rowFilteredData.length > 0 ? rowFilteredData : rowHeaders);\n                    columnHeaders = (columnFilteredData.length > 0 ? columnFilteredData : columnHeaders);\n                    this.valueFilteredData = [];\n                    var filterElement = filter.properties ?\n                        filter.properties : filter;\n                    if (filterElement.type === 'Value' && this.fieldList[filter.name].isSelected) {\n                        valueFilters[filter.name] = filter;\n                        filterElement.items = [];\n                        var isAvail = false;\n                        var rLen = rows.length;\n                        var cLen = columns.length;\n                        for (var i = 0; i < rLen; i++) {\n                            if (filterElement.name === rows[i].name && valueFields[filterElement.measure] && !isAvail) {\n                                isAvail = true;\n                                /* tslint:disable-next-line:max-line-length */\n                                rowFilteredData = this.applyValueFiltering(rows[i], i, rowHeaders, columnHeaders[columnHeaders.length - 1], valueFilters, this.valueFilteredData, 'row');\n                                break;\n                            }\n                        }\n                        for (var j = 0; j < cLen; j++) {\n                            if (filterElement.name === columns[j].name && valueFields[filterElement.measure] && !isAvail) {\n                                isAvail = true;\n                                /* tslint:disable-next-line:max-line-length */\n                                columnFilteredData = this.applyValueFiltering(columns[j], j, columnHeaders, rowHeaders[rowHeaders.length - 1], valueFilters, this.valueFilteredData, 'column');\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n            rowFilteredData = (rowFilteredData.length > 0 ? rowFilteredData : rowHeaders);\n            columnFilteredData = (columnFilteredData.length > 0 ? columnFilteredData : columnHeaders);\n            this.isEmptyDataAvail(rowFilteredData, columnFilteredData);\n            var savedFieldList = extend({}, this.fieldList, null, true);\n            this.indexMatrix = [];\n            var fields = dataSource.data[0];\n            this.getFieldList(fields, this.enableSort, dataSource.allowValueFilter);\n            this.fillFieldMembers(dataSource.data, this.indexMatrix);\n            this.updateSortSettings(dataSource.sortSettings, this.enableSort);\n            this.valueMatrix = this.generateValueMatrix(dataSource.data);\n            this.filterMembers = [];\n            var pageSize = 1;\n            this.updateFilterMembers(dataSource);\n            this.rMembers = rows.length !== 0 ?\n                this.getIndexedHeaders(rows, data, 0, rows[0].showNoDataItems ?\n                    filterMembers : this.filterMembers, 'row', '') : this.rMembers;\n            this.cMembers = columns.length !== 0 ?\n                this.getIndexedHeaders(columns, data, 0, columns[0].showNoDataItems ?\n                    filterMembers : this.filterMembers, 'column', '') : this.cMembers;\n            this.insertAllMembersCommon();\n            this.updateFieldList(savedFieldList);\n            this.rowCount = 0;\n            this.columnCount = 0;\n            this.rMembers = this.updateFramedHeaders(this.rMembers, this.rMembers, rowFilteredData, this.filterFramedHeaders, 'row');\n            this.filterFramedHeaders = [];\n            this.cMembers = this.updateFramedHeaders(this.cMembers, this.cMembers, columnFilteredData, this.filterFramedHeaders, 'column');\n            this.isValueFilterEnabled = true;\n        }\n        this.applyValueSorting();\n        if (this.pageSettings) {\n            if (!headerCollection || this.enableValueSorting) {\n                this.headerCollection.rowHeaders = extend([], this.rMembers, null, true);\n                this.headerCollection.columnHeaders = extend([], this.cMembers, null, true);\n                this.headerCollection.rowHeadersCount = this.rowCount;\n                this.headerCollection.columnHeadersCount = this.columnCount;\n            }\n            else {\n                this.rMembers = headerCollection.rowHeaders;\n                this.cMembers = headerCollection.columnHeaders;\n                this.rowCount = headerCollection.rowHeadersCount;\n                this.columnCount = headerCollection.columnHeadersCount;\n                if (this.columns.length > 1 || this.rows.length > 1 || this.allowValueFilter) {\n                    this.headerCollection = extend({}, headerCollection, null, true);\n                }\n            }\n            this.calculatePagingValues();\n            if (!this.enableValueSorting || !this.allowValueFilter) {\n                if (rows.length > 0) {\n                    this.insertPosition(rows, data, 0, this.filterMembers, 'row', '', this.rMembers);\n                }\n                if (columns.length > 0) {\n                    this.insertPosition(columns, data, 0, this.filterMembers, 'column', '', this.cMembers);\n                }\n                this.rMembers = this.insertTotalPosition(this.rMembers);\n                this.cMembers = this.insertTotalPosition(this.cMembers);\n            }\n        }\n        this.getAggregatedHeaders(rows, columns, this.rMembers, this.cMembers, values);\n        this.getHeaderData(this.cMembers, colheads, this.pivotValues, 0, this.valueAxis ? 1 : valuesCount);\n        if (this.removeCount !== 0 && this.values.length > 0) {\n            this.columnCount = this.columnCount - (this.removeCount * (this.valueAxis === 0 ? this.values.length : 1));\n        }\n        if ((!this.showGrandTotals || !this.showColumnGrandTotals) && this.columns.length > 0) {\n            this.columnCount = this.columnCount - (1 * (this.valueAxis === 0 ? this.values.length : 1));\n        }\n        this.insertSubTotals();\n        //this.getHeaderData(rmembers, rowheads, gridData, 0);              \n        /* tslint:disable-next-line:max-line-length */\n        this.getTableData(this.rMembers, rowheads, colheads, 0, this.pivotValues, valuesCount, this.rMembers[this.rMembers.length - 1], this.cMembers[this.cMembers.length - 1]);\n        this.applyAdvancedAggregate(rowheads, colheads, this.pivotValues);\n        if (this.pageSettings) {\n            this.removeIndexProperties();\n        }\n        this.isEngineUpdated = true;\n        var st2 = new Date().getTime();\n        //  console.log(st1 - st2);\n    };\n    /* tslint:enable */\n    PivotEngine.prototype.applyValueSorting = function () {\n        if (this.valueSortSettings.headerText && this.valueSortSettings.headerText !== '' && this.values.length > 0) {\n            var textArray = this.valueSortSettings.headerText.split(this.valueSortSettings.headerDelimiter);\n            var hText = '';\n            var mIndex = void 0;\n            var mType = void 0;\n            var caption = void 0;\n            for (var i = 0; i < this.values.length; i++) {\n                if (this.values[i].caption === textArray[textArray.length - 1]) {\n                    caption = this.values[i].name;\n                    break;\n                }\n                else {\n                    caption = textArray[textArray.length - 1];\n                }\n            }\n            if (this.values.length > 1 && caption && this.fieldList[caption]) {\n                for (var i = 0; i < textArray.length - 1; i++) {\n                    hText = hText === '' ? textArray[i] : (hText + this.valueSortSettings.headerDelimiter + textArray[i]);\n                }\n                mIndex = this.fieldList[caption].index;\n                mType = this.fieldList[caption].aggregateType;\n            }\n            else {\n                if (!this.alwaysShowValueHeader || textArray.length === 1) {\n                    hText = this.valueSortSettings.headerText;\n                }\n                else {\n                    for (var i = 0; i < textArray.length - 1; i++) {\n                        hText = hText === '' ? textArray[i] : (hText + this.valueSortSettings.headerDelimiter + textArray[i]);\n                    }\n                }\n                mIndex = this.fieldList[this.values[0].name].index;\n                mType = this.fieldList[this.values[0].name].aggregateType;\n            }\n            var member = void 0;\n            if (this.valueAxis === 0) {\n                member = this.getMember(this.cMembers, hText);\n                if (member) {\n                    this.sortByValueRow(this.rMembers, member, this.valueSortSettings.sortOrder, mIndex, mType);\n                }\n            }\n            else {\n                member = this.getMember(this.rMembers, hText);\n                if (member) {\n                    this.sortByValueRow(this.cMembers, member, this.valueSortSettings.sortOrder, mIndex, mType);\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.getMember = function (cMembers, headerText) {\n        var vlen = cMembers.length;\n        var member;\n        for (var j = 0; j < vlen; j++) {\n            if (cMembers[j].valueSort.levelName === headerText) {\n                member = cMembers[j];\n                break;\n            }\n            else if (cMembers[j].members.length > 0) {\n                member = this.getMember(cMembers[j].members, headerText);\n            }\n            if (member) {\n                return member;\n            }\n        }\n        return member;\n    };\n    PivotEngine.prototype.sortByValueRow = function (rMembers, member, sortOrder, mIndex, mType) {\n        var sort = false;\n        var vlen = rMembers.length;\n        for (var j = 0; j < vlen; j++) {\n            for (var k = j; k < vlen && rMembers[j].type !== 'grand sum' && rMembers[k].type !== 'grand sum'; k++) {\n                if (sortOrder === 'Descending') {\n                    sort = this.getAggregateValue(rMembers[j].index, member.indexObject, mIndex, mType) <\n                        this.getAggregateValue(rMembers[k].index, member.indexObject, mIndex, mType);\n                }\n                else {\n                    sort = this.getAggregateValue(rMembers[j].index, member.indexObject, mIndex, mType) >\n                        this.getAggregateValue(rMembers[k].index, member.indexObject, mIndex, mType);\n                }\n                if (sort) {\n                    var temp = {};\n                    temp = rMembers[j];\n                    rMembers[j] = rMembers[k];\n                    rMembers[k] = temp;\n                }\n            }\n            if (rMembers[j].members.length > 0) {\n                this.sortByValueRow(rMembers[j].members, member, sortOrder, mIndex, mType);\n            }\n        }\n    };\n    PivotEngine.prototype.insertAllMembersCommon = function () {\n        /* inserting the row grant-total members */\n        var rowFlag = (this.showGrandTotals && this.showRowGrandTotals) ? true : (this.rows.length > 0) ? false : true;\n        if (rowFlag) {\n            this.insertAllMember(this.rMembers, this.filterMembers, '', 'row');\n        }\n        /* inserting the column gran-total members */\n        var columnFlag = (this.showGrandTotals && this.showColumnGrandTotals) ? true : (this.columns.length > 0) ? false : true;\n        if (columnFlag) {\n            this.insertAllMember(this.cMembers, this.filterMembers, '', 'column');\n        }\n    };\n    PivotEngine.prototype.removeIndexProperties = function () {\n        for (var rCnt = 0; rCnt < this.headerContent.length; rCnt++) {\n            if (this.headerContent[rCnt]) {\n                for (var cCnt = 0; cCnt < Object.keys(this.headerContent[rCnt]).length; cCnt++) {\n                    var key = Number(Object.keys(this.headerContent[rCnt])[cCnt]);\n                    this.headerContent[rCnt][key].index = [];\n                    this.headerContent[rCnt][key].indexObject = {};\n                    this.pivotValues[rCnt][key].index = [];\n                    this.pivotValues[rCnt][key].indexObject = {};\n                }\n            }\n        }\n        for (var rCnt = this.headerContent.length; rCnt < this.pivotValues.length; rCnt++) {\n            if (this.headerContent[rCnt]) {\n                this.valueContent[rCnt - this.headerContent.length][0].index = [];\n                this.valueContent[rCnt - this.headerContent.length][0].indexObject = {};\n                this.pivotValues[rCnt][0].index = [];\n                this.pivotValues[rCnt][0].indexObject = {};\n            }\n        }\n    };\n    PivotEngine.prototype.insertSubTotals = function () {\n        var rowLength = this.pivotValues.length;\n        for (var rowCnt = 0; rowCnt < rowLength; rowCnt++) {\n            var rowCells = this.pivotValues[rowCnt];\n            if (rowCells) {\n                var savedCell = void 0;\n                var spanCnt = 1;\n                var colLength = rowCells.length;\n                var indexObj = void 0;\n                for (var colCnt = colLength - 1; colCnt > 0; colCnt--) {\n                    var cell = rowCells[colCnt];\n                    if (cell) {\n                        if (savedCell) {\n                            savedCell.colSpan = spanCnt;\n                            savedCell.colIndex = savedCell.colIndex - (spanCnt - 1);\n                        }\n                        indexObj = { index: cell.index, indexObject: cell.indexObject };\n                        cell.index = [];\n                        cell.indexObject = {};\n                        savedCell = extend({}, cell, null, true);\n                        cell.index = indexObj.index;\n                        cell.indexObject = indexObj.indexObject;\n                        var rowPos = rowCnt + 1;\n                        while (this.pivotValues[rowPos] && !this.pivotValues[rowPos][colCnt]) {\n                            if (!this.pivotValues[rowCnt][colCnt].isDrilled) {\n                                this.pivotValues[rowCnt][colCnt].rowSpan = (rowPos - rowCnt) + 1;\n                                savedCell.rowSpan = (rowPos - rowCnt) + 1;\n                            }\n                            var cellType = (cell.type === 'sum' || cell.type === 'grand sum') ? cell.type : 'sum';\n                            this.pivotValues[rowPos][colCnt] = this.headerContent[rowPos][colCnt] = {\n                                type: cellType, formattedText: ((cell.type === 'sum' || cell.type === 'grand sum') ? cell.formattedText :\n                                    (cell.formattedText + ' Total')),\n                                axis: 'column', level: -1, colIndex: colCnt, rowIndex: rowPos, valueSort: cell.valueSort\n                            };\n                            if (cell.valueSort && cell.valueSort[this.valueSortSettings.headerText]) {\n                                this.valueSortSettings.columnIndex = colCnt;\n                            }\n                            var isSpanned = false;\n                            if (cellType === 'grand sum') {\n                                this.pivotValues[rowCnt][colCnt].rowSpan = (rowPos - rowCnt) + 1;\n                                savedCell.rowSpan = (rowPos - rowCnt) + 1;\n                            }\n                            else if (this.pivotValues[rowCnt][colCnt].type !== 'sum' &&\n                                this.pivotValues[rowCnt][colCnt].isDrilled) {\n                                this.pivotValues[rowCnt + 1][colCnt].rowSpan = rowPos - rowCnt;\n                                isSpanned = true;\n                            }\n                            else {\n                                this.pivotValues[rowPos][colCnt].rowSpan = -1;\n                            }\n                            if (rowPos > (rowCnt + 1) && (this.pivotValues[rowCnt][colCnt].type === 'sum' ||\n                                isSpanned)) {\n                                this.pivotValues[rowPos][colCnt].rowSpan = -1;\n                            }\n                            rowPos++;\n                        }\n                        spanCnt = 1;\n                    }\n                    else {\n                        rowCells[colCnt] = this.headerContent[rowCnt][colCnt] = extend({}, savedCell, null, true);\n                        rowCells[colCnt].index = this.headerContent[rowCnt][colCnt].index = indexObj.index;\n                        rowCells[colCnt].indexObject = this.headerContent[rowCnt][colCnt].indexObject = indexObj.indexObject;\n                        spanCnt++;\n                        rowCells[colCnt].colSpan = spanCnt;\n                        rowCells[colCnt].colIndex = rowCells[colCnt].colIndex - (spanCnt - 1);\n                    }\n                    if (colCnt === 1 && savedCell) {\n                        savedCell.colSpan = spanCnt;\n                        savedCell.colIndex = savedCell.colIndex - (spanCnt - 1);\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable:max-func-body-length */\n    PivotEngine.prototype.getIndexedHeaders = function (keys, data, keyInd, position, axis, parentMember) {\n        var hierarchy = [];\n        var showPosition = this.enableValueSorting || this.allowValueFilter || !this.pageSettings;\n        if (keys) {\n            var rlen = keys.length;\n            var decisionObj = {};\n            var fieldName = keys[keyInd].name;\n            var field = keys[keyInd];\n            // let members: string[] = Object.keys(this.fieldList[field].members);\n            var childrens = this.fieldList[fieldName];\n            var index = {};\n            var isNoData = false;\n            var showNoDataItems = (position.length < 1 && keyInd > 0) || field.showNoDataItems;\n            var savedMembers = {};\n            if (showNoDataItems) {\n                var members = Object.keys(childrens.members);\n                for (var pos = 0, lt = members.length; pos < lt; pos++) {\n                    savedMembers[members[pos]] = members[pos];\n                }\n                if (position.length < 1) {\n                    isNoData = true;\n                    position.length = members.length;\n                }\n            }\n            for (var pos = 0, lt = position.length; pos < lt; pos++) {\n                var member = {};\n                if (!isNullOrUndefined(keys[keyInd].showSubTotals) && !keys[keyInd].showSubTotals) {\n                    member.showSubTotals = false;\n                }\n                member.hasChild = keyInd < rlen - 1;\n                member.level = keyInd;\n                member.axis = axis;\n                member.colSpan = 1;\n                var memInd = isNoData ? childrens.members[Object.keys(savedMembers)[0]].ordinal :\n                    this.indexMatrix[position[pos]][childrens.index];\n                var headerValue = isNoData ? Object.keys(savedMembers)[0] :\n                    data[position[pos]][fieldName];\n                if (isNullOrUndefined(headerValue)) {\n                    continue;\n                }\n                delete savedMembers[headerValue];\n                if (showNoDataItems && this.fieldFilterMem[fieldName] &&\n                    this.fieldFilterMem[fieldName].memberObj[headerValue] === headerValue) {\n                    continue;\n                }\n                member.isDrilled = member.hasChild ? childrens.members[headerValue].isDrilled : false;\n                var formattedValue = (this.formatFields[fieldName] && this.formatFields[fieldName].type === 'date') ?\n                    this.getFormattedValue(headerValue, fieldName) : { formattedText: headerValue.toString(), actualText: headerValue };\n                member.actualText = formattedValue.actualText;\n                member.formattedText = formattedValue.formattedText;\n                var availData = showNoDataItems ? (this.filterPosObj[position[pos]] !== undefined &&\n                    !isNoData ? true : false) : true;\n                //member.name = members[memInd];\n                // member.type = member.hasChild ? 'All' : 'Single';\n                var pindx = void 0;\n                if (!(decisionObj && decisionObj[memInd])) {\n                    decisionObj[memInd] = { index: [], indexObject: {} };\n                    member.index = decisionObj[memInd].index;\n                    member.indexObject = decisionObj[memInd].indexObject;\n                    if (availData) {\n                        if (showPosition) {\n                            member.index = decisionObj[memInd].index = [position[pos]];\n                            decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                            member.indexObject = decisionObj[memInd].indexObject;\n                        }\n                        else {\n                            index[memInd] = [position[pos]];\n                        }\n                    }\n                    member.ordinal = memInd;\n                    member.valueSort = {};\n                    if (showPosition) {\n                        member.valueSort.axis = fieldName;\n                        if (keyInd !== 0) {\n                            member.valueSort.levelName = parentMember + this.valueSortSettings.headerDelimiter + member.formattedText;\n                            member.valueSort[parentMember + this.valueSortSettings.headerDelimiter + member.formattedText] = 1;\n                        }\n                        else {\n                            member.valueSort[member.formattedText] = 1;\n                            member.valueSort.levelName = member.formattedText;\n                        }\n                    }\n                    //if (!member.members) {\n                    member.members = [];\n                    //}\n                    //let copyObj: AxisSet = Object.create(member);\n                    hierarchy.push(member);\n                }\n                else if (availData) {\n                    if (showPosition) {\n                        decisionObj[memInd].index.push(position[pos]);\n                        decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                    }\n                    else {\n                        if (index[memInd] === undefined) {\n                            index[memInd] = [position[pos]];\n                        }\n                        else {\n                            index[memInd].push(position[pos]);\n                        }\n                    }\n                }\n                if (showNoDataItems && !isNoData && keyInd > 0 && pos + 1 === position.length &&\n                    Object.keys(savedMembers).length > 0) {\n                    isNoData = true;\n                    lt = Object.keys(savedMembers).length;\n                    pos = -1;\n                }\n            }\n            for (var iln = 0, ilt = hierarchy.length; iln < ilt; iln++) {\n                if (axis === 'row') {\n                    this.rowCount += this.rowValuesLength;\n                }\n                else {\n                    this.columnCount += this.colValuesLength;\n                }\n                if (rlen - 1 > keyInd && hierarchy[iln].isDrilled) {\n                    if (showPosition) {\n                        var level = null;\n                        if (hierarchy[iln].valueSort && hierarchy[iln].valueSort.levelName) {\n                            level = hierarchy[iln].valueSort.levelName;\n                        }\n                        parentMember = (level || hierarchy[iln].formattedText);\n                    }\n                    var filterPosition = !showPosition ? index[hierarchy[iln].ordinal] : hierarchy[iln].index;\n                    /* tslint:disable:align */\n                    hierarchy[iln].members = this.getIndexedHeaders(keys, data, keyInd + 1, (filterPosition === undefined ? [] : filterPosition), axis, parentMember);\n                    /* tslint:enable:align */\n                }\n            }\n            /* tslint:disable:typedef */\n            if (this.enableSort) {\n                //return new DataManager(hierarchy as JSON[]).executeLocal(new Query().sortBy('actualText', childrens.sort.toLowerCase()));\n                return childrens.sort === 'Ascending' ?\n                    (hierarchy.sort(function (a, b) { return (a.actualText > b.actualText) ? 1 : ((b.actualText > a.actualText) ? -1 : 0); })) :\n                    (hierarchy.sort(function (a, b) { return (a.actualText < b.actualText) ? 1 : ((b.actualText < a.actualText) ? -1 : 0); }));\n            }\n            else {\n                return hierarchy;\n            }\n            /* tslint:enable:typedef */\n        }\n        else {\n            return hierarchy;\n        }\n    };\n    PivotEngine.prototype.getOrderedIndex = function (headers) {\n        var orderedIndex = {};\n        for (var i = 0; i < headers.length; i++) {\n            if (headers[i].type !== 'grand sum') {\n                orderedIndex[headers[i].ordinal] = i;\n            }\n        }\n        return orderedIndex;\n    };\n    PivotEngine.prototype.insertPosition = function (keys, data, keyInd, position, axis, parentMember, slicedHeaders) {\n        var hierarchy = [];\n        var orderedIndex = this.getOrderedIndex(slicedHeaders);\n        if (keys) {\n            var decisionObj = {};\n            var field = keys[keyInd].name;\n            var childrens = this.fieldList[field];\n            for (var pos = 0, lt = position.length; pos < lt; pos++) {\n                var member = {};\n                var memInd = this.indexMatrix[position[pos]][childrens.index];\n                var slicedHeader = slicedHeaders[orderedIndex[memInd]];\n                var formattedValue = (this.formatFields[field] && this.formatFields[field].type === 'date') ?\n                    this.getFormattedValue(data[position[pos]][field], field) :\n                    { formattedText: data[position[pos]][field].toString(), actualText: data[position[pos]][field].toString() };\n                if (!(slicedHeader && slicedHeader.formattedText === formattedValue.formattedText)) {\n                    continue;\n                }\n                if (!(decisionObj && decisionObj[memInd])) {\n                    decisionObj[memInd] = { index: [], indexObject: {} };\n                    slicedHeader.index = decisionObj[memInd].index = [position[pos]];\n                    decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                    slicedHeader.indexObject = decisionObj[memInd].indexObject;\n                    slicedHeader.valueSort = {};\n                    slicedHeader.valueSort.axis = field;\n                    if (keyInd !== 0) {\n                        slicedHeader.valueSort.levelName = parentMember + this.valueSortSettings.headerDelimiter +\n                            slicedHeader.formattedText;\n                        slicedHeader.valueSort[parentMember + this.valueSortSettings.headerDelimiter +\n                            slicedHeader.formattedText] = 1;\n                    }\n                    else {\n                        slicedHeader.valueSort[slicedHeader.formattedText] = 1;\n                        slicedHeader.valueSort.levelName = slicedHeader.formattedText;\n                    }\n                    member.members = [];\n                    hierarchy.push(member);\n                }\n                else {\n                    decisionObj[memInd].index.push(position[pos]);\n                    decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                }\n            }\n            var diff = slicedHeaders.length - hierarchy.length;\n            while (diff > 0) {\n                hierarchy.push({ members: [] });\n                diff--;\n            }\n            for (var iln = 0, ilt = hierarchy.length; iln < ilt; iln++) {\n                if (slicedHeaders[iln].members.length > 0) {\n                    var level = null;\n                    if (slicedHeaders[iln].valueSort && slicedHeaders[iln].valueSort.levelName) {\n                        level = slicedHeaders[iln].valueSort.levelName;\n                    }\n                    parentMember = (level || slicedHeaders[iln].formattedText);\n                    /* tslint:disable:align */\n                    hierarchy[iln].members =\n                        this.insertPosition(keys, data, keyInd + 1, slicedHeaders[iln].index, axis, parentMember, slicedHeaders[iln].members);\n                    /* tslint:enable:align */\n                }\n            }\n            return hierarchy;\n        }\n        else {\n            return hierarchy;\n        }\n    };\n    PivotEngine.prototype.insertTotalPosition = function (headers) {\n        var summCell = headers[headers.length - 1];\n        if (summCell && summCell.type === 'grand sum') {\n            summCell.index = this.filterMembers;\n            /* tslint:disable:typedef */\n            var lt = void 0;\n            for (var ln = 0, lt_1 = this.filterMembers.length; ln < lt_1; ln++) {\n                summCell.indexObject[this.filterMembers[ln]] = this.filterMembers[ln];\n            }\n            /* tslint:enable:typedef */\n        }\n        return headers;\n    };\n    PivotEngine.prototype.calculatePagingValues = function () {\n        var isValueSorting = ((this.valueSortSettings.sortOrder !== 'None' &&\n            this.valueSortSettings.headerText !== '') || this.enableValueSorting) ? true : false;\n        if (this.pageSettings) {\n            if (this.valueAxis === 1) {\n                this.rowValuesLength = this.values.length;\n            }\n            else {\n                this.colValuesLength = this.values.length;\n            }\n            this.memberCnt = -this.rowValuesLength;\n            this.rowStartPos = ((this.pageSettings.rowCurrentPage * this.pageSettings.rowSize) -\n                (this.pageSettings.rowSize)) * this.rowValuesLength;\n            var exactStartPos = (this.rowStartPos + (this.pageSettings.rowSize * 3 * this.rowValuesLength)) > this.rowCount ?\n                (this.rowCount - (this.pageSettings.rowSize * 3 * this.rowValuesLength)) : this.rowStartPos;\n            if (exactStartPos < 0) {\n                exactStartPos = this.rowStartPos = 0;\n                this.pageSettings.rowCurrentPage = 1;\n            }\n            this.rowFirstLvl = (this.rowStartPos - exactStartPos) % this.pageSettings.rowSize;\n            this.rowStartPos = exactStartPos;\n            this.endPos = this.rowStartPos + (this.pageSettings.rowSize * 3 * this.rowValuesLength);\n            this.endPos = this.endPos > this.rowCount ? this.rowCount : this.endPos;\n            this.rMembers = isValueSorting ? this.rMembers : this.performSlicing(this.rMembers, [], this.rowStartPos, 'row');\n            this.memberCnt = -this.colValuesLength;\n            this.pageInLimit = false;\n            this.colHdrBufferCalculated = false;\n            this.colStartPos = ((this.pageSettings.columnCurrentPage * this.pageSettings.columnSize) -\n                (this.pageSettings.columnSize)) * this.colValuesLength;\n            exactStartPos = (this.colStartPos + (this.pageSettings.columnSize * 3 * this.colValuesLength)) >\n                this.columnCount ?\n                (this.columnCount - (this.pageSettings.columnSize * 3 * this.colValuesLength)) : this.colStartPos;\n            if (exactStartPos < 0) {\n                exactStartPos = this.colStartPos = 0;\n                this.pageSettings.columnCurrentPage = 1;\n            }\n            this.colFirstLvl = (this.colStartPos - exactStartPos) % this.pageSettings.columnSize;\n            this.colStartPos = exactStartPos;\n            if (!isValueSorting) {\n                this.endPos = this.colStartPos + (this.pageSettings.columnSize * 3 * this.colValuesLength);\n                this.endPos = this.endPos > this.columnCount ? this.columnCount : this.endPos;\n                this.cMembers = this.performSlicing(this.cMembers, [], this.colStartPos, 'column');\n            }\n            this.memberCnt = -1;\n            this.pageInLimit = false;\n        }\n    };\n    PivotEngine.prototype.performSlicing = function (headers, slicedHeaders, startPos, axis) {\n        var pos = 0;\n        while (headers[pos]) {\n            this.memberCnt += axis === 'column' ? this.colValuesLength : this.rowValuesLength;\n            if (startPos <= this.memberCnt && this.endPos >= this.memberCnt && !this.pageInLimit) {\n                if (axis === 'column') {\n                    this.colFirstLvl = this.colFirstLvl + headers[pos].level;\n                }\n                else {\n                    this.rowFirstLvl = this.rowFirstLvl + headers[pos].level;\n                }\n                this.pageInLimit = true;\n            }\n            if (this.pageInLimit) {\n                if (this.endPos <= this.memberCnt) {\n                    if (axis === 'column') {\n                        if (headers[pos].members.length === 0) {\n                            if (this.colHdrBufferCalculated) {\n                                break;\n                            }\n                            this.colHdrBufferCalculated = true;\n                            this.endPos += (headers[pos].level * this.colValuesLength);\n                        }\n                        else if (this.colHdrBufferCalculated) {\n                            break;\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            var members = headers[pos].members;\n            slicedHeaders.push(headers[pos]);\n            if (headers[pos].members.length > 0) {\n                slicedHeaders[slicedHeaders.length - 1].members = [];\n                slicedHeaders[slicedHeaders.length - 1].members =\n                    this.performSlicing(members, [], startPos, axis);\n            }\n            if (!this.pageInLimit) {\n                slicedHeaders.pop();\n            }\n            if (headers[pos].level === 0 && this.pageInLimit && this.endPos <= this.memberCnt) {\n                break;\n            }\n            pos++;\n        }\n        return slicedHeaders;\n    };\n    PivotEngine.prototype.insertAllMember = function (set, filter, customText, axis) {\n        var len = set.length;\n        var showPosition = this.enableValueSorting || this.allowValueFilter || !this.pageSettings;\n        customText = ' Total';\n        set[len] = {\n            hasChild: false,\n            index: !showPosition ? [] : filter,\n            level: 0,\n            axis: axis,\n            isDrilled: false,\n            indexObject: {},\n            members: [],\n            formattedText: 'Grand' + customText,\n            ordinal: len,\n            type: 'grand sum',\n            valueSort: {}\n        };\n        set[len].valueSort[set[len].formattedText] = 1;\n        set[len].valueSort.levelName = set[len].formattedText;\n        if (showPosition) {\n            for (var ln = 0, lt = filter.length; ln < lt; ln++) {\n                set[len].indexObject[filter[ln]] = filter[ln];\n            }\n        }\n        if (axis === 'row') {\n            this.rowCount += this.rowValuesLength;\n        }\n        else {\n            this.columnCount += this.colValuesLength;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getTableData = function (rows, reformAxis, columns, tnum, data, vlt, rTotal, cTotal) {\n        for (var rlt = rows.length, rln = 0; rln < rlt; rln++) {\n            tnum = data.length;\n            reformAxis[tnum] = rows[rln];\n            var actCnt = tnum - Number(Object.keys(reformAxis)[0]);\n            //let rplus: number = rln + 1;\n            //let lvl: number = rows[rln].level;\n            var isLeastNode = !reformAxis[tnum].members.length;\n            rows[rln].colIndex = 0;\n            rows[rln].rowIndex = tnum;\n            if (!data[tnum]) {\n                data[tnum] = [];\n                this.valueContent[actCnt] = {};\n                //data[tnum][0] = rows[rln].name;\n                data[tnum][0] = this.valueContent[actCnt][0] = rows[rln];\n            }\n            else {\n                // data[tnum][0] = rows[rln].name;\n                data[tnum][0] = this.valueContent[actCnt][0] = rows[rln];\n            }\n            if (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) && !(rows[rln].isDrilled &&\n                ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                    !this.showSubTotals || !this.showRowSubTotals))) {\n                var hpos = tnum;\n                var actpos = actCnt;\n                for (var vln = 0; vln < vlt; vln++) {\n                    tnum++;\n                    actCnt++;\n                    var name_1 = this.values[vln].caption ? this.values[vln].caption : this.values[vln].name;\n                    var calObj = {\n                        axis: 'row',\n                        actualText: this.values[vln].name,\n                        formattedText: name_1,\n                        level: 0,\n                        valueSort: {},\n                        colIndex: 0,\n                        rowIndex: tnum,\n                        type: 'value'\n                    };\n                    if (!data[tnum]) {\n                        data[tnum] = [];\n                        this.valueContent[actCnt] = {};\n                        data[tnum][0] = this.valueContent[actCnt][0] = calObj;\n                    }\n                    var vData = data[tnum][0].valueSort;\n                    vData[data[tnum - vln - 1][0].valueSort.levelName + this.valueSortSettings.headerDelimiter + name_1] = 1;\n                    vData.levelName = data[tnum - vln - 1][0].valueSort.levelName + this.valueSortSettings.headerDelimiter\n                        + name_1;\n                    for (var cln = 0, dln = 1, clt = columns.length; cln < clt; ++cln) {\n                        //for (let vln: number = 0; (!this.valueAxis && vln < vlt); vln++) {\n                        this.updateRowData(rows, columns, tnum, data, vln, rln, cln, dln, actCnt, rTotal, cTotal);\n                        dln = data[tnum].length;\n                        data[hpos][dln - 1] = this.valueContent[actpos][dln - 1] = {\n                            axis: 'value', actualText: '', colSpan: 1,\n                            colIndex: dln, formattedText: '', hasChild: false\n                        };\n                        // }\n                    }\n                }\n                this.recursiveRowData(rows, reformAxis, columns, tnum, data, vlt, isLeastNode, rln, vlt, rTotal, cTotal);\n            }\n            else {\n                for (var cln = 0, dln = 1, clt = columns.length; cln < clt; ++cln) {\n                    for (var vln = 0; vln < vlt; vln++) {\n                        this.updateRowData(rows, columns, tnum, data, vln, rln, cln, dln, actCnt, rTotal, cTotal);\n                        dln = data[tnum].length;\n                    }\n                }\n                this.recursiveRowData(rows, reformAxis, columns, tnum, data, vlt, isLeastNode, rln, 0, rTotal, cTotal);\n            }\n        }\n        /* for (let rlt: number = rows.length, rln: number = 0; rln < rlt; rln++) {\n            if (!data[rln]) {\n                data[rln] = [];\n                data[rln][0] = rows[rln].name;\n            } else {\n                data[rln][0] = rows[rln].name;\n            }\n            for (let cln: number = 0, dln: number = 1, clt: number = columns.length; cln < clt; dln = ++cln) {\n                data[rln][dln] = this.getAggregateValue(rows[rln].index, columns[cln].index, 11);\n            }\n        } */\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getAggregatedHeaders = function (rows, columns, rMembers, cMembers, values) {\n        this.selectedHeaders = { selectedHeader: [], values: [] };\n        for (var vlt = values.length, vln = 0; vln < vlt; vln++) {\n            switch (values[vln].type) {\n                case 'DifferenceFrom':\n                case 'PercentageOfDifferenceFrom':\n                    {\n                        var baseField = void 0;\n                        var baseItem = void 0;\n                        this.selectedHeaders.values.push(values[vln].name);\n                        if (values[vln].baseField && values[vln].baseItem) {\n                            baseField = values[vln].baseField;\n                            baseItem = values[vln].baseItem;\n                        }\n                        else if (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) && columns.length > 0) {\n                            baseField = columns[0].name;\n                            baseItem = Object.keys(this.fieldList[columns[0].name].members)[0];\n                        }\n                        else if (rows.length > 0) {\n                            baseField = rows[0].name;\n                            baseItem = Object.keys(this.fieldList[rows[0].name].members)[0];\n                        }\n                        var isHeaderSelected = false;\n                        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n                            var row = rows_2[_i];\n                            if (row.name === baseField) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rMembers, values[vln].name, baseItem, false, 'row', values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                                isHeaderSelected = true;\n                                break;\n                            }\n                        }\n                        if (!isHeaderSelected) {\n                            for (var _a = 0, columns_1 = columns; _a < columns_1.length; _a++) {\n                                var column = columns_1[_a];\n                                if (column.name === baseField) {\n                                    /* tslint:disable-next-line:max-line-length */\n                                    this.getAggregatedHeaderData(cMembers, values[vln].name, baseItem, false, 'column', values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'PercentageOfParentRowTotal':\n                case 'PercentageOfParentColumnTotal':\n                    {\n                        this.selectedHeaders.values.push(values[vln].name);\n                        /* tslint:disable-next-line:max-line-length */\n                        this.getAggregatedHeaderData((values[vln].type === 'PercentageOfParentRowTotal' ? rMembers : cMembers), values[vln].name, undefined, false, (values[vln].type === 'PercentageOfParentRowTotal' ? 'row' : 'column'), values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                    }\n                    break;\n                case 'RunningTotals':\n                    {\n                        this.selectedHeaders.values.push(values[vln].name);\n                        /* tslint:disable-next-line:max-line-length */\n                        this.getAggregatedHeaderData((this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) ? cMembers : rMembers), values[vln].name, undefined, false, (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) ? 'column' : 'row'), values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                    }\n                    break;\n                case 'PercentageOfParentTotal':\n                    {\n                        var baseField = void 0;\n                        this.selectedHeaders.values.push(values[vln].name);\n                        if (values[vln].baseField) {\n                            baseField = values[vln].baseField;\n                        }\n                        else if (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) && columns.length > 0) {\n                            baseField = columns[0].name;\n                        }\n                        else if (rows.length > 0) {\n                            baseField = rows[0].name;\n                        }\n                        var isHeaderSelected = false;\n                        for (var len = rows.length, i = 0; i < len; i++) {\n                            if (rows[i].name === baseField) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rMembers, values[vln].name, undefined, false, 'row', values[vln].type, this.selectedHeaders.selectedHeader, vln, i);\n                                isHeaderSelected = true;\n                                break;\n                            }\n                        }\n                        if (!isHeaderSelected) {\n                            for (var len = columns.length, i = 0; i < len; i++) {\n                                if (columns[i].name === baseField) {\n                                    /* tslint:disable-next-line:max-line-length */\n                                    this.getAggregatedHeaderData(cMembers, values[vln].name, undefined, false, 'column', values[vln].type, this.selectedHeaders.selectedHeader, vln, i);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getAggregatedHeaderData = function (headers, name, baseItem, isChildren, type, aggregateType, selectedHeaders, vln, level) {\n        for (var _i = 0, headers_1 = headers; _i < headers_1.length; _i++) {\n            var rln = headers_1[_i];\n            switch (aggregateType) {\n                case 'DifferenceFrom':\n                case 'PercentageOfDifferenceFrom':\n                    {\n                        var levelName = rln.valueSort.levelName.toString().split('.');\n                        if (levelName.indexOf(baseItem) !== -1) {\n                            /* tslint:disable-next-line:max-line-length */\n                            selectedHeaders.push(this.updateSelectedHeaders(baseItem, rln.level, type, isChildren, name, aggregateType, rln.valueSort.levelName, (isChildren ? [rln] : headers), vln + 1));\n                            if (rln.members.length > 0) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rln.members, name, baseItem, true, type, aggregateType, selectedHeaders[selectedHeaders.length - 1].childMembers, vln);\n                            }\n                        }\n                        else if (rln.members.length > 0) {\n                            this.getAggregatedHeaderData(rln.members, name, baseItem, false, type, aggregateType, selectedHeaders, vln);\n                        }\n                    }\n                    break;\n                case 'RunningTotals':\n                case 'PercentageOfParentRowTotal':\n                case 'PercentageOfParentColumnTotal':\n                    {\n                        if (rln.type === 'grand sum') {\n                            /* tslint:disable-next-line:max-line-length */\n                            selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, headers, vln + 1));\n                        }\n                        else {\n                            if (rln.members.length > 0) {\n                                /* tslint:disable-next-line:max-line-length */\n                                selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, rln.members, vln + 1));\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rln.members, name, undefined, false, type, aggregateType, selectedHeaders, vln);\n                            }\n                        }\n                    }\n                    break;\n                case 'PercentageOfParentTotal':\n                    {\n                        if (rln.type !== 'grand sum') {\n                            if (rln.level === level) {\n                                if (rln.members.length > 0) {\n                                    if (isChildren) {\n                                        var aggregateHeaders = selectedHeaders[selectedHeaders.length - 1].aggregateHeaders;\n                                        for (var _a = 0, _b = rln.members; _a < _b.length; _a++) {\n                                            var member = _b[_a];\n                                            aggregateHeaders.push(member);\n                                        }\n                                    }\n                                    else {\n                                        var children = extend([], rln.members, null, true);\n                                        /* tslint:disable-next-line:max-line-length */\n                                        selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, children, vln + 1));\n                                        var aggregateHeaders = selectedHeaders[selectedHeaders.length - 1].aggregateHeaders;\n                                        aggregateHeaders.push(rln);\n                                    }\n                                    /* tslint:disable-next-line:max-line-length */\n                                    this.getAggregatedHeaderData(rln.members, name, undefined, true, type, aggregateType, selectedHeaders, vln, level + 1);\n                                }\n                                else {\n                                    if (!isChildren) {\n                                        /* tslint:disable-next-line:max-line-length */\n                                        selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, [rln], vln + 1));\n                                    }\n                                }\n                            }\n                            else if (rln.members.length > 0) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rln.members, name, undefined, false, type, aggregateType, selectedHeaders, vln, level);\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.updateSelectedHeaders = function (baseItem, level, type, isChildren, name, aggregateType, levelName, headers, vCount) {\n        var headerData = {\n            name: baseItem,\n            level: level,\n            axis: type,\n            isChild: isChildren,\n            value: name,\n            type: aggregateType,\n            uniqueName: levelName,\n            aggregateHeaders: headers,\n            childMembers: [],\n            valueCount: vCount\n        };\n        return headerData;\n    };\n    PivotEngine.prototype.applyAdvancedAggregate = function (rowheads, colheads, data) {\n        if (this.selectedHeaders.values.length > 0) {\n            var pivotIndex = {};\n            var colIndex = [];\n            var isIndexFilled = false;\n            for (var rlt = data.length, rln = 0; rln < rlt; rln++) {\n                if (data[rln] !== undefined && data[rln][0] !== undefined) {\n                    if (!isIndexFilled) {\n                        for (var clt = data[rln].length, cln = 0; cln < clt; cln++) {\n                            if (data[rln][cln].axis === 'value' &&\n                                this.selectedHeaders.values.indexOf(data[rln][cln].actualText) !== -1) {\n                                colIndex.push(cln);\n                                isIndexFilled = true;\n                            }\n                        }\n                    }\n                    if (colIndex.length > 0 && data[rln][colIndex[0]].axis === 'value' &&\n                        this.selectedHeaders.values.indexOf(data[rln][colIndex[0]].actualText) !== -1) {\n                        for (var _i = 0, colIndex_1 = colIndex; _i < colIndex_1.length; _i++) {\n                            var index = colIndex_1[_i];\n                            pivotIndex[rln + ',' + index] = [rln, index];\n                        }\n                    }\n                }\n            }\n            this.updateAggregates(rowheads, colheads, data, this.selectedHeaders.selectedHeader, colIndex, pivotIndex);\n            var indexCollection = Object.keys(pivotIndex);\n            for (var _a = 0, indexCollection_1 = indexCollection; _a < indexCollection_1.length; _a++) {\n                var index = indexCollection_1[_a];\n                var currentSet = data[pivotIndex[index][0]][pivotIndex[index][1]];\n                // currentSet.formattedText = '0';\n                currentSet.formattedText = (this.selectedHeaders.selectedHeader.length > 0 ? this.emptyCellTextContent : '#N/A');\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /* tslint:disable:all */\n    PivotEngine.prototype.updateAggregates = function (rowheads, colheads, data, selectedHeaders, colIndex, pivotIndex) {\n        for (var _i = 0, selectedHeaders_1 = selectedHeaders; _i < selectedHeaders_1.length; _i++) {\n            var headers = selectedHeaders_1[_i];\n            var selectedHeaderCollection = headers.aggregateHeaders;\n            var name_2 = headers.value;\n            var valueCount = (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) ? headers.valueCount : 0);\n            var aggregateType = headers.type;\n            var uniqueName = headers.uniqueName;\n            var axis = headers.axis;\n            var isRowBaseField = axis === 'row' ? true : false;\n            var activeValues = void 0;\n            var indexCollection = [];\n            var activeColumn = [];\n            var columnHeaders = [];\n            var rowindexCollection = [];\n            var selectedRowValues = [];\n            var selectedColumnValues = [];\n            if ((['DifferenceFrom', 'PercentageOfDifferenceFrom', 'PercentageOfParentRowTotal', 'PercentageOfParentColumnTotal', 'PercentageOfParentTotal', 'RunningTotals']).indexOf(headers.type) !== -1) {\n                if (isRowBaseField) {\n                    if (headers.type !== 'RunningTotals') {\n                        for (var rlt = rowheads.length, rln = 0; rln < rlt; rln++) {\n                            if (rowheads[rln] !== undefined) {\n                                if (rowheads[rln].valueSort[uniqueName]) {\n                                    activeValues = rowheads[rln];\n                                    selectedRowValues = data[rln + valueCount];\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    for (var len_1 = data.length, i = 0; i < len_1; i++) {\n                        if (data[i] !== undefined && data[i][0] === undefined) {\n                            columnHeaders.push(data[i]);\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                    var len = columnHeaders.length;\n                    while (len--) {\n                        var axisObj = columnHeaders[len][colIndex[0]];\n                        var cLevelName = axisObj.actualText;\n                        if (this.selectedHeaders.values.indexOf(cLevelName) === -1) {\n                            activeColumn = columnHeaders[len];\n                            len = 0;\n                        }\n                    }\n                    if (headers.type !== 'RunningTotals') {\n                        for (var clt = activeColumn.length, cln = 0; cln < clt; cln++) {\n                            var isSelectedColumn = false;\n                            if (activeColumn[cln] !== undefined && activeColumn[cln].valueSort[uniqueName]) {\n                                activeValues = activeColumn[cln];\n                                for (var len_2 = data.length, i = 0; i < len_2; i++) {\n                                    var axisObj = data[i];\n                                    if (axisObj !== undefined && axisObj[0] !== undefined &&\n                                        axisObj[cln].axis === 'value' &&\n                                        this.selectedHeaders.values.indexOf(axisObj[cln].actualText) !== -1) {\n                                        isSelectedColumn = true;\n                                        selectedColumnValues[i] = axisObj[cln];\n                                        rowindexCollection.push(i);\n                                    }\n                                }\n                                if (isSelectedColumn) {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            switch (headers.type) {\n                case 'DifferenceFrom':\n                case 'PercentageOfDifferenceFrom':\n                    {\n                        var isChildren = headers.isChild;\n                        if (isRowBaseField) {\n                            if (!isChildren) {\n                                for (var _a = 0, selectedHeaderCollection_1 = selectedHeaderCollection; _a < selectedHeaderCollection_1.length; _a++) {\n                                    var item = selectedHeaderCollection_1[_a];\n                                    for (var rlt = rowheads.length, rln = 0; rln < rlt; rln++) {\n                                        if (rowheads[rln] !== undefined) {\n                                            if (rowheads[rln].valueSort[item.valueSort.levelName] &&\n                                                rowheads[rln].level === activeValues.level && rowheads[rln].type !== 'grand sum') {\n                                                for (var _b = 0, colIndex_2 = colIndex; _b < colIndex_2.length; _b++) {\n                                                    var index = colIndex_2[_b];\n                                                    var currentSet = data[rln + valueCount][index];\n                                                    if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                        indexCollection.push([rln + valueCount, index]);\n                                                        if (pivotIndex[rln + valueCount + ',' + index]) {\n                                                            delete pivotIndex[rln + valueCount + ',' + index];\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            else {\n                                var uniqueLevelName = uniqueName.split('.');\n                                for (var rlt = rowheads.length, rlen = 0; rlen < rlt; rlen++) {\n                                    if (rowheads[rlen] !== undefined) {\n                                        var levelName = rowheads[rlen].valueSort.levelName.toString().split('.');\n                                        if (levelName.indexOf(uniqueLevelName[uniqueLevelName.length - 1]) !== -1 &&\n                                            rowheads[rlen].level === activeValues.level) {\n                                            for (var _c = 0, colIndex_3 = colIndex; _c < colIndex_3.length; _c++) {\n                                                var index = colIndex_3[_c];\n                                                var currentSet = data[rlen + valueCount][index];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    indexCollection.push([rlen + valueCount, index]);\n                                                    if (pivotIndex[rlen + valueCount + ',' + index]) {\n                                                        delete pivotIndex[rlen + valueCount + ',' + index];\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _d = 0, indexCollection_2 = indexCollection; _d < indexCollection_2.length; _d++) {\n                                var index = indexCollection_2[_d];\n                                var currentSet = data[index[0]][index[1]];\n                                var cVal = currentSet.value - selectedRowValues[index[1]].value;\n                                cVal = isNaN(cVal) ? 0 : cVal;\n                                if (aggregateType === 'DifferenceFrom') {\n                                    currentSet.formattedText = cVal === 0 ? this.emptyCellTextContent : this.getFormattedValue(cVal, name_2).formattedText;\n                                }\n                                else {\n                                    cVal = (selectedRowValues[index[1]].value === 0 ?\n                                        0 : (cVal / selectedRowValues[index[1]].value));\n                                    currentSet.formattedText = (cVal !== 0 ? this.globalize.formatNumber(cVal, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                                }\n                            }\n                        }\n                        else {\n                            if (!isChildren) {\n                                for (var _e = 0, selectedHeaderCollection_2 = selectedHeaderCollection; _e < selectedHeaderCollection_2.length; _e++) {\n                                    var item = selectedHeaderCollection_2[_e];\n                                    for (var clt = activeColumn.length, cln = 0; cln < clt; cln++) {\n                                        var isSelectedColumn = false;\n                                        if (activeColumn[cln] !== undefined &&\n                                            activeColumn[cln].valueSort[item.valueSort.levelName] &&\n                                            activeColumn[cln].level === activeValues.level && activeColumn[cln].type !== 'grand sum') {\n                                            for (var _f = 0, rowindexCollection_1 = rowindexCollection; _f < rowindexCollection_1.length; _f++) {\n                                                var index = rowindexCollection_1[_f];\n                                                var currentSet = data[index][cln];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    isSelectedColumn = true;\n                                                    indexCollection.push([index, cln]);\n                                                    if (pivotIndex[index + ',' + cln]) {\n                                                        delete pivotIndex[index + ',' + cln];\n                                                    }\n                                                }\n                                            }\n                                            if (isSelectedColumn) {\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            else {\n                                var uniqueLevelName = uniqueName.split('.');\n                                for (var clt = activeColumn.length, clen = 0; clen < clt; clen++) {\n                                    var isSelectedColumn = false;\n                                    if (activeColumn[clen] !== undefined) {\n                                        var levelName = activeColumn[clen].valueSort.levelName.toString().split('.');\n                                        if (levelName.indexOf(uniqueLevelName[uniqueLevelName.length - 1]) !== -1 &&\n                                            activeColumn[clen].level === activeValues.level) {\n                                            for (var _g = 0, rowindexCollection_2 = rowindexCollection; _g < rowindexCollection_2.length; _g++) {\n                                                var index = rowindexCollection_2[_g];\n                                                var currentSet = data[index][clen];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    isSelectedColumn = true;\n                                                    indexCollection.push([index, clen]);\n                                                    if (pivotIndex[index + ',' + clen]) {\n                                                        delete pivotIndex[index + ',' + clen];\n                                                    }\n                                                }\n                                            }\n                                            if (isSelectedColumn) {\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _h = 0, indexCollection_3 = indexCollection; _h < indexCollection_3.length; _h++) {\n                                var index = indexCollection_3[_h];\n                                var currentSet = data[index[0]][index[1]];\n                                var cVal = currentSet.value - selectedColumnValues[index[0]].value;\n                                cVal = isNaN(cVal) ? 0 : cVal;\n                                if (aggregateType === 'DifferenceFrom') {\n                                    currentSet.formattedText = cVal === 0 ? this.emptyCellTextContent : this.getFormattedValue(cVal, name_2).formattedText;\n                                }\n                                else {\n                                    cVal = (selectedColumnValues[index[0]].value === 0 ?\n                                        0 : (cVal / selectedColumnValues[index[0]].value));\n                                    currentSet.formattedText = (cVal !== 0 ? this.globalize.formatNumber(cVal, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                                }\n                            }\n                        }\n                        if (headers.childMembers.length > 0) {\n                            this.updateAggregates(rowheads, colheads, data, headers.childMembers, colIndex, pivotIndex);\n                        }\n                    }\n                    break;\n                case 'PercentageOfParentRowTotal':\n                case 'PercentageOfParentColumnTotal':\n                case 'PercentageOfParentTotal':\n                    {\n                        if (isRowBaseField) {\n                            for (var _j = 0, selectedHeaderCollection_3 = selectedHeaderCollection; _j < selectedHeaderCollection_3.length; _j++) {\n                                var item = selectedHeaderCollection_3[_j];\n                                for (var rlt = rowheads.length, i = 0; i < rlt; i++) {\n                                    if (rowheads[i] !== undefined) {\n                                        if (rowheads[i].valueSort[item.valueSort.levelName] &&\n                                            rowheads[i].level === item.level) {\n                                            for (var _k = 0, colIndex_4 = colIndex; _k < colIndex_4.length; _k++) {\n                                                var index = colIndex_4[_k];\n                                                var currentSet = data[i + valueCount][index];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    indexCollection.push([i + valueCount, index]);\n                                                    if (pivotIndex[i + valueCount + ',' + index]) {\n                                                        delete pivotIndex[i + valueCount + ',' + index];\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _l = 0, indexCollection_4 = indexCollection; _l < indexCollection_4.length; _l++) {\n                                var i = indexCollection_4[_l];\n                                var currentSet = data[i[0]][i[1]];\n                                var cVal = currentSet.value / selectedRowValues[i[1]].value;\n                                cVal = isNaN(cVal) ? 0 : cVal;\n                                currentSet.formattedText = (cVal !== 0 ? this.globalize.formatNumber(cVal, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                            }\n                        }\n                        else {\n                            for (var _m = 0, selectedHeaderCollection_4 = selectedHeaderCollection; _m < selectedHeaderCollection_4.length; _m++) {\n                                var item = selectedHeaderCollection_4[_m];\n                                for (var clt = activeColumn.length, j = 0; j < clt; j++) {\n                                    var isSelectedColumn = false;\n                                    if (activeColumn[j] !== undefined &&\n                                        activeColumn[j].valueSort[item.valueSort.levelName]) {\n                                        for (var _o = 0, rowindexCollection_3 = rowindexCollection; _o < rowindexCollection_3.length; _o++) {\n                                            var index = rowindexCollection_3[_o];\n                                            var currentSet = data[index][j];\n                                            if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                isSelectedColumn = true;\n                                                indexCollection.push([index, j]);\n                                                if (pivotIndex[index + ',' + j]) {\n                                                    delete pivotIndex[index + ',' + j];\n                                                }\n                                            }\n                                        }\n                                        if (isSelectedColumn) {\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _p = 0, indexCollection_5 = indexCollection; _p < indexCollection_5.length; _p++) {\n                                var i = indexCollection_5[_p];\n                                var currentSet = data[i[0]][i[1]];\n                                var val = currentSet.value / selectedColumnValues[i[0]].value;\n                                val = isNaN(val) ? 0 : val;\n                                currentSet.formattedText = (val !== 0 ? this.globalize.formatNumber(val, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                            }\n                        }\n                    }\n                    break;\n                case 'RunningTotals':\n                    {\n                        if (isRowBaseField) {\n                            for (var _q = 0, colIndex_5 = colIndex; _q < colIndex_5.length; _q++) {\n                                var index = colIndex_5[_q];\n                                var cVal = 0;\n                                for (var _r = 0, selectedHeaderCollection_5 = selectedHeaderCollection; _r < selectedHeaderCollection_5.length; _r++) {\n                                    var item = selectedHeaderCollection_5[_r];\n                                    for (var rlt = rowheads.length, rlen = 0; rlen < rlt; rlen++) {\n                                        if (rowheads[rlen] !== undefined) {\n                                            var currentSet = data[rlen + valueCount][index];\n                                            if (rowheads[rlen] !== undefined && rowheads[rlen].valueSort[item.valueSort.levelName] &&\n                                                rowheads[rlen].level === item.level && currentSet.axis === 'value' &&\n                                                currentSet.actualText === name_2) {\n                                                if (rowheads[rlen].type !== 'grand sum') {\n                                                    cVal += currentSet.value;\n                                                    currentSet.formattedText = this.getFormattedValue(cVal, name_2).formattedText;\n                                                }\n                                                if (pivotIndex[rlen + valueCount + ',' + index]) {\n                                                    delete pivotIndex[rlen + valueCount + ',' + index];\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            for (var rlt = rowheads.length, rln = 0; rln < rlt; rln++) {\n                                if (rowheads[rln] !== undefined) {\n                                    var cVal = 0;\n                                    for (var _s = 0, selectedHeaderCollection_6 = selectedHeaderCollection; _s < selectedHeaderCollection_6.length; _s++) {\n                                        var item = selectedHeaderCollection_6[_s];\n                                        for (var clt = activeColumn.length, cln = 0; cln < clt; cln++) {\n                                            var currentSet = data[rln + valueCount][cln];\n                                            if (activeColumn[cln] !== undefined &&\n                                                activeColumn[cln].valueSort[item.valueSort.levelName] &&\n                                                currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                if (activeColumn[cln].type !== 'grand sum') {\n                                                    cVal += currentSet.value;\n                                                    currentSet.formattedText = this.getFormattedValue(cVal, name_2).formattedText;\n                                                }\n                                                if (pivotIndex[rln + valueCount + ',' + cln]) {\n                                                    delete pivotIndex[rln + valueCount + ',' + cln];\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /* tslint:enable:all */\n    PivotEngine.prototype.recursiveRowData = function (rows, reformAxis, columns, tnum, data, vlt, isLeastNode, rln, vln, rTotal, cTotal) {\n        if (!isLeastNode) {\n            this.getTableData(reformAxis[tnum - vln].members, reformAxis, columns, tnum, data, vlt, rTotal, cTotal);\n        }\n        reformAxis[tnum - vln].members = [];\n    };\n    PivotEngine.prototype.updateRowData = function (rows, columns, tnum, data, vln, rln, cln, dln, actCnt, rTotal, cTotal) {\n        var mPos = this.fieldList[this.values[vln].name].index;\n        var aggregate = this.fieldList[this.values[vln].name].aggregateType;\n        var field = this.values[vln].name;\n        var gTotalIndex = [];\n        var totalValues = {};\n        var value = 0;\n        // let isLeast: boolean = isLeastNode && (vln === vlt - 1);\n        switch (aggregate) {\n            case 'Index':\n                {\n                    gTotalIndex = [[rows[rln], columns[cln]], [rows[rln], cTotal], [rTotal, columns[cln]], [rTotal, cTotal]];\n                    var valueContent = ['cVal', 'rTotalVal', 'cTotalVal', 'gTotalVal'];\n                    var i = 0;\n                    for (var _i = 0, gTotalIndex_1 = gTotalIndex; _i < gTotalIndex_1.length; _i++) {\n                        var rIndex = gTotalIndex_1[_i];\n                        totalValues[valueContent[i]] = this.getAggregateValue((rIndex[0]).index, (rIndex[1]).indexObject, mPos, aggregate);\n                        i++;\n                    }\n                    var val = ((totalValues.cVal) * (totalValues.gTotalVal)) / ((totalValues.rTotalVal) * (totalValues.cTotalVal));\n                    value = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                        !this.showSubTotals || !this.showRowSubTotals)) ? undefined :\n                        (isNaN(val) ? 0 : val);\n                }\n                break;\n            case 'PercentageOfGrandTotal':\n            case 'PercentageOfColumnTotal':\n            case 'PercentageOfRowTotal':\n                {\n                    gTotalIndex = [[rows[rln], columns[cln]]];\n                    gTotalIndex.push((aggregate === 'PercentageOfGrandTotal' ?\n                        [rTotal, cTotal] : (aggregate === 'PercentageOfColumnTotal' ? [rTotal, columns[cln]] : [rows[rln], cTotal])));\n                    var valueContent = ['cVal', 'gTotalVal'];\n                    var i = 0;\n                    for (var _a = 0, gTotalIndex_2 = gTotalIndex; _a < gTotalIndex_2.length; _a++) {\n                        var rIndex = gTotalIndex_2[_a];\n                        totalValues[valueContent[i]] = this.getAggregateValue((rIndex[0]).index, (rIndex[1]).indexObject, mPos, aggregate);\n                        i++;\n                    }\n                    var val = ((totalValues.cVal) / (totalValues.gTotalVal));\n                    value = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                        !this.showSubTotals || !this.showRowSubTotals)) ? undefined :\n                        (isNaN(val) ? 0 : val);\n                }\n                break;\n            default:\n                value = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                    !this.showSubTotals || !this.showRowSubTotals)) ? undefined :\n                    this.getAggregateValue(rows[rln].index, columns[cln].indexObject, mPos, aggregate);\n                break;\n        }\n        var isSum = rows[rln].hasChild || columns[cln].hasChild ||\n            rows[rln].type === 'grand sum' || columns[cln].type === 'grand sum';\n        var subTotal = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n            !this.showSubTotals || !this.showRowSubTotals));\n        var formattedText = subTotal ?\n            '' : (value === undefined && this.emptyCellTextContent !== '') ? this.emptyCellTextContent :\n            aggregate === 'Count' ? value.toLocaleString() : this.getFormattedValue(value, field).formattedText;\n        if (!isNaN(value) && !isNullOrUndefined(value) &&\n            (['PercentageOfGrandTotal', 'PercentageOfColumnTotal', 'PercentageOfRowTotal']).indexOf(aggregate) >= 0) {\n            formattedText = this.globalize.formatNumber(value, { format: 'P', maximumFractionDigits: 2 });\n        }\n        else if (!subTotal &&\n            isNaN(value) && !isNullOrUndefined(value) &&\n            (['PopulationStDev', 'SampleStDev', 'PopulationVar', 'SampleVar']).indexOf(aggregate) !== -1) {\n            formattedText = '#DIV/0!';\n        }\n        //dln = data[tnum].length;\n        data[tnum][dln] = this.valueContent[actCnt][dln] = {\n            axis: 'value', actualText: field, indexObject: this.isDrillThrough ? this.rawIndexObject : {},\n            rowHeaders: rows[rln].type === 'grand sum' ? '' : rows[rln].valueSort.levelName,\n            columnHeaders: columns[cln].type === 'grand sum' ? '' : columns[cln].valueSort.levelName,\n            formattedText: formattedText, value: isNullOrUndefined(value) ? 0 : value, rowIndex: tnum, colIndex: dln, isSum: isSum\n        };\n        this.rawIndexObject = {};\n    };\n    PivotEngine.prototype.getHeaderData = function (axis, reformAxis, data, tnum, vcnt) {\n        var rlt = axis.length;\n        var colItmLn = this.columns.length;\n        var sortText = this.valueSortSettings.headerText;\n        //let valueLn: number = this.values.length;\n        for (var rln = 0; rln < rlt; rln++) {\n            if (axis[rln].members.length) {\n                this.getHeaderData(axis[rln].members, reformAxis, data, tnum, vcnt);\n            }\n            if ((!isNullOrUndefined(axis[rln].showSubTotals) && !axis[rln].showSubTotals) ||\n                !this.showSubTotals || !this.showColumnSubTotals) {\n                if (!axis[rln].isDrilled) {\n                    reformAxis[reformAxis.length] = axis[rln];\n                }\n                else {\n                    this.removeCount++;\n                }\n                tnum = reformAxis.length - 1;\n            }\n            else {\n                tnum = reformAxis.length;\n                reformAxis[tnum] = axis[rln];\n            }\n            //  let rplus: number = rln + 1;\n            var lvl = axis[rln].level;\n            axis[rln].rowIndex = lvl;\n            axis[rln].colIndex = (tnum * vcnt) + vcnt;\n            if (!data[lvl]) {\n                data[lvl] = [];\n                this.headerContent[lvl] = {};\n                data[lvl][(tnum * vcnt) + vcnt] = this.headerContent[lvl][(tnum * vcnt) + vcnt] = axis[rln];\n            }\n            else {\n                data[lvl][(tnum * vcnt) + vcnt] = this.headerContent[lvl][(tnum * vcnt) + vcnt] = axis[rln];\n            }\n            if ((this.isMutiMeasures || this.alwaysShowValueHeader) && !this.valueAxis) {\n                for (var vln = 0; vln < vcnt; vln++) {\n                    var name_3 = this.values[vln].caption ? this.values[vln].caption : this.values[vln].name;\n                    var calObj = {\n                        axis: 'column',\n                        actualText: this.values[vln].name,\n                        formattedText: name_3,\n                        level: 0,\n                        valueSort: {},\n                        colIndex: (tnum * vcnt) + 1 + vln,\n                        rowIndex: colItmLn\n                    };\n                    if (!data[colItmLn]) {\n                        data[colItmLn] = [];\n                        this.headerContent[colItmLn] = {};\n                        data[colItmLn][(tnum * vcnt) + 1 + vln] = this.headerContent[colItmLn][(tnum * vcnt) + 1 + vln] = calObj;\n                    }\n                    else {\n                        data[colItmLn][(tnum * vcnt) + 1 + vln] = this.headerContent[colItmLn][(tnum * vcnt) + 1 + vln] = calObj;\n                    }\n                    var vData = data[colItmLn][(tnum * vcnt) + 1 + vln].valueSort;\n                    vData[axis[rln].valueSort.levelName + this.valueSortSettings.headerDelimiter + name_3] = 1;\n                    vData.levelName = axis[rln].valueSort.levelName + this.valueSortSettings.headerDelimiter + name_3;\n                    if (vData && vData[sortText]) {\n                        this.valueSortSettings.columnIndex = (tnum * vcnt) + 1 + vln;\n                    }\n                }\n            }\n            else if (axis[rln].valueSort && axis[rln].valueSort[sortText]) {\n                this.valueSortSettings.columnIndex = (tnum * vcnt) + 1;\n            }\n            reformAxis[tnum].members = [];\n        }\n    };\n    /* tslint:disable */\n    PivotEngine.prototype.getAggregateValue = function (rowIndex, columnIndex, value, type) {\n        //rowIndex = rowIndex.sort();\n        //columnIndex = columnIndex.sort();\n        var rlt = rowIndex.length;\n        //let clt: number = columnIndex.length;\n        var mirror = {};\n        var ri = 0;\n        var ci = 0;\n        var cellValue = 0;\n        var avgCnt = 0;\n        var isInit = true;\n        var isValueExist = false;\n        if (type && type.toLowerCase() === 'count') {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    cellValue += (this.valueMatrix[rowIndex[ri]][value] === undefined ? 0 : 1);\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'distinctcount') {\n            var duplicateValues = [];\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    if (currentVal !== undefined) {\n                        if (duplicateValues.length === 0 || (duplicateValues.length > 0 && duplicateValues.indexOf(currentVal) === -1)) {\n                            cellValue += 1;\n                            duplicateValues.push(currentVal);\n                        }\n                    }\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'product') {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    isValueExist = true;\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    if (currentVal !== undefined) {\n                        cellValue = (isInit ? 1 : (cellValue === 0 ? 1 : cellValue));\n                        cellValue *= currentVal;\n                    }\n                    isInit = false;\n                }\n                ri++;\n            }\n        }\n        else if (type && (['populationstdev', 'samplestdev', 'populationvar', 'samplevar']).indexOf(type.toLowerCase()) !== -1) {\n            var i = 0;\n            var val = 0;\n            var indexVal = [];\n            var avgVal = 0;\n            var cVal = 0;\n            var avgDifferenceVal = 0;\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    if (currentVal !== undefined) {\n                        val += currentVal;\n                        indexVal.push(currentVal);\n                        i++;\n                    }\n                }\n                ri++;\n            }\n            if (i > 0) {\n                avgVal = val / i;\n                for (var _i = 0, indexVal_1 = indexVal; _i < indexVal_1.length; _i++) {\n                    var index = indexVal_1[_i];\n                    avgDifferenceVal += Math.pow((index - avgVal), 2);\n                }\n                if ((['populationstdev', 'samplestdev']).indexOf(type.toLowerCase()) !== -1) {\n                    cVal = Math.sqrt(avgDifferenceVal / (type.toLowerCase() === 'populationstdev' ? i : (i - 1)));\n                }\n                else {\n                    cVal = avgDifferenceVal / (type.toLowerCase() === 'populationvar' ? i : (i - 1));\n                }\n                cellValue = (cVal === 0 ? NaN : cVal);\n            }\n            else {\n                cellValue = val;\n            }\n        }\n        else if (type && type.toLowerCase() === 'min') {\n            var isFirst = true;\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    if (isFirst) {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value];\n                        isFirst = false;\n                    }\n                    else {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value] < cellValue ? this.valueMatrix[rowIndex[ri]][value] : cellValue;\n                    }\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'max') {\n            var isMaxFirst = true;\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    if (isMaxFirst) {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value];\n                        isMaxFirst = false;\n                    }\n                    else {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value] > cellValue ? this.valueMatrix[rowIndex[ri]][value] : cellValue;\n                    }\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'calculatedfield') {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    var calcField = this.calculatedFields[this.fields[value]];\n                    var actualFormula = calcField.formula;\n                    var aggregateField = {};\n                    if (this.calculatedFormulas[calcField.name]) {\n                        var calculatedFormulas = this.calculatedFormulas[calcField.name];\n                        for (var len = 0, lmt = calculatedFormulas.length; len < lmt; len++) {\n                            var aggregatedValue = calculatedFormulas[len];\n                            var value_1 = aggregateField[aggregatedValue.formula];\n                            if (value_1 === undefined) {\n                                var type_1 = aggregatedValue.type;\n                                value_1 = this.getAggregateValue(rowIndex, columnIndex, aggregatedValue.index, type_1);\n                                aggregateField[aggregatedValue.formula] = value_1;\n                            }\n                            actualFormula = (actualFormula).replace(aggregatedValue.formula, value_1.toString());\n                        }\n                    }\n                    // /* tslint:disable */\n                    cellValue = eval(actualFormula);\n                    // /* tslint:enable */\n                    JSON.parse(cellValue.toString());\n                }\n                ri++;\n            }\n        }\n        else {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    //let cIndx: number = isLeastLevel ? columnIndex.splice(columnIndex.indexOf(rowIndex[ri]), 1)[0] : rowIndex[ri];\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    cellValue += (currentVal === undefined ? 0 : currentVal);\n                    avgCnt++;\n                }\n                ri++;\n            }\n        }\n        /* if (rlt > clt) {\n             this.makeMirrorObject(rowIndex, mirror);\n             while (columnIndex[ci] !== undefined) {\n                 if (mirror[columnIndex[ci]]) {\n                     let cIndx: number = isLeastLevel ? columnIndex.splice(ci, 1)[0] : columnIndex[ci];\n                     //rowIndex.splice\n                     sum += this.valueMatrix[cIndx][value];\n                 }\n                 ci++;\n             }\n         } else {\n             this.makeMirrorObject(columnIndex, mirror);\n             while (rowIndex[ri] !== undefined) {\n                 if (mirror[rowIndex[ri]]) {\n                     let cIndx: number = isLeastLevel ? columnIndex.splice(columnIndex.indexOf(rowIndex[ri]), 1)[0] : rowIndex[ri];\n                     sum += this.valueMatrix[rowIndex[ri]][value];\n                 }\n                 ri++;\n             }\n         } */\n        return ((type && type.toLowerCase() === 'avg' && cellValue !== 0) ? (cellValue / avgCnt) : isValueExist ? cellValue : undefined);\n    };\n    /* tslint:enable */\n    /** hidden */\n    PivotEngine.prototype.getFormattedValue = function (value, fieldName) {\n        var formattedValue = {\n            formattedText: value !== undefined ? value === null ? 'null' : value.toString() : undefined,\n            actualText: value !== undefined ? value === null ? 'null' : value : undefined\n        };\n        if (this.formatFields[fieldName] && value) {\n            var formatSetting = extend({}, this.formatFields[fieldName], null, true);\n            delete formatSetting.name;\n            if (!formatSetting.minimumSignificantDigits && formatSetting.minimumSignificantDigits < 1) {\n                delete formatSetting.minimumSignificantDigits;\n            }\n            if (!formatSetting.maximumSignificantDigits && formatSetting.maximumSignificantDigits < 1) {\n                delete formatSetting.maximumSignificantDigits;\n            }\n            if (formatSetting.type) {\n                formattedValue.formattedText = this.globalize.formatDate(new Date(value), formatSetting);\n            }\n            else {\n                formattedValue.formattedText = this.globalize.formatNumber(value, formatSetting);\n            }\n            formattedValue.actualText = value;\n            if (formatSetting.type && this.formatFields[fieldName].type === 'date') {\n                formatSetting.format = 'yyyy/MM/dd/HH/mm/ss';\n                formattedValue.actualText = this.globalize.formatDate(new Date(value), formatSetting);\n            }\n        }\n        return formattedValue;\n    };\n    PivotEngine.prototype.powerFunction = function (formula) {\n        if (formula.indexOf('^') > -1) {\n            var items_1 = [];\n            while (formula.indexOf('(') > -1) {\n                formula = formula.replace(/(\\([^\\(\\)]*\\))/g, function (text, item) {\n                    items_1.push(item);\n                    return ('~' + (items_1.length - 1));\n                });\n            }\n            items_1.push(formula);\n            formula = '~' + (items_1.length - 1);\n            while (formula.indexOf('~') > -1) {\n                formula = formula.replace(new RegExp('~' + '(\\\\d+)', 'g'), function (text, index) {\n                    return items_1[index].replace(/(\\w*)\\^(\\w*)/g, 'Math.pow' + '($1,$2)');\n                });\n            }\n        }\n        return formula;\n    };\n    return PivotEngine;\n}());\nexport { PivotEngine };\n","/**\n * Specifies pivot external events\n * @hidden\n */\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var enginePopulating = 'enginePopulating';\n/** @hidden */\nexport var enginePopulated = 'enginePopulated';\n/** @hidden */\nexport var onFieldDropped = 'onFieldDropped';\n/** @hidden */\nexport var beforePivotTableRender = 'beforePivotTableRender';\n/** @hidden */\nexport var afterPivotTableRender = 'afterPivotTableRender';\n/** @hidden */\nexport var beforeExport = 'beforeExport';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var hyperlinkCellClick = 'hyperlinkCellClick';\n/** @hidden */\nexport var resizing = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var cellClick = 'cellClick';\n/** @hidden */\nexport var drillThrough = 'drillThrough';\n/** @hidden */\nexport var beforeColumnsRender = 'beforeColumnsRender';\n/** @hidden */\nexport var selected = 'selected';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var beginDrillThrough = 'beginDrillThrough';\n/**\n * Specifies pivot internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var initSubComponent = 'init-groupingbar';\n/** @hidden */\nexport var treeViewUpdate = 'tree-view-update';\n/** @hidden */\nexport var pivotButtonUpdate = 'pivot-button-update';\n/** @hidden */\nexport var initCalculatedField = 'init-calculatedfield';\n/** @hidden */\nexport var click = 'click';\n","/**\n * CSS Constants\n * @hidden\n */\n/** @hidden */\nexport var ROOT = 'e-pivotfieldlist';\n/** @hidden */\nexport var RTL = 'e-rtl';\n/** @hidden */\nexport var DEVICE = 'e-device';\n/** @hidden */\nexport var ICON = 'e-icons';\n/** @hidden */\nexport var ICON_DISABLE = 'e-disable';\n/** @hidden */\nexport var ICON_HIDDEN = 'e-hide';\n/** @hidden */\nexport var AXISFIELD_ICON_CLASS = 'e-dropdown-icon';\nexport var WRAPPER_CLASS = 'e-pivotfieldlist-wrapper';\n/** @hidden */\nexport var CONTAINER_CLASS = 'e-field-list-container';\n/** @hidden */\nexport var TOGGLE_FIELD_LIST_CLASS = 'e-toggle-field-list';\n/** @hidden */\nexport var STATIC_FIELD_LIST_CLASS = 'e-static';\n/** @hidden */\nexport var TOGGLE_SELECT_CLASS = 'e-select-table';\n/** @hidden */\nexport var FIELD_TABLE_CLASS = 'e-field-table';\n/** @hidden */\nexport var FIELD_LIST_CLASS = 'e-field-list';\n/** @hidden */\nexport var FIELD_LIST_TREE_CLASS = 'e-field-list-tree';\n/** @hidden */\nexport var FIELD_HEADER_CLASS = 'e-field-header';\n/** @hidden */\nexport var FIELD_LIST_TITLE_CLASS = 'e-field-list-title';\n/** @hidden */\nexport var FIELD_LIST_TITLE_CONTENT_CLASS = 'e-title-content';\n/** @hidden */\nexport var FIELD_LIST_FOOTER_CLASS = 'e-field-list-footer';\n/** @hidden */\nexport var CALCULATED_FIELD_CLASS = 'e-calculated-field';\n/** @hidden */\nexport var FLAT_CLASS = 'e-flat e-primary';\n/** @hidden */\nexport var OUTLINE_CLASS = 'e-outline';\n/** @hidden */\nexport var AXIS_TABLE_CLASS = 'e-axis-table';\n/** @hidden */\nexport var LEFT_AXIS_PANEL_CLASS = 'e-left-axis-fields';\n/** @hidden */\nexport var RIGHT_AXIS_PANEL_CLASS = 'e-right-axis-fields';\n/** @hidden */\nexport var AXIS_HEADER_CLASS = 'e-axis-header';\n/** @hidden */\nexport var AXIS_CONTENT_CLASS = 'e-axis-content';\n/** @hidden */\nexport var AXIS_PROMPT_CLASS = 'e-draggable-prompt';\n/** @hidden */\nexport var PIVOT_BUTTON_WRAPPER_CLASS = 'e-pvt-btn-div';\n/** @hidden */\nexport var PIVOT_BUTTON_CLASS = 'e-pivot-button';\n/** @hidden */\nexport var PIVOT_BUTTON_CONTENT_CLASS = 'e-content';\n/** @hidden */\nexport var DRAG_CLONE_CLASS = 'e-button-drag-clone';\n/** @hidden */\nexport var SORT_CLASS = 'e-sort';\n/** @hidden */\nexport var SORT_DESCEND_CLASS = 'e-descend';\n/** @hidden */\nexport var FILTER_COMMON_CLASS = 'e-btn-filter';\n/** @hidden */\nexport var FILTER_CLASS = 'e-pv-filter';\n/** @hidden */\nexport var FILTERED_CLASS = 'e-pv-filtered';\n/** @hidden */\nexport var REMOVE_CLASS = 'e-remove';\n/** @hidden */\nexport var DRAG_CLASS = 'e-drag';\n/** @hidden */\nexport var DROP_INDICATOR_CLASS = 'e-drop-indicator';\n/** @hidden */\nexport var INDICATOR_HOVER_CLASS = 'e-drop-hover';\n/** @hidden */\nexport var MEMBER_EDITOR_DIALOG_CLASS = 'e-member-editor-dialog';\n/** @hidden */\nexport var EDITOR_TREE_WRAPPER_CLASS = 'e-member-editor-wrapper';\n/** @hidden */\nexport var EDITOR_TREE_CONTAINER_CLASS = 'e-member-editor-container';\n/** @hidden */\nexport var DRILLTHROUGH_GRID_CLASS = 'e-drillthrough-grid';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_CLASS = 'e-drillthrough-body';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_CONTAINER_CLASS = 'e-drillthrough-body-header-container';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_CLASS = 'e-drillthrough-body-header';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_COMMON_CLASS = 'e-drillthrough-body-header-common';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_VALUE_CLASS = 'e-drillthrough-body-header-value';\n/** @hidden */\nexport var DRILLTHROUGH_DIALOG = 'e-drillthrough-dialog';\n/** @hidden */\nexport var EDITOR_LABEL_WRAPPER_CLASS = 'e-editor-label-wrapper';\n/** @hidden */\nexport var EDITOR_LABEL_CLASS = 'e-editor-label';\n/** @hidden */\nexport var CHECK_BOX_FRAME_CLASS = 'e-frame';\n/** @hidden */\nexport var NODE_CHECK_CLASS = 'e-check';\n/** @hidden */\nexport var NODE_STOP_CLASS = 'e-stop';\n/** @hidden */\nexport var OK_BUTTON_CLASS = 'e-ok-btn';\n/** @hidden */\nexport var CANCEL_BUTTON_CLASS = 'e-cancel-btn';\n/** @hidden */\nexport var ERROR_DIALOG_CLASS = 'e-pivot-error-dialog';\n/** @hidden */\nexport var DROPPABLE_CLASS = 'e-droppable';\n/** @hidden */\nexport var ROW_AXIS_CLASS = 'e-rows';\n/** @hidden */\nexport var COLUMN_AXIS_CLASS = 'e-columns';\n/** @hidden */\nexport var VALUE_AXIS_CLASS = 'e-values';\n/** @hidden */\nexport var FILTER_AXIS_CLASS = 'e-filters';\n/** @hidden */\nexport var GROUPING_BAR_CLASS = 'e-grouping-bar';\n/** @hidden */\nexport var VALUE_COLUMN_CLASS = 'e-value-column';\n/** @hidden */\nexport var GROUP_ROW_CLASS = 'e-group-rows';\n/** @hidden */\nexport var GROUP_COLUMN_CLASS = 'e-group-columns';\n/** @hidden */\nexport var GROUP_FLEX_CLASS = 'e-group-flex';\n/** @hidden */\nexport var GROUP_VALUE_CLASS = 'e-group-values';\n/** @hidden */\nexport var GROUP_FILTER_CLASS = 'e-group-filters';\n/** @hidden */\nexport var DIALOG_CLOSE_ICON_CLASS = 'e-icon-btn';\n/** @hidden */\nexport var NO_DRAG_CLASS = 'e-drag-restrict';\n/** @hidden */\nexport var SELECTED_NODE_CLASS = 'e-list-selected';\n/** @hidden */\nexport var TITLE_HEADER_CLASS = 'e-title-header';\n/** @hidden */\nexport var TITLE_CONTENT_CLASS = 'e-title-content';\n/** @hidden */\nexport var TEXT_CONTENT_CLASS = 'e-text-content';\n/** @hidden */\nexport var FOOTER_CONTENT_CLASS = 'e-footer-content';\n/** @hidden */\nexport var ADAPTIVE_CONTAINER_CLASS = 'e-adaptive-container';\n/** @hidden */\nexport var ADAPTIVE_FIELD_LIST_BUTTON_CLASS = 'e-field-list-btn';\n/** @hidden */\nexport var ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS = 'e-calculated-field-btn';\n/** @hidden */\nexport var BUTTON_SMALL_CLASS = 'e-small';\n/** @hidden */\nexport var BUTTON_ROUND_CLASS = 'e-round';\n/** @hidden */\nexport var ADD_ICON_CLASS = 'e-add-icon';\n/** @hidden */\nexport var BUTTON_FLAT_CLASS = 'e-flat';\n/** @hidden */\nexport var STATIC_CENTER_DIV_CLASS = 'e-center-div';\n/** @hidden */\nexport var STATIC_CENTER_HEADER_CLASS = 'e-center-title';\n/** @hidden */\nexport var ADAPTIVE_FIELD_LIST_DIALOG_CLASS = 'e-adaptive-field-list-dialog';\n/** @hidden */\nexport var LIST_TEXT_CLASS = 'e-list-text';\n/** @hidden */\nexport var LIST_SELECT_CLASS = 'e-selected-node';\n/** @hidden */\nexport var LIST_FRAME_CLASS = 'e-frame';\n/** @hidden */\nexport var EXCEL_FILTER_ICON_CLASS = 'e-excl-filter-icon';\n/** @hidden */\nexport var SELECTED_MENU_ICON_CLASS = 'e-selected-menu-icon';\n/** @hidden */\nexport var EMPTY_ICON_CLASS = 'e-emptyicon';\n/** @hidden */\nexport var SUB_MENU_CLASS = 'e-submenu';\n/** @hidden */\nexport var FOCUSED_CLASS = 'e-focused';\n/** @hidden */\nexport var SELECTED_CLASS = 'e-selected';\n/** @hidden */\nexport var MENU_ITEM_CLASS = 'e-menu-item';\n/** @hidden */\nexport var FILTER_MENU_OPTIONS_CLASS = 'e-filtermenu-options';\n/** @hidden */\nexport var SELECTED_OPTION_ICON_CLASS = 'e-selected-option-icon';\n/** @hidden */\nexport var FILTER_DIV_CONTENT_CLASS = 'e-filter-div-content';\n/** @hidden */\nexport var FILTER_TEXT_DIV_CLASS = 'e-filter-text-div';\n/** @hidden */\nexport var BETWEEN_TEXT_DIV_CLASS = 'e-between-text-div';\n/** @hidden */\nexport var SEPARATOR_DIV_CLASS = 'e-separator-div';\n/** @hidden */\nexport var FILTER_OPTION_WRAPPER_1_CLASS = 'e-filter-option-wrapper-1';\n/** @hidden */\nexport var FILTER_OPTION_WRAPPER_2_CLASS = 'e-filter-option-wrapper-2';\n/** @hidden */\nexport var FILTER_INPUT_DIV_1_CLASS = 'e-filter-input-div-1';\n/** @hidden */\nexport var FILTER_INPUT_DIV_2_CLASS = 'e-filter-input-div-2';\n/** @hidden */\nexport var VALUE_OPTIONS_CLASS = 'e-value-options';\n/** @hidden */\nexport var FILTER_OPERATOR_CLASS = 'e-filter-operator';\n/** @hidden */\nexport var COLLAPSE = 'e-collapse';\n/** @hidden */\nexport var EXPAND = 'e-expand';\n/** @hidden */\nexport var TABLE = 'e-table';\n/** @hidden */\nexport var BODY = 'e-body';\n/** @hidden */\nexport var PIVOTBODY = 'e-pivotbody';\n/** @hidden */\nexport var COLUMNSHEADER = 'e-columnsheader';\n/** @hidden */\nexport var ROWSHEADER = 'e-rowsheader';\n/** @hidden */\nexport var VALUESCONTENT = 'e-valuescontent';\n/** @hidden */\nexport var VALUECELL = 'e-valuecell';\n/** @hidden */\nexport var PIVOTHEADER = 'e-pivotheader';\n/** @hidden */\nexport var PGHEADERS = 'e-pgheaders';\n/** @hidden */\nexport var TOPHEADER = 'e-topheader';\n/** @hidden */\nexport var HEADERCELL = 'e-headercell';\n/** @hidden */\nexport var SUMMARY = 'e-summary';\n/** @hidden */\nexport var CELLVALUE = 'e-cellvalue';\n/** @hidden */\nexport var ROW = 'e-row';\n/** @hidden */\nexport var PIVOTTOOLTIP = 'e-pivottooltip';\n/** @hidden */\nexport var TOOLTIP_HEADER = 'e-tooltipheader';\n/** @hidden */\nexport var TOOLTIP_CONTENT = 'e-tooltipcontent';\n/** @hidden */\nexport var NEXTSPAN = 'e-nextspan';\n/** @hidden */\nexport var LASTSPAN = 'e-lastspan';\n/** @hidden */\nexport var EDITOR_SEARCH_WRAPPER_CLASS = 'e-editor-search-wrapper';\n/** @hidden */\nexport var EDITOR_SEARCH_CLASS = 'e-editor-search';\n/** @hidden */\nexport var SELECT_ALL_WRAPPER_CLASS = 'e-select-all-wrapper';\n/** @hidden */\nexport var SELECT_ALL_CLASS = 'e-select-all';\n/** @hidden */\nexport var PIVOTCALC = 'e-pivot-calc';\n/** @hidden */\nexport var CALCDIALOG = 'e-pivot-calc-dialog-div';\n/** @hidden */\nexport var CALCRADIO = 'e-pivot-calc-radio';\n/** @hidden */\nexport var CALCCHECK = 'e-pivot-calc-check';\n/** @hidden */\nexport var CALCINPUT = 'e-pivot-calc-input';\n/** @hidden */\nexport var CALCINPUTDIV = 'e-pivot-calc-input-div';\n/** @hidden */\nexport var CALCOUTERDIV = 'e-pivot-calc-outer-div';\n/** @hidden */\nexport var FLAT = 'e-flat';\n/** @hidden */\nexport var FORMAT = 'e-format';\n/** @hidden */\nexport var FORMULA = 'e-pivot-formula';\n/** @hidden */\nexport var TREEVIEW = 'e-pivot-treeview';\n/** @hidden */\nexport var TREEVIEWOUTER = 'e-pivot-treeview-outer';\n/** @hidden */\nexport var CALCCANCELBTN = 'e-pivot-cancel-button';\n/** @hidden */\nexport var CALCADDBTN = 'e-pivot-add-button';\n/** @hidden */\nexport var CALCOKBTN = 'e-pivot-ok-button';\n/** @hidden */\nexport var CALCACCORD = 'e-pivot-accord';\n/** @hidden */\nexport var CALCBUTTONDIV = 'e-pivot-button-div';\n/** @hidden */\nexport var AXIS_ICON_CLASS = 'e-axis';\n/** @hidden */\nexport var AXIS_ROW_CLASS = 'e-axis-row';\n/** @hidden */\nexport var AXIS_COLUMN_CLASS = 'e-axis-column';\n/** @hidden */\nexport var AXIS_VALUE_CLASS = 'e-axis-value';\n/** @hidden */\nexport var AXIS_FILTER_CLASS = 'e-axis-filter';\n/** @hidden */\nexport var AXIS_NAVIGATE_WRAPPER_CLASS = 'e-axis-nav-div';\n/** @hidden */\nexport var LEFT_NAVIGATE_WRAPPER_CLASS = 'e-left-nav-wrapper';\n/** @hidden */\nexport var RIGHT_NAVIGATE_WRAPPER_CLASS = 'e-right-nav-wrapper';\n/** @hidden */\nexport var LEFT_NAVIGATE_CLASS = 'e-left-nav-icon';\n/** @hidden */\nexport var RIGHT_NAVIGATE_CLASS = 'e-right-nav-icon';\n/** @hidden */\nexport var GRID_CLASS = 'e-grid';\n/** @hidden */\nexport var PIVOT_VIEW_CLASS = 'e-pivotview';\n/** @hidden */\nexport var PIVOT_ALL_FIELD_TITLE_CLASS = 'e-pivot-all-field-title';\n/** @hidden */\nexport var PIVOT_FORMULA_TITLE_CLASS = 'e-pivot-formula-title';\n/** @hidden */\nexport var PIVOT_CONTEXT_MENU_CLASS = 'e-pivot-context-menu';\n/** @hidden */\nexport var MENU_DISABLE = 'e-disabled';\n/** @hidden */\nexport var EMPTY_MEMBER_CLASS = 'e-member-prompt';\n/** @hidden */\nexport var CALC_EDIT = 'e-edit';\n/** @hidden */\nexport var CALC_EDITED = 'e-edited';\n/** @hidden */\nexport var EMPTY_FIELD = 'e-empty-field';\n/** @hidden */\nexport var FORMAT_DIALOG = 'e-pivot-formatting-dialog';\n/** @hidden */\nexport var FORMAT_CONDITION_BUTTON = 'e-format-condition-button';\n/** @hidden */\nexport var FORMAT_NEW = 'e-new-format';\n/** @hidden */\nexport var FORMAT_OUTER = 'e-format-outer-div';\n/** @hidden */\nexport var FORMAT_INNER = 'e-format-inner-div';\n/** @hidden */\nexport var FORMAT_TABLE = 'e-format-table';\n/** @hidden */\nexport var FORMAT_VALUE_LABEL = 'e-format-value-label';\n/** @hidden */\nexport var FORMAT_LABEL = 'e-format-label';\n/** @hidden */\nexport var INPUT = 'e-input';\n/** @hidden */\nexport var FORMAT_VALUE1 = 'e-format-value1';\n/** @hidden */\nexport var FORMAT_VALUE2 = 'e-format-value2';\n/** @hidden */\nexport var FORMAT_VALUE_SPAN = 'e-format-value-span';\n/** @hidden */\nexport var FORMAT_FONT_COLOR = 'e-format-font-color';\n/** @hidden */\nexport var FORMAT_BACK_COLOR = 'e-format-back-color';\n/** @hidden */\nexport var FORMAT_VALUE_PREVIEW = 'e-format-value-preview';\n/** @hidden */\nexport var FORMAT_COLOR_PICKER = 'e-format-color-picker';\n/** @hidden */\nexport var FORMAT_DELETE_ICON = 'e-format-delete-icon';\n/** @hidden */\nexport var FORMAT_DELETE_BUTTON = 'e-format-delete-button';\n/** @hidden */\nexport var SELECTED_COLOR = 'e-selected-color';\n/** @hidden */\nexport var DIALOG_HEADER = 'e-dlg-header';\n/** @hidden */\nexport var FORMAT_APPLY_BUTTON = 'e-format-apply-button';\n/** @hidden */\nexport var FORMAT_CANCEL_BUTTON = 'e-format-cancel-button';\n/** @hidden */\nexport var FORMAT_ROUND_BUTTON = 'e-small e-round';\n/** @hidden */\nexport var VIRTUALTRACK_DIV = 'e-virtualtrack';\n/** @hidden */\nexport var MOVABLECONTENT_DIV = 'e-movablecontent';\n/** @hidden */\nexport var FROZENCONTENT_DIV = 'e-frozencontent';\n/** @hidden */\nexport var MOVABLEHEADER_DIV = 'e-movableheader';\n/** @hidden */\nexport var FROZENHEADER_DIV = 'e-frozenheader';\n/** @hidden */\nexport var DEFER_APPLY_BUTTON = 'e-defer-apply-button';\n/** @hidden */\nexport var DEFER_CANCEL_BUTTON = 'e-defer-cancel-button';\n/** @hidden */\nexport var LAYOUT_FOOTER = 'e-layout-footer';\n/** @hidden */\nexport var CELL_SELECTED_BGCOLOR = 'e-cellselectionbackground';\n/** @hidden */\nexport var SELECTED_BGCOLOR = 'e-selectionbackground';\n/** @hidden */\nexport var BUTTON_LAYOUT = 'e-button-layout';\n/** @hidden */\nexport var CHECKBOX_LAYOUT = 'e-checkbox-layout';\n/** @hidden */\nexport var DEFER_UPDATE_BUTTON = 'e-defer-update-btn';\n/** @hidden */\nexport var HEADERCONTENT = 'e-headercontent';\n/** @hidden */\nexport var BACK_ICON = 'e-field-list-back-icon';\n/** @hidden */\nexport var TITLE_MOBILE_HEADER = 'e-title-mobile-header';\n/** @hidden */\nexport var TITLE_MOBILE_CONTENT = 'e-title-mobile-content';\n/** @hidden */\nexport var ROW_CELL_CLASS = 'e-rowcell';\n/** @hidden */\nexport var CELL_ACTIVE_BGCOLOR = 'e-active';\n/** @hidden */\nexport var SPAN_CLICKED = 'e-spanclicked';\n/** @hidden */\nexport var ROW_SELECT = 'e-rowselect';\n/** @hidden */\nexport var GRID_HEADER = 'e-gridheader';\n","import { Reorder, headerRefreshed } from '@syncfusion/ej2-grids';\nimport { Grid, Resize, ExcelExport, PdfExport, ContextMenu, Freeze } from '@syncfusion/ej2-grids';\nimport { Selection } from '@syncfusion/ej2-grids';\nimport { createElement, setStyleAttribute, remove, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\n/**\n * Module to render PivotGrid control\n */\n/** @hidden */\nvar Render = /** @class */ (function () {\n    /** Constructor for render module */\n    function Render(parent) {\n        this.colPos = 0;\n        this.lastSpan = 0;\n        this.parent = parent;\n        this.engine = parent.engineModule;\n        this.gridSettings = parent.gridSettings;\n        this.formatList = this.getFormatList();\n    }\n    /** @hidden */\n    /* tslint:disable */\n    Render.prototype.render = function () {\n        var parent = this.parent;\n        var engine = this.parent.engineModule;\n        this.injectGridModules(parent);\n        this.rowStartPos = this.getRowStartPos();\n        if (this.parent.grid && this.parent.grid.element && this.parent.element.querySelector('.e-grid')) {\n            if (!engine.isEngineUpdated) {\n                engine.headerContent = this.frameDataSource('header');\n                engine.valueContent = this.frameDataSource('value');\n            }\n            else {\n                if (this.parent.enableValueSorting) {\n                    engine.valueContent = this.frameDataSource('value');\n                }\n                engine.isEngineUpdated = false;\n            }\n            /* tslint:disable */\n            this.parent.grid.setProperties({\n                columns: this.frameStackedHeaders(), dataSource: parent.dataSource.values.length > 0 && !this.engine.isEmptyData ? engine.valueContent :\n                    this.frameDataSource('value')\n            }, true);\n            /* tslint:enable */\n            this.parent.grid.notify('datasource-modified', {});\n            this.parent.grid.refreshColumns();\n            var e = this.parent.element.querySelector('.e-movablecontent');\n            e.querySelector('colGroup').innerHTML =\n                this.parent.grid.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n            this.parent.grid.width = this.calculateGridWidth();\n            if (this.parent.height > (this.engine.valueContent.length * this.gridSettings.rowHeight)) {\n                this.parent.grid.height = 'auto';\n            }\n            else {\n                this.parent.grid.height = this.parent.height;\n            }\n        }\n        else {\n            this.parent.element.innerHTML = '';\n            this.bindGrid(this.parent, (this.engine.isEmptyData ? true : false));\n            this.parent.element.appendChild(createElement('div', { id: this.parent.element.id + '_grid' }));\n            this.parent.grid.appendTo('#' + this.parent.element.id + '_grid');\n        }\n        /* tslint:disable */\n        this.parent.grid.on(headerRefreshed, this.refreshHeader, this);\n    };\n    Render.prototype.refreshHeader = function () {\n        if (this.parent.enableVirtualization) {\n            var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n            var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n            var vtr = mCont.querySelector('.' + cls.VIRTUALTRACK_DIV);\n            this.parent.virtualHeaderDiv = mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV);\n            if (mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n                remove(mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV));\n            }\n            else {\n                this.parent.virtualHeaderDiv = createElement('div', { className: cls.VIRTUALTRACK_DIV });\n            }\n            mHdr.appendChild(this.parent.virtualHeaderDiv);\n            if (vtr) {\n                setStyleAttribute(this.parent.virtualHeaderDiv, { height: 0, width: vtr.style.width });\n            }\n            setStyleAttribute(mHdr.querySelector('.e-table'), {\n                transform: (mCont.querySelector('.e-table').style.transform).split(',')[0] + ',' + 0 + 'px)'\n            });\n            mHdr.scrollLeft = mCont.scrollLeft;\n        }\n    };\n    /** @hidden */\n    Render.prototype.bindGrid = function (parent, isEmpty) {\n        this.injectGridModules(parent);\n        this.parent.grid = new Grid({\n            frozenColumns: 1,\n            frozenRows: 0,\n            dataSource: isEmpty ? this.frameEmptyData() : this.frameDataSource('value'),\n            columns: isEmpty ? this.frameEmptyColumns() : this.frameStackedHeaders(),\n            height: ((this.engine && (parent.height > (this.engine.valueContent.length * this.gridSettings.rowHeight)))\n                || isEmpty) ? 'auto' : parent.height,\n            width: isEmpty ? this.parent.width : this.calculateGridWidth(),\n            locale: parent.locale,\n            enableRtl: parent.enableRtl,\n            allowExcelExport: parent.allowExcelExport,\n            allowPdfExport: parent.allowPdfExport,\n            allowResizing: this.gridSettings.allowResizing,\n            allowTextWrap: this.gridSettings.allowTextWrap,\n            allowReordering: this.gridSettings.allowReordering,\n            allowSelection: this.gridSettings.allowSelection,\n            contextMenuItems: this.gridSettings.contextMenuItems,\n            selectedRowIndex: this.gridSettings.selectedRowIndex,\n            selectionSettings: this.gridSettings.selectionSettings,\n            printMode: this.gridSettings.printMode,\n            rowHeight: this.gridSettings.rowHeight,\n            gridLines: this.gridSettings.gridLines,\n            contextMenuClick: this.gridSettings.contextMenuClick ? this.gridSettings.contextMenuClick.bind(this.parent) : undefined,\n            contextMenuOpen: this.gridSettings.contextMenuOpen ? this.gridSettings.contextMenuOpen.bind(this.parent) : undefined,\n            beforeCopy: this.gridSettings.beforeCopy ? this.gridSettings.beforeCopy.bind(this.parent) : undefined,\n            beforePrint: this.gridSettings.beforePrint ? this.gridSettings.beforePrint.bind(this.parent) : undefined,\n            printComplete: this.gridSettings.printComplete ? this.gridSettings.printComplete.bind(this.parent) : undefined,\n            rowSelecting: this.gridSettings.rowSelecting ? this.gridSettings.rowSelecting.bind(this.parent) : undefined,\n            rowSelected: this.rowSelected.bind(this),\n            rowDeselecting: this.gridSettings.rowDeselecting ? this.gridSettings.rowDeselecting.bind(this.parent) : undefined,\n            rowDeselected: this.rowDeselected.bind(this),\n            cellSelecting: this.gridSettings.cellSelecting ? this.gridSettings.cellSelecting.bind(this.parent) : undefined,\n            cellSelected: this.cellSelected.bind(this),\n            cellDeselecting: this.gridSettings.cellDeselecting ? this.gridSettings.cellDeselecting.bind(this.parent) : undefined,\n            cellDeselected: this.cellDeselected.bind(this),\n            resizeStart: this.gridSettings.resizeStart ? this.gridSettings.resizeStart.bind(this.parent) : undefined,\n            columnDragStart: this.gridSettings.columnDragStart ? this.gridSettings.columnDragStart.bind(this) : undefined,\n            columnDrag: this.gridSettings.columnDrag ? this.gridSettings.columnDrag.bind(this) : undefined,\n            columnDrop: this.gridSettings.columnDrop ? this.gridSettings.columnDrop.bind(this) : undefined,\n            resizing: this.setGroupWidth.bind(this),\n            resizeStop: this.onResizeStop.bind(this),\n            queryCellInfo: this.queryCellInfo.bind(this),\n            dataBound: this.dataBound.bind(this),\n            headerCellInfo: this.headerCellInfo.bind(this),\n            excelHeaderQueryCellInfo: this.excelHeaderQueryCellInfo.bind(this),\n            pdfHeaderQueryCellInfo: this.pdfHeaderQueryCellInfo.bind(this),\n            excelQueryCellInfo: this.excelQueryCellInfo.bind(this),\n            pdfQueryCellInfo: this.pdfQueryCellInfo.bind(this)\n        });\n    };\n    Render.prototype.rowSelected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.rowSelected, args);\n    };\n    Render.prototype.rowDeselected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.rowDeselected, args);\n    };\n    Render.prototype.cellSelected = function (args) {\n        if (this.parent.rowRangeSelection.enable) {\n            this.parent.grid.selectionModule.selectRowsByRange(this.parent.rowRangeSelection.startIndex, this.parent.rowRangeSelection.endIndex);\n            this.parent.rowRangeSelection.enable = false;\n        }\n        else {\n            this.parent.renderModule.selected();\n            this.parent.trigger(events.selected, args);\n        }\n    };\n    Render.prototype.cellDeselected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.cellDeselected, args);\n    };\n    Render.prototype.queryCellInfo = function (args) {\n        this.parent.renderModule.rowCellBoundEvent(args);\n    };\n    Render.prototype.headerCellInfo = function (args) {\n        this.parent.renderModule.columnCellBoundEvent(args);\n    };\n    Render.prototype.excelHeaderQueryCellInfo = function (args) {\n        this.parent.renderModule.excelColumnEvent(args);\n    };\n    Render.prototype.pdfQueryCellInfo = function (args) {\n        this.parent.renderModule.pdfRowEvent(args);\n    };\n    Render.prototype.excelQueryCellInfo = function (args) {\n        this.parent.renderModule.excelRowEvent(args);\n    };\n    Render.prototype.pdfHeaderQueryCellInfo = function (args) {\n        this.parent.renderModule.pdfColumnEvent(args);\n    };\n    Render.prototype.dataBound = function (args) {\n        if (this.parent.element.querySelector('.e-firstcell')) {\n            if (this.parent.enableRtl) {\n                this.parent.element.querySelector('.e-firstcell').style.borderRight = 'none';\n            }\n            else {\n                this.parent.element.querySelector('.e-firstcell').style.borderLeft = 'none';\n            }\n        }\n        this.parent.grid.widthService.setWidthToTable();\n        this.parent.notify(events.contentReady, {});\n    };\n    Render.prototype.injectGridModules = function (parent) {\n        Grid.Inject(Freeze);\n        if (parent.allowExcelExport) {\n            Grid.Inject(ExcelExport);\n        }\n        if (parent.allowPdfExport) {\n            Grid.Inject(PdfExport);\n        }\n        if (this.gridSettings.allowSelection) {\n            Grid.Inject(Selection);\n        }\n        if (this.gridSettings.allowReordering) {\n            Grid.Inject(Reorder);\n        }\n        if (this.gridSettings.allowResizing) {\n            Grid.Inject(Resize);\n        }\n        if (this.gridSettings.contextMenuItems) {\n            Grid.Inject(ContextMenu);\n        }\n    };\n    /** @hidden */\n    Render.prototype.updateGridSettings = function () {\n        this.injectGridModules(this.parent);\n        this.parent.grid.allowResizing = this.gridSettings.allowResizing;\n        this.parent.grid.allowTextWrap = this.gridSettings.allowTextWrap;\n        this.parent.grid.allowReordering = this.gridSettings.allowReordering;\n        this.parent.grid.allowSelection = this.gridSettings.allowSelection;\n        this.parent.grid.contextMenuItems = this.gridSettings.contextMenuItems;\n        this.parent.grid.selectedRowIndex = this.gridSettings.selectedRowIndex;\n        this.parent.grid.selectionSettings = this.gridSettings.selectionSettings;\n        this.parent.grid.printMode = this.gridSettings.printMode;\n        this.parent.grid.rowHeight = this.gridSettings.rowHeight;\n        this.parent.grid.gridLines = this.gridSettings.gridLines;\n    };\n    Render.prototype.appendValueSortIcon = function (cell, tCell, rCnt, cCnt) {\n        var vSort = this.parent.dataSource.valueSortSettings;\n        var len = (cell.type === 'grand sum' && this.parent.dataSource.values.length === 1 && !this.parent.dataSource.alwaysShowValueHeader) ? 0 :\n            (this.parent.dataSource.values.length > 1 || this.parent.dataSource.alwaysShowValueHeader) ? (this.parent.engineModule.headerContent.length - 1) :\n                this.parent.dataSource.columns.length === 0 ? 0 : (this.parent.engineModule.headerContent.length - 1);\n        var lock = (vSort && vSort.headerText) ? cell.valueSort.levelName === vSort.headerText : cCnt === vSort.columnIndex;\n        if (vSort !== undefined && lock && rCnt === len && this.parent.dataSource.valueAxis === 'column') {\n            if (tCell.querySelector('.e-sortfilterdiv')) {\n                tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ? 'e-descending' : 'e-ascending');\n                tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ?\n                    'e-icon-descending' : 'e-icon-ascending');\n            }\n            else {\n                tCell.appendChild(createElement('div', {\n                    className: (vSort.sortOrder === 'Descending' ?\n                        'e-icon-descending e-icons e-descending e-sortfilterdiv' : 'e-icon-ascending e-icons e-ascending e-sortfilterdiv'),\n                }));\n            }\n            if (!isNullOrUndefined(cell.hasChild) && cell.type !== 'grand sum' && tCell.querySelector('.e-expand') &&\n                (tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending'))) {\n                var element = (tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending'));\n                setStyleAttribute(element, { 'padding-top': '12px' });\n            }\n        }\n        return tCell;\n    };\n    Render.prototype.onResizeStop = function (args) {\n        var column = args.column.field === '0.formattedText' ? '0.formattedText' :\n            args.column.customAttributes.cell.valueSort.levelName;\n        this.parent.resizeInfo[column] =\n            Number(args.column.width.toString().split('px')[0]);\n        this.setGroupWidth(args);\n    };\n    Render.prototype.setGroupWidth = function (args) {\n        if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n            this.parent.groupingBarModule.refreshUI();\n            if (this.parent.element.querySelector('.e-group-row').offsetWidth < 245 && !this.parent.firstColWidth) {\n                args.cancel = true;\n                var gridColumn = this.parent.grid.columns;\n                var resColWidth = (this.parent.isAdaptive ? 180 : 250);\n                if (gridColumn && gridColumn.length > 0) {\n                    gridColumn[0].width = resColWidth;\n                }\n                this.parent.element.querySelector('.e-frozenheader').querySelector('col').style.width = (resColWidth + 'px');\n                this.parent.element.querySelector('.e-frozencontent').querySelector('col').style.width = (resColWidth + 'px');\n            }\n            this.parent.element.querySelector('.e-group-values').style.width =\n                this.parent.element.querySelector('.e-group-row').offsetWidth + 'px';\n            this.parent.element.querySelector('.e-group-row').style.height =\n                this.parent.element.querySelector('.e-headercontent').offsetHeight + 'px';\n        }\n        this.parent.trigger(args.e.type === 'touchend' || args.e.type === 'mouseup' ? events.resizeStop : events.resizing, args);\n    };\n    /* tslint:disable */\n    /** @hidden */\n    Render.prototype.selected = function () {\n        clearTimeout(this.timeOutObj);\n        this.timeOutObj = setTimeout(this.onSelect.bind(this), 300);\n    };\n    Render.prototype.onSelect = function () {\n        var pivotArgs = { selectedCellsInfo: [], pivotValues: this.parent.pivotValues };\n        var selectedElements = this.parent.element.querySelectorAll('.' + cls.CELL_SELECTED_BGCOLOR + ',.' + cls.SELECTED_BGCOLOR);\n        for (var _i = 0, selectedElements_1 = selectedElements; _i < selectedElements_1.length; _i++) {\n            var element = selectedElements_1[_i];\n            var colIndex = Number(element.getAttribute('aria-colindex'));\n            var rowIndex = Number(element.getAttribute('index'));\n            var cell = this.engine.pivotValues[rowIndex][colIndex];\n            if (cell) {\n                if (cell.axis === 'value') {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.value,\n                        columnHeaders: cell.columnHeaders,\n                        rowHeaders: cell.rowHeaders,\n                        measure: cell.actualText.toString()\n                    });\n                }\n                else if (cell.axis === 'column') {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.formattedText,\n                        columnHeaders: cell.valueSort.levelName,\n                        rowHeaders: '',\n                        measure: ''\n                    });\n                }\n                else {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.formattedText,\n                        columnHeaders: '',\n                        rowHeaders: cell.valueSort.levelName,\n                        measure: ''\n                    });\n                }\n            }\n        }\n        this.parent.trigger(events.cellSelected, pivotArgs);\n    };\n    Render.prototype.rowCellBoundEvent = function (args) {\n        var tCell = args.cell;\n        if (tCell && this.engine) {\n            var customClass = this.parent.hyperlinkSettings.cssClass;\n            tCell.setAttribute('index', (Number(tCell.getAttribute('index')) + this.engine.headerContent.length).toString());\n            var cell = args.data[0];\n            if (tCell.getAttribute('aria-colindex') === '0') {\n                var isValueCell = cell.type && cell.type === 'value';\n                tCell.innerText = '';\n                var level = cell.level ? cell.level : (isValueCell ? (this.lastSpan + 1) : 0);\n                do {\n                    if (level > 0) {\n                        tCell.appendChild(createElement('span', {\n                            className: level === 0 ? '' : cls.NEXTSPAN,\n                        }));\n                    }\n                    level--;\n                } while (level > -1);\n                level = cell.level ? cell.level : 0;\n                this.lastSpan = !isValueCell ? level : this.lastSpan;\n                if (!cell.hasChild && level > 0) {\n                    tCell.appendChild(createElement('span', {\n                        className: cls.LASTSPAN,\n                    }));\n                }\n                var fieldName = void 0;\n                if ((this.parent.dataSource.rows.length > 0 &&\n                    (cell.valueSort ? Object.keys(cell.valueSort).length > 0 : true))) {\n                    fieldName = level > -1 ? this.parent.dataSource.rows[level].name : '';\n                    tCell.setAttribute('fieldname', fieldName);\n                }\n                var localizedText = cell.formattedText;\n                if (cell.type) {\n                    if (cell.type === 'grand sum') {\n                        tCell.classList.add('e-gtot');\n                        localizedText = this.parent.localeObj.getConstant('grandTotal');\n                    }\n                    else {\n                        tCell.classList.add('e-stot');\n                    }\n                }\n                tCell.classList.add(cls.ROWSHEADER);\n                if (cell.hasChild === true) {\n                    tCell.appendChild(createElement('div', {\n                        className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n                        attrs: {\n                            'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') :\n                                this.parent.localeObj.getConstant('expand')\n                        }\n                    }));\n                }\n                tCell.appendChild(createElement('span', {\n                    className: cls.CELLVALUE,\n                    innerHTML: (this.parent.isRowCellHyperlink || cell.enableHyperlink ? '<a  data-url=\"' + localizedText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + localizedText + '</a>' : localizedText)\n                }));\n                var vSort = this.parent.pivotView.dataSource.valueSortSettings;\n                if (vSort && vSort.headerText && this.parent.dataSource.valueAxis === 'row'\n                    && this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName) {\n                    if (this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName\n                        === vSort.headerText) {\n                        var style = (tCell.querySelector('.e-expand') || tCell.querySelector('.e-collapse')) ? 'padding-top: 18px' :\n                            'padding-top: 12px';\n                        tCell.appendChild(createElement('div', {\n                            className: (vSort.sortOrder === 'Descending' ?\n                                'e-icon-descending e-icons e-descending e-sortfilterdiv' : 'e-icon-ascending e-icons e-ascending e-sortfilterdiv'),\n                            styles: style\n                        }));\n                    }\n                }\n            }\n            else {\n                var innerText = tCell.innerText;\n                tCell.innerText = '';\n                tCell.classList.add(cls.VALUESCONTENT);\n                cell = args.data[Number(tCell.getAttribute('aria-colindex'))];\n                if (cell.isSum) {\n                    tCell.classList.add(cls.SUMMARY);\n                }\n                if (cell.cssClass) {\n                    tCell.classList.add(cell.cssClass);\n                }\n                tCell.appendChild(createElement('span', {\n                    className: cls.CELLVALUE,\n                    innerHTML: ((tCell.className.indexOf('e-summary') !== -1 && this.parent.isSummaryCellHyperlink) ||\n                        (tCell.className.indexOf('e-summary') === -1 && this.parent.isValueCellHyperlink) ||\n                        cell.enableHyperlink ? '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>' : innerText)\n                }));\n            }\n            this.unWireEvents(tCell);\n            this.wireEvents(tCell);\n        }\n        this.parent.trigger(events.queryCellInfo, args);\n    };\n    Render.prototype.columnCellBoundEvent = function (args) {\n        if (args.cell.column && args.cell.column.customAttributes) {\n            var cell = args.cell.column.customAttributes.cell;\n            var tCell = args.node;\n            if (cell) {\n                var customClass = this.parent.hyperlinkSettings.cssClass;\n                var level = cell.level ? cell.level : 0;\n                if ((cell.level === -1 && !cell.rowSpan && cell.rowIndex !== this.engine.headerContent.length - 1)\n                    || cell.rowSpan === -1) {\n                    args.node.style.display = 'none';\n                }\n                else if (cell.rowSpan > 1) {\n                    args.node.setAttribute('rowspan', cell.rowSpan.toString());\n                    args.node.setAttribute('aria-rowspan', cell.rowSpan.toString());\n                    if ((cell.rowIndex + cell.rowSpan) === this.engine.headerContent.length) {\n                        args.node.style.borderBottomWidth = '0px';\n                    }\n                }\n                args.node.setAttribute('aria-colindex', cell.colIndex.toString());\n                args.node.setAttribute('index', cell.rowIndex.toString());\n                var fieldName = void 0;\n                if (!(this.parent.dataSource.values && this.parent.dataSource.valueAxis === 'column' && this.parent.dataSource.values.length > 1 &&\n                    (cell.rowIndex === this.engine.headerContent.length - 1)) && this.parent.dataSource.columns &&\n                    this.parent.dataSource.columns.length > 0) {\n                    fieldName = level > -1 ? this.parent.dataSource.columns[level].name : '';\n                    tCell.setAttribute('fieldname', fieldName);\n                }\n                if (cell.type) {\n                    tCell.classList.add(cell.type === 'grand sum' ? 'e-gtot' : 'e-stot');\n                    var localizedText = cell.type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') :\n                        cell.formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total');\n                    if (tCell.querySelector('.e-headertext') !== null) {\n                        tCell.querySelector('.e-headertext').innerText = localizedText;\n                    }\n                    else {\n                        tCell.querySelector('.e-stackedheadercelldiv').innerText = localizedText;\n                    }\n                }\n                tCell.classList.add(cls.COLUMNSHEADER);\n                if (this.parent.isColumnCellHyperlink || cell.enableHyperlink) {\n                    if (tCell.querySelector('.e-stackedheadercelldiv')) {\n                        var innerText = tCell.querySelector('.e-stackedheadercelldiv').innerText;\n                        tCell.querySelector('.e-stackedheadercelldiv').innerHTML = '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n                    }\n                    else if (tCell.querySelector('.e-headertext')) {\n                        var innerText = tCell.querySelector('.e-headertext').innerText;\n                        tCell.querySelector('.e-headertext').innerHTML = '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n                    }\n                }\n                if (cell.hasChild === true) {\n                    var hdrdiv = tCell.querySelector('.e-headercelldiv');\n                    if (hdrdiv) {\n                        hdrdiv.style.height = 'auto';\n                        hdrdiv.style.lineHeight = 'normal';\n                    }\n                    var div = createElement('div', {\n                        className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n                        attrs: {\n                            'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') :\n                                this.parent.localeObj.getConstant('expand')\n                        }\n                    });\n                    tCell.children[0].classList.add(cls.CELLVALUE);\n                    if (window.navigator.userAgent.indexOf('Edge') > -1 || window.navigator.userAgent.indexOf('Trident') > -1) {\n                        tCell.children[0].style.display = 'table';\n                    }\n                    else {\n                        tCell.children[0].style.display = 'block';\n                    }\n                    tCell.insertBefore(div, tCell.children[0]);\n                }\n                tCell = this.appendValueSortIcon(cell, tCell, cell.rowIndex, cell.colIndex);\n                this.unWireEvents(tCell);\n                this.wireEvents(tCell);\n            }\n        }\n        this.parent.trigger(events.headerCellInfo, args);\n    };\n    Render.prototype.onHyperCellClick = function (e) {\n        var cell = e.target.parentElement.parentElement;\n        cell = (cell.className.indexOf('e-headercelldiv') > -1 ? cell.parentElement : cell);\n        var args = {\n            currentCell: cell,\n            data: this.engine.pivotValues[Number(cell.getAttribute('index'))][Number(cell.getAttribute('aria-colindex'))],\n            cancel: true\n        };\n        this.parent.trigger(events.hyperlinkCellClick, args);\n        if (!args.cancel) {\n            window.open(e.target.getAttribute('data-url'));\n        }\n    };\n    Render.prototype.getRowStartPos = function () {\n        var pivotValues = this.parent.pivotValues;\n        var rowPos;\n        for (var rCnt = 0; rCnt < pivotValues.length; rCnt++) {\n            if (pivotValues[rCnt] && pivotValues[rCnt][0] && pivotValues[rCnt][0].axis === 'row') {\n                rowPos = rCnt;\n                break;\n            }\n        }\n        return rowPos;\n    };\n    Render.prototype.frameDataSource = function (type) {\n        var dataContent = [];\n        if (this.parent.dataSource.values.length > 0 && !this.engine.isEmptyData) {\n            if ((this.parent.enableValueSorting) || !this.engine.isEngineUpdated) {\n                var rowCnt = 0;\n                var pivotValues = this.parent.pivotValues;\n                var start = type === 'value' ? this.rowStartPos : 0;\n                var end = type === 'value' ? pivotValues.length : this.rowStartPos;\n                for (var rCnt = start; rCnt < end; rCnt++) {\n                    if (pivotValues[rCnt]) {\n                        rowCnt = type === 'header' ? rCnt : rowCnt;\n                        dataContent[rowCnt] = {};\n                        for (var cCnt = 0; cCnt < pivotValues[rCnt].length; cCnt++) {\n                            if (pivotValues[rCnt][cCnt]) {\n                                dataContent[rowCnt][cCnt] = pivotValues[rCnt][cCnt];\n                            }\n                        }\n                        rowCnt++;\n                    }\n                }\n            }\n            else {\n                dataContent = type === 'value' ? this.engine.valueContent : this.engine.headerContent;\n            }\n        }\n        else {\n            dataContent = this.frameEmptyData();\n        }\n        return dataContent;\n    };\n    Render.prototype.frameEmptyData = function () {\n        var dataContent = [{\n                0: { formattedText: this.parent.localeObj.getConstant('grandTotal') },\n                1: { formattedText: this.parent.localeObj.getConstant('emptyData') }\n            }];\n        return dataContent;\n    };\n    Render.prototype.calculateColWidth = function (colCount) {\n        var parWidth = isNaN(this.parent.width) ? (this.parent.width.toString().indexOf('%') > -1 ?\n            ((parseFloat(this.parent.width.toString()) / 100) * this.parent.element.offsetWidth) : this.parent.element.offsetWidth) :\n            Number(this.parent.width);\n        var resColWidth = (this.parent.showGroupingBar && this.parent.groupingBarModule) ? (this.parent.isAdaptive ? 180 : 250) : (this.parent.isAdaptive ? 140 : 200);\n        if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.grid && this.parent.dataSource.rows.length > 0) {\n            parWidth = parWidth - (this.gridSettings.columnWidth > resColWidth ? this.gridSettings.columnWidth : resColWidth);\n            colCount = colCount - 1;\n        }\n        var colWidth = (colCount * this.gridSettings.columnWidth + 78) < parWidth ? (parWidth / colCount) : this.gridSettings.columnWidth;\n        return colWidth;\n    };\n    Render.prototype.calculateGridWidth = function () {\n        var parWidth = this.parent.width;\n        if (this.parent.width === 'auto' && this.parent.element.offsetWidth < this.parent.totColWidth) {\n            parWidth = this.parent.element.offsetWidth;\n        }\n        return parWidth;\n    };\n    Render.prototype.frameStackedHeaders = function () {\n        var integrateModel = [];\n        if (this.parent.dataSource.values.length > 0 && !this.engine.isEmptyData) {\n            var headerCnt = this.engine.headerContent.length;\n            var headerSplit = [];\n            var splitPos = [];\n            var colWidth = this.calculateColWidth(this.engine.pivotValues[0].length);\n            do {\n                var columnModel = [];\n                var actualCnt = 0;\n                headerCnt--;\n                var colField = this.engine.headerContent[headerCnt];\n                if (colField) {\n                    for (var cCnt = 0; cCnt < Object.keys(colField).length + (colField[0] ? 0 : 1); cCnt++) {\n                        var colSpan = (colField[cCnt] && colField[cCnt].colSpan) ? colField[cCnt].colSpan : 1;\n                        var rowSpan = (colField[cCnt] && colField[cCnt].rowSpan) ? colField[cCnt].rowSpan : 1;\n                        var formattedText = colField[cCnt] ? (colField[cCnt].type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') :\n                            (colField[cCnt].type === 'sum' ? colField[cCnt].formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total') :\n                                colField[cCnt].formattedText)) : '';\n                        if (headerCnt === this.engine.headerContent.length - 1) {\n                            columnModel[actualCnt] = {\n                                field: (cCnt + '.formattedText'),\n                                headerText: formattedText,\n                                customAttributes: { 'cell': colField[cCnt] },\n                                width: colField[cCnt] ?\n                                    this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) : colWidth,\n                                minWidth: 30,\n                                format: cCnt === 0 ? '' : this.formatList[(cCnt - 1) % this.parent.dataSource.values.length],\n                                allowReordering: this.parent.gridSettings.allowReordering,\n                                allowResizing: this.parent.gridSettings.allowResizing,\n                                visible: true\n                            };\n                        }\n                        else if (headerSplit[cCnt]) {\n                            var tmpSpan = colSpan;\n                            var innerModel = [];\n                            var innerPos = cCnt;\n                            while (tmpSpan > 0) {\n                                if (columnModel[actualCnt]) {\n                                    if (!integrateModel[splitPos[innerPos]]) {\n                                        break;\n                                    }\n                                    innerModel.push(integrateModel[splitPos[innerPos]]);\n                                }\n                                else {\n                                    columnModel[actualCnt] = {\n                                        headerText: formattedText,\n                                        customAttributes: { 'cell': colField[cCnt] },\n                                        width: colField[cCnt] ?\n                                            this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) : colWidth,\n                                        minWidth: 30,\n                                        allowReordering: this.parent.gridSettings.allowReordering,\n                                        allowResizing: this.parent.gridSettings.allowResizing,\n                                        visible: true\n                                    };\n                                    innerModel = [integrateModel[splitPos[innerPos]]];\n                                }\n                                tmpSpan = tmpSpan - headerSplit[innerPos];\n                                innerPos = innerPos + headerSplit[innerPos];\n                            }\n                            columnModel[actualCnt].columns = innerModel;\n                        }\n                        if (columnModel[actualCnt]) {\n                            columnModel[actualCnt].clipMode = this.gridSettings.clipMode;\n                        }\n                        headerSplit[cCnt] = colSpan;\n                        splitPos[cCnt] = actualCnt;\n                        actualCnt++;\n                        cCnt = cCnt + colSpan - 1;\n                    }\n                }\n                integrateModel = columnModel.length > 0 ? columnModel : integrateModel;\n            } while (headerCnt > 0);\n            var resColWidth = (this.parent.showGroupingBar && this.parent.groupingBarModule) ? (this.parent.isAdaptive ? 180 : 250) : (this.parent.isAdaptive ? 140 : 200);\n            integrateModel[0] = {\n                field: (0 + '.formattedText'),\n                width: this.setSavedWidth('0.formattedText', colWidth < resColWidth ? resColWidth : colWidth),\n                minWidth: 30,\n                headerText: '',\n                allowReordering: false,\n                allowResizing: this.parent.gridSettings.allowResizing,\n                visible: true\n            };\n        }\n        else {\n            integrateModel = this.frameEmptyColumns();\n        }\n        this.parent.triggerColumnRenderEvent(integrateModel);\n        return integrateModel;\n    };\n    /** @hidden */\n    Render.prototype.setSavedWidth = function (column, width) {\n        width = this.parent.resizeInfo[column] ? this.parent.resizeInfo[column] : width;\n        return width;\n    };\n    Render.prototype.frameEmptyColumns = function () {\n        var columns = [];\n        var colWidth = this.calculateColWidth(2);\n        columns.push({ field: '0.formattedText', headerText: '', minWidth: 30, width: colWidth });\n        columns.push({ field: '1.formattedText', headerText: this.parent.localeObj.getConstant('grandTotal'), minWidth: 30, width: colWidth });\n        return columns;\n    };\n    /** @hidden */\n    Render.prototype.getFormatList = function () {\n        var formatArray = [];\n        for (var vCnt = 0; vCnt < this.parent.dataSource.values.length; vCnt++) {\n            var field = this.parent.dataSource.values[vCnt];\n            if (this.parent.dataSource.formatSettings.length > 0) {\n                var format = '';\n                for (var fCnt = 0; fCnt < this.parent.dataSource.formatSettings.length; fCnt++) {\n                    var formatSettings = this.parent.dataSource.formatSettings[fCnt];\n                    if (field.name === formatSettings.name) {\n                        format = formatSettings.format;\n                        break;\n                    }\n                    else {\n                        continue;\n                    }\n                }\n                formatArray.push(format);\n            }\n            else {\n                formatArray.push('N');\n            }\n        }\n        return formatArray;\n    };\n    Render.prototype.excelColumnEvent = function (args) {\n        args = this.exportHeaderEvent(args);\n        this.parent.trigger(events.excelHeaderQueryCellInfo, args);\n    };\n    Render.prototype.pdfColumnEvent = function (args) {\n        args = this.exportHeaderEvent(args);\n        this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n    };\n    Render.prototype.excelRowEvent = function (args) {\n        if (args.column.field === '0.formattedText') {\n            var isValueCell = args.data[0].type === 'value';\n            var level = isValueCell ? (this.lastSpan + 1) : args.data[0].level;\n            this.colPos = 0;\n            args.style = { hAlign: 'Left', indent: level * 2 };\n            this.lastSpan = isValueCell ? this.lastSpan : level;\n        }\n        else {\n            this.colPos++;\n            args.value = args.data[this.colPos].value || args.data[this.colPos].formattedText;\n        }\n        args = this.exportContentEvent(args);\n        this.parent.trigger(events.excelQueryCellInfo, args);\n    };\n    /* tslint:disable:no-any */\n    Render.prototype.pdfRowEvent = function (args) {\n        args = this.exportContentEvent(args);\n        if (args.column.field === '0.formattedText') {\n            var isValueCell = args.data[0].type === 'value';\n            var level = isValueCell ? (this.lastSpan + 1) : args.data[0].level;\n            args.style = { paragraphIndent: level * 10 };\n            this.lastSpan = isValueCell ? this.lastSpan : level;\n        }\n        this.parent.trigger(events.pdfQueryCellInfo, args);\n    };\n    Render.prototype.exportHeaderEvent = function (args) {\n        var rowSpan = 1;\n        if (args.gridCell.column.customAttributes) {\n            var cell = args.gridCell.column.customAttributes.cell;\n            rowSpan = cell.rowSpan ? cell.rowSpan : 1;\n        }\n        else {\n            rowSpan = Object.keys(this.engine.headerContent).length;\n        }\n        if (args.cell.rowSpan && args.cell.rowSpan !== rowSpan && rowSpan > -1) {\n            args.cell.rowSpan = rowSpan;\n        }\n        return args;\n    };\n    Render.prototype.exportContentEvent = function (args) {\n        args.value = args.data[Number(args.column.field.split('.formattedText')[0])].type === 'grand sum' ?\n            this.parent.localeObj.getConstant('grandTotal') : args.value;\n        return args;\n    };\n    Render.prototype.unWireEvents = function (cell) {\n        if (cell.querySelector('.e-hyperlinkcell')) {\n            EventHandler.remove(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick);\n        }\n        else {\n            return;\n        }\n    };\n    Render.prototype.wireEvents = function (cell) {\n        if (cell.querySelector('.e-hyperlinkcell')) {\n            EventHandler.add(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick, this);\n        }\n        else {\n            return;\n        }\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Complex, Collection, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the fields in dataSource.\n */\nvar FieldOptions = /** @class */ (function (_super) {\n    __extends(FieldOptions, _super);\n    function FieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"caption\", void 0);\n    __decorate([\n        Property('Sum')\n    ], FieldOptions.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"axis\", void 0);\n    __decorate([\n        Property(false)\n    ], FieldOptions.prototype, \"showNoDataItems\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"baseField\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"baseItem\", void 0);\n    __decorate([\n        Property(true)\n    ], FieldOptions.prototype, \"showSubTotals\", void 0);\n    return FieldOptions;\n}(ChildProperty));\nexport { FieldOptions };\nvar FieldListFieldOptions = /** @class */ (function (_super) {\n    __extends(FieldListFieldOptions, _super);\n    function FieldListFieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return FieldListFieldOptions;\n}(FieldOptions));\nexport { FieldListFieldOptions };\n/**\n * Configures the style settings.\n */\nvar Style = /** @class */ (function (_super) {\n    __extends(Style, _super);\n    function Style() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Style.prototype, \"backgroundColor\", void 0);\n    __decorate([\n        Property()\n    ], Style.prototype, \"color\", void 0);\n    __decorate([\n        Property()\n    ], Style.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Property()\n    ], Style.prototype, \"fontSize\", void 0);\n    return Style;\n}(ChildProperty));\nexport { Style };\n/**\n * Configures the filter settings.\n */\nvar Filter = /** @class */ (function (_super) {\n    __extends(Filter, _super);\n    function Filter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Filter.prototype, \"name\", void 0);\n    __decorate([\n        Property('Include')\n    ], Filter.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"items\", void 0);\n    __decorate([\n        Property('DoesNotEquals')\n    ], Filter.prototype, \"condition\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"value1\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"value2\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"measure\", void 0);\n    return Filter;\n}(ChildProperty));\nexport { Filter };\n/**\n * Configures the conditional format settings.\n */\nvar ConditionalFormatSettings = /** @class */ (function (_super) {\n    __extends(ConditionalFormatSettings, _super);\n    function ConditionalFormatSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"measure\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"label\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"conditions\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"value1\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"value2\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"style\", void 0);\n    return ConditionalFormatSettings;\n}(ChildProperty));\nexport { ConditionalFormatSettings };\n/**\n * Configures the sort settings.\n */\nvar Sort = /** @class */ (function (_super) {\n    __extends(Sort, _super);\n    function Sort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Sort.prototype, \"name\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], Sort.prototype, \"order\", void 0);\n    return Sort;\n}(ChildProperty));\nexport { Sort };\n/**\n * Configures the format settings of value fields.\n */\nvar FormatSettings = /** @class */ (function (_super) {\n    __extends(FormatSettings, _super);\n    function FormatSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"minimumFractionDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"maximumFractionDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"minimumSignificantDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"maximumSignificantDigits\", void 0);\n    __decorate([\n        Property(true)\n    ], FormatSettings.prototype, \"useGrouping\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"skeleton\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"currency\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"minimumIntegerDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"format\", void 0);\n    return FormatSettings;\n}(ChildProperty));\nexport { FormatSettings };\n/**\n * Configures the calculatedfields settings.\n */\nvar CalculatedFieldSettings = /** @class */ (function (_super) {\n    __extends(CalculatedFieldSettings, _super);\n    function CalculatedFieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], CalculatedFieldSettings.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], CalculatedFieldSettings.prototype, \"formula\", void 0);\n    return CalculatedFieldSettings;\n}(ChildProperty));\nexport { CalculatedFieldSettings };\n/**\n * Configures drilled state of field members.\n */\nvar DrillOptions = /** @class */ (function (_super) {\n    __extends(DrillOptions, _super);\n    function DrillOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], DrillOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], DrillOptions.prototype, \"items\", void 0);\n    return DrillOptions;\n}(ChildProperty));\nexport { DrillOptions };\n/**\n * Configures value sort settings.\n */\nvar ValueSortSettings = /** @class */ (function (_super) {\n    __extends(ValueSortSettings, _super);\n    function ValueSortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], ValueSortSettings.prototype, \"headerText\", void 0);\n    __decorate([\n        Property('.')\n    ], ValueSortSettings.prototype, \"headerDelimiter\", void 0);\n    __decorate([\n        Property('None')\n    ], ValueSortSettings.prototype, \"sortOrder\", void 0);\n    return ValueSortSettings;\n}(ChildProperty));\nexport { ValueSortSettings };\n/**\n * Configures the settings of dataSource.\n */\nvar DataSource = /** @class */ (function (_super) {\n    __extends(DataSource, _super);\n    function DataSource() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], DataSource.prototype, \"data\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"rows\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"columns\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"values\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"filters\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"expandAll\", void 0);\n    __decorate([\n        Property('column')\n    ], DataSource.prototype, \"valueAxis\", void 0);\n    __decorate([\n        Collection([], Filter)\n    ], DataSource.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Collection([], Sort)\n    ], DataSource.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"enableSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"allowLabelFilter\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"allowValueFilter\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showSubTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showRowSubTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showColumnSubTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showGrandTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showRowGrandTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showColumnGrandTotals\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"alwaysShowValueHeader\", void 0);\n    __decorate([\n        Property([])\n    ], DataSource.prototype, \"formatSettings\", void 0);\n    __decorate([\n        Collection([], DrillOptions)\n    ], DataSource.prototype, \"drilledMembers\", void 0);\n    __decorate([\n        Complex({}, ValueSortSettings)\n    ], DataSource.prototype, \"valueSortSettings\", void 0);\n    __decorate([\n        Collection([], CalculatedFieldSettings)\n    ], DataSource.prototype, \"calculatedFieldSettings\", void 0);\n    __decorate([\n        Collection([], ConditionalFormatSettings)\n    ], DataSource.prototype, \"conditionalFormatSettings\", void 0);\n    __decorate([\n        Property()\n    ], DataSource.prototype, \"emptyCellsTextContent\", void 0);\n    return DataSource;\n}(ChildProperty));\nexport { DataSource };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Event } from '@syncfusion/ej2-base';\n/**\n *  Represents Pivot widget model class.\n */\nvar GridSettings = /** @class */ (function (_super) {\n    __extends(GridSettings, _super);\n    function GridSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], GridSettings.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property(false)\n    ], GridSettings.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Property(false)\n    ], GridSettings.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(true)\n    ], GridSettings.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(null)\n    ], GridSettings.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property(110)\n    ], GridSettings.prototype, \"columnWidth\", void 0);\n    __decorate([\n        Property('Ellipsis')\n    ], GridSettings.prototype, \"clipMode\", void 0);\n    __decorate([\n        Property(false)\n    ], GridSettings.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], GridSettings.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Property({ mode: 'Row', cellSelectionMode: 'Flow', type: 'Single' })\n    ], GridSettings.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], GridSettings.prototype, \"printMode\", void 0);\n    __decorate([\n        Property()\n    ], GridSettings.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"beforeColumnsRender\", void 0);\n    return GridSettings;\n}(ChildProperty));\nexport { GridSettings };\n","import { Workbook } from '@syncfusion/ej2-excel-export';\nimport * as events from '../../common/base/constant';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the PivotGrid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent) {\n        this.parent = parent;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'excelExport';\n    };\n    /**\n     * Method to perform excel export.\n     * @hidden\n     */\n    ExcelExport.prototype.exportToExcel = function (type) {\n        /** Event trigerring */\n        if (this.parent.enableVirtualization) {\n            var pageSettings = this.parent.engineModule.pageSettings;\n            this.parent.engineModule.pageSettings = null;\n            this.parent.engineModule.generateGridData(this.parent.dataSource);\n            this.parent.engineModule.pageSettings = pageSettings;\n        }\n        var args = {\n            fileName: 'default', header: '', footer: '', dataCollections: [this.parent.engineModule.pivotValues]\n        };\n        this.parent.trigger(events.beforeExport, args);\n        var fileName = args.fileName;\n        var header = args.header;\n        var footer = args.footer;\n        var dataCollections = args.dataCollections;\n        /** Fill data and export */\n        /* tslint:disable-next-line:no-any */\n        var workSheets = [];\n        for (var dataColl = 0; dataColl < dataCollections.length; dataColl++) {\n            var pivotValues = dataCollections[dataColl];\n            var colLen = 0;\n            var rowLen = pivotValues.length;\n            var actualrCnt = 0;\n            var formatList = this.parent.renderModule.getFormatList();\n            var rows = [];\n            var maxLevel = 0;\n            for (var rCnt = 0; rCnt < rowLen; rCnt++) {\n                if (pivotValues[rCnt]) {\n                    actualrCnt++;\n                    colLen = pivotValues[rCnt].length;\n                    var cells = [];\n                    for (var cCnt = 0; cCnt < colLen; cCnt++) {\n                        if (pivotValues[rCnt][cCnt]) {\n                            var pivotCell = pivotValues[rCnt][cCnt];\n                            if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                var cellValue = pivotCell.axis === 'value' ? pivotCell.value : pivotCell.formattedText;\n                                if (pivotCell.type === 'grand sum') {\n                                    cellValue = this.parent.localeObj.getConstant('grandTotal');\n                                }\n                                else if (pivotCell.type === 'sum') {\n                                    cellValue = cellValue.toString().replace('Total', this.parent.localeObj.getConstant('total'));\n                                }\n                                else {\n                                    cellValue = cellValue;\n                                }\n                                if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                    cells.push({\n                                        index: cCnt + 1, value: cellValue,\n                                        colSpan: pivotCell.colSpan, rowSpan: pivotCell.rowSpan,\n                                    });\n                                    if (pivotCell.axis === 'value') {\n                                        cells[cells.length - 1].style = {\n                                            numberFormat: formatList[(cCnt - 1) % this.parent.dataSource.values.length],\n                                            bold: false,\n                                            wrapText: true\n                                        };\n                                        if (pivotCell.style) {\n                                            cells[cells.length - 1].style.backColor = pivotCell.style.backgroundColor;\n                                            cells[cells.length - 1].style.fontColor = pivotCell.style.color;\n                                            cells[cells.length - 1].style.fontName = pivotCell.style.fontFamily;\n                                            cells[cells.length - 1].style.fontSize = Number(pivotCell.style.fontSize.split('px')[0]);\n                                        }\n                                    }\n                                    else {\n                                        cells[cells.length - 1].style = {\n                                            bold: true,\n                                            vAlign: 'Center',\n                                            wrapText: true,\n                                            indent: cCnt === 1 ? pivotCell.level * 10 : 0\n                                        };\n                                        if (pivotCell.axis === 'row' && cCnt === 0) {\n                                            cells[cells.length - 1].style.hAlign = 'Left';\n                                            cells[cells.length - 1].style.indent = pivotCell.level * 2;\n                                            maxLevel = pivotCell.level > maxLevel ? pivotCell.level : maxLevel;\n                                        }\n                                    }\n                                    cells[cells.length - 1].style.borders = { color: '#000000', lineStyle: 'Thin' };\n                                }\n                            }\n                            cCnt = cCnt + (pivotCell.colSpan ? (pivotCell.colSpan - 1) : 0);\n                        }\n                        else {\n                            cells.push({\n                                index: cCnt + 1, value: '', colSpan: 1, rowSpan: 1,\n                            });\n                        }\n                    }\n                    rows.push({ index: actualrCnt, cells: cells });\n                }\n            }\n            var columns = [];\n            for (var cCnt = 0; cCnt < colLen; cCnt++) {\n                columns.push({ index: cCnt + 1, width: 100 });\n            }\n            if (maxLevel > 0) {\n                columns[0].width = 100 + (maxLevel * 20);\n            }\n            workSheets.push({ columns: columns, rows: rows });\n        }\n        var book = new Workbook({ worksheets: workSheets }, type === 'Excel' ? 'xlsx' : 'csv');\n        book.save(fileName + (type === 'Excel' ? '.xlsx' : '.csv'));\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import { PdfGrid, PdfPen, PointF, PdfDocument, PdfStandardFont, PdfFontFamily, PdfSolidBrush, PdfColor, PdfStringFormat, PdfVerticalAlignment, PdfTextAlignment, PdfFontStyle, PdfPageTemplateElement, RectangleF, PdfLayoutFormat } from '@syncfusion/ej2-pdf-export';\nimport * as events from '../../common/base/constant';\n/**\n * @hidden\n * `PDFExport` module is used to handle the PDF export action.\n */\nvar PDFExport = /** @class */ (function () {\n    /**\n     * Constructor for the PivotGrid PDF Export module.\n     * @hidden\n     */\n    function PDFExport(parent) {\n        this.parent = parent;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    PDFExport.prototype.getModuleName = function () {\n        return 'pdfExport';\n    };\n    /**\n     * Method to perform pdf export.\n     * @hidden\n     */\n    PDFExport.prototype.exportToPDF = function () {\n        var eventParams = this.applyEvent();\n        /** Fill data and export */\n        var dataCollIndex = 0;\n        var gridResult;\n        var pivotValues = eventParams.args.dataCollections[dataCollIndex];\n        var colLength = pivotValues && pivotValues.length > 0 ? pivotValues[0].length : 0;\n        var integratedCnt = 0;\n        do {\n            var pdfGrid = new PdfGrid();\n            if (pivotValues && pivotValues.length > 0) {\n                pdfGrid.columns.add(pivotValues[0].length - integratedCnt >= 6 ? 6 : pivotValues[0].length - integratedCnt);\n                var rowLen = pivotValues.length;\n                var actualrCnt = 0;\n                var maxLevel = 0;\n                for (var rCnt = 0; rCnt < rowLen; rCnt++) {\n                    if (pivotValues[rCnt]) {\n                        var isColHeader = !(pivotValues[rCnt][0] && pivotValues[rCnt][0].axis === 'row');\n                        var colLen = pivotValues[rCnt].length > (integratedCnt + 6) ? (integratedCnt + 6) :\n                            pivotValues[rCnt].length;\n                        if (isColHeader) {\n                            pdfGrid.headers.add(1);\n                        }\n                        var pdfGridRow = !isColHeader ? pdfGrid.rows.addRow() : pdfGrid.headers.getHeader(actualrCnt);\n                        var localCnt = 0;\n                        var isEmptyRow = true;\n                        for (var cCnt = integratedCnt; cCnt < colLen; cCnt++) {\n                            var isValueCell = false;\n                            if (pivotValues[rCnt][cCnt]) {\n                                var pivotCell = pivotValues[rCnt][cCnt];\n                                if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                    var cellValue = pivotCell.formattedText;\n                                    cellValue = pivotCell.type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') :\n                                        (pivotCell.type === 'sum' ?\n                                            cellValue.toString().replace('Total', this.parent.localeObj.getConstant('total')) : cellValue);\n                                    if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                        pdfGridRow.cells.getCell(localCnt).columnSpan = pivotCell.colSpan ?\n                                            (6 - localCnt < pivotCell.colSpan ? 6 - localCnt : pivotCell.colSpan) : 1;\n                                        if (isColHeader && pivotCell.rowSpan && pivotCell.rowSpan > 1) {\n                                            pdfGridRow.cells.getCell(localCnt).rowSpan = pivotCell.rowSpan ? pivotCell.rowSpan : 1;\n                                        }\n                                        pdfGridRow.cells.getCell(localCnt).value = cellValue ? cellValue.toString() : '';\n                                    }\n                                    if (cellValue !== '') {\n                                        isEmptyRow = false;\n                                    }\n                                }\n                                maxLevel = pivotCell.level > maxLevel && cCnt === 0 ? pivotCell.level : maxLevel;\n                                isValueCell = pivotCell.axis === 'value';\n                                cCnt = cCnt + (pdfGridRow.cells.getCell(localCnt).columnSpan ?\n                                    (pdfGridRow.cells.getCell(localCnt).columnSpan - 1) : 0);\n                                localCnt = localCnt + (pdfGridRow.cells.getCell(localCnt).columnSpan ?\n                                    (pdfGridRow.cells.getCell(localCnt).columnSpan - 1) : 0);\n                                if (pivotCell.style) {\n                                    pdfGridRow = this.applyStyle(pdfGridRow, pivotCell, localCnt);\n                                }\n                            }\n                            else {\n                                pdfGridRow.cells.getCell(localCnt).value = '';\n                                if (cCnt === 0 && isColHeader && this.parent.dataSource.columns &&\n                                    this.parent.dataSource.columns.length > 0) {\n                                    pdfGrid.headers.getHeader(0).cells.getCell(0).rowSpan++;\n                                }\n                            }\n                            var stringFormat = new PdfStringFormat();\n                            stringFormat.paragraphIndent = (!isColHeader && cCnt === 0 && pivotValues[rCnt][cCnt]) ?\n                                pivotValues[rCnt][cCnt].level * 15 : 0;\n                            stringFormat.alignment = isValueCell ? PdfTextAlignment.Right : PdfTextAlignment.Left;\n                            stringFormat.lineAlignment = PdfVerticalAlignment.Middle;\n                            pdfGridRow.cells.getCell(localCnt).style.stringFormat = stringFormat;\n                            localCnt++;\n                        }\n                        if (isEmptyRow) {\n                            pdfGridRow.height = 16;\n                        }\n                        actualrCnt++;\n                    }\n                }\n                if (integratedCnt === 0) {\n                    pdfGrid.columns.getColumn(0).width = 100 + (maxLevel * 20);\n                }\n            }\n            var layout = new PdfLayoutFormat();\n            layout.paginateBounds = new RectangleF(0, 0, 0, 0);\n            if (integratedCnt === 0 && this.parent.dataSource.columns && this.parent.dataSource.columns.length > 0) {\n                pdfGrid.headers.getHeader(0).cells.getCell(0).rowSpan--;\n            }\n            if (gridResult) {\n                gridResult = pdfGrid.draw(gridResult.page, new PointF(10, gridResult.bounds.y + gridResult.bounds.height + 10), layout);\n            }\n            else {\n                gridResult = pdfGrid.draw(eventParams.page, new PointF(10, 20), layout);\n            }\n            integratedCnt = integratedCnt + 6;\n            if (integratedCnt >= colLength && eventParams.args.dataCollections.length > (dataCollIndex + 1)) {\n                dataCollIndex++;\n                pivotValues = eventParams.args.dataCollections[dataCollIndex];\n                colLength = pivotValues && pivotValues.length > 0 ? pivotValues[0].length : 0;\n                integratedCnt = 0;\n            }\n        } while (integratedCnt < colLength);\n        eventParams.document.save(eventParams.args.fileName + '.pdf');\n        eventParams.document.destroy();\n    };\n    PDFExport.prototype.applyStyle = function (pdfGridRow, pivotCell, localCnt) {\n        var color = this.parent.conditionalFormattingModule.hexToRgb(pivotCell.style.backgroundColor);\n        var brush = new PdfSolidBrush(new PdfColor(color.r, color.g, color.b));\n        pdfGridRow.cells.getCell(localCnt).style.backgroundBrush = brush;\n        var size = Number(pivotCell.style.fontSize.split('px')[0]);\n        var font = new PdfStandardFont(PdfFontFamily.TimesRoman, size, PdfFontStyle.Regular);\n        pdfGridRow.cells.getCell(localCnt).style.font = font;\n        color = this.parent.conditionalFormattingModule.hexToRgb(pivotCell.style.color);\n        brush = new PdfSolidBrush(new PdfColor(color.r, color.g, color.b));\n        pdfGridRow.cells.getCell(localCnt).style.textBrush = brush;\n        return pdfGridRow;\n    };\n    PDFExport.prototype.applyEvent = function () {\n        /** Event trigerring */\n        if (this.parent.enableVirtualization) {\n            var pageSettings = this.parent.engineModule.pageSettings;\n            this.parent.engineModule.pageSettings = null;\n            this.parent.engineModule.generateGridData(this.parent.dataSource);\n            this.parent.engineModule.pageSettings = pageSettings;\n        }\n        var args = {\n            fileName: 'default', header: '', footer: '', dataCollections: [this.parent.engineModule.pivotValues]\n        };\n        this.parent.trigger(events.beforeExport, args);\n        var fileName = args.fileName;\n        var header = args.header;\n        var footer = args.footer;\n        var dataCollections = args.dataCollections;\n        var document = new PdfDocument();\n        var page = document.pages.add();\n        /** Header and Footer to be set */\n        var font = new PdfStandardFont(PdfFontFamily.TimesRoman, 15, PdfFontStyle.Regular);\n        var brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        var pen = new PdfPen(new PdfColor(0, 0, 0), .5);\n        var headerTemplate = new PdfPageTemplateElement(new RectangleF(0, 0, page.graphics.clientSize.width, 20));\n        headerTemplate.graphics.drawString(header, font, pen, brush, 0, 0, new PdfStringFormat(PdfTextAlignment.Center));\n        document.template.top = headerTemplate;\n        var footerTemplate = new PdfPageTemplateElement(new RectangleF(0, 0, page.graphics.clientSize.width, 20));\n        footerTemplate.graphics.drawString(footer, font, pen, brush, 0, 0, new PdfStringFormat(PdfTextAlignment.Center));\n        document.template.bottom = footerTemplate;\n        return { document: document, page: page, args: args };\n    };\n    return PDFExport;\n}());\nexport { PDFExport };\n","import { KeyboardEvents, closest, addClass, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\n/**\n * PivotView Keyboard interaction\n */\n/** @hidden */\nvar KeyboardInteraction = /** @class */ (function () {\n    /**\n     * Constructor\n     */\n    function KeyboardInteraction(parent) {\n        this.keyConfigs = {\n            tab: 'tab',\n            enter: 'enter',\n            shiftUp: 'shift+upArrow',\n            shiftDown: 'shift+downArrow',\n            shiftLeft: 'shift+leftArrow',\n            shiftRight: 'shift+rightArrow',\n            upArrow: 'upArrow',\n            downArrow: 'downArrow',\n            leftArrow: 'leftArrow',\n            rightArrow: 'rightArrow',\n            escape: 'escape'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.pivotViewKeyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    }\n    KeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'tab':\n                this.processTab(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'shiftUp':\n            case 'shiftDown':\n            case 'shiftLeft':\n            case 'shiftRight':\n            case 'upArrow':\n            case 'downArrow':\n            case 'leftArrow':\n            case 'rightArrow':\n                this.processSelection(e);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n        }\n    };\n    KeyboardInteraction.prototype.getNextButton = function (target) {\n        var allPivotButtons = [].slice.call(this.parent.element.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n        var nextElement = target;\n        if (this.parent.grid.element.querySelector('.' + cls.PIVOT_BUTTON_CLASS)) {\n            var len = allPivotButtons.length;\n            for (var i = 0; i < len; i++) {\n                if (allPivotButtons[i].getAttribute('data-uid') === target.getAttribute('data-uid')) {\n                    nextElement = allPivotButtons[i + 1] ? allPivotButtons[i + 1] : nextElement;\n                    break;\n                }\n            }\n        }\n        return nextElement;\n    };\n    KeyboardInteraction.prototype.processTab = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS)) {\n            var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n            var nextButton = this.getNextButton(target);\n            if (nextButton.getAttribute('data-uid') !== target.getAttribute('data-uid')) {\n                gridFocus.currentInfo.skipAction = true;\n                nextButton.focus();\n            }\n            else {\n                gridFocus.focus();\n                var element = gridFocus.getFocusedElement();\n                addClass([element], ['e-focused', 'e-focus']);\n                element.setAttribute('tabindex', '0');\n            }\n            e.preventDefault();\n            return;\n        }\n        else if (!this.parent.showGroupingBar && this.parent.showFieldList) {\n            if (target && closest(target, '.' + cls.TOGGLE_FIELD_LIST_CLASS)) {\n                var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n                gridFocus.focus();\n                var element = gridFocus.getFocusedElement();\n                addClass([element], ['e-focused', 'e-focus']);\n                element.setAttribute('tabindex', '0');\n            }\n        }\n        else if (!this.parent.showGroupingBar && !this.parent.showFieldList) {\n            if (target && closest(target, '.' + cls.PIVOT_VIEW_CLASS)) {\n                var gridElement = closest(target, '.' + cls.PIVOT_VIEW_CLASS);\n                var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n                var rows = [].slice.call(gridElement.getElementsByTagName('tr'));\n                if (target.innerHTML === (rows[rows.length - 1]).lastChild.innerHTML) {\n                    gridFocus.currentInfo.skipAction = true;\n                }\n                else {\n                    gridFocus.focus();\n                    var element = gridFocus.getFocusedElement();\n                    addClass([element], ['e-focused', 'e-focus']);\n                    element.setAttribute('tabindex', '0');\n                }\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processEnter = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.GRID_CLASS)) {\n            if (target.querySelector('.' + cls.ICON)) {\n                target.querySelector('.' + cls.ICON).click();\n            }\n            else if (target.classList.contains('e-valuescontent')) {\n                target.dispatchEvent(new MouseEvent('dblclick', {\n                    'view': window,\n                    'bubbles': true,\n                    'cancelable': true\n                }));\n            }\n            e.preventDefault();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.clearSelection = function () {\n        var control = this.parent;\n        /* tslint:disable */\n        control.element.querySelectorAll('.' + cls.CELL_SELECTED_BGCOLOR + ',.' + cls.SELECTED_BGCOLOR).forEach(function (ele) {\n            ele.classList.remove(cls.SELECTED_BGCOLOR, cls.CELL_SELECTED_BGCOLOR, cls.CELL_ACTIVE_BGCOLOR);\n        });\n        this.parent.renderModule.selected();\n        /* tslint:enable */\n    };\n    KeyboardInteraction.prototype.processSelection = function (e) {\n        if (this.parent.gridSettings.allowSelection && this.parent.gridSettings.selectionSettings.mode !== 'Row') {\n            var target = e.target;\n            var control = this.parent;\n            var colIndex = Number(e.target.getAttribute('aria-colIndex'));\n            var rowIndex = Number(e.target.getAttribute('index'));\n            var ele = void 0;\n            /* tslint:disable */\n            if (target.nodeName === 'TH' || target.nodeName === 'TD') {\n                if (e.action === 'shiftUp' || e.action === 'upArrow') {\n                    ele = (rowIndex === 0 || colIndex === 0 || (target.nodeName !== 'TH' &&\n                        control.renderModule.rowStartPos !== rowIndex)) ? null : this.getParentElement(control, ele, colIndex, rowIndex - 1);\n                }\n                else if (e.action === 'shiftDown' || e.action === 'downArrow') {\n                    ele = control.element.querySelector('th[aria-colindex=\"' + colIndex + '\"][index=\"' + (rowIndex + 1) + '\"]');\n                }\n                else if (e.action === 'shiftLeft' || e.action === 'leftArrow') {\n                    ele = e.target.previousSibling;\n                }\n                else {\n                    ele = e.target.nextSibling;\n                }\n            }\n            if (!isNullOrUndefined(ele)) {\n                if (control.gridSettings.selectionSettings.mode === 'Both' ? !ele.classList.contains(cls.ROW_CELL_CLASS) : true) {\n                    colIndex = Number(ele.getAttribute('aria-colindex'));\n                    rowIndex = Number(ele.getAttribute('index'));\n                    var colSpan = Number(ele.getAttribute('aria-colspan'));\n                    control.clearSelection(ele, e, colIndex, rowIndex);\n                    control.applyColumnSelection(e, ele, colIndex, colIndex + (colSpan > 0 ? (colSpan - 1) : 0), rowIndex);\n                }\n                else {\n                    control.clearSelection(ele, e, colIndex, rowIndex);\n                }\n            }\n            else {\n                if (e.action === 'upArrow') {\n                    ele = control.element.querySelector('[aria-colindex=\"' + colIndex + '\"][index=\"' + (rowIndex - 1) + '\"]');\n                    rowIndex--;\n                }\n                else if (e.action === 'downArrow') {\n                    ele = control.element.querySelector('[aria-colindex=\"' + colIndex + '\"][index=\"' + (rowIndex + 1) + '\"]');\n                    rowIndex++;\n                }\n                if (!isNullOrUndefined(ele)) {\n                    control.clearSelection(ele, e, colIndex, rowIndex);\n                }\n            }\n        }\n        /* tslint:enable */\n    };\n    KeyboardInteraction.prototype.getParentElement = function (control, ele, colIndex, rowIndex) {\n        while (!ele) {\n            ele = control.element.querySelector('[aria-colindex=\"' + colIndex + '\"][index=\"' + rowIndex + '\"]');\n            colIndex--;\n        }\n        return ele;\n    };\n    /**\n     * To destroy the keyboard module.\n     * @return {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.destroy = function () {\n        if (this.pivotViewKeyboardModule) {\n            this.pivotViewKeyboardModule.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return KeyboardInteraction;\n}());\nexport { KeyboardInteraction };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\n/**\n * Module to render Pivot button\n */\n/** @hidden */\nvar PivotContextMenu = /** @class */ (function () {\n    /** Constructor for render module */\n    function PivotContextMenu(parent) {\n        this.parent = parent;\n        this.parent.contextMenuModule = this;\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns void\n     * @private\n     */\n    PivotContextMenu.prototype.render = function () {\n        this.renderContextMenu();\n    };\n    PivotContextMenu.prototype.renderContextMenu = function () {\n        var menuItems = [\n            { text: this.parent.localeObj.getConstant('addToFilter'), id: 'Context_Filters' },\n            { text: this.parent.localeObj.getConstant('addToRow'), id: 'Context_Rows' },\n            { text: this.parent.localeObj.getConstant('addToColumn'), id: 'Context_Columns' },\n            { text: this.parent.localeObj.getConstant('addToValue'), id: 'Context_Values' }\n        ];\n        var menuOptions = {\n            cssClass: cls.PIVOT_CONTEXT_MENU_CLASS,\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.onBeforeMenuOpen.bind(this),\n            select: this.onSelectContextMenu.bind(this)\n        };\n        this.parent.element.appendChild(createElement('ul', {\n            id: this.parent.element.id + '_PivotContextMenu'\n        }));\n        this.menuObj = new ContextMenu(menuOptions);\n        this.menuObj.appendTo('#' + this.parent.element.id + '_PivotContextMenu');\n    };\n    PivotContextMenu.prototype.onBeforeMenuOpen = function (args) {\n        var items = [].slice.call(args.element.querySelectorAll('li'));\n        var fieldType = this.fieldElement.querySelector('.' + cls.PIVOT_BUTTON_CONTENT_CLASS).getAttribute('data-type');\n        removeClass(items, cls.MENU_DISABLE);\n        if (fieldType === 'CalculatedField') {\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var item = items_1[_i];\n                if (item.textContent !== this.parent.localeObj.getConstant('addToValue')) {\n                    addClass([item], cls.MENU_DISABLE);\n                }\n            }\n        }\n    };\n    PivotContextMenu.prototype.onSelectContextMenu = function (menu) {\n        if (menu.element.textContent !== null) {\n            var fieldName = this.fieldElement.getAttribute('data-uid');\n            var dropClass = menu.item.id.replace('Context_', '').toLowerCase();\n            this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, dropClass, -1);\n            this.parent.updateDataSource(true);\n            this.fieldElement = undefined;\n        }\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @return {void}\n     * @hidden\n     */\n    PivotContextMenu.prototype.destroy = function () {\n        if (!this.parent.isDestroyed) {\n            return;\n        }\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return PivotContextMenu;\n}());\nexport { PivotContextMenu };\n","import { EventHandler, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { contentReady } from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\n/**\n * `VirtualScroll` module is used to handle scrolling behavior.\n */\nvar VirtualScroll = /** @class */ (function () {\n    /**\n     * Constructor for PivotView scrolling.\n     * @hidden\n     */\n    function VirtualScroll(parent) {\n        this.previousValues = { top: 0, left: 0 };\n        this.frozenPreviousValues = { top: 0, left: 0 };\n        this.eventType = '';\n        this.parent = parent;\n        this.addInternalEvents();\n    }\n    /**\n     * It returns the Module name.\n     * @returns string\n     * @hidden\n     */\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.addInternalEvents = function () {\n        this.parent.on(contentReady, this.wireEvents, this);\n    };\n    VirtualScroll.prototype.wireEvents = function () {\n        var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n        var fCont = this.parent.element.querySelector('.' + cls.FROZENCONTENT_DIV);\n        var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n        EventHandler.clearEvents(mCont);\n        EventHandler.clearEvents(fCont);\n        if (this.parent.engineModule) {\n            EventHandler.add(mCont, 'scroll touchmove pointermove', this.onHorizondalScroll(mHdr, mCont, fCont), this);\n            EventHandler.add(mCont, 'scroll wheel touchmove pointermove', this.onVerticalScroll(fCont, mCont), this);\n            EventHandler.add(mCont, 'mouseup touchend', this.common(mHdr, mCont, fCont), this);\n            EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont, fCont), this);\n            EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n            EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n            EventHandler.add(mHdr, 'touchstart pointerdown', this.setPageXY(), this);\n            EventHandler.add(mHdr, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n        }\n        this.parent.grid.isPreventScrollEvent = true;\n    };\n    VirtualScroll.prototype.onWheelScroll = function (mCont, fCont) {\n        var _this = this;\n        var element = mCont;\n        return function (e) {\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.frozenPreviousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            fCont.scrollTop = top;\n            element.scrollTop = top;\n            _this.frozenPreviousValues.top = top;\n            _this.eventType = e.type;\n        };\n    };\n    VirtualScroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (!(e.touches && e.touches.length)) {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        else {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        return pageXY;\n    };\n    VirtualScroll.prototype.onTouchScroll = function (mHdr, mCont, fCont) {\n        var _this = this;\n        var element = mCont;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.element.querySelector('.' + cls.HEADERCONTENT).contains(e.target)) {\n                if (_this.frozenPreviousValues.left === left || left < 0) {\n                    return;\n                }\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.frozenPreviousValues.left = left;\n            }\n            else {\n                if (_this.frozenPreviousValues.top === top || top < 0) {\n                    return;\n                }\n                fCont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.frozenPreviousValues.top = top;\n            }\n            _this.eventType = e.type;\n        };\n    };\n    VirtualScroll.prototype.update = function (mHdr, mCont, top, left, e) {\n        if (this.direction === 'vertical') {\n            var rowValues = this.parent.dataSource.valueAxis === 'row' ? this.parent.dataSource.values.length : 1;\n            var exactSize = (this.parent.pageSettings.rowSize * rowValues * this.parent.gridSettings.rowHeight);\n            var section = Math.ceil(top / exactSize);\n            if (this.parent.scrollPosObject.vertical === section) {\n                hideSpinner(this.parent.element);\n                return;\n            }\n            showSpinner(this.parent.element);\n            this.parent.scrollPosObject.vertical = section;\n            this.parent.engineModule.pageSettings.rowCurrentPage = section > 1 ? section : 1;\n            this.parent.engineModule.generateGridData(this.parent.dataSource, this.parent.engineModule.headerCollection);\n            this.parent.pivotValues = this.parent.engineModule.pivotValues;\n            var exactPage = Math.ceil(this.parent.engineModule.rowStartPos / (this.parent.pageSettings.rowSize * rowValues));\n            var pos = exactSize * exactPage -\n                (this.parent.engineModule.rowFirstLvl * rowValues * this.parent.gridSettings.rowHeight);\n            this.parent.scrollPosObject.verticalSection = pos;\n        }\n        else {\n            var colValues = this.parent.dataSource.valueAxis === 'column' ? this.parent.dataSource.values.length : 1;\n            var exactSize = (this.parent.pageSettings.columnSize *\n                colValues * this.parent.gridSettings.columnWidth);\n            var section = Math.ceil(left / exactSize);\n            if (this.parent.scrollPosObject.horizontal === section) {\n                hideSpinner(this.parent.element);\n                return;\n            }\n            showSpinner(this.parent.element);\n            this.parent.scrollPosObject.horizontal = section;\n            this.parent.engineModule.pageSettings.columnCurrentPage = section > 1 ? section : 1;\n            this.parent.engineModule.generateGridData(this.parent.dataSource, this.parent.engineModule.headerCollection);\n            // let isLastPage: boolean =\n            //     (this.parent.engineModule.pivotValues[0] as IAxisSet[])[this.parent.engineModule.pivotValues[0].length - 1].type\n            //     === 'grand sum' && section > 0;\n            this.parent.pivotValues = this.parent.engineModule.pivotValues;\n            var exactPage = Math.ceil(this.parent.engineModule.colStartPos / (this.parent.pageSettings.columnSize * colValues));\n            // let pos: number = isLastPage ?\n            //     ((left + mHdr.clientWidth) - ((mHdr.querySelector('.' + cls.TABLE) as HTMLElement).offsetWidth)) :\n            //     exactSize * exactPage - (this.parent.engineModule.colFirstLvl *\n            //         colValues * this.parent.gridSettings.columnWidth);\n            var pos = exactSize * exactPage - (this.parent.engineModule.colFirstLvl *\n                colValues * this.parent.gridSettings.columnWidth);\n            this.parent.scrollPosObject.horizontalSection = pos;\n        }\n    };\n    VirtualScroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    VirtualScroll.prototype.common = function (mHdr, mCont, fCont) {\n        var _this = this;\n        return function (e) {\n            _this.update(mHdr, mCont, mCont.scrollTop, mCont.scrollLeft, e);\n        };\n    };\n    VirtualScroll.prototype.onHorizondalScroll = function (mHdr, mCont, fCont) {\n        var _this = this;\n        /* tslint:disable-next-line */\n        var timeOutObj;\n        return function (e) {\n            var left = mCont.scrollLeft;\n            if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove') {\n                clearTimeout(timeOutObj);\n                /* tslint:disable */\n                timeOutObj = setTimeout(function () {\n                    left = e.type === 'touchmove' ? mCont.scrollLeft : left;\n                    _this.update(mHdr, mCont, mCont.scrollTop, left, e);\n                }, 300);\n            }\n            if (_this.previousValues.left === left) {\n                fCont.scrollTop = mCont.scrollTop;\n                return;\n            }\n            _this.direction = 'horizondal';\n            var excessMove = _this.parent.scrollPosObject.horizontalSection > left ?\n                -(_this.parent.scrollPosObject.horizontalSection - left) : ((left + mHdr.offsetWidth) -\n                (_this.parent.scrollPosObject.horizontalSection + mCont.querySelector('.e-table').offsetWidth));\n            if (_this.parent.scrollPosObject.horizontalSection > left ? true : excessMove > 1) {\n                //  showSpinner(this.parent.element);\n                if (left > mHdr.clientWidth) {\n                    if (_this.parent.scrollPosObject.left < 1) {\n                        _this.parent.scrollPosObject.left = mHdr.clientWidth;\n                    }\n                    _this.parent.scrollPosObject.left = _this.parent.scrollPosObject.left - 50;\n                    excessMove = _this.parent.scrollPosObject.horizontalSection > left ?\n                        (excessMove - _this.parent.scrollPosObject.left) : (excessMove + _this.parent.scrollPosObject.left);\n                }\n                else {\n                    excessMove = -_this.parent.scrollPosObject.horizontalSection;\n                }\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: 'translate(' + (_this.parent.scrollPosObject.horizontalSection + excessMove) + 'px,' +\n                        _this.parent.scrollPosObject.verticalSection + 'px)'\n                });\n                setStyleAttribute(mHdr.querySelector('.e-table'), {\n                    transform: 'translate(' + (_this.parent.scrollPosObject.horizontalSection + excessMove) + 'px,' + 0 + 'px)'\n                });\n                _this.parent.scrollPosObject.horizontalSection = _this.parent.scrollPosObject.horizontalSection + excessMove;\n            }\n            _this.previousValues.left = left;\n            _this.frozenPreviousValues.left = left;\n            _this.eventType = '';\n            mHdr.scrollLeft = mCont.scrollLeft;\n        };\n    };\n    VirtualScroll.prototype.onVerticalScroll = function (fCont, mCont) {\n        var _this = this;\n        /* tslint:disable-next-line */\n        var timeOutObj;\n        return function (e) {\n            var top = mCont.scrollTop;\n            if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove') {\n                clearTimeout(timeOutObj);\n                /* tslint:disable */\n                timeOutObj = setTimeout(function () {\n                    _this.update(null, mCont, mCont.scrollTop, mCont.scrollLeft, e);\n                }, 300);\n            }\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            _this.direction = 'vertical';\n            var excessMove = _this.parent.scrollPosObject.verticalSection > top ?\n                -(_this.parent.scrollPosObject.verticalSection - top) : ((top + fCont.clientHeight) -\n                (_this.parent.scrollPosObject.verticalSection + fCont.querySelector('.e-table').offsetHeight));\n            if (_this.parent.scrollPosObject.verticalSection > top ? true : excessMove > 1) {\n                //  showSpinner(this.parent.element);\n                if (top > fCont.clientHeight) {\n                    if (_this.parent.scrollPosObject.top < 1) {\n                        _this.parent.scrollPosObject.top = fCont.clientHeight;\n                    }\n                    _this.parent.scrollPosObject.top = _this.parent.scrollPosObject.top - 50;\n                    excessMove = _this.parent.scrollPosObject.verticalSection > top ?\n                        (excessMove - _this.parent.scrollPosObject.top) : (excessMove + _this.parent.scrollPosObject.top);\n                }\n                else {\n                    excessMove = -_this.parent.scrollPosObject.verticalSection;\n                }\n                setStyleAttribute(fCont.querySelector('.e-table'), {\n                    transform: 'translate(' + 0 + 'px,' + (_this.parent.scrollPosObject.verticalSection + excessMove) + 'px)'\n                });\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: 'translate(' + _this.parent.scrollPosObject.horizontalSection + 'px,' +\n                        (_this.parent.scrollPosObject.verticalSection + excessMove) + 'px)'\n                });\n                _this.parent.scrollPosObject.verticalSection = _this.parent.scrollPosObject.verticalSection + excessMove;\n            }\n            _this.previousValues.top = top;\n            _this.frozenPreviousValues.top = top;\n            _this.eventType = '';\n            fCont.scrollTop = mCont.scrollTop;\n            mCont.scrollTop = fCont.scrollTop;\n        };\n    };\n    /**\n     * @hidden\n     */\n    VirtualScroll.prototype.removeInternalEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(contentReady, this.wireEvents);\n    };\n    /**\n     * To destroy the virtualscrolling event listener\n     * @return {void}\n     * @hidden\n     */\n    VirtualScroll.prototype.destroy = function () {\n        this.removeInternalEvents();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { createElement, setStyleAttribute, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { Grid, Reorder, Resize, ColumnChooser, Toolbar } from '@syncfusion/ej2-grids';\nimport { VirtualScroll, Selection, Edit, Page, CommandColumn } from '@syncfusion/ej2-grids';\nimport * as events from '../../common/base/constant';\n/**\n * `DrillThroughDialog` module to create drill-through dialog.\n */\n/** @hidden */\nvar DrillThroughDialog = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function DrillThroughDialog(parent) {\n        this.isUpdated = false;\n        this.gridIndexObjects = {};\n        this.parent = parent;\n    }\n    /** @hidden */\n    DrillThroughDialog.prototype.showDrillThroughDialog = function (eventArgs) {\n        var _this = this;\n        this.removeDrillThroughDialog();\n        var drillThroughDialog = createElement('div', {\n            id: this.parent.element.id + '_drillthrough',\n            className: cls.DRILLTHROUGH_DIALOG,\n            styles: 'visibility:hidden;'\n        });\n        this.parent.element.appendChild(drillThroughDialog);\n        this.dialogPopUp = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            header: this.parent.localeObj.getConstant('details'),\n            content: this.createDrillThroughGrid(eventArgs),\n            beforeOpen: function () {\n                /* tslint:disable:align */\n                _this.drillThroughGrid.setProperties({\n                    dataSource: _this.parent.editSettings.allowEditing ?\n                        _this.dataWithPrimarykey(eventArgs) : eventArgs.rawData, height: 300\n                }, true);\n                /* tslint:enable:align */\n                _this.drillThroughGrid.enableVirtualization = !_this.parent.editSettings.allowEditing;\n            },\n            beforeClose: function () {\n                if (_this.parent.editSettings.allowEditing && _this.isUpdated) {\n                    var count = Object.keys(_this.gridIndexObjects).length;\n                    var addItems = [];\n                    /* tslint:disable:no-string-literal */\n                    for (var _i = 0, _a = _this.drillThroughGrid.dataSource; _i < _a.length; _i++) {\n                        var item = _a[_i];\n                        if (isNullOrUndefined(item['__index']) || item['__index'] === '') {\n                            for (var _b = 0, _c = _this.parent.engineModule.fields; _b < _c.length; _b++) {\n                                var field = _c[_b];\n                                if (isNullOrUndefined(item[field])) {\n                                    delete item[field];\n                                }\n                            }\n                            delete item['__index'];\n                            addItems.push(item);\n                        }\n                        else if (count > 0) {\n                            delete _this.gridIndexObjects[item['__index'].toString()];\n                            count--;\n                        }\n                    }\n                    count = 0;\n                    var items = [];\n                    for (var _d = 0, _e = _this.parent.dataSource.data; _d < _e.length; _d++) {\n                        var item = _e[_d];\n                        delete item['__index'];\n                        if (_this.gridIndexObjects[count.toString()] === undefined) {\n                            items.push(item);\n                        }\n                        count++;\n                    }\n                    /* tslint:enable:no-string-literal */\n                    items = items.concat(addItems);\n                    _this.parent.setProperties({ dataSource: { data: items } }, true);\n                    _this.parent.engineModule.updateGridData(_this.parent.dataSource);\n                    _this.parent.pivotValues = _this.parent.engineModule.pivotValues;\n                }\n                _this.isUpdated = false;\n                _this.gridIndexObjects = {};\n            },\n            isModal: true,\n            visible: true,\n            showCloseIcon: true,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            width: this.parent.isAdaptive ? '100%' : '60%',\n            position: { X: 'center', Y: 'center' },\n            closeOnEscape: true,\n            target: document.body,\n            close: this.removeDrillThroughDialog.bind(this)\n        });\n        this.dialogPopUp.appendTo(drillThroughDialog);\n        setStyleAttribute(this.dialogPopUp.element, { 'visibility': 'visible' });\n    };\n    DrillThroughDialog.prototype.removeDrillThroughDialog = function () {\n        if (this.dialogPopUp && !this.dialogPopUp.isDestroyed) {\n            this.dialogPopUp.destroy();\n        }\n        var dialogElement = document.getElementById(this.parent.element.id + '_drillthrough');\n        if (dialogElement) {\n            remove(dialogElement);\n        }\n        if (document.getElementById(this.parent.element.id + '_drillthroughgrid_ccdlg')) {\n            remove(document.getElementById(this.parent.element.id + '_drillthroughgrid_ccdlg'));\n        }\n    };\n    /* tslint:disable:max-func-body-length */\n    DrillThroughDialog.prototype.createDrillThroughGrid = function (eventArgs) {\n        var drillThroughBody = createElement('div', { id: this.parent.element.id + '_drillthroughbody', className: cls.DRILLTHROUGH_BODY_CLASS });\n        var drillThroughBodyHeader = createElement('div', {\n            id: this.parent.element.id +\n                '_drillthroughbodyheader', className: cls.DRILLTHROUGH_BODY_HEADER_CONTAINER_CLASS\n        });\n        if (eventArgs.rowHeaders !== '') {\n            drillThroughBodyHeader.innerHTML = '<span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_COMMON_CLASS + '><span class=' + cls.DRILLTHROUGH_BODY_HEADER_CLASS + '>' +\n                this.parent.localeObj.getConstant('row') + '</span> :<span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_VALUE_CLASS + '>' + eventArgs.rowHeaders + '</span></span>';\n        }\n        if (eventArgs.columnHeaders !== '') {\n            drillThroughBodyHeader.innerHTML = drillThroughBodyHeader.innerHTML + '<span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_COMMON_CLASS + '><span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_CLASS + '>' + this.parent.localeObj.getConstant('column') +\n                '</span> :<span class=' + cls.DRILLTHROUGH_BODY_HEADER_VALUE_CLASS + '>' +\n                eventArgs.columnHeaders + '</span></span>';\n        }\n        if (eventArgs.value !== '') {\n            var measure = eventArgs.value.split('(')[0];\n            var value = eventArgs.value.split('(')[1].split(')')[0];\n            if (value !== '0') {\n                drillThroughBodyHeader.innerHTML = drillThroughBodyHeader.innerHTML + '<span class=' +\n                    cls.DRILLTHROUGH_BODY_HEADER_COMMON_CLASS + '><span class=' +\n                    cls.DRILLTHROUGH_BODY_HEADER_CLASS + '>' +\n                    measure + '</span> :<span class=' + cls.DRILLTHROUGH_BODY_HEADER_VALUE_CLASS + '>' + value + '</span></span>';\n            }\n        }\n        var toolbarItems = ['ColumnChooser'];\n        if (this.parent.editSettings.allowEditing) {\n            if (this.parent.editSettings.allowCommandColumns) {\n                toolbarItems = ['ColumnChooser', 'Add'];\n            }\n            else if (this.parent.editSettings.mode === 'Batch') {\n                toolbarItems = ['ColumnChooser', 'Add', 'Delete', 'Update', 'Cancel'];\n            }\n            else if (this.parent.editSettings.mode === 'Dialog') {\n                toolbarItems = ['ColumnChooser', 'Add', 'Edit', 'Delete'];\n            }\n            else {\n                toolbarItems = ['ColumnChooser', 'Add', 'Edit', 'Delete', 'Update', 'Cancel'];\n            }\n        }\n        var drillThroughGrid = createElement('div', { id: this.parent.element.id + '_drillthroughgrid', className: cls.DRILLTHROUGH_GRID_CLASS });\n        Grid.Inject(Selection, Reorder, Resize, Toolbar, ColumnChooser);\n        this.drillThroughGrid = new Grid({\n            gridLines: 'Default',\n            allowResizing: true,\n            allowReordering: true,\n            showColumnChooser: true,\n            toolbar: toolbarItems,\n            columns: this.frameGridColumns(),\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            enableVirtualization: this.parent.editSettings.allowEditing,\n            allowPaging: this.parent.editSettings.allowEditing\n        });\n        var dialogModule = this;\n        this.parent.trigger(events.beginDrillThrough, { cellInfo: eventArgs, gridObj: this.drillThroughGrid, type: 'editing' });\n        if (this.parent.editSettings.allowEditing) {\n            Grid.Inject(Edit, Page);\n            this.drillThroughGrid.editSettings = this.parent.editSettings;\n            if (this.parent.editSettings.allowCommandColumns) {\n                this.drillThroughGrid.editSettings.mode = 'Normal';\n                this.drillThroughGrid.editSettings.allowEditOnDblClick = false;\n                Grid.Inject(CommandColumn);\n                this.drillThroughGrid.columns.push({\n                    headerText: this.parent.localeObj.getConstant('manageRecords'), width: 160, showInColumnChooser: false,\n                    commands: [\n                        { type: 'Edit', buttonOption: { iconCss: ' e-icons e-edit', cssClass: 'e-flat' } },\n                        { type: 'Delete', buttonOption: { iconCss: 'e-icons e-delete', cssClass: 'e-flat' } },\n                        { type: 'Save', buttonOption: { iconCss: 'e-icons e-update', cssClass: 'e-flat' } },\n                        { type: 'Cancel', buttonOption: { iconCss: 'e-icons e-cancel-icon', cssClass: 'e-flat' } }\n                    ]\n                });\n            }\n            else {\n                this.drillThroughGrid.editSettings.allowEditOnDblClick = this.parent.editSettings.allowEditOnDblClick;\n            }\n            /* tslint:disable:align */\n            this.drillThroughGrid.columns.push({\n                field: '__index', visible: false, isPrimaryKey: true, type: 'string', showInColumnChooser: false\n            });\n            /* tslint:disable-next-line:no-any */\n            this.drillThroughGrid.actionComplete = function (args) {\n                if (args.requestType === 'batchsave' || args.requestType === 'save' || args.requestType === 'delete') {\n                    dialogModule.isUpdated = true;\n                }\n                if ((dialogModule.drillThroughGrid.editSettings.mode === 'Normal' && args.requestType === 'save' &&\n                    dialogModule.drillThroughGrid.element.querySelectorAll('.e-tbar-btn:hover').length > 0 &&\n                    !dialogModule.parent.editSettings.allowCommandColumns) || args.requestType === 'batchsave') {\n                    dialogModule.dialogPopUp.hide();\n                }\n            };\n            this.drillThroughGrid.beforeBatchSave = function () {\n                dialogModule.isUpdated = true;\n            };\n            /* tslint:enable:align */\n        }\n        else {\n            Grid.Inject(VirtualScroll);\n        }\n        document.body.appendChild(drillThroughGrid);\n        this.drillThroughGrid.appendTo(drillThroughGrid);\n        drillThroughBody.appendChild(drillThroughBodyHeader);\n        drillThroughBody.appendChild(drillThroughGrid);\n        return drillThroughBody;\n    };\n    DrillThroughDialog.prototype.frameGridColumns = function () {\n        var keys = Object.keys(this.parent.engineModule.fieldList);\n        var columns = [];\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            if (this.parent.engineModule.fieldList[key].aggregateType !== 'CalculatedField') {\n                var editType = '';\n                if (this.parent.engineModule.fieldList[key].type === 'number') {\n                    editType = 'numericedit';\n                }\n                else if (this.parent.engineModule.fieldList[key].type === 'date') {\n                    editType = 'datepickeredit';\n                }\n                else {\n                    editType = '';\n                }\n                columns.push({\n                    field: key,\n                    headerText: this.parent.engineModule.fieldList[key].caption,\n                    width: 120,\n                    visible: this.parent.engineModule.fieldList[key].isSelected,\n                    validationRules: { required: true },\n                    editType: editType,\n                    type: 'string'\n                });\n            }\n        }\n        return columns;\n    };\n    DrillThroughDialog.prototype.dataWithPrimarykey = function (eventArgs) {\n        var indexString = Object.keys(eventArgs.currentCell.indexObject);\n        var rawData = eventArgs.rawData;\n        var count = 0;\n        for (var _i = 0, rawData_1 = rawData; _i < rawData_1.length; _i++) {\n            var item = rawData_1[_i];\n            /* tslint:disable-next-line:no-string-literal */\n            item['__index'] = indexString[count];\n            this.gridIndexObjects[indexString[count].toString()] = Number(indexString[count]);\n            count++;\n        }\n        return rawData;\n    };\n    return DrillThroughDialog;\n}());\nexport { DrillThroughDialog };\n","import { contentReady } from '../../common/base/constant';\nimport * as events from '../../common/base/constant';\nimport { DrillThroughDialog } from '../../common/popups/drillthrough-dialog';\nimport { EventHandler } from '@syncfusion/ej2-base';\n/**\n * `DrillThrough` module.\n */\nvar DrillThrough = /** @class */ (function () {\n    /**\n     * Constructor.\n     * @hidden\n     */\n    function DrillThrough(parent) {\n        this.parent = parent;\n        this.drillThroughDialog = new DrillThroughDialog(this.parent);\n        this.addInternalEvents();\n    }\n    /**\n     * It returns the Module name.\n     * @returns string\n     * @hidden\n     */\n    DrillThrough.prototype.getModuleName = function () {\n        return 'drillthrough';\n    };\n    DrillThrough.prototype.addInternalEvents = function () {\n        this.parent.on(contentReady, this.wireEvents, this);\n    };\n    DrillThrough.prototype.wireEvents = function () {\n        this.unWireEvents();\n        EventHandler.add(this.parent.element, 'dblclick', this.mouseClickHandler, this);\n    };\n    DrillThrough.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.element, 'dblclick', this.mouseClickHandler);\n    };\n    DrillThrough.prototype.mouseClickHandler = function (e) {\n        var target = e.target;\n        var ele = null;\n        if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-cellvalue') ||\n            target.classList.contains('e-headercelldiv')) {\n            ele = target.parentElement;\n        }\n        else if (target.classList.contains('e-headercell') || target.classList.contains('e-rowcell')) {\n            ele = target;\n        }\n        else if (target.classList.contains('e-headertext')) {\n            ele = target.parentElement.parentElement;\n        }\n        if (ele) {\n            if (this.parent.allowDrillThrough && ele.classList.contains('e-valuescontent') || this.parent.editSettings.allowEditing) {\n                this.executeDrillThrough(ele);\n            }\n        }\n    };\n    DrillThrough.prototype.executeDrillThrough = function (ele) {\n        var colIndex = Number(ele.getAttribute('aria-colindex'));\n        var rowIndex = Number(ele.getAttribute('index'));\n        var pivotValue = this.parent.pivotValues[rowIndex][colIndex];\n        var valueCaption = this.parent.engineModule.fieldList[pivotValue.actualText.toString()] ?\n            this.parent.engineModule.fieldList[pivotValue.actualText.toString()].caption : pivotValue.actualText.toString();\n        var rawData = [];\n        if (pivotValue.rowHeaders !== undefined && pivotValue.columnHeaders !== undefined && pivotValue.value !== undefined) {\n            var indexArray = Object.keys(pivotValue.indexObject);\n            for (var _i = 0, indexArray_1 = indexArray; _i < indexArray_1.length; _i++) {\n                var index = indexArray_1[_i];\n                rawData.push(this.parent.dataSource.data[Number(index)]);\n            }\n            var aggType = this.parent.engineModule.fieldList[pivotValue.actualText].aggregateType;\n            var valuetText = aggType === 'CalculatedField' ? valueCaption.toString() :\n                (aggType + ' of ' + valueCaption);\n            var eventArgs = {\n                currentTarget: ele,\n                currentCell: pivotValue,\n                rawData: rawData,\n                rowHeaders: pivotValue.rowHeaders === '' ? '' : pivotValue.rowHeaders.toString().split('.').join(' - '),\n                columnHeaders: pivotValue.columnHeaders === '' ? '' : pivotValue.columnHeaders.toString().split('.').join(' - '),\n                value: valuetText + '(' + pivotValue.formattedText + ')'\n            };\n            this.parent.trigger(events.drillThrough, eventArgs);\n            this.drillThroughDialog.showDrillThroughDialog(eventArgs);\n        }\n    };\n    return DrillThrough;\n}());\nexport { DrillThrough };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Browser, Component, createElement, setStyleAttribute, setCurrencyCode } from '@syncfusion/ej2-base';\nimport { EventHandler, Complex, extend, ChildProperty, Collection, isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { Internationalization, L10n, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { removeClass, addClass, Event } from '@syncfusion/ej2-base';\nimport { PivotEngine } from '../../base/engine';\nimport { Tooltip, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { Render } from '../renderer/render';\nimport { DataSource } from '../model/dataSource';\nimport { GridSettings } from '../model/gridsettings';\nimport { Grid, Reorder, Resize } from '@syncfusion/ej2-grids';\nimport { ExcelExport } from '../actions/excel-export';\nimport { PDFExport } from '../actions/pdf-export';\nimport { KeyboardInteraction } from '../actions/keyboard';\nimport { PivotContextMenu } from '../../common/popups/context-menu';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { VirtualScroll } from '../actions/virtualscroll';\nimport { DrillThrough } from '../actions/drill-through';\n/**\n * It holds the settings of Grouping Bar.\n */\nvar GroupingBarSettings = /** @class */ (function (_super) {\n    __extends(GroupingBarSettings, _super);\n    function GroupingBarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showFilterIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showSortIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showRemoveIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showValueTypeIcon\", void 0);\n    return GroupingBarSettings;\n}(ChildProperty));\nexport { GroupingBarSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar CellEditSettings = /** @class */ (function (_super) {\n    __extends(CellEditSettings, _super);\n    function CellEditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowCommandColumns\", void 0);\n    __decorate([\n        Property('Normal')\n    ], CellEditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], CellEditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], CellEditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    return CellEditSettings;\n}(ChildProperty));\nexport { CellEditSettings };\n/**\n * Configures the conditional based hyper link settings.\n */\nvar ConditionalSettings = /** @class */ (function (_super) {\n    __extends(ConditionalSettings, _super);\n    function ConditionalSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"measure\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"label\", void 0);\n    __decorate([\n        Property('NotEquals')\n    ], ConditionalSettings.prototype, \"conditions\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"value1\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"value2\", void 0);\n    return ConditionalSettings;\n}(ChildProperty));\nexport { ConditionalSettings };\n/**\n * It holds the settings of Hyperlink.\n */\nvar HyperlinkSettings = /** @class */ (function (_super) {\n    __extends(HyperlinkSettings, _super);\n    function HyperlinkSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showRowHeaderHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showColumnHeaderHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showValueCellHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showSummaryCellHyperlink\", void 0);\n    __decorate([\n        Collection([], ConditionalSettings)\n    ], HyperlinkSettings.prototype, \"conditionalSettings\", void 0);\n    __decorate([\n        Property()\n    ], HyperlinkSettings.prototype, \"headerText\", void 0);\n    __decorate([\n        Property('')\n    ], HyperlinkSettings.prototype, \"cssClass\", void 0);\n    return HyperlinkSettings;\n}(ChildProperty));\nexport { HyperlinkSettings };\n/**\n * Represents the PivotView component.\n * ```html\n * <div id=\"PivotView\"></div>\n * <script>\n *  var pivotviewObj = new PivotView({ enableGroupingBar: true });\n *  pivotviewObj.appendTo(\"#pivotview\");\n * </script>\n * ```\n */\nvar PivotView = /** @class */ (function (_super) {\n    __extends(PivotView, _super);\n    /**\n     * Constructor for creating the widget\n     * @param  {PivotViewModel} options?\n     * @param  {string|HTMLElement} element?\n     */\n    function PivotView(options, element) {\n        var _this_1 = _super.call(this, options, element) || this;\n        _this_1.shiftLockedPos = [];\n        _this_1.savedSelectedCellsPos = [];\n        _this_1.isPopupClicked = false;\n        _this_1.isMouseDown = false;\n        _this_1.isMouseUp = false;\n        _this_1.isCellBoxMultiSelection = false;\n        /** @hidden */\n        _this_1.rowRangeSelection = { enable: false, startIndex: 0, endIndex: 0 };\n        /** @hidden */\n        _this_1.resizeInfo = {};\n        /** @hidden */\n        _this_1.scrollPosObject = {\n            vertical: 0, horizontal: 0, verticalSection: 0,\n            horizontalSection: 0, top: 0, left: 0, scrollDirection: { direction: '', position: 0 }\n        };\n        /** @hidden */\n        _this_1.pivotColumns = [];\n        /** @hidden */\n        _this_1.totColWidth = 0;\n        /** @hidden */\n        _this_1.posCount = 0;\n        _this_1.needsID = true;\n        _this_1.pivotView = _this_1;\n        return _this_1;\n    }\n    PivotView_1 = PivotView;\n    /**\n     * To provide the array of modules needed for control rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    PivotView.prototype.requiredModules = function () {\n        var modules = [];\n        var isCommonRequire;\n        if (this.allowConditionalFormatting) {\n            modules.push({ args: [this], member: 'conditionalformatting' });\n        }\n        if (this.allowCalculatedField) {\n            isCommonRequire = true;\n            modules.push({ args: [this], member: 'calculatedfield' });\n        }\n        if (this.showGroupingBar) {\n            isCommonRequire = true;\n            modules.push({ args: [this], member: 'grouping' });\n        }\n        if (this.showFieldList) {\n            isCommonRequire = true;\n            modules.push({ args: [this], member: 'fieldlist' });\n        }\n        if (this.allowExcelExport) {\n            modules.push({ args: [this], member: 'excelExport' });\n        }\n        if (this.allowPdfExport) {\n            modules.push({ args: [this], member: 'pdfExport' });\n        }\n        if (this.enableVirtualization) {\n            modules.push({ args: [this], member: 'virtualscroll' });\n        }\n        if (isCommonRequire) {\n            modules.push({ args: [this], member: 'common' });\n        }\n        return modules;\n    };\n    /**\n     * For internal use only - Initializing internal properties;\n     * @private\n     */\n    PivotView.prototype.preRender = function () {\n        this.initProperties();\n        this.isAdaptive = Browser.isDevice;\n        this.renderToolTip();\n        this.keyboardModule = new KeyboardInteraction(this);\n        this.contextMenuModule = new PivotContextMenu(this);\n        this.globalize = new Internationalization(this.locale);\n        this.defaultLocale = {\n            grandTotal: 'Grand Total',\n            total: 'Total',\n            value: 'Value',\n            noValue: 'No value',\n            row: 'Row',\n            column: 'Column',\n            collapse: 'Collapse',\n            expand: 'Expand',\n            rowAxisPrompt: 'Drop row here',\n            columnAxisPrompt: 'Drop column here',\n            valueAxisPrompt: 'Drop value here',\n            filterAxisPrompt: 'Drop filter here',\n            filter: 'Filter',\n            filtered: 'Filtered',\n            sort: 'Sort',\n            filters: 'Filters',\n            rows: 'Rows',\n            columns: 'Columns',\n            values: 'Values',\n            close: 'Close',\n            cancel: 'Cancel',\n            delete: 'Delete',\n            calculatedField: 'Calculated Field',\n            createCalculatedField: 'Create Calculated Field',\n            fieldName: 'Enter the field name',\n            error: 'Error',\n            invalidFormula: 'Invalid formula.',\n            dropText: 'Example: (\"Sum(Order_Count)\" + \"Sum(In_Stock)\") * 250',\n            dropTextMobile: 'Add fields and edit formula here.',\n            dropAction: 'Calculated field cannot be place in any other region except value axis.',\n            alert: 'Alert',\n            warning: 'Warning',\n            ok: 'OK',\n            search: 'Search',\n            drag: 'Drag',\n            remove: 'Remove',\n            sum: 'Sum',\n            average: 'Average',\n            count: 'Count',\n            min: 'Min',\n            max: 'Max',\n            allFields: 'All Fields',\n            formula: 'Formula',\n            addToRow: 'Add to Row',\n            addToColumn: 'Add to Column',\n            addToValue: 'Add to Value',\n            addToFilter: 'Add to Filter',\n            emptyData: 'No records to display',\n            fieldExist: 'A field already exists in this name. Please enter a different name.',\n            confirmText: 'A calculation field already exists in this name. Do you want to replace it?',\n            noMatches: 'No matches',\n            format: 'Summaries values by',\n            edit: 'Edit',\n            clear: 'Clear',\n            formulaField: 'Drag and drop fields to formula',\n            dragField: 'Drag field to formula',\n            clearFilter: 'Clear',\n            by: 'by',\n            all: 'All',\n            multipleItems: 'Multiple items',\n            /* tslint:disable */\n            member: 'Member',\n            label: 'Label',\n            date: 'Date',\n            enterValue: 'Enter value',\n            chooseDate: 'Enter date',\n            Before: 'Before',\n            BeforeOrEqualTo: 'Before Or Equal To',\n            After: 'After',\n            AfterOrEqualTo: 'After Or Equal To',\n            labelTextContent: 'Show the items for which the label',\n            dateTextContent: 'Show the items for which the date',\n            valueTextContent: 'Show the items for which',\n            Equals: 'Equals',\n            DoesNotEquals: 'Does Not Equal',\n            BeginWith: 'Begins With',\n            DoesNotBeginWith: 'Does Not Begin With',\n            EndsWith: 'Ends With',\n            DoesNotEndsWith: 'Does Not End With',\n            Contains: 'Contains',\n            DoesNotContains: 'Does Not Contain',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqualTo: 'Greater Than Or Equal To',\n            LessThan: 'Less Than',\n            LessThanOrEqualTo: 'Less Than Or Equal To',\n            Between: 'Between',\n            NotBetween: 'Not Between',\n            And: 'and',\n            Sum: 'Sum',\n            Count: 'Count',\n            DistinctCount: 'Distinct Count',\n            Product: 'Product',\n            Avg: 'Avg',\n            Min: 'Min',\n            SampleVar: 'Sample Var',\n            PopulationVar: 'Population Var',\n            RunningTotals: 'Running Totals',\n            Max: 'Max',\n            Index: 'Index',\n            SampleStDev: 'Sample StDev',\n            PopulationStDev: 'Population StDev',\n            PercentageOfRowTotal: '% of Row Total',\n            PercentageOfParentTotal: '% of Parent Total',\n            PercentageOfParentColumnTotal: '% of Parent Column Total',\n            PercentageOfParentRowTotal: '% of Parent Row Total',\n            DifferenceFrom: 'Difference From',\n            PercentageOfDifferenceFrom: '% of Difference From',\n            PercentageOfGrandTotal: '% of Grand Total',\n            PercentageOfColumnTotal: '% of Column Total',\n            /* tslint:enable */\n            NotEquals: 'Not Equals',\n            AllValues: 'All Values',\n            conditionalFormating: 'Conditional Formatting',\n            apply: 'APPLY',\n            condition: 'Add Condition',\n            formatLabel: 'Format',\n            valueFieldSettings: 'Value field settings',\n            baseField: 'Base field :',\n            baseItem: 'Base item :',\n            summarizeValuesBy: 'Summarize values by :',\n            sourceName: 'Field name :',\n            sourceCaption: 'Field caption :',\n            example: 'e.g:',\n            editorDataLimitMsg: ' more items. Search to refine further.',\n            details: 'Details',\n            manageRecords: 'Manage Records'\n        };\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.isDragging = false;\n        this.addInternalEvents();\n        setCurrencyCode(this.currencyCode);\n    };\n    PivotView.prototype.onBeforeTooltipOpen = function (args) {\n        args.element.classList.add('e-pivottooltipwrap');\n    };\n    PivotView.prototype.renderToolTip = function () {\n        if (this.showTooltip) {\n            this.tooltip = new Tooltip({\n                target: 'td.e-valuescontent',\n                showTipPointer: false,\n                enableRtl: this.enableRtl,\n                beforeRender: this.setToolTip.bind(this),\n                beforeOpen: this.onBeforeTooltipOpen\n            });\n            this.tooltip.appendTo(this.element);\n        }\n        else if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n    };\n    /* tslint:disable:align */\n    PivotView.prototype.initProperties = function () {\n        this.setProperties({ pivotValues: [] }, true);\n        this.queryCellInfo = this.gridSettings.queryCellInfo ? this.gridSettings.queryCellInfo.bind(this) : undefined;\n        this.headerCellInfo = this.gridSettings.headerCellInfo ? this.gridSettings.headerCellInfo.bind(this) : undefined;\n        this.resizing = this.gridSettings.resizing ? this.gridSettings.resizing.bind(this) : undefined;\n        this.resizeStop = this.gridSettings.resizeStop ? this.gridSettings.resizeStop.bind(this) : undefined;\n        this.pdfHeaderQueryCellInfo = this.gridSettings.pdfHeaderQueryCellInfo ?\n            this.gridSettings.pdfHeaderQueryCellInfo.bind(this) : undefined;\n        this.pdfQueryCellInfo = this.gridSettings.pdfQueryCellInfo ? this.gridSettings.pdfQueryCellInfo.bind(this) : undefined;\n        this.excelHeaderQueryCellInfo = this.gridSettings.excelHeaderQueryCellInfo ?\n            this.gridSettings.excelHeaderQueryCellInfo.bind(this) : undefined;\n        this.excelQueryCellInfo = this.gridSettings.excelQueryCellInfo ?\n            this.gridSettings.excelQueryCellInfo.bind(this) : undefined;\n        this.columnDragStart = this.gridSettings.columnDragStart ? this.gridSettings.columnDragStart.bind(this) : undefined;\n        this.columnDrag = this.gridSettings.columnDrag ? this.gridSettings.columnDrag.bind(this) : undefined;\n        this.columnDrop = this.gridSettings.columnDrop ? this.gridSettings.columnDrop.bind(this) : undefined;\n        this.beforeColumnsRender = this.gridSettings.beforeColumnsRender ? this.gridSettings.beforeColumnsRender : undefined;\n        this.selected = this.gridSettings.cellSelected ? this.gridSettings.cellSelected : undefined;\n        this.cellDeselected = this.gridSettings.cellDeselected ? this.gridSettings.cellDeselected : undefined;\n        this.rowSelected = this.gridSettings.rowSelected ? this.gridSettings.rowSelected : undefined;\n        this.rowDeselected = this.gridSettings.rowDeselected ? this.gridSettings.rowDeselected : undefined;\n        if (this.gridSettings.rowHeight === null) {\n            this.setProperties({ gridSettings: { rowHeight: this.isAdaptive ? 48 : 36 } }, true);\n        }\n        if (this.enableVirtualization) {\n            this.height = (typeof this.height === 'string' && this.height.indexOf('%') === -1) ?\n                Number(this.height.split('px')[0]) : this.height;\n            this.width = (typeof this.width === 'string' && this.width.indexOf('%') === -1) ?\n                Number(this.width.split('px')[0]) : this.width;\n            this.height = typeof this.height === 'number' ? this.height : 300;\n            this.width = typeof this.width === 'number' ? this.width : 800;\n        }\n        if (this.enableVirtualization) {\n            var colValues = 1;\n            var rowValues = 1;\n            if (this.dataSource.valueAxis === 'row') {\n                rowValues = this.dataSource.values.length;\n            }\n            else {\n                colValues = this.dataSource.values.length;\n            }\n            this.pageSettings = {\n                columnCurrentPage: 1, rowCurrentPage: 1,\n                columnSize: Math.ceil((Math.floor(this.width /\n                    this.gridSettings.columnWidth) - 1) / colValues),\n                rowSize: Math.ceil(Math.floor(this.height / this.gridSettings.rowHeight) / rowValues)\n            };\n            if (this.allowExcelExport) {\n                PivotView_1.Inject(ExcelExport);\n            }\n            if (this.allowPdfExport) {\n                PivotView_1.Inject(PDFExport);\n            }\n            if (this.editSettings.allowEditing) {\n                PivotView_1.Inject(DrillThrough);\n            }\n        }\n        this.isCellBoxMultiSelection = this.gridSettings.allowSelection &&\n            this.gridSettings.selectionSettings.cellSelectionMode === 'Box' &&\n            this.gridSettings.selectionSettings.mode === 'Cell' && this.gridSettings.selectionSettings.type === 'Multiple';\n    };\n    /**\n     * Initialize the control rendering\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.render = function () {\n        createSpinner({ target: this.element }, this.createElement);\n        this.trigger(events.load, { 'dataSource': this.dataSource });\n        this.updateClass();\n        this.notify(events.initSubComponent, {});\n        this.notify(events.initialLoad, {});\n        if (this.isAdaptive) {\n            this.contextMenuModule.render();\n        }\n    };\n    /**\n     * Register the internal events.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.addInternalEvents = function () {\n        this.on(events.initialLoad, this.generateData, this);\n        this.on(events.dataReady, this.renderPivotGrid, this);\n        this.on(events.contentReady, this.onContentReady, this);\n    };\n    /**\n     * De-Register the internal events.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.removeInternalEvents = function () {\n        this.off(events.initialLoad, this.generateData);\n        this.off(events.dataReady, this.renderPivotGrid);\n        this.off(events.contentReady, this.onContentReady);\n    };\n    /**\n     * Get the Pivot widget properties to be maintained in the persisted state.\n     * @returns {string}\n     * @hidden\n     */\n    PivotView.prototype.getPersistData = function () {\n        var keyEntity = ['dataSource', 'pivotValues', 'gridSettings'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * It returns the Module name.\n     * @returns string\n     * @hidden\n     */\n    PivotView.prototype.getModuleName = function () {\n        return 'pivotview';\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     * @returns {void}\n     * @hidden\n     */\n    PivotView.prototype.copy = function (withHeader) {\n        this.grid.copy(withHeader);\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-pivotgrid.html#printmode-string).\n     * @returns {void}\n     * @hidden\n     */\n    // public print(): void {\n    //     this.grid.print();\n    // }\n    /**\n     * Called internally if any of the property value changed.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'dataSource':\n                case 'hyperlinkSettings':\n                case 'allowDrillThrough':\n                case 'editSettings':\n                    this.notify(events.initialLoad, {});\n                    break;\n                case 'pivotValues':\n                    this.notify(events.dataReady, {});\n                    break;\n                case 'gridSettings':\n                    this.renderModule.updateGridSettings();\n                    this.isCellBoxMultiSelection = this.gridSettings.allowSelection &&\n                        this.gridSettings.selectionSettings.cellSelectionMode === 'Box' &&\n                        this.gridSettings.selectionSettings.mode === 'Cell' && this.gridSettings.selectionSettings.type === 'Multiple';\n                    break;\n                case 'locale':\n                case 'currencyCode':\n                    if (this.tooltip) {\n                        this.tooltip.destroy();\n                    }\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'enableRtl':\n                    this.notify(events.dataReady, {});\n                    this.updateClass();\n                    break;\n                case 'groupingBarSettings':\n                    this.axisFieldModule.render();\n                    break;\n                case 'showTooltip':\n                    this.renderToolTip();\n                    break;\n            }\n        }\n    };\n    /**\n     * Render the UI section of PivotView.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.renderPivotGrid = function () {\n        if (this.enableVirtualization) {\n            this.virtualscrollModule = new VirtualScroll(this);\n        }\n        if (this.hyperlinkSettings) {\n            this.isRowCellHyperlink = (this.hyperlinkSettings.showRowHeaderHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.isColumnCellHyperlink = (this.hyperlinkSettings.showColumnHeaderHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.isValueCellHyperlink = (this.hyperlinkSettings.showValueCellHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.isSummaryCellHyperlink = (this.hyperlinkSettings.showSummaryCellHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.applyHyperlinkSettings();\n        }\n        if (this.allowDrillThrough || this.editSettings.allowEditing) {\n            this.drillThroughModule = new DrillThrough(this);\n        }\n        this.renderModule = new Render(this);\n        this.renderModule.render();\n        if (this.showFieldList || this.showGroupingBar) {\n            this.notify(events.uiUpdate, this);\n            if (this.pivotFieldListModule && this.allowDeferLayoutUpdate) {\n                this.pivotFieldListModule.clonedDataSource = extend({}, this.dataSource, null, true);\n            }\n        }\n        this.trigger(events.dataBound);\n        if (this.allowConditionalFormatting) {\n            this.applyFormatting();\n        }\n    };\n    /**\n     * Updates the PivotEngine using dataSource from Pivot View component.\n     * @method updateDataSource\n     * @return {void}\n     * @hidden\n     */\n    PivotView.prototype.updateDataSource = function (isRefreshGrid) {\n        showSpinner(this.element);\n        /* tslint:disable:align */\n        this.engineModule = new PivotEngine(this.dataSource, '', this.engineModule.fieldList, this.pageSettings, this.enableValueSorting, (this.allowDrillThrough || this.editSettings.allowEditing));\n        var eventArgs = {\n            dataSource: this.dataSource,\n            pivotValues: this.engineModule.pivotValues\n        };\n        this.trigger(events.enginePopulated, eventArgs);\n        this.pivotCommon.engineModule = this.engineModule;\n        this.pivotCommon.dataSource = this.dataSource;\n        this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n        this.renderPivotGrid();\n    };\n    /**\n     * To destroy the PivotView elements.\n     * @returns void\n     */\n    PivotView.prototype.destroy = function () {\n        this.removeInternalEvents();\n        if (this.showGroupingBar && this.groupingBarModule) {\n            this.groupingBarModule.destroy();\n        }\n        if (this.enableVirtualization && this.virtualscrollModule) {\n            this.virtualscrollModule.destroy();\n        }\n        if (this.allowConditionalFormatting && this.conditionalFormattingModule) {\n            this.conditionalFormattingModule.destroy();\n        }\n        if (this.isAdaptive && this.contextMenuModule) {\n            this.contextMenuModule.destroy();\n        }\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        this.unwireEvents();\n        removeClass([this.element], cls.ROOT);\n        removeClass([this.element], cls.RTL);\n        removeClass([this.element], cls.DEVICE);\n        this.element.innerHTML = '';\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Export Pivot widget data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns void\n     */\n    /* tslint:disable-next-line:no-any */\n    PivotView.prototype.excelExport = function (excelExportProperties, isMultipleExport, workbook, isBlob) {\n        if (this.enableVirtualization) {\n            this.excelExportModule.exportToExcel('Excel');\n        }\n        else {\n            this.grid.excelExport(excelExportProperties, isMultipleExport, workbook, isBlob);\n        }\n    };\n    /**\n     * Export PivotGrid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns void\n     */\n    /* tslint:disable-next-line:no-any */\n    PivotView.prototype.csvExport = function (excelExportProperties, isMultipleExport, workbook, isBlob) {\n        if (this.enableVirtualization) {\n            this.excelExportModule.exportToExcel('CSV');\n        }\n        else {\n            this.grid.csvExport(excelExportProperties, isMultipleExport, workbook, isBlob);\n        }\n    };\n    /**\n     * Export Pivot widget data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns void\n     */\n    PivotView.prototype.pdfExport = function (pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        if (this.enableVirtualization) {\n            this.pdfExportModule.exportToPDF();\n        }\n        else {\n            this.grid.pdfExport(pdfExportProperties, isMultipleExport, pdfDoc, isBlob);\n        }\n    };\n    PivotView.prototype.onDrill = function (target) {\n        var fieldName = target.parentElement.getAttribute('fieldname');\n        var memberName = this.engineModule.pivotValues[Number(target.parentElement.getAttribute('index'))][Number(target.parentElement.getAttribute('aria-colindex'))].actualText;\n        this.engineModule.fieldList[fieldName].members[memberName].isDrilled =\n            target.classList.contains(cls.COLLAPSE) ? false : true;\n        var dataSource = extend({}, this.dataSource, null, true);\n        var fieldAvail = false;\n        var prop = dataSource.properties;\n        if (!prop.drilledMembers || prop.drilledMembers.length === 0) {\n            prop.drilledMembers = [{ name: fieldName, items: [memberName] }];\n        }\n        else {\n            for (var fCnt = 0; fCnt < prop.drilledMembers.length; fCnt++) {\n                var field = prop.drilledMembers[fCnt];\n                if (field.name === fieldName) {\n                    fieldAvail = true;\n                    var memIndex = field.items.indexOf(memberName);\n                    if (memIndex > -1) {\n                        field.items.splice(memIndex, 1);\n                    }\n                    else {\n                        field.items.push(memberName);\n                    }\n                }\n                else {\n                    continue;\n                }\n            }\n            if (!fieldAvail) {\n                prop.drilledMembers.push({ name: fieldName, items: [memberName] });\n            }\n        }\n        this.setProperties({ dataSource: { drilledMembers: prop.drilledMembers } }, true);\n        showSpinner(this.element);\n        this.engineModule.generateGridData(this.dataSource);\n        this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n        this.renderPivotGrid();\n    };\n    PivotView.prototype.onContentReady = function () {\n        this.isPopupClicked = false;\n        if (this.showFieldList) {\n            hideSpinner(this.pivotFieldListModule.fieldListSpinnerElement);\n        }\n        else if (this.fieldListSpinnerElement) {\n            hideSpinner(this.fieldListSpinnerElement);\n        }\n        if (!this.isEmptyGrid) {\n            hideSpinner(this.element);\n        }\n        else {\n            this.isEmptyGrid = false;\n        }\n        if (this.enableVirtualization && this.engineModule) {\n            if (this.element.querySelector('.' + cls.MOVABLECONTENT_DIV) &&\n                !this.element.querySelector('.' + cls.MOVABLECONTENT_DIV).querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n                this.virtualDiv = createElement('div', { className: cls.VIRTUALTRACK_DIV });\n                this.element.querySelector('.' + cls.MOVABLECONTENT_DIV).appendChild(this.virtualDiv);\n            }\n            if (this.element.querySelector('.' + cls.MOVABLEHEADER_DIV) &&\n                !this.element.querySelector('.' + cls.MOVABLEHEADER_DIV).querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n                this.virtualHeaderDiv = createElement('div', { className: cls.VIRTUALTRACK_DIV });\n                this.element.querySelector('.' + cls.MOVABLEHEADER_DIV).appendChild(this.virtualHeaderDiv);\n            }\n            else {\n                this.virtualHeaderDiv =\n                    this.element.querySelector('.' + cls.MOVABLEHEADER_DIV).querySelector('.' + cls.VIRTUALTRACK_DIV);\n            }\n            var movableTable = this.element.querySelector('.' + cls.MOVABLECONTENT_DIV).querySelector('.e-table');\n            var vHeight = (this.gridSettings.rowHeight * this.engineModule.rowCount + 0.1 - movableTable.clientHeight);\n            var vWidth = (this.gridSettings.columnWidth * this.engineModule.columnCount\n                - this.grid.columns[0].width);\n            setStyleAttribute(this.virtualDiv, {\n                height: (vHeight > 0.1 ? vHeight : 0.1) + 'px',\n                width: (vWidth > 0.1 ? vWidth : 0.1) + 'px'\n            });\n            setStyleAttribute(this.virtualHeaderDiv, {\n                height: 0, width: (vWidth > 0.1 ? vWidth : 0.1) + 'px'\n            });\n            var mCnt = this.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n            var fCnt = this.element.querySelector('.' + cls.FROZENCONTENT_DIV);\n            var mHdr = this.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n            setStyleAttribute(fCnt.querySelector('.e-table'), {\n                transform: 'translate(' + 0 + 'px,' + this.scrollPosObject.verticalSection + 'px)'\n            });\n            setStyleAttribute(mCnt.querySelector('.e-table'), {\n                transform: 'translate(' + this.scrollPosObject.horizontalSection + 'px,' + this.scrollPosObject.verticalSection + 'px)'\n            });\n            setStyleAttribute(mHdr.querySelector('.e-table'), {\n                transform: 'translate(' + this.scrollPosObject.horizontalSection + 'px,' + 0 + 'px)'\n            });\n        }\n        if (this.showGroupingBar) {\n            this.element.style.minWidth = '400px';\n            this.grid.element.style.minWidth = '400px';\n        }\n        else {\n            this.element.style.minWidth = '310px';\n            this.grid.element.style.minWidth = '310px';\n        }\n        this.unwireEvents();\n        this.wireEvents();\n    };\n    PivotView.prototype.setToolTip = function (args) {\n        var colIndex = Number(args.target.getAttribute('aria-colindex'));\n        var rowIndex = Number(args.target.getAttribute('index'));\n        var cell = this.pivotValues[rowIndex][colIndex];\n        this.tooltip.content = '';\n        if (cell) {\n            this.tooltip.content = '<div class=' + cls.PIVOTTOOLTIP + '><p class=' + cls.TOOLTIP_HEADER + '>' +\n                this.localeObj.getConstant('row') + ':</p><p class=' + cls.TOOLTIP_CONTENT + '>' +\n                this.getRowText(rowIndex, 0) +\n                '</p></br><p class=' + cls.TOOLTIP_HEADER + '>' +\n                this.localeObj.getConstant('column') + ':</p><p class=' + cls.TOOLTIP_CONTENT + '>' +\n                this.getColText(0, colIndex, rowIndex) + '</p></br>' + '<p class=' + cls.TOOLTIP_HEADER + '>' +\n                this.localeObj.getConstant('value') + ':</p><p class=' + cls.TOOLTIP_CONTENT + '>' +\n                (((cell.formattedText === '0' || cell.formattedText === '') ?\n                    this.localeObj.getConstant('noValue') : cell.formattedText)) + '</p></div>';\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    PivotView.prototype.getRowText = function (rowIndex, colIndex) {\n        var cell = this.pivotValues[rowIndex][colIndex];\n        var level = cell.level;\n        var rowText = cell.type === 'grand sum' ? this.localeObj.getConstant('grandTotal') : cell.formattedText;\n        while (level > 0 || cell.index === undefined) {\n            rowIndex--;\n            cell = this.pivotValues[rowIndex][colIndex];\n            if (cell.index !== undefined) {\n                if (level > cell.level) {\n                    rowText = rowText + ' - ' + cell.formattedText;\n                }\n                level = cell.level;\n            }\n        }\n        return rowText.split(' - ').reverse().join(' - ');\n    };\n    PivotView.prototype.getColText = function (rowIndex, colIndex, limit) {\n        var cell = this.pivotValues[0][colIndex];\n        var axis = cell.axis;\n        var colText = cell.type === 'grand sum' ? this.localeObj.getConstant('grandTotal') : cell.formattedText;\n        while (axis !== 'value' && limit > rowIndex) {\n            rowIndex++;\n            if (this.pivotValues[rowIndex]) {\n                cell = this.pivotValues[rowIndex][colIndex];\n                axis = cell.axis;\n                if (cell.type !== 'sum' && cell.type !== 'grand sum' && axis !== 'value') {\n                    colText = colText + ' - ' + cell.formattedText;\n                }\n            }\n        }\n        return colText;\n    };\n    PivotView.prototype.updateClass = function () {\n        if (this.enableRtl) {\n            addClass([this.element], cls.RTL);\n        }\n        else {\n            removeClass([this.element], cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClass([this.element], cls.DEVICE);\n        }\n        else {\n            removeClass([this.element], cls.DEVICE);\n        }\n    };\n    PivotView.prototype.wireEvents = function () {\n        EventHandler.add(this.element, this.isAdaptive ? 'touchend' : 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n        EventHandler.add(this.element.querySelector('.' + cls.GRID_HEADER), 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(this.element, 'mouseup', this.mouseUpHandler, this);\n        window.addEventListener('resize', this.onWindowResize.bind(this), true);\n    };\n    PivotView.prototype.mouseDownHandler = function (e) {\n        if (this.isCellBoxMultiSelection) {\n            this.isMouseDown = true;\n            this.isMouseUp = false;\n            var parent_1 = this.parentAt(e.target, 'TH');\n            this.clearSelection(parent_1, e, Number(parent_1.getAttribute('aria-colindex')), Number(parent_1.getAttribute('index')));\n            this.lastSelectedElement = undefined;\n        }\n    };\n    PivotView.prototype.mouseMoveHandler = function (e) {\n        if (this.isCellBoxMultiSelection) {\n            e.preventDefault();\n            if (this.isMouseDown && e.target) {\n                var ele = e.target;\n                var parentElement = this.parentAt(ele, 'TH');\n                if (this.lastSelectedElement && this.lastSelectedElement !== parentElement &&\n                    parentElement.classList.contains(cls.SELECTED_BGCOLOR)) {\n                    this.lastSelectedElement.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                    this.lastSelectedElement = parentElement;\n                }\n                else {\n                    this.lastSelectedElement = parentElement;\n                    parentElement.classList.add(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                }\n                this.renderModule.selected();\n            }\n        }\n    };\n    PivotView.prototype.mouseUpHandler = function (e) {\n        if (this.isCellBoxMultiSelection) {\n            this.isMouseDown = false;\n            this.isMouseUp = true;\n        }\n    };\n    PivotView.prototype.parentAt = function (target, tagName) {\n        while (target.tagName !== tagName) {\n            if (target.parentElement) {\n                target = target.parentElement;\n            }\n            else {\n                break;\n            }\n        }\n        return target;\n    };\n    PivotView.prototype.mouseClickHandler = function (e) {\n        var target = e.target;\n        if ((target.classList.contains('e-headercell') ||\n            target.classList.contains('e-headercelldiv') ||\n            target.classList.contains('e-rowsheader') ||\n            target.classList.contains('e-rowcell') ||\n            target.classList.contains('e-stackedheadercelldiv') ||\n            target.classList.contains('e-headertext') ||\n            target.classList.contains('e-ascending') ||\n            target.classList.contains('e-descending')) && this.enableValueSorting) {\n            var ele = null;\n            if (target.classList.contains('e-headercell') || target.classList.contains('e-rowsheader')\n                || target.classList.contains('e-rowcell')) {\n                ele = target;\n            }\n            else if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-headercelldiv') ||\n                target.classList.contains('e-ascending') || target.classList.contains('e-descending')) {\n                ele = target.parentElement;\n            }\n            else if (target.classList.contains('e-headertext')) {\n                ele = target.parentElement.parentElement;\n            }\n            this.CellClicked(target, e);\n            if ((ele.parentElement.parentElement.parentElement.parentElement.classList.contains('e-movableheader')\n                && this.dataSource.valueAxis === 'column') || (ele.parentElement.classList.contains('e-row') &&\n                this.dataSource.valueAxis === 'row')) {\n                /* tslint:disable */\n                var colIndex = Number(ele.getAttribute('aria-colindex'));\n                var rowIndex = Number(ele.getAttribute('index'));\n                if (this.dataSource.valueAxis === 'row' && (this.dataSource.values.length > 1 || this.dataSource.alwaysShowValueHeader)) {\n                    rowIndex = this.pivotValues[rowIndex][colIndex].type === 'value' ? rowIndex : (rowIndex + 1);\n                }\n                else if (this.dataSource.valueAxis === 'column' && (this.dataSource.values.length > 1 || this.dataSource.alwaysShowValueHeader)) {\n                    colIndex = (Number(ele.getAttribute('aria-colindex')) + Number(ele.getAttribute('aria-colspan')) - 1);\n                    rowIndex = this.engineModule.headerContent.length - 1;\n                }\n                this.setProperties({\n                    dataSource: {\n                        valueSortSettings: {\n                            columnIndex: (Number(ele.getAttribute('aria-colindex')) +\n                                Number(ele.getAttribute('aria-colspan')) - 1),\n                            sortOrder: this.dataSource.valueSortSettings.sortOrder === 'Descending' ? 'Ascending' : 'Descending',\n                            headerText: this.pivotValues[rowIndex][colIndex].valueSort.levelName,\n                            headerDelimiter: this.dataSource.valueSortSettings.headerDelimiter ?\n                                this.dataSource.valueSortSettings.headerDelimiter : '.'\n                        }\n                    }\n                }, true);\n                /* tslint:enable */\n                showSpinner(this.element);\n                this.engineModule.enableValueSorting = true;\n                this.engineModule.generateGridData(this.dataSource, this.engineModule.headerCollection);\n                this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n                this.renderPivotGrid();\n            }\n        }\n        else if (target.classList.contains(cls.COLLAPSE) || target.classList.contains(cls.EXPAND)) {\n            this.onDrill(target);\n        }\n        else {\n            this.CellClicked(target, e);\n            return;\n        }\n    };\n    PivotView.prototype.framePivotColumns = function (gridcolumns) {\n        for (var _i = 0, gridcolumns_1 = gridcolumns; _i < gridcolumns_1.length; _i++) {\n            var column = gridcolumns_1[_i];\n            if (column.columns && column.columns.length > 0) {\n                this.framePivotColumns(column.columns);\n            }\n            else {\n                /* tslint:disable */\n                var levelName = column.field === '0.formattedText' ? '' :\n                    (column.customAttributes ? column.customAttributes.cell.valueSort.levelName : '');\n                var width = this.renderModule.setSavedWidth(column.field === '0.formattedText' ? column.field :\n                    levelName, Number(column.width));\n                this.pivotColumns.push({\n                    allowReordering: column.allowReordering,\n                    allowResizing: column.allowResizing,\n                    headerText: levelName,\n                    width: width\n                });\n                this.totColWidth = this.totColWidth + Number(width);\n                /* tslint:enable */\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.setGridColumns = function (gridcolumns) {\n        if (this.element.offsetWidth < this.totColWidth) {\n            for (var _i = 0, gridcolumns_2 = gridcolumns; _i < gridcolumns_2.length; _i++) {\n                var column = gridcolumns_2[_i];\n                if (column.columns && column.columns.length > 0) {\n                    this.setGridColumns(column.columns);\n                }\n                else {\n                    /* tslint:disable */\n                    var levelName = column.field === '0.formattedText' ? '' :\n                        (column.customAttributes ? column.customAttributes.cell.valueSort.levelName : '');\n                    column.allowReordering = this.pivotColumns[this.posCount].allowReordering;\n                    column.allowResizing = this.pivotColumns[this.posCount].allowResizing;\n                    column.width = this.renderModule.setSavedWidth(column.field === '0.formattedText' ? column.field :\n                        levelName, Number(this.pivotColumns[this.posCount].width));\n                    this.posCount++;\n                    if (column.allowReordering) {\n                        this.gridSettings.allowReordering = true;\n                    }\n                    if (column.allowResizing) {\n                        this.gridSettings.allowResizing = true;\n                    }\n                }\n            }\n            if (this.gridSettings.allowReordering) {\n                Grid.Inject(Reorder);\n            }\n            if (this.gridSettings.allowResizing) {\n                Grid.Inject(Resize);\n            }\n            /* tslint:enable */\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.triggerColumnRenderEvent = function (gridcolumns) {\n        this.pivotColumns = [];\n        this.totColWidth = 0;\n        this.framePivotColumns(gridcolumns);\n        var firstColWidth = this.pivotColumns[0].width;\n        var eventArgs = {\n            columns: this.pivotColumns,\n            dataSource: this.dataSource\n        };\n        this.trigger(events.beforeColumnsRender, eventArgs);\n        if (firstColWidth !== this.pivotColumns[0].width && this.element.offsetWidth < this.totColWidth) {\n            this.firstColWidth = this.pivotColumns[0].width;\n        }\n        this.posCount = 0;\n        this.setGridColumns(gridcolumns);\n    };\n    /** @hidden */\n    PivotView.prototype.setCommonColumnsWidth = function (columns, width) {\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.field !== '0.formattedText') {\n                if (column.columns) {\n                    this.setCommonColumnsWidth(column.columns, width);\n                }\n                else {\n                    column.width = width;\n                }\n            }\n            else {\n                column.width = width < this.firstColWidth ? this.firstColWidth : width;\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.onWindowResize = function () {\n        var _this_1 = this;\n        /* tslint:disable */\n        clearTimeout(this.timeOutObj);\n        this.timeOutObj = setTimeout(function () {\n            if (_this_1.element && _this_1.element.classList.contains('e-pivotview') && _this_1.engineModule) {\n                var colWidth = _this_1.renderModule.calculateColWidth(_this_1.dataSource.values.length > 0 ?\n                    _this_1.engineModule.pivotValues[0].length : 2);\n                _this_1.grid.width = _this_1.renderModule.calculateGridWidth();\n                _this_1.setCommonColumnsWidth(_this_1.grid.columns, colWidth);\n                _this_1.posCount = 0;\n                _this_1.getSelectedCellsPos();\n                if (!_this_1.showGroupingBar) {\n                    _this_1.setGridColumns(_this_1.grid.columns);\n                }\n                _this_1.grid.headerModule.refreshUI();\n                if (_this_1.showGroupingBar && _this_1.groupingBarModule && _this_1.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n                    _this_1.groupingBarModule.setGridRowWidth();\n                }\n                _this_1.setSavedSelectedCells();\n            }\n        }, 500);\n        /* tslint:enable */\n    };\n    PivotView.prototype.CellClicked = function (target, e) {\n        var ele = null;\n        if (target.classList.contains('e-headercell') || target.classList.contains('e-rowcell')) {\n            ele = target;\n        }\n        else if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-cellvalue') ||\n            target.classList.contains('e-headercelldiv')) {\n            ele = target.parentElement;\n        }\n        else if (target.classList.contains('e-headertext')) {\n            ele = target.parentElement.parentElement;\n        }\n        else if (target.classList.contains(cls.ROW_SELECT)) {\n            if (target.classList.contains(cls.SPAN_CLICKED)) {\n                this.isPopupClicked = false;\n            }\n            else {\n                this.isPopupClicked = true;\n            }\n        }\n        /* tslint:disable */\n        if (ele) {\n            var colIndex = Number(ele.getAttribute('aria-colindex'));\n            var rowIndex = Number(ele.getAttribute('index'));\n            var colSpan = Number(ele.getAttribute('aria-colspan'));\n            if (this.cellClick) {\n                this.trigger(events.cellClick, {\n                    currentCell: ele,\n                    data: this.pivotValues[rowIndex][colIndex]\n                });\n            }\n            if (this.gridSettings.allowSelection) {\n                if (this.gridSettings.selectionSettings.mode === 'Both' ? !ele.classList.contains(cls.ROW_CELL_CLASS) :\n                    this.gridSettings.selectionSettings.mode !== 'Row') {\n                    this.clearSelection(ele, e, colIndex, rowIndex);\n                    this.applyColumnSelection(e, ele, colIndex, colIndex + (colSpan > 0 ? (colSpan - 1) : 0), rowIndex);\n                }\n                else {\n                    this.clearSelection(ele, e, colIndex, rowIndex);\n                }\n                if (this.gridSettings.selectionSettings.type === 'Multiple' &&\n                    (this.gridSettings.selectionSettings.mode === 'Row' || this.gridSettings.selectionSettings.mode === 'Both')) {\n                    this.applyRowSelection(0, rowIndex);\n                }\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.clearSelection = function (ele, e, colIndex, rowIndex) {\n        if ((!e.shiftKey && !e.ctrlKey) || this.gridSettings.selectionSettings.type === 'Single') {\n            if (this.gridSettings.selectionSettings.mode === 'Cell') {\n                if (ele.classList.contains(cls.COLUMNSHEADER)) {\n                    this.element.querySelectorAll(('.' + cls.ROW_CELL_CLASS + '.') + cls.CELL_SELECTED_BGCOLOR).forEach(function (ele) {\n                        ele.classList.remove(cls.CELL_SELECTED_BGCOLOR);\n                    });\n                }\n                else {\n                    this.element.querySelectorAll(('.' + cls.COLUMNSHEADER + '.') + cls.CELL_ACTIVE_BGCOLOR).forEach(function (ele) {\n                        ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                    });\n                }\n            }\n            else if (this.gridSettings.selectionSettings.mode === 'Both') {\n                if (ele.classList.contains(cls.ROW_CELL_CLASS)) {\n                    this.element.querySelectorAll('.' + cls.SELECTED_BGCOLOR).forEach(function (ele) {\n                        if (Number(ele.getAttribute('index')) !== rowIndex) {\n                            ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                        }\n                    });\n                }\n                else {\n                    this.element.querySelectorAll('.' + cls.ROWSHEADER + '.' + cls.CELL_SELECTED_BGCOLOR).forEach(function (ele) {\n                        ele.classList.remove(cls.CELL_SELECTED_BGCOLOR);\n                    });\n                }\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.applyRowSelection = function (colIndex, rowIndex) {\n        var pivotValue = this.engineModule.pivotValues[rowIndex][colIndex];\n        if (pivotValue && pivotValue.isDrilled) {\n            var parentLevel = pivotValue.level;\n            var rCount = rowIndex;\n            do {\n                rCount++;\n                pivotValue = this.engineModule.pivotValues[rCount][colIndex];\n            } while (pivotValue && parentLevel < pivotValue.level);\n            var _this = this;\n            if (this.isAdaptive) {\n                this.rowRangeSelection = {\n                    enable: true,\n                    startIndex: rowIndex - _this.renderModule.rowStartPos,\n                    endIndex: rCount - (1 + _this.renderModule.rowStartPos)\n                };\n            }\n            else {\n                _this.grid.selectionModule.selectRowsByRange(rowIndex -\n                    _this.renderModule.rowStartPos, rCount - (1 + _this.renderModule.rowStartPos));\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.applyColumnSelection = function (e, target, colStart, colEnd, rowStart) {\n        if (!target.classList.contains(cls.ROWSHEADER) &&\n            (this.gridSettings.selectionSettings.mode === 'Cell' ? target.classList.contains(cls.COLUMNSHEADER) : true)) {\n            var isCtrl_1 = e.ctrlKey;\n            if (this.isAdaptive && this.gridSettings.selectionSettings.type === 'Multiple') {\n                this.grid.selectionModule.showPopup(e);\n                if (this.isPopupClicked) {\n                    this.element.querySelector('.' + cls.ROW_SELECT).classList.add(cls.SPAN_CLICKED);\n                    isCtrl_1 = true;\n                }\n                else {\n                    this.element.querySelector('.' + cls.ROW_SELECT).classList.remove(cls.SPAN_CLICKED);\n                    isCtrl_1 = false;\n                }\n            }\n            var queryStringArray = [];\n            var type = this.gridSettings.selectionSettings.type;\n            var isToggle_1 = target.classList.contains(cls.CELL_ACTIVE_BGCOLOR);\n            var activeColumns_1 = [];\n            var actColPos_1 = {};\n            for (var cCnt = colStart; cCnt <= colEnd; cCnt++) {\n                activeColumns_1.push(cCnt.toString());\n            }\n            if (!isCtrl_1 || type === 'Single') {\n                this.element.querySelectorAll('.' + cls.CELL_ACTIVE_BGCOLOR).forEach(function (ele) {\n                    ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                    if (activeColumns_1.indexOf(ele.getAttribute('aria-colindex')) === -1) {\n                        isToggle_1 = false;\n                    }\n                    var colIndex = Number(ele.getAttribute('aria-colindex'));\n                    actColPos_1[colIndex] = colIndex;\n                });\n                /* tslint:disable-next-line:no-any */\n                activeColumns_1 = Object.keys(actColPos_1).length > 0 ? Object.keys(actColPos_1).sort(function (a, b) {\n                    return a - b;\n                }) : activeColumns_1;\n            }\n            else {\n                isToggle_1 = false;\n            }\n            if (type === 'Multiple' && e.shiftKey) {\n                this.shiftLockedPos = this.shiftLockedPos.length === 0 ? activeColumns_1 : this.shiftLockedPos;\n                if (Number(this.shiftLockedPos[0]) <= colStart) {\n                    colStart = Number(this.shiftLockedPos[0]);\n                }\n                else {\n                    colEnd = colEnd < Number(this.shiftLockedPos[this.shiftLockedPos.length - 1]) ?\n                        Number(this.shiftLockedPos[this.shiftLockedPos.length - 1]) : colEnd;\n                }\n            }\n            else {\n                this.shiftLockedPos = [];\n            }\n            var count = colStart;\n            while (count <= colEnd) {\n                queryStringArray.push('[aria-colindex=\"' + count + '\"]' + (this.gridSettings.selectionSettings.mode === 'Cell' ?\n                    '[index=\"' + rowStart + '\"]' : \"\") + '');\n                count++;\n            }\n            if (!isToggle_1) {\n                rowStart = target.classList.contains('e-headercell') ? rowStart : (this.renderModule.rowStartPos - 1);\n                this.element.querySelectorAll(queryStringArray.toString()).forEach(function (ele) {\n                    if (Number(ele.getAttribute('index')) >= rowStart) {\n                        if (ele.classList.contains(cls.CELL_ACTIVE_BGCOLOR) && isCtrl_1) {\n                            ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                        }\n                        else {\n                            ele.classList.add(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                        }\n                    }\n                });\n            }\n            this.renderModule.selected();\n        }\n    };\n    PivotView.prototype.getSelectedCellsPos = function () {\n        var control = this;\n        control.savedSelectedCellsPos = [];\n        this.element.querySelectorAll('.' + cls.SELECTED_BGCOLOR).forEach(function (ele) {\n            control.savedSelectedCellsPos.push({ rowIndex: ele.getAttribute('index'), colIndex: ele.getAttribute('aria-colindex') });\n        });\n    };\n    PivotView.prototype.setSavedSelectedCells = function () {\n        var control = this;\n        this.savedSelectedCellsPos.forEach(function (item) {\n            var query = '[aria-colindex=\"' + item.colIndex + '\"][index=\"' + item.rowIndex + '\"]';\n            control.element.querySelector(query).classList.add(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n        });\n    };\n    /* tslint:enable */\n    PivotView.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, this.isAdaptive ? 'touchend' : 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n        EventHandler.remove(this.element.querySelector('.' + cls.GRID_HEADER), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'mouseup', this.mouseUpHandler);\n        window.removeEventListener('resize', this.onWindowResize.bind(this), true);\n    };\n    PivotView.prototype.renderEmptyGrid = function () {\n        this.isEmptyGrid = true;\n        if (this.element.querySelector('.' + cls.GRID_CLASS)) {\n            remove(this.element.querySelector('.' + cls.GRID_CLASS));\n        }\n        this.renderModule = new Render(this);\n        this.renderModule.bindGrid(this, true);\n        /* tslint:disable:no-empty */\n        this.grid.showSpinner = function () { };\n        this.grid.hideSpinner = function () { };\n        /* tslint:enable:no-empty */\n        this.element.appendChild(createElement('div', { id: this.element.id + '_grid' }));\n        this.grid.appendTo('#' + this.element.id + '_grid');\n    };\n    PivotView.prototype.initEngine = function () {\n        this.trigger(events.enginePopulating, { 'dataSource': this.dataSource });\n        /* tslint:disable:align */\n        this.engineModule = new PivotEngine(this.dataSource, '', undefined, this.pageSettings, this.enableValueSorting, (this.allowDrillThrough || this.editSettings.allowEditing));\n        this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n        this.trigger(events.enginePopulated, { 'pivotValues': this.pivotValues });\n        this.notify(events.dataReady, {});\n        this.isEmptyGrid = false;\n    };\n    PivotView.prototype.generateData = function () {\n        var _this_1 = this;\n        this.renderEmptyGrid();\n        showSpinner(this.element);\n        /* tslint:disable */\n        if (this.dataSource && this.dataSource.data) {\n            if (this.dataSource.data instanceof DataManager) {\n                setTimeout(function () {\n                    _this_1.dataSource.data.executeQuery(new Query()).then(function (e) {\n                        if (!_this_1.element.querySelector('.e-spinner-pane')) {\n                            showSpinner(_this_1.element);\n                        }\n                        _this_1.setProperties({ dataSource: { data: e.result } }, true);\n                        _this_1.initEngine();\n                    });\n                }, 100);\n            }\n            else if (this.dataSource.data.length > 0) {\n                this.initEngine();\n            }\n            else {\n                hideSpinner(this.element);\n            }\n        }\n        else {\n            hideSpinner(this.element);\n        }\n        /* tslint:enable */\n    };\n    PivotView.prototype.applyFormatting = function () {\n        if (this.pivotValues) {\n            var colIndex = [];\n            for (var len = this.pivotValues.length, i = 0; i < len; i++) {\n                if (this.pivotValues[i] !== undefined && this.pivotValues[i][0] === undefined) {\n                    colIndex.push(i);\n                }\n            }\n            for (var i = 0; i < this.pivotValues.length; i++) {\n                for (var j = 1; (this.pivotValues[i] && j < this.pivotValues[i].length); j++) {\n                    if (this.pivotValues[i][j].axis === 'value') {\n                        this.pivotValues[i][j].style = undefined;\n                        this.pivotValues[i][j].cssClass = undefined;\n                        var format_1 = this.dataSource.conditionalFormatSettings;\n                        for (var k = 0; k < format_1.length; k++) {\n                            if (this.checkCondition(this.pivotValues[i][j].value, format_1[k].conditions, format_1[k].value1, format_1[k].value2)) {\n                                var ilen = (this.dataSource.valueAxis === 'row' ? i : this.engineModule.headerContent.length - 1);\n                                var jlen = (this.dataSource.valueAxis === 'row' ? 0 : j);\n                                if ((!format_1[k].measure || this.dataSource.values.length === 1 ||\n                                    (this.pivotValues[ilen][jlen].valueSort &&\n                                        this.pivotValues[ilen][jlen].valueSort.levelName.\n                                            indexOf(format_1[k].measure) > -1)) &&\n                                    (!format_1[k].label || ((this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]] &&\n                                        this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]][j] &&\n                                        this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]][j].valueSort &&\n                                        this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]][j].\n                                            valueSort[format_1[k].label]) || (this.pivotValues[i][0].\n                                        valueSort.levelName.indexOf(format_1[k].label) > -1)))) {\n                                    if (format_1[k].style && format_1[k].style.backgroundColor) {\n                                        format_1[k].style.backgroundColor = this.conditionalFormattingModule\n                                            .isHex(format_1[k].style.backgroundColor.substr(1)) ? format_1[k].style.backgroundColor :\n                                            this.conditionalFormattingModule.colourNameToHex(format_1[k].style.backgroundColor);\n                                    }\n                                    if (format_1[k].style && format_1[k].style.color) {\n                                        format_1[k].style.color = this.conditionalFormattingModule\n                                            .isHex(format_1[k].style.color.substr(1)) ? format_1[k].style.color :\n                                            this.conditionalFormattingModule.colourNameToHex(format_1[k].style.color);\n                                    }\n                                    this.pivotValues[i][j].style = format_1[k].style;\n                                    this.pivotValues[i][j].cssClass = 'format' + this.element.id + k;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            var format = this.dataSource.conditionalFormatSettings;\n            for (var k = 0; k < format.length; k++) {\n                var sheet = (function () {\n                    var style = document.createElement('style');\n                    style.appendChild(document.createTextNode(''));\n                    document.head.appendChild(style);\n                    return style.sheet;\n                })();\n                var str = 'color: ' + format[k].style.color + '!important;background-color: ' + format[k].style.backgroundColor +\n                    '!important;font-size: ' + format[k].style.fontSize + '!important;font-family: ' + format[k].style.fontFamily +\n                    ' !important;';\n                sheet.insertRule('.format' + this.element.id + k + '{' + str + '}', 0);\n            }\n        }\n    };\n    PivotView.prototype.applyHyperlinkSettings = function () {\n        if (this.pivotValues) {\n            var pivotValues = this.pivotValues;\n            var colIndex = [];\n            for (var len = pivotValues.length, i = 0; i < len; i++) {\n                if (pivotValues[i] !== undefined && pivotValues[i][0] === undefined) {\n                    colIndex.push(i);\n                }\n            }\n            if (this.hyperlinkSettings.conditionalSettings.length > 0) {\n                for (var i = 0; i < pivotValues.length; i++) {\n                    for (var j = 1; (pivotValues[i] && j < pivotValues[i].length); j++) {\n                        if (pivotValues[i][j].axis === 'value') {\n                            pivotValues[i][j].enableHyperlink = false;\n                            var collection = this.hyperlinkSettings.conditionalSettings;\n                            for (var k = 0; k < collection.length; k++) {\n                                if (this.checkCondition(pivotValues[i][j].value, collection[k].conditions, collection[k].value1, collection[k].value2)) {\n                                    var ilen = (this.dataSource.valueAxis === 'row' ?\n                                        i : this.engineModule.headerContent.length - 1);\n                                    var jlen = (this.dataSource.valueAxis === 'row' ? 0 : j);\n                                    if ((!collection[k].measure || this.dataSource.values.length === 1 ||\n                                        (pivotValues[ilen][jlen].valueSort &&\n                                            pivotValues[ilen][jlen].valueSort.levelName.\n                                                indexOf(collection[k].measure) > -1)) &&\n                                        (!collection[k].label || ((pivotValues[colIndex[collection[k].label.split('.').length - 1]] &&\n                                            pivotValues[colIndex[collection[k].label.split('.').length - 1]][j] &&\n                                            pivotValues[colIndex[collection[k].label.split('.').length - 1]][j].valueSort &&\n                                            pivotValues[colIndex[collection[k].label.split('.').length - 1]][j].\n                                                valueSort[collection[k].label]) || (pivotValues[i][0].\n                                            valueSort.levelName.indexOf(collection[k].label) > -1)))) {\n                                        pivotValues[i][j].enableHyperlink = true;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(this.hyperlinkSettings.headerText)) {\n                for (var i = 0; i < pivotValues.length; i++) {\n                    for (var j = 1; (pivotValues[i] && j < pivotValues[i].length); j++) {\n                        if (pivotValues[i][j].axis === 'value') {\n                            // (pivotValues[i][j] as IAxisSet).enableHyperlink = false;\n                            var label = this.hyperlinkSettings.headerText;\n                            var ilen = (this.dataSource.valueAxis === 'row' ?\n                                i : this.engineModule.headerContent.length - 1);\n                            var jlen = (this.dataSource.valueAxis === 'row' ? 0 : j);\n                            if ((pivotValues[colIndex[label.split('.').length - 1]] &&\n                                pivotValues[colIndex[label.split('.').length - 1]][j] &&\n                                pivotValues[colIndex[label.split('.').length - 1]][j].\n                                    valueSort && pivotValues[colIndex[label.split('.').length - 1]][j].\n                                valueSort[label])) {\n                                for (var _i = 0, colIndex_1 = colIndex; _i < colIndex_1.length; _i++) {\n                                    var index = colIndex_1[_i];\n                                    if (pivotValues[index][j] &&\n                                        pivotValues[index][j].axis === 'column' &&\n                                        (pivotValues[index][j].valueSort.levelName.indexOf(label) > -1)) {\n                                        pivotValues[index][j].enableHyperlink = true;\n                                    }\n                                }\n                                pivotValues[i][j].enableHyperlink = true;\n                            }\n                            else if (pivotValues[i][0].valueSort.levelName.indexOf(label) > -1) {\n                                pivotValues[i][0].enableHyperlink = true;\n                                pivotValues[i][j].enableHyperlink = true;\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                return;\n            }\n        }\n    };\n    PivotView.prototype.checkCondition = function (cellValue, conditions, conditionalValue1, conditionalValue2) {\n        switch (conditions) {\n            case 'LessThan':\n                return cellValue < conditionalValue1;\n            case 'LessThanOrEqualTo':\n                return cellValue <= conditionalValue1;\n            case 'GreaterThan':\n                return cellValue > conditionalValue1;\n            case 'GreaterThanOrEqualTo':\n                return cellValue >= conditionalValue1;\n            case 'Equals':\n                return cellValue === conditionalValue1;\n            case 'NotEquals':\n                return cellValue !== conditionalValue1;\n            case 'Between':\n                return (conditionalValue1 < conditionalValue2 && cellValue >= conditionalValue1 && cellValue <= conditionalValue2) ||\n                    (conditionalValue1 > conditionalValue2 && cellValue <= conditionalValue1 && cellValue >= conditionalValue2);\n            case 'NotBetween':\n                return !((conditionalValue1 < conditionalValue2 && cellValue >= conditionalValue1 && cellValue <= conditionalValue2) ||\n                    (conditionalValue1 > conditionalValue2 && cellValue <= conditionalValue1 && cellValue >= conditionalValue2));\n            default:\n                return false;\n        }\n    };\n    var PivotView_1;\n    __decorate([\n        Property('USD')\n    ], PivotView.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"showFieldList\", void 0);\n    __decorate([\n        Complex({}, GridSettings)\n    ], PivotView.prototype, \"gridSettings\", void 0);\n    __decorate([\n        Complex({}, GroupingBarSettings)\n    ], PivotView.prototype, \"groupingBarSettings\", void 0);\n    __decorate([\n        Complex({}, HyperlinkSettings)\n    ], PivotView.prototype, \"hyperlinkSettings\", void 0);\n    __decorate([\n        Complex({}, DataSource)\n    ], PivotView.prototype, \"dataSource\", void 0);\n    __decorate([\n        Complex({}, CellEditSettings)\n    ], PivotView.prototype, \"editSettings\", void 0);\n    __decorate([\n        Property()\n    ], PivotView.prototype, \"pivotValues\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"showGroupingBar\", void 0);\n    __decorate([\n        Property(true)\n    ], PivotView.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"showValuesButton\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowCalculatedField\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"enableValueSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowConditionalFormatting\", void 0);\n    __decorate([\n        Property('auto')\n    ], PivotView.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PivotView.prototype, \"width\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowDrillThrough\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowDeferLayoutUpdate\", void 0);\n    __decorate([\n        Property(1000)\n    ], PivotView.prototype, \"maxNodeLimitInMemberEditor\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"beforeColumnsRender\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"selected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"enginePopulating\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"enginePopulated\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"onFieldDropped\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"beforeExport\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"cellClick\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"drillThrough\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"beginDrillThrough\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"hyperlinkCellClick\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"cellSelected\", void 0);\n    PivotView = PivotView_1 = __decorate([\n        NotifyPropertyChanges\n    ], PivotView);\n    return PivotView;\n}(Component));\nexport { PivotView };\n","import { KeyboardEvents, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Keyboard interaction\n */\n/** @hidden */\nvar CommonKeyboardInteraction = /** @class */ (function () {\n    /**\n     * Constructor\n     */\n    function CommonKeyboardInteraction(parent) {\n        this.keyConfigs = {\n            shiftF: 'shift+F',\n            shiftS: 'shift+S',\n            delete: 'delete',\n            enter: 'enter'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    }\n    CommonKeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'shiftF':\n                this.processFilter(e);\n                break;\n            case 'shiftS':\n                this.processSort(e);\n                break;\n            case 'delete':\n                this.processDelete(e);\n                break;\n            case 'enter':\n                this.processOpenContextMenu(e);\n                break;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processOpenContextMenu = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS) &&\n            closest(target, '.' + cls.VALUE_AXIS_CLASS)) {\n            target.querySelector('.' + cls.AXISFIELD_ICON_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processSort = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS) &&\n            !closest(target, '.' + cls.VALUE_AXIS_CLASS) && !closest(target, '.' + cls.AXIS_FILTER_CLASS)) {\n            target.querySelector('.' + cls.SORT_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processFilter = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS) && !closest(target, '.' + cls.VALUE_AXIS_CLASS)) {\n            target.querySelector('.' + cls.FILTER_COMMON_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processDelete = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS)) {\n            target.querySelector('.' + cls.REMOVE_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    /**\n     * To destroy the keyboard module.\n     * @return {void}\n     * @private\n     */\n    CommonKeyboardInteraction.prototype.destroy = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return CommonKeyboardInteraction;\n}());\nexport { CommonKeyboardInteraction };\n","import { isNullOrUndefined, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport * as cls from '../base/css-constant';\n/**\n * `EventBase` for active fields action.\n */\n/** @hidden */\nvar EventBase = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function EventBase(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Updates sorting order for the selected field.\n     * @method updateSorting\n     * @param  {Event} args - Contains clicked element information to update dataSource.\n     * @return {void}\n     * @hidden\n     */\n    EventBase.prototype.updateSorting = function (args) {\n        if (this.parent.filterDialog.dialogPopUp) {\n            this.parent.filterDialog.dialogPopUp.close();\n        }\n        var target = args.target;\n        var fieldName = target.parentElement.id;\n        var isDescending = target.classList.contains(cls.SORT_DESCEND_CLASS);\n        var sortObj = this.getSortItemByName(fieldName);\n        if (!isNullOrUndefined(sortObj)) {\n            for (var i = 0; i < this.parent.dataSource.sortSettings.length; i++) {\n                if (this.parent.dataSource.sortSettings[i].name === fieldName) {\n                    this.parent.dataSource.sortSettings.splice(i, 1);\n                    break;\n                }\n            }\n            var newSortObj = { name: fieldName, order: isDescending ? 'Ascending' : 'Descending' };\n            this.parent.dataSource.sortSettings.push(newSortObj);\n        }\n        else {\n            var newSortObj = { name: fieldName, order: isDescending ? 'Ascending' : 'Descending' };\n            this.parent.dataSource.sortSettings.push(newSortObj);\n        }\n        isDescending ? removeClass([target], cls.SORT_DESCEND_CLASS) : addClass([target], cls.SORT_DESCEND_CLASS);\n    };\n    /**\n     * Updates sorting order for the selected field.\n     * @method updateFiltering\n     * @param  {Event} args - Contains clicked element information to update dataSource.\n     * @return {void}\n     * @hidden\n     */\n    EventBase.prototype.updateFiltering = function (args) {\n        var target = args.target;\n        var fieldName = target.parentElement.id;\n        var fieldCaption = target.parentElement.textContent;\n        var isInclude = false;\n        var filterItems = [];\n        this.parent.engineModule.fieldList[fieldName].dateMember = new DataManager(this.parent.engineModule.\n            fieldList[fieldName].dateMember).executeLocal(new Query().\n            sortBy('actualText', this.parent.engineModule.fieldList[fieldName].sort.toLowerCase()));\n        var filterObj = this.getFilterItemByName(fieldName);\n        if (!isNullOrUndefined(filterObj)) {\n            isInclude = filterObj.type === 'Include' ? true : false;\n            filterItems = filterObj.items ? filterObj.items : [];\n        }\n        var treeData = this.getTreeData(isInclude, this.parent.engineModule.fieldList[fieldName].dateMember, filterItems, fieldName);\n        if (this.parent.filterDialog.dialogPopUp) {\n            this.parent.filterDialog.dialogPopUp.close();\n        }\n        var popupTarget;\n        popupTarget = this.parent.moduleName !== 'pivotfieldlist' ?\n            popupTarget = this.parent.element : popupTarget = document.getElementById(this.parent.parentID + '_Wrapper');\n        this.parent.filterDialog.createFilterDialog(treeData, fieldName, fieldCaption, popupTarget);\n    };\n    /**\n     * Gets sort object for the given field name from the dataSource.\n     * @method getSortItemByName\n     * @param  {string} fieldName - Gets sort settings for the given field name.\n     * @return {Sort}\n     * @hidden\n     */\n    EventBase.prototype.getSortItemByName = function (fieldName) {\n        var sortObjects = this.parent.dataSource.sortSettings;\n        return new DataManager({ json: sortObjects }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * Gets filter object for the given field name from the dataSource.\n     * @method getFilterItemByName\n     * @param  {string} fieldName - Gets filter settings for the given field name.\n     * @return {Sort}\n     * @hidden\n     */\n    EventBase.prototype.getFilterItemByName = function (fieldName) {\n        var filterObjects = this.parent.dataSource.filterSettings;\n        return new DataManager({ json: filterObjects }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * Gets filter object for the given field name from the dataSource.\n     * @method getFieldByName\n     * @param  {string} fieldName - Gets filter settings for the given field name.\n     * @return {Sort}\n     * @hidden\n     */\n    EventBase.prototype.getFieldByName = function (fieldName, fields) {\n        return new DataManager({ json: fields }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * Gets format object for the given field name from the dataSource.\n     * @method getFilterItemByName\n     * @param  {string} fieldName - Gets format settings for the given field name.\n     * @return {IFormatSettings}\n     * @hidden\n     */\n    EventBase.prototype.getFormatItemByName = function (fieldName) {\n        var formatObjects = this.parent.dataSource.formatSettings;\n        return new DataManager({ json: formatObjects }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * show tree nodes using search text.\n     * @hidden\n     */\n    EventBase.prototype.searchTreeNodes = function (args, treeObj, isFieldCollection) {\n        if (isFieldCollection) {\n            var searchList = [];\n            var nonSearchList = [];\n            var list = [].slice.call(treeObj.element.querySelectorAll('li'));\n            for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n                var element = list_1[_i];\n                if ((element.querySelector('.e-list-text').textContent.toLowerCase()).indexOf(args.value.toLowerCase()) > -1) {\n                    searchList.push(element);\n                }\n                else {\n                    nonSearchList.push(element);\n                }\n            }\n            treeObj.enableNodes(searchList);\n            treeObj.disableNodes(nonSearchList);\n        }\n        else {\n            var searchList = [];\n            this.parent.searchTreeItems = [];\n            var memberCount = 0;\n            memberCount = 1;\n            for (var _a = 0, _b = this.parent.currentTreeItems; _a < _b.length; _a++) {\n                var item = _b[_a];\n                if (item.name.toLowerCase().indexOf(args.value.toLowerCase()) > -1) {\n                    this.parent.searchTreeItems.push(item);\n                    if (memberCount <= this.parent.control.maxNodeLimitInMemberEditor) {\n                        searchList.push(item);\n                    }\n                    memberCount++;\n                }\n            }\n            memberCount--;\n            if (memberCount > this.parent.control.maxNodeLimitInMemberEditor) {\n                this.parent.editorLabelElement.innerText = (memberCount - this.parent.control.maxNodeLimitInMemberEditor) +\n                    this.parent.control.localeObj.getConstant('editorDataLimitMsg');\n                this.parent.filterDialog.dialogPopUp.height = (this.parent.filterDialog.allowExcelLikeFilter ? '440px' : '400px');\n                this.parent.isDataOverflow = true;\n            }\n            else {\n                this.parent.editorLabelElement.innerText = '';\n                this.parent.filterDialog.dialogPopUp.height = (this.parent.filterDialog.allowExcelLikeFilter ? '400px' : '350px');\n                this.parent.isDataOverflow = false;\n            }\n            this.parent.isDataOverflow = (memberCount > this.parent.control.maxNodeLimitInMemberEditor);\n            this.parent.editorLabelElement.parentElement.style.display = this.parent.isDataOverflow ? 'inline-block' : 'none';\n            treeObj.fields = { dataSource: searchList, id: 'id', text: 'name', isChecked: 'checkedStatus' };\n            treeObj.dataBind();\n        }\n    };\n    EventBase.prototype.getTreeData = function (isInclude, members, filterItems, fieldName) {\n        this.parent.currentTreeItems = [];\n        this.parent.searchTreeItems = [];\n        this.parent.currentTreeItemsPos = {};\n        this.parent.savedTreeFilterPos = {};\n        this.parent.isDateField = this.parent.engineModule.formatFields[fieldName] &&\n            this.parent.engineModule.formatFields[fieldName].type === 'date';\n        var list = [];\n        var memberCount = 1;\n        var filterObj = {};\n        for (var _i = 0, filterItems_1 = filterItems; _i < filterItems_1.length; _i++) {\n            var item = filterItems_1[_i];\n            filterObj[item] = item;\n        }\n        for (var _a = 0, members_1 = members; _a < members_1.length; _a++) {\n            var member = members_1[_a];\n            var memberName = this.parent.isDateField ? member.formattedText : member.actualText.toString();\n            var obj = {\n                id: member.actualText.toString(),\n                name: memberName,\n                checkedStatus: isInclude ? false : true\n            };\n            if (filterObj[memberName] !== undefined) {\n                obj.checkedStatus = isInclude ? true : false;\n            }\n            if (memberCount <= this.parent.control.maxNodeLimitInMemberEditor) {\n                list.push(obj);\n            }\n            if (!obj.checkedStatus) {\n                this.parent.savedTreeFilterPos[memberCount - 1] = memberName;\n            }\n            this.parent.currentTreeItems.push(obj);\n            this.parent.searchTreeItems.push(obj);\n            this.parent.currentTreeItemsPos[member.actualText] = memberCount - 1;\n            memberCount++;\n        }\n        this.parent.isDataOverflow = ((memberCount - 1) > this.parent.control.maxNodeLimitInMemberEditor);\n        return list;\n    };\n    return EventBase;\n}());\nexport { EventBase };\n","import { isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * `DialogAction` module is used to handle field list dialog related behaviour.\n */\n/** @hidden */\nvar NodeStateModified = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function NodeStateModified(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Updates the dataSource by drag and drop the selected field from either field list or axis table with dropped target position.\n     * @method onStateModified\n     * @param  {DragEventArgs & DragAndDropEventArgs} args -  Contains both pivot button and field list drag and drop information.\n     * @param  {string} fieldName - Defines dropped field name to update dataSource.\n     * @return {void}\n     * @hidden\n     */\n    NodeStateModified.prototype.onStateModified = function (args, fieldName) {\n        var droppedClass = '';\n        var nodeDropped = true;\n        var target = closest(args.target, '.' + cls.DROPPABLE_CLASS);\n        var droppedPosition = -1;\n        this.parent.dataSourceUpdate.btnElement = args.element ? args.element.parentElement : undefined;\n        if (target) {\n            droppedClass = target.classList[1] === cls.ROW_AXIS_CLASS ?\n                'rows' : target.classList[1] === cls.COLUMN_AXIS_CLASS ? 'columns' : target.classList[1] === cls.VALUE_AXIS_CLASS ?\n                'values' : target.classList[1] === cls.FILTER_AXIS_CLASS ? 'filters' : '';\n        }\n        if ((args.cancel && droppedClass === '') ||\n            (this.parent.dataSourceUpdate.btnElement && this.parent.dataSourceUpdate.btnElement.getAttribute('isValue') === 'true' &&\n                ((droppedClass === 'filters' || droppedClass === 'values') ||\n                    droppedClass.indexOf(this.parent.dataSource.valueAxis) > -1))) {\n            nodeDropped = false;\n            return nodeDropped;\n        }\n        if (droppedClass !== '') {\n            if (this.parent.engineModule.fieldList[fieldName] &&\n                this.parent.engineModule.fieldList[fieldName].aggregateType === 'CalculatedField' && droppedClass !== 'values') {\n                var title = this.parent.localeObj.getConstant('warning');\n                var description = this.parent.localeObj.getConstant('dropAction');\n                this.parent.errorDialog.createErrorDialog(title, description);\n                nodeDropped = false;\n                return nodeDropped;\n            }\n            droppedPosition = this.getButtonPosition(args.target, droppedClass);\n        }\n        else if (this.parent.engineModule.fieldList[fieldName]) {\n            this.parent.engineModule.fieldList[fieldName].isSelected = false;\n        }\n        this.parent.dataSourceUpdate.updateDataSource(fieldName, droppedClass, droppedPosition);\n        return nodeDropped;\n    };\n    NodeStateModified.prototype.getButtonPosition = function (target, droppedClass) {\n        var droppedPosition = -1;\n        var targetBtn = closest(target, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n        if (!isNullOrUndefined(targetBtn)) {\n            targetBtn = targetBtn.querySelector('.' + cls.PIVOT_BUTTON_CLASS);\n            var axisPanel = this.parent.element.querySelector('.e-' + droppedClass);\n            var pivotButtons = [].slice.call(axisPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n            for (var i = 0, n = pivotButtons.length; i < n; i++) {\n                if (pivotButtons[i].id === targetBtn.id) {\n                    droppedPosition = i;\n                    break;\n                }\n            }\n        }\n        return droppedPosition;\n    };\n    return NodeStateModified;\n}());\nexport { NodeStateModified };\n","import * as events from '../../common/base/constant';\n/**\n * `DataSourceUpdate` module is used to update the dataSource.\n */\n/** @hidden */\nvar DataSourceUpdate = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function DataSourceUpdate(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Updates the dataSource by adding the given field along with field dropped position to the dataSource.\n     * @param  {string} fieldName - Defines dropped field name to update dataSource.\n     * @param  {string} droppedClass -  Defines dropped field axis name to update dataSource.\n     * @param  {number} fieldCaption - Defines dropped position to the axis based on field position.\n     * @method updateDataSource\n     * @return {void}\n     * @hidden\n     */\n    DataSourceUpdate.prototype.updateDataSource = function (fieldName, droppedClass, droppedPosition) {\n        var dataSourceItem;\n        if (this.control && this.btnElement && this.btnElement.getAttribute('isvalue') === 'true') {\n            switch (droppedClass) {\n                case '':\n                    this.control.setProperties({ dataSource: { values: [] } }, true);\n                    break;\n                case 'rows':\n                    this.control.setProperties({ dataSource: { valueAxis: 'row' } }, true);\n                    break;\n                case 'columns':\n                    this.control.setProperties({ dataSource: { valueAxis: 'column' } }, true);\n                    break;\n            }\n        }\n        else {\n            dataSourceItem = this.removeFieldFromReport(fieldName.toString());\n            dataSourceItem = dataSourceItem ? dataSourceItem : this.getNewField(fieldName.toString());\n            if (dataSourceItem.type === 'CalculatedField' && droppedClass !== '') {\n                droppedClass = 'values';\n            }\n        }\n        if (this.control) {\n            var eventArgs = {\n                'droppedField': dataSourceItem, 'dataSource': this.parent.dataSource, 'droppedAxis': droppedClass\n            };\n            this.control.trigger(events.onFieldDropped, eventArgs);\n        }\n        if (dataSourceItem) {\n            switch (droppedClass) {\n                case 'filters':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.filters.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.filters.push(dataSourceItem);\n                    break;\n                case 'rows':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.rows.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.rows.push(dataSourceItem);\n                    break;\n                case 'columns':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.columns.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.columns.push(dataSourceItem);\n                    break;\n                case 'values':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.values.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.values.push(dataSourceItem);\n                    break;\n            }\n        }\n    };\n    /**\n     * Updates the dataSource by removing the given field from the dataSource.\n     * @param  {string} fieldName - Defines dropped field name to remove dataSource.\n     * @method removeFieldFromReport\n     * @return {void}\n     * @hidden\n     */\n    DataSourceUpdate.prototype.removeFieldFromReport = function (fieldName) {\n        var dataSourceItem;\n        var isDataSource = false;\n        var rows = this.parent.dataSource.rows;\n        var columns = this.parent.dataSource.columns;\n        var values = this.parent.dataSource.values;\n        var filters = this.parent.dataSource.filters;\n        var fields = [rows, columns, values, filters];\n        var field = this.parent.engineModule.fieldList[fieldName];\n        for (var len = 0, lnt = fields.length; len < lnt; len++) {\n            if (!isDataSource && fields[len]) {\n                for (var i = 0, n = fields[len].length; i < n; i++) {\n                    if (fields[len][i].name === fieldName) {\n                        dataSourceItem = fields[len][i].properties ?\n                            fields[len][i].properties : fields[len][i];\n                        dataSourceItem.type = field.type === 'number' ? dataSourceItem.type :\n                            'Count';\n                        fields[len].splice(i, 1);\n                        isDataSource = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return dataSourceItem;\n    };\n    /**\n     * Creates new field object given field name from the field list data.\n     * @param  {string} fieldName - Defines dropped field name to add dataSource.\n     * @method getNewField\n     * @return {void}\n     * @hidden\n     */\n    DataSourceUpdate.prototype.getNewField = function (fieldName) {\n        var field = this.parent.engineModule.fieldList[fieldName];\n        var newField = {\n            name: fieldName,\n            caption: field.caption,\n            type: field.aggregateType === undefined ? field.type === 'number' ? 'Sum' :\n                'Count' : field.aggregateType,\n            showNoDataItems: field.showNoDataItems,\n            baseField: field.baseField,\n            baseItem: field.baseItem,\n        };\n        return newField;\n    };\n    return DataSourceUpdate;\n}());\nexport { DataSourceUpdate };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * `ErrorDialog` module to create error dialog.\n */\n/** @hidden */\nvar ErrorDialog = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function ErrorDialog(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Creates the error dialog for the unexpected action done.\n     * @method createErrorDialog\n     * @return {void}\n     * @hidden\n     */\n    ErrorDialog.prototype.createErrorDialog = function (title, description) {\n        var errorDialog = createElement('div', {\n            id: this.parent.parentID + '_ErrorDialog',\n            className: cls.ERROR_DIALOG_CLASS\n        });\n        this.parent.element.appendChild(errorDialog);\n        this.errorPopUp = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            header: title,\n            content: description,\n            isModal: true,\n            visible: true,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: 'auto',\n            zIndex: 1000001,\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.closeErrorDialog.bind(this),\n                    buttonModel: { cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('ok'), isPrimary: true }\n                }\n            ],\n            closeOnEscape: true,\n            target: document.body,\n            close: this.removeErrorDialog.bind(this)\n        });\n        this.errorPopUp.appendTo(errorDialog);\n    };\n    ErrorDialog.prototype.closeErrorDialog = function () {\n        this.errorPopUp.close();\n    };\n    ErrorDialog.prototype.removeErrorDialog = function () {\n        if (this.errorPopUp && !this.errorPopUp.isDestroyed) {\n            this.errorPopUp.destroy();\n        }\n        if (document.getElementById(this.parent.parentID + '_ErrorDialog')) {\n            remove(document.getElementById(this.parent.parentID + '_ErrorDialog'));\n        }\n    };\n    return ErrorDialog;\n}());\nexport { ErrorDialog };\n","import { createElement, removeClass, addClass, remove, isNullOrUndefined, setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport { TreeView, Tab } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { setStyleAndAttributes } from '@syncfusion/ej2-grids';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\n/**\n * `FilterDialog` module to create filter dialog.\n */\n/** @hidden */\nvar FilterDialog = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function FilterDialog(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Creates the member filter dialog for the selected field.\n     * @method createFilterDialog\n     * @return {void}\n     * @hidden\n     */\n    FilterDialog.prototype.createFilterDialog = function (treeData, fieldName, fieldCaption, target) {\n        var editorDialog = createElement('div', {\n            id: this.parent.parentID + '_EditorTreeView',\n            className: cls.MEMBER_EDITOR_DIALOG_CLASS,\n            attrs: { 'data-fieldName': fieldName, 'aria-label': fieldCaption },\n            styles: 'visibility:hidden;'\n        });\n        var filterCaption = this.parent.engineModule.fieldList[fieldName].caption;\n        var headerTemplate = this.parent.localeObj.getConstant('filter') + ' ' +\n            '\"' + fieldCaption + '\"' + ' ' + this.parent.localeObj.getConstant('by');\n        this.filterObject = this.getFilterObject(fieldName);\n        this.allowExcelLikeFilter = this.isExcelFilter(fieldName);\n        this.parent.element.appendChild(editorDialog);\n        this.dialogPopUp = new Dialog({\n            animationSettings: { effect: (this.allowExcelLikeFilter ? 'None' : 'Fade') },\n            allowDragging: false,\n            header: (this.allowExcelLikeFilter ? headerTemplate : filterCaption),\n            content: (this.allowExcelLikeFilter ? '' : this.createTreeView(treeData, fieldCaption, fieldName)),\n            isModal: this.parent.renderMode === 'Popup' ? true : this.parent.isAdaptive ? true : false,\n            visible: true,\n            showCloseIcon: this.allowExcelLikeFilter ? true : false,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: this.parent.isDataOverflow ? (this.allowExcelLikeFilter ? '440px' : '400px') :\n                (this.allowExcelLikeFilter ? '400px' : '350px'),\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    buttonModel: {\n                        cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('ok'), isPrimary: true\n                    }\n                },\n                {\n                    buttonModel: {\n                        cssClass: 'e-clear-filter-button' + (this.allowExcelLikeFilter ? '' : ' ' + cls.ICON_DISABLE),\n                        iconCss: 'e-icons e-clear-filter-icon', enableRtl: this.parent.enableRtl,\n                        content: this.parent.localeObj.getConstant('clearFilter'), disabled: (this.filterObject ? false : true)\n                    }\n                },\n                {\n                    click: this.closeFilterDialog.bind(this),\n                    buttonModel: { cssClass: cls.CANCEL_BUTTON_CLASS, content: this.parent.localeObj.getConstant('cancel') }\n                }\n            ],\n            closeOnEscape: true,\n            target: target,\n            close: this.removeFilterDialog.bind(this),\n            /* tslint:disable-next-line:typedef */\n            open: this.dialogOpen.bind(this)\n        });\n        this.dialogPopUp.appendTo(editorDialog);\n        if (this.allowExcelLikeFilter) {\n            this.createTabMenu(treeData, fieldCaption, fieldName);\n            addClass([this.dialogPopUp.element], 'e-excel-filter');\n            this.updateCheckedState(fieldCaption);\n        }\n        else {\n            this.updateCheckedState(fieldCaption);\n        }\n        setStyleAttribute(this.dialogPopUp.element, { 'visibility': 'visible' });\n        if (this.allowExcelLikeFilter) {\n            this.dialogPopUp.element.querySelector('.e-dlg-closeicon-btn').focus();\n        }\n        else {\n            return;\n        }\n    };\n    FilterDialog.prototype.dialogOpen = function (args) {\n        if (args.element.querySelector('.e-editor-label-wrapper')) {\n            args.element.querySelector('.e-editor-label-wrapper').style.width =\n                args.element.offsetWidth + 'px';\n        }\n    };\n    FilterDialog.prototype.createTreeView = function (treeData, fieldCaption, fieldName) {\n        var _this = this;\n        var editorTreeWrapper = createElement('div', {\n            id: this.parent.parentID + 'EditorDiv',\n            className: cls.EDITOR_TREE_WRAPPER_CLASS + (this.allowExcelLikeFilter ? ' e-excelfilter' : '')\n        });\n        var searchWrapper = createElement('div', {\n            id: this.parent.parentID + '_SearchDiv', attrs: { 'tabindex': '-1' },\n            className: cls.EDITOR_SEARCH_WRAPPER_CLASS\n        });\n        var filterCaption = this.parent.engineModule.fieldList[fieldName].caption;\n        var editorSearch = createElement('input', { attrs: { 'type': 'text' } });\n        var labelWrapper = createElement('div', {\n            id: this.parent.parentID + '_LabelDiv', attrs: { 'tabindex': '-1' },\n            className: cls.EDITOR_LABEL_WRAPPER_CLASS\n        });\n        this.parent.editorLabelElement = createElement('label', { className: cls.EDITOR_LABEL_CLASS });\n        this.parent.editorLabelElement.innerText = this.parent.isDataOverflow ?\n            ((this.parent.currentTreeItems.length - this.parent.control.maxNodeLimitInMemberEditor) +\n                this.parent.control.localeObj.getConstant('editorDataLimitMsg')) : '';\n        labelWrapper.style.display = this.parent.isDataOverflow ? 'inline-block' : 'none';\n        labelWrapper.appendChild(this.parent.editorLabelElement);\n        searchWrapper.appendChild(editorSearch);\n        var selectAllWrapper = createElement('div', {\n            id: this.parent.parentID + '_AllDiv', attrs: { 'tabindex': '-1' },\n            className: cls.SELECT_ALL_WRAPPER_CLASS\n        });\n        var selectAllContainer = createElement('div', { className: cls.SELECT_ALL_CLASS });\n        var treeViewContainer = createElement('div', { className: cls.EDITOR_TREE_CONTAINER_CLASS });\n        var promptDiv = createElement('div', {\n            className: cls.EMPTY_MEMBER_CLASS + ' ' + cls.ICON_DISABLE,\n            innerHTML: this.parent.localeObj.getConstant('noMatches')\n        });\n        selectAllWrapper.appendChild(selectAllContainer);\n        editorTreeWrapper.appendChild(searchWrapper);\n        editorTreeWrapper.appendChild(selectAllWrapper);\n        editorTreeWrapper.appendChild(promptDiv);\n        this.editorSearch = new MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('search') + ' ' + '\"' + filterCaption + '\"',\n            enableRtl: this.parent.enableRtl,\n            cssClass: cls.EDITOR_SEARCH_CLASS,\n            showClearButton: true,\n            change: function (e) {\n                _this.parent.eventBase.searchTreeNodes(e, _this.memberTreeView, false);\n                var filterDialog = _this.dialogPopUp.element;\n                var liList = [].slice.call(_this.memberTreeView.element.querySelectorAll('li'));\n                if (liList.length === 0) {\n                    _this.allMemberSelect.disableNodes([_this.allMemberSelect.element.querySelector('li')]);\n                    filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).setAttribute('disabled', 'disabled');\n                    removeClass([promptDiv], cls.ICON_DISABLE);\n                }\n                else {\n                    _this.allMemberSelect.enableNodes([_this.allMemberSelect.element.querySelector('li')]);\n                    filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).removeAttribute('disabled');\n                    addClass([promptDiv], cls.ICON_DISABLE);\n                }\n                _this.updateCheckedState(fieldCaption);\n            }\n        });\n        this.editorSearch.appendTo(editorSearch);\n        var data = [{ id: 'all', name: 'All', checkedStatus: true }];\n        this.allMemberSelect = new TreeView({\n            fields: { dataSource: data, id: 'id', text: 'name', isChecked: 'checkedStatus', },\n            showCheckBox: true,\n            enableRtl: this.parent.enableRtl,\n        });\n        this.allMemberSelect.appendTo(selectAllContainer);\n        editorTreeWrapper.appendChild(treeViewContainer);\n        this.memberTreeView = new TreeView({\n            fields: { dataSource: treeData, id: 'id', text: 'name', isChecked: 'checkedStatus' },\n            showCheckBox: true,\n            enableRtl: this.parent.enableRtl,\n            nodeChecking: this.validateTreeNode.bind(this)\n        });\n        this.memberTreeView.appendTo(treeViewContainer);\n        editorTreeWrapper.appendChild(labelWrapper);\n        return editorTreeWrapper;\n    };\n    FilterDialog.prototype.createTabMenu = function (treeData, fieldCaption, fieldName) {\n        var wrapper = createElement('div', {\n            className: 'e-filter-tab-wrapper'\n        });\n        this.dialogPopUp.content = wrapper;\n        this.dialogPopUp.dataBind();\n        var types = ['Label', 'Value', 'Include', 'Exclude'];\n        var regx = '((-|\\\\+)?[0-9]+(\\\\.[0-9]+)?)+';\n        var member = Object.keys(this.parent.engineModule.fieldList[fieldName].members)[0];\n        var formatObj = this.parent.eventBase.getFormatItemByName(fieldName);\n        var items = [\n            {\n                header: {\n                    text: this.parent.localeObj.getConstant('member'),\n                    iconCss: (this.filterObject && types.indexOf(this.filterObject.type) > 1 ? cls.SELECTED_OPTION_ICON_CLASS : '')\n                },\n                content: this.createTreeView(treeData, fieldCaption, fieldName)\n            }\n        ];\n        for (var _i = 0, types_1 = types; _i < types_1.length; _i++) {\n            var type = types_1[_i];\n            if (((type === 'Label') && this.parent.dataSource.allowLabelFilter) ||\n                (type === 'Value' && this.parent.dataSource.allowValueFilter)) {\n                var filterType = (type === 'Label' && ((member).match(regx) &&\n                    (member).match(regx)[0].length === (member).length)) ? 'Number' :\n                    (type === 'Label' && (new Date(member).toString() !== 'Invalid Date') &&\n                        ((formatObj && formatObj.type) || (this.filterObject && this.filterObject.type === 'Date'))) ? 'Date' : type;\n                var item = {\n                    header: {\n                        text: (filterType === 'Number' ? this.parent.localeObj.getConstant('label') :\n                            this.parent.localeObj.getConstant(filterType.toLowerCase())),\n                        iconCss: (this.filterObject && this.filterObject.type === filterType ? cls.SELECTED_OPTION_ICON_CLASS : '')\n                    },\n                    /* tslint:disable-next-line:max-line-length */\n                    content: this.createCustomFilter(fieldName, (this.filterObject && this.filterObject.type === filterType ? this.filterObject : undefined), filterType.toLowerCase())\n                };\n                items.push(item);\n            }\n        }\n        var selectedIndex = (this.filterObject ? (['Label', 'Date', 'Number'].indexOf(this.filterObject.type) >= 0) ?\n            1 : this.filterObject.type === 'Value' ?\n            (this.parent.dataSource.allowLabelFilter && this.parent.dataSource.allowValueFilter) ? 2 : 1 : 0 : 0);\n        this.tabObj = new Tab({\n            heightAdjustMode: 'Auto',\n            items: items,\n            height: '100%',\n            selectedItem: selectedIndex,\n            enableRtl: this.parent.enableRtl\n        });\n        this.tabObj.appendTo(wrapper);\n        if (selectedIndex > 0) {\n            /* tslint:disable-next-line:max-line-length */\n            addClass([this.dialogPopUp.element.querySelector('.e-filter-div-content' + '.' + (selectedIndex === 1 && this.parent.dataSource.allowLabelFilter ? 'e-label-filter' : 'e-value-filter'))], 'e-selected-tab');\n        }\n    };\n    FilterDialog.prototype.createCustomFilter = function (fieldName, filterObject, type) {\n        var dataSource = [];\n        var valueOptions = [];\n        var measures = this.parent.dataSource.values;\n        var selectedOption = 'DoesNotEquals';\n        var selectedValueIndex = 0;\n        var options = {\n            label: ['Equals', 'DoesNotEquals', 'BeginWith', 'DoesNotBeginWith', 'EndsWith',\n                'DoesNotEndsWith', 'Contains', 'DoesNotContains', 'GreaterThan',\n                'GreaterThanOrEqualTo', 'LessThan', 'LessThanOrEqualTo', 'Between', 'NotBetween'],\n            date: ['Equals', 'DoesNotEquals', 'Before', 'BeforeOrEqualTo', 'After', 'AfterOrEqualTo',\n                'Between', 'NotBetween'],\n            value: ['Equals', 'DoesNotEquals', 'GreaterThan', 'GreaterThanOrEqualTo', 'LessThan',\n                'LessThanOrEqualTo', 'Between', 'NotBetween']\n        };\n        var betweenOperators = ['Between', 'NotBetween'];\n        var operatorCollection = (type === 'label' ? options.label : type === 'date' ? options.date : options.value);\n        for (var _i = 0, operatorCollection_1 = operatorCollection; _i < operatorCollection_1.length; _i++) {\n            var operator = operatorCollection_1[_i];\n            selectedOption = ((filterObject && operator === filterObject.condition) ?\n                operatorCollection.indexOf(filterObject.condition) >= 0 ?\n                    filterObject.condition : operatorCollection[0] : selectedOption);\n            dataSource.push({ value: operator, text: this.parent.localeObj.getConstant(operator) });\n        }\n        var len = measures.length;\n        while (len--) {\n            valueOptions.unshift({ value: measures[len].name, text: (measures[len].caption ? measures[len].caption : measures[len].name) });\n            selectedValueIndex = filterObject && filterObject.type === 'Value' &&\n                filterObject.measure === measures[len].name &&\n                filterObject.condition === selectedOption ? len : selectedValueIndex;\n        }\n        var mainDiv = createElement('div', {\n            className: cls.FILTER_DIV_CONTENT_CLASS + ' e-' + ((['date', 'number']).indexOf(type) >= 0 ? 'label' : type) + '-filter',\n            id: this.parent.parentID + '_' + type + '_filter_div_content',\n            attrs: {\n                'data-type': type, 'data-fieldName': fieldName, 'data-operator': selectedOption,\n                'data-measure': (this.parent.dataSource.values.length > 0 ? this.parent.dataSource.values[selectedValueIndex].name : ''),\n                'data-value1': (filterObject && selectedOption === filterObject.condition ? filterObject.value1.toString() : ''),\n                'data-value2': (filterObject && selectedOption === filterObject.condition ? filterObject.value1.toString() : '')\n            }\n        });\n        var textContentdiv = createElement('div', {\n            className: cls.FILTER_TEXT_DIV_CLASS,\n            innerHTML: this.parent.localeObj.getConstant(type + 'TextContent')\n        });\n        var betweenTextContentdiv = createElement('div', {\n            className: cls.BETWEEN_TEXT_DIV_CLASS + ' ' +\n                (betweenOperators.indexOf(selectedOption) === -1 ? cls.ICON_DISABLE : ''),\n            innerHTML: this.parent.localeObj.getConstant('And')\n        });\n        var separatordiv = createElement('div', { className: cls.SEPARATOR_DIV_CLASS });\n        var filterWrapperDiv1 = createElement('div', { className: cls.FILTER_OPTION_WRAPPER_1_CLASS });\n        var optionWrapperDiv1 = createElement('div', {\n            className: 'e-measure-option-wrapper' + ' ' + (((['label', 'date', 'number']).indexOf(type) >= 0) ? cls.ICON_DISABLE : ''),\n        });\n        var optionWrapperDiv2 = createElement('div', { className: 'e-condition-option-wrapper' });\n        var filterWrapperDiv2 = createElement('div', { className: cls.FILTER_OPTION_WRAPPER_2_CLASS });\n        var dropOptionDiv1 = createElement('div', { id: this.parent.parentID + '_' + type + '_measure_option_wrapper' });\n        var dropOptionDiv2 = createElement('div', { id: this.parent.parentID + '_' + type + '_contition_option_wrapper' });\n        var inputDiv1 = createElement('div', { className: cls.FILTER_INPUT_DIV_1_CLASS });\n        var inputDiv2 = createElement('div', {\n            className: cls.FILTER_INPUT_DIV_2_CLASS + ' ' +\n                (betweenOperators.indexOf(selectedOption) === -1 ? cls.ICON_DISABLE : '')\n        });\n        var inputField1 = createElement('input', {\n            id: this.parent.parentID + '_' + type + '_input_option_1', attrs: { 'type': 'text' }\n        });\n        var inputField2 = createElement('input', {\n            id: this.parent.parentID + '_' + type + '_input_option_2', attrs: { 'type': 'text' }\n        });\n        inputDiv1.appendChild(inputField1);\n        inputDiv2.appendChild(inputField2);\n        optionWrapperDiv1.appendChild(dropOptionDiv1);\n        optionWrapperDiv1.appendChild(separatordiv);\n        optionWrapperDiv2.appendChild(dropOptionDiv2);\n        filterWrapperDiv1.appendChild(optionWrapperDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv2);\n        filterWrapperDiv2.appendChild(inputDiv1);\n        filterWrapperDiv2.appendChild(betweenTextContentdiv);\n        filterWrapperDiv2.appendChild(inputDiv2);\n        /* tslint:disable-next-line:max-line-length */\n        this.createElements(filterObject, betweenOperators, dropOptionDiv1, dropOptionDiv2, inputField1, inputField2, valueOptions, dataSource, selectedValueIndex, selectedOption, type);\n        mainDiv.appendChild(textContentdiv);\n        mainDiv.appendChild(filterWrapperDiv1);\n        mainDiv.appendChild(filterWrapperDiv2);\n        return mainDiv;\n    };\n    /* tslint:disable */\n    FilterDialog.prototype.createElements = function (filterObj, operators, optionDiv1, optionDiv2, inputDiv1, inputDiv2, vDataSource, oDataSource, valueIndex, option, type) {\n        var popupInstance = this;\n        var optionWrapper1 = new DropDownList({\n            dataSource: vDataSource, enableRtl: this.parent.enableRtl,\n            fields: { value: 'value', text: 'text' }, index: valueIndex,\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                if (!isNullOrUndefined(element)) {\n                    popupInstance.updateInputValues(element, type, inputDiv1, inputDiv2);\n                    setStyleAndAttributes(element, { 'data-measure': args.value });\n                }\n                else {\n                    return;\n                }\n            }\n        });\n        optionWrapper1.appendTo(optionDiv1);\n        var optionWrapper = new DropDownList({\n            dataSource: oDataSource, enableRtl: this.parent.enableRtl,\n            fields: { value: 'value', text: 'text' }, value: option,\n            cssClass: cls.FILTER_OPERATOR_CLASS, width: '100%',\n            change: function (args) {\n                var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                if (!isNullOrUndefined(element)) {\n                    popupInstance.updateInputValues(element, type, inputDiv1, inputDiv2);\n                    var disabledClasses = [cls.BETWEEN_TEXT_DIV_CLASS, cls.FILTER_INPUT_DIV_2_CLASS];\n                    for (var _i = 0, disabledClasses_1 = disabledClasses; _i < disabledClasses_1.length; _i++) {\n                        var className = disabledClasses_1[_i];\n                        if (operators.indexOf(args.value) >= 0) {\n                            removeClass([element.querySelector('.' + className)], cls.ICON_DISABLE);\n                        }\n                        else {\n                            addClass([element.querySelector('.' + className)], cls.ICON_DISABLE);\n                        }\n                    }\n                    setStyleAndAttributes(element, { 'data-operator': args.value });\n                }\n                else {\n                    return;\n                }\n            }\n        });\n        optionWrapper.appendTo(optionDiv2);\n        if (type === 'date') {\n            var inputObj1_1 = new DatePicker({\n                placeholder: this.parent.localeObj.getConstant('chooseDate'),\n                enableRtl: this.parent.enableRtl,\n                format: 'dd/MM/yyyy',\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value1 : null),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': e.value, 'data-value2': inputObj2_1.value });\n                    }\n                    else {\n                        return;\n                    }\n                },\n                width: '100%',\n            });\n            var inputObj2_1 = new DatePicker({\n                placeholder: this.parent.localeObj.getConstant('chooseDate'),\n                enableRtl: this.parent.enableRtl,\n                format: 'dd/MM/yyyy',\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value2 : null),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': inputObj1_1.value, 'data-value2': e.value });\n                    }\n                    else {\n                        return;\n                    }\n                },\n                width: '100%',\n            });\n            inputObj1_1.appendTo(inputDiv1);\n            inputObj2_1.appendTo(inputDiv2);\n        }\n        else if (type === 'value') {\n            var inputObj1_2 = new NumericTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                format: '###.##',\n                value: (filterObj && option === filterObj.condition ? parseInt(filterObj.value1, 10) : undefined),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, {\n                            'data-value1': (e.value ? e.value.toString() : '0'),\n                            'data-value2': (inputObj2_2.value ? inputObj2_2.value.toString() : '0')\n                        });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            var inputObj2_2 = new NumericTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                format: '###.##',\n                value: (filterObj && option === filterObj.condition ? parseInt(filterObj.value2, 10) : undefined),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, {\n                            'data-value1': (inputObj1_2.value ? inputObj1_2.value.toString() : '0'),\n                            'data-value2': (e.value ? e.value.toString() : '0')\n                        });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            inputObj1_2.appendTo(inputDiv1);\n            inputObj2_2.appendTo(inputDiv2);\n        }\n        else {\n            var inputObj1_3 = new MaskedTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value1 : ''),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': e.value, 'data-value2': inputObj2_3.value });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            var inputObj2_3 = new MaskedTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value2 : ''),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': inputObj1_3.value, 'data-value2': e.value });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            inputObj1_3.appendTo(inputDiv1);\n            inputObj2_3.appendTo(inputDiv2);\n        }\n    };\n    /* tslint:enable */\n    FilterDialog.prototype.updateInputValues = function (element, type, inputDiv1, inputDiv2) {\n        var value1;\n        var value2;\n        if (type === 'date') {\n            var inputObj1 = inputDiv1.ej2_instances[0];\n            var inputObj2 = inputDiv2.ej2_instances[0];\n            value1 = !isNullOrUndefined(inputObj1.value) ? inputObj1.value.toString() : '';\n            value2 = !isNullOrUndefined(inputObj2.value) ? inputObj2.value.toString() : '';\n        }\n        else {\n            var inputObj1 = inputDiv1.ej2_instances[0];\n            var inputObj2 = inputDiv2.ej2_instances[0];\n            value1 = inputObj1.value;\n            value2 = inputObj2.value;\n        }\n        setStyleAndAttributes(element, { 'data-value1': value1, 'data-value2': value2 });\n    };\n    FilterDialog.prototype.validateTreeNode = function (e) {\n        if (e.node.classList.contains(cls.ICON_DISABLE)) {\n            e.cancel = true;\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Update filter state while Member check/uncheck.\n     * @hidden\n     */\n    FilterDialog.prototype.updateCheckedState = function (fieldCaption) {\n        var filterDialog = this.dialogPopUp.element;\n        setStyleAndAttributes(filterDialog, { 'role': 'menu', 'aria-haspopup': 'true' });\n        var list = [].slice.call(this.memberTreeView.element.querySelectorAll('li'));\n        var uncheckedNodes = this.getUnCheckedNodes();\n        var checkedNodes = this.getCheckedNodes();\n        var firstNode = this.allMemberSelect.element.querySelector('li').querySelector('span.' + cls.CHECK_BOX_FRAME_CLASS);\n        if (list.length > 0) {\n            if (checkedNodes.length > 0) {\n                if (uncheckedNodes.length > 0) {\n                    removeClass([firstNode], cls.NODE_CHECK_CLASS);\n                    addClass([firstNode], cls.NODE_STOP_CLASS);\n                }\n                else if (uncheckedNodes.length === 0) {\n                    removeClass([firstNode], cls.NODE_STOP_CLASS);\n                    addClass([firstNode], cls.NODE_CHECK_CLASS);\n                }\n                this.dialogPopUp.buttons[0].buttonModel.disabled = false;\n                filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).removeAttribute('disabled');\n            }\n            else if (uncheckedNodes.length > 0 && checkedNodes.length === 0) {\n                removeClass([firstNode], [cls.NODE_CHECK_CLASS, cls.NODE_STOP_CLASS]);\n                if (this.getCheckedNodes().length === checkedNodes.length) {\n                    this.dialogPopUp.buttons[0].buttonModel.disabled = true;\n                    filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).setAttribute('disabled', 'disabled');\n                }\n            }\n        }\n        else {\n            this.dialogPopUp.buttons[0].buttonModel.disabled = true;\n            filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).setAttribute('disabled', 'disabled');\n        }\n    };\n    FilterDialog.prototype.getCheckedNodes = function () {\n        var checkeNodes = this.parent.searchTreeItems.filter(function (item) {\n            return item.checkedStatus;\n        });\n        return checkeNodes;\n    };\n    FilterDialog.prototype.getUnCheckedNodes = function () {\n        var unCheckeNodes = this.parent.searchTreeItems.filter(function (item) {\n            return !item.checkedStatus;\n        });\n        return unCheckeNodes;\n    };\n    FilterDialog.prototype.isExcelFilter = function (fieldName) {\n        var isFilterField = false;\n        for (var _i = 0, _a = this.parent.dataSource.filters; _i < _a.length; _i++) {\n            var field = _a[_i];\n            if (field.name === fieldName) {\n                isFilterField = true;\n                break;\n            }\n        }\n        if (!isFilterField && (this.parent.dataSource.allowLabelFilter || this.parent.dataSource.allowValueFilter)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    FilterDialog.prototype.getFilterObject = function (fieldName) {\n        var filterObj = this.parent.eventBase.getFilterItemByName(fieldName);\n        if (filterObj && (((['Label', 'Date', 'Number'].indexOf(filterObj.type) >= 0) &&\n            this.parent.dataSource.allowLabelFilter) || (filterObj.type === 'Value' && this.parent.dataSource.allowValueFilter) ||\n            (['Include', 'Exclude'].indexOf(filterObj.type) >= 0))) {\n            return filterObj;\n        }\n        return undefined;\n    };\n    FilterDialog.prototype.closeFilterDialog = function () {\n        if (this.allowExcelLikeFilter) {\n            if (this.tabObj && !this.tabObj.isDestroyed) {\n                this.tabObj.destroy();\n            }\n        }\n        this.dialogPopUp.close();\n    };\n    FilterDialog.prototype.removeFilterDialog = function () {\n        if (this.dialogPopUp && !this.dialogPopUp.isDestroyed) {\n            this.dialogPopUp.destroy();\n        }\n        if (document.getElementById(this.parent.parentID + '_EditorTreeView')) {\n            remove(document.getElementById(this.parent.parentID + '_EditorTreeView'));\n        }\n    };\n    return FilterDialog;\n}());\nexport { FilterDialog };\n","import { CommonKeyboardInteraction } from '../actions/keyboard';\nimport { EventBase } from '../actions/event-base';\nimport { NodeStateModified } from '../actions/node-state-modified';\nimport { DataSourceUpdate } from '../actions/dataSource-update';\nimport { ErrorDialog } from '../popups/error-dialog';\nimport { FilterDialog } from '../popups/filter-dialog';\n/**\n * PivotCommon is used to manipulate the relational or Multi-Dimensional public methods by using their dataSource\n * @hidden\n */\n/** @hidden */\nvar PivotCommon = /** @class */ (function () {\n    /**\n     * Constructor for PivotEngine class\n     * @param  {PivotEngine} pivotEngine?\n     * @param  {DataOptions} dataSource?\n     * @param  {string} element?\n     * @hidden\n     */\n    function PivotCommon(control) {\n        /** @hidden */\n        this.currentTreeItems = [];\n        /** @hidden */\n        this.savedTreeFilterPos = {};\n        /** @hidden */\n        this.currentTreeItemsPos = {};\n        /** @hidden */\n        this.searchTreeItems = [];\n        /** @hidden */\n        this.isDataOverflow = false;\n        /** @hidden */\n        this.isDateField = false;\n        this.element = control.element;\n        this.moduleName = control.moduleName;\n        this.dataSource = control.dataSource;\n        this.engineModule = control.pivotEngine;\n        this.enableRtl = control.enableRtl;\n        this.isAdaptive = control.isAdaptive;\n        this.renderMode = control.renderMode;\n        this.parentID = control.id;\n        this.localeObj = control.localeObj;\n        this.nodeStateModified = new NodeStateModified(this);\n        this.dataSourceUpdate = new DataSourceUpdate(this);\n        this.eventBase = new EventBase(this);\n        this.filterDialog = new FilterDialog(this);\n        this.errorDialog = new ErrorDialog(this);\n        this.keyboardModule = new CommonKeyboardInteraction(this);\n        return this;\n    }\n    /**\n     * To destroy the groupingbar\n     * @return {void}\n     * @hidden\n     */\n    PivotCommon.prototype.destroy = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n    };\n    return PivotCommon;\n}());\nexport { PivotCommon };\n","import { createElement, isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { EventHandler, setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport * as events from '../../common/base/constant';\n/**\n * Module to render Pivot Field List Dialog\n */\n/** @hidden */\nvar DialogRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function DialogRenderer(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the field list layout rendering\n     * @returns void\n     * @private\n     */\n    DialogRenderer.prototype.render = function () {\n        var fieldListWrappper = createElement('div', {\n            id: this.parent.element.id + '_Wrapper',\n            className: cls.WRAPPER_CLASS,\n            styles: 'width:' + this.parent.element.style.width\n        });\n        if (this.parent.isAdaptive) {\n            addClass([fieldListWrappper], cls.DEVICE);\n        }\n        else {\n            removeClass([fieldListWrappper], cls.DEVICE);\n        }\n        if (this.parent.enableRtl) {\n            addClass([fieldListWrappper], cls.RTL);\n        }\n        else {\n            removeClass([fieldListWrappper], cls.RTL);\n        }\n        if (this.parent.cssClass) {\n            addClass([fieldListWrappper], this.parent.cssClass);\n        }\n        this.parentElement = createElement('div', { className: cls.CONTAINER_CLASS });\n        this.parent.element.appendChild(fieldListWrappper);\n        if (this.parent.isAdaptive) {\n            fieldListWrappper.removeAttribute('style');\n            this.parentElement = createElement('div', { className: cls.ADAPTIVE_CONTAINER_CLASS });\n            this.renderAdaptiveLayout(fieldListWrappper);\n        }\n        if (this.parent.renderMode === 'Popup') {\n            this.renderFieldListDialog(fieldListWrappper);\n            this.unWireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n            this.wireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n        }\n        else {\n            this.renderStaticLayout(fieldListWrappper);\n        }\n    };\n    DialogRenderer.prototype.renderStaticLayout = function (fieldListWrappper) {\n        if (!this.parent.isAdaptive) {\n            var layoutHeader = createElement('div', {\n                className: cls.FIELD_LIST_TITLE_CLASS\n            });\n            var headerContent = createElement('div', {\n                className: cls.FIELD_LIST_TITLE_CONTENT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('staticFieldList')\n            });\n            layoutHeader.appendChild(headerContent);\n            layoutHeader.appendChild(this.createCalculatedButton());\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            fieldListWrappper.appendChild(layoutHeader);\n            fieldListWrappper.appendChild(this.parentElement);\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            if (this.parent.allowDeferLayoutUpdate) {\n                fieldListWrappper.appendChild(this.createDeferUpdateButtons());\n                this.renderDeferUpdateButtons();\n            }\n        }\n    };\n    DialogRenderer.prototype.renderDeferUpdateButtons = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            this.deferUpdateCheckBox = new CheckBox({\n                label: this.parent.localeObj.getConstant('deferLayoutUpdate'),\n                checked: true,\n                enableRtl: this.parent.enableRtl,\n                change: this.onCheckChange.bind(this)\n            });\n            this.deferUpdateCheckBox.appendTo('#' + this.parent.element.id + 'DeferUpdateCheckBox');\n            this.deferUpdateApplyButton = new Button({\n                cssClass: cls.DEFER_APPLY_BUTTON + ' ' + cls.DEFER_UPDATE_BUTTON + (this.parent.renderMode === 'Popup' ?\n                    (' ' + cls.BUTTON_FLAT_CLASS) : ''),\n                content: this.parent.localeObj.getConstant('apply'),\n                enableRtl: this.parent.enableRtl,\n                isPrimary: true\n            });\n            this.deferUpdateApplyButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton1');\n            this.deferUpdateApplyButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.applyButtonClick.bind(this) :\n                this.onDeferUpdateClick.bind(this);\n        }\n        this.deferUpdateCancelButton = new Button({\n            cssClass: cls.DEFER_CANCEL_BUTTON + ' ' + cls.CANCEL_BUTTON_CLASS + (this.parent.renderMode === 'Popup' ?\n                (' ' + cls.BUTTON_FLAT_CLASS) : ''),\n            content: this.parent.allowDeferLayoutUpdate ? this.parent.localeObj.getConstant('cancel') :\n                this.parent.localeObj.getConstant('close'),\n            enableRtl: this.parent.enableRtl, isPrimary: !this.parent.allowDeferLayoutUpdate\n        });\n        this.deferUpdateCancelButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton2');\n        this.deferUpdateCancelButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.cancelButtonClick.bind(this) :\n            this.onCloseFieldList.bind(this);\n    };\n    DialogRenderer.prototype.createDeferUpdateButtons = function () {\n        var layoutFooter = createElement('div', {\n            className: cls.LAYOUT_FOOTER\n        });\n        if (this.parent.allowDeferLayoutUpdate) {\n            var checkBoxLayout = createElement('div', {\n                className: cls.CHECKBOX_LAYOUT\n            });\n            var deferUpdateCheckBox = createElement('input', {\n                id: this.parent.element.id + 'DeferUpdateCheckBox'\n            });\n            checkBoxLayout.appendChild(deferUpdateCheckBox);\n            layoutFooter.appendChild(checkBoxLayout);\n        }\n        var buttonLayout = createElement('div', {\n            className: cls.BUTTON_LAYOUT\n        });\n        if (this.parent.allowDeferLayoutUpdate) {\n            var deferUpdateButton1 = createElement('button', {\n                id: this.parent.element.id + '_DeferUpdateButton1'\n            });\n            buttonLayout.appendChild(deferUpdateButton1);\n        }\n        var deferUpdateButton2 = createElement('button', {\n            id: this.parent.element.id + '_DeferUpdateButton2'\n        });\n        buttonLayout.appendChild(deferUpdateButton2);\n        layoutFooter.appendChild(buttonLayout);\n        return layoutFooter;\n    };\n    DialogRenderer.prototype.onCheckChange = function (args) {\n        if (args.checked) {\n            this.parent.clonedDataSource = extend({}, this.parent.dataSource, null, true);\n            this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n        }\n        this.parent.allowDeferLayoutUpdate = !this.parent.allowDeferLayoutUpdate;\n        if (this.parent.renderMode === 'Fixed') {\n            this.deferUpdateApplyButton.setProperties({ disabled: !this.parent.allowDeferLayoutUpdate });\n            this.deferUpdateCancelButton.setProperties({ disabled: !this.parent.allowDeferLayoutUpdate });\n        }\n        else {\n            if (this.parent.allowDeferLayoutUpdate) {\n                this.deferUpdateApplyButton.element.style.display = '';\n                this.deferUpdateCancelButton.setProperties({ content: this.parent.localeObj.getConstant('cancel') });\n                this.deferUpdateCancelButton.isPrimary = false;\n            }\n            else {\n                this.deferUpdateApplyButton.element.style.display = 'none';\n                this.deferUpdateCancelButton.setProperties({ content: this.parent.localeObj.getConstant('close') });\n                this.deferUpdateCancelButton.isPrimary = true;\n            }\n        }\n        this.cancelButtonClick();\n    };\n    DialogRenderer.prototype.applyButtonClick = function () {\n        this.parent.updateDataSource(false);\n        this.parent.clonedDataSource = extend({}, this.parent.dataSource, null, true);\n        this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n    };\n    DialogRenderer.prototype.cancelButtonClick = function () {\n        this.parent.\n            setProperties({ dataSource: this.parent.clonedDataSource.properties }, true);\n        this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n        this.parent.updateDataSource(false, true);\n    };\n    DialogRenderer.prototype.renderFieldListDialog = function (fieldListWrappper) {\n        var toggleFieldList = createElement('div', {\n            className: cls.TOGGLE_FIELD_LIST_CLASS + ' ' + cls.ICON + ' ' + cls.TOGGLE_SELECT_CLASS,\n            attrs: {\n                'tabindex': '0',\n                title: this.parent.localeObj.getConstant('fieldList'),\n                'aria-disabled': 'false',\n                'aria-label': this.parent.localeObj.getConstant('fieldList')\n            }\n        });\n        this.parent.element.appendChild(toggleFieldList);\n        if (this.parent.isAdaptive) {\n            var headerTemplate = '<div class=' + cls.TITLE_MOBILE_HEADER + '><span class=\"' + cls.ICON + ' ' +\n                cls.BACK_ICON + '\"></span><div class=' + cls.TITLE_MOBILE_CONTENT + '>' + this.parent.localeObj.getConstant('fieldList') +\n                '</div></div>';\n            var buttons = [{\n                    click: this.showFieldListDialog.bind(this),\n                    buttonModel: {\n                        cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n                        iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n                        isPrimary: true\n                    }\n                }, {\n                    click: this.showCalculatedField.bind(this),\n                    buttonModel: {\n                        cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS +\n                            ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n                        iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS, enableRtl: this.parent.enableRtl,\n                        isPrimary: true\n                    }\n                }];\n            this.fieldListDialog = new Dialog({\n                animationSettings: { effect: this.parent.enableRtl ? 'SlideRight' : 'SlideLeft' },\n                header: headerTemplate,\n                content: this.parentElement,\n                isModal: true,\n                showCloseIcon: false,\n                visible: false,\n                allowDragging: false,\n                closeOnEscape: false,\n                enableRtl: this.parent.enableRtl,\n                width: '100%',\n                height: '100%',\n                position: { X: 'center', Y: 'center' },\n                buttons: buttons,\n                target: document.body,\n                close: this.removeFieldListIcon.bind(this)\n            });\n            this.fieldListDialog.appendTo(fieldListWrappper);\n            setStyleAttribute(fieldListWrappper.querySelector('#' + fieldListWrappper.id + '_dialog-content'), {\n                'padding': '0'\n            });\n            var footer = fieldListWrappper.querySelector('.' + cls.FOOTER_CONTENT_CLASS);\n            addClass([footer], cls.FIELD_LIST_FOOTER_CLASS);\n            removeClass([footer.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n            removeClass([footer.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n            this.fieldListDialog.element.querySelector('.' + cls.BACK_ICON).onclick =\n                this.parent.allowDeferLayoutUpdate ? this.onDeferUpdateClick.bind(this) : this.onCloseFieldList.bind(this);\n        }\n        else {\n            var template = this.createDeferUpdateButtons().outerHTML;\n            var headerTemplate = '<div class=' + cls.TITLE_HEADER_CLASS + '><div class=' +\n                cls.TITLE_CONTENT_CLASS + '>' + this.parent.localeObj.getConstant('fieldList') + '</div></div>';\n            this.fieldListDialog = new Dialog({\n                animationSettings: { effect: 'Zoom' },\n                header: headerTemplate,\n                content: this.parentElement,\n                isModal: false,\n                showCloseIcon: false,\n                visible: false,\n                allowDragging: true,\n                enableRtl: this.parent.enableRtl,\n                width: this.parent.element.style.width,\n                position: { X: 'center', Y: this.parent.element.offsetTop },\n                footerTemplate: template,\n                closeOnEscape: true,\n                target: !isNullOrUndefined(this.parent.target) ? ((typeof this.parent.target) === 'string') ?\n                    document.querySelector(this.parent.target) : this.parent.target : document.body,\n                close: this.removeFieldListIcon.bind(this)\n            });\n            this.fieldListDialog.appendTo(fieldListWrappper);\n            this.renderDeferUpdateButtons();\n            setStyleAttribute(fieldListWrappper.querySelector('#' + fieldListWrappper.id + '_title'), { 'width': '100%' });\n            fieldListWrappper.querySelector('.' + cls.TITLE_HEADER_CLASS).appendChild(this.createCalculatedButton());\n        }\n    };\n    /**\n     * Called internally if any of the field added to axis.\n     * @hidden\n     */\n    DialogRenderer.prototype.updateDataSource = function (selectedNodes) {\n        var axis = ['filters', 'columns', 'rows', 'values'];\n        for (var _i = 0, selectedNodes_1 = selectedNodes; _i < selectedNodes_1.length; _i++) {\n            var field = selectedNodes_1[_i];\n            var fieldName = field;\n            var droppedClass = axis[this.adaptiveElement.selectedItem];\n            this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ?\n                this.parent : (this.parent.pivotGridModule ?\n                this.parent.pivotGridModule : this.parent);\n            this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, droppedClass, -1);\n        }\n        this.parent.axisFieldModule.render();\n        if (!this.parent.allowDeferLayoutUpdate) {\n            this.parent.updateDataSource(true);\n        }\n        else {\n            this.parent.triggerPopulateEvent();\n        }\n    };\n    DialogRenderer.prototype.onDeferUpdateClick = function () {\n        this.parent.updateDataSource();\n        this.parent.dialogRenderer.fieldListDialog.hide();\n    };\n    DialogRenderer.prototype.renderAdaptiveLayout = function (fieldListWrappper) {\n        var layoutFooter = createElement('div', {\n            className: cls.FIELD_LIST_FOOTER_CLASS\n        });\n        fieldListWrappper.appendChild(this.parentElement);\n        var items = [\n            {\n                header: { 'text': this.parent.localeObj.getConstant('filters') },\n                content: this.createAxisTable('filters')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('columns') },\n                content: this.createAxisTable('columns')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('rows') },\n                content: this.createAxisTable('rows')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('values') },\n                content: this.createAxisTable('values')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('createCalculatedField') },\n                content: 'Calculated Field Related UI'\n            }\n        ];\n        if (!this.parent.allowCalculatedField) {\n            items.pop();\n        }\n        this.adaptiveElement = new Tab({\n            heightAdjustMode: 'Auto',\n            items: items,\n            height: '100%',\n            enableRtl: this.parent.enableRtl,\n            selected: this.tabSelect.bind(this)\n        });\n        if (this.parent.renderMode === 'Fixed') {\n            layoutFooter.appendChild(this.createAddButton());\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            this.adaptiveElement.appendTo(this.parentElement);\n            this.parentElement.appendChild(layoutFooter);\n        }\n        else {\n            this.adaptiveElement.appendTo(this.parentElement);\n        }\n    };\n    DialogRenderer.prototype.tabSelect = function (e) {\n        if (this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)) {\n            if (e.selectedIndex !== 4) {\n                addClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n                removeClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n            }\n            else {\n                removeClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n                addClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n            }\n        }\n        if (e.selectedIndex === 4) {\n            this.adaptiveElement.items[4].content = '';\n            this.adaptiveElement.dataBind();\n            this.parent.notify(events.initCalculatedField, {});\n        }\n        else {\n            this.parent.axisFieldModule.render();\n        }\n    };\n    DialogRenderer.prototype.createCalculatedButton = function () {\n        var calculatedButton = createElement('div', {\n            id: this.parent.element.id + '_CalculatedField'\n        });\n        var calculateField = new Button({\n            cssClass: cls.CALCULATED_FIELD_CLASS + ' ' + cls.ICON_DISABLE,\n            content: this.parent.localeObj.getConstant('calculatedField'),\n            enableRtl: this.parent.enableRtl\n        });\n        calculateField.appendTo(calculatedButton);\n        if (this.parent.calculatedFieldModule) {\n            removeClass([calculatedButton], cls.ICON_DISABLE);\n        }\n        calculateField.element.onclick = this.showCalculatedField.bind(this);\n        return calculatedButton;\n    };\n    DialogRenderer.prototype.createAddButton = function () {\n        var footerContainer = createElement('div', {\n            className: cls.FIELD_LIST_FOOTER_CLASS + '-content'\n        });\n        var fieldListButton = createElement('div', {});\n        var calculatedButton = createElement('div', {});\n        var calculateField = new Button({\n            cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS +\n                ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n            iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n            enableRtl: this.parent.enableRtl\n        });\n        var fieldList = new Button({\n            cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n            iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n            enableRtl: this.parent.enableRtl\n        });\n        fieldList.appendTo(fieldListButton);\n        calculateField.appendTo(calculatedButton);\n        footerContainer.appendChild(fieldListButton);\n        footerContainer.appendChild(calculatedButton);\n        calculateField.element.onclick = this.showCalculatedField.bind(this);\n        fieldList.element.onclick = this.showFieldListDialog.bind(this);\n        return footerContainer;\n    };\n    DialogRenderer.prototype.createAxisTable = function (axis) {\n        var axisWrapper = createElement('div', {\n            className: cls.FIELD_LIST_CLASS + '-' + axis\n        });\n        var axisContent = createElement('div', { className: cls.AXIS_CONTENT_CLASS + ' ' + 'e-' + axis });\n        var axisPrompt = createElement('span', {\n            className: cls.AXIS_PROMPT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('addPrompt')\n        });\n        axisWrapper.appendChild(axisContent);\n        axisWrapper.appendChild(axisPrompt);\n        return axisWrapper;\n    };\n    DialogRenderer.prototype.showCalculatedField = function (event) {\n        if (!this.parent.isAdaptive) {\n            if (this.parent.dialogRenderer.fieldListDialog) {\n                this.parent.dialogRenderer.fieldListDialog.hide();\n                addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n            }\n        }\n        this.parent.notify(events.initCalculatedField, {});\n    };\n    DialogRenderer.prototype.showFieldListDialog = function (event) {\n        var activeindex = this.adaptiveElement.selectedItem;\n        this.parent.treeViewModule.render(activeindex);\n    };\n    DialogRenderer.prototype.onShowFieldList = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            if (this.parent.isAdaptive) {\n                this.parent.axisFieldModule.render();\n            }\n            this.parent.clonedDataSource = extend({}, this.parent.dataSource, null, true);\n            this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n        }\n        addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n        this.parent.dialogRenderer.fieldListDialog.show();\n        this.parent.dialogRenderer.fieldListDialog.element.style.top =\n            parseInt(this.parent.dialogRenderer.fieldListDialog.element.style.top, 10) < 0 ?\n                '0px' : this.parent.dialogRenderer.fieldListDialog.element.style.top;\n    };\n    DialogRenderer.prototype.onCloseFieldList = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            this.parent.dataSource =\n                extend({}, this.parent.clonedDataSource.properties, null, true);\n            this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n            this.parent.pivotGridModule.\n                setProperties({ dataSource: this.parent.clonedDataSource.properties }, true);\n            this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n            this.parent.pivotGridModule.notify(events.uiUpdate, this);\n            this.parent.pivotGridModule.notify(events.contentReady, this);\n        }\n        this.parent.dialogRenderer.fieldListDialog.hide();\n    };\n    DialogRenderer.prototype.removeFieldListIcon = function () {\n        if (!document.getElementById(this.parent.element.id + 'calculateddialog')) {\n            removeClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n        }\n    };\n    DialogRenderer.prototype.keyPress = function (e) {\n        var target = e.target;\n        if (e.keyCode === 13 && e.target) {\n            e.target.click();\n            e.preventDefault();\n            return;\n        }\n    };\n    DialogRenderer.prototype.wireDialogEvent = function (element) {\n        EventHandler.add(element, 'keydown', this.keyPress, this);\n        EventHandler.add(element, 'click', this.onShowFieldList, this);\n    };\n    DialogRenderer.prototype.unWireDialogEvent = function (element) {\n        EventHandler.remove(element, 'keydown', this.keyPress);\n        EventHandler.remove(element, 'click', this.onShowFieldList);\n    };\n    return DialogRenderer;\n}());\nexport { DialogRenderer };\n","import { createElement, addClass, removeClass, prepend, remove } from '@syncfusion/ej2-base';\nimport { closest, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\n/**\n * Module to render Field List\n */\n/** @hidden */\nvar TreeViewRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function TreeViewRenderer(parent) {\n        this.selectedNodes = [];\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Initialize the field list tree rendering\n     * @returns void\n     * @private\n     */\n    TreeViewRenderer.prototype.render = function (axis) {\n        this.parentElement = this.parent.dialogRenderer.parentElement;\n        if (!this.parent.isAdaptive) {\n            var fieldTable = createElement('div', { className: cls.FIELD_TABLE_CLASS });\n            var treeHeader = createElement('div', {\n                className: cls.FIELD_HEADER_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('allFields')\n            });\n            this.treeViewElement = createElement('div', {\n                id: this.parent.element.id + '_TreeView',\n                className: cls.FIELD_LIST_CLASS\n            });\n            fieldTable.appendChild(treeHeader);\n            fieldTable.appendChild(this.treeViewElement);\n            this.parentElement.appendChild(fieldTable);\n            if (this.parent.renderMode === 'Fixed') {\n                var centerDiv = createElement('div', { className: cls.STATIC_CENTER_DIV_CLASS });\n                var axisHeader = createElement('div', {\n                    className: cls.STATIC_CENTER_HEADER_CLASS,\n                    innerHTML: this.parent.localeObj.getConstant('centerHeader')\n                });\n                this.parentElement.appendChild(centerDiv);\n                this.parentElement.appendChild(axisHeader);\n            }\n            this.renderTreeView();\n        }\n        else {\n            this.renderTreeDialog(axis);\n        }\n    };\n    TreeViewRenderer.prototype.renderTreeView = function () {\n        this.fieldTable = new TreeView({\n            fields: { dataSource: this.getTreeData(), id: 'id', text: 'caption', isChecked: 'isSelected' },\n            nodeChecked: this.nodeStateChange.bind(this),\n            cssClass: cls.FIELD_LIST_TREE_CLASS,\n            showCheckBox: true,\n            allowDragAndDrop: true,\n            sortOrder: 'Ascending',\n            enableRtl: this.parent.enableRtl,\n            nodeDragStart: this.dragStart.bind(this),\n            nodeDragStop: this.dragStop.bind(this)\n        });\n        this.treeViewElement.innerHTML = '';\n        this.fieldTable.appendTo(this.treeViewElement);\n        this.getTreeUpdate();\n    };\n    TreeViewRenderer.prototype.renderTreeDialog = function (axis) {\n        var fieldListDialog = createElement('div', {\n            id: this.parent.element.id + '_FieldListTreeView',\n            className: cls.ADAPTIVE_FIELD_LIST_DIALOG_CLASS\n        });\n        this.parentElement.appendChild(fieldListDialog);\n        this.fieldDialog = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            header: this.parent.localeObj.getConstant('adaptiveFieldHeader'),\n            content: this.createTreeView(this.getTreeData(axis)),\n            isModal: true,\n            visible: true,\n            showCloseIcon: false,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: '350px',\n            position: { X: 'center', Y: 'center' },\n            buttons: [{\n                    click: this.closeTreeDialog.bind(this),\n                    buttonModel: {\n                        cssClass: cls.CANCEL_BUTTON_CLASS, content: this.parent.localeObj.getConstant('cancel')\n                    }\n                }, {\n                    click: this.onFieldAdd.bind(this),\n                    buttonModel: {\n                        cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('add'),\n                        isPrimary: true\n                    }\n                }],\n            closeOnEscape: true,\n            target: this.parentElement.parentElement,\n            close: this.dialogClose.bind(this)\n        });\n        this.fieldDialog.appendTo(fieldListDialog);\n    };\n    TreeViewRenderer.prototype.dialogClose = function () {\n        if (document.getElementById(this.parent.element.id + '_FieldListTreeView')) {\n            remove(document.getElementById(this.parent.element.id + '_FieldListTreeView'));\n        }\n    };\n    TreeViewRenderer.prototype.createTreeView = function (treeData) {\n        var editorTreeWrapper = createElement('div', {\n            id: this.parent.element.id + 'EditorDiv',\n            className: cls.EDITOR_TREE_WRAPPER_CLASS\n        });\n        var searchWrapper = createElement('div', {\n            id: this.parent.element.id + '_SearchDiv', attrs: { 'tabindex': '-1' },\n            className: cls.EDITOR_SEARCH_WRAPPER_CLASS\n        });\n        var editorSearch = createElement('input', { attrs: { 'type': 'text' } });\n        searchWrapper.appendChild(editorSearch);\n        var treeViewContainer = createElement('div', { className: cls.EDITOR_TREE_CONTAINER_CLASS });\n        editorTreeWrapper.appendChild(searchWrapper);\n        this.editorSearch = new MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('search'),\n            enableRtl: this.parent.enableRtl,\n            cssClass: cls.EDITOR_SEARCH_CLASS,\n            change: this.textChange.bind(this)\n        });\n        this.editorSearch.appendTo(editorSearch);\n        editorTreeWrapper.appendChild(treeViewContainer);\n        this.fieldTable = new TreeView({\n            fields: { dataSource: treeData, id: 'id', text: 'caption', isChecked: 'isSelected' },\n            showCheckBox: true,\n            sortOrder: 'Ascending',\n            enableRtl: this.parent.enableRtl,\n            nodeChecked: this.addNode.bind(this),\n        });\n        this.fieldTable.appendTo(treeViewContainer);\n        return editorTreeWrapper;\n    };\n    TreeViewRenderer.prototype.textChange = function (e) {\n        this.parent.pivotCommon.eventBase.searchTreeNodes(e, this.fieldTable, true);\n    };\n    TreeViewRenderer.prototype.dragStart = function (args) {\n        if (args.event.target.classList.contains(cls.DRAG_CLASS)) {\n            this.parent.isDragging = true;\n            addClass([args.draggedNode.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.SELECTED_NODE_CLASS);\n            var data = this.parent.engineModule.fieldList[args.draggedNode.getAttribute('data-uid')];\n            var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n            if (data && data.aggregateType === 'CalculatedField') {\n                for (var _i = 0, axis_1 = axis; _i < axis_1.length; _i++) {\n                    var axisContent = axis_1[_i];\n                    addClass([this.parentElement.querySelector('.' + axisContent)], cls.NO_DRAG_CLASS);\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    TreeViewRenderer.prototype.dragStop = function (args) {\n        args.cancel = true;\n        this.parent.isDragging = false;\n        var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n        for (var _i = 0, axis_2 = axis; _i < axis_2.length; _i++) {\n            var axisElement = axis_2[_i];\n            removeClass([this.parentElement.querySelector('.' + axisElement)], cls.NO_DRAG_CLASS);\n        }\n        removeClass([args.draggedNode.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.SELECTED_NODE_CLASS);\n        if (this.parent.pivotCommon.filterDialog.dialogPopUp) {\n            this.parent.pivotCommon.filterDialog.dialogPopUp.close();\n        }\n        var fieldName = args.draggedNodeData.id.toString();\n        if (!this.isNodeDropped(args, fieldName)) {\n            return;\n        }\n        this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ? this.parent :\n            (this.parent.pivotGridModule ? this.parent.pivotGridModule : this.parent);\n        if (this.parent.pivotCommon.nodeStateModified.onStateModified(args, fieldName)) {\n            if (this.parent.allowDeferLayoutUpdate) {\n                this.updateDataSource();\n            }\n            else {\n                this.parent.updateDataSource();\n            }\n            this.parent.axisFieldModule.render();\n        }\n    };\n    TreeViewRenderer.prototype.isNodeDropped = function (args, targetID) {\n        var isDropped = true;\n        if (args.draggedNodeData.isChecked === 'true') {\n            var target = this.getButton(targetID);\n            var axisPanel = closest(target, '.' + cls.DROPPABLE_CLASS);\n            var droppableElement = closest(args.target, '.' + cls.DROPPABLE_CLASS);\n            if (target && axisPanel === droppableElement) {\n                var pivotButtons = [].slice.call(axisPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n                var dropTarget = closest(args.target, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n                var sourcePosition = void 0;\n                var dropPosition = -1;\n                for (var i = 0, n = pivotButtons.length; i < n; i++) {\n                    if (pivotButtons[i].id === target.id) {\n                        sourcePosition = i;\n                    }\n                    if (dropTarget) {\n                        var droppableButton = dropTarget.querySelector('.' + cls.PIVOT_BUTTON_CLASS);\n                        if (pivotButtons[i].id === droppableButton.id) {\n                            dropPosition = i;\n                        }\n                    }\n                }\n                if (sourcePosition === dropPosition || (sourcePosition === (pivotButtons.length - 1) && dropPosition === -1)) {\n                    var parentElement = document.getElementById(this.parent.element.id + '_Wrapper');\n                    removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n                    isDropped = false;\n                }\n            }\n        }\n        return isDropped;\n    };\n    TreeViewRenderer.prototype.getButton = function (fieldName) {\n        var wrapperElement = document.getElementById(this.parent.element.id + '_Wrapper');\n        var pivotButtons = [].slice.call(wrapperElement.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n        var buttonElement;\n        for (var i = 0, n = pivotButtons.length; i < n; i++) {\n            if (pivotButtons[i].id === fieldName) {\n                buttonElement = pivotButtons[i];\n                break;\n            }\n        }\n        return buttonElement;\n    };\n    TreeViewRenderer.prototype.nodeStateChange = function (args) {\n        if (this.parent.pivotCommon.filterDialog.dialogPopUp) {\n            this.parent.pivotCommon.filterDialog.dialogPopUp.close();\n        }\n        var node = closest(args.node, '.' + cls.TEXT_CONTENT_CLASS);\n        var list = this.parent.pivotFieldList;\n        var selectedNode = list[args.data[0].id.toString()];\n        if (args.action === 'check') {\n            addClass([node.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.LIST_SELECT_CLASS);\n            var addNode = this.parent.pivotCommon.dataSourceUpdate.getNewField(args.data[0].id.toString());\n            selectedNode.type === 'number' ?\n                this.parent.dataSource.values.push(addNode) : this.parent.dataSource.rows.push(addNode);\n        }\n        else {\n            removeClass([node.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.LIST_SELECT_CLASS);\n            this.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(args.data[0].id.toString());\n        }\n        if (!this.parent.allowDeferLayoutUpdate) {\n            this.parent.updateDataSource(true);\n        }\n        else {\n            if (args.action === 'check') {\n                selectedNode.isSelected = true;\n            }\n            else {\n                selectedNode.isSelected = false;\n            }\n            this.updateDataSource();\n        }\n        this.parent.axisFieldModule.render();\n    };\n    TreeViewRenderer.prototype.updateDataSource = function () {\n        if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n            this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n            this.parent.pivotGridModule.\n                setProperties({ dataSource: this.parent.dataSource.properties }, true);\n            this.parent.pivotGridModule.notify(events.uiUpdate, this);\n        }\n        else {\n            this.parent.triggerPopulateEvent();\n        }\n    };\n    TreeViewRenderer.prototype.addNode = function (args) {\n        var fieldList = this.parent.pivotFieldList;\n        var selectedNode = fieldList[args.data[0].id.toString()];\n        if (args.action === 'check') {\n            this.selectedNodes.push(selectedNode.id.toString());\n        }\n        else {\n            var count = this.selectedNodes.length;\n            while (count--) {\n                if (this.selectedNodes[count] === selectedNode.id.toString()) {\n                    this.selectedNodes.splice(count, 1);\n                    break;\n                }\n            }\n        }\n    };\n    TreeViewRenderer.prototype.getTreeUpdate = function () {\n        var liElements = [].slice.call(this.treeViewElement.querySelectorAll('.' + cls.TEXT_CONTENT_CLASS));\n        for (var _i = 0, liElements_1 = liElements; _i < liElements_1.length; _i++) {\n            var liElement = liElements_1[_i];\n            var dragElement = createElement('span', {\n                attrs: {\n                    'tabindex': '-1',\n                    title: this.parent.localeObj.getConstant('drag'),\n                    'aria-disabled': 'false'\n                },\n                className: cls.ICON + ' ' + cls.DRAG_CLASS\n            });\n            prepend([dragElement], liElement);\n            if (liElement.querySelector('.' + cls.NODE_CHECK_CLASS)) {\n                addClass([liElement.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.LIST_SELECT_CLASS);\n            }\n        }\n    };\n    TreeViewRenderer.prototype.refreshTreeView = function () {\n        if (this.fieldTable) {\n            this.fieldTable.fields = { dataSource: this.getTreeData(), id: 'id', text: 'caption', isChecked: 'isSelected' };\n            this.fieldTable.dataBind();\n            this.getTreeUpdate();\n        }\n    };\n    TreeViewRenderer.prototype.getTreeData = function (axis) {\n        var data = [];\n        var keys = Object.keys(this.parent.pivotFieldList);\n        var fieldList = extend({}, this.parent.pivotFieldList, null, true);\n        if (this.parent.isAdaptive) {\n            var fields = [this.parent.dataSource.filters, this.parent.dataSource.columns, this.parent.dataSource.rows,\n                this.parent.dataSource.values];\n            var currentFieldSet = fields[axis];\n            var len = keys.length;\n            while (len--) {\n                fieldList[keys[len]].isSelected = false;\n            }\n            for (var _i = 0, currentFieldSet_1 = currentFieldSet; _i < currentFieldSet_1.length; _i++) {\n                var item = currentFieldSet_1[_i];\n                fieldList[item.name].isSelected = true;\n            }\n        }\n        var list = fieldList;\n        for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n            var member = keys_1[_a];\n            var obj = list[member];\n            data.push(obj);\n        }\n        return data;\n    };\n    TreeViewRenderer.prototype.onFieldAdd = function (e) {\n        this.parent.dialogRenderer.updateDataSource(this.selectedNodes);\n        this.closeTreeDialog();\n    };\n    TreeViewRenderer.prototype.closeTreeDialog = function () {\n        this.selectedNodes = [];\n        this.fieldDialog.hide();\n    };\n    /**\n     * @hidden\n     */\n    TreeViewRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.treeViewUpdate, this.refreshTreeView, this);\n    };\n    /**\n     * @hidden\n     */\n    TreeViewRenderer.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.treeViewUpdate, this.refreshTreeView);\n    };\n    /**\n     * To destroy the tree view event listener\n     * @return {void}\n     * @hidden\n     */\n    TreeViewRenderer.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return TreeViewRenderer;\n}());\nexport { TreeViewRenderer };\n","import { createElement, Droppable, EventHandler, removeClass, addClass } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\n/**\n * Module to render Axis Field Table\n */\n/** @hidden */\nvar AxisTableRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function AxisTableRenderer(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the axis table rendering\n     * @returns void\n     * @private\n     */\n    AxisTableRenderer.prototype.render = function () {\n        if (!this.parent.isAdaptive) {\n            var axisTable = createElement('div', { className: cls.AXIS_TABLE_CLASS });\n            this.leftAxisPanel = createElement('div', { className: cls.LEFT_AXIS_PANEL_CLASS });\n            this.rightAxisPanel = createElement('div', { className: cls.RIGHT_AXIS_PANEL_CLASS });\n            this.parent.dialogRenderer.parentElement.appendChild(axisTable);\n            axisTable.appendChild(this.leftAxisPanel);\n            axisTable.appendChild(this.rightAxisPanel);\n            this.axisTable = axisTable;\n            this.renderAxisTable();\n        }\n        this.parent.axisFieldModule.render();\n    };\n    AxisTableRenderer.prototype.renderAxisTable = function () {\n        var fieldLabels = ['filters', 'rows', 'columns', 'values'];\n        for (var len = 0, lnt = fieldLabels.length; len < lnt; len++) {\n            var axis = createElement('div', {\n                className: cls.FIELD_LIST_CLASS + '-' + fieldLabels[len]\n            });\n            var axisTitleWrapper = createElement('div', {\n                className: cls.AXIS_ICON_CLASS + '-wrapper'\n            });\n            var axisTitle = createElement('div', {\n                className: cls.AXIS_HEADER_CLASS,\n                innerHTML: this.parent.localeObj.getConstant(fieldLabels[len])\n            });\n            axisTitleWrapper.appendChild(this.getIconupdate(fieldLabels[len]));\n            axisTitleWrapper.appendChild(axisTitle);\n            var axisContent = createElement('div', { className: cls.AXIS_CONTENT_CLASS + ' ' + 'e-' + fieldLabels[len] });\n            var localePrompt = void 0;\n            if (fieldLabels[len] === 'rows') {\n                localePrompt = this.parent.localeObj.getConstant('dropRowPrompt');\n            }\n            else if (fieldLabels[len] === 'columns') {\n                localePrompt = this.parent.localeObj.getConstant('dropColPrompt');\n            }\n            else if (fieldLabels[len] === 'values') {\n                localePrompt = this.parent.localeObj.getConstant('dropValPrompt');\n            }\n            else {\n                localePrompt = this.parent.localeObj.getConstant('dropFilterPrompt');\n            }\n            var axisPrompt = createElement('span', {\n                className: cls.AXIS_PROMPT_CLASS,\n                innerHTML: localePrompt\n            });\n            var droppable = new Droppable(axisContent, {});\n            axis.appendChild(axisTitleWrapper);\n            axis.appendChild(axisContent);\n            axis.appendChild(axisPrompt);\n            if (len <= 1) {\n                this.leftAxisPanel.appendChild(axis);\n            }\n            else {\n                this.rightAxisPanel.appendChild(axis);\n            }\n            this.unWireEvent(axisContent);\n            this.wireEvent(axisContent);\n        }\n    };\n    AxisTableRenderer.prototype.getIconupdate = function (axis) {\n        var axisWrapper = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n            className: cls.AXIS_ICON_CLASS + '-icon-wrapper'\n        });\n        var axisElement = createElement('span', {\n            attrs: {\n                'tabindex': '-1', 'aria-disabled': 'false'\n            },\n            className: cls.ICON + ' ' + cls.AXIS_ICON_CLASS + '-' + axis\n        });\n        axisWrapper.appendChild(axisElement);\n        return axisWrapper;\n    };\n    AxisTableRenderer.prototype.wireEvent = function (element) {\n        EventHandler.add(element, 'mouseover', this.updateDropIndicator, this);\n        EventHandler.add(element, 'mouseleave', this.updateDropIndicator, this);\n    };\n    AxisTableRenderer.prototype.unWireEvent = function (element) {\n        EventHandler.remove(element, 'mouseover', this.updateDropIndicator);\n        EventHandler.remove(element, 'mouseleave', this.updateDropIndicator);\n    };\n    AxisTableRenderer.prototype.updateDropIndicator = function (e) {\n        var parentElement = this.parent.dialogRenderer.parentElement;\n        if (this.parent.isDragging && e.target.classList.contains(cls.AXIS_CONTENT_CLASS) && e.type === 'mouseover') {\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n            var element = [].slice.call(e.target.querySelectorAll('.' + cls.PIVOT_BUTTON_WRAPPER_CLASS));\n            if (element.length > 0) {\n                addClass([element[element.length - 1].querySelector('.' + cls.DROP_INDICATOR_CLASS + '-last')], cls.INDICATOR_HOVER_CLASS);\n            }\n        }\n        else if (e.type === 'mouseleave') {\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n        }\n    };\n    return AxisTableRenderer;\n}());\nexport { AxisTableRenderer };\n","import { createElement, remove, extend, getInstance } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as events from '../../common/base/constant';\n/**\n * `AggregateMenu` module to create aggregate type popup.\n */\n/** @hidden */\nvar AggregateMenu = /** @class */ (function () {\n    /**\n     * Constructor for the rener action.\n     * @hidden\n     */\n    function AggregateMenu(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns void\n     * @private\n     */\n    AggregateMenu.prototype.render = function (args, parentElement) {\n        this.parentElement = parentElement;\n        this.openContextMenu(args);\n    };\n    AggregateMenu.prototype.openContextMenu = function (args) {\n        if (this.menuInfo === undefined) {\n            this.createContextMenu();\n        }\n        this.currentMenu = args.currentTarget;\n        var pos = this.currentMenu.getBoundingClientRect();\n        if (this.parent.enableRtl) {\n            this.menuInfo.open(pos.top, pos.left - 105);\n        }\n        else {\n            this.menuInfo.open(pos.top, pos.left);\n        }\n    };\n    AggregateMenu.prototype.createContextMenu = function () {\n        var menuItems = [\n            { text: 'Sum', id: 'Sum' },\n            { text: 'Count', id: 'Count' },\n            { text: 'Distinct Count', id: 'DistinctCount' },\n            { text: 'Product', id: 'Product' },\n            { text: 'Avg', id: 'Avg' },\n            { text: 'Min', id: 'Min' },\n            { text: 'Max', id: 'Max' },\n            { text: 'More...', id: 'MoreOption' }\n        ];\n        var menuOptions = {\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.beforeMenuOpen.bind(this),\n            select: this.selectOptionInContextMenu.bind(this)\n        };\n        var removeContextMenu = document.getElementById(this.parent.element.id + 'valueFieldContextMenu');\n        if (removeContextMenu !== null) {\n            removeContextMenu.innerHTML = '';\n        }\n        this.parent.element.appendChild(createElement('ul', {\n            id: this.parent.element.id + 'valueFieldContextMenu'\n        }));\n        this.menuInfo = new Menu(menuOptions);\n        this.menuInfo.appendTo('#' + this.parent.element.id + 'valueFieldContextMenu');\n    };\n    AggregateMenu.prototype.beforeMenuOpen = function (args) {\n        args.element.style.zIndex = (this.menuInfo.element.style.zIndex + 3).toString();\n        args.element.style.display = 'inline';\n    };\n    AggregateMenu.prototype.createValueSettingsDialog = function (target) {\n        var _this = this;\n        var valueDialog = createElement('div', {\n            id: this.parentElement.id + '_ValueDialog',\n            className: 'e-value-field-settings',\n            attrs: { 'data-field': target.id }\n        });\n        this.parentElement.appendChild(valueDialog);\n        this.valueDialog = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: true,\n            header: this.parent.localeObj.getConstant('valueFieldSettings'),\n            content: this.createFieldOptions(target),\n            isModal: true,\n            visible: true,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.updateValueSettings.bind(this),\n                    buttonModel: { cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('ok'), isPrimary: true }\n                },\n                {\n                    click: function () { _this.valueDialog.hide(); },\n                    buttonModel: { cssClass: cls.CANCEL_BUTTON_CLASS, content: this.parent.localeObj.getConstant('cancel') }\n                }\n            ],\n            closeOnEscape: true,\n            target: this.parentElement,\n            overlayClick: function () { _this.removeDialog(); },\n            close: this.removeDialog.bind(this)\n        });\n        this.valueDialog.appendTo(valueDialog);\n    };\n    /* tslint:disable:all */\n    AggregateMenu.prototype.createFieldOptions = function (buttonElement) {\n        var fieldCaption = buttonElement.getAttribute('data-caption');\n        var summaryType = buttonElement.getAttribute('data-type');\n        var baseField = buttonElement.getAttribute('data-basefield');\n        var baseItem = buttonElement.getAttribute('data-baseitem');\n        summaryType = (summaryType.toString() !== 'undefined' ? summaryType : 'Sum');\n        var summaryDataSource = [\n            { value: 'Sum', text: 'Sum' },\n            { value: 'Count', text: 'Count' },\n            { value: 'DistinctCount', text: 'Distinct Count' },\n            { value: 'Product', text: 'Product' },\n            { value: 'Avg', text: 'Avg' },\n            { value: 'Min', text: 'Min' },\n            { value: 'Max', text: 'Max' },\n            { value: 'Index', text: 'Index' },\n            { value: 'SampleStDev', text: 'Sample StDev' },\n            { value: 'PopulationStDev', text: 'Population StDev' },\n            { value: 'SampleVar', text: 'Sample Var' },\n            { value: 'PopulationVar', text: 'Population Var' },\n            { value: 'RunningTotals', text: 'Running Totals' },\n            { value: 'DifferenceFrom', text: 'Difference From' },\n            { value: 'PercentageOfDifferenceFrom', text: '% of Difference From' },\n            { value: 'PercentageOfGrandTotal', text: '% of Grand Total' },\n            { value: 'PercentageOfColumnTotal', text: '% of Column Total' },\n            { value: 'PercentageOfRowTotal', text: '% of Row Total' },\n            { value: 'PercentageOfParentTotal', text: '% of Parent Total' },\n            { value: 'PercentageOfParentColumnTotal', text: '% of Parent Column Total' },\n            { value: 'PercentageOfParentRowTotal', text: '% of Parent Row Total' },\n        ];\n        var baseItemTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom'];\n        var baseFieldTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom', 'PercentageOfParentTotal'];\n        var dataFields = extend([], this.parent.dataSource.rows, null, true);\n        dataFields = dataFields.concat(this.parent.dataSource.columns);\n        var fieldDataSource = [];\n        var fieldItemDataSource = [];\n        // let summaryDataSource: { [key: string]: Object }[] = [];\n        // for (let type of summaryTypes) {\n        //     summaryDataSource.push({ value: type, text: type });\n        // }\n        for (var _i = 0, dataFields_1 = dataFields; _i < dataFields_1.length; _i++) {\n            var field = dataFields_1[_i];\n            var value = field.name;\n            var text = (field.caption ? field.caption : field.name);\n            fieldDataSource.push({ value: value, text: text });\n        }\n        baseField = (baseField.toString() !== 'undefined' ? baseField : fieldDataSource[0].value);\n        fieldItemDataSource = Object.keys(this.parent.engineModule.fieldList[(baseField.toString() !== 'undefined' ?\n            baseField : fieldDataSource[0].value)].formattedMembers);\n        baseItem = (baseItem.toString() !== 'undefined' ? baseItem : fieldItemDataSource[0]);\n        var mainDiv = createElement('div', {\n            className: 'e-value-field-div-content', id: this.parentElement.id + '_field_div_content',\n            attrs: { 'data-type': summaryType, 'data-caption': fieldCaption, 'data-basefield': baseField, 'data-baseitem': baseItem }\n        });\n        var textWrappper = createElement('div', { className: 'e-field-name-text-wrapper', });\n        var filterWrapperDiv1 = createElement('div', { className: 'e-field-option-wrapper' });\n        var optionWrapperDiv1 = createElement('div', { className: 'e-type-option-wrapper' });\n        var optionWrapperDiv2 = createElement('div', { className: 'e-base-field-option-wrapper' });\n        var optionWrapperDiv3 = createElement('div', { className: 'e-base-item-option-wrapper' });\n        var texttitle = createElement('div', { className: 'e-field-name-title', innerHTML: this.parent.localeObj.getConstant('sourceName') + '&nbsp;' });\n        var textContent = createElement('div', { className: 'e-field-name-content', innerHTML: buttonElement.id.toString() });\n        var inputTextDiv1 = createElement('div', {\n            className: 'e-type-option-text', innerHTML: this.parent.localeObj.getConstant('sourceCaption')\n        });\n        var optionTextDiv1 = createElement('div', {\n            className: 'e-base-field-option-text', innerHTML: this.parent.localeObj.getConstant('summarizeValuesBy')\n        });\n        var optionTextDiv2 = createElement('div', {\n            className: 'e-base-item-option-text', innerHTML: this.parent.localeObj.getConstant('baseField')\n        });\n        var optionTextDiv3 = createElement('div', {\n            className: 'e-type-option-text', innerHTML: this.parent.localeObj.getConstant('baseItem')\n        });\n        var inputDiv1 = createElement('div', { className: 'e-caption-input-wrapper' });\n        var dropOptionDiv1 = createElement('div', { id: this.parentElement.id + '_type_option' });\n        var dropOptionDiv2 = createElement('div', { id: this.parentElement.id + '_base_field_option' });\n        var dropOptionDiv3 = createElement('div', { id: this.parentElement.id + '_base_item_option' });\n        var inputField1 = createElement('input', {\n            id: this.parentElement.id + 'type_input_option',\n            className: 'e-caption-input-text',\n            attrs: { 'type': 'text' }\n        });\n        textWrappper.appendChild(texttitle);\n        textWrappper.appendChild(textContent);\n        inputDiv1.appendChild(inputTextDiv1);\n        inputDiv1.appendChild(inputField1);\n        optionWrapperDiv1.appendChild(optionTextDiv1);\n        optionWrapperDiv2.appendChild(optionTextDiv2);\n        optionWrapperDiv3.appendChild(optionTextDiv3);\n        optionWrapperDiv1.appendChild(dropOptionDiv1);\n        optionWrapperDiv2.appendChild(dropOptionDiv2);\n        optionWrapperDiv3.appendChild(dropOptionDiv3);\n        filterWrapperDiv1.appendChild(textWrappper);\n        filterWrapperDiv1.appendChild(inputDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv2);\n        filterWrapperDiv1.appendChild(optionWrapperDiv3);\n        mainDiv.appendChild(filterWrapperDiv1);\n        var popupInstance = this;\n        var optionWrapper1 = new DropDownList({\n            dataSource: summaryDataSource,\n            fields: { value: 'value', text: 'text' },\n            value: summaryType,\n            // popupWidth: 'auto',\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                optionWrapper2.enabled = baseFieldTypes.indexOf(args.value) !== -1 ? true : false;\n                optionWrapper3.enabled = baseItemTypes.indexOf(args.value) !== -1 ? true : false;\n            }\n        });\n        optionWrapper1.appendTo(dropOptionDiv1);\n        var optionWrapper2 = new DropDownList({\n            dataSource: fieldDataSource, enableRtl: this.parent.enableRtl,\n            fields: { value: 'value', text: 'text' },\n            value: baseField,\n            // popupWidth: 'auto',\n            enabled: (baseFieldTypes.indexOf(summaryType) !== -1 ? true : false),\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                fieldItemDataSource = Object.keys(popupInstance.parent.engineModule.fieldList[args.value].formattedMembers);\n                optionWrapper3.dataSource = fieldItemDataSource;\n                optionWrapper3.value = fieldItemDataSource[0];\n                optionWrapper3.filterBarPlaceholder = popupInstance.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0];\n                optionWrapper3.dataBind();\n            }\n        });\n        optionWrapper2.appendTo(dropOptionDiv2);\n        var optionWrapper3 = new DropDownList({\n            dataSource: fieldItemDataSource, enableRtl: this.parent.enableRtl,\n            value: baseItem,\n            // popupWidth: 'auto',\n            allowFiltering: true,\n            filterBarPlaceholder: this.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0],\n            enabled: (baseItemTypes.indexOf(summaryType) !== -1 ? true : false),\n            cssClass: cls.FILTER_OPERATOR_CLASS, width: '100%',\n        });\n        optionWrapper3.appendTo(dropOptionDiv3);\n        var inputObj1 = new MaskedTextBox({\n            placeholder: 'Enter field caption',\n            // floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl,\n            value: fieldCaption, width: '100%'\n        });\n        inputObj1.appendTo(inputField1);\n        return mainDiv;\n    };\n    /* tslint:enable:all */\n    AggregateMenu.prototype.selectOptionInContextMenu = function (menu) {\n        if (menu.item.text !== null) {\n            var buttonElement = this.currentMenu.parentElement;\n            if (menu.item.id === 'MoreOption') {\n                this.createValueSettingsDialog(buttonElement);\n            }\n            else {\n                var field = buttonElement.getAttribute('data-uid');\n                var valuefields = this.parent.dataSource.values;\n                var contentElement = buttonElement.querySelector('.e-content');\n                var captionName = menu.item.text + ' ' + 'of' + ' ' + this.parent.engineModule.fieldList[field].caption;\n                contentElement.innerHTML = captionName;\n                contentElement.setAttribute('title', captionName);\n                buttonElement.setAttribute('data-type', menu.item.id);\n                for (var vCnt = 0; vCnt < this.parent.dataSource.values.length; vCnt++) {\n                    if (this.parent.dataSource.values[vCnt].name === field) {\n                        var dataSourceItem = valuefields[vCnt].properties ?\n                            valuefields[vCnt].properties : valuefields[vCnt];\n                        dataSourceItem.type = menu.item.id;\n                        /* tslint:disable-next-line:no-any */\n                    }\n                }\n                this.updateDataSource();\n            }\n        }\n    };\n    AggregateMenu.prototype.updateDataSource = function (isRefreshed) {\n        if (!this.parent.allowDeferLayoutUpdate || this.parent.getModuleName() === 'pivotview') {\n            this.parent.updateDataSource(isRefreshed);\n        }\n        else {\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n                this.parent.pivotGridModule.\n                    setProperties({ dataSource: this.parent.dataSource.properties }, true);\n                this.parent.pivotGridModule.notify(events.uiUpdate, this);\n                this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n            }\n            else {\n                this.parent.triggerPopulateEvent();\n            }\n        }\n    };\n    AggregateMenu.prototype.updateValueSettings = function () {\n        var dialogElement = this.valueDialog.element;\n        var captionInstance = getInstance('#' + this.parentElement.id + 'type_input_option', MaskedTextBox);\n        var summaryInstance = getInstance('#' + this.parentElement.id + '_type_option', DropDownList);\n        var baseFieldInstance = getInstance('#' + this.parentElement.id + '_base_field_option', DropDownList);\n        var baseItemInstance = getInstance('#' + this.parentElement.id + '_base_item_option', DropDownList);\n        var fieldName = dialogElement.getAttribute('data-field');\n        var buttonElement = this.parentElement.querySelector('.' + cls.PIVOT_BUTTON_CLASS + '#' + fieldName);\n        var contentElement = buttonElement.querySelector('.e-content');\n        var captionName = this.parent.localeObj.getConstant(summaryInstance.value) + ' ' + 'of' + ' ' + captionInstance.value;\n        contentElement.innerHTML = captionName;\n        contentElement.setAttribute('title', captionName);\n        buttonElement.setAttribute('data-type', summaryInstance.value);\n        buttonElement.setAttribute('data-caption', captionInstance.value);\n        buttonElement.setAttribute('data-basefield', baseFieldInstance.value);\n        buttonElement.setAttribute('data-baseitem', baseItemInstance.value);\n        var selectedField = this.parent.pivotCommon.eventBase.getFieldByName(fieldName, this.parent.dataSource.values);\n        selectedField = selectedField.properties ?\n            selectedField.properties : selectedField;\n        selectedField.caption = captionInstance.value;\n        selectedField.type = summaryInstance.value;\n        selectedField.baseField = baseFieldInstance.value;\n        selectedField.baseItem = baseItemInstance.value;\n        this.valueDialog.close();\n        // this.parent.axisFieldModule.render();\n        this.updateDataSource(true);\n    };\n    AggregateMenu.prototype.removeDialog = function () {\n        if (this.valueDialog && !this.valueDialog.isDestroyed) {\n            this.valueDialog.destroy();\n        }\n        if (document.getElementById(this.parentElement.id + '_ValueDialog')) {\n            remove(document.getElementById(this.parentElement.id + '_ValueDialog'));\n        }\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @return {void}\n     * @hidden\n     */\n    AggregateMenu.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.menuInfo && !this.menuInfo.isDestroyed) {\n            this.menuInfo.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return AggregateMenu;\n}());\nexport { AggregateMenu };\n","import { createElement, Draggable, remove, extend } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, addClass, removeClass, closest, Browser } from '@syncfusion/ej2-base';\nimport { PivotFieldList } from '../../pivotfieldlist/base/field-list';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { AggregateMenu } from '../popups/aggregate-menu';\nimport { AxisFieldRenderer } from '../../pivotfieldlist/renderer/axis-field-renderer';\n/**\n * Module to render Pivot button\n */\n/** @hidden */\nvar PivotButton = /** @class */ (function () {\n    /** Constructor for render module */\n    function PivotButton(parent) {\n        this.parent = parent;\n        this.menuOption = new AggregateMenu(this.parent);\n        this.parent.pivotButtonModule = this;\n        this.addEventListener();\n        if (this.parent instanceof PivotFieldList) {\n            this.axisField = new AxisFieldRenderer(this.parent);\n        }\n    }\n    /* tslint:disable */\n    PivotButton.prototype.renderPivotButton = function (args) {\n        var field = extend([], args.field, null, true);\n        var axis = args.axis;\n        var axisElement;\n        var valuePos = -1;\n        var showValuesButton = (this.parent.getModuleName() == \"pivotfieldlist\" &&\n            this.parent.pivotGridModule) ?\n            this.parent.pivotGridModule.showValuesButton : this.parent.showValuesButton;\n        if (((this.parent.dataSource.valueAxis === 'row' && args.axis === 'rows') ||\n            (this.parent.dataSource.valueAxis === 'column' && args.axis === 'columns')) && showValuesButton && this.parent.dataSource.values.length > 1) {\n            valuePos = field.length;\n            field.push({\n                name: this.parent.localeObj.getConstant('values'), caption: this.parent.localeObj.getConstant('values'),\n                axis: args.axis\n            });\n        }\n        this.parentElement = this.parent.getModuleName() === 'pivotview' ? this.parent.element :\n            document.getElementById(this.parent.element.id + '_Wrapper');\n        if (this.parent.getModuleName() === 'pivotfieldlist') {\n            this.parentElement = document.getElementById(this.parent.element.id + '_Wrapper');\n            if (this.parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-' + axis)) {\n                var axisPrompt = this.parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-' + axis)\n                    .querySelector('.' + cls.AXIS_PROMPT_CLASS);\n                if (field.length === 0) {\n                    removeClass([axisPrompt], cls.ICON_DISABLE);\n                }\n                else {\n                    addClass([axisPrompt], cls.ICON_DISABLE);\n                }\n                axisElement =\n                    this.parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-' + axis).querySelector('.' + cls.AXIS_CONTENT_CLASS);\n            }\n            else {\n                return;\n            }\n        }\n        else {\n            this.parentElement = this.parent.element;\n            axisElement = this.parentElement.querySelector('.e-group-' + axis);\n        }\n        if (axisElement) {\n            if (this.parent.getModuleName() === 'pivotview' && field.length === 0) {\n                var axisPrompt = createElement('span', {\n                    className: cls.AXIS_PROMPT_CLASS,\n                    innerHTML: axis === 'rows' ? this.parent.localeObj.getConstant('rowAxisPrompt') :\n                        axis === 'columns' ? this.parent.localeObj.getConstant('columnAxisPrompt') :\n                            axis === 'values' ? this.parent.localeObj.getConstant('valueAxisPrompt') :\n                                this.parent.localeObj.getConstant('filterAxisPrompt')\n                });\n                axisElement.appendChild(axisPrompt);\n            }\n            else {\n                for (var i = 0, cnt = field.length; i < cnt; i++) {\n                    var buttonWrapper = createElement('div', {\n                        className: cls.PIVOT_BUTTON_WRAPPER_CLASS + (i === 0 ? ' e-first-btn' : ''),\n                        attrs: { 'data-tag': axis + ':' + field[i].name }\n                    });\n                    var buttonElement = createElement('div', {\n                        id: field[i].name, className: cls.PIVOT_BUTTON_CLASS,\n                        attrs: {\n                            'data-uid': field[i].name, 'tabindex': '0', 'isvalue': i === valuePos ? 'true' : 'false',\n                            'aria-disabled': 'false', 'aria-label': field[i].caption ? field[i].caption : field[i].name,\n                            'data-type': field[i].type,\n                            'data-caption': field[i].caption ? field[i].caption : field[i].name,\n                            'data-basefield': field[i].baseField,\n                            'data-baseitem': field[i].baseItem\n                        }\n                    });\n                    var dropIndicatorElement = createElement('span', {\n                        attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n                        className: cls.DROP_INDICATOR_CLASS\n                    });\n                    var dropLastIndicatorElement = createElement('span', {\n                        attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n                        className: cls.DROP_INDICATOR_CLASS + '-last'\n                    });\n                    var dragWrapper = this.createButtonDragIcon(buttonElement);\n                    var contentElement = this.createButtonText(field, i, axis, valuePos);\n                    buttonElement.appendChild(contentElement);\n                    if (['filters', 'values'].indexOf(axis) === -1 && valuePos !== i) {\n                        this.createSortOption(buttonElement, field[i].name);\n                    }\n                    if (axis !== 'values' && valuePos !== i) {\n                        this.createFilterOption(buttonElement, field[i].name);\n                    }\n                    if (axis === 'values') {\n                        this.getTypeStatus(field, i, buttonElement);\n                    }\n                    var removeElement = createElement('span', {\n                        attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n                        className: cls.ICON + ' ' + cls.REMOVE_CLASS\n                    });\n                    if (this.parent.getModuleName() === 'pivotview') {\n                        if (this.parent.groupingBarSettings.showRemoveIcon) {\n                            removeClass([removeElement], cls.ICON_DISABLE);\n                        }\n                        else {\n                            addClass([removeElement], cls.ICON_DISABLE);\n                        }\n                    }\n                    buttonElement.appendChild(removeElement);\n                    buttonWrapper.appendChild(dropIndicatorElement);\n                    buttonWrapper.appendChild(buttonElement);\n                    buttonWrapper.appendChild(dropLastIndicatorElement);\n                    axisElement.appendChild(buttonWrapper);\n                    var pivotButton = new Button({ enableRtl: this.parent.enableRtl });\n                    pivotButton.appendTo(buttonElement);\n                    this.unWireEvent(buttonWrapper, i === valuePos ? 'values' : axis);\n                    this.wireEvent(buttonWrapper, i === valuePos ? 'values' : axis);\n                    if ((this.parent.getModuleName() === 'pivotview' && !this.parent.isAdaptive) ||\n                        this.parent.getModuleName() === 'pivotfieldlist') {\n                        this.createDraggable(this.parent.getModuleName() === 'pivotview' ? contentElement : dragWrapper);\n                    }\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    PivotButton.prototype.createButtonText = function (field, i, axis, valuePos) {\n        var buttonText;\n        var aggregation;\n        var filterMem;\n        if (axis === \"filters\") {\n            filterMem = this.updateButtontext(field[i].name);\n        }\n        if (this.parent.engineModule.fieldList[field[i].name] !== undefined) {\n            aggregation = this.parent.engineModule.fieldList[field[i].name].aggregateType;\n            if (aggregation === undefined && (this.parent.engineModule.fieldList[field[i].name].type === 'string' || this.parent.engineModule.fieldList[field[i].name].type === 'include' ||\n                this.parent.engineModule.fieldList[field[i].name].type === 'exclude')) {\n                aggregation = 'Count';\n            }\n            else if (aggregation === undefined) {\n                aggregation = this.parent.engineModule.fieldList[field[i].name].aggregateType !== undefined ?\n                    this.parent.engineModule.fieldList[field[i].name].aggregateType : 'Sum';\n            }\n        }\n        var text = field[i].caption ? field[i].caption : field[i].name;\n        buttonText = createElement('span', {\n            attrs: {\n                title: axis === 'filters' ? (text + ' (' + filterMem + ')') : (((axis !== 'values' || aggregation === 'CalculatedField') ? text : this.parent.localeObj.getConstant(aggregation) + ' ' + 'of' + ' ' + text)),\n                'tabindex': '-1', 'aria-disabled': 'false', 'oncontextmenu': 'return false;',\n                'data-type': valuePos === i ? '' : aggregation\n            },\n            className: cls.PIVOT_BUTTON_CONTENT_CLASS,\n            innerHTML: axis === 'filters' ? (text + ' (' + filterMem + ')') : (axis !== 'values' || aggregation === 'CalculatedField' ? text : this.parent.localeObj.getConstant(aggregation) + ' ' + 'of' + ' ' + text)\n        });\n        return buttonText;\n    };\n    PivotButton.prototype.getTypeStatus = function (field, i, buttonElement) {\n        var fieldListItem = this.parent.engineModule.fieldList[field[i].name];\n        if (fieldListItem.aggregateType !== 'CalculatedField' &&\n            fieldListItem.type === 'number') {\n            this.createSummaryType(buttonElement, field[i].name);\n        }\n    };\n    PivotButton.prototype.createSummaryType = function (pivotButton, fieldName) {\n        var spanElement = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n            className: cls.ICON + ' ' + cls.AXISFIELD_ICON_CLASS\n        });\n        if (this.parent.getModuleName() === 'pivotview') {\n            if (this.parent.groupingBarSettings.showValueTypeIcon) {\n                removeClass([spanElement], cls.ICON_DISABLE);\n            }\n            else {\n                addClass([spanElement], cls.ICON_DISABLE);\n            }\n        }\n        pivotButton.appendChild(spanElement);\n        return spanElement;\n    };\n    PivotButton.prototype.createMenuOption = function (args) {\n        this.menuOption.render(args, this.parentElement);\n        this.parent.pivotButtonModule = this;\n    };\n    PivotButton.prototype.createDraggable = function (target) {\n        this.draggable = new Draggable(target, {\n            clone: true,\n            enableTailMode: true,\n            enableAutoScroll: true,\n            helper: this.createDragClone.bind(this),\n            dragStart: this.onDragStart.bind(this),\n            drag: this.onDragging.bind(this),\n            dragStop: this.onDragStop.bind(this)\n        });\n    };\n    PivotButton.prototype.createButtonDragIcon = function (pivotButton) {\n        var dragWrapper = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' }\n        });\n        var dragElement = createElement('span', {\n            attrs: {\n                'tabindex': '-1', 'aria-disabled': 'false'\n            },\n            className: cls.ICON + ' ' + cls.DRAG_CLASS\n        });\n        dragWrapper.appendChild(dragElement);\n        pivotButton.appendChild(dragWrapper);\n        return dragWrapper;\n    };\n    PivotButton.prototype.createSortOption = function (pivotButton, fieldName) {\n        var sortCLass;\n        if (!this.parent.allowDeferLayoutUpdate) {\n            sortCLass = this.parent.engineModule.fieldList[fieldName].sort === 'Descending' ? cls.SORT_DESCEND_CLASS : '';\n        }\n        else {\n            sortCLass = '';\n            for (var i = 0; i < this.parent.dataSource.sortSettings.length; i++) {\n                if (this.parent.dataSource.sortSettings[i].name === fieldName) {\n                    sortCLass = this.parent.dataSource.sortSettings[i].order === 'Descending' ? cls.SORT_DESCEND_CLASS : '';\n                }\n            }\n        }\n        var spanElement = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n            className: cls.ICON + ' ' + cls.SORT_CLASS + ' ' + sortCLass\n        });\n        if (this.parent.dataSource.enableSorting) {\n            removeClass([spanElement], cls.ICON_DISABLE);\n        }\n        else {\n            addClass([spanElement], cls.ICON_DISABLE);\n        }\n        if (this.parent.getModuleName() === 'pivotview') {\n            if (this.parent.groupingBarSettings.showSortIcon) {\n                removeClass([spanElement], cls.ICON_DISABLE);\n            }\n            else {\n                addClass([spanElement], cls.ICON_DISABLE);\n            }\n        }\n        pivotButton.appendChild(spanElement);\n        return spanElement;\n    };\n    PivotButton.prototype.createFilterOption = function (pivotButton, fieldName) {\n        var filterCLass;\n        if (!this.parent.allowDeferLayoutUpdate) {\n            filterCLass = this.parent.engineModule.fieldList[fieldName].filter.length === 0 ?\n                !this.parent.engineModule.fieldList[fieldName].isExcelFilter ? cls.FILTER_CLASS : cls.FILTERED_CLASS : cls.FILTERED_CLASS;\n        }\n        else {\n            filterCLass = cls.FILTER_CLASS;\n            for (var i = 0; i < this.parent.dataSource.filterSettings.length; i++) {\n                if (this.parent.dataSource.filterSettings[i].name === fieldName) {\n                    filterCLass = cls.FILTERED_CLASS;\n                }\n            }\n        }\n        var spanElement = createElement('span', {\n            attrs: {\n                'tabindex': '-1', 'aria-disabled': 'false'\n            },\n            className: cls.FILTER_COMMON_CLASS + ' ' + cls.ICON + ' ' + filterCLass\n        });\n        if (this.parent.getModuleName() === 'pivotview') {\n            if (this.parent.groupingBarSettings.showFilterIcon) {\n                removeClass([spanElement], cls.ICON_DISABLE);\n            }\n            else {\n                addClass([spanElement], cls.ICON_DISABLE);\n            }\n        }\n        pivotButton.appendChild(spanElement);\n        return spanElement;\n    };\n    PivotButton.prototype.createDragClone = function (args) {\n        var element = closest(args.element, '.' + cls.PIVOT_BUTTON_CLASS);\n        var cloneElement = createElement('div', {\n            id: this.parent.element.id + '_DragClone',\n            className: cls.DRAG_CLONE_CLASS\n        });\n        var contentElement = createElement('span', {\n            className: cls.TEXT_CONTENT_CLASS,\n            innerHTML: element.textContent\n        });\n        cloneElement.appendChild(contentElement);\n        document.body.appendChild(cloneElement);\n        return cloneElement;\n    };\n    PivotButton.prototype.onDragStart = function (e) {\n        this.parent.isDragging = true;\n        var element = closest(e.element, '.' + cls.PIVOT_BUTTON_CLASS);\n        var data = this.parent.engineModule.fieldList[element.getAttribute('data-uid')];\n        var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n        addClass([element], cls.SELECTED_NODE_CLASS);\n        if (data && data.aggregateType === 'CalculatedField') {\n            for (var _i = 0, axis_1 = axis; _i < axis_1.length; _i++) {\n                var axisContent = axis_1[_i];\n                addClass([this.parentElement.querySelector('.' + axisContent)], cls.NO_DRAG_CLASS);\n            }\n        }\n    };\n    PivotButton.prototype.onDragging = function (e) {\n        this.draggable.setProperties({ cursorAt: { top: (!isNOU(e.event.targetTouches) || Browser.isDevice) ? 60 : -20, } });\n        // if (closest(e.event.srcElement, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS)) {\n        //     let droppableElement: HTMLElement = closest(e.event.srcElement, '.' + cls.DROPPABLE_CLASS) as HTMLElement;\n        //     let buttonElement: HTMLElement = closest(e.event.srcElement, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS) as HTMLElement;\n        //     if (droppableElement.offsetHeight < droppableElement.scrollHeight) {\n        //         let scrollPosition: number = (droppableElement.scrollHeight - buttonElement.offsetTop);\n        //         if (buttonElement.offsetTop >= droppableElement.offsetTop && scrollPosition > droppableElement.scrollTop) {\n        //             droppableElement.scrollTop += Math.abs(buttonElement.offsetHeight);\n        //         } else if (buttonElement.offsetTop <= droppableElement.offsetTop) {\n        //             droppableElement.scrollTop -= Math.abs(buttonElement.offsetHeight);\n        //         }\n        //     }\n        // }\n    };\n    PivotButton.prototype.onDragStop = function (args) {\n        this.parent.isDragging = false;\n        var element = closest(args.element, '.' + cls.PIVOT_BUTTON_CLASS);\n        removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS)), cls.SELECTED_NODE_CLASS);\n        removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n        var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n        for (var _i = 0, axis_2 = axis; _i < axis_2.length; _i++) {\n            var axisContent = axis_2[_i];\n            removeClass([this.parentElement.querySelector('.' + axisContent)], cls.NO_DRAG_CLASS);\n        }\n        if (this.parent.pivotCommon.filterDialog.dialogPopUp) {\n            this.parent.pivotCommon.filterDialog.dialogPopUp.close();\n        }\n        if (document.getElementById(this.parent.element.id + '_DragClone')) {\n            remove(document.getElementById(this.parent.element.id + '_DragClone'));\n        }\n        document.body.style.cursor = 'auto';\n        if (!this.isButtonDropped(args.target, element)) {\n            return;\n        }\n        this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ? this.parent :\n            (this.parent.pivotGridModule ? this.parent.pivotGridModule : this.parent);\n        if (this.parent.pivotCommon.nodeStateModified.onStateModified(args, element.id)) {\n            this.updateDataSource();\n            this.parent.axisFieldModule.render();\n        }\n    };\n    PivotButton.prototype.isButtonDropped = function (dropTarget, target) {\n        var axisPanel = closest(target, '.' + cls.DROPPABLE_CLASS);\n        var droppableElement = closest(dropTarget, '.' + cls.DROPPABLE_CLASS);\n        var isDropped = true;\n        if (axisPanel === droppableElement) {\n            var pivotButtons = [].slice.call(axisPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n            var droppableTarget = closest(dropTarget, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n            var sourcePosition = void 0;\n            var droppedPosition = -1;\n            for (var i = 0, n = pivotButtons.length; i < n; i++) {\n                if (pivotButtons[i].id === target.id) {\n                    sourcePosition = i;\n                }\n                if (droppableTarget) {\n                    var droppableButton = droppableTarget.querySelector('.' + cls.PIVOT_BUTTON_CLASS);\n                    if (pivotButtons[i].id === droppableButton.id) {\n                        droppedPosition = i;\n                    }\n                }\n            }\n            if (sourcePosition === droppedPosition || (sourcePosition === (pivotButtons.length - 1) && droppedPosition === -1)) {\n                removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n                isDropped = false;\n            }\n        }\n        return isDropped;\n    };\n    PivotButton.prototype.updateSorting = function (args) {\n        if (((this.parent.getModuleName() === 'pivotview' && this.parent.enableValueSorting) ||\n            (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.pivotGridModule !== undefined &&\n                this.parent.pivotGridModule.enableValueSorting)) &&\n            args.target.parentElement.parentElement.getAttribute('data-tag').split(':')[0] === 'rows') {\n            this.parent.dataSource.valueSortSettings.headerText = '';\n        }\n        this.parent.pivotCommon.eventBase.updateSorting(args);\n        this.updateDataSource(true);\n    };\n    PivotButton.prototype.updateDataSource = function (isRefreshGrid) {\n        if (!this.parent.allowDeferLayoutUpdate || this.parent.getModuleName() === 'pivotview') {\n            this.parent.updateDataSource(isRefreshGrid);\n        }\n        else {\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n                this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n                this.parent.pivotGridModule.notify(events.uiUpdate, this);\n                this.parent.\n                    pivotGridModule.setProperties({ dataSource: this.parent.dataSource.properties }, true);\n            }\n            else {\n                this.parent.triggerPopulateEvent();\n            }\n        }\n    };\n    PivotButton.prototype.updateFiltering = function (args) {\n        this.parent.pivotCommon.eventBase.updateFiltering(args);\n        var target = args.target;\n        this.fieldName = target.parentElement.id;\n        this.dialogPopUp = this.parent.pivotCommon.filterDialog.dialogPopUp;\n        this.memberTreeView = this.parent.pivotCommon.filterDialog.memberTreeView;\n        this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked = this.nodeStateModified.bind(this);\n        this.parent.pivotCommon.filterDialog.allMemberSelect.nodeChecked = this.nodeStateModified.bind(this);\n        this.bindDialogEvents();\n    };\n    PivotButton.prototype.bindDialogEvents = function () {\n        if (this.parent.pivotCommon.filterDialog.allowExcelLikeFilter && this.parent.pivotCommon.filterDialog.tabObj) {\n            this.updateDialogButtonEvents(this.parent.pivotCommon.filterDialog.tabObj.selectedItem);\n            this.dialogPopUp.buttons[1].click = this.ClearFilter.bind(this);\n            this.parent.pivotCommon.filterDialog.tabObj.selected = this.tabSelect.bind(this);\n        }\n        else {\n            this.updateDialogButtonEvents(0);\n        }\n    };\n    PivotButton.prototype.tabSelect = function (e) {\n        this.updateDialogButtonEvents(e.selectedIndex);\n        removeClass([].slice.call(this.dialogPopUp.element.querySelectorAll('.e-selected-tab')), 'e-selected-tab');\n        if (e.selectedIndex > 0) {\n            /* tslint:disable-next-line:max-line-length */\n            addClass([this.dialogPopUp.element.querySelector('.e-filter-div-content' + '.' + (e.selectedIndex === 1 && this.parent.dataSource.allowLabelFilter ? 'e-label-filter' : 'e-value-filter'))], 'e-selected-tab');\n        }\n        if (e.selectedIndex === 0) {\n            this.parent.pivotCommon.filterDialog.updateCheckedState();\n        }\n        else {\n            this.dialogPopUp.buttons[0].buttonModel.disabled = false;\n            this.dialogPopUp.element.querySelector('.' + cls.OK_BUTTON_CLASS).removeAttribute('disabled');\n        }\n    };\n    PivotButton.prototype.updateDialogButtonEvents = function (index) {\n        this.dialogPopUp.buttons[0].click = (index === 0 ?\n            this.updateFilterState.bind(this, this.fieldName) : this.updateCustomFilter.bind(this));\n    };\n    PivotButton.prototype.updateCustomFilter = function (args) {\n        var dialogElement = this.dialogPopUp.element.querySelector('.e-selected-tab');\n        var fieldName = dialogElement.getAttribute('data-fieldname');\n        var filterType = dialogElement.getAttribute('data-type');\n        var measure = dialogElement.getAttribute('data-measure');\n        var operator = dialogElement.getAttribute('data-operator');\n        var operand1 = dialogElement.getAttribute('data-value1');\n        var operand2 = dialogElement.getAttribute('data-value2');\n        var type = ((filterType === 'value') ? 'Value' : (filterType === 'date') ? 'Date' :\n            (filterType === 'number') ? 'Number' : 'Label');\n        var filterItem = {\n            name: fieldName,\n            type: type,\n            measure: measure,\n            condition: operator,\n            value1: filterType === 'date' ? new Date(operand1) : operand1,\n            value2: filterType === 'date' ? new Date(operand2) : operand2\n        };\n        if ((isNOU(operand1) || operand1 === '') ||\n            (['Between', 'NotBetween'].indexOf(operator) > -1 && (isNOU(operand2) || operand2 === ''))) {\n            var inputElementString = (type.toLowerCase() + ((isNOU(operand1) || operand1 === '') ? '_input_option_1' : '_input_option_2'));\n            var focusElement = dialogElement.querySelector('#' + this.parent.element.id + '_' + inputElementString);\n            addClass([focusElement], cls.EMPTY_FIELD);\n            focusElement.focus();\n            return;\n        }\n        var filterObject = this.parent.pivotCommon.eventBase.getFilterItemByName(fieldName);\n        if (filterObject) {\n            // this.removeDataSourceSettings(fieldName);\n            filterObject = filterObject.properties ?\n                filterObject.properties : filterObject;\n            filterObject.type = type;\n            filterObject.measure = measure;\n            filterObject.condition = operator;\n            filterObject.value1 = filterType === 'date' ? new Date(operand1) : operand1;\n            filterObject.value2 = filterType === 'date' ? new Date(operand2) : operand2;\n        }\n        else {\n            this.parent.dataSource.filterSettings.push(filterItem);\n        }\n        this.dialogPopUp.close();\n        this.refreshPivotButtonState(fieldName, true);\n        this.updateDataSource(true);\n    };\n    PivotButton.prototype.ClearFilter = function (e) {\n        var dialogElement = this.dialogPopUp.element;\n        var fieldName = dialogElement.getAttribute('data-fieldname');\n        this.dialogPopUp.close();\n        this.removeDataSourceSettings(fieldName);\n        this.refreshPivotButtonState(fieldName, false);\n        this.updateDataSource(true);\n    };\n    PivotButton.prototype.removeButton = function (args) {\n        var target = args.target;\n        var fieldName = target.parentElement.id;\n        if (target.parentElement.getAttribute('isvalue') === 'true') {\n            this.parent.setProperties({ dataSource: { values: [] } }, true);\n        }\n        else {\n            this.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(fieldName);\n        }\n        if (this.parent.getModuleName() === 'pivotfieldlist') {\n            this.parent.axisFieldModule.render();\n        }\n        this.updateDataSource();\n    };\n    PivotButton.prototype.nodeStateModified = function (args) {\n        var target = args.node.parentElement.parentElement;\n        if (target.getAttribute('data-uid') === 'all') {\n            this.memberTreeView.nodeChecked = null;\n            if (args.action === 'check') {\n                this.memberTreeView.checkAll();\n            }\n            else {\n                this.memberTreeView.uncheckAll();\n            }\n            this.checkedStateAll(args.action);\n            this.memberTreeView.nodeChecked = this.nodeStateModified.bind(this);\n        }\n        else {\n            var pos = this.parent.pivotCommon.currentTreeItemsPos[args.data[0].id];\n            if (args.action === 'check') {\n                this.parent.pivotCommon.currentTreeItems[pos].checkedStatus = true;\n            }\n            else {\n                this.parent.pivotCommon.currentTreeItems[pos].checkedStatus = false;\n            }\n        }\n        this.parent.pivotCommon.filterDialog.updateCheckedState();\n    };\n    PivotButton.prototype.checkedStateAll = function (state) {\n        if (state === 'check') {\n            for (var _i = 0, _a = this.parent.pivotCommon.currentTreeItems; _i < _a.length; _i++) {\n                var item = _a[_i];\n                for (var _b = 0, _c = this.parent.pivotCommon.searchTreeItems; _b < _c.length; _b++) {\n                    var searctItem = _c[_b];\n                    if (item.id === searctItem.id) {\n                        item.checkedStatus = true;\n                        searctItem.checkedStatus = true;\n                    }\n                }\n            }\n        }\n        else {\n            for (var _d = 0, _e = this.parent.pivotCommon.currentTreeItems; _d < _e.length; _d++) {\n                var item = _e[_d];\n                for (var _f = 0, _g = this.parent.pivotCommon.searchTreeItems; _f < _g.length; _f++) {\n                    var searctItem = _g[_f];\n                    if (item.id === searctItem.id) {\n                        item.checkedStatus = false;\n                        searctItem.checkedStatus = false;\n                    }\n                }\n            }\n        }\n    };\n    PivotButton.prototype.updateFilterState = function (fieldName, args) {\n        var isNodeUnChecked = false;\n        var filterItem = { items: [], name: fieldName, type: 'Include' };\n        for (var _i = 0, _a = this.parent.pivotCommon.searchTreeItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.checkedStatus) {\n                if (this.parent.pivotCommon.isDateField) {\n                    filterItem.items.push(item.name);\n                }\n                else {\n                    filterItem.items.push(item.id);\n                }\n            }\n        }\n        isNodeUnChecked = (filterItem.items.length === this.parent.pivotCommon.currentTreeItems.length ?\n            false : true);\n        var filterObject = this.parent.pivotCommon.eventBase.getFilterItemByName(fieldName);\n        if (filterObject) {\n            for (var i = 0; i < this.parent.dataSource.filterSettings.length; i++) {\n                if (this.parent.dataSource.filterSettings[i].name === fieldName) {\n                    this.parent.dataSource.filterSettings.splice(i, 1);\n                    break;\n                }\n            }\n            this.parent.dataSource.filterSettings.push(filterItem);\n        }\n        else {\n            this.parent.dataSource.filterSettings.push(filterItem);\n        }\n        this.dialogPopUp.close();\n        this.refreshPivotButtonState(fieldName, isNodeUnChecked);\n        if (!isNodeUnChecked) {\n            this.removeDataSourceSettings(fieldName);\n        }\n        this.updateDataSource(true);\n        if (this.parent instanceof PivotFieldList) {\n            this.axisField.render();\n        }\n    };\n    PivotButton.prototype.refreshPivotButtonState = function (fieldName, isFiltered) {\n        var pivotButtons = [].slice.call(this.parentElement.querySelectorAll('.e-pivot-button'));\n        var selectedButton;\n        for (var _i = 0, pivotButtons_1 = pivotButtons; _i < pivotButtons_1.length; _i++) {\n            var item = pivotButtons_1[_i];\n            if (item.getAttribute('data-uid') === fieldName) {\n                selectedButton = item.querySelector('.' + cls.FILTER_COMMON_CLASS);\n                break;\n            }\n        }\n        if (isFiltered) {\n            removeClass([selectedButton], cls.FILTER_CLASS);\n            addClass([selectedButton], cls.FILTERED_CLASS);\n        }\n        else {\n            removeClass([selectedButton], cls.FILTERED_CLASS);\n            addClass([selectedButton], cls.FILTER_CLASS);\n        }\n    };\n    PivotButton.prototype.removeDataSourceSettings = function (fieldName) {\n        var filterSettings = this.parent.dataSource.filterSettings;\n        for (var len = 0, lnt = filterSettings.length; len < lnt; len++) {\n            if (filterSettings[len].name === fieldName) {\n                filterSettings.splice(len, 1);\n                break;\n            }\n        }\n    };\n    PivotButton.prototype.updateDropIndicator = function (e) {\n        if (this.parent.isDragging) {\n            removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            var element = closest(e.target, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n            addClass([element.querySelector('.' + cls.DROP_INDICATOR_CLASS)], cls.INDICATOR_HOVER_CLASS);\n        }\n    };\n    PivotButton.prototype.wireEvent = function (element, axis) {\n        EventHandler.add(element, 'mouseover', this.updateDropIndicator, this);\n        if (['filters', 'values'].indexOf(axis) === -1) {\n            EventHandler.add(element.querySelector('.' + cls.SORT_CLASS), 'click', this.updateSorting, this);\n        }\n        if (axis !== 'values') {\n            EventHandler.add(element.querySelector('.' + cls.FILTER_COMMON_CLASS), 'click', this.updateFiltering, this);\n        }\n        if (axis === 'values' && element.querySelector('.' + cls.AXISFIELD_ICON_CLASS) !== null) {\n            EventHandler.add(element.querySelector('.' + cls.AXISFIELD_ICON_CLASS), 'click', this.createMenuOption, this);\n        }\n        EventHandler.add(element.querySelector('.' + cls.REMOVE_CLASS), 'click', this.removeButton, this);\n    };\n    PivotButton.prototype.unWireEvent = function (element, axis) {\n        EventHandler.remove(element, 'mouseover', this.updateDropIndicator);\n        if (['filters', 'values'].indexOf(axis) === -1) {\n            EventHandler.remove(element.querySelector('.' + cls.SORT_CLASS), 'click', this.updateSorting);\n        }\n        if (axis !== 'values') {\n            EventHandler.remove(element.querySelector('.' + cls.FILTER_COMMON_CLASS), 'click', this.updateFiltering);\n        }\n        if (axis === 'values' && element.querySelector('.' + cls.AXISFIELD_ICON_CLASS) !== null) {\n            EventHandler.remove(element.querySelector('.' + cls.AXISFIELD_ICON_CLASS), 'click', this.createMenuOption);\n        }\n        EventHandler.remove(element.querySelector('.' + cls.REMOVE_CLASS), 'click', this.removeButton);\n    };\n    /**\n     * @hidden\n     */\n    PivotButton.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.renderPivotButton\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.pivotButtonUpdate, this.handlers.load, this);\n    };\n    /**\n     * @hidden\n     */\n    PivotButton.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.pivotButtonUpdate, this.handlers.load);\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @return {void}\n     * @hidden\n     */\n    PivotButton.prototype.destroy = function () {\n        this.menuOption.destroy();\n        this.removeEventListener();\n    };\n    // To update button text\n    PivotButton.prototype.updateButtontext = function (fieldName) {\n        var filterCount = this.parent.engineModule.fieldList[fieldName].filter.length;\n        var filterType = this.parent.engineModule.fieldList[fieldName].filterType;\n        var memLen = this.parent.engineModule.fieldList[fieldName].dateMember.length;\n        var filterMem;\n        var firstNode = this.parent.engineModule.fieldList[fieldName].filter[0];\n        if (filterType === \"include\") {\n            if (filterCount === 1) {\n                filterMem = firstNode;\n            }\n            else if (filterCount > 1) {\n                if (filterCount === memLen) {\n                    filterMem = this.parent.localeObj.getConstant('all');\n                }\n                else {\n                    filterMem = this.parent.localeObj.getConstant('multipleItems');\n                }\n            }\n        }\n        else if (filterType === \"exclude\") {\n            if (filterCount === 1) {\n                if (memLen === 2) {\n                    if (firstNode !== this.parent.engineModule.fieldList[fieldName].dateMember[0].actualText) {\n                        filterMem = firstNode;\n                    }\n                    else {\n                        filterMem = this.parent.engineModule.fieldList[fieldName].dateMember[0].actualText;\n                    }\n                }\n                else {\n                    filterMem = this.parent.localeObj.getConstant('multipleItems');\n                }\n            }\n            else if (filterCount > 1) {\n                var j = void 0;\n                var allNodes = Object.keys(this.parent.engineModule.fieldList[fieldName].members);\n                var filteredItems = this.parent.engineModule.fieldList[fieldName].filter;\n                if (filterCount === (allNodes.length - 1)) {\n                    loop: for (j = 0; j < allNodes.length; j++) {\n                        var test = allNodes[j];\n                        var x = filteredItems.indexOf(test);\n                        if (x === -1) {\n                            filterMem = allNodes[j];\n                            break loop;\n                        }\n                    }\n                }\n                else {\n                    filterMem = this.parent.localeObj.getConstant('multipleItems');\n                }\n            }\n        }\n        else {\n            filterMem = this.parent.localeObj.getConstant('all');\n        }\n        return filterMem;\n    };\n    return PivotButton;\n}());\nexport { PivotButton };\n","import * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { PivotButton } from '../../common/actions/pivot-button';\n/**\n * Module to render Axis Fields\n */\n/** @hidden */\nvar AxisFieldRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function AxisFieldRenderer(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the pivot button rendering\n     * @returns void\n     * @private\n     */\n    AxisFieldRenderer.prototype.render = function () {\n        this.pivotButton = new PivotButton(this.parent);\n        this.createPivotButtons();\n    };\n    AxisFieldRenderer.prototype.createPivotButtons = function () {\n        var rows = this.parent.dataSource.rows;\n        var columns = this.parent.dataSource.columns;\n        var values = this.parent.dataSource.values;\n        var filters = this.parent.dataSource.filters;\n        var fields = [rows, columns, values, filters];\n        var parentElement = this.parent.dialogRenderer.parentElement;\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-filters')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-filters').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-rows')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-rows').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-columns')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-columns').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-values')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-values').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        var axis = ['rows', 'columns', 'values', 'filters'];\n        for (var len = 0, lnt = fields.length; len < lnt; len++) {\n            if (fields[len]) {\n                var args = {\n                    field: fields[len],\n                    axis: axis[len].toString()\n                };\n                this.parent.notify(events.pivotButtonUpdate, args);\n            }\n        }\n    };\n    return AxisFieldRenderer;\n}());\nexport { AxisFieldRenderer };\n","import { DialogRenderer } from '../renderer/dialog-renderer';\nimport { TreeViewRenderer } from '../renderer/tree-renderer';\nimport { AxisTableRenderer } from '../renderer/axis-table-renderer';\nimport { AxisFieldRenderer } from './axis-field-renderer';\n/**\n * Module to render Pivot Table component\n */\n/** @hidden */\nvar Render = /** @class */ (function () {\n    /** Constructor for render module */\n    function Render(parent) {\n        this.parent = parent;\n        this.parent.dialogRenderer = new DialogRenderer(this.parent);\n        this.parent.treeViewModule = new TreeViewRenderer(this.parent);\n        this.parent.axisTableModule = new AxisTableRenderer(this.parent);\n        this.parent.axisFieldModule = new AxisFieldRenderer(this.parent);\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns void\n     * @private\n     */\n    Render.prototype.render = function () {\n        this.parent.dialogRenderer.render();\n        if (!this.parent.isAdaptive) {\n            this.parent.treeViewModule.render();\n        }\n        this.parent.axisTableModule.render();\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Event, Component, Internationalization, extend } from '@syncfusion/ej2-base';\nimport { L10n, remove, addClass, Browser, Complex } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, removeClass, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PivotEngine } from '../../base/engine';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { PivotCommon } from '../../common/base/pivot-common';\nimport { Render } from '../renderer/renderer';\nimport { DataSource } from '../../pivotview/model/dataSource';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\n/**\n * Represents the PivotFieldList component.\n * ```html\n * <div id=\"pivotfieldlist\"></div>\n * <script>\n *  var pivotfieldlistObj = new PivotFieldList({ });\n *  pivotfieldlistObj.appendTo(\"#pivotfieldlist\");\n * </script>\n * ```\n */\nvar PivotFieldList = /** @class */ (function (_super) {\n    __extends(PivotFieldList, _super);\n    /**\n     * Constructor for creating the widget\n     * @param  {PivotFieldListModel} options?\n     * @param  {string|HTMLButtonElement} element?\n     */\n    function PivotFieldList(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /** @hidden */\n        _this.isRequiredUpdate = true;\n        _this.engineModule = new PivotEngine(_this.dataSource, '');\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for control rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    PivotFieldList.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.allowCalculatedField) {\n            modules.push({ args: [this], member: 'calculatedfield' });\n        }\n        return modules;\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    PivotFieldList.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice;\n        this.globalize = new Internationalization(this.locale);\n        this.renderModule = new Render(this);\n        this.defaultLocale = {\n            staticFieldList: 'Pivot Field List',\n            fieldList: 'Field List',\n            dropFilterPrompt: 'Drop filter here',\n            dropColPrompt: 'Drop column here',\n            dropRowPrompt: 'Drop row here',\n            dropValPrompt: 'Drop value here',\n            addPrompt: 'Add field here',\n            adaptiveFieldHeader: 'Choose field',\n            centerHeader: 'Drag fields between axes below:',\n            add: 'add',\n            drag: 'Drag',\n            filter: 'Filter',\n            filtered: 'Filtered',\n            sort: 'Sort',\n            remove: 'Remove',\n            filters: 'Filters',\n            rows: 'Rows',\n            columns: 'Columns',\n            values: 'Values',\n            calculatedField: 'Calculated Field',\n            createCalculatedField: 'Create Calculated Field',\n            fieldName: 'Enter the field name',\n            error: 'Error',\n            invalidFormula: 'Invalid formula.',\n            dropText: 'Example: (\"Sum(Order_Count)\" + \"Sum(In_Stock)\") * 250',\n            dropTextMobile: 'Add fields and edit formula here.',\n            dropAction: 'Calculated field cannot be place in any other region except value axis.',\n            search: 'Search',\n            close: 'Close',\n            cancel: 'Cancel',\n            delete: 'Delete',\n            alert: 'Alert',\n            warning: 'Warning',\n            ok: 'OK',\n            sum: 'Sum',\n            average: 'Average',\n            count: 'Count',\n            min: 'Min',\n            max: 'Max',\n            allFields: 'All Fields',\n            formula: 'Formula',\n            fieldExist: 'A field already exists in this name. Please enter a different name.',\n            confirmText: 'A calculation field already exists in this name. Do you want to replace it?',\n            noMatches: 'No matches',\n            format: 'Summaries values by',\n            edit: 'Edit',\n            clear: 'Clear',\n            formulaField: 'Drag and drop fields to formula',\n            dragField: 'Drag field to formula',\n            clearFilter: 'Clear',\n            by: 'by',\n            enterValue: 'Enter value',\n            chooseDate: 'Enter date',\n            all: 'All',\n            multipleItems: 'Multiple items',\n            /* tslint:disable */\n            Equals: 'Equals',\n            DoesNotEquals: 'Does Not Equal',\n            BeginWith: 'Begins With',\n            DoesNotBeginWith: 'Does Not Begin With',\n            EndsWith: 'Ends With',\n            DoesNotEndsWith: 'Does Not End With',\n            Contains: 'Contains',\n            DoesNotContains: 'Does Not Contain',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqualTo: 'Greater Than Or Equal To',\n            LessThan: 'Less Than',\n            LessThanOrEqualTo: 'Less Than Or Equal To',\n            Between: 'Between',\n            NotBetween: 'Not Between',\n            Before: 'Before',\n            BeforeOrEqualTo: 'Before Or Equal To',\n            After: 'After',\n            AfterOrEqualTo: 'After Or Equal To',\n            member: 'Member',\n            label: 'Label',\n            date: 'Date',\n            value: 'Value',\n            labelTextContent: 'Show the items for which the label',\n            dateTextContent: 'Show the items for which the date',\n            valueTextContent: 'Show the items for which',\n            And: 'and',\n            Sum: 'Sum',\n            Count: 'Count',\n            DistinctCount: 'Distinct Count',\n            Product: 'Product',\n            Avg: 'Avg',\n            Min: 'Min',\n            Max: 'Max',\n            Index: 'Index',\n            SampleStDev: 'Sample StDev',\n            PopulationStDev: 'Population StDev',\n            SampleVar: 'Sample Var',\n            PopulationVar: 'Population Var',\n            RunningTotals: 'Running Totals',\n            DifferenceFrom: 'Difference From',\n            PercentageOfDifferenceFrom: '% of Difference From',\n            PercentageOfGrandTotal: '% of Grand Total',\n            PercentageOfColumnTotal: '% of Column Total',\n            PercentageOfRowTotal: '% of Row Total',\n            PercentageOfParentTotal: '% of Parent Total',\n            PercentageOfParentColumnTotal: '% of Parent Column Total',\n            PercentageOfParentRowTotal: '% of Parent Row Total',\n            /* tslint:enable */\n            apply: 'APPLY',\n            valueFieldSettings: 'Value field settings',\n            sourceName: 'Field name :',\n            sourceCaption: 'Field caption :',\n            summarizeValuesBy: 'Summarize values by :',\n            baseField: 'Base field :',\n            baseItem: 'Base item :',\n            example: 'e.g:',\n            editorDataLimitMsg: ' more items. Search to refine further.',\n            deferLayoutUpdate: 'Defer Layout Update'\n        };\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.isDragging = false;\n        this.captionData = [];\n        this.wireEvent();\n    };\n    /**\n     * Initialize the control rendering\n     * @returns void\n     * @private\n     */\n    PivotFieldList.prototype.render = function () {\n        this.trigger(events.load, { 'dataSource': this.dataSource });\n        addClass([this.element], cls.ROOT);\n        if (this.enableRtl) {\n            addClass([this.element], cls.RTL);\n        }\n        else {\n            removeClass([this.element], cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClass([this.element], cls.DEVICE);\n        }\n        else {\n            removeClass([this.element], cls.DEVICE);\n        }\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass);\n        }\n        this.notify(events.initialLoad, {});\n    };\n    /**\n     * Binding events to the Pivot Field List element.\n     * @hidden\n     */\n    PivotFieldList.prototype.wireEvent = function () {\n        this.on(events.initialLoad, this.generateData, this);\n        this.on(events.dataReady, this.fieldListRender, this);\n    };\n    /**\n     * Unbinding events from the element on widget destroy.\n     * @hidden\n     */\n    PivotFieldList.prototype.unWireEvent = function () {\n        if (this.pivotGridModule && this.pivotGridModule.isDestroyed) {\n            return;\n        }\n        this.off(events.initialLoad, this.generateData);\n        this.off(events.dataReady, this.fieldListRender);\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    PivotFieldList.prototype.getPersistData = function () {\n        var keyEntity = ['dataSource'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * Get component name.\n     * @returns string\n     * @private\n     */\n    PivotFieldList.prototype.getModuleName = function () {\n        return 'pivotfieldlist';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    PivotFieldList.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'locale':\n                    this.refresh();\n                    break;\n                case 'enableRtl':\n                    if (this.enableRtl) {\n                        addClass([this.element], cls.RTL);\n                    }\n                    else {\n                        removeClass([this.element], cls.RTL);\n                    }\n                    requireRefresh = true;\n                    break;\n            }\n            if (requireRefresh) {\n                this.fieldListRender();\n            }\n        }\n    };\n    PivotFieldList.prototype.generateData = function () {\n        this.pivotFieldList = {};\n        if (this.dataSource && this.dataSource.data) {\n            this.trigger(events.enginePopulating, { 'dataSource': this.dataSource });\n            var pageSettings = this.pivotGridModule ? this.pivotGridModule.pageSettings : undefined;\n            var isDrillThrough = this.pivotGridModule ?\n                (this.pivotGridModule.allowDrillThrough || this.pivotGridModule.editSettings.allowEditing) : true;\n            var enableValueSorting = this.pivotGridModule ? this.pivotGridModule.enableValueSorting : undefined;\n            this.engineModule.renderEngine(this.dataSource, '', undefined, pageSettings, enableValueSorting, isDrillThrough);\n            this.pivotFieldList = this.engineModule.fieldList;\n            var eventArgs = {\n                pivotFieldList: this.pivotFieldList,\n                pivotValues: this.engineModule.pivotValues\n            };\n            this.trigger(events.enginePopulated, eventArgs);\n        }\n        this.notify(events.dataReady, {});\n        this.trigger(events.dataBound);\n    };\n    PivotFieldList.prototype.fieldListRender = function () {\n        this.element.innerHTML = '';\n        if (this.renderMode === 'Popup' && this.dialogRenderer.fieldListDialog && !this.dialogRenderer.fieldListDialog.isDestroyed) {\n            this.dialogRenderer.fieldListDialog.destroy();\n            remove(document.getElementById(this.element.id + '_Wrapper'));\n        }\n        this.renderModule.render();\n        this.fieldListSpinnerElement = this.renderMode === 'Popup' ?\n            this.dialogRenderer.fieldListDialog.element : this.element.querySelector('.e-pivotfieldlist-wrapper');\n        createSpinner({ target: this.fieldListSpinnerElement }, this.createElement);\n        var args = {\n            pivotEngine: this.engineModule,\n            dataSource: this.dataSource,\n            id: this.element.id,\n            element: document.getElementById(this.element.id + '_Wrapper'),\n            moduleName: this.getModuleName(),\n            enableRtl: this.enableRtl,\n            isAdaptive: this.isAdaptive,\n            renderMode: this.renderMode,\n            localeObj: this.localeObj\n        };\n        this.pivotCommon = new PivotCommon(args);\n        this.pivotCommon.control = this;\n        if (this.allowDeferLayoutUpdate) {\n            this.clonedDataSource = extend({}, this.dataSource, null, true);\n            this.clonedFieldList = extend({}, this.pivotFieldList, null, true);\n        }\n    };\n    PivotFieldList.prototype.getFieldCaption = function (dataSource) {\n        this.getFields(dataSource);\n        if (this.captionData.length > 0) {\n            var lnt = this.captionData.length;\n            while (lnt--) {\n                if (this.captionData[lnt]) {\n                    for (var _i = 0, _a = this.captionData[lnt]; _i < _a.length; _i++) {\n                        var item = _a[_i];\n                        var obj = item.properties;\n                        if (obj) {\n                            if (this.engineModule.fieldList[obj.name] && obj.caption) {\n                                this.engineModule.fieldList[obj.name].caption = obj.caption;\n                            }\n                            else {\n                                this.engineModule.fieldList[obj.name].caption = obj.name;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    PivotFieldList.prototype.getFields = function (dataSource) {\n        var fieldSets = extend({}, dataSource, null, true);\n        var obj = fieldSets.properties;\n        this.captionData = [obj.rows, obj.columns, obj.values, obj.filters];\n    };\n    /**\n     * Updates the PivotEngine using dataSource from Pivot Field List component.\n     * @method updateDataSource\n     * @return {void}\n     * @hidden\n     */\n    PivotFieldList.prototype.updateDataSource = function (isTreeViewRefresh, isEngineRefresh) {\n        if (this.pivotGridModule) {\n            showSpinner(this.pivotGridModule.element);\n        }\n        showSpinner(this.fieldListSpinnerElement);\n        if (isNullOrUndefined(isEngineRefresh)) {\n            var pageSettings = this.pivotGridModule ? this.pivotGridModule.pageSettings : undefined;\n            var enableValueSorting = this.pivotGridModule ? this.pivotGridModule.enableValueSorting : undefined;\n            var isDrillThrough = this.pivotGridModule ?\n                (this.pivotGridModule.allowDrillThrough || this.pivotGridModule.editSettings.allowEditing) : true;\n            this.engineModule.renderEngine(this.dataSource, '', this.pivotFieldList, pageSettings, enableValueSorting, isDrillThrough);\n            this.getFieldCaption(this.dataSource);\n        }\n        else {\n            this.axisFieldModule.render();\n            this.isRequiredUpdate = false;\n        }\n        var eventArgs = {\n            dataSource: this.dataSource,\n            pivotFieldList: this.pivotFieldList,\n            pivotValues: this.engineModule.pivotValues\n        };\n        this.trigger(events.enginePopulated, eventArgs);\n        this.pivotCommon.engineModule = this.engineModule;\n        this.pivotCommon.dataSource = this.dataSource;\n        this.pivotFieldList = this.engineModule.fieldList;\n        if (!isTreeViewRefresh && this.treeViewModule.fieldTable && !this.isAdaptive) {\n            this.notify(events.treeViewUpdate, {});\n        }\n        if (this.isRequiredUpdate) {\n            if (this.allowDeferLayoutUpdate) {\n                this.clonedDataSource = extend({}, this.dataSource, null, true);\n                this.clonedFieldList = extend({}, this.pivotFieldList, null, true);\n            }\n            this.updateView(this.pivotGridModule);\n        }\n        else if (this.renderMode === 'Popup' && this.allowDeferLayoutUpdate) {\n            this.pivotGridModule.engineModule = this.engineModule;\n            this.pivotGridModule.\n                setProperties({ dataSource: this.dataSource.properties }, true);\n            this.pivotGridModule.notify(events.uiUpdate, this);\n            hideSpinner(this.fieldListSpinnerElement);\n        }\n        this.isRequiredUpdate = true;\n        if (!this.pivotGridModule) {\n            hideSpinner(this.fieldListSpinnerElement);\n        }\n        else {\n            this.pivotGridModule.fieldListSpinnerElement = this.fieldListSpinnerElement;\n        }\n    };\n    /**\n     * Updates the Pivot Field List component using dataSource from PivotView component.\n     * @method updateControl\n     * @return {void}\n     * @hidden\n     */\n    PivotFieldList.prototype.update = function (control) {\n        if (control) {\n            this.setProperties({ dataSource: control.dataSource }, true);\n            this.engineModule = control.engineModule;\n            this.pivotFieldList = control.engineModule.fieldList;\n            if (this.renderMode === 'Popup') {\n                this.pivotGridModule = control;\n            }\n            this.getFieldCaption(control.dataSource);\n            this.pivotCommon.engineModule = this.engineModule;\n            this.pivotCommon.dataSource = this.dataSource;\n            this.pivotCommon.control = control;\n            if (this.treeViewModule.fieldTable && !this.isAdaptive) {\n                this.notify(events.treeViewUpdate, {});\n            }\n            this.axisFieldModule.render();\n            if (this.renderMode === 'Fixed' && this.allowDeferLayoutUpdate) {\n                this.clonedDataSource = extend({}, this.dataSource, null, true);\n                this.clonedFieldList = extend({}, this.pivotFieldList, null, true);\n            }\n        }\n    };\n    /**\n     * Updates the PivotView component using dataSource from Pivot Field List component.\n     * @method refreshTargetControl\n     * @return {void}\n     * @hidden\n     */\n    PivotFieldList.prototype.updateView = function (control) {\n        if (control) {\n            control.setProperties({ dataSource: this.dataSource }, true);\n            control.engineModule = this.engineModule;\n            control.pivotValues = this.engineModule.pivotValues;\n            control.dataBind();\n        }\n    };\n    /**\n     * Called internally to trigger populate event.\n     * @hidden\n     */\n    PivotFieldList.prototype.triggerPopulateEvent = function () {\n        var eventArgs = {\n            dataSource: this.dataSource,\n            pivotFieldList: this.pivotFieldList,\n            pivotValues: this.engineModule.pivotValues\n        };\n        this.trigger(events.enginePopulated, eventArgs);\n    };\n    /**\n     * Destroys the Field Table component.\n     * @method destroy\n     * @return {void}\n     */\n    PivotFieldList.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.treeViewModule) {\n            this.treeViewModule.destroy();\n        }\n        if (this.pivotButtonModule) {\n            this.pivotButtonModule.destroy();\n        }\n        if (this.allowDeferLayoutUpdate && this.dialogRenderer &&\n            this.dialogRenderer.deferUpdateCheckBox && !this.dialogRenderer.deferUpdateCheckBox.isDestroyed) {\n            this.dialogRenderer.deferUpdateCheckBox.destroy();\n        }\n        _super.prototype.destroy.call(this);\n        this.element.innerHTML = '';\n        removeClass([this.element], cls.ROOT);\n        removeClass([this.element], cls.RTL);\n        removeClass([this.element], cls.DEVICE);\n        if (this.renderMode === 'Popup') {\n            if (this.dialogRenderer.fieldListDialog && !this.dialogRenderer.fieldListDialog.isDestroyed) {\n                this.dialogRenderer.fieldListDialog.destroy();\n            }\n            if (document.getElementById(this.element.id + '_Wrapper')) {\n                remove(document.getElementById(this.element.id + '_Wrapper'));\n            }\n        }\n    };\n    __decorate([\n        Complex({}, DataSource)\n    ], PivotFieldList.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property('Popup')\n    ], PivotFieldList.prototype, \"renderMode\", void 0);\n    __decorate([\n        Property()\n    ], PivotFieldList.prototype, \"target\", void 0);\n    __decorate([\n        Property('')\n    ], PivotFieldList.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotFieldList.prototype, \"allowCalculatedField\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotFieldList.prototype, \"showValuesButton\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotFieldList.prototype, \"allowDeferLayoutUpdate\", void 0);\n    __decorate([\n        Property(1000)\n    ], PivotFieldList.prototype, \"maxNodeLimitInMemberEditor\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"enginePopulating\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"enginePopulated\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"onFieldDropped\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"destroyed\", void 0);\n    PivotFieldList = __decorate([\n        NotifyPropertyChanges\n    ], PivotFieldList);\n    return PivotFieldList;\n}(Component));\nexport { PivotFieldList };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { Droppable, createElement, extend, remove, addClass, closest } from '@syncfusion/ej2-base';\nimport { prepend, append, KeyboardEvents, removeClass } from '@syncfusion/ej2-base';\nimport { Button, RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport * as cls from '../../common/base/css-constant';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../../common/base/constant';\nimport { Accordion } from '@syncfusion/ej2-navigations';\n/**\n * Module to render Calculated Field Dialog\n */\nvar COUNT = 'Count';\nvar AVG = 'Avg';\nvar MIN = 'Min';\nvar MAX = 'Max';\nvar SUM = 'Sum';\nvar DISTINCTCOUNT = 'DistinctCount';\nvar PRODUCT = 'Product';\nvar STDEV = 'SampleStDev';\nvar STDEVP = 'PopulationStDev';\nvar VAR = 'SampleVar';\nvar VARP = 'PopulationVar';\nvar CALC = 'CalculatedField';\nvar AGRTYPE = 'AggregateType';\n/** @hidden */\nvar CalculatedField = /** @class */ (function () {\n    /** Constructor for calculatedfield module */\n    function CalculatedField(parent) {\n        this.parent = parent;\n        this.existingReport = null;\n        this.parent.calculatedFieldModule = this;\n        this.removeEventListener();\n        this.addEventListener();\n        this.parentID = this.parent.element.id;\n        this.dialog = null;\n        this.inputObj = null;\n        this.treeObj = null;\n        this.droppable = null;\n        this.menuObj = null;\n        this.newFields = null;\n        this.isFieldExist = true;\n        this.formulaText = null;\n        this.fieldText = null;\n        this.isEdit = false;\n        this.currentFieldName = null;\n        this.confirmPopUp = null;\n    }\n    /**\n     * To get module name.\n     * @returns string\n     */\n    CalculatedField.prototype.getModuleName = function () {\n        return 'calculatedfield';\n    };\n    CalculatedField.prototype.keyActionHandler = function (e) {\n        var node = e.currentTarget.querySelector('.e-hover.e-node-focus');\n        if (node) {\n            switch (e.action) {\n                case 'moveRight':\n                    this.displayMenu(node.previousSibling);\n                    break;\n                case 'enter':\n                    var field = node.getAttribute('data-field');\n                    var type = node.getAttribute('data-type');\n                    var dropField = this.dialog.element.querySelector('#' + this.parentID + 'droppable');\n                    if (dropField.value === '') {\n                        if (type === CALC) {\n                            dropField.value = node.getAttribute('data-uid');\n                        }\n                        else {\n                            dropField.value = '\"' + type + '(' + field + ')' + '\"';\n                        }\n                    }\n                    else if (dropField.value !== '') {\n                        if (type === CALC) {\n                            dropField.value = dropField.value + node.getAttribute('data-uid');\n                        }\n                        else {\n                            dropField.value = dropField.value + '\"' + type + '(' + field + ')' + '\"';\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Trigger while click treeview icon.\n     * @param  {MouseEvent} e\n     * @returns void\n     */\n    CalculatedField.prototype.fieldClickHandler = function (e) {\n        var node = e.event.target.parentElement;\n        if (e.event.target.classList.contains(cls.FORMAT) ||\n            e.event.target.classList.contains(cls.CALC_EDIT) ||\n            e.event.target.classList.contains(cls.CALC_EDITED)) {\n            this.displayMenu(node.parentElement);\n        }\n    };\n    /**\n     * To display context menu.\n     * @param  {HTMLElement} node\n     * @returns void\n     */\n    CalculatedField.prototype.displayMenu = function (node) {\n        if (document.querySelector('.' + this.parentID + 'calculatedmenu') !== null &&\n            node.querySelector('.e-list-icon').classList.contains(cls.ICON) &&\n            !node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDITED) &&\n            !node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDIT) && node.tagName === 'LI') {\n            this.menuObj.close();\n            this.curMenu = node.querySelector('.' + cls.LIST_TEXT_CLASS);\n            this.openContextMenu();\n        }\n        else if (node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDIT) && node.tagName === 'LI') {\n            addClass([node.querySelector('.e-list-icon')], cls.CALC_EDITED);\n            removeClass([node.querySelector('.e-list-icon')], cls.CALC_EDIT);\n            node.querySelector('.' + cls.CALC_EDITED).setAttribute('title', this.parent.localeObj.getConstant('clear'));\n            this.isEdit = true;\n            this.currentFieldName = node.getAttribute('data-field');\n            this.inputObj.value = node.getAttribute('data-caption');\n            this.dialog.element.querySelector('.' + cls.CALCINPUT).value = node.getAttribute('data-caption');\n            document.querySelector('#' + this.parentID + 'droppable').value = node.getAttribute('data-uid');\n        }\n        else if (node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDITED) && node.tagName === 'LI') {\n            addClass([node.querySelector('.e-list-icon')], cls.CALC_EDIT);\n            removeClass([node.querySelector('.e-list-icon')], cls.CALC_EDITED);\n            node.querySelector('.' + cls.CALC_EDIT).setAttribute('title', this.parent.localeObj.getConstant('edit'));\n            this.isEdit = false;\n            this.inputObj.value = '';\n            this.dialog.element.querySelector('.' + cls.CALCINPUT).value = '';\n            document.querySelector('#' + this.parentID + 'droppable').value = '';\n        }\n    };\n    /**\n     * To set position for context menu.\n     * @returns void\n     */\n    CalculatedField.prototype.openContextMenu = function () {\n        var pos = this.curMenu.getBoundingClientRect();\n        if (this.parent.enableRtl) {\n            this.menuObj.open(pos.top + 30, pos.left - 100);\n        }\n        else {\n            this.menuObj.open(pos.top + 30, pos.left + 150);\n        }\n    };\n    /**\n     * Triggers while select menu.\n     * @param  {MenuEventArgs} menu\n     * @returns void\n     */\n    CalculatedField.prototype.selectContextMenu = function (menu) {\n        if (menu.element.textContent !== null) {\n            var field = closest(this.curMenu, '.e-list-item').getAttribute('data-caption');\n            closest(this.curMenu, '.e-list-item').setAttribute('data-type', menu.element.textContent);\n            this.curMenu.textContent = field + ' (' + menu.element.textContent + ')';\n            addClass([this.curMenu.parentElement.parentElement], ['e-node-focus', 'e-hover']);\n            this.curMenu.parentElement.parentElement.setAttribute('tabindex', '-1');\n            this.curMenu.parentElement.parentElement.focus();\n        }\n    };\n    /**\n     * To create context menu.\n     * @returns void\n     */\n    CalculatedField.prototype.createMenu = function () {\n        var menuItems = [\n            { text: COUNT, },\n            { text: AVG },\n            { text: MIN },\n            { text: MAX },\n            { text: SUM },\n            { text: DISTINCTCOUNT, },\n            { text: PRODUCT },\n            { text: STDEV },\n            { text: STDEVP },\n            { text: VAR },\n            { text: VARP }\n        ];\n        var menuOptions = {\n            cssClass: this.parentID + 'calculatedmenu',\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.beforeMenuOpen.bind(this),\n            select: this.selectContextMenu.bind(this)\n        };\n        this.parent.element.appendChild(createElement('ul', {\n            id: this.parentID + 'contextmenu'\n        }));\n        this.menuObj = new Menu(menuOptions);\n        this.menuObj.appendTo('#' + this.parentID + 'contextmenu');\n    };\n    /**\n     * Triggers while click OK button.\n     * @returns void\n     */\n    CalculatedField.prototype.applyFormula = function () {\n        var currentObj = this;\n        var isExist = false;\n        removeClass([document.getElementById(this.parentID + 'ddlelement')], cls.EMPTY_FIELD);\n        Object.keys(currentObj.parent.engineModule.fieldList).forEach(function (key, index) {\n            if (currentObj.inputObj.value && currentObj.inputObj.value === key &&\n                currentObj.parent.engineModule.fieldList[key].aggregateType !== 'CalculatedField') {\n                isExist = true;\n            }\n        });\n        if (isExist) {\n            currentObj.parent.pivotCommon.errorDialog.createErrorDialog(currentObj.parent.localeObj.getConstant('error'), currentObj.parent.localeObj.getConstant('fieldExist'));\n            return;\n        }\n        this.newFields = extend([], this.parent.dataSource.calculatedFieldSettings, null, true);\n        this.existingReport = extend({}, this.parent.dataSource, null, true);\n        var report = this.parent.dataSource;\n        var dropField = document.querySelector('#' + this.parentID + 'droppable');\n        if (this.inputObj.value !== null && this.inputObj.value !== '' && dropField.value !== '') {\n            var field = {\n                name: this.inputObj.value,\n                type: 'CalculatedField'\n            };\n            var cField = {\n                name: this.inputObj.value,\n                formula: dropField.value\n            };\n            this.isFieldExist = true;\n            if (!this.isEdit) {\n                for (var i = 0; i < report.values.length; i++) {\n                    if (report.values[i].type === CALC && report.values[i].name === field.name) {\n                        for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                            if (report.calculatedFieldSettings[j].name === field.name) {\n                                this.createConfirmDialog(currentObj.parent.localeObj.getConstant('alert'), currentObj.parent.localeObj.getConstant('confirmText'));\n                                return;\n                            }\n                        }\n                        this.isFieldExist = false;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < report.values.length; i++) {\n                    if (report.values[i].type === CALC && this.currentFieldName !== null &&\n                        report.values[i].name === this.currentFieldName && this.isEdit) {\n                        for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                            if (report.calculatedFieldSettings[j].name === this.currentFieldName) {\n                                report.values[i].caption = this.inputObj.value;\n                                report.calculatedFieldSettings[j].formula = dropField.value;\n                                this.parent.engineModule.fieldList[this.currentFieldName].caption = this.inputObj.value;\n                                this.isFieldExist = false;\n                            }\n                        }\n                    }\n                }\n            }\n            if (this.isFieldExist) {\n                report.values.push(field);\n                report.calculatedFieldSettings.push(cField);\n            }\n            this.addFormula(report, field.name);\n        }\n        else {\n            if (this.inputObj.value === null || this.inputObj.value === '') {\n                addClass([document.getElementById(this.parentID + 'ddlelement')], cls.EMPTY_FIELD);\n                document.getElementById(this.parentID + 'ddlelement').focus();\n            }\n            else {\n                this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant('error'), this.parent.localeObj.getConstant('invalidFormula'));\n            }\n        }\n    };\n    CalculatedField.prototype.addFormula = function (report, field) {\n        try {\n            this.parent.setProperties({ dataSource: report }, true);\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.allowDeferLayoutUpdate) {\n                this.parent.isRequiredUpdate = false;\n            }\n            this.parent.updateDataSource(false);\n            this.isEdit = false;\n            if (this.dialog) {\n                this.dialog.close();\n            }\n            else {\n                this.inputObj.value = '';\n                this.formulaText = null;\n                this.fieldText = null;\n                this.parent.\n                    dialogRenderer.parentElement.querySelector('.' + cls.CALCINPUT).value = '';\n                this.parent.\n                    dialogRenderer.parentElement.querySelector('#' + this.parentID + 'droppable').value = '';\n            }\n        }\n        catch (exception) {\n            if (this.parent.engineModule.fieldList[field]) {\n                delete this.parent.engineModule.fieldList[field];\n            }\n            this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant('error'), this.parent.localeObj.getConstant('invalidFormula'));\n            this.parent.setProperties({ dataSource: this.existingReport }, true);\n            this.parent.updateDataSource(false);\n        }\n    };\n    /**\n     * To get treeview data\n     * @param  {PivotGrid|PivotFieldList} parent\n     * @returns Object\n     */\n    CalculatedField.prototype.getFieldListData = function (parent) {\n        var fields = [];\n        Object.keys(parent.engineModule.fieldList).forEach(function (key) {\n            var type = null;\n            if (parent.engineModule.fieldList[key].type === 'string' || parent.engineModule.fieldList[key].type === 'include' ||\n                parent.engineModule.fieldList[key].type === 'exclude') {\n                type = COUNT;\n            }\n            else {\n                type = parent.engineModule.fieldList[key].aggregateType !== undefined ?\n                    parent.engineModule.fieldList[key].aggregateType : SUM;\n            }\n            fields.push({\n                index: parent.engineModule.fieldList[key].index,\n                name: parent.engineModule.fieldList[key].caption + ' (' + type + ')',\n                type: type,\n                icon: cls.FORMAT + ' ' + cls.ICON,\n                formula: parent.engineModule.fieldList[key].formula,\n                field: key,\n                caption: parent.engineModule.fieldList[key].caption ? parent.engineModule.fieldList[key].caption : key\n            });\n        });\n        return fields;\n    };\n    /**\n     * Triggers before menu opens.\n     * @param  {BeforeOpenCloseMenuEventArgs} args\n     * @returns void\n     */\n    CalculatedField.prototype.beforeMenuOpen = function (args) {\n        args.element.style.zIndex = (this.dialog.zIndex + 1).toString();\n        args.element.style.display = 'inline';\n    };\n    /**\n     * Trigger while drop node in formula field.\n     * @param  {DragAndDropEventArgs} args\n     * @returns void\n     */\n    CalculatedField.prototype.fieldDropped = function (args) {\n        args.cancel = true;\n        var field = args.draggedNode.getAttribute('data-field');\n        var type = args.draggedNode.getAttribute('data-type');\n        var dropField = this.dialog.element.querySelector('#' + this.parentID + 'droppable');\n        if (args.target.id === this.parentID + 'droppable' && dropField.value === '') {\n            if (type === CALC) {\n                dropField.value = args.draggedNodeData.id.toString();\n            }\n            else {\n                dropField.value = '\"' + type + '(' + field + ')' + '\"';\n            }\n            dropField.focus();\n        }\n        else if (args.target.id === (this.parentID + 'droppable') && dropField.value !== '') {\n            var textCovered = void 0;\n            var cursorPos = dropField.selectionStart;\n            var currentValue = dropField.value;\n            var textBeforeText = currentValue.substring(0, cursorPos);\n            var textAfterText = currentValue.substring(cursorPos, currentValue.length);\n            if (type === CALC) {\n                textCovered = textBeforeText + args.draggedNodeData.id.toString();\n                dropField.value = textBeforeText + args.draggedNodeData.id.toString() + textAfterText;\n            }\n            else {\n                textCovered = textBeforeText + '\"' + type + '(' + field + ')' + '\"';\n                dropField.value = textBeforeText + '\"' + type + '(' + field + ')' + '\"' + textAfterText;\n            }\n            dropField.focus();\n            dropField.setSelectionRange(textCovered.length, textCovered.length);\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    /**\n     * To create dialog.\n     * @returns void\n     */\n    CalculatedField.prototype.createDialog = function () {\n        if (document.querySelector('#' + this.parentID + 'calculateddialog') !== null) {\n            remove(document.querySelector('#' + this.parentID + 'calculateddialog'));\n        }\n        this.parent.element.appendChild(createElement('div', {\n            id: this.parentID + 'calculateddialog',\n            className: cls.CALCDIALOG\n        }));\n        this.dialog = new Dialog({\n            allowDragging: true,\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.applyFormula.bind(this),\n                    buttonModel: {\n                        content: this.parent.localeObj.getConstant('ok'),\n                        isPrimary: true\n                    }\n                },\n                {\n                    click: this.cancelClick.bind(this),\n                    buttonModel: {\n                        content: this.parent.localeObj.getConstant('cancel')\n                    }\n                }\n            ],\n            close: this.closeDialog.bind(this),\n            beforeOpen: this.beforeOpen.bind(this),\n            animationSettings: { effect: 'Zoom' },\n            width: '25%',\n            isModal: false,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            showCloseIcon: true,\n            header: this.parent.localeObj.getConstant('createCalculatedField'),\n            target: document.body\n        });\n        this.dialog.appendTo('#' + this.parentID + 'calculateddialog');\n    };\n    CalculatedField.prototype.cancelClick = function () {\n        this.dialog.close();\n        this.isEdit = false;\n    };\n    CalculatedField.prototype.beforeOpen = function (args) {\n        this.dialog.element.querySelector('.e-dlg-header').\n            setAttribute('title', this.parent.localeObj.getConstant('createCalculatedField'));\n    };\n    CalculatedField.prototype.closeDialog = function (args) {\n        if (this.parent.getModuleName() === 'pivotfieldlist') {\n            this.parent.axisFieldModule.render();\n            if (this.parent.renderMode !== 'Fixed') {\n                addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n                this.parent.dialogRenderer.fieldListDialog.show();\n            }\n        }\n        this.treeObj.destroy();\n        this.dialog.destroy();\n        this.newFields = null;\n        remove(document.getElementById(this.parentID + 'calculateddialog'));\n        remove(document.querySelector('.' + this.parentID + 'calculatedmenu'));\n    };\n    /**\n     * To render dialog elements.\n     * @returns void\n     */\n    CalculatedField.prototype.renderDialogElements = function () {\n        var outerDiv = createElement('div', { id: this.parentID + 'outerDiv', className: cls.CALCOUTERDIV });\n        if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.\n            dialogRenderer.parentElement.querySelector('.' + cls.FORMULA) !== null && this.parent.isAdaptive) {\n            var accordDiv = createElement('div', { id: this.parentID + 'accordDiv', className: cls.CALCACCORD });\n            outerDiv.appendChild(accordDiv);\n            var buttonDiv = createElement('div', { id: this.parentID + 'buttonDiv', className: cls.CALCBUTTONDIV });\n            var addBtn = createElement('button', {\n                id: this.parentID + 'addBtn', innerHTML: this.parent.localeObj.getConstant('add'),\n                className: cls.CALCADDBTN\n            });\n            var cancelBtn = createElement('button', {\n                id: this.parentID + 'cancelBtn', innerHTML: this.parent.localeObj.getConstant('cancel'),\n                className: cls.CALCCANCELBTN\n            });\n            buttonDiv.appendChild(cancelBtn);\n            buttonDiv.appendChild(addBtn);\n            outerDiv.appendChild(buttonDiv);\n        }\n        else {\n            var inputDiv = createElement('div', { id: this.parentID + 'outerDiv', className: cls.CALCINPUTDIV });\n            var inputObj = createElement('input', {\n                id: this.parentID + 'ddlelement',\n                attrs: { 'type': 'text', 'tabindex': '1' },\n                className: cls.CALCINPUT\n            });\n            inputDiv.appendChild(inputObj);\n            outerDiv.appendChild(inputDiv);\n            if (!this.parent.isAdaptive) {\n                var fieldTitle = createElement('div', {\n                    className: cls.PIVOT_ALL_FIELD_TITLE_CLASS,\n                    innerHTML: this.parent.localeObj.getConstant('formulaField')\n                });\n                outerDiv.appendChild(fieldTitle);\n            }\n            var wrapDiv = createElement('div', { id: this.parentID + 'control_wrapper', className: cls.TREEVIEWOUTER });\n            wrapDiv.appendChild(createElement('div', { id: this.parentID + 'tree', className: cls.TREEVIEW }));\n            outerDiv.appendChild(wrapDiv);\n            if (!this.parent.isAdaptive) {\n                var formulaTitle = createElement('div', {\n                    className: cls.PIVOT_FORMULA_TITLE_CLASS,\n                    innerHTML: this.parent.localeObj.getConstant('formula')\n                });\n                outerDiv.appendChild(formulaTitle);\n            }\n            var dropDiv = createElement('textarea', {\n                id: this.parentID + 'droppable',\n                className: cls.FORMULA,\n                attrs: {\n                    'placeholder': this.parent.isAdaptive ? this.parent.localeObj.getConstant('dropTextMobile') :\n                        this.parent.localeObj.getConstant('dropText')\n                }\n            });\n            outerDiv.appendChild(dropDiv);\n            if (this.parent.isAdaptive) {\n                var buttonDiv = createElement('div', { id: this.parentID + 'buttonDiv', className: cls.CALCBUTTONDIV });\n                var okBtn = createElement('button', {\n                    id: this.parentID + 'okBtn', innerHTML: this.parent.localeObj.getConstant('apply'),\n                    className: cls.CALCOKBTN\n                });\n                buttonDiv.appendChild(okBtn);\n                outerDiv.appendChild(buttonDiv);\n            }\n        }\n        return outerDiv;\n    };\n    /**\n     * To create calculated field adaptive layout.\n     * @returns void\n     */\n    CalculatedField.prototype.renderAdaptiveLayout = function () {\n        if (document.querySelector('#' + this.parentID + 'droppable')) {\n            this.formulaText = document.querySelector('#' + this.parentID + 'droppable').value;\n            this.fieldText = this.inputObj.value;\n        }\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * To create treeview.\n     * @returns void\n     */\n    CalculatedField.prototype.createTreeView = function () {\n        this.treeObj = new TreeView({\n            fields: { dataSource: this.getFieldListData(this.parent), id: 'formula', text: 'name', iconCss: 'icon' },\n            allowDragAndDrop: true,\n            enableRtl: this.parent.enableRtl,\n            nodeCollapsing: this.nodeCollapsing.bind(this),\n            nodeDragStart: this.dragStart.bind(this),\n            nodeClicked: this.fieldClickHandler.bind(this),\n            nodeDragStop: this.fieldDropped.bind(this),\n            drawNode: this.drawTreeNode.bind(this),\n            sortOrder: 'Ascending'\n        });\n        this.treeObj.appendTo('#' + this.parentID + 'tree');\n    };\n    CalculatedField.prototype.nodeCollapsing = function (args) {\n        args.cancel = true;\n    };\n    CalculatedField.prototype.dragStart = function (args) {\n        if (args.event.target.classList.contains(cls.DRAG_CLASS)) {\n            var dragItem = document.querySelector('.e-drag-item.e-treeview');\n            addClass([dragItem], cls.PIVOTCALC);\n            dragItem.style.zIndex = (this.dialog.zIndex + 1).toString();\n            dragItem.style.display = 'inline';\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    /**\n     * Trigger before treeview text append.\n     * @param  {DrawNodeEventArgs} args\n     * @returns void\n     */\n    CalculatedField.prototype.drawTreeNode = function (args) {\n        var field = args.nodeData.field;\n        args.node.setAttribute('data-field', field);\n        args.node.setAttribute('data-caption', args.nodeData.caption);\n        args.node.setAttribute('data-type', args.nodeData.type);\n        var dragElement = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false', 'title': this.parent.localeObj.getConstant('dragField') },\n            className: cls.ICON + ' e-drag'\n        });\n        prepend([dragElement], args.node.querySelector('.' + cls.TEXT_CONTENT_CLASS));\n        append([args.node.querySelector('.' + cls.FORMAT)], args.node.querySelector('.' + cls.TEXT_CONTENT_CLASS));\n        if (this.parent.engineModule.fieldList[field].type !== 'number' &&\n            this.parent.engineModule.fieldList[field].aggregateType !== CALC) {\n            removeClass([args.node.querySelector('.' + cls.FORMAT)], cls.ICON);\n        }\n        else {\n            args.node.querySelector('.' + cls.FORMAT).setAttribute('title', this.parent.localeObj.getConstant('format'));\n        }\n        if (this.parent.engineModule.fieldList[field].aggregateType === CALC) {\n            args.node.querySelector('.' + cls.FORMAT).setAttribute('title', this.parent.localeObj.getConstant('edit'));\n            addClass([args.node.querySelector('.' + cls.FORMAT)], cls.CALC_EDIT);\n            removeClass([args.node.querySelector('.' + cls.FORMAT)], cls.FORMAT);\n        }\n    };\n    /**\n     * To create radio buttons.\n     * @param  {string} key\n     * @returns HTMLElement\n     */\n    CalculatedField.prototype.createTypeContainer = function (key) {\n        var wrapDiv = createElement('div', { id: this.parentID + 'control_wrapper', className: cls.TREEVIEWOUTER });\n        var type = [SUM, COUNT, AVG, MIN, MAX, DISTINCTCOUNT, PRODUCT, STDEV, STDEVP, VAR, VARP];\n        for (var i = 0; i < type.length; i++) {\n            var input = createElement('input', {\n                id: this.parentID + 'radio' + key + type[i],\n                attrs: { 'type': 'radio', 'data-ftxt': key },\n                className: cls.CALCRADIO\n            });\n            wrapDiv.appendChild(input);\n        }\n        return wrapDiv;\n    };\n    /**\n     * To get Accordion Data.\n     * @param  {PivotView | PivotFieldList} parent\n     * @returns AccordionItemModel\n     */\n    CalculatedField.prototype.getAccordionData = function (parent) {\n        var _this = this;\n        var data = [];\n        Object.keys(parent.engineModule.fieldList).forEach(function (key, index) {\n            data.push({\n                header: '<input id=' + _this.parentID + '_' + index + ' class=' + cls.CALCCHECK + ' type=\"checkbox\" data-field=' +\n                    key + ' data-caption=' + _this.parent.engineModule.fieldList[key].caption + ' data-type=' +\n                    _this.parent.engineModule.fieldList[key].type + '/>',\n                content: parent.engineModule.fieldList[key].aggregateType === CALC ||\n                    _this.parent.engineModule.fieldList[key].type !== 'number' ? '' : _this.createTypeContainer(key).outerHTML\n            });\n        });\n        return data;\n    };\n    /**\n     * To render mobile layout.\n     * @param  {Tab} tabObj\n     * @returns void\n     */\n    CalculatedField.prototype.renderMobileLayout = function (tabObj) {\n        tabObj.items[4].content = this.renderDialogElements().outerHTML;\n        tabObj.dataBind();\n        var cancelBtn = new Button({ cssClass: cls.FLAT, isPrimary: true });\n        cancelBtn.appendTo('#' + this.parentID + 'cancelBtn');\n        if (cancelBtn.element) {\n            cancelBtn.element.onclick = this.cancelBtnClick.bind(this);\n        }\n        if (this.parent.\n            dialogRenderer.parentElement.querySelector('.' + cls.FORMULA) !== null && this.parent.isAdaptive) {\n            var okBtn = new Button({ cssClass: cls.FLAT + ' ' + cls.OUTLINE_CLASS, isPrimary: true });\n            okBtn.appendTo('#' + this.parentID + 'okBtn');\n            this.inputObj = new MaskedTextBox({\n                placeholder: this.parent.localeObj.getConstant('fieldName')\n            });\n            this.inputObj.appendTo('#' + this.parentID + 'ddlelement');\n            if (this.formulaText !== null && this.parent.\n                dialogRenderer.parentElement.querySelector('#' + this.parentID + 'droppable') !== null) {\n                var drop = this.parent.\n                    dialogRenderer.parentElement.querySelector('#' + this.parentID + 'droppable');\n                drop.value = this.formulaText;\n            }\n            if (this.fieldText !== null && this.parent.\n                dialogRenderer.parentElement.querySelector('.' + cls.CALCINPUT) !== null) {\n                this.parent.\n                    dialogRenderer.parentElement.querySelector('.' + cls.CALCINPUT).value = this.fieldText;\n                this.inputObj.value = this.fieldText;\n            }\n            if (okBtn.element) {\n                okBtn.element.onclick = this.applyFormula.bind(this);\n            }\n        }\n        else if (this.parent.isAdaptive) {\n            var accordion = new Accordion({\n                items: this.getAccordionData(this.parent),\n                enableRtl: this.parent.enableRtl,\n                expanding: this.accordionExpand.bind(this),\n            });\n            var addBtn = new Button({ cssClass: cls.FLAT, isPrimary: true });\n            addBtn.appendTo('#' + this.parentID + 'addBtn');\n            accordion.appendTo('#' + this.parentID + 'accordDiv');\n            Object.keys(this.parent.engineModule.fieldList).forEach(this.updateType.bind(this));\n            if (addBtn.element) {\n                addBtn.element.onclick = this.addBtnClick.bind(this);\n            }\n        }\n    };\n    CalculatedField.prototype.accordionExpand = function (args) {\n        var _this = this;\n        if (args.element.querySelectorAll('.e-radio-wrapper').length === 0) {\n            Object.keys(this.parent.engineModule.fieldList).forEach(function (key) {\n                var type = [SUM, COUNT, AVG, MIN, MAX, DISTINCTCOUNT, PRODUCT, STDEV, STDEVP, VAR, VARP];\n                var radiobutton;\n                if (key === args.element.querySelector('[data-field').getAttribute('data-field')) {\n                    for (var i = 0; i < type.length; i++) {\n                        radiobutton = new RadioButton({\n                            label: type[i],\n                            name: AGRTYPE + key,\n                            change: _this.onChange.bind(_this),\n                        });\n                        radiobutton.appendTo('#' + _this.parentID + 'radio' + key + type[i]);\n                    }\n                }\n            });\n        }\n    };\n    CalculatedField.prototype.onChange = function (args) {\n        var type = args.event.target.parentElement.querySelector('.e-label').\n            innerText;\n        var field = args.event.target.closest('.e-acrdn-item').\n            querySelector('[data-field').getAttribute('data-caption');\n        args.event.target.\n            closest('.e-acrdn-item').querySelector('.e-label').\n            innerText = field + ' (' + type + ')';\n        args.event.target.closest('.e-acrdn-item').\n            querySelector('[data-type').setAttribute('data-type', type);\n    };\n    CalculatedField.prototype.updateType = function (key, index) {\n        var type = null;\n        if (this.parent.engineModule.fieldList[key].type === 'string' ||\n            this.parent.engineModule.fieldList[key].type === 'include' ||\n            this.parent.engineModule.fieldList[key].type === 'exclude') {\n            type = COUNT;\n        }\n        else {\n            type = this.parent.engineModule.fieldList[key].aggregateType !== undefined ?\n                this.parent.engineModule.fieldList[key].aggregateType : SUM;\n        }\n        var checkbox = new CheckBox({\n            label: this.parent.engineModule.fieldList[key].caption + ' (' + type + ')'\n        });\n        checkbox.appendTo('#' + this.parentID + '_' + index);\n        document.querySelector('#' + this.parentID + '_' + index).setAttribute('data-field', key);\n        document.querySelector('#' + this.parentID + '_' + index).setAttribute('data-type', type);\n    };\n    /**\n     * Trigger while click cancel button.\n     * @returns void\n     */\n    CalculatedField.prototype.cancelBtnClick = function () {\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * Trigger while click add button.\n     * @returns void\n     */\n    CalculatedField.prototype.addBtnClick = function () {\n        var node = document.querySelectorAll('.e-accordion .e-check');\n        var fieldText = '';\n        var field = null;\n        var type = null;\n        for (var i = 0; i < node.length; i++) {\n            field = node[i].parentElement.querySelector('[data-field]').getAttribute('data-field');\n            type = node[i].parentElement.querySelector('[data-field]').getAttribute('data-type');\n            if (type.indexOf(CALC) === -1) {\n                fieldText = fieldText + ('\"' + type + '(' + field + ')' + '\"');\n            }\n            else {\n                for (var j = 0; j < this.parent.dataSource.calculatedFieldSettings.length; j++) {\n                    if (this.parent.dataSource.calculatedFieldSettings[j].name === field) {\n                        fieldText = fieldText + this.parent.dataSource.calculatedFieldSettings[j].formula;\n                        break;\n                    }\n                }\n            }\n        }\n        this.formulaText = this.formulaText !== null ? (this.formulaText + fieldText) : fieldText;\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * To create calculated field dialog elements.\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.createCalculatedFieldDialog = function () {\n        if (this.parent.isAdaptive && this.parent.getModuleName() === 'pivotfieldlist') {\n            this.renderAdaptiveLayout();\n        }\n        else if (!this.parent.isAdaptive) {\n            this.renderDialogLayout();\n            this.dialog.element.style.top = parseInt(this.dialog.element.style.top, 10) < 0 ? '0px' : this.dialog.element.style.top;\n        }\n    };\n    /**\n     * To create calculated field desktop layout.\n     * @returns void\n     */\n    CalculatedField.prototype.renderDialogLayout = function () {\n        this.newFields = extend([], this.parent.dataSource.calculatedFieldSettings, null, true);\n        this.createDialog();\n        this.dialog.content = this.renderDialogElements();\n        this.dialog.refresh();\n        this.inputObj = new MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('fieldName')\n        });\n        this.inputObj.appendTo('#' + this.parentID + 'ddlelement');\n        this.createTreeView();\n        this.createMenu();\n        this.droppable = new Droppable(this.dialog.element.querySelector('#' + this.parentID + 'droppable'));\n        this.keyboardEvents = new KeyboardEvents(this.parent.calculatedFieldModule.dialog.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: { moveRight: 'rightarrow', enter: 'enter' },\n            eventName: 'keydown'\n        });\n    };\n    /**\n     * Creates the error dialog for the unexpected action done.\n     * @method createConfirmDialog\n     * @return {void}\n     * @hidden\n     */\n    CalculatedField.prototype.createConfirmDialog = function (title, description) {\n        var errorDialog = createElement('div', {\n            id: this.parentID + '_ErrorDialog',\n            className: cls.ERROR_DIALOG_CLASS\n        });\n        this.parent.element.appendChild(errorDialog);\n        this.confirmPopUp = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.replaceFormula.bind(this),\n                    buttonModel: {\n                        cssClass: cls.OK_BUTTON_CLASS + ' ' + cls.OUTLINE_CLASS,\n                        content: this.parent.localeObj.getConstant('ok'), isPrimary: true\n                    }\n                },\n                {\n                    click: this.removeErrorDialog.bind(this),\n                    buttonModel: {\n                        cssClass: cls.CANCEL_BUTTON_CLASS,\n                        content: this.parent.localeObj.getConstant('cancel'), isPrimary: true\n                    }\n                }\n            ],\n            header: title,\n            content: description,\n            isModal: true,\n            visible: true,\n            closeOnEscape: true,\n            target: document.body,\n            close: this.removeErrorDialog.bind(this)\n        });\n        this.confirmPopUp.appendTo(errorDialog);\n    };\n    CalculatedField.prototype.replaceFormula = function () {\n        var report = this.parent.dataSource;\n        var dropField = document.querySelector('#' + this.parentID + 'droppable');\n        for (var i = 0; i < report.values.length; i++) {\n            if (report.values[i].type === CALC && report.values[i].name === this.inputObj.value) {\n                for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                    if (report.calculatedFieldSettings[j].name === this.inputObj.value) {\n                        report.calculatedFieldSettings[j].formula = dropField.value;\n                    }\n                }\n            }\n        }\n        this.addFormula(report, this.inputObj.value);\n        this.removeErrorDialog();\n    };\n    CalculatedField.prototype.removeErrorDialog = function () {\n        if (document.getElementById(this.parentID + '_ErrorDialog')) {\n            remove(document.getElementById(this.parentID + '_ErrorDialog').parentElement);\n        }\n    };\n    /**\n     * To add event listener.\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initCalculatedField, this.createCalculatedFieldDialog, this);\n    };\n    /**\n     * To remove event listener.\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initCalculatedField, this.createCalculatedFieldDialog);\n    };\n    /**\n     * To destroy the calculated field dialog\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return CalculatedField;\n}());\nexport { CalculatedField };\n","import * as events from '../../common/base/constant';\nimport * as cls from '../base/css-constant';\nimport { PivotFieldList } from '../../pivotfieldlist/base/field-list';\nimport { createElement, setStyleAttribute, formatUnit, prepend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { CalculatedField } from '../../common/calculatedfield/calculated-field';\nPivotFieldList.Inject(CalculatedField);\n/**\n * Module for Field List rendering\n */\n/** @hidden */\nvar FieldList = /** @class */ (function () {\n    /** Constructor for Field List module */\n    function FieldList(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    FieldList.prototype.getModuleName = function () {\n        return 'fieldlist';\n    };\n    FieldList.prototype.initiateModule = function () {\n        this.element = createElement('div', {\n            id: this.parent.element.id + '_PivotFieldList',\n            styles: 'position:' + (this.parent.enableRtl ? 'static' : 'absolute') + ';height:0;width:' + this.parent.element.style.width\n        });\n        this.parent.element.parentElement.setAttribute('id', 'ContainerWrapper');\n        this.parent.element.parentElement.appendChild(this.element);\n        this.parent.element.parentElement.appendChild(this.parent.element);\n        this.parent.pivotFieldListModule = new PivotFieldList({\n            dataSource: {\n                rows: [],\n                columns: [],\n                values: [],\n                filters: []\n            },\n            allowDeferLayoutUpdate: this.parent.allowDeferLayoutUpdate,\n            renderMode: 'Popup',\n            allowCalculatedField: this.parent.allowCalculatedField,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            target: this.parent.element.parentElement\n        });\n        this.parent.pivotFieldListModule.appendTo('#' + this.element.id);\n    };\n    FieldList.prototype.updateControl = function () {\n        if (this.element) {\n            prepend([this.element], this.parent.element);\n            if (this.parent.grid && this.parent.showGroupingBar && this.parent.groupingBarModule) {\n                clearTimeout(this.timeOutObj);\n                this.timeOutObj = setTimeout(this.update.bind(this));\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    removeClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n                }\n                else {\n                    addClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n                }\n            }\n            setStyleAttribute(this.element, {\n                width: formatUnit(this.parent.element.offsetWidth)\n            });\n        }\n        this.parent.pivotFieldListModule.update(this.parent);\n    };\n    FieldList.prototype.update = function () {\n        if (this.parent.grid && this.parent.grid.element) {\n            var actWidth = this.parent.grid.element.offsetWidth < 400 ? 400 : this.parent.grid.element.offsetWidth;\n            setStyleAttribute(this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS), {\n                left: formatUnit(this.parent.enableRtl ?\n                    -Math.abs((actWidth) -\n                        this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth) :\n                    (actWidth) -\n                        this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth)\n            });\n            if (this.parent.enableRtl) {\n                addClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n            }\n            else {\n                removeClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    FieldList.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.initiateModule,\n            update: this.updateControl\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initSubComponent, this.handlers.load, this);\n        this.parent.on(events.uiUpdate, this.handlers.update, this);\n    };\n    /**\n     * @hidden\n     */\n    FieldList.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initSubComponent, this.handlers.load);\n        this.parent.off(events.uiUpdate, this.handlers.update);\n    };\n    /**\n     * To destroy the Field List\n     * @return {void}\n     * @hidden\n     */\n    FieldList.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.parent.pivotFieldListModule) {\n            this.parent.pivotFieldListModule.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return FieldList;\n}());\nexport { FieldList };\n","import * as events from '../../common/base/constant';\nimport { PivotCommon } from '../../common/base/pivot-common';\nimport { Browser } from '@syncfusion/ej2-base';\n/**\n * Module for PivotCommon rendering\n */\n/** @hidden */\nvar Common = /** @class */ (function () {\n    /** Constructor for Common module */\n    function Common(parent) {\n        this.parent = parent;\n        this.parent.commonModule = this;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Common.prototype.getModuleName = function () {\n        return 'common';\n    };\n    Common.prototype.initiateCommonModule = function () {\n        if (!this.parent.pivotCommon) {\n            var args = {\n                pivotEngine: this.parent.engineModule,\n                dataSource: this.parent.dataSource.properties ?\n                    this.parent.dataSource.properties : this.parent.dataSource,\n                id: this.parent.element.id,\n                element: this.parent.element,\n                moduleName: this.parent.getModuleName(),\n                enableRtl: this.parent.enableRtl,\n                isAdaptive: Browser.isDevice,\n                renderMode: 'Popup',\n                localeObj: this.parent.localeObj\n            };\n            this.parent.pivotCommon = new PivotCommon(args);\n        }\n        else {\n            this.parent.pivotCommon.element = this.parent.element;\n            this.parent.pivotCommon.engineModule = this.parent.engineModule;\n            this.parent.pivotCommon.parentID = this.parent.element.id;\n            this.parent.pivotCommon.dataSource = this.parent.dataSource.properties ?\n                this.parent.dataSource.properties : this.parent.dataSource;\n            this.parent.pivotCommon.moduleName = this.parent.getModuleName();\n            this.parent.pivotCommon.enableRtl = this.parent.enableRtl;\n            this.parent.pivotCommon.isAdaptive = Browser.isDevice;\n            this.parent.pivotCommon.renderMode = 'Popup';\n            this.parent.pivotCommon.localeObj = this.parent.localeObj;\n        }\n        this.parent.pivotCommon.control = this.parent;\n    };\n    /**\n     * @hidden\n     */\n    Common.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.initiateCommonModule\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.handlers.load, this);\n    };\n    /**\n     * @hidden\n     */\n    Common.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.handlers.load);\n    };\n    /**\n     * To destroy the groupingbar\n     * @return {void}\n     * @hidden\n     */\n    Common.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.parent.pivotCommon) {\n            this.parent.pivotCommon.destroy();\n        }\n    };\n    return Common;\n}());\nexport { Common };\n","import { PivotButton } from '../actions/pivot-button';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { createElement, prepend } from '@syncfusion/ej2-base';\n/**\n * Module to render Axis Fields\n */\n/** @hidden */\nvar AxisFields = /** @class */ (function () {\n    /** Constructor for render module */\n    function AxisFields(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the pivot button rendering\n     * @returns void\n     * @private\n     */\n    AxisFields.prototype.render = function () {\n        this.pivotButton = new PivotButton(this.parent);\n        this.createPivotButtons();\n        var pivotButtons = [].slice.call(this.parent.element.querySelector('.' + cls.GROUP_ROW_CLASS)\n            .querySelectorAll('.' + cls.PIVOT_BUTTON_WRAPPER_CLASS));\n        var vlen = pivotButtons.length;\n        for (var j = 0; j < vlen; j++) {\n            var indentWidth = 24;\n            var indentDiv = createElement('span', {\n                className: 'e-indent-div',\n                styles: 'width:' + j * indentWidth + 'px'\n            });\n            prepend([indentDiv], pivotButtons[j]);\n        }\n    };\n    AxisFields.prototype.createPivotButtons = function () {\n        var fields = [this.parent.dataSource.rows, this.parent.dataSource.columns, this.parent.dataSource.values, this.parent.dataSource.filters];\n        this.parent.element.querySelector('.' + cls.GROUP_ROW_CLASS).innerHTML = '';\n        this.parent.element.querySelector('.' + cls.GROUP_COLUMN_CLASS).innerHTML = '';\n        this.parent.element.querySelector('.' + cls.GROUP_VALUE_CLASS).innerHTML = '';\n        this.parent.element.querySelector('.' + cls.GROUP_FILTER_CLASS).innerHTML = '';\n        var axis = ['rows', 'columns', 'values', 'filters'];\n        var count = axis.length;\n        for (var i = 0, lnt = fields.length; i < lnt; i++) {\n            if (fields[i]) {\n                var args = {\n                    field: fields[i],\n                    axis: axis[i].toString()\n                };\n                this.parent.notify(events.pivotButtonUpdate, args);\n            }\n        }\n    };\n    return AxisFields;\n}());\nexport { AxisFields };\n","import { createElement, prepend, remove, Droppable, setStyleAttribute, removeClass } from '@syncfusion/ej2-base';\nimport { EventHandler, Touch, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, formatUnit } from '@syncfusion/ej2-base';\nimport { PivotView } from '../../pivotview/base/pivotview';\nimport { Common } from '../actions/common';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { AxisFields } from './axis-field-renderer';\nPivotView.Inject(Common);\n/**\n * Module for GroupingBar rendering\n */\n/** @hidden */\nvar GroupingBar = /** @class */ (function () {\n    /** Constructor for GroupingBar module */\n    function GroupingBar(parent) {\n        this.parent = parent;\n        this.parent.groupingBarModule = this;\n        this.addEventListener();\n        this.parent.axisFieldModule = new AxisFields(this.parent);\n        this.touchObj = new Touch(this.parent.element, {\n            tapHold: this.tapHoldHandler.bind(this)\n        });\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    GroupingBar.prototype.getModuleName = function () {\n        return 'grouping';\n    };\n    GroupingBar.prototype.renderLayout = function () {\n        this.groupingTable = createElement('div', { className: cls.GROUPING_BAR_CLASS });\n        this.leftAxisPanel = createElement('div', { className: cls.LEFT_AXIS_PANEL_CLASS });\n        this.rightAxisPanel = createElement('div', { className: cls.RIGHT_AXIS_PANEL_CLASS });\n        var rowAxisPanel = createElement('div', { className: cls.AXIS_ROW_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper' });\n        var columnAxisPanel = createElement('div', {\n            className: cls.AXIS_COLUMN_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper'\n        });\n        var valueAxisPanel = createElement('div', {\n            className: cls.AXIS_VALUE_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper'\n        });\n        var filterAxisPanel = createElement('div', {\n            className: cls.AXIS_FILTER_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper'\n        });\n        this.rowPanel = createElement('div', { className: cls.GROUP_ROW_CLASS + ' ' + cls.ROW_AXIS_CLASS });\n        this.columnPanel = createElement('div', { className: cls.GROUP_COLUMN_CLASS + ' ' + cls.COLUMN_AXIS_CLASS });\n        this.valuePanel = createElement('div', { className: cls.GROUP_VALUE_CLASS + ' ' + cls.VALUE_AXIS_CLASS });\n        this.filterPanel = createElement('div', { className: cls.GROUP_FILTER_CLASS + ' ' + cls.FILTER_AXIS_CLASS });\n        rowAxisPanel.appendChild(this.rowPanel);\n        columnAxisPanel.appendChild(this.columnPanel);\n        valueAxisPanel.appendChild(this.valuePanel);\n        filterAxisPanel.appendChild(this.filterPanel);\n        this.rowAxisPanel = rowAxisPanel;\n        this.columnAxisPanel = columnAxisPanel;\n        this.valueAxisPanel = valueAxisPanel;\n        this.filterAxisPanel = filterAxisPanel;\n        this.leftAxisPanel.appendChild(valueAxisPanel);\n        this.leftAxisPanel.appendChild(rowAxisPanel);\n        this.rightAxisPanel.appendChild(filterAxisPanel);\n        this.rightAxisPanel.appendChild(columnAxisPanel);\n        this.groupingTable.appendChild(this.leftAxisPanel);\n        this.groupingTable.appendChild(this.rightAxisPanel);\n        var axisPanels = [this.rowPanel, this.columnPanel, this.valuePanel, this.filterPanel];\n        for (var _i = 0, axisPanels_1 = axisPanels; _i < axisPanels_1.length; _i++) {\n            var element = axisPanels_1[_i];\n            new Droppable(element, {});\n            this.unWireEvent(element);\n            this.wireEvent(element);\n        }\n    };\n    GroupingBar.prototype.appendToElement = function () {\n        if (this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n            remove(this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS));\n        }\n        if (this.parent.isAdaptive) {\n            this.leftAxisPanel.style.minWidth = '180px';\n            this.valuePanel.style.minWidth = '180px';\n        }\n        if (this.parent.firstColWidth) {\n            this.leftAxisPanel.style.minWidth = 'auto';\n            this.valuePanel.style.minWidth = 'auto';\n        }\n        this.filterPanel.removeAttribute('style');\n        this.columnPanel.removeAttribute('style');\n        this.rowPanel.removeAttribute('style');\n        this.filterPanel.removeAttribute('style');\n        var emptyRowCount = Object.keys(this.parent.engineModule.headerContent).length;\n        if (emptyRowCount) {\n            var emptyHeader = this.parent.element.querySelector('.e-frozenheader').querySelector('.e-columnheader');\n            addClass([emptyHeader], 'e-row');\n            emptyHeader.removeAttribute('style');\n            addClass([emptyHeader.querySelector('.e-headercell')], 'e-group-row');\n            emptyHeader.querySelector('.e-group-row').appendChild(this.rowAxisPanel);\n            emptyHeader.querySelector('.e-group-row').querySelector('.e-headercelldiv').style.display = 'none';\n            emptyHeader.querySelector('.e-group-row').querySelector('.e-sortfilterdiv').style.display = 'none';\n        }\n        prepend([this.groupingTable], this.parent.element);\n        setStyleAttribute(this.groupingTable, { width: formatUnit(this.parent.grid.width) });\n        this.groupingTable.style.minWidth = '400px';\n        this.parent.axisFieldModule.render();\n        this.setGridRowWidth();\n        var colGroupElement = this.parent.element.querySelector('.e-frozenheader').querySelector('colgroup').children[0];\n        var rightAxisPanelWidth = formatUnit(this.groupingTable.offsetWidth - parseInt(colGroupElement.style.width, 10));\n        setStyleAttribute(this.valuePanel, { width: colGroupElement.style.width });\n        setStyleAttribute(this.rightAxisPanel, { width: rightAxisPanelWidth });\n        var rightPanelHeight = (this.valuePanel.offsetHeight / 2);\n        if (rightPanelHeight > this.columnPanel.offsetHeight) {\n            setStyleAttribute(this.filterPanel, { height: formatUnit(rightPanelHeight) });\n            setStyleAttribute(this.columnPanel, { height: formatUnit(rightPanelHeight + 1) });\n        }\n        var topLeftHeight = this.parent.element.querySelector('.e-headercontent').offsetHeight;\n        setStyleAttribute(this.rowPanel, {\n            height: topLeftHeight + 'px'\n        });\n        if (this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler')) {\n            this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler').style.height =\n                topLeftHeight + 'px';\n        }\n        var colRows = [].slice.call(this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('tr'));\n        var columnRows = colRows.filter(function (trCell) {\n            return (trCell.childNodes.length > 0);\n        });\n        var colHeight = topLeftHeight / columnRows.length;\n        for (var _i = 0, columnRows_1 = columnRows; _i < columnRows_1.length; _i++) {\n            var element = columnRows_1[_i];\n            setStyleAttribute(element, { 'height': colHeight + 'px' });\n            var rowHeader = [].slice.call(element.querySelectorAll('.e-rhandler'));\n            for (var _a = 0, rowHeader_1 = rowHeader; _a < rowHeader_1.length; _a++) {\n                var rhElement = rowHeader_1[_a];\n                setStyleAttribute(rhElement, { 'height': colHeight + 'px' });\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.refreshUI = function () {\n        setStyleAttribute(this.groupingTable, { width: formatUnit(this.parent.grid.width) });\n        this.groupingTable.style.minWidth = '400px';\n        var colGroupElement = this.parent.element.querySelector('.e-frozenheader').querySelector('colgroup').children[0];\n        var rightAxisWidth = formatUnit(this.groupingTable.offsetWidth - parseInt(colGroupElement.style.width, 10));\n        setStyleAttribute(this.valuePanel, { width: colGroupElement.style.width });\n        setStyleAttribute(this.rightAxisPanel, { width: rightAxisWidth });\n        if (this.parent.showFieldList && this.parent.pivotFieldListModule && this.parent.pivotFieldListModule.element) {\n            clearTimeout(this.timeOutObj);\n            this.timeOutObj = setTimeout(this.alignIcon.bind(this));\n        }\n        if (!this.parent.grid.element.querySelector('.e-group-row')) {\n            var emptyRowHeader = this.parent.element.querySelector('.e-frozenheader').querySelector('.e-columnheader');\n            addClass([emptyRowHeader], 'e-row');\n            addClass([emptyRowHeader.querySelector('.e-headercell')], 'e-group-row');\n            emptyRowHeader.querySelector('.e-group-row').appendChild(this.rowAxisPanel);\n            setStyleAttribute(emptyRowHeader.querySelector('.e-group-row').querySelector('.e-headercelldiv'), {\n                display: 'none'\n            });\n            setStyleAttribute(emptyRowHeader.querySelector('.e-group-row').querySelector('.e-sortfilterdiv'), {\n                display: 'none'\n            });\n            var groupHeight = this.parent.element.querySelector('.e-headercontent').offsetHeight;\n            setStyleAttribute(this.rowPanel, {\n                height: groupHeight + 'px'\n            });\n            if (this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler')) {\n                this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler').style.height =\n                    groupHeight + 'px';\n            }\n            var colRowElements = [].slice.call(this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('tr'));\n            var columnRows = colRowElements.filter(function (trCell) {\n                return (trCell.childNodes.length > 0);\n            });\n            var colHeight = groupHeight / columnRows.length;\n            for (var _i = 0, columnRows_2 = columnRows; _i < columnRows_2.length; _i++) {\n                var element = columnRows_2[_i];\n                setStyleAttribute(element, { 'height': colHeight + 'px' });\n                var rowHeader = [].slice.call(element.querySelectorAll('.e-rhandler'));\n                for (var _a = 0, rowHeader_2 = rowHeader; _a < rowHeader_2.length; _a++) {\n                    var handlerElement = rowHeader_2[_a];\n                    setStyleAttribute(handlerElement, { 'height': colHeight + 'px' });\n                }\n            }\n        }\n    };\n    GroupingBar.prototype.alignIcon = function () {\n        var element = this.parent.pivotFieldListModule.element;\n        var actWidth = this.parent.grid.element.offsetWidth < 400 ? 400 : this.parent.grid.element.offsetWidth;\n        setStyleAttribute(element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS), {\n            left: formatUnit(this.parent.enableRtl ?\n                -Math.abs((actWidth) -\n                    element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth) :\n                (actWidth) -\n                    element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth)\n        });\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.setGridRowWidth = function () {\n        var colGroupElement = this.parent.element.querySelector('.e-frozenheader').querySelector('colgroup').children[0];\n        if (this.rowPanel.querySelector('.' + cls.PIVOT_BUTTON_CLASS)) {\n            if (!this.parent.isAdaptive) {\n                var pivotButtons = [].slice.call(this.rowPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_WRAPPER_CLASS));\n                var lastButton = pivotButtons[pivotButtons.length - 1];\n                var lastButtonWidth = (lastButton.querySelector('.' + cls.PIVOT_BUTTON_CLASS).offsetWidth +\n                    lastButton.querySelector('.e-indent-div').offsetWidth + 20);\n                var resColWidth = (this.parent.isAdaptive ? 180 : 250);\n                var buttonWidth = formatUnit(lastButtonWidth < resColWidth ? resColWidth : lastButtonWidth);\n                var rowHeaderTable = this.parent.element.querySelector('.e-frozenheader').querySelector('table');\n                var rowContentTable = this.parent.element.querySelector('.e-frozencontent').querySelector('table');\n                var rowContent = this.parent.element.querySelector('.e-frozencontent').querySelector('colgroup').children[0];\n                var colwidth = parseInt(buttonWidth, 10);\n                var gridColumn = this.parent.grid.columns;\n                if (gridColumn && gridColumn.length > 0) {\n                    /* tslint:disable:align */\n                    gridColumn[0].width = (gridColumn[0].width >= resColWidth ?\n                        (colwidth > resColWidth ? colwidth : resColWidth) : (colwidth > resColWidth ? colwidth : resColWidth));\n                }\n                var valueColWidth = this.parent.renderModule.calculateColWidth(this.parent.dataSource.values.length > 0 ?\n                    this.parent.engineModule.pivotValues[0].length : 2);\n                for (var cCnt = 0; cCnt < gridColumn.length; cCnt++) {\n                    if (cCnt !== 0) {\n                        if (gridColumn[cCnt].columns) {\n                            this.setColWidth(gridColumn[cCnt].columns, valueColWidth);\n                        }\n                        else {\n                            gridColumn[cCnt].width = valueColWidth;\n                        }\n                    }\n                }\n                this.parent.posCount = 0;\n                this.parent.setGridColumns(this.parent.grid.columns);\n                this.parent.grid.headerModule.refreshUI();\n                if (!this.parent.firstColWidth) {\n                    colGroupElement.style.width = buttonWidth;\n                    rowContent.style.width = buttonWidth;\n                    rowHeaderTable.style.width = buttonWidth;\n                    rowContentTable.style.width = buttonWidth;\n                    setStyleAttribute(rowHeaderTable, { 'width': buttonWidth });\n                    setStyleAttribute(rowContentTable, { 'width': buttonWidth });\n                }\n            }\n            else {\n                if (!this.parent.firstColWidth) {\n                    var resColWidth = 180;\n                    var gridColumn = this.parent.grid.columns;\n                    if (gridColumn && gridColumn.length > 0) {\n                        gridColumn[0].width = resColWidth;\n                    }\n                    this.parent.posCount = 0;\n                    this.parent.grid.headerModule.refreshUI();\n                }\n            }\n        }\n        this.refreshUI();\n    };\n    GroupingBar.prototype.setColWidth = function (columns, width) {\n        for (var cCnt = 0; cCnt < columns.length; cCnt++) {\n            if (columns[cCnt].columns) {\n                this.setColWidth(columns[cCnt].columns, width);\n            }\n            else {\n                columns[cCnt].width = width;\n            }\n        }\n    };\n    GroupingBar.prototype.wireEvent = function (element) {\n        EventHandler.add(element, 'mouseover', this.dropIndicatorUpdate, this);\n        EventHandler.add(element, 'mouseleave', this.dropIndicatorUpdate, this);\n    };\n    GroupingBar.prototype.unWireEvent = function (element) {\n        EventHandler.remove(element, 'mouseover', this.dropIndicatorUpdate);\n        EventHandler.remove(element, 'mouseleave', this.dropIndicatorUpdate);\n    };\n    GroupingBar.prototype.dropIndicatorUpdate = function (e) {\n        if ((this.parent.isDragging && e.target.classList.contains(cls.DROPPABLE_CLASS) && e.type === 'mouseover') ||\n            e.type === 'mouseleave') {\n            removeClass([].slice.call(this.parent.element.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(this.parent.element.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n        }\n    };\n    GroupingBar.prototype.tapHoldHandler = function (e) {\n        var target = closest(e.originalEvent.target, '.' + cls.PIVOT_BUTTON_CLASS);\n        if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n            var pos = target.getBoundingClientRect();\n            this.parent.contextMenuModule.fieldElement = target;\n            this.parent.contextMenuModule.menuObj.open(pos.top, pos.left);\n            return;\n        }\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.renderLayout,\n            end: this.appendToElement,\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initSubComponent, this.handlers.load, this); //For initial rendering\n        this.parent.on(events.uiUpdate, this.handlers.end, this);\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initSubComponent, this.handlers.end);\n        this.parent.off(events.uiUpdate, this.handlers.load);\n    };\n    /**\n     * To destroy the groupingbar\n     * @return {void}\n     * @hidden\n     */\n    GroupingBar.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.parent.pivotButtonModule) {\n            this.parent.pivotButtonModule.destroy();\n            if (this.touchObj && !this.touchObj.isDestroyed) {\n                this.touchObj.destroy();\n            }\n        }\n        else {\n            return;\n        }\n    };\n    return GroupingBar;\n}());\nexport { GroupingBar };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { isNullOrUndefined as isNaN, createElement, extend, remove, addClass } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as cls from '../../common/base/css-constant';\n/**\n * Module to render Conditional Formatting Dialog\n */\n/** @hidden */\nvar ConditionalFormatting = /** @class */ (function () {\n    /** Constructor for conditionalformatting module */\n    function ConditionalFormatting(parent) {\n        this.parent = parent;\n        this.parent.conditionalFormattingModule = this;\n        this.parentID = this.parent.element.id;\n        this.dialog = null;\n        this.fieldsDropDown = [];\n        this.conditionsDropDown = [];\n        this.fontNameDropDown = [];\n        this.fontSizeDropDown = [];\n        this.fontColor = [];\n        this.backgroundColor = [];\n        this.newFormat = [];\n    }\n    /**\n     * To get module name.\n     * @returns string\n     */\n    ConditionalFormatting.prototype.getModuleName = function () {\n        return 'conditionalformatting';\n    };\n    ConditionalFormatting.prototype.createDialog = function () {\n        if (document.querySelector('#' + this.parentID + 'conditionalformatting') !== null) {\n            remove(document.querySelector('#' + this.parentID + 'conditionalformatting'));\n        }\n        this.parent.element.appendChild(createElement('div', {\n            id: this.parentID + 'conditionalformatting',\n        }));\n        var buttonModel = [\n            {\n                click: this.addButtonClick.bind(this),\n                buttonModel: {\n                    cssClass: this.parent.isAdaptive ? (cls.FORMAT_ROUND_BUTTON + ' ' + cls.FORMAT_CONDITION_BUTTON) :\n                        cls.FORMAT_CONDITION_BUTTON,\n                    iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n                    content: this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('condition'),\n                }\n            },\n            {\n                click: this.applyButtonClick.bind(this),\n                buttonModel: {\n                    cssClass: cls.FLAT_CLASS + ' ' + cls.FORMAT_APPLY_BUTTON,\n                    content: this.parent.localeObj.getConstant('apply')\n                }\n            },\n            {\n                click: this.cancelButtonClick.bind(this),\n                buttonModel: {\n                    cssClass: cls.FLAT_CLASS + ' ' + cls.FORMAT_CANCEL_BUTTON,\n                    content: this.parent.localeObj.getConstant('cancel')\n                }\n            }\n        ];\n        if (this.parent.isAdaptive) {\n            this.dialog = new Dialog({\n                animationSettings: { effect: 'Zoom' }, isModal: true, width: '100%', height: '100%',\n                showCloseIcon: false, closeOnEscape: false, enableRtl: this.parent.enableRtl,\n                position: { X: 'center', Y: 'center' }, allowDragging: true, buttons: buttonModel,\n                beforeOpen: this.beforeOpen.bind(this),\n                cssClass: cls.FORMAT_DIALOG, header: this.parent.localeObj.getConstant('conditionalFormating'), target: document.body\n            });\n        }\n        else {\n            this.dialog = new Dialog({\n                allowDragging: true, position: { X: 'center', Y: this.parent.element.offsetTop }, buttons: buttonModel,\n                beforeOpen: this.beforeOpen.bind(this),\n                cssClass: cls.FORMAT_DIALOG, isModal: false, closeOnEscape: true, enableRtl: this.parent.enableRtl,\n                showCloseIcon: true, header: this.parent.localeObj.getConstant('conditionalFormating'), target: this.parent.element\n            });\n        }\n        this.dialog.appendTo('#' + this.parentID + 'conditionalformatting');\n    };\n    ConditionalFormatting.prototype.beforeOpen = function (args) {\n        this.dialog.element.querySelector('.' + cls.DIALOG_HEADER).\n            setAttribute('title', this.parent.localeObj.getConstant('conditionalFormating'));\n    };\n    ConditionalFormatting.prototype.addButtonClick = function () {\n        var format = {\n            conditions: 'LessThan',\n            value1: 0,\n            style: {\n                backgroundColor: 'white',\n                color: 'black',\n                fontFamily: 'Arial',\n                fontSize: '12px'\n            }\n        };\n        this.refreshConditionValues();\n        this.newFormat.push(format);\n        this.addFormat();\n    };\n    ConditionalFormatting.prototype.applyButtonClick = function () {\n        this.refreshConditionValues();\n        this.parent.setProperties({ dataSource: { conditionalFormatSettings: this.newFormat } }, true);\n        this.parent.renderPivotGrid();\n        this.destroy();\n    };\n    ConditionalFormatting.prototype.cancelButtonClick = function () {\n        this.destroy();\n        this.newFormat = [];\n    };\n    ConditionalFormatting.prototype.refreshConditionValues = function () {\n        for (var i = 0; i < this.newFormat.length; i++) {\n            this.newFormat[i].value1 =\n                Number(document.querySelector('#' + this.parentID + 'conditionvalue1' + i).value);\n            this.newFormat[i].value2 =\n                Number(document.querySelector('#' + this.parentID + 'conditionvalue2' + i).value);\n        }\n    };\n    ConditionalFormatting.prototype.addFormat = function () {\n        var format = createElement('div', { id: this.parentID + 'formatDiv', className: cls.FORMAT_NEW });\n        for (var i = 0; i < this.newFormat.length; i++) {\n            format.appendChild(this.createDialogElements(i));\n        }\n        this.dialog.setProperties({ 'content': format }, false);\n        for (var i = 0; i < this.newFormat.length; i++) {\n            this.renderDropDowns(i);\n            this.renderColorPicker(i);\n        }\n    };\n    ConditionalFormatting.prototype.createDialogElements = function (i) {\n        var format = this.newFormat[i];\n        var outerDiv = createElement('div', {\n            id: this.parentID + 'outerDiv' + i, className: cls.FORMAT_OUTER\n        });\n        var button = createElement('button', {\n            id: this.parentID + 'removeButton' + i, className: cls.FORMAT_DELETE_BUTTON,\n            attrs: { 'title': this.parent.localeObj.getConstant('delete') }\n        });\n        outerDiv.appendChild(button);\n        var innerDiv = createElement('div', { id: this.parentID + 'innerDiv', className: cls.FORMAT_INNER });\n        var table = createElement('table', { id: this.parentID + 'cftable', className: cls.FORMAT_TABLE });\n        var tRow = createElement('tr');\n        var td = createElement('td');\n        var valuelabel = createElement('span', {\n            id: this.parentID + 'valuelabel' + i, className: cls.FORMAT_VALUE_LABEL,\n            innerHTML: this.parent.localeObj.getConstant('value')\n        });\n        td.appendChild(valuelabel);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        tRow = createElement('tr');\n        td = createElement('td');\n        var measureDropdown = createElement('div', { id: this.parentID + 'measure' + i });\n        var measureInput = createElement('input', {\n            id: this.parentID + 'measureinput' + i,\n            attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        measureDropdown.appendChild(measureInput);\n        td.appendChild(measureDropdown);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var conditionDropdown = createElement('div', { id: this.parentID + 'condition' });\n        var conditionInput = createElement('input', {\n            id: this.parentID + 'conditioninput' + i,\n            attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        conditionDropdown.appendChild(conditionInput);\n        td.appendChild(conditionDropdown);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var style = !(format.conditions === 'Between' || format.conditions === 'NotBetween') ? 'display:none; width:10px' : '';\n        var value1 = createElement('input', {\n            id: this.parentID + 'conditionvalue1' + i,\n            attrs: { 'type': 'text', 'tabindex': '1', 'value': !isNaN(format.value1) ? format.value1.toString() : '0' },\n            styles: this.parent.isAdaptive ? style === '' ? 'width: 35%' : 'width: 100%' : style === '' ? 'width: 45px' : 'width: 120px',\n            className: cls.INPUT + ' ' + cls.FORMAT_VALUE1\n        });\n        td.appendChild(value1);\n        var valuespan = createElement('span', {\n            id: this.parentID + 'valuespan' + i, className: cls.FORMAT_VALUE_SPAN,\n            innerHTML: '&', styles: style\n        });\n        td.appendChild(valuespan);\n        var value2 = createElement('input', {\n            id: this.parentID + 'conditionvalue2' + i,\n            attrs: { 'type': 'text', 'tabindex': '1', 'value': !isNaN(format.value2) ? format.value2.toString() : '0' },\n            styles: (this.parent.isAdaptive && style === '') ? 'width: 35%' : style === '' ? 'width: 45px' : style,\n            className: cls.INPUT + ' ' + cls.FORMAT_VALUE2\n        });\n        td.appendChild(value2);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        if (this.parent.isAdaptive) {\n            innerDiv.appendChild(table);\n            table = createElement('table', { id: this.parentID + 'cftable', className: cls.FORMAT_TABLE });\n        }\n        tRow = createElement('tr');\n        td = createElement('td');\n        var formatlabel = createElement('span', {\n            id: this.parentID + 'formatlabel' + i, className: cls.FORMAT_LABEL, innerHTML: this.parent.localeObj.getConstant('formatLabel')\n        });\n        td.appendChild(formatlabel);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        tRow = createElement('tr');\n        td = createElement('td');\n        var fontNameDropdown = createElement('div', { id: this.parentID + 'fontname' });\n        var fontNameInput = createElement('input', {\n            id: this.parentID + 'fontnameinput' + i, attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        fontNameDropdown.appendChild(fontNameInput);\n        td.appendChild(fontNameDropdown);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var fontSizeDropdown = createElement('div', { id: this.parentID + 'fontsize' });\n        var fontSizeInput = createElement('input', {\n            id: this.parentID + 'fontsizeinput' + i, attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        fontSizeDropdown.appendChild(fontSizeInput);\n        td.appendChild(fontSizeDropdown);\n        tRow.appendChild(td);\n        if (this.parent.isAdaptive) {\n            table.appendChild(tRow);\n            tRow = createElement('tr');\n            table.appendChild(tRow);\n            tRow = createElement('tr');\n        }\n        td = createElement('td');\n        var colorPicker1 = createElement('input', {\n            id: this.parentID + 'fontcolor' + i, attrs: { 'type': 'color', 'tabindex': '1' }, className: cls.FORMAT_FONT_COLOR\n        });\n        td.appendChild(colorPicker1);\n        var colorPicker2 = createElement('input', {\n            id: this.parentID + 'backgroundcolor' + i, attrs: { 'type': 'color', 'tabindex': '1' }, className: cls.FORMAT_BACK_COLOR\n        });\n        td.appendChild(colorPicker2);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var valuePreview = createElement('div', {\n            id: this.parentID + 'valuepreview' + i, className: cls.INPUT + ' ' + cls.FORMAT_VALUE_PREVIEW,\n            innerHTML: '123.45',\n        });\n        td.appendChild(valuePreview);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        innerDiv.appendChild(table);\n        outerDiv.appendChild(innerDiv);\n        return outerDiv;\n    };\n    ConditionalFormatting.prototype.renderDropDowns = function (i) {\n        var format = this.newFormat[i];\n        var fields = [];\n        fields.push({\n            index: 0, name: this.parent.localeObj.getConstant('AllValues'),\n            field: this.parent.localeObj.getConstant('AllValues')\n        });\n        for (var i_1 = 0; i_1 < this.parent.dataSource.values.length; i_1++) {\n            fields.push({\n                index: i_1 + 1,\n                name: this.parent.dataSource.values[i_1].caption || this.parent.dataSource.values[i_1].name,\n                field: this.parent.dataSource.values[i_1].name\n            });\n        }\n        var value = isNaN(format.measure) ? this.parent.localeObj.getConstant('AllValues') : format.measure;\n        this.fieldsDropDown[i] = new DropDownList({\n            dataSource: fields, fields: { text: 'name' },\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            popupHeight: '200px', popupWidth: 'auto',\n            change: this.measureChange.bind(this, i)\n        });\n        this.fieldsDropDown[i].appendTo('#' + this.parentID + 'measureinput' + i);\n        var conditions = [\n            { value: 'LessThan', name: this.parent.localeObj.getConstant('LessThan') },\n            { value: 'LessThanOrEqualTo', name: this.parent.localeObj.getConstant('LessThanOrEqualTo') },\n            { value: 'GreaterThan', name: this.parent.localeObj.getConstant('GreaterThan') },\n            { value: 'GreaterThanOrEqualTo', name: this.parent.localeObj.getConstant('GreaterThanOrEqualTo') },\n            { value: 'Equals', name: this.parent.localeObj.getConstant('Equals') },\n            { value: 'NotEquals', name: this.parent.localeObj.getConstant('NotEquals') },\n            { value: 'Between', name: this.parent.localeObj.getConstant('Between') },\n            { value: 'NotBetween', name: this.parent.localeObj.getConstant('NotBetween') }\n        ];\n        value = isNaN(format.conditions) ? 'LessThan' : format.conditions;\n        this.conditionsDropDown[i] = new DropDownList({\n            dataSource: conditions, fields: { value: 'value', text: 'name' },\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            popupHeight: '200px', popupWidth: 'auto',\n            change: this.conditionChange.bind(this, i)\n        });\n        this.conditionsDropDown[i].appendTo('#' + this.parentID + 'conditioninput' + i);\n        var fontNames = [\n            { index: 0, name: 'Arial' }, { index: 1, name: 'San Serif' }, { index: 2, name: 'Impact' },\n            { index: 3, name: 'Trebuchet MS' }, { index: 4, name: 'Serif' }, { index: 5, name: 'Verdana' },\n            { index: 6, name: 'Courier New' }, { index: 7, name: 'Times New Roman' }, { index: 8, name: 'Tahoma' },\n            { index: 9, name: 'Gerogia' }\n        ];\n        value = isNaN(format.style.fontFamily) ? 'Arial' : format.style.fontFamily;\n        this.fontNameDropDown[i] = new DropDownList({\n            dataSource: fontNames, fields: { text: 'name' },\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            popupWidth: '150px', popupHeight: '200px',\n            change: this.fontNameChange.bind(this, i)\n        });\n        this.fontNameDropDown[i].appendTo('#' + this.parentID + 'fontnameinput' + i);\n        var fontSize = [\n            { index: 0, name: '9px' }, { index: 1, name: '10px' }, { index: 2, name: '11px' }, { index: 3, name: '12px' },\n            { index: 4, name: '13px' }, { index: 5, name: '14px' }, { index: 6, name: '15px' }, { index: 6, name: '16px' }\n        ];\n        value = isNaN(format.style.fontSize) ? '12px' : format.style.fontSize;\n        this.fontSizeDropDown[i] = new DropDownList({\n            dataSource: fontSize, fields: { text: 'name' }, popupHeight: '200px',\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            change: this.fontSizeChange.bind(this, i)\n        });\n        this.fontSizeDropDown[i].appendTo('#' + this.parentID + 'fontsizeinput' + i);\n    };\n    ConditionalFormatting.prototype.conditionChange = function (i, args) {\n        this.newFormat[i].conditions = args.value;\n        if (args.value === 'Between' || args.value === 'NotBetween') {\n            document.querySelector('#' + this.parentID + 'valuespan' + i).style.display = 'inline-block';\n            document.querySelector('#' + this.parentID + 'valuespan' + i).style.width =\n                this.parent.isAdaptive ? '10%' : '10px';\n            document.querySelector('#' + this.parentID + 'conditionvalue2' + i).style.display = 'inline-block';\n            document.querySelector('#' + this.parentID + 'conditionvalue2' + i).style.width =\n                this.parent.isAdaptive ? '35%' : '45px';\n            document.querySelector('#' + this.parentID + 'conditionvalue1' + i).style.width =\n                this.parent.isAdaptive ? '35%' : '45px';\n        }\n        else {\n            document.querySelector('#' + this.parentID + 'valuespan' + i).style.display = 'none';\n            document.querySelector('#' + this.parentID + 'conditionvalue2' + i).style.display = 'none';\n            document.querySelector('#' + this.parentID + 'conditionvalue1' + i).style.width =\n                this.parent.isAdaptive ? '100%' : '120px';\n        }\n    };\n    ConditionalFormatting.prototype.fontNameChange = function (i, args) {\n        this.newFormat[i].style.fontFamily = args.value.toString();\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontFamily = args.value;\n    };\n    ConditionalFormatting.prototype.fontSizeChange = function (i, args) {\n        this.newFormat[i].style.fontSize = args.value.toString();\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontSize = args.value;\n    };\n    ConditionalFormatting.prototype.measureChange = function (i, args) {\n        this.newFormat[i].measure = args.value.toString() === this.parent.localeObj.getConstant('AllValues') ?\n            undefined : args.value.toString();\n    };\n    ConditionalFormatting.prototype.renderColorPicker = function (i) {\n        var format = this.newFormat[i];\n        var value = isNaN(format.style.color) ? 'black' : format.style.color;\n        var color = this.isHex(value.substr(1)) ? value : this.colourNameToHex(value);\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.color = color;\n        this.fontColor[i] = new ColorPicker({\n            cssClass: cls.FORMAT_COLOR_PICKER, value: color, mode: 'Palette',\n            change: this.fontColorChange.bind(this, i)\n        });\n        this.fontColor[i].appendTo('#' + this.parentID + 'fontcolor' + i);\n        addClass([this.fontColor[i].element.nextElementSibling.querySelector('.' + cls.SELECTED_COLOR)], cls.ICON);\n        value = isNaN(format.style.backgroundColor) ? 'white' : format.style.backgroundColor;\n        color = this.isHex(value.substr(1)) ? value : this.colourNameToHex(value);\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.backgroundColor = color;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontFamily = format.style.fontFamily;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontSize = format.style.fontSize;\n        this.backgroundColor[i] = new ColorPicker({\n            cssClass: cls.FORMAT_COLOR_PICKER, value: color, mode: 'Palette',\n            change: this.backColorChange.bind(this, i)\n        });\n        this.backgroundColor[i].appendTo('#' + this.parentID + 'backgroundcolor' + i);\n        addClass([this.backgroundColor[i].element.nextElementSibling.querySelector('.e-selected-color')], cls.ICON);\n        var toggleBtn = new Button({\n            iconCss: cls.ICON + ' ' + cls.FORMAT_DELETE_ICON,\n            cssClass: cls.FLAT\n        });\n        toggleBtn.appendTo('#' + this.parentID + 'removeButton' + i);\n        toggleBtn.element.onclick = this.toggleButtonClick.bind(this, i);\n    };\n    ConditionalFormatting.prototype.backColorChange = function (i, args) {\n        this.newFormat[i].style.backgroundColor = args.currentValue.hex;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.backgroundColor =\n            args.currentValue.hex;\n    };\n    ConditionalFormatting.prototype.fontColorChange = function (i, args) {\n        this.newFormat[i].style.color = args.currentValue.hex;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.color =\n            args.currentValue.hex;\n    };\n    ConditionalFormatting.prototype.toggleButtonClick = function (i) {\n        this.newFormat.splice(i, 1);\n        this.addFormat();\n    };\n    /**\n     * To check is Hex or not.\n     * @returns boolean\n     * @hidden\n     */\n    ConditionalFormatting.prototype.isHex = function (h) {\n        var a = parseInt(h, 16);\n        while (h.charAt(0) === '0') {\n            h = h.substr(1);\n        }\n        return (a.toString(16) === h.toLowerCase() || (a === 0 && h === ''));\n    };\n    /**\n     * To convert hex to RGB.\n     * @returns { r: number, g: number, b: number } | null\n     * @hidden\n     */\n    ConditionalFormatting.prototype.hexToRgb = function (hex) {\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16)\n        } : null;\n    };\n    /**\n     * To convert color to hex.\n     * @returns string\n     * @hidden\n     */\n    ConditionalFormatting.prototype.colourNameToHex = function (colour) {\n        var colours = {\n            'aliceblue': '#f0f8ff', 'antiquewhite': '#faebd7', 'aqua': '#00ffff', 'aquamarine': '#7fffd4',\n            'azure': '#f0ffff', 'beige': '#f5f5dc', 'bisque': '#ffe4c4', 'black': '#000000',\n            'blanchedalmond': '#ffebcd', 'blue': '#0000ff',\n            'blueviolet': '#8a2be2', 'brown': '#a52a2a', 'burlywood': '#deb887', 'cadetblue': '#5f9ea0',\n            'chartreuse': '#7fff00', 'chocolate': '#d2691e',\n            'coral': '#ff7f50', 'cornflowerblue': '#6495ed', 'cornsilk': '#fff8dc', 'crimson': '#dc143c', 'cyan': '#00ffff',\n            'darkblue': '#00008b', 'darkcyan': '#008b8b', 'darkgoldenrod': '#b8860b', 'darkgray': '#a9a9a9', 'darkgreen': '#006400',\n            'darkkhaki': '#bdb76b', 'darkmagenta': '#8b008b', 'darkolivegreen': '#556b2f',\n            'darkorange': '#ff8c00', 'darkorchid': '#9932cc', 'darkred': '#8b0000', 'darksalmon': '#e9967a', 'darkseagreen': '#8fbc8f',\n            'darkslateblue': '#483d8b', 'darkslategray': '#2f4f4f', 'darkturquoise': '#00ced1',\n            'darkviolet': '#9400d3', 'deeppink': '#ff1493', 'deepskyblue': '#00bfff', 'dimgray': '#696969', 'dodgerblue': '#1e90ff',\n            'firebrick': '#b22222', 'floralwhite': '#fffaf0', 'forestgreen': '#228b22', 'fuchsia': '#ff00ff',\n            'gainsboro': '#dcdcdc', 'ghostwhite': '#f8f8ff', 'gold': '#ffd700', 'goldenrod': '#daa520',\n            'gray': '#808080', 'green': '#008000',\n            'greenyellow': '#adff2f', 'honeydew': '#f0fff0', 'hotpink': '#ff69b4', 'indianred ': '#cd5c5c',\n            'indigo': '#4b0082', 'ivory': '#fffff0',\n            'khaki': '#f0e68c', 'lavender': '#e6e6fa', 'lavenderblush': '#fff0f5', 'lawngreen': '#7cfc00', 'lemonchiffon': '#fffacd',\n            'lightblue': '#add8e6', 'lightcoral': '#f08080', 'lightcyan': '#e0ffff', 'lightgoldenrodyellow': '#fafad2',\n            'lightgrey': '#d3d3d3', 'lightgreen': '#90ee90', 'lightpink': '#ffb6c1', 'lightsalmon': '#ffa07a', 'lightseagreen': '#20b2aa',\n            'lightskyblue': '#87cefa', 'lightslategray': '#778899', 'lightsteelblue': '#b0c4de',\n            'lightyellow': '#ffffe0', 'lime': '#00ff00', 'limegreen': '#32cd32', 'linen': '#faf0e6',\n            'magenta': '#ff00ff', 'maroon': '#800000', 'mediumaquamarine': '#66cdaa', 'mediumblue': '#0000cd', 'mediumorchid': '#ba55d3',\n            'mediumpurple': '#9370d8', 'mediumseagreen': '#3cb371', 'mediumslateblue': '#7b68ee',\n            'mediumspringgreen': '#00fa9a', 'mediumturquoise': '#48d1cc', 'mediumvioletred': '#c71585', 'midnightblue': '#191970',\n            'mintcream': '#f5fffa', 'mistyrose': '#ffe4e1', 'moccasin': '#ffe4b5', 'navajowhite': '#ffdead', 'navy': '#000080',\n            'oldlace': '#fdf5e6', 'olive': '#808000', 'olivedrab': '#6b8e23', 'orange': '#ffa500', 'orangered': '#ff4500',\n            'orchid': '#da70d6',\n            'palegoldenrod': '#eee8aa', 'palegreen': '#98fb98', 'paleturquoise': '#afeeee', 'palevioletred': '#d87093',\n            'papayawhip': '#ffefd5',\n            'peachpuff': '#ffdab9', 'peru': '#cd853f', 'pink': '#ffc0cb', 'plum': '#dda0dd', 'powderblue': '#b0e0e6', 'purple': '#800080',\n            'rebeccapurple': '#663399', 'red': '#ff0000', 'rosybrown': '#bc8f8f', 'royalblue': '#4169e1',\n            'saddlebrown': '#8b4513', 'salmon': '#fa8072', 'sandybrown': '#f4a460', 'seagreen': '#2e8b57',\n            'seashell': '#fff5ee', 'sienna': '#a0522d',\n            'silver': '#c0c0c0', 'skyblue': '#87ceeb', 'slateblue': '#6a5acd', 'slategray': '#708090', 'snow': '#fffafa',\n            'springgreen': '#00ff7f',\n            'steelblue': '#4682b4', 'tan': '#d2b48c', 'teal': '#008080', 'thistle': '#d8bfd8', 'tomato': '#ff6347', 'turquoise': '#40e0d0',\n            'violet': '#ee82ee', 'wheat': '#f5deb3', 'white': '#ffffff', 'whitesmoke': '#f5f5f5', 'yellow': '#ffff00',\n            'yellowgreen': '#9acd32'\n        };\n        if (typeof colours[colour.toLowerCase()] !== 'undefined') {\n            return colours[colour.toLowerCase()];\n        }\n        return '#d5d5d5';\n    };\n    /**\n     * To create Conditional Formatting dialog.\n     * @returns void\n     */\n    ConditionalFormatting.prototype.showConditionalFormattingDialog = function () {\n        this.newFormat = [];\n        for (var i = 0; i < this.parent.dataSource.conditionalFormatSettings.length; i++) {\n            this.newFormat.push(extend({}, this.parent.dataSource.conditionalFormatSettings[i].properties, null, true));\n        }\n        this.createDialog();\n        this.dialog.refresh();\n        this.addFormat();\n    };\n    /**\n     * To destroy the Conditional Formatting dialog\n     * @returns void\n     * @hidden\n     */\n    ConditionalFormatting.prototype.destroy = function () {\n        if (this.dialog && !this.dialog.isDestroyed) {\n            this.dialog.hide();\n            for (var i = 0; i < this.newFormat.length; i++) {\n                if (this.fontColor[i] && !this.fontColor[i].isDestroyed) {\n                    this.fontColor[i].destroy();\n                }\n                if (this.backgroundColor[i] && !this.backgroundColor[i].isDestroyed) {\n                    this.backgroundColor[i].destroy();\n                }\n            }\n            this.dialog.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return ConditionalFormatting;\n}());\nexport { ConditionalFormatting };\n"],"names":["PivotUtil","getType","value","getDay","getHours","getMinutes","getSeconds","getMilliseconds","resetTime","date","setHours","PivotEngine","dataSource","mode","savedFieldList","pageSettings","enableValueSoring","isDrillThrough","this","formatFields","calculatedFields","calculatedFormulas","valueAxis","saveDataHeaders","columnCount","rowCount","colFirstLvl","rowFirstLvl","rowStartPos","colStartPos","enableValueSorting","headerCollection","rowHeaders","columnHeaders","rowHeadersCount","columnHeadersCount","valueMatrix","indexMatrix","rMembers","cMembers","memberCnt","pageInLimit","endPos","removeCount","colHdrBufferCalculated","colValuesLength","rowValuesLength","slicedHeaders","fieldFilterMem","filterPosObj","selectedHeaders","selectedHeader","values","rawIndexObject","isEditing","renderEngine","prototype","fields","globalize","Internationalization","enableSort","enableSorting","alwaysShowValueHeader","showSubTotals","isNullOrUndefined","showRowSubTotals","showColumnSubTotals","showGrandTotals","showRowGrandTotals","showColumnGrandTotals","allowValueFilter","isValueFilterEnabled","valueContent","data","Object","keys","rows","columns","filters","formats","formatSettings","calculatedFieldSettings","undefined","validateFilters","isExpandAll","isValueFiltersAvail","expandAll","drilledMembers","isMutiMeasures","length","emptyCellTextContent","emptyCellsTextContent","valueSortSettings","sortOrder","headerDelimiter","headerText","columnIndex","valueSortData","getFieldList","fillFieldMembers","updateSortSettings","sortSettings","generateValueMatrix","filterMembers","updateFilterMembers","generateGridData","getFormattedFields","cnt","name","isSort","isValueFilteringEnabled","type","dataFields","extend","concat","getCalculatedField","len","fieldList","key","isSelected","index","filter","isExcelFilter","filterType","dateMember","formattedMembers","members","id","caption","sort","updateTreeViewData","updateFieldList","lnt","field","showNoDataItems","aggregateType","baseField","baseItem","formula","_i","_a","actualFormula","fieldKeys","calc","calcProperties","properties","replace","indexOf","powerFunction","push","formulaType","split","lmt","aggregateValue","selectedString","filterElements","filterSettings","filterElements_1","dataFields_1","indMat","dlen","fList","kLn","kl","isDataAvail","membersCnt","fmembersCnt","dl","mkey","fKey","formattedValue","getFormattedValue","formattedText","toString","actualText","hasOwnProperty","ordinal","isDrilled","fillDrilledInfo","fieldName","mem","items","memberName","vMat","keyLen","flList","tkln","sln","slt","order","source","filterRw","list","isInclude","getFilters","dln","include","ln","exclude","indexObject","ilist","rln","rlt","filterElement","isValidFilterField","allowLabelFilter","applyLabelFilter","frameFilterList","showLabelFilter","showDateFilter","showNumberFilter","allowLabelFiltering","isValidFilterElement","filterTypes","isNotValidFilterElement","_b","dataFields_2","getLabelFilterMembers","condition","value1","value2","getDateFilterMembers","members_1","member","operand1","getParsedValue","operand2","cValue","validateFilterValue","excludeOperators","operator","members_2","filterValue","toLowerCase","match","members_3","Date","getTime","val","isMemberInclude","isLabelFilter","updateFilter","fln","allowFil","final","filterObj","memberObj","indx","iln","ilt","applyValueFiltering","rowData","level","valueFilter","rowFilterData","isValueFiltered","allMember","getFilteredData","rLen","i","measure","mPos","aggregate","getAggregateValue","isLevelFiltered","removefilteredData","valueFilteredData","row","validateFilteredParentData","hasChild","formatSetting","parseNumber","format","filteredData","axis","valueSort","levelName","splice","allMemberData","rows_1","rowFilteredData","index_1","_c","_d","index_2","_e","_f","updateFramedHeaders","framedHeaders","dataHeaders","filteredHeaders","headers","framedHeaders_1","dHeader","isHeaderAvail","validateFilteredHeaders","filterFramedHeaders","filteredHeaders_1","vHeader","isEmptyDataAvail","isEmptyData","updateGridData","getIndexedHeaders","insertAllMembersCommon","pivotValues","headerContent","rowheads","colheads","columnFilteredData","valuesCount","valueFilters","valueFields","values_1","filterSettings_1","isAvail","cLen","j","applyValueSorting","calculatePagingValues","insertPosition","insertTotalPosition","getAggregatedHeaders","getHeaderData","insertSubTotals","getTableData","applyAdvancedAggregate","removeIndexProperties","isEngineUpdated","textArray","hText","mIndex","mType","getMember","sortByValueRow","vlen","k","temp","insertAllMember","rCnt","cCnt","Number","rowLength","rowCnt","rowCells","savedCell","spanCnt","indexObj","colCnt","cell","colSpan","colIndex","rowPos","rowSpan","cellType","rowIndex","isSpanned","keyInd","position","parentMember","hierarchy","showPosition","rlen","decisionObj","childrens","isNoData","savedMembers","pos","lt","memInd","headerValue","availData","filterPosition","a","b","getOrderedIndex","orderedIndex","slicedHeader","diff","summCell","lt_1","isValueSorting","rowCurrentPage","rowSize","exactStartPos","performSlicing","columnCurrentPage","columnSize","startPos","pop","set","customText","reformAxis","tnum","vlt","rTotal","cTotal","actCnt","isLeastNode","hpos","actpos","vln","name_1","calObj","vData","cln","clt","updateRowData","recursiveRowData","isHeaderSelected","rows_2","getAggregatedHeaderData","columns_1","isChildren","headers_1","updateSelectedHeaders","childMembers","aggregateHeaders","children","vCount","isChild","uniqueName","valueCount","pivotIndex","isIndexFilled","colIndex_1","updateAggregates","indexCollection_1","selectedHeaders_1","selectedHeaderCollection","name_2","isRowBaseField","activeValues","indexCollection","activeColumn","rowindexCollection","selectedRowValues","selectedColumnValues","len_1","cLevelName","axisObj","isSelectedColumn","len_2","uniqueLevelName","colIndex_3","currentSet","selectedHeaderCollection_1","item","colIndex_2","indexCollection_2","cVal","isNaN","formatNumber","maximumFractionDigits","clen","_g","rowindexCollection_2","selectedHeaderCollection_2","rowindexCollection_1","_h","indexCollection_3","_j","selectedHeaderCollection_3","_k","colIndex_4","_l","indexCollection_4","_m","selectedHeaderCollection_4","_o","rowindexCollection_3","_p","indexCollection_5","_q","colIndex_5","_r","selectedHeaderCollection_5","_s","selectedHeaderCollection_6","gTotalIndex","totalValues","gTotalIndex_1","rIndex","gTotalIndex_2","isSum","subTotal","toLocaleString","vcnt","colItmLn","sortText","lvl","name_3","ri","cellValue","avgCnt","isInit","isValueExist","duplicateValues","currentVal","indexVal","avgVal","avgDifferenceVal","indexVal_1","Math","pow","sqrt","NaN","isFirst","isMaxFirst","calcField","aggregateField","aggregatedValue","value_1","type_1","eval","JSON","parse","minimumSignificantDigits","maximumSignificantDigits","formatDate","items_1","text","RegExp","load","enginePopulating","enginePopulated","onFieldDropped","beforePivotTableRender","afterPivotTableRender","beforeExport","excelHeaderQueryCellInfo","pdfHeaderQueryCellInfo","excelQueryCellInfo","pdfQueryCellInfo","dataBound","queryCellInfo","headerCellInfo","hyperlinkCellClick","resizing","resizeStop","cellClick","drillThrough","beforeColumnsRender","selected","cellSelected","cellDeselected","rowSelected","rowDeselected","beginDrillThrough","initialLoad","uiUpdate","scroll","contentReady","dataReady","initSubComponent","treeViewUpdate","pivotButtonUpdate","initCalculatedField","click","ROOT","RTL","DEVICE","ICON","ICON_DISABLE","ICON_HIDDEN","AXISFIELD_ICON_CLASS","WRAPPER_CLASS","CONTAINER_CLASS","TOGGLE_FIELD_LIST_CLASS","STATIC_FIELD_LIST_CLASS","TOGGLE_SELECT_CLASS","FIELD_TABLE_CLASS","FIELD_LIST_CLASS","FIELD_LIST_TREE_CLASS","FIELD_HEADER_CLASS","FIELD_LIST_TITLE_CLASS","FIELD_LIST_TITLE_CONTENT_CLASS","FIELD_LIST_FOOTER_CLASS","CALCULATED_FIELD_CLASS","FLAT_CLASS","OUTLINE_CLASS","AXIS_TABLE_CLASS","LEFT_AXIS_PANEL_CLASS","RIGHT_AXIS_PANEL_CLASS","AXIS_HEADER_CLASS","AXIS_CONTENT_CLASS","AXIS_PROMPT_CLASS","PIVOT_BUTTON_WRAPPER_CLASS","PIVOT_BUTTON_CLASS","PIVOT_BUTTON_CONTENT_CLASS","DRAG_CLONE_CLASS","SORT_CLASS","SORT_DESCEND_CLASS","FILTER_COMMON_CLASS","FILTER_CLASS","FILTERED_CLASS","REMOVE_CLASS","DRAG_CLASS","DROP_INDICATOR_CLASS","INDICATOR_HOVER_CLASS","MEMBER_EDITOR_DIALOG_CLASS","EDITOR_TREE_WRAPPER_CLASS","EDITOR_TREE_CONTAINER_CLASS","DRILLTHROUGH_GRID_CLASS","DRILLTHROUGH_BODY_CLASS","DRILLTHROUGH_BODY_HEADER_CONTAINER_CLASS","DRILLTHROUGH_BODY_HEADER_CLASS","DRILLTHROUGH_BODY_HEADER_COMMON_CLASS","DRILLTHROUGH_BODY_HEADER_VALUE_CLASS","DRILLTHROUGH_DIALOG","EDITOR_LABEL_WRAPPER_CLASS","EDITOR_LABEL_CLASS","CHECK_BOX_FRAME_CLASS","NODE_CHECK_CLASS","NODE_STOP_CLASS","OK_BUTTON_CLASS","CANCEL_BUTTON_CLASS","ERROR_DIALOG_CLASS","DROPPABLE_CLASS","ROW_AXIS_CLASS","COLUMN_AXIS_CLASS","VALUE_AXIS_CLASS","FILTER_AXIS_CLASS","GROUPING_BAR_CLASS","GROUP_ROW_CLASS","GROUP_COLUMN_CLASS","GROUP_VALUE_CLASS","GROUP_FILTER_CLASS","NO_DRAG_CLASS","SELECTED_NODE_CLASS","TITLE_HEADER_CLASS","TITLE_CONTENT_CLASS","TEXT_CONTENT_CLASS","FOOTER_CONTENT_CLASS","ADAPTIVE_CONTAINER_CLASS","ADAPTIVE_FIELD_LIST_BUTTON_CLASS","ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS","BUTTON_SMALL_CLASS","BUTTON_ROUND_CLASS","ADD_ICON_CLASS","BUTTON_FLAT_CLASS","STATIC_CENTER_DIV_CLASS","STATIC_CENTER_HEADER_CLASS","ADAPTIVE_FIELD_LIST_DIALOG_CLASS","LIST_TEXT_CLASS","LIST_SELECT_CLASS","SELECTED_OPTION_ICON_CLASS","FILTER_DIV_CONTENT_CLASS","FILTER_TEXT_DIV_CLASS","BETWEEN_TEXT_DIV_CLASS","SEPARATOR_DIV_CLASS","FILTER_OPTION_WRAPPER_1_CLASS","FILTER_OPTION_WRAPPER_2_CLASS","FILTER_INPUT_DIV_1_CLASS","FILTER_INPUT_DIV_2_CLASS","VALUE_OPTIONS_CLASS","FILTER_OPERATOR_CLASS","COLLAPSE","EXPAND","COLUMNSHEADER","ROWSHEADER","VALUESCONTENT","SUMMARY","CELLVALUE","PIVOTTOOLTIP","TOOLTIP_HEADER","TOOLTIP_CONTENT","NEXTSPAN","LASTSPAN","EDITOR_SEARCH_WRAPPER_CLASS","EDITOR_SEARCH_CLASS","SELECT_ALL_WRAPPER_CLASS","SELECT_ALL_CLASS","PIVOTCALC","CALCDIALOG","CALCRADIO","CALCCHECK","CALCINPUT","CALCINPUTDIV","CALCOUTERDIV","FLAT","FORMAT","FORMULA","TREEVIEW","TREEVIEWOUTER","CALCCANCELBTN","CALCADDBTN","CALCOKBTN","CALCACCORD","CALCBUTTONDIV","AXIS_ICON_CLASS","AXIS_ROW_CLASS","AXIS_COLUMN_CLASS","AXIS_VALUE_CLASS","AXIS_FILTER_CLASS","GRID_CLASS","PIVOT_VIEW_CLASS","PIVOT_ALL_FIELD_TITLE_CLASS","PIVOT_FORMULA_TITLE_CLASS","PIVOT_CONTEXT_MENU_CLASS","MENU_DISABLE","EMPTY_MEMBER_CLASS","CALC_EDIT","CALC_EDITED","EMPTY_FIELD","FORMAT_DIALOG","FORMAT_CONDITION_BUTTON","FORMAT_NEW","FORMAT_OUTER","FORMAT_INNER","FORMAT_TABLE","FORMAT_VALUE_LABEL","FORMAT_LABEL","INPUT","FORMAT_VALUE1","FORMAT_VALUE2","FORMAT_VALUE_SPAN","FORMAT_FONT_COLOR","FORMAT_BACK_COLOR","FORMAT_VALUE_PREVIEW","FORMAT_COLOR_PICKER","FORMAT_DELETE_ICON","FORMAT_DELETE_BUTTON","SELECTED_COLOR","DIALOG_HEADER","FORMAT_APPLY_BUTTON","FORMAT_CANCEL_BUTTON","FORMAT_ROUND_BUTTON","VIRTUALTRACK_DIV","MOVABLECONTENT_DIV","FROZENCONTENT_DIV","MOVABLEHEADER_DIV","DEFER_APPLY_BUTTON","DEFER_CANCEL_BUTTON","LAYOUT_FOOTER","CELL_SELECTED_BGCOLOR","SELECTED_BGCOLOR","BUTTON_LAYOUT","CHECKBOX_LAYOUT","DEFER_UPDATE_BUTTON","HEADERCONTENT","BACK_ICON","TITLE_MOBILE_HEADER","TITLE_MOBILE_CONTENT","ROW_CELL_CLASS","CELL_ACTIVE_BGCOLOR","SPAN_CLICKED","ROW_SELECT","GRID_HEADER","Render","parent","colPos","lastSpan","engine","engineModule","gridSettings","formatList","getFormatList","render","injectGridModules","getRowStartPos","grid","element","querySelector","frameDataSource","setProperties","frameStackedHeaders","notify","refreshColumns","innerHTML","getHeaderContent","width","calculateGridWidth","height","rowHeight","bindGrid","appendChild","createElement","appendTo","on","headerRefreshed","refreshHeader","enableVirtualization","mHdr","mCont","vtr","virtualHeaderDiv","remove","className","setStyleAttribute","style","transform","scrollLeft","isEmpty","Grid","frozenColumns","frozenRows","frameEmptyData","frameEmptyColumns","locale","enableRtl","allowExcelExport","allowPdfExport","allowResizing","allowTextWrap","allowReordering","allowSelection","contextMenuItems","selectedRowIndex","selectionSettings","printMode","gridLines","contextMenuClick","bind","contextMenuOpen","beforeCopy","beforePrint","printComplete","rowSelecting","rowDeselecting","cellSelecting","cellDeselecting","resizeStart","columnDragStart","columnDrag","columnDrop","setGroupWidth","onResizeStop","args","renderModule","trigger","rowRangeSelection","enable","selectionModule","selectRowsByRange","startIndex","endIndex","rowCellBoundEvent","columnCellBoundEvent","excelColumnEvent","pdfRowEvent","excelRowEvent","pdfColumnEvent","borderRight","borderLeft","widthService","setWidthToTable","Inject","Freeze","ExcelExport","PdfExport","Selection","Reorder","Resize","ContextMenu","updateGridSettings","appendValueSortIcon","tCell","vSort","lock","classList","add","padding-top","column","customAttributes","resizeInfo","showGroupingBar","groupingBarModule","refreshUI","offsetWidth","firstColWidth","cancel","gridColumn","resColWidth","isAdaptive","offsetHeight","e","clearTimeout","timeOutObj","setTimeout","onSelect","pivotArgs","selectedCellsInfo","selectedElements_1","querySelectorAll","cls.SELECTED_BGCOLOR","getAttribute","currentCell","customClass","hyperlinkSettings","cssClass","setAttribute","isValueCell","innerText","localizedText","localeObj","getConstant","cls.ICON","attrs","title","isRowCellHyperlink","enableHyperlink","pivotView","styles","isSummaryCellHyperlink","isValueCellHyperlink","unWireEvents","wireEvents","node","display","borderBottomWidth","isColumnCellHyperlink","hdrdiv","lineHeight","div","window","navigator","userAgent","insertBefore","onHyperCellClick","target","parentElement","open","dataContent","start","end","0","1","calculateColWidth","colCount","parWidth","parseFloat","columnWidth","totColWidth","integrateModel","headerCnt","headerSplit","splitPos","colWidth","columnModel","actualCnt","colField","setSavedWidth","minWidth","visible","tmpSpan","innerModel","innerPos","clipMode","triggerColumnRenderEvent","formatArray","vCnt","fCnt","exportHeaderEvent","hAlign","indent","exportContentEvent","paragraphIndent","gridCell","EventHandler","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","p","__","constructor","create","__decorate","decorators","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FieldOptions","_super","apply","Property","ChildProperty","FieldListFieldOptions","Style","Filter","ConditionalFormatSettings","Sort","FormatSettings","CalculatedFieldSettings","DrillOptions","ValueSortSettings","DataSource","Collection","Complex","GridSettings","cellSelectionMode","Event","getModuleName","exportToExcel","fileName","header","footer","dataCollections","workSheets","dataColl","colLen","rowLen","actualrCnt","maxLevel","cells","pivotCell","numberFormat","bold","wrapText","backColor","backgroundColor","fontColor","color","fontName","fontFamily","fontSize","vAlign","borders","lineStyle","Workbook","worksheets","save","PDFExport","exportToPDF","gridResult","eventParams","applyEvent","dataCollIndex","colLength","integratedCnt","pdfGrid","PdfGrid","isColHeader","pdfGridRow","getHeader","addRow","localCnt","isEmptyRow","getCell","columnSpan","applyStyle","stringFormat","PdfStringFormat","alignment","PdfTextAlignment","Right","Left","lineAlignment","PdfVerticalAlignment","Middle","getColumn","layout","PdfLayoutFormat","paginateBounds","RectangleF","draw","page","PointF","bounds","y","document","destroy","conditionalFormattingModule","hexToRgb","brush","PdfSolidBrush","PdfColor","g","backgroundBrush","size","font","PdfStandardFont","PdfFontFamily","TimesRoman","PdfFontStyle","Regular","textBrush","PdfDocument","pages","pen","PdfPen","headerTemplate","PdfPageTemplateElement","graphics","clientSize","drawString","Center","template","top","footerTemplate","bottom","KeyboardInteraction","keyConfigs","tab","enter","shiftUp","shiftDown","shiftLeft","shiftRight","upArrow","downArrow","leftArrow","rightArrow","escape","tabIndex","pivotViewKeyboardModule","KeyboardEvents","keyAction","keyActionHandler","eventName","action","processTab","processEnter","processSelection","clearSelection","getNextButton","allPivotButtons","slice","call","nextElement","closest","gridFocus","serviceLocator","getService","nextButton","currentInfo","skipAction","focus","getFocusedElement","addClass","preventDefault","showFieldList","gridElement","getElementsByTagName","lastChild","contains","dispatchEvent","MouseEvent","view","bubbles","cancelable","forEach","ele","control","nodeName","getParentElement","previousSibling","nextSibling","applyColumnSelection","PivotContextMenu","contextMenuModule","renderContextMenu","menuOptions","beforeOpen","onBeforeMenuOpen","select","onSelectContextMenu","menuObj","fieldType","fieldElement","removeClass","textContent","menu","dropClass","pivotCommon","dataSourceUpdate","updateDataSource","isDestroyed","VirtualScroll","previousValues","left","frozenPreviousValues","eventType","addInternalEvents","fCont","clearEvents","onHorizondalScroll","onVerticalScroll","common","onWheelScroll","setPageXY","onTouchScroll","isPreventScrollEvent","_this","scrollTop","deltaMode","deltaY","getPointXY","pageXY","x","touches","pageX","pageY","pointerType","update","direction","rowValues","exactSize","section","ceil","scrollPosObject","vertical","hideSpinner","showSpinner","exactPage","verticalSection","colValues","horizontal","horizontalSection","excessMove","clientWidth","clientHeight","removeInternalEvents","off","DrillThroughDialog","isUpdated","gridIndexObjects","showDrillThroughDialog","eventArgs","removeDrillThroughDialog","drillThroughDialog","dialogPopUp","Dialog","animationSettings","effect","allowDragging","content","createDrillThroughGrid","drillThroughGrid","editSettings","allowEditing","dataWithPrimarykey","rawData","beforeClose","count","addItems","isModal","showCloseIcon","X","Y","closeOnEscape","body","close","visibility","dialogElement","getElementById","drillThroughBody","drillThroughBodyHeader","toolbarItems","allowCommandColumns","Toolbar","ColumnChooser","showColumnChooser","toolbar","frameGridColumns","allowPaging","dialogModule","cellInfo","gridObj","Edit","Page","allowEditOnDblClick","CommandColumn","showInColumnChooser","commands","buttonOption","iconCss","isPrimaryKey","actionComplete","requestType","hide","beforeBatchSave","keys_1","editType","validationRules","required","indexString","rawData_1","DrillThrough","mouseClickHandler","allowDrillThrough","executeDrillThrough","pivotValue","valueCaption","indexArray_1","aggType","valuetText","currentTarget","join","GroupingBarSettings","CellEditSettings","ConditionalSettings","HyperlinkSettings","PivotView","options","_this_1","shiftLockedPos","savedSelectedCellsPos","isPopupClicked","isMouseDown","isMouseUp","isCellBoxMultiSelection","scrollDirection","pivotColumns","posCount","needsID","PivotView_1","requiredModules","isCommonRequire","modules","allowConditionalFormatting","allowCalculatedField","preRender","initProperties","Browser","isDevice","renderToolTip","keyboardModule","defaultLocale","grandTotal","total","noValue","collapse","expand","rowAxisPrompt","columnAxisPrompt","valueAxisPrompt","filterAxisPrompt","filtered","delete","calculatedField","createCalculatedField","error","invalidFormula","dropText","dropTextMobile","dropAction","alert","warning","ok","search","drag","sum","average","min","max","allFields","addToRow","addToColumn","addToValue","addToFilter","emptyData","fieldExist","confirmText","noMatches","edit","clear","formulaField","dragField","clearFilter","by","all","multipleItems","label","enterValue","chooseDate","Before","BeforeOrEqualTo","After","AfterOrEqualTo","labelTextContent","dateTextContent","valueTextContent","Equals","DoesNotEquals","BeginWith","DoesNotBeginWith","EndsWith","DoesNotEndsWith","Contains","DoesNotContains","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween","And","Sum","Count","DistinctCount","Product","Avg","Min","SampleVar","PopulationVar","RunningTotals","Max","Index","SampleStDev","PopulationStDev","PercentageOfRowTotal","PercentageOfParentTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfGrandTotal","PercentageOfColumnTotal","NotEquals","AllValues","conditionalFormating","formatLabel","valueFieldSettings","summarizeValuesBy","sourceName","sourceCaption","example","editorDataLimitMsg","details","manageRecords","L10n","isDragging","setCurrencyCode","currencyCode","onBeforeTooltipOpen","showTooltip","tooltip","Tooltip","showTipPointer","beforeRender","setToolTip","floor","createSpinner","updateClass","generateData","events.dataReady","renderPivotGrid","onContentReady","getPersistData","keyEntity","addOnPersist","copy","withHeader","onPropertyChanged","newProp","oldProp","refresh","axisFieldModule","virtualscrollModule","showRowHeaderHyperlink","showHyperlink","showColumnHeaderHyperlink","showValueCellHyperlink","showSummaryCellHyperlink","applyHyperlinkSettings","drillThroughModule","events.uiUpdate","pivotFieldListModule","allowDeferLayoutUpdate","clonedDataSource","applyFormatting","isRefreshGrid","unwireEvents","cls.ROOT","cls.RTL","cls.DEVICE","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","onDrill","fieldAvail","prop","memIndex","fieldListSpinnerElement","isEmptyGrid","virtualDiv","movableTable","vHeight","vWidth","mCnt","getRowText","getColText","rowText","reverse","limit","colText","mouseDownHandler","mouseMoveHandler","mouseUpHandler","addEventListener","onWindowResize","parent_1","parentAt","lastSelectedElement","tagName","CellClicked","framePivotColumns","gridcolumns","gridcolumns_1","setGridColumns","gridcolumns_2","setCommonColumnsWidth","getSelectedCellsPos","headerModule","setGridRowWidth","setSavedSelectedCells","applyRowSelection","shiftKey","ctrlKey","parentLevel","rCount","colStart","colEnd","rowStart","isCtrl_1","showPopup","queryStringArray","isToggle_1","activeColumns_1","actColPos_1","query","removeEventListener","renderEmptyGrid","initEngine","DataManager","executeQuery","Query","then","result","format_1","conditionalFormatSettings","checkCondition","conditions","ilen","jlen","isHex","substr","colourNameToHex","sheet","createTextNode","head","str","insertRule","conditionalSettings","collection","conditionalValue1","conditionalValue2","NotifyPropertyChanges","Component","CommonKeyboardInteraction","shiftF","shiftS","processFilter","processSort","processDelete","processOpenContextMenu","EventBase","updateSorting","filterDialog","isDescending","sortObj","getSortItemByName","newSortObj","updateFiltering","fieldCaption","filterItems","executeLocal","sortBy","getFilterItemByName","treeData","getTreeData","popupTarget","moduleName","parentID","createFilterDialog","sortObjects","json","where","filterObjects","getFieldByName","getFormatItemByName","formatObjects","searchTreeNodes","treeObj","isFieldCollection","searchList","nonSearchList","list_1","enableNodes","disableNodes","searchTreeItems","memberCount","currentTreeItems","maxNodeLimitInMemberEditor","editorLabelElement","allowExcelLikeFilter","isDataOverflow","isChecked","dataBind","currentTreeItemsPos","savedTreeFilterPos","isDateField","filterItems_1","obj","checkedStatus","NodeStateModified","onStateModified","droppedClass","nodeDropped","droppedPosition","btnElement","description","errorDialog","createErrorDialog","getButtonPosition","targetBtn","axisPanel","pivotButtons","n","DataSourceUpdate","dataSourceItem","removeFieldFromReport","getNewField","droppedField","droppedAxis","isDataSource","ErrorDialog","errorPopUp","zIndex","buttons","closeErrorDialog","buttonModel","isPrimary","removeErrorDialog","FilterDialog","editorDialog","data-fieldName","aria-label","filterCaption","filterObject","getFilterObject","createTreeView","renderMode","disabled","closeFilterDialog","removeFilterDialog","dialogOpen","createTabMenu","updateCheckedState","editorTreeWrapper","searchWrapper","tabindex","editorSearch","labelWrapper","selectAllWrapper","selectAllContainer","treeViewContainer","promptDiv","cls.EMPTY_MEMBER_CLASS","MaskedTextBox","placeholder","showClearButton","change","eventBase","memberTreeView","allMemberSelect","removeAttribute","TreeView","showCheckBox","nodeChecking","validateTreeNode","wrapper","types","regx","formatObj","types_1","createCustomFilter","selectedIndex","tabObj","Tab","heightAdjustMode","selectedItem","valueOptions","measures","selectedOption","selectedValueIndex","betweenOperators","operatorCollection","operatorCollection_1","unshift","mainDiv","cls.FILTER_DIV_CONTENT_CLASS","data-type","data-operator","data-measure","data-value1","data-value2","textContentdiv","betweenTextContentdiv","cls.BETWEEN_TEXT_DIV_CLASS","separatordiv","filterWrapperDiv1","optionWrapperDiv1","optionWrapperDiv2","filterWrapperDiv2","dropOptionDiv1","dropOptionDiv2","inputDiv1","inputDiv2","cls.FILTER_INPUT_DIV_2_CLASS","inputField1","inputField2","createElements","operators","optionDiv1","optionDiv2","vDataSource","oDataSource","valueIndex","option","popupInstance","DropDownList","updateInputValues","setStyleAndAttributes","disabledClasses_1","inputObj1_1","DatePicker","inputObj2_1","inputObj1_2","NumericTextBox","parseInt","inputObj2_2","inputObj1_3","inputObj2_3","inputObj1","ej2_instances","inputObj2","role","aria-haspopup","uncheckedNodes","getUnCheckedNodes","checkedNodes","getCheckedNodes","firstNode","isFilterField","PivotCommon","pivotEngine","nodeStateModified","DialogRenderer","fieldListWrappper","cls.WRAPPER_CLASS","renderAdaptiveLayout","renderFieldListDialog","unWireDialogEvent","wireDialogEvent","renderStaticLayout","layoutHeader","createCalculatedButton","createDeferUpdateButtons","renderDeferUpdateButtons","deferUpdateCheckBox","CheckBox","checked","onCheckChange","deferUpdateApplyButton","Button","cls.DEFER_APPLY_BUTTON","onclick","applyButtonClick","onDeferUpdateClick","deferUpdateCancelButton","cls.DEFER_CANCEL_BUTTON","cancelButtonClick","onCloseFieldList","layoutFooter","checkBoxLayout","buttonLayout","deferUpdateButton1","deferUpdateButton2","clonedFieldList","pivotFieldList","toggleFieldList","cls.TOGGLE_FIELD_LIST_CLASS","aria-disabled","showFieldListDialog","cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS","showCalculatedField","cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS","fieldListDialog","removeFieldListIcon","padding","outerHTML","offsetTop","selectedNodes","selectedNodes_1","adaptiveElement","pivotGridModule","triggerPopulateEvent","dialogRenderer","createAxisTable","tabSelect","createAddButton","calculatedButton","calculateField","cls.CALCULATED_FIELD_CLASS","calculatedFieldModule","footerContainer","cls.FIELD_LIST_FOOTER_CLASS","fieldListButton","axisWrapper","cls.FIELD_LIST_CLASS","axisContent","cls.AXIS_CONTENT_CLASS","axisPrompt","event","activeindex","treeViewModule","onShowFieldList","show","keyPress","keyCode","TreeViewRenderer","renderTreeDialog","fieldTable","treeHeader","treeViewElement","centerDiv","axisHeader","renderTreeView","nodeChecked","nodeStateChange","allowDragAndDrop","nodeDragStart","dragStart","nodeDragStop","dragStop","getTreeUpdate","fieldDialog","closeTreeDialog","onFieldAdd","dialogClose","textChange","addNode","draggedNode","axis_1","axis_2","axisElement","draggedNodeData","isNodeDropped","targetID","isDropped","getButton","droppableElement","dropTarget","sourcePosition","dropPosition","droppableButton","buttonElement","wrapperElement","selectedNode","liElements_1","liElement","dragElement","prepend","refreshTreeView","currentFieldSet","currentFieldSet_1","AxisTableRenderer","axisTable","leftAxisPanel","rightAxisPanel","renderAxisTable","fieldLabels","axisTitleWrapper","cls.AXIS_ICON_CLASS","axisTitle","getIconupdate","localePrompt","Droppable","unWireEvent","wireEvent","updateDropIndicator","AggregateMenu","openContextMenu","menuInfo","createContextMenu","currentMenu","getBoundingClientRect","beforeMenuOpen","selectOptionInContextMenu","removeContextMenu","Menu","createValueSettingsDialog","valueDialog","data-field","createFieldOptions","updateValueSettings","overlayClick","removeDialog","summaryType","summaryDataSource","baseItemTypes","baseFieldTypes","fieldDataSource","fieldItemDataSource","data-caption","data-basefield","data-baseitem","textWrappper","optionWrapperDiv3","texttitle","inputTextDiv1","optionTextDiv1","optionTextDiv2","optionTextDiv3","dropOptionDiv3","optionWrapper2","enabled","optionWrapper3","filterBarPlaceholder","allowFiltering","valuefields","contentElement","captionName","isRefreshed","captionInstance","getInstance","summaryInstance","baseFieldInstance","baseItemInstance","selectedField","PivotButton","menuOption","pivotButtonModule","PivotFieldList","axisField","AxisFieldRenderer","renderPivotButton","valuePos","showValuesButton","buttonWrapper","data-tag","data-uid","isvalue","dropIndicatorElement","dropLastIndicatorElement","cls.DROP_INDICATOR_CLASS","dragWrapper","createButtonDragIcon","createButtonText","createSortOption","createFilterOption","getTypeStatus","removeElement","groupingBarSettings","showRemoveIcon","createDraggable","aggregation","filterMem","updateButtontext","oncontextmenu","fieldListItem","createSummaryType","pivotButton","spanElement","showValueTypeIcon","createMenuOption","draggable","Draggable","clone","enableTailMode","enableAutoScroll","helper","createDragClone","onDragStart","onDragging","onDragStop","sortCLass","showSortIcon","filterCLass","cls.FILTER_COMMON_CLASS","showFilterIcon","cloneElement","cursorAt","isNOU","targetTouches","cursor","isButtonDropped","droppableTarget","bindDialogEvents","updateDialogButtonEvents","ClearFilter","updateFilterState","updateCustomFilter","filterItem","inputElementString","focusElement","refreshPivotButtonState","removeDataSourceSettings","removeButton","checkAll","uncheckAll","checkedStateAll","state","searctItem","isNodeUnChecked","isFiltered","selectedButton","pivotButtons_1","handlers","filterCount","memLen","allNodes","filteredItems","loop","test","createPivotButtons","axisTableModule","isRequiredUpdate","staticFieldList","dropFilterPrompt","dropColPrompt","dropRowPrompt","dropValPrompt","addPrompt","adaptiveFieldHeader","centerHeader","deferLayoutUpdate","captionData","fieldListRender","requireRefresh","getFieldCaption","getFields","isTreeViewRefresh","isEngineRefresh","updateView","COUNT","AVG","MIN","MAX","SUM","DISTINCTCOUNT","PRODUCT","STDEV","STDEVP","VAR","VARP","CALC","AGRTYPE","CalculatedField","existingReport","dialog","inputObj","droppable","newFields","isFieldExist","formulaText","fieldText","isEdit","currentFieldName","confirmPopUp","displayMenu","dropField","fieldClickHandler","cls.FORMAT","cls.CALCINPUT","curMenu","selectContextMenu","createMenu","menuItems","applyFormula","currentObj","isExist","report","cField","createConfirmDialog","addFormula","exception","getFieldListData","icon","fieldDropped","textCovered","cursorPos","selectionStart","currentValue","textBeforeText","substring","textAfterText","setSelectionRange","createDialog","cancelClick","closeDialog","renderDialogElements","outerDiv","cls.FORMULA","accordDiv","buttonDiv","addBtn","cancelBtn","inputDiv","fieldTitle","wrapDiv","formulaTitle","dropDiv","okBtn","renderMobileLayout","nodeCollapsing","nodeClicked","drawNode","drawTreeNode","dragItem","nodeData","append","createTypeContainer","input","data-ftxt","getAccordionData","cls.FLAT","cancelBtnClick","accordion","Accordion","expanding","accordionExpand","updateType","addBtnClick","RadioButton","onChange","createCalculatedFieldDialog","renderDialogLayout","keyboardEvents","moveRight","replaceFormula","cls.OK_BUTTON_CLASS","FieldList","initiateModule","updateControl","formatUnit","actWidth","abs","Common","commonModule","initiateCommonModule","AxisFields","indentDiv","GroupingBar","touchObj","Touch","tapHold","tapHoldHandler","renderLayout","groupingTable","rowAxisPanel","cls.AXIS_ROW_CLASS","columnAxisPanel","cls.AXIS_COLUMN_CLASS","valueAxisPanel","cls.AXIS_VALUE_CLASS","filterAxisPanel","cls.AXIS_FILTER_CLASS","rowPanel","cls.GROUP_ROW_CLASS","columnPanel","cls.GROUP_COLUMN_CLASS","valuePanel","cls.GROUP_VALUE_CLASS","filterPanel","cls.GROUP_FILTER_CLASS","axisPanels_1","appendToElement","emptyHeader","colGroupElement","rightAxisPanelWidth","rightPanelHeight","topLeftHeight","columnRows","trCell","childNodes","colHeight","columnRows_1","rowHeader_1","rhElement","rightAxisWidth","alignIcon","emptyRowHeader","groupHeight","columnRows_2","rowHeader_2","handlerElement","lastButton","lastButtonWidth","buttonWidth","rowHeaderTable","rowContentTable","rowContent","colwidth","valueColWidth","setColWidth","dropIndicatorUpdate","originalEvent","ConditionalFormatting","fieldsDropDown","conditionsDropDown","fontNameDropDown","fontSizeDropDown","newFormat","addButtonClick","cls.FLAT_CLASS","refreshConditionValues","addFormat","createDialogElements","renderDropDowns","renderColorPicker","button","innerDiv","table","tRow","td","valuelabel","measureDropdown","measureInput","conditionDropdown","conditionInput","cls.INPUT","valuespan","formatlabel","fontNameDropdown","fontNameInput","fontSizeDropdown","fontSizeInput","colorPicker1","colorPicker2","valuePreview","i_1","popupHeight","popupWidth","measureChange","conditionChange","fontNames","fontNameChange","fontSizeChange","ColorPicker","fontColorChange","nextElementSibling","backColorChange","toggleBtn","toggleButtonClick","hex","h","charAt","exec","colour","colours","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred ","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","showConditionalFormattingDialog"],"mappings":"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"}