{"version":3,"file":"ej2-pivotview.umd.min.js","sources":["../src/base/util.js","../src/base/engine.js","../src/common/base/constant.js","../src/common/base/css-constant.js","../src/pivotview/renderer/render.js","../src/pivotview/model/dataSource.js","../src/pivotview/model/gridsettings.js","../src/pivotview/actions/excel-export.js","../src/pivotview/actions/pdf-export.js","../src/pivotview/actions/keyboard.js","../src/common/popups/context-menu.js","../src/pivotview/actions/virtualscroll.js","../src/common/popups/drillthrough-dialog.js","../src/pivotview/actions/drill-through.js","../src/pivotview/base/pivotview.js","../src/common/actions/keyboard.js","../src/common/actions/event-base.js","../src/common/actions/node-state-modified.js","../src/common/actions/dataSource-update.js","../src/common/popups/error-dialog.js","../src/common/popups/filter-dialog.js","../src/common/base/pivot-common.js","../src/pivotfieldlist/renderer/dialog-renderer.js","../src/pivotfieldlist/renderer/tree-renderer.js","../src/pivotfieldlist/renderer/axis-table-renderer.js","../src/common/popups/aggregate-menu.js","../src/common/actions/pivot-button.js","../src/pivotfieldlist/renderer/axis-field-renderer.js","../src/pivotfieldlist/renderer/renderer.js","../src/pivotfieldlist/base/field-list.js","../src/common/calculatedfield/calculated-field.js","../src/common/actions/field-list.js","../src/common/actions/common.js","../src/common/grouping-bar/axis-field-renderer.js","../src/common/grouping-bar/grouping-bar.js","../src/common/conditionalformatting/conditional-formatting.js"],"sourcesContent":["/**\n * This is a file to perform common utility for OLAP and Relational datasource\n * @hidden\n */\nvar PivotUtil = /** @class */ (function () {\n    function PivotUtil() {\n    }\n    PivotUtil.getType = function (value) {\n        var val;\n        val = (value && value.getDay) ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        return val;\n    };\n    PivotUtil.resetTime = function (date) {\n        date.setHours(0, 0, 0, 0);\n        return date;\n    };\n    return PivotUtil;\n}());\nexport { PivotUtil };\n","import { extend, Internationalization, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PivotUtil } from './util';\n/**\n * PivotEngine is used to manipulate the relational or Multi-Dimensional data as pivoting values.\n */\n/** @hidden */\nvar PivotEngine = /** @class */ (function () {\n    /**\n     * Constructor for PivotEngine class\n     * @param  {DataOptions} dataSource?\n     * @param  {string} mode?\n     * @hidden\n     */\n    function PivotEngine(dataSource, mode, savedFieldList, pageSettings, enableValueSoring, isDrillThrough) {\n        /** @hidden */\n        this.formatFields = {};\n        /** @hidden */\n        this.calculatedFields = {};\n        /** @hidden */\n        this.calculatedFormulas = {};\n        /** @hidden */\n        this.valueAxis = 0;\n        /** @hidden */\n        this.saveDataHeaders = {};\n        /** @hidden */\n        this.columnCount = 0;\n        /** @hidden */\n        this.rowCount = 0;\n        /** @hidden */\n        this.colFirstLvl = 0;\n        /** @hidden */\n        this.rowFirstLvl = 0;\n        /** @hidden */\n        this.rowStartPos = 0;\n        /** @hidden */\n        this.colStartPos = 0;\n        /** @hidden */\n        this.enableValueSorting = false;\n        /** @hidden */\n        this.headerCollection = { rowHeaders: [], columnHeaders: [], rowHeadersCount: 0, columnHeadersCount: 0 };\n        this.valueMatrix = [];\n        this.indexMatrix = [];\n        this.rMembers = [];\n        this.cMembers = [];\n        this.memberCnt = -1;\n        this.pageInLimit = false;\n        this.endPos = 0;\n        this.removeCount = 0;\n        this.colHdrBufferCalculated = false;\n        this.colValuesLength = 1;\n        this.rowValuesLength = 1;\n        this.slicedHeaders = [];\n        this.fieldFilterMem = {};\n        this.filterPosObj = {};\n        this.selectedHeaders = { selectedHeader: [], values: [] };\n        this.rawIndexObject = {};\n        this.isEditing = false;\n        this.renderEngine(dataSource, mode, savedFieldList, pageSettings, enableValueSoring, isDrillThrough);\n    }\n    PivotEngine.prototype.renderEngine = function (dataSource, mode, savedFieldList, pageSettings, enableValueSoring, isDrillThrough) {\n        this.formatFields = {};\n        this.calculatedFields = {};\n        this.calculatedFormulas = {};\n        this.valueAxis = 0;\n        this.saveDataHeaders = {};\n        this.columnCount = 0;\n        this.rowCount = 0;\n        this.colFirstLvl = 0;\n        this.rowFirstLvl = 0;\n        this.rowStartPos = 0;\n        this.colStartPos = 0;\n        this.enableValueSorting = false;\n        this.headerCollection = { rowHeaders: [], columnHeaders: [], rowHeadersCount: 0, columnHeadersCount: 0 };\n        this.valueMatrix = [];\n        this.indexMatrix = [];\n        this.rMembers = [];\n        this.cMembers = [];\n        this.memberCnt = -1;\n        this.pageInLimit = false;\n        this.endPos = 0;\n        this.removeCount = 0;\n        this.colHdrBufferCalculated = false;\n        this.colValuesLength = 1;\n        this.rowValuesLength = 1;\n        this.slicedHeaders = [];\n        this.fieldFilterMem = {};\n        this.filterPosObj = {};\n        this.selectedHeaders = { selectedHeader: [], values: [] };\n        this.rawIndexObject = {};\n        this.isEditing = false;\n        var fields;\n        var val;\n        var filterRw;\n        this.globalize = new Internationalization();\n        this.enableSort = dataSource.enableSorting;\n        this.alwaysShowValueHeader = dataSource.alwaysShowValueHeader;\n        this.showSubTotals = isNullOrUndefined(dataSource.showSubTotals) ? true : dataSource.showSubTotals;\n        this.showRowSubTotals = isNullOrUndefined(dataSource.showRowSubTotals) ? true : dataSource.showRowSubTotals;\n        this.showColumnSubTotals = isNullOrUndefined(dataSource.showColumnSubTotals) ? true : dataSource.showColumnSubTotals;\n        this.showGrandTotals = isNullOrUndefined(dataSource.showGrandTotals) ? true : dataSource.showGrandTotals;\n        this.showRowGrandTotals = isNullOrUndefined(dataSource.showRowGrandTotals) ? true : dataSource.showRowGrandTotals;\n        this.showColumnGrandTotals = isNullOrUndefined(dataSource.showColumnGrandTotals) ? true : dataSource.showColumnGrandTotals;\n        this.allowValueFilter = dataSource.allowValueFilter;\n        this.isValueFilterEnabled = false;\n        this.enableValueSorting = enableValueSoring;\n        this.valueContent = [];\n        if (dataSource.data && dataSource.data[0]) {\n            fields = dataSource.data[0];\n            this.fields = Object.keys(fields);\n            this.rows = dataSource.rows ? dataSource.rows : [];\n            this.columns = dataSource.columns ? dataSource.columns : [];\n            this.filters = dataSource.filters ? dataSource.filters : [];\n            this.formats = dataSource.formatSettings ? dataSource.formatSettings : [];\n            this.values = dataSource.values ? dataSource.values : [];\n            this.calculatedFieldSettings = dataSource.calculatedFieldSettings ? dataSource.calculatedFieldSettings : [];\n            this.enableSort = dataSource.enableSorting === undefined ? true : dataSource.enableSorting;\n            this.validateFilters(dataSource);\n            this.isExpandAll = (this.isValueFiltersAvail && dataSource.allowValueFilter) ? true : dataSource.expandAll;\n            this.drilledMembers =\n                dataSource.drilledMembers ? (this.isValueFiltersAvail && dataSource.allowValueFilter) ? [] : dataSource.drilledMembers : [];\n            this.isMutiMeasures = this.values.length > 1 ? true : false;\n            this.valueAxis = dataSource.valueAxis === 'row' ? 1 : 0;\n            this.emptyCellTextContent = dataSource.emptyCellsTextContent ? dataSource.emptyCellsTextContent : '';\n            this.rowValuesLength = this.valueAxis === 1 ? this.values.length : 1;\n            this.colValuesLength = this.valueAxis === 0 ? this.values.length : 1;\n            this.valueSortSettings = dataSource.valueSortSettings ||\n                { sortOrder: 'None', headerDelimiter: '.', headerText: '', columnIndex: undefined };\n            this.valueSortData = [];\n            this.pageSettings = pageSettings ? pageSettings : this.pageSettings;\n            this.savedFieldList = savedFieldList;\n            this.isDrillThrough = isDrillThrough ? isDrillThrough : false;\n            this.getFieldList(fields, this.enableSort, dataSource.allowValueFilter);\n            this.fillFieldMembers(dataSource.data, this.indexMatrix);\n            this.updateSortSettings(dataSource.sortSettings, this.enableSort);\n            this.valueMatrix = this.generateValueMatrix(dataSource.data);\n            this.filterMembers = [];\n            this.updateFilterMembers(dataSource);\n            this.generateGridData(dataSource);\n        }\n    };\n    PivotEngine.prototype.getFormattedFields = function (fields) {\n        var cnt = this.formats.length;\n        while (cnt--) {\n            this.formatFields[this.formats[cnt].name] = this.formats[cnt];\n            // for (let len: number = 0, lnt: number = fields.length; len < lnt; len++) {\n            // if (fields[len] && fields[len].name === this.formats[cnt].name) {\n            //     this.formatFields[fields[len].name] = this.formats[cnt];\n            // }\n            // }\n        }\n    };\n    PivotEngine.prototype.getFieldList = function (fields, isSort, isValueFilteringEnabled) {\n        var type;\n        var keys = this.fields;\n        var dataFields = extend([], this.rows, null, true);\n        dataFields = dataFields.concat(this.columns, this.values, this.filters);\n        this.getFormattedFields(dataFields);\n        this.getCalculatedField(keys);\n        var len = keys.length;\n        if (this.savedFieldList) {\n            this.fieldList = this.savedFieldList;\n            while (len--) { /** while is used for better performance than for */\n                var key = keys[len];\n                if (this.fieldList[key]) {\n                    this.fieldList[key].isSelected = false;\n                    this.fieldList[key].index = len;\n                    this.fieldList[key].filter = [];\n                    this.fieldList[key].isExcelFilter = false;\n                    this.fieldList[key].filterType = '';\n                    if (this.isValueFiltersAvail && isValueFilteringEnabled) {\n                        this.fieldList[key].dateMember = [];\n                        this.fieldList[key].formattedMembers = {};\n                        this.fieldList[key].members = {};\n                    }\n                }\n                else {\n                    this.fieldList[key] = {\n                        id: key,\n                        caption: key,\n                        type: (type === undefined || type === 'undefined') ? 'number' : type,\n                        filterType: '',\n                        index: len,\n                        filter: [],\n                        sort: isSort ? 'Ascending' : 'None',\n                        isSelected: false\n                    };\n                }\n            }\n        }\n        else {\n            while (len--) { /** while is used for better performance than for */\n                var key = keys[len];\n                type = PivotUtil.getType(fields[key]);\n                if (!this.fieldList) {\n                    this.fieldList = {};\n                }\n                this.fieldList[key] = {\n                    id: key,\n                    caption: key,\n                    type: (type === undefined || type === 'undefined') ? 'number' : type,\n                    filterType: '',\n                    index: len,\n                    filter: [],\n                    sort: isSort ? 'Ascending' : 'None',\n                    isSelected: false\n                };\n            }\n        }\n        this.updateTreeViewData(dataFields);\n    };\n    PivotEngine.prototype.updateFieldList = function (savedFieldList) {\n        var keys = this.fields;\n        var len = keys.length;\n        while (len--) { /** while is used for better performance than for */\n            this.fieldList[keys[len]].isExcelFilter = savedFieldList[keys[len]].isExcelFilter;\n        }\n    };\n    PivotEngine.prototype.updateTreeViewData = function (fields) {\n        var cnt = fields.length;\n        var lnt = this.calculatedFieldSettings.length;\n        while (cnt--) {\n            if (this.fieldList[fields[cnt].name]) {\n                var field = this.fieldList[fields[cnt].name];\n                field.caption = fields[cnt].caption ? fields[cnt].caption : fields[cnt].name;\n                field.isSelected = true;\n                field.showNoDataItems = fields[cnt].showNoDataItems;\n                field.aggregateType = fields[cnt].type;\n                field.baseField = fields[cnt].baseField;\n                field.baseItem = fields[cnt].baseItem;\n            }\n        }\n        while (lnt--) {\n            this.fieldList[this.calculatedFieldSettings[lnt].name].aggregateType = 'CalculatedField';\n            this.fieldList[this.calculatedFieldSettings[lnt].name].formula = this.calculatedFieldSettings[lnt].formula;\n        }\n    };\n    PivotEngine.prototype.getCalculatedField = function (keys) {\n        for (var _i = 0, _a = this.calculatedFieldSettings; _i < _a.length; _i++) {\n            var field = _a[_i];\n            this.calculatedFields[field.name] = extend({}, field, null, true);\n            this.calculatedFields[field.name].actualFormula = field.formula;\n        }\n        var fieldKeys = Object.keys(this.calculatedFields);\n        for (var calc = 0, cnt = fieldKeys.length; calc < cnt; calc++) {\n            var field = this.calculatedFields[fieldKeys[calc]];\n            var calcProperties = field.properties;\n            var actualFormula = (calcProperties ? calcProperties.formula : field.formula).replace(/ +/g, '');\n            var formula = actualFormula.replace(/\"/g, '');\n            field.formula = formula.indexOf('^') > -1 ? this.powerFunction(formula) : formula;\n            field.name = calcProperties ? calcProperties.name : field.name;\n            keys.push(field.name);\n            var formulaType = actualFormula.split('\\\"');\n            for (var len = 0, lmt = formulaType.length; len < lmt; len++) {\n                var type = formulaType[len];\n                var aggregateValue = type.split(/[ .:;?!~,`\"&|()<>{}\\[\\]\\r\\n/\\\\]+/);\n                var selectedString = (aggregateValue[0] === 'DistinctCount' ?\n                    'DistinctCount' : aggregateValue[0] === 'PopulationStDev' ?\n                    'PopulationStDev' : aggregateValue[0] === 'SampleStDev' ? 'SampleStDev' : aggregateValue[0] === 'PopulationVar' ?\n                    'PopulationVar' : aggregateValue[0] === 'SampleVar' ? 'SampleVar' : aggregateValue[0]);\n                if (['Sum', 'Count', 'Min', 'Max', 'Avg', 'Product', 'DistinctCount',\n                    'PopulationStDev', 'SampleStDev', 'PopulationVar', 'SampleVar'].indexOf(selectedString) !== -1) {\n                    var index = keys.indexOf(aggregateValue[1]);\n                    if (!this.calculatedFormulas[field.name]) {\n                        this.calculatedFormulas[field.name] = [{\n                                index: index,\n                                type: selectedString,\n                                formula: type,\n                            }];\n                    }\n                    else {\n                        this.calculatedFormulas[field.name].push({\n                            index: index,\n                            type: selectedString,\n                            formula: type,\n                        });\n                    }\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.validateFilters = function (data) {\n        this.isValueFiltersAvail = false;\n        var filterElements = data.filterSettings ? data.filterSettings : [];\n        var dataFields = extend([], this.rows, null, true);\n        dataFields = dataFields.concat(this.columns);\n        for (var _i = 0, filterElements_1 = filterElements; _i < filterElements_1.length; _i++) {\n            var filter = filterElements_1[_i];\n            for (var _a = 0, dataFields_1 = dataFields; _a < dataFields_1.length; _a++) {\n                var field = dataFields_1[_a];\n                if (filter.name === field.name && filter.type === 'Value') {\n                    this.isValueFiltersAvail = true;\n                    break;\n                }\n            }\n            if (this.isValueFiltersAvail) {\n                break;\n            }\n        }\n    };\n    PivotEngine.prototype.fillFieldMembers = function (data, indMat) {\n        var keys = this.fields;\n        var dlen = data.length;\n        var fList = this.fieldList;\n        var kLn = keys.length;\n        for (var kl = 0; kl < kLn; kl++) {\n            var key = keys[kl];\n            if (!fList[key].members) {\n                fList[key].members = {};\n            }\n            if (!fList[key].formattedMembers) {\n                fList[key].formattedMembers = {};\n            }\n            if (!fList[key].dateMember) {\n                fList[key].dateMember = [];\n            }\n            var members = fList[key].members;\n            var isDataAvail = Object.keys(members).length > 0 ? true : false;\n            var formattedMembers = fList[key].formattedMembers;\n            var dateMember = fList[key].dateMember;\n            var membersCnt = 0;\n            var fmembersCnt = 0;\n            //let sort: string[] = [];\n            for (var dl = 0; dl < dlen; dl++) {\n                var mkey = data[dl][key];\n                if (!isNullOrUndefined(mkey)) {\n                    if (!isDataAvail) {\n                        var fKey = mkey;\n                        var formattedValue = (this.pageSettings &&\n                            !(this.formatFields[key] && this.formatFields[key].type === 'date')) ? ({\n                            formattedText: isNullOrUndefined(mkey) ? mkey : mkey.toString(),\n                            actualText: mkey\n                        }) : this.getFormattedValue(mkey, key);\n                        if (formattedValue.formattedText) {\n                            fKey = formattedValue.formattedText;\n                        }\n                        if (!members.hasOwnProperty(mkey)) {\n                            membersCnt++;\n                            members[mkey] = {\n                                index: [dl], ordinal: membersCnt,\n                                isDrilled: this.isExpandAll ? true : false\n                            };\n                            dateMember.push({ formattedText: formattedValue.formattedText, actualText: formattedValue.actualText });\n                            //sort.push(mkey);\n                        }\n                        else {\n                            members[mkey].index.push(dl);\n                        }\n                        if (!formattedMembers.hasOwnProperty(fKey)) {\n                            fmembersCnt++;\n                            formattedMembers[fKey] = {\n                                index: [dl], ordinal: fmembersCnt,\n                                isDrilled: this.isExpandAll ? true : false\n                            };\n                        }\n                        else {\n                            formattedMembers[fKey].index.push(dl);\n                        }\n                    }\n                    if (!(indMat[dl])) {\n                        indMat[dl] = [];\n                        indMat[dl][kl] = members[mkey].ordinal;\n                    }\n                    else {\n                        indMat[dl][kl] = members[mkey].ordinal;\n                    }\n                }\n            }\n            /*sort = Object.keys(members).sort();\n            let sortedMembers: Members = {};\n            for (let sln: number = 0, slt: number = sort.length; sln < slt; sln++) {\n                sortedMembers[sort[sln]] = members[sort[sln]];\n            }\n            fList[key].members = sortedMembers; */\n        }\n        this.fillDrilledInfo();\n    };\n    PivotEngine.prototype.fillDrilledInfo = function () {\n        for (var key = 0; key < this.drilledMembers.length; key++) {\n            var fieldName = this.drilledMembers[key].name;\n            for (var mem = 0; mem < this.drilledMembers[key].items.length; mem++) {\n                var memberName = this.drilledMembers[key].items[mem];\n                var field = this.fieldList[fieldName];\n                if (field && field.members[memberName]) {\n                    field.members[memberName].isDrilled = this.isExpandAll ? false : true;\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.generateValueMatrix = function (data) {\n        var keys = this.fields;\n        var len = data.length;\n        var vMat = [];\n        var keyLen = keys.length;\n        var flList = this.fieldList;\n        while (len--) {\n            var record = data[len];\n            var tkln = keyLen;\n            //if (isNullOrUndefined(vMat[len])) {\n            vMat[len] = [];\n            //}\n            while (tkln--) {\n                var key = keys[tkln];\n                vMat[len][tkln] = (flList[key].type === 'number') ? data[len][key] : 1;\n            }\n        }\n        return vMat;\n    };\n    PivotEngine.prototype.updateSortSettings = function (sortSettings, isSort) {\n        for (var sln = 0, slt = sortSettings ? sortSettings.length : 0; sln < slt && isSort; sln++) {\n            this.fieldList[sortSettings[sln].name].sort = sortSettings[sln].order;\n        }\n    };\n    PivotEngine.prototype.updateFilterMembers = function (source) {\n        var filterRw = this.filterMembers;\n        var list = {};\n        //let eList: {[key: string] : number} = {};\n        var isInclude = this.getFilters(source, list);\n        //this.getFilterExcludeList(source.rows, flist);\n        //this.getFilterExcludeList(source.columns, flist);\n        //this.getFilterExcludeList(source.filters, flist);\n        // let filters: Iterator = isInclude ? iList : eList;\n        var dln = this.indexMatrix.length;\n        if (isInclude) {\n            var keys = list.include.index;\n            for (var ln = 0; ln < keys.length; ln++) {\n                if (list.exclude === undefined || list.exclude.indexObject[keys[ln]] === undefined) {\n                    filterRw.push(keys[ln]);\n                }\n            }\n        }\n        else {\n            for (var ln = 0; ln < dln; ln++) {\n                if (list.exclude === undefined || list.exclude.indexObject[ln] === undefined) {\n                    filterRw.push(ln);\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.getFilters = function (source, ilist) {\n        var filterElements = source.filterSettings ? source.filterSettings : [];\n        var filters = this.filters;\n        var isInclude = false;\n        var filter = [];\n        //let type: string;\n        for (var rln = 0, rlt = filterElements.length; rln < rlt; rln++) {\n            var filterElement = filterElements[rln].properties ?\n                filterElements[rln].properties : filterElements[rln];\n            if (this.fieldList[filterElement.name].isSelected && this.isValidFilterField(filterElement, source.allowLabelFilter)) {\n                this.applyLabelFilter(filterElement);\n                filter = filterElement ? filterElement.items : [];\n                if (filterElement.type && filterElement.type === 'Include') {\n                    /* tslint:disable-next-line:max-line-length */\n                    this.frameFilterList(filter, filterElement.name, ilist, 'include', filterElement.showLabelFilter, isInclude);\n                    isInclude = true;\n                }\n                else {\n                    this.frameFilterList(filter, filterElement.name, ilist, 'exclude', filterElement.showLabelFilter);\n                }\n                if (filterElement.showLabelFilter) {\n                    filterElement.items = [];\n                    filterElement.type = filterElement.showDateFilter ? 'Date' : filterElement.showNumberFilter ? 'Number' : 'Label';\n                }\n            }\n        }\n        /* for (let cln: number = 0, clt: number = cols.length; cln < clt; cln ++) {\n             filter = cols[cln].filter ? cols[cln].filter.items : [];\n             if (filter.length && cols[cln].filter.type && cols[cln].filter.type === 'include') {\n                 //type = cols[cln].filter.type;\n                 this.frameFilterList(filter, cols[cln].name, ilist, 'include', isInclude);\n                 isInclude = true;\n             } else {\n                 this.frameFilterList(filter, cols[cln].name, ilist, 'exclude');\n             }\n         }\n         for (let vln: number = 0, vlt: number = filters.length; vln < vlt; vln ++) {\n             filter = filters[vln].filter ? filters[vln].filter.items : [];\n             if (filter.length && filters[vln].filter.type && filters[vln].filter.type === 'include') {\n                 this.frameFilterList(filter, filters[vln].name, ilist, 'include', isInclude);\n                 isInclude = true;\n             } else {\n                 this.frameFilterList(filter, filters[vln].name, ilist, 'exclude');\n             }\n         } */\n        return isInclude;\n    };\n    PivotEngine.prototype.isValidFilterField = function (filterElement, allowLabelFiltering) {\n        var isValidFilterElement = false;\n        var filterTypes = ['Include', 'Exclude'];\n        var dataFields = extend([], this.rows, null, true);\n        dataFields = dataFields.concat(this.columns);\n        if (this.fieldList[filterElement.name].isSelected && filterTypes.indexOf(filterElement.type) >= 0) {\n            var isNotValidFilterElement = false;\n            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\n                var field = _a[_i];\n                if (filterElement.name === field.name) {\n                    isNotValidFilterElement = true;\n                    break;\n                }\n            }\n            if (!isNotValidFilterElement) {\n                isValidFilterElement = true;\n            }\n        }\n        else {\n            for (var _b = 0, dataFields_2 = dataFields; _b < dataFields_2.length; _b++) {\n                var field = dataFields_2[_b];\n                if (filterElement.name === field.name && allowLabelFiltering &&\n                    (['Label', 'Date', 'Number'].indexOf(filterElement.type) >= 0)) {\n                    isValidFilterElement = true;\n                    break;\n                }\n            }\n        }\n        return isValidFilterElement;\n    };\n    PivotEngine.prototype.applyLabelFilter = function (filterElement) {\n        if (['Label', 'Date', 'Number'].indexOf(filterElement.type) >= 0) {\n            var members = Object.keys(this.fieldList[filterElement.name].members);\n            filterElement.showLabelFilter = true;\n            if (filterElement.type === 'Label') {\n                /* tslint:disable-next-line:max-line-length */\n                filterElement.items = this.getLabelFilterMembers(members, filterElement.condition, filterElement.value1, filterElement.value2);\n            }\n            else if (filterElement.type === 'Date') {\n                filterElement.showDateFilter = true;\n                /* tslint:disable-next-line:max-line-length */\n                filterElement.items = this.getDateFilterMembers(members, filterElement.name, filterElement.condition, filterElement.value1, filterElement.value2);\n            }\n            else {\n                filterElement.showNumberFilter = true;\n                filterElement.items = [];\n                for (var _i = 0, members_1 = members; _i < members_1.length; _i++) {\n                    var member = members_1[_i];\n                    var operand1 = this.getParsedValue(filterElement.name, filterElement.value1);\n                    var operand2 = this.getParsedValue(filterElement.name, filterElement.value2);\n                    var cValue = this.getParsedValue(filterElement.name, member);\n                    /* tslint:disable-next-line:max-line-length */\n                    if (this.validateFilterValue(cValue, filterElement.condition, operand1, operand2)) {\n                        filterElement.items.push(member);\n                    }\n                }\n            }\n            var excludeOperators = ['DoesNotBeginWith', 'DoesNotContains', 'DoesNotEndsWith', 'DoesNotEquals', 'NotBetween'];\n            filterElement.type = (excludeOperators.indexOf(filterElement.condition) > -1 &&\n                !filterElement.showNumberFilter) ? 'Exclude' : 'Include';\n        }\n        else {\n            filterElement.showLabelFilter = false;\n        }\n    };\n    PivotEngine.prototype.getLabelFilterMembers = function (members, operator, value1, value2) {\n        var items = [];\n        for (var _i = 0, members_2 = members; _i < members_2.length; _i++) {\n            var member = members_2[_i];\n            var filterValue = member.toLowerCase();\n            if (value1.toString()) {\n                switch (operator) {\n                    case 'Equals':\n                    case 'DoesNotEquals':\n                        if (filterValue === value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'BeginWith':\n                    case 'DoesNotBeginWith':\n                        if (filterValue.indexOf(value1.toLowerCase()) === 0) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'EndsWith':\n                    case 'DoesNotEndsWith':\n                        if (filterValue.match(value1.toLowerCase() + '$') !== null) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'Contains':\n                    case 'DoesNotContains':\n                        if (filterValue.indexOf(value1.toLowerCase()) > -1) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'GreaterThan':\n                        if (filterValue > value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'GreaterThanOrEqualTo':\n                        if (filterValue >= value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'LessThan':\n                        if (filterValue < value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'LessThanOrEqualTo':\n                        if (filterValue <= value1.toLowerCase()) {\n                            items.push(member);\n                        }\n                        break;\n                    case 'Between':\n                    case 'NotBetween':\n                        if ((filterValue >= value1.toLowerCase()) && (filterValue <= value2.toLowerCase())) {\n                            items.push(member);\n                        }\n                        break;\n                }\n            }\n        }\n        return items;\n    };\n    PivotEngine.prototype.getDateFilterMembers = function (members, name, operator, value1, value2) {\n        var items = [];\n        for (var _i = 0, members_3 = members; _i < members_3.length; _i++) {\n            var member = members_3[_i];\n            var filterValue = new Date(member);\n            if (value1) {\n                switch (operator) {\n                    case 'Equals':\n                    case 'DoesNotEquals':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() === (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'After':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() > (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'AfterOrEqualTo':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() >= (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'Before':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() < (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'BeforeOrEqualTo':\n                        if ((PivotUtil.resetTime(filterValue)).getTime() <= (PivotUtil.resetTime(value1)).getTime()) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                    case 'Between':\n                    case 'NotBetween':\n                        if (((PivotUtil.resetTime(filterValue)).getTime() >= (PivotUtil.resetTime(value1)).getTime()) &&\n                            ((PivotUtil.resetTime(filterValue)).getTime() <= (PivotUtil.resetTime(value2)).getTime())) {\n                            items.push(this.getFormattedValue(member, name).formattedText);\n                        }\n                        break;\n                }\n            }\n        }\n        return items;\n    };\n    PivotEngine.prototype.validateFilterValue = function (val, operator, value1, value2) {\n        var isMemberInclude = false;\n        if (typeof (value1) === 'number') {\n            switch (operator) {\n                case 'Equals':\n                    if (val === value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'DoesNotEquals':\n                    if (val !== value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'GreaterThan':\n                    if (val > value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'GreaterThanOrEqualTo':\n                    if (val >= value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'LessThan':\n                    if (val < value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'LessThanOrEqualTo':\n                    if (val <= value1) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'Between':\n                    if ((val >= value1) && (val <= value2)) {\n                        isMemberInclude = true;\n                    }\n                    break;\n                case 'NotBetween':\n                    if (!((val >= value1) && (val <= value2))) {\n                        isMemberInclude = true;\n                    }\n                    break;\n            }\n        }\n        return isMemberInclude;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.frameFilterList = function (filter, name, list, type, isLabelFilter, isInclude) {\n        if (!list[type]) {\n            list[type] = { indexObject: {}, index: [] };\n            this.updateFilter(filter, name, list, type, isLabelFilter, isInclude);\n        }\n        else {\n            this.updateFilter(filter, name, list, type, isLabelFilter, isInclude);\n        }\n        // }\n    };\n    PivotEngine.prototype.updateFilter = function (filter, name, list, type, isLabelFilter, isInclude) {\n        var fln = 0;\n        var field = this.fieldList[name];\n        field.filter = filter;\n        field.filterType = type;\n        field.isExcelFilter = isLabelFilter;\n        var members = (this.formatFields[name] && this.formatFields[name].type === 'date') ?\n            field.formattedMembers : field.members;\n        var allowFil = isInclude;\n        var final = {};\n        var filterObj = {};\n        final[type] = { indexObject: {}, index: [] };\n        this.fieldFilterMem[name] = { memberObj: {} };\n        while (filter[fln]) {\n            var indx = members[filter[fln]].index;\n            if (type === 'include') {\n                for (var iln = 0, ilt = indx.length; iln < ilt; iln++) {\n                    if (!allowFil || list[type].indexObject[indx[iln]] !== undefined) {\n                        final[type].indexObject[indx[iln]] = indx[iln];\n                        final[type].index.push(indx[iln]);\n                    }\n                }\n            }\n            else {\n                for (var iln = 0, ilt = indx.length; iln < ilt; iln++) {\n                    if (list[type].indexObject[indx[iln]] === undefined) {\n                        list[type].indexObject[indx[iln]] = indx[iln];\n                        list[type].index.push(indx[iln]);\n                    }\n                }\n                this.fieldFilterMem[name].memberObj[filter[fln]] = filter[fln];\n            }\n            fln++;\n        }\n        if (type === 'include') {\n            list[type] = final[type];\n            for (var iln = 0; iln < filter.length; iln++) {\n                filterObj[filter[iln]] = filter[iln];\n            }\n            var items = Object.keys(members);\n            for (var iln = 0, ilt = items.length; iln < ilt; iln++) {\n                if (filterObj[items[iln]] === undefined) {\n                    this.fieldFilterMem[name].memberObj[items[iln]] = items[iln];\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.applyValueFiltering = function (rowData, level, rows, columns, valueFilter, rowFilterData, type) {\n        this.isValueFiltered = false;\n        var allMember = extend({}, rows[rows.length - 1], null, true);\n        this.getFilteredData(rows, columns, valueFilter, rowFilterData, level, rowData.name, allMember, type);\n        if (this.isValueFiltered) {\n            rowFilterData.push(allMember);\n            rows = rowFilterData;\n        }\n        return rows;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getFilteredData = function (rows, columns, filterSettings, rowFilterData, level, fieldName, allMember, type) {\n        var rLen = rows.length;\n        for (var i = 0; i < rLen; i++) {\n            if (filterSettings[fieldName]) {\n                if (rows[i].level === level) {\n                    this.isValueFiltered = true;\n                    this.fieldList[fieldName].isExcelFilter = true;\n                    var value = 0;\n                    var measure = filterSettings[fieldName].measure;\n                    var mPos = this.fieldList[measure].index;\n                    var aggregate = this.fieldList[measure].aggregateType;\n                    value = (type === 'row' ? this.getAggregateValue(rows[i].index, columns.indexObject, mPos, aggregate) :\n                        this.getAggregateValue(columns.index, rows[i].indexObject, mPos, aggregate));\n                    var operand1 = this.getParsedValue(measure, filterSettings[fieldName].value1);\n                    var operand2 = this.getParsedValue(measure, filterSettings[fieldName].value2);\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!this.validateFilterValue(value, filterSettings[fieldName].condition, operand1, operand2) && rows[i].type !== 'grand sum') {\n                        var data = this.removefilteredData(rows[i], this.valueFilteredData);\n                        var row = data ? data : rows[i];\n                        this.validateFilteredParentData(row, this.valueFilteredData, allMember, 0, level, type);\n                    }\n                    else if (rows[i].type !== 'grand sum') {\n                        rowFilterData.push(extend({}, rows[i], null, true));\n                        rowFilterData[rowFilterData.length - 1].isLevelFiltered = true;\n                    }\n                }\n                else if (rows[i].hasChild && rows[i].members.length > 0 && rows[i].type !== 'grand sum') {\n                    rowFilterData.push(extend({}, rows[i], null, true));\n                    rowFilterData[rowFilterData.length - 1].members = [];\n                    rowFilterData[rowFilterData.length - 1].isLevelFiltered = true;\n                    /* tslint:disable-next-line:max-line-length */\n                    this.getFilteredData(rows[i].members, columns, filterSettings, rowFilterData[rowFilterData.length - 1].members, level, fieldName, allMember, type);\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.getParsedValue = function (measure, value) {\n        var cValue = value ? value.toString() : '';\n        if (this.formatFields[measure] && value) {\n            var formatSetting = extend({}, this.formatFields[measure], null, true);\n            delete formatSetting.name;\n            return this.globalize.parseNumber(cValue, formatSetting);\n        }\n        else {\n            return this.globalize.parseNumber(cValue, { format: 'N' });\n        }\n    };\n    PivotEngine.prototype.removefilteredData = function (row, rowFilterData) {\n        var rows = extend([], rowFilterData, null, true);\n        var filteredData;\n        for (var i = 0; i < rows.length; i++) {\n            if (row.isLevelFiltered && row.axis === rows[i].axis &&\n                row.valueSort.levelName === rows[i].valueSort.levelName &&\n                row.actualText === rows[i].actualText && row.axis === rows[i].axis &&\n                row.level === rows[i].level && row.ordinal === rows[i].ordinal) {\n                filteredData = rows[i];\n                rowFilterData.splice(i, 1);\n                break;\n            }\n            else if (rowFilterData[i].hasChild && rowFilterData[i].members.length > 0) {\n                this.removefilteredData(row, rowFilterData[i].members);\n            }\n        }\n        return filteredData;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.validateFilteredParentData = function (row, rows, allMemberData, i, level, type) {\n        if (rows.length > 0) {\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var rowFilteredData = rows_1[_i];\n                if (rowFilteredData.level === i) {\n                    if (type === 'row') {\n                        var index = row.index;\n                        for (var _a = 0, index_1 = index; _a < index_1.length; _a++) {\n                            var key = index_1[_a];\n                            if (allMemberData.index.indexOf(key) >= 0) {\n                                allMemberData.index.splice(allMemberData.index.indexOf(key), 1);\n                            }\n                            if (((row.valueSort.levelName.toString()).indexOf(rowFilteredData.valueSort.levelName.toString()) >= 0) &&\n                                rowFilteredData.level !== level && rowFilteredData.index.indexOf(key) >= 0) {\n                                rowFilteredData.index.splice(rowFilteredData.index.indexOf(key), 1);\n                            }\n                        }\n                    }\n                    else {\n                        var index = row.indexObject;\n                        for (var _b = 0, _c = Object.keys(index); _b < _c.length; _b++) {\n                            var key = _c[_b];\n                            if (index.hasOwnProperty(key)) {\n                                delete allMemberData.indexObject[key];\n                                if (((row.valueSort.levelName.toString()).indexOf(rowFilteredData.valueSort.levelName.toString()) >= 0) &&\n                                    rowFilteredData.level !== level) {\n                                    delete rowFilteredData.indexObject[key];\n                                }\n                            }\n                        }\n                    }\n                    if (rowFilteredData && rowFilteredData.members.length > 0 &&\n                        rowFilteredData.members[0].level === i + 1 && rowFilteredData.members[0].level !== level) {\n                        this.validateFilteredParentData(row, rowFilteredData.members, allMemberData, i + 1, level, type);\n                    }\n                }\n            }\n        }\n        else {\n            if (type === 'row') {\n                var index = row.index;\n                for (var _d = 0, index_2 = index; _d < index_2.length; _d++) {\n                    var key = index_2[_d];\n                    if (allMemberData.index.indexOf(key) >= 0) {\n                        allMemberData.index.splice(allMemberData.index.indexOf(key), 1);\n                    }\n                }\n            }\n            else {\n                var index = row.indexObject;\n                for (var _e = 0, _f = Object.keys(index); _e < _f.length; _e++) {\n                    var key = _f[_e];\n                    if (index.hasOwnProperty(key)) {\n                        delete allMemberData.indexObject[key];\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.updateFramedHeaders = function (framedHeaders, dataHeaders, filteredHeaders, headers, type) {\n        for (var _i = 0, framedHeaders_1 = framedHeaders; _i < framedHeaders_1.length; _i++) {\n            var dHeader = framedHeaders_1[_i];\n            this.isHeaderAvail = false;\n            if (this.validateFilteredHeaders(dHeader, filteredHeaders, type) || dHeader.type === 'grand sum') {\n                if (type === 'row') {\n                    this.rowCount += this.rowValuesLength;\n                }\n                else {\n                    this.columnCount += this.colValuesLength;\n                }\n                headers.push(extend({}, dHeader, null, true));\n                headers[headers.length - 1].members = [];\n                if (dHeader.hasChild && dHeader.isDrilled && dHeader.members.length > 0) {\n                    this.updateFramedHeaders(dHeader.members, dataHeaders, filteredHeaders, headers[headers.length - 1].members, type);\n                }\n            }\n        }\n        return this.filterFramedHeaders;\n    };\n    PivotEngine.prototype.validateFilteredHeaders = function (dHeader, filteredHeaders, type) {\n        for (var _i = 0, filteredHeaders_1 = filteredHeaders; _i < filteredHeaders_1.length; _i++) {\n            var vHeader = filteredHeaders_1[_i];\n            if (!this.isHeaderAvail) {\n                if (dHeader.actualText === vHeader.actualText &&\n                    dHeader.level === vHeader.level &&\n                    dHeader.valueSort.levelName === vHeader.valueSort.levelName) {\n                    if (type === 'row') {\n                        if (vHeader.index.length > 0) {\n                            this.isHeaderAvail = true;\n                            dHeader.index = vHeader.index;\n                            return true;\n                        }\n                        else {\n                            this.isHeaderAvail = false;\n                            dHeader.index = vHeader.index;\n                            return false;\n                        }\n                    }\n                    else {\n                        if (Object.keys(vHeader.indexObject).length > 0) {\n                            this.isHeaderAvail = true;\n                            dHeader.indexObject = vHeader.indexObject;\n                            return true;\n                        }\n                        else {\n                            this.isHeaderAvail = false;\n                            dHeader.indexObject = vHeader.indexObject;\n                            return false;\n                        }\n                    }\n                }\n                else if (vHeader.hasChild && vHeader.members.length > 0 && vHeader.type !== 'grand sum') {\n                    this.validateFilteredHeaders(dHeader, vHeader.members, type);\n                }\n            }\n        }\n        return this.isHeaderAvail;\n    };\n    PivotEngine.prototype.isEmptyDataAvail = function (rowHeaders, columnHeaders) {\n        this.isEmptyData = false;\n        if (rowHeaders.length > 0 && rowHeaders[rowHeaders.length - 1].type === 'grand sum' &&\n            rowHeaders[rowHeaders.length - 1].index.length === 0) {\n            this.isEmptyData = true;\n        }\n        if (columnHeaders.length > 0 && columnHeaders[columnHeaders.length - 1].type === 'grand sum' &&\n            Object.keys(columnHeaders[columnHeaders.length - 1].indexObject).length === 0) {\n            this.isEmptyData = true;\n        }\n    };\n    /** @hidden */\n    PivotEngine.prototype.updateGridData = function (dataSource) {\n        this.indexMatrix = [];\n        for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {\n            var field = _a[_i];\n            this.fieldList[field].members = {};\n            this.fieldList[field].formattedMembers = {};\n            this.fieldList[field].dateMember = [];\n        }\n        this.fillFieldMembers(dataSource.data, this.indexMatrix);\n        this.valueMatrix = this.generateValueMatrix(dataSource.data);\n        this.filterMembers = [];\n        this.cMembers = [];\n        this.rMembers = [];\n        this.updateFilterMembers(dataSource);\n        this.isEditing = true;\n        this.isDrillThrough = true;\n        this.generateGridData(dataSource);\n        this.isEditing = false;\n    };\n    /* tslint:disable */\n    PivotEngine.prototype.generateGridData = function (dataSource, headerCollection) {\n        var keys = this.fields;\n        var columns = dataSource.columns ? dataSource.columns : [];\n        var data = dataSource.data;\n        var rows = dataSource.rows ? dataSource.rows : [];\n        var filterSettings = dataSource.filterSettings;\n        var values = dataSource.values ? dataSource.values : [];\n        var size = 1;\n        this.removeCount = 0;\n        this.isExpandAll = dataSource.expandAll;\n        this.drilledMembers = dataSource.drilledMembers ? dataSource.drilledMembers : [];\n        this.isEmptyData = false;\n        var filterMembers = [];\n        var showNoDataItems = (rows[0] && rows[0].showNoDataItems) || (columns[0] && columns[0].showNoDataItems);\n        if (showNoDataItems) {\n            for (var ln = 0; ln < this.indexMatrix.length; ln++) {\n                filterMembers.push(ln);\n            }\n        }\n        for (var ln = 0; ln < this.filterMembers.length; ln++) {\n            this.filterPosObj[this.filterMembers[ln]] = this.filterMembers[ln];\n        }\n        //let childrens: Field = this.fieldList[rows[0].name + ''];\n        this.valueSortSettings.columnIndex = undefined;\n        var st1 = new Date().getTime();\n        if (!this.isValueFilterEnabled || this.isEditing) {\n            if (!headerCollection || this.enableValueSorting) {\n                this.columnCount = 0;\n                this.rowCount = 0;\n                this.cMembers = [];\n                this.rMembers = [];\n                if (rows.length !== 0) {\n                    this.rMembers =\n                        this.getIndexedHeaders(rows, data, 0, rows[0].showNoDataItems ? filterMembers : this.filterMembers, 'row', '');\n                }\n                if (columns.length !== 0) {\n                    this.cMembers = this.getIndexedHeaders(columns, data, 0, columns[0].showNoDataItems ?\n                        filterMembers : this.filterMembers, 'column', '');\n                }\n                this.insertAllMembersCommon();\n            }\n            this.saveDataHeaders = (this.isValueFiltersAvail && dataSource.allowValueFilter) ? {\n                rowHeaders: extend([], this.rMembers, null, true),\n                columnHeaders: extend([], this.cMembers, null, true)\n            } : {};\n        }\n        this.pivotValues = [];\n        var gridData = [];\n        this.headerContent = [];\n        this.valueContent = [];\n        this.valueFilteredData = [];\n        this.filterFramedHeaders = [];\n        var rowheads = [];\n        var colheads = [];\n        var rowFilteredData = [];\n        var columnFilteredData = [];\n        var valuesCount = (this.values.length);\n        if ((this.isValueFiltersAvail && dataSource.allowValueFilter)) {\n            this.valueFilteredData = [];\n            var rowHeaders = this.saveDataHeaders.rowHeaders;\n            var columnHeaders = this.saveDataHeaders.columnHeaders;\n            if (filterSettings.length > 0) {\n                var valueFilters = {};\n                var valueFields = {};\n                for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                    var value = values_1[_i];\n                    valueFields[value.name] = value;\n                }\n                for (var _a = 0, filterSettings_1 = filterSettings; _a < filterSettings_1.length; _a++) {\n                    var filter = filterSettings_1[_a];\n                    rowHeaders = (rowFilteredData.length > 0 ? rowFilteredData : rowHeaders);\n                    columnHeaders = (columnFilteredData.length > 0 ? columnFilteredData : columnHeaders);\n                    this.valueFilteredData = [];\n                    var filterElement = filter.properties ?\n                        filter.properties : filter;\n                    if (filterElement.type === 'Value' && this.fieldList[filter.name].isSelected) {\n                        valueFilters[filter.name] = filter;\n                        filterElement.items = [];\n                        var isAvail = false;\n                        var rLen = rows.length;\n                        var cLen = columns.length;\n                        for (var i = 0; i < rLen; i++) {\n                            if (filterElement.name === rows[i].name && valueFields[filterElement.measure] && !isAvail) {\n                                isAvail = true;\n                                /* tslint:disable-next-line:max-line-length */\n                                rowFilteredData = this.applyValueFiltering(rows[i], i, rowHeaders, columnHeaders[columnHeaders.length - 1], valueFilters, this.valueFilteredData, 'row');\n                                break;\n                            }\n                        }\n                        for (var j = 0; j < cLen; j++) {\n                            if (filterElement.name === columns[j].name && valueFields[filterElement.measure] && !isAvail) {\n                                isAvail = true;\n                                /* tslint:disable-next-line:max-line-length */\n                                columnFilteredData = this.applyValueFiltering(columns[j], j, columnHeaders, rowHeaders[rowHeaders.length - 1], valueFilters, this.valueFilteredData, 'column');\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n            rowFilteredData = (rowFilteredData.length > 0 ? rowFilteredData : rowHeaders);\n            columnFilteredData = (columnFilteredData.length > 0 ? columnFilteredData : columnHeaders);\n            this.isEmptyDataAvail(rowFilteredData, columnFilteredData);\n            var savedFieldList = extend({}, this.fieldList, null, true);\n            this.indexMatrix = [];\n            var fields = dataSource.data[0];\n            this.getFieldList(fields, this.enableSort, dataSource.allowValueFilter);\n            this.fillFieldMembers(dataSource.data, this.indexMatrix);\n            this.updateSortSettings(dataSource.sortSettings, this.enableSort);\n            this.valueMatrix = this.generateValueMatrix(dataSource.data);\n            this.filterMembers = [];\n            var pageSize = 1;\n            this.updateFilterMembers(dataSource);\n            this.rMembers = rows.length !== 0 ?\n                this.getIndexedHeaders(rows, data, 0, rows[0].showNoDataItems ?\n                    filterMembers : this.filterMembers, 'row', '') : this.rMembers;\n            this.cMembers = columns.length !== 0 ?\n                this.getIndexedHeaders(columns, data, 0, columns[0].showNoDataItems ?\n                    filterMembers : this.filterMembers, 'column', '') : this.cMembers;\n            this.insertAllMembersCommon();\n            this.updateFieldList(savedFieldList);\n            this.rowCount = 0;\n            this.columnCount = 0;\n            this.rMembers = this.updateFramedHeaders(this.rMembers, this.rMembers, rowFilteredData, this.filterFramedHeaders, 'row');\n            this.filterFramedHeaders = [];\n            this.cMembers = this.updateFramedHeaders(this.cMembers, this.cMembers, columnFilteredData, this.filterFramedHeaders, 'column');\n            this.isValueFilterEnabled = true;\n        }\n        this.applyValueSorting();\n        if (this.pageSettings) {\n            if (!headerCollection || this.enableValueSorting) {\n                this.headerCollection.rowHeaders = extend([], this.rMembers, null, true);\n                this.headerCollection.columnHeaders = extend([], this.cMembers, null, true);\n                this.headerCollection.rowHeadersCount = this.rowCount;\n                this.headerCollection.columnHeadersCount = this.columnCount;\n            }\n            else {\n                this.rMembers = headerCollection.rowHeaders;\n                this.cMembers = headerCollection.columnHeaders;\n                this.rowCount = headerCollection.rowHeadersCount;\n                this.columnCount = headerCollection.columnHeadersCount;\n                if (this.columns.length > 1 || this.rows.length > 1 || this.allowValueFilter) {\n                    this.headerCollection = extend({}, headerCollection, null, true);\n                }\n            }\n            this.calculatePagingValues();\n            if (!this.enableValueSorting || !this.allowValueFilter) {\n                if (rows.length > 0) {\n                    this.insertPosition(rows, data, 0, this.filterMembers, 'row', '', this.rMembers);\n                }\n                if (columns.length > 0) {\n                    this.insertPosition(columns, data, 0, this.filterMembers, 'column', '', this.cMembers);\n                }\n                this.rMembers = this.insertTotalPosition(this.rMembers);\n                this.cMembers = this.insertTotalPosition(this.cMembers);\n            }\n        }\n        this.getAggregatedHeaders(rows, columns, this.rMembers, this.cMembers, values);\n        this.getHeaderData(this.cMembers, colheads, this.pivotValues, 0, this.valueAxis ? 1 : valuesCount);\n        if (this.removeCount !== 0 && this.values.length > 0) {\n            this.columnCount = this.columnCount - (this.removeCount * (this.valueAxis === 0 ? this.values.length : 1));\n        }\n        if ((!this.showGrandTotals || !this.showColumnGrandTotals) && this.columns.length > 0) {\n            this.columnCount = this.columnCount - (1 * (this.valueAxis === 0 ? this.values.length : 1));\n        }\n        this.insertSubTotals();\n        //this.getHeaderData(rmembers, rowheads, gridData, 0);              \n        /* tslint:disable-next-line:max-line-length */\n        this.getTableData(this.rMembers, rowheads, colheads, 0, this.pivotValues, valuesCount, this.rMembers[this.rMembers.length - 1], this.cMembers[this.cMembers.length - 1]);\n        this.applyAdvancedAggregate(rowheads, colheads, this.pivotValues);\n        if (this.pageSettings) {\n            this.removeIndexProperties();\n        }\n        this.isEngineUpdated = true;\n        var st2 = new Date().getTime();\n        //  console.log(st1 - st2);\n    };\n    /* tslint:enable */\n    PivotEngine.prototype.applyValueSorting = function () {\n        if (this.valueSortSettings.headerText && this.valueSortSettings.headerText !== '' && this.values.length > 0) {\n            var textArray = this.valueSortSettings.headerText.split(this.valueSortSettings.headerDelimiter);\n            var hText = '';\n            var mIndex = void 0;\n            var mType = void 0;\n            var caption = void 0;\n            for (var i = 0; i < this.values.length; i++) {\n                if (this.values[i].caption === textArray[textArray.length - 1]) {\n                    caption = this.values[i].name;\n                    break;\n                }\n                else {\n                    caption = textArray[textArray.length - 1];\n                }\n            }\n            if (this.values.length > 1 && caption && this.fieldList[caption]) {\n                for (var i = 0; i < textArray.length - 1; i++) {\n                    hText = hText === '' ? textArray[i] : (hText + this.valueSortSettings.headerDelimiter + textArray[i]);\n                }\n                mIndex = this.fieldList[caption].index;\n                mType = this.fieldList[caption].aggregateType;\n            }\n            else {\n                if (!this.alwaysShowValueHeader || textArray.length === 1) {\n                    hText = this.valueSortSettings.headerText;\n                }\n                else {\n                    for (var i = 0; i < textArray.length - 1; i++) {\n                        hText = hText === '' ? textArray[i] : (hText + this.valueSortSettings.headerDelimiter + textArray[i]);\n                    }\n                }\n                mIndex = this.fieldList[this.values[0].name].index;\n                mType = this.fieldList[this.values[0].name].aggregateType;\n            }\n            var member = void 0;\n            if (this.valueAxis === 0) {\n                member = this.getMember(this.cMembers, hText);\n                if (member) {\n                    this.sortByValueRow(this.rMembers, member, this.valueSortSettings.sortOrder, mIndex, mType);\n                }\n            }\n            else {\n                member = this.getMember(this.rMembers, hText);\n                if (member) {\n                    this.sortByValueRow(this.cMembers, member, this.valueSortSettings.sortOrder, mIndex, mType);\n                }\n            }\n        }\n    };\n    PivotEngine.prototype.getMember = function (cMembers, headerText) {\n        var vlen = cMembers.length;\n        var member;\n        for (var j = 0; j < vlen; j++) {\n            if (cMembers[j].valueSort.levelName === headerText) {\n                member = cMembers[j];\n                break;\n            }\n            else if (cMembers[j].members.length > 0) {\n                member = this.getMember(cMembers[j].members, headerText);\n            }\n            if (member) {\n                return member;\n            }\n        }\n        return member;\n    };\n    PivotEngine.prototype.sortByValueRow = function (rMembers, member, sortOrder, mIndex, mType) {\n        var sort = false;\n        var vlen = rMembers.length;\n        for (var j = 0; j < vlen; j++) {\n            for (var k = j; k < vlen && rMembers[j].type !== 'grand sum' && rMembers[k].type !== 'grand sum'; k++) {\n                if (sortOrder === 'Descending') {\n                    sort = this.getAggregateValue(rMembers[j].index, member.indexObject, mIndex, mType) <\n                        this.getAggregateValue(rMembers[k].index, member.indexObject, mIndex, mType);\n                }\n                else {\n                    sort = this.getAggregateValue(rMembers[j].index, member.indexObject, mIndex, mType) >\n                        this.getAggregateValue(rMembers[k].index, member.indexObject, mIndex, mType);\n                }\n                if (sort) {\n                    var temp = {};\n                    temp = rMembers[j];\n                    rMembers[j] = rMembers[k];\n                    rMembers[k] = temp;\n                }\n            }\n            if (rMembers[j].members.length > 0) {\n                this.sortByValueRow(rMembers[j].members, member, sortOrder, mIndex, mType);\n            }\n        }\n    };\n    PivotEngine.prototype.insertAllMembersCommon = function () {\n        /* inserting the row grant-total members */\n        var rowFlag = (this.showGrandTotals && this.showRowGrandTotals) ? true : (this.rows.length > 0) ? false : true;\n        if (rowFlag) {\n            this.insertAllMember(this.rMembers, this.filterMembers, '', 'row');\n        }\n        /* inserting the column gran-total members */\n        var columnFlag = (this.showGrandTotals && this.showColumnGrandTotals) ? true : (this.columns.length > 0) ? false : true;\n        if (columnFlag) {\n            this.insertAllMember(this.cMembers, this.filterMembers, '', 'column');\n        }\n    };\n    PivotEngine.prototype.removeIndexProperties = function () {\n        for (var rCnt = 0; rCnt < this.headerContent.length; rCnt++) {\n            if (this.headerContent[rCnt]) {\n                for (var cCnt = 0; cCnt < Object.keys(this.headerContent[rCnt]).length; cCnt++) {\n                    var key = Number(Object.keys(this.headerContent[rCnt])[cCnt]);\n                    this.headerContent[rCnt][key].index = [];\n                    this.headerContent[rCnt][key].indexObject = {};\n                    this.pivotValues[rCnt][key].index = [];\n                    this.pivotValues[rCnt][key].indexObject = {};\n                }\n            }\n        }\n        for (var rCnt = this.headerContent.length; rCnt < this.pivotValues.length; rCnt++) {\n            if (this.headerContent[rCnt]) {\n                this.valueContent[rCnt - this.headerContent.length][0].index = [];\n                this.valueContent[rCnt - this.headerContent.length][0].indexObject = {};\n                this.pivotValues[rCnt][0].index = [];\n                this.pivotValues[rCnt][0].indexObject = {};\n            }\n        }\n    };\n    PivotEngine.prototype.insertSubTotals = function () {\n        var rowLength = this.pivotValues.length;\n        for (var rowCnt = 0; rowCnt < rowLength; rowCnt++) {\n            var rowCells = this.pivotValues[rowCnt];\n            if (rowCells) {\n                var savedCell = void 0;\n                var spanCnt = 1;\n                var colLength = rowCells.length;\n                var indexObj = void 0;\n                for (var colCnt = colLength - 1; colCnt > 0; colCnt--) {\n                    var cell = rowCells[colCnt];\n                    if (cell) {\n                        if (savedCell) {\n                            savedCell.colSpan = spanCnt;\n                            savedCell.colIndex = savedCell.colIndex - (spanCnt - 1);\n                        }\n                        indexObj = { index: cell.index, indexObject: cell.indexObject };\n                        cell.index = [];\n                        cell.indexObject = {};\n                        savedCell = extend({}, cell, null, true);\n                        cell.index = indexObj.index;\n                        cell.indexObject = indexObj.indexObject;\n                        var rowPos = rowCnt + 1;\n                        while (this.pivotValues[rowPos] && !this.pivotValues[rowPos][colCnt]) {\n                            if (!this.pivotValues[rowCnt][colCnt].isDrilled) {\n                                this.pivotValues[rowCnt][colCnt].rowSpan = (rowPos - rowCnt) + 1;\n                                savedCell.rowSpan = (rowPos - rowCnt) + 1;\n                            }\n                            var cellType = (cell.type === 'sum' || cell.type === 'grand sum') ? cell.type : 'sum';\n                            this.pivotValues[rowPos][colCnt] = this.headerContent[rowPos][colCnt] = {\n                                type: cellType, formattedText: ((cell.type === 'sum' || cell.type === 'grand sum') ? cell.formattedText :\n                                    (cell.formattedText + ' Total')),\n                                axis: 'column', level: -1, colIndex: colCnt, rowIndex: rowPos, valueSort: cell.valueSort\n                            };\n                            if (cell.valueSort && cell.valueSort[this.valueSortSettings.headerText]) {\n                                this.valueSortSettings.columnIndex = colCnt;\n                            }\n                            var isSpanned = false;\n                            if (cellType === 'grand sum') {\n                                this.pivotValues[rowCnt][colCnt].rowSpan = (rowPos - rowCnt) + 1;\n                                savedCell.rowSpan = (rowPos - rowCnt) + 1;\n                            }\n                            else if (this.pivotValues[rowCnt][colCnt].type !== 'sum' &&\n                                this.pivotValues[rowCnt][colCnt].isDrilled) {\n                                this.pivotValues[rowCnt + 1][colCnt].rowSpan = rowPos - rowCnt;\n                                isSpanned = true;\n                            }\n                            else {\n                                this.pivotValues[rowPos][colCnt].rowSpan = -1;\n                            }\n                            if (rowPos > (rowCnt + 1) && (this.pivotValues[rowCnt][colCnt].type === 'sum' ||\n                                isSpanned)) {\n                                this.pivotValues[rowPos][colCnt].rowSpan = -1;\n                            }\n                            rowPos++;\n                        }\n                        spanCnt = 1;\n                    }\n                    else {\n                        rowCells[colCnt] = this.headerContent[rowCnt][colCnt] = extend({}, savedCell, null, true);\n                        rowCells[colCnt].index = this.headerContent[rowCnt][colCnt].index = indexObj.index;\n                        rowCells[colCnt].indexObject = this.headerContent[rowCnt][colCnt].indexObject = indexObj.indexObject;\n                        spanCnt++;\n                        rowCells[colCnt].colSpan = spanCnt;\n                        rowCells[colCnt].colIndex = rowCells[colCnt].colIndex - (spanCnt - 1);\n                    }\n                    if (colCnt === 1 && savedCell) {\n                        savedCell.colSpan = spanCnt;\n                        savedCell.colIndex = savedCell.colIndex - (spanCnt - 1);\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable:max-func-body-length */\n    PivotEngine.prototype.getIndexedHeaders = function (keys, data, keyInd, position, axis, parentMember) {\n        var hierarchy = [];\n        var showPosition = this.enableValueSorting || this.allowValueFilter || !this.pageSettings;\n        if (keys) {\n            var rlen = keys.length;\n            var decisionObj = {};\n            var fieldName = keys[keyInd].name;\n            var field = keys[keyInd];\n            // let members: string[] = Object.keys(this.fieldList[field].members);\n            var childrens = this.fieldList[fieldName];\n            var index = {};\n            var isNoData = false;\n            var showNoDataItems = (position.length < 1 && keyInd > 0) || field.showNoDataItems;\n            var savedMembers = {};\n            if (showNoDataItems) {\n                var members = Object.keys(childrens.members);\n                for (var pos = 0, lt = members.length; pos < lt; pos++) {\n                    savedMembers[members[pos]] = members[pos];\n                }\n                if (position.length < 1) {\n                    isNoData = true;\n                    position.length = members.length;\n                }\n            }\n            for (var pos = 0, lt = position.length; pos < lt; pos++) {\n                var member = {};\n                if (!isNullOrUndefined(keys[keyInd].showSubTotals) && !keys[keyInd].showSubTotals) {\n                    member.showSubTotals = false;\n                }\n                member.hasChild = keyInd < rlen - 1;\n                member.level = keyInd;\n                member.axis = axis;\n                member.colSpan = 1;\n                var memInd = isNoData ? childrens.members[Object.keys(savedMembers)[0]].ordinal :\n                    this.indexMatrix[position[pos]][childrens.index];\n                var headerValue = isNoData ? Object.keys(savedMembers)[0] :\n                    data[position[pos]][fieldName];\n                if (isNullOrUndefined(headerValue)) {\n                    continue;\n                }\n                delete savedMembers[headerValue];\n                if (showNoDataItems && this.fieldFilterMem[fieldName] &&\n                    this.fieldFilterMem[fieldName].memberObj[headerValue] === headerValue) {\n                    continue;\n                }\n                member.isDrilled = member.hasChild ? childrens.members[headerValue].isDrilled : false;\n                var formattedValue = (this.formatFields[fieldName] && this.formatFields[fieldName].type === 'date') ?\n                    this.getFormattedValue(headerValue, fieldName) : { formattedText: headerValue.toString(), actualText: headerValue };\n                member.actualText = formattedValue.actualText;\n                member.formattedText = formattedValue.formattedText;\n                var availData = showNoDataItems ? (this.filterPosObj[position[pos]] !== undefined &&\n                    !isNoData ? true : false) : true;\n                //member.name = members[memInd];\n                // member.type = member.hasChild ? 'All' : 'Single';\n                var pindx = void 0;\n                if (!(decisionObj && decisionObj[memInd])) {\n                    decisionObj[memInd] = { index: [], indexObject: {} };\n                    member.index = decisionObj[memInd].index;\n                    member.indexObject = decisionObj[memInd].indexObject;\n                    if (availData) {\n                        if (showPosition) {\n                            member.index = decisionObj[memInd].index = [position[pos]];\n                            decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                            member.indexObject = decisionObj[memInd].indexObject;\n                        }\n                        else {\n                            index[memInd] = [position[pos]];\n                        }\n                    }\n                    member.ordinal = memInd;\n                    member.valueSort = {};\n                    if (showPosition) {\n                        member.valueSort.axis = fieldName;\n                        if (keyInd !== 0) {\n                            member.valueSort.levelName = parentMember + this.valueSortSettings.headerDelimiter + member.formattedText;\n                            member.valueSort[parentMember + this.valueSortSettings.headerDelimiter + member.formattedText] = 1;\n                        }\n                        else {\n                            member.valueSort[member.formattedText] = 1;\n                            member.valueSort.levelName = member.formattedText;\n                        }\n                    }\n                    //if (!member.members) {\n                    member.members = [];\n                    //}\n                    //let copyObj: AxisSet = Object.create(member);\n                    hierarchy.push(member);\n                }\n                else if (availData) {\n                    if (showPosition) {\n                        decisionObj[memInd].index.push(position[pos]);\n                        decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                    }\n                    else {\n                        if (index[memInd] === undefined) {\n                            index[memInd] = [position[pos]];\n                        }\n                        else {\n                            index[memInd].push(position[pos]);\n                        }\n                    }\n                }\n                if (showNoDataItems && !isNoData && keyInd > 0 && pos + 1 === position.length &&\n                    Object.keys(savedMembers).length > 0) {\n                    isNoData = true;\n                    lt = Object.keys(savedMembers).length;\n                    pos = -1;\n                }\n            }\n            for (var iln = 0, ilt = hierarchy.length; iln < ilt; iln++) {\n                if (axis === 'row') {\n                    this.rowCount += this.rowValuesLength;\n                }\n                else {\n                    this.columnCount += this.colValuesLength;\n                }\n                if (rlen - 1 > keyInd && hierarchy[iln].isDrilled) {\n                    if (showPosition) {\n                        var level = null;\n                        if (hierarchy[iln].valueSort && hierarchy[iln].valueSort.levelName) {\n                            level = hierarchy[iln].valueSort.levelName;\n                        }\n                        parentMember = (level || hierarchy[iln].formattedText);\n                    }\n                    var filterPosition = !showPosition ? index[hierarchy[iln].ordinal] : hierarchy[iln].index;\n                    /* tslint:disable:align */\n                    hierarchy[iln].members = this.getIndexedHeaders(keys, data, keyInd + 1, (filterPosition === undefined ? [] : filterPosition), axis, parentMember);\n                    /* tslint:enable:align */\n                }\n            }\n            /* tslint:disable:typedef */\n            if (this.enableSort) {\n                //return new DataManager(hierarchy as JSON[]).executeLocal(new Query().sortBy('actualText', childrens.sort.toLowerCase()));\n                return childrens.sort === 'Ascending' ?\n                    (hierarchy.sort(function (a, b) { return (a.actualText > b.actualText) ? 1 : ((b.actualText > a.actualText) ? -1 : 0); })) :\n                    (hierarchy.sort(function (a, b) { return (a.actualText < b.actualText) ? 1 : ((b.actualText < a.actualText) ? -1 : 0); }));\n            }\n            else {\n                return hierarchy;\n            }\n            /* tslint:enable:typedef */\n        }\n        else {\n            return hierarchy;\n        }\n    };\n    PivotEngine.prototype.getOrderedIndex = function (headers) {\n        var orderedIndex = {};\n        for (var i = 0; i < headers.length; i++) {\n            if (headers[i].type !== 'grand sum') {\n                orderedIndex[headers[i].ordinal] = i;\n            }\n        }\n        return orderedIndex;\n    };\n    PivotEngine.prototype.insertPosition = function (keys, data, keyInd, position, axis, parentMember, slicedHeaders) {\n        var hierarchy = [];\n        var orderedIndex = this.getOrderedIndex(slicedHeaders);\n        if (keys) {\n            var decisionObj = {};\n            var field = keys[keyInd].name;\n            var childrens = this.fieldList[field];\n            for (var pos = 0, lt = position.length; pos < lt; pos++) {\n                var member = {};\n                var memInd = this.indexMatrix[position[pos]][childrens.index];\n                var slicedHeader = slicedHeaders[orderedIndex[memInd]];\n                var formattedValue = (this.formatFields[field] && this.formatFields[field].type === 'date') ?\n                    this.getFormattedValue(data[position[pos]][field], field) :\n                    { formattedText: data[position[pos]][field].toString(), actualText: data[position[pos]][field].toString() };\n                if (!(slicedHeader && slicedHeader.formattedText === formattedValue.formattedText)) {\n                    continue;\n                }\n                if (!(decisionObj && decisionObj[memInd])) {\n                    decisionObj[memInd] = { index: [], indexObject: {} };\n                    slicedHeader.index = decisionObj[memInd].index = [position[pos]];\n                    decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                    slicedHeader.indexObject = decisionObj[memInd].indexObject;\n                    slicedHeader.valueSort = {};\n                    slicedHeader.valueSort.axis = field;\n                    if (keyInd !== 0) {\n                        slicedHeader.valueSort.levelName = parentMember + this.valueSortSettings.headerDelimiter +\n                            slicedHeader.formattedText;\n                        slicedHeader.valueSort[parentMember + this.valueSortSettings.headerDelimiter +\n                            slicedHeader.formattedText] = 1;\n                    }\n                    else {\n                        slicedHeader.valueSort[slicedHeader.formattedText] = 1;\n                        slicedHeader.valueSort.levelName = slicedHeader.formattedText;\n                    }\n                    member.members = [];\n                    hierarchy.push(member);\n                }\n                else {\n                    decisionObj[memInd].index.push(position[pos]);\n                    decisionObj[memInd].indexObject[position[pos]] = position[pos];\n                }\n            }\n            var diff = slicedHeaders.length - hierarchy.length;\n            while (diff > 0) {\n                hierarchy.push({ members: [] });\n                diff--;\n            }\n            for (var iln = 0, ilt = hierarchy.length; iln < ilt; iln++) {\n                if (slicedHeaders[iln].members.length > 0) {\n                    var level = null;\n                    if (slicedHeaders[iln].valueSort && slicedHeaders[iln].valueSort.levelName) {\n                        level = slicedHeaders[iln].valueSort.levelName;\n                    }\n                    parentMember = (level || slicedHeaders[iln].formattedText);\n                    /* tslint:disable:align */\n                    hierarchy[iln].members =\n                        this.insertPosition(keys, data, keyInd + 1, slicedHeaders[iln].index, axis, parentMember, slicedHeaders[iln].members);\n                    /* tslint:enable:align */\n                }\n            }\n            return hierarchy;\n        }\n        else {\n            return hierarchy;\n        }\n    };\n    PivotEngine.prototype.insertTotalPosition = function (headers) {\n        var summCell = headers[headers.length - 1];\n        if (summCell && summCell.type === 'grand sum') {\n            summCell.index = this.filterMembers;\n            /* tslint:disable:typedef */\n            var lt = void 0;\n            for (var ln = 0, lt_1 = this.filterMembers.length; ln < lt_1; ln++) {\n                summCell.indexObject[this.filterMembers[ln]] = this.filterMembers[ln];\n            }\n            /* tslint:enable:typedef */\n        }\n        return headers;\n    };\n    PivotEngine.prototype.calculatePagingValues = function () {\n        var isValueSorting = ((this.valueSortSettings.sortOrder !== 'None' &&\n            this.valueSortSettings.headerText !== '') || this.enableValueSorting) ? true : false;\n        if (this.pageSettings) {\n            if (this.valueAxis === 1) {\n                this.rowValuesLength = this.values.length;\n            }\n            else {\n                this.colValuesLength = this.values.length;\n            }\n            this.memberCnt = -this.rowValuesLength;\n            this.rowStartPos = ((this.pageSettings.rowCurrentPage * this.pageSettings.rowSize) -\n                (this.pageSettings.rowSize)) * this.rowValuesLength;\n            var exactStartPos = (this.rowStartPos + (this.pageSettings.rowSize * 3 * this.rowValuesLength)) > this.rowCount ?\n                (this.rowCount - (this.pageSettings.rowSize * 3 * this.rowValuesLength)) : this.rowStartPos;\n            if (exactStartPos < 0) {\n                exactStartPos = this.rowStartPos = 0;\n                this.pageSettings.rowCurrentPage = 1;\n            }\n            this.rowFirstLvl = (this.rowStartPos - exactStartPos) % this.pageSettings.rowSize;\n            this.rowStartPos = exactStartPos;\n            this.endPos = this.rowStartPos + (this.pageSettings.rowSize * 3 * this.rowValuesLength);\n            this.endPos = this.endPos > this.rowCount ? this.rowCount : this.endPos;\n            this.rMembers = isValueSorting ? this.rMembers : this.performSlicing(this.rMembers, [], this.rowStartPos, 'row');\n            this.memberCnt = -this.colValuesLength;\n            this.pageInLimit = false;\n            this.colHdrBufferCalculated = false;\n            this.colStartPos = ((this.pageSettings.columnCurrentPage * this.pageSettings.columnSize) -\n                (this.pageSettings.columnSize)) * this.colValuesLength;\n            exactStartPos = (this.colStartPos + (this.pageSettings.columnSize * 3 * this.colValuesLength)) >\n                this.columnCount ?\n                (this.columnCount - (this.pageSettings.columnSize * 3 * this.colValuesLength)) : this.colStartPos;\n            if (exactStartPos < 0) {\n                exactStartPos = this.colStartPos = 0;\n                this.pageSettings.columnCurrentPage = 1;\n            }\n            this.colFirstLvl = (this.colStartPos - exactStartPos) % this.pageSettings.columnSize;\n            this.colStartPos = exactStartPos;\n            if (!isValueSorting) {\n                this.endPos = this.colStartPos + (this.pageSettings.columnSize * 3 * this.colValuesLength);\n                this.endPos = this.endPos > this.columnCount ? this.columnCount : this.endPos;\n                this.cMembers = this.performSlicing(this.cMembers, [], this.colStartPos, 'column');\n            }\n            this.memberCnt = -1;\n            this.pageInLimit = false;\n        }\n    };\n    PivotEngine.prototype.performSlicing = function (headers, slicedHeaders, startPos, axis) {\n        var pos = 0;\n        while (headers[pos]) {\n            this.memberCnt += axis === 'column' ? this.colValuesLength : this.rowValuesLength;\n            if (startPos <= this.memberCnt && this.endPos >= this.memberCnt && !this.pageInLimit) {\n                if (axis === 'column') {\n                    this.colFirstLvl = this.colFirstLvl + headers[pos].level;\n                }\n                else {\n                    this.rowFirstLvl = this.rowFirstLvl + headers[pos].level;\n                }\n                this.pageInLimit = true;\n            }\n            if (this.pageInLimit) {\n                if (this.endPos <= this.memberCnt) {\n                    if (axis === 'column') {\n                        if (headers[pos].members.length === 0) {\n                            if (this.colHdrBufferCalculated) {\n                                break;\n                            }\n                            this.colHdrBufferCalculated = true;\n                            this.endPos += (headers[pos].level * this.colValuesLength);\n                        }\n                        else if (this.colHdrBufferCalculated) {\n                            break;\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            var members = headers[pos].members;\n            slicedHeaders.push(headers[pos]);\n            if (headers[pos].members.length > 0) {\n                slicedHeaders[slicedHeaders.length - 1].members = [];\n                slicedHeaders[slicedHeaders.length - 1].members =\n                    this.performSlicing(members, [], startPos, axis);\n            }\n            if (!this.pageInLimit) {\n                slicedHeaders.pop();\n            }\n            if (headers[pos].level === 0 && this.pageInLimit && this.endPos <= this.memberCnt) {\n                break;\n            }\n            pos++;\n        }\n        return slicedHeaders;\n    };\n    PivotEngine.prototype.insertAllMember = function (set, filter, customText, axis) {\n        var len = set.length;\n        var showPosition = this.enableValueSorting || this.allowValueFilter || !this.pageSettings;\n        customText = ' Total';\n        set[len] = {\n            hasChild: false,\n            index: !showPosition ? [] : filter,\n            level: 0,\n            axis: axis,\n            isDrilled: false,\n            indexObject: {},\n            members: [],\n            formattedText: 'Grand' + customText,\n            ordinal: len,\n            type: 'grand sum',\n            valueSort: {}\n        };\n        set[len].valueSort[set[len].formattedText] = 1;\n        set[len].valueSort.levelName = set[len].formattedText;\n        if (showPosition) {\n            for (var ln = 0, lt = filter.length; ln < lt; ln++) {\n                set[len].indexObject[filter[ln]] = filter[ln];\n            }\n        }\n        if (axis === 'row') {\n            this.rowCount += this.rowValuesLength;\n        }\n        else {\n            this.columnCount += this.colValuesLength;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getTableData = function (rows, reformAxis, columns, tnum, data, vlt, rTotal, cTotal) {\n        for (var rlt = rows.length, rln = 0; rln < rlt; rln++) {\n            tnum = data.length;\n            reformAxis[tnum] = rows[rln];\n            var actCnt = tnum - Number(Object.keys(reformAxis)[0]);\n            //let rplus: number = rln + 1;\n            //let lvl: number = rows[rln].level;\n            var isLeastNode = !reformAxis[tnum].members.length;\n            rows[rln].colIndex = 0;\n            rows[rln].rowIndex = tnum;\n            if (!data[tnum]) {\n                data[tnum] = [];\n                this.valueContent[actCnt] = {};\n                //data[tnum][0] = rows[rln].name;\n                data[tnum][0] = this.valueContent[actCnt][0] = rows[rln];\n            }\n            else {\n                // data[tnum][0] = rows[rln].name;\n                data[tnum][0] = this.valueContent[actCnt][0] = rows[rln];\n            }\n            if (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) && !(rows[rln].isDrilled &&\n                ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                    !this.showSubTotals || !this.showRowSubTotals))) {\n                var hpos = tnum;\n                var actpos = actCnt;\n                for (var vln = 0; vln < vlt; vln++) {\n                    tnum++;\n                    actCnt++;\n                    var name_1 = this.values[vln].caption ? this.values[vln].caption : this.values[vln].name;\n                    var calObj = {\n                        axis: 'row',\n                        actualText: this.values[vln].name,\n                        formattedText: name_1,\n                        level: 0,\n                        valueSort: {},\n                        colIndex: 0,\n                        rowIndex: tnum,\n                        type: 'value'\n                    };\n                    if (!data[tnum]) {\n                        data[tnum] = [];\n                        this.valueContent[actCnt] = {};\n                        data[tnum][0] = this.valueContent[actCnt][0] = calObj;\n                    }\n                    var vData = data[tnum][0].valueSort;\n                    vData[data[tnum - vln - 1][0].valueSort.levelName + this.valueSortSettings.headerDelimiter + name_1] = 1;\n                    vData.levelName = data[tnum - vln - 1][0].valueSort.levelName + this.valueSortSettings.headerDelimiter\n                        + name_1;\n                    for (var cln = 0, dln = 1, clt = columns.length; cln < clt; ++cln) {\n                        //for (let vln: number = 0; (!this.valueAxis && vln < vlt); vln++) {\n                        this.updateRowData(rows, columns, tnum, data, vln, rln, cln, dln, actCnt, rTotal, cTotal);\n                        dln = data[tnum].length;\n                        data[hpos][dln - 1] = this.valueContent[actpos][dln - 1] = {\n                            axis: 'value', actualText: '', colSpan: 1,\n                            colIndex: dln, formattedText: '', hasChild: false\n                        };\n                        // }\n                    }\n                }\n                this.recursiveRowData(rows, reformAxis, columns, tnum, data, vlt, isLeastNode, rln, vlt, rTotal, cTotal);\n            }\n            else {\n                for (var cln = 0, dln = 1, clt = columns.length; cln < clt; ++cln) {\n                    for (var vln = 0; vln < vlt; vln++) {\n                        this.updateRowData(rows, columns, tnum, data, vln, rln, cln, dln, actCnt, rTotal, cTotal);\n                        dln = data[tnum].length;\n                    }\n                }\n                this.recursiveRowData(rows, reformAxis, columns, tnum, data, vlt, isLeastNode, rln, 0, rTotal, cTotal);\n            }\n        }\n        /* for (let rlt: number = rows.length, rln: number = 0; rln < rlt; rln++) {\n            if (!data[rln]) {\n                data[rln] = [];\n                data[rln][0] = rows[rln].name;\n            } else {\n                data[rln][0] = rows[rln].name;\n            }\n            for (let cln: number = 0, dln: number = 1, clt: number = columns.length; cln < clt; dln = ++cln) {\n                data[rln][dln] = this.getAggregateValue(rows[rln].index, columns[cln].index, 11);\n            }\n        } */\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getAggregatedHeaders = function (rows, columns, rMembers, cMembers, values) {\n        this.selectedHeaders = { selectedHeader: [], values: [] };\n        for (var vlt = values.length, vln = 0; vln < vlt; vln++) {\n            switch (values[vln].type) {\n                case 'DifferenceFrom':\n                case 'PercentageOfDifferenceFrom':\n                    {\n                        var baseField = void 0;\n                        var baseItem = void 0;\n                        this.selectedHeaders.values.push(values[vln].name);\n                        if (values[vln].baseField && values[vln].baseItem) {\n                            baseField = values[vln].baseField;\n                            baseItem = values[vln].baseItem;\n                        }\n                        else if (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) && columns.length > 0) {\n                            baseField = columns[0].name;\n                            baseItem = Object.keys(this.fieldList[columns[0].name].members)[0];\n                        }\n                        else if (rows.length > 0) {\n                            baseField = rows[0].name;\n                            baseItem = Object.keys(this.fieldList[rows[0].name].members)[0];\n                        }\n                        var isHeaderSelected = false;\n                        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n                            var row = rows_2[_i];\n                            if (row.name === baseField) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rMembers, values[vln].name, baseItem, false, 'row', values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                                isHeaderSelected = true;\n                                break;\n                            }\n                        }\n                        if (!isHeaderSelected) {\n                            for (var _a = 0, columns_1 = columns; _a < columns_1.length; _a++) {\n                                var column = columns_1[_a];\n                                if (column.name === baseField) {\n                                    /* tslint:disable-next-line:max-line-length */\n                                    this.getAggregatedHeaderData(cMembers, values[vln].name, baseItem, false, 'column', values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'PercentageOfParentRowTotal':\n                case 'PercentageOfParentColumnTotal':\n                    {\n                        this.selectedHeaders.values.push(values[vln].name);\n                        /* tslint:disable-next-line:max-line-length */\n                        this.getAggregatedHeaderData((values[vln].type === 'PercentageOfParentRowTotal' ? rMembers : cMembers), values[vln].name, undefined, false, (values[vln].type === 'PercentageOfParentRowTotal' ? 'row' : 'column'), values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                    }\n                    break;\n                case 'RunningTotals':\n                    {\n                        this.selectedHeaders.values.push(values[vln].name);\n                        /* tslint:disable-next-line:max-line-length */\n                        this.getAggregatedHeaderData((this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) ? cMembers : rMembers), values[vln].name, undefined, false, (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) ? 'column' : 'row'), values[vln].type, this.selectedHeaders.selectedHeader, vln);\n                    }\n                    break;\n                case 'PercentageOfParentTotal':\n                    {\n                        var baseField = void 0;\n                        this.selectedHeaders.values.push(values[vln].name);\n                        if (values[vln].baseField) {\n                            baseField = values[vln].baseField;\n                        }\n                        else if (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) && columns.length > 0) {\n                            baseField = columns[0].name;\n                        }\n                        else if (rows.length > 0) {\n                            baseField = rows[0].name;\n                        }\n                        var isHeaderSelected = false;\n                        for (var len = rows.length, i = 0; i < len; i++) {\n                            if (rows[i].name === baseField) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rMembers, values[vln].name, undefined, false, 'row', values[vln].type, this.selectedHeaders.selectedHeader, vln, i);\n                                isHeaderSelected = true;\n                                break;\n                            }\n                        }\n                        if (!isHeaderSelected) {\n                            for (var len = columns.length, i = 0; i < len; i++) {\n                                if (columns[i].name === baseField) {\n                                    /* tslint:disable-next-line:max-line-length */\n                                    this.getAggregatedHeaderData(cMembers, values[vln].name, undefined, false, 'column', values[vln].type, this.selectedHeaders.selectedHeader, vln, i);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.getAggregatedHeaderData = function (headers, name, baseItem, isChildren, type, aggregateType, selectedHeaders, vln, level) {\n        for (var _i = 0, headers_1 = headers; _i < headers_1.length; _i++) {\n            var rln = headers_1[_i];\n            switch (aggregateType) {\n                case 'DifferenceFrom':\n                case 'PercentageOfDifferenceFrom':\n                    {\n                        var levelName = rln.valueSort.levelName.toString().split('.');\n                        if (levelName.indexOf(baseItem) !== -1) {\n                            /* tslint:disable-next-line:max-line-length */\n                            selectedHeaders.push(this.updateSelectedHeaders(baseItem, rln.level, type, isChildren, name, aggregateType, rln.valueSort.levelName, (isChildren ? [rln] : headers), vln + 1));\n                            if (rln.members.length > 0) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rln.members, name, baseItem, true, type, aggregateType, selectedHeaders[selectedHeaders.length - 1].childMembers, vln);\n                            }\n                        }\n                        else if (rln.members.length > 0) {\n                            this.getAggregatedHeaderData(rln.members, name, baseItem, false, type, aggregateType, selectedHeaders, vln);\n                        }\n                    }\n                    break;\n                case 'RunningTotals':\n                case 'PercentageOfParentRowTotal':\n                case 'PercentageOfParentColumnTotal':\n                    {\n                        if (rln.type === 'grand sum') {\n                            /* tslint:disable-next-line:max-line-length */\n                            selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, headers, vln + 1));\n                        }\n                        else {\n                            if (rln.members.length > 0) {\n                                /* tslint:disable-next-line:max-line-length */\n                                selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, rln.members, vln + 1));\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rln.members, name, undefined, false, type, aggregateType, selectedHeaders, vln);\n                            }\n                        }\n                    }\n                    break;\n                case 'PercentageOfParentTotal':\n                    {\n                        if (rln.type !== 'grand sum') {\n                            if (rln.level === level) {\n                                if (rln.members.length > 0) {\n                                    if (isChildren) {\n                                        var aggregateHeaders = selectedHeaders[selectedHeaders.length - 1].aggregateHeaders;\n                                        for (var _a = 0, _b = rln.members; _a < _b.length; _a++) {\n                                            var member = _b[_a];\n                                            aggregateHeaders.push(member);\n                                        }\n                                    }\n                                    else {\n                                        var children = extend([], rln.members, null, true);\n                                        /* tslint:disable-next-line:max-line-length */\n                                        selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, children, vln + 1));\n                                        var aggregateHeaders = selectedHeaders[selectedHeaders.length - 1].aggregateHeaders;\n                                        aggregateHeaders.push(rln);\n                                    }\n                                    /* tslint:disable-next-line:max-line-length */\n                                    this.getAggregatedHeaderData(rln.members, name, undefined, true, type, aggregateType, selectedHeaders, vln, level + 1);\n                                }\n                                else {\n                                    if (!isChildren) {\n                                        /* tslint:disable-next-line:max-line-length */\n                                        selectedHeaders.push(this.updateSelectedHeaders(undefined, rln.level, type, false, name, aggregateType, rln.valueSort.levelName, [rln], vln + 1));\n                                    }\n                                }\n                            }\n                            else if (rln.members.length > 0) {\n                                /* tslint:disable-next-line:max-line-length */\n                                this.getAggregatedHeaderData(rln.members, name, undefined, false, type, aggregateType, selectedHeaders, vln, level);\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PivotEngine.prototype.updateSelectedHeaders = function (baseItem, level, type, isChildren, name, aggregateType, levelName, headers, vCount) {\n        var headerData = {\n            name: baseItem,\n            level: level,\n            axis: type,\n            isChild: isChildren,\n            value: name,\n            type: aggregateType,\n            uniqueName: levelName,\n            aggregateHeaders: headers,\n            childMembers: [],\n            valueCount: vCount\n        };\n        return headerData;\n    };\n    PivotEngine.prototype.applyAdvancedAggregate = function (rowheads, colheads, data) {\n        if (this.selectedHeaders.values.length > 0) {\n            var pivotIndex = {};\n            var colIndex = [];\n            var isIndexFilled = false;\n            for (var rlt = data.length, rln = 0; rln < rlt; rln++) {\n                if (data[rln] !== undefined && data[rln][0] !== undefined) {\n                    if (!isIndexFilled) {\n                        for (var clt = data[rln].length, cln = 0; cln < clt; cln++) {\n                            if (data[rln][cln].axis === 'value' &&\n                                this.selectedHeaders.values.indexOf(data[rln][cln].actualText) !== -1) {\n                                colIndex.push(cln);\n                                isIndexFilled = true;\n                            }\n                        }\n                    }\n                    if (colIndex.length > 0 && data[rln][colIndex[0]].axis === 'value' &&\n                        this.selectedHeaders.values.indexOf(data[rln][colIndex[0]].actualText) !== -1) {\n                        for (var _i = 0, colIndex_1 = colIndex; _i < colIndex_1.length; _i++) {\n                            var index = colIndex_1[_i];\n                            pivotIndex[rln + ',' + index] = [rln, index];\n                        }\n                    }\n                }\n            }\n            this.updateAggregates(rowheads, colheads, data, this.selectedHeaders.selectedHeader, colIndex, pivotIndex);\n            var indexCollection = Object.keys(pivotIndex);\n            for (var _a = 0, indexCollection_1 = indexCollection; _a < indexCollection_1.length; _a++) {\n                var index = indexCollection_1[_a];\n                var currentSet = data[pivotIndex[index][0]][pivotIndex[index][1]];\n                // currentSet.formattedText = '0';\n                currentSet.formattedText = (this.selectedHeaders.selectedHeader.length > 0 ? this.emptyCellTextContent : '#N/A');\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /* tslint:disable:all */\n    PivotEngine.prototype.updateAggregates = function (rowheads, colheads, data, selectedHeaders, colIndex, pivotIndex) {\n        for (var _i = 0, selectedHeaders_1 = selectedHeaders; _i < selectedHeaders_1.length; _i++) {\n            var headers = selectedHeaders_1[_i];\n            var selectedHeaderCollection = headers.aggregateHeaders;\n            var name_2 = headers.value;\n            var valueCount = (this.valueAxis && (this.isMutiMeasures || this.alwaysShowValueHeader) ? headers.valueCount : 0);\n            var aggregateType = headers.type;\n            var uniqueName = headers.uniqueName;\n            var axis = headers.axis;\n            var isRowBaseField = axis === 'row' ? true : false;\n            var activeValues = void 0;\n            var indexCollection = [];\n            var activeColumn = [];\n            var columnHeaders = [];\n            var rowindexCollection = [];\n            var selectedRowValues = [];\n            var selectedColumnValues = [];\n            if ((['DifferenceFrom', 'PercentageOfDifferenceFrom', 'PercentageOfParentRowTotal', 'PercentageOfParentColumnTotal', 'PercentageOfParentTotal', 'RunningTotals']).indexOf(headers.type) !== -1) {\n                if (isRowBaseField) {\n                    if (headers.type !== 'RunningTotals') {\n                        for (var rlt = rowheads.length, rln = 0; rln < rlt; rln++) {\n                            if (rowheads[rln] !== undefined) {\n                                if (rowheads[rln].valueSort[uniqueName]) {\n                                    activeValues = rowheads[rln];\n                                    selectedRowValues = data[rln + valueCount];\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    for (var len_1 = data.length, i = 0; i < len_1; i++) {\n                        if (data[i] !== undefined && data[i][0] === undefined) {\n                            columnHeaders.push(data[i]);\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                    var len = columnHeaders.length;\n                    while (len--) {\n                        var axisObj = columnHeaders[len][colIndex[0]];\n                        var cLevelName = axisObj.actualText;\n                        if (this.selectedHeaders.values.indexOf(cLevelName) === -1) {\n                            activeColumn = columnHeaders[len];\n                            len = 0;\n                        }\n                    }\n                    if (headers.type !== 'RunningTotals') {\n                        for (var clt = activeColumn.length, cln = 0; cln < clt; cln++) {\n                            var isSelectedColumn = false;\n                            if (activeColumn[cln] !== undefined && activeColumn[cln].valueSort[uniqueName]) {\n                                activeValues = activeColumn[cln];\n                                for (var len_2 = data.length, i = 0; i < len_2; i++) {\n                                    var axisObj = data[i];\n                                    if (axisObj !== undefined && axisObj[0] !== undefined &&\n                                        axisObj[cln].axis === 'value' &&\n                                        this.selectedHeaders.values.indexOf(axisObj[cln].actualText) !== -1) {\n                                        isSelectedColumn = true;\n                                        selectedColumnValues[i] = axisObj[cln];\n                                        rowindexCollection.push(i);\n                                    }\n                                }\n                                if (isSelectedColumn) {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            switch (headers.type) {\n                case 'DifferenceFrom':\n                case 'PercentageOfDifferenceFrom':\n                    {\n                        var isChildren = headers.isChild;\n                        if (isRowBaseField) {\n                            if (!isChildren) {\n                                for (var _a = 0, selectedHeaderCollection_1 = selectedHeaderCollection; _a < selectedHeaderCollection_1.length; _a++) {\n                                    var item = selectedHeaderCollection_1[_a];\n                                    for (var rlt = rowheads.length, rln = 0; rln < rlt; rln++) {\n                                        if (rowheads[rln] !== undefined) {\n                                            if (rowheads[rln].valueSort[item.valueSort.levelName] &&\n                                                rowheads[rln].level === activeValues.level && rowheads[rln].type !== 'grand sum') {\n                                                for (var _b = 0, colIndex_2 = colIndex; _b < colIndex_2.length; _b++) {\n                                                    var index = colIndex_2[_b];\n                                                    var currentSet = data[rln + valueCount][index];\n                                                    if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                        indexCollection.push([rln + valueCount, index]);\n                                                        if (pivotIndex[rln + valueCount + ',' + index]) {\n                                                            delete pivotIndex[rln + valueCount + ',' + index];\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            else {\n                                var uniqueLevelName = uniqueName.split('.');\n                                for (var rlt = rowheads.length, rlen = 0; rlen < rlt; rlen++) {\n                                    if (rowheads[rlen] !== undefined) {\n                                        var levelName = rowheads[rlen].valueSort.levelName.toString().split('.');\n                                        if (levelName.indexOf(uniqueLevelName[uniqueLevelName.length - 1]) !== -1 &&\n                                            rowheads[rlen].level === activeValues.level) {\n                                            for (var _c = 0, colIndex_3 = colIndex; _c < colIndex_3.length; _c++) {\n                                                var index = colIndex_3[_c];\n                                                var currentSet = data[rlen + valueCount][index];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    indexCollection.push([rlen + valueCount, index]);\n                                                    if (pivotIndex[rlen + valueCount + ',' + index]) {\n                                                        delete pivotIndex[rlen + valueCount + ',' + index];\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _d = 0, indexCollection_2 = indexCollection; _d < indexCollection_2.length; _d++) {\n                                var index = indexCollection_2[_d];\n                                var currentSet = data[index[0]][index[1]];\n                                var cVal = currentSet.value - selectedRowValues[index[1]].value;\n                                cVal = isNaN(cVal) ? 0 : cVal;\n                                if (aggregateType === 'DifferenceFrom') {\n                                    currentSet.formattedText = cVal === 0 ? this.emptyCellTextContent : this.getFormattedValue(cVal, name_2).formattedText;\n                                }\n                                else {\n                                    cVal = (selectedRowValues[index[1]].value === 0 ?\n                                        0 : (cVal / selectedRowValues[index[1]].value));\n                                    currentSet.formattedText = (cVal !== 0 ? this.globalize.formatNumber(cVal, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                                }\n                            }\n                        }\n                        else {\n                            if (!isChildren) {\n                                for (var _e = 0, selectedHeaderCollection_2 = selectedHeaderCollection; _e < selectedHeaderCollection_2.length; _e++) {\n                                    var item = selectedHeaderCollection_2[_e];\n                                    for (var clt = activeColumn.length, cln = 0; cln < clt; cln++) {\n                                        var isSelectedColumn = false;\n                                        if (activeColumn[cln] !== undefined &&\n                                            activeColumn[cln].valueSort[item.valueSort.levelName] &&\n                                            activeColumn[cln].level === activeValues.level && activeColumn[cln].type !== 'grand sum') {\n                                            for (var _f = 0, rowindexCollection_1 = rowindexCollection; _f < rowindexCollection_1.length; _f++) {\n                                                var index = rowindexCollection_1[_f];\n                                                var currentSet = data[index][cln];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    isSelectedColumn = true;\n                                                    indexCollection.push([index, cln]);\n                                                    if (pivotIndex[index + ',' + cln]) {\n                                                        delete pivotIndex[index + ',' + cln];\n                                                    }\n                                                }\n                                            }\n                                            if (isSelectedColumn) {\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            else {\n                                var uniqueLevelName = uniqueName.split('.');\n                                for (var clt = activeColumn.length, clen = 0; clen < clt; clen++) {\n                                    var isSelectedColumn = false;\n                                    if (activeColumn[clen] !== undefined) {\n                                        var levelName = activeColumn[clen].valueSort.levelName.toString().split('.');\n                                        if (levelName.indexOf(uniqueLevelName[uniqueLevelName.length - 1]) !== -1 &&\n                                            activeColumn[clen].level === activeValues.level) {\n                                            for (var _g = 0, rowindexCollection_2 = rowindexCollection; _g < rowindexCollection_2.length; _g++) {\n                                                var index = rowindexCollection_2[_g];\n                                                var currentSet = data[index][clen];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    isSelectedColumn = true;\n                                                    indexCollection.push([index, clen]);\n                                                    if (pivotIndex[index + ',' + clen]) {\n                                                        delete pivotIndex[index + ',' + clen];\n                                                    }\n                                                }\n                                            }\n                                            if (isSelectedColumn) {\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _h = 0, indexCollection_3 = indexCollection; _h < indexCollection_3.length; _h++) {\n                                var index = indexCollection_3[_h];\n                                var currentSet = data[index[0]][index[1]];\n                                var cVal = currentSet.value - selectedColumnValues[index[0]].value;\n                                cVal = isNaN(cVal) ? 0 : cVal;\n                                if (aggregateType === 'DifferenceFrom') {\n                                    currentSet.formattedText = cVal === 0 ? this.emptyCellTextContent : this.getFormattedValue(cVal, name_2).formattedText;\n                                }\n                                else {\n                                    cVal = (selectedColumnValues[index[0]].value === 0 ?\n                                        0 : (cVal / selectedColumnValues[index[0]].value));\n                                    currentSet.formattedText = (cVal !== 0 ? this.globalize.formatNumber(cVal, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                                }\n                            }\n                        }\n                        if (headers.childMembers.length > 0) {\n                            this.updateAggregates(rowheads, colheads, data, headers.childMembers, colIndex, pivotIndex);\n                        }\n                    }\n                    break;\n                case 'PercentageOfParentRowTotal':\n                case 'PercentageOfParentColumnTotal':\n                case 'PercentageOfParentTotal':\n                    {\n                        if (isRowBaseField) {\n                            for (var _j = 0, selectedHeaderCollection_3 = selectedHeaderCollection; _j < selectedHeaderCollection_3.length; _j++) {\n                                var item = selectedHeaderCollection_3[_j];\n                                for (var rlt = rowheads.length, i = 0; i < rlt; i++) {\n                                    if (rowheads[i] !== undefined) {\n                                        if (rowheads[i].valueSort[item.valueSort.levelName] &&\n                                            rowheads[i].level === item.level) {\n                                            for (var _k = 0, colIndex_4 = colIndex; _k < colIndex_4.length; _k++) {\n                                                var index = colIndex_4[_k];\n                                                var currentSet = data[i + valueCount][index];\n                                                if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                    indexCollection.push([i + valueCount, index]);\n                                                    if (pivotIndex[i + valueCount + ',' + index]) {\n                                                        delete pivotIndex[i + valueCount + ',' + index];\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _l = 0, indexCollection_4 = indexCollection; _l < indexCollection_4.length; _l++) {\n                                var i = indexCollection_4[_l];\n                                var currentSet = data[i[0]][i[1]];\n                                var cVal = currentSet.value / selectedRowValues[i[1]].value;\n                                cVal = isNaN(cVal) ? 0 : cVal;\n                                currentSet.formattedText = (cVal !== 0 ? this.globalize.formatNumber(cVal, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                            }\n                        }\n                        else {\n                            for (var _m = 0, selectedHeaderCollection_4 = selectedHeaderCollection; _m < selectedHeaderCollection_4.length; _m++) {\n                                var item = selectedHeaderCollection_4[_m];\n                                for (var clt = activeColumn.length, j = 0; j < clt; j++) {\n                                    var isSelectedColumn = false;\n                                    if (activeColumn[j] !== undefined &&\n                                        activeColumn[j].valueSort[item.valueSort.levelName]) {\n                                        for (var _o = 0, rowindexCollection_3 = rowindexCollection; _o < rowindexCollection_3.length; _o++) {\n                                            var index = rowindexCollection_3[_o];\n                                            var currentSet = data[index][j];\n                                            if (currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                isSelectedColumn = true;\n                                                indexCollection.push([index, j]);\n                                                if (pivotIndex[index + ',' + j]) {\n                                                    delete pivotIndex[index + ',' + j];\n                                                }\n                                            }\n                                        }\n                                        if (isSelectedColumn) {\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                            for (var _p = 0, indexCollection_5 = indexCollection; _p < indexCollection_5.length; _p++) {\n                                var i = indexCollection_5[_p];\n                                var currentSet = data[i[0]][i[1]];\n                                var val = currentSet.value / selectedColumnValues[i[0]].value;\n                                val = isNaN(val) ? 0 : val;\n                                currentSet.formattedText = (val !== 0 ? this.globalize.formatNumber(val, { format: 'P', maximumFractionDigits: 2 }) : this.emptyCellTextContent);\n                            }\n                        }\n                    }\n                    break;\n                case 'RunningTotals':\n                    {\n                        if (isRowBaseField) {\n                            for (var _q = 0, colIndex_5 = colIndex; _q < colIndex_5.length; _q++) {\n                                var index = colIndex_5[_q];\n                                var cVal = 0;\n                                for (var _r = 0, selectedHeaderCollection_5 = selectedHeaderCollection; _r < selectedHeaderCollection_5.length; _r++) {\n                                    var item = selectedHeaderCollection_5[_r];\n                                    for (var rlt = rowheads.length, rlen = 0; rlen < rlt; rlen++) {\n                                        if (rowheads[rlen] !== undefined) {\n                                            var currentSet = data[rlen + valueCount][index];\n                                            if (rowheads[rlen] !== undefined && rowheads[rlen].valueSort[item.valueSort.levelName] &&\n                                                rowheads[rlen].level === item.level && currentSet.axis === 'value' &&\n                                                currentSet.actualText === name_2) {\n                                                if (rowheads[rlen].type !== 'grand sum') {\n                                                    cVal += currentSet.value;\n                                                    currentSet.formattedText = this.getFormattedValue(cVal, name_2).formattedText;\n                                                }\n                                                if (pivotIndex[rlen + valueCount + ',' + index]) {\n                                                    delete pivotIndex[rlen + valueCount + ',' + index];\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            for (var rlt = rowheads.length, rln = 0; rln < rlt; rln++) {\n                                if (rowheads[rln] !== undefined) {\n                                    var cVal = 0;\n                                    for (var _s = 0, selectedHeaderCollection_6 = selectedHeaderCollection; _s < selectedHeaderCollection_6.length; _s++) {\n                                        var item = selectedHeaderCollection_6[_s];\n                                        for (var clt = activeColumn.length, cln = 0; cln < clt; cln++) {\n                                            var currentSet = data[rln + valueCount][cln];\n                                            if (activeColumn[cln] !== undefined &&\n                                                activeColumn[cln].valueSort[item.valueSort.levelName] &&\n                                                currentSet.axis === 'value' && currentSet.actualText === name_2) {\n                                                if (activeColumn[cln].type !== 'grand sum') {\n                                                    cVal += currentSet.value;\n                                                    currentSet.formattedText = this.getFormattedValue(cVal, name_2).formattedText;\n                                                }\n                                                if (pivotIndex[rln + valueCount + ',' + cln]) {\n                                                    delete pivotIndex[rln + valueCount + ',' + cln];\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /* tslint:enable:all */\n    PivotEngine.prototype.recursiveRowData = function (rows, reformAxis, columns, tnum, data, vlt, isLeastNode, rln, vln, rTotal, cTotal) {\n        if (!isLeastNode) {\n            this.getTableData(reformAxis[tnum - vln].members, reformAxis, columns, tnum, data, vlt, rTotal, cTotal);\n        }\n        reformAxis[tnum - vln].members = [];\n    };\n    PivotEngine.prototype.updateRowData = function (rows, columns, tnum, data, vln, rln, cln, dln, actCnt, rTotal, cTotal) {\n        var mPos = this.fieldList[this.values[vln].name].index;\n        var aggregate = this.fieldList[this.values[vln].name].aggregateType;\n        var field = this.values[vln].name;\n        var gTotalIndex = [];\n        var totalValues = {};\n        var value = 0;\n        // let isLeast: boolean = isLeastNode && (vln === vlt - 1);\n        switch (aggregate) {\n            case 'Index':\n                {\n                    gTotalIndex = [[rows[rln], columns[cln]], [rows[rln], cTotal], [rTotal, columns[cln]], [rTotal, cTotal]];\n                    var valueContent = ['cVal', 'rTotalVal', 'cTotalVal', 'gTotalVal'];\n                    var i = 0;\n                    for (var _i = 0, gTotalIndex_1 = gTotalIndex; _i < gTotalIndex_1.length; _i++) {\n                        var rIndex = gTotalIndex_1[_i];\n                        totalValues[valueContent[i]] = this.getAggregateValue((rIndex[0]).index, (rIndex[1]).indexObject, mPos, aggregate);\n                        i++;\n                    }\n                    var val = ((totalValues.cVal) * (totalValues.gTotalVal)) / ((totalValues.rTotalVal) * (totalValues.cTotalVal));\n                    value = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                        !this.showSubTotals || !this.showRowSubTotals)) ? undefined :\n                        (isNaN(val) ? 0 : val);\n                }\n                break;\n            case 'PercentageOfGrandTotal':\n            case 'PercentageOfColumnTotal':\n            case 'PercentageOfRowTotal':\n                {\n                    gTotalIndex = [[rows[rln], columns[cln]]];\n                    gTotalIndex.push((aggregate === 'PercentageOfGrandTotal' ?\n                        [rTotal, cTotal] : (aggregate === 'PercentageOfColumnTotal' ? [rTotal, columns[cln]] : [rows[rln], cTotal])));\n                    var valueContent = ['cVal', 'gTotalVal'];\n                    var i = 0;\n                    for (var _a = 0, gTotalIndex_2 = gTotalIndex; _a < gTotalIndex_2.length; _a++) {\n                        var rIndex = gTotalIndex_2[_a];\n                        totalValues[valueContent[i]] = this.getAggregateValue((rIndex[0]).index, (rIndex[1]).indexObject, mPos, aggregate);\n                        i++;\n                    }\n                    var val = ((totalValues.cVal) / (totalValues.gTotalVal));\n                    value = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                        !this.showSubTotals || !this.showRowSubTotals)) ? undefined :\n                        (isNaN(val) ? 0 : val);\n                }\n                break;\n            default:\n                value = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n                    !this.showSubTotals || !this.showRowSubTotals)) ? undefined :\n                    this.getAggregateValue(rows[rln].index, columns[cln].indexObject, mPos, aggregate);\n                break;\n        }\n        var isSum = rows[rln].hasChild || columns[cln].hasChild ||\n            rows[rln].type === 'grand sum' || columns[cln].type === 'grand sum';\n        var subTotal = (rows[rln].isDrilled && ((!isNullOrUndefined(rows[rln].showSubTotals) && !rows[rln].showSubTotals) ||\n            !this.showSubTotals || !this.showRowSubTotals));\n        var formattedText = subTotal ?\n            '' : (value === undefined && this.emptyCellTextContent !== '') ? this.emptyCellTextContent :\n            aggregate === 'Count' ? value.toLocaleString() : this.getFormattedValue(value, field).formattedText;\n        if (!isNaN(value) && !isNullOrUndefined(value) &&\n            (['PercentageOfGrandTotal', 'PercentageOfColumnTotal', 'PercentageOfRowTotal']).indexOf(aggregate) >= 0) {\n            formattedText = this.globalize.formatNumber(value, { format: 'P', maximumFractionDigits: 2 });\n        }\n        else if (!subTotal &&\n            isNaN(value) && !isNullOrUndefined(value) &&\n            (['PopulationStDev', 'SampleStDev', 'PopulationVar', 'SampleVar']).indexOf(aggregate) !== -1) {\n            formattedText = '#DIV/0!';\n        }\n        //dln = data[tnum].length;\n        data[tnum][dln] = this.valueContent[actCnt][dln] = {\n            axis: 'value', actualText: field, indexObject: this.isDrillThrough ? this.rawIndexObject : {},\n            rowHeaders: rows[rln].type === 'grand sum' ? '' : rows[rln].valueSort.levelName,\n            columnHeaders: columns[cln].type === 'grand sum' ? '' : columns[cln].valueSort.levelName,\n            formattedText: formattedText, value: isNullOrUndefined(value) ? 0 : value, rowIndex: tnum, colIndex: dln, isSum: isSum\n        };\n        this.rawIndexObject = {};\n    };\n    PivotEngine.prototype.getHeaderData = function (axis, reformAxis, data, tnum, vcnt) {\n        var rlt = axis.length;\n        var colItmLn = this.columns.length;\n        var sortText = this.valueSortSettings.headerText;\n        //let valueLn: number = this.values.length;\n        for (var rln = 0; rln < rlt; rln++) {\n            if (axis[rln].members.length) {\n                this.getHeaderData(axis[rln].members, reformAxis, data, tnum, vcnt);\n            }\n            if ((!isNullOrUndefined(axis[rln].showSubTotals) && !axis[rln].showSubTotals) ||\n                !this.showSubTotals || !this.showColumnSubTotals) {\n                if (!axis[rln].isDrilled) {\n                    reformAxis[reformAxis.length] = axis[rln];\n                }\n                else {\n                    this.removeCount++;\n                }\n                tnum = reformAxis.length - 1;\n            }\n            else {\n                tnum = reformAxis.length;\n                reformAxis[tnum] = axis[rln];\n            }\n            //  let rplus: number = rln + 1;\n            var lvl = axis[rln].level;\n            axis[rln].rowIndex = lvl;\n            axis[rln].colIndex = (tnum * vcnt) + vcnt;\n            if (!data[lvl]) {\n                data[lvl] = [];\n                this.headerContent[lvl] = {};\n                data[lvl][(tnum * vcnt) + vcnt] = this.headerContent[lvl][(tnum * vcnt) + vcnt] = axis[rln];\n            }\n            else {\n                data[lvl][(tnum * vcnt) + vcnt] = this.headerContent[lvl][(tnum * vcnt) + vcnt] = axis[rln];\n            }\n            if ((this.isMutiMeasures || this.alwaysShowValueHeader) && !this.valueAxis) {\n                for (var vln = 0; vln < vcnt; vln++) {\n                    var name_3 = this.values[vln].caption ? this.values[vln].caption : this.values[vln].name;\n                    var calObj = {\n                        axis: 'column',\n                        actualText: this.values[vln].name,\n                        formattedText: name_3,\n                        level: 0,\n                        valueSort: {},\n                        colIndex: (tnum * vcnt) + 1 + vln,\n                        rowIndex: colItmLn\n                    };\n                    if (!data[colItmLn]) {\n                        data[colItmLn] = [];\n                        this.headerContent[colItmLn] = {};\n                        data[colItmLn][(tnum * vcnt) + 1 + vln] = this.headerContent[colItmLn][(tnum * vcnt) + 1 + vln] = calObj;\n                    }\n                    else {\n                        data[colItmLn][(tnum * vcnt) + 1 + vln] = this.headerContent[colItmLn][(tnum * vcnt) + 1 + vln] = calObj;\n                    }\n                    var vData = data[colItmLn][(tnum * vcnt) + 1 + vln].valueSort;\n                    vData[axis[rln].valueSort.levelName + this.valueSortSettings.headerDelimiter + name_3] = 1;\n                    vData.levelName = axis[rln].valueSort.levelName + this.valueSortSettings.headerDelimiter + name_3;\n                    if (vData && vData[sortText]) {\n                        this.valueSortSettings.columnIndex = (tnum * vcnt) + 1 + vln;\n                    }\n                }\n            }\n            else if (axis[rln].valueSort && axis[rln].valueSort[sortText]) {\n                this.valueSortSettings.columnIndex = (tnum * vcnt) + 1;\n            }\n            reformAxis[tnum].members = [];\n        }\n    };\n    /* tslint:disable */\n    PivotEngine.prototype.getAggregateValue = function (rowIndex, columnIndex, value, type) {\n        //rowIndex = rowIndex.sort();\n        //columnIndex = columnIndex.sort();\n        var rlt = rowIndex.length;\n        //let clt: number = columnIndex.length;\n        var mirror = {};\n        var ri = 0;\n        var ci = 0;\n        var cellValue = 0;\n        var avgCnt = 0;\n        var isInit = true;\n        var isValueExist = false;\n        if (type && type.toLowerCase() === 'count') {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    cellValue += (this.valueMatrix[rowIndex[ri]][value] === undefined ? 0 : 1);\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'distinctcount') {\n            var duplicateValues = [];\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    if (currentVal !== undefined) {\n                        if (duplicateValues.length === 0 || (duplicateValues.length > 0 && duplicateValues.indexOf(currentVal) === -1)) {\n                            cellValue += 1;\n                            duplicateValues.push(currentVal);\n                        }\n                    }\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'product') {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    isValueExist = true;\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    if (currentVal !== undefined) {\n                        cellValue = (isInit ? 1 : (cellValue === 0 ? 1 : cellValue));\n                        cellValue *= currentVal;\n                    }\n                    isInit = false;\n                }\n                ri++;\n            }\n        }\n        else if (type && (['populationstdev', 'samplestdev', 'populationvar', 'samplevar']).indexOf(type.toLowerCase()) !== -1) {\n            var i = 0;\n            var val = 0;\n            var indexVal = [];\n            var avgVal = 0;\n            var cVal = 0;\n            var avgDifferenceVal = 0;\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    if (currentVal !== undefined) {\n                        val += currentVal;\n                        indexVal.push(currentVal);\n                        i++;\n                    }\n                }\n                ri++;\n            }\n            if (i > 0) {\n                avgVal = val / i;\n                for (var _i = 0, indexVal_1 = indexVal; _i < indexVal_1.length; _i++) {\n                    var index = indexVal_1[_i];\n                    avgDifferenceVal += Math.pow((index - avgVal), 2);\n                }\n                if ((['populationstdev', 'samplestdev']).indexOf(type.toLowerCase()) !== -1) {\n                    cVal = Math.sqrt(avgDifferenceVal / (type.toLowerCase() === 'populationstdev' ? i : (i - 1)));\n                }\n                else {\n                    cVal = avgDifferenceVal / (type.toLowerCase() === 'populationvar' ? i : (i - 1));\n                }\n                cellValue = (cVal === 0 ? NaN : cVal);\n            }\n            else {\n                cellValue = val;\n            }\n        }\n        else if (type && type.toLowerCase() === 'min') {\n            var isFirst = true;\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    if (isFirst) {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value];\n                        isFirst = false;\n                    }\n                    else {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value] < cellValue ? this.valueMatrix[rowIndex[ri]][value] : cellValue;\n                    }\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'max') {\n            var isMaxFirst = true;\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    if (isMaxFirst) {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value];\n                        isMaxFirst = false;\n                    }\n                    else {\n                        cellValue = this.valueMatrix[rowIndex[ri]][value] > cellValue ? this.valueMatrix[rowIndex[ri]][value] : cellValue;\n                    }\n                }\n                ri++;\n            }\n        }\n        else if (type && type.toLowerCase() === 'calculatedfield') {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    var calcField = this.calculatedFields[this.fields[value]];\n                    var actualFormula = calcField.formula;\n                    var aggregateField = {};\n                    if (this.calculatedFormulas[calcField.name]) {\n                        var calculatedFormulas = this.calculatedFormulas[calcField.name];\n                        for (var len = 0, lmt = calculatedFormulas.length; len < lmt; len++) {\n                            var aggregatedValue = calculatedFormulas[len];\n                            var value_1 = aggregateField[aggregatedValue.formula];\n                            if (value_1 === undefined) {\n                                var type_1 = aggregatedValue.type;\n                                value_1 = this.getAggregateValue(rowIndex, columnIndex, aggregatedValue.index, type_1);\n                                aggregateField[aggregatedValue.formula] = value_1;\n                            }\n                            actualFormula = (actualFormula).replace(aggregatedValue.formula, value_1.toString());\n                        }\n                    }\n                    // /* tslint:disable */\n                    cellValue = eval(actualFormula);\n                    // /* tslint:enable */\n                    JSON.parse(cellValue.toString());\n                }\n                ri++;\n            }\n        }\n        else {\n            while (rowIndex[ri] !== undefined) {\n                if (columnIndex[rowIndex[ri]] !== undefined) {\n                    isValueExist = true;\n                    this.rawIndexObject[rowIndex[ri]] = rowIndex[ri];\n                    //let cIndx: number = isLeastLevel ? columnIndex.splice(columnIndex.indexOf(rowIndex[ri]), 1)[0] : rowIndex[ri];\n                    var currentVal = this.valueMatrix[rowIndex[ri]][value];\n                    cellValue += (currentVal === undefined ? 0 : currentVal);\n                    avgCnt++;\n                }\n                ri++;\n            }\n        }\n        /* if (rlt > clt) {\n             this.makeMirrorObject(rowIndex, mirror);\n             while (columnIndex[ci] !== undefined) {\n                 if (mirror[columnIndex[ci]]) {\n                     let cIndx: number = isLeastLevel ? columnIndex.splice(ci, 1)[0] : columnIndex[ci];\n                     //rowIndex.splice\n                     sum += this.valueMatrix[cIndx][value];\n                 }\n                 ci++;\n             }\n         } else {\n             this.makeMirrorObject(columnIndex, mirror);\n             while (rowIndex[ri] !== undefined) {\n                 if (mirror[rowIndex[ri]]) {\n                     let cIndx: number = isLeastLevel ? columnIndex.splice(columnIndex.indexOf(rowIndex[ri]), 1)[0] : rowIndex[ri];\n                     sum += this.valueMatrix[rowIndex[ri]][value];\n                 }\n                 ri++;\n             }\n         } */\n        return ((type && type.toLowerCase() === 'avg' && cellValue !== 0) ? (cellValue / avgCnt) : isValueExist ? cellValue : undefined);\n    };\n    /* tslint:enable */\n    /** hidden */\n    PivotEngine.prototype.getFormattedValue = function (value, fieldName) {\n        var formattedValue = {\n            formattedText: value !== undefined ? value === null ? 'null' : value.toString() : undefined,\n            actualText: value !== undefined ? value === null ? 'null' : value : undefined\n        };\n        if (this.formatFields[fieldName] && value) {\n            var formatSetting = extend({}, this.formatFields[fieldName], null, true);\n            delete formatSetting.name;\n            if (!formatSetting.minimumSignificantDigits && formatSetting.minimumSignificantDigits < 1) {\n                delete formatSetting.minimumSignificantDigits;\n            }\n            if (!formatSetting.maximumSignificantDigits && formatSetting.maximumSignificantDigits < 1) {\n                delete formatSetting.maximumSignificantDigits;\n            }\n            if (formatSetting.type) {\n                formattedValue.formattedText = this.globalize.formatDate(new Date(value), formatSetting);\n            }\n            else {\n                formattedValue.formattedText = this.globalize.formatNumber(value, formatSetting);\n            }\n            formattedValue.actualText = value;\n            if (formatSetting.type && this.formatFields[fieldName].type === 'date') {\n                formatSetting.format = 'yyyy/MM/dd/HH/mm/ss';\n                formattedValue.actualText = this.globalize.formatDate(new Date(value), formatSetting);\n            }\n        }\n        return formattedValue;\n    };\n    PivotEngine.prototype.powerFunction = function (formula) {\n        if (formula.indexOf('^') > -1) {\n            var items_1 = [];\n            while (formula.indexOf('(') > -1) {\n                formula = formula.replace(/(\\([^\\(\\)]*\\))/g, function (text, item) {\n                    items_1.push(item);\n                    return ('~' + (items_1.length - 1));\n                });\n            }\n            items_1.push(formula);\n            formula = '~' + (items_1.length - 1);\n            while (formula.indexOf('~') > -1) {\n                formula = formula.replace(new RegExp('~' + '(\\\\d+)', 'g'), function (text, index) {\n                    return items_1[index].replace(/(\\w*)\\^(\\w*)/g, 'Math.pow' + '($1,$2)');\n                });\n            }\n        }\n        return formula;\n    };\n    return PivotEngine;\n}());\nexport { PivotEngine };\n","/**\n * Specifies pivot external events\n * @hidden\n */\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var enginePopulating = 'enginePopulating';\n/** @hidden */\nexport var enginePopulated = 'enginePopulated';\n/** @hidden */\nexport var onFieldDropped = 'onFieldDropped';\n/** @hidden */\nexport var beforePivotTableRender = 'beforePivotTableRender';\n/** @hidden */\nexport var afterPivotTableRender = 'afterPivotTableRender';\n/** @hidden */\nexport var beforeExport = 'beforeExport';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var hyperlinkCellClick = 'hyperlinkCellClick';\n/** @hidden */\nexport var resizing = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var cellClick = 'cellClick';\n/** @hidden */\nexport var drillThrough = 'drillThrough';\n/** @hidden */\nexport var beforeColumnsRender = 'beforeColumnsRender';\n/** @hidden */\nexport var selected = 'selected';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var beginDrillThrough = 'beginDrillThrough';\n/**\n * Specifies pivot internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var initSubComponent = 'init-groupingbar';\n/** @hidden */\nexport var treeViewUpdate = 'tree-view-update';\n/** @hidden */\nexport var pivotButtonUpdate = 'pivot-button-update';\n/** @hidden */\nexport var initCalculatedField = 'init-calculatedfield';\n/** @hidden */\nexport var click = 'click';\n","/**\n * CSS Constants\n * @hidden\n */\n/** @hidden */\nexport var ROOT = 'e-pivotfieldlist';\n/** @hidden */\nexport var RTL = 'e-rtl';\n/** @hidden */\nexport var DEVICE = 'e-device';\n/** @hidden */\nexport var ICON = 'e-icons';\n/** @hidden */\nexport var ICON_DISABLE = 'e-disable';\n/** @hidden */\nexport var ICON_HIDDEN = 'e-hide';\n/** @hidden */\nexport var AXISFIELD_ICON_CLASS = 'e-dropdown-icon';\nexport var WRAPPER_CLASS = 'e-pivotfieldlist-wrapper';\n/** @hidden */\nexport var CONTAINER_CLASS = 'e-field-list-container';\n/** @hidden */\nexport var TOGGLE_FIELD_LIST_CLASS = 'e-toggle-field-list';\n/** @hidden */\nexport var STATIC_FIELD_LIST_CLASS = 'e-static';\n/** @hidden */\nexport var TOGGLE_SELECT_CLASS = 'e-select-table';\n/** @hidden */\nexport var FIELD_TABLE_CLASS = 'e-field-table';\n/** @hidden */\nexport var FIELD_LIST_CLASS = 'e-field-list';\n/** @hidden */\nexport var FIELD_LIST_TREE_CLASS = 'e-field-list-tree';\n/** @hidden */\nexport var FIELD_HEADER_CLASS = 'e-field-header';\n/** @hidden */\nexport var FIELD_LIST_TITLE_CLASS = 'e-field-list-title';\n/** @hidden */\nexport var FIELD_LIST_TITLE_CONTENT_CLASS = 'e-title-content';\n/** @hidden */\nexport var FIELD_LIST_FOOTER_CLASS = 'e-field-list-footer';\n/** @hidden */\nexport var CALCULATED_FIELD_CLASS = 'e-calculated-field';\n/** @hidden */\nexport var FLAT_CLASS = 'e-flat e-primary';\n/** @hidden */\nexport var OUTLINE_CLASS = 'e-outline';\n/** @hidden */\nexport var AXIS_TABLE_CLASS = 'e-axis-table';\n/** @hidden */\nexport var LEFT_AXIS_PANEL_CLASS = 'e-left-axis-fields';\n/** @hidden */\nexport var RIGHT_AXIS_PANEL_CLASS = 'e-right-axis-fields';\n/** @hidden */\nexport var AXIS_HEADER_CLASS = 'e-axis-header';\n/** @hidden */\nexport var AXIS_CONTENT_CLASS = 'e-axis-content';\n/** @hidden */\nexport var AXIS_PROMPT_CLASS = 'e-draggable-prompt';\n/** @hidden */\nexport var PIVOT_BUTTON_WRAPPER_CLASS = 'e-pvt-btn-div';\n/** @hidden */\nexport var PIVOT_BUTTON_CLASS = 'e-pivot-button';\n/** @hidden */\nexport var PIVOT_BUTTON_CONTENT_CLASS = 'e-content';\n/** @hidden */\nexport var DRAG_CLONE_CLASS = 'e-button-drag-clone';\n/** @hidden */\nexport var SORT_CLASS = 'e-sort';\n/** @hidden */\nexport var SORT_DESCEND_CLASS = 'e-descend';\n/** @hidden */\nexport var FILTER_COMMON_CLASS = 'e-btn-filter';\n/** @hidden */\nexport var FILTER_CLASS = 'e-pv-filter';\n/** @hidden */\nexport var FILTERED_CLASS = 'e-pv-filtered';\n/** @hidden */\nexport var REMOVE_CLASS = 'e-remove';\n/** @hidden */\nexport var DRAG_CLASS = 'e-drag';\n/** @hidden */\nexport var DROP_INDICATOR_CLASS = 'e-drop-indicator';\n/** @hidden */\nexport var INDICATOR_HOVER_CLASS = 'e-drop-hover';\n/** @hidden */\nexport var MEMBER_EDITOR_DIALOG_CLASS = 'e-member-editor-dialog';\n/** @hidden */\nexport var EDITOR_TREE_WRAPPER_CLASS = 'e-member-editor-wrapper';\n/** @hidden */\nexport var EDITOR_TREE_CONTAINER_CLASS = 'e-member-editor-container';\n/** @hidden */\nexport var DRILLTHROUGH_GRID_CLASS = 'e-drillthrough-grid';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_CLASS = 'e-drillthrough-body';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_CONTAINER_CLASS = 'e-drillthrough-body-header-container';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_CLASS = 'e-drillthrough-body-header';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_COMMON_CLASS = 'e-drillthrough-body-header-common';\n/** @hidden */\nexport var DRILLTHROUGH_BODY_HEADER_VALUE_CLASS = 'e-drillthrough-body-header-value';\n/** @hidden */\nexport var DRILLTHROUGH_DIALOG = 'e-drillthrough-dialog';\n/** @hidden */\nexport var EDITOR_LABEL_WRAPPER_CLASS = 'e-editor-label-wrapper';\n/** @hidden */\nexport var EDITOR_LABEL_CLASS = 'e-editor-label';\n/** @hidden */\nexport var CHECK_BOX_FRAME_CLASS = 'e-frame';\n/** @hidden */\nexport var NODE_CHECK_CLASS = 'e-check';\n/** @hidden */\nexport var NODE_STOP_CLASS = 'e-stop';\n/** @hidden */\nexport var OK_BUTTON_CLASS = 'e-ok-btn';\n/** @hidden */\nexport var CANCEL_BUTTON_CLASS = 'e-cancel-btn';\n/** @hidden */\nexport var ERROR_DIALOG_CLASS = 'e-pivot-error-dialog';\n/** @hidden */\nexport var DROPPABLE_CLASS = 'e-droppable';\n/** @hidden */\nexport var ROW_AXIS_CLASS = 'e-rows';\n/** @hidden */\nexport var COLUMN_AXIS_CLASS = 'e-columns';\n/** @hidden */\nexport var VALUE_AXIS_CLASS = 'e-values';\n/** @hidden */\nexport var FILTER_AXIS_CLASS = 'e-filters';\n/** @hidden */\nexport var GROUPING_BAR_CLASS = 'e-grouping-bar';\n/** @hidden */\nexport var VALUE_COLUMN_CLASS = 'e-value-column';\n/** @hidden */\nexport var GROUP_ROW_CLASS = 'e-group-rows';\n/** @hidden */\nexport var GROUP_COLUMN_CLASS = 'e-group-columns';\n/** @hidden */\nexport var GROUP_FLEX_CLASS = 'e-group-flex';\n/** @hidden */\nexport var GROUP_VALUE_CLASS = 'e-group-values';\n/** @hidden */\nexport var GROUP_FILTER_CLASS = 'e-group-filters';\n/** @hidden */\nexport var DIALOG_CLOSE_ICON_CLASS = 'e-icon-btn';\n/** @hidden */\nexport var NO_DRAG_CLASS = 'e-drag-restrict';\n/** @hidden */\nexport var SELECTED_NODE_CLASS = 'e-list-selected';\n/** @hidden */\nexport var TITLE_HEADER_CLASS = 'e-title-header';\n/** @hidden */\nexport var TITLE_CONTENT_CLASS = 'e-title-content';\n/** @hidden */\nexport var TEXT_CONTENT_CLASS = 'e-text-content';\n/** @hidden */\nexport var FOOTER_CONTENT_CLASS = 'e-footer-content';\n/** @hidden */\nexport var ADAPTIVE_CONTAINER_CLASS = 'e-adaptive-container';\n/** @hidden */\nexport var ADAPTIVE_FIELD_LIST_BUTTON_CLASS = 'e-field-list-btn';\n/** @hidden */\nexport var ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS = 'e-calculated-field-btn';\n/** @hidden */\nexport var BUTTON_SMALL_CLASS = 'e-small';\n/** @hidden */\nexport var BUTTON_ROUND_CLASS = 'e-round';\n/** @hidden */\nexport var ADD_ICON_CLASS = 'e-add-icon';\n/** @hidden */\nexport var BUTTON_FLAT_CLASS = 'e-flat';\n/** @hidden */\nexport var STATIC_CENTER_DIV_CLASS = 'e-center-div';\n/** @hidden */\nexport var STATIC_CENTER_HEADER_CLASS = 'e-center-title';\n/** @hidden */\nexport var ADAPTIVE_FIELD_LIST_DIALOG_CLASS = 'e-adaptive-field-list-dialog';\n/** @hidden */\nexport var LIST_TEXT_CLASS = 'e-list-text';\n/** @hidden */\nexport var LIST_SELECT_CLASS = 'e-selected-node';\n/** @hidden */\nexport var LIST_FRAME_CLASS = 'e-frame';\n/** @hidden */\nexport var EXCEL_FILTER_ICON_CLASS = 'e-excl-filter-icon';\n/** @hidden */\nexport var SELECTED_MENU_ICON_CLASS = 'e-selected-menu-icon';\n/** @hidden */\nexport var EMPTY_ICON_CLASS = 'e-emptyicon';\n/** @hidden */\nexport var SUB_MENU_CLASS = 'e-submenu';\n/** @hidden */\nexport var FOCUSED_CLASS = 'e-focused';\n/** @hidden */\nexport var SELECTED_CLASS = 'e-selected';\n/** @hidden */\nexport var MENU_ITEM_CLASS = 'e-menu-item';\n/** @hidden */\nexport var FILTER_MENU_OPTIONS_CLASS = 'e-filtermenu-options';\n/** @hidden */\nexport var SELECTED_OPTION_ICON_CLASS = 'e-selected-option-icon';\n/** @hidden */\nexport var FILTER_DIV_CONTENT_CLASS = 'e-filter-div-content';\n/** @hidden */\nexport var FILTER_TEXT_DIV_CLASS = 'e-filter-text-div';\n/** @hidden */\nexport var BETWEEN_TEXT_DIV_CLASS = 'e-between-text-div';\n/** @hidden */\nexport var SEPARATOR_DIV_CLASS = 'e-separator-div';\n/** @hidden */\nexport var FILTER_OPTION_WRAPPER_1_CLASS = 'e-filter-option-wrapper-1';\n/** @hidden */\nexport var FILTER_OPTION_WRAPPER_2_CLASS = 'e-filter-option-wrapper-2';\n/** @hidden */\nexport var FILTER_INPUT_DIV_1_CLASS = 'e-filter-input-div-1';\n/** @hidden */\nexport var FILTER_INPUT_DIV_2_CLASS = 'e-filter-input-div-2';\n/** @hidden */\nexport var VALUE_OPTIONS_CLASS = 'e-value-options';\n/** @hidden */\nexport var FILTER_OPERATOR_CLASS = 'e-filter-operator';\n/** @hidden */\nexport var COLLAPSE = 'e-collapse';\n/** @hidden */\nexport var EXPAND = 'e-expand';\n/** @hidden */\nexport var TABLE = 'e-table';\n/** @hidden */\nexport var BODY = 'e-body';\n/** @hidden */\nexport var PIVOTBODY = 'e-pivotbody';\n/** @hidden */\nexport var COLUMNSHEADER = 'e-columnsheader';\n/** @hidden */\nexport var ROWSHEADER = 'e-rowsheader';\n/** @hidden */\nexport var VALUESCONTENT = 'e-valuescontent';\n/** @hidden */\nexport var VALUECELL = 'e-valuecell';\n/** @hidden */\nexport var PIVOTHEADER = 'e-pivotheader';\n/** @hidden */\nexport var PGHEADERS = 'e-pgheaders';\n/** @hidden */\nexport var TOPHEADER = 'e-topheader';\n/** @hidden */\nexport var HEADERCELL = 'e-headercell';\n/** @hidden */\nexport var SUMMARY = 'e-summary';\n/** @hidden */\nexport var CELLVALUE = 'e-cellvalue';\n/** @hidden */\nexport var ROW = 'e-row';\n/** @hidden */\nexport var PIVOTTOOLTIP = 'e-pivottooltip';\n/** @hidden */\nexport var TOOLTIP_HEADER = 'e-tooltipheader';\n/** @hidden */\nexport var TOOLTIP_CONTENT = 'e-tooltipcontent';\n/** @hidden */\nexport var NEXTSPAN = 'e-nextspan';\n/** @hidden */\nexport var LASTSPAN = 'e-lastspan';\n/** @hidden */\nexport var EDITOR_SEARCH_WRAPPER_CLASS = 'e-editor-search-wrapper';\n/** @hidden */\nexport var EDITOR_SEARCH_CLASS = 'e-editor-search';\n/** @hidden */\nexport var SELECT_ALL_WRAPPER_CLASS = 'e-select-all-wrapper';\n/** @hidden */\nexport var SELECT_ALL_CLASS = 'e-select-all';\n/** @hidden */\nexport var PIVOTCALC = 'e-pivot-calc';\n/** @hidden */\nexport var CALCDIALOG = 'e-pivot-calc-dialog-div';\n/** @hidden */\nexport var CALCRADIO = 'e-pivot-calc-radio';\n/** @hidden */\nexport var CALCCHECK = 'e-pivot-calc-check';\n/** @hidden */\nexport var CALCINPUT = 'e-pivot-calc-input';\n/** @hidden */\nexport var CALCINPUTDIV = 'e-pivot-calc-input-div';\n/** @hidden */\nexport var CALCOUTERDIV = 'e-pivot-calc-outer-div';\n/** @hidden */\nexport var FLAT = 'e-flat';\n/** @hidden */\nexport var FORMAT = 'e-format';\n/** @hidden */\nexport var FORMULA = 'e-pivot-formula';\n/** @hidden */\nexport var TREEVIEW = 'e-pivot-treeview';\n/** @hidden */\nexport var TREEVIEWOUTER = 'e-pivot-treeview-outer';\n/** @hidden */\nexport var CALCCANCELBTN = 'e-pivot-cancel-button';\n/** @hidden */\nexport var CALCADDBTN = 'e-pivot-add-button';\n/** @hidden */\nexport var CALCOKBTN = 'e-pivot-ok-button';\n/** @hidden */\nexport var CALCACCORD = 'e-pivot-accord';\n/** @hidden */\nexport var CALCBUTTONDIV = 'e-pivot-button-div';\n/** @hidden */\nexport var AXIS_ICON_CLASS = 'e-axis';\n/** @hidden */\nexport var AXIS_ROW_CLASS = 'e-axis-row';\n/** @hidden */\nexport var AXIS_COLUMN_CLASS = 'e-axis-column';\n/** @hidden */\nexport var AXIS_VALUE_CLASS = 'e-axis-value';\n/** @hidden */\nexport var AXIS_FILTER_CLASS = 'e-axis-filter';\n/** @hidden */\nexport var AXIS_NAVIGATE_WRAPPER_CLASS = 'e-axis-nav-div';\n/** @hidden */\nexport var LEFT_NAVIGATE_WRAPPER_CLASS = 'e-left-nav-wrapper';\n/** @hidden */\nexport var RIGHT_NAVIGATE_WRAPPER_CLASS = 'e-right-nav-wrapper';\n/** @hidden */\nexport var LEFT_NAVIGATE_CLASS = 'e-left-nav-icon';\n/** @hidden */\nexport var RIGHT_NAVIGATE_CLASS = 'e-right-nav-icon';\n/** @hidden */\nexport var GRID_CLASS = 'e-grid';\n/** @hidden */\nexport var PIVOT_VIEW_CLASS = 'e-pivotview';\n/** @hidden */\nexport var PIVOT_ALL_FIELD_TITLE_CLASS = 'e-pivot-all-field-title';\n/** @hidden */\nexport var PIVOT_FORMULA_TITLE_CLASS = 'e-pivot-formula-title';\n/** @hidden */\nexport var PIVOT_CONTEXT_MENU_CLASS = 'e-pivot-context-menu';\n/** @hidden */\nexport var MENU_DISABLE = 'e-disabled';\n/** @hidden */\nexport var EMPTY_MEMBER_CLASS = 'e-member-prompt';\n/** @hidden */\nexport var CALC_EDIT = 'e-edit';\n/** @hidden */\nexport var CALC_EDITED = 'e-edited';\n/** @hidden */\nexport var EMPTY_FIELD = 'e-empty-field';\n/** @hidden */\nexport var FORMAT_DIALOG = 'e-pivot-formatting-dialog';\n/** @hidden */\nexport var FORMAT_CONDITION_BUTTON = 'e-format-condition-button';\n/** @hidden */\nexport var FORMAT_NEW = 'e-new-format';\n/** @hidden */\nexport var FORMAT_OUTER = 'e-format-outer-div';\n/** @hidden */\nexport var FORMAT_INNER = 'e-format-inner-div';\n/** @hidden */\nexport var FORMAT_TABLE = 'e-format-table';\n/** @hidden */\nexport var FORMAT_VALUE_LABEL = 'e-format-value-label';\n/** @hidden */\nexport var FORMAT_LABEL = 'e-format-label';\n/** @hidden */\nexport var INPUT = 'e-input';\n/** @hidden */\nexport var FORMAT_VALUE1 = 'e-format-value1';\n/** @hidden */\nexport var FORMAT_VALUE2 = 'e-format-value2';\n/** @hidden */\nexport var FORMAT_VALUE_SPAN = 'e-format-value-span';\n/** @hidden */\nexport var FORMAT_FONT_COLOR = 'e-format-font-color';\n/** @hidden */\nexport var FORMAT_BACK_COLOR = 'e-format-back-color';\n/** @hidden */\nexport var FORMAT_VALUE_PREVIEW = 'e-format-value-preview';\n/** @hidden */\nexport var FORMAT_COLOR_PICKER = 'e-format-color-picker';\n/** @hidden */\nexport var FORMAT_DELETE_ICON = 'e-format-delete-icon';\n/** @hidden */\nexport var FORMAT_DELETE_BUTTON = 'e-format-delete-button';\n/** @hidden */\nexport var SELECTED_COLOR = 'e-selected-color';\n/** @hidden */\nexport var DIALOG_HEADER = 'e-dlg-header';\n/** @hidden */\nexport var FORMAT_APPLY_BUTTON = 'e-format-apply-button';\n/** @hidden */\nexport var FORMAT_CANCEL_BUTTON = 'e-format-cancel-button';\n/** @hidden */\nexport var FORMAT_ROUND_BUTTON = 'e-small e-round';\n/** @hidden */\nexport var VIRTUALTRACK_DIV = 'e-virtualtrack';\n/** @hidden */\nexport var MOVABLECONTENT_DIV = 'e-movablecontent';\n/** @hidden */\nexport var FROZENCONTENT_DIV = 'e-frozencontent';\n/** @hidden */\nexport var MOVABLEHEADER_DIV = 'e-movableheader';\n/** @hidden */\nexport var FROZENHEADER_DIV = 'e-frozenheader';\n/** @hidden */\nexport var DEFER_APPLY_BUTTON = 'e-defer-apply-button';\n/** @hidden */\nexport var DEFER_CANCEL_BUTTON = 'e-defer-cancel-button';\n/** @hidden */\nexport var LAYOUT_FOOTER = 'e-layout-footer';\n/** @hidden */\nexport var CELL_SELECTED_BGCOLOR = 'e-cellselectionbackground';\n/** @hidden */\nexport var SELECTED_BGCOLOR = 'e-selectionbackground';\n/** @hidden */\nexport var BUTTON_LAYOUT = 'e-button-layout';\n/** @hidden */\nexport var CHECKBOX_LAYOUT = 'e-checkbox-layout';\n/** @hidden */\nexport var DEFER_UPDATE_BUTTON = 'e-defer-update-btn';\n/** @hidden */\nexport var HEADERCONTENT = 'e-headercontent';\n/** @hidden */\nexport var BACK_ICON = 'e-field-list-back-icon';\n/** @hidden */\nexport var TITLE_MOBILE_HEADER = 'e-title-mobile-header';\n/** @hidden */\nexport var TITLE_MOBILE_CONTENT = 'e-title-mobile-content';\n/** @hidden */\nexport var ROW_CELL_CLASS = 'e-rowcell';\n/** @hidden */\nexport var CELL_ACTIVE_BGCOLOR = 'e-active';\n/** @hidden */\nexport var SPAN_CLICKED = 'e-spanclicked';\n/** @hidden */\nexport var ROW_SELECT = 'e-rowselect';\n/** @hidden */\nexport var GRID_HEADER = 'e-gridheader';\n","import { Reorder, headerRefreshed } from '@syncfusion/ej2-grids';\nimport { Grid, Resize, ExcelExport, PdfExport, ContextMenu, Freeze } from '@syncfusion/ej2-grids';\nimport { Selection } from '@syncfusion/ej2-grids';\nimport { createElement, setStyleAttribute, remove, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\n/**\n * Module to render PivotGrid control\n */\n/** @hidden */\nvar Render = /** @class */ (function () {\n    /** Constructor for render module */\n    function Render(parent) {\n        this.colPos = 0;\n        this.lastSpan = 0;\n        this.parent = parent;\n        this.engine = parent.engineModule;\n        this.gridSettings = parent.gridSettings;\n        this.formatList = this.getFormatList();\n    }\n    /** @hidden */\n    /* tslint:disable */\n    Render.prototype.render = function () {\n        var parent = this.parent;\n        var engine = this.parent.engineModule;\n        this.injectGridModules(parent);\n        this.rowStartPos = this.getRowStartPos();\n        if (this.parent.grid && this.parent.grid.element && this.parent.element.querySelector('.e-grid')) {\n            if (!engine.isEngineUpdated) {\n                engine.headerContent = this.frameDataSource('header');\n                engine.valueContent = this.frameDataSource('value');\n            }\n            else {\n                if (this.parent.enableValueSorting) {\n                    engine.valueContent = this.frameDataSource('value');\n                }\n                engine.isEngineUpdated = false;\n            }\n            /* tslint:disable */\n            this.parent.grid.setProperties({\n                columns: this.frameStackedHeaders(), dataSource: parent.dataSource.values.length > 0 && !this.engine.isEmptyData ? engine.valueContent :\n                    this.frameDataSource('value')\n            }, true);\n            /* tslint:enable */\n            this.parent.grid.notify('datasource-modified', {});\n            this.parent.grid.refreshColumns();\n            var e = this.parent.element.querySelector('.e-movablecontent');\n            e.querySelector('colGroup').innerHTML =\n                this.parent.grid.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n            this.parent.grid.width = this.calculateGridWidth();\n            if (this.parent.height > (this.engine.valueContent.length * this.gridSettings.rowHeight)) {\n                this.parent.grid.height = 'auto';\n            }\n            else {\n                this.parent.grid.height = this.parent.height;\n            }\n        }\n        else {\n            this.parent.element.innerHTML = '';\n            this.bindGrid(this.parent, (this.engine.isEmptyData ? true : false));\n            this.parent.element.appendChild(createElement('div', { id: this.parent.element.id + '_grid' }));\n            this.parent.grid.appendTo('#' + this.parent.element.id + '_grid');\n        }\n        /* tslint:disable */\n        this.parent.grid.on(headerRefreshed, this.refreshHeader, this);\n    };\n    Render.prototype.refreshHeader = function () {\n        if (this.parent.enableVirtualization) {\n            var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n            var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n            var vtr = mCont.querySelector('.' + cls.VIRTUALTRACK_DIV);\n            this.parent.virtualHeaderDiv = mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV);\n            if (mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n                remove(mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV));\n            }\n            else {\n                this.parent.virtualHeaderDiv = createElement('div', { className: cls.VIRTUALTRACK_DIV });\n            }\n            mHdr.appendChild(this.parent.virtualHeaderDiv);\n            if (vtr) {\n                setStyleAttribute(this.parent.virtualHeaderDiv, { height: 0, width: vtr.style.width });\n            }\n            setStyleAttribute(mHdr.querySelector('.e-table'), {\n                transform: (mCont.querySelector('.e-table').style.transform).split(',')[0] + ',' + 0 + 'px)'\n            });\n            mHdr.scrollLeft = mCont.scrollLeft;\n        }\n    };\n    /** @hidden */\n    Render.prototype.bindGrid = function (parent, isEmpty) {\n        this.injectGridModules(parent);\n        this.parent.grid = new Grid({\n            frozenColumns: 1,\n            frozenRows: 0,\n            dataSource: isEmpty ? this.frameEmptyData() : this.frameDataSource('value'),\n            columns: isEmpty ? this.frameEmptyColumns() : this.frameStackedHeaders(),\n            height: ((this.engine && (parent.height > (this.engine.valueContent.length * this.gridSettings.rowHeight)))\n                || isEmpty) ? 'auto' : parent.height,\n            width: isEmpty ? this.parent.width : this.calculateGridWidth(),\n            locale: parent.locale,\n            enableRtl: parent.enableRtl,\n            allowExcelExport: parent.allowExcelExport,\n            allowPdfExport: parent.allowPdfExport,\n            allowResizing: this.gridSettings.allowResizing,\n            allowTextWrap: this.gridSettings.allowTextWrap,\n            allowReordering: this.gridSettings.allowReordering,\n            allowSelection: this.gridSettings.allowSelection,\n            contextMenuItems: this.gridSettings.contextMenuItems,\n            selectedRowIndex: this.gridSettings.selectedRowIndex,\n            selectionSettings: this.gridSettings.selectionSettings,\n            printMode: this.gridSettings.printMode,\n            rowHeight: this.gridSettings.rowHeight,\n            gridLines: this.gridSettings.gridLines,\n            contextMenuClick: this.gridSettings.contextMenuClick ? this.gridSettings.contextMenuClick.bind(this.parent) : undefined,\n            contextMenuOpen: this.gridSettings.contextMenuOpen ? this.gridSettings.contextMenuOpen.bind(this.parent) : undefined,\n            beforeCopy: this.gridSettings.beforeCopy ? this.gridSettings.beforeCopy.bind(this.parent) : undefined,\n            beforePrint: this.gridSettings.beforePrint ? this.gridSettings.beforePrint.bind(this.parent) : undefined,\n            printComplete: this.gridSettings.printComplete ? this.gridSettings.printComplete.bind(this.parent) : undefined,\n            rowSelecting: this.gridSettings.rowSelecting ? this.gridSettings.rowSelecting.bind(this.parent) : undefined,\n            rowSelected: this.rowSelected.bind(this),\n            rowDeselecting: this.gridSettings.rowDeselecting ? this.gridSettings.rowDeselecting.bind(this.parent) : undefined,\n            rowDeselected: this.rowDeselected.bind(this),\n            cellSelecting: this.gridSettings.cellSelecting ? this.gridSettings.cellSelecting.bind(this.parent) : undefined,\n            cellSelected: this.cellSelected.bind(this),\n            cellDeselecting: this.gridSettings.cellDeselecting ? this.gridSettings.cellDeselecting.bind(this.parent) : undefined,\n            cellDeselected: this.cellDeselected.bind(this),\n            resizeStart: this.gridSettings.resizeStart ? this.gridSettings.resizeStart.bind(this.parent) : undefined,\n            columnDragStart: this.gridSettings.columnDragStart ? this.gridSettings.columnDragStart.bind(this) : undefined,\n            columnDrag: this.gridSettings.columnDrag ? this.gridSettings.columnDrag.bind(this) : undefined,\n            columnDrop: this.gridSettings.columnDrop ? this.gridSettings.columnDrop.bind(this) : undefined,\n            resizing: this.setGroupWidth.bind(this),\n            resizeStop: this.onResizeStop.bind(this),\n            queryCellInfo: this.queryCellInfo.bind(this),\n            dataBound: this.dataBound.bind(this),\n            headerCellInfo: this.headerCellInfo.bind(this),\n            excelHeaderQueryCellInfo: this.excelHeaderQueryCellInfo.bind(this),\n            pdfHeaderQueryCellInfo: this.pdfHeaderQueryCellInfo.bind(this),\n            excelQueryCellInfo: this.excelQueryCellInfo.bind(this),\n            pdfQueryCellInfo: this.pdfQueryCellInfo.bind(this)\n        });\n    };\n    Render.prototype.rowSelected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.rowSelected, args);\n    };\n    Render.prototype.rowDeselected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.rowDeselected, args);\n    };\n    Render.prototype.cellSelected = function (args) {\n        if (this.parent.rowRangeSelection.enable) {\n            this.parent.grid.selectionModule.selectRowsByRange(this.parent.rowRangeSelection.startIndex, this.parent.rowRangeSelection.endIndex);\n            this.parent.rowRangeSelection.enable = false;\n        }\n        else {\n            this.parent.renderModule.selected();\n            this.parent.trigger(events.selected, args);\n        }\n    };\n    Render.prototype.cellDeselected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.cellDeselected, args);\n    };\n    Render.prototype.queryCellInfo = function (args) {\n        this.parent.renderModule.rowCellBoundEvent(args);\n    };\n    Render.prototype.headerCellInfo = function (args) {\n        this.parent.renderModule.columnCellBoundEvent(args);\n    };\n    Render.prototype.excelHeaderQueryCellInfo = function (args) {\n        this.parent.renderModule.excelColumnEvent(args);\n    };\n    Render.prototype.pdfQueryCellInfo = function (args) {\n        this.parent.renderModule.pdfRowEvent(args);\n    };\n    Render.prototype.excelQueryCellInfo = function (args) {\n        this.parent.renderModule.excelRowEvent(args);\n    };\n    Render.prototype.pdfHeaderQueryCellInfo = function (args) {\n        this.parent.renderModule.pdfColumnEvent(args);\n    };\n    Render.prototype.dataBound = function (args) {\n        if (this.parent.element.querySelector('.e-firstcell')) {\n            if (this.parent.enableRtl) {\n                this.parent.element.querySelector('.e-firstcell').style.borderRight = 'none';\n            }\n            else {\n                this.parent.element.querySelector('.e-firstcell').style.borderLeft = 'none';\n            }\n        }\n        this.parent.grid.widthService.setWidthToTable();\n        this.parent.notify(events.contentReady, {});\n    };\n    Render.prototype.injectGridModules = function (parent) {\n        Grid.Inject(Freeze);\n        if (parent.allowExcelExport) {\n            Grid.Inject(ExcelExport);\n        }\n        if (parent.allowPdfExport) {\n            Grid.Inject(PdfExport);\n        }\n        if (this.gridSettings.allowSelection) {\n            Grid.Inject(Selection);\n        }\n        if (this.gridSettings.allowReordering) {\n            Grid.Inject(Reorder);\n        }\n        if (this.gridSettings.allowResizing) {\n            Grid.Inject(Resize);\n        }\n        if (this.gridSettings.contextMenuItems) {\n            Grid.Inject(ContextMenu);\n        }\n    };\n    /** @hidden */\n    Render.prototype.updateGridSettings = function () {\n        this.injectGridModules(this.parent);\n        this.parent.grid.allowResizing = this.gridSettings.allowResizing;\n        this.parent.grid.allowTextWrap = this.gridSettings.allowTextWrap;\n        this.parent.grid.allowReordering = this.gridSettings.allowReordering;\n        this.parent.grid.allowSelection = this.gridSettings.allowSelection;\n        this.parent.grid.contextMenuItems = this.gridSettings.contextMenuItems;\n        this.parent.grid.selectedRowIndex = this.gridSettings.selectedRowIndex;\n        this.parent.grid.selectionSettings = this.gridSettings.selectionSettings;\n        this.parent.grid.printMode = this.gridSettings.printMode;\n        this.parent.grid.rowHeight = this.gridSettings.rowHeight;\n        this.parent.grid.gridLines = this.gridSettings.gridLines;\n    };\n    Render.prototype.appendValueSortIcon = function (cell, tCell, rCnt, cCnt) {\n        var vSort = this.parent.dataSource.valueSortSettings;\n        var len = (cell.type === 'grand sum' && this.parent.dataSource.values.length === 1 && !this.parent.dataSource.alwaysShowValueHeader) ? 0 :\n            (this.parent.dataSource.values.length > 1 || this.parent.dataSource.alwaysShowValueHeader) ? (this.parent.engineModule.headerContent.length - 1) :\n                this.parent.dataSource.columns.length === 0 ? 0 : (this.parent.engineModule.headerContent.length - 1);\n        var lock = (vSort && vSort.headerText) ? cell.valueSort.levelName === vSort.headerText : cCnt === vSort.columnIndex;\n        if (vSort !== undefined && lock && rCnt === len && this.parent.dataSource.valueAxis === 'column') {\n            if (tCell.querySelector('.e-sortfilterdiv')) {\n                tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ? 'e-descending' : 'e-ascending');\n                tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ?\n                    'e-icon-descending' : 'e-icon-ascending');\n            }\n            else {\n                tCell.appendChild(createElement('div', {\n                    className: (vSort.sortOrder === 'Descending' ?\n                        'e-icon-descending e-icons e-descending e-sortfilterdiv' : 'e-icon-ascending e-icons e-ascending e-sortfilterdiv'),\n                }));\n            }\n            if (!isNullOrUndefined(cell.hasChild) && cell.type !== 'grand sum' && tCell.querySelector('.e-expand') &&\n                (tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending'))) {\n                var element = (tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending'));\n                setStyleAttribute(element, { 'padding-top': '12px' });\n            }\n        }\n        return tCell;\n    };\n    Render.prototype.onResizeStop = function (args) {\n        var column = args.column.field === '0.formattedText' ? '0.formattedText' :\n            args.column.customAttributes.cell.valueSort.levelName;\n        this.parent.resizeInfo[column] =\n            Number(args.column.width.toString().split('px')[0]);\n        this.setGroupWidth(args);\n    };\n    Render.prototype.setGroupWidth = function (args) {\n        if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n            this.parent.groupingBarModule.refreshUI();\n            if (this.parent.element.querySelector('.e-group-row').offsetWidth < 245 && !this.parent.firstColWidth) {\n                args.cancel = true;\n                var gridColumn = this.parent.grid.columns;\n                var resColWidth = (this.parent.isAdaptive ? 180 : 250);\n                if (gridColumn && gridColumn.length > 0) {\n                    gridColumn[0].width = resColWidth;\n                }\n                this.parent.element.querySelector('.e-frozenheader').querySelector('col').style.width = (resColWidth + 'px');\n                this.parent.element.querySelector('.e-frozencontent').querySelector('col').style.width = (resColWidth + 'px');\n            }\n            this.parent.element.querySelector('.e-group-values').style.width =\n                this.parent.element.querySelector('.e-group-row').offsetWidth + 'px';\n            this.parent.element.querySelector('.e-group-row').style.height =\n                this.parent.element.querySelector('.e-headercontent').offsetHeight + 'px';\n        }\n        this.parent.trigger(args.e.type === 'touchend' || args.e.type === 'mouseup' ? events.resizeStop : events.resizing, args);\n    };\n    /* tslint:disable */\n    /** @hidden */\n    Render.prototype.selected = function () {\n        clearTimeout(this.timeOutObj);\n        this.timeOutObj = setTimeout(this.onSelect.bind(this), 300);\n    };\n    Render.prototype.onSelect = function () {\n        var pivotArgs = { selectedCellsInfo: [], pivotValues: this.parent.pivotValues };\n        var selectedElements = this.parent.element.querySelectorAll('.' + cls.CELL_SELECTED_BGCOLOR + ',.' + cls.SELECTED_BGCOLOR);\n        for (var _i = 0, selectedElements_1 = selectedElements; _i < selectedElements_1.length; _i++) {\n            var element = selectedElements_1[_i];\n            var colIndex = Number(element.getAttribute('aria-colindex'));\n            var rowIndex = Number(element.getAttribute('index'));\n            var cell = this.engine.pivotValues[rowIndex][colIndex];\n            if (cell) {\n                if (cell.axis === 'value') {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.value,\n                        columnHeaders: cell.columnHeaders,\n                        rowHeaders: cell.rowHeaders,\n                        measure: cell.actualText.toString()\n                    });\n                }\n                else if (cell.axis === 'column') {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.formattedText,\n                        columnHeaders: cell.valueSort.levelName,\n                        rowHeaders: '',\n                        measure: ''\n                    });\n                }\n                else {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.formattedText,\n                        columnHeaders: '',\n                        rowHeaders: cell.valueSort.levelName,\n                        measure: ''\n                    });\n                }\n            }\n        }\n        this.parent.trigger(events.cellSelected, pivotArgs);\n    };\n    Render.prototype.rowCellBoundEvent = function (args) {\n        var tCell = args.cell;\n        if (tCell && this.engine) {\n            var customClass = this.parent.hyperlinkSettings.cssClass;\n            tCell.setAttribute('index', (Number(tCell.getAttribute('index')) + this.engine.headerContent.length).toString());\n            var cell = args.data[0];\n            if (tCell.getAttribute('aria-colindex') === '0') {\n                var isValueCell = cell.type && cell.type === 'value';\n                tCell.innerText = '';\n                var level = cell.level ? cell.level : (isValueCell ? (this.lastSpan + 1) : 0);\n                do {\n                    if (level > 0) {\n                        tCell.appendChild(createElement('span', {\n                            className: level === 0 ? '' : cls.NEXTSPAN,\n                        }));\n                    }\n                    level--;\n                } while (level > -1);\n                level = cell.level ? cell.level : 0;\n                this.lastSpan = !isValueCell ? level : this.lastSpan;\n                if (!cell.hasChild && level > 0) {\n                    tCell.appendChild(createElement('span', {\n                        className: cls.LASTSPAN,\n                    }));\n                }\n                var fieldName = void 0;\n                if ((this.parent.dataSource.rows.length > 0 &&\n                    (cell.valueSort ? Object.keys(cell.valueSort).length > 0 : true))) {\n                    fieldName = level > -1 ? this.parent.dataSource.rows[level].name : '';\n                    tCell.setAttribute('fieldname', fieldName);\n                }\n                var localizedText = cell.formattedText;\n                if (cell.type) {\n                    if (cell.type === 'grand sum') {\n                        tCell.classList.add('e-gtot');\n                        localizedText = this.parent.localeObj.getConstant('grandTotal');\n                    }\n                    else {\n                        tCell.classList.add('e-stot');\n                    }\n                }\n                tCell.classList.add(cls.ROWSHEADER);\n                if (cell.hasChild === true) {\n                    tCell.appendChild(createElement('div', {\n                        className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n                        attrs: {\n                            'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') :\n                                this.parent.localeObj.getConstant('expand')\n                        }\n                    }));\n                }\n                tCell.appendChild(createElement('span', {\n                    className: cls.CELLVALUE,\n                    innerHTML: (this.parent.isRowCellHyperlink || cell.enableHyperlink ? '<a  data-url=\"' + localizedText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + localizedText + '</a>' : localizedText)\n                }));\n                var vSort = this.parent.pivotView.dataSource.valueSortSettings;\n                if (vSort && vSort.headerText && this.parent.dataSource.valueAxis === 'row'\n                    && this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName) {\n                    if (this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName\n                        === vSort.headerText) {\n                        var style = (tCell.querySelector('.e-expand') || tCell.querySelector('.e-collapse')) ? 'padding-top: 18px' :\n                            'padding-top: 12px';\n                        tCell.appendChild(createElement('div', {\n                            className: (vSort.sortOrder === 'Descending' ?\n                                'e-icon-descending e-icons e-descending e-sortfilterdiv' : 'e-icon-ascending e-icons e-ascending e-sortfilterdiv'),\n                            styles: style\n                        }));\n                    }\n                }\n            }\n            else {\n                var innerText = tCell.innerText;\n                tCell.innerText = '';\n                tCell.classList.add(cls.VALUESCONTENT);\n                cell = args.data[Number(tCell.getAttribute('aria-colindex'))];\n                if (cell.isSum) {\n                    tCell.classList.add(cls.SUMMARY);\n                }\n                if (cell.cssClass) {\n                    tCell.classList.add(cell.cssClass);\n                }\n                tCell.appendChild(createElement('span', {\n                    className: cls.CELLVALUE,\n                    innerHTML: ((tCell.className.indexOf('e-summary') !== -1 && this.parent.isSummaryCellHyperlink) ||\n                        (tCell.className.indexOf('e-summary') === -1 && this.parent.isValueCellHyperlink) ||\n                        cell.enableHyperlink ? '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>' : innerText)\n                }));\n            }\n            this.unWireEvents(tCell);\n            this.wireEvents(tCell);\n        }\n        this.parent.trigger(events.queryCellInfo, args);\n    };\n    Render.prototype.columnCellBoundEvent = function (args) {\n        if (args.cell.column && args.cell.column.customAttributes) {\n            var cell = args.cell.column.customAttributes.cell;\n            var tCell = args.node;\n            if (cell) {\n                var customClass = this.parent.hyperlinkSettings.cssClass;\n                var level = cell.level ? cell.level : 0;\n                if ((cell.level === -1 && !cell.rowSpan && cell.rowIndex !== this.engine.headerContent.length - 1)\n                    || cell.rowSpan === -1) {\n                    args.node.style.display = 'none';\n                }\n                else if (cell.rowSpan > 1) {\n                    args.node.setAttribute('rowspan', cell.rowSpan.toString());\n                    args.node.setAttribute('aria-rowspan', cell.rowSpan.toString());\n                    if ((cell.rowIndex + cell.rowSpan) === this.engine.headerContent.length) {\n                        args.node.style.borderBottomWidth = '0px';\n                    }\n                }\n                args.node.setAttribute('aria-colindex', cell.colIndex.toString());\n                args.node.setAttribute('index', cell.rowIndex.toString());\n                var fieldName = void 0;\n                if (!(this.parent.dataSource.values && this.parent.dataSource.valueAxis === 'column' && this.parent.dataSource.values.length > 1 &&\n                    (cell.rowIndex === this.engine.headerContent.length - 1)) && this.parent.dataSource.columns &&\n                    this.parent.dataSource.columns.length > 0) {\n                    fieldName = level > -1 ? this.parent.dataSource.columns[level].name : '';\n                    tCell.setAttribute('fieldname', fieldName);\n                }\n                if (cell.type) {\n                    tCell.classList.add(cell.type === 'grand sum' ? 'e-gtot' : 'e-stot');\n                    var localizedText = cell.type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') :\n                        cell.formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total');\n                    if (tCell.querySelector('.e-headertext') !== null) {\n                        tCell.querySelector('.e-headertext').innerText = localizedText;\n                    }\n                    else {\n                        tCell.querySelector('.e-stackedheadercelldiv').innerText = localizedText;\n                    }\n                }\n                tCell.classList.add(cls.COLUMNSHEADER);\n                if (this.parent.isColumnCellHyperlink || cell.enableHyperlink) {\n                    if (tCell.querySelector('.e-stackedheadercelldiv')) {\n                        var innerText = tCell.querySelector('.e-stackedheadercelldiv').innerText;\n                        tCell.querySelector('.e-stackedheadercelldiv').innerHTML = '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n                    }\n                    else if (tCell.querySelector('.e-headertext')) {\n                        var innerText = tCell.querySelector('.e-headertext').innerText;\n                        tCell.querySelector('.e-headertext').innerHTML = '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n                    }\n                }\n                if (cell.hasChild === true) {\n                    var hdrdiv = tCell.querySelector('.e-headercelldiv');\n                    if (hdrdiv) {\n                        hdrdiv.style.height = 'auto';\n                        hdrdiv.style.lineHeight = 'normal';\n                    }\n                    var div = createElement('div', {\n                        className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n                        attrs: {\n                            'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') :\n                                this.parent.localeObj.getConstant('expand')\n                        }\n                    });\n                    tCell.children[0].classList.add(cls.CELLVALUE);\n                    if (window.navigator.userAgent.indexOf('Edge') > -1 || window.navigator.userAgent.indexOf('Trident') > -1) {\n                        tCell.children[0].style.display = 'table';\n                    }\n                    else {\n                        tCell.children[0].style.display = 'block';\n                    }\n                    tCell.insertBefore(div, tCell.children[0]);\n                }\n                tCell = this.appendValueSortIcon(cell, tCell, cell.rowIndex, cell.colIndex);\n                this.unWireEvents(tCell);\n                this.wireEvents(tCell);\n            }\n        }\n        this.parent.trigger(events.headerCellInfo, args);\n    };\n    Render.prototype.onHyperCellClick = function (e) {\n        var cell = e.target.parentElement.parentElement;\n        cell = (cell.className.indexOf('e-headercelldiv') > -1 ? cell.parentElement : cell);\n        var args = {\n            currentCell: cell,\n            data: this.engine.pivotValues[Number(cell.getAttribute('index'))][Number(cell.getAttribute('aria-colindex'))],\n            cancel: true\n        };\n        this.parent.trigger(events.hyperlinkCellClick, args);\n        if (!args.cancel) {\n            window.open(e.target.getAttribute('data-url'));\n        }\n    };\n    Render.prototype.getRowStartPos = function () {\n        var pivotValues = this.parent.pivotValues;\n        var rowPos;\n        for (var rCnt = 0; rCnt < pivotValues.length; rCnt++) {\n            if (pivotValues[rCnt] && pivotValues[rCnt][0] && pivotValues[rCnt][0].axis === 'row') {\n                rowPos = rCnt;\n                break;\n            }\n        }\n        return rowPos;\n    };\n    Render.prototype.frameDataSource = function (type) {\n        var dataContent = [];\n        if (this.parent.dataSource.values.length > 0 && !this.engine.isEmptyData) {\n            if ((this.parent.enableValueSorting) || !this.engine.isEngineUpdated) {\n                var rowCnt = 0;\n                var pivotValues = this.parent.pivotValues;\n                var start = type === 'value' ? this.rowStartPos : 0;\n                var end = type === 'value' ? pivotValues.length : this.rowStartPos;\n                for (var rCnt = start; rCnt < end; rCnt++) {\n                    if (pivotValues[rCnt]) {\n                        rowCnt = type === 'header' ? rCnt : rowCnt;\n                        dataContent[rowCnt] = {};\n                        for (var cCnt = 0; cCnt < pivotValues[rCnt].length; cCnt++) {\n                            if (pivotValues[rCnt][cCnt]) {\n                                dataContent[rowCnt][cCnt] = pivotValues[rCnt][cCnt];\n                            }\n                        }\n                        rowCnt++;\n                    }\n                }\n            }\n            else {\n                dataContent = type === 'value' ? this.engine.valueContent : this.engine.headerContent;\n            }\n        }\n        else {\n            dataContent = this.frameEmptyData();\n        }\n        return dataContent;\n    };\n    Render.prototype.frameEmptyData = function () {\n        var dataContent = [{\n                0: { formattedText: this.parent.localeObj.getConstant('grandTotal') },\n                1: { formattedText: this.parent.localeObj.getConstant('emptyData') }\n            }];\n        return dataContent;\n    };\n    Render.prototype.calculateColWidth = function (colCount) {\n        var parWidth = isNaN(this.parent.width) ? (this.parent.width.toString().indexOf('%') > -1 ?\n            ((parseFloat(this.parent.width.toString()) / 100) * this.parent.element.offsetWidth) : this.parent.element.offsetWidth) :\n            Number(this.parent.width);\n        var resColWidth = (this.parent.showGroupingBar && this.parent.groupingBarModule) ? (this.parent.isAdaptive ? 180 : 250) : (this.parent.isAdaptive ? 140 : 200);\n        if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.grid && this.parent.dataSource.rows.length > 0) {\n            parWidth = parWidth - (this.gridSettings.columnWidth > resColWidth ? this.gridSettings.columnWidth : resColWidth);\n            colCount = colCount - 1;\n        }\n        var colWidth = (colCount * this.gridSettings.columnWidth + 78) < parWidth ? (parWidth / colCount) : this.gridSettings.columnWidth;\n        return colWidth;\n    };\n    Render.prototype.calculateGridWidth = function () {\n        var parWidth = this.parent.width;\n        if (this.parent.width === 'auto' && this.parent.element.offsetWidth < this.parent.totColWidth) {\n            parWidth = this.parent.element.offsetWidth;\n        }\n        return parWidth;\n    };\n    Render.prototype.frameStackedHeaders = function () {\n        var integrateModel = [];\n        if (this.parent.dataSource.values.length > 0 && !this.engine.isEmptyData) {\n            var headerCnt = this.engine.headerContent.length;\n            var headerSplit = [];\n            var splitPos = [];\n            var colWidth = this.calculateColWidth(this.engine.pivotValues[0].length);\n            do {\n                var columnModel = [];\n                var actualCnt = 0;\n                headerCnt--;\n                var colField = this.engine.headerContent[headerCnt];\n                if (colField) {\n                    for (var cCnt = 0; cCnt < Object.keys(colField).length + (colField[0] ? 0 : 1); cCnt++) {\n                        var colSpan = (colField[cCnt] && colField[cCnt].colSpan) ? colField[cCnt].colSpan : 1;\n                        var rowSpan = (colField[cCnt] && colField[cCnt].rowSpan) ? colField[cCnt].rowSpan : 1;\n                        var formattedText = colField[cCnt] ? (colField[cCnt].type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') :\n                            (colField[cCnt].type === 'sum' ? colField[cCnt].formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total') :\n                                colField[cCnt].formattedText)) : '';\n                        if (headerCnt === this.engine.headerContent.length - 1) {\n                            columnModel[actualCnt] = {\n                                field: (cCnt + '.formattedText'),\n                                headerText: formattedText,\n                                customAttributes: { 'cell': colField[cCnt] },\n                                width: colField[cCnt] ?\n                                    this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) : colWidth,\n                                minWidth: 30,\n                                format: cCnt === 0 ? '' : this.formatList[(cCnt - 1) % this.parent.dataSource.values.length],\n                                allowReordering: this.parent.gridSettings.allowReordering,\n                                allowResizing: this.parent.gridSettings.allowResizing,\n                                visible: true\n                            };\n                        }\n                        else if (headerSplit[cCnt]) {\n                            var tmpSpan = colSpan;\n                            var innerModel = [];\n                            var innerPos = cCnt;\n                            while (tmpSpan > 0) {\n                                if (columnModel[actualCnt]) {\n                                    if (!integrateModel[splitPos[innerPos]]) {\n                                        break;\n                                    }\n                                    innerModel.push(integrateModel[splitPos[innerPos]]);\n                                }\n                                else {\n                                    columnModel[actualCnt] = {\n                                        headerText: formattedText,\n                                        customAttributes: { 'cell': colField[cCnt] },\n                                        width: colField[cCnt] ?\n                                            this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) : colWidth,\n                                        minWidth: 30,\n                                        allowReordering: this.parent.gridSettings.allowReordering,\n                                        allowResizing: this.parent.gridSettings.allowResizing,\n                                        visible: true\n                                    };\n                                    innerModel = [integrateModel[splitPos[innerPos]]];\n                                }\n                                tmpSpan = tmpSpan - headerSplit[innerPos];\n                                innerPos = innerPos + headerSplit[innerPos];\n                            }\n                            columnModel[actualCnt].columns = innerModel;\n                        }\n                        if (columnModel[actualCnt]) {\n                            columnModel[actualCnt].clipMode = this.gridSettings.clipMode;\n                        }\n                        headerSplit[cCnt] = colSpan;\n                        splitPos[cCnt] = actualCnt;\n                        actualCnt++;\n                        cCnt = cCnt + colSpan - 1;\n                    }\n                }\n                integrateModel = columnModel.length > 0 ? columnModel : integrateModel;\n            } while (headerCnt > 0);\n            var resColWidth = (this.parent.showGroupingBar && this.parent.groupingBarModule) ? (this.parent.isAdaptive ? 180 : 250) : (this.parent.isAdaptive ? 140 : 200);\n            integrateModel[0] = {\n                field: (0 + '.formattedText'),\n                width: this.setSavedWidth('0.formattedText', colWidth < resColWidth ? resColWidth : colWidth),\n                minWidth: 30,\n                headerText: '',\n                allowReordering: false,\n                allowResizing: this.parent.gridSettings.allowResizing,\n                visible: true\n            };\n        }\n        else {\n            integrateModel = this.frameEmptyColumns();\n        }\n        this.parent.triggerColumnRenderEvent(integrateModel);\n        return integrateModel;\n    };\n    /** @hidden */\n    Render.prototype.setSavedWidth = function (column, width) {\n        width = this.parent.resizeInfo[column] ? this.parent.resizeInfo[column] : width;\n        return width;\n    };\n    Render.prototype.frameEmptyColumns = function () {\n        var columns = [];\n        var colWidth = this.calculateColWidth(2);\n        columns.push({ field: '0.formattedText', headerText: '', minWidth: 30, width: colWidth });\n        columns.push({ field: '1.formattedText', headerText: this.parent.localeObj.getConstant('grandTotal'), minWidth: 30, width: colWidth });\n        return columns;\n    };\n    /** @hidden */\n    Render.prototype.getFormatList = function () {\n        var formatArray = [];\n        for (var vCnt = 0; vCnt < this.parent.dataSource.values.length; vCnt++) {\n            var field = this.parent.dataSource.values[vCnt];\n            if (this.parent.dataSource.formatSettings.length > 0) {\n                var format = '';\n                for (var fCnt = 0; fCnt < this.parent.dataSource.formatSettings.length; fCnt++) {\n                    var formatSettings = this.parent.dataSource.formatSettings[fCnt];\n                    if (field.name === formatSettings.name) {\n                        format = formatSettings.format;\n                        break;\n                    }\n                    else {\n                        continue;\n                    }\n                }\n                formatArray.push(format);\n            }\n            else {\n                formatArray.push('N');\n            }\n        }\n        return formatArray;\n    };\n    Render.prototype.excelColumnEvent = function (args) {\n        args = this.exportHeaderEvent(args);\n        this.parent.trigger(events.excelHeaderQueryCellInfo, args);\n    };\n    Render.prototype.pdfColumnEvent = function (args) {\n        args = this.exportHeaderEvent(args);\n        this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n    };\n    Render.prototype.excelRowEvent = function (args) {\n        if (args.column.field === '0.formattedText') {\n            var isValueCell = args.data[0].type === 'value';\n            var level = isValueCell ? (this.lastSpan + 1) : args.data[0].level;\n            this.colPos = 0;\n            args.style = { hAlign: 'Left', indent: level * 2 };\n            this.lastSpan = isValueCell ? this.lastSpan : level;\n        }\n        else {\n            this.colPos++;\n            args.value = args.data[this.colPos].value || args.data[this.colPos].formattedText;\n        }\n        args = this.exportContentEvent(args);\n        this.parent.trigger(events.excelQueryCellInfo, args);\n    };\n    /* tslint:disable:no-any */\n    Render.prototype.pdfRowEvent = function (args) {\n        args = this.exportContentEvent(args);\n        if (args.column.field === '0.formattedText') {\n            var isValueCell = args.data[0].type === 'value';\n            var level = isValueCell ? (this.lastSpan + 1) : args.data[0].level;\n            args.style = { paragraphIndent: level * 10 };\n            this.lastSpan = isValueCell ? this.lastSpan : level;\n        }\n        this.parent.trigger(events.pdfQueryCellInfo, args);\n    };\n    Render.prototype.exportHeaderEvent = function (args) {\n        var rowSpan = 1;\n        if (args.gridCell.column.customAttributes) {\n            var cell = args.gridCell.column.customAttributes.cell;\n            rowSpan = cell.rowSpan ? cell.rowSpan : 1;\n        }\n        else {\n            rowSpan = Object.keys(this.engine.headerContent).length;\n        }\n        if (args.cell.rowSpan && args.cell.rowSpan !== rowSpan && rowSpan > -1) {\n            args.cell.rowSpan = rowSpan;\n        }\n        return args;\n    };\n    Render.prototype.exportContentEvent = function (args) {\n        args.value = args.data[Number(args.column.field.split('.formattedText')[0])].type === 'grand sum' ?\n            this.parent.localeObj.getConstant('grandTotal') : args.value;\n        return args;\n    };\n    Render.prototype.unWireEvents = function (cell) {\n        if (cell.querySelector('.e-hyperlinkcell')) {\n            EventHandler.remove(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick);\n        }\n        else {\n            return;\n        }\n    };\n    Render.prototype.wireEvents = function (cell) {\n        if (cell.querySelector('.e-hyperlinkcell')) {\n            EventHandler.add(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick, this);\n        }\n        else {\n            return;\n        }\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Complex, Collection, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the fields in dataSource.\n */\nvar FieldOptions = /** @class */ (function (_super) {\n    __extends(FieldOptions, _super);\n    function FieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"caption\", void 0);\n    __decorate([\n        Property('Sum')\n    ], FieldOptions.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"axis\", void 0);\n    __decorate([\n        Property(false)\n    ], FieldOptions.prototype, \"showNoDataItems\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"baseField\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"baseItem\", void 0);\n    __decorate([\n        Property(true)\n    ], FieldOptions.prototype, \"showSubTotals\", void 0);\n    return FieldOptions;\n}(ChildProperty));\nexport { FieldOptions };\nvar FieldListFieldOptions = /** @class */ (function (_super) {\n    __extends(FieldListFieldOptions, _super);\n    function FieldListFieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return FieldListFieldOptions;\n}(FieldOptions));\nexport { FieldListFieldOptions };\n/**\n * Configures the style settings.\n */\nvar Style = /** @class */ (function (_super) {\n    __extends(Style, _super);\n    function Style() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Style.prototype, \"backgroundColor\", void 0);\n    __decorate([\n        Property()\n    ], Style.prototype, \"color\", void 0);\n    __decorate([\n        Property()\n    ], Style.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Property()\n    ], Style.prototype, \"fontSize\", void 0);\n    return Style;\n}(ChildProperty));\nexport { Style };\n/**\n * Configures the filter settings.\n */\nvar Filter = /** @class */ (function (_super) {\n    __extends(Filter, _super);\n    function Filter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Filter.prototype, \"name\", void 0);\n    __decorate([\n        Property('Include')\n    ], Filter.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"items\", void 0);\n    __decorate([\n        Property('DoesNotEquals')\n    ], Filter.prototype, \"condition\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"value1\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"value2\", void 0);\n    __decorate([\n        Property()\n    ], Filter.prototype, \"measure\", void 0);\n    return Filter;\n}(ChildProperty));\nexport { Filter };\n/**\n * Configures the conditional format settings.\n */\nvar ConditionalFormatSettings = /** @class */ (function (_super) {\n    __extends(ConditionalFormatSettings, _super);\n    function ConditionalFormatSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"measure\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"label\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"conditions\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"value1\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"value2\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalFormatSettings.prototype, \"style\", void 0);\n    return ConditionalFormatSettings;\n}(ChildProperty));\nexport { ConditionalFormatSettings };\n/**\n * Configures the sort settings.\n */\nvar Sort = /** @class */ (function (_super) {\n    __extends(Sort, _super);\n    function Sort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Sort.prototype, \"name\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], Sort.prototype, \"order\", void 0);\n    return Sort;\n}(ChildProperty));\nexport { Sort };\n/**\n * Configures the format settings of value fields.\n */\nvar FormatSettings = /** @class */ (function (_super) {\n    __extends(FormatSettings, _super);\n    function FormatSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"minimumFractionDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"maximumFractionDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"minimumSignificantDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"maximumSignificantDigits\", void 0);\n    __decorate([\n        Property(true)\n    ], FormatSettings.prototype, \"useGrouping\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"skeleton\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"currency\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"minimumIntegerDigits\", void 0);\n    __decorate([\n        Property()\n    ], FormatSettings.prototype, \"format\", void 0);\n    return FormatSettings;\n}(ChildProperty));\nexport { FormatSettings };\n/**\n * Configures the calculatedfields settings.\n */\nvar CalculatedFieldSettings = /** @class */ (function (_super) {\n    __extends(CalculatedFieldSettings, _super);\n    function CalculatedFieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], CalculatedFieldSettings.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], CalculatedFieldSettings.prototype, \"formula\", void 0);\n    return CalculatedFieldSettings;\n}(ChildProperty));\nexport { CalculatedFieldSettings };\n/**\n * Configures drilled state of field members.\n */\nvar DrillOptions = /** @class */ (function (_super) {\n    __extends(DrillOptions, _super);\n    function DrillOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], DrillOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], DrillOptions.prototype, \"items\", void 0);\n    return DrillOptions;\n}(ChildProperty));\nexport { DrillOptions };\n/**\n * Configures value sort settings.\n */\nvar ValueSortSettings = /** @class */ (function (_super) {\n    __extends(ValueSortSettings, _super);\n    function ValueSortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], ValueSortSettings.prototype, \"headerText\", void 0);\n    __decorate([\n        Property('.')\n    ], ValueSortSettings.prototype, \"headerDelimiter\", void 0);\n    __decorate([\n        Property('None')\n    ], ValueSortSettings.prototype, \"sortOrder\", void 0);\n    return ValueSortSettings;\n}(ChildProperty));\nexport { ValueSortSettings };\n/**\n * Configures the settings of dataSource.\n */\nvar DataSource = /** @class */ (function (_super) {\n    __extends(DataSource, _super);\n    function DataSource() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], DataSource.prototype, \"data\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"rows\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"columns\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"values\", void 0);\n    __decorate([\n        Collection([], FieldOptions)\n    ], DataSource.prototype, \"filters\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"expandAll\", void 0);\n    __decorate([\n        Property('column')\n    ], DataSource.prototype, \"valueAxis\", void 0);\n    __decorate([\n        Collection([], Filter)\n    ], DataSource.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Collection([], Sort)\n    ], DataSource.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"enableSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"allowLabelFilter\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"allowValueFilter\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showSubTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showRowSubTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showColumnSubTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showGrandTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showRowGrandTotals\", void 0);\n    __decorate([\n        Property(true)\n    ], DataSource.prototype, \"showColumnGrandTotals\", void 0);\n    __decorate([\n        Property(false)\n    ], DataSource.prototype, \"alwaysShowValueHeader\", void 0);\n    __decorate([\n        Property([])\n    ], DataSource.prototype, \"formatSettings\", void 0);\n    __decorate([\n        Collection([], DrillOptions)\n    ], DataSource.prototype, \"drilledMembers\", void 0);\n    __decorate([\n        Complex({}, ValueSortSettings)\n    ], DataSource.prototype, \"valueSortSettings\", void 0);\n    __decorate([\n        Collection([], CalculatedFieldSettings)\n    ], DataSource.prototype, \"calculatedFieldSettings\", void 0);\n    __decorate([\n        Collection([], ConditionalFormatSettings)\n    ], DataSource.prototype, \"conditionalFormatSettings\", void 0);\n    __decorate([\n        Property()\n    ], DataSource.prototype, \"emptyCellsTextContent\", void 0);\n    return DataSource;\n}(ChildProperty));\nexport { DataSource };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Event } from '@syncfusion/ej2-base';\n/**\n *  Represents Pivot widget model class.\n */\nvar GridSettings = /** @class */ (function (_super) {\n    __extends(GridSettings, _super);\n    function GridSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], GridSettings.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property(false)\n    ], GridSettings.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Property(false)\n    ], GridSettings.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(true)\n    ], GridSettings.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(null)\n    ], GridSettings.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property(110)\n    ], GridSettings.prototype, \"columnWidth\", void 0);\n    __decorate([\n        Property('Ellipsis')\n    ], GridSettings.prototype, \"clipMode\", void 0);\n    __decorate([\n        Property(false)\n    ], GridSettings.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], GridSettings.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Property({ mode: 'Row', cellSelectionMode: 'Flow', type: 'Single' })\n    ], GridSettings.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], GridSettings.prototype, \"printMode\", void 0);\n    __decorate([\n        Property()\n    ], GridSettings.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], GridSettings.prototype, \"beforeColumnsRender\", void 0);\n    return GridSettings;\n}(ChildProperty));\nexport { GridSettings };\n","import { Workbook } from '@syncfusion/ej2-excel-export';\nimport * as events from '../../common/base/constant';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the PivotGrid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent) {\n        this.parent = parent;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'excelExport';\n    };\n    /**\n     * Method to perform excel export.\n     * @hidden\n     */\n    ExcelExport.prototype.exportToExcel = function (type) {\n        /** Event trigerring */\n        if (this.parent.enableVirtualization) {\n            var pageSettings = this.parent.engineModule.pageSettings;\n            this.parent.engineModule.pageSettings = null;\n            this.parent.engineModule.generateGridData(this.parent.dataSource);\n            this.parent.engineModule.pageSettings = pageSettings;\n        }\n        var args = {\n            fileName: 'default', header: '', footer: '', dataCollections: [this.parent.engineModule.pivotValues]\n        };\n        this.parent.trigger(events.beforeExport, args);\n        var fileName = args.fileName;\n        var header = args.header;\n        var footer = args.footer;\n        var dataCollections = args.dataCollections;\n        /** Fill data and export */\n        /* tslint:disable-next-line:no-any */\n        var workSheets = [];\n        for (var dataColl = 0; dataColl < dataCollections.length; dataColl++) {\n            var pivotValues = dataCollections[dataColl];\n            var colLen = 0;\n            var rowLen = pivotValues.length;\n            var actualrCnt = 0;\n            var formatList = this.parent.renderModule.getFormatList();\n            var rows = [];\n            var maxLevel = 0;\n            for (var rCnt = 0; rCnt < rowLen; rCnt++) {\n                if (pivotValues[rCnt]) {\n                    actualrCnt++;\n                    colLen = pivotValues[rCnt].length;\n                    var cells = [];\n                    for (var cCnt = 0; cCnt < colLen; cCnt++) {\n                        if (pivotValues[rCnt][cCnt]) {\n                            var pivotCell = pivotValues[rCnt][cCnt];\n                            if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                var cellValue = pivotCell.axis === 'value' ? pivotCell.value : pivotCell.formattedText;\n                                if (pivotCell.type === 'grand sum') {\n                                    cellValue = this.parent.localeObj.getConstant('grandTotal');\n                                }\n                                else if (pivotCell.type === 'sum') {\n                                    cellValue = cellValue.toString().replace('Total', this.parent.localeObj.getConstant('total'));\n                                }\n                                else {\n                                    cellValue = cellValue;\n                                }\n                                if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                    cells.push({\n                                        index: cCnt + 1, value: cellValue,\n                                        colSpan: pivotCell.colSpan, rowSpan: pivotCell.rowSpan,\n                                    });\n                                    if (pivotCell.axis === 'value') {\n                                        cells[cells.length - 1].style = {\n                                            numberFormat: formatList[(cCnt - 1) % this.parent.dataSource.values.length],\n                                            bold: false,\n                                            wrapText: true\n                                        };\n                                        if (pivotCell.style) {\n                                            cells[cells.length - 1].style.backColor = pivotCell.style.backgroundColor;\n                                            cells[cells.length - 1].style.fontColor = pivotCell.style.color;\n                                            cells[cells.length - 1].style.fontName = pivotCell.style.fontFamily;\n                                            cells[cells.length - 1].style.fontSize = Number(pivotCell.style.fontSize.split('px')[0]);\n                                        }\n                                    }\n                                    else {\n                                        cells[cells.length - 1].style = {\n                                            bold: true,\n                                            vAlign: 'Center',\n                                            wrapText: true,\n                                            indent: cCnt === 1 ? pivotCell.level * 10 : 0\n                                        };\n                                        if (pivotCell.axis === 'row' && cCnt === 0) {\n                                            cells[cells.length - 1].style.hAlign = 'Left';\n                                            cells[cells.length - 1].style.indent = pivotCell.level * 2;\n                                            maxLevel = pivotCell.level > maxLevel ? pivotCell.level : maxLevel;\n                                        }\n                                    }\n                                    cells[cells.length - 1].style.borders = { color: '#000000', lineStyle: 'Thin' };\n                                }\n                            }\n                            cCnt = cCnt + (pivotCell.colSpan ? (pivotCell.colSpan - 1) : 0);\n                        }\n                        else {\n                            cells.push({\n                                index: cCnt + 1, value: '', colSpan: 1, rowSpan: 1,\n                            });\n                        }\n                    }\n                    rows.push({ index: actualrCnt, cells: cells });\n                }\n            }\n            var columns = [];\n            for (var cCnt = 0; cCnt < colLen; cCnt++) {\n                columns.push({ index: cCnt + 1, width: 100 });\n            }\n            if (maxLevel > 0) {\n                columns[0].width = 100 + (maxLevel * 20);\n            }\n            workSheets.push({ columns: columns, rows: rows });\n        }\n        var book = new Workbook({ worksheets: workSheets }, type === 'Excel' ? 'xlsx' : 'csv');\n        book.save(fileName + (type === 'Excel' ? '.xlsx' : '.csv'));\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import { PdfGrid, PdfPen, PointF, PdfDocument, PdfStandardFont, PdfFontFamily, PdfSolidBrush, PdfColor, PdfStringFormat, PdfVerticalAlignment, PdfTextAlignment, PdfFontStyle, PdfPageTemplateElement, RectangleF, PdfLayoutFormat } from '@syncfusion/ej2-pdf-export';\nimport * as events from '../../common/base/constant';\n/**\n * @hidden\n * `PDFExport` module is used to handle the PDF export action.\n */\nvar PDFExport = /** @class */ (function () {\n    /**\n     * Constructor for the PivotGrid PDF Export module.\n     * @hidden\n     */\n    function PDFExport(parent) {\n        this.parent = parent;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    PDFExport.prototype.getModuleName = function () {\n        return 'pdfExport';\n    };\n    /**\n     * Method to perform pdf export.\n     * @hidden\n     */\n    PDFExport.prototype.exportToPDF = function () {\n        var eventParams = this.applyEvent();\n        /** Fill data and export */\n        var dataCollIndex = 0;\n        var gridResult;\n        var pivotValues = eventParams.args.dataCollections[dataCollIndex];\n        var colLength = pivotValues && pivotValues.length > 0 ? pivotValues[0].length : 0;\n        var integratedCnt = 0;\n        do {\n            var pdfGrid = new PdfGrid();\n            if (pivotValues && pivotValues.length > 0) {\n                pdfGrid.columns.add(pivotValues[0].length - integratedCnt >= 6 ? 6 : pivotValues[0].length - integratedCnt);\n                var rowLen = pivotValues.length;\n                var actualrCnt = 0;\n                var maxLevel = 0;\n                for (var rCnt = 0; rCnt < rowLen; rCnt++) {\n                    if (pivotValues[rCnt]) {\n                        var isColHeader = !(pivotValues[rCnt][0] && pivotValues[rCnt][0].axis === 'row');\n                        var colLen = pivotValues[rCnt].length > (integratedCnt + 6) ? (integratedCnt + 6) :\n                            pivotValues[rCnt].length;\n                        if (isColHeader) {\n                            pdfGrid.headers.add(1);\n                        }\n                        var pdfGridRow = !isColHeader ? pdfGrid.rows.addRow() : pdfGrid.headers.getHeader(actualrCnt);\n                        var localCnt = 0;\n                        var isEmptyRow = true;\n                        for (var cCnt = integratedCnt; cCnt < colLen; cCnt++) {\n                            var isValueCell = false;\n                            if (pivotValues[rCnt][cCnt]) {\n                                var pivotCell = pivotValues[rCnt][cCnt];\n                                if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                    var cellValue = pivotCell.formattedText;\n                                    cellValue = pivotCell.type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') :\n                                        (pivotCell.type === 'sum' ?\n                                            cellValue.toString().replace('Total', this.parent.localeObj.getConstant('total')) : cellValue);\n                                    if (!(pivotCell.level === -1 && !pivotCell.rowSpan)) {\n                                        pdfGridRow.cells.getCell(localCnt).columnSpan = pivotCell.colSpan ?\n                                            (6 - localCnt < pivotCell.colSpan ? 6 - localCnt : pivotCell.colSpan) : 1;\n                                        if (isColHeader && pivotCell.rowSpan && pivotCell.rowSpan > 1) {\n                                            pdfGridRow.cells.getCell(localCnt).rowSpan = pivotCell.rowSpan ? pivotCell.rowSpan : 1;\n                                        }\n                                        pdfGridRow.cells.getCell(localCnt).value = cellValue ? cellValue.toString() : '';\n                                    }\n                                    if (cellValue !== '') {\n                                        isEmptyRow = false;\n                                    }\n                                }\n                                maxLevel = pivotCell.level > maxLevel && cCnt === 0 ? pivotCell.level : maxLevel;\n                                isValueCell = pivotCell.axis === 'value';\n                                cCnt = cCnt + (pdfGridRow.cells.getCell(localCnt).columnSpan ?\n                                    (pdfGridRow.cells.getCell(localCnt).columnSpan - 1) : 0);\n                                localCnt = localCnt + (pdfGridRow.cells.getCell(localCnt).columnSpan ?\n                                    (pdfGridRow.cells.getCell(localCnt).columnSpan - 1) : 0);\n                                if (pivotCell.style) {\n                                    pdfGridRow = this.applyStyle(pdfGridRow, pivotCell, localCnt);\n                                }\n                            }\n                            else {\n                                pdfGridRow.cells.getCell(localCnt).value = '';\n                                if (cCnt === 0 && isColHeader && this.parent.dataSource.columns &&\n                                    this.parent.dataSource.columns.length > 0) {\n                                    pdfGrid.headers.getHeader(0).cells.getCell(0).rowSpan++;\n                                }\n                            }\n                            var stringFormat = new PdfStringFormat();\n                            stringFormat.paragraphIndent = (!isColHeader && cCnt === 0 && pivotValues[rCnt][cCnt]) ?\n                                pivotValues[rCnt][cCnt].level * 15 : 0;\n                            stringFormat.alignment = isValueCell ? PdfTextAlignment.Right : PdfTextAlignment.Left;\n                            stringFormat.lineAlignment = PdfVerticalAlignment.Middle;\n                            pdfGridRow.cells.getCell(localCnt).style.stringFormat = stringFormat;\n                            localCnt++;\n                        }\n                        if (isEmptyRow) {\n                            pdfGridRow.height = 16;\n                        }\n                        actualrCnt++;\n                    }\n                }\n                if (integratedCnt === 0) {\n                    pdfGrid.columns.getColumn(0).width = 100 + (maxLevel * 20);\n                }\n            }\n            var layout = new PdfLayoutFormat();\n            layout.paginateBounds = new RectangleF(0, 0, 0, 0);\n            if (integratedCnt === 0 && this.parent.dataSource.columns && this.parent.dataSource.columns.length > 0) {\n                pdfGrid.headers.getHeader(0).cells.getCell(0).rowSpan--;\n            }\n            if (gridResult) {\n                gridResult = pdfGrid.draw(gridResult.page, new PointF(10, gridResult.bounds.y + gridResult.bounds.height + 10), layout);\n            }\n            else {\n                gridResult = pdfGrid.draw(eventParams.page, new PointF(10, 20), layout);\n            }\n            integratedCnt = integratedCnt + 6;\n            if (integratedCnt >= colLength && eventParams.args.dataCollections.length > (dataCollIndex + 1)) {\n                dataCollIndex++;\n                pivotValues = eventParams.args.dataCollections[dataCollIndex];\n                colLength = pivotValues && pivotValues.length > 0 ? pivotValues[0].length : 0;\n                integratedCnt = 0;\n            }\n        } while (integratedCnt < colLength);\n        eventParams.document.save(eventParams.args.fileName + '.pdf');\n        eventParams.document.destroy();\n    };\n    PDFExport.prototype.applyStyle = function (pdfGridRow, pivotCell, localCnt) {\n        var color = this.parent.conditionalFormattingModule.hexToRgb(pivotCell.style.backgroundColor);\n        var brush = new PdfSolidBrush(new PdfColor(color.r, color.g, color.b));\n        pdfGridRow.cells.getCell(localCnt).style.backgroundBrush = brush;\n        var size = Number(pivotCell.style.fontSize.split('px')[0]);\n        var font = new PdfStandardFont(PdfFontFamily.TimesRoman, size, PdfFontStyle.Regular);\n        pdfGridRow.cells.getCell(localCnt).style.font = font;\n        color = this.parent.conditionalFormattingModule.hexToRgb(pivotCell.style.color);\n        brush = new PdfSolidBrush(new PdfColor(color.r, color.g, color.b));\n        pdfGridRow.cells.getCell(localCnt).style.textBrush = brush;\n        return pdfGridRow;\n    };\n    PDFExport.prototype.applyEvent = function () {\n        /** Event trigerring */\n        if (this.parent.enableVirtualization) {\n            var pageSettings = this.parent.engineModule.pageSettings;\n            this.parent.engineModule.pageSettings = null;\n            this.parent.engineModule.generateGridData(this.parent.dataSource);\n            this.parent.engineModule.pageSettings = pageSettings;\n        }\n        var args = {\n            fileName: 'default', header: '', footer: '', dataCollections: [this.parent.engineModule.pivotValues]\n        };\n        this.parent.trigger(events.beforeExport, args);\n        var fileName = args.fileName;\n        var header = args.header;\n        var footer = args.footer;\n        var dataCollections = args.dataCollections;\n        var document = new PdfDocument();\n        var page = document.pages.add();\n        /** Header and Footer to be set */\n        var font = new PdfStandardFont(PdfFontFamily.TimesRoman, 15, PdfFontStyle.Regular);\n        var brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        var pen = new PdfPen(new PdfColor(0, 0, 0), .5);\n        var headerTemplate = new PdfPageTemplateElement(new RectangleF(0, 0, page.graphics.clientSize.width, 20));\n        headerTemplate.graphics.drawString(header, font, pen, brush, 0, 0, new PdfStringFormat(PdfTextAlignment.Center));\n        document.template.top = headerTemplate;\n        var footerTemplate = new PdfPageTemplateElement(new RectangleF(0, 0, page.graphics.clientSize.width, 20));\n        footerTemplate.graphics.drawString(footer, font, pen, brush, 0, 0, new PdfStringFormat(PdfTextAlignment.Center));\n        document.template.bottom = footerTemplate;\n        return { document: document, page: page, args: args };\n    };\n    return PDFExport;\n}());\nexport { PDFExport };\n","import { KeyboardEvents, closest, addClass, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\n/**\n * PivotView Keyboard interaction\n */\n/** @hidden */\nvar KeyboardInteraction = /** @class */ (function () {\n    /**\n     * Constructor\n     */\n    function KeyboardInteraction(parent) {\n        this.keyConfigs = {\n            tab: 'tab',\n            enter: 'enter',\n            shiftUp: 'shift+upArrow',\n            shiftDown: 'shift+downArrow',\n            shiftLeft: 'shift+leftArrow',\n            shiftRight: 'shift+rightArrow',\n            upArrow: 'upArrow',\n            downArrow: 'downArrow',\n            leftArrow: 'leftArrow',\n            rightArrow: 'rightArrow',\n            escape: 'escape'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.pivotViewKeyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    }\n    KeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'tab':\n                this.processTab(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'shiftUp':\n            case 'shiftDown':\n            case 'shiftLeft':\n            case 'shiftRight':\n            case 'upArrow':\n            case 'downArrow':\n            case 'leftArrow':\n            case 'rightArrow':\n                this.processSelection(e);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n        }\n    };\n    KeyboardInteraction.prototype.getNextButton = function (target) {\n        var allPivotButtons = [].slice.call(this.parent.element.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n        var nextElement = target;\n        if (this.parent.grid.element.querySelector('.' + cls.PIVOT_BUTTON_CLASS)) {\n            var len = allPivotButtons.length;\n            for (var i = 0; i < len; i++) {\n                if (allPivotButtons[i].getAttribute('data-uid') === target.getAttribute('data-uid')) {\n                    nextElement = allPivotButtons[i + 1] ? allPivotButtons[i + 1] : nextElement;\n                    break;\n                }\n            }\n        }\n        return nextElement;\n    };\n    KeyboardInteraction.prototype.processTab = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS)) {\n            var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n            var nextButton = this.getNextButton(target);\n            if (nextButton.getAttribute('data-uid') !== target.getAttribute('data-uid')) {\n                gridFocus.currentInfo.skipAction = true;\n                nextButton.focus();\n            }\n            else {\n                gridFocus.focus();\n                var element = gridFocus.getFocusedElement();\n                addClass([element], ['e-focused', 'e-focus']);\n                element.setAttribute('tabindex', '0');\n            }\n            e.preventDefault();\n            return;\n        }\n        else if (!this.parent.showGroupingBar && this.parent.showFieldList) {\n            if (target && closest(target, '.' + cls.TOGGLE_FIELD_LIST_CLASS)) {\n                var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n                gridFocus.focus();\n                var element = gridFocus.getFocusedElement();\n                addClass([element], ['e-focused', 'e-focus']);\n                element.setAttribute('tabindex', '0');\n            }\n        }\n        else if (!this.parent.showGroupingBar && !this.parent.showFieldList) {\n            if (target && closest(target, '.' + cls.PIVOT_VIEW_CLASS)) {\n                var gridElement = closest(target, '.' + cls.PIVOT_VIEW_CLASS);\n                var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n                var rows = [].slice.call(gridElement.getElementsByTagName('tr'));\n                if (target.innerHTML === (rows[rows.length - 1]).lastChild.innerHTML) {\n                    gridFocus.currentInfo.skipAction = true;\n                }\n                else {\n                    gridFocus.focus();\n                    var element = gridFocus.getFocusedElement();\n                    addClass([element], ['e-focused', 'e-focus']);\n                    element.setAttribute('tabindex', '0');\n                }\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processEnter = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.GRID_CLASS)) {\n            if (target.querySelector('.' + cls.ICON)) {\n                target.querySelector('.' + cls.ICON).click();\n            }\n            else if (target.classList.contains('e-valuescontent')) {\n                target.dispatchEvent(new MouseEvent('dblclick', {\n                    'view': window,\n                    'bubbles': true,\n                    'cancelable': true\n                }));\n            }\n            e.preventDefault();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.clearSelection = function () {\n        var control = this.parent;\n        /* tslint:disable */\n        control.element.querySelectorAll('.' + cls.CELL_SELECTED_BGCOLOR + ',.' + cls.SELECTED_BGCOLOR).forEach(function (ele) {\n            ele.classList.remove(cls.SELECTED_BGCOLOR, cls.CELL_SELECTED_BGCOLOR, cls.CELL_ACTIVE_BGCOLOR);\n        });\n        this.parent.renderModule.selected();\n        /* tslint:enable */\n    };\n    KeyboardInteraction.prototype.processSelection = function (e) {\n        if (this.parent.gridSettings.allowSelection && this.parent.gridSettings.selectionSettings.mode !== 'Row') {\n            var target = e.target;\n            var control = this.parent;\n            var colIndex = Number(e.target.getAttribute('aria-colIndex'));\n            var rowIndex = Number(e.target.getAttribute('index'));\n            var ele = void 0;\n            /* tslint:disable */\n            if (target.nodeName === 'TH' || target.nodeName === 'TD') {\n                if (e.action === 'shiftUp' || e.action === 'upArrow') {\n                    ele = (rowIndex === 0 || colIndex === 0 || (target.nodeName !== 'TH' &&\n                        control.renderModule.rowStartPos !== rowIndex)) ? null : this.getParentElement(control, ele, colIndex, rowIndex - 1);\n                }\n                else if (e.action === 'shiftDown' || e.action === 'downArrow') {\n                    ele = control.element.querySelector('th[aria-colindex=\"' + colIndex + '\"][index=\"' + (rowIndex + 1) + '\"]');\n                }\n                else if (e.action === 'shiftLeft' || e.action === 'leftArrow') {\n                    ele = e.target.previousSibling;\n                }\n                else {\n                    ele = e.target.nextSibling;\n                }\n            }\n            if (!isNullOrUndefined(ele)) {\n                if (control.gridSettings.selectionSettings.mode === 'Both' ? !ele.classList.contains(cls.ROW_CELL_CLASS) : true) {\n                    colIndex = Number(ele.getAttribute('aria-colindex'));\n                    rowIndex = Number(ele.getAttribute('index'));\n                    var colSpan = Number(ele.getAttribute('aria-colspan'));\n                    control.clearSelection(ele, e, colIndex, rowIndex);\n                    control.applyColumnSelection(e, ele, colIndex, colIndex + (colSpan > 0 ? (colSpan - 1) : 0), rowIndex);\n                }\n                else {\n                    control.clearSelection(ele, e, colIndex, rowIndex);\n                }\n            }\n            else {\n                if (e.action === 'upArrow') {\n                    ele = control.element.querySelector('[aria-colindex=\"' + colIndex + '\"][index=\"' + (rowIndex - 1) + '\"]');\n                    rowIndex--;\n                }\n                else if (e.action === 'downArrow') {\n                    ele = control.element.querySelector('[aria-colindex=\"' + colIndex + '\"][index=\"' + (rowIndex + 1) + '\"]');\n                    rowIndex++;\n                }\n                if (!isNullOrUndefined(ele)) {\n                    control.clearSelection(ele, e, colIndex, rowIndex);\n                }\n            }\n        }\n        /* tslint:enable */\n    };\n    KeyboardInteraction.prototype.getParentElement = function (control, ele, colIndex, rowIndex) {\n        while (!ele) {\n            ele = control.element.querySelector('[aria-colindex=\"' + colIndex + '\"][index=\"' + rowIndex + '\"]');\n            colIndex--;\n        }\n        return ele;\n    };\n    /**\n     * To destroy the keyboard module.\n     * @return {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.destroy = function () {\n        if (this.pivotViewKeyboardModule) {\n            this.pivotViewKeyboardModule.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return KeyboardInteraction;\n}());\nexport { KeyboardInteraction };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\n/**\n * Module to render Pivot button\n */\n/** @hidden */\nvar PivotContextMenu = /** @class */ (function () {\n    /** Constructor for render module */\n    function PivotContextMenu(parent) {\n        this.parent = parent;\n        this.parent.contextMenuModule = this;\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns void\n     * @private\n     */\n    PivotContextMenu.prototype.render = function () {\n        this.renderContextMenu();\n    };\n    PivotContextMenu.prototype.renderContextMenu = function () {\n        var menuItems = [\n            { text: this.parent.localeObj.getConstant('addToFilter'), id: 'Context_Filters' },\n            { text: this.parent.localeObj.getConstant('addToRow'), id: 'Context_Rows' },\n            { text: this.parent.localeObj.getConstant('addToColumn'), id: 'Context_Columns' },\n            { text: this.parent.localeObj.getConstant('addToValue'), id: 'Context_Values' }\n        ];\n        var menuOptions = {\n            cssClass: cls.PIVOT_CONTEXT_MENU_CLASS,\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.onBeforeMenuOpen.bind(this),\n            select: this.onSelectContextMenu.bind(this)\n        };\n        this.parent.element.appendChild(createElement('ul', {\n            id: this.parent.element.id + '_PivotContextMenu'\n        }));\n        this.menuObj = new ContextMenu(menuOptions);\n        this.menuObj.appendTo('#' + this.parent.element.id + '_PivotContextMenu');\n    };\n    PivotContextMenu.prototype.onBeforeMenuOpen = function (args) {\n        var items = [].slice.call(args.element.querySelectorAll('li'));\n        var fieldType = this.fieldElement.querySelector('.' + cls.PIVOT_BUTTON_CONTENT_CLASS).getAttribute('data-type');\n        removeClass(items, cls.MENU_DISABLE);\n        if (fieldType === 'CalculatedField') {\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var item = items_1[_i];\n                if (item.textContent !== this.parent.localeObj.getConstant('addToValue')) {\n                    addClass([item], cls.MENU_DISABLE);\n                }\n            }\n        }\n    };\n    PivotContextMenu.prototype.onSelectContextMenu = function (menu) {\n        if (menu.element.textContent !== null) {\n            var fieldName = this.fieldElement.getAttribute('data-uid');\n            var dropClass = menu.item.id.replace('Context_', '').toLowerCase();\n            this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, dropClass, -1);\n            this.parent.updateDataSource(true);\n            this.fieldElement = undefined;\n        }\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @return {void}\n     * @hidden\n     */\n    PivotContextMenu.prototype.destroy = function () {\n        if (!this.parent.isDestroyed) {\n            return;\n        }\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return PivotContextMenu;\n}());\nexport { PivotContextMenu };\n","import { EventHandler, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { contentReady } from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\n/**\n * `VirtualScroll` module is used to handle scrolling behavior.\n */\nvar VirtualScroll = /** @class */ (function () {\n    /**\n     * Constructor for PivotView scrolling.\n     * @hidden\n     */\n    function VirtualScroll(parent) {\n        this.previousValues = { top: 0, left: 0 };\n        this.frozenPreviousValues = { top: 0, left: 0 };\n        this.eventType = '';\n        this.parent = parent;\n        this.addInternalEvents();\n    }\n    /**\n     * It returns the Module name.\n     * @returns string\n     * @hidden\n     */\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.addInternalEvents = function () {\n        this.parent.on(contentReady, this.wireEvents, this);\n    };\n    VirtualScroll.prototype.wireEvents = function () {\n        var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n        var fCont = this.parent.element.querySelector('.' + cls.FROZENCONTENT_DIV);\n        var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n        EventHandler.clearEvents(mCont);\n        EventHandler.clearEvents(fCont);\n        if (this.parent.engineModule) {\n            EventHandler.add(mCont, 'scroll touchmove pointermove', this.onHorizondalScroll(mHdr, mCont, fCont), this);\n            EventHandler.add(mCont, 'scroll wheel touchmove pointermove', this.onVerticalScroll(fCont, mCont), this);\n            EventHandler.add(mCont, 'mouseup touchend', this.common(mHdr, mCont, fCont), this);\n            EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont, fCont), this);\n            EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n            EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n            EventHandler.add(mHdr, 'touchstart pointerdown', this.setPageXY(), this);\n            EventHandler.add(mHdr, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n        }\n        this.parent.grid.isPreventScrollEvent = true;\n    };\n    VirtualScroll.prototype.onWheelScroll = function (mCont, fCont) {\n        var _this = this;\n        var element = mCont;\n        return function (e) {\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.frozenPreviousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            fCont.scrollTop = top;\n            element.scrollTop = top;\n            _this.frozenPreviousValues.top = top;\n            _this.eventType = e.type;\n        };\n    };\n    VirtualScroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (!(e.touches && e.touches.length)) {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        else {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        return pageXY;\n    };\n    VirtualScroll.prototype.onTouchScroll = function (mHdr, mCont, fCont) {\n        var _this = this;\n        var element = mCont;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.element.querySelector('.' + cls.HEADERCONTENT).contains(e.target)) {\n                if (_this.frozenPreviousValues.left === left || left < 0) {\n                    return;\n                }\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.frozenPreviousValues.left = left;\n            }\n            else {\n                if (_this.frozenPreviousValues.top === top || top < 0) {\n                    return;\n                }\n                fCont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.frozenPreviousValues.top = top;\n            }\n            _this.eventType = e.type;\n        };\n    };\n    VirtualScroll.prototype.update = function (mHdr, mCont, top, left, e) {\n        if (this.direction === 'vertical') {\n            var rowValues = this.parent.dataSource.valueAxis === 'row' ? this.parent.dataSource.values.length : 1;\n            var exactSize = (this.parent.pageSettings.rowSize * rowValues * this.parent.gridSettings.rowHeight);\n            var section = Math.ceil(top / exactSize);\n            if (this.parent.scrollPosObject.vertical === section) {\n                hideSpinner(this.parent.element);\n                return;\n            }\n            showSpinner(this.parent.element);\n            this.parent.scrollPosObject.vertical = section;\n            this.parent.engineModule.pageSettings.rowCurrentPage = section > 1 ? section : 1;\n            this.parent.engineModule.generateGridData(this.parent.dataSource, this.parent.engineModule.headerCollection);\n            this.parent.pivotValues = this.parent.engineModule.pivotValues;\n            var exactPage = Math.ceil(this.parent.engineModule.rowStartPos / (this.parent.pageSettings.rowSize * rowValues));\n            var pos = exactSize * exactPage -\n                (this.parent.engineModule.rowFirstLvl * rowValues * this.parent.gridSettings.rowHeight);\n            this.parent.scrollPosObject.verticalSection = pos;\n        }\n        else {\n            var colValues = this.parent.dataSource.valueAxis === 'column' ? this.parent.dataSource.values.length : 1;\n            var exactSize = (this.parent.pageSettings.columnSize *\n                colValues * this.parent.gridSettings.columnWidth);\n            var section = Math.ceil(left / exactSize);\n            if (this.parent.scrollPosObject.horizontal === section) {\n                hideSpinner(this.parent.element);\n                return;\n            }\n            showSpinner(this.parent.element);\n            this.parent.scrollPosObject.horizontal = section;\n            this.parent.engineModule.pageSettings.columnCurrentPage = section > 1 ? section : 1;\n            this.parent.engineModule.generateGridData(this.parent.dataSource, this.parent.engineModule.headerCollection);\n            // let isLastPage: boolean =\n            //     (this.parent.engineModule.pivotValues[0] as IAxisSet[])[this.parent.engineModule.pivotValues[0].length - 1].type\n            //     === 'grand sum' && section > 0;\n            this.parent.pivotValues = this.parent.engineModule.pivotValues;\n            var exactPage = Math.ceil(this.parent.engineModule.colStartPos / (this.parent.pageSettings.columnSize * colValues));\n            // let pos: number = isLastPage ?\n            //     ((left + mHdr.clientWidth) - ((mHdr.querySelector('.' + cls.TABLE) as HTMLElement).offsetWidth)) :\n            //     exactSize * exactPage - (this.parent.engineModule.colFirstLvl *\n            //         colValues * this.parent.gridSettings.columnWidth);\n            var pos = exactSize * exactPage - (this.parent.engineModule.colFirstLvl *\n                colValues * this.parent.gridSettings.columnWidth);\n            this.parent.scrollPosObject.horizontalSection = pos;\n        }\n    };\n    VirtualScroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    VirtualScroll.prototype.common = function (mHdr, mCont, fCont) {\n        var _this = this;\n        return function (e) {\n            _this.update(mHdr, mCont, mCont.scrollTop, mCont.scrollLeft, e);\n        };\n    };\n    VirtualScroll.prototype.onHorizondalScroll = function (mHdr, mCont, fCont) {\n        var _this = this;\n        /* tslint:disable-next-line */\n        var timeOutObj;\n        return function (e) {\n            var left = mCont.scrollLeft;\n            if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove') {\n                clearTimeout(timeOutObj);\n                /* tslint:disable */\n                timeOutObj = setTimeout(function () {\n                    left = e.type === 'touchmove' ? mCont.scrollLeft : left;\n                    _this.update(mHdr, mCont, mCont.scrollTop, left, e);\n                }, 300);\n            }\n            if (_this.previousValues.left === left) {\n                fCont.scrollTop = mCont.scrollTop;\n                return;\n            }\n            _this.direction = 'horizondal';\n            var excessMove = _this.parent.scrollPosObject.horizontalSection > left ?\n                -(_this.parent.scrollPosObject.horizontalSection - left) : ((left + mHdr.offsetWidth) -\n                (_this.parent.scrollPosObject.horizontalSection + mCont.querySelector('.e-table').offsetWidth));\n            if (_this.parent.scrollPosObject.horizontalSection > left ? true : excessMove > 1) {\n                //  showSpinner(this.parent.element);\n                if (left > mHdr.clientWidth) {\n                    if (_this.parent.scrollPosObject.left < 1) {\n                        _this.parent.scrollPosObject.left = mHdr.clientWidth;\n                    }\n                    _this.parent.scrollPosObject.left = _this.parent.scrollPosObject.left - 50;\n                    excessMove = _this.parent.scrollPosObject.horizontalSection > left ?\n                        (excessMove - _this.parent.scrollPosObject.left) : (excessMove + _this.parent.scrollPosObject.left);\n                }\n                else {\n                    excessMove = -_this.parent.scrollPosObject.horizontalSection;\n                }\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: 'translate(' + (_this.parent.scrollPosObject.horizontalSection + excessMove) + 'px,' +\n                        _this.parent.scrollPosObject.verticalSection + 'px)'\n                });\n                setStyleAttribute(mHdr.querySelector('.e-table'), {\n                    transform: 'translate(' + (_this.parent.scrollPosObject.horizontalSection + excessMove) + 'px,' + 0 + 'px)'\n                });\n                _this.parent.scrollPosObject.horizontalSection = _this.parent.scrollPosObject.horizontalSection + excessMove;\n            }\n            _this.previousValues.left = left;\n            _this.frozenPreviousValues.left = left;\n            _this.eventType = '';\n            mHdr.scrollLeft = mCont.scrollLeft;\n        };\n    };\n    VirtualScroll.prototype.onVerticalScroll = function (fCont, mCont) {\n        var _this = this;\n        /* tslint:disable-next-line */\n        var timeOutObj;\n        return function (e) {\n            var top = mCont.scrollTop;\n            if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove') {\n                clearTimeout(timeOutObj);\n                /* tslint:disable */\n                timeOutObj = setTimeout(function () {\n                    _this.update(null, mCont, mCont.scrollTop, mCont.scrollLeft, e);\n                }, 300);\n            }\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            _this.direction = 'vertical';\n            var excessMove = _this.parent.scrollPosObject.verticalSection > top ?\n                -(_this.parent.scrollPosObject.verticalSection - top) : ((top + fCont.clientHeight) -\n                (_this.parent.scrollPosObject.verticalSection + fCont.querySelector('.e-table').offsetHeight));\n            if (_this.parent.scrollPosObject.verticalSection > top ? true : excessMove > 1) {\n                //  showSpinner(this.parent.element);\n                if (top > fCont.clientHeight) {\n                    if (_this.parent.scrollPosObject.top < 1) {\n                        _this.parent.scrollPosObject.top = fCont.clientHeight;\n                    }\n                    _this.parent.scrollPosObject.top = _this.parent.scrollPosObject.top - 50;\n                    excessMove = _this.parent.scrollPosObject.verticalSection > top ?\n                        (excessMove - _this.parent.scrollPosObject.top) : (excessMove + _this.parent.scrollPosObject.top);\n                }\n                else {\n                    excessMove = -_this.parent.scrollPosObject.verticalSection;\n                }\n                setStyleAttribute(fCont.querySelector('.e-table'), {\n                    transform: 'translate(' + 0 + 'px,' + (_this.parent.scrollPosObject.verticalSection + excessMove) + 'px)'\n                });\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: 'translate(' + _this.parent.scrollPosObject.horizontalSection + 'px,' +\n                        (_this.parent.scrollPosObject.verticalSection + excessMove) + 'px)'\n                });\n                _this.parent.scrollPosObject.verticalSection = _this.parent.scrollPosObject.verticalSection + excessMove;\n            }\n            _this.previousValues.top = top;\n            _this.frozenPreviousValues.top = top;\n            _this.eventType = '';\n            fCont.scrollTop = mCont.scrollTop;\n            mCont.scrollTop = fCont.scrollTop;\n        };\n    };\n    /**\n     * @hidden\n     */\n    VirtualScroll.prototype.removeInternalEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(contentReady, this.wireEvents);\n    };\n    /**\n     * To destroy the virtualscrolling event listener\n     * @return {void}\n     * @hidden\n     */\n    VirtualScroll.prototype.destroy = function () {\n        this.removeInternalEvents();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { createElement, setStyleAttribute, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { Grid, Reorder, Resize, ColumnChooser, Toolbar } from '@syncfusion/ej2-grids';\nimport { VirtualScroll, Selection, Edit, Page, CommandColumn } from '@syncfusion/ej2-grids';\nimport * as events from '../../common/base/constant';\n/**\n * `DrillThroughDialog` module to create drill-through dialog.\n */\n/** @hidden */\nvar DrillThroughDialog = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function DrillThroughDialog(parent) {\n        this.isUpdated = false;\n        this.gridIndexObjects = {};\n        this.parent = parent;\n    }\n    /** @hidden */\n    DrillThroughDialog.prototype.showDrillThroughDialog = function (eventArgs) {\n        var _this = this;\n        this.removeDrillThroughDialog();\n        var drillThroughDialog = createElement('div', {\n            id: this.parent.element.id + '_drillthrough',\n            className: cls.DRILLTHROUGH_DIALOG,\n            styles: 'visibility:hidden;'\n        });\n        this.parent.element.appendChild(drillThroughDialog);\n        this.dialogPopUp = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            header: this.parent.localeObj.getConstant('details'),\n            content: this.createDrillThroughGrid(eventArgs),\n            beforeOpen: function () {\n                /* tslint:disable:align */\n                _this.drillThroughGrid.setProperties({\n                    dataSource: _this.parent.editSettings.allowEditing ?\n                        _this.dataWithPrimarykey(eventArgs) : eventArgs.rawData, height: 300\n                }, true);\n                /* tslint:enable:align */\n                _this.drillThroughGrid.enableVirtualization = !_this.parent.editSettings.allowEditing;\n            },\n            beforeClose: function () {\n                if (_this.parent.editSettings.allowEditing && _this.isUpdated) {\n                    var count = Object.keys(_this.gridIndexObjects).length;\n                    var addItems = [];\n                    /* tslint:disable:no-string-literal */\n                    for (var _i = 0, _a = _this.drillThroughGrid.dataSource; _i < _a.length; _i++) {\n                        var item = _a[_i];\n                        if (isNullOrUndefined(item['__index']) || item['__index'] === '') {\n                            for (var _b = 0, _c = _this.parent.engineModule.fields; _b < _c.length; _b++) {\n                                var field = _c[_b];\n                                if (isNullOrUndefined(item[field])) {\n                                    delete item[field];\n                                }\n                            }\n                            delete item['__index'];\n                            addItems.push(item);\n                        }\n                        else if (count > 0) {\n                            delete _this.gridIndexObjects[item['__index'].toString()];\n                            count--;\n                        }\n                    }\n                    count = 0;\n                    var items = [];\n                    for (var _d = 0, _e = _this.parent.dataSource.data; _d < _e.length; _d++) {\n                        var item = _e[_d];\n                        delete item['__index'];\n                        if (_this.gridIndexObjects[count.toString()] === undefined) {\n                            items.push(item);\n                        }\n                        count++;\n                    }\n                    /* tslint:enable:no-string-literal */\n                    items = items.concat(addItems);\n                    _this.parent.setProperties({ dataSource: { data: items } }, true);\n                    _this.parent.engineModule.updateGridData(_this.parent.dataSource);\n                    _this.parent.pivotValues = _this.parent.engineModule.pivotValues;\n                }\n                _this.isUpdated = false;\n                _this.gridIndexObjects = {};\n            },\n            isModal: true,\n            visible: true,\n            showCloseIcon: true,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            width: this.parent.isAdaptive ? '100%' : '60%',\n            position: { X: 'center', Y: 'center' },\n            closeOnEscape: true,\n            target: document.body,\n            close: this.removeDrillThroughDialog.bind(this)\n        });\n        this.dialogPopUp.appendTo(drillThroughDialog);\n        setStyleAttribute(this.dialogPopUp.element, { 'visibility': 'visible' });\n    };\n    DrillThroughDialog.prototype.removeDrillThroughDialog = function () {\n        if (this.dialogPopUp && !this.dialogPopUp.isDestroyed) {\n            this.dialogPopUp.destroy();\n        }\n        var dialogElement = document.getElementById(this.parent.element.id + '_drillthrough');\n        if (dialogElement) {\n            remove(dialogElement);\n        }\n        if (document.getElementById(this.parent.element.id + '_drillthroughgrid_ccdlg')) {\n            remove(document.getElementById(this.parent.element.id + '_drillthroughgrid_ccdlg'));\n        }\n    };\n    /* tslint:disable:max-func-body-length */\n    DrillThroughDialog.prototype.createDrillThroughGrid = function (eventArgs) {\n        var drillThroughBody = createElement('div', { id: this.parent.element.id + '_drillthroughbody', className: cls.DRILLTHROUGH_BODY_CLASS });\n        var drillThroughBodyHeader = createElement('div', {\n            id: this.parent.element.id +\n                '_drillthroughbodyheader', className: cls.DRILLTHROUGH_BODY_HEADER_CONTAINER_CLASS\n        });\n        if (eventArgs.rowHeaders !== '') {\n            drillThroughBodyHeader.innerHTML = '<span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_COMMON_CLASS + '><span class=' + cls.DRILLTHROUGH_BODY_HEADER_CLASS + '>' +\n                this.parent.localeObj.getConstant('row') + '</span> :<span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_VALUE_CLASS + '>' + eventArgs.rowHeaders + '</span></span>';\n        }\n        if (eventArgs.columnHeaders !== '') {\n            drillThroughBodyHeader.innerHTML = drillThroughBodyHeader.innerHTML + '<span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_COMMON_CLASS + '><span class=' +\n                cls.DRILLTHROUGH_BODY_HEADER_CLASS + '>' + this.parent.localeObj.getConstant('column') +\n                '</span> :<span class=' + cls.DRILLTHROUGH_BODY_HEADER_VALUE_CLASS + '>' +\n                eventArgs.columnHeaders + '</span></span>';\n        }\n        if (eventArgs.value !== '') {\n            var measure = eventArgs.value.split('(')[0];\n            var value = eventArgs.value.split('(')[1].split(')')[0];\n            if (value !== '0') {\n                drillThroughBodyHeader.innerHTML = drillThroughBodyHeader.innerHTML + '<span class=' +\n                    cls.DRILLTHROUGH_BODY_HEADER_COMMON_CLASS + '><span class=' +\n                    cls.DRILLTHROUGH_BODY_HEADER_CLASS + '>' +\n                    measure + '</span> :<span class=' + cls.DRILLTHROUGH_BODY_HEADER_VALUE_CLASS + '>' + value + '</span></span>';\n            }\n        }\n        var toolbarItems = ['ColumnChooser'];\n        if (this.parent.editSettings.allowEditing) {\n            if (this.parent.editSettings.allowCommandColumns) {\n                toolbarItems = ['ColumnChooser', 'Add'];\n            }\n            else if (this.parent.editSettings.mode === 'Batch') {\n                toolbarItems = ['ColumnChooser', 'Add', 'Delete', 'Update', 'Cancel'];\n            }\n            else if (this.parent.editSettings.mode === 'Dialog') {\n                toolbarItems = ['ColumnChooser', 'Add', 'Edit', 'Delete'];\n            }\n            else {\n                toolbarItems = ['ColumnChooser', 'Add', 'Edit', 'Delete', 'Update', 'Cancel'];\n            }\n        }\n        var drillThroughGrid = createElement('div', { id: this.parent.element.id + '_drillthroughgrid', className: cls.DRILLTHROUGH_GRID_CLASS });\n        Grid.Inject(Selection, Reorder, Resize, Toolbar, ColumnChooser);\n        this.drillThroughGrid = new Grid({\n            gridLines: 'Default',\n            allowResizing: true,\n            allowReordering: true,\n            showColumnChooser: true,\n            toolbar: toolbarItems,\n            columns: this.frameGridColumns(),\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            enableVirtualization: this.parent.editSettings.allowEditing,\n            allowPaging: this.parent.editSettings.allowEditing\n        });\n        var dialogModule = this;\n        this.parent.trigger(events.beginDrillThrough, { cellInfo: eventArgs, gridObj: this.drillThroughGrid, type: 'editing' });\n        if (this.parent.editSettings.allowEditing) {\n            Grid.Inject(Edit, Page);\n            this.drillThroughGrid.editSettings = this.parent.editSettings;\n            if (this.parent.editSettings.allowCommandColumns) {\n                this.drillThroughGrid.editSettings.mode = 'Normal';\n                this.drillThroughGrid.editSettings.allowEditOnDblClick = false;\n                Grid.Inject(CommandColumn);\n                this.drillThroughGrid.columns.push({\n                    headerText: this.parent.localeObj.getConstant('manageRecords'), width: 160, showInColumnChooser: false,\n                    commands: [\n                        { type: 'Edit', buttonOption: { iconCss: ' e-icons e-edit', cssClass: 'e-flat' } },\n                        { type: 'Delete', buttonOption: { iconCss: 'e-icons e-delete', cssClass: 'e-flat' } },\n                        { type: 'Save', buttonOption: { iconCss: 'e-icons e-update', cssClass: 'e-flat' } },\n                        { type: 'Cancel', buttonOption: { iconCss: 'e-icons e-cancel-icon', cssClass: 'e-flat' } }\n                    ]\n                });\n            }\n            else {\n                this.drillThroughGrid.editSettings.allowEditOnDblClick = this.parent.editSettings.allowEditOnDblClick;\n            }\n            /* tslint:disable:align */\n            this.drillThroughGrid.columns.push({\n                field: '__index', visible: false, isPrimaryKey: true, type: 'string', showInColumnChooser: false\n            });\n            /* tslint:disable-next-line:no-any */\n            this.drillThroughGrid.actionComplete = function (args) {\n                if (args.requestType === 'batchsave' || args.requestType === 'save' || args.requestType === 'delete') {\n                    dialogModule.isUpdated = true;\n                }\n                if ((dialogModule.drillThroughGrid.editSettings.mode === 'Normal' && args.requestType === 'save' &&\n                    dialogModule.drillThroughGrid.element.querySelectorAll('.e-tbar-btn:hover').length > 0 &&\n                    !dialogModule.parent.editSettings.allowCommandColumns) || args.requestType === 'batchsave') {\n                    dialogModule.dialogPopUp.hide();\n                }\n            };\n            this.drillThroughGrid.beforeBatchSave = function () {\n                dialogModule.isUpdated = true;\n            };\n            /* tslint:enable:align */\n        }\n        else {\n            Grid.Inject(VirtualScroll);\n        }\n        document.body.appendChild(drillThroughGrid);\n        this.drillThroughGrid.appendTo(drillThroughGrid);\n        drillThroughBody.appendChild(drillThroughBodyHeader);\n        drillThroughBody.appendChild(drillThroughGrid);\n        return drillThroughBody;\n    };\n    DrillThroughDialog.prototype.frameGridColumns = function () {\n        var keys = Object.keys(this.parent.engineModule.fieldList);\n        var columns = [];\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            if (this.parent.engineModule.fieldList[key].aggregateType !== 'CalculatedField') {\n                var editType = '';\n                if (this.parent.engineModule.fieldList[key].type === 'number') {\n                    editType = 'numericedit';\n                }\n                else if (this.parent.engineModule.fieldList[key].type === 'date') {\n                    editType = 'datepickeredit';\n                }\n                else {\n                    editType = '';\n                }\n                columns.push({\n                    field: key,\n                    headerText: this.parent.engineModule.fieldList[key].caption,\n                    width: 120,\n                    visible: this.parent.engineModule.fieldList[key].isSelected,\n                    validationRules: { required: true },\n                    editType: editType,\n                    type: 'string'\n                });\n            }\n        }\n        return columns;\n    };\n    DrillThroughDialog.prototype.dataWithPrimarykey = function (eventArgs) {\n        var indexString = Object.keys(eventArgs.currentCell.indexObject);\n        var rawData = eventArgs.rawData;\n        var count = 0;\n        for (var _i = 0, rawData_1 = rawData; _i < rawData_1.length; _i++) {\n            var item = rawData_1[_i];\n            /* tslint:disable-next-line:no-string-literal */\n            item['__index'] = indexString[count];\n            this.gridIndexObjects[indexString[count].toString()] = Number(indexString[count]);\n            count++;\n        }\n        return rawData;\n    };\n    return DrillThroughDialog;\n}());\nexport { DrillThroughDialog };\n","import { contentReady } from '../../common/base/constant';\nimport * as events from '../../common/base/constant';\nimport { DrillThroughDialog } from '../../common/popups/drillthrough-dialog';\nimport { EventHandler } from '@syncfusion/ej2-base';\n/**\n * `DrillThrough` module.\n */\nvar DrillThrough = /** @class */ (function () {\n    /**\n     * Constructor.\n     * @hidden\n     */\n    function DrillThrough(parent) {\n        this.parent = parent;\n        this.drillThroughDialog = new DrillThroughDialog(this.parent);\n        this.addInternalEvents();\n    }\n    /**\n     * It returns the Module name.\n     * @returns string\n     * @hidden\n     */\n    DrillThrough.prototype.getModuleName = function () {\n        return 'drillthrough';\n    };\n    DrillThrough.prototype.addInternalEvents = function () {\n        this.parent.on(contentReady, this.wireEvents, this);\n    };\n    DrillThrough.prototype.wireEvents = function () {\n        this.unWireEvents();\n        EventHandler.add(this.parent.element, 'dblclick', this.mouseClickHandler, this);\n    };\n    DrillThrough.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.element, 'dblclick', this.mouseClickHandler);\n    };\n    DrillThrough.prototype.mouseClickHandler = function (e) {\n        var target = e.target;\n        var ele = null;\n        if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-cellvalue') ||\n            target.classList.contains('e-headercelldiv')) {\n            ele = target.parentElement;\n        }\n        else if (target.classList.contains('e-headercell') || target.classList.contains('e-rowcell')) {\n            ele = target;\n        }\n        else if (target.classList.contains('e-headertext')) {\n            ele = target.parentElement.parentElement;\n        }\n        if (ele) {\n            if (this.parent.allowDrillThrough && ele.classList.contains('e-valuescontent') || this.parent.editSettings.allowEditing) {\n                this.executeDrillThrough(ele);\n            }\n        }\n    };\n    DrillThrough.prototype.executeDrillThrough = function (ele) {\n        var colIndex = Number(ele.getAttribute('aria-colindex'));\n        var rowIndex = Number(ele.getAttribute('index'));\n        var pivotValue = this.parent.pivotValues[rowIndex][colIndex];\n        var valueCaption = this.parent.engineModule.fieldList[pivotValue.actualText.toString()] ?\n            this.parent.engineModule.fieldList[pivotValue.actualText.toString()].caption : pivotValue.actualText.toString();\n        var rawData = [];\n        if (pivotValue.rowHeaders !== undefined && pivotValue.columnHeaders !== undefined && pivotValue.value !== undefined) {\n            var indexArray = Object.keys(pivotValue.indexObject);\n            for (var _i = 0, indexArray_1 = indexArray; _i < indexArray_1.length; _i++) {\n                var index = indexArray_1[_i];\n                rawData.push(this.parent.dataSource.data[Number(index)]);\n            }\n            var aggType = this.parent.engineModule.fieldList[pivotValue.actualText].aggregateType;\n            var valuetText = aggType === 'CalculatedField' ? valueCaption.toString() :\n                (aggType + ' of ' + valueCaption);\n            var eventArgs = {\n                currentTarget: ele,\n                currentCell: pivotValue,\n                rawData: rawData,\n                rowHeaders: pivotValue.rowHeaders === '' ? '' : pivotValue.rowHeaders.toString().split('.').join(' - '),\n                columnHeaders: pivotValue.columnHeaders === '' ? '' : pivotValue.columnHeaders.toString().split('.').join(' - '),\n                value: valuetText + '(' + pivotValue.formattedText + ')'\n            };\n            this.parent.trigger(events.drillThrough, eventArgs);\n            this.drillThroughDialog.showDrillThroughDialog(eventArgs);\n        }\n    };\n    return DrillThrough;\n}());\nexport { DrillThrough };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Browser, Component, createElement, setStyleAttribute, setCurrencyCode } from '@syncfusion/ej2-base';\nimport { EventHandler, Complex, extend, ChildProperty, Collection, isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { Internationalization, L10n, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { removeClass, addClass, Event } from '@syncfusion/ej2-base';\nimport { PivotEngine } from '../../base/engine';\nimport { Tooltip, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { Render } from '../renderer/render';\nimport { DataSource } from '../model/dataSource';\nimport { GridSettings } from '../model/gridsettings';\nimport { Grid, Reorder, Resize } from '@syncfusion/ej2-grids';\nimport { ExcelExport } from '../actions/excel-export';\nimport { PDFExport } from '../actions/pdf-export';\nimport { KeyboardInteraction } from '../actions/keyboard';\nimport { PivotContextMenu } from '../../common/popups/context-menu';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { VirtualScroll } from '../actions/virtualscroll';\nimport { DrillThrough } from '../actions/drill-through';\n/**\n * It holds the settings of Grouping Bar.\n */\nvar GroupingBarSettings = /** @class */ (function (_super) {\n    __extends(GroupingBarSettings, _super);\n    function GroupingBarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showFilterIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showSortIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showRemoveIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupingBarSettings.prototype, \"showValueTypeIcon\", void 0);\n    return GroupingBarSettings;\n}(ChildProperty));\nexport { GroupingBarSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar CellEditSettings = /** @class */ (function (_super) {\n    __extends(CellEditSettings, _super);\n    function CellEditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"allowCommandColumns\", void 0);\n    __decorate([\n        Property('Normal')\n    ], CellEditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], CellEditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], CellEditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], CellEditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    return CellEditSettings;\n}(ChildProperty));\nexport { CellEditSettings };\n/**\n * Configures the conditional based hyper link settings.\n */\nvar ConditionalSettings = /** @class */ (function (_super) {\n    __extends(ConditionalSettings, _super);\n    function ConditionalSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"measure\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"label\", void 0);\n    __decorate([\n        Property('NotEquals')\n    ], ConditionalSettings.prototype, \"conditions\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"value1\", void 0);\n    __decorate([\n        Property()\n    ], ConditionalSettings.prototype, \"value2\", void 0);\n    return ConditionalSettings;\n}(ChildProperty));\nexport { ConditionalSettings };\n/**\n * It holds the settings of Hyperlink.\n */\nvar HyperlinkSettings = /** @class */ (function (_super) {\n    __extends(HyperlinkSettings, _super);\n    function HyperlinkSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showRowHeaderHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showColumnHeaderHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showValueCellHyperlink\", void 0);\n    __decorate([\n        Property(false)\n    ], HyperlinkSettings.prototype, \"showSummaryCellHyperlink\", void 0);\n    __decorate([\n        Collection([], ConditionalSettings)\n    ], HyperlinkSettings.prototype, \"conditionalSettings\", void 0);\n    __decorate([\n        Property()\n    ], HyperlinkSettings.prototype, \"headerText\", void 0);\n    __decorate([\n        Property('')\n    ], HyperlinkSettings.prototype, \"cssClass\", void 0);\n    return HyperlinkSettings;\n}(ChildProperty));\nexport { HyperlinkSettings };\n/**\n * Represents the PivotView component.\n * ```html\n * <div id=\"PivotView\"></div>\n * <script>\n *  var pivotviewObj = new PivotView({ enableGroupingBar: true });\n *  pivotviewObj.appendTo(\"#pivotview\");\n * </script>\n * ```\n */\nvar PivotView = /** @class */ (function (_super) {\n    __extends(PivotView, _super);\n    /**\n     * Constructor for creating the widget\n     * @param  {PivotViewModel} options?\n     * @param  {string|HTMLElement} element?\n     */\n    function PivotView(options, element) {\n        var _this_1 = _super.call(this, options, element) || this;\n        _this_1.shiftLockedPos = [];\n        _this_1.savedSelectedCellsPos = [];\n        _this_1.isPopupClicked = false;\n        _this_1.isMouseDown = false;\n        _this_1.isMouseUp = false;\n        _this_1.isCellBoxMultiSelection = false;\n        /** @hidden */\n        _this_1.rowRangeSelection = { enable: false, startIndex: 0, endIndex: 0 };\n        /** @hidden */\n        _this_1.resizeInfo = {};\n        /** @hidden */\n        _this_1.scrollPosObject = {\n            vertical: 0, horizontal: 0, verticalSection: 0,\n            horizontalSection: 0, top: 0, left: 0, scrollDirection: { direction: '', position: 0 }\n        };\n        /** @hidden */\n        _this_1.pivotColumns = [];\n        /** @hidden */\n        _this_1.totColWidth = 0;\n        /** @hidden */\n        _this_1.posCount = 0;\n        _this_1.needsID = true;\n        _this_1.pivotView = _this_1;\n        return _this_1;\n    }\n    PivotView_1 = PivotView;\n    /**\n     * To provide the array of modules needed for control rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    PivotView.prototype.requiredModules = function () {\n        var modules = [];\n        var isCommonRequire;\n        if (this.allowConditionalFormatting) {\n            modules.push({ args: [this], member: 'conditionalformatting' });\n        }\n        if (this.allowCalculatedField) {\n            isCommonRequire = true;\n            modules.push({ args: [this], member: 'calculatedfield' });\n        }\n        if (this.showGroupingBar) {\n            isCommonRequire = true;\n            modules.push({ args: [this], member: 'grouping' });\n        }\n        if (this.showFieldList) {\n            isCommonRequire = true;\n            modules.push({ args: [this], member: 'fieldlist' });\n        }\n        if (this.allowExcelExport) {\n            modules.push({ args: [this], member: 'excelExport' });\n        }\n        if (this.allowPdfExport) {\n            modules.push({ args: [this], member: 'pdfExport' });\n        }\n        if (this.enableVirtualization) {\n            modules.push({ args: [this], member: 'virtualscroll' });\n        }\n        if (isCommonRequire) {\n            modules.push({ args: [this], member: 'common' });\n        }\n        return modules;\n    };\n    /**\n     * For internal use only - Initializing internal properties;\n     * @private\n     */\n    PivotView.prototype.preRender = function () {\n        this.initProperties();\n        this.isAdaptive = Browser.isDevice;\n        this.renderToolTip();\n        this.keyboardModule = new KeyboardInteraction(this);\n        this.contextMenuModule = new PivotContextMenu(this);\n        this.globalize = new Internationalization(this.locale);\n        this.defaultLocale = {\n            grandTotal: 'Grand Total',\n            total: 'Total',\n            value: 'Value',\n            noValue: 'No value',\n            row: 'Row',\n            column: 'Column',\n            collapse: 'Collapse',\n            expand: 'Expand',\n            rowAxisPrompt: 'Drop row here',\n            columnAxisPrompt: 'Drop column here',\n            valueAxisPrompt: 'Drop value here',\n            filterAxisPrompt: 'Drop filter here',\n            filter: 'Filter',\n            filtered: 'Filtered',\n            sort: 'Sort',\n            filters: 'Filters',\n            rows: 'Rows',\n            columns: 'Columns',\n            values: 'Values',\n            close: 'Close',\n            cancel: 'Cancel',\n            delete: 'Delete',\n            calculatedField: 'Calculated Field',\n            createCalculatedField: 'Create Calculated Field',\n            fieldName: 'Enter the field name',\n            error: 'Error',\n            invalidFormula: 'Invalid formula.',\n            dropText: 'Example: (\"Sum(Order_Count)\" + \"Sum(In_Stock)\") * 250',\n            dropTextMobile: 'Add fields and edit formula here.',\n            dropAction: 'Calculated field cannot be place in any other region except value axis.',\n            alert: 'Alert',\n            warning: 'Warning',\n            ok: 'OK',\n            search: 'Search',\n            drag: 'Drag',\n            remove: 'Remove',\n            sum: 'Sum',\n            average: 'Average',\n            count: 'Count',\n            min: 'Min',\n            max: 'Max',\n            allFields: 'All Fields',\n            formula: 'Formula',\n            addToRow: 'Add to Row',\n            addToColumn: 'Add to Column',\n            addToValue: 'Add to Value',\n            addToFilter: 'Add to Filter',\n            emptyData: 'No records to display',\n            fieldExist: 'A field already exists in this name. Please enter a different name.',\n            confirmText: 'A calculation field already exists in this name. Do you want to replace it?',\n            noMatches: 'No matches',\n            format: 'Summaries values by',\n            edit: 'Edit',\n            clear: 'Clear',\n            formulaField: 'Drag and drop fields to formula',\n            dragField: 'Drag field to formula',\n            clearFilter: 'Clear',\n            by: 'by',\n            all: 'All',\n            multipleItems: 'Multiple items',\n            /* tslint:disable */\n            member: 'Member',\n            label: 'Label',\n            date: 'Date',\n            enterValue: 'Enter value',\n            chooseDate: 'Enter date',\n            Before: 'Before',\n            BeforeOrEqualTo: 'Before Or Equal To',\n            After: 'After',\n            AfterOrEqualTo: 'After Or Equal To',\n            labelTextContent: 'Show the items for which the label',\n            dateTextContent: 'Show the items for which the date',\n            valueTextContent: 'Show the items for which',\n            Equals: 'Equals',\n            DoesNotEquals: 'Does Not Equal',\n            BeginWith: 'Begins With',\n            DoesNotBeginWith: 'Does Not Begin With',\n            EndsWith: 'Ends With',\n            DoesNotEndsWith: 'Does Not End With',\n            Contains: 'Contains',\n            DoesNotContains: 'Does Not Contain',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqualTo: 'Greater Than Or Equal To',\n            LessThan: 'Less Than',\n            LessThanOrEqualTo: 'Less Than Or Equal To',\n            Between: 'Between',\n            NotBetween: 'Not Between',\n            And: 'and',\n            Sum: 'Sum',\n            Count: 'Count',\n            DistinctCount: 'Distinct Count',\n            Product: 'Product',\n            Avg: 'Avg',\n            Min: 'Min',\n            SampleVar: 'Sample Var',\n            PopulationVar: 'Population Var',\n            RunningTotals: 'Running Totals',\n            Max: 'Max',\n            Index: 'Index',\n            SampleStDev: 'Sample StDev',\n            PopulationStDev: 'Population StDev',\n            PercentageOfRowTotal: '% of Row Total',\n            PercentageOfParentTotal: '% of Parent Total',\n            PercentageOfParentColumnTotal: '% of Parent Column Total',\n            PercentageOfParentRowTotal: '% of Parent Row Total',\n            DifferenceFrom: 'Difference From',\n            PercentageOfDifferenceFrom: '% of Difference From',\n            PercentageOfGrandTotal: '% of Grand Total',\n            PercentageOfColumnTotal: '% of Column Total',\n            /* tslint:enable */\n            NotEquals: 'Not Equals',\n            AllValues: 'All Values',\n            conditionalFormating: 'Conditional Formatting',\n            apply: 'APPLY',\n            condition: 'Add Condition',\n            formatLabel: 'Format',\n            valueFieldSettings: 'Value field settings',\n            baseField: 'Base field :',\n            baseItem: 'Base item :',\n            summarizeValuesBy: 'Summarize values by :',\n            sourceName: 'Field name :',\n            sourceCaption: 'Field caption :',\n            example: 'e.g:',\n            editorDataLimitMsg: ' more items. Search to refine further.',\n            details: 'Details',\n            manageRecords: 'Manage Records'\n        };\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.isDragging = false;\n        this.addInternalEvents();\n        setCurrencyCode(this.currencyCode);\n    };\n    PivotView.prototype.onBeforeTooltipOpen = function (args) {\n        args.element.classList.add('e-pivottooltipwrap');\n    };\n    PivotView.prototype.renderToolTip = function () {\n        if (this.showTooltip) {\n            this.tooltip = new Tooltip({\n                target: 'td.e-valuescontent',\n                showTipPointer: false,\n                enableRtl: this.enableRtl,\n                beforeRender: this.setToolTip.bind(this),\n                beforeOpen: this.onBeforeTooltipOpen\n            });\n            this.tooltip.appendTo(this.element);\n        }\n        else if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n    };\n    /* tslint:disable:align */\n    PivotView.prototype.initProperties = function () {\n        this.setProperties({ pivotValues: [] }, true);\n        this.queryCellInfo = this.gridSettings.queryCellInfo ? this.gridSettings.queryCellInfo.bind(this) : undefined;\n        this.headerCellInfo = this.gridSettings.headerCellInfo ? this.gridSettings.headerCellInfo.bind(this) : undefined;\n        this.resizing = this.gridSettings.resizing ? this.gridSettings.resizing.bind(this) : undefined;\n        this.resizeStop = this.gridSettings.resizeStop ? this.gridSettings.resizeStop.bind(this) : undefined;\n        this.pdfHeaderQueryCellInfo = this.gridSettings.pdfHeaderQueryCellInfo ?\n            this.gridSettings.pdfHeaderQueryCellInfo.bind(this) : undefined;\n        this.pdfQueryCellInfo = this.gridSettings.pdfQueryCellInfo ? this.gridSettings.pdfQueryCellInfo.bind(this) : undefined;\n        this.excelHeaderQueryCellInfo = this.gridSettings.excelHeaderQueryCellInfo ?\n            this.gridSettings.excelHeaderQueryCellInfo.bind(this) : undefined;\n        this.excelQueryCellInfo = this.gridSettings.excelQueryCellInfo ?\n            this.gridSettings.excelQueryCellInfo.bind(this) : undefined;\n        this.columnDragStart = this.gridSettings.columnDragStart ? this.gridSettings.columnDragStart.bind(this) : undefined;\n        this.columnDrag = this.gridSettings.columnDrag ? this.gridSettings.columnDrag.bind(this) : undefined;\n        this.columnDrop = this.gridSettings.columnDrop ? this.gridSettings.columnDrop.bind(this) : undefined;\n        this.beforeColumnsRender = this.gridSettings.beforeColumnsRender ? this.gridSettings.beforeColumnsRender : undefined;\n        this.selected = this.gridSettings.cellSelected ? this.gridSettings.cellSelected : undefined;\n        this.cellDeselected = this.gridSettings.cellDeselected ? this.gridSettings.cellDeselected : undefined;\n        this.rowSelected = this.gridSettings.rowSelected ? this.gridSettings.rowSelected : undefined;\n        this.rowDeselected = this.gridSettings.rowDeselected ? this.gridSettings.rowDeselected : undefined;\n        if (this.gridSettings.rowHeight === null) {\n            this.setProperties({ gridSettings: { rowHeight: this.isAdaptive ? 48 : 36 } }, true);\n        }\n        if (this.enableVirtualization) {\n            this.height = (typeof this.height === 'string' && this.height.indexOf('%') === -1) ?\n                Number(this.height.split('px')[0]) : this.height;\n            this.width = (typeof this.width === 'string' && this.width.indexOf('%') === -1) ?\n                Number(this.width.split('px')[0]) : this.width;\n            this.height = typeof this.height === 'number' ? this.height : 300;\n            this.width = typeof this.width === 'number' ? this.width : 800;\n        }\n        if (this.enableVirtualization) {\n            var colValues = 1;\n            var rowValues = 1;\n            if (this.dataSource.valueAxis === 'row') {\n                rowValues = this.dataSource.values.length;\n            }\n            else {\n                colValues = this.dataSource.values.length;\n            }\n            this.pageSettings = {\n                columnCurrentPage: 1, rowCurrentPage: 1,\n                columnSize: Math.ceil((Math.floor(this.width /\n                    this.gridSettings.columnWidth) - 1) / colValues),\n                rowSize: Math.ceil(Math.floor(this.height / this.gridSettings.rowHeight) / rowValues)\n            };\n            if (this.allowExcelExport) {\n                PivotView_1.Inject(ExcelExport);\n            }\n            if (this.allowPdfExport) {\n                PivotView_1.Inject(PDFExport);\n            }\n            if (this.editSettings.allowEditing) {\n                PivotView_1.Inject(DrillThrough);\n            }\n        }\n        this.isCellBoxMultiSelection = this.gridSettings.allowSelection &&\n            this.gridSettings.selectionSettings.cellSelectionMode === 'Box' &&\n            this.gridSettings.selectionSettings.mode === 'Cell' && this.gridSettings.selectionSettings.type === 'Multiple';\n    };\n    /**\n     * Initialize the control rendering\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.render = function () {\n        createSpinner({ target: this.element }, this.createElement);\n        this.trigger(events.load, { 'dataSource': this.dataSource });\n        this.updateClass();\n        this.notify(events.initSubComponent, {});\n        this.notify(events.initialLoad, {});\n        if (this.isAdaptive) {\n            this.contextMenuModule.render();\n        }\n    };\n    /**\n     * Register the internal events.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.addInternalEvents = function () {\n        this.on(events.initialLoad, this.generateData, this);\n        this.on(events.dataReady, this.renderPivotGrid, this);\n        this.on(events.contentReady, this.onContentReady, this);\n    };\n    /**\n     * De-Register the internal events.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.removeInternalEvents = function () {\n        this.off(events.initialLoad, this.generateData);\n        this.off(events.dataReady, this.renderPivotGrid);\n        this.off(events.contentReady, this.onContentReady);\n    };\n    /**\n     * Get the Pivot widget properties to be maintained in the persisted state.\n     * @returns {string}\n     * @hidden\n     */\n    PivotView.prototype.getPersistData = function () {\n        var keyEntity = ['dataSource', 'pivotValues', 'gridSettings'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * It returns the Module name.\n     * @returns string\n     * @hidden\n     */\n    PivotView.prototype.getModuleName = function () {\n        return 'pivotview';\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     * @returns {void}\n     * @hidden\n     */\n    PivotView.prototype.copy = function (withHeader) {\n        this.grid.copy(withHeader);\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-pivotgrid.html#printmode-string).\n     * @returns {void}\n     * @hidden\n     */\n    // public print(): void {\n    //     this.grid.print();\n    // }\n    /**\n     * Called internally if any of the property value changed.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'dataSource':\n                case 'hyperlinkSettings':\n                case 'allowDrillThrough':\n                case 'editSettings':\n                    this.notify(events.initialLoad, {});\n                    break;\n                case 'pivotValues':\n                    this.notify(events.dataReady, {});\n                    break;\n                case 'gridSettings':\n                    this.renderModule.updateGridSettings();\n                    this.isCellBoxMultiSelection = this.gridSettings.allowSelection &&\n                        this.gridSettings.selectionSettings.cellSelectionMode === 'Box' &&\n                        this.gridSettings.selectionSettings.mode === 'Cell' && this.gridSettings.selectionSettings.type === 'Multiple';\n                    break;\n                case 'locale':\n                case 'currencyCode':\n                    if (this.tooltip) {\n                        this.tooltip.destroy();\n                    }\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'enableRtl':\n                    this.notify(events.dataReady, {});\n                    this.updateClass();\n                    break;\n                case 'groupingBarSettings':\n                    this.axisFieldModule.render();\n                    break;\n                case 'showTooltip':\n                    this.renderToolTip();\n                    break;\n            }\n        }\n    };\n    /**\n     * Render the UI section of PivotView.\n     * @returns void\n     * @hidden\n     */\n    PivotView.prototype.renderPivotGrid = function () {\n        if (this.enableVirtualization) {\n            this.virtualscrollModule = new VirtualScroll(this);\n        }\n        if (this.hyperlinkSettings) {\n            this.isRowCellHyperlink = (this.hyperlinkSettings.showRowHeaderHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.isColumnCellHyperlink = (this.hyperlinkSettings.showColumnHeaderHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.isValueCellHyperlink = (this.hyperlinkSettings.showValueCellHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.isSummaryCellHyperlink = (this.hyperlinkSettings.showSummaryCellHyperlink ?\n                true : this.hyperlinkSettings.showHyperlink ? true : false);\n            this.applyHyperlinkSettings();\n        }\n        if (this.allowDrillThrough || this.editSettings.allowEditing) {\n            this.drillThroughModule = new DrillThrough(this);\n        }\n        this.renderModule = new Render(this);\n        this.renderModule.render();\n        if (this.showFieldList || this.showGroupingBar) {\n            this.notify(events.uiUpdate, this);\n            if (this.pivotFieldListModule && this.allowDeferLayoutUpdate) {\n                this.pivotFieldListModule.clonedDataSource = extend({}, this.dataSource, null, true);\n            }\n        }\n        this.trigger(events.dataBound);\n        if (this.allowConditionalFormatting) {\n            this.applyFormatting();\n        }\n    };\n    /**\n     * Updates the PivotEngine using dataSource from Pivot View component.\n     * @method updateDataSource\n     * @return {void}\n     * @hidden\n     */\n    PivotView.prototype.updateDataSource = function (isRefreshGrid) {\n        showSpinner(this.element);\n        /* tslint:disable:align */\n        this.engineModule = new PivotEngine(this.dataSource, '', this.engineModule.fieldList, this.pageSettings, this.enableValueSorting, (this.allowDrillThrough || this.editSettings.allowEditing));\n        var eventArgs = {\n            dataSource: this.dataSource,\n            pivotValues: this.engineModule.pivotValues\n        };\n        this.trigger(events.enginePopulated, eventArgs);\n        this.pivotCommon.engineModule = this.engineModule;\n        this.pivotCommon.dataSource = this.dataSource;\n        this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n        this.renderPivotGrid();\n    };\n    /**\n     * To destroy the PivotView elements.\n     * @returns void\n     */\n    PivotView.prototype.destroy = function () {\n        this.removeInternalEvents();\n        if (this.showGroupingBar && this.groupingBarModule) {\n            this.groupingBarModule.destroy();\n        }\n        if (this.enableVirtualization && this.virtualscrollModule) {\n            this.virtualscrollModule.destroy();\n        }\n        if (this.allowConditionalFormatting && this.conditionalFormattingModule) {\n            this.conditionalFormattingModule.destroy();\n        }\n        if (this.isAdaptive && this.contextMenuModule) {\n            this.contextMenuModule.destroy();\n        }\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        this.unwireEvents();\n        removeClass([this.element], cls.ROOT);\n        removeClass([this.element], cls.RTL);\n        removeClass([this.element], cls.DEVICE);\n        this.element.innerHTML = '';\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Export Pivot widget data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns void\n     */\n    /* tslint:disable-next-line:no-any */\n    PivotView.prototype.excelExport = function (excelExportProperties, isMultipleExport, workbook, isBlob) {\n        if (this.enableVirtualization) {\n            this.excelExportModule.exportToExcel('Excel');\n        }\n        else {\n            this.grid.excelExport(excelExportProperties, isMultipleExport, workbook, isBlob);\n        }\n    };\n    /**\n     * Export PivotGrid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns void\n     */\n    /* tslint:disable-next-line:no-any */\n    PivotView.prototype.csvExport = function (excelExportProperties, isMultipleExport, workbook, isBlob) {\n        if (this.enableVirtualization) {\n            this.excelExportModule.exportToExcel('CSV');\n        }\n        else {\n            this.grid.csvExport(excelExportProperties, isMultipleExport, workbook, isBlob);\n        }\n    };\n    /**\n     * Export Pivot widget data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns void\n     */\n    PivotView.prototype.pdfExport = function (pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        if (this.enableVirtualization) {\n            this.pdfExportModule.exportToPDF();\n        }\n        else {\n            this.grid.pdfExport(pdfExportProperties, isMultipleExport, pdfDoc, isBlob);\n        }\n    };\n    PivotView.prototype.onDrill = function (target) {\n        var fieldName = target.parentElement.getAttribute('fieldname');\n        var memberName = this.engineModule.pivotValues[Number(target.parentElement.getAttribute('index'))][Number(target.parentElement.getAttribute('aria-colindex'))].actualText;\n        this.engineModule.fieldList[fieldName].members[memberName].isDrilled =\n            target.classList.contains(cls.COLLAPSE) ? false : true;\n        var dataSource = extend({}, this.dataSource, null, true);\n        var fieldAvail = false;\n        var prop = dataSource.properties;\n        if (!prop.drilledMembers || prop.drilledMembers.length === 0) {\n            prop.drilledMembers = [{ name: fieldName, items: [memberName] }];\n        }\n        else {\n            for (var fCnt = 0; fCnt < prop.drilledMembers.length; fCnt++) {\n                var field = prop.drilledMembers[fCnt];\n                if (field.name === fieldName) {\n                    fieldAvail = true;\n                    var memIndex = field.items.indexOf(memberName);\n                    if (memIndex > -1) {\n                        field.items.splice(memIndex, 1);\n                    }\n                    else {\n                        field.items.push(memberName);\n                    }\n                }\n                else {\n                    continue;\n                }\n            }\n            if (!fieldAvail) {\n                prop.drilledMembers.push({ name: fieldName, items: [memberName] });\n            }\n        }\n        this.setProperties({ dataSource: { drilledMembers: prop.drilledMembers } }, true);\n        showSpinner(this.element);\n        this.engineModule.generateGridData(this.dataSource);\n        this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n        this.renderPivotGrid();\n    };\n    PivotView.prototype.onContentReady = function () {\n        this.isPopupClicked = false;\n        if (this.showFieldList) {\n            hideSpinner(this.pivotFieldListModule.fieldListSpinnerElement);\n        }\n        else if (this.fieldListSpinnerElement) {\n            hideSpinner(this.fieldListSpinnerElement);\n        }\n        if (!this.isEmptyGrid) {\n            hideSpinner(this.element);\n        }\n        else {\n            this.isEmptyGrid = false;\n        }\n        if (this.enableVirtualization && this.engineModule) {\n            if (this.element.querySelector('.' + cls.MOVABLECONTENT_DIV) &&\n                !this.element.querySelector('.' + cls.MOVABLECONTENT_DIV).querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n                this.virtualDiv = createElement('div', { className: cls.VIRTUALTRACK_DIV });\n                this.element.querySelector('.' + cls.MOVABLECONTENT_DIV).appendChild(this.virtualDiv);\n            }\n            if (this.element.querySelector('.' + cls.MOVABLEHEADER_DIV) &&\n                !this.element.querySelector('.' + cls.MOVABLEHEADER_DIV).querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n                this.virtualHeaderDiv = createElement('div', { className: cls.VIRTUALTRACK_DIV });\n                this.element.querySelector('.' + cls.MOVABLEHEADER_DIV).appendChild(this.virtualHeaderDiv);\n            }\n            else {\n                this.virtualHeaderDiv =\n                    this.element.querySelector('.' + cls.MOVABLEHEADER_DIV).querySelector('.' + cls.VIRTUALTRACK_DIV);\n            }\n            var movableTable = this.element.querySelector('.' + cls.MOVABLECONTENT_DIV).querySelector('.e-table');\n            var vHeight = (this.gridSettings.rowHeight * this.engineModule.rowCount + 0.1 - movableTable.clientHeight);\n            var vWidth = (this.gridSettings.columnWidth * this.engineModule.columnCount\n                - this.grid.columns[0].width);\n            setStyleAttribute(this.virtualDiv, {\n                height: (vHeight > 0.1 ? vHeight : 0.1) + 'px',\n                width: (vWidth > 0.1 ? vWidth : 0.1) + 'px'\n            });\n            setStyleAttribute(this.virtualHeaderDiv, {\n                height: 0, width: (vWidth > 0.1 ? vWidth : 0.1) + 'px'\n            });\n            var mCnt = this.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n            var fCnt = this.element.querySelector('.' + cls.FROZENCONTENT_DIV);\n            var mHdr = this.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n            setStyleAttribute(fCnt.querySelector('.e-table'), {\n                transform: 'translate(' + 0 + 'px,' + this.scrollPosObject.verticalSection + 'px)'\n            });\n            setStyleAttribute(mCnt.querySelector('.e-table'), {\n                transform: 'translate(' + this.scrollPosObject.horizontalSection + 'px,' + this.scrollPosObject.verticalSection + 'px)'\n            });\n            setStyleAttribute(mHdr.querySelector('.e-table'), {\n                transform: 'translate(' + this.scrollPosObject.horizontalSection + 'px,' + 0 + 'px)'\n            });\n        }\n        if (this.showGroupingBar) {\n            this.element.style.minWidth = '400px';\n            this.grid.element.style.minWidth = '400px';\n        }\n        else {\n            this.element.style.minWidth = '310px';\n            this.grid.element.style.minWidth = '310px';\n        }\n        this.unwireEvents();\n        this.wireEvents();\n    };\n    PivotView.prototype.setToolTip = function (args) {\n        var colIndex = Number(args.target.getAttribute('aria-colindex'));\n        var rowIndex = Number(args.target.getAttribute('index'));\n        var cell = this.pivotValues[rowIndex][colIndex];\n        this.tooltip.content = '';\n        if (cell) {\n            this.tooltip.content = '<div class=' + cls.PIVOTTOOLTIP + '><p class=' + cls.TOOLTIP_HEADER + '>' +\n                this.localeObj.getConstant('row') + ':</p><p class=' + cls.TOOLTIP_CONTENT + '>' +\n                this.getRowText(rowIndex, 0) +\n                '</p></br><p class=' + cls.TOOLTIP_HEADER + '>' +\n                this.localeObj.getConstant('column') + ':</p><p class=' + cls.TOOLTIP_CONTENT + '>' +\n                this.getColText(0, colIndex, rowIndex) + '</p></br>' + '<p class=' + cls.TOOLTIP_HEADER + '>' +\n                this.localeObj.getConstant('value') + ':</p><p class=' + cls.TOOLTIP_CONTENT + '>' +\n                (((cell.formattedText === '0' || cell.formattedText === '') ?\n                    this.localeObj.getConstant('noValue') : cell.formattedText)) + '</p></div>';\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    PivotView.prototype.getRowText = function (rowIndex, colIndex) {\n        var cell = this.pivotValues[rowIndex][colIndex];\n        var level = cell.level;\n        var rowText = cell.type === 'grand sum' ? this.localeObj.getConstant('grandTotal') : cell.formattedText;\n        while (level > 0 || cell.index === undefined) {\n            rowIndex--;\n            cell = this.pivotValues[rowIndex][colIndex];\n            if (cell.index !== undefined) {\n                if (level > cell.level) {\n                    rowText = rowText + ' - ' + cell.formattedText;\n                }\n                level = cell.level;\n            }\n        }\n        return rowText.split(' - ').reverse().join(' - ');\n    };\n    PivotView.prototype.getColText = function (rowIndex, colIndex, limit) {\n        var cell = this.pivotValues[0][colIndex];\n        var axis = cell.axis;\n        var colText = cell.type === 'grand sum' ? this.localeObj.getConstant('grandTotal') : cell.formattedText;\n        while (axis !== 'value' && limit > rowIndex) {\n            rowIndex++;\n            if (this.pivotValues[rowIndex]) {\n                cell = this.pivotValues[rowIndex][colIndex];\n                axis = cell.axis;\n                if (cell.type !== 'sum' && cell.type !== 'grand sum' && axis !== 'value') {\n                    colText = colText + ' - ' + cell.formattedText;\n                }\n            }\n        }\n        return colText;\n    };\n    PivotView.prototype.updateClass = function () {\n        if (this.enableRtl) {\n            addClass([this.element], cls.RTL);\n        }\n        else {\n            removeClass([this.element], cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClass([this.element], cls.DEVICE);\n        }\n        else {\n            removeClass([this.element], cls.DEVICE);\n        }\n    };\n    PivotView.prototype.wireEvents = function () {\n        EventHandler.add(this.element, this.isAdaptive ? 'touchend' : 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n        EventHandler.add(this.element.querySelector('.' + cls.GRID_HEADER), 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(this.element, 'mouseup', this.mouseUpHandler, this);\n        window.addEventListener('resize', this.onWindowResize.bind(this), true);\n    };\n    PivotView.prototype.mouseDownHandler = function (e) {\n        if (this.isCellBoxMultiSelection) {\n            this.isMouseDown = true;\n            this.isMouseUp = false;\n            var parent_1 = this.parentAt(e.target, 'TH');\n            this.clearSelection(parent_1, e, Number(parent_1.getAttribute('aria-colindex')), Number(parent_1.getAttribute('index')));\n            this.lastSelectedElement = undefined;\n        }\n    };\n    PivotView.prototype.mouseMoveHandler = function (e) {\n        if (this.isCellBoxMultiSelection) {\n            e.preventDefault();\n            if (this.isMouseDown && e.target) {\n                var ele = e.target;\n                var parentElement = this.parentAt(ele, 'TH');\n                if (this.lastSelectedElement && this.lastSelectedElement !== parentElement &&\n                    parentElement.classList.contains(cls.SELECTED_BGCOLOR)) {\n                    this.lastSelectedElement.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                    this.lastSelectedElement = parentElement;\n                }\n                else {\n                    this.lastSelectedElement = parentElement;\n                    parentElement.classList.add(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                }\n                this.renderModule.selected();\n            }\n        }\n    };\n    PivotView.prototype.mouseUpHandler = function (e) {\n        if (this.isCellBoxMultiSelection) {\n            this.isMouseDown = false;\n            this.isMouseUp = true;\n        }\n    };\n    PivotView.prototype.parentAt = function (target, tagName) {\n        while (target.tagName !== tagName) {\n            if (target.parentElement) {\n                target = target.parentElement;\n            }\n            else {\n                break;\n            }\n        }\n        return target;\n    };\n    PivotView.prototype.mouseClickHandler = function (e) {\n        var target = e.target;\n        if ((target.classList.contains('e-headercell') ||\n            target.classList.contains('e-headercelldiv') ||\n            target.classList.contains('e-rowsheader') ||\n            target.classList.contains('e-rowcell') ||\n            target.classList.contains('e-stackedheadercelldiv') ||\n            target.classList.contains('e-headertext') ||\n            target.classList.contains('e-ascending') ||\n            target.classList.contains('e-descending')) && this.enableValueSorting) {\n            var ele = null;\n            if (target.classList.contains('e-headercell') || target.classList.contains('e-rowsheader')\n                || target.classList.contains('e-rowcell')) {\n                ele = target;\n            }\n            else if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-headercelldiv') ||\n                target.classList.contains('e-ascending') || target.classList.contains('e-descending')) {\n                ele = target.parentElement;\n            }\n            else if (target.classList.contains('e-headertext')) {\n                ele = target.parentElement.parentElement;\n            }\n            this.CellClicked(target, e);\n            if ((ele.parentElement.parentElement.parentElement.parentElement.classList.contains('e-movableheader')\n                && this.dataSource.valueAxis === 'column') || (ele.parentElement.classList.contains('e-row') &&\n                this.dataSource.valueAxis === 'row')) {\n                /* tslint:disable */\n                var colIndex = Number(ele.getAttribute('aria-colindex'));\n                var rowIndex = Number(ele.getAttribute('index'));\n                if (this.dataSource.valueAxis === 'row' && (this.dataSource.values.length > 1 || this.dataSource.alwaysShowValueHeader)) {\n                    rowIndex = this.pivotValues[rowIndex][colIndex].type === 'value' ? rowIndex : (rowIndex + 1);\n                }\n                else if (this.dataSource.valueAxis === 'column' && (this.dataSource.values.length > 1 || this.dataSource.alwaysShowValueHeader)) {\n                    colIndex = (Number(ele.getAttribute('aria-colindex')) + Number(ele.getAttribute('aria-colspan')) - 1);\n                    rowIndex = this.engineModule.headerContent.length - 1;\n                }\n                this.setProperties({\n                    dataSource: {\n                        valueSortSettings: {\n                            columnIndex: (Number(ele.getAttribute('aria-colindex')) +\n                                Number(ele.getAttribute('aria-colspan')) - 1),\n                            sortOrder: this.dataSource.valueSortSettings.sortOrder === 'Descending' ? 'Ascending' : 'Descending',\n                            headerText: this.pivotValues[rowIndex][colIndex].valueSort.levelName,\n                            headerDelimiter: this.dataSource.valueSortSettings.headerDelimiter ?\n                                this.dataSource.valueSortSettings.headerDelimiter : '.'\n                        }\n                    }\n                }, true);\n                /* tslint:enable */\n                showSpinner(this.element);\n                this.engineModule.enableValueSorting = true;\n                this.engineModule.generateGridData(this.dataSource, this.engineModule.headerCollection);\n                this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n                this.renderPivotGrid();\n            }\n        }\n        else if (target.classList.contains(cls.COLLAPSE) || target.classList.contains(cls.EXPAND)) {\n            this.onDrill(target);\n        }\n        else {\n            this.CellClicked(target, e);\n            return;\n        }\n    };\n    PivotView.prototype.framePivotColumns = function (gridcolumns) {\n        for (var _i = 0, gridcolumns_1 = gridcolumns; _i < gridcolumns_1.length; _i++) {\n            var column = gridcolumns_1[_i];\n            if (column.columns && column.columns.length > 0) {\n                this.framePivotColumns(column.columns);\n            }\n            else {\n                /* tslint:disable */\n                var levelName = column.field === '0.formattedText' ? '' :\n                    (column.customAttributes ? column.customAttributes.cell.valueSort.levelName : '');\n                var width = this.renderModule.setSavedWidth(column.field === '0.formattedText' ? column.field :\n                    levelName, Number(column.width));\n                this.pivotColumns.push({\n                    allowReordering: column.allowReordering,\n                    allowResizing: column.allowResizing,\n                    headerText: levelName,\n                    width: width\n                });\n                this.totColWidth = this.totColWidth + Number(width);\n                /* tslint:enable */\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.setGridColumns = function (gridcolumns) {\n        if (this.element.offsetWidth < this.totColWidth) {\n            for (var _i = 0, gridcolumns_2 = gridcolumns; _i < gridcolumns_2.length; _i++) {\n                var column = gridcolumns_2[_i];\n                if (column.columns && column.columns.length > 0) {\n                    this.setGridColumns(column.columns);\n                }\n                else {\n                    /* tslint:disable */\n                    var levelName = column.field === '0.formattedText' ? '' :\n                        (column.customAttributes ? column.customAttributes.cell.valueSort.levelName : '');\n                    column.allowReordering = this.pivotColumns[this.posCount].allowReordering;\n                    column.allowResizing = this.pivotColumns[this.posCount].allowResizing;\n                    column.width = this.renderModule.setSavedWidth(column.field === '0.formattedText' ? column.field :\n                        levelName, Number(this.pivotColumns[this.posCount].width));\n                    this.posCount++;\n                    if (column.allowReordering) {\n                        this.gridSettings.allowReordering = true;\n                    }\n                    if (column.allowResizing) {\n                        this.gridSettings.allowResizing = true;\n                    }\n                }\n            }\n            if (this.gridSettings.allowReordering) {\n                Grid.Inject(Reorder);\n            }\n            if (this.gridSettings.allowResizing) {\n                Grid.Inject(Resize);\n            }\n            /* tslint:enable */\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.triggerColumnRenderEvent = function (gridcolumns) {\n        this.pivotColumns = [];\n        this.totColWidth = 0;\n        this.framePivotColumns(gridcolumns);\n        var firstColWidth = this.pivotColumns[0].width;\n        var eventArgs = {\n            columns: this.pivotColumns,\n            dataSource: this.dataSource\n        };\n        this.trigger(events.beforeColumnsRender, eventArgs);\n        if (firstColWidth !== this.pivotColumns[0].width && this.element.offsetWidth < this.totColWidth) {\n            this.firstColWidth = this.pivotColumns[0].width;\n        }\n        this.posCount = 0;\n        this.setGridColumns(gridcolumns);\n    };\n    /** @hidden */\n    PivotView.prototype.setCommonColumnsWidth = function (columns, width) {\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.field !== '0.formattedText') {\n                if (column.columns) {\n                    this.setCommonColumnsWidth(column.columns, width);\n                }\n                else {\n                    column.width = width;\n                }\n            }\n            else {\n                column.width = width < this.firstColWidth ? this.firstColWidth : width;\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.onWindowResize = function () {\n        var _this_1 = this;\n        /* tslint:disable */\n        clearTimeout(this.timeOutObj);\n        this.timeOutObj = setTimeout(function () {\n            if (_this_1.element && _this_1.element.classList.contains('e-pivotview') && _this_1.engineModule) {\n                var colWidth = _this_1.renderModule.calculateColWidth(_this_1.dataSource.values.length > 0 ?\n                    _this_1.engineModule.pivotValues[0].length : 2);\n                _this_1.grid.width = _this_1.renderModule.calculateGridWidth();\n                _this_1.setCommonColumnsWidth(_this_1.grid.columns, colWidth);\n                _this_1.posCount = 0;\n                _this_1.getSelectedCellsPos();\n                if (!_this_1.showGroupingBar) {\n                    _this_1.setGridColumns(_this_1.grid.columns);\n                }\n                _this_1.grid.headerModule.refreshUI();\n                if (_this_1.showGroupingBar && _this_1.groupingBarModule && _this_1.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n                    _this_1.groupingBarModule.setGridRowWidth();\n                }\n                _this_1.setSavedSelectedCells();\n            }\n        }, 500);\n        /* tslint:enable */\n    };\n    PivotView.prototype.CellClicked = function (target, e) {\n        var ele = null;\n        if (target.classList.contains('e-headercell') || target.classList.contains('e-rowcell')) {\n            ele = target;\n        }\n        else if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-cellvalue') ||\n            target.classList.contains('e-headercelldiv')) {\n            ele = target.parentElement;\n        }\n        else if (target.classList.contains('e-headertext')) {\n            ele = target.parentElement.parentElement;\n        }\n        else if (target.classList.contains(cls.ROW_SELECT)) {\n            if (target.classList.contains(cls.SPAN_CLICKED)) {\n                this.isPopupClicked = false;\n            }\n            else {\n                this.isPopupClicked = true;\n            }\n        }\n        /* tslint:disable */\n        if (ele) {\n            var colIndex = Number(ele.getAttribute('aria-colindex'));\n            var rowIndex = Number(ele.getAttribute('index'));\n            var colSpan = Number(ele.getAttribute('aria-colspan'));\n            if (this.cellClick) {\n                this.trigger(events.cellClick, {\n                    currentCell: ele,\n                    data: this.pivotValues[rowIndex][colIndex]\n                });\n            }\n            if (this.gridSettings.allowSelection) {\n                if (this.gridSettings.selectionSettings.mode === 'Both' ? !ele.classList.contains(cls.ROW_CELL_CLASS) :\n                    this.gridSettings.selectionSettings.mode !== 'Row') {\n                    this.clearSelection(ele, e, colIndex, rowIndex);\n                    this.applyColumnSelection(e, ele, colIndex, colIndex + (colSpan > 0 ? (colSpan - 1) : 0), rowIndex);\n                }\n                else {\n                    this.clearSelection(ele, e, colIndex, rowIndex);\n                }\n                if (this.gridSettings.selectionSettings.type === 'Multiple' &&\n                    (this.gridSettings.selectionSettings.mode === 'Row' || this.gridSettings.selectionSettings.mode === 'Both')) {\n                    this.applyRowSelection(0, rowIndex);\n                }\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.clearSelection = function (ele, e, colIndex, rowIndex) {\n        if ((!e.shiftKey && !e.ctrlKey) || this.gridSettings.selectionSettings.type === 'Single') {\n            if (this.gridSettings.selectionSettings.mode === 'Cell') {\n                if (ele.classList.contains(cls.COLUMNSHEADER)) {\n                    this.element.querySelectorAll(('.' + cls.ROW_CELL_CLASS + '.') + cls.CELL_SELECTED_BGCOLOR).forEach(function (ele) {\n                        ele.classList.remove(cls.CELL_SELECTED_BGCOLOR);\n                    });\n                }\n                else {\n                    this.element.querySelectorAll(('.' + cls.COLUMNSHEADER + '.') + cls.CELL_ACTIVE_BGCOLOR).forEach(function (ele) {\n                        ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                    });\n                }\n            }\n            else if (this.gridSettings.selectionSettings.mode === 'Both') {\n                if (ele.classList.contains(cls.ROW_CELL_CLASS)) {\n                    this.element.querySelectorAll('.' + cls.SELECTED_BGCOLOR).forEach(function (ele) {\n                        if (Number(ele.getAttribute('index')) !== rowIndex) {\n                            ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                        }\n                    });\n                }\n                else {\n                    this.element.querySelectorAll('.' + cls.ROWSHEADER + '.' + cls.CELL_SELECTED_BGCOLOR).forEach(function (ele) {\n                        ele.classList.remove(cls.CELL_SELECTED_BGCOLOR);\n                    });\n                }\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.applyRowSelection = function (colIndex, rowIndex) {\n        var pivotValue = this.engineModule.pivotValues[rowIndex][colIndex];\n        if (pivotValue && pivotValue.isDrilled) {\n            var parentLevel = pivotValue.level;\n            var rCount = rowIndex;\n            do {\n                rCount++;\n                pivotValue = this.engineModule.pivotValues[rCount][colIndex];\n            } while (pivotValue && parentLevel < pivotValue.level);\n            var _this = this;\n            if (this.isAdaptive) {\n                this.rowRangeSelection = {\n                    enable: true,\n                    startIndex: rowIndex - _this.renderModule.rowStartPos,\n                    endIndex: rCount - (1 + _this.renderModule.rowStartPos)\n                };\n            }\n            else {\n                _this.grid.selectionModule.selectRowsByRange(rowIndex -\n                    _this.renderModule.rowStartPos, rCount - (1 + _this.renderModule.rowStartPos));\n            }\n        }\n    };\n    /** @hidden */\n    PivotView.prototype.applyColumnSelection = function (e, target, colStart, colEnd, rowStart) {\n        if (!target.classList.contains(cls.ROWSHEADER) &&\n            (this.gridSettings.selectionSettings.mode === 'Cell' ? target.classList.contains(cls.COLUMNSHEADER) : true)) {\n            var isCtrl_1 = e.ctrlKey;\n            if (this.isAdaptive && this.gridSettings.selectionSettings.type === 'Multiple') {\n                this.grid.selectionModule.showPopup(e);\n                if (this.isPopupClicked) {\n                    this.element.querySelector('.' + cls.ROW_SELECT).classList.add(cls.SPAN_CLICKED);\n                    isCtrl_1 = true;\n                }\n                else {\n                    this.element.querySelector('.' + cls.ROW_SELECT).classList.remove(cls.SPAN_CLICKED);\n                    isCtrl_1 = false;\n                }\n            }\n            var queryStringArray = [];\n            var type = this.gridSettings.selectionSettings.type;\n            var isToggle_1 = target.classList.contains(cls.CELL_ACTIVE_BGCOLOR);\n            var activeColumns_1 = [];\n            var actColPos_1 = {};\n            for (var cCnt = colStart; cCnt <= colEnd; cCnt++) {\n                activeColumns_1.push(cCnt.toString());\n            }\n            if (!isCtrl_1 || type === 'Single') {\n                this.element.querySelectorAll('.' + cls.CELL_ACTIVE_BGCOLOR).forEach(function (ele) {\n                    ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                    if (activeColumns_1.indexOf(ele.getAttribute('aria-colindex')) === -1) {\n                        isToggle_1 = false;\n                    }\n                    var colIndex = Number(ele.getAttribute('aria-colindex'));\n                    actColPos_1[colIndex] = colIndex;\n                });\n                /* tslint:disable-next-line:no-any */\n                activeColumns_1 = Object.keys(actColPos_1).length > 0 ? Object.keys(actColPos_1).sort(function (a, b) {\n                    return a - b;\n                }) : activeColumns_1;\n            }\n            else {\n                isToggle_1 = false;\n            }\n            if (type === 'Multiple' && e.shiftKey) {\n                this.shiftLockedPos = this.shiftLockedPos.length === 0 ? activeColumns_1 : this.shiftLockedPos;\n                if (Number(this.shiftLockedPos[0]) <= colStart) {\n                    colStart = Number(this.shiftLockedPos[0]);\n                }\n                else {\n                    colEnd = colEnd < Number(this.shiftLockedPos[this.shiftLockedPos.length - 1]) ?\n                        Number(this.shiftLockedPos[this.shiftLockedPos.length - 1]) : colEnd;\n                }\n            }\n            else {\n                this.shiftLockedPos = [];\n            }\n            var count = colStart;\n            while (count <= colEnd) {\n                queryStringArray.push('[aria-colindex=\"' + count + '\"]' + (this.gridSettings.selectionSettings.mode === 'Cell' ?\n                    '[index=\"' + rowStart + '\"]' : \"\") + '');\n                count++;\n            }\n            if (!isToggle_1) {\n                rowStart = target.classList.contains('e-headercell') ? rowStart : (this.renderModule.rowStartPos - 1);\n                this.element.querySelectorAll(queryStringArray.toString()).forEach(function (ele) {\n                    if (Number(ele.getAttribute('index')) >= rowStart) {\n                        if (ele.classList.contains(cls.CELL_ACTIVE_BGCOLOR) && isCtrl_1) {\n                            ele.classList.remove(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                        }\n                        else {\n                            ele.classList.add(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n                        }\n                    }\n                });\n            }\n            this.renderModule.selected();\n        }\n    };\n    PivotView.prototype.getSelectedCellsPos = function () {\n        var control = this;\n        control.savedSelectedCellsPos = [];\n        this.element.querySelectorAll('.' + cls.SELECTED_BGCOLOR).forEach(function (ele) {\n            control.savedSelectedCellsPos.push({ rowIndex: ele.getAttribute('index'), colIndex: ele.getAttribute('aria-colindex') });\n        });\n    };\n    PivotView.prototype.setSavedSelectedCells = function () {\n        var control = this;\n        this.savedSelectedCellsPos.forEach(function (item) {\n            var query = '[aria-colindex=\"' + item.colIndex + '\"][index=\"' + item.rowIndex + '\"]';\n            control.element.querySelector(query).classList.add(cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR);\n        });\n    };\n    /* tslint:enable */\n    PivotView.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, this.isAdaptive ? 'touchend' : 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n        EventHandler.remove(this.element.querySelector('.' + cls.GRID_HEADER), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'mouseup', this.mouseUpHandler);\n        window.removeEventListener('resize', this.onWindowResize.bind(this), true);\n    };\n    PivotView.prototype.renderEmptyGrid = function () {\n        this.isEmptyGrid = true;\n        if (this.element.querySelector('.' + cls.GRID_CLASS)) {\n            remove(this.element.querySelector('.' + cls.GRID_CLASS));\n        }\n        this.renderModule = new Render(this);\n        this.renderModule.bindGrid(this, true);\n        /* tslint:disable:no-empty */\n        this.grid.showSpinner = function () { };\n        this.grid.hideSpinner = function () { };\n        /* tslint:enable:no-empty */\n        this.element.appendChild(createElement('div', { id: this.element.id + '_grid' }));\n        this.grid.appendTo('#' + this.element.id + '_grid');\n    };\n    PivotView.prototype.initEngine = function () {\n        this.trigger(events.enginePopulating, { 'dataSource': this.dataSource });\n        /* tslint:disable:align */\n        this.engineModule = new PivotEngine(this.dataSource, '', undefined, this.pageSettings, this.enableValueSorting, (this.allowDrillThrough || this.editSettings.allowEditing));\n        this.setProperties({ pivotValues: this.engineModule.pivotValues }, true);\n        this.trigger(events.enginePopulated, { 'pivotValues': this.pivotValues });\n        this.notify(events.dataReady, {});\n        this.isEmptyGrid = false;\n    };\n    PivotView.prototype.generateData = function () {\n        var _this_1 = this;\n        this.renderEmptyGrid();\n        showSpinner(this.element);\n        /* tslint:disable */\n        if (this.dataSource && this.dataSource.data) {\n            if (this.dataSource.data instanceof DataManager) {\n                setTimeout(function () {\n                    _this_1.dataSource.data.executeQuery(new Query()).then(function (e) {\n                        if (!_this_1.element.querySelector('.e-spinner-pane')) {\n                            showSpinner(_this_1.element);\n                        }\n                        _this_1.setProperties({ dataSource: { data: e.result } }, true);\n                        _this_1.initEngine();\n                    });\n                }, 100);\n            }\n            else if (this.dataSource.data.length > 0) {\n                this.initEngine();\n            }\n            else {\n                hideSpinner(this.element);\n            }\n        }\n        else {\n            hideSpinner(this.element);\n        }\n        /* tslint:enable */\n    };\n    PivotView.prototype.applyFormatting = function () {\n        if (this.pivotValues) {\n            var colIndex = [];\n            for (var len = this.pivotValues.length, i = 0; i < len; i++) {\n                if (this.pivotValues[i] !== undefined && this.pivotValues[i][0] === undefined) {\n                    colIndex.push(i);\n                }\n            }\n            for (var i = 0; i < this.pivotValues.length; i++) {\n                for (var j = 1; (this.pivotValues[i] && j < this.pivotValues[i].length); j++) {\n                    if (this.pivotValues[i][j].axis === 'value') {\n                        this.pivotValues[i][j].style = undefined;\n                        this.pivotValues[i][j].cssClass = undefined;\n                        var format_1 = this.dataSource.conditionalFormatSettings;\n                        for (var k = 0; k < format_1.length; k++) {\n                            if (this.checkCondition(this.pivotValues[i][j].value, format_1[k].conditions, format_1[k].value1, format_1[k].value2)) {\n                                var ilen = (this.dataSource.valueAxis === 'row' ? i : this.engineModule.headerContent.length - 1);\n                                var jlen = (this.dataSource.valueAxis === 'row' ? 0 : j);\n                                if ((!format_1[k].measure || this.dataSource.values.length === 1 ||\n                                    (this.pivotValues[ilen][jlen].valueSort &&\n                                        this.pivotValues[ilen][jlen].valueSort.levelName.\n                                            indexOf(format_1[k].measure) > -1)) &&\n                                    (!format_1[k].label || ((this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]] &&\n                                        this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]][j] &&\n                                        this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]][j].valueSort &&\n                                        this.pivotValues[colIndex[format_1[k].label.split('.').length - 1]][j].\n                                            valueSort[format_1[k].label]) || (this.pivotValues[i][0].\n                                        valueSort.levelName.indexOf(format_1[k].label) > -1)))) {\n                                    if (format_1[k].style && format_1[k].style.backgroundColor) {\n                                        format_1[k].style.backgroundColor = this.conditionalFormattingModule\n                                            .isHex(format_1[k].style.backgroundColor.substr(1)) ? format_1[k].style.backgroundColor :\n                                            this.conditionalFormattingModule.colourNameToHex(format_1[k].style.backgroundColor);\n                                    }\n                                    if (format_1[k].style && format_1[k].style.color) {\n                                        format_1[k].style.color = this.conditionalFormattingModule\n                                            .isHex(format_1[k].style.color.substr(1)) ? format_1[k].style.color :\n                                            this.conditionalFormattingModule.colourNameToHex(format_1[k].style.color);\n                                    }\n                                    this.pivotValues[i][j].style = format_1[k].style;\n                                    this.pivotValues[i][j].cssClass = 'format' + this.element.id + k;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            var format = this.dataSource.conditionalFormatSettings;\n            for (var k = 0; k < format.length; k++) {\n                var sheet = (function () {\n                    var style = document.createElement('style');\n                    style.appendChild(document.createTextNode(''));\n                    document.head.appendChild(style);\n                    return style.sheet;\n                })();\n                var str = 'color: ' + format[k].style.color + '!important;background-color: ' + format[k].style.backgroundColor +\n                    '!important;font-size: ' + format[k].style.fontSize + '!important;font-family: ' + format[k].style.fontFamily +\n                    ' !important;';\n                sheet.insertRule('.format' + this.element.id + k + '{' + str + '}', 0);\n            }\n        }\n    };\n    PivotView.prototype.applyHyperlinkSettings = function () {\n        if (this.pivotValues) {\n            var pivotValues = this.pivotValues;\n            var colIndex = [];\n            for (var len = pivotValues.length, i = 0; i < len; i++) {\n                if (pivotValues[i] !== undefined && pivotValues[i][0] === undefined) {\n                    colIndex.push(i);\n                }\n            }\n            if (this.hyperlinkSettings.conditionalSettings.length > 0) {\n                for (var i = 0; i < pivotValues.length; i++) {\n                    for (var j = 1; (pivotValues[i] && j < pivotValues[i].length); j++) {\n                        if (pivotValues[i][j].axis === 'value') {\n                            pivotValues[i][j].enableHyperlink = false;\n                            var collection = this.hyperlinkSettings.conditionalSettings;\n                            for (var k = 0; k < collection.length; k++) {\n                                if (this.checkCondition(pivotValues[i][j].value, collection[k].conditions, collection[k].value1, collection[k].value2)) {\n                                    var ilen = (this.dataSource.valueAxis === 'row' ?\n                                        i : this.engineModule.headerContent.length - 1);\n                                    var jlen = (this.dataSource.valueAxis === 'row' ? 0 : j);\n                                    if ((!collection[k].measure || this.dataSource.values.length === 1 ||\n                                        (pivotValues[ilen][jlen].valueSort &&\n                                            pivotValues[ilen][jlen].valueSort.levelName.\n                                                indexOf(collection[k].measure) > -1)) &&\n                                        (!collection[k].label || ((pivotValues[colIndex[collection[k].label.split('.').length - 1]] &&\n                                            pivotValues[colIndex[collection[k].label.split('.').length - 1]][j] &&\n                                            pivotValues[colIndex[collection[k].label.split('.').length - 1]][j].valueSort &&\n                                            pivotValues[colIndex[collection[k].label.split('.').length - 1]][j].\n                                                valueSort[collection[k].label]) || (pivotValues[i][0].\n                                            valueSort.levelName.indexOf(collection[k].label) > -1)))) {\n                                        pivotValues[i][j].enableHyperlink = true;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(this.hyperlinkSettings.headerText)) {\n                for (var i = 0; i < pivotValues.length; i++) {\n                    for (var j = 1; (pivotValues[i] && j < pivotValues[i].length); j++) {\n                        if (pivotValues[i][j].axis === 'value') {\n                            // (pivotValues[i][j] as IAxisSet).enableHyperlink = false;\n                            var label = this.hyperlinkSettings.headerText;\n                            var ilen = (this.dataSource.valueAxis === 'row' ?\n                                i : this.engineModule.headerContent.length - 1);\n                            var jlen = (this.dataSource.valueAxis === 'row' ? 0 : j);\n                            if ((pivotValues[colIndex[label.split('.').length - 1]] &&\n                                pivotValues[colIndex[label.split('.').length - 1]][j] &&\n                                pivotValues[colIndex[label.split('.').length - 1]][j].\n                                    valueSort && pivotValues[colIndex[label.split('.').length - 1]][j].\n                                valueSort[label])) {\n                                for (var _i = 0, colIndex_1 = colIndex; _i < colIndex_1.length; _i++) {\n                                    var index = colIndex_1[_i];\n                                    if (pivotValues[index][j] &&\n                                        pivotValues[index][j].axis === 'column' &&\n                                        (pivotValues[index][j].valueSort.levelName.indexOf(label) > -1)) {\n                                        pivotValues[index][j].enableHyperlink = true;\n                                    }\n                                }\n                                pivotValues[i][j].enableHyperlink = true;\n                            }\n                            else if (pivotValues[i][0].valueSort.levelName.indexOf(label) > -1) {\n                                pivotValues[i][0].enableHyperlink = true;\n                                pivotValues[i][j].enableHyperlink = true;\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                return;\n            }\n        }\n    };\n    PivotView.prototype.checkCondition = function (cellValue, conditions, conditionalValue1, conditionalValue2) {\n        switch (conditions) {\n            case 'LessThan':\n                return cellValue < conditionalValue1;\n            case 'LessThanOrEqualTo':\n                return cellValue <= conditionalValue1;\n            case 'GreaterThan':\n                return cellValue > conditionalValue1;\n            case 'GreaterThanOrEqualTo':\n                return cellValue >= conditionalValue1;\n            case 'Equals':\n                return cellValue === conditionalValue1;\n            case 'NotEquals':\n                return cellValue !== conditionalValue1;\n            case 'Between':\n                return (conditionalValue1 < conditionalValue2 && cellValue >= conditionalValue1 && cellValue <= conditionalValue2) ||\n                    (conditionalValue1 > conditionalValue2 && cellValue <= conditionalValue1 && cellValue >= conditionalValue2);\n            case 'NotBetween':\n                return !((conditionalValue1 < conditionalValue2 && cellValue >= conditionalValue1 && cellValue <= conditionalValue2) ||\n                    (conditionalValue1 > conditionalValue2 && cellValue <= conditionalValue1 && cellValue >= conditionalValue2));\n            default:\n                return false;\n        }\n    };\n    var PivotView_1;\n    __decorate([\n        Property('USD')\n    ], PivotView.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"showFieldList\", void 0);\n    __decorate([\n        Complex({}, GridSettings)\n    ], PivotView.prototype, \"gridSettings\", void 0);\n    __decorate([\n        Complex({}, GroupingBarSettings)\n    ], PivotView.prototype, \"groupingBarSettings\", void 0);\n    __decorate([\n        Complex({}, HyperlinkSettings)\n    ], PivotView.prototype, \"hyperlinkSettings\", void 0);\n    __decorate([\n        Complex({}, DataSource)\n    ], PivotView.prototype, \"dataSource\", void 0);\n    __decorate([\n        Complex({}, CellEditSettings)\n    ], PivotView.prototype, \"editSettings\", void 0);\n    __decorate([\n        Property()\n    ], PivotView.prototype, \"pivotValues\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"showGroupingBar\", void 0);\n    __decorate([\n        Property(true)\n    ], PivotView.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"showValuesButton\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowCalculatedField\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"enableValueSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowConditionalFormatting\", void 0);\n    __decorate([\n        Property('auto')\n    ], PivotView.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PivotView.prototype, \"width\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowDrillThrough\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotView.prototype, \"allowDeferLayoutUpdate\", void 0);\n    __decorate([\n        Property(1000)\n    ], PivotView.prototype, \"maxNodeLimitInMemberEditor\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"beforeColumnsRender\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"selected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"enginePopulating\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"enginePopulated\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"onFieldDropped\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"beforeExport\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"cellClick\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"drillThrough\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"beginDrillThrough\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"hyperlinkCellClick\", void 0);\n    __decorate([\n        Event()\n    ], PivotView.prototype, \"cellSelected\", void 0);\n    PivotView = PivotView_1 = __decorate([\n        NotifyPropertyChanges\n    ], PivotView);\n    return PivotView;\n}(Component));\nexport { PivotView };\n","import { KeyboardEvents, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Keyboard interaction\n */\n/** @hidden */\nvar CommonKeyboardInteraction = /** @class */ (function () {\n    /**\n     * Constructor\n     */\n    function CommonKeyboardInteraction(parent) {\n        this.keyConfigs = {\n            shiftF: 'shift+F',\n            shiftS: 'shift+S',\n            delete: 'delete',\n            enter: 'enter'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    }\n    CommonKeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'shiftF':\n                this.processFilter(e);\n                break;\n            case 'shiftS':\n                this.processSort(e);\n                break;\n            case 'delete':\n                this.processDelete(e);\n                break;\n            case 'enter':\n                this.processOpenContextMenu(e);\n                break;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processOpenContextMenu = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS) &&\n            closest(target, '.' + cls.VALUE_AXIS_CLASS)) {\n            target.querySelector('.' + cls.AXISFIELD_ICON_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processSort = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS) &&\n            !closest(target, '.' + cls.VALUE_AXIS_CLASS) && !closest(target, '.' + cls.AXIS_FILTER_CLASS)) {\n            target.querySelector('.' + cls.SORT_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processFilter = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS) && !closest(target, '.' + cls.VALUE_AXIS_CLASS)) {\n            target.querySelector('.' + cls.FILTER_COMMON_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    CommonKeyboardInteraction.prototype.processDelete = function (e) {\n        var target = e.target;\n        if (target && closest(target, '.' + cls.PIVOT_BUTTON_CLASS)) {\n            target.querySelector('.' + cls.REMOVE_CLASS).click();\n            e.preventDefault();\n            return;\n        }\n    };\n    /**\n     * To destroy the keyboard module.\n     * @return {void}\n     * @private\n     */\n    CommonKeyboardInteraction.prototype.destroy = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return CommonKeyboardInteraction;\n}());\nexport { CommonKeyboardInteraction };\n","import { isNullOrUndefined, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport * as cls from '../base/css-constant';\n/**\n * `EventBase` for active fields action.\n */\n/** @hidden */\nvar EventBase = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function EventBase(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Updates sorting order for the selected field.\n     * @method updateSorting\n     * @param  {Event} args - Contains clicked element information to update dataSource.\n     * @return {void}\n     * @hidden\n     */\n    EventBase.prototype.updateSorting = function (args) {\n        if (this.parent.filterDialog.dialogPopUp) {\n            this.parent.filterDialog.dialogPopUp.close();\n        }\n        var target = args.target;\n        var fieldName = target.parentElement.id;\n        var isDescending = target.classList.contains(cls.SORT_DESCEND_CLASS);\n        var sortObj = this.getSortItemByName(fieldName);\n        if (!isNullOrUndefined(sortObj)) {\n            for (var i = 0; i < this.parent.dataSource.sortSettings.length; i++) {\n                if (this.parent.dataSource.sortSettings[i].name === fieldName) {\n                    this.parent.dataSource.sortSettings.splice(i, 1);\n                    break;\n                }\n            }\n            var newSortObj = { name: fieldName, order: isDescending ? 'Ascending' : 'Descending' };\n            this.parent.dataSource.sortSettings.push(newSortObj);\n        }\n        else {\n            var newSortObj = { name: fieldName, order: isDescending ? 'Ascending' : 'Descending' };\n            this.parent.dataSource.sortSettings.push(newSortObj);\n        }\n        isDescending ? removeClass([target], cls.SORT_DESCEND_CLASS) : addClass([target], cls.SORT_DESCEND_CLASS);\n    };\n    /**\n     * Updates sorting order for the selected field.\n     * @method updateFiltering\n     * @param  {Event} args - Contains clicked element information to update dataSource.\n     * @return {void}\n     * @hidden\n     */\n    EventBase.prototype.updateFiltering = function (args) {\n        var target = args.target;\n        var fieldName = target.parentElement.id;\n        var fieldCaption = target.parentElement.textContent;\n        var isInclude = false;\n        var filterItems = [];\n        this.parent.engineModule.fieldList[fieldName].dateMember = new DataManager(this.parent.engineModule.\n            fieldList[fieldName].dateMember).executeLocal(new Query().\n            sortBy('actualText', this.parent.engineModule.fieldList[fieldName].sort.toLowerCase()));\n        var filterObj = this.getFilterItemByName(fieldName);\n        if (!isNullOrUndefined(filterObj)) {\n            isInclude = filterObj.type === 'Include' ? true : false;\n            filterItems = filterObj.items ? filterObj.items : [];\n        }\n        var treeData = this.getTreeData(isInclude, this.parent.engineModule.fieldList[fieldName].dateMember, filterItems, fieldName);\n        if (this.parent.filterDialog.dialogPopUp) {\n            this.parent.filterDialog.dialogPopUp.close();\n        }\n        var popupTarget;\n        popupTarget = this.parent.moduleName !== 'pivotfieldlist' ?\n            popupTarget = this.parent.element : popupTarget = document.getElementById(this.parent.parentID + '_Wrapper');\n        this.parent.filterDialog.createFilterDialog(treeData, fieldName, fieldCaption, popupTarget);\n    };\n    /**\n     * Gets sort object for the given field name from the dataSource.\n     * @method getSortItemByName\n     * @param  {string} fieldName - Gets sort settings for the given field name.\n     * @return {Sort}\n     * @hidden\n     */\n    EventBase.prototype.getSortItemByName = function (fieldName) {\n        var sortObjects = this.parent.dataSource.sortSettings;\n        return new DataManager({ json: sortObjects }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * Gets filter object for the given field name from the dataSource.\n     * @method getFilterItemByName\n     * @param  {string} fieldName - Gets filter settings for the given field name.\n     * @return {Sort}\n     * @hidden\n     */\n    EventBase.prototype.getFilterItemByName = function (fieldName) {\n        var filterObjects = this.parent.dataSource.filterSettings;\n        return new DataManager({ json: filterObjects }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * Gets filter object for the given field name from the dataSource.\n     * @method getFieldByName\n     * @param  {string} fieldName - Gets filter settings for the given field name.\n     * @return {Sort}\n     * @hidden\n     */\n    EventBase.prototype.getFieldByName = function (fieldName, fields) {\n        return new DataManager({ json: fields }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * Gets format object for the given field name from the dataSource.\n     * @method getFilterItemByName\n     * @param  {string} fieldName - Gets format settings for the given field name.\n     * @return {IFormatSettings}\n     * @hidden\n     */\n    EventBase.prototype.getFormatItemByName = function (fieldName) {\n        var formatObjects = this.parent.dataSource.formatSettings;\n        return new DataManager({ json: formatObjects }).executeLocal(new Query().where('name', 'equal', fieldName))[0];\n    };\n    /**\n     * show tree nodes using search text.\n     * @hidden\n     */\n    EventBase.prototype.searchTreeNodes = function (args, treeObj, isFieldCollection) {\n        if (isFieldCollection) {\n            var searchList = [];\n            var nonSearchList = [];\n            var list = [].slice.call(treeObj.element.querySelectorAll('li'));\n            for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n                var element = list_1[_i];\n                if ((element.querySelector('.e-list-text').textContent.toLowerCase()).indexOf(args.value.toLowerCase()) > -1) {\n                    searchList.push(element);\n                }\n                else {\n                    nonSearchList.push(element);\n                }\n            }\n            treeObj.enableNodes(searchList);\n            treeObj.disableNodes(nonSearchList);\n        }\n        else {\n            var searchList = [];\n            this.parent.searchTreeItems = [];\n            var memberCount = 0;\n            memberCount = 1;\n            for (var _a = 0, _b = this.parent.currentTreeItems; _a < _b.length; _a++) {\n                var item = _b[_a];\n                if (item.name.toLowerCase().indexOf(args.value.toLowerCase()) > -1) {\n                    this.parent.searchTreeItems.push(item);\n                    if (memberCount <= this.parent.control.maxNodeLimitInMemberEditor) {\n                        searchList.push(item);\n                    }\n                    memberCount++;\n                }\n            }\n            memberCount--;\n            if (memberCount > this.parent.control.maxNodeLimitInMemberEditor) {\n                this.parent.editorLabelElement.innerText = (memberCount - this.parent.control.maxNodeLimitInMemberEditor) +\n                    this.parent.control.localeObj.getConstant('editorDataLimitMsg');\n                this.parent.filterDialog.dialogPopUp.height = (this.parent.filterDialog.allowExcelLikeFilter ? '440px' : '400px');\n                this.parent.isDataOverflow = true;\n            }\n            else {\n                this.parent.editorLabelElement.innerText = '';\n                this.parent.filterDialog.dialogPopUp.height = (this.parent.filterDialog.allowExcelLikeFilter ? '400px' : '350px');\n                this.parent.isDataOverflow = false;\n            }\n            this.parent.isDataOverflow = (memberCount > this.parent.control.maxNodeLimitInMemberEditor);\n            this.parent.editorLabelElement.parentElement.style.display = this.parent.isDataOverflow ? 'inline-block' : 'none';\n            treeObj.fields = { dataSource: searchList, id: 'id', text: 'name', isChecked: 'checkedStatus' };\n            treeObj.dataBind();\n        }\n    };\n    EventBase.prototype.getTreeData = function (isInclude, members, filterItems, fieldName) {\n        this.parent.currentTreeItems = [];\n        this.parent.searchTreeItems = [];\n        this.parent.currentTreeItemsPos = {};\n        this.parent.savedTreeFilterPos = {};\n        this.parent.isDateField = this.parent.engineModule.formatFields[fieldName] &&\n            this.parent.engineModule.formatFields[fieldName].type === 'date';\n        var list = [];\n        var memberCount = 1;\n        var filterObj = {};\n        for (var _i = 0, filterItems_1 = filterItems; _i < filterItems_1.length; _i++) {\n            var item = filterItems_1[_i];\n            filterObj[item] = item;\n        }\n        for (var _a = 0, members_1 = members; _a < members_1.length; _a++) {\n            var member = members_1[_a];\n            var memberName = this.parent.isDateField ? member.formattedText : member.actualText.toString();\n            var obj = {\n                id: member.actualText.toString(),\n                name: memberName,\n                checkedStatus: isInclude ? false : true\n            };\n            if (filterObj[memberName] !== undefined) {\n                obj.checkedStatus = isInclude ? true : false;\n            }\n            if (memberCount <= this.parent.control.maxNodeLimitInMemberEditor) {\n                list.push(obj);\n            }\n            if (!obj.checkedStatus) {\n                this.parent.savedTreeFilterPos[memberCount - 1] = memberName;\n            }\n            this.parent.currentTreeItems.push(obj);\n            this.parent.searchTreeItems.push(obj);\n            this.parent.currentTreeItemsPos[member.actualText] = memberCount - 1;\n            memberCount++;\n        }\n        this.parent.isDataOverflow = ((memberCount - 1) > this.parent.control.maxNodeLimitInMemberEditor);\n        return list;\n    };\n    return EventBase;\n}());\nexport { EventBase };\n","import { isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * `DialogAction` module is used to handle field list dialog related behaviour.\n */\n/** @hidden */\nvar NodeStateModified = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function NodeStateModified(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Updates the dataSource by drag and drop the selected field from either field list or axis table with dropped target position.\n     * @method onStateModified\n     * @param  {DragEventArgs & DragAndDropEventArgs} args -  Contains both pivot button and field list drag and drop information.\n     * @param  {string} fieldName - Defines dropped field name to update dataSource.\n     * @return {void}\n     * @hidden\n     */\n    NodeStateModified.prototype.onStateModified = function (args, fieldName) {\n        var droppedClass = '';\n        var nodeDropped = true;\n        var target = closest(args.target, '.' + cls.DROPPABLE_CLASS);\n        var droppedPosition = -1;\n        this.parent.dataSourceUpdate.btnElement = args.element ? args.element.parentElement : undefined;\n        if (target) {\n            droppedClass = target.classList[1] === cls.ROW_AXIS_CLASS ?\n                'rows' : target.classList[1] === cls.COLUMN_AXIS_CLASS ? 'columns' : target.classList[1] === cls.VALUE_AXIS_CLASS ?\n                'values' : target.classList[1] === cls.FILTER_AXIS_CLASS ? 'filters' : '';\n        }\n        if ((args.cancel && droppedClass === '') ||\n            (this.parent.dataSourceUpdate.btnElement && this.parent.dataSourceUpdate.btnElement.getAttribute('isValue') === 'true' &&\n                ((droppedClass === 'filters' || droppedClass === 'values') ||\n                    droppedClass.indexOf(this.parent.dataSource.valueAxis) > -1))) {\n            nodeDropped = false;\n            return nodeDropped;\n        }\n        if (droppedClass !== '') {\n            if (this.parent.engineModule.fieldList[fieldName] &&\n                this.parent.engineModule.fieldList[fieldName].aggregateType === 'CalculatedField' && droppedClass !== 'values') {\n                var title = this.parent.localeObj.getConstant('warning');\n                var description = this.parent.localeObj.getConstant('dropAction');\n                this.parent.errorDialog.createErrorDialog(title, description);\n                nodeDropped = false;\n                return nodeDropped;\n            }\n            droppedPosition = this.getButtonPosition(args.target, droppedClass);\n        }\n        else if (this.parent.engineModule.fieldList[fieldName]) {\n            this.parent.engineModule.fieldList[fieldName].isSelected = false;\n        }\n        this.parent.dataSourceUpdate.updateDataSource(fieldName, droppedClass, droppedPosition);\n        return nodeDropped;\n    };\n    NodeStateModified.prototype.getButtonPosition = function (target, droppedClass) {\n        var droppedPosition = -1;\n        var targetBtn = closest(target, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n        if (!isNullOrUndefined(targetBtn)) {\n            targetBtn = targetBtn.querySelector('.' + cls.PIVOT_BUTTON_CLASS);\n            var axisPanel = this.parent.element.querySelector('.e-' + droppedClass);\n            var pivotButtons = [].slice.call(axisPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n            for (var i = 0, n = pivotButtons.length; i < n; i++) {\n                if (pivotButtons[i].id === targetBtn.id) {\n                    droppedPosition = i;\n                    break;\n                }\n            }\n        }\n        return droppedPosition;\n    };\n    return NodeStateModified;\n}());\nexport { NodeStateModified };\n","import * as events from '../../common/base/constant';\n/**\n * `DataSourceUpdate` module is used to update the dataSource.\n */\n/** @hidden */\nvar DataSourceUpdate = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function DataSourceUpdate(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Updates the dataSource by adding the given field along with field dropped position to the dataSource.\n     * @param  {string} fieldName - Defines dropped field name to update dataSource.\n     * @param  {string} droppedClass -  Defines dropped field axis name to update dataSource.\n     * @param  {number} fieldCaption - Defines dropped position to the axis based on field position.\n     * @method updateDataSource\n     * @return {void}\n     * @hidden\n     */\n    DataSourceUpdate.prototype.updateDataSource = function (fieldName, droppedClass, droppedPosition) {\n        var dataSourceItem;\n        if (this.control && this.btnElement && this.btnElement.getAttribute('isvalue') === 'true') {\n            switch (droppedClass) {\n                case '':\n                    this.control.setProperties({ dataSource: { values: [] } }, true);\n                    break;\n                case 'rows':\n                    this.control.setProperties({ dataSource: { valueAxis: 'row' } }, true);\n                    break;\n                case 'columns':\n                    this.control.setProperties({ dataSource: { valueAxis: 'column' } }, true);\n                    break;\n            }\n        }\n        else {\n            dataSourceItem = this.removeFieldFromReport(fieldName.toString());\n            dataSourceItem = dataSourceItem ? dataSourceItem : this.getNewField(fieldName.toString());\n            if (dataSourceItem.type === 'CalculatedField' && droppedClass !== '') {\n                droppedClass = 'values';\n            }\n        }\n        if (this.control) {\n            var eventArgs = {\n                'droppedField': dataSourceItem, 'dataSource': this.parent.dataSource, 'droppedAxis': droppedClass\n            };\n            this.control.trigger(events.onFieldDropped, eventArgs);\n        }\n        if (dataSourceItem) {\n            switch (droppedClass) {\n                case 'filters':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.filters.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.filters.push(dataSourceItem);\n                    break;\n                case 'rows':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.rows.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.rows.push(dataSourceItem);\n                    break;\n                case 'columns':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.columns.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.columns.push(dataSourceItem);\n                    break;\n                case 'values':\n                    droppedPosition !== -1 ?\n                        this.parent.dataSource.values.splice(droppedPosition, 0, dataSourceItem) :\n                        this.parent.dataSource.values.push(dataSourceItem);\n                    break;\n            }\n        }\n    };\n    /**\n     * Updates the dataSource by removing the given field from the dataSource.\n     * @param  {string} fieldName - Defines dropped field name to remove dataSource.\n     * @method removeFieldFromReport\n     * @return {void}\n     * @hidden\n     */\n    DataSourceUpdate.prototype.removeFieldFromReport = function (fieldName) {\n        var dataSourceItem;\n        var isDataSource = false;\n        var rows = this.parent.dataSource.rows;\n        var columns = this.parent.dataSource.columns;\n        var values = this.parent.dataSource.values;\n        var filters = this.parent.dataSource.filters;\n        var fields = [rows, columns, values, filters];\n        var field = this.parent.engineModule.fieldList[fieldName];\n        for (var len = 0, lnt = fields.length; len < lnt; len++) {\n            if (!isDataSource && fields[len]) {\n                for (var i = 0, n = fields[len].length; i < n; i++) {\n                    if (fields[len][i].name === fieldName) {\n                        dataSourceItem = fields[len][i].properties ?\n                            fields[len][i].properties : fields[len][i];\n                        dataSourceItem.type = field.type === 'number' ? dataSourceItem.type :\n                            'Count';\n                        fields[len].splice(i, 1);\n                        isDataSource = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return dataSourceItem;\n    };\n    /**\n     * Creates new field object given field name from the field list data.\n     * @param  {string} fieldName - Defines dropped field name to add dataSource.\n     * @method getNewField\n     * @return {void}\n     * @hidden\n     */\n    DataSourceUpdate.prototype.getNewField = function (fieldName) {\n        var field = this.parent.engineModule.fieldList[fieldName];\n        var newField = {\n            name: fieldName,\n            caption: field.caption,\n            type: field.aggregateType === undefined ? field.type === 'number' ? 'Sum' :\n                'Count' : field.aggregateType,\n            showNoDataItems: field.showNoDataItems,\n            baseField: field.baseField,\n            baseItem: field.baseItem,\n        };\n        return newField;\n    };\n    return DataSourceUpdate;\n}());\nexport { DataSourceUpdate };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * `ErrorDialog` module to create error dialog.\n */\n/** @hidden */\nvar ErrorDialog = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function ErrorDialog(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Creates the error dialog for the unexpected action done.\n     * @method createErrorDialog\n     * @return {void}\n     * @hidden\n     */\n    ErrorDialog.prototype.createErrorDialog = function (title, description) {\n        var errorDialog = createElement('div', {\n            id: this.parent.parentID + '_ErrorDialog',\n            className: cls.ERROR_DIALOG_CLASS\n        });\n        this.parent.element.appendChild(errorDialog);\n        this.errorPopUp = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            header: title,\n            content: description,\n            isModal: true,\n            visible: true,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: 'auto',\n            zIndex: 1000001,\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.closeErrorDialog.bind(this),\n                    buttonModel: { cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('ok'), isPrimary: true }\n                }\n            ],\n            closeOnEscape: true,\n            target: document.body,\n            close: this.removeErrorDialog.bind(this)\n        });\n        this.errorPopUp.appendTo(errorDialog);\n    };\n    ErrorDialog.prototype.closeErrorDialog = function () {\n        this.errorPopUp.close();\n    };\n    ErrorDialog.prototype.removeErrorDialog = function () {\n        if (this.errorPopUp && !this.errorPopUp.isDestroyed) {\n            this.errorPopUp.destroy();\n        }\n        if (document.getElementById(this.parent.parentID + '_ErrorDialog')) {\n            remove(document.getElementById(this.parent.parentID + '_ErrorDialog'));\n        }\n    };\n    return ErrorDialog;\n}());\nexport { ErrorDialog };\n","import { createElement, removeClass, addClass, remove, isNullOrUndefined, setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport { TreeView, Tab } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { setStyleAndAttributes } from '@syncfusion/ej2-grids';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\n/**\n * `FilterDialog` module to create filter dialog.\n */\n/** @hidden */\nvar FilterDialog = /** @class */ (function () {\n    /**\n     * Constructor for the dialog action.\n     * @hidden\n     */\n    function FilterDialog(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Creates the member filter dialog for the selected field.\n     * @method createFilterDialog\n     * @return {void}\n     * @hidden\n     */\n    FilterDialog.prototype.createFilterDialog = function (treeData, fieldName, fieldCaption, target) {\n        var editorDialog = createElement('div', {\n            id: this.parent.parentID + '_EditorTreeView',\n            className: cls.MEMBER_EDITOR_DIALOG_CLASS,\n            attrs: { 'data-fieldName': fieldName, 'aria-label': fieldCaption },\n            styles: 'visibility:hidden;'\n        });\n        var filterCaption = this.parent.engineModule.fieldList[fieldName].caption;\n        var headerTemplate = this.parent.localeObj.getConstant('filter') + ' ' +\n            '\"' + fieldCaption + '\"' + ' ' + this.parent.localeObj.getConstant('by');\n        this.filterObject = this.getFilterObject(fieldName);\n        this.allowExcelLikeFilter = this.isExcelFilter(fieldName);\n        this.parent.element.appendChild(editorDialog);\n        this.dialogPopUp = new Dialog({\n            animationSettings: { effect: (this.allowExcelLikeFilter ? 'None' : 'Fade') },\n            allowDragging: false,\n            header: (this.allowExcelLikeFilter ? headerTemplate : filterCaption),\n            content: (this.allowExcelLikeFilter ? '' : this.createTreeView(treeData, fieldCaption, fieldName)),\n            isModal: this.parent.renderMode === 'Popup' ? true : this.parent.isAdaptive ? true : false,\n            visible: true,\n            showCloseIcon: this.allowExcelLikeFilter ? true : false,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: this.parent.isDataOverflow ? (this.allowExcelLikeFilter ? '440px' : '400px') :\n                (this.allowExcelLikeFilter ? '400px' : '350px'),\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    buttonModel: {\n                        cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('ok'), isPrimary: true\n                    }\n                },\n                {\n                    buttonModel: {\n                        cssClass: 'e-clear-filter-button' + (this.allowExcelLikeFilter ? '' : ' ' + cls.ICON_DISABLE),\n                        iconCss: 'e-icons e-clear-filter-icon', enableRtl: this.parent.enableRtl,\n                        content: this.parent.localeObj.getConstant('clearFilter'), disabled: (this.filterObject ? false : true)\n                    }\n                },\n                {\n                    click: this.closeFilterDialog.bind(this),\n                    buttonModel: { cssClass: cls.CANCEL_BUTTON_CLASS, content: this.parent.localeObj.getConstant('cancel') }\n                }\n            ],\n            closeOnEscape: true,\n            target: target,\n            close: this.removeFilterDialog.bind(this),\n            /* tslint:disable-next-line:typedef */\n            open: this.dialogOpen.bind(this)\n        });\n        this.dialogPopUp.appendTo(editorDialog);\n        if (this.allowExcelLikeFilter) {\n            this.createTabMenu(treeData, fieldCaption, fieldName);\n            addClass([this.dialogPopUp.element], 'e-excel-filter');\n            this.updateCheckedState(fieldCaption);\n        }\n        else {\n            this.updateCheckedState(fieldCaption);\n        }\n        setStyleAttribute(this.dialogPopUp.element, { 'visibility': 'visible' });\n        if (this.allowExcelLikeFilter) {\n            this.dialogPopUp.element.querySelector('.e-dlg-closeicon-btn').focus();\n        }\n        else {\n            return;\n        }\n    };\n    FilterDialog.prototype.dialogOpen = function (args) {\n        if (args.element.querySelector('.e-editor-label-wrapper')) {\n            args.element.querySelector('.e-editor-label-wrapper').style.width =\n                args.element.offsetWidth + 'px';\n        }\n    };\n    FilterDialog.prototype.createTreeView = function (treeData, fieldCaption, fieldName) {\n        var _this = this;\n        var editorTreeWrapper = createElement('div', {\n            id: this.parent.parentID + 'EditorDiv',\n            className: cls.EDITOR_TREE_WRAPPER_CLASS + (this.allowExcelLikeFilter ? ' e-excelfilter' : '')\n        });\n        var searchWrapper = createElement('div', {\n            id: this.parent.parentID + '_SearchDiv', attrs: { 'tabindex': '-1' },\n            className: cls.EDITOR_SEARCH_WRAPPER_CLASS\n        });\n        var filterCaption = this.parent.engineModule.fieldList[fieldName].caption;\n        var editorSearch = createElement('input', { attrs: { 'type': 'text' } });\n        var labelWrapper = createElement('div', {\n            id: this.parent.parentID + '_LabelDiv', attrs: { 'tabindex': '-1' },\n            className: cls.EDITOR_LABEL_WRAPPER_CLASS\n        });\n        this.parent.editorLabelElement = createElement('label', { className: cls.EDITOR_LABEL_CLASS });\n        this.parent.editorLabelElement.innerText = this.parent.isDataOverflow ?\n            ((this.parent.currentTreeItems.length - this.parent.control.maxNodeLimitInMemberEditor) +\n                this.parent.control.localeObj.getConstant('editorDataLimitMsg')) : '';\n        labelWrapper.style.display = this.parent.isDataOverflow ? 'inline-block' : 'none';\n        labelWrapper.appendChild(this.parent.editorLabelElement);\n        searchWrapper.appendChild(editorSearch);\n        var selectAllWrapper = createElement('div', {\n            id: this.parent.parentID + '_AllDiv', attrs: { 'tabindex': '-1' },\n            className: cls.SELECT_ALL_WRAPPER_CLASS\n        });\n        var selectAllContainer = createElement('div', { className: cls.SELECT_ALL_CLASS });\n        var treeViewContainer = createElement('div', { className: cls.EDITOR_TREE_CONTAINER_CLASS });\n        var promptDiv = createElement('div', {\n            className: cls.EMPTY_MEMBER_CLASS + ' ' + cls.ICON_DISABLE,\n            innerHTML: this.parent.localeObj.getConstant('noMatches')\n        });\n        selectAllWrapper.appendChild(selectAllContainer);\n        editorTreeWrapper.appendChild(searchWrapper);\n        editorTreeWrapper.appendChild(selectAllWrapper);\n        editorTreeWrapper.appendChild(promptDiv);\n        this.editorSearch = new MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('search') + ' ' + '\"' + filterCaption + '\"',\n            enableRtl: this.parent.enableRtl,\n            cssClass: cls.EDITOR_SEARCH_CLASS,\n            showClearButton: true,\n            change: function (e) {\n                _this.parent.eventBase.searchTreeNodes(e, _this.memberTreeView, false);\n                var filterDialog = _this.dialogPopUp.element;\n                var liList = [].slice.call(_this.memberTreeView.element.querySelectorAll('li'));\n                if (liList.length === 0) {\n                    _this.allMemberSelect.disableNodes([_this.allMemberSelect.element.querySelector('li')]);\n                    filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).setAttribute('disabled', 'disabled');\n                    removeClass([promptDiv], cls.ICON_DISABLE);\n                }\n                else {\n                    _this.allMemberSelect.enableNodes([_this.allMemberSelect.element.querySelector('li')]);\n                    filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).removeAttribute('disabled');\n                    addClass([promptDiv], cls.ICON_DISABLE);\n                }\n                _this.updateCheckedState(fieldCaption);\n            }\n        });\n        this.editorSearch.appendTo(editorSearch);\n        var data = [{ id: 'all', name: 'All', checkedStatus: true }];\n        this.allMemberSelect = new TreeView({\n            fields: { dataSource: data, id: 'id', text: 'name', isChecked: 'checkedStatus', },\n            showCheckBox: true,\n            enableRtl: this.parent.enableRtl,\n        });\n        this.allMemberSelect.appendTo(selectAllContainer);\n        editorTreeWrapper.appendChild(treeViewContainer);\n        this.memberTreeView = new TreeView({\n            fields: { dataSource: treeData, id: 'id', text: 'name', isChecked: 'checkedStatus' },\n            showCheckBox: true,\n            enableRtl: this.parent.enableRtl,\n            nodeChecking: this.validateTreeNode.bind(this)\n        });\n        this.memberTreeView.appendTo(treeViewContainer);\n        editorTreeWrapper.appendChild(labelWrapper);\n        return editorTreeWrapper;\n    };\n    FilterDialog.prototype.createTabMenu = function (treeData, fieldCaption, fieldName) {\n        var wrapper = createElement('div', {\n            className: 'e-filter-tab-wrapper'\n        });\n        this.dialogPopUp.content = wrapper;\n        this.dialogPopUp.dataBind();\n        var types = ['Label', 'Value', 'Include', 'Exclude'];\n        var regx = '((-|\\\\+)?[0-9]+(\\\\.[0-9]+)?)+';\n        var member = Object.keys(this.parent.engineModule.fieldList[fieldName].members)[0];\n        var formatObj = this.parent.eventBase.getFormatItemByName(fieldName);\n        var items = [\n            {\n                header: {\n                    text: this.parent.localeObj.getConstant('member'),\n                    iconCss: (this.filterObject && types.indexOf(this.filterObject.type) > 1 ? cls.SELECTED_OPTION_ICON_CLASS : '')\n                },\n                content: this.createTreeView(treeData, fieldCaption, fieldName)\n            }\n        ];\n        for (var _i = 0, types_1 = types; _i < types_1.length; _i++) {\n            var type = types_1[_i];\n            if (((type === 'Label') && this.parent.dataSource.allowLabelFilter) ||\n                (type === 'Value' && this.parent.dataSource.allowValueFilter)) {\n                var filterType = (type === 'Label' && ((member).match(regx) &&\n                    (member).match(regx)[0].length === (member).length)) ? 'Number' :\n                    (type === 'Label' && (new Date(member).toString() !== 'Invalid Date') &&\n                        ((formatObj && formatObj.type) || (this.filterObject && this.filterObject.type === 'Date'))) ? 'Date' : type;\n                var item = {\n                    header: {\n                        text: (filterType === 'Number' ? this.parent.localeObj.getConstant('label') :\n                            this.parent.localeObj.getConstant(filterType.toLowerCase())),\n                        iconCss: (this.filterObject && this.filterObject.type === filterType ? cls.SELECTED_OPTION_ICON_CLASS : '')\n                    },\n                    /* tslint:disable-next-line:max-line-length */\n                    content: this.createCustomFilter(fieldName, (this.filterObject && this.filterObject.type === filterType ? this.filterObject : undefined), filterType.toLowerCase())\n                };\n                items.push(item);\n            }\n        }\n        var selectedIndex = (this.filterObject ? (['Label', 'Date', 'Number'].indexOf(this.filterObject.type) >= 0) ?\n            1 : this.filterObject.type === 'Value' ?\n            (this.parent.dataSource.allowLabelFilter && this.parent.dataSource.allowValueFilter) ? 2 : 1 : 0 : 0);\n        this.tabObj = new Tab({\n            heightAdjustMode: 'Auto',\n            items: items,\n            height: '100%',\n            selectedItem: selectedIndex,\n            enableRtl: this.parent.enableRtl\n        });\n        this.tabObj.appendTo(wrapper);\n        if (selectedIndex > 0) {\n            /* tslint:disable-next-line:max-line-length */\n            addClass([this.dialogPopUp.element.querySelector('.e-filter-div-content' + '.' + (selectedIndex === 1 && this.parent.dataSource.allowLabelFilter ? 'e-label-filter' : 'e-value-filter'))], 'e-selected-tab');\n        }\n    };\n    FilterDialog.prototype.createCustomFilter = function (fieldName, filterObject, type) {\n        var dataSource = [];\n        var valueOptions = [];\n        var measures = this.parent.dataSource.values;\n        var selectedOption = 'DoesNotEquals';\n        var selectedValueIndex = 0;\n        var options = {\n            label: ['Equals', 'DoesNotEquals', 'BeginWith', 'DoesNotBeginWith', 'EndsWith',\n                'DoesNotEndsWith', 'Contains', 'DoesNotContains', 'GreaterThan',\n                'GreaterThanOrEqualTo', 'LessThan', 'LessThanOrEqualTo', 'Between', 'NotBetween'],\n            date: ['Equals', 'DoesNotEquals', 'Before', 'BeforeOrEqualTo', 'After', 'AfterOrEqualTo',\n                'Between', 'NotBetween'],\n            value: ['Equals', 'DoesNotEquals', 'GreaterThan', 'GreaterThanOrEqualTo', 'LessThan',\n                'LessThanOrEqualTo', 'Between', 'NotBetween']\n        };\n        var betweenOperators = ['Between', 'NotBetween'];\n        var operatorCollection = (type === 'label' ? options.label : type === 'date' ? options.date : options.value);\n        for (var _i = 0, operatorCollection_1 = operatorCollection; _i < operatorCollection_1.length; _i++) {\n            var operator = operatorCollection_1[_i];\n            selectedOption = ((filterObject && operator === filterObject.condition) ?\n                operatorCollection.indexOf(filterObject.condition) >= 0 ?\n                    filterObject.condition : operatorCollection[0] : selectedOption);\n            dataSource.push({ value: operator, text: this.parent.localeObj.getConstant(operator) });\n        }\n        var len = measures.length;\n        while (len--) {\n            valueOptions.unshift({ value: measures[len].name, text: (measures[len].caption ? measures[len].caption : measures[len].name) });\n            selectedValueIndex = filterObject && filterObject.type === 'Value' &&\n                filterObject.measure === measures[len].name &&\n                filterObject.condition === selectedOption ? len : selectedValueIndex;\n        }\n        var mainDiv = createElement('div', {\n            className: cls.FILTER_DIV_CONTENT_CLASS + ' e-' + ((['date', 'number']).indexOf(type) >= 0 ? 'label' : type) + '-filter',\n            id: this.parent.parentID + '_' + type + '_filter_div_content',\n            attrs: {\n                'data-type': type, 'data-fieldName': fieldName, 'data-operator': selectedOption,\n                'data-measure': (this.parent.dataSource.values.length > 0 ? this.parent.dataSource.values[selectedValueIndex].name : ''),\n                'data-value1': (filterObject && selectedOption === filterObject.condition ? filterObject.value1.toString() : ''),\n                'data-value2': (filterObject && selectedOption === filterObject.condition ? filterObject.value1.toString() : '')\n            }\n        });\n        var textContentdiv = createElement('div', {\n            className: cls.FILTER_TEXT_DIV_CLASS,\n            innerHTML: this.parent.localeObj.getConstant(type + 'TextContent')\n        });\n        var betweenTextContentdiv = createElement('div', {\n            className: cls.BETWEEN_TEXT_DIV_CLASS + ' ' +\n                (betweenOperators.indexOf(selectedOption) === -1 ? cls.ICON_DISABLE : ''),\n            innerHTML: this.parent.localeObj.getConstant('And')\n        });\n        var separatordiv = createElement('div', { className: cls.SEPARATOR_DIV_CLASS });\n        var filterWrapperDiv1 = createElement('div', { className: cls.FILTER_OPTION_WRAPPER_1_CLASS });\n        var optionWrapperDiv1 = createElement('div', {\n            className: 'e-measure-option-wrapper' + ' ' + (((['label', 'date', 'number']).indexOf(type) >= 0) ? cls.ICON_DISABLE : ''),\n        });\n        var optionWrapperDiv2 = createElement('div', { className: 'e-condition-option-wrapper' });\n        var filterWrapperDiv2 = createElement('div', { className: cls.FILTER_OPTION_WRAPPER_2_CLASS });\n        var dropOptionDiv1 = createElement('div', { id: this.parent.parentID + '_' + type + '_measure_option_wrapper' });\n        var dropOptionDiv2 = createElement('div', { id: this.parent.parentID + '_' + type + '_contition_option_wrapper' });\n        var inputDiv1 = createElement('div', { className: cls.FILTER_INPUT_DIV_1_CLASS });\n        var inputDiv2 = createElement('div', {\n            className: cls.FILTER_INPUT_DIV_2_CLASS + ' ' +\n                (betweenOperators.indexOf(selectedOption) === -1 ? cls.ICON_DISABLE : '')\n        });\n        var inputField1 = createElement('input', {\n            id: this.parent.parentID + '_' + type + '_input_option_1', attrs: { 'type': 'text' }\n        });\n        var inputField2 = createElement('input', {\n            id: this.parent.parentID + '_' + type + '_input_option_2', attrs: { 'type': 'text' }\n        });\n        inputDiv1.appendChild(inputField1);\n        inputDiv2.appendChild(inputField2);\n        optionWrapperDiv1.appendChild(dropOptionDiv1);\n        optionWrapperDiv1.appendChild(separatordiv);\n        optionWrapperDiv2.appendChild(dropOptionDiv2);\n        filterWrapperDiv1.appendChild(optionWrapperDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv2);\n        filterWrapperDiv2.appendChild(inputDiv1);\n        filterWrapperDiv2.appendChild(betweenTextContentdiv);\n        filterWrapperDiv2.appendChild(inputDiv2);\n        /* tslint:disable-next-line:max-line-length */\n        this.createElements(filterObject, betweenOperators, dropOptionDiv1, dropOptionDiv2, inputField1, inputField2, valueOptions, dataSource, selectedValueIndex, selectedOption, type);\n        mainDiv.appendChild(textContentdiv);\n        mainDiv.appendChild(filterWrapperDiv1);\n        mainDiv.appendChild(filterWrapperDiv2);\n        return mainDiv;\n    };\n    /* tslint:disable */\n    FilterDialog.prototype.createElements = function (filterObj, operators, optionDiv1, optionDiv2, inputDiv1, inputDiv2, vDataSource, oDataSource, valueIndex, option, type) {\n        var popupInstance = this;\n        var optionWrapper1 = new DropDownList({\n            dataSource: vDataSource, enableRtl: this.parent.enableRtl,\n            fields: { value: 'value', text: 'text' }, index: valueIndex,\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                if (!isNullOrUndefined(element)) {\n                    popupInstance.updateInputValues(element, type, inputDiv1, inputDiv2);\n                    setStyleAndAttributes(element, { 'data-measure': args.value });\n                }\n                else {\n                    return;\n                }\n            }\n        });\n        optionWrapper1.appendTo(optionDiv1);\n        var optionWrapper = new DropDownList({\n            dataSource: oDataSource, enableRtl: this.parent.enableRtl,\n            fields: { value: 'value', text: 'text' }, value: option,\n            cssClass: cls.FILTER_OPERATOR_CLASS, width: '100%',\n            change: function (args) {\n                var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                if (!isNullOrUndefined(element)) {\n                    popupInstance.updateInputValues(element, type, inputDiv1, inputDiv2);\n                    var disabledClasses = [cls.BETWEEN_TEXT_DIV_CLASS, cls.FILTER_INPUT_DIV_2_CLASS];\n                    for (var _i = 0, disabledClasses_1 = disabledClasses; _i < disabledClasses_1.length; _i++) {\n                        var className = disabledClasses_1[_i];\n                        if (operators.indexOf(args.value) >= 0) {\n                            removeClass([element.querySelector('.' + className)], cls.ICON_DISABLE);\n                        }\n                        else {\n                            addClass([element.querySelector('.' + className)], cls.ICON_DISABLE);\n                        }\n                    }\n                    setStyleAndAttributes(element, { 'data-operator': args.value });\n                }\n                else {\n                    return;\n                }\n            }\n        });\n        optionWrapper.appendTo(optionDiv2);\n        if (type === 'date') {\n            var inputObj1_1 = new DatePicker({\n                placeholder: this.parent.localeObj.getConstant('chooseDate'),\n                enableRtl: this.parent.enableRtl,\n                format: 'dd/MM/yyyy',\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value1 : null),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': e.value, 'data-value2': inputObj2_1.value });\n                    }\n                    else {\n                        return;\n                    }\n                },\n                width: '100%',\n            });\n            var inputObj2_1 = new DatePicker({\n                placeholder: this.parent.localeObj.getConstant('chooseDate'),\n                enableRtl: this.parent.enableRtl,\n                format: 'dd/MM/yyyy',\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value2 : null),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': inputObj1_1.value, 'data-value2': e.value });\n                    }\n                    else {\n                        return;\n                    }\n                },\n                width: '100%',\n            });\n            inputObj1_1.appendTo(inputDiv1);\n            inputObj2_1.appendTo(inputDiv2);\n        }\n        else if (type === 'value') {\n            var inputObj1_2 = new NumericTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                format: '###.##',\n                value: (filterObj && option === filterObj.condition ? parseInt(filterObj.value1, 10) : undefined),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, {\n                            'data-value1': (e.value ? e.value.toString() : '0'),\n                            'data-value2': (inputObj2_2.value ? inputObj2_2.value.toString() : '0')\n                        });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            var inputObj2_2 = new NumericTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                format: '###.##',\n                value: (filterObj && option === filterObj.condition ? parseInt(filterObj.value2, 10) : undefined),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, {\n                            'data-value1': (inputObj1_2.value ? inputObj1_2.value.toString() : '0'),\n                            'data-value2': (e.value ? e.value.toString() : '0')\n                        });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            inputObj1_2.appendTo(inputDiv1);\n            inputObj2_2.appendTo(inputDiv2);\n        }\n        else {\n            var inputObj1_3 = new MaskedTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value1 : ''),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': e.value, 'data-value2': inputObj2_3.value });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            var inputObj2_3 = new MaskedTextBox({\n                placeholder: this.parent.localeObj.getConstant('enterValue'),\n                enableRtl: this.parent.enableRtl,\n                showClearButton: true,\n                value: (filterObj && option === filterObj.condition ? filterObj.value2 : ''),\n                change: function (e) {\n                    var element = popupInstance.dialogPopUp.element.querySelector('.e-selected-tab');\n                    if (!isNullOrUndefined(element)) {\n                        setStyleAndAttributes(element, { 'data-value1': inputObj1_3.value, 'data-value2': e.value });\n                    }\n                    else {\n                        return;\n                    }\n                }, width: '100%'\n            });\n            inputObj1_3.appendTo(inputDiv1);\n            inputObj2_3.appendTo(inputDiv2);\n        }\n    };\n    /* tslint:enable */\n    FilterDialog.prototype.updateInputValues = function (element, type, inputDiv1, inputDiv2) {\n        var value1;\n        var value2;\n        if (type === 'date') {\n            var inputObj1 = inputDiv1.ej2_instances[0];\n            var inputObj2 = inputDiv2.ej2_instances[0];\n            value1 = !isNullOrUndefined(inputObj1.value) ? inputObj1.value.toString() : '';\n            value2 = !isNullOrUndefined(inputObj2.value) ? inputObj2.value.toString() : '';\n        }\n        else {\n            var inputObj1 = inputDiv1.ej2_instances[0];\n            var inputObj2 = inputDiv2.ej2_instances[0];\n            value1 = inputObj1.value;\n            value2 = inputObj2.value;\n        }\n        setStyleAndAttributes(element, { 'data-value1': value1, 'data-value2': value2 });\n    };\n    FilterDialog.prototype.validateTreeNode = function (e) {\n        if (e.node.classList.contains(cls.ICON_DISABLE)) {\n            e.cancel = true;\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Update filter state while Member check/uncheck.\n     * @hidden\n     */\n    FilterDialog.prototype.updateCheckedState = function (fieldCaption) {\n        var filterDialog = this.dialogPopUp.element;\n        setStyleAndAttributes(filterDialog, { 'role': 'menu', 'aria-haspopup': 'true' });\n        var list = [].slice.call(this.memberTreeView.element.querySelectorAll('li'));\n        var uncheckedNodes = this.getUnCheckedNodes();\n        var checkedNodes = this.getCheckedNodes();\n        var firstNode = this.allMemberSelect.element.querySelector('li').querySelector('span.' + cls.CHECK_BOX_FRAME_CLASS);\n        if (list.length > 0) {\n            if (checkedNodes.length > 0) {\n                if (uncheckedNodes.length > 0) {\n                    removeClass([firstNode], cls.NODE_CHECK_CLASS);\n                    addClass([firstNode], cls.NODE_STOP_CLASS);\n                }\n                else if (uncheckedNodes.length === 0) {\n                    removeClass([firstNode], cls.NODE_STOP_CLASS);\n                    addClass([firstNode], cls.NODE_CHECK_CLASS);\n                }\n                this.dialogPopUp.buttons[0].buttonModel.disabled = false;\n                filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).removeAttribute('disabled');\n            }\n            else if (uncheckedNodes.length > 0 && checkedNodes.length === 0) {\n                removeClass([firstNode], [cls.NODE_CHECK_CLASS, cls.NODE_STOP_CLASS]);\n                if (this.getCheckedNodes().length === checkedNodes.length) {\n                    this.dialogPopUp.buttons[0].buttonModel.disabled = true;\n                    filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).setAttribute('disabled', 'disabled');\n                }\n            }\n        }\n        else {\n            this.dialogPopUp.buttons[0].buttonModel.disabled = true;\n            filterDialog.querySelector('.' + cls.OK_BUTTON_CLASS).setAttribute('disabled', 'disabled');\n        }\n    };\n    FilterDialog.prototype.getCheckedNodes = function () {\n        var checkeNodes = this.parent.searchTreeItems.filter(function (item) {\n            return item.checkedStatus;\n        });\n        return checkeNodes;\n    };\n    FilterDialog.prototype.getUnCheckedNodes = function () {\n        var unCheckeNodes = this.parent.searchTreeItems.filter(function (item) {\n            return !item.checkedStatus;\n        });\n        return unCheckeNodes;\n    };\n    FilterDialog.prototype.isExcelFilter = function (fieldName) {\n        var isFilterField = false;\n        for (var _i = 0, _a = this.parent.dataSource.filters; _i < _a.length; _i++) {\n            var field = _a[_i];\n            if (field.name === fieldName) {\n                isFilterField = true;\n                break;\n            }\n        }\n        if (!isFilterField && (this.parent.dataSource.allowLabelFilter || this.parent.dataSource.allowValueFilter)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    FilterDialog.prototype.getFilterObject = function (fieldName) {\n        var filterObj = this.parent.eventBase.getFilterItemByName(fieldName);\n        if (filterObj && (((['Label', 'Date', 'Number'].indexOf(filterObj.type) >= 0) &&\n            this.parent.dataSource.allowLabelFilter) || (filterObj.type === 'Value' && this.parent.dataSource.allowValueFilter) ||\n            (['Include', 'Exclude'].indexOf(filterObj.type) >= 0))) {\n            return filterObj;\n        }\n        return undefined;\n    };\n    FilterDialog.prototype.closeFilterDialog = function () {\n        if (this.allowExcelLikeFilter) {\n            if (this.tabObj && !this.tabObj.isDestroyed) {\n                this.tabObj.destroy();\n            }\n        }\n        this.dialogPopUp.close();\n    };\n    FilterDialog.prototype.removeFilterDialog = function () {\n        if (this.dialogPopUp && !this.dialogPopUp.isDestroyed) {\n            this.dialogPopUp.destroy();\n        }\n        if (document.getElementById(this.parent.parentID + '_EditorTreeView')) {\n            remove(document.getElementById(this.parent.parentID + '_EditorTreeView'));\n        }\n    };\n    return FilterDialog;\n}());\nexport { FilterDialog };\n","import { CommonKeyboardInteraction } from '../actions/keyboard';\nimport { EventBase } from '../actions/event-base';\nimport { NodeStateModified } from '../actions/node-state-modified';\nimport { DataSourceUpdate } from '../actions/dataSource-update';\nimport { ErrorDialog } from '../popups/error-dialog';\nimport { FilterDialog } from '../popups/filter-dialog';\n/**\n * PivotCommon is used to manipulate the relational or Multi-Dimensional public methods by using their dataSource\n * @hidden\n */\n/** @hidden */\nvar PivotCommon = /** @class */ (function () {\n    /**\n     * Constructor for PivotEngine class\n     * @param  {PivotEngine} pivotEngine?\n     * @param  {DataOptions} dataSource?\n     * @param  {string} element?\n     * @hidden\n     */\n    function PivotCommon(control) {\n        /** @hidden */\n        this.currentTreeItems = [];\n        /** @hidden */\n        this.savedTreeFilterPos = {};\n        /** @hidden */\n        this.currentTreeItemsPos = {};\n        /** @hidden */\n        this.searchTreeItems = [];\n        /** @hidden */\n        this.isDataOverflow = false;\n        /** @hidden */\n        this.isDateField = false;\n        this.element = control.element;\n        this.moduleName = control.moduleName;\n        this.dataSource = control.dataSource;\n        this.engineModule = control.pivotEngine;\n        this.enableRtl = control.enableRtl;\n        this.isAdaptive = control.isAdaptive;\n        this.renderMode = control.renderMode;\n        this.parentID = control.id;\n        this.localeObj = control.localeObj;\n        this.nodeStateModified = new NodeStateModified(this);\n        this.dataSourceUpdate = new DataSourceUpdate(this);\n        this.eventBase = new EventBase(this);\n        this.filterDialog = new FilterDialog(this);\n        this.errorDialog = new ErrorDialog(this);\n        this.keyboardModule = new CommonKeyboardInteraction(this);\n        return this;\n    }\n    /**\n     * To destroy the groupingbar\n     * @return {void}\n     * @hidden\n     */\n    PivotCommon.prototype.destroy = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n    };\n    return PivotCommon;\n}());\nexport { PivotCommon };\n","import { createElement, isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { EventHandler, setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport * as events from '../../common/base/constant';\n/**\n * Module to render Pivot Field List Dialog\n */\n/** @hidden */\nvar DialogRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function DialogRenderer(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the field list layout rendering\n     * @returns void\n     * @private\n     */\n    DialogRenderer.prototype.render = function () {\n        var fieldListWrappper = createElement('div', {\n            id: this.parent.element.id + '_Wrapper',\n            className: cls.WRAPPER_CLASS,\n            styles: 'width:' + this.parent.element.style.width\n        });\n        if (this.parent.isAdaptive) {\n            addClass([fieldListWrappper], cls.DEVICE);\n        }\n        else {\n            removeClass([fieldListWrappper], cls.DEVICE);\n        }\n        if (this.parent.enableRtl) {\n            addClass([fieldListWrappper], cls.RTL);\n        }\n        else {\n            removeClass([fieldListWrappper], cls.RTL);\n        }\n        if (this.parent.cssClass) {\n            addClass([fieldListWrappper], this.parent.cssClass);\n        }\n        this.parentElement = createElement('div', { className: cls.CONTAINER_CLASS });\n        this.parent.element.appendChild(fieldListWrappper);\n        if (this.parent.isAdaptive) {\n            fieldListWrappper.removeAttribute('style');\n            this.parentElement = createElement('div', { className: cls.ADAPTIVE_CONTAINER_CLASS });\n            this.renderAdaptiveLayout(fieldListWrappper);\n        }\n        if (this.parent.renderMode === 'Popup') {\n            this.renderFieldListDialog(fieldListWrappper);\n            this.unWireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n            this.wireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n        }\n        else {\n            this.renderStaticLayout(fieldListWrappper);\n        }\n    };\n    DialogRenderer.prototype.renderStaticLayout = function (fieldListWrappper) {\n        if (!this.parent.isAdaptive) {\n            var layoutHeader = createElement('div', {\n                className: cls.FIELD_LIST_TITLE_CLASS\n            });\n            var headerContent = createElement('div', {\n                className: cls.FIELD_LIST_TITLE_CONTENT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('staticFieldList')\n            });\n            layoutHeader.appendChild(headerContent);\n            layoutHeader.appendChild(this.createCalculatedButton());\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            fieldListWrappper.appendChild(layoutHeader);\n            fieldListWrappper.appendChild(this.parentElement);\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            if (this.parent.allowDeferLayoutUpdate) {\n                fieldListWrappper.appendChild(this.createDeferUpdateButtons());\n                this.renderDeferUpdateButtons();\n            }\n        }\n    };\n    DialogRenderer.prototype.renderDeferUpdateButtons = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            this.deferUpdateCheckBox = new CheckBox({\n                label: this.parent.localeObj.getConstant('deferLayoutUpdate'),\n                checked: true,\n                enableRtl: this.parent.enableRtl,\n                change: this.onCheckChange.bind(this)\n            });\n            this.deferUpdateCheckBox.appendTo('#' + this.parent.element.id + 'DeferUpdateCheckBox');\n            this.deferUpdateApplyButton = new Button({\n                cssClass: cls.DEFER_APPLY_BUTTON + ' ' + cls.DEFER_UPDATE_BUTTON + (this.parent.renderMode === 'Popup' ?\n                    (' ' + cls.BUTTON_FLAT_CLASS) : ''),\n                content: this.parent.localeObj.getConstant('apply'),\n                enableRtl: this.parent.enableRtl,\n                isPrimary: true\n            });\n            this.deferUpdateApplyButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton1');\n            this.deferUpdateApplyButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.applyButtonClick.bind(this) :\n                this.onDeferUpdateClick.bind(this);\n        }\n        this.deferUpdateCancelButton = new Button({\n            cssClass: cls.DEFER_CANCEL_BUTTON + ' ' + cls.CANCEL_BUTTON_CLASS + (this.parent.renderMode === 'Popup' ?\n                (' ' + cls.BUTTON_FLAT_CLASS) : ''),\n            content: this.parent.allowDeferLayoutUpdate ? this.parent.localeObj.getConstant('cancel') :\n                this.parent.localeObj.getConstant('close'),\n            enableRtl: this.parent.enableRtl, isPrimary: !this.parent.allowDeferLayoutUpdate\n        });\n        this.deferUpdateCancelButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton2');\n        this.deferUpdateCancelButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.cancelButtonClick.bind(this) :\n            this.onCloseFieldList.bind(this);\n    };\n    DialogRenderer.prototype.createDeferUpdateButtons = function () {\n        var layoutFooter = createElement('div', {\n            className: cls.LAYOUT_FOOTER\n        });\n        if (this.parent.allowDeferLayoutUpdate) {\n            var checkBoxLayout = createElement('div', {\n                className: cls.CHECKBOX_LAYOUT\n            });\n            var deferUpdateCheckBox = createElement('input', {\n                id: this.parent.element.id + 'DeferUpdateCheckBox'\n            });\n            checkBoxLayout.appendChild(deferUpdateCheckBox);\n            layoutFooter.appendChild(checkBoxLayout);\n        }\n        var buttonLayout = createElement('div', {\n            className: cls.BUTTON_LAYOUT\n        });\n        if (this.parent.allowDeferLayoutUpdate) {\n            var deferUpdateButton1 = createElement('button', {\n                id: this.parent.element.id + '_DeferUpdateButton1'\n            });\n            buttonLayout.appendChild(deferUpdateButton1);\n        }\n        var deferUpdateButton2 = createElement('button', {\n            id: this.parent.element.id + '_DeferUpdateButton2'\n        });\n        buttonLayout.appendChild(deferUpdateButton2);\n        layoutFooter.appendChild(buttonLayout);\n        return layoutFooter;\n    };\n    DialogRenderer.prototype.onCheckChange = function (args) {\n        if (args.checked) {\n            this.parent.clonedDataSource = extend({}, this.parent.dataSource, null, true);\n            this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n        }\n        this.parent.allowDeferLayoutUpdate = !this.parent.allowDeferLayoutUpdate;\n        if (this.parent.renderMode === 'Fixed') {\n            this.deferUpdateApplyButton.setProperties({ disabled: !this.parent.allowDeferLayoutUpdate });\n            this.deferUpdateCancelButton.setProperties({ disabled: !this.parent.allowDeferLayoutUpdate });\n        }\n        else {\n            if (this.parent.allowDeferLayoutUpdate) {\n                this.deferUpdateApplyButton.element.style.display = '';\n                this.deferUpdateCancelButton.setProperties({ content: this.parent.localeObj.getConstant('cancel') });\n                this.deferUpdateCancelButton.isPrimary = false;\n            }\n            else {\n                this.deferUpdateApplyButton.element.style.display = 'none';\n                this.deferUpdateCancelButton.setProperties({ content: this.parent.localeObj.getConstant('close') });\n                this.deferUpdateCancelButton.isPrimary = true;\n            }\n        }\n        this.cancelButtonClick();\n    };\n    DialogRenderer.prototype.applyButtonClick = function () {\n        this.parent.updateDataSource(false);\n        this.parent.clonedDataSource = extend({}, this.parent.dataSource, null, true);\n        this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n    };\n    DialogRenderer.prototype.cancelButtonClick = function () {\n        this.parent.\n            setProperties({ dataSource: this.parent.clonedDataSource.properties }, true);\n        this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n        this.parent.updateDataSource(false, true);\n    };\n    DialogRenderer.prototype.renderFieldListDialog = function (fieldListWrappper) {\n        var toggleFieldList = createElement('div', {\n            className: cls.TOGGLE_FIELD_LIST_CLASS + ' ' + cls.ICON + ' ' + cls.TOGGLE_SELECT_CLASS,\n            attrs: {\n                'tabindex': '0',\n                title: this.parent.localeObj.getConstant('fieldList'),\n                'aria-disabled': 'false',\n                'aria-label': this.parent.localeObj.getConstant('fieldList')\n            }\n        });\n        this.parent.element.appendChild(toggleFieldList);\n        if (this.parent.isAdaptive) {\n            var headerTemplate = '<div class=' + cls.TITLE_MOBILE_HEADER + '><span class=\"' + cls.ICON + ' ' +\n                cls.BACK_ICON + '\"></span><div class=' + cls.TITLE_MOBILE_CONTENT + '>' + this.parent.localeObj.getConstant('fieldList') +\n                '</div></div>';\n            var buttons = [{\n                    click: this.showFieldListDialog.bind(this),\n                    buttonModel: {\n                        cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n                        iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n                        isPrimary: true\n                    }\n                }, {\n                    click: this.showCalculatedField.bind(this),\n                    buttonModel: {\n                        cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS +\n                            ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n                        iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS, enableRtl: this.parent.enableRtl,\n                        isPrimary: true\n                    }\n                }];\n            this.fieldListDialog = new Dialog({\n                animationSettings: { effect: this.parent.enableRtl ? 'SlideRight' : 'SlideLeft' },\n                header: headerTemplate,\n                content: this.parentElement,\n                isModal: true,\n                showCloseIcon: false,\n                visible: false,\n                allowDragging: false,\n                closeOnEscape: false,\n                enableRtl: this.parent.enableRtl,\n                width: '100%',\n                height: '100%',\n                position: { X: 'center', Y: 'center' },\n                buttons: buttons,\n                target: document.body,\n                close: this.removeFieldListIcon.bind(this)\n            });\n            this.fieldListDialog.appendTo(fieldListWrappper);\n            setStyleAttribute(fieldListWrappper.querySelector('#' + fieldListWrappper.id + '_dialog-content'), {\n                'padding': '0'\n            });\n            var footer = fieldListWrappper.querySelector('.' + cls.FOOTER_CONTENT_CLASS);\n            addClass([footer], cls.FIELD_LIST_FOOTER_CLASS);\n            removeClass([footer.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n            removeClass([footer.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n            this.fieldListDialog.element.querySelector('.' + cls.BACK_ICON).onclick =\n                this.parent.allowDeferLayoutUpdate ? this.onDeferUpdateClick.bind(this) : this.onCloseFieldList.bind(this);\n        }\n        else {\n            var template = this.createDeferUpdateButtons().outerHTML;\n            var headerTemplate = '<div class=' + cls.TITLE_HEADER_CLASS + '><div class=' +\n                cls.TITLE_CONTENT_CLASS + '>' + this.parent.localeObj.getConstant('fieldList') + '</div></div>';\n            this.fieldListDialog = new Dialog({\n                animationSettings: { effect: 'Zoom' },\n                header: headerTemplate,\n                content: this.parentElement,\n                isModal: false,\n                showCloseIcon: false,\n                visible: false,\n                allowDragging: true,\n                enableRtl: this.parent.enableRtl,\n                width: this.parent.element.style.width,\n                position: { X: 'center', Y: this.parent.element.offsetTop },\n                footerTemplate: template,\n                closeOnEscape: true,\n                target: !isNullOrUndefined(this.parent.target) ? ((typeof this.parent.target) === 'string') ?\n                    document.querySelector(this.parent.target) : this.parent.target : document.body,\n                close: this.removeFieldListIcon.bind(this)\n            });\n            this.fieldListDialog.appendTo(fieldListWrappper);\n            this.renderDeferUpdateButtons();\n            setStyleAttribute(fieldListWrappper.querySelector('#' + fieldListWrappper.id + '_title'), { 'width': '100%' });\n            fieldListWrappper.querySelector('.' + cls.TITLE_HEADER_CLASS).appendChild(this.createCalculatedButton());\n        }\n    };\n    /**\n     * Called internally if any of the field added to axis.\n     * @hidden\n     */\n    DialogRenderer.prototype.updateDataSource = function (selectedNodes) {\n        var axis = ['filters', 'columns', 'rows', 'values'];\n        for (var _i = 0, selectedNodes_1 = selectedNodes; _i < selectedNodes_1.length; _i++) {\n            var field = selectedNodes_1[_i];\n            var fieldName = field;\n            var droppedClass = axis[this.adaptiveElement.selectedItem];\n            this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ?\n                this.parent : (this.parent.pivotGridModule ?\n                this.parent.pivotGridModule : this.parent);\n            this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, droppedClass, -1);\n        }\n        this.parent.axisFieldModule.render();\n        if (!this.parent.allowDeferLayoutUpdate) {\n            this.parent.updateDataSource(true);\n        }\n        else {\n            this.parent.triggerPopulateEvent();\n        }\n    };\n    DialogRenderer.prototype.onDeferUpdateClick = function () {\n        this.parent.updateDataSource();\n        this.parent.dialogRenderer.fieldListDialog.hide();\n    };\n    DialogRenderer.prototype.renderAdaptiveLayout = function (fieldListWrappper) {\n        var layoutFooter = createElement('div', {\n            className: cls.FIELD_LIST_FOOTER_CLASS\n        });\n        fieldListWrappper.appendChild(this.parentElement);\n        var items = [\n            {\n                header: { 'text': this.parent.localeObj.getConstant('filters') },\n                content: this.createAxisTable('filters')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('columns') },\n                content: this.createAxisTable('columns')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('rows') },\n                content: this.createAxisTable('rows')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('values') },\n                content: this.createAxisTable('values')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('createCalculatedField') },\n                content: 'Calculated Field Related UI'\n            }\n        ];\n        if (!this.parent.allowCalculatedField) {\n            items.pop();\n        }\n        this.adaptiveElement = new Tab({\n            heightAdjustMode: 'Auto',\n            items: items,\n            height: '100%',\n            enableRtl: this.parent.enableRtl,\n            selected: this.tabSelect.bind(this)\n        });\n        if (this.parent.renderMode === 'Fixed') {\n            layoutFooter.appendChild(this.createAddButton());\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            this.adaptiveElement.appendTo(this.parentElement);\n            this.parentElement.appendChild(layoutFooter);\n        }\n        else {\n            this.adaptiveElement.appendTo(this.parentElement);\n        }\n    };\n    DialogRenderer.prototype.tabSelect = function (e) {\n        if (this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)) {\n            if (e.selectedIndex !== 4) {\n                addClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n                removeClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n            }\n            else {\n                removeClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n                addClass([this.parentElement.querySelector('.' + cls.WRAPPER_CLASS + ' .' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n            }\n        }\n        if (e.selectedIndex === 4) {\n            this.adaptiveElement.items[4].content = '';\n            this.adaptiveElement.dataBind();\n            this.parent.notify(events.initCalculatedField, {});\n        }\n        else {\n            this.parent.axisFieldModule.render();\n        }\n    };\n    DialogRenderer.prototype.createCalculatedButton = function () {\n        var calculatedButton = createElement('div', {\n            id: this.parent.element.id + '_CalculatedField'\n        });\n        var calculateField = new Button({\n            cssClass: cls.CALCULATED_FIELD_CLASS + ' ' + cls.ICON_DISABLE,\n            content: this.parent.localeObj.getConstant('calculatedField'),\n            enableRtl: this.parent.enableRtl\n        });\n        calculateField.appendTo(calculatedButton);\n        if (this.parent.calculatedFieldModule) {\n            removeClass([calculatedButton], cls.ICON_DISABLE);\n        }\n        calculateField.element.onclick = this.showCalculatedField.bind(this);\n        return calculatedButton;\n    };\n    DialogRenderer.prototype.createAddButton = function () {\n        var footerContainer = createElement('div', {\n            className: cls.FIELD_LIST_FOOTER_CLASS + '-content'\n        });\n        var fieldListButton = createElement('div', {});\n        var calculatedButton = createElement('div', {});\n        var calculateField = new Button({\n            cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS +\n                ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n            iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n            enableRtl: this.parent.enableRtl\n        });\n        var fieldList = new Button({\n            cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n            iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n            enableRtl: this.parent.enableRtl\n        });\n        fieldList.appendTo(fieldListButton);\n        calculateField.appendTo(calculatedButton);\n        footerContainer.appendChild(fieldListButton);\n        footerContainer.appendChild(calculatedButton);\n        calculateField.element.onclick = this.showCalculatedField.bind(this);\n        fieldList.element.onclick = this.showFieldListDialog.bind(this);\n        return footerContainer;\n    };\n    DialogRenderer.prototype.createAxisTable = function (axis) {\n        var axisWrapper = createElement('div', {\n            className: cls.FIELD_LIST_CLASS + '-' + axis\n        });\n        var axisContent = createElement('div', { className: cls.AXIS_CONTENT_CLASS + ' ' + 'e-' + axis });\n        var axisPrompt = createElement('span', {\n            className: cls.AXIS_PROMPT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('addPrompt')\n        });\n        axisWrapper.appendChild(axisContent);\n        axisWrapper.appendChild(axisPrompt);\n        return axisWrapper;\n    };\n    DialogRenderer.prototype.showCalculatedField = function (event) {\n        if (!this.parent.isAdaptive) {\n            if (this.parent.dialogRenderer.fieldListDialog) {\n                this.parent.dialogRenderer.fieldListDialog.hide();\n                addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n            }\n        }\n        this.parent.notify(events.initCalculatedField, {});\n    };\n    DialogRenderer.prototype.showFieldListDialog = function (event) {\n        var activeindex = this.adaptiveElement.selectedItem;\n        this.parent.treeViewModule.render(activeindex);\n    };\n    DialogRenderer.prototype.onShowFieldList = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            if (this.parent.isAdaptive) {\n                this.parent.axisFieldModule.render();\n            }\n            this.parent.clonedDataSource = extend({}, this.parent.dataSource, null, true);\n            this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n        }\n        addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n        this.parent.dialogRenderer.fieldListDialog.show();\n        this.parent.dialogRenderer.fieldListDialog.element.style.top =\n            parseInt(this.parent.dialogRenderer.fieldListDialog.element.style.top, 10) < 0 ?\n                '0px' : this.parent.dialogRenderer.fieldListDialog.element.style.top;\n    };\n    DialogRenderer.prototype.onCloseFieldList = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            this.parent.dataSource =\n                extend({}, this.parent.clonedDataSource.properties, null, true);\n            this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n            this.parent.pivotGridModule.\n                setProperties({ dataSource: this.parent.clonedDataSource.properties }, true);\n            this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n            this.parent.pivotGridModule.notify(events.uiUpdate, this);\n            this.parent.pivotGridModule.notify(events.contentReady, this);\n        }\n        this.parent.dialogRenderer.fieldListDialog.hide();\n    };\n    DialogRenderer.prototype.removeFieldListIcon = function () {\n        if (!document.getElementById(this.parent.element.id + 'calculateddialog')) {\n            removeClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n        }\n    };\n    DialogRenderer.prototype.keyPress = function (e) {\n        var target = e.target;\n        if (e.keyCode === 13 && e.target) {\n            e.target.click();\n            e.preventDefault();\n            return;\n        }\n    };\n    DialogRenderer.prototype.wireDialogEvent = function (element) {\n        EventHandler.add(element, 'keydown', this.keyPress, this);\n        EventHandler.add(element, 'click', this.onShowFieldList, this);\n    };\n    DialogRenderer.prototype.unWireDialogEvent = function (element) {\n        EventHandler.remove(element, 'keydown', this.keyPress);\n        EventHandler.remove(element, 'click', this.onShowFieldList);\n    };\n    return DialogRenderer;\n}());\nexport { DialogRenderer };\n","import { createElement, addClass, removeClass, prepend, remove } from '@syncfusion/ej2-base';\nimport { closest, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\n/**\n * Module to render Field List\n */\n/** @hidden */\nvar TreeViewRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function TreeViewRenderer(parent) {\n        this.selectedNodes = [];\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Initialize the field list tree rendering\n     * @returns void\n     * @private\n     */\n    TreeViewRenderer.prototype.render = function (axis) {\n        this.parentElement = this.parent.dialogRenderer.parentElement;\n        if (!this.parent.isAdaptive) {\n            var fieldTable = createElement('div', { className: cls.FIELD_TABLE_CLASS });\n            var treeHeader = createElement('div', {\n                className: cls.FIELD_HEADER_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('allFields')\n            });\n            this.treeViewElement = createElement('div', {\n                id: this.parent.element.id + '_TreeView',\n                className: cls.FIELD_LIST_CLASS\n            });\n            fieldTable.appendChild(treeHeader);\n            fieldTable.appendChild(this.treeViewElement);\n            this.parentElement.appendChild(fieldTable);\n            if (this.parent.renderMode === 'Fixed') {\n                var centerDiv = createElement('div', { className: cls.STATIC_CENTER_DIV_CLASS });\n                var axisHeader = createElement('div', {\n                    className: cls.STATIC_CENTER_HEADER_CLASS,\n                    innerHTML: this.parent.localeObj.getConstant('centerHeader')\n                });\n                this.parentElement.appendChild(centerDiv);\n                this.parentElement.appendChild(axisHeader);\n            }\n            this.renderTreeView();\n        }\n        else {\n            this.renderTreeDialog(axis);\n        }\n    };\n    TreeViewRenderer.prototype.renderTreeView = function () {\n        this.fieldTable = new TreeView({\n            fields: { dataSource: this.getTreeData(), id: 'id', text: 'caption', isChecked: 'isSelected' },\n            nodeChecked: this.nodeStateChange.bind(this),\n            cssClass: cls.FIELD_LIST_TREE_CLASS,\n            showCheckBox: true,\n            allowDragAndDrop: true,\n            sortOrder: 'Ascending',\n            enableRtl: this.parent.enableRtl,\n            nodeDragStart: this.dragStart.bind(this),\n            nodeDragStop: this.dragStop.bind(this)\n        });\n        this.treeViewElement.innerHTML = '';\n        this.fieldTable.appendTo(this.treeViewElement);\n        this.getTreeUpdate();\n    };\n    TreeViewRenderer.prototype.renderTreeDialog = function (axis) {\n        var fieldListDialog = createElement('div', {\n            id: this.parent.element.id + '_FieldListTreeView',\n            className: cls.ADAPTIVE_FIELD_LIST_DIALOG_CLASS\n        });\n        this.parentElement.appendChild(fieldListDialog);\n        this.fieldDialog = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            header: this.parent.localeObj.getConstant('adaptiveFieldHeader'),\n            content: this.createTreeView(this.getTreeData(axis)),\n            isModal: true,\n            visible: true,\n            showCloseIcon: false,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: '350px',\n            position: { X: 'center', Y: 'center' },\n            buttons: [{\n                    click: this.closeTreeDialog.bind(this),\n                    buttonModel: {\n                        cssClass: cls.CANCEL_BUTTON_CLASS, content: this.parent.localeObj.getConstant('cancel')\n                    }\n                }, {\n                    click: this.onFieldAdd.bind(this),\n                    buttonModel: {\n                        cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('add'),\n                        isPrimary: true\n                    }\n                }],\n            closeOnEscape: true,\n            target: this.parentElement.parentElement,\n            close: this.dialogClose.bind(this)\n        });\n        this.fieldDialog.appendTo(fieldListDialog);\n    };\n    TreeViewRenderer.prototype.dialogClose = function () {\n        if (document.getElementById(this.parent.element.id + '_FieldListTreeView')) {\n            remove(document.getElementById(this.parent.element.id + '_FieldListTreeView'));\n        }\n    };\n    TreeViewRenderer.prototype.createTreeView = function (treeData) {\n        var editorTreeWrapper = createElement('div', {\n            id: this.parent.element.id + 'EditorDiv',\n            className: cls.EDITOR_TREE_WRAPPER_CLASS\n        });\n        var searchWrapper = createElement('div', {\n            id: this.parent.element.id + '_SearchDiv', attrs: { 'tabindex': '-1' },\n            className: cls.EDITOR_SEARCH_WRAPPER_CLASS\n        });\n        var editorSearch = createElement('input', { attrs: { 'type': 'text' } });\n        searchWrapper.appendChild(editorSearch);\n        var treeViewContainer = createElement('div', { className: cls.EDITOR_TREE_CONTAINER_CLASS });\n        editorTreeWrapper.appendChild(searchWrapper);\n        this.editorSearch = new MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('search'),\n            enableRtl: this.parent.enableRtl,\n            cssClass: cls.EDITOR_SEARCH_CLASS,\n            change: this.textChange.bind(this)\n        });\n        this.editorSearch.appendTo(editorSearch);\n        editorTreeWrapper.appendChild(treeViewContainer);\n        this.fieldTable = new TreeView({\n            fields: { dataSource: treeData, id: 'id', text: 'caption', isChecked: 'isSelected' },\n            showCheckBox: true,\n            sortOrder: 'Ascending',\n            enableRtl: this.parent.enableRtl,\n            nodeChecked: this.addNode.bind(this),\n        });\n        this.fieldTable.appendTo(treeViewContainer);\n        return editorTreeWrapper;\n    };\n    TreeViewRenderer.prototype.textChange = function (e) {\n        this.parent.pivotCommon.eventBase.searchTreeNodes(e, this.fieldTable, true);\n    };\n    TreeViewRenderer.prototype.dragStart = function (args) {\n        if (args.event.target.classList.contains(cls.DRAG_CLASS)) {\n            this.parent.isDragging = true;\n            addClass([args.draggedNode.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.SELECTED_NODE_CLASS);\n            var data = this.parent.engineModule.fieldList[args.draggedNode.getAttribute('data-uid')];\n            var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n            if (data && data.aggregateType === 'CalculatedField') {\n                for (var _i = 0, axis_1 = axis; _i < axis_1.length; _i++) {\n                    var axisContent = axis_1[_i];\n                    addClass([this.parentElement.querySelector('.' + axisContent)], cls.NO_DRAG_CLASS);\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    TreeViewRenderer.prototype.dragStop = function (args) {\n        args.cancel = true;\n        this.parent.isDragging = false;\n        var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n        for (var _i = 0, axis_2 = axis; _i < axis_2.length; _i++) {\n            var axisElement = axis_2[_i];\n            removeClass([this.parentElement.querySelector('.' + axisElement)], cls.NO_DRAG_CLASS);\n        }\n        removeClass([args.draggedNode.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.SELECTED_NODE_CLASS);\n        if (this.parent.pivotCommon.filterDialog.dialogPopUp) {\n            this.parent.pivotCommon.filterDialog.dialogPopUp.close();\n        }\n        var fieldName = args.draggedNodeData.id.toString();\n        if (!this.isNodeDropped(args, fieldName)) {\n            return;\n        }\n        this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ? this.parent :\n            (this.parent.pivotGridModule ? this.parent.pivotGridModule : this.parent);\n        if (this.parent.pivotCommon.nodeStateModified.onStateModified(args, fieldName)) {\n            if (this.parent.allowDeferLayoutUpdate) {\n                this.updateDataSource();\n            }\n            else {\n                this.parent.updateDataSource();\n            }\n            this.parent.axisFieldModule.render();\n        }\n    };\n    TreeViewRenderer.prototype.isNodeDropped = function (args, targetID) {\n        var isDropped = true;\n        if (args.draggedNodeData.isChecked === 'true') {\n            var target = this.getButton(targetID);\n            var axisPanel = closest(target, '.' + cls.DROPPABLE_CLASS);\n            var droppableElement = closest(args.target, '.' + cls.DROPPABLE_CLASS);\n            if (target && axisPanel === droppableElement) {\n                var pivotButtons = [].slice.call(axisPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n                var dropTarget = closest(args.target, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n                var sourcePosition = void 0;\n                var dropPosition = -1;\n                for (var i = 0, n = pivotButtons.length; i < n; i++) {\n                    if (pivotButtons[i].id === target.id) {\n                        sourcePosition = i;\n                    }\n                    if (dropTarget) {\n                        var droppableButton = dropTarget.querySelector('.' + cls.PIVOT_BUTTON_CLASS);\n                        if (pivotButtons[i].id === droppableButton.id) {\n                            dropPosition = i;\n                        }\n                    }\n                }\n                if (sourcePosition === dropPosition || (sourcePosition === (pivotButtons.length - 1) && dropPosition === -1)) {\n                    var parentElement = document.getElementById(this.parent.element.id + '_Wrapper');\n                    removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n                    isDropped = false;\n                }\n            }\n        }\n        return isDropped;\n    };\n    TreeViewRenderer.prototype.getButton = function (fieldName) {\n        var wrapperElement = document.getElementById(this.parent.element.id + '_Wrapper');\n        var pivotButtons = [].slice.call(wrapperElement.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n        var buttonElement;\n        for (var i = 0, n = pivotButtons.length; i < n; i++) {\n            if (pivotButtons[i].id === fieldName) {\n                buttonElement = pivotButtons[i];\n                break;\n            }\n        }\n        return buttonElement;\n    };\n    TreeViewRenderer.prototype.nodeStateChange = function (args) {\n        if (this.parent.pivotCommon.filterDialog.dialogPopUp) {\n            this.parent.pivotCommon.filterDialog.dialogPopUp.close();\n        }\n        var node = closest(args.node, '.' + cls.TEXT_CONTENT_CLASS);\n        var list = this.parent.pivotFieldList;\n        var selectedNode = list[args.data[0].id.toString()];\n        if (args.action === 'check') {\n            addClass([node.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.LIST_SELECT_CLASS);\n            var addNode = this.parent.pivotCommon.dataSourceUpdate.getNewField(args.data[0].id.toString());\n            selectedNode.type === 'number' ?\n                this.parent.dataSource.values.push(addNode) : this.parent.dataSource.rows.push(addNode);\n        }\n        else {\n            removeClass([node.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.LIST_SELECT_CLASS);\n            this.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(args.data[0].id.toString());\n        }\n        if (!this.parent.allowDeferLayoutUpdate) {\n            this.parent.updateDataSource(true);\n        }\n        else {\n            if (args.action === 'check') {\n                selectedNode.isSelected = true;\n            }\n            else {\n                selectedNode.isSelected = false;\n            }\n            this.updateDataSource();\n        }\n        this.parent.axisFieldModule.render();\n    };\n    TreeViewRenderer.prototype.updateDataSource = function () {\n        if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n            this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n            this.parent.pivotGridModule.\n                setProperties({ dataSource: this.parent.dataSource.properties }, true);\n            this.parent.pivotGridModule.notify(events.uiUpdate, this);\n        }\n        else {\n            this.parent.triggerPopulateEvent();\n        }\n    };\n    TreeViewRenderer.prototype.addNode = function (args) {\n        var fieldList = this.parent.pivotFieldList;\n        var selectedNode = fieldList[args.data[0].id.toString()];\n        if (args.action === 'check') {\n            this.selectedNodes.push(selectedNode.id.toString());\n        }\n        else {\n            var count = this.selectedNodes.length;\n            while (count--) {\n                if (this.selectedNodes[count] === selectedNode.id.toString()) {\n                    this.selectedNodes.splice(count, 1);\n                    break;\n                }\n            }\n        }\n    };\n    TreeViewRenderer.prototype.getTreeUpdate = function () {\n        var liElements = [].slice.call(this.treeViewElement.querySelectorAll('.' + cls.TEXT_CONTENT_CLASS));\n        for (var _i = 0, liElements_1 = liElements; _i < liElements_1.length; _i++) {\n            var liElement = liElements_1[_i];\n            var dragElement = createElement('span', {\n                attrs: {\n                    'tabindex': '-1',\n                    title: this.parent.localeObj.getConstant('drag'),\n                    'aria-disabled': 'false'\n                },\n                className: cls.ICON + ' ' + cls.DRAG_CLASS\n            });\n            prepend([dragElement], liElement);\n            if (liElement.querySelector('.' + cls.NODE_CHECK_CLASS)) {\n                addClass([liElement.querySelector('.' + cls.LIST_TEXT_CLASS)], cls.LIST_SELECT_CLASS);\n            }\n        }\n    };\n    TreeViewRenderer.prototype.refreshTreeView = function () {\n        if (this.fieldTable) {\n            this.fieldTable.fields = { dataSource: this.getTreeData(), id: 'id', text: 'caption', isChecked: 'isSelected' };\n            this.fieldTable.dataBind();\n            this.getTreeUpdate();\n        }\n    };\n    TreeViewRenderer.prototype.getTreeData = function (axis) {\n        var data = [];\n        var keys = Object.keys(this.parent.pivotFieldList);\n        var fieldList = extend({}, this.parent.pivotFieldList, null, true);\n        if (this.parent.isAdaptive) {\n            var fields = [this.parent.dataSource.filters, this.parent.dataSource.columns, this.parent.dataSource.rows,\n                this.parent.dataSource.values];\n            var currentFieldSet = fields[axis];\n            var len = keys.length;\n            while (len--) {\n                fieldList[keys[len]].isSelected = false;\n            }\n            for (var _i = 0, currentFieldSet_1 = currentFieldSet; _i < currentFieldSet_1.length; _i++) {\n                var item = currentFieldSet_1[_i];\n                fieldList[item.name].isSelected = true;\n            }\n        }\n        var list = fieldList;\n        for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n            var member = keys_1[_a];\n            var obj = list[member];\n            data.push(obj);\n        }\n        return data;\n    };\n    TreeViewRenderer.prototype.onFieldAdd = function (e) {\n        this.parent.dialogRenderer.updateDataSource(this.selectedNodes);\n        this.closeTreeDialog();\n    };\n    TreeViewRenderer.prototype.closeTreeDialog = function () {\n        this.selectedNodes = [];\n        this.fieldDialog.hide();\n    };\n    /**\n     * @hidden\n     */\n    TreeViewRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.treeViewUpdate, this.refreshTreeView, this);\n    };\n    /**\n     * @hidden\n     */\n    TreeViewRenderer.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.treeViewUpdate, this.refreshTreeView);\n    };\n    /**\n     * To destroy the tree view event listener\n     * @return {void}\n     * @hidden\n     */\n    TreeViewRenderer.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return TreeViewRenderer;\n}());\nexport { TreeViewRenderer };\n","import { createElement, Droppable, EventHandler, removeClass, addClass } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\n/**\n * Module to render Axis Field Table\n */\n/** @hidden */\nvar AxisTableRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function AxisTableRenderer(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the axis table rendering\n     * @returns void\n     * @private\n     */\n    AxisTableRenderer.prototype.render = function () {\n        if (!this.parent.isAdaptive) {\n            var axisTable = createElement('div', { className: cls.AXIS_TABLE_CLASS });\n            this.leftAxisPanel = createElement('div', { className: cls.LEFT_AXIS_PANEL_CLASS });\n            this.rightAxisPanel = createElement('div', { className: cls.RIGHT_AXIS_PANEL_CLASS });\n            this.parent.dialogRenderer.parentElement.appendChild(axisTable);\n            axisTable.appendChild(this.leftAxisPanel);\n            axisTable.appendChild(this.rightAxisPanel);\n            this.axisTable = axisTable;\n            this.renderAxisTable();\n        }\n        this.parent.axisFieldModule.render();\n    };\n    AxisTableRenderer.prototype.renderAxisTable = function () {\n        var fieldLabels = ['filters', 'rows', 'columns', 'values'];\n        for (var len = 0, lnt = fieldLabels.length; len < lnt; len++) {\n            var axis = createElement('div', {\n                className: cls.FIELD_LIST_CLASS + '-' + fieldLabels[len]\n            });\n            var axisTitleWrapper = createElement('div', {\n                className: cls.AXIS_ICON_CLASS + '-wrapper'\n            });\n            var axisTitle = createElement('div', {\n                className: cls.AXIS_HEADER_CLASS,\n                innerHTML: this.parent.localeObj.getConstant(fieldLabels[len])\n            });\n            axisTitleWrapper.appendChild(this.getIconupdate(fieldLabels[len]));\n            axisTitleWrapper.appendChild(axisTitle);\n            var axisContent = createElement('div', { className: cls.AXIS_CONTENT_CLASS + ' ' + 'e-' + fieldLabels[len] });\n            var localePrompt = void 0;\n            if (fieldLabels[len] === 'rows') {\n                localePrompt = this.parent.localeObj.getConstant('dropRowPrompt');\n            }\n            else if (fieldLabels[len] === 'columns') {\n                localePrompt = this.parent.localeObj.getConstant('dropColPrompt');\n            }\n            else if (fieldLabels[len] === 'values') {\n                localePrompt = this.parent.localeObj.getConstant('dropValPrompt');\n            }\n            else {\n                localePrompt = this.parent.localeObj.getConstant('dropFilterPrompt');\n            }\n            var axisPrompt = createElement('span', {\n                className: cls.AXIS_PROMPT_CLASS,\n                innerHTML: localePrompt\n            });\n            var droppable = new Droppable(axisContent, {});\n            axis.appendChild(axisTitleWrapper);\n            axis.appendChild(axisContent);\n            axis.appendChild(axisPrompt);\n            if (len <= 1) {\n                this.leftAxisPanel.appendChild(axis);\n            }\n            else {\n                this.rightAxisPanel.appendChild(axis);\n            }\n            this.unWireEvent(axisContent);\n            this.wireEvent(axisContent);\n        }\n    };\n    AxisTableRenderer.prototype.getIconupdate = function (axis) {\n        var axisWrapper = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n            className: cls.AXIS_ICON_CLASS + '-icon-wrapper'\n        });\n        var axisElement = createElement('span', {\n            attrs: {\n                'tabindex': '-1', 'aria-disabled': 'false'\n            },\n            className: cls.ICON + ' ' + cls.AXIS_ICON_CLASS + '-' + axis\n        });\n        axisWrapper.appendChild(axisElement);\n        return axisWrapper;\n    };\n    AxisTableRenderer.prototype.wireEvent = function (element) {\n        EventHandler.add(element, 'mouseover', this.updateDropIndicator, this);\n        EventHandler.add(element, 'mouseleave', this.updateDropIndicator, this);\n    };\n    AxisTableRenderer.prototype.unWireEvent = function (element) {\n        EventHandler.remove(element, 'mouseover', this.updateDropIndicator);\n        EventHandler.remove(element, 'mouseleave', this.updateDropIndicator);\n    };\n    AxisTableRenderer.prototype.updateDropIndicator = function (e) {\n        var parentElement = this.parent.dialogRenderer.parentElement;\n        if (this.parent.isDragging && e.target.classList.contains(cls.AXIS_CONTENT_CLASS) && e.type === 'mouseover') {\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n            var element = [].slice.call(e.target.querySelectorAll('.' + cls.PIVOT_BUTTON_WRAPPER_CLASS));\n            if (element.length > 0) {\n                addClass([element[element.length - 1].querySelector('.' + cls.DROP_INDICATOR_CLASS + '-last')], cls.INDICATOR_HOVER_CLASS);\n            }\n        }\n        else if (e.type === 'mouseleave') {\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n        }\n    };\n    return AxisTableRenderer;\n}());\nexport { AxisTableRenderer };\n","import { createElement, remove, extend, getInstance } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as events from '../../common/base/constant';\n/**\n * `AggregateMenu` module to create aggregate type popup.\n */\n/** @hidden */\nvar AggregateMenu = /** @class */ (function () {\n    /**\n     * Constructor for the rener action.\n     * @hidden\n     */\n    function AggregateMenu(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns void\n     * @private\n     */\n    AggregateMenu.prototype.render = function (args, parentElement) {\n        this.parentElement = parentElement;\n        this.openContextMenu(args);\n    };\n    AggregateMenu.prototype.openContextMenu = function (args) {\n        if (this.menuInfo === undefined) {\n            this.createContextMenu();\n        }\n        this.currentMenu = args.currentTarget;\n        var pos = this.currentMenu.getBoundingClientRect();\n        if (this.parent.enableRtl) {\n            this.menuInfo.open(pos.top, pos.left - 105);\n        }\n        else {\n            this.menuInfo.open(pos.top, pos.left);\n        }\n    };\n    AggregateMenu.prototype.createContextMenu = function () {\n        var menuItems = [\n            { text: 'Sum', id: 'Sum' },\n            { text: 'Count', id: 'Count' },\n            { text: 'Distinct Count', id: 'DistinctCount' },\n            { text: 'Product', id: 'Product' },\n            { text: 'Avg', id: 'Avg' },\n            { text: 'Min', id: 'Min' },\n            { text: 'Max', id: 'Max' },\n            { text: 'More...', id: 'MoreOption' }\n        ];\n        var menuOptions = {\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.beforeMenuOpen.bind(this),\n            select: this.selectOptionInContextMenu.bind(this)\n        };\n        var removeContextMenu = document.getElementById(this.parent.element.id + 'valueFieldContextMenu');\n        if (removeContextMenu !== null) {\n            removeContextMenu.innerHTML = '';\n        }\n        this.parent.element.appendChild(createElement('ul', {\n            id: this.parent.element.id + 'valueFieldContextMenu'\n        }));\n        this.menuInfo = new Menu(menuOptions);\n        this.menuInfo.appendTo('#' + this.parent.element.id + 'valueFieldContextMenu');\n    };\n    AggregateMenu.prototype.beforeMenuOpen = function (args) {\n        args.element.style.zIndex = (this.menuInfo.element.style.zIndex + 3).toString();\n        args.element.style.display = 'inline';\n    };\n    AggregateMenu.prototype.createValueSettingsDialog = function (target) {\n        var _this = this;\n        var valueDialog = createElement('div', {\n            id: this.parentElement.id + '_ValueDialog',\n            className: 'e-value-field-settings',\n            attrs: { 'data-field': target.id }\n        });\n        this.parentElement.appendChild(valueDialog);\n        this.valueDialog = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: true,\n            header: this.parent.localeObj.getConstant('valueFieldSettings'),\n            content: this.createFieldOptions(target),\n            isModal: true,\n            visible: true,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.updateValueSettings.bind(this),\n                    buttonModel: { cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('ok'), isPrimary: true }\n                },\n                {\n                    click: function () { _this.valueDialog.hide(); },\n                    buttonModel: { cssClass: cls.CANCEL_BUTTON_CLASS, content: this.parent.localeObj.getConstant('cancel') }\n                }\n            ],\n            closeOnEscape: true,\n            target: this.parentElement,\n            overlayClick: function () { _this.removeDialog(); },\n            close: this.removeDialog.bind(this)\n        });\n        this.valueDialog.appendTo(valueDialog);\n    };\n    /* tslint:disable:all */\n    AggregateMenu.prototype.createFieldOptions = function (buttonElement) {\n        var fieldCaption = buttonElement.getAttribute('data-caption');\n        var summaryType = buttonElement.getAttribute('data-type');\n        var baseField = buttonElement.getAttribute('data-basefield');\n        var baseItem = buttonElement.getAttribute('data-baseitem');\n        summaryType = (summaryType.toString() !== 'undefined' ? summaryType : 'Sum');\n        var summaryDataSource = [\n            { value: 'Sum', text: 'Sum' },\n            { value: 'Count', text: 'Count' },\n            { value: 'DistinctCount', text: 'Distinct Count' },\n            { value: 'Product', text: 'Product' },\n            { value: 'Avg', text: 'Avg' },\n            { value: 'Min', text: 'Min' },\n            { value: 'Max', text: 'Max' },\n            { value: 'Index', text: 'Index' },\n            { value: 'SampleStDev', text: 'Sample StDev' },\n            { value: 'PopulationStDev', text: 'Population StDev' },\n            { value: 'SampleVar', text: 'Sample Var' },\n            { value: 'PopulationVar', text: 'Population Var' },\n            { value: 'RunningTotals', text: 'Running Totals' },\n            { value: 'DifferenceFrom', text: 'Difference From' },\n            { value: 'PercentageOfDifferenceFrom', text: '% of Difference From' },\n            { value: 'PercentageOfGrandTotal', text: '% of Grand Total' },\n            { value: 'PercentageOfColumnTotal', text: '% of Column Total' },\n            { value: 'PercentageOfRowTotal', text: '% of Row Total' },\n            { value: 'PercentageOfParentTotal', text: '% of Parent Total' },\n            { value: 'PercentageOfParentColumnTotal', text: '% of Parent Column Total' },\n            { value: 'PercentageOfParentRowTotal', text: '% of Parent Row Total' },\n        ];\n        var baseItemTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom'];\n        var baseFieldTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom', 'PercentageOfParentTotal'];\n        var dataFields = extend([], this.parent.dataSource.rows, null, true);\n        dataFields = dataFields.concat(this.parent.dataSource.columns);\n        var fieldDataSource = [];\n        var fieldItemDataSource = [];\n        // let summaryDataSource: { [key: string]: Object }[] = [];\n        // for (let type of summaryTypes) {\n        //     summaryDataSource.push({ value: type, text: type });\n        // }\n        for (var _i = 0, dataFields_1 = dataFields; _i < dataFields_1.length; _i++) {\n            var field = dataFields_1[_i];\n            var value = field.name;\n            var text = (field.caption ? field.caption : field.name);\n            fieldDataSource.push({ value: value, text: text });\n        }\n        baseField = (baseField.toString() !== 'undefined' ? baseField : fieldDataSource[0].value);\n        fieldItemDataSource = Object.keys(this.parent.engineModule.fieldList[(baseField.toString() !== 'undefined' ?\n            baseField : fieldDataSource[0].value)].formattedMembers);\n        baseItem = (baseItem.toString() !== 'undefined' ? baseItem : fieldItemDataSource[0]);\n        var mainDiv = createElement('div', {\n            className: 'e-value-field-div-content', id: this.parentElement.id + '_field_div_content',\n            attrs: { 'data-type': summaryType, 'data-caption': fieldCaption, 'data-basefield': baseField, 'data-baseitem': baseItem }\n        });\n        var textWrappper = createElement('div', { className: 'e-field-name-text-wrapper', });\n        var filterWrapperDiv1 = createElement('div', { className: 'e-field-option-wrapper' });\n        var optionWrapperDiv1 = createElement('div', { className: 'e-type-option-wrapper' });\n        var optionWrapperDiv2 = createElement('div', { className: 'e-base-field-option-wrapper' });\n        var optionWrapperDiv3 = createElement('div', { className: 'e-base-item-option-wrapper' });\n        var texttitle = createElement('div', { className: 'e-field-name-title', innerHTML: this.parent.localeObj.getConstant('sourceName') + '&nbsp;' });\n        var textContent = createElement('div', { className: 'e-field-name-content', innerHTML: buttonElement.id.toString() });\n        var inputTextDiv1 = createElement('div', {\n            className: 'e-type-option-text', innerHTML: this.parent.localeObj.getConstant('sourceCaption')\n        });\n        var optionTextDiv1 = createElement('div', {\n            className: 'e-base-field-option-text', innerHTML: this.parent.localeObj.getConstant('summarizeValuesBy')\n        });\n        var optionTextDiv2 = createElement('div', {\n            className: 'e-base-item-option-text', innerHTML: this.parent.localeObj.getConstant('baseField')\n        });\n        var optionTextDiv3 = createElement('div', {\n            className: 'e-type-option-text', innerHTML: this.parent.localeObj.getConstant('baseItem')\n        });\n        var inputDiv1 = createElement('div', { className: 'e-caption-input-wrapper' });\n        var dropOptionDiv1 = createElement('div', { id: this.parentElement.id + '_type_option' });\n        var dropOptionDiv2 = createElement('div', { id: this.parentElement.id + '_base_field_option' });\n        var dropOptionDiv3 = createElement('div', { id: this.parentElement.id + '_base_item_option' });\n        var inputField1 = createElement('input', {\n            id: this.parentElement.id + 'type_input_option',\n            className: 'e-caption-input-text',\n            attrs: { 'type': 'text' }\n        });\n        textWrappper.appendChild(texttitle);\n        textWrappper.appendChild(textContent);\n        inputDiv1.appendChild(inputTextDiv1);\n        inputDiv1.appendChild(inputField1);\n        optionWrapperDiv1.appendChild(optionTextDiv1);\n        optionWrapperDiv2.appendChild(optionTextDiv2);\n        optionWrapperDiv3.appendChild(optionTextDiv3);\n        optionWrapperDiv1.appendChild(dropOptionDiv1);\n        optionWrapperDiv2.appendChild(dropOptionDiv2);\n        optionWrapperDiv3.appendChild(dropOptionDiv3);\n        filterWrapperDiv1.appendChild(textWrappper);\n        filterWrapperDiv1.appendChild(inputDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv2);\n        filterWrapperDiv1.appendChild(optionWrapperDiv3);\n        mainDiv.appendChild(filterWrapperDiv1);\n        var popupInstance = this;\n        var optionWrapper1 = new DropDownList({\n            dataSource: summaryDataSource,\n            fields: { value: 'value', text: 'text' },\n            value: summaryType,\n            // popupWidth: 'auto',\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                optionWrapper2.enabled = baseFieldTypes.indexOf(args.value) !== -1 ? true : false;\n                optionWrapper3.enabled = baseItemTypes.indexOf(args.value) !== -1 ? true : false;\n            }\n        });\n        optionWrapper1.appendTo(dropOptionDiv1);\n        var optionWrapper2 = new DropDownList({\n            dataSource: fieldDataSource, enableRtl: this.parent.enableRtl,\n            fields: { value: 'value', text: 'text' },\n            value: baseField,\n            // popupWidth: 'auto',\n            enabled: (baseFieldTypes.indexOf(summaryType) !== -1 ? true : false),\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                fieldItemDataSource = Object.keys(popupInstance.parent.engineModule.fieldList[args.value].formattedMembers);\n                optionWrapper3.dataSource = fieldItemDataSource;\n                optionWrapper3.value = fieldItemDataSource[0];\n                optionWrapper3.filterBarPlaceholder = popupInstance.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0];\n                optionWrapper3.dataBind();\n            }\n        });\n        optionWrapper2.appendTo(dropOptionDiv2);\n        var optionWrapper3 = new DropDownList({\n            dataSource: fieldItemDataSource, enableRtl: this.parent.enableRtl,\n            value: baseItem,\n            // popupWidth: 'auto',\n            allowFiltering: true,\n            filterBarPlaceholder: this.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0],\n            enabled: (baseItemTypes.indexOf(summaryType) !== -1 ? true : false),\n            cssClass: cls.FILTER_OPERATOR_CLASS, width: '100%',\n        });\n        optionWrapper3.appendTo(dropOptionDiv3);\n        var inputObj1 = new MaskedTextBox({\n            placeholder: 'Enter field caption',\n            // floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl,\n            value: fieldCaption, width: '100%'\n        });\n        inputObj1.appendTo(inputField1);\n        return mainDiv;\n    };\n    /* tslint:enable:all */\n    AggregateMenu.prototype.selectOptionInContextMenu = function (menu) {\n        if (menu.item.text !== null) {\n            var buttonElement = this.currentMenu.parentElement;\n            if (menu.item.id === 'MoreOption') {\n                this.createValueSettingsDialog(buttonElement);\n            }\n            else {\n                var field = buttonElement.getAttribute('data-uid');\n                var valuefields = this.parent.dataSource.values;\n                var contentElement = buttonElement.querySelector('.e-content');\n                var captionName = menu.item.text + ' ' + 'of' + ' ' + this.parent.engineModule.fieldList[field].caption;\n                contentElement.innerHTML = captionName;\n                contentElement.setAttribute('title', captionName);\n                buttonElement.setAttribute('data-type', menu.item.id);\n                for (var vCnt = 0; vCnt < this.parent.dataSource.values.length; vCnt++) {\n                    if (this.parent.dataSource.values[vCnt].name === field) {\n                        var dataSourceItem = valuefields[vCnt].properties ?\n                            valuefields[vCnt].properties : valuefields[vCnt];\n                        dataSourceItem.type = menu.item.id;\n                        /* tslint:disable-next-line:no-any */\n                    }\n                }\n                this.updateDataSource();\n            }\n        }\n    };\n    AggregateMenu.prototype.updateDataSource = function (isRefreshed) {\n        if (!this.parent.allowDeferLayoutUpdate || this.parent.getModuleName() === 'pivotview') {\n            this.parent.updateDataSource(isRefreshed);\n        }\n        else {\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n                this.parent.pivotGridModule.\n                    setProperties({ dataSource: this.parent.dataSource.properties }, true);\n                this.parent.pivotGridModule.notify(events.uiUpdate, this);\n                this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n            }\n            else {\n                this.parent.triggerPopulateEvent();\n            }\n        }\n    };\n    AggregateMenu.prototype.updateValueSettings = function () {\n        var dialogElement = this.valueDialog.element;\n        var captionInstance = getInstance('#' + this.parentElement.id + 'type_input_option', MaskedTextBox);\n        var summaryInstance = getInstance('#' + this.parentElement.id + '_type_option', DropDownList);\n        var baseFieldInstance = getInstance('#' + this.parentElement.id + '_base_field_option', DropDownList);\n        var baseItemInstance = getInstance('#' + this.parentElement.id + '_base_item_option', DropDownList);\n        var fieldName = dialogElement.getAttribute('data-field');\n        var buttonElement = this.parentElement.querySelector('.' + cls.PIVOT_BUTTON_CLASS + '#' + fieldName);\n        var contentElement = buttonElement.querySelector('.e-content');\n        var captionName = this.parent.localeObj.getConstant(summaryInstance.value) + ' ' + 'of' + ' ' + captionInstance.value;\n        contentElement.innerHTML = captionName;\n        contentElement.setAttribute('title', captionName);\n        buttonElement.setAttribute('data-type', summaryInstance.value);\n        buttonElement.setAttribute('data-caption', captionInstance.value);\n        buttonElement.setAttribute('data-basefield', baseFieldInstance.value);\n        buttonElement.setAttribute('data-baseitem', baseItemInstance.value);\n        var selectedField = this.parent.pivotCommon.eventBase.getFieldByName(fieldName, this.parent.dataSource.values);\n        selectedField = selectedField.properties ?\n            selectedField.properties : selectedField;\n        selectedField.caption = captionInstance.value;\n        selectedField.type = summaryInstance.value;\n        selectedField.baseField = baseFieldInstance.value;\n        selectedField.baseItem = baseItemInstance.value;\n        this.valueDialog.close();\n        // this.parent.axisFieldModule.render();\n        this.updateDataSource(true);\n    };\n    AggregateMenu.prototype.removeDialog = function () {\n        if (this.valueDialog && !this.valueDialog.isDestroyed) {\n            this.valueDialog.destroy();\n        }\n        if (document.getElementById(this.parentElement.id + '_ValueDialog')) {\n            remove(document.getElementById(this.parentElement.id + '_ValueDialog'));\n        }\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @return {void}\n     * @hidden\n     */\n    AggregateMenu.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.menuInfo && !this.menuInfo.isDestroyed) {\n            this.menuInfo.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return AggregateMenu;\n}());\nexport { AggregateMenu };\n","import { createElement, Draggable, remove, extend } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, addClass, removeClass, closest, Browser } from '@syncfusion/ej2-base';\nimport { PivotFieldList } from '../../pivotfieldlist/base/field-list';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { AggregateMenu } from '../popups/aggregate-menu';\nimport { AxisFieldRenderer } from '../../pivotfieldlist/renderer/axis-field-renderer';\n/**\n * Module to render Pivot button\n */\n/** @hidden */\nvar PivotButton = /** @class */ (function () {\n    /** Constructor for render module */\n    function PivotButton(parent) {\n        this.parent = parent;\n        this.menuOption = new AggregateMenu(this.parent);\n        this.parent.pivotButtonModule = this;\n        this.addEventListener();\n        if (this.parent instanceof PivotFieldList) {\n            this.axisField = new AxisFieldRenderer(this.parent);\n        }\n    }\n    /* tslint:disable */\n    PivotButton.prototype.renderPivotButton = function (args) {\n        var field = extend([], args.field, null, true);\n        var axis = args.axis;\n        var axisElement;\n        var valuePos = -1;\n        var showValuesButton = (this.parent.getModuleName() == \"pivotfieldlist\" &&\n            this.parent.pivotGridModule) ?\n            this.parent.pivotGridModule.showValuesButton : this.parent.showValuesButton;\n        if (((this.parent.dataSource.valueAxis === 'row' && args.axis === 'rows') ||\n            (this.parent.dataSource.valueAxis === 'column' && args.axis === 'columns')) && showValuesButton && this.parent.dataSource.values.length > 1) {\n            valuePos = field.length;\n            field.push({\n                name: this.parent.localeObj.getConstant('values'), caption: this.parent.localeObj.getConstant('values'),\n                axis: args.axis\n            });\n        }\n        this.parentElement = this.parent.getModuleName() === 'pivotview' ? this.parent.element :\n            document.getElementById(this.parent.element.id + '_Wrapper');\n        if (this.parent.getModuleName() === 'pivotfieldlist') {\n            this.parentElement = document.getElementById(this.parent.element.id + '_Wrapper');\n            if (this.parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-' + axis)) {\n                var axisPrompt = this.parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-' + axis)\n                    .querySelector('.' + cls.AXIS_PROMPT_CLASS);\n                if (field.length === 0) {\n                    removeClass([axisPrompt], cls.ICON_DISABLE);\n                }\n                else {\n                    addClass([axisPrompt], cls.ICON_DISABLE);\n                }\n                axisElement =\n                    this.parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-' + axis).querySelector('.' + cls.AXIS_CONTENT_CLASS);\n            }\n            else {\n                return;\n            }\n        }\n        else {\n            this.parentElement = this.parent.element;\n            axisElement = this.parentElement.querySelector('.e-group-' + axis);\n        }\n        if (axisElement) {\n            if (this.parent.getModuleName() === 'pivotview' && field.length === 0) {\n                var axisPrompt = createElement('span', {\n                    className: cls.AXIS_PROMPT_CLASS,\n                    innerHTML: axis === 'rows' ? this.parent.localeObj.getConstant('rowAxisPrompt') :\n                        axis === 'columns' ? this.parent.localeObj.getConstant('columnAxisPrompt') :\n                            axis === 'values' ? this.parent.localeObj.getConstant('valueAxisPrompt') :\n                                this.parent.localeObj.getConstant('filterAxisPrompt')\n                });\n                axisElement.appendChild(axisPrompt);\n            }\n            else {\n                for (var i = 0, cnt = field.length; i < cnt; i++) {\n                    var buttonWrapper = createElement('div', {\n                        className: cls.PIVOT_BUTTON_WRAPPER_CLASS + (i === 0 ? ' e-first-btn' : ''),\n                        attrs: { 'data-tag': axis + ':' + field[i].name }\n                    });\n                    var buttonElement = createElement('div', {\n                        id: field[i].name, className: cls.PIVOT_BUTTON_CLASS,\n                        attrs: {\n                            'data-uid': field[i].name, 'tabindex': '0', 'isvalue': i === valuePos ? 'true' : 'false',\n                            'aria-disabled': 'false', 'aria-label': field[i].caption ? field[i].caption : field[i].name,\n                            'data-type': field[i].type,\n                            'data-caption': field[i].caption ? field[i].caption : field[i].name,\n                            'data-basefield': field[i].baseField,\n                            'data-baseitem': field[i].baseItem\n                        }\n                    });\n                    var dropIndicatorElement = createElement('span', {\n                        attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n                        className: cls.DROP_INDICATOR_CLASS\n                    });\n                    var dropLastIndicatorElement = createElement('span', {\n                        attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n                        className: cls.DROP_INDICATOR_CLASS + '-last'\n                    });\n                    var dragWrapper = this.createButtonDragIcon(buttonElement);\n                    var contentElement = this.createButtonText(field, i, axis, valuePos);\n                    buttonElement.appendChild(contentElement);\n                    if (['filters', 'values'].indexOf(axis) === -1 && valuePos !== i) {\n                        this.createSortOption(buttonElement, field[i].name);\n                    }\n                    if (axis !== 'values' && valuePos !== i) {\n                        this.createFilterOption(buttonElement, field[i].name);\n                    }\n                    if (axis === 'values') {\n                        this.getTypeStatus(field, i, buttonElement);\n                    }\n                    var removeElement = createElement('span', {\n                        attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n                        className: cls.ICON + ' ' + cls.REMOVE_CLASS\n                    });\n                    if (this.parent.getModuleName() === 'pivotview') {\n                        if (this.parent.groupingBarSettings.showRemoveIcon) {\n                            removeClass([removeElement], cls.ICON_DISABLE);\n                        }\n                        else {\n                            addClass([removeElement], cls.ICON_DISABLE);\n                        }\n                    }\n                    buttonElement.appendChild(removeElement);\n                    buttonWrapper.appendChild(dropIndicatorElement);\n                    buttonWrapper.appendChild(buttonElement);\n                    buttonWrapper.appendChild(dropLastIndicatorElement);\n                    axisElement.appendChild(buttonWrapper);\n                    var pivotButton = new Button({ enableRtl: this.parent.enableRtl });\n                    pivotButton.appendTo(buttonElement);\n                    this.unWireEvent(buttonWrapper, i === valuePos ? 'values' : axis);\n                    this.wireEvent(buttonWrapper, i === valuePos ? 'values' : axis);\n                    if ((this.parent.getModuleName() === 'pivotview' && !this.parent.isAdaptive) ||\n                        this.parent.getModuleName() === 'pivotfieldlist') {\n                        this.createDraggable(this.parent.getModuleName() === 'pivotview' ? contentElement : dragWrapper);\n                    }\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    PivotButton.prototype.createButtonText = function (field, i, axis, valuePos) {\n        var buttonText;\n        var aggregation;\n        var filterMem;\n        if (axis === \"filters\") {\n            filterMem = this.updateButtontext(field[i].name);\n        }\n        if (this.parent.engineModule.fieldList[field[i].name] !== undefined) {\n            aggregation = this.parent.engineModule.fieldList[field[i].name].aggregateType;\n            if (aggregation === undefined && (this.parent.engineModule.fieldList[field[i].name].type === 'string' || this.parent.engineModule.fieldList[field[i].name].type === 'include' ||\n                this.parent.engineModule.fieldList[field[i].name].type === 'exclude')) {\n                aggregation = 'Count';\n            }\n            else if (aggregation === undefined) {\n                aggregation = this.parent.engineModule.fieldList[field[i].name].aggregateType !== undefined ?\n                    this.parent.engineModule.fieldList[field[i].name].aggregateType : 'Sum';\n            }\n        }\n        var text = field[i].caption ? field[i].caption : field[i].name;\n        buttonText = createElement('span', {\n            attrs: {\n                title: axis === 'filters' ? (text + ' (' + filterMem + ')') : (((axis !== 'values' || aggregation === 'CalculatedField') ? text : this.parent.localeObj.getConstant(aggregation) + ' ' + 'of' + ' ' + text)),\n                'tabindex': '-1', 'aria-disabled': 'false', 'oncontextmenu': 'return false;',\n                'data-type': valuePos === i ? '' : aggregation\n            },\n            className: cls.PIVOT_BUTTON_CONTENT_CLASS,\n            innerHTML: axis === 'filters' ? (text + ' (' + filterMem + ')') : (axis !== 'values' || aggregation === 'CalculatedField' ? text : this.parent.localeObj.getConstant(aggregation) + ' ' + 'of' + ' ' + text)\n        });\n        return buttonText;\n    };\n    PivotButton.prototype.getTypeStatus = function (field, i, buttonElement) {\n        var fieldListItem = this.parent.engineModule.fieldList[field[i].name];\n        if (fieldListItem.aggregateType !== 'CalculatedField' &&\n            fieldListItem.type === 'number') {\n            this.createSummaryType(buttonElement, field[i].name);\n        }\n    };\n    PivotButton.prototype.createSummaryType = function (pivotButton, fieldName) {\n        var spanElement = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n            className: cls.ICON + ' ' + cls.AXISFIELD_ICON_CLASS\n        });\n        if (this.parent.getModuleName() === 'pivotview') {\n            if (this.parent.groupingBarSettings.showValueTypeIcon) {\n                removeClass([spanElement], cls.ICON_DISABLE);\n            }\n            else {\n                addClass([spanElement], cls.ICON_DISABLE);\n            }\n        }\n        pivotButton.appendChild(spanElement);\n        return spanElement;\n    };\n    PivotButton.prototype.createMenuOption = function (args) {\n        this.menuOption.render(args, this.parentElement);\n        this.parent.pivotButtonModule = this;\n    };\n    PivotButton.prototype.createDraggable = function (target) {\n        this.draggable = new Draggable(target, {\n            clone: true,\n            enableTailMode: true,\n            enableAutoScroll: true,\n            helper: this.createDragClone.bind(this),\n            dragStart: this.onDragStart.bind(this),\n            drag: this.onDragging.bind(this),\n            dragStop: this.onDragStop.bind(this)\n        });\n    };\n    PivotButton.prototype.createButtonDragIcon = function (pivotButton) {\n        var dragWrapper = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' }\n        });\n        var dragElement = createElement('span', {\n            attrs: {\n                'tabindex': '-1', 'aria-disabled': 'false'\n            },\n            className: cls.ICON + ' ' + cls.DRAG_CLASS\n        });\n        dragWrapper.appendChild(dragElement);\n        pivotButton.appendChild(dragWrapper);\n        return dragWrapper;\n    };\n    PivotButton.prototype.createSortOption = function (pivotButton, fieldName) {\n        var sortCLass;\n        if (!this.parent.allowDeferLayoutUpdate) {\n            sortCLass = this.parent.engineModule.fieldList[fieldName].sort === 'Descending' ? cls.SORT_DESCEND_CLASS : '';\n        }\n        else {\n            sortCLass = '';\n            for (var i = 0; i < this.parent.dataSource.sortSettings.length; i++) {\n                if (this.parent.dataSource.sortSettings[i].name === fieldName) {\n                    sortCLass = this.parent.dataSource.sortSettings[i].order === 'Descending' ? cls.SORT_DESCEND_CLASS : '';\n                }\n            }\n        }\n        var spanElement = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false' },\n            className: cls.ICON + ' ' + cls.SORT_CLASS + ' ' + sortCLass\n        });\n        if (this.parent.dataSource.enableSorting) {\n            removeClass([spanElement], cls.ICON_DISABLE);\n        }\n        else {\n            addClass([spanElement], cls.ICON_DISABLE);\n        }\n        if (this.parent.getModuleName() === 'pivotview') {\n            if (this.parent.groupingBarSettings.showSortIcon) {\n                removeClass([spanElement], cls.ICON_DISABLE);\n            }\n            else {\n                addClass([spanElement], cls.ICON_DISABLE);\n            }\n        }\n        pivotButton.appendChild(spanElement);\n        return spanElement;\n    };\n    PivotButton.prototype.createFilterOption = function (pivotButton, fieldName) {\n        var filterCLass;\n        if (!this.parent.allowDeferLayoutUpdate) {\n            filterCLass = this.parent.engineModule.fieldList[fieldName].filter.length === 0 ?\n                !this.parent.engineModule.fieldList[fieldName].isExcelFilter ? cls.FILTER_CLASS : cls.FILTERED_CLASS : cls.FILTERED_CLASS;\n        }\n        else {\n            filterCLass = cls.FILTER_CLASS;\n            for (var i = 0; i < this.parent.dataSource.filterSettings.length; i++) {\n                if (this.parent.dataSource.filterSettings[i].name === fieldName) {\n                    filterCLass = cls.FILTERED_CLASS;\n                }\n            }\n        }\n        var spanElement = createElement('span', {\n            attrs: {\n                'tabindex': '-1', 'aria-disabled': 'false'\n            },\n            className: cls.FILTER_COMMON_CLASS + ' ' + cls.ICON + ' ' + filterCLass\n        });\n        if (this.parent.getModuleName() === 'pivotview') {\n            if (this.parent.groupingBarSettings.showFilterIcon) {\n                removeClass([spanElement], cls.ICON_DISABLE);\n            }\n            else {\n                addClass([spanElement], cls.ICON_DISABLE);\n            }\n        }\n        pivotButton.appendChild(spanElement);\n        return spanElement;\n    };\n    PivotButton.prototype.createDragClone = function (args) {\n        var element = closest(args.element, '.' + cls.PIVOT_BUTTON_CLASS);\n        var cloneElement = createElement('div', {\n            id: this.parent.element.id + '_DragClone',\n            className: cls.DRAG_CLONE_CLASS\n        });\n        var contentElement = createElement('span', {\n            className: cls.TEXT_CONTENT_CLASS,\n            innerHTML: element.textContent\n        });\n        cloneElement.appendChild(contentElement);\n        document.body.appendChild(cloneElement);\n        return cloneElement;\n    };\n    PivotButton.prototype.onDragStart = function (e) {\n        this.parent.isDragging = true;\n        var element = closest(e.element, '.' + cls.PIVOT_BUTTON_CLASS);\n        var data = this.parent.engineModule.fieldList[element.getAttribute('data-uid')];\n        var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n        addClass([element], cls.SELECTED_NODE_CLASS);\n        if (data && data.aggregateType === 'CalculatedField') {\n            for (var _i = 0, axis_1 = axis; _i < axis_1.length; _i++) {\n                var axisContent = axis_1[_i];\n                addClass([this.parentElement.querySelector('.' + axisContent)], cls.NO_DRAG_CLASS);\n            }\n        }\n    };\n    PivotButton.prototype.onDragging = function (e) {\n        this.draggable.setProperties({ cursorAt: { top: (!isNOU(e.event.targetTouches) || Browser.isDevice) ? 60 : -20, } });\n        // if (closest(e.event.srcElement, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS)) {\n        //     let droppableElement: HTMLElement = closest(e.event.srcElement, '.' + cls.DROPPABLE_CLASS) as HTMLElement;\n        //     let buttonElement: HTMLElement = closest(e.event.srcElement, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS) as HTMLElement;\n        //     if (droppableElement.offsetHeight < droppableElement.scrollHeight) {\n        //         let scrollPosition: number = (droppableElement.scrollHeight - buttonElement.offsetTop);\n        //         if (buttonElement.offsetTop >= droppableElement.offsetTop && scrollPosition > droppableElement.scrollTop) {\n        //             droppableElement.scrollTop += Math.abs(buttonElement.offsetHeight);\n        //         } else if (buttonElement.offsetTop <= droppableElement.offsetTop) {\n        //             droppableElement.scrollTop -= Math.abs(buttonElement.offsetHeight);\n        //         }\n        //     }\n        // }\n    };\n    PivotButton.prototype.onDragStop = function (args) {\n        this.parent.isDragging = false;\n        var element = closest(args.element, '.' + cls.PIVOT_BUTTON_CLASS);\n        removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS)), cls.SELECTED_NODE_CLASS);\n        removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n        var axis = [cls.ROW_AXIS_CLASS, cls.COLUMN_AXIS_CLASS, cls.FILTER_AXIS_CLASS];\n        for (var _i = 0, axis_2 = axis; _i < axis_2.length; _i++) {\n            var axisContent = axis_2[_i];\n            removeClass([this.parentElement.querySelector('.' + axisContent)], cls.NO_DRAG_CLASS);\n        }\n        if (this.parent.pivotCommon.filterDialog.dialogPopUp) {\n            this.parent.pivotCommon.filterDialog.dialogPopUp.close();\n        }\n        if (document.getElementById(this.parent.element.id + '_DragClone')) {\n            remove(document.getElementById(this.parent.element.id + '_DragClone'));\n        }\n        document.body.style.cursor = 'auto';\n        if (!this.isButtonDropped(args.target, element)) {\n            return;\n        }\n        this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ? this.parent :\n            (this.parent.pivotGridModule ? this.parent.pivotGridModule : this.parent);\n        if (this.parent.pivotCommon.nodeStateModified.onStateModified(args, element.id)) {\n            this.updateDataSource();\n            this.parent.axisFieldModule.render();\n        }\n    };\n    PivotButton.prototype.isButtonDropped = function (dropTarget, target) {\n        var axisPanel = closest(target, '.' + cls.DROPPABLE_CLASS);\n        var droppableElement = closest(dropTarget, '.' + cls.DROPPABLE_CLASS);\n        var isDropped = true;\n        if (axisPanel === droppableElement) {\n            var pivotButtons = [].slice.call(axisPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_CLASS));\n            var droppableTarget = closest(dropTarget, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n            var sourcePosition = void 0;\n            var droppedPosition = -1;\n            for (var i = 0, n = pivotButtons.length; i < n; i++) {\n                if (pivotButtons[i].id === target.id) {\n                    sourcePosition = i;\n                }\n                if (droppableTarget) {\n                    var droppableButton = droppableTarget.querySelector('.' + cls.PIVOT_BUTTON_CLASS);\n                    if (pivotButtons[i].id === droppableButton.id) {\n                        droppedPosition = i;\n                    }\n                }\n            }\n            if (sourcePosition === droppedPosition || (sourcePosition === (pivotButtons.length - 1) && droppedPosition === -1)) {\n                removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n                isDropped = false;\n            }\n        }\n        return isDropped;\n    };\n    PivotButton.prototype.updateSorting = function (args) {\n        if (((this.parent.getModuleName() === 'pivotview' && this.parent.enableValueSorting) ||\n            (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.pivotGridModule !== undefined &&\n                this.parent.pivotGridModule.enableValueSorting)) &&\n            args.target.parentElement.parentElement.getAttribute('data-tag').split(':')[0] === 'rows') {\n            this.parent.dataSource.valueSortSettings.headerText = '';\n        }\n        this.parent.pivotCommon.eventBase.updateSorting(args);\n        this.updateDataSource(true);\n    };\n    PivotButton.prototype.updateDataSource = function (isRefreshGrid) {\n        if (!this.parent.allowDeferLayoutUpdate || this.parent.getModuleName() === 'pivotview') {\n            this.parent.updateDataSource(isRefreshGrid);\n        }\n        else {\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n                this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n                this.parent.pivotGridModule.notify(events.uiUpdate, this);\n                this.parent.\n                    pivotGridModule.setProperties({ dataSource: this.parent.dataSource.properties }, true);\n            }\n            else {\n                this.parent.triggerPopulateEvent();\n            }\n        }\n    };\n    PivotButton.prototype.updateFiltering = function (args) {\n        this.parent.pivotCommon.eventBase.updateFiltering(args);\n        var target = args.target;\n        this.fieldName = target.parentElement.id;\n        this.dialogPopUp = this.parent.pivotCommon.filterDialog.dialogPopUp;\n        this.memberTreeView = this.parent.pivotCommon.filterDialog.memberTreeView;\n        this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked = this.nodeStateModified.bind(this);\n        this.parent.pivotCommon.filterDialog.allMemberSelect.nodeChecked = this.nodeStateModified.bind(this);\n        this.bindDialogEvents();\n    };\n    PivotButton.prototype.bindDialogEvents = function () {\n        if (this.parent.pivotCommon.filterDialog.allowExcelLikeFilter && this.parent.pivotCommon.filterDialog.tabObj) {\n            this.updateDialogButtonEvents(this.parent.pivotCommon.filterDialog.tabObj.selectedItem);\n            this.dialogPopUp.buttons[1].click = this.ClearFilter.bind(this);\n            this.parent.pivotCommon.filterDialog.tabObj.selected = this.tabSelect.bind(this);\n        }\n        else {\n            this.updateDialogButtonEvents(0);\n        }\n    };\n    PivotButton.prototype.tabSelect = function (e) {\n        this.updateDialogButtonEvents(e.selectedIndex);\n        removeClass([].slice.call(this.dialogPopUp.element.querySelectorAll('.e-selected-tab')), 'e-selected-tab');\n        if (e.selectedIndex > 0) {\n            /* tslint:disable-next-line:max-line-length */\n            addClass([this.dialogPopUp.element.querySelector('.e-filter-div-content' + '.' + (e.selectedIndex === 1 && this.parent.dataSource.allowLabelFilter ? 'e-label-filter' : 'e-value-filter'))], 'e-selected-tab');\n        }\n        if (e.selectedIndex === 0) {\n            this.parent.pivotCommon.filterDialog.updateCheckedState();\n        }\n        else {\n            this.dialogPopUp.buttons[0].buttonModel.disabled = false;\n            this.dialogPopUp.element.querySelector('.' + cls.OK_BUTTON_CLASS).removeAttribute('disabled');\n        }\n    };\n    PivotButton.prototype.updateDialogButtonEvents = function (index) {\n        this.dialogPopUp.buttons[0].click = (index === 0 ?\n            this.updateFilterState.bind(this, this.fieldName) : this.updateCustomFilter.bind(this));\n    };\n    PivotButton.prototype.updateCustomFilter = function (args) {\n        var dialogElement = this.dialogPopUp.element.querySelector('.e-selected-tab');\n        var fieldName = dialogElement.getAttribute('data-fieldname');\n        var filterType = dialogElement.getAttribute('data-type');\n        var measure = dialogElement.getAttribute('data-measure');\n        var operator = dialogElement.getAttribute('data-operator');\n        var operand1 = dialogElement.getAttribute('data-value1');\n        var operand2 = dialogElement.getAttribute('data-value2');\n        var type = ((filterType === 'value') ? 'Value' : (filterType === 'date') ? 'Date' :\n            (filterType === 'number') ? 'Number' : 'Label');\n        var filterItem = {\n            name: fieldName,\n            type: type,\n            measure: measure,\n            condition: operator,\n            value1: filterType === 'date' ? new Date(operand1) : operand1,\n            value2: filterType === 'date' ? new Date(operand2) : operand2\n        };\n        if ((isNOU(operand1) || operand1 === '') ||\n            (['Between', 'NotBetween'].indexOf(operator) > -1 && (isNOU(operand2) || operand2 === ''))) {\n            var inputElementString = (type.toLowerCase() + ((isNOU(operand1) || operand1 === '') ? '_input_option_1' : '_input_option_2'));\n            var focusElement = dialogElement.querySelector('#' + this.parent.element.id + '_' + inputElementString);\n            addClass([focusElement], cls.EMPTY_FIELD);\n            focusElement.focus();\n            return;\n        }\n        var filterObject = this.parent.pivotCommon.eventBase.getFilterItemByName(fieldName);\n        if (filterObject) {\n            // this.removeDataSourceSettings(fieldName);\n            filterObject = filterObject.properties ?\n                filterObject.properties : filterObject;\n            filterObject.type = type;\n            filterObject.measure = measure;\n            filterObject.condition = operator;\n            filterObject.value1 = filterType === 'date' ? new Date(operand1) : operand1;\n            filterObject.value2 = filterType === 'date' ? new Date(operand2) : operand2;\n        }\n        else {\n            this.parent.dataSource.filterSettings.push(filterItem);\n        }\n        this.dialogPopUp.close();\n        this.refreshPivotButtonState(fieldName, true);\n        this.updateDataSource(true);\n    };\n    PivotButton.prototype.ClearFilter = function (e) {\n        var dialogElement = this.dialogPopUp.element;\n        var fieldName = dialogElement.getAttribute('data-fieldname');\n        this.dialogPopUp.close();\n        this.removeDataSourceSettings(fieldName);\n        this.refreshPivotButtonState(fieldName, false);\n        this.updateDataSource(true);\n    };\n    PivotButton.prototype.removeButton = function (args) {\n        var target = args.target;\n        var fieldName = target.parentElement.id;\n        if (target.parentElement.getAttribute('isvalue') === 'true') {\n            this.parent.setProperties({ dataSource: { values: [] } }, true);\n        }\n        else {\n            this.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(fieldName);\n        }\n        if (this.parent.getModuleName() === 'pivotfieldlist') {\n            this.parent.axisFieldModule.render();\n        }\n        this.updateDataSource();\n    };\n    PivotButton.prototype.nodeStateModified = function (args) {\n        var target = args.node.parentElement.parentElement;\n        if (target.getAttribute('data-uid') === 'all') {\n            this.memberTreeView.nodeChecked = null;\n            if (args.action === 'check') {\n                this.memberTreeView.checkAll();\n            }\n            else {\n                this.memberTreeView.uncheckAll();\n            }\n            this.checkedStateAll(args.action);\n            this.memberTreeView.nodeChecked = this.nodeStateModified.bind(this);\n        }\n        else {\n            var pos = this.parent.pivotCommon.currentTreeItemsPos[args.data[0].id];\n            if (args.action === 'check') {\n                this.parent.pivotCommon.currentTreeItems[pos].checkedStatus = true;\n            }\n            else {\n                this.parent.pivotCommon.currentTreeItems[pos].checkedStatus = false;\n            }\n        }\n        this.parent.pivotCommon.filterDialog.updateCheckedState();\n    };\n    PivotButton.prototype.checkedStateAll = function (state) {\n        if (state === 'check') {\n            for (var _i = 0, _a = this.parent.pivotCommon.currentTreeItems; _i < _a.length; _i++) {\n                var item = _a[_i];\n                for (var _b = 0, _c = this.parent.pivotCommon.searchTreeItems; _b < _c.length; _b++) {\n                    var searctItem = _c[_b];\n                    if (item.id === searctItem.id) {\n                        item.checkedStatus = true;\n                        searctItem.checkedStatus = true;\n                    }\n                }\n            }\n        }\n        else {\n            for (var _d = 0, _e = this.parent.pivotCommon.currentTreeItems; _d < _e.length; _d++) {\n                var item = _e[_d];\n                for (var _f = 0, _g = this.parent.pivotCommon.searchTreeItems; _f < _g.length; _f++) {\n                    var searctItem = _g[_f];\n                    if (item.id === searctItem.id) {\n                        item.checkedStatus = false;\n                        searctItem.checkedStatus = false;\n                    }\n                }\n            }\n        }\n    };\n    PivotButton.prototype.updateFilterState = function (fieldName, args) {\n        var isNodeUnChecked = false;\n        var filterItem = { items: [], name: fieldName, type: 'Include' };\n        for (var _i = 0, _a = this.parent.pivotCommon.searchTreeItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.checkedStatus) {\n                if (this.parent.pivotCommon.isDateField) {\n                    filterItem.items.push(item.name);\n                }\n                else {\n                    filterItem.items.push(item.id);\n                }\n            }\n        }\n        isNodeUnChecked = (filterItem.items.length === this.parent.pivotCommon.currentTreeItems.length ?\n            false : true);\n        var filterObject = this.parent.pivotCommon.eventBase.getFilterItemByName(fieldName);\n        if (filterObject) {\n            for (var i = 0; i < this.parent.dataSource.filterSettings.length; i++) {\n                if (this.parent.dataSource.filterSettings[i].name === fieldName) {\n                    this.parent.dataSource.filterSettings.splice(i, 1);\n                    break;\n                }\n            }\n            this.parent.dataSource.filterSettings.push(filterItem);\n        }\n        else {\n            this.parent.dataSource.filterSettings.push(filterItem);\n        }\n        this.dialogPopUp.close();\n        this.refreshPivotButtonState(fieldName, isNodeUnChecked);\n        if (!isNodeUnChecked) {\n            this.removeDataSourceSettings(fieldName);\n        }\n        this.updateDataSource(true);\n        if (this.parent instanceof PivotFieldList) {\n            this.axisField.render();\n        }\n    };\n    PivotButton.prototype.refreshPivotButtonState = function (fieldName, isFiltered) {\n        var pivotButtons = [].slice.call(this.parentElement.querySelectorAll('.e-pivot-button'));\n        var selectedButton;\n        for (var _i = 0, pivotButtons_1 = pivotButtons; _i < pivotButtons_1.length; _i++) {\n            var item = pivotButtons_1[_i];\n            if (item.getAttribute('data-uid') === fieldName) {\n                selectedButton = item.querySelector('.' + cls.FILTER_COMMON_CLASS);\n                break;\n            }\n        }\n        if (isFiltered) {\n            removeClass([selectedButton], cls.FILTER_CLASS);\n            addClass([selectedButton], cls.FILTERED_CLASS);\n        }\n        else {\n            removeClass([selectedButton], cls.FILTERED_CLASS);\n            addClass([selectedButton], cls.FILTER_CLASS);\n        }\n    };\n    PivotButton.prototype.removeDataSourceSettings = function (fieldName) {\n        var filterSettings = this.parent.dataSource.filterSettings;\n        for (var len = 0, lnt = filterSettings.length; len < lnt; len++) {\n            if (filterSettings[len].name === fieldName) {\n                filterSettings.splice(len, 1);\n                break;\n            }\n        }\n    };\n    PivotButton.prototype.updateDropIndicator = function (e) {\n        if (this.parent.isDragging) {\n            removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(this.parentElement.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            var element = closest(e.target, '.' + cls.PIVOT_BUTTON_WRAPPER_CLASS);\n            addClass([element.querySelector('.' + cls.DROP_INDICATOR_CLASS)], cls.INDICATOR_HOVER_CLASS);\n        }\n    };\n    PivotButton.prototype.wireEvent = function (element, axis) {\n        EventHandler.add(element, 'mouseover', this.updateDropIndicator, this);\n        if (['filters', 'values'].indexOf(axis) === -1) {\n            EventHandler.add(element.querySelector('.' + cls.SORT_CLASS), 'click', this.updateSorting, this);\n        }\n        if (axis !== 'values') {\n            EventHandler.add(element.querySelector('.' + cls.FILTER_COMMON_CLASS), 'click', this.updateFiltering, this);\n        }\n        if (axis === 'values' && element.querySelector('.' + cls.AXISFIELD_ICON_CLASS) !== null) {\n            EventHandler.add(element.querySelector('.' + cls.AXISFIELD_ICON_CLASS), 'click', this.createMenuOption, this);\n        }\n        EventHandler.add(element.querySelector('.' + cls.REMOVE_CLASS), 'click', this.removeButton, this);\n    };\n    PivotButton.prototype.unWireEvent = function (element, axis) {\n        EventHandler.remove(element, 'mouseover', this.updateDropIndicator);\n        if (['filters', 'values'].indexOf(axis) === -1) {\n            EventHandler.remove(element.querySelector('.' + cls.SORT_CLASS), 'click', this.updateSorting);\n        }\n        if (axis !== 'values') {\n            EventHandler.remove(element.querySelector('.' + cls.FILTER_COMMON_CLASS), 'click', this.updateFiltering);\n        }\n        if (axis === 'values' && element.querySelector('.' + cls.AXISFIELD_ICON_CLASS) !== null) {\n            EventHandler.remove(element.querySelector('.' + cls.AXISFIELD_ICON_CLASS), 'click', this.createMenuOption);\n        }\n        EventHandler.remove(element.querySelector('.' + cls.REMOVE_CLASS), 'click', this.removeButton);\n    };\n    /**\n     * @hidden\n     */\n    PivotButton.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.renderPivotButton\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.pivotButtonUpdate, this.handlers.load, this);\n    };\n    /**\n     * @hidden\n     */\n    PivotButton.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.pivotButtonUpdate, this.handlers.load);\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @return {void}\n     * @hidden\n     */\n    PivotButton.prototype.destroy = function () {\n        this.menuOption.destroy();\n        this.removeEventListener();\n    };\n    // To update button text\n    PivotButton.prototype.updateButtontext = function (fieldName) {\n        var filterCount = this.parent.engineModule.fieldList[fieldName].filter.length;\n        var filterType = this.parent.engineModule.fieldList[fieldName].filterType;\n        var memLen = this.parent.engineModule.fieldList[fieldName].dateMember.length;\n        var filterMem;\n        var firstNode = this.parent.engineModule.fieldList[fieldName].filter[0];\n        if (filterType === \"include\") {\n            if (filterCount === 1) {\n                filterMem = firstNode;\n            }\n            else if (filterCount > 1) {\n                if (filterCount === memLen) {\n                    filterMem = this.parent.localeObj.getConstant('all');\n                }\n                else {\n                    filterMem = this.parent.localeObj.getConstant('multipleItems');\n                }\n            }\n        }\n        else if (filterType === \"exclude\") {\n            if (filterCount === 1) {\n                if (memLen === 2) {\n                    if (firstNode !== this.parent.engineModule.fieldList[fieldName].dateMember[0].actualText) {\n                        filterMem = firstNode;\n                    }\n                    else {\n                        filterMem = this.parent.engineModule.fieldList[fieldName].dateMember[0].actualText;\n                    }\n                }\n                else {\n                    filterMem = this.parent.localeObj.getConstant('multipleItems');\n                }\n            }\n            else if (filterCount > 1) {\n                var j = void 0;\n                var allNodes = Object.keys(this.parent.engineModule.fieldList[fieldName].members);\n                var filteredItems = this.parent.engineModule.fieldList[fieldName].filter;\n                if (filterCount === (allNodes.length - 1)) {\n                    loop: for (j = 0; j < allNodes.length; j++) {\n                        var test = allNodes[j];\n                        var x = filteredItems.indexOf(test);\n                        if (x === -1) {\n                            filterMem = allNodes[j];\n                            break loop;\n                        }\n                    }\n                }\n                else {\n                    filterMem = this.parent.localeObj.getConstant('multipleItems');\n                }\n            }\n        }\n        else {\n            filterMem = this.parent.localeObj.getConstant('all');\n        }\n        return filterMem;\n    };\n    return PivotButton;\n}());\nexport { PivotButton };\n","import * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { PivotButton } from '../../common/actions/pivot-button';\n/**\n * Module to render Axis Fields\n */\n/** @hidden */\nvar AxisFieldRenderer = /** @class */ (function () {\n    /** Constructor for render module */\n    function AxisFieldRenderer(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the pivot button rendering\n     * @returns void\n     * @private\n     */\n    AxisFieldRenderer.prototype.render = function () {\n        this.pivotButton = new PivotButton(this.parent);\n        this.createPivotButtons();\n    };\n    AxisFieldRenderer.prototype.createPivotButtons = function () {\n        var rows = this.parent.dataSource.rows;\n        var columns = this.parent.dataSource.columns;\n        var values = this.parent.dataSource.values;\n        var filters = this.parent.dataSource.filters;\n        var fields = [rows, columns, values, filters];\n        var parentElement = this.parent.dialogRenderer.parentElement;\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-filters')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-filters').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-rows')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-rows').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-columns')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-columns').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        if (parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-values')) {\n            parentElement.querySelector('.' + cls.FIELD_LIST_CLASS + '-values').querySelector('.' + cls.AXIS_CONTENT_CLASS).innerHTML = '';\n        }\n        var axis = ['rows', 'columns', 'values', 'filters'];\n        for (var len = 0, lnt = fields.length; len < lnt; len++) {\n            if (fields[len]) {\n                var args = {\n                    field: fields[len],\n                    axis: axis[len].toString()\n                };\n                this.parent.notify(events.pivotButtonUpdate, args);\n            }\n        }\n    };\n    return AxisFieldRenderer;\n}());\nexport { AxisFieldRenderer };\n","import { DialogRenderer } from '../renderer/dialog-renderer';\nimport { TreeViewRenderer } from '../renderer/tree-renderer';\nimport { AxisTableRenderer } from '../renderer/axis-table-renderer';\nimport { AxisFieldRenderer } from './axis-field-renderer';\n/**\n * Module to render Pivot Table component\n */\n/** @hidden */\nvar Render = /** @class */ (function () {\n    /** Constructor for render module */\n    function Render(parent) {\n        this.parent = parent;\n        this.parent.dialogRenderer = new DialogRenderer(this.parent);\n        this.parent.treeViewModule = new TreeViewRenderer(this.parent);\n        this.parent.axisTableModule = new AxisTableRenderer(this.parent);\n        this.parent.axisFieldModule = new AxisFieldRenderer(this.parent);\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns void\n     * @private\n     */\n    Render.prototype.render = function () {\n        this.parent.dialogRenderer.render();\n        if (!this.parent.isAdaptive) {\n            this.parent.treeViewModule.render();\n        }\n        this.parent.axisTableModule.render();\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, Event, Component, Internationalization, extend } from '@syncfusion/ej2-base';\nimport { L10n, remove, addClass, Browser, Complex } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, removeClass, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PivotEngine } from '../../base/engine';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { PivotCommon } from '../../common/base/pivot-common';\nimport { Render } from '../renderer/renderer';\nimport { DataSource } from '../../pivotview/model/dataSource';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\n/**\n * Represents the PivotFieldList component.\n * ```html\n * <div id=\"pivotfieldlist\"></div>\n * <script>\n *  var pivotfieldlistObj = new PivotFieldList({ });\n *  pivotfieldlistObj.appendTo(\"#pivotfieldlist\");\n * </script>\n * ```\n */\nvar PivotFieldList = /** @class */ (function (_super) {\n    __extends(PivotFieldList, _super);\n    /**\n     * Constructor for creating the widget\n     * @param  {PivotFieldListModel} options?\n     * @param  {string|HTMLButtonElement} element?\n     */\n    function PivotFieldList(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /** @hidden */\n        _this.isRequiredUpdate = true;\n        _this.engineModule = new PivotEngine(_this.dataSource, '');\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for control rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    PivotFieldList.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.allowCalculatedField) {\n            modules.push({ args: [this], member: 'calculatedfield' });\n        }\n        return modules;\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    PivotFieldList.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice;\n        this.globalize = new Internationalization(this.locale);\n        this.renderModule = new Render(this);\n        this.defaultLocale = {\n            staticFieldList: 'Pivot Field List',\n            fieldList: 'Field List',\n            dropFilterPrompt: 'Drop filter here',\n            dropColPrompt: 'Drop column here',\n            dropRowPrompt: 'Drop row here',\n            dropValPrompt: 'Drop value here',\n            addPrompt: 'Add field here',\n            adaptiveFieldHeader: 'Choose field',\n            centerHeader: 'Drag fields between axes below:',\n            add: 'add',\n            drag: 'Drag',\n            filter: 'Filter',\n            filtered: 'Filtered',\n            sort: 'Sort',\n            remove: 'Remove',\n            filters: 'Filters',\n            rows: 'Rows',\n            columns: 'Columns',\n            values: 'Values',\n            calculatedField: 'Calculated Field',\n            createCalculatedField: 'Create Calculated Field',\n            fieldName: 'Enter the field name',\n            error: 'Error',\n            invalidFormula: 'Invalid formula.',\n            dropText: 'Example: (\"Sum(Order_Count)\" + \"Sum(In_Stock)\") * 250',\n            dropTextMobile: 'Add fields and edit formula here.',\n            dropAction: 'Calculated field cannot be place in any other region except value axis.',\n            search: 'Search',\n            close: 'Close',\n            cancel: 'Cancel',\n            delete: 'Delete',\n            alert: 'Alert',\n            warning: 'Warning',\n            ok: 'OK',\n            sum: 'Sum',\n            average: 'Average',\n            count: 'Count',\n            min: 'Min',\n            max: 'Max',\n            allFields: 'All Fields',\n            formula: 'Formula',\n            fieldExist: 'A field already exists in this name. Please enter a different name.',\n            confirmText: 'A calculation field already exists in this name. Do you want to replace it?',\n            noMatches: 'No matches',\n            format: 'Summaries values by',\n            edit: 'Edit',\n            clear: 'Clear',\n            formulaField: 'Drag and drop fields to formula',\n            dragField: 'Drag field to formula',\n            clearFilter: 'Clear',\n            by: 'by',\n            enterValue: 'Enter value',\n            chooseDate: 'Enter date',\n            all: 'All',\n            multipleItems: 'Multiple items',\n            /* tslint:disable */\n            Equals: 'Equals',\n            DoesNotEquals: 'Does Not Equal',\n            BeginWith: 'Begins With',\n            DoesNotBeginWith: 'Does Not Begin With',\n            EndsWith: 'Ends With',\n            DoesNotEndsWith: 'Does Not End With',\n            Contains: 'Contains',\n            DoesNotContains: 'Does Not Contain',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqualTo: 'Greater Than Or Equal To',\n            LessThan: 'Less Than',\n            LessThanOrEqualTo: 'Less Than Or Equal To',\n            Between: 'Between',\n            NotBetween: 'Not Between',\n            Before: 'Before',\n            BeforeOrEqualTo: 'Before Or Equal To',\n            After: 'After',\n            AfterOrEqualTo: 'After Or Equal To',\n            member: 'Member',\n            label: 'Label',\n            date: 'Date',\n            value: 'Value',\n            labelTextContent: 'Show the items for which the label',\n            dateTextContent: 'Show the items for which the date',\n            valueTextContent: 'Show the items for which',\n            And: 'and',\n            Sum: 'Sum',\n            Count: 'Count',\n            DistinctCount: 'Distinct Count',\n            Product: 'Product',\n            Avg: 'Avg',\n            Min: 'Min',\n            Max: 'Max',\n            Index: 'Index',\n            SampleStDev: 'Sample StDev',\n            PopulationStDev: 'Population StDev',\n            SampleVar: 'Sample Var',\n            PopulationVar: 'Population Var',\n            RunningTotals: 'Running Totals',\n            DifferenceFrom: 'Difference From',\n            PercentageOfDifferenceFrom: '% of Difference From',\n            PercentageOfGrandTotal: '% of Grand Total',\n            PercentageOfColumnTotal: '% of Column Total',\n            PercentageOfRowTotal: '% of Row Total',\n            PercentageOfParentTotal: '% of Parent Total',\n            PercentageOfParentColumnTotal: '% of Parent Column Total',\n            PercentageOfParentRowTotal: '% of Parent Row Total',\n            /* tslint:enable */\n            apply: 'APPLY',\n            valueFieldSettings: 'Value field settings',\n            sourceName: 'Field name :',\n            sourceCaption: 'Field caption :',\n            summarizeValuesBy: 'Summarize values by :',\n            baseField: 'Base field :',\n            baseItem: 'Base item :',\n            example: 'e.g:',\n            editorDataLimitMsg: ' more items. Search to refine further.',\n            deferLayoutUpdate: 'Defer Layout Update'\n        };\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.isDragging = false;\n        this.captionData = [];\n        this.wireEvent();\n    };\n    /**\n     * Initialize the control rendering\n     * @returns void\n     * @private\n     */\n    PivotFieldList.prototype.render = function () {\n        this.trigger(events.load, { 'dataSource': this.dataSource });\n        addClass([this.element], cls.ROOT);\n        if (this.enableRtl) {\n            addClass([this.element], cls.RTL);\n        }\n        else {\n            removeClass([this.element], cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClass([this.element], cls.DEVICE);\n        }\n        else {\n            removeClass([this.element], cls.DEVICE);\n        }\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass);\n        }\n        this.notify(events.initialLoad, {});\n    };\n    /**\n     * Binding events to the Pivot Field List element.\n     * @hidden\n     */\n    PivotFieldList.prototype.wireEvent = function () {\n        this.on(events.initialLoad, this.generateData, this);\n        this.on(events.dataReady, this.fieldListRender, this);\n    };\n    /**\n     * Unbinding events from the element on widget destroy.\n     * @hidden\n     */\n    PivotFieldList.prototype.unWireEvent = function () {\n        if (this.pivotGridModule && this.pivotGridModule.isDestroyed) {\n            return;\n        }\n        this.off(events.initialLoad, this.generateData);\n        this.off(events.dataReady, this.fieldListRender);\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    PivotFieldList.prototype.getPersistData = function () {\n        var keyEntity = ['dataSource'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * Get component name.\n     * @returns string\n     * @private\n     */\n    PivotFieldList.prototype.getModuleName = function () {\n        return 'pivotfieldlist';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    PivotFieldList.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'locale':\n                    this.refresh();\n                    break;\n                case 'enableRtl':\n                    if (this.enableRtl) {\n                        addClass([this.element], cls.RTL);\n                    }\n                    else {\n                        removeClass([this.element], cls.RTL);\n                    }\n                    requireRefresh = true;\n                    break;\n            }\n            if (requireRefresh) {\n                this.fieldListRender();\n            }\n        }\n    };\n    PivotFieldList.prototype.generateData = function () {\n        this.pivotFieldList = {};\n        if (this.dataSource && this.dataSource.data) {\n            this.trigger(events.enginePopulating, { 'dataSource': this.dataSource });\n            var pageSettings = this.pivotGridModule ? this.pivotGridModule.pageSettings : undefined;\n            var isDrillThrough = this.pivotGridModule ?\n                (this.pivotGridModule.allowDrillThrough || this.pivotGridModule.editSettings.allowEditing) : true;\n            var enableValueSorting = this.pivotGridModule ? this.pivotGridModule.enableValueSorting : undefined;\n            this.engineModule.renderEngine(this.dataSource, '', undefined, pageSettings, enableValueSorting, isDrillThrough);\n            this.pivotFieldList = this.engineModule.fieldList;\n            var eventArgs = {\n                pivotFieldList: this.pivotFieldList,\n                pivotValues: this.engineModule.pivotValues\n            };\n            this.trigger(events.enginePopulated, eventArgs);\n        }\n        this.notify(events.dataReady, {});\n        this.trigger(events.dataBound);\n    };\n    PivotFieldList.prototype.fieldListRender = function () {\n        this.element.innerHTML = '';\n        if (this.renderMode === 'Popup' && this.dialogRenderer.fieldListDialog && !this.dialogRenderer.fieldListDialog.isDestroyed) {\n            this.dialogRenderer.fieldListDialog.destroy();\n            remove(document.getElementById(this.element.id + '_Wrapper'));\n        }\n        this.renderModule.render();\n        this.fieldListSpinnerElement = this.renderMode === 'Popup' ?\n            this.dialogRenderer.fieldListDialog.element : this.element.querySelector('.e-pivotfieldlist-wrapper');\n        createSpinner({ target: this.fieldListSpinnerElement }, this.createElement);\n        var args = {\n            pivotEngine: this.engineModule,\n            dataSource: this.dataSource,\n            id: this.element.id,\n            element: document.getElementById(this.element.id + '_Wrapper'),\n            moduleName: this.getModuleName(),\n            enableRtl: this.enableRtl,\n            isAdaptive: this.isAdaptive,\n            renderMode: this.renderMode,\n            localeObj: this.localeObj\n        };\n        this.pivotCommon = new PivotCommon(args);\n        this.pivotCommon.control = this;\n        if (this.allowDeferLayoutUpdate) {\n            this.clonedDataSource = extend({}, this.dataSource, null, true);\n            this.clonedFieldList = extend({}, this.pivotFieldList, null, true);\n        }\n    };\n    PivotFieldList.prototype.getFieldCaption = function (dataSource) {\n        this.getFields(dataSource);\n        if (this.captionData.length > 0) {\n            var lnt = this.captionData.length;\n            while (lnt--) {\n                if (this.captionData[lnt]) {\n                    for (var _i = 0, _a = this.captionData[lnt]; _i < _a.length; _i++) {\n                        var item = _a[_i];\n                        var obj = item.properties;\n                        if (obj) {\n                            if (this.engineModule.fieldList[obj.name] && obj.caption) {\n                                this.engineModule.fieldList[obj.name].caption = obj.caption;\n                            }\n                            else {\n                                this.engineModule.fieldList[obj.name].caption = obj.name;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    PivotFieldList.prototype.getFields = function (dataSource) {\n        var fieldSets = extend({}, dataSource, null, true);\n        var obj = fieldSets.properties;\n        this.captionData = [obj.rows, obj.columns, obj.values, obj.filters];\n    };\n    /**\n     * Updates the PivotEngine using dataSource from Pivot Field List component.\n     * @method updateDataSource\n     * @return {void}\n     * @hidden\n     */\n    PivotFieldList.prototype.updateDataSource = function (isTreeViewRefresh, isEngineRefresh) {\n        if (this.pivotGridModule) {\n            showSpinner(this.pivotGridModule.element);\n        }\n        showSpinner(this.fieldListSpinnerElement);\n        if (isNullOrUndefined(isEngineRefresh)) {\n            var pageSettings = this.pivotGridModule ? this.pivotGridModule.pageSettings : undefined;\n            var enableValueSorting = this.pivotGridModule ? this.pivotGridModule.enableValueSorting : undefined;\n            var isDrillThrough = this.pivotGridModule ?\n                (this.pivotGridModule.allowDrillThrough || this.pivotGridModule.editSettings.allowEditing) : true;\n            this.engineModule.renderEngine(this.dataSource, '', this.pivotFieldList, pageSettings, enableValueSorting, isDrillThrough);\n            this.getFieldCaption(this.dataSource);\n        }\n        else {\n            this.axisFieldModule.render();\n            this.isRequiredUpdate = false;\n        }\n        var eventArgs = {\n            dataSource: this.dataSource,\n            pivotFieldList: this.pivotFieldList,\n            pivotValues: this.engineModule.pivotValues\n        };\n        this.trigger(events.enginePopulated, eventArgs);\n        this.pivotCommon.engineModule = this.engineModule;\n        this.pivotCommon.dataSource = this.dataSource;\n        this.pivotFieldList = this.engineModule.fieldList;\n        if (!isTreeViewRefresh && this.treeViewModule.fieldTable && !this.isAdaptive) {\n            this.notify(events.treeViewUpdate, {});\n        }\n        if (this.isRequiredUpdate) {\n            if (this.allowDeferLayoutUpdate) {\n                this.clonedDataSource = extend({}, this.dataSource, null, true);\n                this.clonedFieldList = extend({}, this.pivotFieldList, null, true);\n            }\n            this.updateView(this.pivotGridModule);\n        }\n        else if (this.renderMode === 'Popup' && this.allowDeferLayoutUpdate) {\n            this.pivotGridModule.engineModule = this.engineModule;\n            this.pivotGridModule.\n                setProperties({ dataSource: this.dataSource.properties }, true);\n            this.pivotGridModule.notify(events.uiUpdate, this);\n            hideSpinner(this.fieldListSpinnerElement);\n        }\n        this.isRequiredUpdate = true;\n        if (!this.pivotGridModule) {\n            hideSpinner(this.fieldListSpinnerElement);\n        }\n        else {\n            this.pivotGridModule.fieldListSpinnerElement = this.fieldListSpinnerElement;\n        }\n    };\n    /**\n     * Updates the Pivot Field List component using dataSource from PivotView component.\n     * @method updateControl\n     * @return {void}\n     * @hidden\n     */\n    PivotFieldList.prototype.update = function (control) {\n        if (control) {\n            this.setProperties({ dataSource: control.dataSource }, true);\n            this.engineModule = control.engineModule;\n            this.pivotFieldList = control.engineModule.fieldList;\n            if (this.renderMode === 'Popup') {\n                this.pivotGridModule = control;\n            }\n            this.getFieldCaption(control.dataSource);\n            this.pivotCommon.engineModule = this.engineModule;\n            this.pivotCommon.dataSource = this.dataSource;\n            this.pivotCommon.control = control;\n            if (this.treeViewModule.fieldTable && !this.isAdaptive) {\n                this.notify(events.treeViewUpdate, {});\n            }\n            this.axisFieldModule.render();\n            if (this.renderMode === 'Fixed' && this.allowDeferLayoutUpdate) {\n                this.clonedDataSource = extend({}, this.dataSource, null, true);\n                this.clonedFieldList = extend({}, this.pivotFieldList, null, true);\n            }\n        }\n    };\n    /**\n     * Updates the PivotView component using dataSource from Pivot Field List component.\n     * @method refreshTargetControl\n     * @return {void}\n     * @hidden\n     */\n    PivotFieldList.prototype.updateView = function (control) {\n        if (control) {\n            control.setProperties({ dataSource: this.dataSource }, true);\n            control.engineModule = this.engineModule;\n            control.pivotValues = this.engineModule.pivotValues;\n            control.dataBind();\n        }\n    };\n    /**\n     * Called internally to trigger populate event.\n     * @hidden\n     */\n    PivotFieldList.prototype.triggerPopulateEvent = function () {\n        var eventArgs = {\n            dataSource: this.dataSource,\n            pivotFieldList: this.pivotFieldList,\n            pivotValues: this.engineModule.pivotValues\n        };\n        this.trigger(events.enginePopulated, eventArgs);\n    };\n    /**\n     * Destroys the Field Table component.\n     * @method destroy\n     * @return {void}\n     */\n    PivotFieldList.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.treeViewModule) {\n            this.treeViewModule.destroy();\n        }\n        if (this.pivotButtonModule) {\n            this.pivotButtonModule.destroy();\n        }\n        if (this.allowDeferLayoutUpdate && this.dialogRenderer &&\n            this.dialogRenderer.deferUpdateCheckBox && !this.dialogRenderer.deferUpdateCheckBox.isDestroyed) {\n            this.dialogRenderer.deferUpdateCheckBox.destroy();\n        }\n        _super.prototype.destroy.call(this);\n        this.element.innerHTML = '';\n        removeClass([this.element], cls.ROOT);\n        removeClass([this.element], cls.RTL);\n        removeClass([this.element], cls.DEVICE);\n        if (this.renderMode === 'Popup') {\n            if (this.dialogRenderer.fieldListDialog && !this.dialogRenderer.fieldListDialog.isDestroyed) {\n                this.dialogRenderer.fieldListDialog.destroy();\n            }\n            if (document.getElementById(this.element.id + '_Wrapper')) {\n                remove(document.getElementById(this.element.id + '_Wrapper'));\n            }\n        }\n    };\n    __decorate([\n        Complex({}, DataSource)\n    ], PivotFieldList.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property('Popup')\n    ], PivotFieldList.prototype, \"renderMode\", void 0);\n    __decorate([\n        Property()\n    ], PivotFieldList.prototype, \"target\", void 0);\n    __decorate([\n        Property('')\n    ], PivotFieldList.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotFieldList.prototype, \"allowCalculatedField\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotFieldList.prototype, \"showValuesButton\", void 0);\n    __decorate([\n        Property(false)\n    ], PivotFieldList.prototype, \"allowDeferLayoutUpdate\", void 0);\n    __decorate([\n        Property(1000)\n    ], PivotFieldList.prototype, \"maxNodeLimitInMemberEditor\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"enginePopulating\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"enginePopulated\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"onFieldDropped\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], PivotFieldList.prototype, \"destroyed\", void 0);\n    PivotFieldList = __decorate([\n        NotifyPropertyChanges\n    ], PivotFieldList);\n    return PivotFieldList;\n}(Component));\nexport { PivotFieldList };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { Droppable, createElement, extend, remove, addClass, closest } from '@syncfusion/ej2-base';\nimport { prepend, append, KeyboardEvents, removeClass } from '@syncfusion/ej2-base';\nimport { Button, RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport * as cls from '../../common/base/css-constant';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../../common/base/constant';\nimport { Accordion } from '@syncfusion/ej2-navigations';\n/**\n * Module to render Calculated Field Dialog\n */\nvar COUNT = 'Count';\nvar AVG = 'Avg';\nvar MIN = 'Min';\nvar MAX = 'Max';\nvar SUM = 'Sum';\nvar DISTINCTCOUNT = 'DistinctCount';\nvar PRODUCT = 'Product';\nvar STDEV = 'SampleStDev';\nvar STDEVP = 'PopulationStDev';\nvar VAR = 'SampleVar';\nvar VARP = 'PopulationVar';\nvar CALC = 'CalculatedField';\nvar AGRTYPE = 'AggregateType';\n/** @hidden */\nvar CalculatedField = /** @class */ (function () {\n    /** Constructor for calculatedfield module */\n    function CalculatedField(parent) {\n        this.parent = parent;\n        this.existingReport = null;\n        this.parent.calculatedFieldModule = this;\n        this.removeEventListener();\n        this.addEventListener();\n        this.parentID = this.parent.element.id;\n        this.dialog = null;\n        this.inputObj = null;\n        this.treeObj = null;\n        this.droppable = null;\n        this.menuObj = null;\n        this.newFields = null;\n        this.isFieldExist = true;\n        this.formulaText = null;\n        this.fieldText = null;\n        this.isEdit = false;\n        this.currentFieldName = null;\n        this.confirmPopUp = null;\n    }\n    /**\n     * To get module name.\n     * @returns string\n     */\n    CalculatedField.prototype.getModuleName = function () {\n        return 'calculatedfield';\n    };\n    CalculatedField.prototype.keyActionHandler = function (e) {\n        var node = e.currentTarget.querySelector('.e-hover.e-node-focus');\n        if (node) {\n            switch (e.action) {\n                case 'moveRight':\n                    this.displayMenu(node.previousSibling);\n                    break;\n                case 'enter':\n                    var field = node.getAttribute('data-field');\n                    var type = node.getAttribute('data-type');\n                    var dropField = this.dialog.element.querySelector('#' + this.parentID + 'droppable');\n                    if (dropField.value === '') {\n                        if (type === CALC) {\n                            dropField.value = node.getAttribute('data-uid');\n                        }\n                        else {\n                            dropField.value = '\"' + type + '(' + field + ')' + '\"';\n                        }\n                    }\n                    else if (dropField.value !== '') {\n                        if (type === CALC) {\n                            dropField.value = dropField.value + node.getAttribute('data-uid');\n                        }\n                        else {\n                            dropField.value = dropField.value + '\"' + type + '(' + field + ')' + '\"';\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Trigger while click treeview icon.\n     * @param  {MouseEvent} e\n     * @returns void\n     */\n    CalculatedField.prototype.fieldClickHandler = function (e) {\n        var node = e.event.target.parentElement;\n        if (e.event.target.classList.contains(cls.FORMAT) ||\n            e.event.target.classList.contains(cls.CALC_EDIT) ||\n            e.event.target.classList.contains(cls.CALC_EDITED)) {\n            this.displayMenu(node.parentElement);\n        }\n    };\n    /**\n     * To display context menu.\n     * @param  {HTMLElement} node\n     * @returns void\n     */\n    CalculatedField.prototype.displayMenu = function (node) {\n        if (document.querySelector('.' + this.parentID + 'calculatedmenu') !== null &&\n            node.querySelector('.e-list-icon').classList.contains(cls.ICON) &&\n            !node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDITED) &&\n            !node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDIT) && node.tagName === 'LI') {\n            this.menuObj.close();\n            this.curMenu = node.querySelector('.' + cls.LIST_TEXT_CLASS);\n            this.openContextMenu();\n        }\n        else if (node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDIT) && node.tagName === 'LI') {\n            addClass([node.querySelector('.e-list-icon')], cls.CALC_EDITED);\n            removeClass([node.querySelector('.e-list-icon')], cls.CALC_EDIT);\n            node.querySelector('.' + cls.CALC_EDITED).setAttribute('title', this.parent.localeObj.getConstant('clear'));\n            this.isEdit = true;\n            this.currentFieldName = node.getAttribute('data-field');\n            this.inputObj.value = node.getAttribute('data-caption');\n            this.dialog.element.querySelector('.' + cls.CALCINPUT).value = node.getAttribute('data-caption');\n            document.querySelector('#' + this.parentID + 'droppable').value = node.getAttribute('data-uid');\n        }\n        else if (node.querySelector('.e-list-icon').classList.contains(cls.CALC_EDITED) && node.tagName === 'LI') {\n            addClass([node.querySelector('.e-list-icon')], cls.CALC_EDIT);\n            removeClass([node.querySelector('.e-list-icon')], cls.CALC_EDITED);\n            node.querySelector('.' + cls.CALC_EDIT).setAttribute('title', this.parent.localeObj.getConstant('edit'));\n            this.isEdit = false;\n            this.inputObj.value = '';\n            this.dialog.element.querySelector('.' + cls.CALCINPUT).value = '';\n            document.querySelector('#' + this.parentID + 'droppable').value = '';\n        }\n    };\n    /**\n     * To set position for context menu.\n     * @returns void\n     */\n    CalculatedField.prototype.openContextMenu = function () {\n        var pos = this.curMenu.getBoundingClientRect();\n        if (this.parent.enableRtl) {\n            this.menuObj.open(pos.top + 30, pos.left - 100);\n        }\n        else {\n            this.menuObj.open(pos.top + 30, pos.left + 150);\n        }\n    };\n    /**\n     * Triggers while select menu.\n     * @param  {MenuEventArgs} menu\n     * @returns void\n     */\n    CalculatedField.prototype.selectContextMenu = function (menu) {\n        if (menu.element.textContent !== null) {\n            var field = closest(this.curMenu, '.e-list-item').getAttribute('data-caption');\n            closest(this.curMenu, '.e-list-item').setAttribute('data-type', menu.element.textContent);\n            this.curMenu.textContent = field + ' (' + menu.element.textContent + ')';\n            addClass([this.curMenu.parentElement.parentElement], ['e-node-focus', 'e-hover']);\n            this.curMenu.parentElement.parentElement.setAttribute('tabindex', '-1');\n            this.curMenu.parentElement.parentElement.focus();\n        }\n    };\n    /**\n     * To create context menu.\n     * @returns void\n     */\n    CalculatedField.prototype.createMenu = function () {\n        var menuItems = [\n            { text: COUNT, },\n            { text: AVG },\n            { text: MIN },\n            { text: MAX },\n            { text: SUM },\n            { text: DISTINCTCOUNT, },\n            { text: PRODUCT },\n            { text: STDEV },\n            { text: STDEVP },\n            { text: VAR },\n            { text: VARP }\n        ];\n        var menuOptions = {\n            cssClass: this.parentID + 'calculatedmenu',\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.beforeMenuOpen.bind(this),\n            select: this.selectContextMenu.bind(this)\n        };\n        this.parent.element.appendChild(createElement('ul', {\n            id: this.parentID + 'contextmenu'\n        }));\n        this.menuObj = new Menu(menuOptions);\n        this.menuObj.appendTo('#' + this.parentID + 'contextmenu');\n    };\n    /**\n     * Triggers while click OK button.\n     * @returns void\n     */\n    CalculatedField.prototype.applyFormula = function () {\n        var currentObj = this;\n        var isExist = false;\n        removeClass([document.getElementById(this.parentID + 'ddlelement')], cls.EMPTY_FIELD);\n        Object.keys(currentObj.parent.engineModule.fieldList).forEach(function (key, index) {\n            if (currentObj.inputObj.value && currentObj.inputObj.value === key &&\n                currentObj.parent.engineModule.fieldList[key].aggregateType !== 'CalculatedField') {\n                isExist = true;\n            }\n        });\n        if (isExist) {\n            currentObj.parent.pivotCommon.errorDialog.createErrorDialog(currentObj.parent.localeObj.getConstant('error'), currentObj.parent.localeObj.getConstant('fieldExist'));\n            return;\n        }\n        this.newFields = extend([], this.parent.dataSource.calculatedFieldSettings, null, true);\n        this.existingReport = extend({}, this.parent.dataSource, null, true);\n        var report = this.parent.dataSource;\n        var dropField = document.querySelector('#' + this.parentID + 'droppable');\n        if (this.inputObj.value !== null && this.inputObj.value !== '' && dropField.value !== '') {\n            var field = {\n                name: this.inputObj.value,\n                type: 'CalculatedField'\n            };\n            var cField = {\n                name: this.inputObj.value,\n                formula: dropField.value\n            };\n            this.isFieldExist = true;\n            if (!this.isEdit) {\n                for (var i = 0; i < report.values.length; i++) {\n                    if (report.values[i].type === CALC && report.values[i].name === field.name) {\n                        for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                            if (report.calculatedFieldSettings[j].name === field.name) {\n                                this.createConfirmDialog(currentObj.parent.localeObj.getConstant('alert'), currentObj.parent.localeObj.getConstant('confirmText'));\n                                return;\n                            }\n                        }\n                        this.isFieldExist = false;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < report.values.length; i++) {\n                    if (report.values[i].type === CALC && this.currentFieldName !== null &&\n                        report.values[i].name === this.currentFieldName && this.isEdit) {\n                        for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                            if (report.calculatedFieldSettings[j].name === this.currentFieldName) {\n                                report.values[i].caption = this.inputObj.value;\n                                report.calculatedFieldSettings[j].formula = dropField.value;\n                                this.parent.engineModule.fieldList[this.currentFieldName].caption = this.inputObj.value;\n                                this.isFieldExist = false;\n                            }\n                        }\n                    }\n                }\n            }\n            if (this.isFieldExist) {\n                report.values.push(field);\n                report.calculatedFieldSettings.push(cField);\n            }\n            this.addFormula(report, field.name);\n        }\n        else {\n            if (this.inputObj.value === null || this.inputObj.value === '') {\n                addClass([document.getElementById(this.parentID + 'ddlelement')], cls.EMPTY_FIELD);\n                document.getElementById(this.parentID + 'ddlelement').focus();\n            }\n            else {\n                this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant('error'), this.parent.localeObj.getConstant('invalidFormula'));\n            }\n        }\n    };\n    CalculatedField.prototype.addFormula = function (report, field) {\n        try {\n            this.parent.setProperties({ dataSource: report }, true);\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.allowDeferLayoutUpdate) {\n                this.parent.isRequiredUpdate = false;\n            }\n            this.parent.updateDataSource(false);\n            this.isEdit = false;\n            if (this.dialog) {\n                this.dialog.close();\n            }\n            else {\n                this.inputObj.value = '';\n                this.formulaText = null;\n                this.fieldText = null;\n                this.parent.\n                    dialogRenderer.parentElement.querySelector('.' + cls.CALCINPUT).value = '';\n                this.parent.\n                    dialogRenderer.parentElement.querySelector('#' + this.parentID + 'droppable').value = '';\n            }\n        }\n        catch (exception) {\n            if (this.parent.engineModule.fieldList[field]) {\n                delete this.parent.engineModule.fieldList[field];\n            }\n            this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant('error'), this.parent.localeObj.getConstant('invalidFormula'));\n            this.parent.setProperties({ dataSource: this.existingReport }, true);\n            this.parent.updateDataSource(false);\n        }\n    };\n    /**\n     * To get treeview data\n     * @param  {PivotGrid|PivotFieldList} parent\n     * @returns Object\n     */\n    CalculatedField.prototype.getFieldListData = function (parent) {\n        var fields = [];\n        Object.keys(parent.engineModule.fieldList).forEach(function (key) {\n            var type = null;\n            if (parent.engineModule.fieldList[key].type === 'string' || parent.engineModule.fieldList[key].type === 'include' ||\n                parent.engineModule.fieldList[key].type === 'exclude') {\n                type = COUNT;\n            }\n            else {\n                type = parent.engineModule.fieldList[key].aggregateType !== undefined ?\n                    parent.engineModule.fieldList[key].aggregateType : SUM;\n            }\n            fields.push({\n                index: parent.engineModule.fieldList[key].index,\n                name: parent.engineModule.fieldList[key].caption + ' (' + type + ')',\n                type: type,\n                icon: cls.FORMAT + ' ' + cls.ICON,\n                formula: parent.engineModule.fieldList[key].formula,\n                field: key,\n                caption: parent.engineModule.fieldList[key].caption ? parent.engineModule.fieldList[key].caption : key\n            });\n        });\n        return fields;\n    };\n    /**\n     * Triggers before menu opens.\n     * @param  {BeforeOpenCloseMenuEventArgs} args\n     * @returns void\n     */\n    CalculatedField.prototype.beforeMenuOpen = function (args) {\n        args.element.style.zIndex = (this.dialog.zIndex + 1).toString();\n        args.element.style.display = 'inline';\n    };\n    /**\n     * Trigger while drop node in formula field.\n     * @param  {DragAndDropEventArgs} args\n     * @returns void\n     */\n    CalculatedField.prototype.fieldDropped = function (args) {\n        args.cancel = true;\n        var field = args.draggedNode.getAttribute('data-field');\n        var type = args.draggedNode.getAttribute('data-type');\n        var dropField = this.dialog.element.querySelector('#' + this.parentID + 'droppable');\n        if (args.target.id === this.parentID + 'droppable' && dropField.value === '') {\n            if (type === CALC) {\n                dropField.value = args.draggedNodeData.id.toString();\n            }\n            else {\n                dropField.value = '\"' + type + '(' + field + ')' + '\"';\n            }\n            dropField.focus();\n        }\n        else if (args.target.id === (this.parentID + 'droppable') && dropField.value !== '') {\n            var textCovered = void 0;\n            var cursorPos = dropField.selectionStart;\n            var currentValue = dropField.value;\n            var textBeforeText = currentValue.substring(0, cursorPos);\n            var textAfterText = currentValue.substring(cursorPos, currentValue.length);\n            if (type === CALC) {\n                textCovered = textBeforeText + args.draggedNodeData.id.toString();\n                dropField.value = textBeforeText + args.draggedNodeData.id.toString() + textAfterText;\n            }\n            else {\n                textCovered = textBeforeText + '\"' + type + '(' + field + ')' + '\"';\n                dropField.value = textBeforeText + '\"' + type + '(' + field + ')' + '\"' + textAfterText;\n            }\n            dropField.focus();\n            dropField.setSelectionRange(textCovered.length, textCovered.length);\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    /**\n     * To create dialog.\n     * @returns void\n     */\n    CalculatedField.prototype.createDialog = function () {\n        if (document.querySelector('#' + this.parentID + 'calculateddialog') !== null) {\n            remove(document.querySelector('#' + this.parentID + 'calculateddialog'));\n        }\n        this.parent.element.appendChild(createElement('div', {\n            id: this.parentID + 'calculateddialog',\n            className: cls.CALCDIALOG\n        }));\n        this.dialog = new Dialog({\n            allowDragging: true,\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.applyFormula.bind(this),\n                    buttonModel: {\n                        content: this.parent.localeObj.getConstant('ok'),\n                        isPrimary: true\n                    }\n                },\n                {\n                    click: this.cancelClick.bind(this),\n                    buttonModel: {\n                        content: this.parent.localeObj.getConstant('cancel')\n                    }\n                }\n            ],\n            close: this.closeDialog.bind(this),\n            beforeOpen: this.beforeOpen.bind(this),\n            animationSettings: { effect: 'Zoom' },\n            width: '25%',\n            isModal: false,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            showCloseIcon: true,\n            header: this.parent.localeObj.getConstant('createCalculatedField'),\n            target: document.body\n        });\n        this.dialog.appendTo('#' + this.parentID + 'calculateddialog');\n    };\n    CalculatedField.prototype.cancelClick = function () {\n        this.dialog.close();\n        this.isEdit = false;\n    };\n    CalculatedField.prototype.beforeOpen = function (args) {\n        this.dialog.element.querySelector('.e-dlg-header').\n            setAttribute('title', this.parent.localeObj.getConstant('createCalculatedField'));\n    };\n    CalculatedField.prototype.closeDialog = function (args) {\n        if (this.parent.getModuleName() === 'pivotfieldlist') {\n            this.parent.axisFieldModule.render();\n            if (this.parent.renderMode !== 'Fixed') {\n                addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n                this.parent.dialogRenderer.fieldListDialog.show();\n            }\n        }\n        this.treeObj.destroy();\n        this.dialog.destroy();\n        this.newFields = null;\n        remove(document.getElementById(this.parentID + 'calculateddialog'));\n        remove(document.querySelector('.' + this.parentID + 'calculatedmenu'));\n    };\n    /**\n     * To render dialog elements.\n     * @returns void\n     */\n    CalculatedField.prototype.renderDialogElements = function () {\n        var outerDiv = createElement('div', { id: this.parentID + 'outerDiv', className: cls.CALCOUTERDIV });\n        if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.\n            dialogRenderer.parentElement.querySelector('.' + cls.FORMULA) !== null && this.parent.isAdaptive) {\n            var accordDiv = createElement('div', { id: this.parentID + 'accordDiv', className: cls.CALCACCORD });\n            outerDiv.appendChild(accordDiv);\n            var buttonDiv = createElement('div', { id: this.parentID + 'buttonDiv', className: cls.CALCBUTTONDIV });\n            var addBtn = createElement('button', {\n                id: this.parentID + 'addBtn', innerHTML: this.parent.localeObj.getConstant('add'),\n                className: cls.CALCADDBTN\n            });\n            var cancelBtn = createElement('button', {\n                id: this.parentID + 'cancelBtn', innerHTML: this.parent.localeObj.getConstant('cancel'),\n                className: cls.CALCCANCELBTN\n            });\n            buttonDiv.appendChild(cancelBtn);\n            buttonDiv.appendChild(addBtn);\n            outerDiv.appendChild(buttonDiv);\n        }\n        else {\n            var inputDiv = createElement('div', { id: this.parentID + 'outerDiv', className: cls.CALCINPUTDIV });\n            var inputObj = createElement('input', {\n                id: this.parentID + 'ddlelement',\n                attrs: { 'type': 'text', 'tabindex': '1' },\n                className: cls.CALCINPUT\n            });\n            inputDiv.appendChild(inputObj);\n            outerDiv.appendChild(inputDiv);\n            if (!this.parent.isAdaptive) {\n                var fieldTitle = createElement('div', {\n                    className: cls.PIVOT_ALL_FIELD_TITLE_CLASS,\n                    innerHTML: this.parent.localeObj.getConstant('formulaField')\n                });\n                outerDiv.appendChild(fieldTitle);\n            }\n            var wrapDiv = createElement('div', { id: this.parentID + 'control_wrapper', className: cls.TREEVIEWOUTER });\n            wrapDiv.appendChild(createElement('div', { id: this.parentID + 'tree', className: cls.TREEVIEW }));\n            outerDiv.appendChild(wrapDiv);\n            if (!this.parent.isAdaptive) {\n                var formulaTitle = createElement('div', {\n                    className: cls.PIVOT_FORMULA_TITLE_CLASS,\n                    innerHTML: this.parent.localeObj.getConstant('formula')\n                });\n                outerDiv.appendChild(formulaTitle);\n            }\n            var dropDiv = createElement('textarea', {\n                id: this.parentID + 'droppable',\n                className: cls.FORMULA,\n                attrs: {\n                    'placeholder': this.parent.isAdaptive ? this.parent.localeObj.getConstant('dropTextMobile') :\n                        this.parent.localeObj.getConstant('dropText')\n                }\n            });\n            outerDiv.appendChild(dropDiv);\n            if (this.parent.isAdaptive) {\n                var buttonDiv = createElement('div', { id: this.parentID + 'buttonDiv', className: cls.CALCBUTTONDIV });\n                var okBtn = createElement('button', {\n                    id: this.parentID + 'okBtn', innerHTML: this.parent.localeObj.getConstant('apply'),\n                    className: cls.CALCOKBTN\n                });\n                buttonDiv.appendChild(okBtn);\n                outerDiv.appendChild(buttonDiv);\n            }\n        }\n        return outerDiv;\n    };\n    /**\n     * To create calculated field adaptive layout.\n     * @returns void\n     */\n    CalculatedField.prototype.renderAdaptiveLayout = function () {\n        if (document.querySelector('#' + this.parentID + 'droppable')) {\n            this.formulaText = document.querySelector('#' + this.parentID + 'droppable').value;\n            this.fieldText = this.inputObj.value;\n        }\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * To create treeview.\n     * @returns void\n     */\n    CalculatedField.prototype.createTreeView = function () {\n        this.treeObj = new TreeView({\n            fields: { dataSource: this.getFieldListData(this.parent), id: 'formula', text: 'name', iconCss: 'icon' },\n            allowDragAndDrop: true,\n            enableRtl: this.parent.enableRtl,\n            nodeCollapsing: this.nodeCollapsing.bind(this),\n            nodeDragStart: this.dragStart.bind(this),\n            nodeClicked: this.fieldClickHandler.bind(this),\n            nodeDragStop: this.fieldDropped.bind(this),\n            drawNode: this.drawTreeNode.bind(this),\n            sortOrder: 'Ascending'\n        });\n        this.treeObj.appendTo('#' + this.parentID + 'tree');\n    };\n    CalculatedField.prototype.nodeCollapsing = function (args) {\n        args.cancel = true;\n    };\n    CalculatedField.prototype.dragStart = function (args) {\n        if (args.event.target.classList.contains(cls.DRAG_CLASS)) {\n            var dragItem = document.querySelector('.e-drag-item.e-treeview');\n            addClass([dragItem], cls.PIVOTCALC);\n            dragItem.style.zIndex = (this.dialog.zIndex + 1).toString();\n            dragItem.style.display = 'inline';\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    /**\n     * Trigger before treeview text append.\n     * @param  {DrawNodeEventArgs} args\n     * @returns void\n     */\n    CalculatedField.prototype.drawTreeNode = function (args) {\n        var field = args.nodeData.field;\n        args.node.setAttribute('data-field', field);\n        args.node.setAttribute('data-caption', args.nodeData.caption);\n        args.node.setAttribute('data-type', args.nodeData.type);\n        var dragElement = createElement('span', {\n            attrs: { 'tabindex': '-1', 'aria-disabled': 'false', 'title': this.parent.localeObj.getConstant('dragField') },\n            className: cls.ICON + ' e-drag'\n        });\n        prepend([dragElement], args.node.querySelector('.' + cls.TEXT_CONTENT_CLASS));\n        append([args.node.querySelector('.' + cls.FORMAT)], args.node.querySelector('.' + cls.TEXT_CONTENT_CLASS));\n        if (this.parent.engineModule.fieldList[field].type !== 'number' &&\n            this.parent.engineModule.fieldList[field].aggregateType !== CALC) {\n            removeClass([args.node.querySelector('.' + cls.FORMAT)], cls.ICON);\n        }\n        else {\n            args.node.querySelector('.' + cls.FORMAT).setAttribute('title', this.parent.localeObj.getConstant('format'));\n        }\n        if (this.parent.engineModule.fieldList[field].aggregateType === CALC) {\n            args.node.querySelector('.' + cls.FORMAT).setAttribute('title', this.parent.localeObj.getConstant('edit'));\n            addClass([args.node.querySelector('.' + cls.FORMAT)], cls.CALC_EDIT);\n            removeClass([args.node.querySelector('.' + cls.FORMAT)], cls.FORMAT);\n        }\n    };\n    /**\n     * To create radio buttons.\n     * @param  {string} key\n     * @returns HTMLElement\n     */\n    CalculatedField.prototype.createTypeContainer = function (key) {\n        var wrapDiv = createElement('div', { id: this.parentID + 'control_wrapper', className: cls.TREEVIEWOUTER });\n        var type = [SUM, COUNT, AVG, MIN, MAX, DISTINCTCOUNT, PRODUCT, STDEV, STDEVP, VAR, VARP];\n        for (var i = 0; i < type.length; i++) {\n            var input = createElement('input', {\n                id: this.parentID + 'radio' + key + type[i],\n                attrs: { 'type': 'radio', 'data-ftxt': key },\n                className: cls.CALCRADIO\n            });\n            wrapDiv.appendChild(input);\n        }\n        return wrapDiv;\n    };\n    /**\n     * To get Accordion Data.\n     * @param  {PivotView | PivotFieldList} parent\n     * @returns AccordionItemModel\n     */\n    CalculatedField.prototype.getAccordionData = function (parent) {\n        var _this = this;\n        var data = [];\n        Object.keys(parent.engineModule.fieldList).forEach(function (key, index) {\n            data.push({\n                header: '<input id=' + _this.parentID + '_' + index + ' class=' + cls.CALCCHECK + ' type=\"checkbox\" data-field=' +\n                    key + ' data-caption=' + _this.parent.engineModule.fieldList[key].caption + ' data-type=' +\n                    _this.parent.engineModule.fieldList[key].type + '/>',\n                content: parent.engineModule.fieldList[key].aggregateType === CALC ||\n                    _this.parent.engineModule.fieldList[key].type !== 'number' ? '' : _this.createTypeContainer(key).outerHTML\n            });\n        });\n        return data;\n    };\n    /**\n     * To render mobile layout.\n     * @param  {Tab} tabObj\n     * @returns void\n     */\n    CalculatedField.prototype.renderMobileLayout = function (tabObj) {\n        tabObj.items[4].content = this.renderDialogElements().outerHTML;\n        tabObj.dataBind();\n        var cancelBtn = new Button({ cssClass: cls.FLAT, isPrimary: true });\n        cancelBtn.appendTo('#' + this.parentID + 'cancelBtn');\n        if (cancelBtn.element) {\n            cancelBtn.element.onclick = this.cancelBtnClick.bind(this);\n        }\n        if (this.parent.\n            dialogRenderer.parentElement.querySelector('.' + cls.FORMULA) !== null && this.parent.isAdaptive) {\n            var okBtn = new Button({ cssClass: cls.FLAT + ' ' + cls.OUTLINE_CLASS, isPrimary: true });\n            okBtn.appendTo('#' + this.parentID + 'okBtn');\n            this.inputObj = new MaskedTextBox({\n                placeholder: this.parent.localeObj.getConstant('fieldName')\n            });\n            this.inputObj.appendTo('#' + this.parentID + 'ddlelement');\n            if (this.formulaText !== null && this.parent.\n                dialogRenderer.parentElement.querySelector('#' + this.parentID + 'droppable') !== null) {\n                var drop = this.parent.\n                    dialogRenderer.parentElement.querySelector('#' + this.parentID + 'droppable');\n                drop.value = this.formulaText;\n            }\n            if (this.fieldText !== null && this.parent.\n                dialogRenderer.parentElement.querySelector('.' + cls.CALCINPUT) !== null) {\n                this.parent.\n                    dialogRenderer.parentElement.querySelector('.' + cls.CALCINPUT).value = this.fieldText;\n                this.inputObj.value = this.fieldText;\n            }\n            if (okBtn.element) {\n                okBtn.element.onclick = this.applyFormula.bind(this);\n            }\n        }\n        else if (this.parent.isAdaptive) {\n            var accordion = new Accordion({\n                items: this.getAccordionData(this.parent),\n                enableRtl: this.parent.enableRtl,\n                expanding: this.accordionExpand.bind(this),\n            });\n            var addBtn = new Button({ cssClass: cls.FLAT, isPrimary: true });\n            addBtn.appendTo('#' + this.parentID + 'addBtn');\n            accordion.appendTo('#' + this.parentID + 'accordDiv');\n            Object.keys(this.parent.engineModule.fieldList).forEach(this.updateType.bind(this));\n            if (addBtn.element) {\n                addBtn.element.onclick = this.addBtnClick.bind(this);\n            }\n        }\n    };\n    CalculatedField.prototype.accordionExpand = function (args) {\n        var _this = this;\n        if (args.element.querySelectorAll('.e-radio-wrapper').length === 0) {\n            Object.keys(this.parent.engineModule.fieldList).forEach(function (key) {\n                var type = [SUM, COUNT, AVG, MIN, MAX, DISTINCTCOUNT, PRODUCT, STDEV, STDEVP, VAR, VARP];\n                var radiobutton;\n                if (key === args.element.querySelector('[data-field').getAttribute('data-field')) {\n                    for (var i = 0; i < type.length; i++) {\n                        radiobutton = new RadioButton({\n                            label: type[i],\n                            name: AGRTYPE + key,\n                            change: _this.onChange.bind(_this),\n                        });\n                        radiobutton.appendTo('#' + _this.parentID + 'radio' + key + type[i]);\n                    }\n                }\n            });\n        }\n    };\n    CalculatedField.prototype.onChange = function (args) {\n        var type = args.event.target.parentElement.querySelector('.e-label').\n            innerText;\n        var field = args.event.target.closest('.e-acrdn-item').\n            querySelector('[data-field').getAttribute('data-caption');\n        args.event.target.\n            closest('.e-acrdn-item').querySelector('.e-label').\n            innerText = field + ' (' + type + ')';\n        args.event.target.closest('.e-acrdn-item').\n            querySelector('[data-type').setAttribute('data-type', type);\n    };\n    CalculatedField.prototype.updateType = function (key, index) {\n        var type = null;\n        if (this.parent.engineModule.fieldList[key].type === 'string' ||\n            this.parent.engineModule.fieldList[key].type === 'include' ||\n            this.parent.engineModule.fieldList[key].type === 'exclude') {\n            type = COUNT;\n        }\n        else {\n            type = this.parent.engineModule.fieldList[key].aggregateType !== undefined ?\n                this.parent.engineModule.fieldList[key].aggregateType : SUM;\n        }\n        var checkbox = new CheckBox({\n            label: this.parent.engineModule.fieldList[key].caption + ' (' + type + ')'\n        });\n        checkbox.appendTo('#' + this.parentID + '_' + index);\n        document.querySelector('#' + this.parentID + '_' + index).setAttribute('data-field', key);\n        document.querySelector('#' + this.parentID + '_' + index).setAttribute('data-type', type);\n    };\n    /**\n     * Trigger while click cancel button.\n     * @returns void\n     */\n    CalculatedField.prototype.cancelBtnClick = function () {\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * Trigger while click add button.\n     * @returns void\n     */\n    CalculatedField.prototype.addBtnClick = function () {\n        var node = document.querySelectorAll('.e-accordion .e-check');\n        var fieldText = '';\n        var field = null;\n        var type = null;\n        for (var i = 0; i < node.length; i++) {\n            field = node[i].parentElement.querySelector('[data-field]').getAttribute('data-field');\n            type = node[i].parentElement.querySelector('[data-field]').getAttribute('data-type');\n            if (type.indexOf(CALC) === -1) {\n                fieldText = fieldText + ('\"' + type + '(' + field + ')' + '\"');\n            }\n            else {\n                for (var j = 0; j < this.parent.dataSource.calculatedFieldSettings.length; j++) {\n                    if (this.parent.dataSource.calculatedFieldSettings[j].name === field) {\n                        fieldText = fieldText + this.parent.dataSource.calculatedFieldSettings[j].formula;\n                        break;\n                    }\n                }\n            }\n        }\n        this.formulaText = this.formulaText !== null ? (this.formulaText + fieldText) : fieldText;\n        this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement);\n    };\n    /**\n     * To create calculated field dialog elements.\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.createCalculatedFieldDialog = function () {\n        if (this.parent.isAdaptive && this.parent.getModuleName() === 'pivotfieldlist') {\n            this.renderAdaptiveLayout();\n        }\n        else if (!this.parent.isAdaptive) {\n            this.renderDialogLayout();\n            this.dialog.element.style.top = parseInt(this.dialog.element.style.top, 10) < 0 ? '0px' : this.dialog.element.style.top;\n        }\n    };\n    /**\n     * To create calculated field desktop layout.\n     * @returns void\n     */\n    CalculatedField.prototype.renderDialogLayout = function () {\n        this.newFields = extend([], this.parent.dataSource.calculatedFieldSettings, null, true);\n        this.createDialog();\n        this.dialog.content = this.renderDialogElements();\n        this.dialog.refresh();\n        this.inputObj = new MaskedTextBox({\n            placeholder: this.parent.localeObj.getConstant('fieldName')\n        });\n        this.inputObj.appendTo('#' + this.parentID + 'ddlelement');\n        this.createTreeView();\n        this.createMenu();\n        this.droppable = new Droppable(this.dialog.element.querySelector('#' + this.parentID + 'droppable'));\n        this.keyboardEvents = new KeyboardEvents(this.parent.calculatedFieldModule.dialog.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: { moveRight: 'rightarrow', enter: 'enter' },\n            eventName: 'keydown'\n        });\n    };\n    /**\n     * Creates the error dialog for the unexpected action done.\n     * @method createConfirmDialog\n     * @return {void}\n     * @hidden\n     */\n    CalculatedField.prototype.createConfirmDialog = function (title, description) {\n        var errorDialog = createElement('div', {\n            id: this.parentID + '_ErrorDialog',\n            className: cls.ERROR_DIALOG_CLASS\n        });\n        this.parent.element.appendChild(errorDialog);\n        this.confirmPopUp = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: false,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            width: 'auto',\n            height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.replaceFormula.bind(this),\n                    buttonModel: {\n                        cssClass: cls.OK_BUTTON_CLASS + ' ' + cls.OUTLINE_CLASS,\n                        content: this.parent.localeObj.getConstant('ok'), isPrimary: true\n                    }\n                },\n                {\n                    click: this.removeErrorDialog.bind(this),\n                    buttonModel: {\n                        cssClass: cls.CANCEL_BUTTON_CLASS,\n                        content: this.parent.localeObj.getConstant('cancel'), isPrimary: true\n                    }\n                }\n            ],\n            header: title,\n            content: description,\n            isModal: true,\n            visible: true,\n            closeOnEscape: true,\n            target: document.body,\n            close: this.removeErrorDialog.bind(this)\n        });\n        this.confirmPopUp.appendTo(errorDialog);\n    };\n    CalculatedField.prototype.replaceFormula = function () {\n        var report = this.parent.dataSource;\n        var dropField = document.querySelector('#' + this.parentID + 'droppable');\n        for (var i = 0; i < report.values.length; i++) {\n            if (report.values[i].type === CALC && report.values[i].name === this.inputObj.value) {\n                for (var j = 0; j < report.calculatedFieldSettings.length; j++) {\n                    if (report.calculatedFieldSettings[j].name === this.inputObj.value) {\n                        report.calculatedFieldSettings[j].formula = dropField.value;\n                    }\n                }\n            }\n        }\n        this.addFormula(report, this.inputObj.value);\n        this.removeErrorDialog();\n    };\n    CalculatedField.prototype.removeErrorDialog = function () {\n        if (document.getElementById(this.parentID + '_ErrorDialog')) {\n            remove(document.getElementById(this.parentID + '_ErrorDialog').parentElement);\n        }\n    };\n    /**\n     * To add event listener.\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initCalculatedField, this.createCalculatedFieldDialog, this);\n    };\n    /**\n     * To remove event listener.\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initCalculatedField, this.createCalculatedFieldDialog);\n    };\n    /**\n     * To destroy the calculated field dialog\n     * @returns void\n     * @hidden\n     */\n    CalculatedField.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return CalculatedField;\n}());\nexport { CalculatedField };\n","import * as events from '../../common/base/constant';\nimport * as cls from '../base/css-constant';\nimport { PivotFieldList } from '../../pivotfieldlist/base/field-list';\nimport { createElement, setStyleAttribute, formatUnit, prepend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { CalculatedField } from '../../common/calculatedfield/calculated-field';\nPivotFieldList.Inject(CalculatedField);\n/**\n * Module for Field List rendering\n */\n/** @hidden */\nvar FieldList = /** @class */ (function () {\n    /** Constructor for Field List module */\n    function FieldList(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    FieldList.prototype.getModuleName = function () {\n        return 'fieldlist';\n    };\n    FieldList.prototype.initiateModule = function () {\n        this.element = createElement('div', {\n            id: this.parent.element.id + '_PivotFieldList',\n            styles: 'position:' + (this.parent.enableRtl ? 'static' : 'absolute') + ';height:0;width:' + this.parent.element.style.width\n        });\n        this.parent.element.parentElement.setAttribute('id', 'ContainerWrapper');\n        this.parent.element.parentElement.appendChild(this.element);\n        this.parent.element.parentElement.appendChild(this.parent.element);\n        this.parent.pivotFieldListModule = new PivotFieldList({\n            dataSource: {\n                rows: [],\n                columns: [],\n                values: [],\n                filters: []\n            },\n            allowDeferLayoutUpdate: this.parent.allowDeferLayoutUpdate,\n            renderMode: 'Popup',\n            allowCalculatedField: this.parent.allowCalculatedField,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            target: this.parent.element.parentElement\n        });\n        this.parent.pivotFieldListModule.appendTo('#' + this.element.id);\n    };\n    FieldList.prototype.updateControl = function () {\n        if (this.element) {\n            prepend([this.element], this.parent.element);\n            if (this.parent.grid && this.parent.showGroupingBar && this.parent.groupingBarModule) {\n                clearTimeout(this.timeOutObj);\n                this.timeOutObj = setTimeout(this.update.bind(this));\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    removeClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n                }\n                else {\n                    addClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n                }\n            }\n            setStyleAttribute(this.element, {\n                width: formatUnit(this.parent.element.offsetWidth)\n            });\n        }\n        this.parent.pivotFieldListModule.update(this.parent);\n    };\n    FieldList.prototype.update = function () {\n        if (this.parent.grid && this.parent.grid.element) {\n            var actWidth = this.parent.grid.element.offsetWidth < 400 ? 400 : this.parent.grid.element.offsetWidth;\n            setStyleAttribute(this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS), {\n                left: formatUnit(this.parent.enableRtl ?\n                    -Math.abs((actWidth) -\n                        this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth) :\n                    (actWidth) -\n                        this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth)\n            });\n            if (this.parent.enableRtl) {\n                addClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n            }\n            else {\n                removeClass([this.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], 'e-fieldlist-left');\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    FieldList.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.initiateModule,\n            update: this.updateControl\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initSubComponent, this.handlers.load, this);\n        this.parent.on(events.uiUpdate, this.handlers.update, this);\n    };\n    /**\n     * @hidden\n     */\n    FieldList.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initSubComponent, this.handlers.load);\n        this.parent.off(events.uiUpdate, this.handlers.update);\n    };\n    /**\n     * To destroy the Field List\n     * @return {void}\n     * @hidden\n     */\n    FieldList.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.parent.pivotFieldListModule) {\n            this.parent.pivotFieldListModule.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return FieldList;\n}());\nexport { FieldList };\n","import * as events from '../../common/base/constant';\nimport { PivotCommon } from '../../common/base/pivot-common';\nimport { Browser } from '@syncfusion/ej2-base';\n/**\n * Module for PivotCommon rendering\n */\n/** @hidden */\nvar Common = /** @class */ (function () {\n    /** Constructor for Common module */\n    function Common(parent) {\n        this.parent = parent;\n        this.parent.commonModule = this;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Common.prototype.getModuleName = function () {\n        return 'common';\n    };\n    Common.prototype.initiateCommonModule = function () {\n        if (!this.parent.pivotCommon) {\n            var args = {\n                pivotEngine: this.parent.engineModule,\n                dataSource: this.parent.dataSource.properties ?\n                    this.parent.dataSource.properties : this.parent.dataSource,\n                id: this.parent.element.id,\n                element: this.parent.element,\n                moduleName: this.parent.getModuleName(),\n                enableRtl: this.parent.enableRtl,\n                isAdaptive: Browser.isDevice,\n                renderMode: 'Popup',\n                localeObj: this.parent.localeObj\n            };\n            this.parent.pivotCommon = new PivotCommon(args);\n        }\n        else {\n            this.parent.pivotCommon.element = this.parent.element;\n            this.parent.pivotCommon.engineModule = this.parent.engineModule;\n            this.parent.pivotCommon.parentID = this.parent.element.id;\n            this.parent.pivotCommon.dataSource = this.parent.dataSource.properties ?\n                this.parent.dataSource.properties : this.parent.dataSource;\n            this.parent.pivotCommon.moduleName = this.parent.getModuleName();\n            this.parent.pivotCommon.enableRtl = this.parent.enableRtl;\n            this.parent.pivotCommon.isAdaptive = Browser.isDevice;\n            this.parent.pivotCommon.renderMode = 'Popup';\n            this.parent.pivotCommon.localeObj = this.parent.localeObj;\n        }\n        this.parent.pivotCommon.control = this.parent;\n    };\n    /**\n     * @hidden\n     */\n    Common.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.initiateCommonModule\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.handlers.load, this);\n    };\n    /**\n     * @hidden\n     */\n    Common.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.handlers.load);\n    };\n    /**\n     * To destroy the groupingbar\n     * @return {void}\n     * @hidden\n     */\n    Common.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.parent.pivotCommon) {\n            this.parent.pivotCommon.destroy();\n        }\n    };\n    return Common;\n}());\nexport { Common };\n","import { PivotButton } from '../actions/pivot-button';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { createElement, prepend } from '@syncfusion/ej2-base';\n/**\n * Module to render Axis Fields\n */\n/** @hidden */\nvar AxisFields = /** @class */ (function () {\n    /** Constructor for render module */\n    function AxisFields(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the pivot button rendering\n     * @returns void\n     * @private\n     */\n    AxisFields.prototype.render = function () {\n        this.pivotButton = new PivotButton(this.parent);\n        this.createPivotButtons();\n        var pivotButtons = [].slice.call(this.parent.element.querySelector('.' + cls.GROUP_ROW_CLASS)\n            .querySelectorAll('.' + cls.PIVOT_BUTTON_WRAPPER_CLASS));\n        var vlen = pivotButtons.length;\n        for (var j = 0; j < vlen; j++) {\n            var indentWidth = 24;\n            var indentDiv = createElement('span', {\n                className: 'e-indent-div',\n                styles: 'width:' + j * indentWidth + 'px'\n            });\n            prepend([indentDiv], pivotButtons[j]);\n        }\n    };\n    AxisFields.prototype.createPivotButtons = function () {\n        var fields = [this.parent.dataSource.rows, this.parent.dataSource.columns, this.parent.dataSource.values, this.parent.dataSource.filters];\n        this.parent.element.querySelector('.' + cls.GROUP_ROW_CLASS).innerHTML = '';\n        this.parent.element.querySelector('.' + cls.GROUP_COLUMN_CLASS).innerHTML = '';\n        this.parent.element.querySelector('.' + cls.GROUP_VALUE_CLASS).innerHTML = '';\n        this.parent.element.querySelector('.' + cls.GROUP_FILTER_CLASS).innerHTML = '';\n        var axis = ['rows', 'columns', 'values', 'filters'];\n        var count = axis.length;\n        for (var i = 0, lnt = fields.length; i < lnt; i++) {\n            if (fields[i]) {\n                var args = {\n                    field: fields[i],\n                    axis: axis[i].toString()\n                };\n                this.parent.notify(events.pivotButtonUpdate, args);\n            }\n        }\n    };\n    return AxisFields;\n}());\nexport { AxisFields };\n","import { createElement, prepend, remove, Droppable, setStyleAttribute, removeClass } from '@syncfusion/ej2-base';\nimport { EventHandler, Touch, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, formatUnit } from '@syncfusion/ej2-base';\nimport { PivotView } from '../../pivotview/base/pivotview';\nimport { Common } from '../actions/common';\nimport * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { AxisFields } from './axis-field-renderer';\nPivotView.Inject(Common);\n/**\n * Module for GroupingBar rendering\n */\n/** @hidden */\nvar GroupingBar = /** @class */ (function () {\n    /** Constructor for GroupingBar module */\n    function GroupingBar(parent) {\n        this.parent = parent;\n        this.parent.groupingBarModule = this;\n        this.addEventListener();\n        this.parent.axisFieldModule = new AxisFields(this.parent);\n        this.touchObj = new Touch(this.parent.element, {\n            tapHold: this.tapHoldHandler.bind(this)\n        });\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    GroupingBar.prototype.getModuleName = function () {\n        return 'grouping';\n    };\n    GroupingBar.prototype.renderLayout = function () {\n        this.groupingTable = createElement('div', { className: cls.GROUPING_BAR_CLASS });\n        this.leftAxisPanel = createElement('div', { className: cls.LEFT_AXIS_PANEL_CLASS });\n        this.rightAxisPanel = createElement('div', { className: cls.RIGHT_AXIS_PANEL_CLASS });\n        var rowAxisPanel = createElement('div', { className: cls.AXIS_ROW_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper' });\n        var columnAxisPanel = createElement('div', {\n            className: cls.AXIS_COLUMN_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper'\n        });\n        var valueAxisPanel = createElement('div', {\n            className: cls.AXIS_VALUE_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper'\n        });\n        var filterAxisPanel = createElement('div', {\n            className: cls.AXIS_FILTER_CLASS + ' ' + cls.AXIS_ICON_CLASS + 'wrapper'\n        });\n        this.rowPanel = createElement('div', { className: cls.GROUP_ROW_CLASS + ' ' + cls.ROW_AXIS_CLASS });\n        this.columnPanel = createElement('div', { className: cls.GROUP_COLUMN_CLASS + ' ' + cls.COLUMN_AXIS_CLASS });\n        this.valuePanel = createElement('div', { className: cls.GROUP_VALUE_CLASS + ' ' + cls.VALUE_AXIS_CLASS });\n        this.filterPanel = createElement('div', { className: cls.GROUP_FILTER_CLASS + ' ' + cls.FILTER_AXIS_CLASS });\n        rowAxisPanel.appendChild(this.rowPanel);\n        columnAxisPanel.appendChild(this.columnPanel);\n        valueAxisPanel.appendChild(this.valuePanel);\n        filterAxisPanel.appendChild(this.filterPanel);\n        this.rowAxisPanel = rowAxisPanel;\n        this.columnAxisPanel = columnAxisPanel;\n        this.valueAxisPanel = valueAxisPanel;\n        this.filterAxisPanel = filterAxisPanel;\n        this.leftAxisPanel.appendChild(valueAxisPanel);\n        this.leftAxisPanel.appendChild(rowAxisPanel);\n        this.rightAxisPanel.appendChild(filterAxisPanel);\n        this.rightAxisPanel.appendChild(columnAxisPanel);\n        this.groupingTable.appendChild(this.leftAxisPanel);\n        this.groupingTable.appendChild(this.rightAxisPanel);\n        var axisPanels = [this.rowPanel, this.columnPanel, this.valuePanel, this.filterPanel];\n        for (var _i = 0, axisPanels_1 = axisPanels; _i < axisPanels_1.length; _i++) {\n            var element = axisPanels_1[_i];\n            new Droppable(element, {});\n            this.unWireEvent(element);\n            this.wireEvent(element);\n        }\n    };\n    GroupingBar.prototype.appendToElement = function () {\n        if (this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n            remove(this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS));\n        }\n        if (this.parent.isAdaptive) {\n            this.leftAxisPanel.style.minWidth = '180px';\n            this.valuePanel.style.minWidth = '180px';\n        }\n        if (this.parent.firstColWidth) {\n            this.leftAxisPanel.style.minWidth = 'auto';\n            this.valuePanel.style.minWidth = 'auto';\n        }\n        this.filterPanel.removeAttribute('style');\n        this.columnPanel.removeAttribute('style');\n        this.rowPanel.removeAttribute('style');\n        this.filterPanel.removeAttribute('style');\n        var emptyRowCount = Object.keys(this.parent.engineModule.headerContent).length;\n        if (emptyRowCount) {\n            var emptyHeader = this.parent.element.querySelector('.e-frozenheader').querySelector('.e-columnheader');\n            addClass([emptyHeader], 'e-row');\n            emptyHeader.removeAttribute('style');\n            addClass([emptyHeader.querySelector('.e-headercell')], 'e-group-row');\n            emptyHeader.querySelector('.e-group-row').appendChild(this.rowAxisPanel);\n            emptyHeader.querySelector('.e-group-row').querySelector('.e-headercelldiv').style.display = 'none';\n            emptyHeader.querySelector('.e-group-row').querySelector('.e-sortfilterdiv').style.display = 'none';\n        }\n        prepend([this.groupingTable], this.parent.element);\n        setStyleAttribute(this.groupingTable, { width: formatUnit(this.parent.grid.width) });\n        this.groupingTable.style.minWidth = '400px';\n        this.parent.axisFieldModule.render();\n        this.setGridRowWidth();\n        var colGroupElement = this.parent.element.querySelector('.e-frozenheader').querySelector('colgroup').children[0];\n        var rightAxisPanelWidth = formatUnit(this.groupingTable.offsetWidth - parseInt(colGroupElement.style.width, 10));\n        setStyleAttribute(this.valuePanel, { width: colGroupElement.style.width });\n        setStyleAttribute(this.rightAxisPanel, { width: rightAxisPanelWidth });\n        var rightPanelHeight = (this.valuePanel.offsetHeight / 2);\n        if (rightPanelHeight > this.columnPanel.offsetHeight) {\n            setStyleAttribute(this.filterPanel, { height: formatUnit(rightPanelHeight) });\n            setStyleAttribute(this.columnPanel, { height: formatUnit(rightPanelHeight + 1) });\n        }\n        var topLeftHeight = this.parent.element.querySelector('.e-headercontent').offsetHeight;\n        setStyleAttribute(this.rowPanel, {\n            height: topLeftHeight + 'px'\n        });\n        if (this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler')) {\n            this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler').style.height =\n                topLeftHeight + 'px';\n        }\n        var colRows = [].slice.call(this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('tr'));\n        var columnRows = colRows.filter(function (trCell) {\n            return (trCell.childNodes.length > 0);\n        });\n        var colHeight = topLeftHeight / columnRows.length;\n        for (var _i = 0, columnRows_1 = columnRows; _i < columnRows_1.length; _i++) {\n            var element = columnRows_1[_i];\n            setStyleAttribute(element, { 'height': colHeight + 'px' });\n            var rowHeader = [].slice.call(element.querySelectorAll('.e-rhandler'));\n            for (var _a = 0, rowHeader_1 = rowHeader; _a < rowHeader_1.length; _a++) {\n                var rhElement = rowHeader_1[_a];\n                setStyleAttribute(rhElement, { 'height': colHeight + 'px' });\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.refreshUI = function () {\n        setStyleAttribute(this.groupingTable, { width: formatUnit(this.parent.grid.width) });\n        this.groupingTable.style.minWidth = '400px';\n        var colGroupElement = this.parent.element.querySelector('.e-frozenheader').querySelector('colgroup').children[0];\n        var rightAxisWidth = formatUnit(this.groupingTable.offsetWidth - parseInt(colGroupElement.style.width, 10));\n        setStyleAttribute(this.valuePanel, { width: colGroupElement.style.width });\n        setStyleAttribute(this.rightAxisPanel, { width: rightAxisWidth });\n        if (this.parent.showFieldList && this.parent.pivotFieldListModule && this.parent.pivotFieldListModule.element) {\n            clearTimeout(this.timeOutObj);\n            this.timeOutObj = setTimeout(this.alignIcon.bind(this));\n        }\n        if (!this.parent.grid.element.querySelector('.e-group-row')) {\n            var emptyRowHeader = this.parent.element.querySelector('.e-frozenheader').querySelector('.e-columnheader');\n            addClass([emptyRowHeader], 'e-row');\n            addClass([emptyRowHeader.querySelector('.e-headercell')], 'e-group-row');\n            emptyRowHeader.querySelector('.e-group-row').appendChild(this.rowAxisPanel);\n            setStyleAttribute(emptyRowHeader.querySelector('.e-group-row').querySelector('.e-headercelldiv'), {\n                display: 'none'\n            });\n            setStyleAttribute(emptyRowHeader.querySelector('.e-group-row').querySelector('.e-sortfilterdiv'), {\n                display: 'none'\n            });\n            var groupHeight = this.parent.element.querySelector('.e-headercontent').offsetHeight;\n            setStyleAttribute(this.rowPanel, {\n                height: groupHeight + 'px'\n            });\n            if (this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler')) {\n                this.parent.element.querySelector('.e-frozenheader').querySelector('.e-rhandler').style.height =\n                    groupHeight + 'px';\n            }\n            var colRowElements = [].slice.call(this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('tr'));\n            var columnRows = colRowElements.filter(function (trCell) {\n                return (trCell.childNodes.length > 0);\n            });\n            var colHeight = groupHeight / columnRows.length;\n            for (var _i = 0, columnRows_2 = columnRows; _i < columnRows_2.length; _i++) {\n                var element = columnRows_2[_i];\n                setStyleAttribute(element, { 'height': colHeight + 'px' });\n                var rowHeader = [].slice.call(element.querySelectorAll('.e-rhandler'));\n                for (var _a = 0, rowHeader_2 = rowHeader; _a < rowHeader_2.length; _a++) {\n                    var handlerElement = rowHeader_2[_a];\n                    setStyleAttribute(handlerElement, { 'height': colHeight + 'px' });\n                }\n            }\n        }\n    };\n    GroupingBar.prototype.alignIcon = function () {\n        var element = this.parent.pivotFieldListModule.element;\n        var actWidth = this.parent.grid.element.offsetWidth < 400 ? 400 : this.parent.grid.element.offsetWidth;\n        setStyleAttribute(element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS), {\n            left: formatUnit(this.parent.enableRtl ?\n                -Math.abs((actWidth) -\n                    element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth) :\n                (actWidth) -\n                    element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS).offsetWidth)\n        });\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.setGridRowWidth = function () {\n        var colGroupElement = this.parent.element.querySelector('.e-frozenheader').querySelector('colgroup').children[0];\n        if (this.rowPanel.querySelector('.' + cls.PIVOT_BUTTON_CLASS)) {\n            if (!this.parent.isAdaptive) {\n                var pivotButtons = [].slice.call(this.rowPanel.querySelectorAll('.' + cls.PIVOT_BUTTON_WRAPPER_CLASS));\n                var lastButton = pivotButtons[pivotButtons.length - 1];\n                var lastButtonWidth = (lastButton.querySelector('.' + cls.PIVOT_BUTTON_CLASS).offsetWidth +\n                    lastButton.querySelector('.e-indent-div').offsetWidth + 20);\n                var resColWidth = (this.parent.isAdaptive ? 180 : 250);\n                var buttonWidth = formatUnit(lastButtonWidth < resColWidth ? resColWidth : lastButtonWidth);\n                var rowHeaderTable = this.parent.element.querySelector('.e-frozenheader').querySelector('table');\n                var rowContentTable = this.parent.element.querySelector('.e-frozencontent').querySelector('table');\n                var rowContent = this.parent.element.querySelector('.e-frozencontent').querySelector('colgroup').children[0];\n                var colwidth = parseInt(buttonWidth, 10);\n                var gridColumn = this.parent.grid.columns;\n                if (gridColumn && gridColumn.length > 0) {\n                    /* tslint:disable:align */\n                    gridColumn[0].width = (gridColumn[0].width >= resColWidth ?\n                        (colwidth > resColWidth ? colwidth : resColWidth) : (colwidth > resColWidth ? colwidth : resColWidth));\n                }\n                var valueColWidth = this.parent.renderModule.calculateColWidth(this.parent.dataSource.values.length > 0 ?\n                    this.parent.engineModule.pivotValues[0].length : 2);\n                for (var cCnt = 0; cCnt < gridColumn.length; cCnt++) {\n                    if (cCnt !== 0) {\n                        if (gridColumn[cCnt].columns) {\n                            this.setColWidth(gridColumn[cCnt].columns, valueColWidth);\n                        }\n                        else {\n                            gridColumn[cCnt].width = valueColWidth;\n                        }\n                    }\n                }\n                this.parent.posCount = 0;\n                this.parent.setGridColumns(this.parent.grid.columns);\n                this.parent.grid.headerModule.refreshUI();\n                if (!this.parent.firstColWidth) {\n                    colGroupElement.style.width = buttonWidth;\n                    rowContent.style.width = buttonWidth;\n                    rowHeaderTable.style.width = buttonWidth;\n                    rowContentTable.style.width = buttonWidth;\n                    setStyleAttribute(rowHeaderTable, { 'width': buttonWidth });\n                    setStyleAttribute(rowContentTable, { 'width': buttonWidth });\n                }\n            }\n            else {\n                if (!this.parent.firstColWidth) {\n                    var resColWidth = 180;\n                    var gridColumn = this.parent.grid.columns;\n                    if (gridColumn && gridColumn.length > 0) {\n                        gridColumn[0].width = resColWidth;\n                    }\n                    this.parent.posCount = 0;\n                    this.parent.grid.headerModule.refreshUI();\n                }\n            }\n        }\n        this.refreshUI();\n    };\n    GroupingBar.prototype.setColWidth = function (columns, width) {\n        for (var cCnt = 0; cCnt < columns.length; cCnt++) {\n            if (columns[cCnt].columns) {\n                this.setColWidth(columns[cCnt].columns, width);\n            }\n            else {\n                columns[cCnt].width = width;\n            }\n        }\n    };\n    GroupingBar.prototype.wireEvent = function (element) {\n        EventHandler.add(element, 'mouseover', this.dropIndicatorUpdate, this);\n        EventHandler.add(element, 'mouseleave', this.dropIndicatorUpdate, this);\n    };\n    GroupingBar.prototype.unWireEvent = function (element) {\n        EventHandler.remove(element, 'mouseover', this.dropIndicatorUpdate);\n        EventHandler.remove(element, 'mouseleave', this.dropIndicatorUpdate);\n    };\n    GroupingBar.prototype.dropIndicatorUpdate = function (e) {\n        if ((this.parent.isDragging && e.target.classList.contains(cls.DROPPABLE_CLASS) && e.type === 'mouseover') ||\n            e.type === 'mouseleave') {\n            removeClass([].slice.call(this.parent.element.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS)), cls.INDICATOR_HOVER_CLASS);\n            removeClass([].slice.call(this.parent.element.querySelectorAll('.' + cls.DROP_INDICATOR_CLASS + '-last')), cls.INDICATOR_HOVER_CLASS);\n        }\n    };\n    GroupingBar.prototype.tapHoldHandler = function (e) {\n        var target = closest(e.originalEvent.target, '.' + cls.PIVOT_BUTTON_CLASS);\n        if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n            var pos = target.getBoundingClientRect();\n            this.parent.contextMenuModule.fieldElement = target;\n            this.parent.contextMenuModule.menuObj.open(pos.top, pos.left);\n            return;\n        }\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.renderLayout,\n            end: this.appendToElement,\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initSubComponent, this.handlers.load, this); //For initial rendering\n        this.parent.on(events.uiUpdate, this.handlers.end, this);\n    };\n    /**\n     * @hidden\n     */\n    GroupingBar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initSubComponent, this.handlers.end);\n        this.parent.off(events.uiUpdate, this.handlers.load);\n    };\n    /**\n     * To destroy the groupingbar\n     * @return {void}\n     * @hidden\n     */\n    GroupingBar.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.parent.pivotButtonModule) {\n            this.parent.pivotButtonModule.destroy();\n            if (this.touchObj && !this.touchObj.isDestroyed) {\n                this.touchObj.destroy();\n            }\n        }\n        else {\n            return;\n        }\n    };\n    return GroupingBar;\n}());\nexport { GroupingBar };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { isNullOrUndefined as isNaN, createElement, extend, remove, addClass } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as cls from '../../common/base/css-constant';\n/**\n * Module to render Conditional Formatting Dialog\n */\n/** @hidden */\nvar ConditionalFormatting = /** @class */ (function () {\n    /** Constructor for conditionalformatting module */\n    function ConditionalFormatting(parent) {\n        this.parent = parent;\n        this.parent.conditionalFormattingModule = this;\n        this.parentID = this.parent.element.id;\n        this.dialog = null;\n        this.fieldsDropDown = [];\n        this.conditionsDropDown = [];\n        this.fontNameDropDown = [];\n        this.fontSizeDropDown = [];\n        this.fontColor = [];\n        this.backgroundColor = [];\n        this.newFormat = [];\n    }\n    /**\n     * To get module name.\n     * @returns string\n     */\n    ConditionalFormatting.prototype.getModuleName = function () {\n        return 'conditionalformatting';\n    };\n    ConditionalFormatting.prototype.createDialog = function () {\n        if (document.querySelector('#' + this.parentID + 'conditionalformatting') !== null) {\n            remove(document.querySelector('#' + this.parentID + 'conditionalformatting'));\n        }\n        this.parent.element.appendChild(createElement('div', {\n            id: this.parentID + 'conditionalformatting',\n        }));\n        var buttonModel = [\n            {\n                click: this.addButtonClick.bind(this),\n                buttonModel: {\n                    cssClass: this.parent.isAdaptive ? (cls.FORMAT_ROUND_BUTTON + ' ' + cls.FORMAT_CONDITION_BUTTON) :\n                        cls.FORMAT_CONDITION_BUTTON,\n                    iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n                    content: this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('condition'),\n                }\n            },\n            {\n                click: this.applyButtonClick.bind(this),\n                buttonModel: {\n                    cssClass: cls.FLAT_CLASS + ' ' + cls.FORMAT_APPLY_BUTTON,\n                    content: this.parent.localeObj.getConstant('apply')\n                }\n            },\n            {\n                click: this.cancelButtonClick.bind(this),\n                buttonModel: {\n                    cssClass: cls.FLAT_CLASS + ' ' + cls.FORMAT_CANCEL_BUTTON,\n                    content: this.parent.localeObj.getConstant('cancel')\n                }\n            }\n        ];\n        if (this.parent.isAdaptive) {\n            this.dialog = new Dialog({\n                animationSettings: { effect: 'Zoom' }, isModal: true, width: '100%', height: '100%',\n                showCloseIcon: false, closeOnEscape: false, enableRtl: this.parent.enableRtl,\n                position: { X: 'center', Y: 'center' }, allowDragging: true, buttons: buttonModel,\n                beforeOpen: this.beforeOpen.bind(this),\n                cssClass: cls.FORMAT_DIALOG, header: this.parent.localeObj.getConstant('conditionalFormating'), target: document.body\n            });\n        }\n        else {\n            this.dialog = new Dialog({\n                allowDragging: true, position: { X: 'center', Y: this.parent.element.offsetTop }, buttons: buttonModel,\n                beforeOpen: this.beforeOpen.bind(this),\n                cssClass: cls.FORMAT_DIALOG, isModal: false, closeOnEscape: true, enableRtl: this.parent.enableRtl,\n                showCloseIcon: true, header: this.parent.localeObj.getConstant('conditionalFormating'), target: this.parent.element\n            });\n        }\n        this.dialog.appendTo('#' + this.parentID + 'conditionalformatting');\n    };\n    ConditionalFormatting.prototype.beforeOpen = function (args) {\n        this.dialog.element.querySelector('.' + cls.DIALOG_HEADER).\n            setAttribute('title', this.parent.localeObj.getConstant('conditionalFormating'));\n    };\n    ConditionalFormatting.prototype.addButtonClick = function () {\n        var format = {\n            conditions: 'LessThan',\n            value1: 0,\n            style: {\n                backgroundColor: 'white',\n                color: 'black',\n                fontFamily: 'Arial',\n                fontSize: '12px'\n            }\n        };\n        this.refreshConditionValues();\n        this.newFormat.push(format);\n        this.addFormat();\n    };\n    ConditionalFormatting.prototype.applyButtonClick = function () {\n        this.refreshConditionValues();\n        this.parent.setProperties({ dataSource: { conditionalFormatSettings: this.newFormat } }, true);\n        this.parent.renderPivotGrid();\n        this.destroy();\n    };\n    ConditionalFormatting.prototype.cancelButtonClick = function () {\n        this.destroy();\n        this.newFormat = [];\n    };\n    ConditionalFormatting.prototype.refreshConditionValues = function () {\n        for (var i = 0; i < this.newFormat.length; i++) {\n            this.newFormat[i].value1 =\n                Number(document.querySelector('#' + this.parentID + 'conditionvalue1' + i).value);\n            this.newFormat[i].value2 =\n                Number(document.querySelector('#' + this.parentID + 'conditionvalue2' + i).value);\n        }\n    };\n    ConditionalFormatting.prototype.addFormat = function () {\n        var format = createElement('div', { id: this.parentID + 'formatDiv', className: cls.FORMAT_NEW });\n        for (var i = 0; i < this.newFormat.length; i++) {\n            format.appendChild(this.createDialogElements(i));\n        }\n        this.dialog.setProperties({ 'content': format }, false);\n        for (var i = 0; i < this.newFormat.length; i++) {\n            this.renderDropDowns(i);\n            this.renderColorPicker(i);\n        }\n    };\n    ConditionalFormatting.prototype.createDialogElements = function (i) {\n        var format = this.newFormat[i];\n        var outerDiv = createElement('div', {\n            id: this.parentID + 'outerDiv' + i, className: cls.FORMAT_OUTER\n        });\n        var button = createElement('button', {\n            id: this.parentID + 'removeButton' + i, className: cls.FORMAT_DELETE_BUTTON,\n            attrs: { 'title': this.parent.localeObj.getConstant('delete') }\n        });\n        outerDiv.appendChild(button);\n        var innerDiv = createElement('div', { id: this.parentID + 'innerDiv', className: cls.FORMAT_INNER });\n        var table = createElement('table', { id: this.parentID + 'cftable', className: cls.FORMAT_TABLE });\n        var tRow = createElement('tr');\n        var td = createElement('td');\n        var valuelabel = createElement('span', {\n            id: this.parentID + 'valuelabel' + i, className: cls.FORMAT_VALUE_LABEL,\n            innerHTML: this.parent.localeObj.getConstant('value')\n        });\n        td.appendChild(valuelabel);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        tRow = createElement('tr');\n        td = createElement('td');\n        var measureDropdown = createElement('div', { id: this.parentID + 'measure' + i });\n        var measureInput = createElement('input', {\n            id: this.parentID + 'measureinput' + i,\n            attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        measureDropdown.appendChild(measureInput);\n        td.appendChild(measureDropdown);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var conditionDropdown = createElement('div', { id: this.parentID + 'condition' });\n        var conditionInput = createElement('input', {\n            id: this.parentID + 'conditioninput' + i,\n            attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        conditionDropdown.appendChild(conditionInput);\n        td.appendChild(conditionDropdown);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var style = !(format.conditions === 'Between' || format.conditions === 'NotBetween') ? 'display:none; width:10px' : '';\n        var value1 = createElement('input', {\n            id: this.parentID + 'conditionvalue1' + i,\n            attrs: { 'type': 'text', 'tabindex': '1', 'value': !isNaN(format.value1) ? format.value1.toString() : '0' },\n            styles: this.parent.isAdaptive ? style === '' ? 'width: 35%' : 'width: 100%' : style === '' ? 'width: 45px' : 'width: 120px',\n            className: cls.INPUT + ' ' + cls.FORMAT_VALUE1\n        });\n        td.appendChild(value1);\n        var valuespan = createElement('span', {\n            id: this.parentID + 'valuespan' + i, className: cls.FORMAT_VALUE_SPAN,\n            innerHTML: '&', styles: style\n        });\n        td.appendChild(valuespan);\n        var value2 = createElement('input', {\n            id: this.parentID + 'conditionvalue2' + i,\n            attrs: { 'type': 'text', 'tabindex': '1', 'value': !isNaN(format.value2) ? format.value2.toString() : '0' },\n            styles: (this.parent.isAdaptive && style === '') ? 'width: 35%' : style === '' ? 'width: 45px' : style,\n            className: cls.INPUT + ' ' + cls.FORMAT_VALUE2\n        });\n        td.appendChild(value2);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        if (this.parent.isAdaptive) {\n            innerDiv.appendChild(table);\n            table = createElement('table', { id: this.parentID + 'cftable', className: cls.FORMAT_TABLE });\n        }\n        tRow = createElement('tr');\n        td = createElement('td');\n        var formatlabel = createElement('span', {\n            id: this.parentID + 'formatlabel' + i, className: cls.FORMAT_LABEL, innerHTML: this.parent.localeObj.getConstant('formatLabel')\n        });\n        td.appendChild(formatlabel);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        tRow = createElement('tr');\n        td = createElement('td');\n        var fontNameDropdown = createElement('div', { id: this.parentID + 'fontname' });\n        var fontNameInput = createElement('input', {\n            id: this.parentID + 'fontnameinput' + i, attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        fontNameDropdown.appendChild(fontNameInput);\n        td.appendChild(fontNameDropdown);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var fontSizeDropdown = createElement('div', { id: this.parentID + 'fontsize' });\n        var fontSizeInput = createElement('input', {\n            id: this.parentID + 'fontsizeinput' + i, attrs: { 'type': 'text', 'tabindex': '1' }\n        });\n        fontSizeDropdown.appendChild(fontSizeInput);\n        td.appendChild(fontSizeDropdown);\n        tRow.appendChild(td);\n        if (this.parent.isAdaptive) {\n            table.appendChild(tRow);\n            tRow = createElement('tr');\n            table.appendChild(tRow);\n            tRow = createElement('tr');\n        }\n        td = createElement('td');\n        var colorPicker1 = createElement('input', {\n            id: this.parentID + 'fontcolor' + i, attrs: { 'type': 'color', 'tabindex': '1' }, className: cls.FORMAT_FONT_COLOR\n        });\n        td.appendChild(colorPicker1);\n        var colorPicker2 = createElement('input', {\n            id: this.parentID + 'backgroundcolor' + i, attrs: { 'type': 'color', 'tabindex': '1' }, className: cls.FORMAT_BACK_COLOR\n        });\n        td.appendChild(colorPicker2);\n        tRow.appendChild(td);\n        td = createElement('td');\n        var valuePreview = createElement('div', {\n            id: this.parentID + 'valuepreview' + i, className: cls.INPUT + ' ' + cls.FORMAT_VALUE_PREVIEW,\n            innerHTML: '123.45',\n        });\n        td.appendChild(valuePreview);\n        tRow.appendChild(td);\n        table.appendChild(tRow);\n        innerDiv.appendChild(table);\n        outerDiv.appendChild(innerDiv);\n        return outerDiv;\n    };\n    ConditionalFormatting.prototype.renderDropDowns = function (i) {\n        var format = this.newFormat[i];\n        var fields = [];\n        fields.push({\n            index: 0, name: this.parent.localeObj.getConstant('AllValues'),\n            field: this.parent.localeObj.getConstant('AllValues')\n        });\n        for (var i_1 = 0; i_1 < this.parent.dataSource.values.length; i_1++) {\n            fields.push({\n                index: i_1 + 1,\n                name: this.parent.dataSource.values[i_1].caption || this.parent.dataSource.values[i_1].name,\n                field: this.parent.dataSource.values[i_1].name\n            });\n        }\n        var value = isNaN(format.measure) ? this.parent.localeObj.getConstant('AllValues') : format.measure;\n        this.fieldsDropDown[i] = new DropDownList({\n            dataSource: fields, fields: { text: 'name' },\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            popupHeight: '200px', popupWidth: 'auto',\n            change: this.measureChange.bind(this, i)\n        });\n        this.fieldsDropDown[i].appendTo('#' + this.parentID + 'measureinput' + i);\n        var conditions = [\n            { value: 'LessThan', name: this.parent.localeObj.getConstant('LessThan') },\n            { value: 'LessThanOrEqualTo', name: this.parent.localeObj.getConstant('LessThanOrEqualTo') },\n            { value: 'GreaterThan', name: this.parent.localeObj.getConstant('GreaterThan') },\n            { value: 'GreaterThanOrEqualTo', name: this.parent.localeObj.getConstant('GreaterThanOrEqualTo') },\n            { value: 'Equals', name: this.parent.localeObj.getConstant('Equals') },\n            { value: 'NotEquals', name: this.parent.localeObj.getConstant('NotEquals') },\n            { value: 'Between', name: this.parent.localeObj.getConstant('Between') },\n            { value: 'NotBetween', name: this.parent.localeObj.getConstant('NotBetween') }\n        ];\n        value = isNaN(format.conditions) ? 'LessThan' : format.conditions;\n        this.conditionsDropDown[i] = new DropDownList({\n            dataSource: conditions, fields: { value: 'value', text: 'name' },\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            popupHeight: '200px', popupWidth: 'auto',\n            change: this.conditionChange.bind(this, i)\n        });\n        this.conditionsDropDown[i].appendTo('#' + this.parentID + 'conditioninput' + i);\n        var fontNames = [\n            { index: 0, name: 'Arial' }, { index: 1, name: 'San Serif' }, { index: 2, name: 'Impact' },\n            { index: 3, name: 'Trebuchet MS' }, { index: 4, name: 'Serif' }, { index: 5, name: 'Verdana' },\n            { index: 6, name: 'Courier New' }, { index: 7, name: 'Times New Roman' }, { index: 8, name: 'Tahoma' },\n            { index: 9, name: 'Gerogia' }\n        ];\n        value = isNaN(format.style.fontFamily) ? 'Arial' : format.style.fontFamily;\n        this.fontNameDropDown[i] = new DropDownList({\n            dataSource: fontNames, fields: { text: 'name' },\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            popupWidth: '150px', popupHeight: '200px',\n            change: this.fontNameChange.bind(this, i)\n        });\n        this.fontNameDropDown[i].appendTo('#' + this.parentID + 'fontnameinput' + i);\n        var fontSize = [\n            { index: 0, name: '9px' }, { index: 1, name: '10px' }, { index: 2, name: '11px' }, { index: 3, name: '12px' },\n            { index: 4, name: '13px' }, { index: 5, name: '14px' }, { index: 6, name: '15px' }, { index: 6, name: '16px' }\n        ];\n        value = isNaN(format.style.fontSize) ? '12px' : format.style.fontSize;\n        this.fontSizeDropDown[i] = new DropDownList({\n            dataSource: fontSize, fields: { text: 'name' }, popupHeight: '200px',\n            value: value, width: this.parent.isAdaptive ? '100%' : '120px',\n            change: this.fontSizeChange.bind(this, i)\n        });\n        this.fontSizeDropDown[i].appendTo('#' + this.parentID + 'fontsizeinput' + i);\n    };\n    ConditionalFormatting.prototype.conditionChange = function (i, args) {\n        this.newFormat[i].conditions = args.value;\n        if (args.value === 'Between' || args.value === 'NotBetween') {\n            document.querySelector('#' + this.parentID + 'valuespan' + i).style.display = 'inline-block';\n            document.querySelector('#' + this.parentID + 'valuespan' + i).style.width =\n                this.parent.isAdaptive ? '10%' : '10px';\n            document.querySelector('#' + this.parentID + 'conditionvalue2' + i).style.display = 'inline-block';\n            document.querySelector('#' + this.parentID + 'conditionvalue2' + i).style.width =\n                this.parent.isAdaptive ? '35%' : '45px';\n            document.querySelector('#' + this.parentID + 'conditionvalue1' + i).style.width =\n                this.parent.isAdaptive ? '35%' : '45px';\n        }\n        else {\n            document.querySelector('#' + this.parentID + 'valuespan' + i).style.display = 'none';\n            document.querySelector('#' + this.parentID + 'conditionvalue2' + i).style.display = 'none';\n            document.querySelector('#' + this.parentID + 'conditionvalue1' + i).style.width =\n                this.parent.isAdaptive ? '100%' : '120px';\n        }\n    };\n    ConditionalFormatting.prototype.fontNameChange = function (i, args) {\n        this.newFormat[i].style.fontFamily = args.value.toString();\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontFamily = args.value;\n    };\n    ConditionalFormatting.prototype.fontSizeChange = function (i, args) {\n        this.newFormat[i].style.fontSize = args.value.toString();\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontSize = args.value;\n    };\n    ConditionalFormatting.prototype.measureChange = function (i, args) {\n        this.newFormat[i].measure = args.value.toString() === this.parent.localeObj.getConstant('AllValues') ?\n            undefined : args.value.toString();\n    };\n    ConditionalFormatting.prototype.renderColorPicker = function (i) {\n        var format = this.newFormat[i];\n        var value = isNaN(format.style.color) ? 'black' : format.style.color;\n        var color = this.isHex(value.substr(1)) ? value : this.colourNameToHex(value);\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.color = color;\n        this.fontColor[i] = new ColorPicker({\n            cssClass: cls.FORMAT_COLOR_PICKER, value: color, mode: 'Palette',\n            change: this.fontColorChange.bind(this, i)\n        });\n        this.fontColor[i].appendTo('#' + this.parentID + 'fontcolor' + i);\n        addClass([this.fontColor[i].element.nextElementSibling.querySelector('.' + cls.SELECTED_COLOR)], cls.ICON);\n        value = isNaN(format.style.backgroundColor) ? 'white' : format.style.backgroundColor;\n        color = this.isHex(value.substr(1)) ? value : this.colourNameToHex(value);\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.backgroundColor = color;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontFamily = format.style.fontFamily;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.fontSize = format.style.fontSize;\n        this.backgroundColor[i] = new ColorPicker({\n            cssClass: cls.FORMAT_COLOR_PICKER, value: color, mode: 'Palette',\n            change: this.backColorChange.bind(this, i)\n        });\n        this.backgroundColor[i].appendTo('#' + this.parentID + 'backgroundcolor' + i);\n        addClass([this.backgroundColor[i].element.nextElementSibling.querySelector('.e-selected-color')], cls.ICON);\n        var toggleBtn = new Button({\n            iconCss: cls.ICON + ' ' + cls.FORMAT_DELETE_ICON,\n            cssClass: cls.FLAT\n        });\n        toggleBtn.appendTo('#' + this.parentID + 'removeButton' + i);\n        toggleBtn.element.onclick = this.toggleButtonClick.bind(this, i);\n    };\n    ConditionalFormatting.prototype.backColorChange = function (i, args) {\n        this.newFormat[i].style.backgroundColor = args.currentValue.hex;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.backgroundColor =\n            args.currentValue.hex;\n    };\n    ConditionalFormatting.prototype.fontColorChange = function (i, args) {\n        this.newFormat[i].style.color = args.currentValue.hex;\n        document.querySelector('#' + this.parentID + 'valuepreview' + i).style.color =\n            args.currentValue.hex;\n    };\n    ConditionalFormatting.prototype.toggleButtonClick = function (i) {\n        this.newFormat.splice(i, 1);\n        this.addFormat();\n    };\n    /**\n     * To check is Hex or not.\n     * @returns boolean\n     * @hidden\n     */\n    ConditionalFormatting.prototype.isHex = function (h) {\n        var a = parseInt(h, 16);\n        while (h.charAt(0) === '0') {\n            h = h.substr(1);\n        }\n        return (a.toString(16) === h.toLowerCase() || (a === 0 && h === ''));\n    };\n    /**\n     * To convert hex to RGB.\n     * @returns { r: number, g: number, b: number } | null\n     * @hidden\n     */\n    ConditionalFormatting.prototype.hexToRgb = function (hex) {\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16)\n        } : null;\n    };\n    /**\n     * To convert color to hex.\n     * @returns string\n     * @hidden\n     */\n    ConditionalFormatting.prototype.colourNameToHex = function (colour) {\n        var colours = {\n            'aliceblue': '#f0f8ff', 'antiquewhite': '#faebd7', 'aqua': '#00ffff', 'aquamarine': '#7fffd4',\n            'azure': '#f0ffff', 'beige': '#f5f5dc', 'bisque': '#ffe4c4', 'black': '#000000',\n            'blanchedalmond': '#ffebcd', 'blue': '#0000ff',\n            'blueviolet': '#8a2be2', 'brown': '#a52a2a', 'burlywood': '#deb887', 'cadetblue': '#5f9ea0',\n            'chartreuse': '#7fff00', 'chocolate': '#d2691e',\n            'coral': '#ff7f50', 'cornflowerblue': '#6495ed', 'cornsilk': '#fff8dc', 'crimson': '#dc143c', 'cyan': '#00ffff',\n            'darkblue': '#00008b', 'darkcyan': '#008b8b', 'darkgoldenrod': '#b8860b', 'darkgray': '#a9a9a9', 'darkgreen': '#006400',\n            'darkkhaki': '#bdb76b', 'darkmagenta': '#8b008b', 'darkolivegreen': '#556b2f',\n            'darkorange': '#ff8c00', 'darkorchid': '#9932cc', 'darkred': '#8b0000', 'darksalmon': '#e9967a', 'darkseagreen': '#8fbc8f',\n            'darkslateblue': '#483d8b', 'darkslategray': '#2f4f4f', 'darkturquoise': '#00ced1',\n            'darkviolet': '#9400d3', 'deeppink': '#ff1493', 'deepskyblue': '#00bfff', 'dimgray': '#696969', 'dodgerblue': '#1e90ff',\n            'firebrick': '#b22222', 'floralwhite': '#fffaf0', 'forestgreen': '#228b22', 'fuchsia': '#ff00ff',\n            'gainsboro': '#dcdcdc', 'ghostwhite': '#f8f8ff', 'gold': '#ffd700', 'goldenrod': '#daa520',\n            'gray': '#808080', 'green': '#008000',\n            'greenyellow': '#adff2f', 'honeydew': '#f0fff0', 'hotpink': '#ff69b4', 'indianred ': '#cd5c5c',\n            'indigo': '#4b0082', 'ivory': '#fffff0',\n            'khaki': '#f0e68c', 'lavender': '#e6e6fa', 'lavenderblush': '#fff0f5', 'lawngreen': '#7cfc00', 'lemonchiffon': '#fffacd',\n            'lightblue': '#add8e6', 'lightcoral': '#f08080', 'lightcyan': '#e0ffff', 'lightgoldenrodyellow': '#fafad2',\n            'lightgrey': '#d3d3d3', 'lightgreen': '#90ee90', 'lightpink': '#ffb6c1', 'lightsalmon': '#ffa07a', 'lightseagreen': '#20b2aa',\n            'lightskyblue': '#87cefa', 'lightslategray': '#778899', 'lightsteelblue': '#b0c4de',\n            'lightyellow': '#ffffe0', 'lime': '#00ff00', 'limegreen': '#32cd32', 'linen': '#faf0e6',\n            'magenta': '#ff00ff', 'maroon': '#800000', 'mediumaquamarine': '#66cdaa', 'mediumblue': '#0000cd', 'mediumorchid': '#ba55d3',\n            'mediumpurple': '#9370d8', 'mediumseagreen': '#3cb371', 'mediumslateblue': '#7b68ee',\n            'mediumspringgreen': '#00fa9a', 'mediumturquoise': '#48d1cc', 'mediumvioletred': '#c71585', 'midnightblue': '#191970',\n            'mintcream': '#f5fffa', 'mistyrose': '#ffe4e1', 'moccasin': '#ffe4b5', 'navajowhite': '#ffdead', 'navy': '#000080',\n            'oldlace': '#fdf5e6', 'olive': '#808000', 'olivedrab': '#6b8e23', 'orange': '#ffa500', 'orangered': '#ff4500',\n            'orchid': '#da70d6',\n            'palegoldenrod': '#eee8aa', 'palegreen': '#98fb98', 'paleturquoise': '#afeeee', 'palevioletred': '#d87093',\n            'papayawhip': '#ffefd5',\n            'peachpuff': '#ffdab9', 'peru': '#cd853f', 'pink': '#ffc0cb', 'plum': '#dda0dd', 'powderblue': '#b0e0e6', 'purple': '#800080',\n            'rebeccapurple': '#663399', 'red': '#ff0000', 'rosybrown': '#bc8f8f', 'royalblue': '#4169e1',\n            'saddlebrown': '#8b4513', 'salmon': '#fa8072', 'sandybrown': '#f4a460', 'seagreen': '#2e8b57',\n            'seashell': '#fff5ee', 'sienna': '#a0522d',\n            'silver': '#c0c0c0', 'skyblue': '#87ceeb', 'slateblue': '#6a5acd', 'slategray': '#708090', 'snow': '#fffafa',\n            'springgreen': '#00ff7f',\n            'steelblue': '#4682b4', 'tan': '#d2b48c', 'teal': '#008080', 'thistle': '#d8bfd8', 'tomato': '#ff6347', 'turquoise': '#40e0d0',\n            'violet': '#ee82ee', 'wheat': '#f5deb3', 'white': '#ffffff', 'whitesmoke': '#f5f5f5', 'yellow': '#ffff00',\n            'yellowgreen': '#9acd32'\n        };\n        if (typeof colours[colour.toLowerCase()] !== 'undefined') {\n            return colours[colour.toLowerCase()];\n        }\n        return '#d5d5d5';\n    };\n    /**\n     * To create Conditional Formatting dialog.\n     * @returns void\n     */\n    ConditionalFormatting.prototype.showConditionalFormattingDialog = function () {\n        this.newFormat = [];\n        for (var i = 0; i < this.parent.dataSource.conditionalFormatSettings.length; i++) {\n            this.newFormat.push(extend({}, this.parent.dataSource.conditionalFormatSettings[i].properties, null, true));\n        }\n        this.createDialog();\n        this.dialog.refresh();\n        this.addFormat();\n    };\n    /**\n     * To destroy the Conditional Formatting dialog\n     * @returns void\n     * @hidden\n     */\n    ConditionalFormatting.prototype.destroy = function () {\n        if (this.dialog && !this.dialog.isDestroyed) {\n            this.dialog.hide();\n            for (var i = 0; i < this.newFormat.length; i++) {\n                if (this.fontColor[i] && !this.fontColor[i].isDestroyed) {\n                    this.fontColor[i].destroy();\n                }\n                if (this.backgroundColor[i] && !this.backgroundColor[i].isDestroyed) {\n                    this.backgroundColor[i].destroy();\n                }\n            }\n            this.dialog.destroy();\n        }\n        else {\n            return;\n        }\n    };\n    return ConditionalFormatting;\n}());\nexport { ConditionalFormatting };\n"],"names":["PivotUtil","getType","value","getDay","getHours","getMinutes","getSeconds","getMilliseconds","resetTime","date","setHours","PivotEngine","dataSource","mode","savedFieldList","pageSettings","enableValueSoring","isDrillThrough","this","formatFields","calculatedFields","calculatedFormulas","valueAxis","saveDataHeaders","columnCount","rowCount","colFirstLvl","rowFirstLvl","rowStartPos","colStartPos","enableValueSorting","headerCollection","rowHeaders","columnHeaders","rowHeadersCount","columnHeadersCount","valueMatrix","indexMatrix","rMembers","cMembers","memberCnt","pageInLimit","endPos","removeCount","colHdrBufferCalculated","colValuesLength","rowValuesLength","slicedHeaders","fieldFilterMem","filterPosObj","selectedHeaders","selectedHeader","values","rawIndexObject","isEditing","renderEngine","prototype","fields","globalize","Internationalization","enableSort","enableSorting","alwaysShowValueHeader","showSubTotals","isNullOrUndefined","showRowSubTotals","showColumnSubTotals","showGrandTotals","showRowGrandTotals","showColumnGrandTotals","allowValueFilter","isValueFilterEnabled","valueContent","data","Object","keys","rows","columns","filters","formats","formatSettings","calculatedFieldSettings","undefined","validateFilters","isExpandAll","isValueFiltersAvail","expandAll","drilledMembers","isMutiMeasures","length","emptyCellTextContent","emptyCellsTextContent","valueSortSettings","sortOrder","headerDelimiter","headerText","columnIndex","valueSortData","getFieldList","fillFieldMembers","updateSortSettings","sortSettings","generateValueMatrix","filterMembers","updateFilterMembers","generateGridData","getFormattedFields","cnt","name","isSort","isValueFilteringEnabled","type","dataFields","extend","concat","getCalculatedField","len","fieldList","key","isSelected","index","filter","isExcelFilter","filterType","dateMember","formattedMembers","members","id","caption","sort","updateTreeViewData","updateFieldList","lnt","field","showNoDataItems","aggregateType","baseField","baseItem","formula","_i","_a","actualFormula","fieldKeys","calc","calcProperties","properties","replace","indexOf","powerFunction","push","formulaType","split","lmt","aggregateValue","selectedString","filterElements","filterSettings","filterElements_1","dataFields_1","indMat","dlen","fList","kLn","kl","isDataAvail","membersCnt","fmembersCnt","dl","mkey","fKey","formattedValue","getFormattedValue","formattedText","toString","actualText","hasOwnProperty","ordinal","isDrilled","fillDrilledInfo","fieldName","mem","items","memberName","vMat","keyLen","flList","tkln","sln","slt","order","source","filterRw","list","isInclude","getFilters","dln","include","ln","exclude","indexObject","ilist","rln","rlt","filterElement","isValidFilterField","allowLabelFilter","applyLabelFilter","frameFilterList","showLabelFilter","showDateFilter","showNumberFilter","allowLabelFiltering","isValidFilterElement","isNotValidFilterElement","_b","dataFields_2","getLabelFilterMembers","condition","value1","value2","getDateFilterMembers","members_1","member","operand1","getParsedValue","operand2","cValue","validateFilterValue","operator","members_2","filterValue","toLowerCase","match","members_3","Date","getTime","val","isMemberInclude","isLabelFilter","updateFilter","fln","allowFil","final","filterObj","memberObj","indx","iln","ilt","applyValueFiltering","rowData","level","valueFilter","rowFilterData","isValueFiltered","allMember","getFilteredData","rLen","i","measure","mPos","aggregate","getAggregateValue","isLevelFiltered","removefilteredData","valueFilteredData","row","validateFilteredParentData","hasChild","formatSetting","parseNumber","format","filteredData","axis","valueSort","levelName","splice","allMemberData","rows_1","rowFilteredData","index_1","_c","_d","index_2","_e","_f","updateFramedHeaders","framedHeaders","dataHeaders","filteredHeaders","headers","framedHeaders_1","dHeader","isHeaderAvail","validateFilteredHeaders","filterFramedHeaders","filteredHeaders_1","vHeader","isEmptyDataAvail","isEmptyData","updateGridData","getIndexedHeaders","insertAllMembersCommon","pivotValues","headerContent","rowheads","colheads","columnFilteredData","valuesCount","valueFilters","valueFields","values_1","filterSettings_1","isAvail","cLen","j","applyValueSorting","calculatePagingValues","insertPosition","insertTotalPosition","getAggregatedHeaders","getHeaderData","insertSubTotals","getTableData","applyAdvancedAggregate","removeIndexProperties","isEngineUpdated","textArray","hText","mIndex","mType","getMember","sortByValueRow","vlen","k","temp","insertAllMember","rCnt","cCnt","Number","rowLength","rowCnt","rowCells","savedCell","spanCnt","indexObj","colCnt","cell","colSpan","colIndex","rowPos","rowSpan","cellType","rowIndex","isSpanned","keyInd","position","parentMember","hierarchy","showPosition","rlen","decisionObj","childrens","isNoData","savedMembers","pos","lt","memInd","headerValue","availData","filterPosition","a","b","getOrderedIndex","orderedIndex","slicedHeader","diff","summCell","lt_1","isValueSorting","rowCurrentPage","rowSize","exactStartPos","performSlicing","columnCurrentPage","columnSize","startPos","pop","set","customText","reformAxis","tnum","vlt","rTotal","cTotal","actCnt","isLeastNode","hpos","actpos","vln","name_1","calObj","vData","cln","clt","updateRowData","recursiveRowData","isHeaderSelected","rows_2","getAggregatedHeaderData","columns_1","isChildren","headers_1","updateSelectedHeaders","childMembers","aggregateHeaders","children","vCount","isChild","uniqueName","valueCount","pivotIndex","isIndexFilled","colIndex_1","updateAggregates","indexCollection_1","selectedHeaders_1","selectedHeaderCollection","name_2","isRowBaseField","activeValues","indexCollection","activeColumn","rowindexCollection","selectedRowValues","selectedColumnValues","len_1","cLevelName","axisObj","isSelectedColumn","len_2","uniqueLevelName","colIndex_3","currentSet","selectedHeaderCollection_1","item","colIndex_2","indexCollection_2","cVal","isNaN","formatNumber","maximumFractionDigits","clen","_g","rowindexCollection_2","selectedHeaderCollection_2","rowindexCollection_1","_h","indexCollection_3","_j","selectedHeaderCollection_3","_k","colIndex_4","_l","indexCollection_4","_m","selectedHeaderCollection_4","_o","rowindexCollection_3","_p","indexCollection_5","_q","colIndex_5","_r","selectedHeaderCollection_5","_s","selectedHeaderCollection_6","gTotalIndex","totalValues","gTotalIndex_1","rIndex","gTotalIndex_2","isSum","subTotal","toLocaleString","vcnt","colItmLn","sortText","lvl","name_3","ri","cellValue","avgCnt","isInit","isValueExist","duplicateValues","currentVal","indexVal","avgVal","avgDifferenceVal","indexVal_1","Math","pow","sqrt","NaN","isFirst","isMaxFirst","calcField","aggregateField","aggregatedValue","value_1","type_1","eval","JSON","parse","minimumSignificantDigits","maximumSignificantDigits","formatDate","items_1","text","RegExp","load","enginePopulating","enginePopulated","onFieldDropped","beforePivotTableRender","afterPivotTableRender","beforeExport","excelHeaderQueryCellInfo","pdfHeaderQueryCellInfo","excelQueryCellInfo","pdfQueryCellInfo","dataBound","queryCellInfo","headerCellInfo","hyperlinkCellClick","resizing","resizeStop","cellClick","drillThrough","beforeColumnsRender","selected","cellSelected","cellDeselected","rowSelected","rowDeselected","beginDrillThrough","initialLoad","uiUpdate","scroll","contentReady","dataReady","initSubComponent","treeViewUpdate","pivotButtonUpdate","initCalculatedField","click","ROOT","RTL","DEVICE","ICON","ICON_DISABLE","ICON_HIDDEN","AXISFIELD_ICON_CLASS","WRAPPER_CLASS","CONTAINER_CLASS","TOGGLE_FIELD_LIST_CLASS","STATIC_FIELD_LIST_CLASS","TOGGLE_SELECT_CLASS","FIELD_TABLE_CLASS","FIELD_LIST_CLASS","FIELD_LIST_TREE_CLASS","FIELD_HEADER_CLASS","FIELD_LIST_TITLE_CLASS","FIELD_LIST_TITLE_CONTENT_CLASS","FIELD_LIST_FOOTER_CLASS","CALCULATED_FIELD_CLASS","FLAT_CLASS","OUTLINE_CLASS","AXIS_TABLE_CLASS","LEFT_AXIS_PANEL_CLASS","RIGHT_AXIS_PANEL_CLASS","AXIS_HEADER_CLASS","AXIS_CONTENT_CLASS","AXIS_PROMPT_CLASS","PIVOT_BUTTON_WRAPPER_CLASS","PIVOT_BUTTON_CLASS","PIVOT_BUTTON_CONTENT_CLASS","DRAG_CLONE_CLASS","SORT_CLASS","SORT_DESCEND_CLASS","FILTER_COMMON_CLASS","FILTER_CLASS","FILTERED_CLASS","REMOVE_CLASS","DRAG_CLASS","DROP_INDICATOR_CLASS","INDICATOR_HOVER_CLASS","MEMBER_EDITOR_DIALOG_CLASS","EDITOR_TREE_WRAPPER_CLASS","EDITOR_TREE_CONTAINER_CLASS","DRILLTHROUGH_GRID_CLASS","DRILLTHROUGH_BODY_CLASS","DRILLTHROUGH_BODY_HEADER_CONTAINER_CLASS","DRILLTHROUGH_BODY_HEADER_CLASS","DRILLTHROUGH_BODY_HEADER_COMMON_CLASS","DRILLTHROUGH_BODY_HEADER_VALUE_CLASS","DRILLTHROUGH_DIALOG","EDITOR_LABEL_WRAPPER_CLASS","EDITOR_LABEL_CLASS","CHECK_BOX_FRAME_CLASS","NODE_CHECK_CLASS","NODE_STOP_CLASS","OK_BUTTON_CLASS","CANCEL_BUTTON_CLASS","ERROR_DIALOG_CLASS","DROPPABLE_CLASS","ROW_AXIS_CLASS","COLUMN_AXIS_CLASS","VALUE_AXIS_CLASS","FILTER_AXIS_CLASS","GROUPING_BAR_CLASS","GROUP_ROW_CLASS","GROUP_COLUMN_CLASS","GROUP_VALUE_CLASS","GROUP_FILTER_CLASS","NO_DRAG_CLASS","SELECTED_NODE_CLASS","TITLE_HEADER_CLASS","TITLE_CONTENT_CLASS","TEXT_CONTENT_CLASS","FOOTER_CONTENT_CLASS","ADAPTIVE_CONTAINER_CLASS","ADAPTIVE_FIELD_LIST_BUTTON_CLASS","ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS","BUTTON_SMALL_CLASS","BUTTON_ROUND_CLASS","ADD_ICON_CLASS","BUTTON_FLAT_CLASS","STATIC_CENTER_DIV_CLASS","STATIC_CENTER_HEADER_CLASS","ADAPTIVE_FIELD_LIST_DIALOG_CLASS","LIST_TEXT_CLASS","LIST_SELECT_CLASS","SELECTED_OPTION_ICON_CLASS","FILTER_DIV_CONTENT_CLASS","FILTER_TEXT_DIV_CLASS","BETWEEN_TEXT_DIV_CLASS","SEPARATOR_DIV_CLASS","FILTER_OPTION_WRAPPER_1_CLASS","FILTER_OPTION_WRAPPER_2_CLASS","FILTER_INPUT_DIV_1_CLASS","FILTER_INPUT_DIV_2_CLASS","VALUE_OPTIONS_CLASS","FILTER_OPERATOR_CLASS","COLLAPSE","EXPAND","COLUMNSHEADER","ROWSHEADER","VALUESCONTENT","SUMMARY","CELLVALUE","PIVOTTOOLTIP","TOOLTIP_HEADER","TOOLTIP_CONTENT","NEXTSPAN","LASTSPAN","EDITOR_SEARCH_WRAPPER_CLASS","EDITOR_SEARCH_CLASS","SELECT_ALL_WRAPPER_CLASS","SELECT_ALL_CLASS","PIVOTCALC","CALCDIALOG","CALCRADIO","CALCCHECK","CALCINPUT","CALCINPUTDIV","CALCOUTERDIV","FLAT","FORMAT","FORMULA","TREEVIEW","TREEVIEWOUTER","CALCCANCELBTN","CALCADDBTN","CALCOKBTN","CALCACCORD","CALCBUTTONDIV","AXIS_ICON_CLASS","AXIS_ROW_CLASS","AXIS_COLUMN_CLASS","AXIS_VALUE_CLASS","AXIS_FILTER_CLASS","GRID_CLASS","PIVOT_VIEW_CLASS","PIVOT_ALL_FIELD_TITLE_CLASS","PIVOT_FORMULA_TITLE_CLASS","PIVOT_CONTEXT_MENU_CLASS","MENU_DISABLE","EMPTY_MEMBER_CLASS","CALC_EDIT","CALC_EDITED","EMPTY_FIELD","FORMAT_DIALOG","FORMAT_CONDITION_BUTTON","FORMAT_NEW","FORMAT_OUTER","FORMAT_INNER","FORMAT_TABLE","FORMAT_VALUE_LABEL","FORMAT_LABEL","INPUT","FORMAT_VALUE1","FORMAT_VALUE2","FORMAT_VALUE_SPAN","FORMAT_FONT_COLOR","FORMAT_BACK_COLOR","FORMAT_VALUE_PREVIEW","FORMAT_COLOR_PICKER","FORMAT_DELETE_ICON","FORMAT_DELETE_BUTTON","SELECTED_COLOR","DIALOG_HEADER","FORMAT_APPLY_BUTTON","FORMAT_CANCEL_BUTTON","FORMAT_ROUND_BUTTON","VIRTUALTRACK_DIV","MOVABLECONTENT_DIV","FROZENCONTENT_DIV","MOVABLEHEADER_DIV","DEFER_APPLY_BUTTON","DEFER_CANCEL_BUTTON","LAYOUT_FOOTER","CELL_SELECTED_BGCOLOR","SELECTED_BGCOLOR","BUTTON_LAYOUT","CHECKBOX_LAYOUT","DEFER_UPDATE_BUTTON","HEADERCONTENT","BACK_ICON","TITLE_MOBILE_HEADER","TITLE_MOBILE_CONTENT","ROW_CELL_CLASS","CELL_ACTIVE_BGCOLOR","SPAN_CLICKED","ROW_SELECT","GRID_HEADER","Render","parent","colPos","lastSpan","engine","engineModule","gridSettings","formatList","getFormatList","render","injectGridModules","getRowStartPos","grid","element","querySelector","frameDataSource","setProperties","frameStackedHeaders","notify","refreshColumns","innerHTML","getHeaderContent","width","calculateGridWidth","height","rowHeight","bindGrid","appendChild","createElement","appendTo","on","headerRefreshed","refreshHeader","enableVirtualization","mHdr","cls.MOVABLEHEADER_DIV","mCont","cls.MOVABLECONTENT_DIV","vtr","cls.VIRTUALTRACK_DIV","virtualHeaderDiv","remove","className","setStyleAttribute","style","transform","scrollLeft","isEmpty","Grid","frozenColumns","frozenRows","frameEmptyData","frameEmptyColumns","locale","enableRtl","allowExcelExport","allowPdfExport","allowResizing","allowTextWrap","allowReordering","allowSelection","contextMenuItems","selectedRowIndex","selectionSettings","printMode","gridLines","contextMenuClick","bind","contextMenuOpen","beforeCopy","beforePrint","printComplete","rowSelecting","rowDeselecting","cellSelecting","cellDeselecting","resizeStart","columnDragStart","columnDrag","columnDrop","setGroupWidth","onResizeStop","args","renderModule","trigger","events.rowSelected","events.rowDeselected","rowRangeSelection","enable","selectionModule","selectRowsByRange","startIndex","endIndex","events.selected","events.cellDeselected","rowCellBoundEvent","columnCellBoundEvent","excelColumnEvent","pdfRowEvent","excelRowEvent","pdfColumnEvent","borderRight","borderLeft","widthService","setWidthToTable","events.contentReady","Inject","Freeze","ExcelExport","PdfExport","Selection","Reorder","Resize","ContextMenu","updateGridSettings","appendValueSortIcon","tCell","vSort","lock","classList","add","padding-top","column","customAttributes","resizeInfo","showGroupingBar","groupingBarModule","cls.GROUPING_BAR_CLASS","refreshUI","offsetWidth","firstColWidth","cancel","gridColumn","resColWidth","isAdaptive","offsetHeight","e","events.resizeStop","events.resizing","clearTimeout","timeOutObj","setTimeout","onSelect","pivotArgs","selectedCellsInfo","selectedElements_1","querySelectorAll","cls.CELL_SELECTED_BGCOLOR","cls.SELECTED_BGCOLOR","getAttribute","currentCell","events.cellSelected","customClass","hyperlinkSettings","cssClass","setAttribute","isValueCell","innerText","cls.NEXTSPAN","cls.LASTSPAN","localizedText","localeObj","getConstant","cls.ROWSHEADER","cls.COLLAPSE","cls.EXPAND","cls.ICON","attrs","title","cls.CELLVALUE","isRowCellHyperlink","enableHyperlink","pivotView","styles","cls.VALUESCONTENT","cls.SUMMARY","isSummaryCellHyperlink","isValueCellHyperlink","unWireEvents","wireEvents","events.queryCellInfo","node","display","borderBottomWidth","cls.COLUMNSHEADER","isColumnCellHyperlink","hdrdiv","lineHeight","div","window","navigator","userAgent","insertBefore","events.headerCellInfo","onHyperCellClick","target","parentElement","events.hyperlinkCellClick","open","dataContent","start","end","0","1","calculateColWidth","colCount","parWidth","parseFloat","columnWidth","totColWidth","integrateModel","headerCnt","headerSplit","splitPos","colWidth","columnModel","actualCnt","colField","setSavedWidth","minWidth","visible","tmpSpan","innerModel","innerPos","clipMode","triggerColumnRenderEvent","formatArray","vCnt","fCnt","exportHeaderEvent","events.excelHeaderQueryCellInfo","events.pdfHeaderQueryCellInfo","hAlign","indent","exportContentEvent","events.excelQueryCellInfo","paragraphIndent","events.pdfQueryCellInfo","gridCell","EventHandler","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","p","__","constructor","create","__decorate","decorators","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FieldOptions","_super","apply","Property","ChildProperty","FieldListFieldOptions","Style","Filter","ConditionalFormatSettings","Sort","FormatSettings","CalculatedFieldSettings","DrillOptions","ValueSortSettings","DataSource","Collection","Complex","GridSettings","cellSelectionMode","Event","getModuleName","exportToExcel","fileName","header","footer","dataCollections","events.beforeExport","workSheets","dataColl","colLen","rowLen","actualrCnt","maxLevel","cells","pivotCell","numberFormat","bold","wrapText","backColor","backgroundColor","fontColor","color","fontName","fontFamily","fontSize","vAlign","borders","lineStyle","Workbook","worksheets","save","PDFExport","exportToPDF","gridResult","eventParams","applyEvent","dataCollIndex","colLength","integratedCnt","pdfGrid","PdfGrid","isColHeader","pdfGridRow","getHeader","addRow","localCnt","isEmptyRow","getCell","columnSpan","applyStyle","stringFormat","PdfStringFormat","alignment","PdfTextAlignment","Right","Left","lineAlignment","PdfVerticalAlignment","Middle","getColumn","layout","PdfLayoutFormat","paginateBounds","RectangleF","draw","page","PointF","bounds","y","document","destroy","conditionalFormattingModule","hexToRgb","brush","PdfSolidBrush","PdfColor","g","backgroundBrush","size","font","PdfStandardFont","PdfFontFamily","TimesRoman","PdfFontStyle","Regular","textBrush","PdfDocument","pages","pen","PdfPen","headerTemplate","PdfPageTemplateElement","graphics","clientSize","drawString","Center","template","top","footerTemplate","bottom","KeyboardInteraction","keyConfigs","tab","enter","shiftUp","shiftDown","shiftLeft","shiftRight","upArrow","downArrow","leftArrow","rightArrow","escape","tabIndex","pivotViewKeyboardModule","KeyboardEvents","keyAction","keyActionHandler","eventName","action","processTab","processEnter","processSelection","clearSelection","getNextButton","allPivotButtons","slice","call","cls.PIVOT_BUTTON_CLASS","nextElement","closest","gridFocus","serviceLocator","getService","nextButton","currentInfo","skipAction","focus","getFocusedElement","addClass","preventDefault","showFieldList","cls.TOGGLE_FIELD_LIST_CLASS","cls.PIVOT_VIEW_CLASS","gridElement","getElementsByTagName","lastChild","cls.GRID_CLASS","contains","dispatchEvent","MouseEvent","view","bubbles","cancelable","forEach","ele","cls.CELL_ACTIVE_BGCOLOR","control","nodeName","getParentElement","previousSibling","nextSibling","cls.ROW_CELL_CLASS","applyColumnSelection","PivotContextMenu","contextMenuModule","renderContextMenu","menuItems","menuOptions","cls.PIVOT_CONTEXT_MENU_CLASS","beforeOpen","onBeforeMenuOpen","select","onSelectContextMenu","menuObj","fieldType","fieldElement","cls.PIVOT_BUTTON_CONTENT_CLASS","removeClass","cls.MENU_DISABLE","textContent","menu","dropClass","pivotCommon","dataSourceUpdate","updateDataSource","isDestroyed","VirtualScroll","previousValues","left","frozenPreviousValues","eventType","addInternalEvents","fCont","cls.FROZENCONTENT_DIV","clearEvents","onHorizondalScroll","onVerticalScroll","common","onWheelScroll","setPageXY","onTouchScroll","isPreventScrollEvent","_this","scrollTop","deltaMode","deltaY","getPointXY","pageXY","x","touches","pageX","pageY","pointerType","cls.HEADERCONTENT","update","direction","rowValues","exactSize","section","ceil","scrollPosObject","vertical","hideSpinner","showSpinner","verticalSection","colValues","horizontal","horizontalSection","excessMove","clientWidth","clientHeight","removeInternalEvents","off","DrillThroughDialog","isUpdated","gridIndexObjects","showDrillThroughDialog","eventArgs","removeDrillThroughDialog","drillThroughDialog","cls.DRILLTHROUGH_DIALOG","dialogPopUp","Dialog","animationSettings","effect","allowDragging","content","createDrillThroughGrid","drillThroughGrid","editSettings","allowEditing","dataWithPrimarykey","rawData","beforeClose","count","addItems","isModal","showCloseIcon","X","Y","closeOnEscape","body","close","visibility","dialogElement","getElementById","drillThroughBody","cls.DRILLTHROUGH_BODY_CLASS","drillThroughBodyHeader","cls.DRILLTHROUGH_BODY_HEADER_CONTAINER_CLASS","cls.DRILLTHROUGH_BODY_HEADER_COMMON_CLASS","cls.DRILLTHROUGH_BODY_HEADER_CLASS","cls.DRILLTHROUGH_BODY_HEADER_VALUE_CLASS","toolbarItems","allowCommandColumns","cls.DRILLTHROUGH_GRID_CLASS","Toolbar","ColumnChooser","showColumnChooser","toolbar","frameGridColumns","allowPaging","dialogModule","events.beginDrillThrough","cellInfo","gridObj","Edit","Page","allowEditOnDblClick","CommandColumn","showInColumnChooser","commands","buttonOption","iconCss","isPrimaryKey","actionComplete","requestType","hide","beforeBatchSave","keys_1","editType","validationRules","required","indexString","rawData_1","DrillThrough","mouseClickHandler","allowDrillThrough","executeDrillThrough","pivotValue","valueCaption","indexArray_1","aggType","valuetText","currentTarget","join","events.drillThrough","GroupingBarSettings","CellEditSettings","ConditionalSettings","HyperlinkSettings","PivotView","options","_this_1","shiftLockedPos","savedSelectedCellsPos","isPopupClicked","isMouseDown","isMouseUp","isCellBoxMultiSelection","scrollDirection","pivotColumns","posCount","needsID","PivotView_1","requiredModules","isCommonRequire","modules","allowConditionalFormatting","allowCalculatedField","preRender","initProperties","Browser","isDevice","renderToolTip","keyboardModule","defaultLocale","grandTotal","total","noValue","collapse","expand","rowAxisPrompt","columnAxisPrompt","valueAxisPrompt","filterAxisPrompt","filtered","delete","calculatedField","createCalculatedField","error","invalidFormula","dropText","dropTextMobile","dropAction","alert","warning","ok","search","drag","sum","average","min","max","allFields","addToRow","addToColumn","addToValue","addToFilter","emptyData","fieldExist","confirmText","noMatches","edit","clear","formulaField","dragField","clearFilter","by","all","multipleItems","label","enterValue","chooseDate","Before","BeforeOrEqualTo","After","AfterOrEqualTo","labelTextContent","dateTextContent","valueTextContent","Equals","DoesNotEquals","BeginWith","DoesNotBeginWith","EndsWith","DoesNotEndsWith","Contains","DoesNotContains","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween","And","Sum","Count","DistinctCount","Product","Avg","Min","SampleVar","PopulationVar","RunningTotals","Max","Index","SampleStDev","PopulationStDev","PercentageOfRowTotal","PercentageOfParentTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfGrandTotal","PercentageOfColumnTotal","NotEquals","AllValues","conditionalFormating","formatLabel","valueFieldSettings","summarizeValuesBy","sourceName","sourceCaption","example","editorDataLimitMsg","details","manageRecords","L10n","isDragging","setCurrencyCode","currencyCode","onBeforeTooltipOpen","showTooltip","tooltip","Tooltip","showTipPointer","beforeRender","setToolTip","floor","createSpinner","events.load","updateClass","events.initSubComponent","events.initialLoad","generateData","events.dataReady","renderPivotGrid","onContentReady","getPersistData","addOnPersist","copy","withHeader","onPropertyChanged","newProp","oldProp","refresh","axisFieldModule","virtualscrollModule","showRowHeaderHyperlink","showHyperlink","showColumnHeaderHyperlink","showValueCellHyperlink","showSummaryCellHyperlink","applyHyperlinkSettings","drillThroughModule","events.uiUpdate","pivotFieldListModule","allowDeferLayoutUpdate","clonedDataSource","events.dataBound","applyFormatting","isRefreshGrid","events.enginePopulated","unwireEvents","cls.ROOT","cls.RTL","cls.DEVICE","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","onDrill","fieldAvail","prop","memIndex","fieldListSpinnerElement","isEmptyGrid","virtualDiv","movableTable","vHeight","vWidth","mCnt","cls.PIVOTTOOLTIP","cls.TOOLTIP_HEADER","cls.TOOLTIP_CONTENT","getRowText","getColText","rowText","reverse","limit","colText","mouseDownHandler","cls.GRID_HEADER","mouseMoveHandler","mouseUpHandler","addEventListener","onWindowResize","parent_1","parentAt","lastSelectedElement","tagName","CellClicked","framePivotColumns","gridcolumns","gridcolumns_1","setGridColumns","gridcolumns_2","events.beforeColumnsRender","setCommonColumnsWidth","getSelectedCellsPos","headerModule","setGridRowWidth","setSavedSelectedCells","cls.ROW_SELECT","cls.SPAN_CLICKED","events.cellClick","applyRowSelection","shiftKey","ctrlKey","parentLevel","rCount","colStart","colEnd","rowStart","isCtrl_1","showPopup","queryStringArray","isToggle_1","activeColumns_1","actColPos_1","query","removeEventListener","renderEmptyGrid","initEngine","events.enginePopulating","DataManager","executeQuery","Query","then","result","format_1","conditionalFormatSettings","checkCondition","conditions","ilen","jlen","isHex","substr","colourNameToHex","sheet","createTextNode","head","str","insertRule","conditionalSettings","collection","conditionalValue1","conditionalValue2","NotifyPropertyChanges","Component","CommonKeyboardInteraction","shiftF","shiftS","processFilter","processSort","processDelete","processOpenContextMenu","cls.VALUE_AXIS_CLASS","cls.AXISFIELD_ICON_CLASS","cls.AXIS_FILTER_CLASS","cls.SORT_CLASS","cls.FILTER_COMMON_CLASS","cls.REMOVE_CLASS","EventBase","updateSorting","filterDialog","isDescending","cls.SORT_DESCEND_CLASS","sortObj","getSortItemByName","newSortObj","updateFiltering","fieldCaption","filterItems","executeLocal","sortBy","getFilterItemByName","treeData","getTreeData","popupTarget","moduleName","parentID","createFilterDialog","sortObjects","json","where","filterObjects","getFieldByName","getFormatItemByName","formatObjects","searchTreeNodes","treeObj","isFieldCollection","searchList","nonSearchList","list_1","enableNodes","disableNodes","searchTreeItems","memberCount","currentTreeItems","maxNodeLimitInMemberEditor","editorLabelElement","allowExcelLikeFilter","isDataOverflow","isChecked","dataBind","currentTreeItemsPos","savedTreeFilterPos","isDateField","filterItems_1","obj","checkedStatus","NodeStateModified","onStateModified","droppedClass","nodeDropped","cls.DROPPABLE_CLASS","droppedPosition","btnElement","cls.ROW_AXIS_CLASS","cls.COLUMN_AXIS_CLASS","cls.FILTER_AXIS_CLASS","description","errorDialog","createErrorDialog","getButtonPosition","targetBtn","cls.PIVOT_BUTTON_WRAPPER_CLASS","axisPanel","pivotButtons","n","DataSourceUpdate","dataSourceItem","removeFieldFromReport","getNewField","droppedField","droppedAxis","events.onFieldDropped","isDataSource","ErrorDialog","cls.ERROR_DIALOG_CLASS","errorPopUp","zIndex","buttons","closeErrorDialog","buttonModel","cls.OK_BUTTON_CLASS","isPrimary","removeErrorDialog","FilterDialog","editorDialog","cls.MEMBER_EDITOR_DIALOG_CLASS","data-fieldName","aria-label","filterCaption","filterObject","getFilterObject","createTreeView","renderMode","cls.ICON_DISABLE","disabled","closeFilterDialog","cls.CANCEL_BUTTON_CLASS","removeFilterDialog","dialogOpen","createTabMenu","updateCheckedState","editorTreeWrapper","cls.EDITOR_TREE_WRAPPER_CLASS","searchWrapper","tabindex","cls.EDITOR_SEARCH_WRAPPER_CLASS","editorSearch","labelWrapper","cls.EDITOR_LABEL_WRAPPER_CLASS","cls.EDITOR_LABEL_CLASS","selectAllWrapper","cls.SELECT_ALL_WRAPPER_CLASS","selectAllContainer","cls.SELECT_ALL_CLASS","treeViewContainer","cls.EDITOR_TREE_CONTAINER_CLASS","promptDiv","cls.EMPTY_MEMBER_CLASS","MaskedTextBox","placeholder","cls.EDITOR_SEARCH_CLASS","showClearButton","change","eventBase","memberTreeView","allMemberSelect","removeAttribute","TreeView","showCheckBox","nodeChecking","validateTreeNode","wrapper","types","regx","formatObj","cls.SELECTED_OPTION_ICON_CLASS","types_1","createCustomFilter","selectedIndex","tabObj","Tab","heightAdjustMode","selectedItem","valueOptions","measures","selectedOption","selectedValueIndex","betweenOperators","operatorCollection","operatorCollection_1","unshift","mainDiv","cls.FILTER_DIV_CONTENT_CLASS","data-type","data-operator","data-measure","data-value1","data-value2","textContentdiv","cls.FILTER_TEXT_DIV_CLASS","betweenTextContentdiv","cls.BETWEEN_TEXT_DIV_CLASS","separatordiv","cls.SEPARATOR_DIV_CLASS","filterWrapperDiv1","cls.FILTER_OPTION_WRAPPER_1_CLASS","optionWrapperDiv1","optionWrapperDiv2","filterWrapperDiv2","cls.FILTER_OPTION_WRAPPER_2_CLASS","dropOptionDiv1","dropOptionDiv2","inputDiv1","cls.FILTER_INPUT_DIV_1_CLASS","inputDiv2","cls.FILTER_INPUT_DIV_2_CLASS","inputField1","inputField2","createElements","operators","optionDiv1","optionDiv2","vDataSource","oDataSource","valueIndex","option","popupInstance","DropDownList","cls.VALUE_OPTIONS_CLASS","updateInputValues","setStyleAndAttributes","cls.FILTER_OPERATOR_CLASS","disabledClasses_1","inputObj1_1","DatePicker","inputObj2_1","inputObj1_2","NumericTextBox","parseInt","inputObj2_2","inputObj1_3","inputObj2_3","inputObj1","ej2_instances","inputObj2","role","aria-haspopup","uncheckedNodes","getUnCheckedNodes","checkedNodes","getCheckedNodes","firstNode","cls.CHECK_BOX_FRAME_CLASS","cls.NODE_CHECK_CLASS","cls.NODE_STOP_CLASS","isFilterField","PivotCommon","pivotEngine","nodeStateModified","DialogRenderer","fieldListWrappper","cls.WRAPPER_CLASS","cls.CONTAINER_CLASS","cls.ADAPTIVE_CONTAINER_CLASS","renderAdaptiveLayout","renderFieldListDialog","unWireDialogEvent","wireDialogEvent","renderStaticLayout","layoutHeader","cls.FIELD_LIST_TITLE_CLASS","cls.FIELD_LIST_TITLE_CONTENT_CLASS","createCalculatedButton","cls.STATIC_FIELD_LIST_CLASS","createDeferUpdateButtons","renderDeferUpdateButtons","deferUpdateCheckBox","CheckBox","checked","onCheckChange","deferUpdateApplyButton","Button","cls.DEFER_APPLY_BUTTON","cls.DEFER_UPDATE_BUTTON","cls.BUTTON_FLAT_CLASS","onclick","applyButtonClick","onDeferUpdateClick","deferUpdateCancelButton","cls.DEFER_CANCEL_BUTTON","cancelButtonClick","onCloseFieldList","layoutFooter","cls.LAYOUT_FOOTER","checkBoxLayout","cls.CHECKBOX_LAYOUT","buttonLayout","cls.BUTTON_LAYOUT","deferUpdateButton1","deferUpdateButton2","clonedFieldList","pivotFieldList","toggleFieldList","cls.TOGGLE_SELECT_CLASS","aria-disabled","cls.TITLE_MOBILE_HEADER","cls.BACK_ICON","cls.TITLE_MOBILE_CONTENT","showFieldListDialog","cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS","cls.BUTTON_SMALL_CLASS","cls.BUTTON_ROUND_CLASS","cls.ADD_ICON_CLASS","showCalculatedField","cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS","fieldListDialog","removeFieldListIcon","padding","cls.FOOTER_CONTENT_CLASS","cls.FIELD_LIST_FOOTER_CLASS","outerHTML","cls.TITLE_HEADER_CLASS","cls.TITLE_CONTENT_CLASS","offsetTop","selectedNodes","selectedNodes_1","adaptiveElement","pivotGridModule","triggerPopulateEvent","dialogRenderer","createAxisTable","tabSelect","createAddButton","events.initCalculatedField","calculatedButton","calculateField","cls.CALCULATED_FIELD_CLASS","calculatedFieldModule","footerContainer","fieldListButton","axisWrapper","cls.FIELD_LIST_CLASS","axisContent","cls.AXIS_CONTENT_CLASS","axisPrompt","cls.AXIS_PROMPT_CLASS","event","cls.ICON_HIDDEN","activeindex","treeViewModule","onShowFieldList","show","keyPress","keyCode","TreeViewRenderer","renderTreeDialog","fieldTable","cls.FIELD_TABLE_CLASS","treeHeader","cls.FIELD_HEADER_CLASS","treeViewElement","centerDiv","cls.STATIC_CENTER_DIV_CLASS","axisHeader","cls.STATIC_CENTER_HEADER_CLASS","renderTreeView","nodeChecked","nodeStateChange","cls.FIELD_LIST_TREE_CLASS","allowDragAndDrop","nodeDragStart","dragStart","nodeDragStop","dragStop","getTreeUpdate","cls.ADAPTIVE_FIELD_LIST_DIALOG_CLASS","fieldDialog","closeTreeDialog","onFieldAdd","dialogClose","textChange","addNode","cls.DRAG_CLASS","draggedNode","cls.LIST_TEXT_CLASS","cls.SELECTED_NODE_CLASS","axis_1","cls.NO_DRAG_CLASS","axis_2","axisElement","draggedNodeData","isNodeDropped","targetID","isDropped","getButton","droppableElement","dropTarget","sourcePosition","dropPosition","droppableButton","cls.DROP_INDICATOR_CLASS","cls.INDICATOR_HOVER_CLASS","buttonElement","wrapperElement","cls.TEXT_CONTENT_CLASS","selectedNode","cls.LIST_SELECT_CLASS","liElements_1","liElement","dragElement","prepend","refreshTreeView","currentFieldSet","currentFieldSet_1","events.treeViewUpdate","AxisTableRenderer","axisTable","cls.AXIS_TABLE_CLASS","leftAxisPanel","cls.LEFT_AXIS_PANEL_CLASS","rightAxisPanel","cls.RIGHT_AXIS_PANEL_CLASS","renderAxisTable","fieldLabels","axisTitleWrapper","cls.AXIS_ICON_CLASS","axisTitle","cls.AXIS_HEADER_CLASS","getIconupdate","localePrompt","Droppable","unWireEvent","wireEvent","updateDropIndicator","AggregateMenu","openContextMenu","menuInfo","createContextMenu","currentMenu","getBoundingClientRect","beforeMenuOpen","selectOptionInContextMenu","removeContextMenu","Menu","createValueSettingsDialog","valueDialog","data-field","createFieldOptions","updateValueSettings","overlayClick","removeDialog","summaryType","baseItemTypes","baseFieldTypes","fieldDataSource","fieldItemDataSource","data-caption","data-basefield","data-baseitem","textWrappper","optionWrapperDiv3","texttitle","inputTextDiv1","optionTextDiv1","optionTextDiv2","optionTextDiv3","dropOptionDiv3","optionWrapper2","enabled","optionWrapper3","filterBarPlaceholder","allowFiltering","valuefields","contentElement","captionName","isRefreshed","captionInstance","getInstance","summaryInstance","baseFieldInstance","baseItemInstance","selectedField","PivotButton","menuOption","pivotButtonModule","PivotFieldList","axisField","AxisFieldRenderer","renderPivotButton","valuePos","showValuesButton","buttonWrapper","data-tag","data-uid","isvalue","dropIndicatorElement","dropLastIndicatorElement","dragWrapper","createButtonDragIcon","createButtonText","createSortOption","createFilterOption","getTypeStatus","removeElement","groupingBarSettings","showRemoveIcon","createDraggable","aggregation","filterMem","updateButtontext","oncontextmenu","fieldListItem","createSummaryType","pivotButton","spanElement","showValueTypeIcon","createMenuOption","draggable","Draggable","clone","enableTailMode","enableAutoScroll","helper","createDragClone","onDragStart","onDragging","onDragStop","sortCLass","showSortIcon","filterCLass","cls.FILTER_CLASS","cls.FILTERED_CLASS","showFilterIcon","cloneElement","cls.DRAG_CLONE_CLASS","cursorAt","isNOU","targetTouches","cursor","isButtonDropped","droppableTarget","bindDialogEvents","updateDialogButtonEvents","ClearFilter","updateFilterState","updateCustomFilter","filterItem","inputElementString","focusElement","cls.EMPTY_FIELD","refreshPivotButtonState","removeDataSourceSettings","removeButton","checkAll","uncheckAll","checkedStateAll","state","searctItem","isNodeUnChecked","isFiltered","selectedButton","pivotButtons_1","handlers","events.pivotButtonUpdate","filterCount","memLen","allNodes","filteredItems","loop","test","createPivotButtons","axisTableModule","isRequiredUpdate","staticFieldList","dropFilterPrompt","dropColPrompt","dropRowPrompt","dropValPrompt","addPrompt","adaptiveFieldHeader","centerHeader","deferLayoutUpdate","captionData","fieldListRender","requireRefresh","getFieldCaption","getFields","isTreeViewRefresh","isEngineRefresh","updateView","COUNT","AVG","MIN","MAX","SUM","DISTINCTCOUNT","PRODUCT","STDEV","STDEVP","VAR","VARP","CALC","AGRTYPE","CalculatedField","existingReport","dialog","inputObj","droppable","newFields","isFieldExist","formulaText","fieldText","isEdit","currentFieldName","confirmPopUp","displayMenu","dropField","fieldClickHandler","cls.FORMAT","cls.CALC_EDIT","cls.CALC_EDITED","cls.CALCINPUT","curMenu","selectContextMenu","createMenu","applyFormula","currentObj","isExist","report","cField","createConfirmDialog","addFormula","exception","getFieldListData","icon","fieldDropped","textCovered","cursorPos","selectionStart","currentValue","textBeforeText","substring","textAfterText","setSelectionRange","createDialog","cls.CALCDIALOG","cancelClick","closeDialog","renderDialogElements","outerDiv","cls.CALCOUTERDIV","cls.FORMULA","accordDiv","cls.CALCACCORD","buttonDiv","cls.CALCBUTTONDIV","addBtn","cls.CALCADDBTN","cancelBtn","cls.CALCCANCELBTN","inputDiv","cls.CALCINPUTDIV","fieldTitle","cls.PIVOT_ALL_FIELD_TITLE_CLASS","wrapDiv","cls.TREEVIEWOUTER","cls.TREEVIEW","formulaTitle","cls.PIVOT_FORMULA_TITLE_CLASS","dropDiv","okBtn","cls.CALCOKBTN","renderMobileLayout","nodeCollapsing","nodeClicked","drawNode","drawTreeNode","dragItem","cls.PIVOTCALC","nodeData","append","createTypeContainer","input","data-ftxt","cls.CALCRADIO","getAccordionData","cls.CALCCHECK","cls.FLAT","cancelBtnClick","cls.OUTLINE_CLASS","accordion","Accordion","expanding","accordionExpand","updateType","addBtnClick","RadioButton","onChange","createCalculatedFieldDialog","renderDialogLayout","keyboardEvents","moveRight","replaceFormula","FieldList","initiateModule","updateControl","formatUnit","actWidth","abs","Common","commonModule","initiateCommonModule","AxisFields","cls.GROUP_ROW_CLASS","indentDiv","cls.GROUP_COLUMN_CLASS","cls.GROUP_VALUE_CLASS","cls.GROUP_FILTER_CLASS","GroupingBar","touchObj","Touch","tapHold","tapHoldHandler","renderLayout","groupingTable","rowAxisPanel","cls.AXIS_ROW_CLASS","columnAxisPanel","cls.AXIS_COLUMN_CLASS","valueAxisPanel","cls.AXIS_VALUE_CLASS","filterAxisPanel","rowPanel","columnPanel","valuePanel","filterPanel","axisPanels_1","appendToElement","emptyHeader","colGroupElement","rightAxisPanelWidth","rightPanelHeight","topLeftHeight","columnRows","trCell","childNodes","colHeight","columnRows_1","rowHeader_1","rhElement","rightAxisWidth","alignIcon","emptyRowHeader","groupHeight","columnRows_2","rowHeader_2","handlerElement","lastButton","lastButtonWidth","buttonWidth","rowHeaderTable","rowContentTable","rowContent","colwidth","valueColWidth","setColWidth","dropIndicatorUpdate","originalEvent","ConditionalFormatting","fieldsDropDown","conditionsDropDown","fontNameDropDown","fontSizeDropDown","newFormat","addButtonClick","cls.FORMAT_ROUND_BUTTON","cls.FORMAT_CONDITION_BUTTON","cls.FLAT_CLASS","cls.FORMAT_APPLY_BUTTON","cls.FORMAT_CANCEL_BUTTON","cls.FORMAT_DIALOG","cls.DIALOG_HEADER","refreshConditionValues","addFormat","cls.FORMAT_NEW","createDialogElements","renderDropDowns","renderColorPicker","cls.FORMAT_OUTER","button","cls.FORMAT_DELETE_BUTTON","innerDiv","cls.FORMAT_INNER","table","cls.FORMAT_TABLE","tRow","td","valuelabel","cls.FORMAT_VALUE_LABEL","measureDropdown","measureInput","conditionDropdown","conditionInput","cls.INPUT","cls.FORMAT_VALUE1","valuespan","cls.FORMAT_VALUE_SPAN","cls.FORMAT_VALUE2","formatlabel","cls.FORMAT_LABEL","fontNameDropdown","fontNameInput","fontSizeDropdown","fontSizeInput","colorPicker1","cls.FORMAT_FONT_COLOR","colorPicker2","cls.FORMAT_BACK_COLOR","valuePreview","cls.FORMAT_VALUE_PREVIEW","i_1","popupHeight","popupWidth","measureChange","conditionChange","fontNameChange","fontSizeChange","ColorPicker","cls.FORMAT_COLOR_PICKER","fontColorChange","nextElementSibling","cls.SELECTED_COLOR","backColorChange","toggleBtn","cls.FORMAT_DELETE_ICON","toggleButtonClick","hex","h","charAt","exec","colour","colours","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred ","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","showConditionalFormattingDialog"],"mappings":"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"}