{"version":3,"file":"ej2-schedule.min.js","sources":["../../src/schedule/base/util.js","../../src/recurrence-editor/date-generator.js","../../src/schedule/base/constant.js","../../src/schedule/base/css-constant.js","../../src/schedule/renderer/header-renderer.js","../../src/schedule/actions/scroll.js","../../src/schedule/actions/touch.js","../../src/schedule/actions/keyboard.js","../../src/schedule/actions/data.js","../../src/schedule/timezone/timezone.js","../../src/common/calendar-util.js","../../src/schedule/event-renderer/event-base.js","../../src/schedule/actions/crud.js","../../src/schedule/popups/form-validator.js","../../src/schedule/popups/quick-popups.js","../../src/schedule/popups/event-tooltip.js","../../src/recurrence-editor/recurrence-editor.js","../../src/schedule/popups/event-window.js","../../src/schedule/actions/virtual-scroll.js","../../src/schedule/renderer/renderer.js","../../src/schedule/models/work-hours.js","../../src/schedule/models/time-scale.js","../../src/schedule/models/quick-info-templates.js","../../src/schedule/models/header-rows.js","../../src/schedule/models/field-options.js","../../src/schedule/models/fields.js","../../src/schedule/models/event-settings.js","../../src/schedule/models/group.js","../../src/schedule/models/resources.js","../../src/schedule/base/resource.js","../../src/schedule/base/schedule.js","../../src/schedule/actions/action-base.js","../../src/schedule/actions/resize.js","../../src/schedule/actions/drag.js","../../src/schedule/renderer/view-base.js","../../src/schedule/actions/work-cells.js","../../src/schedule/event-renderer/vertical-view.js","../../src/schedule/event-renderer/month.js","../../src/schedule/renderer/vertical-view.js","../../src/schedule/renderer/day.js","../../src/schedule/renderer/week.js","../../src/schedule/renderer/work-week.js","../../src/schedule/renderer/month.js","../../src/schedule/event-renderer/agenda-base.js","../../src/schedule/renderer/agenda.js","../../src/schedule/renderer/month-agenda.js","../../src/schedule/event-renderer/timeline-view.js","../../src/schedule/renderer/timeline-header-row.js","../../src/schedule/renderer/timeline-view.js","../../src/schedule/renderer/timeline-month.js","../../src/schedule/exports/excel-export.js","../../src/schedule/exports/calendar-export.js","../../src/schedule/exports/calendar-import.js"],"sourcesContent":["import { createElement, remove } from '@syncfusion/ej2-base';\n/**\n * Schedule common utilities\n */\nexport var WEEK_LENGTH = 7;\nexport var MS_PER_DAY = 86400000;\nexport var MS_PER_MINUTE = 60000;\nexport function getElementHeightFromClass(container, elementClass) {\n    var height = 0;\n    var el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    height = getOuterHeight(el);\n    remove(el);\n    return height;\n}\nexport function getTranslateY(element) {\n    var style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\nexport function getWeekFirstDate(date1, firstDayOfWeek) {\n    var date = new Date(date1.getTime());\n    firstDayOfWeek = (firstDayOfWeek - date.getDay() + 7 * (-1)) % 7;\n    return new Date(date.setDate(date.getDate() + firstDayOfWeek));\n}\nexport function firstDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth());\n}\nexport function lastDateOfMonth(dt) {\n    return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n}\nexport function getWeekNumber(dt) {\n    var currentDate = new Date('' + dt).valueOf();\n    var date = new Date(dt.getFullYear(), 0, 1).valueOf();\n    var a = (currentDate - date);\n    return Math.ceil((((a) / MS_PER_DAY) + new Date(date).getDay() + 1) / 7);\n}\nexport function setTime(date, time) {\n    var tzOffsetBefore = date.getTimezoneOffset();\n    var d = new Date(date.getTime() + time);\n    var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n    date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n    return date;\n}\nexport function resetTime(date) {\n    date.setHours(0, 0, 0, 0);\n    return date;\n}\nexport function getDateInMs(date) {\n    return date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime();\n}\nexport function addDays(date, i) {\n    date = new Date('' + date);\n    return new Date(date.setDate(date.getDate() + i));\n}\nexport function addMonths(date, i) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setMonth(date.getMonth() + i);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\nexport function addYears(date, i) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setFullYear(date.getFullYear() + i);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\nexport function getStartEndHours(date, startHour, endHour) {\n    var date1 = new Date(date.getTime());\n    date1.setHours(startHour.getHours());\n    date1.setMinutes(startHour.getMinutes());\n    date1.setSeconds(startHour.getSeconds());\n    var date2 = new Date(date.getTime());\n    if (endHour.getHours() === 0) {\n        date2 = addDays(date2, 1);\n    }\n    else {\n        date2.setHours(endHour.getHours());\n        date2.setMinutes(endHour.getMinutes());\n        date2.setSeconds(endHour.getSeconds());\n    }\n    return { startHour: date1, endHour: date2 };\n}\nexport function getMaxDays(d) {\n    var date = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n    return date.getDate();\n}\nexport function getDaysCount(startDate, endDate) {\n    var strTime = resetTime(new Date(startDate));\n    var endTime = resetTime(new Date(endDate));\n    return (endTime.getTime() - strTime.getTime()) / MS_PER_DAY;\n}\nexport function getDateFromString(date) {\n    return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) :\n        date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\nexport function findIndexInData(data, property, value) {\n    for (var i = 0, length_1 = data.length; i < length_1; i++) {\n        if (data[i][property] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\nexport function getOuterHeight(element) {\n    var style = getComputedStyle(element);\n    return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\n","import { isNullOrUndefined, getDefaultDateObject, getValue, cldrData } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, addDays, resetTime } from '../schedule/base/util';\nimport { Islamic, Gregorian } from '../common/calendar-util';\n/**\n * Date Generator from Recurrence Rule\n */\nexport function generateSummary(rule, localeObject, locale, calendarType) {\n    if (calendarType === void 0) { calendarType = 'Gregorian'; }\n    var ruleObject = extractObjectFromRule(rule);\n    var summary = localeObject.getConstant(EVERY) + ' ';\n    var cldrObj;\n    var cldrObj1;\n    var calendarMode = calendarType.toLowerCase();\n    if (locale === 'en' || locale === 'en-US') {\n        cldrObj1 = (getValue('months.stand-alone.abbreviated', getDefaultDateObject(calendarMode)));\n        cldrObj = (getValue('days.stand-alone.abbreviated', getDefaultDateObject(calendarMode)));\n    }\n    else {\n        cldrObj1 =\n            (getValue('main.' + '' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated', cldrData));\n        cldrObj =\n            (getValue('main.' + '' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated', cldrData));\n    }\n    if (ruleObject.interval > 1) {\n        summary += ruleObject.interval + ' ';\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            summary += localeObject.getConstant(DAYS);\n            break;\n        case 'WEEKLY':\n            summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n            ruleObject.day.forEach(function (day, index) {\n                summary += getValue(DAYINDEXOBJECT[day], cldrObj);\n                summary += (((ruleObject.day.length - 1) === index) ? '' : ', ');\n            });\n            break;\n        case 'MONTHLY':\n            summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n        case 'YEARLY':\n            summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += getValue((ruleObject.month[0]).toString(), cldrObj1) + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n    }\n    if (ruleObject.count) {\n        summary += ', ' + (ruleObject.count) + ' ' + localeObject.getConstant(TIMES);\n    }\n    else if (ruleObject.until) {\n        var tempDate = ruleObject.until;\n        summary += ', ' + localeObject.getConstant(UNTIL)\n            + ' ' + tempDate.getDate()\n            + ' ' + getValue((tempDate.getMonth() + 1).toString(), cldrObj1)\n            + ' ' + tempDate.getFullYear();\n    }\n    return summary;\n}\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n    var summary = '';\n    if (ruleObject.monthDay.length) {\n        summary += ruleObject.monthDay[0];\n    }\n    else if (ruleObject.day) {\n        var pos = ruleObject.setPosition - 1;\n        summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : (WEEKPOS.length - 1)])\n            + ' ' + getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj);\n    }\n    return summary;\n}\nexport function generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount, viewDate, calendarMode) {\n    if (maximumCount === void 0) { maximumCount = MAXOCCURRENCE; }\n    if (viewDate === void 0) { viewDate = null; }\n    if (calendarMode === void 0) { calendarMode = 'Gregorian'; }\n    var ruleObject = extractObjectFromRule(rule);\n    var cacheDate;\n    calendarUtil = getCalendarUtil(calendarMode);\n    var data = [];\n    var modifiedDate = new Date(startDate.getTime());\n    if (viewDate && viewDate > startDate && !ruleObject.count) {\n        tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n    }\n    else {\n        tempViewDate = null;\n    }\n    if (!ruleObject.until && tempViewDate) {\n        cacheDate = new Date(tempViewDate.getTime());\n        cacheDate.setDate(tempViewDate.getDate() + 42 * (ruleObject.interval));\n        ruleObject.until = cacheDate;\n    }\n    if (ruleObject.until && startDate > ruleObject.until) {\n        return data;\n    }\n    maxOccurrence = maximumCount;\n    setFirstDayOfWeek(DAYINDEX[startDayOfWeek]);\n    tempExcludeDate = [];\n    var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n    tempDate.forEach(function (content) {\n        var parsedDate = getDateFromRecurrenceDateString(content);\n        tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n    });\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'WEEKLY':\n            weeklyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'MONTHLY':\n            monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'YEARLY':\n            yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n    }\n    return data;\n}\nexport function getDateFromRecurrenceDateString(recDateString) {\n    return new Date(recDateString.substr(0, 4) +\n        '-' + recDateString.substr(4, 2) +\n        '-' + recDateString.substr(6, 5) +\n        ':' + recDateString.substr(11, 2) +\n        ':' + recDateString.substr(13));\n}\nfunction excludeDateHandler(data, date) {\n    var zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n    if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n        data.push(date);\n    }\n}\nfunction dailyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var state;\n    var expectedDays = ruleObject.day;\n    while (compareDates(tempDate, endDate)) {\n        state = true;\n        state = validateRules(tempDate, ruleObject);\n        if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n            excludeDateHandler(data, tempDate.getTime());\n            if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n                break;\n            }\n        }\n        tempDate.setDate(tempDate.getDate() + interval);\n    }\n}\nfunction weeklyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    if (!ruleObject.day.length) {\n        ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n    }\n    var interval = ruleObject.interval;\n    var expectedDays = ruleObject.day;\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var weekState = true;\n    var wkstIndex;\n    var weekCollection = [];\n    if (expectedDays.length > 1) {\n        if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n            ruleObject.wkst = dayIndex[0];\n        }\n        wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n        while (compareDates(tempDate, endDate)) {\n            var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n            startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n            var weekstartDate = addDays(tempDate, -startDateDiff);\n            var weekendDate = addDays(weekstartDate, 6);\n            var compareTempDate = new Date(tempDate.getTime());\n            resetTime(weekendDate);\n            resetTime(compareTempDate);\n            while (weekendDate >= compareTempDate) {\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    weekCollection.push([tempDate.getTime()]);\n                }\n                if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n                    break;\n                }\n                tempDate.setDate(tempDate.getDate() + 1);\n                compareTempDate = new Date(tempDate.getTime());\n                resetTime(compareTempDate);\n            }\n            tempDate.setDate(tempDate.getDate() - 1);\n            if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate((tempDate.getDate()) + 1 + ((interval - 1) * 7));\n            insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n            weekCollection = [];\n        }\n    }\n    else {\n        tempDate = getStartDateForWeek(startDate, ruleObject.day);\n        while (compareDates(tempDate, endDate)) {\n            weekState = validateRules(tempDate, ruleObject);\n            if (weekState && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1)) {\n                excludeDateHandler(data, tempDate.getTime());\n            }\n            if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate(tempDate.getDate() + (interval * 7));\n        }\n        insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n        weekCollection = [];\n    }\n}\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n    // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n    if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n        if (ruleObject.freq === 'YEARLY') {\n            ruleObject.month.push(startDate.getMonth() + 1);\n        }\n    }\n    else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n    }\n    var ruleType = validateMonthlyRuleType(ruleObject);\n    switch (ruleType) {\n        case 'day':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n        case 'both':\n        case 'date':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n    }\n}\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n    var typeValue = checkYearlyType(ruleObject);\n    switch (typeValue) {\n        case 'MONTH':\n            monthlyType(startDate, endDate, data, ruleObject);\n            break;\n        case 'WEEKNO':\n            processWeekNo(startDate, endDate, data, ruleObject);\n            break;\n        case 'YEARDAY':\n            processYearDay(startDate, endDate, data, ruleObject);\n            break;\n    }\n}\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var state;\n    var startDay;\n    var firstWeekSpan;\n    var weekNos = ruleObject.weekNo;\n    var weekNo;\n    var maxDate;\n    var minDate;\n    var weekCollection = [];\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n        firstWeekSpan = (6 - startDay) + 1;\n        for (var index = 0; index < weekNos.length; index++) {\n            weekNo = weekNos[index];\n            weekNo = (weekNo > 0) ? weekNo : 53 + weekNo + 1;\n            maxDate = (weekNo === 1) ? firstWeekSpan : firstWeekSpan + ((weekNo - 1) * 7);\n            minDate = (weekNo === 1) ? firstWeekSpan - 7 : firstWeekSpan + ((weekNo - 2) * 7);\n            while (minDate < maxDate) {\n                tempDate = new Date(stDate.getTime() + (MS_PER_DAY * minDate));\n                if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                    }\n                    else {\n                        weekCollection.push([tempDate.getTime()]);\n                    }\n                }\n                minDate++;\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        weekCollection = [];\n    }\n}\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var state;\n    var dateCollection = [];\n    var date;\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        for (var index = 0; index < ruleObject.yearDay.length; index++) {\n            date = ruleObject.yearDay[index];\n            tempDate = new Date(stDate.getTime());\n            if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) &&\n                (!calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1))) {\n                tempDate.setDate(tempDate.getDate() + 1);\n                continue;\n            }\n            tempDate.setDate(tempDate.getDate() + ((date < 0) ?\n                calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n            if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                if (ruleObject.setPosition == null) {\n                    insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                }\n                else {\n                    dateCollection.push([tempDate.getTime()]);\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        dateCollection = [];\n    }\n}\nfunction checkYearlyType(ruleObject) {\n    if (ruleObject.yearDay.length) {\n        return 'YEARDAY';\n    }\n    else if (ruleObject.weekNo.length) {\n        return 'WEEKNO';\n    }\n    return 'MONTH';\n}\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n    var ruleData = {\n        monthCollection: [],\n        index: 0,\n        tempDate: new Date(startDate.getTime()),\n        mainDate: new Date(startDate.getTime()),\n        expectedCount: ruleObject.count ? ruleObject.count : maxOccurrence,\n        monthInit: 0,\n        dateCollection: [],\n    };\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n    }\n    return ruleData;\n}\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n    if (ruleObject.month.length) {\n        monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    var currentMonthDate;\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    while (compareDates(ruleData.tempDate, endDate)) {\n        currentMonthDate = new Date(ruleData.tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) &&\n            (ruleData.expectedCount && (data.length + tempExcludeDate.length) <= ruleData.expectedCount)) {\n            if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month))) {\n                processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n                ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n                ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n            }\n            else {\n                calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n                ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n                break;\n            }\n        }\n        ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n            calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n            ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        }\n        if (ruleData.expectedCount && (data.length + tempExcludeDate.length) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    while (compareDates(ruleData.tempDate, endDate)) {\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        }\n        if (ruleData.expectedCount && (data.length + tempExcludeDate.length) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n// To process date collection for Monthly & Yearly based on BYMONTH Day property\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n    for (var index = 0; index < ruleObject.monthDay.length; index++) {\n        recRuleVariables.date = ruleObject.monthDay[index];\n        recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n        var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n        recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : (maxDate + recRuleVariables.date + 1);\n        if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate)\n            && (recRuleVariables.date > 0)) {\n            calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n            if (endDate && recRuleVariables.tempDate > endDate) {\n                return;\n            }\n            if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n                if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && (recRuleVariables.expectedCount\n                    && (data.length + tempExcludeDate.length) < recRuleVariables.expectedCount)) {\n                    insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n                }\n                else {\n                    recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n                }\n            }\n        }\n    }\n}\nfunction setNextValidDate(tempDate, ruleObject, monthInit, beginDate, interval) {\n    if (beginDate === void 0) { beginDate = null; }\n    var monthData = beginDate ? beginDate.getMonth() : 0;\n    var startDate = calendarUtil.getMonthStartDate(tempDate);\n    interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n    tempDate.setFullYear(startDate.getFullYear());\n    tempDate.setMonth(startDate.getMonth());\n    tempDate.setDate(startDate.getDate());\n    if (ruleObject.month.length) {\n        monthInit++;\n        monthInit = monthInit % ruleObject.month.length;\n        calendarUtil.setMonth(tempDate, ruleObject.month[monthInit], 1);\n        if (monthInit === 0) {\n            calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n        }\n    }\n    else {\n        if (beginDate && (beginDate.getFullYear() < tempDate.getFullYear())) {\n            monthData = tempDate.getMonth() - 1;\n        }\n        calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n    }\n    return monthInit;\n}\n// To get month collection when BYDAY property having more than one value in list.\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var tempDate = new Date(startDate.getTime());\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var monthCollection = [];\n    var dateCollection = [];\n    var dates = [];\n    var index;\n    var state;\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var monthInit = 0;\n    var beginDate;\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)\n        && (expectedCount && (data.length + tempExcludeDate.length) < expectedCount)) {\n        var currentMonthDate = new Date(tempDate.getTime());\n        var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n        if (isHavingNumber.indexOf(true) > -1) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                var position = parseInt(expectedDaysArray[0], 10);\n                tempDate = new Date(tempDate.getTime());\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, expectedDays);\n                currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n                    if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n                        monthCollection.push([currentMonthDate.getTime()]);\n                    }\n                    currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                }\n                currentMonthDate.setDate(currentMonthDate.getDate() - (1));\n                if (expectedDaysArray[0].indexOf('-') > -1) {\n                    index = monthCollection.length - (-1 * position);\n                }\n                else {\n                    index = position - 1;\n                }\n                index = isNaN(index) ? 0 : index;\n                if (monthCollection.length > 0) {\n                    (isNullOrUndefined(ruleObject.setPosition)) ?\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) :\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, dates))];\n                }\n                if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n                    return;\n                }\n                monthCollection = [];\n            }\n            if (!isNullOrUndefined(ruleObject.setPosition)) {\n                insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n                dates = [];\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n        else {\n            var weekCollection = [];\n            var dayCycleData = processWeekDays(expectedDays);\n            currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n            var initialDate = new Date(tempDate.getTime());\n            beginDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n                weekCollection.push(tempDate.getTime());\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    monthCollection.push(weekCollection);\n                    weekCollection = [];\n                }\n                tempDate.setDate(tempDate.getDate()\n                    + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n            }\n            index = ((ruleObject.setPosition < 1) ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n            if (isNullOrUndefined(ruleObject.setPosition)) {\n                index = 0;\n                var datas = [];\n                for (var week = 0; week < monthCollection.length; week++) {\n                    for (var row = 0; row < monthCollection[week].length; row++) {\n                        datas.push(monthCollection[week][row]);\n                    }\n                }\n                monthCollection = [datas];\n            }\n            if (monthCollection.length > 0) {\n                insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n            }\n            if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n                return;\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n    }\n}\n// To process monday day type for FREQ=MONTHLY\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    // When BYDAY property having more than 1 value.\n    if (expectedDays.length > 1) {\n        getMonthCollection(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var monthCollection = [];\n    var beginDate;\n    var monthInit = 0;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate) && (expectedCount && (data.length + tempExcludeDate.length) < expectedCount)) {\n        beginDate = new Date(tempDate.getTime());\n        var currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n            monthCollection.push([currentMonthDate.getTime()]);\n            currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n        }\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n// To process monday day type for FREQ=YEARLY\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n    // If BYDAY property having more than 1 value in list\n    if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n        processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n        return;\n    }\n    else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n        monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var currentMonthDate;\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n    // Set the date as start date of the yeear if yearly freq having ByDay property alone\n    if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n        tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n    }\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n            (expectedCount && (data.length + tempExcludeDate.length) <= expectedCount)) {\n            currentMonthDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                    && !calendarUtil.checkMonth(tempDate, ruleObject.month))) {\n                    if (expectedDays.length > 1) {\n                        if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                    }\n                    else {\n                        // If BYDAY property having 1 value in list\n                        if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        var newstr = getDayString(expectedDays[0]);\n                        if (DAYINDEX[currentMonthDate.getDay()] === newstr\n                            && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0)\n                                > new Date(startDate.getFullYear())) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n                    }\n                }\n                else {\n                    calendarUtil.setValidDate(tempDate, 1, 1);\n                    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    break;\n                }\n            }\n        }\n        tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        }\n        tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n            return;\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n// To process the recurrence rule when BYDAY property having values with integer\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    var dateCollection = [];\n    var index;\n    var state;\n    var monthInit = 0;\n    var currentMonthDate;\n    var currentDate;\n    var beginDate;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var datas = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        for (var i = 0; i <= ruleObject.month.length; i++) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                monthCollection = [];\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n                    (expectedCount && (data.length + tempExcludeDate.length) <= expectedCount)) {\n                    while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                        currentMonthDate = new Date(tempDate.getTime());\n                        if (ruleObject.month.length === 0 ||\n                            (ruleObject.month.length > 0 && ruleObject.month[i] === calendarUtil.getMonth(currentMonthDate))) {\n                            var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                            var position = parseInt(expectedDaysArray[0], 10);\n                            currentDate = new Date(tempDate.getTime());\n                            while (calendarUtil.isSameYear(currentDate, tempDate)\n                                && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                                    monthCollection.push([currentDate.getTime()]);\n                                }\n                                currentDate.setDate(currentDate.getDate() + (1));\n                            }\n                            currentDate.setDate(currentDate.getDate() - (1));\n                            if (expectedDaysArray[0].indexOf('-') > -1) {\n                                index = monthCollection.length - (-1 * position);\n                            }\n                            else {\n                                index = position - 1;\n                            }\n                            index = isNaN(index) ? 0 : index;\n                        }\n                        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n                        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    }\n                }\n                tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n                if (monthCollection.length > 0) {\n                    (isNullOrUndefined(ruleObject.setPosition)) ?\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) :\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n                }\n                if (expectedCount && (data.length + tempExcludeDate.length) >= expectedCount) {\n                    return;\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n            datas = [];\n        }\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        }\n        else {\n            tempDate.setFullYear(tempDate.getFullYear() + interval);\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        if (ruleObject.month.length) {\n            calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n        }\n    }\n}\n// To get recurrence collection if BYSETPOS is null\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n    var index;\n    var recurrenceCollectionObject = {\n        monthCollection: [],\n        index: 0,\n    };\n    if (expectedDays.length === 1) {\n        // To split numeric value from BYDAY property value\n        var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n        var arrPosition = void 0;\n        if (expectedDaysArrays.length > 1) {\n            arrPosition = parseInt(expectedDaysArrays[0], 10);\n            index = ((arrPosition < 1) ? (monthCollection.length + arrPosition) : arrPosition - 1);\n        }\n        else {\n            index = 0;\n            monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n        }\n    }\n    else {\n        index = 0;\n        monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n    recurrenceCollectionObject.monthCollection = monthCollection;\n    recurrenceCollectionObject.index = index;\n    return recurrenceCollectionObject;\n}\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n    var index = ((ruleObject.setPosition < 1) ?\n        (dateCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n    if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n    }\n    if (dateCollection.length > 0) {\n        insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n}\n// To process month collection if BYSETPOS is null\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n    var datas = [];\n    for (var week = 0; week < monthCollection.length; week++) {\n        for (var row = 0; row < monthCollection[week].length; row++) {\n            datas.push(new Date(monthCollection[week][row]).getTime());\n        }\n    }\n    monthCollection = datas.length > 0 ? [datas] : [];\n    return monthCollection;\n}\n// To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var index;\n    var state;\n    var datas = [];\n    var dateCollection = [];\n    var recurrenceCollections;\n    recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n    monthCollection = recurrenceCollections.monthCollection;\n    index = recurrenceCollections.index;\n    if (ruleObject.setPosition != null) {\n        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n    else {\n        if (monthCollection.length > 0) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n        }\n    }\n    datas = [];\n}\n// To filter date collection when BYDAY property having values with number\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n    for (var week = 0; week < monthCollection[index].length; week++) {\n        datas.push(monthCollection[index][week]);\n    }\n    return datas;\n}\n// To insert processed date collection in final array element\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n    var expectedCount = ruleObject.count ? ruleObject.count : maxOccurrence;\n    var chDate = new Date(dayData);\n    state = validateRules(chDate, ruleObject);\n    if ((chDate >= startDate) && compareDates(chDate, endDate) && state\n        && expectedCount && (data.length + tempExcludeDate.length) < expectedCount) {\n        excludeDateHandler(data, dayData);\n    }\n}\n// To process datte collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n    if (monthCollection.length > 0) {\n        for (var week = 0; week < monthCollection.length; week++) {\n            monthCollection[week].sort();\n            var index = ((ruleObject.setPosition < 1)\n                ? (monthCollection[week].length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n            var dayData = monthCollection[week][index];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n// To insert datas into existing collection which is processed from previous loop.\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n    index = !isNullOrUndefined(index) ? index :\n        ((ruleObject.setPosition < 1)\n            ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n    monthCollection[index].sort();\n    for (var week = 0; week < monthCollection[index].length; week++) {\n        var dayData = monthCollection[index][week];\n        insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n    }\n}\nfunction compareDates(startDate, endDate) {\n    return endDate ? (startDate <= endDate) : true;\n}\nfunction getDayString(expectedDays) {\n    // To get BYDAY value without numeric value\n    var newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n    return newstr;\n}\nfunction checkDayIndex(day, expectedDays) {\n    var sortedExpectedDays = [];\n    expectedDays.forEach(function (element) {\n        var expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n        if (expectedDaysNumberSplit.length === 2) {\n            sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n        }\n        else {\n            sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n        }\n    });\n    return (sortedExpectedDays.indexOf(DAYINDEX[day]) === -1);\n}\nfunction getStartDateForWeek(startDate, expectedDays) {\n    var tempDate = new Date(startDate.getTime());\n    var newstr;\n    if (expectedDays.length > 0) {\n        var expectedDaysArr = [];\n        for (var i = 0; i <= expectedDays.length - 1; i++) {\n            newstr = getDayString(expectedDays[i]);\n            expectedDaysArr.push(newstr);\n        }\n        if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n            do {\n                tempDate.setDate(tempDate.getDate() + 1);\n            } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n        }\n    }\n    return tempDate;\n}\nexport function extractObjectFromRule(rules) {\n    var ruleObject = {\n        freq: null,\n        interval: 1,\n        count: null,\n        until: null,\n        day: [],\n        wkst: null,\n        month: [],\n        weekNo: [],\n        monthDay: [],\n        yearDay: [],\n        setPosition: null,\n        validRules: []\n    };\n    var rulesList = rules.split(';');\n    var splitData = [];\n    var temp;\n    rulesList.forEach(function (data) {\n        splitData = data.split('=');\n        switch (splitData[0]) {\n            case 'UNTIL':\n                temp = splitData[1];\n                ruleObject.until = getDateFromRecurrenceDateString(temp);\n                break;\n            case 'BYDAY':\n                ruleObject.day = splitData[1].split(',');\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTHDAY':\n                ruleObject.monthDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTH':\n                ruleObject.month = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYYEARDAY':\n                ruleObject.yearDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYWEEKNO':\n                ruleObject.weekNo = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'INTERVAL':\n                ruleObject.interval = parseInt(splitData[1], 10);\n                break;\n            case 'COUNT':\n                ruleObject.count = parseInt(splitData[1], 10);\n                break;\n            case 'BYSETPOS':\n                ruleObject.setPosition = parseInt(splitData[1], 10);\n                break;\n            case 'FREQ':\n                ruleObject.freq = splitData[1];\n                break;\n            case 'WKST':\n                ruleObject.wkst = splitData[1];\n                break;\n        }\n    });\n    if ((ruleObject.freq === 'MONTHLY') && (ruleObject.monthDay.length === 0)) {\n        var index = ruleObject.validRules.indexOf('BYDAY');\n        ruleObject.validRules.splice(index, 1);\n    }\n    return ruleObject;\n}\nfunction validateProperDate(tempDate, data, startDate) {\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    return (data <= maxDate) && (tempDate >= startDate);\n}\nfunction processWeekDays(expectedDays) {\n    var dayCycle = {};\n    expectedDays.forEach(function (element, index) {\n        if (index === expectedDays.length - 1) {\n            var startIndex = dayIndex.indexOf(element);\n            var temp = startIndex;\n            while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n                temp++;\n            }\n            dayCycle[element] = temp - startIndex;\n        }\n        else {\n            dayCycle[element] = dayIndex.indexOf(expectedDays[(index + 1)]) - dayIndex.indexOf(element);\n        }\n    });\n    return dayCycle;\n}\nfunction checkDate(tempDate, expectedDate) {\n    var temp = expectedDate.slice(0);\n    var data;\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + maxDate + 1;\n        }\n        if (data === tempDate.getDate()) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\nfunction checkYear(tempDate, expectedyearDay) {\n    var temp = expectedyearDay.slice(0);\n    var data;\n    var yearDay = getYearDay(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n        }\n        if (data === yearDay) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\nfunction getYearDay(currentDate) {\n    if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n        startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n    }\n    var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n    var diff = currentDate.getTime() - tempDate.getTime();\n    return Math.ceil(diff / MS_PER_DAY);\n}\nfunction validateMonthlyRuleType(ruleObject) {\n    if (ruleObject.monthDay.length && !ruleObject.day.length) {\n        return 'date';\n    }\n    else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n        return 'day';\n    }\n    return 'both';\n}\nfunction rotate(days) {\n    var data = days.shift();\n    days.push(data);\n}\nfunction setFirstDayOfWeek(day) {\n    while (dayIndex[0] !== day) {\n        rotate(dayIndex);\n    }\n}\nfunction validateRules(tempDate, ruleObject) {\n    var state = true;\n    var expectedDays = ruleObject.day;\n    var expectedMonth = ruleObject.month;\n    var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n    var expectedyearDay = ruleObject.yearDay;\n    ruleObject.validRules.forEach(function (rule) {\n        switch (rule) {\n            case 'BYDAY':\n                if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTH':\n                if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTHDAY':\n                if (checkDate(tempDate, expectedDate)) {\n                    state = false;\n                }\n                break;\n            case 'BYYEARDAY':\n                if (checkYear(tempDate, expectedyearDay)) {\n                    state = false;\n                }\n                break;\n        }\n    });\n    return state;\n}\nexport function getCalendarUtil(calendarMode) {\n    if (calendarMode === 'Islamic') {\n        return new Islamic();\n    }\n    return new Gregorian();\n}\nvar startDateCollection = {};\nvar tempExcludeDate;\nvar dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar maxOccurrence;\nvar tempViewDate;\nvar calendarUtil;\nvar DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar MAXOCCURRENCE = 43;\nvar WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nvar TIMES = 'summaryTimes';\nvar ON = 'summaryOn';\nvar EVERY = 'every';\nvar UNTIL = 'summaryUntil';\nvar DAYS = 'summaryDay';\nvar WEEKS = 'summaryWeek';\nvar MONTHS = 'summaryMonth';\nvar YEARS = 'summaryYear';\nvar DAYINDEXOBJECT = {\n    SU: 'sun',\n    MO: 'mon',\n    TU: 'tue',\n    WE: 'wed',\n    TH: 'thu',\n    FR: 'fri',\n    SA: 'sat'\n};\n// To check string has number\nvar HASNUMBER = /\\d/;\n// To find the numbers in string\nvar REMOVENUMBERINSTRING = /[^A-Z]+/;\n// To split number and string\nvar SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\nexport function getRecurrenceStringFromDate(date) {\n    return [date.getUTCFullYear(),\n        roundDateValues(date.getUTCMonth() + 1),\n        roundDateValues(date.getUTCDate()),\n        'T',\n        roundDateValues(date.getUTCHours()),\n        roundDateValues(date.getUTCMinutes()),\n        roundDateValues(date.getUTCSeconds()),\n        'Z'].join('');\n}\nfunction roundDateValues(date) {\n    return ('0' + date).slice(-2);\n}\n","/**\n * Constants\n */\n/** @hidden */\nexport var cellClick = 'cellClick';\n/** @hidden */\nexport var cellDoubleClick = 'cellDoubleClick';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var navigating = 'navigating';\n/** @hidden */\nexport var renderCell = 'renderCell';\n/** @hidden */\nexport var eventClick = 'eventClick';\n/** @hidden */\nexport var eventRendered = 'eventRendered';\n/** @hidden */\nexport var dataBinding = 'dataBinding';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var popupOpen = 'popupOpen';\n/** @hidden */\nexport var dragStart = 'dragStart';\n/** @hidden */\nexport var drag = 'drag';\n/** @hidden */\nexport var dragStop = 'dragStop';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var resizing = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/**\n * Specifies schedule internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var virtualScroll = 'virtual-scroll';\n/** @hidden */\nexport var scrollUiUpdate = 'scroll-ui-update';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var documentClick = 'document-click';\n/** @hidden */\nexport var cellMouseDown = 'cell-mouse-down';\n","/**\n * CSS Constants\n */\n/** @hidden */\nexport var ROOT = 'e-schedule';\n/** @hidden */\nexport var RTL = 'e-rtl';\n/** @hidden */\nexport var DEVICE_CLASS = 'e-device';\n/** @hidden */\nexport var ICON = 'e-icons';\n/** @hidden */\nexport var ENABLE_CLASS = 'e-enable';\n/** @hidden */\nexport var DISABLE_CLASS = 'e-disable';\n/** @hidden */\nexport var TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @hidden */\nexport var SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @hidden */\nexport var ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @hidden */\nexport var HEADER_POPUP_CLASS = 'e-header-popup';\n/** @hidden */\nexport var HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @hidden */\nexport var ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @hidden */\nexport var CONTENT_TABLE_CLASS = 'e-content-table';\n/** @hidden */\nexport var WORK_CELLS_CLASS = 'e-work-cells';\n/** @hidden */\nexport var WORK_HOURS_CLASS = 'e-work-hours';\n/** @hidden */\nexport var POPUP_OPEN = 'e-popup-open';\n/** @hidden */\nexport var DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @hidden */\nexport var DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @hidden */\nexport var HEADER_CELLS_CLASS = 'e-header-cells';\n/** @hidden */\nexport var WORKDAY_CLASS = 'e-work-days';\n/** @hidden */\nexport var OTHERMONTH_CLASS = 'e-other-month';\n/** @hidden */\nexport var CURRENT_DAY_CLASS = 'e-current-day';\n/** @hidden */\nexport var CURRENTDATE_CLASS = 'e-current-date';\n/** @hidden */\nexport var CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @hidden */\nexport var PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @hidden */\nexport var NEXT_PANEL_CLASS = 'e-next-panel';\n/** @hidden */\nexport var TRANSLATE_CLASS = 'e-translate';\n/** @hidden */\nexport var LEFT_INDENT_CLASS = 'e-left-indent';\n/** @hidden */\nexport var LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @hidden */\nexport var EVENT_TABLE_CLASS = 'e-event-table';\n/** @hidden */\nexport var RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @hidden */\nexport var RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @hidden */\nexport var RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @hidden */\nexport var RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @hidden */\nexport var RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @hidden */\nexport var RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @hidden */\nexport var RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @hidden */\nexport var RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @hidden */\nexport var RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @hidden */\nexport var RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @hidden */\nexport var RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @hidden */\nexport var TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @hidden */\nexport var TIME_CELLS_CLASS = 'e-time-cells';\n/** @hidden */\nexport var ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @hidden */\nexport var CURRENT_TIME_CLASS = 'e-current-time';\n/** @hidden */\nexport var CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @hidden */\nexport var PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @hidden */\nexport var HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @hidden */\nexport var SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @hidden */\nexport var WRAPPER_CLASS = 'e-wrapper';\n/** @hidden */\nexport var TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @hidden */\nexport var APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @hidden */\nexport var DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @hidden */\nexport var TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @hidden */\nexport var RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @hidden */\nexport var HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @hidden */\nexport var RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @hidden */\nexport var SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @hidden */\nexport var WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @hidden */\nexport var WEEK_NUMBER_CLASS = 'e-week-number';\n/** @hidden */\nexport var APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @hidden */\nexport var WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @hidden */\nexport var APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @hidden */\nexport var APPOINTMENT_CLASS = 'e-appointment';\n/** @hidden */\nexport var BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @hidden */\nexport var BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @hidden */\nexport var APPOINTMENT_BORDER = 'e-appointment-border';\n/** @hidden */\nexport var APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @hidden */\nexport var SUBJECT_WRAP = 'e-subject-wrap';\n/** @hidden */\nexport var RESOURCE_NAME = 'e-resource-name';\n/** @hidden */\nexport var APPOINTMENT_TIME = 'e-time';\n/** @hidden */\nexport var TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @hidden */\nexport var OUTER_TABLE_CLASS = 'e-outer-table';\n/** @hidden */\nexport var CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @hidden */\nexport var VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @hidden */\nexport var AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @hidden */\nexport var AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @hidden */\nexport var AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @hidden */\nexport var AGENDA_MONTH_HEADER_CLASS = 'e-month-header';\n/** @hidden */\nexport var AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @hidden */\nexport var AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @hidden */\nexport var AGENDA_DATE_CLASS = 'e-date-column';\n/** @hidden */\nexport var NAVIGATE_CLASS = 'e-navigate';\n/** @hidden */\nexport var DATE_HEADER_CLASS = 'e-date-header';\n/** @hidden */\nexport var AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @hidden */\nexport var DATE_BORDER_CLASS = 'e-date-border';\n/** @hidden */\nexport var AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @hidden */\nexport var DATE_TIME_CLASS = 'e-date-time';\n/** @hidden */\nexport var DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @hidden */\nexport var AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @hidden */\nexport var AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @hidden */\nexport var APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @hidden */\nexport var EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @hidden */\nexport var EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @hidden */\nexport var EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @hidden */\nexport var EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @hidden */\nexport var EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @hidden */\nexport var EVENT_ACTION_CLASS = 'e-event-action';\n/** @hidden */\nexport var NEW_EVENT_CLASS = 'e-new-event';\n/** @hidden */\nexport var CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @hidden */\nexport var MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @hidden */\nexport var CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @hidden */\nexport var DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @hidden */\nexport var EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @hidden */\nexport var RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @hidden */\nexport var LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @hidden */\nexport var RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @hidden */\nexport var TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @hidden */\nexport var BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @hidden */\nexport var EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @hidden */\nexport var EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @hidden */\nexport var HEADER_ROW_CLASS = 'e-header-row';\n/** @hidden */\nexport var ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @hidden */\nexport var ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @hidden */\nexport var EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @hidden */\nexport var ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @hidden */\nexport var ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @hidden */\nexport var APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @hidden */\nexport var APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @hidden */\nexport var MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @hidden */\nexport var CELL_POPUP_CLASS = 'e-cell-popup';\n/** @hidden */\nexport var EVENT_POPUP_CLASS = 'e-event-popup';\n/** @hidden */\nexport var MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @hidden */\nexport var POPUP_HEADER_CLASS = 'e-popup-header';\n/** @hidden */\nexport var POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @hidden */\nexport var POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @hidden */\nexport var POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @hidden */\nexport var DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @hidden */\nexport var RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @hidden */\nexport var QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @hidden */\nexport var EVENT_CREATE_CLASS = 'e-event-create';\n/** @hidden */\nexport var EDIT_EVENT_CLASS = 'e-event-edit';\n/** @hidden */\nexport var DELETE_EVENT_CLASS = 'e-event-delete';\n/** @hidden */\nexport var TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @hidden */\nexport var MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @hidden */\nexport var MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @hidden */\nexport var MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @hidden */\nexport var MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @hidden */\nexport var MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @hidden */\nexport var MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @hidden */\nexport var MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @hidden */\nexport var MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @hidden */\nexport var MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @hidden */\nexport var QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @hidden */\nexport var QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @hidden */\nexport var QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @hidden */\nexport var QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @hidden */\nexport var QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @hidden */\nexport var QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @hidden */\nexport var QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @hidden */\nexport var QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @hidden */\nexport var EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @hidden */\nexport var FORM_CONTAINER_CLASS = 'e-form-container';\n/** @hidden */\nexport var FORM_CLASS = 'e-schedule-form';\n/** @hidden */\nexport var EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @hidden */\nexport var EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @hidden */\nexport var TIME_ZONE_CLASS = 'e-time-zone';\n/** @hidden */\nexport var TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @hidden */\nexport var TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @hidden */\nexport var EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @hidden */\nexport var EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @hidden */\nexport var EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @hidden */\nexport var SUBJECT_CLASS = 'e-subject';\n/** @hidden */\nexport var LOCATION_CLASS = 'e-location';\n/** @hidden */\nexport var LOCATION_ICON_CLASS = 'e-location-icon';\n/** @hidden */\nexport var LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @hidden */\nexport var EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @hidden */\nexport var EVENT_WINDOW_START_CLASS = 'e-start';\n/** @hidden */\nexport var EVENT_WINDOW_END_CLASS = 'e-end';\n/** @hidden */\nexport var EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @hidden */\nexport var DESCRIPTION_CLASS = 'e-description';\n/** @hidden */\nexport var DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @hidden */\nexport var DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @hidden */\nexport var EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @hidden */\nexport var EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @hidden */\nexport var EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @hidden */\nexport var EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @hidden */\nexport var EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @hidden */\nexport var EVENT_WINDOW_DELETE_BUTTON_CLASS = 'e-event-delete';\n/** @hidden */\nexport var EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @hidden */\nexport var EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @hidden */\nexport var EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @hidden */\nexport var EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @hidden */\nexport var EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @hidden */\nexport var EDIT_CLASS = 'e-edit';\n/** @hidden */\nexport var EDIT_ICON_CLASS = 'e-edit-icon';\n/** @hidden */\nexport var DELETE_CLASS = 'e-delete';\n/** @hidden */\nexport var DELETE_ICON_CLASS = 'e-delete-icon';\n/** @hidden */\nexport var CLOSE_CLASS = 'e-close';\n/** @hidden */\nexport var CLOSE_ICON_CLASS = 'e-close-icon';\n/** @hidden */\nexport var ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @hidden */\nexport var EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @hidden */\nexport var ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @hidden */\nexport var TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @hidden */\nexport var DISABLE_DATE = 'e-disable-date';\n/** @hidden */\nexport var HIDDEN_CLASS = 'e-hidden';\n/** @hidden */\nexport var POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @hidden */\nexport var POPUP_TABLE_CLASS = 'e-popup-table';\n/** @hidden */\nexport var RESOURCE_MENU = 'e-resource-menu';\n/** @hidden */\nexport var RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @hidden */\nexport var RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @hidden */\nexport var RESOURCE_TREE = 'e-resource-tree';\n/** @hidden */\nexport var RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @hidden */\nexport var RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @hidden */\nexport var RESOURCE_CLASS = 'e-resource';\n/** @hidden */\nexport var RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @hidden */\nexport var RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @hidden */\nexport var DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @hidden */\nexport var VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @hidden */\nexport var ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @hidden */\nexport var AUTO_HEIGHT = 'e-auto-height';\n","import { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\nvar HeaderRenderer = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function HeaderRenderer(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    HeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n    };\n    HeaderRenderer.prototype.removeEventListener = function () {\n        this.parent.off(events.documentClick, this.closeHeaderPopup);\n    };\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    };\n    /** @hidden */\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    };\n    HeaderRenderer.prototype.renderHeader = function () {\n        this.element = createElement('div', { className: cls.TOOLBAR_CONTAINER });\n        var toolbarEle = createElement('div', { className: cls.HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    };\n    HeaderRenderer.prototype.renderToolbar = function () {\n        var items = this.getItems();\n        var args = { requestType: 'toolbarItemRendering', items: items };\n        this.parent.trigger(events.actionBegin, args);\n        this.toolbarObj = new Toolbar({\n            items: args.items,\n            overflowMode: 'Popup',\n            clicked: this.toolbarClickHandler.bind(this),\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale\n        });\n        this.toolbarObj.appendTo(this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        if (prevNavEle) {\n            prevNavEle.firstChild.setAttribute('title', this.l10n.getConstant('previous'));\n        }\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        if (nextNavEle) {\n            nextNavEle.firstChild.setAttribute('title', this.l10n.getConstant('next'));\n        }\n        this.updateActiveView();\n        this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: this.toolbarObj.items });\n    };\n    HeaderRenderer.prototype.updateItems = function () {\n        if (this.toolbarObj) {\n            var items = this.getItems();\n            var args = { requestType: 'toolbarItemRendering', items: items };\n            this.parent.trigger(events.actionBegin, args);\n            this.toolbarObj.items = args.items;\n            this.toolbarObj.dataBind();\n            this.parent.trigger(events.actionComplete, {\n                requestType: 'toolBarItemRendered',\n                items: this.toolbarObj.items\n            });\n        }\n    };\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    };\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.getCalendarView = function () {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'MonthAgenda') {\n            return 'Year';\n        }\n        return 'Month';\n    };\n    HeaderRenderer.prototype.setCalendarView = function () {\n        if (this.headerCalendar) {\n            var calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    };\n    HeaderRenderer.prototype.updateActiveView = function () {\n        var selEle = this.toolbarObj.element.querySelectorAll('.e-views');\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    };\n    HeaderRenderer.prototype.updateDateRange = function (text) {\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (selEle) {\n            selEle.setAttribute('aria-label', text);\n            selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n            this.toolbarObj.refreshOverflow();\n        }\n    };\n    HeaderRenderer.prototype.getDateRangeText = function () {\n        return this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() });\n    };\n    HeaderRenderer.prototype.getItems = function () {\n        var items = [];\n        var showInPopup = this.parent.isAdaptive;\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev', htmlAttributes: { 'aria-label': 'previous period' }\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next', htmlAttributes: { 'aria-label': 'next period' }\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show', htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title' }\n        });\n        if (this.parent.isAdaptive) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-add', text: this.l10n.getConstant('newEvent'),\n                cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-today', text: this.l10n.getConstant('today'),\n                cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-day', text: this.l10n.getConstant('today'),\n                cssClass: 'e-today', overflow: 'Show'\n            });\n            if (this.parent.views.length > 1) {\n                items.push({\n                    align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator'\n                });\n            }\n        }\n        if (this.parent.views.length > 1) {\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n                var item = _a[_i];\n                typeof (item) === 'string' ? items.push(this.getItemObject(item.toLowerCase(), null)) :\n                    items.push(this.getItemObject(item.option.toLowerCase(), item.displayName));\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItemObject = function (viewName, displayName) {\n        var view;\n        var showInPopup = this.parent.isAdaptive;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-agenda', text: this.l10n.getConstant('agenda'),\n                    cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-month-agenda',\n                    text: this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n        }\n        return view;\n    };\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\n        var headerPopupEle = createElement('div', { className: cls.HEADER_POPUP_CLASS });\n        var headerCalendarEle = createElement('div', { className: cls.HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl\n        });\n        var calendarView = this.getCalendarView();\n        this.headerCalendar = new Calendar({\n            value: this.parent.selectedDate,\n            firstDayOfWeek: this.parent.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calendarChange = function (args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            this.parent.changeDate(args.value);\n        }\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\n        var target = closest(args.originalEvent.target, '.e-views');\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    };\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n        if (!args.item) {\n            return;\n        }\n        var strClass = args.item.cssClass.replace('e-views ', '');\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            // case 'e-week-agenda':\n            //     this.parent.changeView('weekAgenda', args.originalEvent);\n            //     break;\n            // case 'e-work-week-agenda':\n            //     this.parent.changeView('workWeekAgenda', args.originalEvent);\n            //     break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                if (!this.parent.isSelectedDate(util.resetTime(new Date()))) {\n                    this.parent.changeDate(util.resetTime(new Date()), args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n                break;\n            case 'e-add':\n                var data = void 0;\n                var isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    var msInterval = (interval * util.MS_PER_MINUTE) / slotCount;\n                    var startTime = new Date(this.parent.selectedDate.getTime());\n                    startTime.setHours(new Date().getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp) {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    };\n    HeaderRenderer.prototype.getHeaderElement = function () {\n        return this.toolbarObj.element;\n    };\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            (classType === 'add') ? addClass([prevNavEle], cls.HIDDEN_CLASS) : removeClass([prevNavEle], cls.HIDDEN_CLASS);\n        }\n        if (nextNavEle) {\n            (classType === 'add') ? addClass([nextNavEle], cls.HIDDEN_CLASS) : removeClass([nextNavEle], cls.HIDDEN_CLASS);\n        }\n        if (dateRangeEle) {\n            (classType === 'add') ? addClass([dateRangeEle], cls.TEXT_ELLIPSIS) : removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n        }\n    };\n    /**\n     * Get module name.\n     */\n    HeaderRenderer.prototype.getModuleName = function () {\n        return 'headerbar';\n    };\n    /**\n     * To destroy the headerbar.\n     * @return {void}\n     * @private\n     */\n    HeaderRenderer.prototype.destroy = function () {\n        if (this.headerPopup) {\n            this.headerPopup.destroy();\n        }\n        if (this.headerCalendar) {\n            this.headerCalendar.destroy();\n        }\n        if (!this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    return HeaderRenderer;\n}());\nexport { HeaderRenderer };\n","import { formatUnit } from '@syncfusion/ej2-base';\nimport { contentReady, uiUpdate, scrollUiUpdate } from '../base/constant';\n/**\n * `Scroll` module\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        this.parent.element.style.height = formatUnit(this.parent.height);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        this.parent.on(contentReady, this.setDimensions, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        this.parent.off(contentReady, this.setDimensions);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setDimensions = function () {\n        this.setWidth();\n        this.setHeight();\n        var data = { cssProperties: this.parent.getCssProperties(), module: this.getModuleName() };\n        this.parent.notify(scrollUiUpdate, data);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.onPropertyChanged = function (e) {\n        this.setDimensions();\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { addClass, removeClass, Touch, remove, EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * `touch` module is used to handle touch interactions.\n */\nvar ScheduleTouch = /** @class */ (function () {\n    function ScheduleTouch(parent) {\n        this.parent = parent;\n        this.element = this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS);\n        this.touchObj = new Touch(this.element, {\n            scroll: this.scrollHandler.bind(this),\n            swipe: this.swipeHandler.bind(this),\n            tapHold: this.tapHoldHandler.bind(this),\n            swipeSettings: { swipeThresholdDistance: 1 }\n        });\n        EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n        this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n        this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n    }\n    ScheduleTouch.prototype.scrollHandler = function (e) {\n        if (this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action ||\n            (e.originalEvent && (e.originalEvent.target.classList.contains(cls.APPOINTMENT_CLASS) ||\n                closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS)))) {\n            return;\n        }\n        if (!this.timeStampStart) {\n            this.timeStampStart = Date.now();\n        }\n        if (this.element.classList.contains(cls.TRANSLATE_CLASS)) {\n            this.onTransitionEnd();\n        }\n        if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            var scrollDiv = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n                return;\n            }\n            else {\n                this.isScrollTriggered = true;\n                e.originalEvent.preventDefault();\n                e.originalEvent.stopPropagation();\n            }\n        }\n        if (e.scrollDirection === this.touchLeftDirection) {\n            if (!this.nextPanel) {\n                this.renderPanel(cls.NEXT_PANEL_CLASS, 'next');\n                this.nextPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.nextPanel.element);\n            }\n            var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n        else if (e.scrollDirection === this.touchRightDirection) {\n            var prevWidth = 0;\n            if (!this.previousPanel) {\n                this.renderPanel(cls.PREVIOUS_PANEL_CLASS, 'previous');\n                this.previousPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.previousPanel.element);\n                prevWidth = this.previousPanel.element.offsetWidth;\n            }\n            var x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n    };\n    ScheduleTouch.prototype.swipeHandler = function (e) {\n        if (!this.isScrollTriggered || this.parent.uiStateValues.action) {\n            return;\n        }\n        this.isScrollTriggered = false;\n        if (e.swipeDirection === 'Left' || e.swipeDirection === 'Right') {\n            var time = Date.now() - this.timeStampStart;\n            var offsetDist = (e.distanceX * (Browser.isDevice ? 6 : 1.66));\n            if (offsetDist > time || (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                this.swapPanels(e.swipeDirection);\n                if (offsetDist > time && (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                    this.element.style.transitionDuration = ((offsetDist / time) / 10) + 's';\n                }\n                this.confirmSwipe(e.swipeDirection);\n            }\n            else {\n                this.cancelSwipe();\n            }\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionComplete, args);\n        }\n        else {\n            this.cancelSwipe();\n        }\n        this.timeStampStart = null;\n    };\n    ScheduleTouch.prototype.tapHoldHandler = function (e) {\n        var target = closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS);\n        if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n            this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n            return;\n        }\n    };\n    ScheduleTouch.prototype.renderPanel = function (clsName, nextPrevType) {\n        if (!this.currentPanel) {\n            this.currentPanel = {\n                element: this.parent.activeView.getPanel(),\n                selectedDate: new Date(this.parent.selectedDate.getTime())\n            };\n            this.setDimensions(this.currentPanel.element);\n        }\n        else {\n            this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        }\n        this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType) }, true);\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.renderLayout(clsName);\n    };\n    ScheduleTouch.prototype.swapPanels = function (direction) {\n        if (direction === this.touchLeftDirection) {\n            var temp = this.nextPanel;\n            this.nextPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n        else {\n            var temp = this.previousPanel;\n            this.previousPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n    };\n    ScheduleTouch.prototype.confirmSwipe = function (swipeDirection) {\n        var previousDate = swipeDirection === this.touchLeftDirection ? this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n        var navArgs = {\n            action: 'date', cancel: false, previousDate: previousDate, currentDate: this.currentPanel.selectedDate\n        };\n        this.parent.trigger(events.navigating, navArgs);\n        if (navArgs.cancel) {\n            this.swapPanels(swipeDirection);\n            this.cancelSwipe();\n            return;\n        }\n        this.parent.activeView.setPanel(this.currentPanel.element);\n        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        var translateX;\n        if (this.parent.enableRtl) {\n            translateX = swipeDirection === this.touchLeftDirection ?\n                (this.previousPanel ? this.previousPanel.element.offsetLeft : this.currentPanel.element.offsetWidth) : 0;\n        }\n        else {\n            translateX = swipeDirection === this.touchLeftDirection ? -this.currentPanel.element.offsetLeft : 0;\n        }\n        addClass([this.element], cls.TRANSLATE_CLASS);\n        this.element.style.transform = 'translatex(' + (translateX) + 'px)';\n        if (this.parent.headerModule) {\n            this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n        }\n        this.parent.renderModule.refreshDataManager();\n    };\n    ScheduleTouch.prototype.cancelSwipe = function () {\n        this.parent.activeView.setPanel(this.currentPanel.element);\n        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.generateColumnLevels();\n        addClass([this.element], cls.TRANSLATE_CLASS);\n        var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n        this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n    };\n    ScheduleTouch.prototype.onTransitionEnd = function () {\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n        this.element.style.transitionDuration = '';\n        this.element.style.transform = '';\n        if (this.previousPanel) {\n            remove(this.previousPanel.element);\n            this.previousPanel = null;\n            removeClass([this.currentPanel.element], cls.PREVIOUS_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        if (this.nextPanel) {\n            remove(this.nextPanel.element);\n            this.nextPanel = null;\n            removeClass([this.currentPanel.element], cls.NEXT_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        this.currentPanel = null;\n        this.parent.activeView.getPanel().style.width = '';\n    };\n    ScheduleTouch.prototype.getTranslateX = function (element) {\n        var style = window.getComputedStyle(element);\n        return new WebKitCSSMatrix(style.webkitTransform).m41;\n    };\n    ScheduleTouch.prototype.setDimensions = function (element) {\n        element.style.width = (this.parent.element.clientWidth) + 'px';\n    };\n    ScheduleTouch.prototype.resetValues = function () {\n        this.currentPanel = null;\n        this.previousPanel = null;\n        this.nextPanel = null;\n        this.timeStampStart = null;\n        this.element.style.transform = '';\n        this.element.innerHTML = '';\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n    };\n    /**\n     * @hidden\n     */\n    ScheduleTouch.prototype.destroy = function () {\n        this.touchObj.destroy();\n        EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n        this.resetValues();\n    };\n    return ScheduleTouch;\n}());\nexport { ScheduleTouch };\n","import { KeyboardEvents, closest, EventHandler, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Keyboard interaction\n */\nvar KeyboardInteraction = /** @class */ (function () {\n    function KeyboardInteraction(parent) {\n        this.selectedCells = [];\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDownArrow: 'shift+downarrow',\n            shiftUpArrow: 'shift+uparrow',\n            shiftRightArrow: 'shift+rightarrow',\n            shiftLeftArrow: 'shift+leftarrow',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow',\n            altOne: 'alt+1',\n            altTwo: 'alt+2',\n            altThree: 'alt+3',\n            altFour: 'alt+4',\n            altFive: 'alt+5',\n            altSix: 'alt+6',\n            enter: 'enter',\n            escape: 'escape',\n            delete: 'delete',\n            home: 'home',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            tab: 'tab',\n            shiftTab: 'shift+tab'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.addEventListener();\n    }\n    KeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'downArrow':\n            case 'shiftDownArrow':\n                this.processDown(e, e.shiftKey);\n                break;\n            case 'upArrow':\n            case 'shiftUpArrow':\n                this.processUp(e, e.shiftKey);\n                break;\n            case 'leftArrow':\n            case 'shiftLeftArrow':\n                this.processLeft(e, e.shiftKey);\n                break;\n            case 'rightArrow':\n            case 'shiftRightArrow':\n                this.processRight(e, e.shiftKey);\n                break;\n            case 'ctrlLeftArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-prev button').focus();\n                }\n                break;\n            case 'ctrlRightArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-next button').focus();\n                }\n                break;\n            case 'altOne':\n            case 'altTwo':\n            case 'altThree':\n            case 'altFour':\n            case 'altFive':\n            case 'altSix':\n                this.processViewNavigation(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'home':\n                this.focusFirstCell();\n                break;\n            case 'tab':\n            case 'shiftTab':\n                this.processTab(e, e.shiftKey);\n                break;\n            case 'delete':\n                this.processDelete(e);\n                break;\n            case 'escape':\n                this.processEscape();\n        }\n    };\n    KeyboardInteraction.prototype.addEventListener = function () {\n        this.parent.on(event.cellMouseDown, this.onCellMouseDown, this);\n    };\n    KeyboardInteraction.prototype.removeEventListener = function () {\n        this.parent.off(event.cellMouseDown, this.onCellMouseDown);\n    };\n    KeyboardInteraction.prototype.onCellMouseDown = function (e) {\n        if (e.event.shiftKey) {\n            return;\n        }\n        this.initialTarget = this.getClosestCell(e.event);\n        if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n            return;\n        }\n        if (e.event.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveup, this);\n        }\n        if (e.event.target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(allDayRow, 'mouseup', this.onMoveup, this);\n        }\n    };\n    KeyboardInteraction.prototype.onMouseSelection = function (e) {\n        var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n        if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var yInBounds = parent_1.offsetHeight <= parent_1.scrollHeight && parent_1.scrollTop >= 0 &&\n                parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n            var xInBounds = parent_1.offsetWidth <= parent_1.scrollWidth && parent_1.scrollLeft >= 0 &&\n                parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n            if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n                parent_1.scrollTop += selectionEdges.top ?\n                    -e.target.offsetHeight : e.target.offsetHeight;\n            }\n            if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n                parent_1.scrollLeft += selectionEdges.left ?\n                    -e.target.offsetWidth : e.target.offsetWidth;\n            }\n        }\n        var target = this.getClosestCell(e);\n        if (target) {\n            this.selectCells(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.getClosestCell = function (e) {\n        return closest(e.target, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n    };\n    KeyboardInteraction.prototype.onMoveup = function (e) {\n        if (e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n            EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveup);\n        }\n        if (e.target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n            EventHandler.remove(allDayRow, 'mouseup', this.onMoveup);\n        }\n    };\n    KeyboardInteraction.prototype.processEnter = function (e) {\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e)) {\n            return;\n        }\n        var target = (e.target);\n        if (closest(target, '.' + cls.POPUP_WRAPPER_CLASS)) {\n            if (target.classList.contains(cls.QUICK_POPUP_EVENT_DETAILS_CLASS) ||\n                target.classList.contains(cls.EVENT_CREATE_CLASS) ||\n                target.classList.contains(cls.EDIT_EVENT_CLASS) ||\n                target.classList.contains(cls.DELETE_EVENT_CLASS) ||\n                target.classList.contains(cls.CLOSE_CLASS)) {\n                target.click();\n                e.preventDefault();\n            }\n            else if (target.classList.contains(cls.SUBJECT_CLASS)) {\n                this.parent.element.querySelector('.' + cls.EVENT_CREATE_CLASS).click();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            if (this.selectedCells.length > 1) {\n                var start = this.parent.getCellDetails(this.selectedCells[0]);\n                var end = this.parent.getCellDetails(this.selectedCells[this.selectedCells.length - 1]);\n                start.endTime = end.endTime;\n                start.element = target;\n                this.parent.activeCellsData = start;\n            }\n            else {\n                this.parent.activeCellsData = this.parent.getCellDetails(target);\n            }\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            this.parent.notify(event.cellClick, args);\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS) || target.classList.contains(cls.MORE_EVENT_CLOSE_CLASS) ||\n            target.classList.contains(cls.ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            target.click();\n            return;\n        }\n        if (target.classList.contains(cls.MORE_EVENT_HEADER_DATE_CLASS)) {\n            this.parent.setProperties({ selectedDate: new Date(parseInt(target.getAttribute('data-date'), 10)) }, true);\n            this.parent.changeView(this.parent.getNavigateView());\n            this.processEscape();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.getCells = function (isInverseTable, start, end) {\n        var tableEle = this.parent.getContentTable();\n        var cells = [].slice.call(tableEle.querySelectorAll('td'));\n        var maxRow = tableEle.rows.length;\n        var maxColumn = tableEle.rows[0].cells.length;\n        if (start.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            cells = [].slice.call(allDayRow.cells);\n            maxRow = 1;\n            maxColumn = allDayRow.cells.length;\n        }\n        var startIndex = cells.indexOf(start);\n        var endIndex = cells.indexOf(end);\n        var inverseCells = [];\n        if (isInverseTable) {\n            for (var i = 0; i < maxColumn; i++) {\n                for (var j = 0; j < maxRow; j++) {\n                    inverseCells.push(cells[maxColumn * j + i]);\n                }\n            }\n            startIndex = inverseCells.indexOf(start);\n            endIndex = inverseCells.indexOf(end);\n        }\n        if (startIndex > endIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        var sCells = isInverseTable ? inverseCells : cells;\n        return sCells.slice(startIndex, endIndex + 1);\n    };\n    KeyboardInteraction.prototype.focusFirstCell = function () {\n        if (this.parent.currentView === 'Agenda') {\n            var focusCell = this.parent.getContentTable().querySelector('.' + cls.AGENDA_CELLS_CLASS);\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        if (this.parent.activeView.isTimelineView()) {\n            var cell = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS +\n                ' tr:not(.' + cls.HIDDEN_CLASS + ') .' + cls.WORK_CELLS_CLASS + ':not(.' + cls.RESOURCE_GROUP_CELLS_CLASS + ')');\n            this.selectCells(false, cell);\n        }\n        else {\n            this.selectCells(false, this.parent.getWorkCellElements()[0]);\n        }\n    };\n    KeyboardInteraction.prototype.isInverseTableSelect = function () {\n        return this.parent.activeView.isInverseTableSelect;\n    };\n    /** @hidden */\n    KeyboardInteraction.prototype.selectCells = function (isMultiple, targetCell) {\n        this.parent.removeSelectedClass();\n        var target = (targetCell instanceof Array) ? targetCell.slice(-1)[0] : targetCell;\n        if (isMultiple) {\n            var initialId = void 0;\n            var selectedCells = this.getCells(this.isInverseTableSelect(), this.initialTarget, target);\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                initialId = this.initialTarget.getAttribute('data-group-index');\n                var resourceSelectedCells = [];\n                for (var i = 0; i < selectedCells.length; i++) {\n                    if (selectedCells[i].getAttribute('data-group-index') === initialId) {\n                        resourceSelectedCells.push(selectedCells[i]);\n                    }\n                }\n                selectedCells = resourceSelectedCells;\n            }\n            this.selectedCells = selectedCells;\n            if (selectedCells.length > 2 && !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n                var allDayCells = this.getAllDayCells(selectedCells);\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    var resourceAllDayCells = [];\n                    for (var i = 0; i < allDayCells.length; i++) {\n                        if (allDayCells[i].getAttribute('data-group-index') === initialId) {\n                            resourceAllDayCells.push(allDayCells[i]);\n                        }\n                    }\n                    allDayCells = resourceAllDayCells;\n                }\n                selectedCells = selectedCells.concat(allDayCells);\n            }\n            if ((target.getAttribute('data-group-index') !== initialId) && this.parent.activeViewOptions.group.resources.length > 0) {\n                target = this.selectedCells[this.selectedCells.length - 1];\n            }\n            this.parent.addSelectedClass(selectedCells, target);\n        }\n        else {\n            this.initialTarget = target;\n            this.selectedCells = [target];\n            this.parent.addSelectedClass([target], target);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointment = function (isReverse, target) {\n        var appointments = this.getAppointmentElements();\n        if (appointments.length < 0) {\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        var nextAppEle;\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var targetIndex = appointments.indexOf(target);\n            nextAppEle = appointments[(isReverse ? targetIndex - 1 : targetIndex + 1)];\n        }\n        else {\n            nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n        }\n        if (nextAppEle) {\n            this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n            nextAppEle.focus();\n            addClass([nextAppEle], cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointmentElementFromWorkCell = function (isReverse, target) {\n        var _this = this;\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        this.parent.removeSelectedClass();\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var appointmentElements_1 = this.getUniqueAppointmentElements();\n            var filteredElements_1 = [];\n            var selectedDate_1 = parseInt(target.getAttribute('data-date'), 10);\n            var selectedSeriesEvents = this.parent.eventsProcessed.filter(function (eventObject) {\n                return (!isReverse ? (eventObject[_this.parent.eventFields.startTime].getTime() >= selectedDate_1) :\n                    (eventObject[_this.parent.eventFields.startTime].getTime() <= selectedDate_1));\n            });\n            selectedSeriesEvents.filter(function (event) {\n                appointmentElements_1.filter(function (element) {\n                    if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n                        filteredElements_1.push(element);\n                    }\n                });\n            });\n            if (filteredElements_1.length > 0) {\n                var selectedElement = isReverse ? filteredElements_1[filteredElements_1.length - 1] : filteredElements_1[0];\n                var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n                this.parent.eventBase.addSelectedAppointments(focusElements);\n                (focusElements[focusElements.length - 1]).focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getAllDayCells = function (cells) {\n        var allDayRow = this.parent.getAllDayRow();\n        if (!allDayRow) {\n            return [];\n        }\n        var startCell = cells[0];\n        var endCell = cells[cells.length - 1];\n        var start = this.parent.getCellDetails(startCell);\n        var end = this.parent.getCellDetails(endCell);\n        if (end.endTime.getTime() - start.startTime.getTime() >= util.MS_PER_DAY) {\n            var allDayCells = [].slice.call(allDayRow.cells);\n            return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n        }\n        return [];\n    };\n    KeyboardInteraction.prototype.getAppointmentElements = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n    };\n    KeyboardInteraction.prototype.getAppointmentElementsByGuid = function (guid) {\n        return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n    };\n    KeyboardInteraction.prototype.getUniqueAppointmentElements = function () {\n        var appointments = this.getAppointmentElements();\n        var appointmentElements = [];\n        appointments.map(function (value) {\n            return value.getAttribute('data-guid');\n        }).filter(function (value, index, self) {\n            if (self.indexOf(value) === index) {\n                appointmentElements.push(appointments[index]);\n            }\n        });\n        return appointmentElements;\n    };\n    KeyboardInteraction.prototype.getWorkCellFromAppointmentElement = function (target) {\n        var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n        return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n    };\n    KeyboardInteraction.prototype.processViewNavigation = function (e) {\n        var index = parseInt(e.key, 10) - 1;\n        if (index < this.parent.views.length) {\n            var view = this.parent.viewCollections[index].option;\n            this.parent.changeView(view, e, undefined, index);\n            if (this.parent.headerModule) {\n                this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processUp = function (e, isMultiple) {\n        if ((isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda'))) {\n            return;\n        }\n        var target = (e.target);\n        var selectedElements = this.parent.getSelectedElements();\n        var selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedElements.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedElements[selectedElements.length - 1];\n        }\n        if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var tableRows = this.parent.getTableRows();\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex > 0 && curRowIndex < tableRows.length) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex - 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.processDown = function (e, isMultiple) {\n        if ((isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda'))) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedElements();\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedCells.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        var tableRows = this.parent.getTableRows();\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex >= 0 && curRowIndex < tableRows.length - 1) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex + 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(false, target);\n        }\n    };\n    KeyboardInteraction.prototype.processLeftRight = function (target) {\n        var tableEle = this.parent.getContentTable();\n        var curRowIndex = target.parentNode.sectionRowIndex;\n        var key = {\n            element: tableEle,\n            rowIndex: curRowIndex,\n            columnIndex: target.cellIndex,\n            maxIndex: tableEle.rows[curRowIndex].cells.length\n        };\n        return key;\n    };\n    KeyboardInteraction.prototype.getQuickPopupElement = function () {\n        return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n    };\n    KeyboardInteraction.prototype.isCancelLeftRightAction = function (e, isMultiple) {\n        if (this.parent.currentView === 'Agenda' || (isMultiple && this.parent.currentView === 'MonthAgenda')) {\n            return true;\n        }\n        if ((this.isPreventAction(e) && isMultiple)) {\n            return true;\n        }\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (moreEventWrapper.classList.contains(cls.POPUP_OPEN) || quickPopupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processRight = function (e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        var selectedCells = this.parent.getSelectedElements();\n        var targetCell;\n        var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n        var target = (e.target);\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedAppointments.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === key.maxIndex - 1) {\n                if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                    var tableEle = this.parent.getContentTable();\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[0]);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n            }\n            else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                var allDayRow_1 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_1.cells[0]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processLeft = function (e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedElements();\n        var targetCell;\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            if (key.columnIndex > 0 && key.columnIndex < key.maxIndex) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === 0) {\n                if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                    var tableEle = this.parent.getContentTable();\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[key.maxIndex - 1]);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex > 0 && curColIndex < maxColIndex) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n            }\n            else if (curColIndex === 0 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                var allDayRow_2 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_2.cells[maxColIndex - 1]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.calculateNextPrevDate = function (currentCell, target, type) {\n        var initialId = this.initialTarget.getAttribute('data-group-index');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n            if (target.getAttribute('data-group-index') !== initialId) {\n                var currentDate = new Date(parseInt(currentCell.getAttribute('data-date'), 10));\n                var nextPrevDate = (type === 'right') ? new Date(currentDate.setDate(currentDate.getDate() + 1))\n                    : new Date(currentDate.setDate(currentDate.getDate() - 1));\n                target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"'\n                    + nextPrevDate.getTime().toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n            }\n        }\n        return target;\n    };\n    KeyboardInteraction.prototype.getFocusableElements = function (container) {\n        var queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' +\n            'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' +\n            'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n        return [].slice.call(container.querySelectorAll(queryString));\n    };\n    KeyboardInteraction.prototype.processTabOnPopup = function (e, popupElement) {\n        var _this = this;\n        var focusableElements = this.getFocusableElements(popupElement);\n        focusableElements = focusableElements.filter(function (element) {\n            var footerEle = _this.parent.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n            if (footerEle && footerEle.offsetParent) {\n                return !(element.classList.contains(cls.EDIT_CLASS) || element.classList.contains(cls.DELETE_CLASS));\n            }\n            else {\n                return !(element.classList.contains(cls.EDIT_EVENT_CLASS) || element.classList.contains(cls.DELETE_EVENT_CLASS));\n            }\n        });\n        var firstEle = focusableElements[0];\n        var lastEle = focusableElements[focusableElements.length - 1];\n        if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n            e.preventDefault();\n            firstEle.focus();\n        }\n        if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n            e.preventDefault();\n            lastEle.focus();\n        }\n    };\n    KeyboardInteraction.prototype.processTab = function (e, isReverse) {\n        var target = e.target;\n        var popupWrapper = closest(target, '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        if (popupWrapper && popupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            if (popupWrapper.classList.contains(cls.MORE_POPUP_WRAPPER_CLASS)) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n            }\n            this.processTabOnPopup(e, popupWrapper);\n            return;\n        }\n        if (target.classList.contains(cls.ROOT)) {\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n            var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n            if (selectedAppointments.length > 0) {\n                target = selectedAppointments[selectedAppointments.length - 1];\n            }\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!isReverse && target.getAttribute('data-guid') === appointments[appointments.length - 1].getAttribute('data-guid') ||\n                isReverse && target.getAttribute('data-guid') === appointments[0].getAttribute('data-guid')) {\n                return;\n            }\n            if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n                this.selectAppointment(isReverse, target);\n                e.preventDefault();\n            }\n            return;\n        }\n        var selectedCells = this.parent.getSelectedElements();\n        if (selectedCells.length > 0 && !target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n            this.selectAppointmentElementFromWorkCell(isReverse, target);\n            e.preventDefault();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.processDelete = function (e) {\n        if (document.activeElement.classList.contains(cls.APPOINTMENT_CLASS)) {\n            addClass([document.activeElement], cls.APPOINTMENT_BORDER);\n            this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n            this.parent.quickPopup.deleteClick();\n        }\n    };\n    KeyboardInteraction.prototype.processEscape = function () {\n        this.parent.quickPopup.onClosePopup();\n        this.parent.quickPopup.morePopup.hide();\n        if (this.parent.headerModule) {\n            this.parent.headerModule.hideHeaderPopup();\n        }\n    };\n    KeyboardInteraction.prototype.isPreventAction = function (e) {\n        var target = closest(e.target, '.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Get module name.\n     */\n    KeyboardInteraction.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * To destroy the keyboard module.\n     * @return {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.destroy = function () {\n        this.removeEventListener();\n        this.keyboardModule.destroy();\n    };\n    return KeyboardInteraction;\n}());\nexport { KeyboardInteraction };\n","import { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module\n     * @private\n     */\n    function Data(dataSource, query) {\n        this.initDataManager(dataSource, query);\n    }\n    /**\n     * The function used to initialize dataManager and query\n     * @return {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     * @return {void}\n     * @private\n     */\n    Data.prototype.generateQuery = function (startDate, endDate) {\n        var query = this.query.clone();\n        if (startDate) {\n            query.addParams('StartDate', startDate.toISOString());\n        }\n        if (endDate) {\n            query.addParams('EndDate', endDate.toISOString());\n        }\n        return query;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @return {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        return this.dataManager.executeQuery(query);\n    };\n    return Data;\n}());\nexport { Data };\n","/**\n * Time zone\n */\nvar Timezone = /** @class */ (function () {\n    function Timezone() {\n    }\n    Timezone.prototype.offset = function (date, timezone) {\n        var localOffset = date.getTimezoneOffset();\n        try {\n            var convertedDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\n            if (!isNaN(convertedDate.getTime())) {\n                return ((date.getTime() - convertedDate.getTime()) / 60000) + localOffset;\n            }\n            return 0;\n        }\n        catch (error) {\n            return 0;\n        }\n    };\n    Timezone.prototype.convert = function (date, fromOffset, toOffset) {\n        if (typeof fromOffset === 'string') {\n            fromOffset = this.offset(date, fromOffset);\n        }\n        if (typeof toOffset === 'string') {\n            toOffset = this.offset(date, toOffset);\n        }\n        var fromLocalOffset = date.getTimezoneOffset();\n        date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n        var toLocalOffset = date.getTimezoneOffset();\n        return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n    };\n    Timezone.prototype.add = function (date, timezone) {\n        return this.convert(date, date.getTimezoneOffset(), timezone);\n    };\n    Timezone.prototype.remove = function (date, timezone) {\n        return this.convert(date, timezone, date.getTimezoneOffset());\n    };\n    Timezone.prototype.removeLocalOffset = function (date) {\n        return new Date(+date - (date.getTimezoneOffset() * 60000));\n    };\n    Timezone.prototype.getLocalTimezoneName = function () {\n        return window.Intl ?\n            Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n    };\n    return Timezone;\n}());\nexport { Timezone };\nexport var timezoneData = [\n    { Value: 'Pacific/Niue', Text: '(UTC-11:00) Niue' },\n    { Value: 'Pacific/Pago_Pago', Text: '(UTC-11:00) Pago Pago' },\n    { Value: 'Pacific/Honolulu', Text: '(UTC-10:00) Hawaii Time' },\n    { Value: 'Pacific/Rarotonga', Text: '(UTC-10:00) Rarotonga' },\n    { Value: 'Pacific/Tahiti', Text: '(UTC-10:00) Tahiti' },\n    { Value: 'Pacific/Marquesas', Text: '(UTC-09:30) Marquesas' },\n    { Value: 'America/Anchorage', Text: '(UTC-09:00) Alaska Time' },\n    { Value: 'Pacific/Gambier', Text: '(UTC-09:00) Gambier' },\n    { Value: 'America/Los_Angeles', Text: '(UTC-08:00) Pacific Time' },\n    { Value: 'America/Tijuana', Text: '(UTC-08:00) Pacific Time - Tijuana' },\n    { Value: 'America/Vancouver', Text: '(UTC-08:00) Pacific Time - Vancouver' },\n    { Value: 'America/Whitehorse', Text: '(UTC-08:00) Pacific Time - Whitehorse' },\n    { Value: 'Pacific/Pitcairn', Text: '(UTC-08:00) Pitcairn' },\n    { Value: 'America/Denver', Text: '(UTC-07:00) Mountain Time' },\n    { Value: 'America/Phoenix', Text: '(UTC-07:00) Mountain Time - Arizona' },\n    { Value: 'America/Mazatlan', Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan' },\n    { Value: 'America/Dawson_Creek', Text: '(UTC-07:00) Mountain Time - Dawson Creek' },\n    { Value: 'America/Edmonton', Text: '(UTC-07:00) Mountain Time - Edmonton' },\n    { Value: 'America/Hermosillo', Text: '(UTC-07:00) Mountain Time - Hermosillo' },\n    { Value: 'America/Yellowknife', Text: '(UTC-07:00) Mountain Time - Yellowknife' },\n    { Value: 'America/Belize', Text: '(UTC-06:00) Belize' },\n    { Value: 'America/Chicago', Text: '(UTC-06:00) Central Time' },\n    { Value: 'America/Mexico_City', Text: '(UTC-06:00) Central Time - Mexico City' },\n    { Value: 'America/Regina', Text: '(UTC-06:00) Central Time - Regina' },\n    { Value: 'America/Tegucigalpa', Text: '(UTC-06:00) Central Time - Tegucigalpa' },\n    { Value: 'America/Winnipeg', Text: '(UTC-06:00) Central Time - Winnipeg' },\n    { Value: 'America/Costa_Rica', Text: '(UTC-06:00) Costa Rica' },\n    { Value: 'America/El_Salvador', Text: '(UTC-06:00) El Salvador' },\n    { Value: 'Pacific/Galapagos', Text: '(UTC-06:00) Galapagos' },\n    { Value: 'America/Guatemala', Text: '(UTC-06:00) Guatemala' },\n    { Value: 'America/Managua', Text: '(UTC-06:00) Managua' },\n    { Value: 'America/Cancun', Text: '(UTC-05:00) America Cancun' },\n    { Value: 'America/Bogota', Text: '(UTC-05:00) Bogota' },\n    { Value: 'Pacific/Easter', Text: '(UTC-05:00) Easter Island' },\n    { Value: 'America/New_York', Text: '(UTC-05:00) Eastern Time' },\n    { Value: 'America/Iqaluit', Text: '(UTC-05:00) Eastern Time - Iqaluit' },\n    { Value: 'America/Toronto', Text: '(UTC-05:00) Eastern Time - Toronto' },\n    { Value: 'America/Guayaquil', Text: '(UTC-05:00) Guayaquil' },\n    { Value: 'America/Havana', Text: '(UTC-05:00) Havana' },\n    { Value: 'America/Jamaica', Text: '(UTC-05:00) Jamaica' },\n    { Value: 'America/Lima', Text: '(UTC-05:00) Lima' },\n    { Value: 'America/Nassau', Text: '(UTC-05:00) Nassau' },\n    { Value: 'America/Panama', Text: '(UTC-05:00) Panama' },\n    { Value: 'America/Port-au-Prince', Text: '(UTC-05:00) Port-au-Prince' },\n    { Value: 'America/Rio_Branco', Text: '(UTC-05:00) Rio Branco' },\n    { Value: 'America/Halifax', Text: '(UTC-04:00) Atlantic Time - Halifax' },\n    { Value: 'America/Barbados', Text: '(UTC-04:00) Barbados' },\n    { Value: 'Atlantic/Bermuda', Text: '(UTC-04:00) Bermuda' },\n    { Value: 'America/Boa_Vista', Text: '(UTC-04:00) Boa Vista' },\n    { Value: 'America/Caracas', Text: '(UTC-04:00) Caracas' },\n    { Value: 'America/Curacao', Text: '(UTC-04:00) Curacao' },\n    { Value: 'America/Grand_Turk', Text: '(UTC-04:00) Grand Turk' },\n    { Value: 'America/Guyana', Text: '(UTC-04:00) Guyana' },\n    { Value: 'America/La_Paz', Text: '(UTC-04:00) La Paz' },\n    { Value: 'America/Manaus', Text: '(UTC-04:00) Manaus' },\n    { Value: 'America/Martinique', Text: '(UTC-04:00) Martinique' },\n    { Value: 'America/Port_of_Spain', Text: '(UTC-04:00) Port of Spain' },\n    { Value: 'America/Porto_Velho', Text: '(UTC-04:00) Porto Velho' },\n    { Value: 'America/Puerto_Rico', Text: '(UTC-04:00) Puerto Rico' },\n    { Value: 'America/Santo_Domingo', Text: '(UTC-04:00) Santo Domingo' },\n    { Value: 'America/Thule', Text: '(UTC-04:00) Thule' },\n    { Value: 'America/St_Johns', Text: '(UTC-03:30) Newfoundland Time - St. Johns' },\n    { Value: 'America/Araguaina', Text: '(UTC-03:00) Araguaina' },\n    { Value: 'America/Asuncion', Text: '(UTC-03:00) Asuncion' },\n    { Value: 'America/Belem', Text: '(UTC-03:00) Belem' },\n    { Value: 'America/Argentina/Buenos_Aires', Text: '(UTC-03:00) Buenos Aires' },\n    { Value: 'America/Campo_Grande', Text: '(UTC-03:00) Campo Grande' },\n    { Value: 'America/Cayenne', Text: '(UTC-03:00) Cayenne' },\n    { Value: 'America/Cuiaba', Text: '(UTC-03:00) Cuiaba' },\n    { Value: 'America/Fortaleza', Text: '(UTC-03:00) Fortaleza' },\n    { Value: 'America/Godthab', Text: '(UTC-03:00) Godthab' },\n    { Value: 'America/Maceio', Text: '(UTC-03:00) Maceio' },\n    { Value: 'America/Miquelon', Text: '(UTC-03:00) Miquelon' },\n    { Value: 'America/Montevideo', Text: '(UTC-03:00) Montevideo' },\n    { Value: 'Antarctica/Palmer', Text: '(UTC-03:00) Palmer' },\n    { Value: 'America/Paramaribo', Text: '(UTC-03:00) Paramaribo' },\n    { Value: 'America/Punta_Arenas', Text: '(UTC-03:00) Punta Arenas' },\n    { Value: 'America/Recife', Text: '(UTC-03:00) Recife' },\n    { Value: 'Antarctica/Rothera', Text: '(UTC-03:00) Rothera' },\n    { Value: 'America/Bahia', Text: '(UTC-03:00) Salvador' },\n    { Value: 'America/Santiago', Text: '(UTC-03:00) Santiago' },\n    { Value: 'Atlantic/Stanley', Text: '(UTC-03:00) Stanley' },\n    { Value: 'America/Noronha', Text: '(UTC-02:00) Noronha' },\n    { Value: 'America/Sao_Paulo', Text: '(UTC-02:00) Sao Paulo' },\n    { Value: 'Atlantic/South_Georgia', Text: '(UTC-02:00) South Georgia' },\n    { Value: 'Atlantic/Azores', Text: '(UTC-01:00) Azores' },\n    { Value: 'Atlantic/Cape_Verde', Text: '(UTC-01:00) Cape Verde' },\n    { Value: 'America/Scoresbysund', Text: '(UTC-01:00) Scoresbysund' },\n    { Value: 'Africa/Abidjan', Text: '(UTC+00:00) Abidjan' },\n    { Value: 'Africa/Accra', Text: '(UTC+00:00) Accra' },\n    { Value: 'Africa/Bissau', Text: '(UTC+00:00) Bissau' },\n    { Value: 'Atlantic/Canary', Text: '(UTC+00:00) Canary Islands' },\n    { Value: 'Africa/Casablanca', Text: '(UTC+00:00) Casablanca' },\n    { Value: 'America/Danmarkshavn', Text: '(UTC+00:00) Danmarkshavn' },\n    { Value: 'Europe/Dublin', Text: '(UTC+00:00) Dublin' },\n    { Value: 'Africa/El_Aaiun', Text: '(UTC+00:00) El Aaiun' },\n    { Value: 'Atlantic/Faroe', Text: '(UTC+00:00) Faeroe' },\n    { Value: 'Etc/UTC', Text: '(UTC+00:00) UTC (no daylight saving)' },\n    { Value: 'Europe/Lisbon', Text: '(UTC+00:00) Lisbon' },\n    { Value: 'Europe/London', Text: '(UTC+00:00) London' },\n    { Value: 'Africa/Monrovia', Text: '(UTC+00:00) Monrovia' },\n    { Value: 'Atlantic/Reykjavik', Text: '(UTC+00:00) Reykjavik' },\n    { Value: 'UTC', Text: 'UTC' },\n    { Value: 'Africa/Algiers', Text: '(UTC+01:00) Algiers' },\n    { Value: 'Europe/Amsterdam', Text: '(UTC+01:00) Amsterdam' },\n    { Value: 'Europe/Andorra', Text: '(UTC+01:00) Andorra' },\n    { Value: 'Europe/Berlin', Text: '(UTC+01:00) Berlin' },\n    { Value: 'Europe/Brussels', Text: '(UTC+01:00) Brussels' },\n    { Value: 'Europe/Budapest', Text: '(UTC+01:00) Budapest' },\n    { Value: 'Europe/Belgrade', Text: '(UTC+01:00) Central European Time - Belgrade' },\n    { Value: 'Europe/Prague', Text: '(UTC+01:00) Central European Time - Prague' },\n    { Value: 'Africa/Ceuta', Text: '(UTC+01:00) Ceuta' },\n    { Value: 'Europe/Copenhagen', Text: '(UTC+01:00) Copenhagen' },\n    { Value: 'Europe/Gibraltar', Text: '(UTC+01:00) Gibraltar' },\n    { Value: 'Africa/Lagos', Text: '(UTC+01:00) Lagos' },\n    { Value: 'Europe/Luxembourg', Text: '(UTC+01:00) Luxembourg' },\n    { Value: 'Europe/Madrid', Text: '(UTC+01:00) Madrid' },\n    { Value: 'Europe/Malta', Text: '(UTC+01:00) Malta' },\n    { Value: 'Europe/Monaco', Text: '(UTC+01:00) Monaco' },\n    { Value: 'Africa/Ndjamena', Text: '(UTC+01:00) Ndjamena' },\n    { Value: 'Europe/Oslo', Text: '(UTC+01:00) Oslo' },\n    { Value: 'Europe/Paris', Text: '(UTC+01:00) Paris' },\n    { Value: 'Europe/Rome', Text: '(UTC+01:00) Rome' },\n    { Value: 'Europe/Stockholm', Text: '(UTC+01:00) Stockholm' },\n    { Value: 'Europe/Tirane', Text: '(UTC+01:00) Tirane' },\n    { Value: 'Africa/Tunis', Text: '(UTC+01:00) Tunis' },\n    { Value: 'Europe/Vienna', Text: '(UTC+01:00) Vienna' },\n    { Value: 'Europe/Warsaw', Text: '(UTC+01:00) Warsaw' },\n    { Value: 'Europe/Zurich', Text: '(UTC+01:00) Zurich' },\n    { Value: 'Asia/Amman', Text: '(UTC+02:00) Amman' },\n    { Value: 'Europe/Athens', Text: '(UTC+02:00) Athens' },\n    { Value: 'Asia/Beirut', Text: '(UTC+02:00) Beirut' },\n    { Value: 'Europe/Bucharest', Text: '(UTC+02:00) Bucharest' },\n    { Value: 'Africa/Cairo', Text: '(UTC+02:00) Cairo' },\n    { Value: 'Europe/Chisinau', Text: '(UTC+02:00) Chisinau' },\n    { Value: 'Asia/Damascus', Text: '(UTC+02:00) Damascus' },\n    { Value: 'Asia/Gaza', Text: '(UTC+02:00) Gaza' },\n    { Value: 'Europe/Helsinki', Text: '(UTC+02:00) Helsinki' },\n    { Value: 'Asia/Jerusalem', Text: '(UTC+02:00) Jerusalem' },\n    { Value: 'Africa/Johannesburg', Text: '(UTC+02:00) Johannesburg' },\n    { Value: 'Africa/Khartoum', Text: '(UTC+02:00) Khartoum' },\n    { Value: 'Europe/Kiev', Text: '(UTC+02:00) Kiev' },\n    { Value: 'Africa/Maputo', Text: '(UTC+02:00) Maputo' },\n    { Value: 'Europe/Kaliningrad', Text: '(UTC+02:00) Moscow-01 - Kaliningrad' },\n    { Value: 'Asia/Nicosia', Text: '(UTC+02:00) Nicosia' },\n    { Value: 'Europe/Riga', Text: '(UTC+02:00) Riga' },\n    { Value: 'Europe/Sofia', Text: '(UTC+02:00) Sofia' },\n    { Value: 'Europe/Tallinn', Text: '(UTC+02:00) Tallinn' },\n    { Value: 'Africa/Tripoli', Text: '(UTC+02:00) Tripoli' },\n    { Value: 'Europe/Vilnius', Text: '(UTC+02:00) Vilnius' },\n    { Value: 'Africa/Windhoek', Text: '(UTC+02:00) Windhoek' },\n    { Value: 'Asia/Baghdad', Text: '(UTC+03:00) Baghdad' },\n    { Value: 'Europe/Istanbul', Text: '(UTC+03:00) Istanbul' },\n    { Value: 'Europe/Minsk', Text: '(UTC+03:00) Minsk' },\n    { Value: 'Europe/Moscow', Text: '(UTC+03:00) Moscow+00 - Moscow' },\n    { Value: 'Africa/Nairobi', Text: '(UTC+03:00) Nairobi' },\n    { Value: 'Asia/Qatar', Text: '(UTC+03:00) Qatar' },\n    { Value: 'Asia/Riyadh', Text: '(UTC+03:00) Riyadh' },\n    { Value: 'Antarctica/Syowa', Text: '(UTC+03:00) Syowa' },\n    { Value: 'Asia/Tehran', Text: '(UTC+03:30) Tehran' },\n    { Value: 'Asia/Baku', Text: '(UTC+04:00) Baku' },\n    { Value: 'Asia/Dubai', Text: '(UTC+04:00) Dubai' },\n    { Value: 'Indian/Mahe', Text: '(UTC+04:00) Mahe' },\n    { Value: 'Indian/Mauritius', Text: '(UTC+04:00) Mauritius' },\n    { Value: 'Europe/Samara', Text: '(UTC+04:00) Moscow+01 - Samara' },\n    { Value: 'Indian/Reunion', Text: '(UTC+04:00) Reunion' },\n    { Value: 'Asia/Tbilisi', Text: '(UTC+04:00) Tbilisi' },\n    { Value: 'Asia/Yerevan', Text: '(UTC+04:00) Yerevan' },\n    { Value: 'Asia/Kabul', Text: '(UTC+04:30) Kabul' },\n    { Value: 'Asia/Aqtau', Text: '(UTC+05:00) Aqtau' },\n    { Value: 'Asia/Aqtobe', Text: '(UTC+05:00) Aqtobe' },\n    { Value: 'Asia/Ashgabat', Text: '(UTC+05:00) Ashgabat' },\n    { Value: 'Asia/Dushanbe', Text: '(UTC+05:00) Dushanbe' },\n    { Value: 'Asia/Karachi', Text: '(UTC+05:00) Karachi' },\n    { Value: 'Indian/Kerguelen', Text: '(UTC+05:00) Kerguelen' },\n    { Value: 'Indian/Maldives', Text: '(UTC+05:00) Maldives' },\n    { Value: 'Antarctica/Mawson', Text: '(UTC+05:00) Mawson' },\n    { Value: 'Asia/Yekaterinburg', Text: '(UTC+05:00) Moscow+02 - Yekaterinburg' },\n    { Value: 'Asia/Tashkent', Text: '(UTC+05:00) Tashkent' },\n    { Value: 'Asia/Colombo', Text: '(UTC+05:30) Colombo' },\n    { Value: 'Asia/Kolkata', Text: '(UTC+05:30) India Standard Time' },\n    { Value: 'Asia/Katmandu', Text: '(UTC+05:45) Katmandu' },\n    { Value: 'Asia/Almaty', Text: '(UTC+06:00) Almaty' },\n    { Value: 'Asia/Bishkek', Text: '(UTC+06:00) Bishkek' },\n    { Value: 'Indian/Chagos', Text: '(UTC+06:00) Chagos' },\n    { Value: 'Asia/Dhaka', Text: '(UTC+06:00) Dhaka' },\n    { Value: 'Asia/Omsk', Text: '(UTC+06:00) Moscow+03 - Omsk' },\n    { Value: 'Asia/Thimphu', Text: '(UTC+06:00) Thimphu' },\n    { Value: 'Antarctica/Vostok', Text: '(UTC+06:00) Vostok' },\n    { Value: 'Indian/Cocos', Text: '(UTC+06:30) Cocos' },\n    { Value: 'Asia/Yangon', Text: '(UTC+06:30) Rangoon' },\n    { Value: 'Asia/Bangkok', Text: '(UTC+07:00) Bangkok' },\n    { Value: 'Indian/Christmas', Text: '(UTC+07:00) Christmas' },\n    { Value: 'Antarctica/Davis', Text: '(UTC+07:00) Davis' },\n    { Value: 'Asia/Saigon', Text: '(UTC+07:00) Hanoi' },\n    { Value: 'Asia/Hovd', Text: '(UTC+07:00) Hovd' },\n    { Value: 'Asia/Jakarta', Text: '(UTC+07:00) Jakarta' },\n    { Value: 'Asia/Krasnoyarsk', Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk' },\n    { Value: 'Asia/Brunei', Text: '(UTC+08:00) Brunei' },\n    { Value: 'Asia/Shanghai', Text: '(UTC+08:00) China Time - Beijing' },\n    { Value: 'Asia/Choibalsan', Text: '(UTC+08:00) Choibalsan' },\n    { Value: 'Asia/Hong_Kong', Text: '(UTC+08:00) Hong Kong' },\n    { Value: 'Asia/Kuala_Lumpur', Text: '(UTC+08:00) Kuala Lumpur' },\n    { Value: 'Asia/Macau', Text: '(UTC+08:00) Macau' },\n    { Value: 'Asia/Makassar', Text: '(UTC+08:00) Makassar' },\n    { Value: 'Asia/Manila', Text: '(UTC+08:00) Manila' },\n    { Value: 'Asia/Irkutsk', Text: '(UTC+08:00) Moscow+05 - Irkutsk' },\n    { Value: 'Asia/Singapore', Text: '(UTC+08:00) Singapore' },\n    { Value: 'Asia/Taipei', Text: '(UTC+08:00) Taipei' },\n    { Value: 'Asia/Ulaanbaatar', Text: '(UTC+08:00) Ulaanbaatar' },\n    { Value: 'Australia/Perth', Text: '(UTC+08:00) Western Time - Perth' },\n    { Value: 'Asia/Pyongyang', Text: '(UTC+08:30) Pyongyang' },\n    { Value: 'Asia/Dili', Text: '(UTC+09:00) Dili' },\n    { Value: 'Asia/Jayapura', Text: '(UTC+09:00) Jayapura' },\n    { Value: 'Asia/Yakutsk', Text: '(UTC+09:00) Moscow+06 - Yakutsk' },\n    { Value: 'Pacific/Palau', Text: '(UTC+09:00) Palau' },\n    { Value: 'Asia/Seoul', Text: '(UTC+09:00) Seoul' },\n    { Value: 'Asia/Tokyo', Text: '(UTC+09:00) Tokyo' },\n    { Value: 'Australia/Darwin', Text: '(UTC+09:30) Central Time - Darwin' },\n    { Value: 'Antarctica/DumontDUrville', Text: '(UTC+10:00) Dumont D\"Urville' },\n    { Value: 'Australia/Brisbane', Text: '(UTC+10:00) Eastern Time - Brisbane' },\n    { Value: 'Pacific/Guam', Text: '(UTC+10:00) Guam' },\n    { Value: 'Asia/Vladivostok', Text: '(UTC+10:00) Moscow+07 - Vladivostok' },\n    { Value: 'Pacific/Port_Moresby', Text: '(UTC+10:00) Port Moresby' },\n    { Value: 'Pacific / Chuuk', Text: '(UTC+10:00) Truk' },\n    { Value: 'Australia/Adelaide', Text: '(UTC+10:30) Central Time - Adelaide' },\n    { Value: 'Antarctica/Casey', Text: '(UTC+11:00) Casey' },\n    { Value: 'Australia/Hobart', Text: '(UTC+11:00) Eastern Time - Hobart' },\n    { Value: 'Australia/Sydney', Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney' },\n    { Value: 'Pacific/Efate', Text: '(UTC+11:00) Efate' },\n    { Value: 'Pacific/Guadalcanal', Text: '(UTC+11:00) Guadalcanal' },\n    { Value: 'Pacific/Kosrae', Text: '(UTC+11:00) Kosrae' },\n    { Value: 'Asia/Magadan', Text: '(UTC+11:00) Moscow+08 - Magadan' },\n    { Value: 'Pacific / Norfolk', Text: '(UTC+11:00) Norfolk' },\n    { Value: 'Pacific/Noumea', Text: '(UTC+11:00) Noumea' },\n    { Value: 'Pacific/Pohnpei', Text: '(UTC+11:00) Ponape' },\n    { Value: 'Pacific/Funafuti', Text: '(UTC+12:00) Funafuti' },\n    { Value: 'Pacific/Kwajalein', Text: '(UTC+12:00) Kwajalein' },\n    { Value: 'Pacific/Majuro', Text: '(UTC+12:00) Majuro' },\n    { Value: 'Asia/Kamchatka', Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy' },\n    { Value: 'Pacific / Nauru', Text: '(UTC+12:00) Nauru' },\n    { Value: 'Pacific/Tarawa', Text: '(UTC+12:00) Tarawa' },\n    { Value: 'Pacific/Wake', Text: '(UTC+12:00) Wake' },\n    { Value: 'Pacific/Wallis', Text: '(UTC+12:00) Wallis' },\n    { Value: 'Pacific/Auckland', Text: '(UTC+13:00) Auckland' },\n    { Value: 'Pacific/Enderbury', Text: '(UTC+13:00) Enderbury' },\n    { Value: 'Pacific/Fakaofo', Text: '(UTC+13:00) Fakaofo' },\n    { Value: 'Pacific/Fiji', Text: '(UTC+13:00) Fiji' },\n    { Value: 'Pacific/Tongatapu', Text: '(UTC+13:00) Tongatapu' },\n    { Value: 'Pacific/Apia', Text: '(UTC+14:00) Apia' },\n    { Value: 'Pacific/Kiritimati', Text: '(UTC+14:00) Kiritimati' }\n];\n","import { HijriParser, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar Gregorian = /** @class */ (function () {\n    function Gregorian() {\n    }\n    Gregorian.prototype.firstDateOfMonth = function (date) {\n        return new Date(date.getFullYear(), date.getMonth());\n    };\n    Gregorian.prototype.lastDateOfMonth = function (dt) {\n        return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n    };\n    Gregorian.prototype.isMonthStart = function (date) {\n        return (date.getDate() === 1);\n    };\n    Gregorian.prototype.getLeapYearDaysCount = function () {\n        return 366;\n    };\n    Gregorian.prototype.getYearDaysCount = function (date, interval) {\n        return ((date.getFullYear() + interval) % 4 === 0) ? 366 : 365;\n    };\n    Gregorian.prototype.getDate = function (date) {\n        return date.getDate();\n    };\n    Gregorian.prototype.getMonth = function (date) {\n        return (date.getMonth() + 1);\n    };\n    Gregorian.prototype.getFullYear = function (date) {\n        return date.getFullYear();\n    };\n    Gregorian.prototype.getYearLastDate = function (date, interval) {\n        return new Date(date.getFullYear() + interval, 0, 0);\n    };\n    Gregorian.prototype.getMonthDaysCount = function (date) {\n        return this.lastDateOfMonth(date).getDate();\n    };\n    Gregorian.prototype.getMonthStartDate = function (date) {\n        return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n    };\n    Gregorian.prototype.getMonthEndDate = function (date) {\n        date.setDate(1);\n        return new Date(date.setMonth(date.getMonth() + 1));\n    };\n    Gregorian.prototype.getExpectedDays = function (date, days) {\n        return days;\n    };\n    Gregorian.prototype.setDate = function (dateObj, date) {\n        dateObj.setDate(date);\n    };\n    Gregorian.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        if (!isNullOrUndefined(beginDate)) {\n            date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n        }\n        else {\n            date.setMonth(date.getMonth() + interval, startDate);\n        }\n    };\n    Gregorian.prototype.setMonth = function (date, interval, startDate) {\n        date.setFullYear(date.getFullYear());\n        date.setMonth(interval - 1);\n        date.setDate(startDate);\n    };\n    Gregorian.prototype.addYears = function (date, interval) {\n        date.setFullYear(date.getFullYear() + interval);\n    };\n    Gregorian.prototype.isSameMonth = function (date1, date2) {\n        return (date1.getMonth() === date2.getMonth());\n    };\n    Gregorian.prototype.checkMonth = function (date, months) {\n        return (months.indexOf(date.getMonth() + 1) === -1);\n    };\n    Gregorian.prototype.compareMonth = function (date1, date2) {\n        return (date1.getMonth() > date2.getMonth());\n    };\n    Gregorian.prototype.isSameYear = function (date1, date2) {\n        return (date1.getFullYear() === date2.getFullYear());\n    };\n    Gregorian.prototype.isLastMonth = function (date) {\n        return (date.getMonth() === 11);\n    };\n    Gregorian.prototype.isLeapYear = function (year, interval) {\n        return ((year + interval) % 4 === 0);\n    };\n    return Gregorian;\n}());\nexport { Gregorian };\nvar Islamic = /** @class */ (function () {\n    function Islamic() {\n    }\n    Islamic.prototype.firstDateOfMonth = function (date) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n        return gDate;\n    };\n    Islamic.prototype.lastDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, this.getDaysInMonth(hDate.month, hDate.year));\n        var finalGDate = new Date(gDate.getTime());\n        new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n        var finalHDate = this.getHijriDate(finalGDate);\n        if (hDate.month === finalHDate.month) {\n            return finalGDate;\n        }\n        finalHDate = HijriParser.getHijriDate(gDate);\n        if (hDate.month === finalHDate.month) {\n            return gDate;\n        }\n        return new Date(gDate.setDate(gDate.getDate() - 1));\n    };\n    Islamic.prototype.isMonthStart = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return (hijriDate.date === 1);\n    };\n    Islamic.prototype.getLeapYearDaysCount = function () {\n        return 355;\n    };\n    Islamic.prototype.getYearDaysCount = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n    };\n    Islamic.prototype.getDate = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.month;\n    };\n    Islamic.prototype.getFullYear = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.year;\n    };\n    Islamic.prototype.getYearLastDate = function (date, interval) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n        return gDate;\n    };\n    Islamic.prototype.getMonthDaysCount = function (date) {\n        var maxDate = this.lastDateOfMonth(date);\n        var hijriDate = this.getHijriDate(maxDate);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonthStartDate = function (date) {\n        var firstDate = this.firstDateOfMonth(date);\n        return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n    };\n    Islamic.prototype.getMonthEndDate = function (date) {\n        var lastDate = this.lastDateOfMonth(date);\n        lastDate.setDate(lastDate.getDate() + 1);\n        return new Date(lastDate.setMonth(lastDate.getMonth()));\n    };\n    Islamic.prototype.getExpectedDays = function (date, days) {\n        var hDate = this.getHijriDate(date);\n        var day = [];\n        for (var i = 0; i < days.length; i++) {\n            var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[i]);\n            day.push(gDate.getDate());\n        }\n        return day;\n    };\n    Islamic.prototype.setDate = function (dateObj, date) {\n        var hDate = HijriParser.getHijriDate(dateObj);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n        this.updateDateObj(dateObj, gDate);\n    };\n    Islamic.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        var firstDate = (!isNullOrUndefined(beginDate)) ? this.firstDateOfMonth(beginDate) : date;\n        var hDate = HijriParser.getHijriDate(firstDate);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.setMonth = function (date, interval, startDate) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.addYears = function (date, interval, monthValue) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.isSameMonth = function (date1, date2) {\n        var currentHijri = this.getHijriDate(date1);\n        var tempHijri = this.getHijriDate(date2);\n        return (currentHijri.month === tempHijri.month);\n    };\n    Islamic.prototype.checkMonth = function (date, months) {\n        var hDate = this.getHijriDate(date);\n        return (months.indexOf(hDate.month) === -1);\n    };\n    Islamic.prototype.compareMonth = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.month > hDate1.month);\n    };\n    Islamic.prototype.isSameYear = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.year === hDate1.year);\n    };\n    Islamic.prototype.isLastMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return (hDate.month === 12);\n    };\n    Islamic.prototype.updateDateObj = function (date, gDate) {\n        date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n    };\n    Islamic.prototype.isLeapYear = function (year, interval) {\n        return (14 + 11 * (year + interval)) % 30 < 11;\n    };\n    Islamic.prototype.getDaysInMonth = function (month, year) {\n        var length = 0;\n        length = 29 + ((month + 1) % 2);\n        if (month === 11 && this.isLeapYear(year, 0)) {\n            length++;\n        }\n        return length;\n    };\n    Islamic.prototype.getHijriDate = function (date) {\n        return HijriParser.getHijriDate(date);\n    };\n    return Islamic;\n}());\nexport { Islamic };\n","import { isNullOrUndefined, closest, extend, EventHandler, uniqueID } from '@syncfusion/ej2-base';\nimport { createElement, prepend, append, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\nimport { Timezone } from '../timezone/timezone';\nimport { generate } from '../../recurrence-editor/date-generator';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\n/**\n * EventBase for appointment rendering\n */\nvar EventBase = /** @class */ (function () {\n    /**\n     * Constructor for EventBase\n     */\n    function EventBase(parent) {\n        this.slots = [];\n        this.parent = parent;\n        this.timezone = new Timezone();\n    }\n    EventBase.prototype.processData = function (events, timeZonePropChanged, oldTimezone) {\n        var _this = this;\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var fields = this.parent.eventFields;\n        this.parent.eventsProcessed = [];\n        var processed = [];\n        var temp = 1;\n        var generateID = false;\n        if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n            generateID = true;\n        }\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            if (generateID) {\n                event_1[fields.id] = temp++;\n            }\n            if (typeof event_1[fields.startTime] === 'string') {\n                event_1[fields.startTime] = util.getDateFromString(event_1[fields.startTime]);\n            }\n            if (typeof event_1[fields.endTime] === 'string') {\n                event_1[fields.endTime] = util.getDateFromString(event_1[fields.endTime]);\n            }\n            if (timeZonePropChanged) {\n                this.processTimezoneChange(event_1, oldTimezone);\n            }\n            else {\n                this.processTimezone(event_1);\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID])) {\n                processed = processed.concat(this.generateOccurrence(event_1));\n            }\n            else {\n                event_1.Guid = this.generateGuid();\n                processed.push(event_1);\n            }\n        }\n        var eventData = processed.filter(function (data) { return !data[_this.parent.eventFields.isBlock]; });\n        this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n        var blockData = processed.filter(function (data) { return data[_this.parent.eventFields.isBlock]; });\n        blockData.forEach(function (eventObj) {\n            if (eventObj[fields.isAllDay]) {\n                eventObj[fields.startTime] = util.resetTime(eventObj[fields.startTime]);\n                eventObj[fields.endTime] = util.addDays(util.resetTime(eventObj[fields.endTime]), 1);\n            }\n        });\n        this.parent.blockProcessed = this.filterEvents(start, end, blockData);\n        return eventData;\n    };\n    EventBase.prototype.getProcessedEvents = function (eventCollection) {\n        if (eventCollection === void 0) { eventCollection = this.parent.eventsData; }\n        var processed = [];\n        for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {\n            var event_2 = _a[_i];\n            if (!isNullOrUndefined(event_2[this.parent.eventFields.recurrenceRule]) &&\n                isNullOrUndefined(event_2[this.parent.eventFields.recurrenceID])) {\n                processed = processed.concat(this.parent.eventBase.generateOccurrence(event_2));\n            }\n            else {\n                processed.push(event_2);\n            }\n        }\n        return processed;\n    };\n    EventBase.prototype.timezonePropertyChange = function (oldTimezone) {\n        var processed = this.processData(this.parent.eventsData, true, oldTimezone);\n        this.parent.notify(event.dataReady, { processedData: processed });\n    };\n    /** @private */\n    EventBase.prototype.timezoneConvert = function (eventData) {\n        var fields = this.parent.eventFields;\n        eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n        eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n        if (this.parent.timezone) {\n            var startTz = eventData[fields.startTimezone];\n            var endTz = eventData[fields.endTimezone];\n            eventData[fields.startTime] =\n                this.timezone.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n            eventData[fields.endTime] =\n                this.timezone.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n        }\n    };\n    EventBase.prototype.processTimezoneChange = function (event, oldTimezone) {\n        var fields = this.parent.eventFields;\n        if (oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.timezone.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n            event[fields.endTime] = this.timezone.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n        }\n        else if (!oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.timezone.add(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.timezone.add(event[fields.endTime], this.parent.timezone);\n        }\n        else if (oldTimezone && !this.parent.timezone) {\n            event[fields.startTime] = this.timezone.remove(event[fields.startTime], oldTimezone);\n            event[fields.endTime] = this.timezone.remove(event[fields.endTime], oldTimezone);\n        }\n    };\n    EventBase.prototype.processTimezone = function (event) {\n        var fields = this.parent.eventFields;\n        if (event[fields.startTimezone] || event[fields.endTimezone]) {\n            var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n            var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n            event[fields.startTime] = this.timezone.add(event[fields.startTime], startTimezone);\n            event[fields.endTime] = this.timezone.add(event[fields.endTime], endTimezone);\n            if (this.parent.timezone) {\n                var zone = this.parent.timezone;\n                event[fields.startTime] = this.timezone.convert(event[fields.startTime], startTimezone, zone);\n                event[fields.endTime] = this.timezone.convert(event[fields.endTime], endTimezone, zone);\n            }\n        }\n        else if (this.parent.timezone) {\n            event[fields.startTime] = this.timezone.add(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.timezone.add(event[fields.endTime], this.parent.timezone);\n        }\n    };\n    EventBase.prototype.filterBlockEvents = function (eventObj) {\n        var eStart = eventObj[this.parent.eventFields.startTime];\n        var eEnd = eventObj[this.parent.eventFields.endTime];\n        var resourceData;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var data = this.getGroupIndexFromEvent(eventObj);\n            resourceData = this.parent.resourceBase.lastResourceLevel[data];\n        }\n        return this.filterEvents(eStart, eEnd, this.parent.blockProcessed, resourceData);\n    };\n    EventBase.prototype.filterEvents = function (startDate, endDate, appointments, resourceTdData) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var fieldMapping = this.parent.eventFields;\n        var predicate = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate)).\n            and(new Predicate(fieldMapping.startTime, 'lessthan', endDate)).\n            or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n        var filter = new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));\n        if (resourceTdData) {\n            filter = this.filterEventsByResource(resourceTdData, filter);\n        }\n        return this.sortByTime(filter);\n    };\n    EventBase.prototype.filterEventsByRange = function (eventCollection, startDate, endDate) {\n        var filteredEvents = [];\n        if (startDate && endDate) {\n            filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n        }\n        else if (startDate && !endDate) {\n            var predicate = new Predicate(this.parent.eventFields.startTime, 'greaterthanorequal', startDate);\n            filteredEvents = new DataManager({ json: eventCollection }).executeLocal(new Query().where(predicate));\n        }\n        else if (!startDate && endDate) {\n            var predicate = new Predicate(this.parent.eventFields.endTime, 'lessthanorequal', endDate);\n            filteredEvents = new DataManager({ json: eventCollection }).executeLocal(new Query().where(predicate));\n        }\n        else {\n            filteredEvents = eventCollection;\n        }\n        return this.sortByTime(filteredEvents);\n    };\n    EventBase.prototype.filterEventsByResource = function (resourceTdData, appointments) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var predicate;\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var level = 0; level < resourceCollection.length; level++) {\n            var operator = this.parent.activeViewOptions.group.allowGroupEdit && resourceCollection[level].allowMultiple ?\n                'contains' : 'equal';\n            var tempPredicate = new Predicate(resourceCollection[level].field, operator, resourceTdData.groupOrder[level]);\n            predicate = predicate ? predicate.and(tempPredicate) : tempPredicate;\n        }\n        return new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));\n    };\n    EventBase.prototype.sortByTime = function (appointments) {\n        var fieldMapping = this.parent.eventFields;\n        appointments.sort(function (a, b) {\n            var d1 = a[fieldMapping.startTime];\n            var d2 = b[fieldMapping.startTime];\n            return d1.getTime() - d2.getTime();\n        });\n        return appointments;\n    };\n    EventBase.prototype.sortByDateTime = function (appointments) {\n        var fieldMapping = this.parent.eventFields;\n        appointments.sort(function (object1, object2) {\n            var d3 = object1[fieldMapping.startTime];\n            var d4 = object2[fieldMapping.startTime];\n            var d5 = object1[fieldMapping.endTime];\n            var d6 = object2[fieldMapping.endTime];\n            var d1 = d5.getTime() - d3.getTime();\n            var d2 = d6.getTime() - d4.getTime();\n            return (d3.getTime() - d4.getTime() || d2 - d1);\n        });\n        return appointments;\n    };\n    EventBase.prototype.getSmallestMissingNumber = function (array) {\n        var large = Math.max.apply(Math, array);\n        for (var i = 0; i < large; i++) {\n            if (array.indexOf(i) === -1) {\n                return i;\n            }\n        }\n        return large + 1;\n    };\n    EventBase.prototype.splitEventByDay = function (event) {\n        var eventFields = this.parent.eventFields;\n        var data = [];\n        var eventStartTime = event[eventFields.startTime];\n        var eventEndTime = event[eventFields.endTime];\n        var isDifferentDate = util.resetTime(new Date(eventStartTime.getTime())) <\n            util.resetTime(new Date(eventEndTime.getTime()));\n        if (isDifferentDate) {\n            var start = new Date(eventStartTime.getTime());\n            var end = util.addDays(util.resetTime(new Date(eventStartTime.getTime())), 1);\n            var endDate = (eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0) ?\n                eventEndTime : util.addDays(eventEndTime, 1);\n            var index = 1;\n            var eventLength = util.getDaysCount(eventStartTime.getTime(), endDate.getTime());\n            while (end <= eventEndTime) {\n                var app = extend({}, event);\n                app[eventFields.startTime] = start;\n                app[eventFields.endTime] = end;\n                app.data = { index: index, count: eventLength };\n                app.Guid = this.generateGuid();\n                app.isSpanned = true;\n                data.push(app);\n                start = end;\n                if ((new Date(start.getTime()).setHours(0, 0, 0, 0) === new Date(eventEndTime.getTime()).setHours(0, 0, 0, 0))\n                    && !(end.getTime() === eventEndTime.getTime())) {\n                    end = new Date(new Date(start.getTime()).setHours(eventEndTime.getHours(), eventEndTime.getMinutes()));\n                }\n                else {\n                    end = util.addDays(util.resetTime(new Date(start.getTime())), 1);\n                }\n                index++;\n            }\n        }\n        else {\n            data.push(event);\n        }\n        return data;\n    };\n    EventBase.prototype.splitEvent = function (event, dateRender) {\n        var fields = this.parent.eventFields;\n        var start = util.resetTime(new Date(event[fields.startTime] + '')).getTime();\n        var end = util.resetTime(new Date(event[fields.endTime] + '')).getTime();\n        if (util.getDateInMs(event[fields.endTime]) <= 0) {\n            var temp = util.addDays(util.resetTime(new Date(event[fields.endTime] + '')), -1).getTime();\n            end = start > temp ? start : temp;\n        }\n        var orgStart = start;\n        var orgEnd = end;\n        var ranges = [];\n        if (start !== end) {\n            if (start < dateRender[0].getTime()) {\n                start = dateRender[0].getTime();\n            }\n            if (end > dateRender[dateRender.length - 1].getTime()) {\n                end = dateRender[dateRender.length - 1].getTime();\n            }\n            var cStart = start;\n            for (var level = 0; level < this.slots.length; level++) {\n                var slot = this.slots[level];\n                var firstSlot = slot[0];\n                cStart = (cStart <= firstSlot && end >= firstSlot) ? firstSlot : cStart;\n                if (cStart > end || firstSlot > end) {\n                    break;\n                }\n                if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend &&\n                    this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n                    var startIndex = slot.indexOf(cStart);\n                    if (startIndex !== -1) {\n                        var endIndex = slot.indexOf(end);\n                        var hasBreak = endIndex !== -1;\n                        endIndex = hasBreak ? endIndex : slot.length - 1;\n                        var count = ((endIndex - startIndex) + 1);\n                        var isLeft = (slot[startIndex] !== orgStart);\n                        var isRight = (slot[endIndex] !== orgEnd);\n                        ranges.push(this.cloneEventObject(event, slot[startIndex], slot[endIndex], count, isLeft, isRight));\n                        if (hasBreak) {\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n                        var availSlot = [];\n                        for (var i = 0; i < slot.length; i++) {\n                            if (this.dateInRange(slot[i], orgStart, orgEnd)) {\n                                availSlot.push(slot[i]);\n                            }\n                        }\n                        if (availSlot.length > 0) {\n                            if (!this.parent.activeViewOptions.group.byDate) {\n                                var isLeft = (availSlot[0] !== orgStart);\n                                var isRight = (availSlot[availSlot.length - 1] !== orgEnd);\n                                ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));\n                            }\n                            else {\n                                for (var _i = 0, availSlot_1 = availSlot; _i < availSlot_1.length; _i++) {\n                                    var slot_1 = availSlot_1[_i];\n                                    ranges.push(this.cloneEventObject(event, slot_1, slot_1, 1, (slot_1 !== orgStart), (slot_1 !== orgEnd)));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n        }\n        return ranges;\n    };\n    EventBase.prototype.cloneEventObject = function (event, start, end, count, isLeft, isRight) {\n        var fields = this.parent.eventFields;\n        var e = extend({}, event, null, true);\n        var data = { count: count, isLeft: isLeft, isRight: isRight };\n        data[fields.startTime] = event[fields.startTime];\n        data[fields.endTime] = event[fields.endTime];\n        e.data = data;\n        e[fields.startTime] = new Date(start);\n        e[fields.endTime] = new Date(end);\n        return e;\n    };\n    EventBase.prototype.dateInRange = function (date, start, end) {\n        return start <= date && date <= end;\n    };\n    EventBase.prototype.getSelectedEventElements = function (target) {\n        this.removeSelectedAppointmentClass();\n        if (this.parent.selectedElements.length <= 0) {\n            this.parent.selectedElements.push(target);\n        }\n        else {\n            var isAlreadySelected = this.parent.selectedElements.filter(function (element) {\n                return element.getAttribute('data-guid') === target.getAttribute('data-guid');\n            });\n            if (isAlreadySelected.length <= 0) {\n                var focusElements = [].slice.call(this.parent.element.\n                    querySelectorAll('div[data-guid=\"' + target.getAttribute('data-guid') + '\"]'));\n                for (var _i = 0, focusElements_1 = focusElements; _i < focusElements_1.length; _i++) {\n                    var element = focusElements_1[_i];\n                    this.parent.selectedElements.push(element);\n                }\n            }\n            else {\n                var selectedElements = this.parent.selectedElements.filter(function (element) {\n                    return element.getAttribute('data-guid') !== target.getAttribute('data-guid');\n                });\n                this.parent.selectedElements = selectedElements;\n            }\n        }\n        if (target && this.parent.selectedElements.length > 0) {\n            this.addSelectedAppointments(this.parent.selectedElements);\n        }\n        return this.parent.selectedElements;\n    };\n    EventBase.prototype.getSelectedEvents = function () {\n        var _this = this;\n        var eventSelect = [];\n        var elementSelect = [];\n        var selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n        selectAppointments.filter(function (element) {\n            eventSelect.push(_this.getEventByGuid(element.getAttribute('data-guid')));\n            elementSelect.push(element);\n        });\n        return {\n            event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n            element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n        };\n    };\n    EventBase.prototype.removeSelectedAppointmentClass = function () {\n        var selectedAppointments = this.getSelectedAppointments();\n        for (var _i = 0, selectedAppointments_1 = selectedAppointments; _i < selectedAppointments_1.length; _i++) {\n            var appointment = selectedAppointments_1[_i];\n            appointment.setAttribute('aria-selected', 'false');\n        }\n        removeClass(selectedAppointments, cls.APPOINTMENT_BORDER);\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            removeClass(selectedAppointments, cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    EventBase.prototype.addSelectedAppointments = function (cells) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            cell.setAttribute('aria-selected', 'true');\n        }\n        this.parent.removeSelectedClass();\n        addClass(cells, cls.APPOINTMENT_BORDER);\n    };\n    EventBase.prototype.getSelectedAppointments = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER + ',.' + cls.APPOINTMENT_CLASS + ':focus'));\n    };\n    EventBase.prototype.focusElement = function () {\n        var selectedCell = this.parent.getSelectedElements();\n        if (selectedCell.length > 0) {\n            if (this.parent.keyboardInteractionModule) {\n                var target = ((!isNullOrUndefined(this.parent.activeCellsData) &&\n                    this.parent.activeCellsData.element) || selectedCell[selectedCell.length - 1]);\n                this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n            }\n            return;\n        }\n        var selectedAppointments = this.getSelectedAppointments();\n        if (selectedAppointments.length > 0) {\n            selectedAppointments[selectedAppointments.length - 1].focus();\n            return;\n        }\n    };\n    EventBase.prototype.selectWorkCellByTime = function (eventsData) {\n        var target;\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            return target;\n        }\n        if (eventsData.length > 0) {\n            var selectedObject = eventsData[eventsData.length - 1];\n            var eventStartTime = selectedObject[this.parent.eventFields.startTime];\n            var nearestTime = new Date(+eventStartTime).setMinutes(0, 0, 0);\n            var isAllDay = this.isAllDayAppointment(selectedObject);\n            if (this.parent.currentView === 'Month' || isAllDay) {\n                nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n            }\n            var targetArea = void 0;\n            if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n                targetArea = this.parent.getAllDayRow();\n            }\n            else {\n                targetArea = this.parent.getContentTable();\n            }\n            var queryString = '[data-date=\"' + nearestTime + '\"]';\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n            }\n            target = targetArea.querySelector(queryString);\n            if (target) {\n                this.parent.activeCellsData = this.parent.getCellDetails(target);\n                if (this.parent.keyboardInteractionModule) {\n                    this.parent.keyboardInteractionModule.selectCells(false, target);\n                }\n                return target;\n            }\n        }\n        return target;\n    };\n    EventBase.prototype.getGroupIndexFromEvent = function (eventData) {\n        var groupOrder = [];\n        var groupIndex = 0;\n        for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n            var resourceData = _a[_i];\n            groupOrder.push(eventData[resourceData.field]);\n        }\n        this.parent.resourceBase.lastResourceLevel.forEach(function (resource) {\n            var count;\n            var order = resource.groupOrder;\n            order.forEach(function (resIndex, index) {\n                var resValue = (groupOrder[index] instanceof Array) ? groupOrder[index][index] : groupOrder[index];\n                if (resValue === resIndex) {\n                    count = count ? count + 1 : 1;\n                }\n            });\n            if (order.length === count) {\n                groupIndex = resource.groupIndex;\n            }\n        });\n        return groupIndex;\n    };\n    EventBase.prototype.isAllDayAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var isAllDay = event[fieldMapping.isAllDay];\n        var isFullDay = ((event[fieldMapping.endTime].getTime() - event[fieldMapping.startTime].getTime())\n            / util.MS_PER_DAY) >= 1;\n        return (isAllDay || isFullDay) ? true : false;\n    };\n    EventBase.prototype.addEventListener = function () {\n        this.parent.on(event.documentClick, this.appointmentBorderRemove, this);\n    };\n    EventBase.prototype.appointmentBorderRemove = function (event) {\n        var element = event.event.target;\n        if (closest(element, '.' + cls.APPOINTMENT_CLASS)) {\n            this.parent.removeSelectedClass();\n        }\n        else if (!closest(element, '.' + cls.POPUP_OPEN)) {\n            this.removeSelectedAppointmentClass();\n        }\n    };\n    EventBase.prototype.wireAppointmentEvents = function (element, isAllDay, event) {\n        if (isAllDay === void 0) { isAllDay = false; }\n        var isReadOnly = (!isNullOrUndefined(event)) ? event[this.parent.eventFields.isReadonly] : false;\n        EventHandler.add(element, 'click', this.eventClick, this);\n        if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n            EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n        }\n        if (!this.parent.activeViewOptions.readonly && !isReadOnly && ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) === -1) {\n            if (this.parent.resizeModule) {\n                this.parent.resizeModule.wireResizeEvent(element);\n            }\n            if (this.parent.dragAndDropModule) {\n                this.parent.dragAndDropModule.wireDragEvent(element, isAllDay);\n            }\n        }\n    };\n    EventBase.prototype.renderResizeHandler = function (element, spanEvent, isReadOnly) {\n        if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(spanEvent); _i < _a.length; _i++) {\n            var resizeEdge = _a[_i];\n            var resizeHandler = createElement('div', { className: cls.EVENT_RESIZE_CLASS });\n            switch (resizeEdge) {\n                case 'isLeft':\n                    if (!spanEvent.isLeft) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.RIGHT_RESIZE_HANDLER : cls.LEFT_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isRight':\n                    if (!spanEvent.isRight) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.LEFT_RESIZE_HANDLER : cls.RIGHT_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n                case 'isTop':\n                    if (!spanEvent.isTop) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.TOP_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isBottom':\n                    if (!spanEvent.isBottom) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.BOTTOM_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n            }\n        }\n    };\n    EventBase.prototype.eventClick = function (eventData) {\n        var _this = this;\n        var target = eventData.target;\n        if (target.classList.contains(cls.DRAG_CLONE_CLASS) || target.classList.contains(cls.RESIZE_CLONE_CLASS)) {\n            return;\n        }\n        var raiseClickEvent = function (isMultiple) {\n            _this.activeEventData(eventData, isMultiple);\n            var args = extend(_this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            _this.parent.trigger(event.eventClick, args);\n            return args.cancel;\n        };\n        if (eventData.ctrlKey && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n            this.parent.quickPopup.quickPopup.hide();\n            this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n            var target_1 = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n            this.getSelectedEventElements(target_1);\n            raiseClickEvent(false);\n            return;\n        }\n        this.removeSelectedAppointmentClass();\n        if (raiseClickEvent(true)) {\n            this.removeSelectedAppointmentClass();\n            return;\n        }\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            addClass([this.parent.activeEventData.element], cls.AGENDA_SELECTED_CELL);\n        }\n        this.parent.notify(event.eventClick, this.parent.activeEventData);\n    };\n    EventBase.prototype.eventDoubleClick = function (e) {\n        this.parent.quickPopup.quickPopupHide(true);\n        if (e.type === 'touchstart') {\n            this.activeEventData(e, true);\n        }\n        this.removeSelectedAppointmentClass();\n        if (!isNullOrUndefined(this.parent.activeEventData.event) &&\n            isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {\n            this.parent.currentAction = 'Save';\n            this.parent.eventWindow.openEditor(this.parent.activeEventData.event, 'Save');\n        }\n        else {\n            this.parent.currentAction = 'EditOccurrence';\n            this.parent.quickPopup.openRecurrenceAlert();\n        }\n    };\n    EventBase.prototype.getEventByGuid = function (guid) {\n        return new DataManager({ json: this.parent.eventsProcessed }).executeLocal(new Query().where('Guid', 'equal', guid))[0];\n    };\n    EventBase.prototype.generateGuid = function () {\n        return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = (c === 'x') ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n    EventBase.prototype.getEventIDType = function () {\n        if (this.parent.eventsData.length !== 0) {\n            return typeof (this.parent.eventsData[0][this.parent.eventFields.id]);\n        }\n        if (this.parent.blockData.length !== 0) {\n            return typeof (this.parent.blockData[0][this.parent.eventFields.id]);\n        }\n        return 'string';\n    };\n    EventBase.prototype.getEventMaxID = function (resourceId) {\n        var _this = this;\n        if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n            return 1;\n        }\n        var eventId;\n        var idType = this.getEventIDType();\n        if (idType === 'string') {\n            eventId = uniqueID().toString();\n        }\n        if (idType === 'number') {\n            var datas = this.parent.eventsData.concat(this.parent.blockData);\n            var maxId = Math.max.apply(Math, datas.map(function (event) { return event[_this.parent.eventFields.id]; }));\n            maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n            eventId = maxId + 1;\n        }\n        return eventId;\n    };\n    EventBase.prototype.activeEventData = function (eventData, isMultiple) {\n        var _this = this;\n        var target = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n        var guid = target.getAttribute('data-guid');\n        if (isMultiple) {\n            this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')));\n        }\n        var eventObject = this.getEventByGuid(guid);\n        if (eventObject && eventObject.isSpanned) {\n            eventObject = this.parent.eventsData.filter(function (obj) {\n                return obj[_this.parent.eventFields.id] === eventObject[_this.parent.eventFields.id];\n            })[0];\n        }\n        this.parent.activeEventData = { event: eventObject, element: target };\n    };\n    EventBase.prototype.generateOccurrence = function (event, viewDate) {\n        var fields = this.parent.eventFields;\n        var startDate = event[fields.startTime];\n        var endDate = event[fields.endTime];\n        var occurrenceCollection = [];\n        var currentViewDate = isNullOrUndefined(viewDate) ? this.parent.activeView.startDate() : viewDate;\n        var eventRule = event[fields.recurrenceRule];\n        var duration = endDate.getTime() - startDate.getTime();\n        currentViewDate = new Date(+currentViewDate - duration);\n        var dates = generate(startDate, eventRule, event[fields.recurrenceException], this.parent.firstDayOfWeek, undefined, currentViewDate, this.parent.calendarMode);\n        if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n            if (isNullOrUndefined(event.generatedDates)) {\n                event.generatedDates = { start: new Date(dates[0]), end: new Date(dates[dates.length - 1]) };\n            }\n            else {\n                if (dates[0] < event.generatedDates.start.getTime()) {\n                    event.generatedDates.start = new Date(dates[0]);\n                }\n                if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n                    event.generatedDates.end = new Date(dates[dates.length - 1]);\n                }\n            }\n        }\n        var date = dates.shift();\n        while (date) {\n            var clonedObject = extend({}, event, null, true);\n            clonedObject[fields.startTime] = new Date(date);\n            clonedObject[fields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n            clonedObject[fields.recurrenceID] = clonedObject[fields.id];\n            clonedObject.Guid = this.generateGuid();\n            occurrenceCollection.push(clonedObject);\n            date = dates.shift();\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getRecurrenceEvent = function (eventData) {\n        var eventFields = this.parent.eventFields;\n        var parentApp = new DataManager(this.parent.eventsData).\n            executeLocal(new Query().where(eventFields.id, 'equal', eventData[eventFields.recurrenceID]));\n        return parentApp[0];\n    };\n    EventBase.prototype.getOccurrencesByID = function (id) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        var parentObject = this.parent.eventsData.filter(function (obj) { return obj[fields.id] === id; });\n        for (var _i = 0, _a = parentObject; _i < _a.length; _i++) {\n            var event_3 = _a[_i];\n            if (!isNullOrUndefined(event_3[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_3));\n            }\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_4 = _a[_i];\n            if (!isNullOrUndefined(event_4[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_4));\n            }\n        }\n        var filter = occurrenceCollection.filter(function (obj) {\n            return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);\n        });\n        return filter;\n    };\n    EventBase.prototype.applyResourceColor = function (element, eventData, type, groupOrder, alpha) {\n        if (!this.parent.resourceBase) {\n            return;\n        }\n        var alphaColor = function (color, alpha) {\n            color = color.replace('#', '');\n            var r = parseInt(color.substring(0, color.length / 3), 16);\n            var g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n            var b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n            return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n        };\n        var color = this.parent.resourceBase.getResourceColor(eventData, groupOrder);\n        if (color) {\n            // tslint:disable-next-line:no-any\n            element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n        }\n    };\n    EventBase.prototype.createBlockAppointmentElement = function (record, resIndex) {\n        var eventSubject = (record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.BLOCK_APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n                'aria-readonly': 'true', 'aria-selected': 'false', 'aria-label': eventSubject\n            }\n        });\n        var templateElement;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            templateElement = this.parent.getAppointmentTemplate()(record);\n        }\n        else {\n            var appointmentSubject = createElement('div', {\n                className: cls.SUBJECT_CLASS, innerHTML: eventSubject\n            });\n            templateElement = [appointmentSubject];\n        }\n        append(templateElement, appointmentWrapper);\n        this.setWrapperAttributes(appointmentWrapper, resIndex);\n        return appointmentWrapper;\n    };\n    EventBase.prototype.setWrapperAttributes = function (appointmentWrapper, resIndex) {\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n    };\n    EventBase.prototype.getReadonlyAttribute = function (event) {\n        return (event[this.parent.eventFields.isReadonly]) ?\n            event[this.parent.eventFields.isReadonly] : 'false';\n    };\n    EventBase.prototype.isBlockRange = function (eventData) {\n        var _this = this;\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var isBlockAlert = false;\n        var fields = this.parent.eventFields;\n        eventCollection.forEach(function (event) {\n            var dataCol = [];\n            if (!isNullOrUndefined(event[fields.recurrenceRule]) && isNullOrUndefined(event[fields.recurrenceID])) {\n                dataCol = _this.parent.eventBase.generateOccurrence(event);\n            }\n            else {\n                dataCol.push(event);\n            }\n            for (var _i = 0, dataCol_1 = dataCol; _i < dataCol_1.length; _i++) {\n                var data = dataCol_1[_i];\n                var filterBlockEvents = _this.parent.eventBase.filterBlockEvents(data);\n                if (filterBlockEvents.length > 0) {\n                    isBlockAlert = true;\n                    break;\n                }\n            }\n        });\n        this.parent.uiStateValues.isBlock = isBlockAlert;\n        return isBlockAlert;\n    };\n    return EventBase;\n}());\nexport { EventBase };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\nimport * as events from '../base/constant';\nimport { Timezone } from '../timezone/timezone';\n/**\n * Schedule CRUD operations\n */\nvar Crud = /** @class */ (function () {\n    function Crud(parent) {\n        this.parent = parent;\n        this.timezone = new Timezone();\n    }\n    Crud.prototype.getQuery = function () {\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        return this.parent.dataModule.generateQuery(start, end);\n    };\n    Crud.prototype.getTable = function () {\n        if (this.parent.eventSettings.query) {\n            var query = this.parent.eventSettings.query.clone();\n            return query.fromTable;\n        }\n        return null;\n    };\n    Crud.prototype.refreshData = function (args) {\n        var _this = this;\n        var actionArgs = { requestType: args.requestType, cancel: false, data: args.data };\n        if (this.parent.dataModule.dataManager.dataSource.offline) {\n            this.parent.trigger(events.actionComplete, actionArgs);\n            this.parent.renderModule.refreshDataManager();\n            return;\n        }\n        else {\n            args.promise.then(function (e) {\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(events.actionComplete, actionArgs);\n                if (actionArgs.cancel) {\n                    return;\n                }\n                _this.parent.renderModule.refreshDataManager();\n            }).catch(function (e) {\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(events.actionFailure, { error: e });\n            });\n        }\n    };\n    Crud.prototype.addEvent = function (eventData) {\n        if (this.parent.eventBase.isBlockRange(eventData)) {\n            this.parent.quickPopup.openValidationError('blockAlert');\n            return;\n        }\n        var fields = this.parent.eventFields;\n        var promise = null;\n        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n        var args = {\n            cancel: false,\n            data: (eventData instanceof Array) ? eventData : [eventData],\n            requestType: 'eventCreate'\n        };\n        this.parent.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        if (eventData instanceof Array) {\n            for (var _i = 0, _a = eventData; _i < _a.length; _i++) {\n                var event_1 = _a[_i];\n                this.processCrudTimezone(event_1);\n                editParms.addedRecords.push(event_1);\n            }\n            promise =\n                this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, this.getTable(), this.getQuery());\n        }\n        else {\n            this.processCrudTimezone(eventData);\n            promise = this.parent.dataModule.dataManager.insert(eventData, this.getTable(), this.getQuery());\n        }\n        var crudArgs = { requestType: 'eventCreated', cancel: false, data: eventData, promise: promise };\n        this.refreshData(crudArgs);\n    };\n    Crud.prototype.saveEvent = function (event, action) {\n        if (this.parent.eventBase.isBlockRange(event)) {\n            this.parent.quickPopup.openValidationError('blockAlert');\n            return;\n        }\n        var fields = this.parent.eventFields;\n        var promise = null;\n        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n        var args = { requestType: 'eventChange', cancel: false };\n        var data = event;\n        if (isNullOrUndefined(action)) {\n            args.data = data;\n            this.parent.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            this.processCrudTimezone(data);\n            if ((event instanceof Array)) {\n                editParms.changedRecords = event;\n                this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, this.getTable(), this.getQuery());\n            }\n            else {\n                promise = this.parent.dataModule.dataManager.update(fields.id, event, this.getTable(), this.getQuery());\n            }\n        }\n        else {\n            var parentEvent = this.getParentEvent(data);\n            var query = void 0;\n            switch (action) {\n                case 'EditOccurrence':\n                    args.data = { occurrence: event, parent: parentEvent };\n                    this.parent.trigger(events.actionBegin, args);\n                    if (args.cancel) {\n                        return;\n                    }\n                    query = new Query().where('Guid', 'equal', data.Guid);\n                    var edited = new DataManager(this.parent.eventsProcessed).executeLocal(query);\n                    var exDate = this.excludeDateCheck(edited[0][fields.startTime], parentEvent[fields.recurrenceException]);\n                    if (exDate !== parentEvent[fields.recurrenceException]) {\n                        parentEvent[fields.recurrenceException] = exDate;\n                        data[fields.recurrenceID] = parentEvent[fields.id];\n                        this.processCrudTimezone(parentEvent);\n                        editParms.changedRecords.push(parentEvent);\n                        this.processCrudTimezone(data);\n                        editParms.addedRecords.push(data);\n                    }\n                    else {\n                        this.processCrudTimezone(data);\n                        editParms.changedRecords.push(data);\n                    }\n                    break;\n                case 'EditSeries':\n                    args.data = data;\n                    this.parent.trigger(events.actionBegin, args);\n                    if (args.cancel) {\n                        return;\n                    }\n                    query = new Query().where(fields.recurrenceID, 'equal', parentEvent[fields.id]);\n                    var delApp = new DataManager(this.parent.eventsData).executeLocal(query);\n                    data[fields.id] = parentEvent[fields.id];\n                    data[fields.recurrenceException] = this.parent.uiStateValues.isIgnoreOccurrence ?\n                        parentEvent[fields.recurrenceException] : null;\n                    data[fields.recurrenceID] = null;\n                    this.processCrudTimezone(data);\n                    editParms.changedRecords.push(data);\n                    if (!this.parent.uiStateValues.isIgnoreOccurrence) {\n                        for (var _i = 0, delApp_1 = delApp; _i < delApp_1.length; _i++) {\n                            var event_2 = delApp_1[_i];\n                            editParms.deletedRecords.push(event_2);\n                        }\n                    }\n                    this.parent.uiStateValues.isIgnoreOccurrence = false;\n                    break;\n            }\n            promise =\n                this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, this.getTable(), this.getQuery());\n        }\n        // if (!this.parent.activeView.isTimelineView()) {\n        //     this.parent.eventBase.selectWorkCellByTime(dataObj);\n        // }\n        var crudArgs = { requestType: 'eventChanged', cancel: false, data: args.data, promise: promise };\n        this.refreshData(crudArgs);\n    };\n    Crud.prototype.deleteEvent = function (id, action) {\n        var fields = this.parent.eventFields;\n        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n        var dataObj = [];\n        var normalEvent = [];\n        var recEvent = [];\n        switch (typeof id) {\n            case 'string':\n            case 'number':\n                dataObj = new DataManager(this.parent.eventsData).executeLocal(new Query().where(fields.id, 'equal', id));\n                break;\n            case 'object':\n                dataObj = (id instanceof Array) ? id : [id];\n                break;\n        }\n        for (var _i = 0, _a = dataObj; _i < _a.length; _i++) {\n            var event_3 = _a[_i];\n            (!isNullOrUndefined(event_3[fields.recurrenceRule])) ? recEvent.push(event_3) : normalEvent.push(event_3);\n        }\n        var args = { requestType: 'eventRemove', cancel: false };\n        if (action !== 'DeleteOccurrence') {\n            args.data = dataObj;\n            this.parent.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n        }\n        if (isNullOrUndefined(action) || normalEvent.length > 0) {\n            for (var _b = 0, normalEvent_1 = normalEvent; _b < normalEvent_1.length; _b++) {\n                var event_4 = normalEvent_1[_b];\n                editParms.deletedRecords.push(event_4);\n            }\n        }\n        if (recEvent.length > 0) {\n            switch (action) {\n                case 'Delete':\n                case 'DeleteOccurrence':\n                    for (var i = 0; i < recEvent.length; i++) {\n                        var parentEvent = this.getParentEvent(recEvent[i]);\n                        args.data = { occurrence: recEvent[i], parent: parentEvent };\n                        this.parent.trigger(events.actionBegin, args);\n                        if (args.cancel) {\n                            return;\n                        }\n                        parentEvent[fields.recurrenceException] =\n                            this.excludeDateCheck(recEvent[i][fields.startTime], parentEvent[fields.recurrenceException]);\n                        this.processCrudTimezone(parentEvent);\n                        editParms.changedRecords.push(parentEvent);\n                        if (recEvent[i][fields.id] !== parentEvent[fields.id]) {\n                            editParms.deletedRecords.push(recEvent[i]);\n                        }\n                    }\n                    break;\n                case 'DeleteSeries':\n                    for (var _c = 0, recEvent_1 = recEvent; _c < recEvent_1.length; _c++) {\n                        var app = recEvent_1[_c];\n                        var predicate = new Predicate(fields.id, 'equal', (app[fields.recurrenceID] || id)).\n                            or(new Predicate(fields.recurrenceID, 'equal', (app[fields.recurrenceID] || id)));\n                        var delApp = new DataManager(this.parent.eventsData).executeLocal(new Query().where(predicate));\n                        for (var _d = 0, delApp_2 = delApp; _d < delApp_2.length; _d++) {\n                            var event_5 = delApp_2[_d];\n                            editParms.deletedRecords.push(event_5);\n                        }\n                    }\n                    break;\n            }\n        }\n        var promise;\n        if (editParms.deletedRecords.length === 1 && editParms.changedRecords.length === 0) {\n            var deleteEvent = editParms.deletedRecords[0];\n            promise =\n                this.parent.dataModule.dataManager.remove(fields.id, deleteEvent, this.getTable(), this.getQuery());\n        }\n        else {\n            promise =\n                this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, this.getTable(), this.getQuery());\n        }\n        this.parent.eventBase.selectWorkCellByTime(dataObj);\n        var crudArgs = { requestType: 'eventRemoved', cancel: false, data: args.data, promise: promise };\n        this.refreshData(crudArgs);\n    };\n    Crud.prototype.getParentEvent = function (event) {\n        var fields = this.parent.eventFields;\n        var parentEvent = this.parent.eventBase.getRecurrenceEvent(event);\n        if (parentEvent[fields.startTimezone] || parentEvent[fields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(parentEvent);\n        }\n        return parentEvent;\n    };\n    Crud.prototype.processCrudTimezone = function (events) {\n        var fields = this.parent.eventFields;\n        if (events[fields.startTimezone] || events[fields.endTimezone]) {\n            var startTimezone = events[fields.startTimezone] || events[fields.endTimezone];\n            var endTimezone = events[fields.endTimezone] || events[fields.startTimezone];\n            if (this.parent.timezone) {\n                var zone = this.parent.timezone;\n                events[fields.startTime] = this.timezone.convert(events[fields.startTime], startTimezone, zone);\n                events[fields.endTime] = this.timezone.convert(events[fields.endTime], endTimezone, zone);\n                events[fields.startTime] = this.timezone.remove(events[fields.startTime], zone);\n                events[fields.endTime] = this.timezone.remove(events[fields.endTime], zone);\n            }\n            else {\n                events[fields.startTime] = this.timezone.remove(events[fields.startTime], startTimezone);\n                events[fields.endTime] = this.timezone.remove(events[fields.endTime], endTimezone);\n            }\n        }\n        else if (this.parent.timezone) {\n            events[fields.startTime] = this.timezone.remove(events[fields.startTime], this.parent.timezone);\n            events[fields.endTime] = this.timezone.remove(events[fields.endTime], this.parent.timezone);\n        }\n    };\n    Crud.prototype.excludeDateCheck = function (eventStartTime, exceptionDateList) {\n        var exDate = getRecurrenceStringFromDate(eventStartTime);\n        if (!isNullOrUndefined(exceptionDateList)) {\n            if (exceptionDateList.indexOf(exDate) === -1) {\n                exceptionDateList = !(isNullOrUndefined(exceptionDateList)) ? exceptionDateList + ',' + exDate : exDate;\n            }\n        }\n        else {\n            exceptionDateList = exDate;\n        }\n        return exceptionDateList;\n    };\n    return Crud;\n}());\nexport { Crud };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport * as cls from '../base/css-constant';\n/**\n * Appointment window field validation\n */\nvar FieldValidator = /** @class */ (function () {\n    function FieldValidator() {\n    }\n    FieldValidator.prototype.renderFormValidator = function (form, rules, element) {\n        var _this = this;\n        this.element = element;\n        this.formObj = new FormValidator(form, {\n            customPlacement: function (inputElement, error) {\n                _this.errorPlacement(inputElement, error);\n            },\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            }\n        });\n    };\n    FieldValidator.prototype.validationComplete = function (args) {\n        var elem = this.element.querySelector('#' + args.inputName + '_Error');\n        if (elem) {\n            elem.style.display = (args.status === 'failure') ? '' : 'none';\n        }\n    };\n    FieldValidator.prototype.errorPlacement = function (inputElement, error) {\n        var id = error.getAttribute('for');\n        var elem = this.element.querySelector('#' + id + '_Error');\n        if (!elem) {\n            this.createTooltip(inputElement, error, id, '');\n        }\n    };\n    FieldValidator.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.getBoundingClientRect();\n        if (this.element.classList.contains(cls.POPUP_WRAPPER_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    FieldValidator.prototype.destroyToolTip = function () {\n        if (this.element) {\n            var elements = [].slice.call(this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS));\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                remove(elem);\n            }\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    /**\n     * @hidden\n     */\n    FieldValidator.prototype.destroy = function () {\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n    };\n    return FieldValidator;\n}());\nexport { FieldValidator };\n","import { closest, EventHandler, isNullOrUndefined, formatUnit, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { Crud } from '../actions/crud';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */ (function () {\n    /**\n     * Constructor for QuickPopups\n     */\n    function QuickPopups(parent) {\n        this.isMultipleEventSelect = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.crudAction = new Crud(parent);\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    QuickPopups.prototype.render = function () {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.renderQuickPopup = function () {\n        var quickPopupWrapper = createElement('div', { className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close' });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } : { X: 'none', Y: 'fit' }),\n            position: (this.parent.isAdaptive ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1000 : 3)\n        });\n    };\n    QuickPopups.prototype.renderMorePopup = function () {\n        var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n        var moreEventWrapper = createElement('div', {\n            className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        this.parent.element.appendChild(moreEventWrapper);\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: 'relative',\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: { X: 'flip', Y: 'flip' },\n            viewPortElement: this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS),\n            zIndex: 2\n        });\n        var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    };\n    QuickPopups.prototype.renderQuickDialog = function () {\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: [\n                { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n                { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n                {\n                    buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                    click: this.dialogButtonClick.bind(this)\n                }\n            ],\n            cssClass: cls.QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        var dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n        }\n    };\n    QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n        var buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        EventHandler.add(element, 'click', clickEvent, this);\n    };\n    QuickPopups.prototype.quickDialogClass = function (action) {\n        var classList = [\n            cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS,\n            cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS\n        ];\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        removeClass([okButton, cancelButton], classList);\n        addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n                break;\n            case 'Delete':\n                addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n                break;\n        }\n    };\n    QuickPopups.prototype.applyFormValidation = function () {\n        var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element);\n    };\n    QuickPopups.prototype.openRecurrenceAlert = function () {\n        var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n        }\n        var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n        }\n        this.quickDialog.content =\n            this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteRecurrenceContent' : 'editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n        this.quickDialogClass('Recurrence');\n        this.showQuickDialog('RecurrenceAlert');\n    };\n    QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n        this.quickDialogClass('Alert');\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'dateValidation':\n                removeClass([cancelButton], cls.DISABLE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('recurrenceDateValidation');\n                break;\n            case 'createError':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                var dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n        }\n        this.showQuickDialog('RecurrenceValidationAlert');\n    };\n    QuickPopups.prototype.openDeleteAlert = function () {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    };\n    QuickPopups.prototype.openValidationError = function (type) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog('ValidationAlert');\n    };\n    QuickPopups.prototype.showQuickDialog = function (popupType) {\n        this.quickDialog.dataBind();\n        var eventProp = {\n            type: popupType, cancel: false, data: this.parent.activeEventData, element: this.quickDialog.element\n        };\n        this.parent.trigger(event.popupOpen, eventProp);\n        if (eventProp.cancel) {\n            return;\n        }\n        this.quickDialog.show();\n    };\n    QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n        var fields = this.parent.eventFields;\n        var moreEventContentEle = createElement('div', { className: cls.MORE_EVENT_CONTENT_CLASS });\n        var moreEventWrapperEle = createElement('div', { className: cls.MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: cls.MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n                var eventData = eventCollection_1[_i];\n                var eventText = (eventData[fields.subject] || this.parent.eventSettings.fields.subject.default);\n                var appointmentEle = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-selected': 'false', 'aria-grabbed': 'true', 'aria-label': eventText\n                    }\n                });\n                appointmentEle.appendChild(createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: eventText }));\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    appointmentEle.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    var iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentEle.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                }\n                var args = { data: eventData, element: appointmentEle, cancel: false };\n                this.parent.trigger(event.eventRendered, args);\n                if (!args.cancel) {\n                    moreEventWrapperEle.appendChild(appointmentEle);\n                    this.parent.eventBase.wireAppointmentEvents(appointmentEle, false, eventData);\n                    this.parent.eventBase.applyResourceColor(appointmentEle, eventData, 'backgroundColor', groupOrder);\n                }\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    };\n    QuickPopups.prototype.tapHoldEventPopup = function (e) {\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n        this.isMultipleEventSelect = false;\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        var guid = target.getAttribute('data-guid');\n        var eventObj = this.parent.eventBase.getEventByGuid(guid);\n        var eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" +\n            (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") +\n            (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") +\n            (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n            (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n        this.quickPopup.element.innerHTML = eventTemplate;\n        var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, false, editIcon, this.editClick);\n        var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, false, deleteIcon, this.deleteClick);\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isCellBlocked = function (args) {\n        var tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            this.parent.resourceBase.setResourceValues(tempObj, true, parseInt(targetCell.getAttribute('data-group-index'), 10));\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    };\n    QuickPopups.prototype.cellClick = function (args) {\n        if (!this.parent.showQuickInfo || this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args)) {\n            this.quickPopupHide();\n            return;\n        }\n        var targetEle = args.event.target;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: cls.NEW_EVENT_CLASS,\n                    innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n                });\n            }\n            var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        var isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement_1) {\n                subjectElement_1.focus();\n            }\n            return;\n        }\n        var temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        var cellDetails = this.getFormattedString(temp);\n        var quickCellPopup = createElement('div', { className: cls.CELL_POPUP_CLASS });\n        var templateArgs = extend({}, temp, { elementType: 'cell' }, true);\n        if (this.parent.quickInfoTemplates.header) {\n            append(this.parent.getQuickInfoTemplatesHeader()(templateArgs), quickCellPopup);\n        }\n        else {\n            var headerTemplate = createElement('div', {\n                className: cls.POPUP_HEADER_CLASS,\n                innerHTML: \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                    (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\")\n            });\n            quickCellPopup.appendChild(headerTemplate);\n        }\n        if (this.parent.quickInfoTemplates.content) {\n            append(this.parent.getQuickInfoTemplatesContent()(templateArgs), quickCellPopup);\n        }\n        else {\n            var tempStr = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td>\" +\n                (\"<form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" \") +\n                (\"name=\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") +\n                (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") +\n                (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") +\n                ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" +\n                    (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") +\n                    (cls.TEXT_ELLIPSIS + \"\\\">\" + this.getResourceText(args, 'cell') + \"</div></div>\") : '') + \"</td></tr></tbody></table>\");\n            var contentTemplate = createElement('div', {\n                className: cls.POPUP_CONTENT_CLASS, innerHTML: tempStr\n            });\n            quickCellPopup.appendChild(contentTemplate);\n        }\n        if (this.parent.quickInfoTemplates.footer) {\n            append(this.parent.getQuickInfoTemplatesFooter()(templateArgs), quickCellPopup);\n        }\n        else {\n            var footerTemplate = createElement('div', {\n                className: cls.POPUP_FOOTER_CLASS, innerHTML: \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' +\n                    cls.TEXT_ELLIPSIS) + \"\\\" title=\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\" +\n                    (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") +\n                    (this.l10n.getConstant('save') + \"</button>\")\n            });\n            quickCellPopup.appendChild(footerTemplate);\n        }\n        var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.quickPopupHide);\n        }\n        var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.dataBind();\n        this.applyFormValidation();\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.relateTo = target;\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isSameEventClick = function (events) {\n        var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.eventClick = function (events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n        }\n        else {\n            var isSameTarget = this.isSameEventClick(events);\n            if (isSameTarget) {\n                return;\n            }\n            var eventData = events.event;\n            var args = this.getFormattedString(eventData);\n            var quickEventPopup = createElement('div', { className: cls.EVENT_POPUP_CLASS });\n            var templateArgs = extend({}, eventData, { elementType: 'event' }, true);\n            if (this.parent.quickInfoTemplates.header) {\n                append(this.parent.getQuickInfoTemplatesHeader()(templateArgs), quickEventPopup);\n            }\n            else {\n                var headerTemplate = createElement('div', {\n                    className: cls.POPUP_HEADER_CLASS,\n                    innerHTML: \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                        (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") +\n                        (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") +\n                        (\"title=\\\"\" + args.eventSubject + \"\\\">\" + args.eventSubject + \"</div></div >\")\n                });\n                quickEventPopup.appendChild(headerTemplate);\n            }\n            if (this.parent.quickInfoTemplates.content) {\n                append(this.parent.getQuickInfoTemplatesContent()(templateArgs), quickEventPopup);\n            }\n            else {\n                var tempStr = \"<div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\" +\n                    (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_WRAPPER_CLASS + \" \") +\n                    (cls.TEXT_ELLIPSIS + \"\\\"><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\">\" + args.details + \"</div>\") +\n                    ((eventData[this.parent.eventFields.recurrenceRule] ? \"<div class=\\\"\" + cls.RECURRENCE_SUMMARY_CLASS + \" \" +\n                        (cls.TEXT_ELLIPSIS + \"\\\">\" + this.getRecurrenceSummary(eventData) + \"</div>\") : '') + \"</div></div>\") +\n                    (\"\" + (eventData[this.parent.eventFields.location] ? \"<div class=\\\"\" + cls.LOCATION_CLASS + \"\\\"><div class=\\\"\" +\n                        (cls.LOCATION_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.LOCATION_DETAILS_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\">\") +\n                        (eventData[this.parent.eventFields.location] + \"</div></div>\") : '')) +\n                    (\"\" + (eventData[this.parent.eventFields.startTimezone] ||\n                        eventData[this.parent.eventFields.endTimezone] ? \"<div class=\\\"\" + cls.TIME_ZONE_CLASS + \"\\\"><div class=\\\"\" +\n                        (cls.TIME_ZONE_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.TIME_ZONE_DETAILS_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\">\") +\n                        (this.getTimezone(eventData) + \" </div></div>\") : '')) +\n                    (\"\" + (eventData[this.parent.eventFields.description] ? \"<div class=\\\"\" + cls.DESCRIPTION_CLASS + \"\\\"><div class=\\\"\" +\n                        (cls.DESCRIPTION_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DESCRIPTION_DETAILS_CLASS + \" \") +\n                        (cls.TEXT_ELLIPSIS + \"\\\">\" + eventData[this.parent.eventFields.description] + \"</div></div>\") : '')) +\n                    (\"\" + (this.parent.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\"><div class=\\\"\" +\n                        (cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\">\") +\n                        (this.getResourceText(events, 'event') + \"</div></div>\") : ''));\n                var contentTemplate = createElement('div', {\n                    className: cls.POPUP_CONTENT_CLASS, innerHTML: tempStr\n                });\n                quickEventPopup.appendChild(contentTemplate);\n            }\n            if (this.parent.quickInfoTemplates.footer) {\n                append(this.parent.getQuickInfoTemplatesFooter()(templateArgs), quickEventPopup);\n            }\n            else {\n                var footerTemplate = createElement('div', {\n                    className: cls.POPUP_FOOTER_CLASS,\n                    innerHTML: \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" +\n                        (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") +\n                        (this.l10n.getConstant('delete') + \"</button>\"))\n                });\n                quickEventPopup.appendChild(footerTemplate);\n            }\n            var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, readonly, editIcon, this.editClick);\n            }\n            var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, readonly, deleteIcon, this.deleteClick);\n            }\n            var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.quickPopupHide);\n            }\n            var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', readonly, editButton, this.editClick);\n            }\n            var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', readonly, deleteButton, this.deleteClick);\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.dataBind();\n            if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n            this.beforeQuickPopupOpen(events.element);\n        }\n    };\n    QuickPopups.prototype.getResourceText = function (args, type) {\n        var resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            var resourceData = resourceCollection_1.dataSource;\n            var resourceIndex_1 = 0;\n            var eventData_1 = args.event;\n            resourceData.forEach(function (resource, index) {\n                if (resource[resourceCollection_1.idField] === eventData_1[resourceCollection_1.field]) {\n                    resourceIndex_1 = index;\n                }\n            });\n            resourceValue = resourceData[resourceIndex_1][resourceCollection_1.textField];\n        }\n        else {\n            if (type === 'event') {\n                var eventData = args.event;\n                var resourceData = void 0;\n                var lastResource_1;\n                for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource_1 = this.parent.resourceBase.resourceCollection[i];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                var resNames_1 = [];\n                var lastResourceData_1 = lastResource_1.dataSource;\n                resourceData.map(function (value) {\n                    var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n                    var text = lastResourceData_1[i][lastResource_1.textField];\n                    if (text) {\n                        resNames_1.push(text);\n                    }\n                });\n                resourceValue = resNames_1.join(', ');\n            }\n            else {\n                var argsData = args;\n                var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                var resourceDetails = this.parent.resourceBase.lastResourceLevel[groupIndex];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    };\n    QuickPopups.prototype.getFormattedString = function (eventData) {\n        var fields = this.parent.eventFields;\n        var eventSubject = (eventData[fields.subject] || this.l10n.getConstant('noTitle'));\n        var startDate = eventData[fields.startTime];\n        var endDate = eventData[fields.endTime];\n        var startDateDetails = this.getDateFormat(startDate, 'long');\n        var endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long') : this.getDateFormat(endDate, 'long');\n        var startTimeDetail = this.parent.getTimeString(startDate);\n        var endTimeDetail = this.parent.getTimeString(endDate);\n        var details = '';\n        var spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    };\n    QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n        this.quickPopupHide(true);\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var selectedDate = ((data.date).getTime()).toString();\n        var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = this.getDateFormat(data.date, 'E');\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        if (util.resetTime(data.date).getTime() === util.resetTime(new Date()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        }\n        if (this.parent.currentView.indexOf('Timeline') !== -1) {\n            var gIndex = target.getAttribute('data-group-index');\n            var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n            startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n            var tdDate = startDate.getTime().toString();\n            if (isNullOrUndefined(gIndex)) {\n                this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                    ' tbody tr td[data-date=\"' + tdDate + '\"]');\n            }\n            else {\n                this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                    ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n            }\n        }\n        else {\n            this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n        }\n        var eventProp = { type: 'EventContainer', data: data, cancel: false, element: this.morePopup.element };\n        this.parent.trigger(event.popupOpen, eventProp);\n        if (eventProp.cancel) {\n            return;\n        }\n        this.morePopup.show();\n    };\n    QuickPopups.prototype.saveClick = function () {\n        if (!this.quickPopup.element.querySelector('.' + cls.FORM_CLASS).ej2_instances[0].validate()) {\n            return;\n        }\n        var fields = this.parent.eventFields;\n        var saveObj = extend({}, this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS));\n        this.parent.eventWindow.setDefaultValueToObject(saveObj);\n        saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n        saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n        saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n        saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.setResourceValues(saveObj, true);\n        }\n        this.parent.currentAction = 'Add';\n        this.crudAction.addEvent(saveObj);\n        this.quickPopupHide();\n    };\n    QuickPopups.prototype.detailsClick = function () {\n        var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            var args = extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    QuickPopups.prototype.editClick = function () {\n        this.quickPopupHide(true);\n        var data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    };\n    QuickPopups.prototype.deleteClick = function () {\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    };\n    QuickPopups.prototype.updateMoreEventContent = function () {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        var startDate = this.parent.getDateFromElement(dateElement);\n        var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        var groupIndex = dateElement.getAttribute('data-group-index');\n        var data;\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        var moreElement = this.createMoreEventList(filteredEvents, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    };\n    QuickPopups.prototype.closeClick = function () {\n        this.quickPopupHide();\n        this.morePopup.hide();\n    };\n    QuickPopups.prototype.dialogButtonClick = function (event) {\n        this.quickDialog.hide();\n        var target = event.target;\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(this.parent.activeEventData.event, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.crudAction.deleteEvent(this.parent.activeEventData.event, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    var parentEvent = this.parent.eventBase.getRecurrenceEvent(this.parent.activeEventData.event);\n                    this.parent.eventWindow.openEditor(parentEvent, this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.crudAction.deleteEvent(this.parent.activeEventData.event, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n            this.crudAction.deleteEvent(this.parent.activeEventData.event, this.parent.currentAction);\n        }\n        else if (!cancelButton.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) &&\n                !cancelButton.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(this.l10n.getConstant('ok'));\n        }\n    };\n    QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n        var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            var titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    };\n    QuickPopups.prototype.getTimezone = function (event) {\n        var zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    };\n    QuickPopups.prototype.getRecurrenceSummary = function (event) {\n        var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    };\n    QuickPopups.prototype.getDateFormat = function (date, formatString) {\n        return this.parent.globalize.formatDate(date, { skeleton: formatString, calendar: this.parent.getCalendarMode() });\n    };\n    QuickPopups.prototype.getDataFromTarget = function (target) {\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Depricated cells data in quick popups\n        var eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        var cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    };\n    QuickPopups.prototype.beforeQuickDialogClose = function () {\n        this.parent.eventBase.focusElement();\n    };\n    QuickPopups.prototype.beforeQuickPopupOpen = function (target) {\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var popupType = this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n        var eventProp = {\n            type: popupType, cancel: false, data: this.getDataFromTarget(target),\n            target: target, element: this.quickPopup.element\n        };\n        this.parent.trigger(event.popupOpen, eventProp);\n        if (eventProp.cancel) {\n            this.destroyButtons();\n            if (eventProp.element.classList.contains(cls.POPUP_OPEN)) {\n                this.quickPopupClose();\n            }\n            this.quickPopup.element.innerHTML = '';\n            return;\n        }\n        var display = this.quickPopup.element.style.display;\n        this.quickPopup.element.style.display = 'block';\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.removeAttribute('style');\n            this.quickPopup.element.style.display = 'block';\n            this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n        }\n        else {\n            this.quickPopup.offsetX = 10;\n            this.quickPopup.collision = { X: 'none', Y: 'fit' };\n            this.quickPopup.position = { X: 'right', Y: 'top' };\n            this.quickPopup.dataBind();\n            this.quickPopup.refreshPosition(null, true);\n            var collide = isCollide(this.quickPopup.element, this.parent.element);\n            if (collide.indexOf(this.parent.enableRtl ? 'left' : 'right') > -1) {\n                this.quickPopup.offsetX = -target.offsetWidth - 10 - this.quickPopup.element.offsetWidth;\n                this.quickPopup.dataBind();\n                var leftCollide = isCollide(this.quickPopup.element, this.parent.element);\n                if (leftCollide.indexOf('left') > -1) {\n                    this.quickPopup.position = { X: 'center', Y: 'center' };\n                    this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                    this.quickPopup.offsetX = -(this.quickPopup.element.offsetWidth / 2);\n                    this.quickPopup.dataBind();\n                }\n            }\n            if (this.parent.virtualScrollModule && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                var element = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                var translateY = util.getTranslateY(element);\n                this.quickPopup.offsetY = translateY;\n                this.quickPopup.dataBind();\n            }\n        }\n        if (isEventPopup) {\n            this.applyEventColor();\n        }\n        this.quickPopup.element.style.display = display;\n        this.quickPopup.dataBind();\n        this.quickPopup.show();\n    };\n    QuickPopups.prototype.applyEventColor = function () {\n        var colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        // tslint:disable-next-line:no-any\n        var color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n        var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    };\n    QuickPopups.prototype.quickPopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n            var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    };\n    QuickPopups.prototype.quickPopupClose = function () {\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = cls.WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        this.destroyButtons();\n        this.quickPopup.element.innerHTML = '';\n    };\n    QuickPopups.prototype.morePopupOpen = function () {\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    };\n    QuickPopups.prototype.morePopupClose = function () {\n        var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    };\n    QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n        if (this.quickPopup.element.classList.contains('e-popup-open')) {\n            if (hideAnimation) {\n                var animation = this.quickPopup.hideAnimation;\n                this.quickPopup.hideAnimation = null;\n                this.quickPopup.hide();\n                this.quickPopup.hideAnimation = animation;\n            }\n            else {\n                this.quickPopup.hide();\n            }\n            this.isMultipleEventSelect = false;\n        }\n    };\n    QuickPopups.prototype.navigationClick = function (e) {\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            var date = this.parent.getDateFromElement(e.currentTarget);\n            if (!isNullOrUndefined(date) && !this.parent.isAdaptive) {\n                this.closeClick();\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView());\n            }\n        }\n    };\n    QuickPopups.prototype.documentClick = function (e) {\n        var target = e.event.target;\n        var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS +\n            ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS;\n        if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && !target.classList.contains(cls.MORE_INDICATOR_CLASS)\n            && (!closest(target, '.' + cls.POPUP_OPEN))) {\n            this.morePopup.hide();\n        }\n    };\n    QuickPopups.prototype.onClosePopup = function () {\n        this.quickPopupHide();\n        this.parent.eventBase.focusElement();\n    };\n    QuickPopups.prototype.addEventListener = function () {\n        this.parent.on(event.cellClick, this.cellClick, this);\n        this.parent.on(event.eventClick, this.eventClick, this);\n        this.parent.on(event.documentClick, this.documentClick, this);\n        this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n    };\n    QuickPopups.prototype.removeEventListner = function () {\n        this.parent.off(event.cellClick, this.cellClick);\n        this.parent.off(event.eventClick, this.eventClick);\n        this.parent.off(event.documentClick, this.documentClick);\n        this.parent.off(event.dataReady, this.updateMoreEventContent);\n    };\n    QuickPopups.prototype.destroyButtons = function () {\n        var buttonCollections = [].slice.call(this.quickPopup.element.querySelectorAll('.e-control.e-btn'));\n        buttonCollections.forEach(function (button) {\n            var instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        });\n    };\n    QuickPopups.prototype.destroy = function () {\n        this.fieldValidator.destroy();\n        this.removeEventListner();\n        this.destroyButtons();\n        this.quickPopup.destroy();\n        remove(this.quickPopup.element);\n        this.morePopup.destroy();\n        remove(this.morePopup.element);\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog.element = null;\n        }\n    };\n    return QuickPopups;\n}());\nexport { QuickPopups };\n","import { isNullOrUndefined, append, createElement } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Tooltip for Schedule\n */\nvar EventTooltip = /** @class */ (function () {\n    function EventTooltip(parent) {\n        this.parent = parent;\n        this.tooltipObj = new Tooltip({\n            content: 'No title',\n            position: 'BottomRight',\n            offsetY: 10,\n            mouseTrail: this.parent.isAdaptive ? false : true,\n            showTipPointer: false,\n            cssClass: this.parent.cssClass + ' ' + cls.EVENT_TOOLTIP_ROOT_CLASS,\n            target: this.getTargets(),\n            beforeRender: this.onBeforeRender.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n    }\n    EventTooltip.prototype.getTargets = function () {\n        var targets = [];\n        if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n            targets.push('.' + cls.RESOURCE_CELLS_CLASS);\n        }\n        if (this.parent.eventSettings.enableTooltip) {\n            targets.push('.' + cls.APPOINTMENT_CLASS);\n        }\n        return targets.join(',');\n    };\n    EventTooltip.prototype.onBeforeRender = function (args) {\n        if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n            return;\n        }\n        if (args.target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n            var resCollection = void 0;\n            if (this.parent.activeView.isTimelineView()) {\n                var index = parseInt(args.target.getAttribute('data-group-index'), 0);\n                resCollection = this.parent.resourceBase.lastResourceLevel[index];\n            }\n            else {\n                var rowIndex = args.target.parentNode.sectionRowIndex;\n                var cellIndex = args.target.cellIndex;\n                resCollection = this.parent.activeView.getColumnLevels()[rowIndex][cellIndex];\n            }\n            var data = {\n                resource: resCollection.resource,\n                resourceData: resCollection.resourceData\n            };\n            var contentContainer = createElement('div');\n            append(this.parent.getHeaderTooltipTemplate()(data), contentContainer);\n            this.setContent(contentContainer);\n            return;\n        }\n        var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n        if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n            var contentContainer = createElement('div');\n            append(this.parent.getEventTooltipTemplate()(record), contentContainer);\n            this.setContent(contentContainer);\n        }\n        else {\n            var globalize = this.parent.globalize;\n            var fields = this.parent.eventFields;\n            var eventStart = new Date('' + record[fields.startTime]);\n            var eventEnd = new Date('' + record[fields.endTime]);\n            eventEnd = (eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0) ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n            var startDate = util.resetTime(new Date('' + eventStart));\n            var endDate = util.resetTime(new Date('' + eventEnd));\n            var tooltipSubject = (record[fields.subject] || this.parent.eventSettings.fields.subject.default);\n            var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n            var startMonthDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'MMMd', calendar: this.parent.getCalendarMode()\n            });\n            var startMonthYearDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            var endMonthYearDate = globalize.formatDate(eventEnd, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            var startTime = globalize.formatDate(eventStart, {\n                type: 'time', skeleton: 'short', calendar: this.parent.getCalendarMode()\n            });\n            var endTime = globalize.formatDate(eventEnd, {\n                type: 'time', skeleton: 'short', calendar: this.parent.getCalendarMode()\n            });\n            var tooltipDetails = void 0;\n            if (startDate.getTime() === endDate.getTime()) {\n                tooltipDetails = globalize.formatDate(eventStart, {\n                    type: 'date', skeleton: 'long', calendar: this.parent.getCalendarMode()\n                });\n            }\n            else {\n                tooltipDetails = (startDate.getFullYear() === endDate.getFullYear()) ? (startMonthDate + ' - ' + endMonthYearDate) :\n                    (startMonthYearDate + ' - ' + endMonthYearDate);\n            }\n            var tooltipTime = (record[fields.isAllDay]) ? this.parent.localeObj.getConstant('allDay') :\n                (startTime + ' - ' + endTime);\n            var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' +\n                '<div class=\"e-location\">' + tooltipLocation + '</div>' +\n                '<div class=\"e-details\">' + tooltipDetails + '</div>' +\n                '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n            this.setContent(content);\n        }\n    };\n    EventTooltip.prototype.setContent = function (content) {\n        this.tooltipObj.setProperties({ content: content }, true);\n    };\n    EventTooltip.prototype.close = function () {\n        this.tooltipObj.close();\n    };\n    /**\n     * To destroy the event tooltip.\n     * @return {void}\n     * @private\n     */\n    EventTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        this.tooltipObj = null;\n    };\n    return EventTooltip;\n}());\nexport { EventTooltip };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, NotifyPropertyChanges, Event, Browser } from '@syncfusion/ej2-base';\nimport { getDefaultDateObject, getValue, cldrData, L10n, isNullOrUndefined, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { EventHandler, classList } from '@syncfusion/ej2-base';\nimport { extractObjectFromRule, generate, generateSummary, getRecurrenceStringFromDate, getCalendarUtil } from './date-generator';\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLABEL = 'e-end-on-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n    none: '',\n    daily: 'days',\n    weekly: 'weeks',\n    monthly: 'months',\n    yearly: 'years'\n};\nvar valueData = {\n    'sun': RULESUNDAY,\n    'mon': RULEMONDAY,\n    'tue': RULETUESDAY,\n    'wed': RULEWEDNESDAY,\n    'thu': RULETHURSDAY,\n    'fri': RULEFRIDAY,\n    'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\nvar RecurrenceEditor = /** @class */ (function (_super) {\n    __extends(RecurrenceEditor, _super);\n    /**\n     * Constructor for creating the widget\n     * @param  {object} options?\n     */\n    function RecurrenceEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.defaultLocale = {\n            none: 'None',\n            daily: 'Daily',\n            weekly: 'Weekly',\n            monthly: 'Monthly',\n            month: 'Month',\n            yearly: 'Yearly',\n            never: 'Never',\n            until: 'Until',\n            count: 'Count',\n            first: 'First',\n            second: 'Second',\n            third: 'Third',\n            fourth: 'Fourth',\n            last: 'Last',\n            repeat: 'Repeat',\n            repeatEvery: 'Repeat every',\n            on: 'Repeat On',\n            end: 'End',\n            onDay: 'Day',\n            days: 'Day(s)',\n            weeks: 'Week(s)',\n            months: 'Month(s)',\n            years: 'Year(s)',\n            every: 'every',\n            summaryTimes: 'time(s)',\n            summaryOn: 'on',\n            summaryUntil: 'until',\n            summaryRepeat: 'Repeats',\n            summaryDay: 'day(s)',\n            summaryWeek: 'week(s)',\n            summaryMonth: 'month(s)',\n            summaryYear: 'year(s)',\n            monthWeek: 'Month Week',\n            monthPosition: 'Month Position',\n            monthExpander: 'Month Expander',\n            yearExpander: 'Year Expander',\n            repeatInterval: 'Repeat Interval'\n        };\n        _this.renderStatus = false;\n        _this.dayButtons = [];\n        _this.monthButtons = [];\n        _this.calendarUtil = getCalendarUtil(_this.calendarMode);\n        return _this;\n    }\n    RecurrenceEditor.prototype.startState = function (freq, endOn, startDate) {\n        this.showFormElement();\n        this.updateForm(freq);\n        this.freshOnEndForm();\n        this.updateEndOnForm(endOn);\n        this.selectMonthDay(startDate);\n        this.updateUntilDate(startDate);\n        this.onMonthDay.setProperties({ checked: true });\n    };\n    RecurrenceEditor.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        // pre render code snippets\n    };\n    RecurrenceEditor.prototype.applyCustomClass = function (cssClass) {\n        if (cssClass) {\n            addClass([this.element], cssClass);\n        }\n    };\n    RecurrenceEditor.prototype.initialize = function () {\n        addClass([this.element], 'e-' + this.getModuleName());\n        this.renderComponent();\n        if (!isNullOrUndefined(this.value)) {\n            this.setRecurrenceRule(this.value);\n        }\n        else {\n            this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n            this.updateForm(this.repeatType.value.toString());\n            if (this.selectedType > 0) {\n                this.setProperties({ value: this.getRecurrenceRule() }, false);\n            }\n        }\n        this.applyCustomClass(this.cssClass);\n    };\n    RecurrenceEditor.prototype.triggerChangeEvent = function () {\n        if (this.renderStatus) {\n            var value = this.getRecurrenceRule();\n            this.trigger('change', { value: value });\n            this.setProperties({ value: value }, false);\n        }\n    };\n    RecurrenceEditor.prototype.resetDayButton = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        elements.forEach(function (element) { return removeClass([element], [ACTIVE, PRIMARY]); });\n    };\n    RecurrenceEditor.prototype.daySelection = function (dayIndex) {\n        this.resetDayButton();\n        var days = [0, 1, 2, 3, 4, 5, 6];\n        this.rotateArray(days, this.firstDayOfWeek);\n        var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n        if (element) {\n            addClass([element], [ACTIVE, PRIMARY]);\n        }\n    };\n    RecurrenceEditor.prototype.rtlClass = function (status) {\n        if (status) {\n            addClass([this.element], RTLCLASS);\n        }\n        else {\n            removeClass([this.element], RTLCLASS);\n        }\n    };\n    RecurrenceEditor.prototype.updateUntilDate = function (date) {\n        var tempDate = new Date(date.getTime());\n        tempDate.setDate(tempDate.getDate() + 60);\n        this.untilDateObj.setProperties({ value: tempDate });\n    };\n    RecurrenceEditor.prototype.selectMonthDay = function (date) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        this.monthDate.setProperties({ value: this.calendarUtil.getDate(date) });\n        this.monthWeekDays.setProperties({ value: valueData[weekday[date.getDay()]] });\n        this.monthValue.setProperties({ value: '' + this.calendarUtil.getMonth(date) });\n        this.monthWeekPos.setProperties({ value: this.getDayPosition(date) });\n        this.daySelection(date.getDay());\n    };\n    RecurrenceEditor.prototype.updateForm = function (state) {\n        var _this = this;\n        this.repeatType.setProperties({ value: state });\n        var end = this.element.querySelector('.' + ENDON);\n        if (state === DAILY) {\n            classList(end, [FORMLEFT], [FORMRIGHT]);\n        }\n        else {\n            classList(end, [FORMRIGHT], [FORMLEFT]);\n        }\n        switch (state) {\n            case NONE:\n                neverClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case WEEKLY:\n                weekClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case MONTHLY:\n                monthClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case YEARLY:\n                yearClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case DAILY:\n                dailyClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.updateEndOnForm = function (state) {\n        var _this = this;\n        this.endType.setProperties({ value: state });\n        switch (state) {\n            case NEVER:\n                noEndClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case UNTIL:\n                endOnDateClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case COUNT:\n                endOnCountClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.freshOnEndForm = function () {\n        var _this = this;\n        noEndClassList.forEach(function (className) {\n            var element = _this.element.querySelector('.' + className);\n            if (element) {\n                removeClass([element], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.showFormElement = function () {\n        var _this = this;\n        neverClassList.forEach(function (className) { return removeClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n    };\n    RecurrenceEditor.prototype.renderDropdowns = function () {\n        var _this = this;\n        var self = this;\n        this.repeatType = new DropDownList({\n            //set the data to dataSource property\n            dataSource: this.getRepeatData(),\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: this.selectedType,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            placeholder: this.localeObj.getConstant(REPEAT),\n            htmlAttributes: { 'title': this.localeObj.getConstant(REPEAT) },\n            change: function (args) {\n                self.setProperties({ selectedType: args.value }, false);\n                self.element.querySelector('.' + REPEATCONTENT).innerHTML =\n                    self.localeObj.getConstant(contentType[args.value]);\n                self.showFormElement();\n                self.updateForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        // set placeholder to DropDownList input element\n        this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n        this.endType = new DropDownList({\n            dataSource: this.getEndData(),\n            popupWidth: this.getPopupWidth(),\n            enableRtl: this.enableRtl,\n            index: 1,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            change: function (args) {\n                self.freshOnEndForm();\n                self.updateEndOnForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n        var renderDropDownList = function (dropDownData) {\n            return new DropDownList({\n                dataSource: dropDownData,\n                popupWidth: _this.getPopupWidth(),\n                enableRtl: _this.enableRtl,\n                fields: {\n                    text: TEXTFIELD,\n                    value: VALUEFIELD\n                },\n                index: 1,\n                change: function (args) {\n                    self.onWeekDay.setProperties({ checked: true });\n                    self.resetFormValues();\n                    self.triggerChangeEvent();\n                }\n            });\n        };\n        this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n        this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n        this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n        this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n        this.monthValue = new DropDownList({\n            dataSource: this.getMonthData(),\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: 7,\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n    };\n    RecurrenceEditor.prototype.setDefaultValue = function () {\n        var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(REPEATINTERVAL)) {\n                instance.value = 1;\n                instance.dataBind();\n            }\n            else if (instance.element.classList.contains(ENDONCOUNT)) {\n                instance.value = 10;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.resetFormValues = function () {\n        var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n        for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {\n            var element = recurreneElement_1[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances[0];\n                if (instance.value) {\n                    instance.value = instance.value;\n                    instance.dataBind();\n                }\n                else {\n                    this.updateUntilDate(this.startDate);\n                }\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances[0];\n                instance.index = instance.index || 0;\n                instance.dataBind();\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances[0];\n                var value = void 0;\n                if (instance.element.classList.contains(REPEATINTERVAL)) {\n                    value = 1;\n                }\n                else if (instance.element.classList.contains(ENDONCOUNT)) {\n                    value = 10;\n                }\n                else {\n                    value = this.startDate.getDate();\n                }\n                instance.value = instance.value || value;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.getPopupWidth = function () {\n        return Browser.isDevice ? '100%' : 'auto';\n    };\n    RecurrenceEditor.prototype.renderDatePickers = function () {\n        var self = this;\n        this.untilDateObj = new DatePicker({\n            enableRtl: this.enableRtl,\n            min: this.minDate,\n            max: this.maxDate,\n            change: function (args) {\n                if (args.value) {\n                    self.triggerChangeEvent();\n                }\n            }\n        });\n        this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n    };\n    RecurrenceEditor.prototype.dayButtonRender = function () {\n        var _this = this;\n        var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        var self = this;\n        for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {\n            var btn = btns_1[_i];\n            var button = new Button({ isToggle: true, enableRtl: this.enableRtl }, btn);\n            this.dayButtons.push(button);\n            EventHandler.add(btn, 'click', function (args) {\n                var btns = [].slice.call(_this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n                var element = args.target;\n                if (!element.classList.contains(PRIMARY)) {\n                    addClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n                else if (btns.length > 1) {\n                    removeClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n            });\n        }\n    };\n    RecurrenceEditor.prototype.radioButtonRender = function () {\n        var self = this;\n        this.onMonthDay = new RadioButton({\n            label: this.localeObj.getConstant(RADIOLABEL),\n            enableRtl: this.enableRtl,\n            name: 'monthType',\n            value: 'day',\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n        this.monthButtons.push(this.onMonthDay);\n        this.onWeekDay = new RadioButton({\n            label: '',\n            name: 'monthType',\n            enableRtl: this.enableRtl,\n            value: 'daypos',\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n        this.monthButtons.push(this.onWeekDay);\n    };\n    RecurrenceEditor.prototype.numericTextboxRender = function () {\n        var self = this;\n        this.recurrenceCount = new NumericTextBox({\n            value: 10,\n            format: '#',\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            min: 1,\n            change: function (args) {\n                self.triggerChangeEvent();\n            }\n        });\n        this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n        this.monthDate = new NumericTextBox({\n            value: 1,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 31,\n            change: function (args) {\n                self.onMonthDay.setProperties({ checked: true });\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n        this.repeatInterval = new NumericTextBox({\n            value: 1,\n            format: '#',\n            min: 1,\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            placeholder: this.localeObj.getConstant(REPEATEVERY),\n            change: function (args) {\n                self.triggerChangeEvent();\n            }\n        });\n        this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n    };\n    RecurrenceEditor.prototype.renderComponent = function () {\n        this.setTemplate();\n        this.renderDropdowns();\n        this.renderDatePickers();\n        this.dayButtonRender();\n        this.radioButtonRender();\n        this.numericTextboxRender();\n    };\n    RecurrenceEditor.prototype.rotateArray = function (data, count) {\n        var temp;\n        for (var index = 0; index < count; index++) {\n            temp = data.shift();\n            data.push(temp);\n        }\n    };\n    RecurrenceEditor.prototype.getEndData = function () {\n        var endData = [NEVER, UNTIL, COUNT];\n        var self = this;\n        var dataSource = [];\n        endData.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: data });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayPosition = function (date) {\n        var temp = new Date(date.getTime());\n        var endDate = new Date(date.getTime());\n        var day = date.getDay();\n        var positionCollection = [];\n        temp = this.calendarUtil.getMonthStartDate(temp);\n        endDate = this.calendarUtil.getMonthEndDate(endDate);\n        while (temp < endDate) {\n            if (temp.getDay() === day) {\n                positionCollection.push(temp.getTime());\n            }\n            temp.setDate(temp.getDate() + 1);\n        }\n        if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n            return -1;\n        }\n        return (positionCollection.indexOf(date.getTime()) + 1);\n    };\n    RecurrenceEditor.prototype.getRepeatData = function () {\n        var data = [];\n        var self = this;\n        this.frequencies.forEach(function (element) {\n            var textValue = (element === NONE) ? NEVER : element;\n            data.push({ text: self.localeObj.getConstant(textValue), value: element });\n        });\n        return data;\n    };\n    RecurrenceEditor.prototype.getMonthPosData = function () {\n        var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n        var monthposValue = {\n            first: 1,\n            second: 2,\n            third: 3,\n            fourth: 4,\n            last: -1\n        };\n        var self = this;\n        var dataSource = [];\n        monthpos.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: monthposValue[data] });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayData = function (format) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        var dayData = [];\n        var cldrObj;\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            cldrObj = (getValue('days.stand-alone.' + format, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            cldrObj = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format, cldrData));\n        }\n        for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {\n            var obj = weekday_1[_i];\n            dayData.push({ text: getValue(obj, cldrObj), value: valueData[obj] });\n        }\n        return dayData;\n    };\n    RecurrenceEditor.prototype.getMonthData = function () {\n        var monthData = [];\n        var cldrObj;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            cldrObj = (getValue('months.stand-alone.wide', getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            cldrObj = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide', cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            monthData.push({\n                text: getValue(obj, cldrObj),\n                value: obj\n            });\n        }\n        return monthData;\n    };\n    RecurrenceEditor.prototype.setTemplate = function () {\n        var dayData = this.getDayData('narrow');\n        var fullDay = this.getDayData('wide');\n        this.element.innerHTML = '<div class=\"' + HEADER + '\">' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT +\n            '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' +\n            '</div><div class=\"' + INPUTWARAPPER + ' ' +\n            INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' +\n            '<td><input type=\"text\" tabindex=\"0\" class=\"' + REPEATINTERVAL +\n            '\"title=\"' + this.localeObj.getConstant('repeatInterval') + '\" /></td>' +\n            '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' +\n            '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<div class=\"' + YEAREXPANDERWRAPPER + '\">' +\n            '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' +\n            this.localeObj.getConstant('yearExpander') + '\"/>' +\n            '</div>' +\n            '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' +\n            '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' +\n            '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' +\n            this.localeObj.getConstant('monthExpander') + '\" />' +\n            '</div></td></tr>' +\n            '<tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' +\n            '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' +\n            '</div></td></tr></table>' +\n            '</div></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' +\n            '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' +\n            '</div></div>' +\n            '</div></div>';\n    };\n    RecurrenceEditor.prototype.getSelectedDaysData = function () {\n        var ruleData = RULEBYDAY + EQUAL;\n        var elements = this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY);\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var index = 0; index < elements.length; index++) {\n            ruleData += weekday[parseInt(elements[index].getAttribute('data-index'), 10)] + (index === (elements.length - 1) ? '' : COMMA);\n        }\n        return ruleData + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getSelectedMonthData = function () {\n        var ruleData;\n        if (this.onWeekDay.checked) {\n            ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON\n                + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n        }\n        else {\n            ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.getIntervalData = function () {\n        return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getEndOnCount = function () {\n        return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getYearMonthRuleData = function () {\n        return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.updateWeekButton = function (keys) {\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {\n            var obj = _a[_i];\n            var index = parseInt(obj.element.getAttribute('data-index'), 10);\n            if (keys.indexOf(weekday[index]) !== -1) {\n                obj.setProperties({ isPrimary: true });\n            }\n            else {\n                obj.setProperties({ isPrimary: false });\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateMonthUI = function () {\n        if (this.ruleObject.monthDay.length) {\n            this.monthDate.setProperties({ value: this.ruleObject.monthDay[0] });\n            this.onMonthDay.setProperties({ checked: true });\n        }\n        else {\n            this.onWeekDay.setProperties({ checked: true });\n            this.monthWeekPos.setProperties({ value: this.ruleObject.setPosition });\n            for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (valueData[key] === this.ruleObject.day[0]) {\n                    this.monthWeekDays.setProperties({ value: this.ruleObject.day[0] });\n                    break;\n                }\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateUI = function (repeat, state) {\n        this.repeatInterval.setProperties({ value: this.ruleObject.interval });\n        switch (state) {\n            case UNTIL:\n                this.untilDateObj.setProperties({ value: this.ruleObject.until });\n                break;\n            case COUNT:\n                this.recurrenceCount.setProperties({ value: this.ruleObject.count });\n                break;\n        }\n        switch (repeat) {\n            case WEEKLY:\n                this.updateWeekButton(this.ruleObject.day);\n                break;\n            case YEARLY:\n                this.monthValue.setProperties({ index: (this.ruleObject.month[0] - 1) });\n                this.updateMonthUI();\n                break;\n            case MONTHLY:\n                this.updateMonthUI();\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.getUntilData = function () {\n        if (!this.untilDateObj.value) {\n            return '';\n        }\n        var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n        return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.destroyComponents = function () {\n        if (!this.recurrenceCount.isDestroyed) {\n            this.recurrenceCount.destroy();\n        }\n        if (!this.monthDate.isDestroyed) {\n            this.monthDate.destroy();\n        }\n        if (!this.repeatInterval.isDestroyed) {\n            this.repeatInterval.destroy();\n        }\n        if (!this.untilDateObj.isDestroyed) {\n            this.untilDateObj.destroy();\n        }\n        if (!this.repeatType.isDestroyed) {\n            this.repeatType.destroy();\n        }\n        if (!this.endType.isDestroyed) {\n            this.endType.destroy();\n        }\n        if (!this.monthWeekPos.isDestroyed) {\n            this.monthWeekPos.destroy();\n        }\n        if (!this.monthWeekDays.isDestroyed) {\n            this.monthWeekDays.destroy();\n        }\n        if (!this.monthValue.isDestroyed) {\n            this.monthValue.destroy();\n        }\n        this.dayButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.dayButtons = [];\n        this.monthButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.monthButtons = [];\n    };\n    RecurrenceEditor.prototype.resetFields = function () {\n        this.startState(NONE, NEVER, this.startDate);\n        this.setDefaultValue();\n    };\n    RecurrenceEditor.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    RecurrenceEditor.prototype.getRuleSummary = function (rule) {\n        if (rule === void 0) { rule = this.getRecurrenceRule(); }\n        return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceDates = function (startDate, rule, excludeDate, maximumCount, viewDate) {\n        viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n        return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceRule = function () {\n        var ruleData = RULEFREQ + EQUAL;\n        switch (this.repeatType.value) {\n            case DAILY:\n                ruleData += RULEDAILY + SEMICOLON;\n                break;\n            case WEEKLY:\n                ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n                break;\n            case MONTHLY:\n                ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n                break;\n            case YEARLY:\n                ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n                break;\n            case NONE:\n                return '';\n        }\n        ruleData += this.getIntervalData();\n        switch (this.endType.value) {\n            case UNTIL:\n                ruleData += this.getUntilData();\n                break;\n            case COUNT:\n                ruleData += this.getEndOnCount();\n                break;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.setRecurrenceRule = function (rule, startDate) {\n        if (startDate === void 0) { startDate = this.startDate; }\n        if (!rule) {\n            this.repeatType.setProperties({ value: NONE });\n        }\n        this.ruleObject = extractObjectFromRule(rule);\n        var endon = this.ruleObject.count ? COUNT : (this.ruleObject.until ? UNTIL : NEVER);\n        switch (this.ruleObject.freq) {\n            case RULEDAILY:\n                this.startState(DAILY, endon, startDate);\n                this.updateUI(DAILY, endon);\n                break;\n            case RULEWEEKLY:\n                this.startState(WEEKLY, endon, startDate);\n                this.updateUI(WEEKLY, endon);\n                break;\n            case RULEMONTHLY:\n                this.startState(MONTHLY, endon, startDate);\n                this.updateUI(MONTHLY, endon);\n                break;\n            case RULEYEARLY:\n                this.startState(YEARLY, endon, startDate);\n                this.updateUI(YEARLY, endon);\n                break;\n        }\n    };\n    /**\n     * Destroys the widget.\n     * @returns void\n     */\n    RecurrenceEditor.prototype.destroy = function () {\n        this.destroyComponents();\n        _super.prototype.destroy.call(this);\n        var removeClasses = ['e-' + this.getModuleName()];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n        this.element.innerHTML = '';\n    };\n    /**\n     * Get component name.\n     * @returns string\n     * @private\n     */\n    RecurrenceEditor.prototype.getModuleName = function () {\n        return 'recurrenceeditor';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @returns string\n     */\n    RecurrenceEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Initialize the control rendering\n     * @returns void\n     * @private\n     */\n    RecurrenceEditor.prototype.render = function () {\n        this.initialize();\n        this.rtlClass(this.enableRtl);\n        this.renderStatus = true;\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     * @private\n     */\n    RecurrenceEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'startDate':\n                    this.selectMonthDay(newProp.startDate);\n                    this.updateUntilDate(newProp.startDate);\n                    this.endType.setProperties({ index: 0 });\n                    break;\n                case 'enableRtl':\n                    this.rtlClass(newProp.enableRtl);\n                    break;\n                case 'cssClass':\n                    this.applyCustomClass(newProp.cssClass);\n                    break;\n                case 'selectedType':\n                    this.repeatType.setProperties({ index: this.selectedType });\n                    break;\n                case 'minDate':\n                    this.untilDateObj.setProperties({ minDate: this.minDate });\n                    break;\n                case 'maxDate':\n                    this.untilDateObj.setProperties({ maxDate: this.maxDate });\n                    break;\n                case 'value':\n                    if (this.getRecurrenceRule() !== this.value) {\n                        this.setRecurrenceRule(this.value);\n                    }\n                    break;\n                case 'calendarMode':\n                    this.calendarMode = newProp.calendarMode;\n                    this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n                    break;\n                case 'locale':\n                case 'frequencies':\n                case 'firstDayOfWeek':\n                    this.refresh();\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])\n    ], RecurrenceEditor.prototype, \"frequencies\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property(new Date())\n    ], RecurrenceEditor.prototype, \"startDate\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], RecurrenceEditor.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property(new Date(1900, 1, 1))\n    ], RecurrenceEditor.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 12, 31))\n    ], RecurrenceEditor.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"selectedType\", void 0);\n    __decorate([\n        Event()\n    ], RecurrenceEditor.prototype, \"change\", void 0);\n    RecurrenceEditor = __decorate([\n        NotifyPropertyChanges\n    ], RecurrenceEditor);\n    return RecurrenceEditor;\n}(Component));\nexport { RecurrenceEditor };\n","import { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { Timezone, timezoneData } from '../timezone/timezone';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @class */ (function () {\n    /**\n     * Constructor for event window\n     */\n    function EventWindow(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.fieldValidator = new FieldValidator();\n        var timezone = new Timezone();\n        this.localTimezoneName = timezone.getLocalTimezoneName();\n        this.renderEventWindow();\n    }\n    EventWindow.prototype.renderEventWindow = function () {\n        var dialogContent = this.getEventWindowContent();\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        if (this.parent.isAdaptive) {\n            this.dialogObject = new Dialog({\n                animationSettings: { effect: 'Zoom' },\n                content: dialogContent,\n                cssClass: cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS,\n                enableRtl: this.parent.enableRtl,\n                header: '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                    this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>',\n                height: '100%',\n                isModal: true,\n                showCloseIcon: false,\n                target: document.body,\n                visible: false,\n                beforeOpen: this.onBeforeOpen.bind(this),\n                beforeClose: this.onBeforeClose.bind(this)\n            });\n        }\n        else {\n            this.dialogObject = new Dialog({\n                animationSettings: { effect: 'Zoom' },\n                buttons: [{\n                        buttonModel: { content: this.l10n.getConstant('deleteButton'), cssClass: cls.EVENT_WINDOW_DELETE_BUTTON_CLASS },\n                        click: this.eventDelete.bind(this)\n                    }, {\n                        buttonModel: {\n                            content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                            isPrimary: true\n                        },\n                        click: this.eventSave.bind(this)\n                    }, {\n                        buttonModel: { cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                        click: this.dialogClose.bind(this)\n                    }],\n                content: dialogContent,\n                cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n                enableRtl: this.parent.enableRtl,\n                header: '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>',\n                isModal: true,\n                showCloseIcon: true,\n                target: document.body,\n                visible: false,\n                width: '500px',\n                beforeOpen: this.onBeforeOpen.bind(this),\n                beforeClose: this.onBeforeClose.bind(this)\n            });\n        }\n        this.dialogObject.appendTo(this.element);\n        addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n        if (this.parent.isAdaptive) {\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n        }\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.refresh = function () {\n        this.destroy();\n        this.renderEventWindow();\n    };\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\n        if (this.recurrenceEditor) {\n            var recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    };\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n        this.parent.removeNewEventElement();\n        this.parent.quickPopup.quickPopupHide(true);\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n        switch (type) {\n            case 'Add':\n                this.cellClickAction = !isEventData;\n                this.parent.activeCellsData = data;\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    };\n    EventWindow.prototype.setDialogContent = function () {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n    };\n    EventWindow.prototype.onBeforeOpen = function (args) {\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        this.parent.trigger(event.popupOpen, eventProp);\n        args.cancel = eventProp.cancel;\n        this.duration = this.cellClickAction ? eventProp.duration : null;\n        this.refreshDateTimePicker(this.duration);\n        if (this.cellClickAction && eventProp.duration !== this.getSlotDuration() && isNullOrUndefined(this.parent.editorTemplate)) {\n            var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n            endObj.value = new Date(startObj.value.getTime() + (util.MS_PER_MINUTE * eventProp.duration));\n            endObj.dataBind();\n        }\n    };\n    EventWindow.prototype.onBeforeClose = function () {\n        this.parent.eventBase.focusElement();\n    };\n    EventWindow.prototype.getEventWindowContent = function () {\n        var container = createElement('div', { className: cls.FORM_CONTAINER_CLASS });\n        var form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: cls.FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            append(this.parent.getEditorTemplate()(), form);\n        }\n        else {\n            var content = this.getDefaultEventWindowContent();\n            form.appendChild(content);\n        }\n        container.appendChild(form);\n        return container;\n    };\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\n        var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        var titleDiv = this.renderTextBox(cls.SUBJECT_CLASS);\n        var locationDiv = this.renderTextBox(cls.LOCATION_CLASS);\n        titleLocationDiv.appendChild(titleDiv);\n        titleLocationDiv.appendChild(locationDiv);\n        var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n        var startDateTimeDiv = this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this));\n        var endDateTimeDiv = this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS);\n        startEndDateTimeDiv.appendChild(startDateTimeDiv);\n        startEndDateTimeDiv.appendChild(endDateTimeDiv);\n        var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        var startTimezoneDiv = this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS);\n        var endTimezoneDiv = this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS);\n        timezoneParentDiv.appendChild(startTimezoneDiv);\n        timezoneParentDiv.appendChild(endTimezoneDiv);\n        var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        var allDayDiv = this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS);\n        var timezoneDiv = this.renderCheckBox(cls.TIME_ZONE_CLASS);\n        allDayTimezoneDiv.appendChild(allDayDiv);\n        allDayTimezoneDiv.appendChild(timezoneDiv);\n        var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n        var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n        var repeatEditConainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        var button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditConainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        repeatDiv.appendChild(repeatEditConainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n        var descriptionDiv = this.renderTextBox(cls.DESCRIPTION_CLASS);\n        description.appendChild(descriptionDiv);\n        parentDiv.appendChild(titleLocationDiv);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        parentDiv.appendChild(timezoneParentDiv);\n        parentDiv.appendChild(repeatParentDiv);\n        if (!this.parent.isAdaptive) {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        else {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        if (this.parent.resources.length > 0) {\n            var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (var i = 0; i < this.parent.resourceBase.resourceCollection.length; i++) {\n                resourceParentDiv.appendChild(this.renderResourceDetails(i));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        parentDiv.appendChild(description);\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    };\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n        var recurrenceEditor = this.createDivElement();\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n    };\n    EventWindow.prototype.createDivElement = function (className) {\n        return createElement('div', { className: className });\n    };\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '',\n                title: ((this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))) === '') ?\n                    fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n            }\n        });\n    };\n    EventWindow.prototype.getSlotDuration = function () {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    };\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n        var dateTimeDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        var dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            floatLabelType: 'Always',\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.getFormat('timeFormats'),\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            value: new Date(), width: '100%'\n        });\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    };\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\n        var _this = this;\n        var startEndElement = [].slice.call(this.element.querySelectorAll('.' + cls.EVENT_WINDOW_START_CLASS + ',.' +\n            cls.EVENT_WINDOW_END_CLASS));\n        startEndElement.forEach(function (element) {\n            var instance = element.ej2_instances[0];\n            instance.step = duration || _this.getSlotDuration();\n            instance.dataBind();\n        });\n    };\n    EventWindow.prototype.onTimeChange = function () {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n            var duration = 0;\n            if (this.cellClickAction) {\n                duration = util.MS_PER_MINUTE * this.duration;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            endObj.value = new Date(startObj.value.getTime() + duration);\n            endObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderResourceDetails = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index];\n        var fieldName = resourceData.field;\n        var value = 'e-' + fieldName;\n        var labelValue = resourceData.title;\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' +\n            resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n        if (resourceData.allowMultiple) {\n            var listObj = new MultiSelect({\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box'\n            });\n            listObj.appendTo(resourceInput);\n        }\n        else {\n            var drowDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate\n            });\n            drowDownList.appendTo(resourceInput);\n        }\n        return resourceDiv;\n    };\n    EventWindow.prototype.renderDropDown = function (value) {\n        var fieldName = this.getFieldName(value);\n        var timezoneDiv = this.createDivElement(value + '-container');\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        var drowDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: timezoneData,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: 'Search Timezone',\n            filtering: function (e) {\n                var query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(timezoneData, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px',\n        });\n        drowDownList.appendTo(timezoneInput);\n        return timezoneDiv;\n    };\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resources.length <= 1) {\n            return;\n        }\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n                var resObject = this.createInstance(i);\n                var datasource = [];\n                for (var j = 0; j < args.value.length; j++) {\n                    var resourceData = resourceCollection[i + 1].dataSource;\n                    var query = new Query().where(resourceCollection[i + 1].groupIDField, 'equal', args.value[j]);\n                    var filter = new DataManager({ json: resourceData }).executeLocal(query)[0];\n                    var groupId = filter[resourceCollection[i + 1].idField];\n                    var filterRes = this.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.createInstance = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        return resObject;\n    };\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\n        if (!args.value || this.parent.resources.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[i].field === fieldName) {\n                var resObj = this.createInstance(i);\n                var groupId = args.itemData[resourceCollection[i].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var query = new Query().where(resourceData.groupIDField, 'equal', groupId);\n        var filter = new DataManager({ json: resourceData.dataSource }).executeLocal(query);\n        return filter;\n    };\n    EventWindow.prototype.onTimezoneChange = function (args) {\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderCheckBox = function (value) {\n        var checkBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        var checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    };\n    EventWindow.prototype.renderTextBox = function (value) {\n        var textBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var elementType = (value === cls.DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    };\n    EventWindow.prototype.getFieldName = function (name) {\n        var fieldName = '';\n        switch (name) {\n            case cls.SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    };\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\n        var labelText = '';\n        switch (fieldName) {\n            case cls.SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    };\n    EventWindow.prototype.onChange = function (args) {\n        var target = (args.event.target);\n        if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n            this.onAllDayChange(args.checked);\n        }\n        else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n            this.timezoneChangeStyle(args.checked);\n        }\n        else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n            this.onRepeatChange(args.checked);\n        }\n    };\n    EventWindow.prototype.renderRepeatDialog = function () {\n        var element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    };\n    EventWindow.prototype.loadRecurrenceEditor = function () {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    };\n    EventWindow.prototype.onRepeatChange = function (state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    };\n    EventWindow.prototype.repeatSaveDialog = function () {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    };\n    EventWindow.prototype.closeRepeatDialog = function () {\n        this.repeatDialogObject.hide();\n    };\n    EventWindow.prototype.repeatCancelDialog = function () {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    };\n    EventWindow.prototype.repeatOpenDialog = function () {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    };\n    EventWindow.prototype.onCellDetailsUpdate = function (event, repeatType) {\n        this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        var eventObj = {};\n        if (this.cellClickAction) {\n            this.convertToEventData(event, eventObj);\n        }\n        else {\n            this.parent.activeCellsData = {\n                startTime: (event.startTime || event[this.fields.startTime]),\n                endTime: (event.endTime || event[this.fields.endTime]),\n                isAllDay: (event.isAllDay || event[this.fields.isAllDay]),\n                element: event.element,\n                groupIndex: event.groupIndex\n            };\n            eventObj = event;\n        }\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        this.showDetails(eventObj);\n        var deleteButton = this.element.querySelector('.' + cls.EVENT_WINDOW_DELETE_BUTTON_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: repeatType || 0\n            });\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (this.parent.resources.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj, false);\n        }\n    };\n    EventWindow.prototype.applyFormValidation = function () {\n        var getValidationRule = function (rules) { return (rules && Object.keys(rules).length > 0) ? rules : undefined; };\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        rules[this.parent.eventSettings.fields.description.name] =\n            getValidationRule(this.parent.eventSettings.fields.description.validation);\n        this.fieldValidator.renderFormValidator(form, rules, this.element);\n    };\n    EventWindow.prototype.showDetails = function (eventData) {\n        var eventObj = extend({}, eventData, null, true);\n        this.trimAllDay(eventObj);\n        this.eventData = eventObj;\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        var keyNames = Object.keys(eventObj);\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var curElement = formelement_1[_i];\n            var columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    };\n    EventWindow.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        var format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' + this.getFormat('timeFormats') :\n                this.parent.dateFormat + ' ' + this.getFormat('timeFormats');\n            removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n        var startDate;\n        var endDate;\n        if (allDayStatus) {\n            startDate = util.resetTime(new Date(this.parent.activeCellsData.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                var temp = util.addDays(new Date(this.parent.activeCellsData.endTime.getTime()), -1).getTime();\n                endDate = (+this.parent.activeCellsData.startTime > temp) ? this.parent.activeCellsData.endTime : new Date(temp);\n            }\n            else {\n                endDate = util.resetTime(new Date(this.parent.activeCellsData.endTime.getTime()));\n            }\n        }\n        else {\n            startDate = new Date(this.parent.activeCellsData.startTime.getTime());\n            if (this.parent.currentView === 'Month' || this.parent.currentView === 'MonthAgenda' || this.parent.activeCellsData.isAllDay) {\n                var startHour = this.parent.globalize.parseDate(this.parent.workHours.start, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(this.parent.activeCellsData.endTime.getTime());\n            }\n        }\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(\n            // tslint:disable-next-line:max-line-length\n            'main.' + '' + this.parent.locale + '.dates.calendars.' + this.parent.getCalendarMode() + '.' + formatType + '.short', cldrData);\n        }\n        return format;\n    };\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n        if (!this.parent.isAdaptive) {\n            removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_DELETE_BUTTON_CLASS)], cls.DISABLE_CLASS);\n        }\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            var timezoneValue = void 0;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            var deleteButton = this.element.querySelector('.' + cls.EVENT_WINDOW_DELETE_BUTTON_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.disableButton = function (element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    };\n    EventWindow.prototype.renderRecurrenceEditor = function () {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    };\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        var data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    };\n    EventWindow.prototype.dialogClose = function () {\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.resetFields();\n        }\n    };\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\n        var _this = this;\n        var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        if (value) {\n            addClass([timezoneDiv], cls.ENABLE_CLASS);\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            var timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                var found = timezone.some(function (tz) { return tz.Value === _this.localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: this.localTimezoneName, Text: this.localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || this.localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || this.localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], cls.ENABLE_CLASS);\n        }\n    };\n    EventWindow.prototype.resetFormFields = function () {\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var index = 0, len = formelement.length; index < len; index++) {\n            var columnName = formelement[index].name;\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(formelement[index]);\n            }\n        }\n    };\n    EventWindow.prototype.eventSave = function (alert) {\n        this.parent.uiStateValues.isBlock = false;\n        var alertType;\n        var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            delete eventObj.Timezone;\n            delete eventObj.Repeat;\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            var isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return;\n            }\n        }\n        var eventId = this.getEventIdFromForm();\n        this.setDefaultValueToObject(eventObj);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        var ruleData = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() : null;\n        eventObj[this.fields.recurrenceRule] = ruleData ? ruleData : undefined;\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 || this.parent.resources.length > 0)\n            && !this.parent.activeViewOptions.group.allowGroupEdit;\n        if (!isNullOrUndefined(eventId)) {\n            var eveId = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            var editedData = new DataManager({ json: this.parent.eventsData }).executeLocal(new Query().\n                where(this.fields.id, 'equal', eveId))[0];\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return;\n            }\n            var currentAction = void 0;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.editOccurrenceValidation(eveId, eventObj)) {\n                        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                        return;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        if (this.parent.uiStateValues.isBlock) {\n            return;\n        }\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.getObjectFromFormData = function (className) {\n        var formElement = this.getFormElements(className);\n        var eventObj = {};\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n            var currentElement = formElement_1[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    };\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    };\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n        var alertMessage;\n        var recEditor = this.recurrenceEditor;\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            if (this.parent.currentAction === 'EditSeries' &&\n                !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                        var temp = [];\n                        var tempDiff = [];\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\n                            temp[index] = (types.length > index) ? obj[types[index]] : temp[index - types.length] + (7 * interval);\n                        }\n                        var tempvalue = temp.sort(function (a, b) { return a - b; });\n                        for (var index = 1; index < tempvalue.length; index++) {\n                            tempDiff.push(tempvalue[index] - tempvalue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (this.getInstance('e-month-expander-checkbox-wrapper .e-radio').checked\n                            && [29, 30, 31].indexOf(parseInt(recEditor.value.split(';')[1].split('=')[1], 10)) !== -1) {\n                            alertMessage = 'dateValidation';\n                        }\n                        else if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        return alertMessage;\n    };\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n        var recIndex;\n        for (var index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    };\n    EventWindow.prototype.trimAllDay = function (data) {\n        if (data[this.fields.isAllDay]) {\n            var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    };\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        var recurColl = this.parent.getOccurrencesByID(eventId);\n        var excludedDatas = new DataManager({ json: this.parent.eventsData }).executeLocal(new Query().\n            where(this.fields.recurrenceID, 'equal', eventId));\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n            var data = recurColl_1[_i];\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        var index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                return (!(new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)));\n            }\n            return false;\n        }\n        else {\n            if (index === recurColl.length - 1) {\n                if (!(new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\n                    new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0))) {\n                    return true;\n                }\n            }\n            else if (!((new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\n                new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0)) &&\n                (new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)))) {\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n        var _this = this;\n        var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        var resourceData = eventObj[lastResouceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData : [resourceData];\n        var lastlevel = this.parent.resourceBase.lastResourceLevel;\n        var eventList = [];\n        var _loop_1 = function (i) {\n            var events = extend({}, eventObj, null, true);\n            events[this_1.fields.id] = this_1.parent.eventBase.getEventMaxID();\n            var temp = [];\n            var addValues = function () {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\n                        for (var k = 1; k < temp.length; k++) {\n                            temp[k][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[k]);\n                            _this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = eventObj[_this.fields.id];\n                        _this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (var j = 0; j < temp.length; j++) {\n                            temp[j][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[j]);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this_1.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastlevel))) {\n                var lastResource = lastResouceData.dataSource;\n                var index = util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i]);\n                var groupId_1 = lastResource[index][lastResouceData.groupIDField];\n                var filter = lastlevel.filter(function (obj) { return obj.resourceData[lastResouceData.idField] === resourceData[i]; }).\n                    filter(function (obj) { return obj.resourceData[lastResouceData.groupIDField] === groupId_1; })[0];\n                var groupOrder = filter.groupOrder;\n                for (var index_1 = 0; index_1 < this_1.parent.resourceBase.resourceCollection.length; index_1++) {\n                    var field = this_1.parent.resourceBase.resourceCollection[index_1].field;\n                    events[field] = (groupOrder[index_1] instanceof Array) ? groupOrder[index_1][0] : groupOrder[index_1];\n                }\n                addValues();\n            }\n            else {\n                for (var index = 0; index < this_1.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    var field = this_1.parent.resourceBase.resourceCollection[index].field;\n                    if (events[field] instanceof Array && events[field].length > 1) {\n                        for (var k = 0; k < events[field].length; k++) {\n                            var event_1 = extend({}, events, null, true);\n                            event_1[field] = eventObj[field][k];\n                            event_1[lastResouceData.field] = resourceData[i];\n                            temp.push(event_1);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[field] = (eventObj[field] instanceof Array) ?\n                                eventObj[field][0] : eventObj[field];\n                            events[lastResouceData.field] = resourceData[i];\n                        }\n                        else {\n                            for (var l = 0; l < temp.length; l++) {\n                                temp[l][field] = (eventObj[field] instanceof Array) ?\n                                    eventObj[field][0] : eventObj[field];\n                            }\n                        }\n                    }\n                }\n                events[lastResouceData.field] = resourceData[i];\n                addValues();\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < resourceData.length; i++) {\n            _loop_1(i);\n        }\n        if (eventList.length > 0) {\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n                var event_2 = eventList_1[_i];\n                event_2[this.fields.recurrenceException] = null;\n                event_2[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    };\n    EventWindow.prototype.getEventIdFromForm = function () {\n        return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n    };\n    EventWindow.prototype.getFormElements = function (className) {\n        if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n            return [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n        }\n        return [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n    };\n    EventWindow.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = element.value;\n            }\n        }\n        return value;\n    };\n    EventWindow.prototype.setValueToElement = function (element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    };\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = new Date();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = new Date();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    };\n    EventWindow.prototype.getInstance = function (className) {\n        return this.element.querySelector('.' + className).ej2_instances[0];\n    };\n    EventWindow.prototype.eventDelete = function () {\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                var fields = this.parent.eventFields;\n                if (!isNullOrUndefined(this.parent.activeEventData.event[fields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n        }\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    };\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    };\n    EventWindow.prototype.destroyComponents = function () {\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formelement_2 = formelement; _i < formelement_2.length; _i++) {\n            var element = formelement_2[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances[0];\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances[0];\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances[0];\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances[0];\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances[0];\n            }\n            if (instance) {\n                instance.destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    };\n    /**\n     * To destroy the event window.\n     * @return {void}\n     * @private\n     */\n    EventWindow.prototype.destroy = function () {\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n        }\n        this.destroyComponents();\n        this.fieldValidator.destroy();\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            remove(this.repeatDialogObject.element);\n        }\n        if (this.dialogObject) {\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return EventWindow;\n}());\nexport { EventWindow };\n","import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResConut = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResConut = (renderedResConut > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResConut;\n            wrap.style.height = (renderedResConut * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        this.parent.quickPopup.quickPopupHide();\n        this.parent.quickPopup.morePopup.hide();\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        this.renderedLength = resWrap.querySelector('tbody').children.length;\n        var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n        var scrollHeight = (this.parent.enableAdaptiveRows) ?\n            (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n        addClass([conWrap], 'e-transition');\n        var resCollection = [];\n        if ((conWrap.scrollTop) - this.translateY < 0) {\n            resCollection = this.upScroll(conWrap, firstTDIndex);\n        }\n        else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n            resCollection = this.downScroll(conWrap, firstTDIndex);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n            this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n            this.parent.notify(events.dataReady, {});\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.enableAdaptiveRows) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.enableAdaptiveRows) ? this.averageRowHeight : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.enableAdaptiveRows) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLenth = resWrap.querySelector('tbody').children.length;\n        for (var i = 0; i < renderedLenth; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        setStyleAttribute(conWrap.querySelector('table'), {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        setStyleAttribute(eventWrap, {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, {\n                transform: \"translateY(\" + this.translateY + \"px)\"\n            });\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport { VirtualScroll } from '../actions/virtual-scroll';\n/**\n * Schedule DOM rendering\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render\n     */\n    function Render(parent) {\n        this.parent = parent;\n    }\n    Render.prototype.render = function (viewName, isDataRefresh) {\n        if (isDataRefresh === void 0) { isDataRefresh = true; }\n        this.initializeLayout(viewName);\n        if (isDataRefresh) {\n            this.refreshDataManager();\n        }\n    };\n    Render.prototype.initializeLayout = function (viewName) {\n        if (this.parent.activeView) {\n            this.parent.activeView.removeEventListener();\n            this.parent.activeView.destroy();\n        }\n        switch (viewName) {\n            case 'Day':\n                this.parent.activeView = this.parent.dayModule;\n                break;\n            case 'Week':\n                this.parent.activeView = this.parent.weekModule;\n                break;\n            case 'WorkWeek':\n                this.parent.activeView = this.parent.workWeekModule;\n                break;\n            case 'Month':\n                this.parent.activeView = this.parent.monthModule;\n                break;\n            case 'Agenda':\n                this.parent.activeView = this.parent.agendaModule;\n                break;\n            case 'MonthAgenda':\n                this.parent.activeView = this.parent.monthAgendaModule;\n                break;\n            case 'TimelineDay':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-day-view';\n                break;\n            case 'TimelineWorkWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n                break;\n            case 'TimelineWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-week-view';\n                break;\n            case 'TimelineMonth':\n                this.parent.activeView = this.parent.timelineMonthModule;\n                break;\n        }\n        if (isNullOrUndefined(this.parent.activeView)) {\n            var firstView = this.parent.viewCollections[0].option;\n            if (firstView) {\n                this.parent.setProperties({ currentView: firstView }, true);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.updateActiveView();\n                    this.parent.headerModule.setCalendarView();\n                }\n                return this.initializeLayout(firstView);\n            }\n            throw Error('Inject required modules');\n        }\n        this.updateLabelText(viewName);\n        this.parent.activeView.addEventListener();\n        this.parent.activeView.getRenderDates();\n        this.parent.uiStateValues.isGroupAdaptive = this.parent.isAdaptive && this.parent.activeViewOptions.group.resources.length > 0 &&\n            this.parent.activeViewOptions.group.enableCompactView;\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.destroy();\n            this.parent.virtualScrollModule = null;\n        }\n        if (this.parent.currentView.indexOf('Timeline') !== -1 && this.parent.activeViewOptions.allowVirtualScrolling\n            && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n            this.parent.uiStateValues.top = 0;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n            this.parent.headerModule.updateHeaderItems('remove');\n        }\n        this.parent.activeView.renderLayout(cls.CURRENT_PANEL_CLASS);\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.destroy();\n            this.parent.eventTooltip = null;\n        }\n        if (this.parent.eventSettings.enableTooltip || (this.parent.activeViewOptions.group.resources.length > 0\n            && this.parent.activeViewOptions.group.headerTooltipTemplate)) {\n            this.parent.eventTooltip = new EventTooltip(this.parent);\n        }\n    };\n    Render.prototype.updateLabelText = function (view) {\n        var content = this.parent.activeView.getLabelText(view);\n        this.parent.element.setAttribute('role', 'main');\n        this.parent.element.setAttribute('aria-label', content);\n    };\n    Render.prototype.refreshDataManager = function () {\n        var _this = this;\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e); }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    Render.prototype.dataManagerSuccess = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.dataBinding, e);\n        var resultData = extend([], e.result, null, true);\n        this.parent.eventsData = resultData.filter(function (data) { return !data[_this.parent.eventFields.isBlock]; });\n        this.parent.blockData = resultData.filter(function (data) { return data[_this.parent.eventFields.isBlock]; });\n        var processed = this.parent.eventBase.processData(resultData);\n        this.parent.notify(events.dataReady, { processedData: processed });\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n            this.parent.dragAndDropModule.navigationWrapper();\n        }\n        this.parent.trigger(events.dataBound);\n        this.parent.hideSpinner();\n    };\n    Render.prototype.dataManagerFailure = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\nvar WorkHours = /** @class */ (function (_super) {\n    __extends(WorkHours, _super);\n    function WorkHours() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], WorkHours.prototype, \"highlight\", void 0);\n    __decorate([\n        Property('09:00')\n    ], WorkHours.prototype, \"start\", void 0);\n    __decorate([\n        Property('18:00')\n    ], WorkHours.prototype, \"end\", void 0);\n    return WorkHours;\n}(ChildProperty));\nexport { WorkHours };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\nvar TimeScale = /** @class */ (function (_super) {\n    __extends(TimeScale, _super);\n    function TimeScale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], TimeScale.prototype, \"enable\", void 0);\n    __decorate([\n        Property(60)\n    ], TimeScale.prototype, \"interval\", void 0);\n    __decorate([\n        Property(2)\n    ], TimeScale.prototype, \"slotCount\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n    return TimeScale;\n}(ChildProperty));\nexport { TimeScale };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\nvar QuickInfoTemplates = /** @class */ (function (_super) {\n    __extends(QuickInfoTemplates, _super);\n    function QuickInfoTemplates() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"header\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"content\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"footer\", void 0);\n    return QuickInfoTemplates;\n}(ChildProperty));\nexport { QuickInfoTemplates };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\nvar HeaderRows = /** @class */ (function (_super) {\n    __extends(HeaderRows, _super);\n    function HeaderRows() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"option\", void 0);\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"template\", void 0);\n    return HeaderRows;\n}(ChildProperty));\nexport { HeaderRows };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\nvar FieldOptions = /** @class */ (function (_super) {\n    __extends(FieldOptions, _super);\n    function FieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"default\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"title\", void 0);\n    __decorate([\n        Property({})\n    ], FieldOptions.prototype, \"validation\", void 0);\n    return FieldOptions;\n}(ChildProperty));\nexport { FieldOptions };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { FieldOptions } from './field-options';\n/**\n * A Class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and Object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\nvar Field = /** @class */ (function (_super) {\n    __extends(Field, _super);\n    function Field() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Id')\n    ], Field.prototype, \"id\", void 0);\n    __decorate([\n        Property('IsBlock')\n    ], Field.prototype, \"isBlock\", void 0);\n    __decorate([\n        Complex({ name: 'Subject', default: 'Add title' }, FieldOptions)\n    ], Field.prototype, \"subject\", void 0);\n    __decorate([\n        Complex({ name: 'StartTime' }, FieldOptions)\n    ], Field.prototype, \"startTime\", void 0);\n    __decorate([\n        Complex({ name: 'EndTime' }, FieldOptions)\n    ], Field.prototype, \"endTime\", void 0);\n    __decorate([\n        Complex({ name: 'StartTimezone' }, FieldOptions)\n    ], Field.prototype, \"startTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'EndTimezone' }, FieldOptions)\n    ], Field.prototype, \"endTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'Location' }, FieldOptions)\n    ], Field.prototype, \"location\", void 0);\n    __decorate([\n        Complex({ name: 'Description' }, FieldOptions)\n    ], Field.prototype, \"description\", void 0);\n    __decorate([\n        Complex({ name: 'IsAllDay' }, FieldOptions)\n    ], Field.prototype, \"isAllDay\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceID' }, FieldOptions)\n    ], Field.prototype, \"recurrenceID\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceRule' }, FieldOptions)\n    ], Field.prototype, \"recurrenceRule\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceException' }, FieldOptions)\n    ], Field.prototype, \"recurrenceException\", void 0);\n    __decorate([\n        Property('IsReadonly')\n    ], Field.prototype, \"isReadonly\", void 0);\n    return Field;\n}(ChildProperty));\nexport { Field };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { Field } from './fields';\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\nvar EventSettings = /** @class */ (function (_super) {\n    __extends(EventSettings, _super);\n    function EventSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], EventSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"query\", void 0);\n    __decorate([\n        Complex({}, Field)\n    ], EventSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableTooltip\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"resourceColorField\", void 0);\n    return EventSettings;\n}(ChildProperty));\nexport { EventSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"byDate\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"byGroupID\", void 0);\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"allowGroupEdit\", void 0);\n    __decorate([\n        Property([])\n    ], Group.prototype, \"resources\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"enableCompactView\", void 0);\n    __decorate([\n        Property()\n    ], Group.prototype, \"headerTooltipTemplate\", void 0);\n    return Group;\n}(ChildProperty));\nexport { Group };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Resources.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"name\", void 0);\n    __decorate([\n        Property(false)\n    ], Resources.prototype, \"allowMultiple\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"query\", void 0);\n    __decorate([\n        Property('Id')\n    ], Resources.prototype, \"idField\", void 0);\n    __decorate([\n        Property('Text')\n    ], Resources.prototype, \"textField\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Resources.prototype, \"expandedField\", void 0);\n    __decorate([\n        Property('GroupID')\n    ], Resources.prototype, \"groupIDField\", void 0);\n    __decorate([\n        Property('Color')\n    ], Resources.prototype, \"colorField\", void 0);\n    __decorate([\n        Property('StartHour')\n    ], Resources.prototype, \"startHourField\", void 0);\n    __decorate([\n        Property('EndHour')\n    ], Resources.prototype, \"endHourField\", void 0);\n    __decorate([\n        Property('WorkDays')\n    ], Resources.prototype, \"workDaysField\", void 0);\n    __decorate([\n        Property('CssClass')\n    ], Resources.prototype, \"cssClassField\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n","import { extend, isNullOrUndefined, createElement, EventHandler, addClass, append, removeClass, remove, closest, classList } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Data } from '../actions/data';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar ResourceBase = /** @class */ (function () {\n    function ResourceBase(parent) {\n        this.resourceCollection = [];\n        this.leftPixel = 25;\n        this.parent = parent;\n    }\n    ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n        var resColTd = createElement('td', { className: cls.RESOURCE_LEFT_TD_CLASS });\n        var resColDiv = createElement('div', {\n            className: cls.RESOURCE_TEXT_CLASS\n        });\n        resColTd.appendChild(resColDiv);\n        var args = { elementType: 'emptyCells', element: resColTd };\n        this.parent.trigger(events.renderCell, args);\n        tr.appendChild(resColTd);\n    };\n    ResourceBase.prototype.hideResourceRows = function (tBody) {\n        if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n            return;\n        }\n        var trCount = this.lastResourceLevel.length;\n        for (var i = 0; i < trCount; i++) {\n            var resData = this.lastResourceLevel[i].resourceData;\n            var res = this.lastResourceLevel[i].resource;\n            if (resData.ClassName === cls.RESOURCE_PARENT_CLASS && !resData[res.expandedField] &&\n                !isNullOrUndefined(resData[res.expandedField])) {\n                var trCollection = [].slice.call(tBody.children);\n                var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 0) + 1));\n                addClass(slicedCollection, cls.HIDDEN_CLASS);\n            }\n        }\n    };\n    ResourceBase.prototype.createResourceColumn = function () {\n        var resColl = this.resourceCollection;\n        var resDiv = createElement('div', { className: cls.RESOURCE_COLUMN_WRAP_CLASS });\n        var tbl = this.parent.activeView.createTableLayout(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.enableAdaptiveRows && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([tbl], cls.AUTO_HEIGHT);\n        }\n        var tBody = tbl.querySelector('tbody');\n        var resData = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n        if (this.parent.virtualScrollModule) {\n            var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n            this.setExpandedResources();\n            resData = this.expandedResources.slice(0, resourceCount);\n            this.renderedResources = resData;\n        }\n        append(this.getContentRows(resData), tBody);\n        this.hideResourceRows(tBody);\n        tbl.appendChild(tBody);\n        resDiv.appendChild(tbl);\n        return resDiv;\n    };\n    ResourceBase.prototype.setExpandedResources = function () {\n        var resources = [];\n        for (var i = 0; i < this.lastResourceLevel.length; i++) {\n            var resource = this.lastResourceLevel[i].resourceData;\n            var count = resource.Count;\n            resources.push(this.lastResourceLevel[i]);\n            var isExpanded = resource[this.lastResourceLevel[i].resource.expandedField];\n            if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n                i = i + count;\n            }\n        }\n        this.expandedResources = resources;\n    };\n    ResourceBase.prototype.getContentRows = function (resData) {\n        var resRows = [];\n        var left;\n        var rIndex;\n        var resColl = this.resourceCollection;\n        var tr = createElement('tr');\n        var td = createElement('td');\n        for (var i = 0; i < resData.length; i++) {\n            var ntd = td.cloneNode();\n            rIndex = util.findIndexInData(resColl, 'name', resData[i].resource.name);\n            if (rIndex === resColl.length - 1) {\n                extend(resData[i].resourceData, { ClassName: cls.RESOURCE_CHILD_CLASS });\n                this.renderedResources[i].className = [cls.RESOURCE_CHILD_CLASS];\n            }\n            else {\n                extend(resData[i].resourceData, { ClassName: cls.RESOURCE_PARENT_CLASS });\n                this.renderedResources[i].className = [cls.RESOURCE_PARENT_CLASS];\n            }\n            left = (rIndex * this.leftPixel) + 'px';\n            if (resData[i].resourceData.ClassName === cls.RESOURCE_PARENT_CLASS) {\n                var iconClass = void 0;\n                if (resData[i].resourceData[resColl[rIndex].expandedField] ||\n                    isNullOrUndefined(resData[i].resourceData[resColl[rIndex].expandedField])) {\n                    iconClass = cls.RESOURCE_COLLAPSE_CLASS;\n                }\n                else {\n                    iconClass = cls.RESOURCE_EXPAND_CLASS;\n                }\n                var iconDiv = createElement('div');\n                addClass([iconDiv], [cls.RESOURCE_TREE_ICON_CLASS, iconClass]);\n                this.setMargin(iconDiv, left);\n                ntd.appendChild(iconDiv);\n                if (this.resourceCollection.length > 1) {\n                    EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n                }\n            }\n            this.parent.activeView.setResourceHeaderContent(ntd, resData[i], cls.RESOURCE_TEXT_CLASS);\n            ntd.setAttribute('data-group-index', resData[i].groupIndex.toString());\n            if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n                this.setMargin(ntd.querySelector('.' + cls.RESOURCE_TEXT_CLASS), left);\n            }\n            var classCollection = [cls.RESOURCE_CELLS_CLASS, resData[i].resourceData.ClassName];\n            addClass([ntd], classCollection);\n            var args = { elementType: 'resourceHeader', element: ntd, groupIndex: resData[i].groupIndex };\n            this.parent.trigger(events.renderCell, args);\n            var ntr = tr.cloneNode();\n            ntr.appendChild(ntd);\n            resRows.push(ntr);\n        }\n        return resRows;\n    };\n    ResourceBase.prototype.setMargin = function (element, value) {\n        if (!this.parent.enableRtl) {\n            element.style.marginLeft = value;\n        }\n        else {\n            element.style.marginRight = value;\n        }\n    };\n    ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n        var collection;\n        for (var y = 0; y < parentCollection.length; y++) {\n            var data = parentCollection[parentCollection.length - (y + 1)]\n                .dataSource;\n            for (var x = 0; x < data.length; x++) {\n                var totalCount = 0;\n                if (this.parent.activeViewOptions.group.byGroupID) {\n                    collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource)\n                        .executeLocal(new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[x][parentCollection[parentCollection.length - (y + 1)].idField]));\n                }\n                else {\n                    collection = wholeCollection[wholeCollection.length - 1].dataSource;\n                }\n                for (var z = 0; z < collection.length; z++) {\n                    totalCount = totalCount + parseInt(collection[z].Count, 0);\n                }\n                totalCount = totalCount + parseInt(data[x].Count, 0);\n                extend(data[x], { Count: totalCount });\n            }\n            wholeCollection = wholeCollection.slice(0, -1);\n        }\n    };\n    ResourceBase.prototype.onTreeIconClick = function (e) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        var target = e.target;\n        var hide;\n        var trElement = closest(target, '.' + cls.RESOURCE_PARENT_CLASS)\n            .parentElement;\n        var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n        var args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: !target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse',\n        };\n        this.parent.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS)) {\n            classList(target, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n            hide = true;\n        }\n        else {\n            classList(target, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n            hide = false;\n        }\n        var eventElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        for (var i = 0; i < eventElements.length; i++) {\n            remove(eventElements[i]);\n        }\n        if (this.parent.virtualScrollModule) {\n            this.updateVirtualContent(index, hide);\n        }\n        else {\n            this.updateContent(index, hide);\n        }\n        var data = { cssProperties: this.parent.getCssProperties(), module: 'scroll' };\n        this.parent.notify(events.scrollUiUpdate, data);\n        args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed',\n        };\n        this.parent.notify(events.dataReady, {});\n        this.parent.trigger(events.actionComplete, args);\n    };\n    ResourceBase.prototype.updateContent = function (index, hide) {\n        var rowCollection = [];\n        var workCellCollection = [];\n        var headerRowCollection = [];\n        var pNode;\n        var clickedRes = this.lastResourceLevel[index].resourceData;\n        var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n        var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n        var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' .' + cls.APPOINTMENT_CONTAINER_CLASS));\n        for (var j = 0; j < clickedRes.Count; j++) {\n            rowCollection.push(resRows[index + j + 1]);\n            workCellCollection.push(contentRows[index + j + 1]);\n            headerRowCollection.push(eventRows[index + j + 1]);\n        }\n        var clonedCollection = this.lastResourceLevel;\n        for (var i = 0; i < rowCollection.length; i++) {\n            var expanded = true;\n            pNode = rowCollection[i].children[0].classList.contains(cls.RESOURCE_PARENT_CLASS);\n            clonedCollection[index].resourceData[clonedCollection[index].resource.expandedField] = !hide;\n            if (hide) {\n                if (pNode) {\n                    var trElem = rowCollection[i].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                    classList(trElem, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                }\n                if (!rowCollection[i].classList.contains(cls.HIDDEN_CLASS)) {\n                    addClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], cls.HIDDEN_CLASS);\n                }\n            }\n            else {\n                if (pNode) {\n                    var rowIndex = rowCollection[i].rowIndex;\n                    if (!clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField]\n                        && !isNullOrUndefined(clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField])) {\n                        rowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 0)));\n                        workCellCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 0)));\n                        headerRowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 0)));\n                        expanded = false;\n                    }\n                    if (expanded) {\n                        var trElem = rowCollection[i].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                        classList(trElem, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                    }\n                }\n                if (rowCollection[i].classList.contains(cls.HIDDEN_CLASS)) {\n                    removeClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], cls.HIDDEN_CLASS);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.updateVirtualContent = function (index, expand) {\n        this.lastResourceLevel[index].resourceData[this.lastResourceLevel[index].resource.expandedField] = !expand;\n        this.setExpandedResources();\n        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n        this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n        if (this.renderedResources.length < resourceCount) {\n            var sIndex = this.expandedResources.length - resourceCount;\n            sIndex = (sIndex > 0) ? sIndex : 0;\n            this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n        }\n        var virtualTrack = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n        var resTable = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'table');\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        if (!isNullOrUndefined(timeIndicator)) {\n            timeIndicator.style.height =\n                this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight + 'px';\n        }\n    };\n    ResourceBase.prototype.renderResourceHeader = function () {\n        var resourceWrapper = createElement('div', { className: cls.RESOURCE_TOOLBAR_CONTAINER });\n        resourceWrapper.innerHTML = '<div class=\"' + cls.RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + cls.RESOURCE_MENU + '\">' +\n            '<div class=\"e-icons ' + cls.RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + cls.RESOURCE_LEVEL_TITLE + '\"></div></div>';\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            target.insertBefore(resourceWrapper, target.children[1]);\n        }\n        else {\n            this.parent.element.insertBefore(resourceWrapper, this.parent.element.children[2]);\n        }\n        this.renderResourceHeaderText();\n        EventHandler.add(resourceWrapper.querySelector('.' + cls.RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    };\n    ResourceBase.prototype.renderResourceTree = function () {\n        this.popupOverlay = createElement('div', { className: cls.RESOURCE_TREE_POPUP_OVERLAY });\n        var treeWrapper = createElement('div', { className: cls.RESOURCE_TREE_POPUP + ' e-popup-close' });\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n            target.insertBefore(treeWrapper, target.children[0]);\n            target.appendChild(this.popupOverlay);\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n        }\n        var resourceTree = createElement('div', { className: cls.RESOURCE_TREE });\n        treeWrapper.appendChild(resourceTree);\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            fields: {\n                dataSource: this.generateTreeData(),\n                id: 'resourceId',\n                text: 'resourceName',\n                child: 'resourceChild'\n            },\n            nodeTemplate: this.parent.resourceHeaderTemplate,\n            nodeClicked: this.resourceClick.bind(this)\n        });\n        this.treeViewObj.appendTo(resourceTree);\n        this.treeViewObj.expandAll();\n        this.treePopup = new Popup(treeWrapper, {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            content: this.treeViewObj.element,\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ?\n                cls.WRAPPER_CONTAINER_CLASS : cls.TABLE_CONTAINER_CLASS))\n        });\n        this.parent.on(events.documentClick, this.documentClick, this);\n    };\n    ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n        var _this = this;\n        var treeCollection = [];\n        var resTreeColl = [];\n        var groupIndex = 0;\n        this.resourceTreeLevel.forEach(function (resTree, index) {\n            var treeHandler = function (treeLevel, index, levelId) {\n                var resource = _this.resourceCollection[index];\n                var treeArgs;\n                var resObj;\n                if (!isTimeLine) {\n                    treeArgs = {\n                        resourceId: levelId,\n                        resourceName: treeLevel.resourceData[resource.textField]\n                    };\n                }\n                else {\n                    resObj = {\n                        type: 'resourceHeader', resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData, groupIndex: groupIndex,\n                        groupOrder: treeLevel.groupOrder\n                    };\n                    resTreeColl.push(resObj);\n                    groupIndex++;\n                }\n                if (treeLevel.child.length > 0 && !isTimeLine) {\n                    treeArgs.resourceChild = [];\n                }\n                var count = 1;\n                for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n                    var tree = _a[_i];\n                    if (!isTimeLine) {\n                        treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n                    }\n                    else {\n                        treeHandler(tree, index + 1, levelId + '-' + count);\n                    }\n                    count += 1;\n                }\n                if (isTimeLine) {\n                    extend(resObj.resourceData, { Count: count - 1 });\n                }\n                return treeArgs;\n            };\n            if (!isTimeLine) {\n                treeCollection.push(treeHandler(resTree, 0, (index + 1).toString()));\n            }\n            else {\n                treeHandler(resTree, 0, (index + 1).toString());\n            }\n        });\n        if (isTimeLine) {\n            this.lastResourceLevel = resTreeColl;\n            return resTreeColl;\n        }\n        else {\n            return treeCollection;\n        }\n    };\n    ResourceBase.prototype.renderResourceHeaderText = function () {\n        var _this = this;\n        var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var headerCollection = [];\n        resource.groupOrder.forEach(function (level, index) {\n            var resourceLevel = _this.resourceCollection[index];\n            var resourceText = resourceLevel.dataSource.filter(function (resData) {\n                return resData[resourceLevel.idField] === level;\n            });\n            var resourceName = createElement('div', {\n                className: cls.RESOURCE_NAME,\n                innerHTML: resourceText[0][resourceLevel.textField]\n            });\n            headerCollection.push(resourceName);\n            var levelIcon = createElement('div', { className: 'e-icons e-icon-next' });\n            headerCollection.push(levelIcon);\n        });\n        headerCollection.pop();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        var headerWrapper = target.querySelector('.' + cls.RESOURCE_LEVEL_TITLE);\n        headerWrapper.innerHTML = '';\n        headerCollection.forEach(function (element) { return headerWrapper.appendChild(element); });\n        if (this.lastResourceLevel.length === 1) {\n            addClass([this.parent.element.querySelector('.' + cls.RESOURCE_MENU)], cls.DISABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.menuClick = function (event) {\n        if (this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        else {\n            var treeNodes = this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)');\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], 'e-enable');\n        }\n    };\n    ResourceBase.prototype.resourceClick = function (event) {\n        if (!event.node.classList.contains('e-has-child')) {\n            this.treePopup.hide();\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            this.parent.uiStateValues.groupIndex = treeNodes.indexOf(event.node);\n            this.parent.renderModule.render(this.parent.currentView, false);\n            var processed = this.parent.eventBase.processData(this.parent.eventsData);\n            this.parent.notify(events.dataReady, { processedData: processed });\n        }\n        event.event.preventDefault();\n    };\n    ResourceBase.prototype.documentClick = function (args) {\n        if (closest(args.event.target, '.' + cls.RESOURCE_TREE_POPUP)) {\n            return;\n        }\n        var treeWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP);\n        if (treeWrapper && treeWrapper.classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n    };\n    ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promises = [];\n        for (var i = 0; i < this.parent.resources.length; i++) {\n            var dataModule = new Data(this.parent.resources[i].dataSource, this.parent.resources[i].query);\n            promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n        Promise.all(promises).then(function (e) { return _this.dataManagerSuccess(e, isSetModel); })\n            .catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        for (var i = 0, length_1 = e.length; i < length_1; i++) {\n            this.parent.resources[i].dataSource = e[i].result;\n        }\n        this.parent.setProperties({ resources: this.parent.resources }, true);\n        this.parent.uiStateValues.groupIndex = 0;\n        this.parent.renderElements(isSetModel);\n        if (isSetModel) {\n            this.parent.eventWindow.refresh();\n        }\n    };\n    ResourceBase.prototype.setResourceCollection = function () {\n        var requiredResources = [];\n        this.resourceCollection = [];\n        this.colorIndex = null;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index_1 = util.findIndexInData(this.parent.resources, 'name', resource);\n                if (index_1 >= 0) {\n                    requiredResources.push(this.parent.resources[index_1]);\n                }\n            }\n        }\n        else if (this.parent.resources.length > 0) {\n            requiredResources = this.parent.resources;\n        }\n        var index = 0;\n        for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n            var resource = requiredResources_1[_b];\n            var resources = {\n                field: resource.field,\n                title: resource.title,\n                name: resource.name,\n                allowMultiple: resource.allowMultiple,\n                dataSource: resource.dataSource,\n                idField: resource.idField,\n                textField: resource.textField,\n                groupIDField: resource.groupIDField,\n                colorField: resource.colorField,\n                startHourField: resource.startHourField,\n                endHourField: resource.endHourField,\n                workDaysField: resource.workDaysField,\n                expandedField: resource.expandedField,\n                cssClassField: resource.cssClassField\n            };\n            if (resource.name === this.parent.eventSettings.resourceColorField) {\n                this.colorIndex = index;\n            }\n            index++;\n            this.resourceCollection.push(resources);\n        }\n        if (isNullOrUndefined(this.colorIndex)) {\n            this.colorIndex = this.resourceCollection.length - 1;\n        }\n    };\n    ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n        var _this = this;\n        var resources = this.resourceCollection;\n        var resTreeGroup = [];\n        var lastColumnDates = [];\n        var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n            var resTree = [];\n            var resource = resources[0];\n            if (resource) {\n                var data = void 0;\n                if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n                    var id = prevResourceData[prevResource.idField];\n                    data = new DataManager(resource.dataSource).executeLocal(new Query().where(resource.groupIDField, 'equal', id));\n                }\n                else {\n                    data = resource.dataSource;\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var groupOrder = [];\n                    if (prevOrder && prevOrder.length > 0) {\n                        groupOrder = groupOrder.concat(prevOrder);\n                    }\n                    groupOrder.push(data[i][resource.idField]);\n                    var items = group(resources.slice(1), index + 1, resource, data[i], groupOrder);\n                    // Here validate child item empty top level resource only\n                    if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n                        continue;\n                    }\n                    var dateCol = [];\n                    var renderDates = _this.parent.activeView.renderDates;\n                    var resWorkDays = void 0;\n                    if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n                        var workDays = data[i][resource.workDaysField];\n                        var resStartHour = data[i][resource.startHourField];\n                        var resEndHour = data[i][resource.endHourField];\n                        if (workDays && workDays.length > 0) {\n                            renderDates = _this.parent.activeView.getRenderDates(workDays);\n                            resWorkDays = workDays;\n                            dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n                        }\n                        else {\n                            resWorkDays = _this.parent.activeViewOptions.workDays;\n                            dateCol = innerDates;\n                        }\n                        var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n                        lastColumnDates = lastColumnDates.concat(dateSlots);\n                    }\n                    var resCssClass = data[i][resource.cssClassField];\n                    var slotData = {\n                        type: 'resourceHeader', className: ['e-resource-cells'],\n                        resourceLevelIndex: index, groupOrder: groupOrder,\n                        resource: resource, resourceData: data[i],\n                        colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n                        renderDates: renderDates, workDays: resWorkDays, cssClass: resCssClass,\n                        child: items\n                    };\n                    resTree.push(slotData);\n                }\n                if (!resTreeGroup[index]) {\n                    resTreeGroup[index] = [];\n                }\n                resTreeGroup[index].push(resTree);\n                return resTree;\n            }\n            return [];\n        };\n        this.resourceTreeLevel = group(resources, 0);\n        return (isTimeLine) ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    };\n    ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n        var dateSlots = extend([], renderDates, null, true);\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var dateSlot = dateSlots_1[_i];\n            if (startHour) {\n                dateSlot.startHour =\n                    this.parent.globalize.parseDate(startHour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n            }\n            if (endHour) {\n                dateSlot.endHour = this.parent.globalize.parseDate(endHour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n            }\n            if (groupOrder) {\n                dateSlot.groupOrder = groupOrder;\n            }\n        }\n        return dateSlots;\n    };\n    ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n        var headerLevels = [];\n        for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n            var temp = 0;\n            for (var _i = 0, _a = resTreeGroup[i]; _i < _a.length; _i++) {\n                var currentLevelChilds = _a[_i];\n                for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n                    var currentLevelChild = currentLevelChilds_1[_b];\n                    if (resTreeGroup[i + 1]) {\n                        var nextLevelChilds = resTreeGroup[i + 1][temp];\n                        var colSpan = 0;\n                        for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n                            var nextLevelChild = nextLevelChilds_1[_c];\n                            if (!this.parent.activeViewOptions.group.byGroupID || (this.parent.activeViewOptions.group.byGroupID &&\n                                nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] ===\n                                    currentLevelChild.resourceData[currentLevelChild.resource.idField])) {\n                                colSpan += nextLevelChild.colSpan;\n                            }\n                        }\n                        currentLevelChild.colSpan = colSpan;\n                    }\n                    currentLevelChild.groupIndex = temp;\n                    temp++;\n                    headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                    headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n                }\n            }\n        }\n        this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n        if (!this.parent.activeViewOptions.group.byDate) {\n            var index = 0;\n            for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n                var lastLevelResource = _e[_d];\n                for (var i = 0; i < lastLevelResource.colSpan; i++) {\n                    lastColumnDates[index].groupIndex = lastLevelResource.groupIndex;\n                    index++;\n                }\n            }\n            headerLevels.push(lastColumnDates);\n            return headerLevels;\n        }\n        var dateHeaderLevels = [];\n        var levels = extend([], headerLevels, null, true);\n        var dateColSpan = 0;\n        for (var _f = 0, _g = levels[0]; _f < _g.length; _f++) {\n            var firstRowTd = _g[_f];\n            dateColSpan += firstRowTd.colSpan;\n        }\n        var datesColumn = [];\n        for (var _h = 0, headerDates_1 = headerDates; _h < headerDates_1.length; _h++) {\n            var headerDate = headerDates_1[_h];\n            headerDate.colSpan = dateColSpan;\n            datesColumn.push(headerDate);\n            var resGroup = extend([], levels, null, true);\n            for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n                if (k === resGroup.length - 1) {\n                    for (var _j = 0, _k = resGroup[k]; _j < _k.length; _j++) {\n                        var resTd = _k[_j];\n                        resTd.date = headerDate.date;\n                        resTd.workDays = headerDate.workDays;\n                        resTd.startHour = headerDate.startHour;\n                        resTd.endHour = headerDate.endHour;\n                    }\n                }\n                if (!dateHeaderLevels[k]) {\n                    dateHeaderLevels[k] = [];\n                }\n                dateHeaderLevels[k] = dateHeaderLevels[k].concat(resGroup[k]);\n            }\n        }\n        dateHeaderLevels.unshift(datesColumn);\n        return dateHeaderLevels;\n    };\n    ResourceBase.prototype.setResourceValues = function (eventObj, isCrud, groupIndex) {\n        var _this = this;\n        var setValues = function (index, field, value) {\n            if (_this.resourceCollection[index].allowMultiple && (!isCrud || isCrud && _this.parent.activeViewOptions.group.allowGroupEdit)) {\n                eventObj[field] = [value];\n            }\n            else {\n                eventObj[field] = value;\n            }\n        };\n        if (groupIndex === void 0) {\n            groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                this.parent.activeCellsData.groupIndex;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n            var groupOrder = this.lastResourceLevel[groupIndex].groupOrder;\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                setValues(index, this.resourceCollection[index].field, groupOrder[index]);\n            }\n        }\n        else if (this.parent.resources.length > 0) {\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                var data = this.resourceCollection[index].dataSource[0];\n                if (data) {\n                    setValues(index, this.resourceCollection[index].field, data[this.resourceCollection[index].idField]);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n        this.colorIndex = (this.parent.activeView.isTimelineView() && !isNullOrUndefined(groupOrder)) ?\n            groupOrder.length - 1 : this.colorIndex;\n        var resource = this.resourceCollection[this.colorIndex];\n        if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[this.colorIndex];\n        var data = this.filterData(resource.dataSource, resource.idField, 'equal', id);\n        if (data.length > 0) {\n            return data[0][resource.colorField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getCssClass = function (eventObj) {\n        var resource = this.resourceCollection.slice(-1)[0];\n        if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var data = this.filterData(resource.dataSource, resource.idField, 'equal', eventObj[resource.field]);\n        if (data.length > 0) {\n            return data[0][resource.cssClassField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.filterData = function (dataSource, field, operator, value) {\n        return new DataManager(dataSource).executeLocal(new Query().where(field, operator, value));\n    };\n    ResourceBase.prototype.dataManagerFailure = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n    };\n    ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n        if (this.parent.activeViewOptions.group.allowGroupEdit) {\n            var resourceObj = {};\n            for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n                var groupIndex = groupEditIndex_1[_i];\n                var resourceLevel = this.lastResourceLevel[groupIndex].groupOrder;\n                for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n                    var fieldName = this.resourceCollection[level].field;\n                    if (isNullOrUndefined(resourceObj[fieldName])) {\n                        resourceObj[fieldName] = [];\n                    }\n                    resourceObj[fieldName].push(resourceLevel[level]);\n                }\n            }\n            eventObj = extend(eventObj, resourceObj);\n        }\n        else {\n            for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n                eventObj[this.resourceCollection[level].field] = this.lastResourceLevel[index].groupOrder[level];\n            }\n        }\n    };\n    ResourceBase.prototype.addResource = function (resources, name, index) {\n        for (var i = 0, length_5 = this.parent.resources.length; i < length_5; i++) {\n            var resource = this.parent.resources[i];\n            if (resource.name === name) {\n                resource.dataSource.splice(index, 0, resources);\n                break;\n            }\n        }\n        this.bindResourcesData(true);\n    };\n    ResourceBase.prototype.removeResource = function (resourceId, name) {\n        var _this = this;\n        var _loop_1 = function (i, length_6) {\n            var resource = this_1.parent.resources[i];\n            if (resource.name === name) {\n                resource.dataSource.forEach(function (data, index) {\n                    if (data[resource.idField] === resourceId) {\n                        _this.parent.resources[i].dataSource.splice(index, 1);\n                    }\n                });\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, length_6 = this.parent.resources.length; i < length_6; i++) {\n            var state_1 = _loop_1(i, length_6);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.bindResourcesData(true);\n    };\n    ResourceBase.prototype.destroy = function () {\n        this.parent.off(events.documentClick, this.documentClick);\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP));\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP_OVERLAY));\n        }\n        var resToolBarEle = this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER);\n        if (resToolBarEle) {\n            remove(resToolBarEle);\n        }\n    };\n    return ResourceBase;\n}());\nexport { ResourceBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, Event, Animation, Collection } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, Internationalization, getDefaultDateObject, cldrData, L10n } from '@syncfusion/ej2-base';\nimport { getValue, compile, extend, isNullOrUndefined, NotifyPropertyChanges, Complex } from '@syncfusion/ej2-base';\nimport { removeClass, addClass, classList, remove } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { HeaderRenderer } from '../renderer/header-renderer';\nimport { Scroll } from '../actions/scroll';\nimport { ScheduleTouch } from '../actions/touch';\nimport { KeyboardInteraction } from '../actions/keyboard';\nimport { Data } from '../actions/data';\nimport { EventBase } from '../event-renderer/event-base';\nimport { QuickPopups } from '../popups/quick-popups';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport { EventWindow } from '../popups/event-window';\nimport { Render } from '../renderer/renderer';\nimport { WorkHours } from '../models/work-hours';\nimport { TimeScale } from '../models/time-scale';\nimport { QuickInfoTemplates } from '../models/quick-info-templates';\nimport { HeaderRows } from '../models/header-rows';\nimport { Crud } from '../actions/crud';\nimport { EventSettings } from '../models/event-settings';\nimport { Group } from '../models/group';\nimport { Resources } from '../models/resources';\nimport { ResourceBase } from '../base/resource';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { Gregorian, Islamic } from '../../common/calendar-util';\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\nvar Schedule = /** @class */ (function (_super) {\n    __extends(Schedule, _super);\n    /**\n     * Constructor for creating the Schedule widget\n     * @hidden\n     */\n    function Schedule(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Core method that initializes the control rendering.\n     * @private\n     */\n    Schedule.prototype.render = function () {\n        var addClasses = [];\n        var removeClasses = [];\n        addClasses.push(cls.ROOT);\n        if (this.enableRtl) {\n            addClasses.push(cls.RTL);\n        }\n        else {\n            removeClasses.push(cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(cls.DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.DEVICE_CLASS);\n        }\n        if (this.cssClass) {\n            addClasses.push(this.cssClass);\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.validateDate();\n        this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n        this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n        createSpinner({ target: this.element });\n        this.scrollModule = new Scroll(this);\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        this.renderModule = new Render(this);\n        this.eventBase = new EventBase(this);\n        this.initializeDataModule();\n        this.element.appendChild(this.createElement('div', { className: cls.TABLE_CONTAINER_CLASS }));\n        this.activeViewOptions = this.getActiveViewOptions();\n        this.initializeResources();\n    };\n    Schedule.prototype.initializeResources = function (isSetModel) {\n        if (isSetModel === void 0) { isSetModel = false; }\n        if (this.resources.length > 0) {\n            this.resourceBase = new ResourceBase(this);\n            this.resourceBase.bindResourcesData(isSetModel);\n        }\n        else {\n            this.resourceBase = null;\n            this.renderElements(isSetModel);\n            if (isSetModel) {\n                this.eventWindow.refresh();\n            }\n        }\n    };\n    Schedule.prototype.renderElements = function (isLayoutOnly) {\n        if (isLayoutOnly) {\n            this.initializeView(this.currentView);\n            return;\n        }\n        this.destroyHeaderModule();\n        if (this.showHeaderBar) {\n            this.headerModule = new HeaderRenderer(this);\n        }\n        if (!this.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS)) {\n            this.element.appendChild(this.createElement('div', { className: cls.TABLE_CONTAINER_CLASS }));\n        }\n        if (Browser.isDevice || Browser.isTouch) {\n            this.scheduleTouchModule = new ScheduleTouch(this);\n        }\n        this.initializeView(this.currentView);\n        this.destroyPopups();\n        this.initializePopups();\n        this.unwireEvents();\n        this.wireEvents();\n    };\n    Schedule.prototype.validateDate = function () {\n        // persist the selected date value\n        this.setProperties({ selectedDate: new Date('' + this.selectedDate) }, true);\n    };\n    Schedule.prototype.getViewIndex = function (viewName) {\n        for (var item = 0; item < this.viewCollections.length; item++) {\n            var checkIndex = this.viewCollections[item].option;\n            if (checkIndex === viewName) {\n                return item;\n            }\n        }\n        return -1;\n    };\n    Schedule.prototype.setViewOptions = function (isModuleLoad) {\n        if (isModuleLoad === void 0) { isModuleLoad = false; }\n        this.viewOptions = {};\n        this.viewCollections = [];\n        var viewName;\n        var selectedView;\n        var count = 0;\n        this.viewIndex = -1;\n        for (var _i = 0, _a = this.views; _i < _a.length; _i++) {\n            var view = _a[_i];\n            var isOptions = (typeof view === 'string') ? false : true;\n            if (typeof view === 'string') {\n                viewName = view;\n                if (this.currentView === viewName) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            else {\n                viewName = view.option;\n                if (view.isSelected) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            var obj = extend({ option: viewName }, isOptions ? view : {});\n            var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n            this.viewCollections.push(obj);\n            if (isNullOrUndefined(this.viewOptions[fieldViewName])) {\n                this.viewOptions[fieldViewName] = [obj];\n            }\n            else {\n                this.viewOptions[fieldViewName].push(obj);\n            }\n            count++;\n        }\n        if (!isModuleLoad && selectedView) {\n            this.setProperties({ currentView: selectedView }, true);\n        }\n        if (this.viewIndex === -1) {\n            var currentIndex = this.getViewIndex(this.currentView);\n            this.viewIndex = (currentIndex === -1) ? 0 : currentIndex;\n        }\n    };\n    Schedule.prototype.getActiveViewOptions = function () {\n        var timeScale = {\n            enable: this.timeScale.enable,\n            interval: this.timeScale.interval,\n            slotCount: this.timeScale.slotCount,\n            majorSlotTemplate: this.timeScale.majorSlotTemplate,\n            minorSlotTemplate: this.timeScale.minorSlotTemplate\n        };\n        var group = {\n            byDate: this.group.byDate,\n            byGroupID: this.group.byGroupID,\n            allowGroupEdit: this.group.allowGroupEdit,\n            resources: this.group.resources,\n            headerTooltipTemplate: this.group.headerTooltipTemplate,\n            enableCompactView: this.group.enableCompactView\n        };\n        var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n        var scheduleOptions = {\n            dateFormat: this.dateFormat,\n            endHour: this.endHour,\n            isSelected: false,\n            option: null,\n            readonly: this.readonly,\n            startHour: this.startHour,\n            allowVirtualScrolling: false,\n            cellTemplate: this.cellTemplate,\n            eventTemplate: this.eventSettings.template,\n            dateHeaderTemplate: this.dateHeaderTemplate,\n            resourceHeaderTemplate: this.resourceHeaderTemplate,\n            workDays: workDays,\n            showWeekend: this.showWeekend,\n            showWeekNumber: this.showWeekNumber,\n            displayName: null,\n            interval: 1,\n            timeScale: timeScale,\n            group: group,\n            headerRows: this.headerRows\n        };\n        return extend(scheduleOptions, this.viewCollections[this.viewIndex], undefined, true);\n    };\n    Schedule.prototype.initializeDataModule = function () {\n        this.eventFields = {\n            id: this.eventSettings.fields.id,\n            isBlock: this.eventSettings.fields.isBlock,\n            subject: this.eventSettings.fields.subject.name,\n            startTime: this.eventSettings.fields.startTime.name,\n            endTime: this.eventSettings.fields.endTime.name,\n            startTimezone: this.eventSettings.fields.startTimezone.name,\n            endTimezone: this.eventSettings.fields.endTimezone.name,\n            location: this.eventSettings.fields.location.name,\n            description: this.eventSettings.fields.description.name,\n            isAllDay: this.eventSettings.fields.isAllDay.name,\n            recurrenceID: this.eventSettings.fields.recurrenceID.name,\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n            recurrenceException: this.eventSettings.fields.recurrenceException.name,\n            isReadonly: this.eventSettings.fields.isReadonly\n        };\n        this.editorTitles = {\n            subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n            startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n            endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n            isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n            startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n            endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n            location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n            description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n        };\n        this.dataModule = new Data(this.eventSettings.dataSource, this.eventSettings.query);\n        this.crudModule = new Crud(this);\n    };\n    Schedule.prototype.initializeView = function (viewName) {\n        this.showSpinner();\n        this.activeViewOptions = this.getActiveViewOptions();\n        if (this.resourceBase) {\n            this.resourceBase.setResourceCollection();\n        }\n        this.initializeTemplates();\n        this.renderModule.render(viewName);\n    };\n    Schedule.prototype.initializeTemplates = function () {\n        this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n        this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n        this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n        this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n        this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n        this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n        this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n    };\n    Schedule.prototype.initializePopups = function () {\n        this.eventWindow = new EventWindow(this);\n        this.quickPopup = new QuickPopups(this);\n    };\n    Schedule.prototype.getDayNames = function (type) {\n        var culShortNames = [];\n        var cldrObj;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            cldrObj = (getValue('days.stand-alone.' + type, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            cldrObj = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            culShortNames.push(getValue(obj, cldrObj));\n        }\n        return culShortNames;\n    };\n    Schedule.prototype.setCldrTimeFormat = function () {\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            this.timeFormat = (getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            this.timeFormat = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData));\n        }\n    };\n    Schedule.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    Schedule.prototype.getTimeString = function (date) {\n        return this.globalize.formatDate(date, { format: this.timeFormat, type: 'time', calendar: this.getCalendarMode() });\n    };\n    Schedule.prototype.setCalendarMode = function () {\n        if (this.calendarMode === 'Islamic') {\n            this.calendarUtil = new Islamic();\n        }\n        else {\n            this.calendarUtil = new Gregorian();\n        }\n    };\n    Schedule.prototype.changeView = function (view, event, muteOnChange, index) {\n        if (isNullOrUndefined(index)) {\n            index = this.getViewIndex(view);\n        }\n        if (!muteOnChange && index === this.viewIndex || index < 0) {\n            return;\n        }\n        this.viewIndex = index;\n        var args = { requestType: 'viewNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        var navArgs = { action: 'view', cancel: false, previousView: this.currentView, currentView: view };\n        this.trigger(events.navigating, navArgs);\n        if (navArgs.cancel) {\n            return;\n        }\n        this.setProperties({ currentView: view }, true);\n        if (this.headerModule) {\n            this.headerModule.updateActiveView();\n            this.headerModule.setCalendarView();\n        }\n        this.initializeView(this.currentView);\n        this.animateLayout();\n        args = { requestType: 'viewNavigate', cancel: false, event: event };\n        this.trigger(events.actionComplete, args);\n    };\n    Schedule.prototype.changeDate = function (selectedDate, event) {\n        var args = { requestType: 'dateNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        var navArgs = { action: 'date', cancel: false, previousDate: this.selectedDate, currentDate: selectedDate };\n        this.trigger(events.navigating, navArgs);\n        if (navArgs.cancel) {\n            return;\n        }\n        this.setProperties({ selectedDate: selectedDate }, true);\n        if (this.headerModule) {\n            this.headerModule.setCalendarDate(selectedDate);\n        }\n        this.initializeView(this.currentView);\n        this.animateLayout();\n        args = { requestType: 'dateNavigate', cancel: false, event: event };\n        this.trigger(events.actionComplete, args);\n    };\n    Schedule.prototype.isSelectedDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n    };\n    Schedule.prototype.getNavigateView = function () {\n        if (this.activeView.isTimelineView()) {\n            return this.currentView === 'TimelineMonth' ? 'TimelineDay' : 'Agenda';\n        }\n        return 'Day';\n    };\n    Schedule.prototype.animateLayout = function () {\n        new Animation({ duration: 600, name: 'FadeIn', timingFunction: 'easeIn' }).animate(this.activeView.element);\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Schedule.prototype.requiredModules = function () {\n        var modules = [];\n        this.setViewOptions(true);\n        for (var _i = 0, _a = Object.keys(this.viewOptions); _i < _a.length; _i++) {\n            var view = _a[_i];\n            view = (view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek') ? 'timelineViews' : view;\n            modules.push({\n                member: view,\n                args: [this]\n            });\n        }\n        if (this.allowDragAndDrop) {\n            modules.push({\n                member: 'dragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowResizing) {\n            modules.push({\n                member: 'resize',\n                args: [this]\n            });\n        }\n        modules.push({\n            member: 'excelExport',\n            args: [this]\n        });\n        modules.push({\n            member: 'iCalendarExport',\n            args: [this]\n        });\n        modules.push({\n            member: 'iCalendarImport',\n            args: [this]\n        });\n        return modules;\n    };\n    /**\n     * Initializes the values of private members.\n     * @private\n     */\n    Schedule.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice;\n        this.globalize = new Internationalization(this.locale);\n        this.uiStateValues = {\n            expand: false,\n            isInitial: true,\n            left: 0,\n            top: 0,\n            isGroupAdaptive: false,\n            isIgnoreOccurrence: false,\n            groupIndex: 0,\n            action: false,\n            isBlock: false\n        };\n        this.activeCellsData = { startTime: new Date(), endTime: new Date(), isAllDay: false };\n        this.activeEventData = { event: undefined, element: undefined };\n        this.defaultLocale = {\n            day: 'Day',\n            week: 'Week',\n            workWeek: 'Work Week',\n            month: 'Month',\n            agenda: 'Agenda',\n            weekAgenda: 'Week Agenda',\n            workWeekAgenda: 'Work Week Agenda',\n            monthAgenda: 'Month Agenda',\n            today: 'Today',\n            noEvents: 'No events',\n            emptyContainer: 'There are no events scheduled on this day.',\n            allDay: 'All day',\n            start: 'Start',\n            end: 'End',\n            more: 'more',\n            close: 'Close',\n            cancel: 'Cancel',\n            noTitle: '(No Title)',\n            delete: 'Delete',\n            deleteEvent: 'Delete Event',\n            deleteMultipleEvent: 'Delete Multiple Events',\n            selectedItems: 'Items selected',\n            deleteSeries: 'Delete Series',\n            edit: 'Edit',\n            editSeries: 'Edit Series',\n            editEvent: 'Edit Event',\n            createEvent: 'Create',\n            subject: 'Subject',\n            addTitle: 'Add title',\n            moreDetails: 'More Details',\n            save: 'Save',\n            editContent: 'Do you want to edit only this event or entire series?',\n            deleteRecurrenceContent: 'Do you want to delete only this event or entire series?',\n            deleteContent: 'Are you sure you want to delete this event?',\n            deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n            newEvent: 'New Event',\n            title: 'Title',\n            location: 'Location',\n            description: 'Description',\n            timezone: 'Timezone',\n            startTimezone: 'Start Timezone',\n            endTimezone: 'End Timezone',\n            repeat: 'Repeat',\n            saveButton: 'Save',\n            cancelButton: 'Cancel',\n            deleteButton: 'Delete',\n            recurrence: 'Recurrence',\n            wrongPattern: 'The recurrence pattern is not valid.',\n            seriesChangeAlert: 'Do you want to cancel the changes made to specific ' +\n                'instances of this series and match it to the whole series again?',\n            createError: 'The duration of the event must be shorter than how frequently it occurs. ' +\n                'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n            recurrenceDateValidation: 'Some months have fewer than the selected date. For these months, ' +\n                'the occurrence will fall on the last date of the month.',\n            sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n            editRecurrence: 'Edit Recurrence',\n            repeats: 'Repeats',\n            alert: 'Alert',\n            startEndError: 'The selected end date occurs before the start date.',\n            invalidDateError: 'The entered date value is invalid.',\n            blockAlert: 'Events cannot be scheduled within the blocked time range.',\n            ok: 'Ok',\n            yes: 'Yes',\n            no: 'No',\n            occurrence: 'Occurrence',\n            series: 'Series',\n            previous: 'Previous',\n            next: 'Next',\n            timelineDay: 'Timeline Day',\n            timelineWeek: 'Timeline Week',\n            timelineWorkWeek: 'Timeline Work Week',\n            timelineMonth: 'Timeline Month'\n        };\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.setCldrTimeFormat();\n        this.setCalendarMode();\n        this.eventsData = [];\n        this.eventsProcessed = [];\n        this.blockData = [];\n        this.blockProcessed = [];\n        this.currentAction = null;\n        this.selectedElements = [];\n        this.setViewOptions();\n    };\n    /**\n     * Binding events to the Schedule element.\n     * @hidden\n     */\n    Schedule.prototype.wireEvents = function () {\n        var resize = 'onorientationchange' in window ? 'orientationchange' : 'resize';\n        EventHandler.add(window, resize, this.onScheduleResize, this);\n        EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n        if (this.allowKeyboardInteraction) {\n            this.keyboardInteractionModule = new KeyboardInteraction(this);\n        }\n    };\n    Schedule.prototype.removeSelectedClass = function () {\n        var selectedCells = this.getSelectedElements();\n        for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n            var cell = selectedCells_1[_i];\n            cell.setAttribute('aria-selected', 'false');\n            cell.removeAttribute('tabindex');\n        }\n        removeClass(selectedCells, cls.SELECTED_CELL_CLASS);\n    };\n    Schedule.prototype.addSelectedClass = function (cells, focusCell) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            cell.setAttribute('aria-selected', 'true');\n        }\n        addClass(cells, cls.SELECTED_CELL_CLASS);\n        if (focusCell) {\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n        }\n    };\n    Schedule.prototype.selectCell = function (element) {\n        this.removeSelectedClass();\n        this.addSelectedClass([element], element);\n    };\n    Schedule.prototype.getSelectedElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.SELECTED_CELL_CLASS));\n    };\n    Schedule.prototype.getAllDayRow = function () {\n        return this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n    };\n    Schedule.prototype.getContentTable = function () {\n        return this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    };\n    Schedule.prototype.getTableRows = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr:not(.' + cls.HIDDEN_CLASS + ')'));\n    };\n    Schedule.prototype.getWorkCellElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    };\n    Schedule.prototype.getIndexOfDate = function (collection, date) {\n        return collection.map(Number).indexOf(+date);\n    };\n    Schedule.prototype.isAllDayCell = function (td) {\n        if (this.currentView === 'Month' || this.currentView === 'TimelineMonth' || td.classList.contains(cls.ALLDAY_CELLS_CLASS)\n            || td.classList.contains(cls.HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n            return true;\n        }\n        if (this.activeViewOptions.headerRows.length > 0 && this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return true;\n        }\n        return false;\n    };\n    Schedule.prototype.getDateFromElement = function (td) {\n        if (!isNullOrUndefined(td.getAttribute('data-date'))) {\n            var dateInMS = parseInt(td.getAttribute('data-date'), 10);\n            return new Date(dateInMS);\n        }\n        return undefined;\n    };\n    Schedule.prototype.getCellTemplate = function () {\n        return this.cellTemplateFn;\n    };\n    Schedule.prototype.getDateHeaderTemplate = function () {\n        return this.dateHeaderTemplateFn;\n    };\n    Schedule.prototype.getMajorSlotTemplate = function () {\n        return this.majorSlotTemplateFn;\n    };\n    Schedule.prototype.getMinorSlotTemplate = function () {\n        return this.minorSlotTemplateFn;\n    };\n    Schedule.prototype.getAppointmentTemplate = function () {\n        return this.appointmentTemplateFn;\n    };\n    Schedule.prototype.getEventTooltipTemplate = function () {\n        return this.eventTooltipTemplateFn;\n    };\n    Schedule.prototype.getHeaderTooltipTemplate = function () {\n        return this.headerTooltipTemplateFn;\n    };\n    Schedule.prototype.getEditorTemplate = function () {\n        return this.editorTemplateFn;\n    };\n    Schedule.prototype.getQuickInfoTemplatesHeader = function () {\n        return this.quickInfoTemplatesHeaderFn;\n    };\n    Schedule.prototype.getQuickInfoTemplatesContent = function () {\n        return this.quickInfoTemplatesContentFn;\n    };\n    Schedule.prototype.getQuickInfoTemplatesFooter = function () {\n        return this.quickInfoTemplatesFooterFn;\n    };\n    Schedule.prototype.getResourceHeaderTemplate = function () {\n        return this.resourceHeaderTemplateFn;\n    };\n    Schedule.prototype.getCssProperties = function () {\n        var cssProps = {\n            border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n            padding: this.enableRtl ? 'paddingLeft' : 'paddingRight'\n        };\n        return cssProps;\n    };\n    Schedule.prototype.removeNewEventElement = function () {\n        var eventClone = this.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n        if (!isNullOrUndefined(eventClone)) {\n            remove(eventClone);\n        }\n    };\n    Schedule.prototype.onDocumentClick = function (args) {\n        this.notify(events.documentClick, { event: args });\n    };\n    Schedule.prototype.onScheduleResize = function () {\n        if (this.quickPopup) {\n            this.quickPopup.onClosePopup();\n        }\n        if (this.currentView === 'Month' || !this.activeViewOptions.timeScale.enable || this.activeView.isTimelineView()) {\n            this.notify(events.dataReady, {});\n        }\n    };\n    Schedule.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    Schedule.prototype.boundaryValidation = function (pageY, pageX) {\n        var autoScrollDistance = 30;\n        var scrollEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            scrollEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            scrollEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            scrollEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            scrollEdges.right = true;\n        }\n        return scrollEdges;\n    };\n    /**\n     * Unbinding events from the element on widget destroy.\n     * @hidden\n     */\n    Schedule.prototype.unwireEvents = function () {\n        var resize = 'onorientationchange' in window ? 'orientationchange' : 'resize';\n        EventHandler.remove(window, resize, this.onScheduleResize);\n        EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n        if (this.keyboardInteractionModule) {\n            this.keyboardInteractionModule.destroy();\n        }\n    };\n    /**\n     * Core method to return the component name.\n     * @private\n     */\n    Schedule.prototype.getModuleName = function () {\n        return 'schedule';\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     * @private\n     */\n    Schedule.prototype.getPersistData = function () {\n        return this.addOnPersist(['currentView', 'selectedDate']);\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     * @private\n     */\n    Schedule.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var state = { isRefresh: false, isResource: false, isDate: false, isView: false, isLayout: false, isDataManager: false };\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'views':\n                    this.setViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateItems();\n                    }\n                    state.isView = true;\n                    break;\n                case 'currentView':\n                    state.isView = true;\n                    break;\n                case 'selectedDate':\n                    state.isDate = true;\n                    break;\n                case 'dateFormat':\n                    this.activeViewOptions = this.getActiveViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    break;\n                case 'showHeaderBar':\n                    this.destroyHeaderModule();\n                    if (newProp.showHeaderBar) {\n                        this.headerModule = new HeaderRenderer(this);\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties() });\n                    if (this.activeView.isTimelineView()) {\n                        this.notify(events.dataReady, {});\n                    }\n                    break;\n                case 'showWeekend':\n                case 'workDays':\n                case 'startHour':\n                case 'endHour':\n                case 'workHours':\n                case 'readonly':\n                case 'headerRows':\n                case 'showWeekNumber':\n                    state.isLayout = true;\n                    break;\n                case 'locale':\n                case 'calendarMode':\n                    this.setCldrTimeFormat();\n                    this.setCalendarMode();\n                    state.isRefresh = true;\n                    break;\n                case 'firstDayOfWeek':\n                    if (this.headerModule) {\n                        this.headerModule.setDayOfWeek(newProp.firstDayOfWeek);\n                    }\n                    if (this.eventWindow) {\n                        this.eventWindow.refreshRecurrenceEditor();\n                    }\n                    state.isLayout = true;\n                    break;\n                case 'showTimeIndicator':\n                    if (this.activeViewOptions.timeScale.enable && this.activeView) {\n                        this.activeView.highlightCurrentTime();\n                    }\n                    break;\n                case 'cellTemplate':\n                    this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n                    this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateHeaderTemplate':\n                    this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n                    this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'timezone':\n                    this.eventBase.timezonePropertyChange(oldProp.timezone);\n                    break;\n                case 'enableRtl':\n                    state.isRefresh = true;\n                    break;\n                case 'enableAdaptiveRows':\n                    state.isLayout = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, oldProp, state);\n                    break;\n            }\n        }\n        this.propertyChangeAction(state);\n    };\n    Schedule.prototype.propertyChangeAction = function (state) {\n        if (state.isRefresh) {\n            this.refresh();\n        }\n        else if (state.isResource) {\n            this.initializeResources(true);\n        }\n        else if (state.isView) {\n            this.changeView(this.currentView, null, true);\n        }\n        else if (state.isDate) {\n            this.changeDate(this.selectedDate);\n        }\n        else if (state.isLayout) {\n            this.initializeView(this.currentView);\n        }\n        else if (state.isDataManager && this.renderModule) {\n            this.renderModule.refreshDataManager();\n        }\n    };\n    Schedule.prototype.extendedPropertyChange = function (prop, newProp, oldProp, state) {\n        switch (prop) {\n            case 'width':\n            case 'height':\n                this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                break;\n            case 'cssClass':\n                if (oldProp.cssClass) {\n                    removeClass([this.element], oldProp.cssClass);\n                }\n                if (newProp.cssClass) {\n                    addClass([this.element], newProp.cssClass);\n                }\n                break;\n            case 'hideEmptyAgendaDays':\n            case 'agendaDaysCount':\n                this.activeViewOptions = this.getActiveViewOptions();\n                state.isView = true;\n                break;\n            case 'eventSettings':\n                this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n                break;\n            case 'allowKeyboardInteraction':\n                if (this.keyboardInteractionModule) {\n                    this.keyboardInteractionModule.destroy();\n                    this.keyboardInteractionModule = null;\n                }\n                if (newProp.allowKeyboardInteraction) {\n                    this.keyboardInteractionModule = new KeyboardInteraction(this);\n                }\n                break;\n            case 'editorTemplate':\n                if (!isNullOrUndefined(this.editorTemplate)) {\n                    this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogContent();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickInfoTemplates.header) {\n                    this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                }\n                if (this.quickInfoTemplates.content) {\n                    this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                }\n                if (this.quickInfoTemplates.footer) {\n                    this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                }\n                break;\n            case 'group':\n                this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n                break;\n            case 'resources':\n                state.isResource = true;\n                break;\n            case 'timeScale':\n                this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n                this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'allowDragAndDrop':\n            case 'allowResizing':\n                this.notify(events.dataReady, {\n                    processedData: this.eventBase.processData(this.eventsData)\n                });\n                break;\n            case 'eventDragArea':\n                this.notify(events.dataReady, {});\n                break;\n        }\n    };\n    Schedule.prototype.onGroupSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            if (prop === 'headerTooltipTemplate') {\n                this.headerTooltipTemplateFn = this.templateParser(newProp[prop]);\n            }\n            else {\n                state.isLayout = true;\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n            }\n        }\n    };\n    Schedule.prototype.onEventSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'dataSource':\n                case 'query':\n                case 'fields':\n                    this.initializeDataModule();\n                    state.isDataManager = true;\n                    break;\n                case 'template':\n                    this.activeViewOptions.eventTemplate = newProp.template;\n                    this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                    state.isDataManager = true;\n                    break;\n                case 'enableTooltip':\n                    if (this.eventTooltip) {\n                        this.eventTooltip.destroy();\n                        this.eventTooltip = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.eventTooltip = new EventTooltip(this);\n                    }\n                    break;\n                case 'tooltipTemplate':\n                    this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                    break;\n                case 'resourceColorField':\n                    if (this.resourceBase) {\n                        this.resourceBase.setResourceCollection();\n                    }\n                    state.isDataManager = true;\n                    break;\n            }\n        }\n    };\n    Schedule.prototype.destroyHeaderModule = function () {\n        if (this.headerModule) {\n            this.headerModule.destroy();\n            this.headerModule = null;\n        }\n    };\n    Schedule.prototype.destroyPopups = function () {\n        if (this.quickPopup) {\n            this.quickPopup.destroy();\n            this.quickPopup = null;\n        }\n        if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n        }\n    };\n    /**\n     * Allows to show the spinner on schedule at the required scenarios.\n     */\n    Schedule.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n     */\n    Schedule.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n     *  as its parameters.\n     * @method setWorkHours\n     * @param {date} dates Collection of dates on which the given start and end hour range needs to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.setWorkHours = function (dates, start, end, groupIndex) {\n        var startHour = this.globalize.parseDate(start, { skeleton: 'Hm', calendar: this.getCalendarMode() });\n        var endHour = this.globalize.parseDate(end, { skeleton: 'Hm', calendar: this.getCalendarMode() });\n        var tableEle = this.getContentTable();\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n            return;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        var viewStartHour = this.activeView.getStartHour();\n        if (startHour < viewStartHour) {\n            startHour = viewStartHour;\n        }\n        if (endHour > this.activeView.getEndHour()) {\n            endHour = this.activeView.getEndHour();\n        }\n        var msMajorInterval = this.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n        var startIndex = Math.round((util.getDateInMs(startHour) - util.getDateInMs(viewStartHour)) / msInterval);\n        var endIndex = Math.ceil((util.getDateInMs(endHour) - util.getDateInMs(viewStartHour)) / msInterval);\n        var cells = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            util.resetTime(date);\n            var renderDates = this.activeView.renderDates;\n            if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n                renderDates = this.resourceBase.lastResourceLevel[groupIndex].renderDates;\n            }\n            var colIndex = this.getIndexOfDate(renderDates, date);\n            if (colIndex >= 0) {\n                for (var i = startIndex; i < endIndex; i++) {\n                    if (this.activeView.isTimelineView()) {\n                        var rowIndex = (!isNullOrUndefined(groupIndex)) ? groupIndex : 0;\n                        cells.push(tableEle.rows[rowIndex].cells[i]);\n                    }\n                    else {\n                        if (!isNullOrUndefined(groupIndex)) {\n                            var tds = [].slice.call(tableEle.rows[i].querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]'));\n                            cells.push(tds[colIndex]);\n                        }\n                        else {\n                            cells.push(tableEle.rows[i].cells[colIndex]);\n                        }\n                    }\n                }\n            }\n        }\n        addClass(cells, cls.WORK_HOURS_CLASS);\n    };\n    /**\n     * Retrieves the start and end time information of the specific cell element.\n     * @method getCellDetails\n     * @param  {Element} td The cell element whose start and end time details are to be retrieved.\n     * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML\n     *  element will be returned.\n     */\n    Schedule.prototype.getCellDetails = function (tdCol) {\n        var td = (tdCol instanceof Array) ? tdCol : [tdCol];\n        var firstTd = td[0];\n        var lastTd = td.slice(-1)[0];\n        var startTime = this.getDateFromElement(firstTd);\n        var endTime = this.getDateFromElement(lastTd);\n        if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n            return undefined;\n        }\n        var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan'));\n        var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n        if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(cls.ALLDAY_CELLS_CLASS) ||\n            lastTd.classList.contains(cls.HEADER_CELLS_CLASS)) {\n            endTime = util.addDays(new Date(startTime.getTime()), duration);\n        }\n        else {\n            endTime = this.activeView.getEndDateFromStartDate(endTime);\n        }\n        var data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: this.isAllDayCell(firstTd),\n            element: tdCol\n        };\n        var groupIndex = firstTd.getAttribute('data-group-index');\n        if (!isNullOrUndefined(groupIndex)) {\n            data.groupIndex = parseInt(groupIndex, 10);\n        }\n        return data;\n    };\n    /**\n     * Retrieves the resource details based on the provided resource index.\n     * @param {number} index index of the resources at the last level.\n     * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n     */\n    Schedule.prototype.getResourcesByIndex = function (index) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n                return undefined;\n            }\n            var data = this.resourceBase.lastResourceLevel[index];\n            var groupData = {};\n            this.resourceBase.setResourceValues(groupData, false, index);\n            return { resource: data.resource, resourceData: data.resourceData, groupData: groupData };\n        }\n        return undefined;\n    };\n    /**\n     * Scrolls the Schedule content area to the specified time.\n     * @method scrollTo\n     * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n     * @returns {void}\n     */\n    Schedule.prototype.scrollTo = function (hour) {\n        if (this.activeView.scrollToHour) {\n            this.activeView.scrollToHour(hour);\n        }\n    };\n    /**\n     * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n     * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n     * @method exportToICalendar\n     * @param {string} fileName Accepts the string value.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToICalendar = function (fileName) {\n        if (this.iCalendarExportModule) {\n            this.iCalendarExportModule.initializeCalendarExport(fileName);\n        }\n        else {\n            throw Error('Inject ICalendarExport module');\n        }\n    };\n    /**\n     * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n     * This method accepts the blob object of an .ics file to be imported as a mandatory argument.\n     * @method importICalendar\n     * @param {Blob} fileContent Accepts the file object.\n     * @returns {void}\n     */\n    Schedule.prototype.importICalendar = function (fileContent) {\n        if (this.iCalendarImportModule) {\n            this.iCalendarImportModule.initializeCalendarImport(fileContent);\n        }\n        else {\n            throw Error('Inject ICalendarImport module');\n        }\n    };\n    /**\n     * Adds the newly created event into the Schedule dataSource.\n     * @method addEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n     * @returns {void}\n     */\n    Schedule.prototype.addEvent = function (data) {\n        this.crudModule.addEvent(data);\n    };\n    /**\n     * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n     * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n     * To export only the specific events of Scheduler, you need to pass the custom data collection as\n     * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n     * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n     * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n     * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n     * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n     * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n     * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n     * @method exportToExcel\n     * @param  {ExportOptions} excelExportOptions The export options to be set before start with\n     * exporting the Scheduler events to an Excel file.\n     * @return {void}\n     */\n    Schedule.prototype.exportToExcel = function (excelExportOptions) {\n        if (this.excelExportModule) {\n            this.excelExportModule.initializeExcelExport(excelExportOptions || {});\n        }\n        else {\n            throw Error('Inject ExcelExport module');\n        }\n    };\n    /**\n     * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n     * @method saveEvent\n     * @param {[key: string]: Object} data Single or collection of event objects to be saved into Schedule.\n     * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n     *  The valid current action names are `EditOccurrence` or `EditSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.saveEvent = function (data, currentAction) {\n        this.crudModule.saveEvent(data, currentAction);\n    };\n    /**\n     * Deletes the events based on the provided ID or event collection in the argument list.\n     * @method deleteEvent\n     * @param {{[key: string]: Object}} id Single event objects to be removed from the Schedule.\n     * @param {{[key: string]: Object }[]} id Collection of event objects to be removed from the Schedule.\n     * @param {string | number} id Accepts the ID of the event object which needs to be removed from the Schedule.\n     * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n     *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.deleteEvent = function (id, currentAction) {\n        this.crudModule.deleteEvent(id, currentAction);\n    };\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     * @method getEvents\n     * @returns {Object[]} Returns the collection of event objects from the Schedule.\n     */\n    Schedule.prototype.getEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents();\n        }\n        else {\n            eventCollections = this.eventsData;\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n     * @method getOccurrencesByID\n     * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n    Schedule.prototype.getOccurrencesByID = function (eventID) {\n        return this.eventBase.getOccurrencesByID(eventID);\n    };\n    /**\n     * Retrieves all the occurrences that lies between the specific start and end time range.\n     * @method getOccurrencesByRange\n     * @param {Date} startTime Denotes the start time range.\n     * @param {Date} endTime Denotes the end time range.\n     * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n     */\n    Schedule.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        return this.eventBase.getOccurrencesByRange(startTime, endTime);\n    };\n    /**\n     * Retrieves the dates that lies on active view of Schedule.\n     * @method getCurrentViewDates\n     * @returns {Date[]} Returns the collection of dates.\n     */\n    Schedule.prototype.getCurrentViewDates = function () {\n        return this.activeView ? this.activeView.renderDates : [];\n    };\n    /**\n     * Retrieves the events that lies on the current date range of the active view of Schedule.\n     * @method getCurrentViewEvents\n     * @returns {Object[]} Returns the collection of events.\n     */\n    Schedule.prototype.getCurrentViewEvents = function () {\n        return this.eventsProcessed;\n    };\n    /**\n     * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n     * @method refreshEvents\n     * @returns {void}\n     */\n    Schedule.prototype.refreshEvents = function () {\n        this.renderModule.refreshDataManager();\n    };\n    /**\n     * To retrieve the appointment object from element.\n     * @method getEventDetails\n     * @param {Element} element Denotes the event UI element on the Schedule.\n     * @returns {Object} Returns the event details.\n     */\n    Schedule.prototype.getEventDetails = function (element) {\n        var guid = element.getAttribute('data-guid');\n        if (guid) {\n            return this.eventBase.getEventByGuid(guid);\n        }\n        return {};\n    };\n    /**\n     * To check whether the given time range slots are available for event creation or already occupied by other events.\n     * @method isSlotAvailable\n     * @param {Date} startTime Denotes the start time of the slot.\n     * @param {Date} endTime Denotes the end time of the slot.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n     */\n    Schedule.prototype.isSlotAvailable = function (startTime, endTime, groupIndex) {\n        var _this = this;\n        var eventCollection = this.eventBase.filterEvents(startTime, endTime);\n        if (this.currentAction !== 'Add' && this.activeEventData.event) {\n            eventCollection = eventCollection.filter(function (event) { return event.Guid !==\n                _this.activeEventData.event.Guid; });\n        }\n        if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n            eventCollection = this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[groupIndex], eventCollection);\n        }\n        return (eventCollection.length > 0) ? false : true;\n    };\n    /**\n     * To manually open the event editor on specific time or on certain events.\n     * @method openEditor\n     * @param {Object} data It can be either cell data or event data.\n     * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n     *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n     *  and `EditSeries`.\n     * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n     *  passed event details.\n     * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n     * @returns {void}\n     */\n    Schedule.prototype.openEditor = function (data, action, isEventData, repeatType) {\n        this.currentAction = action;\n        if (action !== 'Add') {\n            this.activeEventData.event = data;\n        }\n        this.eventWindow.openEditor(data, action, isEventData, repeatType);\n    };\n    /**\n     * Adds the resources to the specified index.\n     * @param resources\n     * @param {string} name Name of the resource defined in resources collection.\n     * @param {number} index Index or position where the resource should be added.\n     */\n    Schedule.prototype.addResource = function (resources, name, index) {\n        this.resourceBase.addResource(resources, name, index);\n    };\n    /**\n     * Removes the specified resource.\n     * @param resourceId Specifies the resource id to be removed.\n     * @param name Specifies the resource name from which the id should be referred.\n     */\n    Schedule.prototype.removeResource = function (resourceId, name) {\n        this.resourceBase.removeResource(resourceId, name);\n    };\n    /**\n     * Destroys the Schedule component.\n     * @method destroy\n     * @return {void}\n     */\n    Schedule.prototype.destroy = function () {\n        if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n        }\n        this.destroyPopups();\n        this.unwireEvents();\n        this.destroyHeaderModule();\n        if (this.scrollModule) {\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n        if (this.activeView) {\n            this.activeView.removeEventListener();\n            this.activeView.destroy();\n            this.activeView = null;\n        }\n        if (this.scheduleTouchModule) {\n            this.scheduleTouchModule.destroy();\n            this.scheduleTouchModule = null;\n        }\n        _super.prototype.destroy.call(this);\n        this.element.innerHTML = '';\n        var removeClasses = [cls.ROOT];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n    };\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"height\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showHeaderBar\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showTimeIndicator\", void 0);\n    __decorate([\n        Property('Week')\n    ], Schedule.prototype, \"currentView\", void 0);\n    __decorate([\n        Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])\n    ], Schedule.prototype, \"views\", void 0);\n    __decorate([\n        Property(new Date())\n    ], Schedule.prototype, \"selectedDate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], Schedule.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showWeekend\", void 0);\n    __decorate([\n        Property(0)\n    ], Schedule.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property([1, 2, 3, 4, 5])\n    ], Schedule.prototype, \"workDays\", void 0);\n    __decorate([\n        Property('00:00')\n    ], Schedule.prototype, \"startHour\", void 0);\n    __decorate([\n        Property('24:00')\n    ], Schedule.prototype, \"endHour\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Complex({}, WorkHours)\n    ], Schedule.prototype, \"workHours\", void 0);\n    __decorate([\n        Complex({}, TimeScale)\n    ], Schedule.prototype, \"timeScale\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showQuickInfo\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"showWeekNumber\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"enableAdaptiveRows\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"editorTemplate\", void 0);\n    __decorate([\n        Complex({}, QuickInfoTemplates)\n    ], Schedule.prototype, \"quickInfoTemplates\", void 0);\n    __decorate([\n        Property(7)\n    ], Schedule.prototype, \"agendaDaysCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"timezone\", void 0);\n    __decorate([\n        Complex({}, EventSettings)\n    ], Schedule.prototype, \"eventSettings\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n    __decorate([\n        Complex({}, Group)\n    ], Schedule.prototype, \"group\", void 0);\n    __decorate([\n        Collection([], Resources)\n    ], Schedule.prototype, \"resources\", void 0);\n    __decorate([\n        Collection([], HeaderRows)\n    ], Schedule.prototype, \"headerRows\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"eventDragArea\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"navigating\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"renderCell\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventRendered\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupOpen\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBound\", void 0);\n    Schedule = __decorate([\n        NotifyPropertyChanges\n    ], Schedule);\n    return Schedule;\n}(Component));\nexport { Schedule };\n","import { addClass, createElement, compile, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function () {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            var indexCol = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n            if (indexCol.indexOf(this.actionObj.groupIndex) === -1) {\n                var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                indexCol = indexCol.filter(function (index) { return index !== cloneIndex_1; });\n                indexCol.push(this.actionObj.groupIndex);\n                this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol);\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs) {\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var eventObj = eventArgs.data;\n        var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n            parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n            +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n            return;\n        }\n        var currentAction;\n        if (eventObj[this.parent.eventFields.recurrenceRule]) {\n            var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n            if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                currentAction = 'EditOccurrence';\n            }\n            if (this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return;\n            }\n        }\n        if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(eventObj);\n        }\n        this.parent.crudModule.saveEvent(eventObj, currentAction);\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date) {\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                timeElement.innerHTML = this.parent.getTimeString(this.actionObj.start) + ' - ' +\n                    this.parent.getTimeString(this.actionObj.end);\n            }\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        if (this.parent.activeView.isTimelineView()) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneElement = compile(element.outerHTML)({})[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        element.parentElement.appendChild(cloneElement);\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag') {\n            document.querySelector(this.parent.eventDragArea).appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement.forEach(function (element) { return removeClass([element], cls.EVENT_ACTION_CLASS); });\n        this.actionObj.originalElement = [];\n        this.actionObj.cloneElement.forEach(function (element) { return remove(element); });\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function (e) {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation(e) && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(e);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(e);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    /**\n     * To destroy the action base module.\n     * @return {void}\n     * @private\n     */\n    ActionBase.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, Browser, EventHandler, closest, extend, formatUnit, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule events resize actions\n */\nvar Resize = /** @class */ (function (_super) {\n    __extends(Resize, _super);\n    function Resize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Resize.prototype.wireResizeEvent = function (element) {\n        var _this = this;\n        var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n        resizeElement.forEach(function (element) { return EventHandler.add(element, Browser.touchStartEvent, _this.resizeStart, _this); });\n    };\n    Resize.prototype.resizeHelper = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            this.actionObj.originalElement.forEach(function (element, index) {\n                var cloneElement = _this.createCloneElement(element);\n                _this.actionObj.cloneElement[index] = cloneElement;\n                if (_this.actionObj.element === element) {\n                    _this.actionObj.clone = cloneElement;\n                }\n            });\n        }\n        else {\n            this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(event.resizeStart, resizeArgs);\n        if (resizeArgs.cancel) {\n            return;\n        }\n        this.actionClass('addClass');\n        this.parent.uiStateValues.action = true;\n        this.resizeEdges = {\n            left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n            right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n            top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n            bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n        };\n        this.actionObj.groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : 0;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n        var headerRows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n        if (this.parent.activeView.isTimelineView() && headerRows.length > 0 && ['Date', 'Hour'].indexOf(headerRows.slice(-1)[0]) < 0) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            var noOfDays_1 = 0;\n            var tdCollections = [].slice.call(tr.childNodes);\n            tdCollections.forEach(function (td) { return noOfDays_1 += parseInt(td.getAttribute('colspan'), 10); });\n            this.actionObj.cellWidth = tr.offsetWidth / noOfDays_1;\n            this.actionObj.cellHeight = tr.offsetHeight;\n        }\n        var pages = this.getPageCoordinates(e);\n        this.actionObj.X = pages.pageX;\n        this.actionObj.Y = pages.pageY;\n        this.actionObj.groupIndex = parseInt(this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n        this.actionObj.interval = resizeArgs.interval;\n        this.actionObj.scroll = resizeArgs.scroll;\n        this.actionObj.start = new Date(eventObj[this.parent.eventFields.startTime].getTime());\n        this.actionObj.end = new Date(eventObj[this.parent.eventFields.endTime].getTime());\n        this.actionObj.originalElement = this.getOriginalElement(this.actionObj.element);\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n        EventHandler.add(document, Browser.touchMoveEvent, this.resizing, this);\n        EventHandler.add(document, Browser.touchEndEvent, this.resizeStop, this);\n    };\n    Resize.prototype.resizing = function (e) {\n        this.parent.quickPopup.quickPopupHide();\n        if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        var pages = this.getPageCoordinates(e);\n        this.actionObj.pageX = pages.pageX;\n        this.actionObj.pageY = pages.pageY;\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        this.parent.trigger(event.resizing, resizeArgs);\n    };\n    Resize.prototype.updateResizingDirection = function (e) {\n        var resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                var leftStyles = this.getLeftRightStyles(e, true);\n                for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n                    var cloneElement = _a[_i];\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                var rightStyles = this.getLeftRightStyles(e, false);\n                for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n                    var cloneElement = _c[_b];\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                var topStyles = this.getTopBottomStyles(e, true);\n                for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n                    var cloneElement = _e[_d];\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                var bottomStyles = this.getTopBottomStyles(e, false);\n                for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n                    var cloneElement = _g[_f];\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    };\n    Resize.prototype.resizeStop = function (e) {\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(event.resizeStop, resizeArgs);\n        if (resizeArgs.cancel) {\n            return;\n        }\n        this.saveChangedData(resizeArgs);\n    };\n    Resize.prototype.verticalResizing = function (isTop) {\n        var offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        var minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        var resizeTime = util.resetTime(new Date(parseInt(this.actionObj.clone.offsetParent.getAttribute('data-date'), 10)));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes);\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    };\n    Resize.prototype.horizontalResizing = function (isLeft) {\n        var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        var resizeTime;\n        if (this.parent.activeView.isTimelineView()) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            var headerName = this.parent.currentView;\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                var rows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n                headerName = rows.slice(-1)[0];\n                if (this.parent.currentView === 'TimelineMonth' && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            var cellIndex = 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                var noOfDays_2 = 0;\n                var tdCollections = [].slice.call(tr.childNodes);\n                tdCollections.forEach(function (td) { return noOfDays_2 += parseInt(td.getAttribute('colspan'), 10); });\n                var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                if (!isLeft) {\n                    offsetValue += (this.actionObj.clone.offsetWidth - this.actionObj.cellWidth);\n                }\n                cellIndex = Math.floor(offsetValue / (tr.offsetWidth / noOfDays_2));\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays_2) ? noOfDays_2 - 1 : cellIndex;\n            }\n            else {\n                var cellWidth = this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable ?\n                    this.actionObj.cellWidth : this.actionObj.cellWidth - this.actionObj.interval;\n                cellIndex = isLeft ? Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth) :\n                    Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth - cellWidth)) /\n                        this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    var cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        this.parent.currentView !== 'TimelineMonth')) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    var offsetWidth = (Math.floor(parseInt(this.actionObj.clone.style.right, 10) / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.actionObj.clone.offsetWidth - cellOffsetWidth);\n                    cellIndex = Math.ceil(offsetWidth / this.actionObj.cellWidth);\n                }\n                cellIndex = this.getIndex(cellIndex);\n            }\n            var resizeDate = void 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n            }\n            else {\n                resizeDate = new Date(parseInt(tr.childNodes.item(cellIndex).getAttribute('data-date'), 10));\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                var offsetValue = this.parent.enableRtl ? parseFloat(this.actionObj.clone.style.right) :\n                    parseFloat(this.actionObj.clone.style.left);\n                if (!isLeft) {\n                    offsetValue += this.actionObj.clone.offsetWidth;\n                }\n                var spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offsetValue - Math.floor(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            var originalWidth = Math.ceil((isLeft ? this.actionObj.element.offsetWidth : 0) / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            var noOfDays = Math.ceil((this.actionObj.clone.offsetWidth - originalWidth) / this.actionObj.cellWidth);\n            var tr = closest(this.actionObj.clone, 'tr');\n            var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = new Date(parseInt(tr.childNodes.item(dayIndex).getAttribute('data-date'), 10));\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        if (isLeft) {\n            this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            var resizeEnd = (this.actionObj.event[this.parent.eventFields.isAllDay] && resizeTime.getHours() === 0 &&\n                resizeTime.getMinutes() === 0) ? util.addDays(resizeTime, 1) : resizeTime;\n            this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ?\n                this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    };\n    Resize.prototype.getTopBottomStyles = function (e, isTop) {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        var clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = Math.floor(clnTop / slotInterval) * slotInterval;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        var styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? this.actionObj.cellHeight : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? this.actionObj.clone.offsetTop : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    };\n    Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n        var styles = {};\n        var isTimelineView = this.parent.activeView.isTimelineView();\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        var slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        var pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        var targetWidth = isTimelineView ?\n            (this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.actionObj.element.offsetWidth :\n                Math.ceil(this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (Math.ceil(pageWidth / slotInterval) * slotInterval);\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        styles.width = formatUnit((offsetWidth < this.actionObj.cellWidth) ? this.actionObj.cellWidth : offsetWidth);\n        if (this.parent.enableRtl) {\n            var rightValue = isTimelineView ?\n                Math.floor(parseInt(this.actionObj.element.style.right, 10) / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.offsetWidth +\n                    (this.actionObj.pageX - this.actionObj.X))) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n                rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n            }\n            styles.right = formatUnit(rightValue);\n        }\n        else {\n            var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.offsetWidth) ?\n                        parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.offsetWidth &&\n                        this.actionObj.clone.offsetWidth === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            var leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            var cloneWidth = Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        return styles;\n    };\n    Resize.prototype.resizeValidation = function (e) {\n        var pages = this.getPageCoordinates(e);\n        var viewDimension = this.getContentAreaDimension();\n        var resizeValidation = false;\n        if (this.resizeEdges.left) {\n            resizeValidation = (pages.pageX - this.actionObj.cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            resizeValidation = (pages.pageX + this.actionObj.cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    };\n    /**\n     * Get module name.\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}(ActionBase));\nexport { Resize };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, closest, Draggable, extend, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule events drag actions\n */\nvar DragAndDrop = /** @class */ (function (_super) {\n    __extends(DragAndDrop, _super);\n    function DragAndDrop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DragAndDrop.prototype.wireDragEvent = function (element, isAllDay) {\n        var dragAreaTarget = cls.CURRENT_PANEL_CLASS;\n        new Draggable(element, {\n            abort: '.' + cls.EVENT_RESIZE_CLASS,\n            clone: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: (this.parent.eventDragArea) ? true : false,\n            cursorAt: (this.parent.eventDragArea) ? { left: -20, top: -20 } : { left: 0, top: 0 },\n            dragArea: (this.parent.eventDragArea) ?\n                document.querySelector(this.parent.eventDragArea) :\n                this.parent.element.querySelector('.' + dragAreaTarget),\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this),\n            queryPositionInfo: this.dragPosition.bind(this)\n        });\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        this.setDragActionDefaultValues();\n        this.actionObj.element = e.element;\n        this.actionObj.action = 'drag';\n        this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n        if (!this.parent.eventDragArea && this.parent.currentView !== 'Month' &&\n            this.parent.timeScale.enable && !this.parent.activeView.isTimelineView() &&\n            !this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n            setStyleAttribute(this.actionObj.clone, { cursor: 'move', left: '0%', right: '0%', width: '100%' });\n        }\n        this.actionObj.clone.style.top = formatUnit(this.actionObj.element.offsetTop);\n        this.actionObj.cloneElement = [this.actionObj.clone];\n        this.actionObj.originalElement = [this.actionObj.element];\n        return this.actionObj.clone;\n    };\n    DragAndDrop.prototype.dragPosition = function (e) {\n        if (this.parent.eventDragArea) {\n            return { left: e.left, top: e.top };\n        }\n        var slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        var cellWidth = this.parent.activeView.isTimelineView() ? (this.actionObj.cellWidth / slotInterval) *\n            this.actionObj.interval : this.actionObj.cellWidth;\n        var cellHeight = (this.actionObj.cellHeight / slotInterval) * this.actionObj.interval;\n        var leftOffset = this.parent.enableRtl ? parseInt(e.left, 10) : Math.abs(parseInt(e.left, 10));\n        var leftValue = formatUnit(0);\n        if (this.parent.currentView === 'Month') {\n            leftValue = e.left;\n        }\n        if (this.parent.activeView.isTimelineView()) {\n            leftValue = formatUnit(Math.round(leftOffset / cellWidth) * cellWidth);\n        }\n        var topValue;\n        if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable ||\n            (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)))) {\n            topValue = formatUnit(this.actionObj.clone.offsetTop);\n        }\n        else if (this.parent.currentView === 'Month') {\n            topValue = formatUnit(0);\n        }\n        else if (this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n            topValue = formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop);\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth)\n            });\n        }\n        else {\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                !this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                setStyleAttribute(this.actionObj.clone, {\n                    height: formatUnit(this.actionObj.cellHeight),\n                    width: formatUnit(this.actionObj.cellWidth),\n                    pointerEvents: 'none'\n                });\n            }\n            topValue = formatUnit(Math.ceil(parseInt(e.top, 10) / cellHeight) * cellHeight);\n            var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n            var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n            if (cloneBottom > scrollHeight) {\n                topValue = (parseInt(topValue, 10) - (cloneBottom - scrollHeight)) + 'px';\n            }\n        }\n        return { left: leftValue, top: topValue };\n    };\n    DragAndDrop.prototype.setDragActionDefaultValues = function () {\n        this.actionObj.action = 'drag';\n        this.actionObj.isAllDay = null;\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var eventGuid = this.actionObj.element.getAttribute('data-guid');\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var dragArgs = {\n            cancel: false,\n            data: eventObj,\n            event: e,\n            excludeSelectors: null,\n            element: this.actionObj.element,\n            interval: this.actionObj.interval,\n            navigation: { enable: false, timeDelay: 2000 },\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(events.dragStart, dragArgs);\n        if (dragArgs.cancel) {\n            this.removeCloneElement();\n            return;\n        }\n        this.actionClass('addClass');\n        this.parent.uiStateValues.action = true;\n        this.actionObj.start = eventObj[this.parent.eventFields.startTime];\n        this.actionObj.end = eventObj[this.parent.eventFields.endTime];\n        this.actionObj.groupIndex = parseInt(this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n        this.actionObj.interval = dragArgs.interval;\n        this.actionObj.navigation = dragArgs.navigation;\n        this.actionObj.scroll = dragArgs.scroll;\n        this.actionObj.excludeSelectors = dragArgs.excludeSelectors;\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        this.parent.quickPopup.quickPopupHide(true);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventArgs = this.getPageCoordinates(e);\n        this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n        this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n        this.actionObj.target = e.target;\n        if (this.parent.eventDragArea) {\n            var targetElement = eventArgs.target;\n            this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n            this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n            var currentTarget = closest(targetElement, '.' + cls.ROOT);\n            if (!currentTarget) {\n                this.actionObj.clone.style.height = '';\n                this.actionObj.clone.style.width = '';\n            }\n            else {\n                if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek'\n                    || this.parent.currentView === 'Day')) {\n                    this.actionObj.clone.style.height = formatUnit(this.actionObj.element.offsetHeight);\n                    this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n                }\n            }\n        }\n        this.updateScrollPosition(e);\n        this.updateNavigatingPosition(e);\n        this.updateDraggingDateTime(e);\n        var dragArgs = { data: eventObj, event: e, element: this.actionObj.element };\n        this.parent.trigger(events.drag, dragArgs);\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        this.removeCloneElement();\n        clearInterval(this.actionObj.navigationInterval);\n        this.actionObj.navigationInterval = null;\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        this.actionObj.action = null;\n        if (this.isAllowDrop(e)) {\n            return;\n        }\n        var dragArgs = { cancel: false, data: this.getChangedData(), event: e, element: this.actionObj.element };\n        this.parent.trigger(events.dragStop, dragArgs);\n        if (dragArgs.cancel) {\n            return;\n        }\n        this.saveChangedData(dragArgs);\n    };\n    DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.navigation.enable) {\n            var currentDate_1 = new Date();\n            if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n                this.actionObj.navigationInterval = window.setInterval(function () {\n                    if (currentDate_1) {\n                        var crtDate = new Date();\n                        var end = crtDate.getSeconds();\n                        var start = currentDate_1.getSeconds() + (_this.actionObj.navigation.timeDelay / 1000);\n                        start = (start >= 60) ? start - 60 : start;\n                        if (start === end) {\n                            currentDate_1 = new Date();\n                            _this.viewNavigation(e);\n                            _this.updateDraggingDateTime(e);\n                        }\n                    }\n                }, this.actionObj.navigation.timeDelay);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n        if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n            this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n            this.morePopupEventDragging(e);\n        }\n        else if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'TimelineMonth') {\n                this.calculateTimelineDate(e);\n            }\n            else {\n                this.calculateTimelineTime(e);\n            }\n        }\n        else {\n            if (this.parent.currentView === 'Month') {\n                this.calculateVerticalDate(e);\n            }\n            else {\n                this.calculateVerticalTime(e);\n            }\n        }\n    };\n    DragAndDrop.prototype.navigationWrapper = function () {\n        if (!this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n                var outerWrapperCls = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS);\n                this.actionObj.index = (this.parent.activeView.renderDates.length < this.actionObj.index) ?\n                    this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n                var targetWrapper = outerWrapperCls.item(this.actionObj.index).querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                if (!targetWrapper) {\n                    targetWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                    outerWrapperCls.item(this.actionObj.index).appendChild(targetWrapper);\n                }\n                targetWrapper.appendChild(this.actionObj.clone);\n            }\n            else {\n                var wrapperClass = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ?\n                    '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n                this.parent.element.querySelectorAll(wrapperClass)\n                    .item(this.actionObj.index).appendChild(this.actionObj.clone);\n                if (wrapperClass === '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n                    var elementHeight_1 = this.getAllDayEventHeight();\n                    var event_1 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n                    if (event_1[0].offsetHeight < elementHeight_1) {\n                        event_1.forEach(function (element) { return element.style.height = ((elementHeight_1 + 2) / 12) + 'em'; });\n                    }\n                    this.actionObj.clone.style.height = formatUnit(elementHeight_1);\n                }\n                this.actionObj.height = parseInt(this.actionObj.clone.style.height, 0);\n            }\n        }\n        else {\n            var outWrapper = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n            }\n            else {\n                outWrapper = this.parent.element.querySelector('.' + cls.APPOINTMENT_CONTAINER_CLASS);\n            }\n            var tarWrapper = outWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!tarWrapper) {\n                tarWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                outWrapper.appendChild(tarWrapper);\n            }\n            tarWrapper.appendChild(this.actionObj.clone);\n        }\n    };\n    DragAndDrop.prototype.viewNavigation = function (e) {\n        var navigationType;\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (dragArea && ((!this.scrollEdges.top && !this.scrollEdges.bottom) ||\n            closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n            if ((dragArea.scrollLeft === 0) &&\n                (Math.round(this.actionObj.X) <=\n                    Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'next' : 'previous';\n            }\n            else if ((Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth) &&\n                (Math.round(this.actionObj.X) >=\n                    Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'previous' : 'next';\n            }\n            if (navigationType) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n            }\n        }\n    };\n    DragAndDrop.prototype.morePopupEventDragging = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'td')))) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(e.target, 'td');\n        var dragStart = new Date(parseInt(td.getAttribute('data-date'), 10));\n        var dragEnd = new Date(dragStart.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n        this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n        var eventContainer = td;\n        var eventWrapper;\n        if (this.parent.activeView.isTimelineView()) {\n            var rowIndex = closest(td, 'tr').rowIndex;\n            eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n        }\n        eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n    };\n    DragAndDrop.prototype.calculateVerticalTime = function (e) {\n        if (isNullOrUndefined(this.actionObj.target) ||\n            (this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr'))) ||\n            (!(closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS)) &&\n                !(closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)))) {\n            return;\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.swapDragging(e);\n        }\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventStart = eventObj[this.parent.eventFields.startTime];\n        var eventEnd = eventObj[this.parent.eventFields.endTime];\n        var eventDuration = eventEnd.getTime() - eventStart.getTime();\n        var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 0) / this.actionObj.cellHeight)\n            * this.actionObj.cellHeight;\n        offsetTop = offsetTop < 0 ? 0 : offsetTop;\n        if (this.scrollEdges.top || this.scrollEdges.bottom) {\n            offsetTop = this.scrollEdges.top ? dragArea.scrollTop :\n                dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight;\n            offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n            this.actionObj.clone.style.top = formatUnit(offsetTop);\n        }\n        var rowIndex = offsetTop / this.actionObj.cellHeight;\n        var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n        var diffInMinutes = parseInt(this.actionObj.clone.style.top, 0) - offsetTop;\n        var isAllDayDrag = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n        var tr;\n        if (isAllDayDrag) {\n            tr = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        }\n        else {\n            var trCollections = this.parent.getContentTable().querySelectorAll('tr');\n            tr = trCollections.item(rowIndex);\n        }\n        var index;\n        if (closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS) ||\n            closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            index = closest(this.actionObj.target, 'td').cellIndex;\n        }\n        var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n        this.actionObj.index = colIndex;\n        var td = tr.childNodes.item(colIndex);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var dragStart;\n        var dragEnd;\n        if (this.parent.activeViewOptions.timeScale.enable && !isAllDayDrag) {\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            var spanHours = -(((this.actionObj.slotInterval / this.actionObj.cellHeight) * diffInMinutes) * (1000 * 60));\n            if (this.actionObj.clone.querySelector('.' + cls.EVENT_ICON_UP_CLASS)) {\n                var startTime = new Date(eventStart.getTime());\n                spanHours = util.addDays(util.resetTime(new Date(startTime.getTime())), 1).getTime() - startTime.getTime();\n            }\n            dragStart = new Date(parseInt(td.getAttribute('data-date'), 10));\n            dragStart.setMinutes(dragStart.getMinutes() + (diffInMinutes * heightPerMinute));\n            dragStart.setMilliseconds(-spanHours);\n            dragStart = this.calculateIntervalTime(dragStart);\n            dragStart.setMilliseconds(spanHours);\n            dragEnd = new Date(dragStart.getTime());\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n            }\n            else {\n                dragEnd.setMilliseconds(eventDuration);\n            }\n        }\n        else {\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            dragStart = new Date(parseInt(td.getAttribute('data-date'), 10));\n            dragStart.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            dragEnd = new Date(dragStart.getTime());\n            dragEnd.setMilliseconds(eventDuration);\n            if (!this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd = util.addDays(util.resetTime(dragEnd), 1);\n            }\n        }\n        this.actionObj.start = new Date(+dragStart);\n        this.actionObj.end = new Date(+dragEnd);\n        this.updateTimePosition(this.actionObj.start);\n    };\n    DragAndDrop.prototype.swapDragging = function (e) {\n        var colIndex = closest(this.actionObj.target, 'td').cellIndex;\n        if (closest(this.actionObj.target, '.' + cls.DATE_HEADER_WRAP_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n            addClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = true;\n            var eventHeight_1 = this.getAllDayEventHeight();\n            var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n            if (allDayElement[0].offsetHeight < eventHeight_1) {\n                allDayElement.forEach(function (element) { return element.style.height = ((eventHeight_1 + 2) / 12) + 'em'; });\n            }\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(this.actionObj.cellWidth),\n                height: formatUnit(eventHeight_1),\n                top: formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop)\n            });\n        }\n        if (closest(this.actionObj.target, '.' + cls.WORK_CELLS_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.DAY_WRAPPER_CLASS)) {\n            removeClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = false;\n            var height = (this.actionObj.element.offsetHeight === 0) ? this.actionObj.height : this.actionObj.element.offsetHeight;\n            setStyleAttribute(this.actionObj.clone, {\n                left: formatUnit(0),\n                height: formatUnit(height),\n                width: formatUnit(this.actionObj.cellWidth)\n            });\n        }\n    };\n    DragAndDrop.prototype.calculateVerticalDate = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'tr')))) {\n            return;\n        }\n        this.actionObj.clone.style.top = formatUnit(0);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(this.actionObj.target, 'td');\n        var tr = td.parentElement;\n        var colIndex = (tr.rowIndex * tr.childNodes.length) + td.cellIndex;\n        this.actionObj.index = colIndex;\n        // let cellIndex: number = td.cellIndex;\n        // let daysCount: number = Math.floor(this.actionObj.element.offsetWidth / this.actionObj.cellWidth);\n        // let maxIndex: number = (tr.lastChild as HTMLTableCellElement).cellIndex;\n        // if (cellIndex + daysCount > maxIndex) {\n        //     this.actionObj.clone.style.width = formatUnit((this.actionObj.cellWidth - 2) * ((maxIndex + 1) - cellIndex));\n        // } else {\n        //     this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n        // }\n        var outerWrapper = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var targetWrapper = outerWrapper.item(colIndex).querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!targetWrapper) {\n            targetWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            outerWrapper.item(colIndex).appendChild(targetWrapper);\n        }\n        if (!targetWrapper.querySelector('.' + cls.CLONE_ELEMENT_CLASS)) {\n            this.appendCloneElement(targetWrapper);\n        }\n        var timeString = outerWrapper.item(colIndex).getAttribute('data-date') ||\n            eventObj[this.parent.eventFields.startTime].getTime().toString();\n        var dragStart = new Date(parseInt(timeString, 10));\n        var dragEnd = new Date(dragStart.getTime());\n        if (this.parent.enableRtl) {\n            var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() -\n                (util.resetTime(new Date(+eventObj[this.parent.eventFields.endTime]))).getTime();\n            dragEnd = new Date(dragStart.getTime() + endTimeDiff);\n            dragStart = new Date(dragEnd.getTime() - eventDuration);\n        }\n        else {\n            var startTimeDiff = eventObj[this.parent.eventFields.startTime].getTime() -\n                (util.resetTime(new Date(+eventObj[this.parent.eventFields.startTime]))).getTime();\n            dragStart = new Date(dragStart.getTime() + startTimeDiff);\n            dragEnd = new Date(dragStart.getTime() + eventDuration);\n        }\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.updateTimePosition(this.actionObj.start);\n    };\n    DragAndDrop.prototype.calculateTimelineTime = function (e) {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth :\n            parseInt(this.actionObj.clone.style.left, 10);\n        offsetLeft = Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var rightOffset;\n        var diffInMinutes = this.actionObj.clone.offsetLeft - offsetLeft;\n        var viewEle = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.enableRtl) {\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.left, 10)) - this.actionObj.clone.offsetWidth;\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n            diffInMinutes = rightOffset - offsetLeft;\n        }\n        if (this.scrollEdges.left || this.scrollEdges.right) {\n            if (this.parent.enableRtl) {\n                rightOffset = viewEle.scrollWidth - viewEle.scrollLeft;\n                if (this.scrollEdges.right) {\n                    rightOffset = rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth;\n                }\n                this.actionObj.clone.style.left = formatUnit(rightOffset);\n            }\n            else {\n                offsetLeft = this.scrollEdges.left ? viewEle.scrollLeft :\n                    viewEle.scrollLeft + viewEle.offsetWidth - this.actionObj.clone.offsetWidth;\n                this.actionObj.clone.style.left = formatUnit(offsetLeft);\n            }\n        }\n        var widthPerMinute = this.actionObj.slotInterval / this.actionObj.cellWidth;\n        var colIndex = this.getIndex(Math.floor(offsetLeft / this.actionObj.cellWidth));\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var eventStart = new Date(parseInt(tr.childNodes.item(colIndex).getAttribute('data-date'), 10));\n        eventStart.setMinutes(eventStart.getMinutes() + Math.round((widthPerMinute * diffInMinutes)));\n        eventStart = this.calculateIntervalTime(eventStart);\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            var eventSrt = eventObj[this.parent.eventFields.startTime];\n            eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n        }\n        var eventEnd = new Date(eventStart.getTime());\n        eventEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.calculateResourceGroupingPosition(e);\n        }\n        this.actionObj.start = new Date(eventStart.getTime());\n        this.actionObj.end = new Date(eventEnd.getTime());\n        this.updateTimePosition(this.actionObj.start);\n    };\n    DragAndDrop.prototype.calculateTimelineDate = function (e) {\n        var cloneIndex = 0;\n        var rightOffset;\n        var leftOffset;\n        var viewEle = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        if (this.parent.enableRtl) {\n            cloneIndex = (Math.floor(parseInt(this.actionObj.clone.style.right, 10))) / this.actionObj.cellWidth;\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.left, 10)) - this.actionObj.clone.offsetWidth;\n            if (this.scrollEdges.left || this.scrollEdges.right) {\n                rightOffset = viewEle.scrollWidth - viewEle.scrollLeft - this.actionObj.clone.offsetWidth;\n                if (this.scrollEdges.right) {\n                    rightOffset = rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth;\n                }\n            }\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n        }\n        else {\n            cloneIndex = Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth);\n            leftOffset = parseInt(this.actionObj.clone.style.left, 10);\n            if (this.scrollEdges.left || this.scrollEdges.right) {\n                leftOffset = this.scrollEdges.left ? viewEle.scrollLeft :\n                    viewEle.scrollLeft + viewEle.offsetWidth - this.actionObj.clone.offsetWidth;\n            }\n            this.actionObj.clone.style.left = formatUnit(leftOffset);\n        }\n        cloneIndex = this.getIndex(cloneIndex);\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var dragDate = new Date(parseInt(tr.childNodes.item(cloneIndex).getAttribute('data-date'), 10));\n        var dragStart = new Date(dragDate.getTime());\n        var srtDateDiff = eventObj[this.parent.eventFields.startTime].getTime() -\n            (util.resetTime(new Date(+eventObj[this.parent.eventFields.startTime]))).getTime();\n        dragStart = new Date(dragStart.getTime() + srtDateDiff);\n        var dragEnd = new Date(dragStart.getTime() + eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.calculateResourceGroupingPosition(e);\n        }\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.updateTimePosition(this.actionObj.start);\n    };\n    DragAndDrop.prototype.calculateResourceGroupingPosition = function (e) {\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trCollection = this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)');\n        var translateY = util.getTranslateY(dragArea.querySelector('table'));\n        translateY = (isNullOrUndefined(translateY)) ? 0 : translateY;\n        var rowHeight = (this.parent.enableAdaptiveRows) ?\n            ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n        var rowIndex = Math.floor(Math.floor((this.actionObj.Y + (dragArea.scrollTop - translateY)) -\n            dragArea.getBoundingClientRect().top) / rowHeight);\n        rowIndex = (rowIndex < 0) ? 0 : (rowIndex > trCollection.length - 1) ? trCollection.length - 1 : rowIndex;\n        this.actionObj.index = rowIndex;\n        var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n        var eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n        var td = closest(e.target, 'td');\n        this.actionObj.groupIndex = (td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)))\n            ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n        var top = trCollection.item(rowIndex).offsetTop;\n        if (this.parent.enableAdaptiveRows) {\n            var cursorElement = this.getCursorElement(e);\n            if (cursorElement) {\n                top = cursorElement.classList.contains(cls.WORK_CELLS_CLASS) ? cursorElement.offsetTop :\n                    cursorElement.offsetParent.classList.contains(cls.APPOINTMENT_CLASS) ?\n                        cursorElement.offsetParent.offsetTop : top;\n            }\n        }\n        this.actionObj.clone.style.top = formatUnit(top);\n    };\n    DragAndDrop.prototype.appendCloneElement = function (element) {\n        if (this.parent.eventDragArea) {\n            document.querySelector(this.parent.eventDragArea).appendChild(this.actionObj.clone);\n        }\n        else {\n            element.appendChild(this.actionObj.clone);\n        }\n    };\n    DragAndDrop.prototype.getEventWrapper = function (index) {\n        var eventWrapper;\n        var isAllDayDrag = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var wrapperClass = isAllDayDrag ? '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n            eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n        }\n        else {\n            var targetWrapper = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS).item(index);\n            eventWrapper = targetWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!eventWrapper) {\n                eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                targetWrapper.appendChild(eventWrapper);\n            }\n        }\n        return eventWrapper;\n    };\n    DragAndDrop.prototype.getAllDayEventHeight = function () {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS });\n        this.parent.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n        var eventHeight = eventWrapper.offsetHeight;\n        remove(eventWrapper);\n        return eventHeight;\n    };\n    DragAndDrop.prototype.isAllowDrop = function (e) {\n        if (!this.actionObj.excludeSelectors) {\n            return false;\n        }\n        var dropSelectors = this.actionObj.excludeSelectors.split(',');\n        var isAllowDrop = false;\n        for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n            var selector = dropSelectors_1[_i];\n            if (e.target.classList.contains(selector)) {\n                isAllowDrop = true;\n                break;\n            }\n        }\n        return isAllowDrop;\n    };\n    /**\n     * Get module name.\n     */\n    DragAndDrop.prototype.getModuleName = function () {\n        return 'dragAndDrop';\n    };\n    return DragAndDrop;\n}(ActionBase));\nexport { DragAndDrop };\n","import { createElement, append, prepend, isNullOrUndefined, getValue, getDefaultDateObject, cldrData, addClass } from '@syncfusion/ej2-base';\nimport { getDateInMs, addDays, resetTime, WEEK_LENGTH, getWeekFirstDate, getOuterHeight, getScrollBarWidth } from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * view base\n */\nvar ViewBase = /** @class */ (function () {\n    /**\n     * Constructor\n     */\n    function ViewBase(parent) {\n        var _this = this;\n        this.customHelper = {\n            getDayName: function (dt) {\n                return _this.parent.getDayNames('abbreviated')[dt.getDay()];\n            },\n            getDate: function (dt) {\n                return _this.parent.globalize.formatDate(dt, { format: 'd', calendar: _this.parent.getCalendarMode() });\n            },\n            getTime: function (dt) {\n                if (_this.parent.isAdaptive) {\n                    if (_this.parent.timeFormat === 'HH:mm') {\n                        return _this.parent.globalize.formatDate(dt, { format: 'H', calendar: _this.parent.getCalendarMode() });\n                    }\n                    return _this.parent.globalize.formatDate(dt, { skeleton: 'h', calendar: _this.parent.getCalendarMode() });\n                }\n                return _this.parent.getTimeString(dt);\n            },\n            getTimelineDate: function (dt) {\n                return _this.parent.globalize.formatDate(dt, { skeleton: 'MMMd', calendar: _this.parent.getCalendarMode() }) + ', ' + _this.parent.getDayNames('wide')[dt.getDay()];\n            }\n        };\n        this.parent = parent;\n    }\n    ViewBase.prototype.isTimelineView = function () {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    };\n    ViewBase.prototype.getContentRows = function () {\n        return [];\n    };\n    ViewBase.prototype.createEventTable = function (trCount) {\n        var eventTable = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    };\n    ViewBase.prototype.getEventRows = function (trCount) {\n        var eventRows = [];\n        var eventContainer;\n        for (var row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[row].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    };\n    ViewBase.prototype.collapseRows = function (wrap) {\n        if (!this.isTimelineView()) {\n            return;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + cls.EVENT_TABLE_CLASS));\n        }\n    };\n    ViewBase.prototype.createTableLayout = function (className) {\n        var clsName = className || '';\n        var table = createElement('table', { className: cls.SCHEDULE_TABLE_CLASS + ' ' + clsName });\n        var tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    };\n    ViewBase.prototype.createColGroup = function (table, lastRow) {\n        var length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map(function (value) { return value.colSpan; }).reduce(function (prev, next) { return prev + next; });\n        }\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    };\n    ViewBase.prototype.getScrollXIndent = function (content) {\n        return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;\n    };\n    ViewBase.prototype.scrollTopPanel = function (target) {\n        this.getDatesHeaderElement().firstChild.scrollLeft = target.scrollLeft;\n    };\n    ViewBase.prototype.scrollHeaderLabels = function (target) {\n        var _this = this;\n        var headerTable = this.element.querySelector('.e-date-header-wrap table');\n        var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        var applyLeft = function (headerCells, isRtl) {\n            var currentCell;\n            var tdLeft = 0;\n            var colSpan = 0;\n            var hiddenLeft = isRtl ? target.scrollWidth - target.offsetWidth - target.scrollLeft : target.scrollLeft;\n            for (var i = 0; i < headerCells.length; i++) {\n                colSpan += parseInt(headerCells[i].getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = headerCells[i];\n                    break;\n                }\n                tdLeft += headerCells[i].offsetWidth;\n            }\n            currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n        };\n        var className = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (var i = 0; i < className.length; i++) {\n            var headerCells = [].slice.call(this.element.querySelectorAll(className[i]));\n            if (headerCells.length > 0) {\n                headerCells.forEach(function (element) {\n                    element.children[0].style[_this.parent.enableRtl ? 'right' : 'left'] = '';\n                });\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    };\n    ViewBase.prototype.addAttributes = function (td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    };\n    ViewBase.prototype.getHeaderBarHeight = function () {\n        var headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resHeader = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    };\n    ViewBase.prototype.renderPanel = function (type) {\n        if (type === cls.PREVIOUS_PANEL_CLASS) {\n            prepend([this.element], this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    };\n    ViewBase.prototype.setPanel = function (panel) {\n        this.element = panel;\n    };\n    ViewBase.prototype.getPanel = function () {\n        return this.element;\n    };\n    ViewBase.prototype.getDatesHeaderElement = function () {\n        return this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n    };\n    ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n        // Here getDateSlots only need in vertical and month views\n        return [];\n    };\n    ViewBase.prototype.generateColumnLevels = function () {\n        // Here generateColumnLevels only need in vertical and month views\n        return [];\n    };\n    ViewBase.prototype.getColumnLevels = function () {\n        return this.colLevels;\n    };\n    ViewBase.prototype.highlightCurrentTime = function () {\n        // Here showTimeIndicator functionalities\n    };\n    ViewBase.prototype.startDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.endDate = function () {\n        return addDays(this.renderDates[this.renderDates.length - 1], 1);\n    };\n    ViewBase.prototype.getStartHour = function () {\n        var startHour = this.parent.globalize.parseDate(this.parent.activeViewOptions.startHour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    };\n    ViewBase.prototype.getEndHour = function () {\n        var endHour = this.parent.globalize.parseDate(this.parent.activeViewOptions.endHour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    };\n    ViewBase.prototype.isCurrentDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date().setHours(0, 0, 0, 0);\n    };\n    ViewBase.prototype.isCurrentMonth = function (date) {\n        return date.getFullYear() === new Date().getFullYear() && date.getMonth() === new Date().getMonth();\n    };\n    ViewBase.prototype.isWorkDay = function (date, workDays) {\n        if (workDays === void 0) { workDays = this.parent.activeViewOptions.workDays; }\n        if (workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        if (getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) || !this.isWorkDay(date, workDays)) {\n            return false;\n        }\n        return true;\n    };\n    ViewBase.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            var selectedDate = resetTime(this.parent.selectedDate);\n            var start = getWeekFirstDate(selectedDate, this.parent.firstDayOfWeek);\n            for (var i = 0, length_1 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            var start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n            for (var i = 0, length_2 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else {\n            for (var i = 0, length_3 = this.parent.activeViewOptions.interval; i < length_3; i++) {\n                renderDates.push(addDays(resetTime(this.parent.selectedDate), i));\n            }\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        return renderDates;\n    };\n    ViewBase.prototype.getNextPreviousDate = function (type) {\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            var daysCount = (type === 'next') ? this.parent.activeViewOptions.interval : -(this.parent.activeViewOptions.interval);\n            if (this.parent.activeViewOptions.showWeekend) {\n                return addDays(this.parent.selectedDate, daysCount);\n            }\n            else {\n                var date = addDays(this.parent.selectedDate, daysCount);\n                while (!this.isWorkDay(date)) {\n                    date = addDays(date, daysCount);\n                }\n                return date;\n            }\n        }\n        if (type === 'next') {\n            return addDays(this.parent.selectedDate, WEEK_LENGTH * this.parent.activeViewOptions.interval);\n        }\n        else {\n            return addDays(this.parent.selectedDate, -WEEK_LENGTH * this.parent.activeViewOptions.interval);\n        }\n    };\n    ViewBase.prototype.getLabelText = function (view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' + this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'long', calendar: this.parent.getCalendarMode() });\n    };\n    ViewBase.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive) {\n            return this.parent.globalize.\n                formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() });\n        }\n        return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    };\n    ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n        var globalize = this.parent.globalize;\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            if (!endDate) {\n                return globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: this.parent.getCalendarMode() });\n            }\n            return globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: this.parent.getCalendarMode() }) + ' - ' +\n                globalize.\n                    formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: this.parent.getCalendarMode() });\n        }\n        var formattedStr;\n        var longDateFormat;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            longDateFormat = getValue('dateFormats.long', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + this.parent.getCalendarMode() + '.dateFormats.long', cldrData);\n        }\n        if (!endDate) {\n            return globalize.formatDate(startDate, { format: longDateFormat, calendar: this.parent.getCalendarMode() });\n        }\n        var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: this.parent.getCalendarMode() }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: this.parent.getCalendarMode() });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: this.parent.getCalendarMode() }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: this.parent.getCalendarMode() });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: this.parent.getCalendarMode() }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: this.parent.getCalendarMode() });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: this.parent.getCalendarMode() }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: this.parent.getCalendarMode() });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: this.parent.getCalendarMode() }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: this.parent.getCalendarMode() });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: this.parent.getCalendarMode() }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: this.parent.getCalendarMode() });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: this.parent.getCalendarMode() }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: this.parent.getCalendarMode() });\n        }\n        return formattedStr;\n    };\n    ViewBase.prototype.getMobileDateElement = function (date, className) {\n        var wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' +\n                this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }) + '</div>'\n        });\n        return wrap;\n    };\n    ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n        if (className === void 0) { className = 'e-text-ellipsis'; }\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            var data = {\n                resource: tdData.resource,\n                resourceData: tdData.resourceData\n            };\n            append(this.parent.getResourceHeaderTemplate()(data), tdElement);\n        }\n        else {\n            tdElement.appendChild(createElement('div', {\n                className: className, innerHTML: tdData.resourceData[tdData.resource.textField]\n            }));\n        }\n    };\n    ViewBase.prototype.renderResourceMobileLayout = function () {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    };\n    ViewBase.prototype.addAutoHeightClass = function (element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.enableAdaptiveRows && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], cls.AUTO_HEIGHT);\n        }\n    };\n    return ViewBase;\n}());\nexport { ViewBase };\n","import { extend, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Work cell interactions\n */\nvar WorkCellInteraction = /** @class */ (function () {\n    function WorkCellInteraction(parent) {\n        this.parent = parent;\n    }\n    WorkCellInteraction.prototype.cellMouseDown = function (e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        this.parent.notify(event.cellMouseDown, { event: e });\n    };\n    WorkCellInteraction.prototype.cellClick = function (e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (isNullOrUndefined(target)) {\n            return;\n        }\n        if (!isNullOrUndefined(closest(e.target, '.' + cls.NEW_EVENT_CLASS))) {\n            this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n            return;\n        }\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        var navigateView = this.parent.getNavigateView();\n        var sameView = this.parent.currentView === navigateView;\n        if (isNullOrUndefined(navigateEle) || sameView ||\n            isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n            if (this.parent.activeViewOptions.readonly) {\n                this.parent.quickPopup.quickPopupHide();\n                return;\n            }\n            var isWorkCell = target.classList.contains(cls.WORK_CELLS_CLASS) ||\n                target.classList.contains(cls.ALLDAY_CELLS_CLASS);\n            if (isWorkCell && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n                this.parent.keyboardInteractionModule.onMouseSelection(e);\n                return;\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(event.cellClick, args);\n            if (args.cancel) {\n                return;\n            }\n            if (isWorkCell) {\n                this.parent.selectCell(target);\n            }\n            this.parent.notify(event.cellClick, args);\n        }\n        else {\n            var date = this.parent.getDateFromElement(target);\n            if (!isNullOrUndefined(date) && !this.parent.isAdaptive) {\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView());\n            }\n        }\n    };\n    WorkCellInteraction.prototype.cellDblClick = function (e) {\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e)) {\n            return;\n        }\n        var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellDoubleClick' });\n        this.parent.trigger(event.cellDoubleClick, args);\n        if (args.cancel) {\n            return;\n        }\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    WorkCellInteraction.prototype.isPreventAction = function (e) {\n        if (closest(e.target, '.' + cls.NAVIGATE_CLASS)) {\n            return false;\n        }\n        if (closest(e.target, '.' + cls.APPOINTMENT_WRAPPER_CLASS) &&\n            !closest(e.target, '.' + cls.MORE_INDICATOR_CLASS)) {\n            return true;\n        }\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (!isNullOrUndefined(target)) {\n            return true;\n        }\n        target = closest(e.target, '.' + cls.HEADER_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    return WorkCellInteraction;\n}());\nexport { WorkCellInteraction };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { append, createElement, extend, EventHandler, prepend, Animation, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @class */ (function (_super) {\n    __extends(VerticalEvent, _super);\n    /**\n     * Constructor for vertical view\n     */\n    function VerticalEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateRender = [];\n        _this.renderedEvents = [];\n        _this.renderedAllDayEvents = [];\n        _this.overlapEvents = [];\n        _this.moreEvents = [];\n        _this.overlapList = [];\n        _this.allDayEvents = [];\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.allDayLevel = 0;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.animation = new Animation({ progress: _this.animationUiUpdate.bind(_this) });\n        _this.addEventListener();\n        return _this;\n    }\n    VerticalEvent.prototype.renderAppointments = function () {\n        var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS +\n            ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        wrapperElements.forEach(function (element) { return remove(element); });\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.Guid; }).indexOf(item.Guid);\n            });\n            removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            this.renderEvents('allDayEvents');\n        }\n        this.parent.notify(events.contentReady, {});\n        addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n    };\n    VerticalEvent.prototype.initializeValues = function () {\n        var _this = this;\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        this.cellHeight = this.element.querySelector('.' + cls.WORK_CELLS_CLASS).offsetHeight;\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.resources.forEach(function (resource, index) { return _this.dateRender[index] = resource.renderDates; });\n        }\n    };\n    VerticalEvent.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n        var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n        var isSameRange = schedule.startHour.getTime() <= start.getTime() &&\n            eventObj[this.fields.startTime].getTime() >= schedule.startHour.getTime() &&\n            eventObj[this.fields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n        return isHourRange || isSameRange;\n    };\n    VerticalEvent.prototype.getHeight = function (start, end) {\n        var appHeight = (end.getTime() - start.getTime()) / (60 * 1000) * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight < this.cellHeight) ? this.cellHeight : appHeight;\n        return appHeight;\n    };\n    VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n        var appointmentWrap = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args);\n        if (args.cancel) {\n            return;\n        }\n        appointmentWrap[index].appendChild(appointmentElement);\n    };\n    VerticalEvent.prototype.processBlockEvents = function () {\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            var renderDates = this.dateRender[resource];\n            for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[resource]);\n                for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n                    var event_1 = filterEvents_1[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_1, resource);\n                    }\n                    this.renderBlockEvents(event_1, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = spannedData[this.fields.startTime];\n        var eEnd = spannedData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule)) {\n            var blockTop = void 0;\n            var blockHeight = void 0;\n            if (spannedData[this.fields.isAllDay]) {\n                var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n            }\n            var appointmentElement = this.createBlockAppointmentElement(eventObj, resource);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    };\n    VerticalEvent.prototype.renderEvents = function (eventType) {\n        removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        var eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            var renderDates = this.dateRender[resource];\n            for (var day = 0, length_2 = renderDates.length; day < length_2; day++) {\n                this.renderedEvents = [];\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this.filterEvents(startDate, endDate, eventCollection, this.resources[resource]);\n                for (var _a = 0, filterEvents_2 = filterEvents; _a < filterEvents_2.length; _a++) {\n                    var event_2 = filterEvents_2[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_2, resource);\n                    }\n                    if (eventType === 'allDayEvents') {\n                        this.renderAllDayEvents(event_2, day, resource, dateCount);\n                    }\n                    else {\n                        if (this.isAllDayAppointment(event_2)) {\n                            this.allDayEvents.push(extend({}, event_2, null, true));\n                        }\n                        else {\n                            this.renderNormalEvents(event_2, day, resource, dateCount);\n                        }\n                    }\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[resourceIndex].cssClass;\n            this.groupOrder = this.resources[resourceIndex].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    };\n    VerticalEvent.prototype.getResourceList = function () {\n        var resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map(function (value, index) { return index; });\n        return resources;\n    };\n    VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n        var fieldMapping = this.parent.eventFields;\n        var recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-selected': 'false',\n                'aria-grabbed': 'true',\n                'aria-label': recordSubject\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceIndex = this.parent.isAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        var templateElement;\n        var eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            templateElement = this.parent.getAppointmentTemplate()(record);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: recordSubject });\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    var appointmentStartTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    var appointmentEndTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime]),\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                var appointmentTime = createElement('div', {\n                    className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                    innerHTML: timeStr,\n                });\n                var appointmentLocation = createElement('div', {\n                    className: cls.LOCATION_CLASS,\n                    innerHTML: (record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || '')\n                });\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            var iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            var recurrenceIcon = createElement('div', { className: cls.ICON + ' ' + iconClass });\n            isAllDay ? appointmentDetails.appendChild(recurrenceIcon) : appointmentWrapper.appendChild(recurrenceIcon);\n        }\n        this.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n        var index = currentDay + count;\n        var countWrapper = allDayRow[index];\n        if (countWrapper.childElementCount <= 0) {\n            var innerCountWrap = createElement('div', {\n                className: cls.ROW_COUNT_WRAPPER_CLASS,\n                id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            var moreIndicatorElement = createElement('div', {\n                className: cls.MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n            var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + moreCount + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    };\n    VerticalEvent.prototype.renderSpannedIcon = function (element, spanEvent) {\n        var iconElement = createElement('div', { className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON });\n        if (spanEvent.isLeft) {\n            var iconLeft = iconElement.cloneNode();\n            addClass([iconLeft], cls.EVENT_ICON_LEFT_CLASS);\n            prepend([iconLeft], element);\n        }\n        if (spanEvent.isRight) {\n            var iconRight = iconElement.cloneNode();\n            addClass([iconRight], cls.EVENT_ICON_RIGHT_CLASS);\n            append([iconRight], element);\n        }\n        if (spanEvent.isTop) {\n            var iconTop = iconElement.cloneNode();\n            addClass([iconTop], cls.EVENT_ICON_UP_CLASS);\n            prepend([iconTop], element);\n        }\n        if (spanEvent.isBottom) {\n            var iconBottom = iconElement.cloneNode();\n            addClass([iconBottom], cls.EVENT_ICON_DOWN_CLASS);\n            append([iconBottom], element);\n        }\n    };\n    VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n        var currentDate = util.resetTime(this.dateRender[resource][day]);\n        var fieldMapping = this.parent.eventFields;\n        var startEndHours = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var event = extend({}, record, null, true);\n        event.isSpanned = { isBottom: false, isTop: false };\n        if (record[fieldMapping.startTime].getTime() < startEndHours.startHour.getTime()) {\n            event[fieldMapping.startTime] = startEndHours.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[fieldMapping.endTime].getTime() > startEndHours.endHour.getTime()) {\n            event[fieldMapping.endTime] = startEndHours.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        return event;\n    };\n    VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var _this = this;\n        var currentDates = this.dateRender[resource];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[resource][dayIndex].getTime()];\n            currentDates = [this.dateRender[resource][dayIndex]];\n        }\n        var record = this.splitEvent(eventObj, currentDates)[0];\n        var allDayRowCell = this.element.querySelector('.' + cls.ALLDAY_CELLS_CLASS + ':first-child');\n        var cellTop = allDayRowCell.offsetTop;\n        var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        var appWidth = 0;\n        var appLeft = '0%';\n        var topValue = 1;\n        var appLevel = 0;\n        var isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange) {\n            var isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[resource]) {\n                isAlreadyRendered = this.renderedAllDayEvents[resource].filter(function (event) {\n                    return event.Guid === eventObj.Guid;\n                });\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n                        return event[_this.parent.eventFields.startTime] >= currentDates[dayIndex] &&\n                            event[_this.parent.eventFields.endTime] <= util.addDays(new Date(+currentDates[dayIndex]), 1);\n                    });\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                var allDayDifference = record.data.count;\n                var allDayIndex = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex;\n                this.allDayLevel = (this.allDayLevel < allDayIndex) ? allDayIndex : this.allDayLevel;\n                var widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference >= 0) {\n                    appWidth = (allDayDifference * 100) - widthAdjustment;\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                    this.renderedAllDayEvents[resource] = [];\n                }\n                this.renderedAllDayEvents[resource].push(extend({}, record, null, true));\n                var allDayRow = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n                var wIndex = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n                var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex + 1) + ')');\n                var appointmentElement = this.createAppointmentElement(eventObj, true, record.data, resource);\n                addClass([appointmentElement], cls.ALLDAY_APPOINTMENT_CLASS);\n                var args = { data: eventObj, element: appointmentElement, cancel: false };\n                this.parent.trigger(events.eventRendered, args);\n                if (args.cancel) {\n                    return;\n                }\n                eventWrapper.appendChild(appointmentElement);\n                var appHeight = appointmentElement.offsetHeight;\n                topValue += (allDayIndex === 0 ? cellTop : (cellTop + (allDayIndex * appHeight))) + 1;\n                setStyleAttribute(appointmentElement, { 'width': appWidth + '%', 'top': topValue + 'px' });\n                if (allDayIndex > 1) {\n                    this.moreEvents.push(appointmentElement);\n                    for (var count = 0, length_3 = allDayDifference; count < length_3; count++) {\n                        this.createMoreIndicator(allDayRow, count, wIndex);\n                    }\n                }\n                allDayRowCell.setAttribute('data-count', this.allDayLevel.toString());\n                var allDayRowHeight = ((!this.parent.uiStateValues.expand && this.allDayLevel > 2) ?\n                    (3 * appHeight) : ((this.allDayLevel + 1) * appHeight)) + 4;\n                this.setAllDayRowHeight(allDayRowHeight);\n                this.addOrRemoveClass();\n                this.wireAppointmentEvents(appointmentElement, true, eventObj);\n            }\n        }\n    };\n    VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = record[this.fields.startTime];\n        var eEnd = record[this.fields.endTime];\n        var appWidth = '0%';\n        var appLeft = '0%';\n        var topValue = 0;\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if (eStart <= eEnd && isValidEvent) {\n            var appHeight = this.getHeight(eStart, eEnd);\n            if (eStart.getTime() > schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart, dayIndex, resource);\n            }\n            var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[appIndex])) {\n                    this.overlapEvents[appIndex] = [];\n                }\n                this.overlapEvents[appIndex].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            var width = this.parent.currentView === 'Day' ? 97 : 94;\n            appWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length) + '%';\n            var argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayIndex, dayIndex: dayCount, record: record, resource: resource\n            };\n            var tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[resource])) {\n                this.renderedEvents[resource] = [];\n            }\n            this.renderedEvents[resource].push(extend({}, record, null, true));\n            var appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            setStyleAttribute(appointmentElement, { 'width': tempData.appWidth, 'height': appHeight + 'px', 'top': topValue + 'px' });\n            var iconHeight = appointmentElement.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n            var maxHeight = appHeight - 40 - iconHeight;\n            var subjectElement = appointmentElement.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement, false, eventObj);\n        }\n    };\n    VerticalEvent.prototype.getTopValue = function (date, day, resource) {\n        var startEndHours = util.getStartEndHours(util.resetTime(this.dateRender[resource][day]), this.startHour, this.endHour);\n        var startHour = startEndHours.startHour;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.cellHeight * this.slotCount) / this.interval;\n    };\n    VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n        var _this = this;\n        var fieldMapping = this.parent.eventFields;\n        var predicate;\n        var eventsList = [];\n        var appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                var date_1 = util.resetTime(new Date(this.dateRender[resource][day].getTime()));\n                eventsList = this.renderedAllDayEvents[resource].filter(function (app) {\n                    return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() &&\n                        util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n                });\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[resource], eventsList);\n                }\n            }\n        }\n        else {\n            var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[resource]) ? this.renderedEvents[resource] : [];\n            var appointment_1 = [];\n            predicate = new Predicate(fieldMapping.endTime, 'greaterthan', record[fieldMapping.startTime]).\n                and(new Predicate(fieldMapping.startTime, 'lessthan', record[fieldMapping.endTime]));\n            this.overlapList = new DataManager({ json: appointmentList_1 }).executeLocal(new Query().where(predicate));\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[resource], this.overlapList);\n            }\n            this.overlapList.forEach(function (obj) {\n                predicate = new Predicate(fieldMapping.endTime, 'greaterthanorequal', obj[fieldMapping.startTime]).\n                    and(new Predicate(fieldMapping.startTime, 'lessthanorequal', obj[fieldMapping.endTime]));\n                var filterList = new DataManager({ json: appointmentList_1 }).executeLocal(new Query().where(predicate));\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = _this.filterEventsByResource(_this.resources[resource], filterList);\n                }\n                var collection = _this.overlapList.filter(function (val) { return filterList.indexOf(val) === -1; });\n                return appointment_1.concat(collection);\n            });\n            this.overlapList = this.overlapList.concat(appointment_1);\n            eventsList = this.overlapList;\n            for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n                var event_3 = eventsList_1[_i];\n                var record_1 = event_3;\n                var index = record_1.Index;\n                (isNullOrUndefined(this.overlapEvents[index])) ? this.overlapEvents[index] = [event_3] :\n                    this.overlapEvents[index].push(event_3);\n            }\n        }\n        if (eventsList.length > 0) {\n            var appLevel = eventsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    VerticalEvent.prototype.adjustOverlapElements = function (args) {\n        var data = { appWidth: args.width, appLeft: args.left };\n        for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[i])) {\n                for (var j = 0, length2 = this.overlapEvents[i].length; j < length2; j++) {\n                    var dayCount = this.parent.activeViewOptions.group.byDate ? (this.resources.length * args.day) + args.resource :\n                        args.dayIndex;\n                    var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element.childElementCount > 0) {\n                        var eleGuid = this.overlapEvents[i][j].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                (this.parent.enableRtl) ? apps.style.right = ((parseFloat(args.width) + 1) * i) + '%' :\n                                    apps.style.left = ((parseFloat(args.width) + 1) * i) + '%';\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            var appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                var width = this.parent.currentView === 'Day' ? 97 : 94;\n                                appWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length) + '%';\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = ((parseInt(appWidth, 0) + 1) * args.index) + '%';\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    };\n    VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n        for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.height = (height / 12) + 'em';\n        }\n        this.animation.animate(this.allDayElement[0]);\n    };\n    VerticalEvent.prototype.addOrRemoveClass = function () {\n        var _this = this;\n        this.moreEvents.filter(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                addClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        (this.allDayLevel > 2) ? removeClass([moreEventCount], cls.DISABLE_CLASS) : addClass([moreEventCount], cls.DISABLE_CLASS);\n        var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        countCell.filter(function (element) {\n            (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ? removeClass([element], cls.DISABLE_CLASS) :\n                addClass([element], cls.DISABLE_CLASS);\n        });\n    };\n    VerticalEvent.prototype.getEventHeight = function () {\n        var eventElement = createElement('div', { className: cls.APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        var height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    };\n    VerticalEvent.prototype.rowExpandCollapse = function () {\n        var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        var rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', 'Collapse-all-day-section');\n            target.setAttribute('aria-label', 'Collapse section');\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', 'Expand-all-day-section');\n            target.setAttribute('aria-label', 'Expand section');\n            rowHeight = (3 * this.getEventHeight()) + 4;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    };\n    VerticalEvent.prototype.animationUiUpdate = function () {\n        this.parent.notify(events.contentReady, {});\n    };\n    return VerticalEvent;\n}(EventBase));\nexport { VerticalEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */ (function (_super) {\n    __extends(MonthEvent, _super);\n    /**\n     * Constructor for month events\n     */\n    function MonthEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.renderedEvents = [];\n        _this.moreIndicatorHeight = 19;\n        _this.renderType = 'day';\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.addEventListener();\n        return _this;\n    }\n    MonthEvent.prototype.renderAppointments = function () {\n        var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n            var wrap = appointmentWrapper_1[_i];\n            remove(wrap);\n        }\n        this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.eventHeight = util.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n        if (this.parent.currentView === 'Month') {\n            this.monthHeaderHeight = util.getOuterHeight(this.element.querySelector('.' + cls.DATE_HEADER_CLASS));\n        }\n        else {\n            this.monthHeaderHeight = 0;\n        }\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var scrollTop = conWrap.scrollTop;\n        if (this.parent.enableAdaptiveRows && this.parent.virtualScrollModule && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.enableAdaptiveRows) {\n            this.updateBlockElements();\n            var data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true\n            };\n            if (this.parent.virtualScrollModule) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            this.parent.notify(events.scrollUiUpdate, data);\n        }\n    };\n    MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        var eventsList;\n        var blockList;\n        var resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        this.cellWidth = this.workCells.slice(-1)[0].offsetWidth;\n        this.cellHeight = this.workCells.slice(-1)[0].offsetHeight;\n        this.dateRender = dateRender;\n        this.getSlotDates(workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n            var event_1 = eventsList_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n            }\n            var splittedEvents = this.splitEvent(event_1, this.dateRender);\n            for (var _a = 0, splittedEvents_1 = splittedEvents; _a < splittedEvents_1.length; _a++) {\n                var event_2 = splittedEvents_1[_a];\n                this.updateIndicatorIcon(event_2);\n                this.renderEvents(event_2, resIndex);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    };\n    MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var event_3 = blockEvents_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n            }\n            var blockSpannedList = [];\n            if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n                var temp = extend({}, event_3, null, true);\n                var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event_3);\n            }\n            for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n                var blockEvent = blockSpannedList_1[_a];\n                var splittedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (var _b = 0, splittedEvents_2 = splittedEvents; _b < splittedEvents_2.length; _b++) {\n                    var event_4 = splittedEvents_2[_b];\n                    this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.isSameDate = function (start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    };\n    MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        var cellTd = this.getCellTd(day);\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            var diffInDays = eventData.count;\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            var appLeft = (this.parent.enableRtl) ? 0 : position;\n            var appRight = (this.parent.enableRtl) ? position : 0;\n            var appHeight = this.cellHeight - this.monthHeaderHeight;\n            var appTop = this.getRowTop(resIndex);\n            var blockElement = this.createBlockAppointmentElement(event, resIndex);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    };\n    MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    };\n    MonthEvent.prototype.getStartTime = function (event, eventData) {\n        return event[this.fields.startTime];\n    };\n    MonthEvent.prototype.getEndTime = function (event, eventData) {\n        return event[this.fields.endTime];\n    };\n    MonthEvent.prototype.getCellTd = function (day) {\n        return this.workCells[day];\n    };\n    MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    };\n    MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        return 0;\n    };\n    MonthEvent.prototype.getRowTop = function (resIndex) {\n        return 0;\n    };\n    MonthEvent.prototype.updateIndicatorIcon = function (event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        var cloneData = event.data;\n        var startHour = util.getStartEndHours(event[this.fields.startTime], this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        var endHour = util.getStartEndHours(event[this.fields.endTime], this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        cloneData.isLeft = cloneData.isLeft || cloneData[this.fields.startTime].getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || cloneData[this.fields.endTime].getTime() > endHour.endHour.getTime();\n    };\n    MonthEvent.prototype.renderResourceEvents = function () {\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel;\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var slotData = resources_1[_i];\n            this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n        }\n    };\n    MonthEvent.prototype.getSlotDates = function (workDays) {\n        this.slots = [];\n        var dates = this.dateRender.map(function (date) { return +date; });\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    };\n    MonthEvent.prototype.createAppointmentElement = function (record, resIndex) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid, 'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': eventSubject\n            }\n        });\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement;\n        var eventData = record.data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            templateElement = this.parent.getAppointmentTemplate()(record);\n        }\n        else {\n            var eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var appointmentSubject = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (eventLocation ? ';&nbsp' + eventLocation : ''))\n            });\n            var appointmentStartTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var innerElement = void 0;\n                if (record[this.fields.isAllDay]) {\n                    var allDayString = createElement('div', {\n                        className: cls.APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    var timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    var appTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''), innerHTML: timeString,\n                    });\n                    var appLocation = createElement('div', { className: cls.LOCATION_CLASS, innerHTML: eventLocation });\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                var wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n        var eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            var iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            var iconLeft = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            var iconRight = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    };\n    MonthEvent.prototype.renderEvents = function (event, resIndex) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n        if (day < 0) {\n            return;\n        }\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        this.renderedEvents.push(extend({}, event, null, true));\n        var diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            var appWidth = (diffInDays * this.cellWidth) - 3;\n            var cellTd = this.workCells[day];\n            var appTop = (overlapCount * (appHeight + EVENT_GAP));\n            var height = this.monthHeaderHeight + ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            if ((this.cellHeight > height) || this.parent.enableAdaptiveRows) {\n                var appointmentElement = this.createAppointmentElement(event, resIndex);\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, false, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.enableAdaptiveRows) {\n                    var firstChild = cellTd.parentElement.firstChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var cellTd_1 = this.workCells[day + i];\n                    if (cellTd_1 && isNullOrUndefined(cellTd_1.querySelector('.' + cls.MORE_INDICATOR_CLASS))) {\n                        var startDate = new Date(this.dateRender[day + i].getTime());\n                        var endDate = util.addDays(this.dateRender[day + i], 1);\n                        var groupIndex = cellTd_1.getAttribute('data-group-index');\n                        var filterEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n                        var appArea = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight;\n                        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        var moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = appArea + 'px';\n                        moreIndicatorElement.style.width = cellTd_1.offsetWidth - 2 + 'px';\n                        this.renderElement(cellTd_1, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    };\n    MonthEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var target = closest(element, 'tr');\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            var firstChild = target.firstChild;\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    };\n    MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex) {\n        var filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, undefined, data);\n        }\n        return filteredEvents;\n    };\n    MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(date).getTime()) &&\n                (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(date).getTime())) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    MonthEvent.prototype.getIndex = function (date) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapEvents(date, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    MonthEvent.prototype.moreIndicatorClick = function (event) {\n        var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        if (!isNullOrUndefined(startDate) && this.parent.isAdaptive) {\n            this.parent.setProperties({ selectedDate: startDate }, true);\n            this.parent.changeView(this.parent.getNavigateView());\n        }\n        else {\n            var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n            var groupIndex = target.getAttribute('data-group-index');\n            var filteredEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n            var moreEventArgs = { date: startDate, event: filteredEvents, element: event.target };\n            this.parent.quickPopup.moreEventClick(moreEventArgs, endDate, groupIndex);\n        }\n    };\n    MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = { data: event, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args);\n        if (args.cancel) {\n            this.renderedEvents.pop();\n            return;\n        }\n        this.renderElement(cellTd, appointmentElement);\n    };\n    MonthEvent.prototype.renderElement = function (cellTd, element) {\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n        var moreIndicatorElement = createElement('div', {\n            className: cls.MORE_INDICATOR_CLASS,\n            innerHTML: '+' + count + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more')),\n            attrs: {\n                'tabindex': '0',\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString()\n            }\n        });\n        return moreIndicatorElement;\n    };\n    MonthEvent.prototype.removeHeightProperty = function (selector) {\n        var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstChild.style.height = '';\n        }\n    };\n    return MonthEvent;\n}(EventBase));\nexport { MonthEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { compile, isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { WorkCellInteraction } from '../actions/work-cells';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar MAJOR_SLOT_TEMPLATE = '<span>${getTime(date)}</span>';\nvar MINOR_SLOT_TEMPLATE = '&nbsp;';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    /**\n     * Constructor for vertical view\n     */\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        _this.dateHeaderTemplate = '<div class=\"e-header-day\">${getDayName(date)}</div>' +\n            '<div class=\"e-header-date e-navigate\" role=\"link\">${getDate(date)}</div>';\n        _this.workCellAction = new WorkCellInteraction(parent);\n        return _this;\n    }\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n        this.parent.off(event.dataReady, this.renderEvents);\n    };\n    VerticalView.prototype.renderEvents = function () {\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var appointment = new VerticalEvent(this.parent);\n            appointment.renderAppointments();\n        }\n        else {\n            var appointment = new MonthEvent(this.parent);\n            appointment.renderAppointments();\n        }\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n    };\n    VerticalView.prototype.onApaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onApaptiveScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.uiStateValues.top = e.target.scrollTop;\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timecells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setContentHeight(content, timecells, scrollerHeight);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // tslint:disable:no-any\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        // tslint:enable:no-any\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour) {\n        var date = this.parent.globalize.parseDate(hour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.globalize.parseDate(workStartHour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        var end = this.parent.globalize.parseDate(workEndHour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(new Date())) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                this.changeCurrentTimePosition();\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            for (var _i = 0, _a = this.parent.resourceBase.lastResourceLevel; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(new Date()));\n                if (index >= 0) {\n                    var resIndex = this.parent.activeViewOptions.group.byDate ?\n                        (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                    currentDateIndex.push(resIndex);\n                }\n                count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) ?\n                this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(new Date()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        timeIndicator.forEach(function (indicator) { return remove(indicator); });\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(new Date());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex)) {\n            return;\n        }\n        var curTimeWrap = this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS);\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[i].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[day].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(new Date()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        var timeCellsWrap = this.getLeftPanelElement();\n        removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n        addClass([timeCellsWrap.querySelectorAll('tr')[rowIndex].lastChild], cls.HIDE_CHILDS_CLASS);\n        prepend([currentTimeEle], timeCellsWrap);\n        currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return this.element.querySelector('.' + cls.WORK_CELLS_CLASS).offsetHeight;\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    var args = { date: date, type: type };\n                    cntEle = this.parent.getDateHeaderTemplate()(args);\n                }\n                else {\n                    cntEle = compile(this.dateHeaderTemplate, this.customHelper)({ date: date });\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    var args = { date: date, type: type };\n                    cntEle = this.parent.getMajorSlotTemplate()(args);\n                }\n                else {\n                    cntEle = compile(MAJOR_SLOT_TEMPLATE, this.customHelper)({ date: date });\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    var args = { date: date, type: type };\n                    cntEle = this.parent.getMinorSlotTemplate()(args);\n                }\n                else {\n                    cntEle = compile(MINOR_SLOT_TEMPLATE, this.customHelper)({ date: date });\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = this.parent.getCellTemplate()(args);\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onApaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onApaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            workTd.appendChild(this.renderContentArea());\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[i][0] && this.colLevels[i][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = util.getWeekNumber(this.renderDates.slice(-1)[0]);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            ntr_1.appendChild(this.createTd(data_1));\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: { 'tabindex': '0', title: 'Expand-all-day-section', 'aria-disabled': 'false', 'aria-label': 'Expand section' },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS,\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        var nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        this.createColGroup(tbl, lastLevel);\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            addClass([ntr], cls.HEADER_ROW_CLASS);\n            var level = this.colLevels[i];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[j]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr');\n        addClass([ntr], cls.ALLDAY_ROW_CLASS);\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[j]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append([].slice.call(ele), tdEle);\n            }\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.workCellAction.cellMouseDown, this.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.workCellAction.cellClick, this.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.workCellAction.cellDblClick, this.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS] : [];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        this.renderContentTable(tbl);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var _this = this;\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var tbody = table.querySelector('tbody');\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            tbody.appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        var cellDate = util.resetTime(new Date('' + tdData.date));\n        util.setTime(cellDate, util.getDateInMs(r.date));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            append([].slice.call(this.parent.getCellTemplate()(args_1)), ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createEventWrapper = function (type) {\n        if (type === void 0) { type = ''; }\n        var tr = createElement('tr');\n        this.colLevels.slice(-1)[0].forEach(function (col, day) {\n            var appointmentWrap = createElement('td', {\n                className: (type === 'allDay') ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : (type === 'timeIndicator') ?\n                    cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS, attrs: { 'data-date': col.date.getTime().toString() }\n            });\n            if (!isNullOrUndefined(col.groupIndex)) {\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n            }\n            if (type === '') {\n                var innerWrapper = createElement('div', {\n                    id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + day.toString(),\n                    className: cls.APPOINTMENT_WRAPPER_CLASS\n                });\n                appointmentWrap.appendChild(innerWrapper);\n            }\n            tr.appendChild(appointmentWrap);\n        });\n        return tr;\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && this.parent.currentView.indexOf('Timeline') === -1) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            length = Math.round((msEndHour - msStartHour) / msInterval);\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var dt = new Date(msStartHour);\n        var start = this.parent.globalize.parseDate(this.parent.workHours.start, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        var end = this.parent.globalize.parseDate(this.parent.workHours.end, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        for (var i = 0; i < length; i++) {\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n            dt.setMilliseconds(msInterval);\n        }\n        return rows;\n    };\n    /**\n     * Get module name.\n     */\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    /**\n     * To destroy the vertical view.\n     * @return {void}\n     * @private\n     */\n    VerticalView.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * day view\n */\nvar Day = /** @class */ (function (_super) {\n    __extends(Day, _super);\n    /**\n     * Constructor for day view\n     */\n    function Day(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    Day.prototype.getModuleName = function () {\n        return 'day';\n    };\n    return Day;\n}(VerticalView));\nexport { Day };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * week view\n */\nvar Week = /** @class */ (function (_super) {\n    __extends(Week, _super);\n    /**\n     * Constructor for week view\n     */\n    function Week(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-week-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    Week.prototype.getModuleName = function () {\n        return 'week';\n    };\n    return Week;\n}(VerticalView));\nexport { Week };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * work week view\n */\nvar WorkWeek = /** @class */ (function (_super) {\n    __extends(WorkWeek, _super);\n    /**\n     * Constructor for work week view\n     */\n    function WorkWeek(par) {\n        var _this = _super.call(this, par) || this;\n        _this.viewClass = 'e-work-week-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    WorkWeek.prototype.getModuleName = function () {\n        return 'workWeek';\n    };\n    return WorkWeek;\n}(VerticalView));\nexport { WorkWeek };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, append, prepend } from '@syncfusion/ej2-base';\nimport { WorkCellInteraction } from '../actions/work-cells';\nimport { ViewBase } from './view-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport { MonthEvent } from '../event-renderer/month';\n/**\n * month view\n */\nvar Month = /** @class */ (function (_super) {\n    __extends(Month, _super);\n    /**\n     * Constructor for month view\n     */\n    function Month(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'wide';\n        _this.viewClass = 'e-month-view';\n        _this.isInverseTableSelect = false;\n        _this.monthDates = {};\n        _this.workCellAction = new WorkCellInteraction(parent);\n        return _this;\n    }\n    Month.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n        this.parent.on(event.cellClick, this.onCellClick, this);\n    };\n    Month.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onScrollUIUpdate);\n        this.parent.off(event.dataReady, this.onDataReady);\n        this.parent.off(event.cellClick, this.onCellClick);\n    };\n    Month.prototype.onDataReady = function (args) {\n        var monthEvent = new MonthEvent(this.parent);\n        monthEvent.renderAppointments();\n    };\n    Month.prototype.onCellClick = function (event) {\n        // Here cell click\n    };\n    Month.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n    };\n    Month.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    Month.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS);\n    };\n    Month.prototype.onScrollUIUpdate = function (args) {\n        var headerHeight = this.getHeaderBarHeight();\n        var header = this.getDatesHeaderElement();\n        var content = this.getContentAreaElement();\n        var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        var leftPanel = this.getLeftPanelElement();\n        this.setContentHeight(content, leftPanel, height);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // tslint:disable:no-any\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        // tslint:enable:no-any\n    };\n    Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    };\n    Month.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Month.prototype.getDateSlots = function (renderDates, workDays) {\n        var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        var dateSlots = [];\n        for (var col = 0; col < count; col++) {\n            var classList = [cls.HEADER_CELLS_CLASS];\n            var currentDateIndex = renderDates.slice(0, count).map(function (date) { return date.getDay(); });\n            if (this.isCurrentMonth(this.parent.selectedDate) && currentDateIndex.indexOf(new Date().getDay()) === col) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[col], type: 'monthDay', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    Month.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    };\n    Month.prototype.renderLayout = function (type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Month.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.workCellAction.cellMouseDown, this.workCellAction);\n        EventHandler.add(element, 'click', this.workCellAction.cellClick, this.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.workCellAction.cellDblClick, this.workCellAction);\n        }\n    };\n    Month.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    Month.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    };\n    Month.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        var workTd = createElement('td');\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            var monthAgendaWrapper = createElement('div', { className: cls.TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    };\n    Month.prototype.renderWeekNumberContent = function () {\n        var dateCol = this.renderDates.map(function (date) { return new Date(+date); });\n        var td = createElement('td');\n        var contentWrapper = createElement('div', { className: cls.WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        var contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (var i = 0, length_1 = (this.renderDates.length / noOfDays); i < length_1; i++) {\n            var dates = dateCol.splice(0, noOfDays);\n            var weekNumber = util.getWeekNumber(dates.slice(-1)[0]).toString();\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    };\n    Month.prototype.renderAppointmentContainer = function () {\n        //Here needs to render mobile view appointment details on selected date\n    };\n    Month.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var table = this.createTableLayout();\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        var trEle = createElement('tr');\n        for (var i = 0; i < this.colLevels.length; i++) {\n            var level = this.colLevels[i];\n            var ntr = trEle.cloneNode();\n            for (var j = 0; j < level.length; j++) {\n                var td = level[j];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    };\n    Month.prototype.createHeaderCell = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            var ele = createElement('span', { innerHTML: this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()] });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], cls.DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                var cellArgs = { date: td.date, type: td.type };\n                var ele = this.parent.getDateHeaderTemplate()(cellArgs);\n                if (ele && ele.length) {\n                    append([].slice.call(ele), tdEle);\n                }\n            }\n            else {\n                var ele = createElement('span', { className: cls.NAVIGATE_CLASS });\n                var title = this.parent.globalize.formatDate(td.date, { skeleton: 'full', calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', title);\n                ele.innerHTML =\n                    (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                        this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                        this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    Month.prototype.getContentSlots = function () {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        var slotDatas = [];\n        var prepareSlots = function (rowIndex, renderDate, resData, classList) {\n            var data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList || [cls.WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[rowIndex]) {\n                slotDatas[rowIndex] = [];\n            }\n            slotDatas[rowIndex].push(data);\n        };\n        var includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n                var res = _a[_i];\n                var dates = res.renderDates.map(function (date) { return new Date(+date); });\n                var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : res.workDays.length;\n                for (var i = 0; i < (res.renderDates.length / count); i++) {\n                    var colDates = dates.splice(0, count);\n                    for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n                        var colDate = colDates_1[_b];\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            var dates = this.renderDates.map(function (date) { return new Date(+date); });\n            var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            for (var i = 0; i < (this.renderDates.length / count); i++) {\n                var colDates = dates.splice(0, count);\n                for (var _c = 0, colDates_2 = colDates; _c < colDates_2.length; _c++) {\n                    var colDate = colDates_2[_c];\n                    if (includeResource) {\n                        var lastRow = this.colLevels[(this.colLevels.length - 1)];\n                        var resourcesTd = lastRow.slice(0, lastRow.length / count);\n                        for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            var clsList = void 0;\n                            if (resIndex !== 0) {\n                                clsList = [cls.WORK_CELLS_CLASS, cls.DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[resIndex], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this.colLevels[this.colLevels.length - 1][0]);\n                    }\n                }\n            }\n        }\n        return slotDatas;\n    };\n    Month.prototype.updateClassList = function (data) {\n        if (this.isOtherMonth(data.date)) {\n            data.className.push(cls.OTHERMONTH_CLASS);\n        }\n        if (this.parent.currentView === 'MonthAgenda' && this.parent.isSelectedDate(data.date)) {\n            data.className.push(cls.SELECTED_CELL_CLASS);\n        }\n    };\n    Month.prototype.isOtherMonth = function (date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    };\n    Month.prototype.renderContentArea = function () {\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        var monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(util.addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        var tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    };\n    Month.prototype.getContentRows = function () {\n        var trows = [];\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var slotDatas = this.getContentSlots();\n        for (var row = 0; row < slotDatas.length; row++) {\n            var ntr = tr.cloneNode();\n            for (var col = 0; col < slotDatas[row].length; col++) {\n                var ntd = this.createContentTd(slotDatas[row][col], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    };\n    Month.prototype.createContentTd = function (data, td) {\n        var ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        var type = data.type;\n        if (data.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(cls.WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(cls.CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: data.date, type: type, groupIndex: data.groupIndex };\n            append([].slice.call(this.parent.getCellTemplate()(args_1)), ntd);\n        }\n        var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    Month.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    };\n    Month.prototype.renderDateHeaderElement = function (data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var dateHeader = createElement('div', { className: cls.DATE_HEADER_CLASS });\n        dateHeader.innerHTML =\n            (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], cls.NAVIGATE_CLASS);\n        }\n    };\n    Month.prototype.getMonthStart = function (currentDate) {\n        var monthStart = util.getWeekFirstDate(this.parent.calendarUtil.firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n        var start = new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n        return start;\n    };\n    Month.prototype.getMonthEnd = function (currentDate) {\n        var endDate = util.addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n        var lastWeekOfMonth = util.getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.firstDayOfWeek);\n        var monthEnd = util.addDays(lastWeekOfMonth, util.WEEK_LENGTH - 1);\n        return monthEnd;\n    };\n    Month.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        var currentDate = util.resetTime(this.parent.selectedDate);\n        var start = this.getMonthStart(currentDate);\n        var monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = util.addDays(start, 1);\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        return renderDates;\n    };\n    Month.prototype.getNextPreviousDate = function (type) {\n        if (type === 'next') {\n            return util.addMonths(this.parent.selectedDate, this.parent.activeViewOptions.interval);\n        }\n        else {\n            return util.addMonths(this.parent.selectedDate, -(this.parent.activeViewOptions.interval));\n        }\n    };\n    Month.prototype.getEndDateFromStartDate = function (start) {\n        return util.addDays(new Date(start.getTime()), 1);\n    };\n    Month.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            if (this.parent.activeViewOptions.interval > 1) {\n                var endDate = util.addMonths(util.lastDateOfMonth(this.parent.selectedDate), this.parent.activeViewOptions.interval - 1);\n                if (this.parent.selectedDate.getFullYear() === endDate.getFullYear()) {\n                    var monthNames = (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        endDate.getFullYear();\n                    return monthNames;\n                }\n                return (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    this.parent.selectedDate.getFullYear() + ' - ' + (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                    endDate.getFullYear();\n            }\n            return this.parent.globalize.\n                formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() });\n        }\n        return this.formatDateRange(this.parent.selectedDate);\n    };\n    Month.prototype.getLabelText = function (view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' +\n            this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() });\n    };\n    Month.prototype.createWeekNumberElement = function (text) {\n        var tr = createElement('tr');\n        var td = createElement('td', {\n            className: cls.WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        var args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(event.renderCell, args);\n        return tr;\n    };\n    Month.prototype.unwireEvents = function () {\n        // No scroller events for month view\n    };\n    /**\n     * Get module name.\n     */\n    Month.prototype.getModuleName = function () {\n        return 'month';\n    };\n    /**\n     * To destroy the month.\n     * @return {void}\n     * @private\n     */\n    Month.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unwireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n        }\n    };\n    return Month;\n}(ViewBase));\nexport { Month };\n","import { isNullOrUndefined, addClass, createElement, append, EventHandler, extend, remove } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { ViewBase } from '../renderer/view-base';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nvar AgendaBase = /** @class */ (function () {\n    /**\n     * Constructor for AgendaBase\n     */\n    function AgendaBase(parent) {\n        this.parent = parent;\n        this.viewBase = new ViewBase(parent);\n    }\n    AgendaBase.prototype.createAgendaContentElement = function (type, listData, aTd, groupOrder, groupIndex) {\n        var listElement;\n        if (type === 'noEvents') {\n            var noEvents = [{ 'subject': this.parent.localeObj.getConstant('noEvents') }];\n            listElement = ListBase.createList(this.parent.createElement, noEvents, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass,\n                template: '<div class=' + cls.AGENDA_NO_EVENT_CLASS + '>${subject}</div>'\n            });\n        }\n        else {\n            listElement = ListBase.createList(this.parent.createElement, listData, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass\n            });\n            for (var li = 0, length_1 = listData.length; li < length_1; li++) {\n                var appWrapper = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS, attrs: {\n                        'data-id': 'Appointment_' + listData[li][this.parent.eventFields.id],\n                        'data-guid': listData[li].Guid,\n                        'role': 'button',\n                        'tabindex': '0',\n                        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(listData[li]),\n                        'aria-selected': 'false',\n                        'aria-grabbed': 'true',\n                        'aria-label': (listData[li][this.parent.eventFields.subject]\n                            || this.parent.eventSettings.fields.subject.default)\n                    }\n                });\n                if (!isNullOrUndefined(groupIndex)) {\n                    appWrapper.setAttribute('data-group-index', groupIndex.toString());\n                }\n                this.parent.eventBase.applyResourceColor(appWrapper, listData[li], 'borderColor', groupOrder);\n                var templateEle = void 0;\n                if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n                    templateEle = this.parent.getAppointmentTemplate()(listData[li]);\n                }\n                else {\n                    templateEle = this.createAppointment(listData[li]);\n                }\n                append([].slice.call(templateEle), appWrapper);\n                listElement.children[li].innerHTML = '';\n                listElement.children[li].appendChild(appWrapper);\n                var args = { data: listData[li], element: listElement.children[li], cancel: false };\n                this.parent.trigger(event.eventRendered, args);\n                if (args.cancel) {\n                    remove(listElement.children[li]);\n                }\n            }\n        }\n        aTd.appendChild(listElement);\n        if ((this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0)\n            || this.parent.currentView === 'Agenda') {\n            addClass([aTd], cls.AGENDA_DAY_BORDER_CLASS);\n        }\n        return aTd;\n    };\n    AgendaBase.prototype.createAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var eventSubject = (event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default);\n        var eventLocation = (event[fieldMapping.location] || this.parent.eventSettings.fields.location.default);\n        var appSubjectWrap = createElement('div', { className: cls.SUBJECT_WRAP });\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            eventSubject += ',';\n        }\n        appSubjectWrap.appendChild(createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: eventSubject }));\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            appSubjectWrap.appendChild(createElement('div', { className: cls.LOCATION_CLASS, innerHTML: eventLocation }));\n        }\n        if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n            var iconClass = (event[fieldMapping.id] === event[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appSubjectWrap.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n        }\n        var strDate = event[fieldMapping.startTime];\n        var endDate = event[fieldMapping.endTime];\n        var isAllDay = event[fieldMapping.isAllDay];\n        var allDayStr = this.parent.localeObj.getConstant('allDay');\n        var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n        if (!isNullOrUndefined(event.data)) {\n            var eventString = (endDate.getTime() - strDate.getTime()) / util.MS_PER_DAY >= 1 ? allDayStr : timeStr;\n            allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' '\n                + event.data.index + '/' + event.data.count + ')';\n        }\n        var displayStr = (!isNullOrUndefined(event.data) || isAllDay) ? allDayStr : timeStr;\n        var appDateTime = createElement('div', { className: cls.DATE_TIME_CLASS, innerHTML: displayStr });\n        return [appSubjectWrap, appDateTime];\n    };\n    AgendaBase.prototype.processAgendaEvents = function (events) {\n        var eventsProcessed = [];\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            var splited = this.parent.eventBase.splitEventByDay(event_1);\n            eventsProcessed = eventsProcessed.concat(splited.length > 1 ? splited : event_1);\n        }\n        return eventsProcessed;\n    };\n    AgendaBase.prototype.wireEventActions = function () {\n        var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        for (var _i = 0, eventElement_1 = eventElement; _i < eventElement_1.length; _i++) {\n            var element = eventElement_1[_i];\n            this.parent.eventBase.wireAppointmentEvents(element);\n        }\n        var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n        for (var _a = 0, dateHeaderElement_1 = dateHeaderElement; _a < dateHeaderElement_1.length; _a++) {\n            var element = dateHeaderElement_1[_a];\n            EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n    };\n    AgendaBase.prototype.calculateResourceTableElement = function (tBody, noOfDays, agendaDate) {\n        if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n            var level = this.viewBase.getDateSlots(this.viewBase.renderDates, this.parent.activeViewOptions.workDays);\n            this.parent.resourceBase.generateResourceLevels(level);\n        }\n        var agendaLastDate = util.addDays(new Date(agendaDate.getTime()), noOfDays);\n        var days = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n        var resColl = this.parent.resourceBase.resourceCollection;\n        var resData = this.parent.resourceBase.lastResourceLevel;\n        var initialDate = agendaDate;\n        for (var i = 0; i < days; i++) {\n            var lastLevelInfo = [];\n            var tempLastLevelInfo = [];\n            var tempIndex = 0;\n            var eventObj = void 0;\n            var dateObj = void 0;\n            var firstDate = util.addDays(initialDate, i);\n            var finalDate = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda')\n                ? util.addDays(firstDate, 1) : agendaLastDate;\n            var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n            if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                for (var res = 0; res < resData.length; res++) {\n                    noOfDays = (!this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n                    var data = [];\n                    agendaDate = firstDate;\n                    var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[res]);\n                    if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                        for (var r = 0; r < noOfDays; r++) {\n                            var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, util.addDays(agendaDate, 1), resDataCollection, undefined);\n                            if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays ||\n                                this.parent.currentView === 'MonthAgenda') {\n                                data.push(resDayCollection[0]);\n                                eventObj = {\n                                    rowSpan: 1, type: 'eventColumn', resource: resColl[resColl.length - 1],\n                                    groupIndex: resData[res].groupIndex, groupOrder: resData[res].groupOrder,\n                                    resourceData: resData[res].resourceData, eventData: resDayCollection, date: agendaDate\n                                };\n                                dateObj = {\n                                    rowSpan: 1, type: 'dateColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder, resourceData: resData[res].resourceData,\n                                    date: agendaDate\n                                };\n                                if (!lastLevelInfo[tempIndex]) {\n                                    lastLevelInfo[tempIndex] = [];\n                                }\n                                lastLevelInfo[tempIndex].push(eventObj);\n                                lastLevelInfo[tempIndex].push(dateObj);\n                                tempIndex++;\n                            }\n                            agendaDate = util.addDays(agendaDate, 1);\n                            if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate\n                                || this.parent.currentView === 'MonthAgenda') {\n                                lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = cls.AGENDA_DAY_BORDER_CLASS;\n                                var tempObj = {\n                                    rowSpan: data.length, type: 'resourceColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder.slice(0, -1), resourceData: resData[res].resourceData,\n                                    groupIndex: (lastLevelInfo.length - data.length), className: [cls.RESOURCE_NAME],\n                                    date: agendaDate\n                                };\n                                lastLevelInfo[lastLevelInfo.length - data.length].push(tempObj);\n                                tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                                break;\n                            }\n                        }\n                    }\n                }\n                var topResources = resColl.slice(0, -1);\n                var tempGroupedData = [];\n                var totalRowSpan = 0;\n                for (var y = 0; y < topResources.length; y++) {\n                    var data = topResources[topResources.length - (y + 1)]\n                        .dataSource;\n                    for (var x = 0; x < data.length; x++) {\n                        var z = 0;\n                        for (var u = 0; u < tempLastLevelInfo.length; u++) {\n                            if (tempLastLevelInfo[u].groupOrder[topResources.length - (y + 1)] === data[x][topResources[topResources.length - (y + 1)].idField]) {\n                                totalRowSpan = totalRowSpan + tempLastLevelInfo[u].rowSpan;\n                                tempGroupedData.push(extend({}, tempLastLevelInfo[u], null, true));\n                            }\n                            if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                                tempGroupedData[0].rowSpan = totalRowSpan;\n                                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                                tempGroupedData[0].resourceData = data[x];\n                                tempGroupedData[0].date = agendaDate;\n                                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                                tempGroupedData = [];\n                                totalRowSpan = 0;\n                            }\n                        }\n                    }\n                }\n                this.createResourceTableRow(lastLevelInfo, tBody);\n            }\n        }\n        var totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n        if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            this.renderEmptyContent(tBody, initialDate);\n        }\n    };\n    AgendaBase.prototype.createResourceTableRow = function (tContent, tBody) {\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var ntr;\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var tempData;\n        var rowSpan = 0;\n        var level;\n        if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            var tContentCollection = [];\n            var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n            for (var w = 0; w < tContent.length; w++) {\n                tContentCollection = tContentCollection.concat(tContent[w]);\n            }\n            level = (parentCollection.length > 0) ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n            var rowSpanCollection = new DataManager({ json: tContentCollection }).executeLocal(new Query()\n                .where('type', 'equal', level));\n            for (var x = 0; x < rowSpanCollection.length; x++) {\n                rowSpan = rowSpan + rowSpanCollection[x].rowSpan;\n            }\n        }\n        for (var row = 0; row < tContent.length; row++) {\n            ntr = tr.cloneNode();\n            for (var col = tContent[row].length - 1; col >= 0; col--) {\n                var data = tContent[row][col];\n                var ntd = td.cloneNode();\n                if (data.type === 'dateColumn') {\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        tempData = tContent[row][col];\n                        continue;\n                    }\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    ntd.appendChild(this.createDateHeaderElement(data.date));\n                    var className = [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS];\n                    if (data.cssClass) {\n                        className.push(data.cssClass);\n                    }\n                    addClass([ntd], className);\n                    ntr.appendChild(ntd);\n                }\n                else if (data.type === 'eventColumn') {\n                    var elementType = (data.eventData.length === 0) ? 'noEvents' : 'data';\n                    ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DAY_PADDING_CLASS]);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else {\n                    ntd.setAttribute('rowspan', data.rowSpan.toString());\n                    addClass([ntd], cls.AGENDA_RESOURCE_CLASS);\n                    this.viewBase.setResourceHeaderContent(ntd, data, data.className[0]);\n                    ntr.appendChild(ntd);\n                }\n            }\n            if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n                var ntd = td.cloneNode();\n                ntd.setAttribute('data-date', tempData.date.getTime().toString());\n                ntd.setAttribute('rowspan', rowSpan.toString());\n                ntd.appendChild(this.createDateHeaderElement(tempData.date));\n                addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS, cls.DATE_BORDER_CLASS]);\n                var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n                ntr.setAttribute('aria-rowindex', daysCount.toString());\n                if (this.parent.element.querySelector(\".e-agenda-view tr[aria-rowindex=\\\"\" + daysCount + \"\\\"]\")) {\n                    break;\n                }\n                ntr.insertBefore(ntd, ntr.childNodes[0]);\n            }\n            tBody.appendChild(ntr);\n        }\n    };\n    AgendaBase.prototype.createDateHeaderElement = function (date) {\n        var dateHeader;\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            dateHeader = createElement('div', { className: cls.AGENDA_HEADER_CLASS });\n            var templateArgs = { date: date, type: 'dateHeader' };\n            var template = this.parent.getDateHeaderTemplate()(templateArgs);\n            append([].slice.call(template), dateHeader);\n        }\n        else {\n            dateHeader = this.viewBase.getMobileDateElement(date, cls.AGENDA_HEADER_CLASS);\n        }\n        return dateHeader;\n    };\n    AgendaBase.prototype.renderEmptyContent = function (tBody, agendaDate) {\n        var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n        var eTd = eTr.children[0];\n        var noEvents = createElement('div', {\n            className: cls.AGENDA_EMPTY_EVENT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noEvents')\n        });\n        eTd.appendChild(noEvents);\n        tBody.appendChild(eTr);\n    };\n    AgendaBase.prototype.createTableRowElement = function (date, type) {\n        var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n        var tr = createElement('tr', { attrs: { 'role': 'row', 'aria-rowindex': daysCount.toString() } });\n        var td = createElement('td', {\n            attrs: {\n                'class': (type === 'monthHeader') ? cls.AGENDA_MONTH_HEADER_CLASS : cls.AGENDA_CELLS_CLASS,\n                'role': 'gridcell',\n                'aria-selected': 'false',\n                'aria-colindex': daysCount.toString(),\n                'data-date': date.getTime().toString()\n            }\n        });\n        var dTd = td.cloneNode();\n        var aTd = td.cloneNode();\n        tr.appendChild(dTd);\n        if (type !== 'noEvents') {\n            tr.appendChild(aTd);\n        }\n        return tr;\n    };\n    return AgendaBase;\n}());\nexport { AgendaBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { ViewBase } from './view-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */ (function (_super) {\n    __extends(Agenda, _super);\n    /**\n     * Constructor for agenda view\n     */\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        _this.minDate = new Date(1900, 0, 1);\n        _this.maxDate = new Date(2099, 11, 31);\n        _this.agendaBase = new AgendaBase(parent);\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: cls.TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        this.agendaBase.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var tBody = this.parent.getContentTable();\n        tBody.innerHTML = '';\n        this.renderContent(tBody, agendaDate);\n        this.agendaBase.wireEventActions();\n        var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var eventData = _a[_i];\n            var fields = this.parent.eventFields;\n            var data = eventData;\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.agendaBase.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (!this.parent.activeViewOptions.allowVirtualScrolling) ?\n            util.addDays(firstDate, this.parent.agendaDaysCount) : this.getEndDateFromStartDate(firstDate);\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length === 0 && this.parent.activeViewOptions.allowVirtualScrolling) {\n            lastDate = firstDate;\n            firstDate = new Date(this.minDate.getTime());\n            isObject = this.appointmentFiltering(firstDate, lastDate);\n            if (isObject.length === 0) {\n                firstDate = lastDate;\n                lastDate = new Date(this.maxDate.getTime());\n                isObject = this.appointmentFiltering(firstDate, lastDate);\n            }\n        }\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling) {\n            var appoint = isObject;\n            agendaDate = appoint[0][fieldMapping.startTime];\n            agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(appoint[0][fieldMapping.startTime]);\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            var noOfDays = (!this.parent.hideEmptyAgendaDays || !this.parent.activeViewOptions.allowVirtualScrolling ||\n                this.parent.agendaDaysCount < isObject.length) ? this.parent.agendaDaysCount : isObject.length;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.agendaBase.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n            }\n            else {\n                for (var day = 0; day < noOfDays; day++) {\n                    var filterData = [];\n                    filterData = this.appointmentFiltering(agendaDate);\n                    var nTr = this.agendaBase.createTableRowElement(agendaDate, 'data');\n                    if (this.element.querySelector('tr[aria-rowindex=\"' + parseInt(nTr.getAttribute('aria-rowindex'), 10)\n                        + '\"]')) {\n                        continue;\n                    }\n                    // if (this.isMonthFirstDate(agendaDate)) {\n                    //     tBody.appendChild(this.renderMonthHeader(this.createTableRowElement(agendaDate, 'monthHeader')));\n                    // }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.agendaBase.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        var cTd = this.agendaBase.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = util.addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n        }\n        else {\n            this.agendaBase.renderEmptyContent(tBody, agendaDate);\n            endDate = util.addDays(agendaDate, this.parent.agendaDaysCount - 1);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    // private renderMonthHeader(mTr: Element): Element {\n    //     mTr.removeAttribute('aria-rowindex');\n    //     for (let td of [].slice.call(mTr.childNodes)) {\n    //         td.removeAttribute('aria-colindex');\n    //     }\n    //     let headerDate: Date = new Date(parseInt(mTr.children[0].getAttribute('data-date'), 10));\n    //     let div: Element = createElement('div', {\n    //         className: cls.DATE_HEADER_CLASS,\n    //         innerHTML: headerDate.toLocaleString(this.parent.locale, { month: 'long' }) + '&nbsp' + headerDate.getFullYear()\n    //     });\n    //     mTr.lastElementChild.appendChild(div);\n    //     return mTr;\n    // }\n    Agenda.prototype.agendaScrolling = function (event) {\n        this.parent.quickPopup.quickPopupHide();\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event, direction);\n        var scrollDate = new Date(parseInt(topElement.getAttribute('data-date'), 0));\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.agendaBase.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[s].getAttribute('aria-rowindex') === topElement.getAttribute('aria-colindex')) {\n                        var scrollToValue = element[s].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight === scrollHeight) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.agendaBase.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event, direction) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[a];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(this.getDateRangeText(date));\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            var filterData = this.appointmentFiltering(currentDate);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                daysCount++;\n            }\n            currentDate = util.addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = util.addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: util.addDays(endDate, 1) } : { start: endDate, end: util.addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = util.resetTime(new Date(startDate.getTime()));\n            dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                var date = a[fieldMapping.startTime];\n                return date.getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.minDate;\n        }\n        return util.resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                var date = a[fieldMapping.endTime];\n                return date.getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.maxDate;\n        }\n        return util.resetTime(util.addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'next') ? 1 : -1;\n        return util.addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return util.resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() });\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var date = this.parent.getDateFromElement(closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS));\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive) {\n            this.parent.setProperties({ selectedDate: date }, true);\n            this.parent.changeView('Day');\n        }\n    };\n    // private isMonthFirstDate(date: Date): boolean {\n    //     return date.getDate() === 1;\n    // }\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n        this.parent.off(event.dataReady, this.eventLoad);\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n    };\n    /**\n     * To destroy the agenda.\n     * @return {void}\n     * @private\n     */\n    Agenda.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n    };\n    return Agenda;\n}(ViewBase));\nexport { Agenda };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { Month } from './month';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * month agenda view\n */\nvar MonthAgenda = /** @class */ (function (_super) {\n    __extends(MonthAgenda, _super);\n    /**\n     * Constructor\n     */\n    function MonthAgenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'narrow';\n        _this.viewClass = 'e-month-agenda-view';\n        _this.agendaDates = {};\n        _this.agendaBase = new AgendaBase(parent);\n        return _this;\n    }\n    MonthAgenda.prototype.renderAppointmentContainer = function () {\n        var contentArea = this.getContentAreaElement();\n        var wrapperContainer = createElement('div', { className: cls.WRAPPER_CONTAINER_CLASS });\n        contentArea.appendChild(wrapperContainer);\n        var appWrap = createElement('div', { className: cls.APPOINTMENT_WRAP_CLASS });\n        wrapperContainer.appendChild(appWrap);\n        this.appendAppContainer(appWrap);\n        this.setEventWrapperHeight();\n    };\n    MonthAgenda.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive) {\n            return 'narrow';\n        }\n        return 'abbreviated';\n    };\n    MonthAgenda.prototype.setEventWrapperHeight = function () {\n        var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n        var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n        if (resourceWrapper) {\n            headerHeight += resourceWrapper.offsetHeight;\n        }\n        var contentArea = this.getContentAreaElement().firstChild;\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var availableHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n        var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n        var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availableHeight);\n    };\n    MonthAgenda.prototype.onDataReady = function (args) {\n        this.setEventWrapperHeight();\n        this.clearElements();\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var count = 0;\n        for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            var filterData = this.appointmentFiltering(date);\n            var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[count];\n            if (filterData.length > 0) {\n                if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\n                    workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_INDICATOR_CLASS }));\n                }\n                if (date.getTime() === util.resetTime(new Date(this.parent.selectedDate.getTime())).getTime()) {\n                    this.onEventRender(filterData, date);\n                }\n            }\n            count++;\n        }\n    };\n    MonthAgenda.prototype.onCellClick = function (event) {\n        this.parent.quickPopup.quickPopupHide();\n        var filterData = this.appointmentFiltering(event.startTime);\n        this.onEventRender(filterData, event.startTime);\n        this.parent.setProperties({ selectedDate: new Date('' + event.startTime) }, true);\n    };\n    MonthAgenda.prototype.onEventRender = function (events, date) {\n        var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        appWrap.innerHTML = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            if (events.length > 0) {\n                var appContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n                appWrap.appendChild(this.agendaBase.\n                    createAgendaContentElement('data', events, appContainer));\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        else {\n            if (events.length > 0) {\n                var table = this.createTableLayout();\n                var tBody = table.querySelector('tbody');\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n                table.appendChild(tBody);\n                appWrap.appendChild(table);\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        this.agendaBase.wireEventActions();\n    };\n    MonthAgenda.prototype.appointmentFiltering = function (date) {\n        var dateStart = util.resetTime(new Date(date.getTime()));\n        var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    };\n    MonthAgenda.prototype.clearElements = function () {\n        var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\n        for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n            var appointmentIndicator = appointmentIndicators_1[_i];\n            remove(appointmentIndicator);\n        }\n        this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\n    };\n    MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n        var app = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n        addClass([app], cls.AGENDA_NO_EVENT_CLASS);\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n        appWrap.innerHTML = '';\n        appWrap.appendChild(app);\n    };\n    /**\n     * Get module name.\n     */\n    MonthAgenda.prototype.getModuleName = function () {\n        return 'monthAgenda';\n    };\n    return MonthAgenda;\n}(Month));\nexport { MonthAgenda };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, setStyleAttribute, extend, EventHandler, createElement } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { MonthEvent } from './month';\nvar EVENT_GAP = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nvar TimelineEvent = /** @class */ (function (_super) {\n    __extends(TimelineEvent, _super);\n    /**\n     * Constructor for timeline views\n     */\n    function TimelineEvent(parent, type) {\n        var _this = _super.call(this, parent) || this;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.day = 0;\n        _this.rowIndex = 0;\n        _this.renderType = type;\n        _this.appContainers = [].slice.call(_this.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        _this.dayLength = _this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n        _this.content = _this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        return _this;\n    }\n    TimelineEvent.prototype.getSlotDates = function () {\n        this.slots = [];\n        this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.headerRows.length > 0 &&\n            this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour') {\n            this.renderType = 'day';\n            this.cellWidth = this.content.offsetWidth / this.dateRender.length;\n            this.slotsPerDay = 1;\n        }\n        else {\n            this.slotsPerDay = (this.dayLength / this.dateRender.length);\n        }\n    };\n    TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        if (this.renderType === 'day') {\n            for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n                var app = appointments_1[_i];\n                if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(new Date(date.getTime())).getTime()) &&\n                    (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(new Date(date.getTime())).getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        else {\n            for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n                var app = appointments_2[_a];\n                var eventData = app.data;\n                if (eventData[this.fields.startTime].getTime() <= date.getTime() &&\n                    eventData[this.fields.endTime].getTime() > date.getTime()) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    TimelineEvent.prototype.renderResourceEvents = function () {\n        this.removeHeightProperty(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        for (var i = 0; i < resources.length; i++) {\n            this.rowIndex = i;\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[i]);\n        }\n    };\n    TimelineEvent.prototype.renderEvents = function (event, resIndex) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        this.day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (this.day < 0) {\n            return;\n        }\n        var cellTd = this.getCellTd();\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        var diffInDays = eventData.count;\n        if (startTime <= endTime) {\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n            var appLeft = 0;\n            var appRight = 0;\n            var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n            this.renderedEvents.push(extend({}, event, null, true));\n            var top_1 = this.getRowTop(resIndex);\n            var appTop = (top_1 + EVENT_GAP) + (overlapCount * (appHeight + EVENT_GAP));\n            appLeft = (this.parent.enableRtl) ? 0 : position;\n            appRight = (this.parent.enableRtl) ? position : 0;\n            var height = ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            if ((this.cellHeight > height) || this.parent.enableAdaptiveRows) {\n                var appointmentElement = this.createAppointmentElement(event, resIndex);\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                setStyleAttribute(appointmentElement, {\n                    'width': appWidth + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n                });\n                this.wireAppointmentEvents(appointmentElement, false, event);\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.enableAdaptiveRows) {\n                    var firstChild = this.getFirstChild(resIndex);\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var moreIndicator = cellTd.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n                    var appPos = (this.parent.enableRtl) ? appRight : appLeft;\n                    appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n                    if ((cellTd && isNullOrUndefined(moreIndicator)) ||\n                        (!this.isAlreadyAvail(appPos, cellTd))) {\n                        var interval = this.interval / this.slotCount;\n                        var startDate = new Date(this.dateRender[this.day + i].getTime());\n                        var endDate = util.addDays(this.dateRender[this.day + i], 1);\n                        var startDateTime = new Date(+startTime);\n                        var slotStartTime = (new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval)));\n                        var slotEndTime = new Date(slotStartTime.getTime() + (60000 * interval));\n                        var groupIndex = void 0;\n                        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n                            groupIndex = resIndex.toString();\n                        }\n                        var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex);\n                        var appArea = this.cellHeight - this.moreIndicatorHeight;\n                        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        var moreIndicatorElement = void 0;\n                        if (this.renderType === 'day') {\n                            moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        }\n                        else {\n                            moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n                        }\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = top_1 + appArea + 'px';\n                        moreIndicatorElement.style.width = this.cellWidth + 'px';\n                        moreIndicatorElement.style.left = (Math.floor(appLeft / this.cellWidth) * this.cellWidth) + 'px';\n                        moreIndicatorElement.style.right = (Math.floor(appRight / this.cellWidth) * this.cellWidth) + 'px';\n                        this.renderElement(cellTd, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n    };\n    TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var resourceCell = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' +\n                    cell.getAttribute('data-group-index') + '\"]');\n                setStyleAttribute(resourceCell, { 'height': height + 'px' });\n            }\n        }\n    };\n    TimelineEvent.prototype.getFirstChild = function (index) {\n        var query = '.' + cls.CONTENT_TABLE_CLASS + ' tbody td';\n        var groupIndex = '';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n        }\n        var td = this.parent.element.querySelector(query + groupIndex);\n        return td;\n    };\n    TimelineEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            var firstChild = this.getFirstChild(resIndex);\n            element.style.height = firstChild.offsetHeight + 'px';\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n        var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_INDICATOR_CLASS));\n        for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n            var element = blockIndicator_1[_a];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            element.style.top = this.getRowTop(resIndex) +\n                this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n    };\n    TimelineEvent.prototype.getStartTime = function (event, eventData) {\n        var startTime = event[this.fields.startTime];\n        var schedule = util.getStartEndHours(startTime, this.startHour, this.endHour);\n        if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n            startTime = schedule.startHour;\n        }\n        else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n            startTime = this.getNextDay(schedule.startHour, eventData);\n        }\n        else {\n            startTime = eventData[this.fields.startTime];\n        }\n        // To overcome the overflow\n        if (event[this.fields.isAllDay]) {\n            eventData[this.fields.startTime] = schedule.startHour;\n        }\n        return startTime;\n    };\n    TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n        var startDate;\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            startDate = util.addDays(startTime, i);\n            if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n                eventData.count = eventData.count - 1;\n                return startDate;\n            }\n        }\n        return startDate;\n    };\n    TimelineEvent.prototype.getEndTime = function (event, eventData) {\n        var endTime = event[this.fields.endTime];\n        var schedule = util.getStartEndHours(endTime, this.startHour, this.endHour);\n        if (schedule.endHour.getTime() <= eventData[this.fields.endTime]) {\n            endTime = schedule.endHour;\n        }\n        else {\n            endTime = eventData[this.fields.endTime];\n        }\n        // To overcome the overflow\n        if (event[this.fields.isAllDay]) {\n            eventData[this.fields.endTime] = schedule.endHour;\n        }\n        return endTime;\n    };\n    TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (count * this.slotsPerDay) * this.cellWidth;\n        }\n        if (this.isSameDay(startDate, endDate)) {\n            return this.getSameDayEventsWidth(startDate, endDate);\n        }\n        else {\n            return this.getSpannedEventsWidth(startDate, endDate, count);\n        }\n    };\n    TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n        return (((endDate.getTime() - startDate.getTime())) / (60 * 1000) * (this.cellWidth * this.slotCount) / this.interval);\n    };\n    TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n        var width = (diffInDays * this.slotsPerDay) * this.cellWidth;\n        var startWidth;\n        var endWidth;\n        var start = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n        if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endDate.getTime()))) === -1) {\n            endWidth = 0;\n        }\n        else {\n            var end = util.getStartEndHours(util.resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n            endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n            endWidth = ((this.slotsPerDay * this.cellWidth) === endWidth) ? 0 : endWidth;\n        }\n        var spannedWidth = startWidth + endWidth;\n        return (width > spannedWidth) ? width - spannedWidth : endWidth - startWidth;\n    };\n    TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n        var startDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        var endDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endTime.getTime())));\n        return (startDay === endDay);\n    };\n    TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n        var slotTd = (this.isSameDay(startTime, schedule.startHour)) ?\n            ((startTime.getTime() - schedule.startHour.getTime()) / ((60 * 1000) * this.interval)) * this.slotCount : 0;\n        if (day === 0) {\n            return slotTd;\n        }\n        else {\n            var daySlot = (((schedule.endHour.getTime() - schedule.startHour.getTime()) / (60 * 1000)) / this.interval) * this.slotCount;\n            return (daySlot * day) + slotTd;\n        }\n    };\n    TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (day * this.slotsPerDay) * this.cellWidth;\n        }\n        var currentDate = util.resetTime(new Date(this.dateRender[day].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var cellIndex;\n        if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else if (schedule.endHour.getTime() <= endTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        else if (schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        return cellIndex * this.cellWidth;\n    };\n    TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex) {\n        if (this.renderType === 'day') {\n            return this.getFilteredEvents(startDate, endDate, gIndex);\n        }\n        else {\n            return this.getFilteredEvents(startTime, endTime, gIndex);\n        }\n    };\n    TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n        var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + cls.MORE_INDICATOR_CLASS));\n        for (var i = 0; i < moreIndicator.length; i++) {\n            var indicatorPos = void 0;\n            if (moreIndicator) {\n                indicatorPos = (this.parent.enableRtl) ? moreIndicator[i].style.right : moreIndicator[i].style.left;\n            }\n            if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    TimelineEvent.prototype.getRowTop = function (resIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var td = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody td[data-group-index=\"'\n                + resIndex.toString() + '\"]');\n            return td.offsetTop;\n        }\n        return 0;\n    };\n    TimelineEvent.prototype.getCellTd = function () {\n        var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n        return this.appContainers[wrapIndex];\n    };\n    TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        // No need to render block icon for Year, Month and Week header rows\n        if (this.parent.headerRows.length > 0 &&\n            (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' ||\n                this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n            return;\n        }\n        position = (Math.floor(position / this.cellWidth) * this.cellWidth) + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n        if (!this.isAlreadyAvail(position, cellTd)) {\n            var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                blockIndicator.setAttribute('data-group-index', resIndex.toString());\n            }\n            if (this.parent.enableRtl) {\n                blockIndicator.style.right = position + 'px';\n            }\n            else {\n                blockIndicator.style.left = position + 'px';\n            }\n            blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n            this.renderElement(cellTd, blockIndicator);\n        }\n    };\n    return TimelineEvent;\n}(MonthEvent));\nexport { TimelineEvent };\n","import { compile } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, getWeekNumber } from '../base/util';\n/**\n * timeline header\n */\nvar TimelineHeaderRow = /** @class */ (function () {\n    function TimelineHeaderRow(parent, renderDates) {\n        this.parent = parent;\n        this.renderDates = renderDates;\n    }\n    TimelineHeaderRow.prototype.groupByYear = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var d = dates_1[_i];\n            var key = d.getFullYear();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByMonth = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_2 = dates; _i < dates_2.length; _i++) {\n            var d = dates_2[_i];\n            var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByWeek = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_3 = dates; _i < dates_3.length; _i++) {\n            var d = dates_3[_i];\n            var jsDate = +new Date(1970, 0, 1);\n            var key = Math.ceil(((((+d - jsDate)) / MS_PER_DAY) + new Date(jsDate).getDay() + 1) / 7);\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.generateSlots = function (data, colspan, template, tempFn, cls, type) {\n        var _this = this;\n        var tdDatas = [];\n        var customHelper = {\n            getYear: function (dt) {\n                return _this.parent.globalize.formatDate(dt, { format: 'y', calendar: _this.parent.getCalendarMode() });\n            },\n            getMonth: function (dt) {\n                return _this.parent.globalize.formatDate(dt, { format: 'MMMM', calendar: _this.parent.getCalendarMode() });\n            },\n            getWeekNumber: function (dt) {\n                return getWeekNumber(dt);\n            }\n        };\n        var keys = Object.keys(data);\n        for (var i = 0; i < keys.length; i++) {\n            var dates = data[keys[i]];\n            var htmlCol = void 0;\n            if (!tempFn) {\n                htmlCol = compile(template, customHelper)({ date: dates[0] });\n            }\n            else {\n                var args = { date: dates[0], type: type };\n                htmlCol = tempFn(args);\n            }\n            tdDatas.push({\n                date: dates[0], type: type, className: [cls], colSpan: dates.length * colspan, template: htmlCol\n            });\n        }\n        return tdDatas;\n    };\n    TimelineHeaderRow.prototype.generateColumnLevels = function (dateSlots, hourSlots) {\n        var levels = [];\n        var rows = this.parent.activeViewOptions.headerRows;\n        var lastLevelColspan = 1;\n        if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n            lastLevelColspan = hourSlots.length / dateSlots.length;\n        }\n        var tdDatas = [];\n        var templateFn;\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            switch (row.option) {\n                case 'Year':\n                    templateFn = row.template ? this.parent.templateParser(row.template) : undefined;\n                    var yearTemplate = '<span class=\"e-header-year\">${getYear(date)}</span>';\n                    var byYear = this.groupByYear(this.renderDates);\n                    tdDatas = this.generateSlots(byYear, lastLevelColspan, yearTemplate, templateFn, 'e-header-year-cell', 'yearHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Month':\n                    templateFn = row.template ? this.parent.templateParser(row.template) : undefined;\n                    var monthTemp = '<span class=\"e-header-month\">${getMonth(date)}</span>';\n                    var byMonth = this.groupByMonth(this.renderDates);\n                    tdDatas = this.generateSlots(byMonth, lastLevelColspan, monthTemp, templateFn, 'e-header-month-cell', 'monthHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Week':\n                    templateFn = row.template ? this.parent.templateParser(row.template) : undefined;\n                    var weekTemplate = '<span class=\"e-header-week\">${getWeekNumber(date)}</span>';\n                    var byWeek = this.groupByWeek(this.renderDates);\n                    tdDatas = this.generateSlots(byWeek, lastLevelColspan, weekTemplate, templateFn, 'e-header-week-cell', 'weekHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Date':\n                    tdDatas = dateSlots;\n                    tdDatas = tdDatas.map(function (value) {\n                        value.colSpan = lastLevelColspan;\n                        return value;\n                    });\n                    levels.push(tdDatas);\n                    break;\n                case 'Hour':\n                    if (hourSlots.length > 0) {\n                        levels.push(hourSlots);\n                    }\n                    break;\n            }\n        }\n        return levels;\n    };\n    return TimelineHeaderRow;\n}());\nexport { TimelineHeaderRow };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, createElement, prepend, extend, formatUnit, append, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { VerticalView } from './vertical-view';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport * as cls from '../base/css-constant';\nimport { getDateInMs, resetTime } from '../base/util';\nimport { TimelineHeaderRow } from './timeline-header-row';\n/**\n * timeline view\n */\nvar TimelineViews = /** @class */ (function (_super) {\n    __extends(TimelineViews, _super);\n    function TimelineViews(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateHeaderTemplate = '<span class=\"e-header-date e-navigate\">${getTimelineDate(date)}</span>';\n        _this.baseCssClass = 'e-timeline-view';\n        return _this;\n    }\n    TimelineViews.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineViews.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineViews.prototype.scrollToWorkHour = function () {\n        var start = this.parent.globalize.parseDate(this.parent.workHours.start, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight &&\n            !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes())\n            : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n        var queryString = '[data-date=\"' + currDateTime + '\"]';\n        var firstWorkHourCell = this.element.querySelector(queryString);\n        if (firstWorkHourCell) {\n            this.getScrollableElement().scrollLeft = firstWorkHourCell.offsetLeft;\n        }\n    };\n    TimelineViews.prototype.scrollToHour = function (hour) {\n        var date = this.parent.globalize.parseDate(hour, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollLeft = this.getLeftFromDateTime(null, date);\n    };\n    TimelineViews.prototype.generateColumnLevels = function () {\n        var levels = [];\n        var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        levels.push(dateSlots);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n            levels.push(hourSlots);\n        }\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n        }\n        return levels;\n    };\n    TimelineViews.prototype.generateTimeSlots = function (dateSlots) {\n        var _this = this;\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.first ? ['e-time-slots'] : ['e-time-slots', cls.TIME_CELLS_CLASS];\n            r.workDays = _this.parent.activeViewOptions.workDays;\n            return r;\n        };\n        var timeSlotData = this.getTimeSlotRows(handler);\n        var slots = [];\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var data = dateSlots_1[_i];\n            data.colSpan = timeSlotData.length;\n            var tempTimeSlots = extend([], timeSlotData, null, true);\n            for (var _a = 0, tempTimeSlots_1 = tempTimeSlots; _a < tempTimeSlots_1.length; _a++) {\n                var slot = tempTimeSlots_1[_a];\n                slot.date = new Date(+resetTime(data.date) + getDateInMs(slot.date));\n                slots.push(slot);\n            }\n        }\n        return slots;\n    };\n    TimelineViews.prototype.changeCurrentTimePosition = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var left = this.getLeftFromDateTime(currentDateIndex, new Date());\n        var height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n        var headerWrap = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var contentWrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentWrap.appendChild(createElement('div', {\n            className: cls.CURRENT_TIMELINE_CLASS,\n            styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n        }));\n        if (this.parent.virtualScrollModule) {\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var element = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n            setStyleAttribute(timeIndicator, {\n                transform: element.style.transform\n            });\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(new Date()),\n            className: cls.CURRENT_TIME_CLASS\n        });\n        headerWrap.appendChild(currentTimeEle);\n        currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - (currentTimeEle.offsetWidth / 2));\n    };\n    TimelineViews.prototype.getLeftFromDateTime = function (currentDateIndex, date) {\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var diffInDates = 0;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        if (!isNullOrUndefined(currentDateIndex)) {\n            var end = (endHour.getHours() === 0) ? 24 : endHour.getHours();\n            if (currentDateIndex[0] !== 0) {\n                diffInDates = (currentDateIndex[0]) * ((end - startHour.getHours()) * 60) + (endHour.getMinutes() - startHour.getMinutes());\n            }\n            diffInMinutes = diffInDates + diffInMinutes;\n        }\n        return (diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    TimelineViews.prototype.getWorkCellWidth = function () {\n        return this.element.querySelector('.e-work-cells').offsetWidth;\n    };\n    TimelineViews.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    TimelineViews.prototype.createAllDayRow = function (table, tdData) {\n        // For current time indicator wrapper\n    };\n    TimelineViews.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        var index = this.parent.getIndexOfDate(this.renderDates, resetTime(new Date()));\n        if (index >= 0) {\n            currentDateIndex.push(index);\n        }\n        return currentDateIndex;\n    };\n    TimelineViews.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            tr.appendChild(resTd);\n        }\n        var workTd = createElement('td');\n        var wrap = this.renderContentArea();\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    TimelineViews.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineViews.prototype.getResourceTdData = function (i, tdData) {\n        var resLevel = this.parent.resourceBase.renderedResources[i];\n        var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n        var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n        tdData.startHour = this.parent.globalize.parseDate(resSHr, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        tdData.endHour = this.parent.globalize.parseDate(resEHr, { skeleton: 'Hm', calendar: this.parent.getCalendarMode() });\n        tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n        tdData.className = resLevel.className;\n        tdData.groupIndex = resLevel.groupIndex;\n        tdData.groupOrder = resLevel.groupOrder;\n        return tdData;\n    };\n    TimelineViews.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n    };\n    TimelineViews.prototype.getContentRows = function () {\n        var rows = [];\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var trCount = this.getRowCount();\n        for (var i = 0; i < trCount; i++) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    tdData = this.getResourceTdData(i, tdData);\n                }\n                var ntd = this.createContentTd(tdData, tdData, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n        }\n        return rows;\n    };\n    TimelineViews.prototype.getContentTdClass = function (r) {\n        return (r.first || !this.parent.activeViewOptions.timeScale.enable) ? [cls.WORK_CELLS_CLASS] :\n            [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    TimelineViews.prototype.renderEvents = function () {\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var appointment = new TimelineEvent(this.parent, 'hour');\n            appointment.renderAppointments();\n        }\n        else {\n            var appointment = new TimelineEvent(this.parent, 'day');\n            appointment.renderAppointments();\n        }\n    };\n    TimelineViews.prototype.getModuleName = function () {\n        return 'timelineViews';\n    };\n    return TimelineViews;\n}(VerticalView));\nexport { TimelineViews };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, createElement, formatUnit } from '@syncfusion/ej2-base';\nimport { Month } from './month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport { TimelineHeaderRow } from './timeline-header-row';\n/**\n * timeline month view\n */\nvar TimelineMonth = /** @class */ (function (_super) {\n    __extends(TimelineMonth, _super);\n    /**\n     * Constructor for timeline month view\n     */\n    function TimelineMonth(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-month-view';\n        _this.isInverseTableSelect = true;\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    TimelineMonth.prototype.getModuleName = function () {\n        return 'timelineMonth';\n    };\n    TimelineMonth.prototype.onDataReady = function (args) {\n        var appointment = new TimelineEvent(this.parent, 'day');\n        appointment.renderAppointments();\n    };\n    TimelineMonth.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineMonth.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineMonth.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n        content.style.height = formatUnit(height);\n    };\n    TimelineMonth.prototype.getDateSlots = function (renderDates, workDays) {\n        var dateSlots = [];\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: col, type: 'dateHeader', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    TimelineMonth.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n    };\n    TimelineMonth.prototype.renderContent = function () {\n        var contentTr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            contentTr.appendChild(resTd);\n        }\n        var contentTd = createElement('td');\n        this.element.querySelector('tbody').appendChild(contentTr);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        wrap.appendChild(this.renderContentArea());\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        contentTd.appendChild(wrap);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        contentTr.appendChild(contentTd);\n    };\n    TimelineMonth.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineMonth.prototype.getContentSlots = function () {\n        var slotDatas = [];\n        for (var row = 0; row < this.getRowCount(); row++) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var data = _a[_i];\n                data.className = [cls.WORK_CELLS_CLASS];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    var resLevel = this.parent.resourceBase.renderedResources[row];\n                    data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n                    data.className = data.className.concat(resLevel.className);\n                    data.groupIndex = resLevel.groupIndex;\n                    data.groupOrder = resLevel.groupOrder;\n                }\n                var slotData = {\n                    date: new Date(+data.date), colSpan: data.colSpan, groupIndex: data.groupIndex, workDays: data.workDays,\n                    type: 'monthCells', className: data.className\n                };\n                if (!slotDatas[row]) {\n                    slotDatas[row] = [];\n                }\n                slotDatas[row].push(slotData);\n            }\n        }\n        return slotDatas;\n    };\n    TimelineMonth.prototype.updateClassList = function () {\n        // No need to update content for timeline month view\n    };\n    TimelineMonth.prototype.unwireEvents = function () {\n        EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    };\n    TimelineMonth.prototype.getMonthStart = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    TimelineMonth.prototype.getMonthEnd = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return this.parent.calendarUtil.lastDateOfMonth(util.addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    };\n    TimelineMonth.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        colLevels.push(level);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            colLevels = renderGn.generateColumnLevels(level, hourSlots);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    return TimelineMonth;\n}(Month));\nexport { TimelineMonth };\n","import { Workbook } from '@syncfusion/ej2-excel-export';\nimport { extend } from '@syncfusion/ej2-base';\n/**\n * Excel Export Module\n */\nvar ExcelExport = /** @class */ (function () {\n    function ExcelExport(parent) {\n        this.parent = parent;\n    }\n    ExcelExport.prototype.initializeExcelExport = function (excelExportOptions) {\n        var _this = this;\n        var exportFields = excelExportOptions.fields || Object.keys(this.parent.eventFields).map(function (field) {\n            return _this.parent.eventFields[field];\n        });\n        var exportName = excelExportOptions.fileName || 'Schedule';\n        var exportType = excelExportOptions.exportType || 'xlsx';\n        var isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n        var eventCollection;\n        if (excelExportOptions.customData) {\n            eventCollection = !isIncludeOccurrences ? excelExportOptions.customData :\n                this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n        }\n        else {\n            eventCollection = (!isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed);\n        }\n        this.processWorkbook(exportFields, exportName, exportType, eventCollection);\n    };\n    ExcelExport.prototype.processWorkbook = function (fields, name, type, eventCollection) {\n        var _this = this;\n        var columns = [];\n        var rows = [];\n        var columnHeader = [];\n        fields.forEach(function (field, i) { return columns.push({ index: i + 1, width: (field === 'Id' ? 20 : 150) }); });\n        var style = { fontSize: 12, borders: { color: '#E0E0E0' }, bold: true };\n        fields.forEach(function (field, i) { return columnHeader.push({ index: i + 1, value: field, style: style }); });\n        rows.push({ index: 1, cells: columnHeader });\n        var i = 2;\n        var _loop_1 = function (event_1) {\n            var columnData = [];\n            fields.forEach(function (field, n) {\n                var columnRule = { index: n + 1, value: event_1[field || ''] };\n                if (field === _this.parent.eventFields.startTime || field === _this.parent.eventFields.endTime) {\n                    var styleRule = { fontSize: 12, numberFormat: 'm/d/yyyy h:mm AM/PM' };\n                    columnRule = extend({}, columnRule, { style: styleRule }, true);\n                }\n                columnData.push(columnRule);\n            });\n            rows.push({ index: i, cells: columnData });\n            i++;\n        };\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_1 = eventCollection_1[_i];\n            _loop_1(event_1);\n        }\n        var workSheet = [{ columns: columns, rows: rows }];\n        var book = new Workbook({ worksheets: workSheet }, type, this.parent.locale);\n        book.save(name + '.' + type);\n    };\n    ExcelExport.prototype.getModuleName = function () {\n        return 'excelExport';\n    };\n    ExcelExport.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import { extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getDateFromRecurrenceDateString, getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\nimport { Timezone } from '../timezone/timezone';\n/**\n * ICalendar Export Module\n */\nvar ICalendarExport = /** @class */ (function () {\n    function ICalendarExport(parent) {\n        this.parent = parent;\n        this.timezone = new Timezone();\n    }\n    ICalendarExport.prototype.initializeCalendarExport = function (fileName) {\n        var _this = this;\n        var eventsData = extend([], this.parent.eventsData, null, true);\n        eventsData = this.parent.eventBase.sortByTime(eventsData);\n        var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n        var iCalendarEvents = [];\n        var filterCollection = [];\n        var timeZone = this.parent.timezone || this.timezone.getLocalTimezoneName();\n        var fields = this.parent.eventFields;\n        eventsData.forEach(function (eventObj) {\n            var uId = _this.parent.eventBase.generateGuid();\n            var editedExDate = [];\n            if (eventObj[fields.recurrenceID]) {\n                var filter = _this.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n                uId = filter[0].UID;\n            }\n            if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n                var exceptionDateList = void 0;\n                var exDate = (eventObj[fields.recurrenceException]).split(',');\n                var editedObj = _this.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n                editedObj.forEach(function (edited) {\n                    editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n                });\n                exceptionDateList = exDate.filter(function (value) { return (editedExDate.indexOf(value) === -1); });\n                eventObj[fields.recurrenceException] = (exceptionDateList.length > 0) ? (exceptionDateList.join(',') + ',') : '';\n            }\n            var startZone = (eventObj[fields.startTimezone] || timeZone);\n            var endZone = (eventObj[fields.endTimezone] || timeZone);\n            var calendarEvent = [\n                'BEGIN:VEVENT',\n                'DTEND;TZID=\"' + endZone + '\":' + _this.convertDateToString(eventObj[fields.endTime]),\n                'DTSTART;TZID=\"' + startZone + '\":' + _this.convertDateToString(eventObj[fields.startTime]),\n                'LOCATION:' + (eventObj[fields.location] || ''),\n                'SUMMARY:' + (eventObj[fields.subject] || ''),\n                'UID:' + uId,\n                'DESCRIPTION:' + (eventObj[fields.description] || ''),\n                'END:VEVENT'\n            ];\n            if (eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n            }\n            if (eventObj[fields.recurrenceException]) {\n                var exDate = eventObj[fields.recurrenceException].split(',');\n                for (var i = 0; i < exDate.length - 1; i++) {\n                    calendarEvent.splice(5, 0, 'EXDATE:' +\n                        _this.convertDateToString(getDateFromRecurrenceDateString(exDate[i])));\n                }\n            }\n            if (eventObj[fields.recurrenceID]) {\n                calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            var customFields = _this.customFieldFilter(eventObj, fields);\n            if (customFields.length > 0) {\n                customFields.forEach(function (customField) {\n                    return calendarEvent.splice(4, 0, customField + ':' + (eventObj[customField] || ''));\n                });\n            }\n            var app = extend({}, eventObj);\n            app.UID = uId;\n            filterCollection.push(app);\n            iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n        });\n        var iCalendar = [\n            'BEGIN:VCALENDAR',\n            'PRODID:-//Syncfusion Inc//Scheduler//EN',\n            'VERSION:2.0',\n            'CALSCALE:GREGORIAN',\n            'METHOD:PUBLISH',\n            'X-WR-CALNAME:' + (fileName || 'Calendar'),\n            'X-WR-TIMEZONE:' + timeZone,\n        ].join(SEPARATOR);\n        var icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n        this.download(icsString, fileName);\n    };\n    ICalendarExport.prototype.customFieldFilter = function (eventObj, fields) {\n        var defaultFields = Object.keys(fields).map(function (key) { return fields[key]; });\n        var eventFields = Object.keys(eventObj);\n        return eventFields.filter(function (value) { return (defaultFields.indexOf(value) === -1) && (value !== 'Guid'); });\n    };\n    ICalendarExport.prototype.convertDateToString = function (eventDate) {\n        var year = ('0000' + (eventDate.getFullYear().toString())).slice(-4);\n        var month = ('00' + ((eventDate.getMonth() + 1).toString())).slice(-2);\n        var date = ('00' + ((eventDate.getDate()).toString())).slice(-2);\n        var hours = ('00' + (eventDate.getHours().toString())).slice(-2);\n        var minutes = ('00' + (eventDate.getMinutes().toString())).slice(-2);\n        var seconds = ('00' + (eventDate.getSeconds().toString())).slice(-2);\n        var timeString = year + month + date + 'T' + hours + minutes + seconds;\n        return timeString;\n    };\n    ICalendarExport.prototype.download = function (icsString, fileName) {\n        var buffer = new Blob([icsString], { type: 'data:text/calendar;charset=utf8' });\n        fileName = (fileName || 'Calendar') + '.ics';\n        if (!(!navigator.msSaveBlob)) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            var downloadLink_1 = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            downloadLink_1.download = fileName;\n            downloadLink_1.href = URL.createObjectURL(buffer);\n            var event_1 = document.createEvent('MouseEvent');\n            event_1.initEvent('click', true, true);\n            downloadLink_1.dispatchEvent(event_1);\n            setTimeout(function () {\n                URL.revokeObjectURL(downloadLink_1.href);\n                downloadLink_1.href = undefined;\n            });\n        }\n    };\n    ICalendarExport.prototype.filterEvents = function (data, field, value) {\n        return new DataManager({ json: data }).executeLocal(new Query().where(field, 'equal', value));\n    };\n    /**\n     * Get module name.\n     */\n    ICalendarExport.prototype.getModuleName = function () {\n        return 'iCalendarExport';\n    };\n    /**\n     * To destroy the ICalendarExport.\n     * @return {void}\n     * @private\n     */\n    ICalendarExport.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.timezone) {\n            this.timezone = null;\n        }\n    };\n    return ICalendarExport;\n}());\nexport { ICalendarExport };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\n/**\n * ICalendar Import Module\n */\nvar ICalendarImport = /** @class */ (function () {\n    function ICalendarImport(parent) {\n        this.allDay = false;\n        this.parent = parent;\n    }\n    ICalendarImport.prototype.initializeCalendarImport = function (fileContent) {\n        var _this = this;\n        var fileReader = new FileReader();\n        fileReader.onload = function (event) {\n            var iCalString = fileReader.result;\n            _this.iCalendarParser(iCalString);\n        };\n        fileReader.readAsText(fileContent);\n    };\n    ICalendarImport.prototype.iCalendarParser = function (iCalString) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var events = [];\n        var uId = 'UID';\n        var calArray = iCalString.replace(new RegExp('\\\\r', 'g'), '').split('\\n');\n        var isEvent = false;\n        var curEvent = null;\n        var id = this.parent.eventBase.getEventMaxID();\n        calArray.forEach(function (element) {\n            var index;\n            var type;\n            var value;\n            if (!isEvent && element === 'BEGIN:VEVENT') {\n                isEvent = true;\n                curEvent = {};\n            }\n            if (isEvent && element === 'END:VEVENT') {\n                isEvent = false;\n                events.push(curEvent);\n                curEvent = null;\n            }\n            if (isEvent) {\n                index = element.indexOf(':');\n                type = element.substr(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                value = element.substr(index + 1, element.length - (index + 1)).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                if (element.indexOf('SUMMARY') !== -1) {\n                    type = 'SUMMARY';\n                }\n                if (element.indexOf('DTSTART') !== -1) {\n                    curEvent[fields.startTime] = _this.dateParsing(element);\n                    curEvent[fields.isAllDay] = _this.allDay;\n                    _this.allDay = false;\n                }\n                else if (element.indexOf('DTEND') !== -1) {\n                    curEvent[fields.endTime] = _this.dateParsing(element);\n                }\n                else if (element.indexOf('EXDATE') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = (isNullOrUndefined(curEvent[fields.recurrenceException])) ?\n                        value : curEvent[fields.recurrenceException] + ',' + value;\n                }\n                else if (element.indexOf('RECURRENCE-ID') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = value;\n                    curEvent[fields.recurrenceID] = value;\n                }\n                else {\n                    switch (type) {\n                        case 'BEGIN':\n                            break;\n                        case 'UID':\n                            curEvent[uId] = value;\n                            curEvent[fields.id] = id++;\n                            break;\n                        case 'SUMMARY':\n                            curEvent[fields.subject] = value;\n                            break;\n                        case 'LOCATION':\n                            curEvent[fields.location] = value;\n                            break;\n                        case 'DESCRIPTION':\n                            curEvent[fields.description] = value;\n                            break;\n                        case 'RRULE':\n                            curEvent[fields.recurrenceRule] = value;\n                            break;\n                        default:\n                            curEvent[type] = value;\n                    }\n                }\n            }\n        });\n        var app = extend([], events, null, true);\n        this.parent.addEvent(this.processOccurrence(app));\n    };\n    ICalendarImport.prototype.processOccurrence = function (app) {\n        var appoint = [];\n        var uId = 'UID';\n        var fields = this.parent.eventFields;\n        app.forEach(function (eventObj) {\n            var parentObj;\n            var id;\n            if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                parentObj = eventObj;\n                id = eventObj[fields.id];\n            }\n            var data = (new DataManager({ json: app }).executeLocal(new Query().where('UID', 'equal', eventObj[uId])));\n            if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n                for (var i = 0; i < data.length; i++) {\n                    if (data[i].hasOwnProperty(fields.recurrenceID)) {\n                        var exdate = data[i][fields.recurrenceID];\n                        data[i][fields.recurrenceID] = id;\n                        data[i][fields.recurrenceException] = null;\n                        parentObj[fields.recurrenceException] = (isNullOrUndefined(parentObj[fields.recurrenceException])) ?\n                            exdate : parentObj[fields.recurrenceException] + ',' + exdate;\n                        appoint.push(data[i]);\n                    }\n                }\n                appoint.push(parentObj);\n            }\n            else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                appoint.push(eventObj);\n            }\n        });\n        return appoint;\n    };\n    ICalendarImport.prototype.getDateString = function (value) {\n        value = value || '';\n        return (value\n            .replace(/\\\\\\,/g, ',')\n            .replace(/\\\\\\;/g, ';')\n            .replace(/\\\\[nN]/g, '\\n')\n            .replace(/\\\\\\\\/g, '\\\\'));\n    };\n    ICalendarImport.prototype.dateParsing = function (element) {\n        var expression = /([^':;]+)((?:;(?:[^':;]+)(?:=(?:(?:'[^']*')|(?:[^':;]+))))*):(.*)/;\n        var split = (element.match(expression)).slice(1);\n        var value = split[split.length - 1];\n        var newDate = new Date(this.getDateString(value));\n        if (element && element.indexOf('VALUE=DATE') > -1) {\n            var data_1 = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n            if (data_1 !== null) {\n                newDate = new Date(parseInt(data_1[1], 10), parseInt(data_1[2], 10) - 1, parseInt(data_1[3], 10));\n            }\n            if (element.indexOf('DTSTART') > -1) {\n                this.allDay = true;\n            }\n        }\n        var data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n        if (data !== null) {\n            if (data[7] === 'Z') {\n                newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n            }\n            else {\n                newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n            }\n        }\n        return newDate;\n    };\n    /**\n     * Get module name.\n     */\n    ICalendarImport.prototype.getModuleName = function () {\n        return 'iCalendarImport';\n    };\n    /**\n     * To destroy the ICalendarImport.\n     * @return {void}\n     * @private\n     */\n    ICalendarImport.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n    };\n    return ICalendarImport;\n}());\nexport { ICalendarImport };\n"],"names":["getElementHeightFromClass","container","elementClass","height","el","createElement","className","cloneNode","style","visibility","position","appendChild","getOuterHeight","remove","getTranslateY","element","getComputedStyle","window","WebKitCSSMatrix","webkitTransform","m42","getWeekFirstDate","date1","firstDayOfWeek","date","Date","getTime","getDay","setDate","getDate","firstDateOfMonth","getFullYear","getMonth","lastDateOfMonth","dt","getWeekNumber","currentDate","valueOf","a","Math","ceil","MS_PER_DAY","setTime","time","tzOffsetBefore","getTimezoneOffset","d","tzOffsetDiff","MS_PER_MINUTE","resetTime","setHours","getDateInMs","addDays","i","addMonths","day","setMonth","min","getMaxDays","addYears","setFullYear","getStartEndHours","startHour","endHour","getHours","setMinutes","getMinutes","setSeconds","getSeconds","date2","getDaysCount","startDate","endDate","strTime","getDateFromString","indexOf","parseInt","match","toString","replace","getScrollBarWidth","scrollWidth","divNode","value","cssText","document","body","offsetWidth","clientWidth","removeChild","findIndexInData","data","property","length_1","length","offsetHeight","marginTop","marginBottom","generateSummary","rule","localeObject","locale","calendarType","cldrObj","cldrObj1","ruleObject","extractObjectFromRule","summary","getConstant","EVERY","calendarMode","toLowerCase","getValue","getDefaultDateObject","cldrData","interval","freq","DAYS","WEEKS","ON","forEach","index","DAYINDEXOBJECT","MONTHS","getMonthSummary","YEARS","month","count","TIMES","until","tempDate","UNTIL","localeObj","monthDay","pos","setPosition","WEEKPOS","generate","excludeDate","startDayOfWeek","maximumCount","viewDate","MAXOCCURRENCE","cacheDate","calendarUtil","getCalendarUtil","modifiedDate","tempViewDate","maxOccurrence","setFirstDayOfWeek","DAYINDEX","tempExcludeDate","isNullOrUndefined","split","content","parsedDate","getDateFromRecurrenceDateString","push","dailyType","weeklyType","monthlyType","yearlyType","recDateString","substr","excludeDateHandler","zeroIndex","expectedCount","expectedDays","compareDates","validateRules","wkstIndex","weekState","weekCollection","wkst","dayIndex","startDateDiff","weekendDate","compareTempDate","insertDataCollection","getStartDateForWeek","validateMonthlyRuleType","monthlyDayTypeProcessforMonthFreq","monthlyDayTypeProcess","monthlyDateTypeProcessforMonthFreq","monthlyDateTypeProcess","checkYearlyType","processWeekNo","processYearDay","firstWeekSpan","weekNo","maxDate","minDate","stDate","getYearLastDate","weekNos","insertDateCollection","state","insertDatasIntoExistingCollection","dateCollection","yearDay","getLeapYearDaysCount","isLeapYear","getYearDaysCount","initializeRecRuleVariables","ruleData","monthCollection","mainDate","monthInit","currentMonthDate","getMonthStartDate","isSameYear","checkMonth","setValidDate","processDateCollectionForByMonthDay","beginDate","setNextValidDate","isLastMonth","recRuleVariables","isByMonth","getMonthDaysCount","validateProperDate","monthData","getMonthCollection","dates","map","item","HASNUMBER","test","j","expectedDaysArray","SPLITNUMBERANDSTRING","isSameMonth","isNaN","filterDateCollectionByIndex","insertDateCollectionBasedonBySetPos","dayCycleData","processWeekDays","initialDate","datas","week","row","insertDateCollectionBasedonIndex","isHavingNumber","processDateCollectionforByDayWithInteger","compareMonth","newstr","getDayString","getRecurrenceCollection","recurrenceCollectionObject","expectedDaysArrays","arrPosition","getDateCollectionforBySetPosNull","recurrenceCollections","dayData","chDate","sort","REMOVENUMBERINSTRING","checkDayIndex","sortedExpectedDays","expectedDaysNumberSplit","expectedDaysArr","rules","temp","validRules","splitData","Number","splice","dayCycle","startIndex","checkDate","expectedDate","slice","shift","checkYear","expectedyearDay","getYearDay","startDateCollection","diff","rotate","days","expectedMonth","getExpectedDays","Islamic","Gregorian","getRecurrenceStringFromDate","getUTCFullYear","roundDateValues","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","join","dataReady","scrollUiUpdate","ROOT","ICON","TABLE_CONTAINER_CLASS","CONTENT_TABLE_CLASS","POPUP_OPEN","APPOINTMENT_CONTAINER_CLASS","TEXT_ELLIPSIS","FORM_CLASS","EVENT_TOOLTIP_ROOT_CLASS","HeaderRenderer","parent","this","l10n","renderHeader","addEventListener","prototype","on","closeHeaderPopup","removeEventListener","off","e","closestEle","closest","event","target","hideHeaderPopup","headerPopup","hide","toolbarEle","insertBefore","firstElementChild","renderToolbar","args","requestType","items","getItems","trigger","toolbarObj","Toolbar","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","appendTo","querySelector","prevNavEle","firstChild","setAttribute","nextNavEle","updateActiveView","updateItems","dataBind","getPopUpRelativeElement","isAdaptive","setDayOfWeek","headerCalendar","setCalendarDate","getCalendarView","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","querySelectorAll","removeClass","viewIndex","addClass","updateDateRange","text","innerHTML","refreshOverflow","getDateRangeText","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","showInPopup","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","aria-label","suffixIcon","aria-atomic","aria-live","showAlwaysInPopup","views","type","_i","_a","getItemObject","option","displayName","viewName","view","renderHeaderPopup","headerPopupEle","headerCalendarEle","Popup","actionOnScroll","targetType","relateTo","X","Y","Calendar","change","calendarChange","changeDate","calculateViewIndex","originalEvent","call","classList","contains","cls.POPUP_OPEN","show","changeView","undefined","isSelectedDate","util.resetTime","activeView","getNextPreviousDate","isSameTime","activeCellsData","startTime","endTime","activeViewOptions","timeScale","slotCount","msInterval","util.MS_PER_MINUTE","round","setMilliseconds","getMilliseconds","isAllDay","eventWindow","openEditor","extend","cancel","toolbarPopUp","ej2_instances","name","duration","getHeaderElement","updateHeaderItems","classType","dateRangeEle","cls.TEXT_ELLIPSIS","getModuleName","destroy","isDestroyed","Scroll","setWidth","width","formatUnit","setHeight","setDimensions","onPropertyChanged","cssProperties","getCssProperties","module","notify","ScheduleTouch","cls.TABLE_CONTAINER_CLASS","touchObj","Touch","scroll","scrollHandler","swipe","swipeHandler","tapHold","tapHoldHandler","swipeSettings","swipeThresholdDistance","EventHandler","add","onTransitionEnd","touchLeftDirection","touchRightDirection","uiStateValues","action","timeStampStart","now","scrollDirection","scrollDiv","isScrollTriggered","preventDefault","stopPropagation","nextPanel","renderPanel","getPanel","x","distanceX","transform","getTranslateX","prevWidth","previousPanel","swipeDirection","offsetDist","Browser","isDevice","swapPanels","transitionDuration","confirmSwipe","cancelSwipe","quickPopup","tapHoldEventPopup","clsName","nextPrevType","currentPanel","setProperties","getRenderDates","renderLayout","direction","navArgs","previousDate","setPanel","translateX","offsetLeft","headerModule","renderModule","refreshDataManager","generateColumnLevels","m41","resetValues","KeyboardInteraction","selectedCells","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDownArrow","shiftUpArrow","shiftRightArrow","shiftLeftArrow","ctrlLeftArrow","ctrlRightArrow","altOne","altTwo","altThree","altFour","altFive","altSix","enter","escape","delete","home","pageUp","pageDown","tab","shiftTab","tabIndex","keyboardModule","KeyboardEvents","keyAction","keyActionHandler","eventName","processDown","shiftKey","processUp","processLeft","processRight","focus","processViewNavigation","processEnter","focusFirstCell","processTab","processDelete","processEscape","onCellMouseDown","initialTarget","getClosestCell","readonly","getContentTable","onMouseSelection","onMoveup","allDayRow","getAllDayRow","selectionEdges","boundaryValidation","pageY","pageX","bottom","top","left","right","parent_1","yInBounds","scrollHeight","scrollTop","xInBounds","scrollLeft","selectCells","isPreventAction","click","getCellDetails","end","getAttribute","getNavigateView","getCells","isInverseTable","tableEle","cells","maxRow","rows","maxColumn","endIndex","inverseCells","focusCell","eventBase","removeSelectedAppointmentClass","isTimelineView","cell","cls.CONTENT_TABLE_CLASS","getWorkCellElements","isInverseTableSelect","isMultiple","targetCell","removeSelectedClass","Array","initialId","group","resources","resourceSelectedCells","allDayCells","getAllDayCells","resourceAllDayCells","concat","addSelectedClass","selectAppointment","isReverse","appointments","getAppointmentElements","nextAppEle","targetIndex","addSelectedAppointments","selectAppointmentElementFromWorkCell","_this","appointmentElements_1","getUniqueAppointmentElements","filteredElements_1","selectedDate_1","eventsProcessed","filter","eventObject","eventFields","JSON","stringify","Guid","selectedElement","focusElements","getAppointmentElementsByGuid","startCell","endCell","util.MS_PER_DAY","cellIndex","guid","appointmentElements","self","getWorkCellFromAppointmentElement","selectedObject","getEventByGuid","selectWorkCellByTime","key","viewCollections","selectedElements","getSelectedElements","selectedEventElements","getSelectedAppointments","moreEventWrapper","quickPopupWrapper","getQuickPopupElement","tableRows","getTableRows","curRowIndex","parentElement","processLeftRight","parentNode","sectionRowIndex","rowIndex","columnIndex","maxIndex","isCancelLeftRightAction","selectedAppointments","calculateNextPrevDate","curColIndex","maxColIndex","allDayRow_1","allDayRow_2","currentCell","nextPrevDate","getFocusableElements","processTabOnPopup","popupElement","focusableElements","firstEle","footerEle","offsetParent","lastEle","activeElement","popupWrapper","cls.ROOT","activeEventData","getSelectedEvents","deleteClick","onClosePopup","morePopup","Data","dataSource","query","initDataManager","dataManager","DataManager","Query","generateQuery","clone","addParams","toISOString","getData","executeQuery","Timezone","offset","timezone","localOffset","convertedDate","toLocaleString","timeZone","error","convert","fromOffset","toOffset","fromLocalOffset","toLocalOffset","removeLocalOffset","getLocalTimezoneName","Intl","DateTimeFormat","resolvedOptions","timezoneData","Value","Text","isMonthStart","getMonthEndDate","dateObj","monthValue","months","year","hDate","HijriParser","getHijriDate","toGregorian","gDate","getDaysInMonth","finalGDate","finalHDate","firstDate","lastDate","updateDateObj","currentHijri","tempHijri","hDate1","SU","MO","TU","WE","TH","FR","SA","EventBase","slots","processData","events","timeZonePropChanged","oldTimezone","fields","processed","generateID","id","events_1","event_1","util.getDateFromString","processTimezoneChange","processTimezone","recurrenceRule","recurrenceID","generateOccurrence","generateGuid","eventData","isBlock","filterEvents","blockData","eventObj","util.addDays","blockProcessed","getProcessedEvents","eventCollection","eventsData","event_2","timezonePropertyChange","event.dataReady","processedData","timezoneConvert","startTimezone","endTimezone","startTz","endTz","zone","filterBlockEvents","resourceData","eStart","eEnd","getGroupIndexFromEvent","resourceBase","lastResourceLevel","resourceTdData","fieldMapping","predicate","Predicate","and","or","json","executeLocal","where","filterEventsByResource","sortByTime","filterEventsByRange","filteredEvents","resourceCollection","level","operator","allowGroupEdit","allowMultiple","tempPredicate","field","groupOrder","b","d1","d2","sortByDateTime","object1","object2","d3","d4","d5","d6","getSmallestMissingNumber","array","large","max","apply","splitEventByDay","eventStartTime","eventEndTime","eventLength","util.getDaysCount","app","isSpanned","splitEvent","dateRender","util.getDateInMs","orgStart","orgEnd","ranges","cStart","slot","firstSlot","byDate","showWeekend","hasBreak","isLeft","isRight","cloneEventObject","dateInRange","availSlot","availSlot_1","slot_1","getSelectedEventElements","focusElements_1","eventSelect","elementSelect","selectedAppointments_1","cells_1","focusElement","selectedCell","keyboardInteractionModule","nearestTime","isAllDayAppointment","targetArea","queryString","groupIndex","resource","order","resIndex","isFullDay","appointmentBorderRemove","wireAppointmentEvents","isReadOnly","isReadonly","eventClick","eventDoubleClick","resizeModule","wireResizeEvent","dragAndDropModule","wireDragEvent","renderResizeHandler","spanEvent","allowResizing","Object","keys","resizeEdge","resizeHandler","prepend","append","isTop","isBottom","raiseClickEvent","ctrlKey","which","target_1","quickPopupHide","currentAction","openRecurrenceAlert","c","r","random","getEventIDType","getEventMaxID","resourceId","eventId","idType","uniqueID","maxId","obj","occurrenceCollection","currentViewDate","eventRule","recurrenceException","generatedDates","clonedObject","getRecurrenceEvent","getOccurrencesByID","event_3","getOccurrencesByRange","event_4","applyResourceColor","alpha","color","getResourceColor","substring","createBlockAppointmentElement","record","templateElement","eventSubject","subject","eventSettings","default","appointmentWrapper","attrs","data-id","aria-readonly","aria-selected","eventTemplate","getAppointmentTemplate","setWrapperAttributes","getReadonlyAttribute","isBlockRange","isBlockAlert","dataCol","dataCol_1","Crud","getQuery","dataModule","getTable","fromTable","refreshData","actionArgs","offline","promise","then","catch","addEvent","openValidationError","editParms","addedRecords","changedRecords","deletedRecords","processCrudTimezone","saveChanges","insert","crudArgs","saveEvent","update","parentEvent","getParentEvent","occurrence","edited","exDate","excludeDateCheck","delApp","isIgnoreOccurrence","delApp_1","deleteEvent","dataObj","normalEvent","recEvent","_b","normalEvent_1","_c","recEvent_1","_d","delApp_2","event_5","exceptionDateList","FieldValidator","renderFormValidator","form","formObj","FormValidator","customPlacement","inputElement","errorPlacement","validationComplete","elem","inputName","display","status","createTooltip","dlgContent","client","inputClient","getBoundingClientRect","div","styles","arrow","destroyToolTip","elements_1","reset","QuickPopups","isMultipleEventSelect","crudAction","fieldValidator","render","renderQuickPopup","renderMorePopup","renderQuickDialog","cls.POPUP_WRAPPER_CLASS","open","quickPopupOpen","close","quickPopupClose","hideAnimation","showAnimation","collision","viewPortElement","zIndex","moreEventPopup","cls.MORE_POPUP_WRAPPER_CLASS","morePopupOpen","morePopupClose","closeButton","renderButton","cls.ICON","closeClick","navigationClick","quickDialog","Dialog","animationSettings","effect","buttons","buttonModel","isPrimary","dialogButtonClick","closeOnEscape","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","visible","dialogElement","okButton","cancelButton","iconName","isDisabled","clickEvent","Button","disabled","iconCss","quickDialogClass","applyFormValidation","cls.FORM_CLASS","validation","editDeleteOnly","editDeleteSeries","header","showQuickDialog","openRecurrenceValidationAlert","dialogCancel","openDeleteAlert","popupType","eventProp","createMoreEventList","moreEventContentEle","moreEventWrapperEle","eventCollection_1","eventText","appointmentEle","data-guid","role","tabindex","aria-grabbed","iconClass","eventTitle","closeIcon","editIcon","editClick","deleteIcon","beforeQuickPopupOpen","isCellBlocked","tempObj","setResourceValues","cellClick","showQuickInfo","targetEle","newEventClone","subjectElement_1","cellDetails","getFormattedString","quickCellPopup","templateArgs","elementType","quickInfoTemplates","getQuickInfoTemplatesHeader","headerTemplate","getQuickInfoTemplatesContent","tempStr","details","getResourceText","contentTemplate","footer","getQuickInfoTemplatesFooter","footerTemplate","subjectElement","Input","createInput","properties","placeholder","moreButton","detailsClick","saveButton","saveClick","isSameEventClick","editButton","eventTooltip","updateTapHoldEventPopup","quickEventPopup","getRecurrenceSummary","location","getTimezone","description","deleteButton","resourceValue","resourceCollection_1","resourceIndex_1","eventData_1","idField","textField","lastResource_1","isArray","resNames_1","lastResourceData_1","util.findIndexInData","argsData","resourceDetails","startDateDetails","getDateFormat","endDateDetails","startTimeDetail","getTimeString","endTimeDetail","spanLength","moreEventClick","dateElement","moreEventElements","childNodes","gIndex","tdDate","validate","saveObj","getObjectFromFormData","setDefaultValueToObject","subjectEle","updateMoreEventContent","getDateFromElement","moreElement","eventSave","titleContent","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","charAt","toUpperCase","formatString","skeleton","getDataFromTarget","cellsData","convertToEventData","isEventPopup","destroyButtons","removeAttribute","innerHeight","offsetX","refreshPosition","collide","isCollide","virtualScrollModule","translateY","util.getTranslateY","offsetY","applyEventColor","colorField","colorEle","borderLeftColor","backgroundColor","editElement","moreWrapper","animation","navigateEle","currentTarget","documentClick","removeNewEventElement","removeEventListner","button","instance","EventTooltip","tooltipObj","Tooltip","mouseTrail","showTipPointer","cls.EVENT_TOOLTIP_ROOT_CLASS","getTargets","beforeRender","onBeforeRender","targets","headerTooltipTemplate","enableTooltip","resCollection","getColumnLevels","contentContainer","getHeaderTooltipTemplate","setContent","tooltipTemplate","eventStart","eventEnd","tooltipSubject","tooltipLocation","startMonthDate","startMonthYearDate","endMonthYearDate","tooltipDetails","getEventTooltipTemplate","__extends","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","INPUTWARAPPER","FORMLEFT","ENDONCOUNT","HIDEWRAPPER","PRIMARY","contentType","none","daily","weekly","monthly","yearly","valueData","sun","mon","tue","wed","thu","fri","sat","neverClassList","weekClassList","monthClassList","yearClassList","dailyClassList","noEndClassList","endOnCountClassList","endOnDateClassList","RecurrenceEditor","_super","options","defaultLocale","never","first","second","third","fourth","last","repeat","repeatEvery","onDay","weeks","years","every","summaryTimes","summaryOn","summaryUntil","summaryRepeat","summaryDay","summaryWeek","summaryMonth","summaryYear","monthWeek","monthPosition","monthExpander","yearExpander","repeatInterval","renderStatus","dayButtons","monthButtons","startState","endOn","showFormElement","updateForm","freshOnEndForm","updateEndOnForm","selectMonthDay","updateUntilDate","onMonthDay","checked","preRender","L10n","applyCustomClass","initialize","renderComponent","repeatType","selectedType","getRecurrenceRule","setRecurrenceRule","triggerChangeEvent","resetDayButton","daySelection","rotateArray","rtlClass","untilDateObj","weekday","monthDate","monthWeekDays","monthWeekPos","getDayPosition","endType","renderDropdowns","DropDownList","getRepeatData","floatLabelType","title","resetFormValues","getEndData","popupWidth","getPopupWidth","renderDropDownList","dropDownData","onWeekDay","getMonthPosData","getDayData","getMonthData","setDefaultValue","formelement_1","recurreneElement_1","renderDatePickers","DatePicker","dayButtonRender","btns_1","btn","isToggle","btns","radioButtonRender","RadioButton","label","numericTextboxRender","recurrenceCount","NumericTextBox","setTemplate","positionCollection","frequencies","textValue","monthposValue","weekday_1","fullDay","getSelectedDaysData","RULEBYDAY","elements","getSelectedMonthData","RULEBYMONTHDAY","getIntervalData","RULEINTERVAL","getEndOnCount","RULECOUNT","getYearMonthRuleData","RULEBYMONTH","updateWeekButton","updateMonthUI","updateUI","getUntilData","RULEUNTIL","destroyComponents","resetFields","getRecurrenceDates","RULEFREQ","RULEDAILY","RULEWEEKLY","RULEMONTHLY","RULEYEARLY","endon","removeClasses","getPersistData","addOnPersist","newProp","oldProp","Property","Event","NotifyPropertyChanges","Component","EventWindow","localTimezoneName","renderEventWindow","dialogContent","getEventWindowContent","dialogObject","cls.EVENT_WINDOW_DIALOG_CLASS","beforeOpen","onBeforeOpen","onBeforeClose","eventDelete","dialogClose","refreshRecurrenceEditor","createRecurrenceEditor","isEventData","editorTemplate","cellClickAction","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","getSlotDuration","refreshDateTimePicker","startObj","getInstance","endObj","onsubmit","getDefaultEventWindowContent","getEditorTemplate","parentDiv","createDivElement","titleLocationDiv","titleDiv","renderTextBox","locationDiv","startEndDateTimeDiv","startDateTimeDiv","renderDateTimePicker","onTimeChange","endDateTimeDiv","timezoneParentDiv","startTimezoneDiv","renderDropDown","endTimezoneDiv","allDayTimezoneDiv","allDayDiv","renderCheckBox","timezoneDiv","repeatParentDiv","repeatDiv","repeatEditConainer","buttonObj","REPEAT_BUTTON_ICON_CLASS","cls.DESCRIPTION_CLASS","descriptionDiv","loadRecurrenceEditor","resourceParentDiv","renderResourceDetails","submit","renderRecurrenceEditor","createInputElement","fieldName","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","DateTimePicker","dateFormat","getFormat","getFieldLabel","step","labelValue","resourceDiv","resourceInput","resourceTemplate","MultiSelect","onMultiselectResourceChange","itemTemplate","popupHeight","mode","onDropdownResourceChange","timezoneInput","allowFiltering","onTimezoneChange","filterBarPlaceholder","filtering","updateData","byGroupID","getColumnName","resObject","createInstance","datasource","groupIDField","groupId","filterRes","filterDatasource","resObj","itemData","resValue","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","CheckBox","onChange","repeatStatus","textBoxDiv","textBoxInput","labelText","editorTitles","onAllDayChange","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","repeatSaveDialog","repeatCancelDialog","repeatOpenDialog","repeatRule","repeatStartDate","updateRepeatLabel","closeRepeatDialog","repeatTempRule","showDetails","disableButton","getValidationRule","trimAllDay","formelement","getFormElements","keyNames","curElement","columnName","setValueToElement","setDefaultValueToElement","timezoneObj","cls.TIME_ZONE_CLASS","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","updateDateTime","parseDate","workHours","formatType","timezoneValue","isDisable","saveIcon","resetFormFields","some","tz","len","alert","alertType","formElement","Repeat","isShowAlert","recurrenceValidation","getEventIdFromForm","isResourceEventExpand","resourceSaveEvent","eveId","editedData","editOccurrenceValidation","formElement_1","currentElement","getValueFromElement","alertMessage","recEditor","types","tempDiff","tempvalue","getRecurrenceIndex","recColl","recIndex","currentData","editData","recurColl","recurColl_1","lastResouceData","lastlevel","eventList","this_1","addValues","k","lastResource","groupId_1","index_1","l","eventList_1","formelement_2","VirtualScroll","itemSize","bufferCount","renderedLength","averageRowHeight","virtualScrolling","getRenderedCount","setItemSize","clientHeight","renderVirtualTrack","contentWrap","wrap","expandedResources","updateVirtualScrollHeight","virtual","lastResourceIndex","renderedResources","conTable","children","updateVirtualTrackHeight","resourceCount","resWrap","conWrap","eventWrap","setTranslate","lastRenderIndex","renderedResConut","util.getElementHeightFromClass","timeIndicator","firstTDIndex","upScroll","downScroll","updateContent","events.dataReady","actionObj","navigationWrapper","enableAdaptiveRows","prevSetCollection","getBufferCollection","nextSetResIndex","lastIndex","nextSetCollection","renderedLenth","resourceRows","getContentRows","contentRows","eventRows","getEventRows","setStyleAttribute","Render","isDataRefresh","initializeLayout","dayModule","weekModule","workWeekModule","monthModule","agendaModule","monthAgendaModule","timelineViewsModule","viewClass","timelineMonthModule","firstView","Error","updateLabelText","isGroupAdaptive","enableCompactView","allowVirtualScrolling","getLabelText","dataManagerSuccess","dataManagerFailure","resultData","result","hideSpinner","WorkHours","ChildProperty","TimeScale","QuickInfoTemplates","HeaderRows","FieldOptions","Field","Complex","EventSettings","Group","Resources","ResourceBase","leftPixel","renderResourceHeaderIndent","tr","resColTd","resColDiv","hideResourceRows","tBody","trCount","resData","res","ClassName","expandedField","slicedCollection","Count","createResourceColumn","resColl","resDiv","tbl","createTableLayout","generateTreeData","countCalculation","setExpandedResources","isExpanded","rIndex","resRows","td","ntd","iconDiv","setMargin","onTreeIconClick","setResourceHeaderContent","resourceHeaderTemplate","classCollection","ntr","marginRight","marginLeft","parentCollection","wholeCollection","collection","y","totalCount","z","trElement","eventElements","updateVirtualContent","events.scrollUiUpdate","pNode","rowCollection","workCellCollection","headerRowCollection","clickedRes","cls.APPOINTMENT_CONTAINER_CLASS","clonedCollection","expanded","trElem","expand","sIndex","virtualTrack","resTable","contentTable","eventTable","renderResourceHeader","resourceWrapper","renderResourceHeaderText","menuClick","renderResourceTree","popupOverlay","treeWrapper","cls.RESOURCE_TREE_POPUP","resourceTree","treeViewObj","TreeView","child","nodeTemplate","nodeClicked","resourceClick","expandAll","treePopup","isTimeLine","treeCollection","resTreeColl","resourceTreeLevel","resTree","treeHandler","treeLevel","levelId","treeArgs","resourceName","resourceChild","tree","headerCollection","resourceLevel","resourceText","levelIcon","pop","headerWrapper","treeNodes","node","bindResourcesData","isSetModel","showSpinner","promises","Promise","all","renderElements","setResourceCollection","requiredResources","colorIndex","requiredResources_1","startHourField","endHourField","workDaysField","cssClassField","resourceColorField","generateResourceLevels","innerDates","resTreeGroup","lastColumnDates","prevResource","prevResourceData","prevOrder","dateCol","renderDates","resWorkDays","workDays","resStartHour","resEndHour","getDateSlots","dateSlots","generateCustomHours","resCssClass","slotData","resourceLevelIndex","colSpan","generateHeaderLevels","dateSlots_1","dateSlot","headerDates","headerLevels","currentLevelChilds_1","currentLevelChild","nextLevelChilds_1","nextLevelChild","_e","lastLevelResource","dateHeaderLevels","levels","dateColSpan","_f","_g","datesColumn","_h","headerDates_1","headerDate","resGroup","length_2","_j","_k","resTd","unshift","isCrud","setValues","filterData","getCssClass","getResourceData","groupEditIndex","resourceObj","groupEditIndex_1","length_3","length_4","addResource","length_5","removeResource","length_6","resToolBarEle","Schedule","addClasses","validateDate","eventTooltipTemplateFn","templateParser","editorTemplateFn","quickInfoTemplatesHeaderFn","quickInfoTemplatesContentFn","quickInfoTemplatesFooterFn","createSpinner","scrollModule","initializeDataModule","getActiveViewOptions","initializeResources","isLayoutOnly","initializeView","destroyHeaderModule","showHeaderBar","isTouch","scheduleTouchModule","destroyPopups","initializePopups","unwireEvents","wireEvents","getViewIndex","setViewOptions","isModuleLoad","viewOptions","selectedView","isOptions","isSelected","fieldViewName","currentIndex","enable","majorSlotTemplate","minorSlotTemplate","scheduleOptions","cellTemplate","template","dateHeaderTemplate","showWeekNumber","headerRows","crudModule","initializeTemplates","cellTemplateFn","dateHeaderTemplateFn","majorSlotTemplateFn","minorSlotTemplateFn","appointmentTemplateFn","resourceHeaderTemplateFn","headerTooltipTemplateFn","getDayNames","culShortNames","setCldrTimeFormat","timeFormat","setCalendarMode","muteOnChange","previousView","animateLayout","Animation","timingFunction","animate","requiredModules","modules","member","allowDragAndDrop","Internationalization","isInitial","workWeek","agenda","weekAgenda","workWeekAgenda","monthAgenda","today","noEvents","emptyContainer","allDay","more","noTitle","deleteMultipleEvent","selectedItems","deleteSeries","edit","editSeries","editEvent","createEvent","addTitle","moreDetails","save","editContent","deleteRecurrenceContent","deleteContent","deleteMultipleContent","newEvent","recurrence","wrongPattern","seriesChangeAlert","createError","recurrenceDateValidation","sameDayAlert","editRecurrence","repeats","startEndError","invalidDateError","blockAlert","ok","yes","no","series","previous","next","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","resize","onScheduleResize","touchStartEvent","onDocumentClick","allowKeyboardInteraction","selectedCells_1","selectCell","getIndexOfDate","isAllDayCell","dateInMS","getCellTemplate","getDateHeaderTemplate","getMajorSlotTemplate","getMinorSlotTemplate","getResourceHeaderTemplate","border","padding","eventClone","compile","trim","scrollEdges","viewBoundaries","pageYOffset","pageXOffset","isRefresh","isResource","isDate","isView","isLayout","isDataManager","prop","highlightCurrentTime","extendedPropertyChange","propertyChangeAction","onEventSettingsPropertyChanged","onGroupSettingsPropertyChanged","setWorkHours","viewStartHour","getStartHour","getEndHour","dates_1","colIndex","tds","tdCol","firstTd","lastTd","endDateFromColSpan","getEndDateFromStartDate","getResourcesByIndex","groupData","scrollTo","hour","scrollToHour","exportToICalendar","fileName","iCalendarExportModule","initializeCalendarExport","importICalendar","fileContent","iCalendarImportModule","initializeCalendarImport","exportToExcel","excelExportOptions","excelExportModule","initializeExcelExport","getEvents","includeOccurrences","eventCollections","eventID","getCurrentViewDates","getCurrentViewEvents","refreshEvents","getEventDetails","isSlotAvailable","Collection","ActionBase","cellWidth","cellHeight","slotInterval","actionIndex","cloneElement","originalElement","excludeSelectors","navigationInterval","scrollInterval","scrollArgs","resizeEdges","getChangedData","indexCol","getOriginalElement","cloneIndex_1","saveChangedData","eventArgs","isSameResource","calculateIntervalTime","intervalTime","floor","getContentAreaDimension","viewElement","getResourceElements","leftOffset","rightOffset","getPageCoordinates","changedTouches","getIndex","contentElements","indexes","minIndex","groupElements","updateTimePosition","timeElement","wrapperClass","offsetValue","rightValue","leftValue","offsetTop","table","createCloneElement","outerHTML","cloneClassLists","eventDragArea","removeCloneElement","getCursorElement","pages","elementFromPoint","clientX","clientY","autoScroll","yIsScrollable","xIsScrollable","scrollBy","autoScrollValidation","actionClass","updateScrollPosition","setInterval","updateDraggingDateTime","updateResizingDirection","timeDelay","Resize","resizeStart","resizeHelper","resizeTarget","resizeArgs","workCell","noOfDays_1","touchMoveEvent","resizing","touchEndEvent","resizeStop","resizeValidation","leftStyles","getLeftRightStyles","horizontalResizing","rightStyles","topStyles","getTopBottomStyles","verticalResizing","bottomStyles","clearInterval","minutes","resizeTime","headerName","noOfDays_2","cellOffsetWidth","resizeDate","parseFloat","spanMinutes","cloneIndex","originalWidth","noOfDays","resizeEnd","clnHeight","clnTop","isTimeViews","pageWidth","targetWidth","abs","cloneWidth","viewDimension","DragAndDrop","Draggable","abort","enableTapHold","enableTailMode","cursorAt","dragArea","dragStart","drag","dragStop","enableAutoScroll","helper","dragHelper","queryPositionInfo","dragPosition","setDragActionDefaultValues","cursor","topValue","pointerEvents","cloneBottom","eventGuid","dragArgs","navigation","targetElement","updateNavigatingPosition","isAllowDrop","currentDate_1","viewNavigation","morePopupEventDragging","calculateTimelineDate","calculateTimelineTime","calculateVerticalDate","calculateVerticalTime","outWrapper","tarWrapper","elementHeight_1","getAllDayEventHeight","outerWrapperCls","targetWrapper","navigationType","eventDuration","dragEnd","eventWrapper","eventContainer","appendCloneElement","swapDragging","heightPerMinute","diffInMinutes","isAllDayDrag","getEventWrapper","spanHours","eventHeight_1","allDayElement","outerWrapper","timeString","endTimeDiff","startTimeDiff","viewEle","widthPerMinute","eventSrt","calculateResourceGroupingPosition","dragDate","srtDateDiff","trCollection","rowHeight","cursorElement","eventHeight","dropSelectors_1","selector","ViewBase","customHelper","getDayName","getTimelineDate","createEventTable","collapseRows","cls.SCHEDULE_TABLE_CLASS","tbody","createColGroup","lastRow","reduce","prev","colGroupEle","getScrollXIndent","scrollTopPanel","getDatesHeaderElement","scrollHeaderLabels","headerTable","colWidth","headerCells","isRtl","tdLeft","hiddenLeft","addAttributes","getHeaderBarHeight","headerBarHeight","resHeader","panel","colLevels","isCurrentDate","isCurrentMonth","isWorkDay","isWorkHour","daysCount","formatDateRange","longDateFormat","toLocaleLowerCase","getMobileDateElement","tdElement","tdData","renderResourceMobileLayout","addAutoHeightClass","WorkCellInteraction","cellMouseDown","navigateView","sameView","isWorkCell","cellDblClick","VerticalEvent","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","allDayLevel","progress","animationUiUpdate","renderAppointments","setAllDayRowHeight","expandCollapse","rowExpandCollapse","initializeValues","processBlockEvents","renderEvents","arr","isValidEvent","schedule","isHourRange","isSameRange","getHeight","appHeight","appendEvent","appointmentElement","appLeft","appointmentWrap","dateCount","resources_1","getResourceList","filterEvents_1","renderBlockEvents","dayCount","spannedData","isSpannedEvent","util.getStartEndHours","blockTop","blockHeight","getTopValue","eventType","resources_2","filterEvents_2","renderAllDayEvents","renderNormalEvents","resourceIndex","createAppointmentElement","recordSubject","appointmentDetails","appointmentSubject","appointmentStartTime","appointmentEndTime","timeStr","recurrenceIcon","renderSpannedIcon","createMoreIndicator","currentDay","countWrapper","childElementCount","innerCountWrap","cls.ROW_COUNT_WRAPPER_CLASS","moreIndicatorElement","data-index","data-count","countCell","moreCount","iconElement","cls.EVENT_INDICATOR_CLASS","iconLeft","iconRight","iconTop","iconBottom","startEndHours","currentDates","allDayRowCell","cellTop","appWidth","isDateRange","isAlreadyRendered","allDayDifference","allDayIndex","getOverlapIndex","Index","widthAdjustment","wIndex","allDayRowHeight","addOrRemoveClass","appIndex","tempData","adjustOverlapElements","maxHeight","eventsList","date_1","appointmentList_1","appointment_1","filterList","val","eventsList_1","appLevel","length1","length2","eleGuid","apps","moreEventCount","getEventHeight","eventElement","MonthEvent","moreIndicatorHeight","renderType","appointmentWrapper_1","removeHeightProperty","monthHeaderHeight","util.getOuterHeight","renderResourceEvents","renderEventsHandler","updateBlockElements","isPreventScrollUpdate","blockList","workCells","getSlotDates","splittedEvents_1","updateIndicatorIcon","blockEvents","blockEvents_1","blockSpannedList","isSameDate","isBlockIcon","blockSpannedList_1","blockEvent","splittedEvents_2","isIcon","getStartTime","getEndTime","cellTd","getCellTd","getPosition","renderBlockIndicator","diffInDays","getEventWidth","appRight","appTop","getRowTop","blockElement","renderEventElement","blockIndicator","cloneData","eventLocation","innerElement","appendEventIcons","overlapCount","updateCellHeight","cellTd_1","getFilteredEvents","appArea","renderedAppCount","getMoreIndicatorElement","renderElement","moreIndicatorClick","blockElement_1","getOverlapEvents","appointmentsList","appointments_1","moreEventArgs","wrapper","data-start-date","data-end-date","rows_1","VerticalView","baseCssClass","workCellAction","event.scrollUiUpdate","appointment","onContentScroll","scrollLeftPanel","onApaptiveMove","onApaptiveScroll","leftPanel","getLeftPanelElement","timecells","getScrollableElement","scrollerHeight","setContentHeight","scrollBarWidth","util.getScrollBarWidth","scrollToWorkHour","leftPanelElement","highlight","firstWorkHourCell","getTopFromDateTime","columnLevels","workStartHour","workEndHour","renderDates_1","col","isWorkHourRange","showTimeIndicator","getCurrentTimeIndicatorIndex","changeCurrentTimePosition","currentTimeIndicatorTimer","clearCurrentTimeIndicatorTimer","currentDateIndex","removeCurrentTimeIndicatorElements","indicator","firstRow","topInPx","curTimeWrap","currentDateIndex_1","currentTimeEle","timeCellsWrap","lastChild","getWorkCellHeight","getTdContent","cntEle","clsList","renderContent","dateTd","renderDatesHeader","indentTd","renderLeftIndent","workTd","scrollContainer","renderTimeCells","renderContentArea","timesTd","trEle","rowCount","ntr_1","data_1","util.getWeekNumber","createTd","appointmentExpandCollapse","aria-disabled","cls.ALLDAY_APPOINTMENT_SECTION_CLASS","nth","lastLevel","createAllDayRow","wireCellEvents","thead","createEventWrapper","tdEle","ele","wireMouseEvents","handler","getTimeSlotRows","renderContentTable","createContentTd","renderContentTableHeader","getContentTdClass","cellDate","util.setTime","args_1","data-date","innerWrapper","cls.APPOINTMENT_WRAPPER_CLASS","getContentAreaElement","msMajorInterval","msStartHour","msEndHour","majorTickDivider","middle","contentScrollableEle","Day","Week","WorkWeek","par","Month","dayNameFormat","monthDates","onScrollUIUpdate","onDataReady","onCellClick","headerHeight","getDayNameFormat","renderWeekNumberContent","contentArea","monthAgendaWrapper","renderAppointmentContainer","contentWrapper","contentWrapTable","weekNumber","createWeekNumberElement","createHeaderCell","cellArgs","getContentSlots","slotDatas","prepareSlots","renderDate","includeResource","colDates","colDates_2","colDate","resourcesTd","colDates_1","updateClassList","isOtherMonth","util.addMonths","trows","renderDateHeaderElement","dateHeader","getMonthStart","monthStart","util.getWeekFirstDate","getMonthEnd","util.WEEK_LENGTH","monthEnd","util.lastDateOfMonth","AgendaBase","viewBase","createAgendaContentElement","listData","aTd","listElement","ListBase","createList","moduleName","listClass","itemClass","li","appWrapper","templateEle","createAppointment","appSubjectWrap","strDate","allDayStr","displayStr","processAgendaEvents","splited","wireEventActions","eventElement_1","dateHeaderElement_1","dayNavigationClick","calculateResourceTableElement","agendaDate","agendaLastDate","lastLevelInfo","tempLastLevelInfo","tempIndex","finalDate","agendaCollection","hideEmptyAgendaDays","resDataCollection","resDayCollection","rowSpan","topResources","tempGroupedData","totalRowSpan","u","createResourceTableRow","renderEmptyContent","tContent","tContentCollection","w","rowSpanCollection","createDateHeaderElement","eTr","createTableRowElement","eTd","aria-rowindex","class","aria-colindex","dTd","Agenda","agendaDates","virtualScrollTop","agendaBase","eventLoad","refreshEvent","refreshDate","agendaDaysCount","isObject","appointmentFiltering","appoint","updateHeaderText","nTr","cTd","agendaScrolling","filterDate","totalHeight","emptyTBody","topElement","getElementFromScrollerPosition","scrollDate","getPreviousNextDate","s","scrollToValue","filterElement","liCollection","getStartDateFromEndDate","dateStart","dateEnd","unWireEvents","onAgendaScrollUiUpdate","MonthAgenda","wrapperContainer","appWrap","appendAppContainer","setEventWrapperHeight","availableHeight","clearElements","onEventRender","appContainer","appointmentIndicators_1","appointmentIndicator","TimelineEvent","appContainers","dayLength","slotsPerDay","appointments_2","top_1","getFirstChild","moreIndicator","appPos","isAlreadyAvail","startDateTime","slotStartTime","slotEndTime","getFilterEvents","resourceCell","blockIndicator_1","getNextDay","isSameDay","getSameDayEventsWidth","getSpannedEventsWidth","startWidth","endWidth","spannedWidth","getAppointmentLeft","slotTd","indicatorPos","wrapIndex","TimelineHeaderRow","groupByYear","groupByMonth","dates_2","groupByWeek","dates_3","jsDate","generateSlots","colspan","tempFn","cls","tdDatas","getYear","htmlCol","hourSlots","lastLevelColspan","templateFn","byYear","byMonth","byWeek","TimelineViews","getLeftFromDateTime","generateTimeSlots","timeSlotData","tempTimeSlots_1","headerWrap","diffInDates","getWorkCellWidth","getRowCount","getResourceTdData","resLevel","resSHr","resEHr","TimelineMonth","contentTr","contentTd","ExcelExport","exportFields","exportName","exportType","isIncludeOccurrences","customData","processWorkbook","columns","columnHeader","fontSize","borders","bold","columnData","n","columnRule","styleRule","numberFormat","workSheet","Workbook","worksheets","ICalendarExport","SEPARATOR","navigator","appVersion","iCalendarEvents","filterCollection","uId","editedExDate","UID","startZone","calendarEvent","convertDateToString","customFields","customFieldFilter","customField","icsString","download","defaultFields","eventDate","buffer","Blob","msSaveBlob","downloadLink_1","createElementNS","href","URL","createObjectURL","initEvent","dispatchEvent","setTimeout","revokeObjectURL","ICalendarImport","fileReader","FileReader","onload","iCalString","iCalendarParser","readAsText","calArray","RegExp","isEvent","curEvent","dateParsing","processOccurrence","parentObj","exdate","getDateString","newDate","exec","UTC"],"mappings":"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yc,EAASljD,UAAW,eAAY,IACnCm8B,IACI2b,aAAYC,KACbmL,EAASljD,UAAW,oBAAiB,IACxCm8B,IACIsK,cACDyc,EAASljD,UAAW,6BAA0B,IACjDm8B,IACI2b,aAAYE,KACbkL,EAASljD,UAAW,YAAS,IAChCm8B,IACI4yB,gBAAe9W,KAChBiL,EAASljD,UAAW,gBAAa,IACpCm8B,IACI4yB,gBAAepX,KAChBuL,EAASljD,UAAW,iBAAc,IACrCm8B,IACIsK,cACDyc,EAASljD,UAAW,eAAY,IACnCm8B,IACIsK,YAAS,IACVyc,EAASljD,UAAW,gBAAa,IACpCm8B,IACIsK,cACDyc,EAASljD,UAAW,oBAAiB,IACxCm8B,IACIuK,WACDwc,EAASljD,UAAW,cAAW,IAClCm8B,IACIuK,WACDwc,EAASljD,UAAW,gBAAa,IACpCm8B,IACIuK,WACDwc,EAASljD,UAAW,gBAAa,IACpCm8B,IACIuK,WACDwc,EAASljD,UAAW,sBAAmB,IAC1Cm8B,IACIuK,WACDwc,EAASljD,UAAW,kBAAe,IACtCm8B,IACIuK,WACDwc,EAASljD,UAAW,qBAAkB,IACzCm8B,IACIuK,WACDwc,EAASljD,UAAW,oBAAiB,IACxCm8B,IACIuK,WACDwc,EAASljD,UAAW,iBAAc,IACrCm8B,IACIuK,WACDwc,EAASljD,UAAW,iBAAc,IACrCm8B,IACIuK,WACDwc,EAASljD,UAAW,iBAAc,IACrCm8B,IACIuK,WACDwc,EAASljD,UAAW,oBAAiB,IACxCm8B,IACIuK,WACDwc,EAASljD,UAAW,kBAAe,IACtCm8B,IACIuK,WACDwc,EAASljD,UAAW,gBAAa,IACpCm8B,IACIuK,WACDwc,EAASljD,UAAW,gBAAa,IACpCm8B,IACIuK,WACDwc,EAASljD,UAAW,WAAQ,IAC/Bm8B,IACIuK,WACDwc,EAASljD,UAAW,eAAY,IACnCm8B,IACIuK,WACDwc,EAASljD,UAAW,kBAAe,IACtCm8B,IACIuK,WACDwc,EAASljD,UAAW,eAAY,IACnCm8B,IACIuK,WACDwc,EAASljD,UAAW,iBAAc,IACrCm8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"}