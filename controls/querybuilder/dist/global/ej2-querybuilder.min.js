this.ej=this.ej||{},this.ej.querybuilder=function(e,t,r,l,n,o,i,s,a){"use strict";var u=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function l(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(l.prototype=r.prototype,new l)}}(),p=function(e,t,r,l){var n,o=arguments.length,i=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(i=(o<3?n(i):o>3?n(t,r,i):n(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i};l.MultiSelect.Inject(l.CheckBoxSelection);var d=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u(r,e),p([t.Property(null)],r.prototype,"field",void 0),p([t.Property(null)],r.prototype,"label",void 0),p([t.Property(null)],r.prototype,"type",void 0),p([t.Property(null)],r.prototype,"values",void 0),p([t.Property(null)],r.prototype,"operators",void 0),p([t.Property(null)],r.prototype,"template",void 0),p([t.Property(null)],r.prototype,"validation",void 0),p([t.Property(null)],r.prototype,"format",void 0),p([t.Property(null)],r.prototype,"step",void 0),r}(t.ChildProperty),c=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u(r,e),p([t.Property("")],r.prototype,"condition",void 0),p([t.Property()],r.prototype,"rules",void 0),p([t.Property(null)],r.prototype,"field",void 0),p([t.Property(null)],r.prototype,"label",void 0),p([t.Property(null)],r.prototype,"type",void 0),p([t.Property(null)],r.prototype,"operator",void 0),p([t.Property(null)],r.prototype,"value",void 0),r}(t.ChildProperty),h=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u(r,e),p([t.Property("and")],r.prototype,"condition",void 0),p([t.Property()],r.prototype,"rules",void 0),r}(t.ChildProperty),m=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u(r,e),p([t.Property(!0)],r.prototype,"ruleDelete",void 0),p([t.Property(!0)],r.prototype,"groupInsert",void 0),p([t.Property(!0)],r.prototype,"groupDelete",void 0),r}(t.ChildProperty),y=function(e){function d(r,l){var n=e.call(this,r,l)||this;return n.groupIdCounter=0,n.ruleIdCounter=0,n.btnGroupId=0,n.isImportRules=!1,n.parser=[],n.intl=new t.Internationalization,n.customOperators={},n.operators={equal:"=",notequal:"!=",greaterthan:">",greaterthanorequal:">=",lessthan:"<",in:"IN",notin:"NOT IN",lessthanorequal:"<=",startswith:"LIKE",endswith:"LIKE",between:"BETWEEN",notbetween:"NOT BETWEEN",contains:"LIKE"},n.operatorValue={equal:"Equal",greaterthan:"GreaterThan",greaterthanorequal:"GreaterThanOrEqual",lessthan:"LessThan",lessthanorequal:"LessThanOrEqual",notequal:"NotEqual",empty:"Empty",notempty:"NotEmpty",between:"Between",in:"in",notin:"NotIn",notbetween:"NotBetween",startswith:"StartsWith",endswith:"EndsWith",contains:"Contains"},n.validationRules={},n}return u(d,e),d.prototype.getPersistData=function(){return this.addOnPersist(["rule"])},d.prototype.reset=function(){this.isImportRules=!1;var e=this.element.querySelector(".e-group-body");t.detach(e.children[0]),e.appendChild(this.createElement("div",{attrs:{class:"e-rule-list"}})),this.levelColl[this.element.id+"_e_group0"]=[0],this.rule={condition:"and",rules:[]}},d.prototype.getWrapper=function(){return this.element},d.prototype.getModuleName=function(){return"query-builder"},d.prototype.initialize=function(){if(this.dataSource.length){var e=Object.keys(this.dataSource[0]),t=[],r=void 0,l=!1,o=void 0;if(this.columns.length){"descending"===this.sortDirection.toLowerCase()?this.columns=new n.DataManager(this.columns).executeLocal((new n.Query).sortByDesc("field")):"ascending"===this.sortDirection.toLowerCase()&&(this.columns=new n.DataManager(this.columns).executeLocal((new n.Query).sortBy("field")));for(var i=this.columns,s=0,a=i.length;s<a;s++)i[s].type||(e.indexOf(i[s].field)>-1&&("string"===(r=typeof(o=this.dataSource[0][i[s].field]))?l=!isNaN(Date.parse(o)):"object"===r&&(l=o instanceof Date&&!isNaN(o.getTime()),r="string"),i[s].type=r,l=!1),r="string")}else{for(var s=0,a=e.length;s<a;s++)"string"===(r=typeof(o=this.dataSource[0][e[s]]))?l=!isNaN(Date.parse(o)):"object"===r&&(l=o instanceof Date&&!isNaN(o.getTime()),r="string"),t[s]={field:e[s],label:e[s],type:l?"date":r},l=!1;this.columns=t}}},d.prototype.clickEventHandler=function(e){var r=e.target;if(this.isImportRules=!1,"SPAN"===r.tagName&&(r=r.parentElement),"BUTTON"===r.tagName)if(r.className.indexOf("e-removerule")>-1)r.className.indexOf("e-tooltip")>-1&&t.getComponent(r,"tooltip").destroy(),this.deleteRule(r);else if(r.className.indexOf("e-deletegroup")>-1)t.getComponent(r,"tooltip").destroy(),this.deleteGroup(t.closest(r,".e-group-container"));else if(r.className.indexOf("e-edit-rule")>-1)if(document.getElementById(this.element.id+"_summary_content").style.display="none",this.element.querySelectorAll(".e-group-container").length<1){this.addGroupElement(!1,this.element,this.rule.condition);var l=t.extend({},this.rule,{},!0);this.setGroupRules(l),this.renderSummaryCollapse()}else(n=this.element.querySelector(".e-group-container")).querySelectorAll(".e-collapse-rule").length<1&&this.renderSummaryCollapse(),n.style.display="block";else if(r.className.indexOf("e-collapse-rule")>-1){var n=this.element.querySelector(".e-group-container");n.style.display="none",this.element.querySelector(".e-summary-text").textContent=this.getSqlFromRules(this.rule),document.getElementById(this.element.id+"_summary_content").style.display="block"}else r.className.indexOf("e-collapse-rule")>-1&&(this.element.querySelector(".e-group-container").style.display="none",this.element.querySelector(".e-summary-text").textContent=this.getSqlFromRules(this.rule),document.getElementById(this.element.id+"_summary_content").style.display="block");else if("LABEL"===r.tagName&&r.parentElement.className.indexOf("e-btn-group")>-1){var o=t.closest(r,".e-group-container"),i={groupID:o.id,selectedItem:r,cancel:!1};this.trigger("beforeConditionChange",i),this.getGroup(o).condition=r.textContent.toLowerCase(),i={groupID:o.id,selectedItem:r},this.trigger("conditionChanged",i)}},d.prototype.selectBtn=function(e,r){"beforeOpen"===r.name?t.addClass([r.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide1"):r.element.children[0].className.indexOf("e-addrule")>-1?this.addRuleElement(t.closest(e,".e-group-container"),{}):r.element.children[0].className.indexOf("e-addgroup")>-1&&this.addGroupElement(!0,t.closest(e,".e-group-container"),"",!0)},d.prototype.addRuleElement=function(e,r){var n=this.ruleElem.cloneNode(!0);"Vertical"===this.displayMode||this.element.className.indexOf("e-device")>-1?n.className="e-rule-container e-vertical-mode":n.className="e-rule-container e-horizontal-mode";var o,i,s,u,p,d,c=e.querySelector(".e-rule-list"),h=n.querySelector("button");if(this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?h.textContent=this.l10n.getConstant("Remove"):(t.addClass([h],"e-round"),t.addClass([h],"e-icon-btn"),new a.Tooltip({content:this.l10n.getConstant("DeleteRule")}).appendTo(h),h=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-delete-icon"}}),n.querySelector("button").appendChild(h)),n.setAttribute("id",e.id+"_e_rule"+this.ruleIdCounter),this.ruleIdCounter++,n.querySelector(".e-filter-input").setAttribute("id",n.id+"_filterkey"),c.appendChild(n),d=this.element.className.indexOf("e-device")>-1?"250px":"200px",(p=new l.DropDownList({dataSource:this.columns,fields:{text:"label",value:"field"},placeholder:this.l10n.getConstant("SelectField"),popupHeight:this.columns.length>5?d:"auto",change:this.changeField.bind(this),value:r?r.field:null})).appendTo("#"+n.id+"_filterkey"),this.allowValidation&&(n.querySelector(".e-filter-input").setAttribute("name",n.id+"field"),t.addClass([n.querySelector(".e-filter-input")],"e-error"),this.validationRules[n.id+"field"]={required:!0}),this.filterIndex=p.index,o=this.levelColl[e.id],!this.isImportRules){for(i=this.rule,s=0,u=o.length;s<u;s++)i=this.findGroupByIdx(o[s],i,0===s);Object.keys(r).length?i.rules.push({field:r.field,type:r.type,label:r.label,operator:r.operator,value:r.value}):i.rules.push({field:"",type:"",label:"",operator:"",value:[]})}Object.keys(r).length&&this.changeRule(r,{element:p.element,itemData:this.columns[this.filterIndex]})},d.prototype.validateFields=function(){var e,r,l,n,o,i,s=Object.keys(this.validationRules),a=s.length;for(e=0;e<a;e++)if(r=this.element.querySelector("[name="+s[e]+" ]")){for(l=t.closest(r,".e-group-container"),n=this.getGroup(l),o=t.closest(r,".e-rule-container"),i=0;o&&null!==o.previousElementSibling;)o=o.previousElementSibling,i++;t.closest(r,".e-rule-filter")&&(n.rules[i].field?t.removeClass([r.parentElement],"e-error"):t.addClass([r.parentElement],"e-error")),t.closest(r,".e-rule-operator")&&(n.rules[i].operator?t.removeClass([r.parentElement],"e-error"):t.addClass([r.parentElement],"e-error")),t.closest(r,".e-rule-value")&&(n.rules[i].value?t.removeClass([r.parentElement],"e-error"):t.addClass([r.parentElement],"e-error"))}},d.prototype.groupTemplate=function(){var e,t,r,l,n,o,i,s,a;return e=this.createElement("div",{attrs:{class:"e-group-container"}}),r=this.createElement("div",{attrs:{class:"e-group-header"}}),t=this.createElement("div",{attrs:{class:"e-group-body"}}),l=this.createElement("div",{attrs:{class:"e-rule-list"}}),e.appendChild(r),t.appendChild(l),e.appendChild(t),n=this.createElement("div",{attrs:{class:"e-btn-group"}}),(o=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-and",value:"AND"}})).setAttribute("checked","true"),n.appendChild(o),i=this.createElement("label",{attrs:{class:"e-btn e-btngroup-and-lbl"},innerHTML:"AND"}),n.appendChild(i),o=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-or",value:"OR"}}),n.appendChild(o),i=this.createElement("label",{attrs:{class:"e-btn e-btngroup-or-lbl"},innerHTML:"OR"}),n.appendChild(i),r.appendChild(n),s=this.createElement("div",{attrs:{class:"e-group-action"}}),a=this.createElement("button",{attrs:{type:"button",class:"e-add-btn"}}),s.appendChild(a),r.appendChild(s),e},d.prototype.ruleTemplate=function(){var e,t,r,l,n;return e=this.createElement("div"),n=this.createElement("div",{attrs:{class:"e-rule-field"}}),r=this.createElement("div",{attrs:{class:"e-rule-filter"}}),t=this.createElement("input",{attrs:{type:"text",class:"e-filter-input"}}),r.appendChild(t),n.appendChild(r),r=this.createElement("div",{attrs:{class:"e-rule-operator"}}),n.appendChild(r),r=this.createElement("div",{attrs:{class:"e-rule-value"}}),n.appendChild(r),e.appendChild(n),l=this.createElement("button",{attrs:{class:"e-removerule e-rule-delete e-control e-btn e-small"}}),n.appendChild(l),e},d.prototype.addGroupElement=function(e,l,n,o){if(!(this.element.querySelectorAll(".e-group-container").length>=this.maxGroupCount)){var i,u=this.groupElem.cloneNode(!0);u.setAttribute("id",this.element.id+"_e_group"+this.groupIdCounter),this.groupIdCounter++;var p=u.querySelector(".e-btngroup-and"),d=u.querySelector(".e-btngroup-or"),c=u.querySelector(".e-btngroup-and-lbl"),h=u.querySelector(".e-btngroup-or-lbl");if(p.setAttribute("id",this.element.id+"_and"+this.btnGroupId),d.setAttribute("id",this.element.id+"_or"+this.btnGroupId),p.setAttribute("name",this.element.id+"_and"+this.btnGroupId),d.setAttribute("name",this.element.id+"_and"+this.btnGroupId),c.setAttribute("for",this.element.id+"_and"+this.btnGroupId),h.setAttribute("for",this.element.id+"_or"+this.btnGroupId),this.btnGroupId++,e){i=this.createElement("button",{attrs:{class:"e-deletegroup"}}),new r.Button({iconCss:"e-icons e-delete-icon",cssClass:"e-small e-round"}).appendTo(i),new a.Tooltip({content:this.l10n.getConstant("DeleteGroup")}).appendTo(i),t.rippleEffect(i,{selector:".deletegroup"}),u.querySelector(".e-group-action").appendChild(i);var m=l.querySelector(".e-rule-list"),y=l.querySelectorAll(".e-group-container").length;m.appendChild(u);var g=this.levelColl[l.id].slice(0);g.push(y),this.levelColl[u.id]=g,this.isImportRules||(this.addGroups([],l.id),o&&this.addRuleElement(u,{}))}else l.appendChild(u),this.levelColl[u.id]=[0];u.querySelector(".e-btngroup-and").setAttribute("checked","true"),"or"===n&&u.querySelector(".e-btngroup-or").setAttribute("checked","true");var f=u.querySelector(".e-add-btn");new s.DropDownButton({items:this.items,cssClass:"e-round e-small e-caret-hide e-addrulegroup",iconCss:"e-icons e-add-icon",beforeOpen:this.selectBtn.bind(this,f),select:this.selectBtn.bind(this,f)}).appendTo(f),t.rippleEffect(f,{selector:".e-round"})}},d.prototype.notifyChange=function(e,r){for(var l=t.closest(r,".e-rule-value").querySelectorAll(".e-template"),n=[],o=0,i=l.length;o<i;o++)l[o].nextElementSibling&&l[o].nextElementSibling.className.indexOf("e-check")>-1&&n.push(l[o].textContent);this.updateRules(r,l.length>1?n:e)},d.prototype.changeValue=function(e,r){var l,n;(n=r.event?r.event.target:r.element).className.indexOf("e-day")>-1&&(n=r.element);var o=t.closest(n,".e-group-container"),i=r;i.element&&i.element.className.indexOf("e-datepicker")>-1&&(n=i.element);var s;s=n.className.indexOf("e-radio")>-1?t.getComponent(n,"radio").label:n.className.indexOf("e-multiselect")>-1?t.getComponent(n,"multiselect").value:r.value,l={groupID:o.id,filterID:n.id,value:s,cancel:!1},this.trigger("beforeValueChange",l),this.updateRules(n,s,e),l={groupID:o.id,filterID:n.id,value:s,cancel:!1},this.trigger("valueChanged",l)},d.prototype.changeField=function(e){for(var r=t.closest(e.element,".e-group-container"),l=this.getGroup(r),n=t.closest(e.element,".e-rule-container"),o=0;n&&null!==n.previousElementSibling;)n=n.previousElementSibling,o++;this.changeRule(l.rules[o],e)},d.prototype.changeRule=function(e,r){if(r.itemData){var n,o,i,s,a={};o=t.closest(r.element,".e-rule-filter"),i=t.closest(r.element,".e-rule-operator");var u=t.getComponent(r.element,"dropdownlist"),p=t.closest(r.element,".e-group-container");if(o){d={groupID:p.id,filterID:r.element.id,selectedItem:r.item,cancel:!1};this.trigger("beforeFieldChange",d),a.type=this.columns[u.index].type}if(i){var d={groupID:p.id,filterID:r.element.id,selectedItem:r.item,cancel:!1};this.trigger("beforeFieldChange",d),a.operator=r.itemData.value;var c=document.getElementById(r.element.id.replace("operatorkey","filterkey")),h=t.getComponent(c,"dropdownlist");if(!this.columns[h.index].template&&((a.operator.toLowerCase().indexOf("between")>-1||a.operator.toLowerCase().indexOf("in")>-1&&a.operator.toLowerCase().indexOf("contains")<0)&&(o=i.previousElementSibling,a.type=e.type),r.previousItemData)){var m=r.previousItemData.value.toLowerCase();(m.indexOf("between")>-1||m.indexOf("in")>-1&&m.indexOf("contains")<0)&&(o=i.previousElementSibling,a.type=e.type)}}if(o)if((i=o.nextElementSibling).childElementCount)this.renderValues(i,r.itemData,r.previousItemData,!0,e,a);else{var y=t.closest(i,".e-rule-container").id;s=this.createElement("input",{attrs:{type:"text",id:y+"_operatorkey"}}),i.appendChild(s),this.columns[u.index].operators?n=this.columns[u.index].operators:r.itemData&&(n=this.customOperators[this.columns[u.index].type+"Operator"]);var g=this.element.className.indexOf("e-device")>-1?"250px":"200px",f=new l.DropDownList({dataSource:n,fields:{text:"key",value:"value"},placeholder:this.l10n.getConstant("SelectOperator"),popupHeight:n.length>5?g:"auto",change:this.changeField.bind(this),index:0,value:e?this.l10n.getConstant(this.operatorValue[e.operator]):null});f.appendTo("#"+y+"_operatorkey"),this.allowValidation&&(s.setAttribute("name",y+"operator"),t.addClass([s],"e-error"),this.validationRules[y+"operator"]={required:!0}),a.operator=e?e.operator:"",this.isImportRules&&(f.value=e.operator,f.dataBind(),a.type=this.columns[u.index].type,a.operator=e.operator),this.renderValues(i,this.columns[u.index],r.previousItemData,!1,e,a)}this.isImportRules||this.updateRules(r.element,r.item)}},d.prototype.destroyControls=function(e){var r;r=e.nextElementSibling.querySelectorAll("input.e-control");var l;l=e.nextElementSibling.querySelectorAll("div.e-control");for(var n=this.columns,o=0,i=r.length;o<i;o++){if(r[o].classList.contains("e-textbox"))t.getComponent(r[o],"textbox").destroy(),t.detach(e.nextElementSibling.querySelector("input#"+r[o].id));else if(r[o].classList.contains("e-dropdownlist"))t.getComponent(r[o],"dropdownlist").destroy();else if(r[o].classList.contains("e-radio"))t.getComponent(r[o],"radio").destroy();else if(r[o].classList.contains("e-numerictextbox"))t.getComponent(r[o],"numerictextbox").destroy(),t.detach(e.nextElementSibling.querySelector("input#"+r[o].id));else if(r[o].classList.contains("e-datepicker"))t.getComponent(r[o],"datepicker").destroy();else if(r[o].classList.contains("e-multiselect"))t.getComponent(r[o],"multiselect").destroy();else if(r[o].className.indexOf("e-template")>-1)for(var s=r[o].className,a=0,u=n.length;a<u;a++)if(n[a].template&&s.indexOf(n[a].field)>-1){this.templateDestroy(n[a],r[o].id);break}t.detach(r[o])}for(var o=0,i=l.length;o<i;o++){if(l[o].className.indexOf("e-template")>-1)for(var s=l[o].className,a=0,u=n.length;a<u;a++)if(n[a].template&&s.indexOf(n[a].field)>-1){this.templateDestroy(n[a],l[o].id);break}t.detach(l[o])}},d.prototype.templateDestroy=function(e,r){var l=e.template.destroy;e.template&&e.template.destroy&&("string"==typeof l?(l=t.getValue(l,window))({elementId:r}):e.template.destroy({elementId:r}))},d.prototype.getDistinctValues=function(e,t){for(var r={},l=[],n=0,o=e.length;n<o;n++){var i=e[n][t],s={};i in r||(r[i]=1,s[t]=i,l.push(s))}return l},d.prototype.renderMultiSelect=function(e,r,o,i){var s=this.getDistinctValues(this.dataSource,e.field);new l.MultiSelect({dataSource:new n.DataManager(s),query:new n.Query([e.field]),fields:{text:e.field,value:e.field},value:i,mode:"CheckBox",width:"100%,",change:this.changeValue.bind(this,o)}).appendTo("#"+r+"_valuekey"+o),t.addClass([document.getElementById(r).querySelector(".e-rule-value")],"e-rule-multiselect")},d.prototype.processTemplate=function(e,r,l,n){var o=t.closest(e,".e-rule-container").querySelectorAll(".e-template");o.length<2?this.isImportRules?r.template&&"string"==typeof r.template.write?t.getValue(r.template.write,window)({elements:o[0],values:l.value}):r.template&&r.template.write&&r.template.write({elements:o[0],values:l.value}):r.template&&"string"==typeof r.template.write?t.getValue(r.template.write,window)({elements:o[0]}):r.template&&r.template.write&&r.template.write({elements:o[0]}):this.isImportRules?r.template&&"string"==typeof r.template.write?t.getValue(r.template.write,window)({elements:o,values:l.value}):r.template&&r.template.write&&r.template.write({elements:o,values:l.value}):r.template&&"string"==typeof r.template.write?t.getValue(r.template.write,window)({elements:o}):r.template&&r.template.write&&r.template.write({elements:o})},d.prototype.renderControls=function(e,l,n,s){if(l.template)this.processTemplate(e,l,n,s);else{var a="boolean"===s.type||s.operator&&s.operator.toLowerCase().indexOf("between")>-1?2:1,u=t.closest(e,".e-rule-container").id,p=void 0;(e.className.indexOf("e-rule-operator")>-1||e.className.indexOf("e-rule-filter")>-1)&&(p=e.parentElement.querySelector(".e-rule-value"),this.element.className.indexOf("e-device")<0&&(p.style.width="200px"));for(var d=0;d<a;d++)switch(s.type){case"string":f=this.isImportRules?n.value:"";if("in"===s.operator||"notin"===s.operator){h=this.isImportRules?n.value:[];this.renderMultiSelect(n,u,d,h),this.element.className.indexOf("e-device")<0&&(p.style.width="300px")}else{var c=new o.TextBox({placeholder:"Value",input:this.changeValue.bind(this,d)});c.appendTo("#"+u+"_valuekey"+d),c.value=f,c.dataBind(),this.allowValidation&&l.validation&&(c.element.setAttribute("name",u+d),t.addClass([c.element],"e-error"),this.validationRules[u+d]={required:!0})}break;case"number":f=this.isImportRules?n.value:0;if("in"===s.operator||"notin"===s.operator){var h=this.isImportRules?n.value:[];this.renderMultiSelect(n,u,d,h),this.element.className.indexOf("e-device")<0&&(p.style.width="300px")}else{var m=new o.NumericTextBox({value:f,format:"#",width:"100%",change:this.changeValue.bind(this,d)});m.appendTo("#"+u+"_valuekey"+d),this.allowValidation&&(m.element.setAttribute("name",u+d),t.addClass([m.element],"e-error"),this.validationRules[u+d]={required:!0})}break;case"boolean":var y=l.values&&l.values.length?l.values:["True","False"],g=!this.isImportRules||Boolean(n.value);new r.RadioButton({label:y[d],name:u+"default",checked:g,change:this.changeValue.bind(this,d)}).appendTo("#"+u+"_valuekey"+d);break;case"date":var f=this.isImportRules?new Date(n.value):new Date,v=new i.DatePicker({value:f,format:"dd-MMM-yy",change:this.changeValue.bind(this,d)});v.appendTo("#"+u+"_valuekey"+d),this.allowValidation&&(v.element.setAttribute("name",u+d),this.validationRules[u+d]={required:!0})}}},d.prototype.renderValues=function(e,r,l,n,o,i){if(n){var s=t.getComponent(e.querySelector("input"),"dropdownlist");r.operators?(s.dataSource=r.operators,s.index=0!==s.index?0:1,s.dataBind()):r.type&&(s.dataSource=this.customOperators[r.type+"Operator"],s.index=0!==s.index?0:1,s.dataBind())}var a=t.closest(e,".e-rule-container").id;if(l&&l.template&&(this.templateDestroy(l,a+"_valuekey0"),t.detach(e.nextElementSibling.querySelector("#"+a+"_valuekey0"))),n&&this.destroyControls(e),r.template){d=void 0;if(r.template&&"string"==typeof r.template.create?d=t.getValue(r.template.create,window)():r.template&&r.template.create&&(d=r.template.create()),d instanceof Element)d.id=a+"_valuekey0",t.addClass([d],"e-template"),t.addClass([d],"e-"+r.field),e.nextElementSibling.appendChild(d);else{t.addClass(d,"e-template");for(var u=0,p=d.length;u<p;u++)d[u].id=a+"_valuekey"+u,e.nextElementSibling.appendChild(d[u])}this.element.className.indexOf("e-device")<0&&(e.parentElement.querySelector(".e-rule-value").style.width="200px")}else if("boolean"===i.type||i.operator&&i.operator.toLowerCase().indexOf("between")>-1)for(u=0;u<2;u++){d=void 0;d=this.createElement("input",{attrs:{type:"text",id:a+"_valuekey"+u}}),e.nextElementSibling.appendChild(d)}else{var d=this.createElement("input",{attrs:{type:"text",id:a+"_valuekey0"}});e.nextElementSibling.appendChild(d)}this.renderControls(e,r,o,i)},d.prototype.updateValues=function(e,r){var l=e.className.split(" e-")[1],n=parseInt(e.id.slice(-1),2);switch(l){case"textbox":case"dropdownlist":case"radio":r.value=t.getComponent(e,l).value;break;case"numerictextbox":r.operator.indexOf("between")>-1?r.value[n]=t.getComponent(e,l).value:r.value=t.getComponent(e,l).value;break;case"datepicker":var o={type:"dateTime",format:"dd-MMM-yy"};r.operator.indexOf("between")>-1?r.value[n]=t.getComponent(e,l).value:r.value=this.intl.formatDate(t.getComponent(e,l).value,o)}},d.prototype.updateRules=function(e,r,n){for(var o,i,s=t.closest(e,".e-group-container"),a=this.getGroup(s),u=t.closest(e,".e-rule-container"),p=0;u&&null!==u.previousElementSibling;)u=u.previousElementSibling,p++;if(u=t.closest(e,".e-rule-container"),t.closest(e,".e-rule-filter")){o=t.getComponent(e,"dropdownlist"),a.rules[p].field=this.columns[o.index].field,a.rules[p].type=this.columns[o.index].type,a.rules[p].label=this.columns[o.index].label;var d=t.closest(e,".e-rule-filter"),c=d.nextElementSibling.querySelector("input.e-control"),h=t.getComponent(c,"dropdownlist").value;a.rules[p].operator=h,(c=d.nextElementSibling.nextElementSibling.querySelector("input.e-control"))||(c=d.nextElementSibling.nextElementSibling.querySelector("div.e-control")),i={groupID:s.id,filterID:e,selectedItem:r,cancel:!1},this.trigger("fieldChanged",i),this.updateValues(c,a.rules[p]),a.rules[p].field?t.removeClass([e.parentElement],"e-error"):t.addClass([e.parentElement],"e-error")}else if(t.closest(e,".e-rule-operator")){o=t.getComponent(e,"dropdownlist"),a.rules[p].operator=o.value;var m=void 0;m=u.querySelectorAll(".e-rule-value input.e-control"),a.rules[p].value=[],i={groupID:s.id,filterID:e,selectedItem:r,cancel:!1},this.trigger("operatorChanged",i),a.rules[p].operator?t.removeClass([e.parentElement],"e-error"):t.addClass([e.parentElement],"e-error");for(var y=0;y<m.length;y++)this.updateValues(m[y],a.rules[p])}else if(t.closest(e,".e-rule-value")&&null!==r){if(e.className.indexOf("e-template")>-1){var g=a.rules[p].operator.toLowerCase();r instanceof Array?g.indexOf("in")>-1&&g.indexOf("contains")<0||g.indexOf("between")>-1?a.rules[p].value=r:a.rules[p].value=r[0]:a.rules[p].value=r,i={groupID:s.id,filterID:e,selectedItem:r,cancel:!1},this.trigger("valueChanged",i)}else if(e.className.indexOf("e-spin")>-1||e.className.indexOf("e-numeric")>-1)a.rules[p].operator.indexOf("between")>-1||a.rules[p].operator.indexOf("in")>-1&&a.rules[p].operator.indexOf("contains")<0?a.rules[p].value[n]=r:a.rules[p].value=r;else if(e.className.indexOf("e-radio")>-1)a.rules[p].value=r;else if(e.className.indexOf("e-multiselect")>-1)a.rules[p].value=r;else if(e.className.indexOf("e-textbox")>-1)a.rules[p].value=r;else if(e.className.indexOf("e-datepicker")>-1){var f=t.getInstance(u.querySelector(".e-rule-filter input"),l.DropDownList),v={type:"dateTime",format:this.columns[f.index].format||"dd/MM/yyy"};v.type&&(a.rules[p].operator.indexOf("between")>-1||a.rules[p].operator.indexOf("in")>-1&&a.rules[p].operator.indexOf("contains")<0?a.rules[p].value[n]=this.intl.formatDate(r,v):a.rules[p].value=this.intl.formatDate(r,v))}a.rules[p].value?t.removeClass([e.parentElement],"e-error"):t.addClass([e.parentElement],"e-error")}},d.prototype.findGroupByIdx=function(e,t,r){var l=t.rules;if(!r&&l[e]){if((t=l[e]).rules)return t;for(var n=e+1,o=l.length;n<o;n++)if((t=l[n]).rules)return t}return t},d.prototype.destroy=function(){var e,r,l;for(l=(e=this.element.querySelectorAll(".e-addrulegroup")).length,r=0;r<l;r++)t.getComponent(e[r],"dropdown-btn").destroy(),t.detach(e[r]);this.reset(),this.unWireEvents()},d.prototype.addRules=function(e,t){var r={groupID:t,filterID:""};this.trigger("ruleDelete",r);for(var l=0,n=e.length;l<n;l++)this.addRuleElement(document.getElementById(t),e[l])},d.prototype.addGroups=function(e,t){var r=document.getElementById(t),l=this.getGroup(r),n=e.length,o={groupID:t};if(this.trigger("ruleDelete",o),n)for(var i=0,s=e.length;i<s;i++)this.importRules(e[i],r);else l.rules.push({condition:"and",rules:[]})},d.prototype.initWrapper=function(){if(this.cssClass&&t.addClass([this.element],this.cssClass),this.enableRtl&&t.addClass([this.element],"e-rtl"),this.width&&(this.element.style.width=this.width),this.height&&(this.element.style.height=this.height),this.rule.rules.length?this.isImportRules=!0:this.addGroupElement(!1,this.element),t.Browser.isDevice||"Vertical"===this.displayMode?(t.Browser.isDevice&&(this.element.style.width="100%",this.element.classList.add("e-device")),t.removeClass(document.querySelectorAll(".e-rule-container"),"e-horizontal-mode"),t.addClass(document.querySelectorAll(".e-rule-container"),"e-vertical-mode"),this.displayMode="Vertical"):this.displayMode="Horizontal",this.isImportRules&&this.summaryView)this.renderSummary();else{if(this.columns.length&&this.isImportRules){this.addGroupElement(!1,this.element,this.rule.condition);var e=t.extend({},this.rule,{},!0);this.setGroupRules(e)}else this.columns.length&&this.addRuleElement(this.element.querySelector(".e-group-container"),{});for(var r=document.querySelectorAll("label.e-btn"),l=void 0,n=0;n<r.length;n++)l=r.item(n),t.rippleEffect(l,{selector:".e-btn"})}},d.prototype.renderSummary=function(){var e=this.createElement("div",{attrs:{class:"e-summary-content",id:this.element.id+"_summary_content"}}),t=this.createElement("textarea",{attrs:{class:"e-summary-text",readonly:"true"}}),r=this.createElement("button",{attrs:{class:"e-edit-rule e-control e-btn e-small"}});e.appendChild(t),t.textContent=this.getSqlFromRules(this.rule),r.textContent=this.l10n.getConstant("Edit"),e.appendChild(r),this.element.appendChild(e)},d.prototype.renderSummaryCollapse=function(){var e=this.createElement("button",{attrs:{class:"e-collapse-rule e-control e-btn e-small"}});e.appendChild(this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-collapse-icon"}})),this.element.querySelector(".e-group-header").appendChild(e)},d.prototype.onPropertyChanged=function(e,r){for(var l=0,o=Object.keys(e);l<o.length;l++)switch(o[l]){case"summaryView":var i=this.element.querySelector(".e-group-container"),s=this.element.querySelector(".e-summary-content");e.summaryView?(i.style.display="none",this.element.querySelectorAll(".e-summary-content").length<1?(this.renderSummary(),s=this.element.querySelector(".e-summary-content")):this.element.querySelector(".e-summary-text").textContent=this.getSqlFromRules(this.rule),s.style.display="block"):(i.querySelectorAll(".e-collapse-rule").length>-1&&this.renderSummaryCollapse(),i.style.display="block",s.style.display="none");break;case"displayMode":"Horizontal"===e.displayMode?(t.addClass(this.element.querySelectorAll(".e-rule-container"),"e-horizontal-mode"),t.removeClass(this.element.querySelectorAll(".e-rule-container"),"e-vertical-mode")):(t.addClass(this.element.querySelectorAll(".e-rule-container"),"e-vertical-mode"),t.removeClass(this.element.querySelectorAll(".e-rule-container"),"e-horizontal-mode"));break;case"showButtons":e.showButtons.ruleDelete?t.removeClass(this.element.querySelectorAll("e-rule-delete"),"e-button-hide"):t.addClass(this.element.querySelectorAll("e-rule-delete"),"e-button-hide"),e.showButtons.groupDelete?t.removeClass(this.element.querySelectorAll("e-deletegroup"),"e-button-hide"):t.addClass(this.element.querySelectorAll("e-deletegroup"),"e-button-hide");break;case"cssClass":r.cssClass&&t.removeClass([this.element],r.cssClass.split(" ")),e.cssClass&&t.addClass([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"enablePersistence":this.enablePersistence=e.enablePersistence;break;case"dataSource":this.dataSource=e.dataSource;break;case"columns":this.columns=e.columns,"ascending"===this.sortDirection.toLowerCase()?this.columns=new n.DataManager(this.columns).executeLocal((new n.Query).sortBy("field")):"descending"===this.sortDirection.toLowerCase()&&(this.columns=new n.DataManager(this.columns).executeLocal((new n.Query).sortByDesc("field")));break;case"sortDirection":this.sortDirection=e.sortDirection;break;case"maxGroupCount":this.maxGroupCount=e.maxGroupCount;break;case"height":this.height=e.height,this.element.style.height=this.height;break;case"rules":this.rule=e.rule;break;case"width":this.width=e.width,this.element.style.width=this.width;break;case"locale":this.locale=e.locale}},d.prototype.preRender=function(){this.defaultLocale={StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",Between:"Between",NotBetween:"Not Between",Empty:"Empty",NotEmpty:"Not Empty",In:"In",NotIn:"Not In",NotContains:"Not Contains",Remove:"REMOVE",SelectField:"Select a field",SelectOperator:"Select operator",DeleteRule:"Remove this condition",DeleteGroup:"Delete group",AddGroup:"Add Group",AddCondition:"Add Condition",Edit:"EDIT"},this.l10n=new t.L10n("querybuilder",this.defaultLocale,this.locale),this.customOperators={stringOperator:[{value:"startswith",key:this.l10n.getConstant("StartsWith")},{value:"endswith",key:this.l10n.getConstant("EndsWith")},{value:"contains",key:this.l10n.getConstant("Contains")},{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")}],dateOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],booleanOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],numberOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"between",key:this.l10n.getConstant("Between")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"notbetween",key:this.l10n.getConstant("NotBetween")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")}]}},d.prototype.render=function(){this.levelColl={},this.items=[{text:this.l10n.getConstant("AddGroup"),iconCss:"e-icons e-add-icon e-addgroup"},{text:this.l10n.getConstant("AddCondition"),iconCss:"e-icons e-add-icon e-addrule"}],this.ruleElem=this.ruleTemplate(),this.groupElem=this.groupTemplate(),this.initWrapper(),this.initialize(),this.wireEvents()},d.prototype.wireEvents=function(){var e=this.getWrapper();t.EventHandler.add(e,"click",this.clickEventHandler,this)},d.prototype.unWireEvents=function(){var e=this.getWrapper();t.EventHandler.remove(e,"click",this.clickEventHandler)},d.prototype.getGroup=function(e,t){for(var r=this.levelColl[e.id],l=t?r.length-1:r.length,n=this.rule,o=0;o<l;o++)n=this.findGroupByIdx(r[o],n,0===o);return n},d.prototype.deleteGroup=function(e){var r,l,n=e,o=n.id,i=this.getGroup(n,!0),s=0,a={groupID:o,filterID:o};this.trigger("groupDelete",a);var u=n.querySelectorAll(".e-group-container");for(r=0,l=u.length;r<l;r++)delete this.levelColl[u[r].id];for(;null!==n.previousElementSibling;)n=n.previousElementSibling,s++;i.rules.splice(s,1),delete this.levelColl[o],t.detach(e)},d.prototype.deleteRule=function(e){for(var r=t.closest(e,".e-group-container"),l=this.getGroup(r),n=t.closest(e,".e-rule-container"),o=n,i={groupID:r.id,filterID:n.id},s=0;null!==n.previousElementSibling;)n=n.previousElementSibling,s++;l.rules.splice(s,1),this.trigger("ruleDelete",i),t.detach(o)},d.prototype.setGroupRules=function(e){this.reset(),this.groupIdCounter=1,this.ruleIdCounter=0,this.isImportRules=!0,this.rule=e,this.importRules(this.rule,this.element.querySelector(".e-group-container"),!0)},d.prototype.setRules=function(e){var r=t.extend({},e,{},!0);this.setGroupRules(r)},d.prototype.getRules=function(){return this.rule},d.prototype.deleteGroups=function(e){var t,r=e.length;for(t=0;t<r;t++)this.deleteGroup(document.getElementById(e[t]))},d.prototype.getFilteredRecords=function(){var e=(new n.Query).where(this.getPredicate(this.rule)),t=[];return new n.DataManager(this.dataSource).executeQuery(e).then(function(e){e.result.forEach(function(e){t.push(e)})}),t},d.prototype.deleteRules=function(e){var t,r=e.length;for(t=0;t<r;t++)this.deleteRule(document.getElementById(e[t]))},d.prototype.getDataManagerQuery=function(e){for(var t=this.getPredicate(e),r=[],l=0,o=Object.keys(this.columns);l<o.length;l++)r.push(this.columns[l].field);return e.rules.length?(new n.Query).select(r).where(t):(new n.Query).select(r)},d.prototype.getPredicate=function(e){for(var t,r,l,o=e.rules,i=!1,s=0,a=o.length;s<a;s++)if(Object.keys(o[s]).indexOf("rules")>-1)(r=this.getPredicate(o[s]))&&(t="and"===e.condition?t.and(r):t.or(r));else if(o[s].operator.length){l="date"===o[s].type?new Date(o[s].value):o[s].value;var u=o[s].operator.toLowerCase();if(i="contains"===u||"startswith"===u||"endswith"===u,0===s)(u.indexOf("in")>-1||u.indexOf("between")>-1)&&"contains"!==u?t=this.arrayPredicate(o[s]):""!==(p=l)&&(t=new n.Predicate(o[s].field,o[s].operator,l,i));else if("and"===e.condition)if((u.indexOf("in")>-1||u.indexOf("between")>-1)&&"contains"!==u)t=this.arrayPredicate(o[s],t,e.condition);else{p=l;t&&""!==p&&(t=t.and(o[s].field,o[s].operator,l,i))}else if((u.indexOf("in")>-1||u.indexOf("between")>-1)&&"contains"!==u)t=this.arrayPredicate(o[s],t,e.condition);else{var p=l;t&&""!==p&&(t=t.or(o[s].field,o[s].operator,l,i))}}return t},d.prototype.arrayPredicate=function(e,t,r){for(var l,o=e.value,i=0,s=o.length;i<s;i++)if(""!==o[i])if(0===i)switch(e.operator){case"between":l=new n.Predicate(e.field,"greaterthan",o[i]);break;case"notbetween":l=new n.Predicate(e.field,"lessthan",o[i]);break;case"in":l=new n.Predicate(e.field,"equal",o[i]);break;case"notin":l=new n.Predicate(e.field,"notequal",o[i])}else switch(e.operator){case"between":l=l.and(e.field,"lessthan",o[i]);break;case"notbetween":l=l.or(e.field,"greaterthan",o[i]);break;case"in":l=l.or(e.field,"equal",o[i]);break;case"notin":l=l.and(e.field,"notequal",o[i])}return l&&(t="and"===r?t.and(l):"or"===r?t.or(l):l),t},d.prototype.importRules=function(e,r,l){l||(r=this.renderGroup(e.condition,r));for(var n=e.rules,o=0,i=n.length;o<i;o++)Object.keys(n[o]).indexOf("rules")>-1?(r=this.renderGroup(n[o].condition,r),r=this.importRules(n[o],r,!0)):this.renderRule(n[o],r);return(r=t.closest(r,".e-rule-list"))&&(r=t.closest(r,".e-group-container")),r},d.prototype.renderGroup=function(e,t){this.addGroupElement(!0,t,e);var r=t.querySelectorAll(".e-group-container");return r[r.length-1]},d.prototype.renderRule=function(e,t){t.className.indexOf("e-group-container")>-1?this.addRuleElement(t,e):this.addRuleElement(t.querySelector(".e-group-container"),e)},d.prototype.getSqlString=function(e,t){var r=!1;t?t+="(":(t="",r=!0);for(var l=e.condition,n=0,o=e.rules.length;n<o;n++){if(e.rules[n].rules)t=this.getSqlString(e.rules[n],t);else{var i=e.rules[n],s="";i.value instanceof Array?s+="("+i.value+")":"startswith"===i.operator?s+='("'+i.value+'%")':"endswith"===i.operator?s+='("%'+i.value+'")':"contains"===i.operator?s+='("%'+i.value+'%")':"number"===i.type?s+=i.value:s+='"'+i.value+'"',t+=i.field+" "+this.operators[i.operator]+" "+s}n!==o-1&&(t+=" "+l+" ")}return r||(t+=")"),t},d.prototype.setRulesFromSql=function(e){var t=this.getRulesFromSql(e);this.setRules({condition:t.condition,rules:t.rules})},d.prototype.getRulesFromSql=function(e){return this.parser=[],this.sqlParser(e),this.rule={condition:"",rules:[]},this.processParser(this.parser,this.rule,[0])},d.prototype.getSqlFromRules=function(e){return this.getSqlString(e).replace(/"/g,"'")},d.prototype.sqlParser=function(e){var t,r=0;do{t=e.slice(r),r+=this.parseSqlStrings(t)}while(""!==t);return this.parser},d.prototype.parseSqlStrings=function(e){for(var t,r,l=["=","!=","<",">","<=",">="],n=["and","or"],o=["IN","NOT IN","LIKE","NOT LIKE"],i=0,s=l.length;i<s;i++)if(t=/^\w+$/.test(l[i])?"\\b":"",new RegExp("^("+l[i]+")"+t,"ig").exec(e))return this.parser.push(["Operators",l[i].toLowerCase()]),l[i].length;for(var i=0,s=n.length;i<s;i++)if(t=/^\w+$/.test(n[i])?"\\b":"",new RegExp("^("+n[i]+")"+t,"ig").exec(e))return this.parser.push(["Conditions",n[i].toLowerCase()]),n[i].length;for(var i=0,s=o.length;i<s;i++)if(t=/^\w+$/.test(o[i])?"\\b":"",new RegExp("^("+o[i]+")"+t,"ig").exec(e))return this.parser.push(["SubOperators",o[i].toLowerCase()]),o[i].length;return/^\(/.exec(e)?(this.parser.push(["Left","("]),1):/^\)/.exec(e)?(this.parser.push(["Right",")"]),1):/^`?([a-z_][a-z0-9_]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e)?(r=/^`?([a-z_][a-z0-9_]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e)[1],this.parser.push(["Literal",r]),r.length):/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)?(r=/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)[0],this.parser.push(["String",r]),r.length):/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)?(r=/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)[0],this.parser.push(["DoubleString",r]),r.length):/^[0-9]+(\.[0-9]+)?/.exec(e)?(r=/^[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Number",r]),r.length):1},d.prototype.getOperator=function(e,t){var r={"=":"equal","!=":"notequal","<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal"};return 0===e.indexOf("%")&&e.indexOf("%")===e.length-1?"contains":0===e.indexOf("%")&&e.indexOf("%")!==e.length-1?"startswith":0!==e.indexOf("%")&&e.indexOf("%")===e.length-1?"endswith":r[t]},d.prototype.processParser=function(e,t,r){for(var l,n,o,i,s,a,u,p,d,c,h=[],m=[],y=0,g=e.length;y<g;y++)if("Literal"===e[y][0]){if(l={label:e[y][1],field:e[y][1]},"SubOperators"===e[y+1][0]){for(l.operator=this.getOperator(e[y+3][1].replace(/'/g,""),e[y+1][1]),c=e[y+1][1],o=++y+1,i=g,o=y+1;o<i;o++){if("Right"===e[o][0]){y=o;break}"like"===c&&"String"===e[o][0]?(l.value=e[o][1].replace(/'/g,"").replace(/%/g,""),l.type="string"):"Number"===e[o][0]?h.push(Number(e[o][1])):"String"===e[o][0]&&m.push(e[o][1].replace(/'/g,""))}"like"!==c&&("Number"===e[o-1][0]?(l.value=h,l.type="integer"):"String"===e[o-1][0]&&(l.value=m,l.type="string"))}else"Operators"===e[y+1][0]&&(l.operator=this.getOperator(e[y+2][1],e[y+1][1]),"Number"===e[y+2][0]?(l.type="integer",l.value=Number(e[y+2][1])):(l.type="string",l.value=e[y+2][1].replace(/'/g,"")));t.rules.push(l)}else{if("Left"===e[y][0]){for(n={condition:"",rules:[]},this.parser=e.splice(y+1,g-(y+1)),d=0,a=t.rules.length,s=0;s<a;s++)t.rules[s].rules&&d++;return r.push(d),t.rules.push(n),n=this.processParser(this.parser,n,r),t}if("Conditions"===e[y][0])t.condition=e[y][1];else if("Right"===e[y][0]){for(this.parser=e.splice(y+1,g-(y+1)),r.pop(),t=this.rule,p=r.length,u=0;u<p;u++)t=this.findGroupByIdx(r[u],t,0===u);return this.processParser(this.parser,t,r)}}return t},p([t.Event()],d.prototype,"created",void 0),p([t.Event()],d.prototype,"beforeConditionChange",void 0),p([t.Event()],d.prototype,"beforeFieldChange",void 0),p([t.Event()],d.prototype,"beforeOperatorChange",void 0),p([t.Event()],d.prototype,"beforeValueChange",void 0),p([t.Event()],d.prototype,"conditionChanged",void 0),p([t.Event()],d.prototype,"fieldChanged",void 0),p([t.Event()],d.prototype,"valueChanged",void 0),p([t.Event()],d.prototype,"operatorChanged",void 0),p([t.Event()],d.prototype,"groupDelete",void 0),p([t.Event()],d.prototype,"ruleDelete",void 0),p([t.Event()],d.prototype,"groupInsert",void 0),p([t.Event()],d.prototype,"ruleInsert",void 0),p([t.Property(m)],d.prototype,"showButtons",void 0),p([t.Property(!1)],d.prototype,"summaryView",void 0),p([t.Property(!1)],d.prototype,"allowValidation",void 0),p([t.Property([])],d.prototype,"columns",void 0),p([t.Property("")],d.prototype,"cssClass",void 0),p([t.Property([])],d.prototype,"dataSource",void 0),p([t.Property("Horizontal")],d.prototype,"displayMode",void 0),p([t.Property(!1)],d.prototype,"enableRtl",void 0),p([t.Property(!1)],d.prototype,"enablePersistence",void 0),p([t.Property("Default")],d.prototype,"sortDirection",void 0),p([t.Property(5)],d.prototype,"maxGroupCount",void 0),p([t.Property("auto")],d.prototype,"height",void 0),p([t.Property("auto")],d.prototype,"width",void 0),p([t.Complex({condition:"and",rules:[]},h)],d.prototype,"rule",void 0),d=p([t.NotifyPropertyChanges],d)}(t.Component);return e.Columns=d,e.Rules=c,e.Rule=h,e.ShowButtons=m,e.QueryBuilder=y,e}({},ej.base,ej.buttons,ej.dropdowns,ej.data,ej.inputs,ej.calendars,ej.splitbuttons,ej.popups),this.ejs=ej;
//# sourceMappingURL=ej2-querybuilder.min.js.map
