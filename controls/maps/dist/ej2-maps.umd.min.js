!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-svg-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-pdf-export")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-svg-base","@syncfusion/ej2-data","@syncfusion/ej2-pdf-export"],t):t(e.ej={},e.ej2Base,e.ej2SvgBase,e.ej2Data,e.ej2PdfExport)}(this,function(e,t,i,o,n){"use strict";function r(e,t){return null!==e&&void 0!==e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function a(e){var t=e.element.clientWidth,i=e.element.clientHeight;e.availableSize=new Oe(r(e.width,t)||t||600,r(e.height,i)||i||(e.isDevice?Math.min(window.innerWidth,window.innerHeight):450))}function l(e){e.renderer=new i.SvgRenderer(e.element.id),a(e),e.svgObject=e.renderer.createSvg({id:e.element.id+"_svg",width:e.availableSize.width,height:e.availableSize.height})}function s(e,t,i){var o=i.getBoundingClientRect(),n=i.ownerDocument.defaultView.pageXOffset,r=i.ownerDocument.defaultView.pageYOffset,a=i.ownerDocument.documentElement.clientTop,l=i.ownerDocument.documentElement.clientLeft,s=o.left+n-l,p=o.top+r-a;return new Re(e-s,t-p)}function p(e){return e*(Math.PI/180)}function h(e){return e*(180/Math.PI)}function d(e,i,o,n,r){var a,l,s,d,c,f,v=new Oe(r.mapAreaRect.width,r.mapAreaRect.height),x=r.baseMapBounds.longitude,S=r.baseMapBounds.latitude,w=p(e),M=p(i),O=r.projectionType,_=r.isTileMap?256*Math.pow(2,1):t.isNullOrUndefined(o)?Math.min(v.width,v.height):Math.min(v.width,v.height)*o;if("Normal"===n.geometryType)a=t.isNullOrUndefined(o)?i:Math.abs((i-x.min)*o),l=t.isNullOrUndefined(o)?e:Math.abs((S.max-e)*o);else if("Geographic"===n.geometryType){switch(O){case"Mercator":var C=new _e(_/2,_/2);a=C.x+i*(_/360);var P=b(Math.sin(p(e)),-.9999,.9999);l=C.y+.5*Math.log((1+P)/(1-P))*(-_/(2*Math.PI));break;case"Winkel3":c=((s=g(M,w)).x+M/(Math.PI/2))/2,d=(s.y+w)/2;break;case"Miller":c=M,d=1.25*Math.log(Math.tan(Math.PI/4+.4*w));break;case"Eckert3":c=2/(f=Math.sqrt(Math.PI*(4+Math.PI)))*M*(1+Math.sqrt(1-4*w*w/(Math.PI*Math.PI))),d=4/f*w;break;case"AitOff":c=(s=g(M,w)).x,d=s.y;break;case"Eckert5":c=M*(1+Math.cos(w))/Math.sqrt(2+Math.PI),d=2*w/Math.sqrt(2+Math.PI);break;case"Equirectangular":c=M,d=w;break;case"Eckert6":f=(1+Math.PI/2)*Math.sin(w);for(var L=1/0,T=0;T<10&&Math.abs(L)>1e-6;T++)w-=L=(w+Math.sin(w)-f)/(1+Math.cos(w));f=Math.sqrt(2+Math.PI),c=M*(1+Math.cos(w))/f,d=2*w/f}a="Mercator"===O?a:y(m(r,h(c)),3),l="Mercator"===O?l:-y(u(r,h(d)),3)}return new _e(a,l)}function c(e,t,i,o){var n=256*Math.pow(2,t),r=(e.x+180)/360,a=Math.sin(e.y*Math.PI/180),l=.5-Math.log((1+a)/(1-a))/(4*Math.PI),s=e.x,p=e.y;return o&&(s=r*n+.5+i.x,p=l*n+.5+i.y),{x:s,y:p}}function m(e,i){var o=e.baseMapBounds.longitude,n=t.isNullOrUndefined(e.baseSize)?e.mapAreaRect.width:e.mapAreaRect.width+Math.abs(e.baseSize.width-e.mapAreaRect.width)/2;return Math.round(n*(i-o.min)/(o.max-o.min)*100)/100}function u(e,t){var i=e.baseMapBounds.latitude;return Math.round(e.mapAreaRect.height*(t-i.min)/(i.max-i.min)*100)/100}function g(e,t){var i=Math.cos(t),o=f(v(i*Math.cos(e/=2)));return new _e(2*i*Math.sin(e)*o,Math.sin(t)*o)}function y(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}function f(e){return e/Math.sin(e)}function v(e){return Math.acos(e)}function b(e,i,o){return t.isNullOrUndefined(i)||(e=Math.max(e,i)),t.isNullOrUndefined(o)||(e=Math.min(e,o)),e}function x(e,i){var o=document.getElementById("mapsmeasuretext");return null===o&&(o=t.createElement("text",{id:"mapsmeasuretext"}),document.body.appendChild(o)),o.innerHTML=e,o.style.position="absolute",o.style.fontSize=i.size,o.style.fontWeight=i.fontWeight,o.style.fontStyle=i.fontStyle,o.style.fontFamily=i.fontFamily,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",new Oe(o.clientWidth,o.clientHeight)}function S(e,t,o,n,r){void 0===r&&(r=!1);var a,l,s={id:e.id,x:e.x,y:e.y,fill:o,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:t.opacity,"dominant-baseline":e.baseLine},p="string"==typeof e.text?e.text:r?e.text[e.text.length-1]:e.text[0],h=new i.SvgRenderer(""),d=h.createText(s,p);if(d.style["user-select"]="none",d.style["-moz-user-select"]="none",d.style["-webkit-touch-callout"]="none",d.style["-webkit-user-select"]="none",d.style["-khtml-user-select"]="none",d.style["-ms-user-select"]="none",d.style["-o-user-select"]="none","string"!=typeof e.text&&e.text.length>1)for(var c=1,m=e.text.length;c<m;c++)l=x(e.text[c],t).height,a=h.createTSpan({x:e.x,id:e.id,y:e.y+(r?-c*l:c*l)},r?e.text[e.text.length-(c+1)]:e.text[c]),d.appendChild(a);return n.appendChild(d),d}function w(e,i,o,n,r){for(var a=t.createElement("div",{id:i,styles:"position: absolute;pointer-events: auto;"});e.length>0;)a.appendChild(e[0]);for(var l=a.innerHTML,s=Object.keys(o),p=0;p<s.length;p++)"latitude"!==s[p].toLowerCase()&&"longitude"!==s[p].toLowerCase()&&(l=l.replace(new RegExp("{{:"+s[p]+"}}","g"),o[s[p].toString()]));return a.innerHTML=l,a}function M(e,i,o,n,r){for(var a=(t.isNullOrUndefined(e.childElementCount)?e[0]:e).outerHTML,l=Object.keys(o),s=0;s<l.length;s++)a=a.replace(new RegExp("{{:"+l[s]+"}}","g"),o[l[s].toString()]);return t.createElement("div",{id:i,innerHTML:a,styles:"position: absolute"})}function O(e,i,o,n,r,a,l){var s,p,h,d,c,m,u=r.size,g=r.borderColor,y=parseFloat(r.borderWidth),f=r.fill,v=r.dashArray,b={color:g,width:y},x=r.opacity;if(c=new Te(n,f,y,g,x,v,""),"Circle"===e){var S=(u.width+u.height)/4;d=new ke(n,f,b,x,o.x,o.y,S,v),s=l.renderer.drawCircle(d)}else"Rectangle"===e?(p=o.x-u.width/2,h=o.y-u.height/2,m=new Ee(n,f,b,x,new je(p,h,u.width,u.height),null,null,"",v),s=l.renderer.drawRectangle(m)):"Image"===e?(p=o.x-u.width/2,h=o.y-u.height/2,t.merge(c,{href:i,height:u.height,width:u.width,x:p,y:h}),s=l.renderer.drawImage(c)):s=E(l,e,c,u,o,a);return s}function _(e,i,o,n,r){for(var a,l,s=[],p=[],h=0,d=0,c=e.markerClusterSettings.labelStyle,m=0,u=0;u<i.childElementCount;u++){var g=i.childNodes[u];s.push(g.getBoundingClientRect())}for(var y=function(u){if(!t.isNullOrUndefined(s[u])){for(var g=u+1;g<s.length;g++)t.isNullOrUndefined(s[g])||s[u].left>s[g].right||s[u].right<s[g].left||s[u].top>s[g].bottom||s[u].bottom<s[g].top||p.push(s[g]);h=s[u].x,d=s[u].y;for(var y=0;y<p.length;y++)for(var f=0;f<s.length;f++)if(!t.isNullOrUndefined(s[f])&&p[y].x===s[f].x){delete s[f];for(var v=0;v<i.childElementCount;v++){var b=i.childNodes[v];p[y].x===b.getBoundingClientRect().x&&(i.childNodes[v].style.visibility="hidden",i.childNodes[u].style.visibility="hidden")}}if(p.length>0){var x=o.element.getBoundingClientRect();h=Math.abs(x.x-h)+10,d=Math.abs(x.y-d)+10;var w=o.isTileMap?new Object:H(o,e,!1),M=o.isTileMap?{x:0,y:0}:0!==o.translatePoint.x?o.translatePoint:w.location,_=parseInt(i.childNodes[u].id.split("_dataIndex_")[1].split("_")[0],10),C=parseInt(i.childNodes[u].id.split("_MarkerIndex_")[1].split("_")[0],10),P=e.markerClusterSettings,L={size:new Oe(P.width,P.height),fill:P.fill,borderColor:P.border.color,borderWidth:P.border.width,opacity:P.opacity,dashArray:P.dashArray},T={cancel:!1,name:wt,fill:P.fill,height:P.height,width:P.width,imageUrl:P.imageUrl,shape:P.shape,data:void 0,maps:o,cluster:P,border:P.border};if(o.isBlazor){T.data,T.maps,T.cluster;var I=Me(T,["data","maps","cluster"]);T=I}L.fill=T.fill,L.size.width=T.width,L.size.height=T.height,L.imageUrl=T.imageUrl,L.shape=T.shape,L.borderColor=T.border.color,L.borderWidth=T.border.width,o.trigger("markerClusterRendering",T,function(e){h=o.isTileMap?h:i.id.indexOf("_Markers_Group")>-1?h:(h+M.x)*o.mapScaleValue,d=o.isTileMap?d:i.id.indexOf("_Markers_Group")>-1?d:(d+M.y)*o.mapScaleValue;var t=o.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+C+"_dataIndex_"+_+"_cluster_"+m++,s=o.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+C+"_dataIndex_"+_+"_cluster_"+m+"_datalabel_"+m,u=O(T.shape,T.imageUrl,{x:0,y:0},t,L,r,o);u.setAttribute("transform","translate( "+h+" "+d+" )"),a=new Le(s,0,3.75,"middle",(p.length+1).toString(),"",""),(l=S(a,c,c.color,r)).setAttribute("transform","translate( "+h+" "+d+" )"),r.appendChild(u),r.appendChild(l)})}}p=[]},f=0;f<s.length;f++)y(f);return i}function C(e,t,i,o,n,r,a,l,s,p,h){var d={size:new Oe(e.width,e.height),fill:e.fill,borderColor:e.border.color,borderWidth:e.border.width,opacity:t.opacity,dashArray:t.dashArray},c=O(e.shape,e.imageUrl,{x:0,y:0},a,d,h,p),m=(p.isTileMap?n.x:(n.x+r.x)*s)+l.x,u=(p.isTileMap?n.y:(n.y+r.y)*s)+l.y;c.setAttribute("transform","translate( "+m+" "+u+" )"),h.appendChild(c);var g=i.length-1===o?"marker":null,y=new _e(m,u);return t.animationDuration>0&&ie(c,t.animationDelay,t.animationDuration,y,p,g),h}function P(e,t,i,o,n,r,a,l,s,p){if((t=V(e.template))&&t(p).length){for(var h=w(t(p),i,o),d=0;d<h.children.length;d++)h.children[d].style.pointerEvents="none";h.style.left=(p.isTileMap?a.x:Math.abs(p.baseMapRectBounds.min.x-a.x)*l)+s.x+"px",h.style.top=(p.isTileMap?a.y:Math.abs(p.baseMapRectBounds.min.y-a.y)*l)+s.y+"px",r.appendChild(h)}return r}function L(e,t){return t&&t.appendChild(e),e}function T(e,t,i){return L(e.renderer.drawCircle(t),i)}function I(e,t,i){return L(e.renderer.drawRectangle(t),i)}function E(e,t,i,o,n,r){var a;switch(t){case"Balloon":a=k(e,i,o,n,r);break;case"Cross":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)+" M "+(n.x-o.width/2)+" "+n.y+" L "+(n.x+o.width/2)+" "+n.y;break;case"Diamond":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+n.y+" L "+n.x+" "+(n.y+o.height/2)+" L "+(n.x-o.width/2)+" "+n.y+" Z";break;case"Star":i.d="M "+(n.x+o.width/3)+" "+(n.y-o.height/2)+" L "+(n.x-o.width/2)+" "+(n.y+o.height/6)+" L "+(n.x+o.width/2)+" "+(n.y+o.height/6)+" L "+(n.x-o.width/3)+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)+" L "+(n.x+o.width/3)+" "+(n.y-o.height/2)+" Z";break;case"Triangle":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+(n.y+o.height/2)+" L "+(n.x-o.width/2)+" "+(n.y+o.height/2)+" Z";break;case"HorizontalLine":i.d=" M "+(n.x-o.width/2)+" "+n.y+" L "+(n.x+o.width/2)+" "+n.y;break;case"VerticalLine":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)}return"Balloon"===t?a:e.renderer.drawPath(i)}function k(e,t,i,o,n){var r=i.width,a=i.height;o.x-=r/2,o.y-=a,t.d="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";var l=e.renderer.drawPath(t),s=i.width/22.5,p=i.height/30;l.setAttribute("transform","translate("+o.x+", "+o.y+") scale("+s+", "+p+")");var h=e.renderer.createGroup({id:t.id});return L(l,h),L(h,n)}function N(e,i,o,n){if(!t.isNullOrUndefined(i))for(var r=0;r<e.length;r++){var a=B(e[r][o],n,i);if(e[r][o]===i[a])return r}return null}function B(e,i,o){if(!t.isNullOrUndefined(e)&&!t.isNullOrUndefined(o)&&!t.isNullOrUndefined(i))for(var n="[object Array]"===Object.prototype.toString.call(i)?i:[i],r=0;r<n.length;r++)if(e===o[n[r]])return n[r];return null}function z(e,t,i){for(var o=[],n=0;n<e.length;n++){var r=e[n];t<=r.y&&i>=r.y&&o.push(r)}return o}function F(e,t,i,o,n){var r=(t-e)/100*(100/(n-o)*(i-o))+e;return n===o&&(r=(t-e)/100+e),r}function R(e,t){if(!e.length)return null;for(var i,o,n,r,a=e.length,l=0,s=0,p=0,h=0;h<=a-1;h++)i=e[h].x,o="Mercator"===t?e[h].y:-e[h].y,h===a-1?(n=e[0].x,r="Mercator"===t?e[0].y:-e[0].y):(n=e[h+1].x,r="Mercator"===t?e[h+1].y:-e[h+1].y),l+=Math.abs(i*r-n*o),s+=Math.abs((i+n)*(i*r-n*o)),p+=Math.abs((o+r)*(i*r-n*o));s*=1/(4*(l*=.5)),p*=1/(4*l);var d={x:0,y:0},c={x:0,y:0},m={x:0,y:0},u={x:0,y:0},g={x:0,y:0},y={x:0,y:0},f={x:0,y:0},v={x:0,y:0},b=0;for(h=0;h<=a-1;h++){var x=e[h];x.y="Mercator"===t?x.y:-x.y,x.y>p?x.x<s&&s-x.x<s-g.x?g={x:x.x,y:x.y}:x.x>s&&(0===y.x||x.x-s<y.x-s)&&(y={x:x.x,y:x.y}):x.x<s&&s-x.x<s-f.x?f={x:x.x,y:x.y}:x.x>s&&(0===v.x||x.x-s<v.x-s)&&(v={x:x.x,y:x.y}),b=y.y-v.y+(y.y-v.y)/4,x.x>s?x.y<p&&p-x.y<p-d.y?d={x:x.x,y:x.y}:x.y>p&&(0===c.y||x.y-p<c.y-p)&&(c={x:x.x,y:x.y}):x.y<p&&p-x.y<p-m.y?m={x:x.x,y:x.y}:x.y>p&&(0===u.y||x.y-p<u.y-p)&&(u={x:x.x,y:x.y})}return{x:s,y:p,rightMin:d,rightMax:c,leftMin:m,leftMax:u,points:e,topMax:v,topMin:f,bottomMax:y,bottomMin:g,height:b}}function j(e){var i=!1;return"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(function(e,o){t.isNullOrUndefined(e.geometry)||"Path"!==e.geometry.type||(i=!0)}),i}function A(e,t,i){var o=t,n=x(t,i).width;if(n>e)for(var r=t.length-1;r>=0;--r)if(o=t.substring(0,r)+"...",(n=x(o,i).width)<=e||o.length<4)return o.length<4&&(o=" "),o;return o}function U(e,t,i,o){var n,r;switch(t){case"Near":n=e.x;break;case"Center":n="title"===o?e.width/2-i.width/2:e.x+e.width/2-i.width/2;break;case"Far":n="title"===o?e.width-e.y-i.width:e.x+e.width-i.width}return r="title"===o?e.y+i.height/2:e.y+e.height/2+i.height/2,new _e(n,r)}function D(e){var i=document.getElementById(e);return i?t.remove(i):null}function H(e,i,o){t.isNullOrUndefined(e.mapScaleValue)&&(e.mapScaleValue=e.zoomSettings.zoomFactor);var n,r,a,l=o?1:e.mapScaleValue,s=e.baseMapRectBounds.min,p=e.baseMapRectBounds.max,h=e.mapAreaRect,c=(e.availableSize,Math.abs(p.x-s.x)),m=Math.abs(s.y-p.y),u=o?1:e.zoomSettings.zoomFactor,g=e.centerPosition;if(t.isNullOrUndefined(g.longitude)||t.isNullOrUndefined(g.latitude))t.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType?(c*=a=parseFloat(Math.min(h.width/c,h.height/m).toFixed(2)),m*=a,n=h.x+(-s.x+(h.width/2-c/2)),r=h.y+(-s.y+(h.height/2-m/2))):(a=e.scale,n=e.zoomTranslatePoint.x,r=e.zoomTranslatePoint.y);else{var y=(c+Math.abs(e.mapAreaRect.width-c))/2/u,f=(m+Math.abs(e.mapAreaRect.height-m))/2/u,v=d(g.latitude,g.longitude,e.mapLayerPanel.calculateFactor(i),i,e);t.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType?(n=-v.x+y,r=-v.y+f,a=l):(a=e.scale,n=e.zoomTranslatePoint.x,r=e.zoomTranslatePoint.y)}return{scale:a,location:new _e(n,r)}}function Z(e,i,o){t.isNullOrUndefined(e.mapScaleValue)&&(e.mapScaleValue=e.zoomSettings.zoomFactor);var n,r,a,l=o?1:e.mapScaleValue,s=e.mapAreaRect,p=e.baseMapRectBounds.min,h=e.baseMapRectBounds.max,c=o?1:e.mapScaleValue,m=Math.abs(h.x-p.x),u=Math.abs(p.y-h.y),g=e.centerPosition;if(t.isNullOrUndefined(g.longitude)||t.isNullOrUndefined(g.latitude)){var y=0===e.zoomSettings.zoomFactor?1:e.zoomSettings.zoomFactor;a=y=y>10?10:y;var f=0===e.mapScaleValue?1:e.mapScaleValue>10?10:e.mapScaleValue;w=s.x+(-p.x+(s.width/2-m/2)),S=s.y+(-p.y+(s.height/2-u/2));if(!t.isNullOrUndefined(e.zoomTranslatePoint)||!t.isNullOrUndefined(e.previousProjection))if(e.previousProjection!==e.projectionType){var v=[],b={x:w,y:S};v.push(b);for(var x=1;x<10;x++){b={x:v[x-1].x-(s.width/x-s.width/(x+1))/2,y:v[x-1].y-(s.height/x-s.height/(x+1))/2},v.push(b)}w=v[y-1].x,S=v[y-1].y}else w=e.zoomTranslatePoint.x,S=e.zoomTranslatePoint.y,y!==f&&(a=f);n=w,r=S}else{var S=(u+Math.abs(e.mapAreaRect.height-u))/2/c,w=(m+Math.abs(e.mapAreaRect.width-m))/2/c,M=d(g.latitude,g.longitude,e.mapLayerPanel.calculateFactor(i),i,e);t.isNullOrUndefined(e.zoomTranslatePoint)&&t.isNullOrUndefined(e.previousProjection)?(n=-M.x+w,r=-M.y+S):e.previousProjection!==e.projectionType?(n=-M.x+w,r=-M.y+S):(n=e.zoomTranslatePoint.x,r=e.zoomTranslatePoint.y),a=0!==l?l:1}return{scale:a,location:new _e(n,r)}}function G(e){return document.getElementById(e)}function W(e,t){return e.formatFunction=e.intl.getNumberFormat({format:e.format,useGrouping:e.useGroupingSeparator}),e.formatFunction(t)}function V(e){var i=null;try{document.querySelectorAll(e).length&&(i=t.compile(document.querySelector(e).innerHTML.trim()))}catch(o){i=t.compile(e)}return i}function q(e){return document.getElementById(e)}function X(e,t){var i,o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),n=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),r=t.layers[o],a=r.layerData[n].property;return r.dataSource&&(i=r.dataSource[N(r.dataSource,a,r.shapeDataPath,r.shapePropertyPath)]),{shapeData:a,data:i}}function Y(e,t,i,o){var n=X(e,i),r={cancel:!1,name:o,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:n.shapeData,data:n.data,target:e};if(i.isBlazor){r.shapeData,r.data;r=Me(r,["shapeData","data"])}return i.trigger(o,r),r}function J(e){return document.getElementsByClassName(e)}function K(e,t){var i=null;return document.getElementById(t)&&(i=document.getElementById(t).querySelector("#"+e)),i}function Q(e,t,i,o){for(var n,r=o.layers[e].shapeData.features,a=0;a<r.length;a++)if(r[a].properties.name===t){n=o.element.id+"_LayerIndex_"+e+"_shapeIndex_"+a+"_dataIndex_undefined";break}return q(n)}function $(e,i,o){return t.createElement("style",{id:e,innerHTML:"."+i+"{fill:"+o.fill+";opacity:"+o.opacity.toString()+";stroke-width:"+o.border.width.toString()+";stroke:"+o.border.color+";}"})}function ee(e,t,i){q(e).innerHTML="."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+"}"}function te(e){e.removeAttribute("class")}function ie(e,i,o,n,r,a,l){void 0===l&&(l=0);var s=n.x,p=n.y,h=0,d=e.getAttribute("transform")||"";new t.Animation({}).animate(e,{duration:o,delay:i,progress:function(t){t.timeStamp>t.delay&&(h=(t.timeStamp-t.delay)/t.duration,e.setAttribute("transform","translate( "+(s-l*h)+" "+(p-l*h)+" ) scale("+h+")"))},end:function(t){if(e.setAttribute("transform",d),a){var i={cancel:!1,name:Et,element:a,maps:r.isBlazor?null:r};r.trigger(Et,i)}}})}function oe(e){D(e)}function ne(e,i,o,n,r,a,l,s,p){for(var h=document.getElementById(l),d=x(e,{fontFamily:"Segoe UI",size:"8px",fontStyle:"Normal",fontWeight:"Regular"}).width,c=e.split(" "),m=c[0].length,u=1;u<c.length;u++)m<c[u].length&&(m=c[u].length);h||(h=t.createElement("div",{id:l,styles:'background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center'})),o<r-d?o=o:o>r-d&&o<r-8*m?d=r-o:o>=r-8*m&&(o>d?o-=d:(d=o,o=0));var g=i.split("px");re(h,e,o,n,g,d,r,s);h.clientHeight+2*parseInt(g[0],10)>a&&(d=o,o=0),re(h,e,o,n,g,d,r,s),p&&setTimeout(oe,5e3,l)}function re(e,t,i,o,n,r,a,l){e.innerHTML=t,e.style.top=(2*parseInt(n[0],10)).toString()+"px",e.style.left=i.toString()+"px",e.style.width=r.toString()+"px",e.style.maxWidth=a.toString()+"px",e.style.wordWrap="break-word",l.appendChild(e)}function ae(e,i,o,n,r){var a=q(e),l="top:"+o.toString()+"px;left:"+n.toString()+"px;color: #000000; background:#FFFFFF;position:absolute;border:1px solid #707070;font-size:"+r+";border-radius:2px;";a?(a.setAttribute("innerHTML","&nbsp;"+i+"&nbsp;"),a.setAttribute("styles",l)):(a=t.createElement("div",{id:e,innerHTML:"&nbsp;"+i+"&nbsp;",styles:l}),document.body.appendChild(a))}function le(e,t,o,n,r){var a=new i.SvgRenderer(""),l=se(e,o,t,r,n);return a["draw"+l.functionName](l.renderOption)}function se(e,i,o,n,r){var a,l="Path",s=i.width,p=i.height,h=e.x,d=e.y,c=e.x+-s/2,m=e.y+-p/2;switch(o){case"Circle":case"Bubble":l="Ellipse",t.merge(n,{rx:s/2,ry:p/2,cx:h,cy:d});break;case"VerticalLine":a="M "+h+" "+(d+p/2)+" L "+h+" "+(d+-p/2),t.merge(n,{d:a});break;case"Diamond":a="M "+c+" "+d+" L "+h+" "+(d+-p/2)+" L "+(h+s/2)+" "+d+" L "+h+" "+(d+p/2)+" L "+c+" "+d+" z",t.merge(n,{d:a});break;case"Rectangle":a="M "+c+" "+(d+-p/2)+" L "+(h+s/2)+" "+(d+-p/2)+" L "+(h+s/2)+" "+(d+p/2)+" L "+c+" "+(d+p/2)+" L "+c+" "+(d+-p/2)+" z",t.merge(n,{d:a});break;case"Triangle":a="M "+c+" "+(d+p/2)+" L "+h+" "+(d+-p/2)+" L "+(h+s/2)+" "+(d+p/2)+" L "+c+" "+(d+p/2)+" z",t.merge(n,{d:a});break;case"InvertedTriangle":a="M "+(h+s/2)+" "+(d-p/2)+" L "+h+" "+(d+p/2)+" L "+(h-s/2)+" "+(d-p/2)+" L "+(h+s/2)+" "+(d-p/2)+" z",t.merge(n,{d:a});break;case"Pentagon":for(var u=void 0,g=void 0,y=0;y<=5;y++)u=s/2*Math.cos(Math.PI/180*(72*y)),g=s/2*Math.sin(Math.PI/180*(72*y)),a=0===y?"M "+(h+u)+" "+(d+g)+" ":a.concat("L "+(h+u)+" "+(d+g)+" ");a=a.concat("Z"),t.merge(n,{d:a});break;case"Star":a="M "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" L "+(e.x-i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x+i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x-i.width/3)+" "+(e.y-i.height/2)+" L "+e.x+" "+(e.y+i.height/2)+" L "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" Z",t.merge(n,{d:a});break;case"Cross":a="M "+c+" "+d+" L "+(h+s/2)+" "+d+" M "+h+" "+(d+p/2)+" L "+h+" "+(d+-p/2),t.merge(n,{d:a});break;case"Image":l="Image",t.merge(n,{href:r,height:p,width:s,x:c,y:m})}return{renderOption:n,functionName:l}}function pe(e,t){var i,o;return t.appendChild(e),i=e.offsetWidth,o=e.offsetHeight,t.removeChild(e),new Oe(i,o)}function he(e,t,i,o){for(var n,r=0;r<e.childElementCount;r++)if((n=e.childNodes[r]).id.indexOf("_NavigationGroup")>-1)de(n,t,i,o);else{var a=o.layersCollection[t].shapeSettings.border.width;n.setAttribute("stroke-width",(a/i).toString())}}function de(e,t,i,o){for(var n,r=0;r<e.childElementCount;r++)if("path"===(n=e.childNodes[r]).tagName){var a=o.layersCollection[t].navigationLineSettings[parseFloat(n.id.split("_NavigationIndex_")[1].split("_")[0])].width;n.setAttribute("stroke-width",(a/i).toString())}}function ce(e){for(var t=[],i=e.touches,o=0;o<i.length;o++)t.push({pageX:i[o].pageX,pageY:i[o].pageY});return t}function me(e,t){var i=ue(e[0],e[1]);return ue(t[0],t[1])/i}function ue(e,t){var i=e.pageX-t.pageX,o=e.pageY-t.pageY;return Math.sqrt(i*i+o*o)}function ge(e,t){var i=t.element.getBoundingClientRect(),o=i.top+document.defaultView.pageXOffset,n=i.left+document.defaultView.pageYOffset;return Array.prototype.slice.call(e).map(function(e){return{x:e.pageX-n,y:e.pageY-o}})}function ye(e){return{x:e.map(function(e){return e.x}).reduce(fe)/e.length,y:e.map(function(e){return e.y}).reduce(fe)/e.length}}function fe(e,t){return e+t}function ve(e,t,i,o,n,r,a){var l=0,s=a.previousPoint,p=a.previousScale,h=n-p,d=new Re(0,0),c=1;if(n!==p){var m=function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)}(s,o),u=function(e,t){return null===t?e.x:e.y-t*e.x}(s,m),g=o.x-s.x,y=o.y-s.y;be(e,t,i,function(e){e.timeStamp>e.delay&&(l=(e.timeStamp-e.delay)/e.duration,c=p+l*h,d.x=s.x+l*g/(c/n),d.y=null==m?s.y+l*y:m*d.x+u,e.element.setAttribute("transform","scale( "+c+" ) translate( "+d.x+" "+d.y+" )"),a.translatePoint=d,a.scale=c,a.zoomModule.processTemplate(o.x,o.y,c,a))},function(){a.translatePoint=o,a.scale=n,e.setAttribute("transform","scale( "+n+" ) translate( "+o.x+" "+o.y+" )"),a.zoomModule.processTemplate(o.x,o.y,n,a)})}else e.setAttribute("transform","scale( "+n+" ) translate( "+o.x+" "+o.y+" )")}function be(e,t,i,o,n){var r,a=this,l=null,s=function(t){l||(l=t);var p=t-l;p<i?(o.call(a,{element:e,delay:0,timeStamp:p,duration:i}),window.requestAnimationFrame(s)):(window.cancelAnimationFrame(r),n.call(a,{element:e}))};r=window.requestAnimationFrame(s)}function xe(e,t,i,o){var n=0,r=e.getAttribute("transform").split(" ");2===r.length&&(r[2]=r[1].split(")")[0],r[1]=r[0].split("(")[1]);var a=new Re(parseInt(r[1],10),parseInt(r[2],10)),l=o.x-a.x,s=o.y-a.y,p=new Re(0,0);be(e,0,i,function(e){e.timeStamp>e.delay&&(n=(e.timeStamp-e.delay)/e.duration,p.x=a.x+n*l,p.y=a.y+n*s,e.element.setAttribute("transform","translate( "+p.x+" "+p.y+" )"))},function(){e.setAttribute("transform","translate( "+o.x+" "+o.y+" )")})}var Se,we=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Me=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},Oe=function(){return function(e,t){this.width=e,this.height=t}}(),_e=function(){return function(e,t){this.x=e,this.y=t}}(),Ce=function(){return function(e,t){this.min=e,this.max=t}}(),Pe=function(){return function(e,t){this.latitude=new Ce(e.min,e.max),this.longitude=new Ce(t.min,t.max)}}(),Le=function(){return function(e,t,i,o,n,r,a){void 0===r&&(r=""),this.transform="",this.baseLine="auto",this.id=e,this.text=n,this.transform=r,this.anchor=o,this.x=t,this.y=i,this.baseLine=a}}(),Te=function(){return function(e,t,i,o,n,r,a){this.id=e,this.opacity=n,this.fill=t,this.stroke=o,this["stroke-width"]=i,this["stroke-dasharray"]=r,this.d=a}}(),Ie=function(){return function(e,t,i){this.r=e,this.g=t,this.b=i}}(),Ee=function(e){function t(t,i,o,n,r,a,l,s,p){var h=e.call(this,t,i,o.width,o.color,n,p)||this;return h.y=r.y,h.x=r.x,h.height=r.height,h.width=r.width,h.rx=a||0,h.ry=l||0,h.transform=s||"",h["stroke-dasharray"]=p,h}return we(t,e),t}(Te),ke=function(e){function t(t,i,o,n,r,a,l,s){var p=e.call(this,t,i,o.width,o.color,n)||this;return p.cy=a,p.cx=r,p.r=l,p["stroke-dasharray"]=s,p}return we(t,e),t}(Te),Ne=function(e){function t(t,i,o,n,r,a,l){void 0===a&&(a=1),void 0===l&&(l="");var s=e.call(this,t,o,n,r,a,l)||this;return s.points=i,s}return we(t,e),t}(Te),Be=function(e){function t(t,i,o,n,r,a,l){return void 0===a&&(a=1),void 0===l&&(l=""),e.call(this,t,i,o,n,r,a,l)||this}return we(t,e),t}(Ne),ze=function(e){function t(t,i,o,n,r,a,l){void 0===a&&(a=1),void 0===l&&(l="");var s=e.call(this,t,o,n,r,a,l)||this;return s.x1=i.x1,s.y1=i.y1,s.x2=i.x2,s.y2=i.y2,s}return we(t,e),t}(Te),Fe=function(){return function(e,t,i,o){this.x1=e,this.y1=t,this.x2=i,this.y2=o}}(),Re=function(){return function(e,t){this.x=e,this.y=t}}(),je=function(){return function(e,t,i,o){this.x=e,this.y=t,this.width=i,this.height=o}}(),Ae=function(){return function(e,t,i,o,n,r,a,l,s){void 0===r&&(r="userSpaceOnUse"),void 0===a&&(a="userSpaceOnUse"),void 0===l&&(l=""),void 0===s&&(s=""),this.id=e,this.x=t,this.y=i,this.width=o,this.height=n,this.patternUnits=r,this.patternContentUnits=a,this.patternTransform=l,this.href=s}}(),Ue=function(){return function(e,t,i,o,n){this.dataOptions=e,this.type=t||"GET",this.async=i||!0,this.contentType=o,this.sendData=n}}();!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Se||(Se={}));var De;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"}}(De||(De={}));var He;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"}}(He||(He={}));var Ze;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#000000",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Ze||(Ze={}));var Ge;!function(e){e.mapsTitleFont={fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",size:"14px",fontStyle:"Medium",color:"#FFFFFF"},e.mapsSubTitleFont={size:"13px",color:"#FFFFFF",fontWeight:"Medium",fontFamily:"Roboto, Noto, Sans-serif",fontStyle:"Medium"},e.tooltipLabelFont={size:"12px",color:"#282727",fontWeight:"Regular",fontFamily:"Roboto",fontStyle:"Regular"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",color:"#DADADA",fontStyle:"Medium"}}(Ge||(Ge={}));var We=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ve=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},qe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property("")],i.prototype,"content",void 0),Ve([t.Property("0px")],i.prototype,"x",void 0),Ve([t.Property("0px")],i.prototype,"y",void 0),Ve([t.Property("None")],i.prototype,"verticalAlignment",void 0),Ve([t.Property("None")],i.prototype,"horizontalAlignment",void 0),Ve([t.Property("-1")],i.prototype,"zIndex",void 0),i}(t.ChildProperty),Xe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property("Start")],i.prototype,"position",void 0),Ve([t.Property("false")],i.prototype,"showArrow",void 0),Ve([t.Property(2)],i.prototype,"size",void 0),Ve([t.Property("black")],i.prototype,"color",void 0),Ve([t.Property(0)],i.prototype,"offSet",void 0),i}(t.ChildProperty),Ye=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property("12px")],i.prototype,"size",void 0),Ve([t.Property(null)],i.prototype,"color",void 0),Ve([t.Property("Roboto, Noto, Sans-serif")],i.prototype,"fontFamily",void 0),Ve([t.Property("Medium")],i.prototype,"fontWeight",void 0),Ve([t.Property("Medium")],i.prototype,"fontStyle",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),Je=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property("")],i.prototype,"color",void 0),Ve([t.Property(0)],i.prototype,"width",void 0),i}(t.ChildProperty),Ke=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(null)],i.prototype,"latitude",void 0),Ve([t.Property(null)],i.prototype,"longitude",void 0),i}(t.ChildProperty),Qe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(!1)],i.prototype,"visible",void 0),Ve([t.Property("")],i.prototype,"template",void 0),Ve([t.Property("")],i.prototype,"fill",void 0),Ve([t.Complex({color:"transparent",width:1},Je)],i.prototype,"border",void 0),Ve([t.Complex(Se.tooltipLabelFont,Ye)],i.prototype,"textStyle",void 0),Ve([t.Property(null)],i.prototype,"format",void 0),Ve([t.Property(null)],i.prototype,"valuePath",void 0),i}(t.ChildProperty),$e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(10)],i.prototype,"left",void 0),Ve([t.Property(10)],i.prototype,"right",void 0),Ve([t.Property(10)],i.prototype,"top",void 0),Ve([t.Property(10)],i.prototype,"bottom",void 0),i}(t.ChildProperty),et=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(!1)],i.prototype,"allowClustering",void 0),Ve([t.Complex({color:"transparent",width:1},Je)],i.prototype,"border",void 0),Ve([t.Property("#D2691E")],i.prototype,"fill",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Property("Rectangle")],i.prototype,"shape",void 0),Ve([t.Property(12)],i.prototype,"width",void 0),Ve([t.Property(12)],i.prototype,"height",void 0),Ve([t.Property(new _e(0,0))],i.prototype,"offset",void 0),Ve([t.Property("")],i.prototype,"imageUrl",void 0),Ve([t.Property("")],i.prototype,"dashArray",void 0),Ve([t.Complex({},Ye)],i.prototype,"labelStyle",void 0),i}(t.ChildProperty),tt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(null)],i.prototype,"from",void 0),Ve([t.Property(null)],i.prototype,"to",void 0),Ve([t.Property(null)],i.prototype,"value",void 0),Ve([t.Property(null)],i.prototype,"color",void 0),Ve([t.Property(null)],i.prototype,"minOpacity",void 0),Ve([t.Property(null)],i.prototype,"maxOpacity",void 0),Ve([t.Property(null)],i.prototype,"label",void 0),Ve([t.Property(!0)],i.prototype,"showLegend",void 0),i}(t.ChildProperty),it=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(!1)],i.prototype,"enable",void 0),Ve([t.Property(null)],i.prototype,"fill",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Property(!1)],i.prototype,"enableMultiSelect",void 0),Ve([t.Complex({color:"transparent",width:0},Je)],i.prototype,"border",void 0),i}(t.ChildProperty),ot=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(null)],i.prototype,"fill",void 0),Ve([t.Property(!1)],i.prototype,"enable",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Complex({color:"transparent",width:0},Je)],i.prototype,"border",void 0),i}(t.ChildProperty),nt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(!1)],i.prototype,"visible",void 0),Ve([t.Property(1)],i.prototype,"width",void 0),Ve([t.Property(null)],i.prototype,"longitude",void 0),Ve([t.Property(null)],i.prototype,"latitude",void 0),Ve([t.Property("")],i.prototype,"dashArray",void 0),Ve([t.Property("black")],i.prototype,"color",void 0),Ve([t.Property(0)],i.prototype,"angle",void 0),Ve([t.Complex({showArrow:!1,position:"Start",size:5,color:"black"},Xe)],i.prototype,"arrowSettings",void 0),Ve([t.Complex({},it)],i.prototype,"selectionSettings",void 0),Ve([t.Complex({},ot)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),rt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Complex({},Je)],i.prototype,"border",void 0),Ve([t.Property(!1)],i.prototype,"visible",void 0),Ve([t.Property([])],i.prototype,"dataSource",void 0),Ve([t.Property(1e3)],i.prototype,"animationDuration",void 0),Ve([t.Property(0)],i.prototype,"animationDelay",void 0),Ve([t.Property("")],i.prototype,"fill",void 0),Ve([t.Property(10)],i.prototype,"minRadius",void 0),Ve([t.Property(20)],i.prototype,"maxRadius",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Property(null)],i.prototype,"valuePath",void 0),Ve([t.Property("Circle")],i.prototype,"bubbleType",void 0),Ve([t.Property(null)],i.prototype,"colorValuePath",void 0),Ve([t.Collection([],tt)],i.prototype,"colorMapping",void 0),Ve([t.Complex({},Qe)],i.prototype,"tooltipSettings",void 0),Ve([t.Complex({},it)],i.prototype,"selectionSettings",void 0),Ve([t.Complex({},ot)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),at=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property("")],i.prototype,"text",void 0),Ve([t.Property("")],i.prototype,"description",void 0),i}(t.ChildProperty),lt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Complex({size:Se.mapsSubTitleFont.size},Ye)],i.prototype,"textStyle",void 0),Ve([t.Property("Center")],i.prototype,"alignment",void 0),i}(at),st=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Complex({size:Se.mapsTitleFont.size},Ye)],i.prototype,"textStyle",void 0),Ve([t.Property("Center")],i.prototype,"alignment",void 0),Ve([t.Complex({},lt)],i.prototype,"subtitleSettings",void 0),i}(at),pt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(!1)],i.prototype,"enable",void 0),Ve([t.Property("Horizontal")],i.prototype,"toolBarOrientation",void 0),Ve([t.Property(null)],i.prototype,"color",void 0),Ve([t.Property("#e61576")],i.prototype,"highlightColor",void 0),Ve([t.Property("#e61576")],i.prototype,"selectionColor",void 0),Ve([t.Property("Far")],i.prototype,"horizontalAlignment",void 0),Ve([t.Property("Near")],i.prototype,"verticalAlignment",void 0),Ve([t.Property(["ZoomIn","ZoomOut","Reset"])],i.prototype,"toolbars",void 0),Ve([t.Property(!0)],i.prototype,"mouseWheelZoom",void 0),Ve([t.Property(!1)],i.prototype,"doubleClickZoom",void 0),Ve([t.Property(!1)],i.prototype,"pinchZooming",void 0),Ve([t.Property(!1)],i.prototype,"zoomOnClick",void 0),Ve([t.Property(1)],i.prototype,"zoomFactor",void 0),Ve([t.Property(10)],i.prototype,"maxZoom",void 0),Ve([t.Property(1)],i.prototype,"minZoom",void 0),i}(t.ChildProperty),ht=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(!1)],i.prototype,"toggleVisibility",void 0),Ve([t.Property(!1)],i.prototype,"visible",void 0),Ve([t.Property("transparent")],i.prototype,"background",void 0),Ve([t.Property("Layers")],i.prototype,"type",void 0),Ve([t.Property(!1)],i.prototype,"invertedPointer",void 0),Ve([t.Property("After")],i.prototype,"labelPosition",void 0),Ve([t.Property("None")],i.prototype,"labelDisplayMode",void 0),Ve([t.Property("Circle")],i.prototype,"shape",void 0),Ve([t.Property("")],i.prototype,"width",void 0),Ve([t.Property("")],i.prototype,"height",void 0),Ve([t.Complex({},Ye)],i.prototype,"textStyle",void 0),Ve([t.Property(15)],i.prototype,"shapeWidth",void 0),Ve([t.Property(15)],i.prototype,"shapeHeight",void 0),Ve([t.Property(10)],i.prototype,"shapePadding",void 0),Ve([t.Complex({color:"#000000",width:0},Je)],i.prototype,"border",void 0),Ve([t.Complex({color:"#000000",width:0},Je)],i.prototype,"shapeBorder",void 0),Ve([t.Complex({},at)],i.prototype,"title",void 0),Ve([t.Complex({},Ye)],i.prototype,"titleStyle",void 0),Ve([t.Property("Bottom")],i.prototype,"position",void 0),Ve([t.Property("Center")],i.prototype,"alignment",void 0),Ve([t.Property("None")],i.prototype,"orientation",void 0),Ve([t.Property({x:0,y:0})],i.prototype,"location",void 0),Ve([t.Property(null)],i.prototype,"fill",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Property("Default")],i.prototype,"mode",void 0),Ve([t.Property(null)],i.prototype,"showLegendPath",void 0),Ve([t.Property(null)],i.prototype,"valuePath",void 0),Ve([t.Property(!1)],i.prototype,"removeDuplicateLegend",void 0),i}(t.ChildProperty),dt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(!1)],i.prototype,"visible",void 0),Ve([t.Complex({width:0,color:"transparent"},Je)],i.prototype,"border",void 0),Ve([t.Property("black")],i.prototype,"fill",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Property(5)],i.prototype,"rx",void 0),Ve([t.Property(5)],i.prototype,"ry",void 0),Ve([t.Complex({},Ye)],i.prototype,"textStyle",void 0),Ve([t.Property("")],i.prototype,"labelPath",void 0),Ve([t.Property("None")],i.prototype,"smartLabelMode",void 0),Ve([t.Property("None")],i.prototype,"intersectionAction",void 0),Ve([t.Property("")],i.prototype,"template",void 0),i}(t.ChildProperty),ct=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property("#A6A6A6")],i.prototype,"fill",void 0),Ve([t.Property([])],i.prototype,"palette",void 0),Ve([t.Property(5)],i.prototype,"circleRadius",void 0),Ve([t.Complex({width:0,color:"#000000"},Je)],i.prototype,"border",void 0),Ve([t.Property("")],i.prototype,"dashArray",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Property(null)],i.prototype,"colorValuePath",void 0),Ve([t.Property(null)],i.prototype,"valuePath",void 0),Ve([t.Collection([],tt)],i.prototype,"colorMapping",void 0),Ve([t.Property(!1)],i.prototype,"autofill",void 0),i}(t.ChildProperty),mt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Complex({color:"transparent",width:1},Je)],i.prototype,"border",void 0),Ve([t.Property(null)],i.prototype,"dashArray",void 0),Ve([t.Property(!1)],i.prototype,"visible",void 0),Ve([t.Property("#FF471A")],i.prototype,"fill",void 0),Ve([t.Property(10)],i.prototype,"height",void 0),Ve([t.Property(10)],i.prototype,"width",void 0),Ve([t.Property(1)],i.prototype,"opacity",void 0),Ve([t.Property("Balloon")],i.prototype,"shape",void 0),Ve([t.Property("")],i.prototype,"legendText",void 0),Ve([t.Property(new _e(0,0))],i.prototype,"offset",void 0),Ve([t.Property("")],i.prototype,"imageUrl",void 0),Ve([t.Property(null)],i.prototype,"template",void 0),Ve([t.Property([])],i.prototype,"dataSource",void 0),Ve([t.Complex({},Qe)],i.prototype,"tooltipSettings",void 0),Ve([t.Property(1e3)],i.prototype,"animationDuration",void 0),Ve([t.Property(0)],i.prototype,"animationDelay",void 0),Ve([t.Complex({},it)],i.prototype,"selectionSettings",void 0),Ve([t.Complex({},ot)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),ut=function(e){function t(t,i,o,n){return e.call(this,t,i,o,n)||this}return We(t,e),t}(mt),gt=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBaseLayer=!1,t}return We(i,e),Ve([t.Property(null)],i.prototype,"shapeData",void 0),Ve([t.Property()],i.prototype,"query",void 0),Ve([t.Complex({},ct)],i.prototype,"shapeSettings",void 0),Ve([t.Property([])],i.prototype,"dataSource",void 0),Ve([t.Property("Layer")],i.prototype,"type",void 0),Ve([t.Property("Geographic")],i.prototype,"geometryType",void 0),Ve([t.Property("Aerial")],i.prototype,"bingMapType",void 0),Ve([t.Property("")],i.prototype,"key",void 0),Ve([t.Property("Geometry")],i.prototype,"layerType",void 0),Ve([t.Property("https://a.tile.openstreetmap.org/level/tileX/tileY.png")],i.prototype,"urlTemplate",void 0),Ve([t.Property(!0)],i.prototype,"visible",void 0),Ve([t.Property("name")],i.prototype,"shapeDataPath",void 0),Ve([t.Property("name")],i.prototype,"shapePropertyPath",void 0),Ve([t.Property(0)],i.prototype,"animationDuration",void 0),Ve([t.Collection([],ut)],i.prototype,"markerSettings",void 0),Ve([t.Complex({},et)],i.prototype,"markerClusterSettings",void 0),Ve([t.Complex({},dt)],i.prototype,"dataLabelSettings",void 0),Ve([t.Collection([],rt)],i.prototype,"bubbleSettings",void 0),Ve([t.Collection([],nt)],i.prototype,"navigationLineSettings",void 0),Ve([t.Complex({},Qe)],i.prototype,"tooltipSettings",void 0),Ve([t.Complex({},it)],i.prototype,"selectionSettings",void 0),Ve([t.Complex({},ot)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),yt=function(){return function(e,t,i,o,n,r,a){void 0===i&&(i=256),void 0===o&&(o=256),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=null),this.x=e,this.y=t,this.top=n,this.left=r,this.height=i,this.width=o,this.src=a}}(),ft=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return We(i,e),Ve([t.Property(null)],i.prototype,"background",void 0),Ve([t.Complex({color:"transparent",width:1},Je)],i.prototype,"border",void 0),i}(t.ChildProperty),vt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},bt=function(){function e(e){this.maps=e,this.trackElements=[]}return e.prototype.markerRender=function(e,i,o,n){var r=this,a=this.maps.layersCollection[i];this.markerSVGObject=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",style:"pointer-events: auto;"});var l=t.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+i+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+(this.maps.isTileMap?0:this.maps.mapAreaRect.y)+"px;left:"+(this.maps.isTileMap?0:this.maps.mapAreaRect.x)+"px;height:"+this.maps.mapAreaRect.height+"px;width:"+this.maps.mapAreaRect.width+"px;"});a.markerSettings.map(function(e,s){var p=e.dataSource;p.forEach(function(h,m){var u={cancel:!1,name:St,fill:e.fill,height:e.height,width:e.width,imageUrl:e.imageUrl,shape:e.shape,template:e.template,data:h,maps:r.maps,marker:e,border:e.border};if(r.maps.isBlazor){u.maps,u.marker;var g=vt(u,["maps","marker"]);u=g}r.maps.trigger("markerRendering",u,function(g){var y=h.longitude|h.Longitude,f=h.latitude|h.Latitude,v=e.offset;if(!u.cancel&&e.visible&&!t.isNullOrUndefined(y)&&!t.isNullOrUndefined(f)){var b=r.maps.element.id+"_LayerIndex_"+i+"_MarkerIndex_"+s+"_dataIndex_"+m,x=r.maps.isTileMap?c(new Re(y,f),o,r.maps.tileTranslatePoint,!0):d(f,y,o,a,r.maps),S=0!==a.animationDuration||t.isNullOrUndefined(r.maps.zoomModule),w=r.maps.isTileMap?new Object:!t.isNullOrUndefined(r.maps.zoomModule)&&r.maps.zoomSettings.zoomFactor>1?Z(r.maps,a,S):H(r.maps,a,S),M="AddMarker"===n?r.maps.scale:w.scale,O="AddMarker"===n?r.maps.translatePoint:w.location;u.template?P(u,void 0,b,h,0,l,x,M,v,r.maps):C(u,e,p,m,x,O,b,v,M,r.maps,r.markerSVGObject)}})})}),this.markerSVGObject.childElementCount>0&&(e.appendChild(this.markerSVGObject),a.markerClusterSettings.allowClustering&&(this.maps.svgObject.appendChild(this.markerSVGObject),this.maps.element.appendChild(this.maps.svgObject),this.markerSVGObject=_(a,this.markerSVGObject,this.maps,i,this.markerSVGObject),e.appendChild(this.markerSVGObject))),l.childElementCount>0&&G(this.maps.element.id+"_Secondary_Element")&&(G(this.maps.element.id+"_Secondary_Element").appendChild(l),a.markerClusterSettings.allowClustering&&(l=_(a,l,this.maps,i,this.markerSVGObject),G(this.maps.element.id+"_Secondary_Element").appendChild(l)))},e.prototype.markerClick=function(e){var i=e.target.id;if(!(-1===i.indexOf("_LayerIndex_")||i.indexOf("_cluster_")>0)){var o=this.getMarker(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Mt,data:o.data,maps:this.maps,marker:o.marker,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps,n.marker;n=vt(n,["maps","marker"])}this.maps.trigger(Mt,n)}}},e.prototype.markerClusterClick=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")&&-1!==i.indexOf("_cluster_")){var o=this.getMarker(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Ot,data:o.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=vt(n,["maps"])}this.maps.trigger(Ot,n)}}},e.prototype.getMarker=function(e){var t,i,o=e.split("_LayerIndex_"),n=parseInt(o[1].split("_")[0],10),r=this.maps.layers[n];if(e.indexOf("_MarkerIndex_")>-1){var a=parseInt(o[1].split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(o[1].split("_dataIndex_")[1].split("_")[0],10);if(i=r.markerSettings[a],!isNaN(a))return t=i.dataSource[l],{marker:i,data:t}}return null},e.prototype.markerMove=function(e){var i=e.target.id;if(!(-1===i.indexOf("_LayerIndex_")||i.indexOf("_cluster_")>0)){var o=this.getMarker(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:_t,data:o.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=vt(n,["maps"])}this.maps.trigger(_t,n)}}},e.prototype.markerClusterMouseMove=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")&&-1!==i.indexOf("_cluster_")){var o=this.getMarker(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Ct,data:o.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=vt(n,["maps"])}this.maps.trigger(Ct,n)}}},e.prototype.getModuleName=function(){return"Marker"},e.prototype.destroy=function(e){},e}(),xt="shapeSelected",St="markerRendering",wt="markerClusterRendering",Mt="markerClick",Ot="markerClusterClick",_t="markerMouseMove",Ct="markerClusterMouseMove",Pt="dataLabelRendering",Lt="bubbleRendering",Tt="bubbleClick",It="bubbleMouseMove",Et="animationComplete",kt="legendRendering",Nt="annotationRendering",Bt="itemHighlight",zt=function(){function e(e){this.maps=e}return e.prototype.getBingMap=function(e,t,i,o,n,r){for(var a,l="",s=Math.min(this.maps.tileZoomLevel,parseInt(this.maxZoom,10));s>0;s--){var p=0,h=1<<s-1;0!=(e.x&h)&&p++,0!=(e.y&h)&&(p+=2),l=l+""+p}return a=r[Math.min(parseInt(l.substr(l.length-1,1),10),r.length)],n=n.replace("{quadkey}",l).replace("{subdomain}",a),n+="&mkt="+o+"&ur=IN&Key="+t},e}(),Ft=function(){function e(e){this.maps=e}return e.prototype.getShapeColorMapping=function(e,t,i){var o=t[e.colorValuePath?e.colorValuePath:e.valuePath],n=Number(o),r=this.getColorByValue(e.colorMapping,n,o);return r||i},e.prototype.getColorByValue=function(e,i,o){if(isNaN(i)&&t.isNullOrUndefined(o))return null;for(var n,r="",a=0,l=e;a<l.length;a++){var s=l[a];(!t.isNullOrUndefined(s.from)&&!t.isNullOrUndefined(s.to)&&i>=s.from&&i<=s.to||s.value===o)&&(r="[object Array]"===Object.prototype.toString.call(s.color)?t.isNullOrUndefined(s.value)?this.getColor(s,i):s.color[0]:s.color),(i>=s.from&&i<=s.to||s.value===o)&&!t.isNullOrUndefined(s.minOpacity)&&!t.isNullOrUndefined(s.maxOpacity)&&r&&(n=this.deSaturationColor(s,r,i,o)),(""===r||t.isNullOrUndefined(r))&&t.isNullOrUndefined(s.from)&&t.isNullOrUndefined(s.to)&&t.isNullOrUndefined(s.minOpacity)&&t.isNullOrUndefined(s.maxOpacity)&&t.isNullOrUndefined(s.value)&&(r="[object Array]"===Object.prototype.toString.call(s.color)?s.color[0]:s.color)}return{fill:r||(e.length?null:o),opacity:n}},e.prototype.deSaturationColor=function(e,t,i,o){var n=1;if(i>=e.from&&i<=e.to||e.value===o){n=(isNaN(i)?e.from/(e.to-e.from):(i-e.from)/(e.to-e.from))*(e.maxOpacity-e.minOpacity)+e.minOpacity}return n},e.prototype.rgbToHex=function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},e.prototype.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.getColor=function(e,t){var i,o="";return Number(t)===e.from?o=e.color[0]:Number(t)===e.to?o=e.color[e.color.length-1]:(i=this.getGradientColor(Number(t),e),o=this.rgbToHex(i.r,i.g,i.b)),o},e.prototype.getGradientColor=function(e,t){var i=t.from,o=t.to,n=0,r=o-i;n=(e-i)/r;var a,l;if(t.color.length<=2)a="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),l="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{a="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),l="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);for(var s=r/(t.color.length-1),p=t.color.length-1,h=[],d={},c=1;c<p;c++)d={b:i+c*s,color:t.color[c]},h.push(d);for(var m=0;m<h.length;m++)i<=e&&e<=h[m].b&&0===m?(l="#"===h[m].color.charAt(0)?h[m].color:this._colorNameToHex(h[m].color),n=e<h[m].b?1-Math.abs((e-h[m].b)/s):(e-h[m].b)/s):h[m].b<=e&&e<=o&&m===h.length-1&&(a="#"===h[m].color.charAt(0)?h[m].color:this._colorNameToHex(h[m].color),n=e<h[m].b?1-Math.abs((e-h[m].b)/s):(e-h[m].b)/s),m!==h.length-1&&m<h.length&&h[m].b<=e&&e<=h[m+1].b&&(a="#"===h[m].color.charAt(0)?h[m].color:this._colorNameToHex(h[m].color),l="#"===h[m+1].color.charAt(0)?h[m+1].color:this._colorNameToHex(h[m+1].color),n=Math.abs(e-h[m+1].b)/s)}return this.getPercentageColor(n,a,l)},e.prototype.getPercentageColor=function(e,t,i){var o=i.split("#")[1],n=t.split("#")[1],r=this.getPercentage(e,parseInt(n.substr(0,2),16),parseInt(o.substr(0,2),16)),a=this.getPercentage(e,parseInt(n.substr(2,2),16),parseInt(o.substr(2,2),16)),l=this.getPercentage(e,parseInt(n.substr(4,2),16),parseInt(o.substr(4,2),16));return new Ie(r,a,l)},e.prototype.getPercentage=function(e,t,i){var o=i-t;return Math.round(t+o*e)},e.prototype._colorNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"===Object.prototype.toString.call(e)?e:void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:e},e}(),Rt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},jt=function(){function e(e){this.tileTranslatePoint=new Re(0,0),this.isMapCoordinates=!0,this.ajaxProcessCount=0,this.mapObject=e,this.ajaxModule=new t.Ajax,this.ajaxResponse=[]}return e.prototype.measureLayerPanel=function(){var e=this,t=this.mapObject.layersCollection,i=this.mapObject.mapAreaRect,o=G(this.mapObject.element.id+"_Secondary_Element");this.mapObject.isTileMap&&o&&(this.tileSvgObject=this.mapObject.renderer.createSvg({id:this.mapObject.element.id+"_Tile_SVG",width:i.width,height:i.height}),o.appendChild(this.tileSvgObject)),this.layerGroup=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_Layer_Collections","clip-path":"url(#"+this.mapObject.element.id+"_MapArea_ClipRect)"}),this.clipRectElement=this.mapObject.renderer.drawClipPath(new Ee(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:this.mapObject.isTileMap?0:i.x,y:this.mapObject.isTileMap?0:i.y,width:i.width,height:i.height})),this.layerGroup.appendChild(this.clipRectElement),this.mapObject.baseMapBounds=null,this.mapObject.baseMapRectBounds=null,this.mapObject.baseSize=null;t.length;t.forEach(function(t,i){e.currentLayer=t,e.processLayers(t,i)})},e.prototype.renderTileLayer=function(e,i,o,n){var r=new _e(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude);e.currentFactor=e.calculateFactor(i),(t.isNullOrUndefined(e.mapObject.tileZoomLevel)||e.mapObject.tileZoomLevel>=1)&&(e.mapObject.tileZoomLevel=e.mapObject.zoomSettings.zoomFactor,t.isNullOrUndefined(e.mapObject.tileTranslatePoint)||(e.mapObject.tileTranslatePoint.x=0,e.mapObject.tileTranslatePoint.y=0)),e.mapObject.tileTranslatePoint=e.panTileMap(e.mapObject.availableSize.width,e.mapObject.availableSize.height,r),e.generateTiles(e.mapObject.tileZoomLevel,e.mapObject.tileTranslatePoint,n),e.mapObject.navigationLineModule&&e.layerObject.appendChild(e.mapObject.navigationLineModule.renderNavigation(e.currentLayer,e.mapObject.tileZoomLevel,o)),e.mapObject.markerModule&&e.mapObject.markerModule.markerRender(e.layerObject,o,e.mapObject.tileZoomLevel,null),e.translateLayerElements(e.layerObject,o),e.layerGroup.appendChild(e.layerObject)},e.prototype.processLayers=function(e,i){var o=this;this.layerObject=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+i});var n={cancel:!1,name:"layerRendering",index:i,layer:e,maps:this.mapObject};if(this.mapObject.isBlazor){var r=n.cancel,a=n.name,l=n.index;n={cancel:r,name:a,index:l}}this.mapObject.trigger("layerRendering",n,function(){if(!n.cancel)if("Geometry"!==e.layerType){if("Bing"!==e.layerType||o.bing)o.renderTileLayer(o,e,i);else if(e.key&&e.key.length>1){var r=o,a=new zt(o.mapObject),l="https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+e.bingMapType,s=new t.Ajax({url:l+"?output=json&include=ImageryProviders&key="+e.key});s.onSuccess=function(t){var o=JSON.parse(t).resourceSets[0].resources[0],n=o.imageUrl,l=o.imageUrlSubdomains,s=o.zoomMax;null!==n&&void 0!==n&&n!==a.imageUrl&&(a.imageUrl=n),null!==l&&void 0!==l&&l!==a.subDomains&&(a.subDomains=l),null!==s&&void 0!==s&&s!==a.maxZoom&&(a.maxZoom=s),r.mapObject.bingMap=a,r.renderTileLayer(r,e,i,a)},s.send()}o.tileSvgObject&&o.tileSvgObject.appendChild(o.layerGroup)}else if(t.isNullOrUndefined(e.shapeData)||t.isNullOrUndefined(e.shapeData.geometries)&&t.isNullOrUndefined(e.shapeData.features))o.mapObject.svgObject.appendChild(o.layerGroup);else{var p=!t.isNullOrUndefined(e.shapeData.geometries)&&e.shapeData.geometries.length>0?e.shapeData.geometries:e.shapeData.features;e.layerData=[];var h=e.shapeData.bbox;!t.isNullOrUndefined(h)&&e.isBaseLayer?o.mapObject.baseMapBounds=new Pe({min:h[0][1],max:h[1][1]},{min:h[0][0],max:h[1][0]}):t.isNullOrUndefined(o.mapObject.baseMapBounds)&&!j(p)&&o.calculateRectBounds(p),o.calculatePathCollection(i,p,function(){o.mapObject.svgObject.appendChild(o.layerGroup)})}})},e.prototype.bubbleCalculation=function(e,t){if(null!=e.dataSource&&null!=e)for(var i=0;i<e.dataSource.length;i++){var o=parseFloat(e.dataSource[i][e.valuePath]);0!==i?o>t.max?t.max=o:o<t.min&&(t.min=o):t.max=t.min=o}},e.prototype.calculatePathCollection=function(e,i,o){var n=this;this.groupElements=[],j(i)||(this.currentFactor=this.calculateFactor(this.currentLayer)),this.rectBounds=null;var r=this.currentLayer.shapeSettings;this.currentLayer.bubbleSettings;i.forEach(function(e,i){if(!t.isNullOrUndefined(e.geometry)||!t.isNullOrUndefined(e.coordinates)){var o=t.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,r=t.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates,a=e.geometry,l=e.properties;n.generatePoints(o,r,a,l)}}),this.currentLayer.rectBounds=this.rectBounds,t.isNullOrUndefined(this.mapObject.baseMapRectBounds)&&this.currentLayer.isBaseLayer&&(this.mapObject.baseMapRectBounds=this.rectBounds);for(var a=r.palette.length>1?r.palette:(this.mapObject.theme,["#B5E485","#7BC1E8","#DF819C","#EC9B79","#78D0D3","#D6D572","#9178E3","#A1E5B4","#87A4B4","#E4C16C"]),l=t.createElement("div",{id:this.mapObject.element.id+"_LayerIndex_"+e+"_Label_Template_Group",className:"template",styles:"pointer-events: none; overflow: hidden; position: absolute;top:"+this.mapObject.mapAreaRect.y+"px;left:"+this.mapObject.mapAreaRect.x+"px;height:"+this.mapObject.mapAreaRect.height+"px;width:"+this.mapObject.mapAreaRect.width+"px;"}),s=function(s){var h,d,c,m,u,g=void 0,y=p.currentLayer.layerData[s],f="",v="",b=void 0,x=r.autofill?a[s%a.length]:r.fill;null===r.colorValuePath||t.isNullOrUndefined(y.property)||(null!==(g=N(p.currentLayer.dataSource,y.property,p.currentLayer.shapeDataPath,p.currentLayer.shapePropertyPath))&&0===r.colorMapping.length?x=p.currentLayer.dataSource[g][r.colorValuePath]:y.property[r.colorValuePath]&&0===p.currentLayer.dataSource.length&&0===r.colorMapping.length&&(x=y.property[r.colorValuePath]));var S=p.mapObject.element.id+"_LayerIndex_"+e+"_shapeIndex_"+s+"_dataIndex_"+g;b=p.getShapeColorMapping(p.currentLayer,y.property,x),x="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.fill)?x:b.fill,u="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.opacity)?r.opacity:b.opacity;var w={cancel:!1,name:"shapeRendering",index:s,data:p.currentLayer.dataSource?p.currentLayer.dataSource[g]:null,maps:p.mapObject,shape:r,fill:x,border:{width:r.border.width,color:r.border.color}};if(p.mapObject.isBlazor){w.data,w.maps;var M=Rt(w,["data","maps"]);w=M}p.mapObject.trigger("shapeRendering",w,function(){var p=t.isNullOrUndefined(y._isMultiPolygon)?t.isNullOrUndefined(y.type)?y[0].type:y.type:"MultiPolygon";if(p="Polygon"===p||"MultiPolygon"===p?"Polygon":p,n.groupElements.length<1)m=n.mapObject.renderer.createGroup({id:n.mapObject.element.id+"_LayerIndex_"+e+"_"+p+"_Group",transform:""}),n.groupElements.push(m);else for(var g=0;g<n.groupElements.length;g++){var b=n.groupElements[g];if(b.id.indexOf(p)>-1){m=b;break}if(g>=n.groupElements.length-1){m=n.mapObject.renderer.createGroup({id:n.mapObject.element.id+"_LayerIndex_"+e+"_"+p+"_Group"}),n.groupElements.push(m);break}}var x;switch(p){case"Polygon":y._isMultiPolygon?f=n.generateMultiPolygonPath(y):(f+="M"+y[0].point.x+" "+y[0].point.y,y.map(function(e){f+=" L "+e.point.x+" "+e.point.y})),(f+=" z ").length>3&&(h=new Te(S,w.fill,w.border.width,w.border.color,u,r.dashArray,f),x=n.mapObject.renderer.drawPath(h));break;case"LineString":y.map(function(e){v+=e.point.x+" , "+e.point.y+" "}),d=new Be(S,v,w.fill,w.border.width,w.border.color,u,r.dashArray),x=n.mapObject.renderer.drawPolyline(d);break;case"Point":var M=y.point;c=new ke(S,w.fill,w.border,u,M.x,M.y,r.circleRadius,null),x=n.mapObject.renderer.drawCircle(c);break;case"Path":f=y.point,h=new Te(S,w.fill,w.border.width,w.border.color,u,r.dashArray,f),x=n.mapObject.renderer.drawPath(h)}if(!t.isNullOrUndefined(x)){for(var O="[object Array]"===Object.prototype.toString.call(n.currentLayer.shapePropertyPath)?n.currentLayer.shapePropertyPath:[n.currentLayer.shapePropertyPath],_=void 0,C=0;C<O.length;C++)if(!t.isNullOrUndefined(y.property)){_=O[C];break}x.setAttribute("aria-label",t.isNullOrUndefined(y.property)?"":y.property[_]),x.setAttribute("tabindex",(n.mapObject.tabIndex+s+2).toString()),m.appendChild(x)}s===n.currentLayer.layerData.length-1&&n.addItemsInLayer(e,a,i,l),o()})},p=this,h=0;h<this.currentLayer.layerData.length;h++)s(h)},e.prototype.addItemsInLayer=function(e,t,i,o){var n,r=this;if(this.currentLayer.bubbleSettings.length&&this.mapObject.bubbleModule)for(var a,l=this.currentLayer.bubbleSettings.length,s=function(i){a=p.currentLayer.bubbleSettings[i],n=p.mapObject.renderer.createGroup({id:p.mapObject.element.id+"_LayerIndex_"+e+"_bubble_Group_"+i});var o={min:0,max:0};p.bubbleCalculation(a,o),a.dataSource.map(function(l,s){r.renderBubble(r.currentLayer,l,t[s%t.length],o,i,s,n,e,a)}),p.groupElements.push(n)},p=this,h=0;h<l;h++)s(h);var d=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+e+"_dataLableIndex_Group",style:"pointer-events: none;"});if(this.mapObject.dataLabelModule&&this.currentLayer.dataLabelSettings.visible){var c=[];i.map(function(t,i){r.renderLabel(r.currentLayer,e,t,d,i,o,c)}),this.groupElements.push(d)}this.mapObject.navigationLineModule&&this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer,this.currentFactor,e)),this.groupElements.map(function(e){r.layerObject.appendChild(e)}),this.mapObject.markerModule&&this.mapObject.markerModule.markerRender(this.layerObject,e,this.currentFactor,null),this.translateLayerElements(this.layerObject,e),this.layerGroup.appendChild(this.layerObject)},e.prototype.renderLabel=function(e,t,i,o,n,r,a){this.mapObject.dataLabelModule.renderLabel(e,t,i,e.layerData,o,r,n,a)},e.prototype.generateMultiPolygonPath=function(e){for(var t="",i=0;i<e.length;i++)t+="M"+e[i][0].point.x+" "+e[i][0].point.y,e[i].map(function(e){t+=" L "+e.point.x+" "+e.point.y});return t},e.prototype.renderBubble=function(e,i,o,n,r,a,l,s,p){if(t.isNullOrUndefined(this.mapObject.bubbleModule)||!p.visible)return null;o=p.fill?p.fill:o,this.mapObject.bubbleModule.id=this.mapObject.element.id+"_LayerIndex_"+s+"_BubbleIndex_"+r+"_dataIndex_"+a,this.mapObject.bubbleModule.renderBubble(p,i,o,n,r,a,s,e,l)},e.prototype.getShapeColorMapping=function(e,i,o){if(o=o||e.shapeSettings.fill,0===e.shapeSettings.colorMapping.length&&t.isNullOrUndefined(e.dataSource))return o;var n=N(e.dataSource,i,e.shapeDataPath,e.shapePropertyPath),r=new Ft(this.mapObject);return t.isNullOrUndefined(e.dataSource[n])?o:r.getShapeColorMapping(e.shapeSettings,e.dataSource[n],o)},e.prototype.generatePoints=function(e,t,i,o){var n,r,a=this,l=[];switch(e.toLowerCase()){case"polygon":(l=this.calculatePolygonBox(t[0],i,o)).length>0&&(l.property=o,l.type=e,l._isMultiPolygon=!1,this.currentLayer.layerData.push(l));break;case"multipolygon":for(var s=[],p=0;p<t.length;p++)(l=this.calculatePolygonBox(t[p][0],i,o)).length>0&&s.push(l);s.property=o,s.type=e,s._isMultiPolygon=!0,this.currentLayer.layerData.push(s);break;case"linestring":t.map(function(e,t){n=e[1],r=e[0];var i=d(n,r,a.currentFactor,a.currentLayer,a.mapObject);l.push({point:i,lat:n,lng:r})}),l.property=o,l.type=e,this.currentLayer.layerData.push(l);break;case"point":var h=!1;if(t.map(function(t,i){if("[object Array]"===Object.prototype.toString.call(t)){n=t[1],r=t[0],h=!0;var l=d(n,r,a.currentFactor,a.currentLayer,a.mapObject);a.currentLayer.layerData.push({point:l,type:e,lat:n,lng:r,property:o})}}),!h){n=t[1],r=t[0];var c=d(n,r,this.currentFactor,this.currentLayer,this.mapObject);this.currentLayer.layerData.push({point:c,type:e,lat:n,lng:r,property:o})}break;case"path":this.currentLayer.layerData.push({point:i.d,type:e,property:o})}},e.prototype.calculateFactor=function(e){var t,i,o,n=1,r=this.mapObject.baseMapBounds,a=new Oe(this.mapObject.mapAreaRect.width,this.mapObject.mapAreaRect.height-5);if(r){var l=d(r.latitude.min,r.longitude.min,null,e,this.mapObject),s=d(r.latitude.max,r.longitude.max,null,e,this.mapObject);i=s.y-l.y,o=s.x-l.x}else i=o=500;return t=i<a.height?parseFloat(Math.abs(100*Number(a.height/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:a.height/i,n=o<a.width?parseFloat(Math.abs(100*Number(a.width/Number(o.toString()+"e+1"))).toString().split(".")[0])/10:a.width/o,Math.min(n,t)},e.prototype.translateLayerElements=function(e,i){var o;if(t.isNullOrUndefined(this.mapObject.baseMapRectBounds)){if(this.mapObject.isTileMap&&!t.isNullOrUndefined(this.mapObject.scale))for(var n=0;n<e.childElementCount;n++)if(!((o=e.childNodes[n]).id.indexOf("_Markers_Group")>-1||o.id.indexOf("_bubble_Group")>-1||o.id.indexOf("_dataLableIndex_Group")>-1||o.id.indexOf("_line_Group")>-1)){d="scale( "+this.mapObject.scale+" ) translate( "+this.mapObject.translatePoint.x+" "+this.mapObject.translatePoint.y+" ) ";o.setAttribute("transform",d)}}else{var r=this.currentLayer.animationDuration,a=0!==r||t.isNullOrUndefined(this.mapObject.zoomModule);this.mapObject.baseTranslatePoint=this.mapObject.zoomTranslatePoint;var l=void 0;l=this.mapObject.zoomSettings.zoomFactor>1&&!t.isNullOrUndefined(this.mapObject.zoomModule)?Z(this.mapObject,this.currentLayer,a):H(this.mapObject,this.currentLayer,a);var s=this.mapObject.previousScale=l.scale,p=this.mapObject.previousPoint=l.location;this.mapObject.baseTranslatePoint=this.mapObject.translatePoint=p,this.mapObject.baseScale=this.mapObject.scale=s;for(var h=0;h<e.childElementCount;h++)if(!((o=e.childNodes[h]).id.indexOf("_Markers_Group")>-1||o.id.indexOf("_bubble_Group")>-1||o.id.indexOf("_dataLableIndex_Group")>-1)){var d="scale( "+s+" ) translate( "+p.x+" "+p.y+" ) ";o.setAttribute("transform",d),r>0&&!t.isNullOrUndefined(this.mapObject.zoomModule)&&(l=this.mapObject.zoomSettings.zoomFactor>1?Z(this.mapObject,this.currentLayer):H(this.mapObject,this.currentLayer),this.mapObject.scale=l.scale,this.mapObject.zoomTranslatePoint=this.mapObject.translatePoint=l.location)}}},e.prototype.calculateRectBounds=function(e){var i=this;e.forEach(function(e,o){if(!t.isNullOrUndefined(e.geometry)||!t.isNullOrUndefined(e.coordinates)){var n=t.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,r=t.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates;switch(n.toLowerCase()){case"polygon":i.calculateRectBox(r[0]);break;case"multipolygon":r.map(function(e,t){i.calculateRectBox(e[0])})}}})},e.prototype.calculatePolygonBox=function(e,i,o){var n=this,r=[],a=this.mapObject.baseMapBounds;return e.map(function(e,i){var o=e[1],l=e[0];if(l>=a.longitude.min&&l<=a.longitude.max&&o>=a.latitude.min&&o<=a.latitude.max){var s=d(o,l,n.currentFactor,n.currentLayer,n.mapObject);t.isNullOrUndefined(n.rectBounds)?n.rectBounds={min:{x:s.x,y:s.y},max:{x:s.x,y:s.y}}:(n.rectBounds.min.x=Math.min(n.rectBounds.min.x,s.x),n.rectBounds.min.y=Math.min(n.rectBounds.min.y,s.y),n.rectBounds.max.x=Math.max(n.rectBounds.max.x,s.x),n.rectBounds.max.y=Math.max(n.rectBounds.max.y,s.y)),r.push({point:s,lat:o,lng:l})}}),r},e.prototype.calculateRectBox=function(e){var i=this;e.forEach(function(e){t.isNullOrUndefined(i.mapObject.baseMapBounds)?i.mapObject.baseMapBounds=new Pe({min:e[1],max:e[1]},{min:e[0],max:e[0]}):(i.mapObject.baseMapBounds.latitude.min=Math.min(i.mapObject.baseMapBounds.latitude.min,e[1]),i.mapObject.baseMapBounds.latitude.max=Math.max(i.mapObject.baseMapBounds.latitude.max,e[1]),i.mapObject.baseMapBounds.longitude.min=Math.min(i.mapObject.baseMapBounds.longitude.min,e[0]),i.mapObject.baseMapBounds.longitude.max=Math.max(i.mapObject.baseMapBounds.longitude.max,e[0]))})},e.prototype.generateTiles=function(e,i,o){var n=this.mapObject.locale,r=this.mapObject.availableSize;this.tiles=[];var a,l;a=l=Math.pow(2,e);r.width,r.height;var s=this.mapObject.layers[this.mapObject.baseLayerIndex];this.urlTemplate=s.urlTemplate;var p=Math.min(l,(-i.y+r.height)/256+1),h=Math.min(a,(-i.x+r.width)/256+1),d=-(i.x+256)/256,c=-(i.y+256)/256;o=o||this.bing||this.mapObject.bingMap;for(var m=Math.round(d);m<Math.round(h);m++)for(var u=Math.round(c);u<Math.round(p);u++){var g=256*m+i.x,y=256*u+i.y;if(g>-256&&g<=r.width&&y>-256&&y<r.height&&m>=0&&u>=0){var f=new yt(m,u);if(f.left=g,f.top=y,"Bing"===s.layerType){var v=s.key;f.src=o.getBingMap(f,v,s.bingMapType,n,o.imageUrl,o.subDomains)}else f.src=this.urlTemplate.replace("level",e.toString()).replace("tileX",f.x.toString()).replace("tileY",f.y.toString());this.tiles.push(f)}}for(var b=t.extend([],this.tiles,[],!0),x=0,S=this.mapObject.layers;x<S.length;x++){var w=S[x];if("SubLayer"===w.type&&w.visible&&("OSM"===w.layerType||"Bing"===w.layerType))for(var M=0,O=b;M<O.length;M++){var _=O[M],C=t.extend(_,{},{},!0);"Bing"===w.layerType?C.src=o.getBingMap(C,w.key,w.bingMapType,n,o.imageUrl,o.subDomains):C.src=w.urlTemplate.replace("level",e.toString()).replace("tileX",_.x.toString()).replace("tileY",_.y.toString()),this.tiles.push(C)}}this.arrangeTiles()},e.prototype.arrangeTiles=function(){var e=this.templateCompiler(this.tiles);G(this.mapObject.element.id+"_tile_parent")&&(document.getElementById(this.mapObject.element.id+"_tile_parent").innerHTML=e)},e.prototype.templateCompiler=function(e){for(var t="",i=0,o=0,n=e;o<n.length;o++){var r=n[o];t+='<div><div id="tile'+i+'" style="position:absolute;left: '+r.left+"px;top: "+r.top+"px;height: "+r.height+"px;width: "+r.width+'px;"><img src="'+r.src+'"></img></div></div>',i++}return t},e.prototype.panTileMap=function(e,i,o){var n,r,a=this.mapObject.tileZoomLevel,l=256*Math.pow(2,a),s=c(o,a,{x:n=e/2-l/2,y:r=i/2-l/2},this.isMapCoordinates);return n-=s.x-e/2,r=r-(s.y-i/2)+20,this.mapObject.scale=Math.pow(2,a-1),t.isNullOrUndefined(this.mapObject.tileTranslatePoint)||(0!==this.mapObject.tileTranslatePoint.x&&this.mapObject.tileTranslatePoint.x!==n&&(n=this.mapObject.tileTranslatePoint.x),0!==this.mapObject.tileTranslatePoint.y&&this.mapObject.tileTranslatePoint.y!==r&&(r=this.mapObject.tileTranslatePoint.y)),this.mapObject.translatePoint=new _e((n-.01*this.mapObject.scale)/this.mapObject.scale,(r-.01*this.mapObject.scale)/this.mapObject.scale),new _e(n,r)},e}(),At=function(){function e(e){this.map=e}return e.prototype.renderAnnotationElements=function(){var e=this,i=this.map.element.id+"_Secondary_Element",o=t.createElement("div",{id:this.map.element.id+"_Annotations_Group"});if(o.style.position="absolute",o.style.top="0px",o.style.left="0px",this.map.annotations.map(function(t,i){null!==t.content&&e.createAnnotationTemplate(o,t,i)}),o.childElementCount>0&&!t.isNullOrUndefined(G(i))){G(i).appendChild(o);for(var n=0;n<this.map.annotations.length;n++)t.updateBlazorTemplate(this.map.element.id+"_ContentTemplate_"+n,"ContentTemplate",this.map.annotations[n])}},e.prototype.createAnnotationTemplate=function(e,i,o){var n,r,a,l,s=this,p=this.map,h=p.availableSize,d=(p.element.id,t.createElement("div",{id:p.element.id+"_Annotation_"+o,styles:"position: absolute; z-index:"+i.zIndex+";"})),c={cancel:!1,name:Nt,content:i.content,annotation:i};this.map.trigger(Nt,c,function(e){if(!c.cancel){if((a=V(c.content))&&(window.Blazor||a(s.map,null,null,s.map.element.id+"_ContentTemplate_"+o).length))for(var i=(l=Array.prototype.slice.call(a(window.Blazor?{}:s.map,null,null,s.map.element.id+"_ContentTemplate_"+o))).length,n=0;n<i;n++)d.appendChild(l[n]);else d.appendChild(t.createElement("div",{innerHTML:c.content}))}});var m=pe(d.cloneNode(!0),p.element),u=p.element.getBoundingClientRect(),g=p.svgObject.getBoundingClientRect();n=Math.abs(g.left-u.left),r=Math.abs(g.top-u.top);var y=i.x.indexOf("%")>-1?h.width/100*parseFloat(i.x):parseFloat(i.x),f=i.y.indexOf("%")>-1?h.height/100*parseFloat(i.y):parseFloat(i.y);switch(n="None"===i.horizontalAlignment?n+y:n,r="None"===i.verticalAlignment?r+f:r,i.verticalAlignment){case"Near":r+=f;break;case"Center":r=r+f+(g.height/2-m.height/2);break;case"Far":r=r+g.height+f-m.height}switch(i.horizontalAlignment){case"Near":n+=y;break;case"Center":n=n+y+(g.width/2-m.width/2);break;case"Far":n=n+g.width+y-m.width}d.style.left=n+"px",d.style.top=r+"px",e.appendChild(d)},e.prototype.getModuleName=function(){return"Annotations"},e.prototype.destroy=function(e){},e}(),Ut=function(){function e(e){this.control=e}return e.prototype.print=function(e){var i=this;this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight);var o={cancel:!1,htmlContent:this.getHTMLContent(e),name:"beforePrint"};this.control.trigger("beforePrint",o,function(e){o.cancel||t.print(o.htmlContent,i.printWindow)})},e.prototype.getHTMLContent=function(e){var i=t.createElement("div");return e?e instanceof Array?e.forEach(function(e){i.appendChild(q(e).cloneNode(!0))}):e instanceof Element?i.appendChild(e.cloneNode(!0)):i.appendChild(q(e).cloneNode(!0)):i.appendChild(this.control.element.cloneNode(!0)),i},e.prototype.export=function(e,i,o){var r=this,a=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:this.control.availableSize.width.toString(),height:this.control.availableSize.height.toString()}}),l=!(t.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1);o=t.isNullOrUndefined(o)?n.PdfPageOrientation.Landscape:o;var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+this.control.svgObject.outerHTML+"</svg>",p=window.URL.createObjectURL(new Blob("SVG"===e?[s]:[(new XMLSerializer).serializeToString(this.control.svgObject)],{type:"image/svg+xml"}));if("SVG"===e)this.triggerDownload(i,e,p,l);else{var h=new Image,d=a.getContext("2d");h.onload=function(){if(d.drawImage(h,0,0),window.URL.revokeObjectURL(p),"PDF"===e){var t=new n.PdfDocument,s=a.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");t.pageSettings.orientation=o,s=s.slice(s.indexOf(",")+1),t.pages.add().graphics.drawImage(new n.PdfBitmap(s),0,0,r.control.availableSize.width-60,r.control.availableSize.height),l&&(t.save(i+".pdf"),t.destroy())}else r.triggerDownload(i,e,a.toDataURL("image/png").replace("image/png","image/octet-stream"),l)},h.src=p}},e.prototype.triggerDownload=function(e,i,o,n){t.createElement("a",{attrs:{download:e+"."+i.toLocaleLowerCase(),href:o}}).dispatchEvent(new MouseEvent(n?"click":"move",{view:window,bubbles:!1,cancelable:!0}))},e}(),Dt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ht=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Zt=function(e){function n(t,i){var o=e.call(this,t,i)||this;return o.isTileMap=!1,o.baseSize=new Oe(0,0),o.translatePoint=new _e(0,0),o.baseTranslatePoint=new _e(0,0),o.zoomTranslatePoint=new _e(0,0),o.tileTranslatePoint=new _e(0,0),o.baseTileTranslatePoint=new _e(0,0),o.isDevice=!1,o.dataLabelShape=[],o.zoomShapeCollection=[],o.zoomLabelPositions=[],o.mouseDownEvent={x:null,y:null},o.mouseClickEvent={x:null,y:null},o}return Dt(n,e),n.prototype.getLocalizedLabel=function(e){return this.localeObject.getConstant(e)},n.prototype.preRender=function(){var e=this;this.isDevice=t.Browser.isDevice;this.isBlazor=window.Blazor,this.initPrivateVariable(),this.trigger("load",this.isBlazor?{}:{maps:this},function(){e.unWireEVents(),e.createSVG(),e.wireEVents(),e.setCulture()})},n.prototype.render=function(){this.findBaseAndSubLayers(),this.createSecondaryElement(),this.addTabIndex(),this.themeStyle=function(e){var t,i;switch(e.toLowerCase()){case"materialdark":i="#303030";break;case"fabricdark":i="#201F1F";break;case"bootstrapdark":i="#1A1A1A"}switch(e.toLowerCase()){case"materialdark":case"fabricdark":case"bootstrapdark":t={backgroundColor:i,areaBackgroundColor:i,titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#DADADA",legendTextColor:"#DADADA",dataLabelFontColor:"#DADADA",tooltipFontColor:"#ffffff",tooltipFillColor:"#363F4C",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"highcontrast":t={backgroundColor:"#000000",areaBackgroundColor:"#000000",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#000000",tooltipFontColor:"#000000",tooltipFillColor:"#ffffff",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"bootstrap4":t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#5B6269",fontFamily:"HelveticaNeue-Medium",titleFontSize:"16px",legendFontSize:"14px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"HelveticaNeue-Medium"};break;default:t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#424242",subTitleFontColor:"#424242",legendTitleFontColor:"#757575",legendTextColor:"#757575",dataLabelFontColor:"#000000",tooltipFontColor:"#ffffff",tooltipFillColor:"#000000",zoomFillColor:"#737373",labelFontFamily:"Roboto, Noto, Sans-serif"}}return t}(this.theme),this.renderBorder(),this.renderTitle(this.titleSettings,"title",null,null),this.renderArea(),this.processRequestJsonData(),this.renderComplete()},n.prototype.processRequestJsonData=function(){var e=this,i=this.layersCollection.length-1;this.serverProcess={request:0,response:0};var n,r;this.layersCollection.forEach(function(a,l){if(a.shapeData instanceof o.DataManager){e.serverProcess.request++,r=a.shapeData,n=a.query instanceof o.Query?a.query:new o.Query;r.executeQuery(n).then(function(t){e.processResponseJsonData("DataManager",t,a,"ShapeData")})}else(a.shapeData instanceof Ue||a.shapeData)&&(t.isNullOrUndefined(a.shapeData.dataOptions)||e.processAjaxRequest(a,a.shapeData,"ShapeData"));(a.dataSource instanceof Ue||!t.isNullOrUndefined(a.dataSource.dataOptions))&&e.processAjaxRequest(a,a.dataSource,"DataSource"),e.serverProcess.request===e.serverProcess.response&&i===l&&e.processResponseJsonData(null)})},n.prototype.processAjaxRequest=function(e,i,o){var n,r=this;this.serverProcess.request++,(n=new t.Ajax(i.dataOptions,i.type,i.async,i.contentType)).onSuccess=function(t){r.processResponseJsonData("Ajax",t,e,o)},n.send(i.sendData)},n.prototype.processResponseJsonData=function(e,i,o,n){if(this.serverProcess.response++,e&&("ShapeData"===n?o.shapeData="DataManager"===e?t.isNullOrUndefined(i.result)?i.actual:i.result:JSON.parse(i):o.dataSource="DataManager"===e?t.isNullOrUndefined(i.result)?i.actual:i.result:JSON.parse("["+i+"]")[0]),t.isNullOrUndefined(e)||this.serverProcess.request!==this.serverProcess.response)t.isNullOrUndefined(e)&&this.renderMap();else{var r=this.layersCollection;this.layersCollection=[];for(var a=0;a<r.length;a++)r[a].isBaseLayer&&this.layersCollection.push(r[a]);for(var l=0;l<r.length;l++)r[l].isBaseLayer||this.layersCollection.push(r[l]);this.renderMap()}},n.prototype.renderMap=function(){if(this.legendModule&&this.legendSettings.visible&&this.legendModule.renderLegend(),this.createTile(),this.zoomSettings.enable&&this.zoomModule&&this.zoomModule.createZoomingToolbars(),t.isNullOrUndefined(this.dataLabelModule)||(this.dataLabelModule.dataLabelCollections=[],this.dataLabelShape=[]),this.mapLayerPanel.measureLayerPanel(),this.element.appendChild(this.svgObject),!t.isNullOrUndefined(document.getElementById(this.element.id+"_tile_parent"))){var e=this.svgObject.getBoundingClientRect(),i=document.getElementById(this.element.id),o=document.getElementById(this.element.id+"_tile_parent"),n=o.getBoundingClientRect(),r=e.bottom-n.bottom-i.offsetTop,a=parseFloat(o.style.left)+i.offsetLeft,l=parseFloat(o.style.top)+i.offsetTop;l=r<=11?l:2*l,a=r<=11?a:2*a,o.style.top=l+"px",o.style.left=a+"px"}this.arrangeTemplate(),this.annotationsModule&&this.annotationsModule.renderAnnotationElements(),this.zoomingChange(),this.trigger("loaded",this.isBlazor?{}:{maps:this})},n.prototype.renderArea=function(){var e=this.mapsArea.border.width,t=this.mapsArea.background;if(e>0||t||this.themeStyle.areaBackgroundColor){var i=new Ee(this.element.id+"_MapAreaBorder",t||this.themeStyle.areaBackgroundColor,this.mapsArea.border,1,this.mapAreaRect);this.svgObject.appendChild(this.renderer.drawRectangle(i))}},n.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"Maps Element"),this.element.setAttribute("tabindex",this.tabIndex.toString())},n.prototype.zoomingChange=function(){var e,i;if(G(this.element.id+"_Layer_Collections")&&this.zoomModule&&(this.zoomModule.layerCollectionEle=G(this.element.id+"_Layer_Collections")),this.isTileMap&&G(this.element.id+"_Tile_SVG")&&G(this.element.id+"_tile_parent")){var o=G(this.element.id+"_tile_parent").getBoundingClientRect(),n=G(this.element.id+"_Tile_SVG").getBoundingClientRect();e=o.left-n.left,i=o.top-n.top,G(this.element.id+"_Tile_SVG").setAttribute("transform","translate("+e+" "+i+")");var r=document.getElementsByClassName("template");if(!t.isNullOrUndefined(r)&&r.length>0)for(var a=0;a<r.length;a++){var l=r[a];l.style.left=e+"px",l.style.top=i+"px"}}if(this.zoomSettings.zoomFactor>=1){this.zoomModule&&this.zoomModule.toolBarGroup&&this.zoomSettings.enable&&this.zoomModule.alignToolBar();var s=document.getElementById(this.element.id+"_Layer_Collections");if(!t.isNullOrUndefined(s)&&s.childElementCount>0)for(a=0;a<s.childNodes.length;a++){var p=s.childNodes[a];if("g"===p.tagName)for(var h=parseFloat(p.id.split("_LayerIndex_")[1].split("_")[0]),d=0;d<p.childNodes.length;d++){var c=p.childNodes[d];c.id.indexOf("_Markers_Group")>-1||c.id.indexOf("_bubble_Group")>-1||c.id.indexOf("_dataLableIndex_Group")>-1||he(c,h,this.scale,this)}}this.zoomModule&&this.previousScale!==this.scale&&this.zoomModule.applyTransform(!0)}},n.prototype.createSecondaryElement=function(){if(t.isNullOrUndefined(document.getElementById(this.element.id+"_Secondary_Element"))){var e=t.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:1;"});this.element.appendChild(e)}},n.prototype.arrangeTemplate=function(){G(this.element.id+"_Secondary_Element");document.getElementById(this.element.id+"_Legend_Border")&&(document.getElementById(this.element.id+"_Legend_Border").style.pointerEvents="none");var e=document.getElementsByClassName("template");if(!t.isNullOrUndefined(e)&&e.length>0&&G(this.element.id+"_Layer_Collections"))for(var i=0;i<e.length;i++){var o=e[i];if(!t.isNullOrUndefined(o)&&o.childElementCount>0)for(var n=G(this.element.id+"_Layer_Collections").getBoundingClientRect(),r=G(o.id).getBoundingClientRect(),a=0;a<o.childElementCount;a++){var l=o.childNodes[a],s=l.getBoundingClientRect();l.style.left=(this.isTileMap?parseFloat(l.style.left):n.left<r.left?parseFloat(l.style.left)-Math.abs(r.left-n.left):parseFloat(l.style.left)+Math.abs(r.left-n.left))-s.width/2+"px",l.style.top=(this.isTileMap?parseFloat(l.style.top):n.top<r.top?parseFloat(l.style.top)-Math.abs(r.top-n.top):parseFloat(l.style.top)+Math.abs(r.top-n.top))-s.height/2+"px"}}},n.prototype.createTile=function(){var e=this.layersCollection[0];if(e.isBaseLayer&&("OSM"===e.layerType||"Bing"===e.layerType)){D(this.element.id+"_tile_parent");var i=t.createElement("div",{id:this.element.id+"_tile_parent",styles:"position: absolute; left: "+this.mapAreaRect.x+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"});this.element.appendChild(i)}},n.prototype.initPrivateVariable=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-maps").length;this.element.id="maps_control_"+e}this.renderer=new i.SvgRenderer(this.element.id),this.mapLayerPanel=new jt(this)},n.prototype.findBaseAndSubLayers=function(){var e=this,t=this.baseLayerIndex,i=[],o=[];this.layersCollection=[],this.layers.forEach(function(e){"Layer"===e.type?i.push(e):o.push(e)});for(var n=0;n<i.length;n++){var r=i[n];if(r.visible&&t===n){r.isBaseLayer=!0,this.isTileMap="Geometry"!==r.layerType,this.layersCollection.push(r);break}if(n===i.length-1){this.layersCollection.push(i[0]);break}}o.map(function(t,i){t.visible&&e.layersCollection.push(t)})},n.prototype.renderBorder=function(){var e=this.border.width,i=this.svgObject.querySelector("#"+this.element.id+"_MapBorder");if((e>0||this.background||this.themeStyle.backgroundColor)&&t.isNullOrUndefined(i)){var o=new Ee(this.element.id+"_MapBorder",this.background||this.themeStyle.backgroundColor,this.border,1,new je(e/2,e/2,this.availableSize.width-e,this.availableSize.height-e));this.svgObject.appendChild(this.renderer.drawRectangle(o))}else i.setAttribute("fill",this.background||this.themeStyle.backgroundColor)},n.prototype.renderTitle=function(e,i,o,n){var r,a=e.textStyle,l=Math.abs(this.margin.left+this.margin.right-this.availableSize.width);if(a.fontFamily=this.themeStyle.fontFamily||a.fontFamily,a.size=this.themeStyle.titleFontSize||a.size,e.text){t.isNullOrUndefined(n)&&(n=this.renderer.createGroup({id:this.element.id+"_Title_Group"}));var s=A(l,e.text,a),p=x(s,a),h=U(t.isNullOrUndefined(o)?new je(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height):o,e.alignment,p,i),d=new Le(this.element.id+"_Map_"+i,h.x,h.y,"start",s),c=new je(h.x,h.y,p.width,p.height),m=S(d,a,a.color||("title"===i?this.themeStyle.titleFontColor:this.themeStyle.subTitleFontColor),n);m.setAttribute("aria-label",this.description||e.text),m.setAttribute("tabindex",(this.tabIndex+("title"===i?1:2)).toString()),("title"===i&&!e.subtitleSettings.text||"subtitle"===i)&&(r=Math.abs(c.y+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new je(this.margin.left,c.y+10,l,r-10)),"subtitle"!==i&&e.subtitleSettings.text?this.renderTitle(e.subtitleSettings,"subtitle",c,n):this.svgObject.appendChild(n)}else r=Math.abs(this.margin.top+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new je(this.margin.left,this.margin.top,l,r)},n.prototype.createSVG=function(){this.removeSvg(),l(this)},n.prototype.removeSvg=function(){for(var e=0;e<this.annotations.length;e++)t.resetBlazorTemplate(this.element.id+"_ContentTemplate_"+e,"ContentTemplate");if(D(this.element.id+"_Secondary_Element"),D(this.element.id+"_tile_parent"),document.getElementsByClassName("e-tooltip-wrap")[0]&&t.remove(document.getElementsByClassName("e-tooltip-wrap")[0]),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}},n.prototype.wireEVents=function(){t.EventHandler.add(this.element,"click",this.mapsOnClick,this),t.EventHandler.add(this.element,"dblclick",this.mapsOnDoubleClick,this),t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.mouseDownOnMap,this),t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnMap,this),t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEndOnMap,this),t.EventHandler.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap,this),window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize.bind(this))},n.prototype.unWireEVents=function(){t.EventHandler.remove(this.element,"click",this.mapsOnClick),t.EventHandler.remove(this.element,"dblclick",this.mapsOnDoubleClick),t.EventHandler.remove(this.element,t.Browser.touchStartEvent,this.mouseDownOnMap),t.EventHandler.remove(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnMap),t.EventHandler.remove(this.element,t.Browser.touchEndEvent,this.mouseEndOnMap),t.EventHandler.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap),window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize)},n.prototype.mouseLeaveOnMap=function(e){document.getElementsByClassName("highlightMapStyle").length>0&&this.legendModule&&(this.legendModule.removeShapeHighlightCollection(),te(document.getElementsByClassName("highlightMapStyle")[0]))},n.prototype.mapsOnClick=function(e){var t,i=this,o=e.target,n=o.id,r=0,a=null,l=null;this.mouseClickEvent={x:e.x,y:e.y},-1===o.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==this.mouseClickEvent.x||this.mouseDownEvent.y!==this.mouseClickEvent.y?this.isTileMap&&this.mouseDownEvent.x===this.mouseClickEvent.x&&this.mouseDownEvent.y===this.mouseClickEvent.y&&(a=(t=this.getTileGeoLocation(e)).latitude,l=t.longitude):(r=parseFloat(o.id.split("_LayerIndex_")[1].split("_")[0]),a=(t=this.getGeoLocation(r,e)).latitude,l=t.longitude);var s={cancel:!1,name:"click",target:n,x:e.clientX,y:e.clientY,latitude:a,longitude:l};this.trigger("click",s,function(t){if(-1!==o.id.indexOf("shapeIndex")){var r=parseInt(o.id.split("_LayerIndex_")[1].split("_")[0],10);Y(n,i.layers[r].selectionSettings,i,xt)}i.markerModule&&(i.markerModule.markerClick(e),i.markerModule.markerClusterClick(e)),i.bubbleModule&&i.bubbleModule.bubbleClick(e),s.cancel||i.notify("click",o)})},n.prototype.mouseEndOnMap=function(e){var i,o,n,r=e.target,a=r.id;this.element.getBoundingClientRect(),e.target;if(-1!==e.type.indexOf("touch")?(this.isTouch=!0,i=(n=e).changedTouches[0].pageX,o=n.changedTouches[0].pageY,n.target):(this.isTouch="touch"===e.pointerType,i=e.pageX,o=e.pageY,e.target),-1!==r.id.indexOf("shapeIndex")){var l=parseInt(r.id.split("_LayerIndex_")[1].split("_")[0],10);Y(a,this.layers[l].selectionSettings,this,xt)}return this.isTouch&&this.titleTooltip(e,i,o,!0),this.notify(t.Browser.touchEndEvent,e),e.preventDefault(),!1},n.prototype.mouseDownOnMap=function(e){this.mouseDownEvent={x:e.x,y:e.y};this.element.getBoundingClientRect(),e.target;this.notify(t.Browser.touchStartEvent,e)},n.prototype.mapsOnDoubleClick=function(e){this.notify("dblclick",e)},n.prototype.mouseMoveOnMap=function(e){"touchmove"===e.type?e.target:e.target,this.markerModule&&(this.markerModule.markerMove(e),this.markerModule.markerClusterMouseMove(e)),this.bubbleModule&&this.bubbleModule.bubbleMove(e),this.onMouseMove(e),this.notify(t.Browser.touchMoveEvent,e)},n.prototype.onMouseMove=function(e){e.target;return this.isTouch||this.titleTooltip(e,e.pageX,e.pageY),!1},n.prototype.titleTooltip=function(e,t,i,o){e.target.id===this.element.id+"_Map_title"&&e.target.textContent.indexOf("...")>-1?ne(this.titleSettings.text,this.titleSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Title_Tooltip",q(this.element.id+"_Secondary_Element"),o):D(this.element.id+"_EJ2_Title_Tooltip")},n.prototype.mapsOnResize=function(e){var t=this,i={name:"resize",previousSize:this.availableSize,currentSize:new Oe(0,0),maps:this};return this.resizeTo&&clearTimeout(this.resizeTo),this.element.classList.contains("e-maps")&&(this.resizeTo=setTimeout(function(){t.unWireEVents(),t.createSVG(),t.refreshing=!0,t.wireEVents(),i.currentSize=t.availableSize,t.trigger("resize",t.isBlazor?{}:i),t.render()},500)),!1},n.prototype.zoomByPosition=function(e,i){var o,n=this.mapLayerPanel.calculateFactor(this.layersCollection[0]),r=this.mapAreaRect;if(!this.isTileMap&&this.zoomModule)if(t.isNullOrUndefined(e))o={x:r.width/2,y:r.height/2},this.zoomModule.performZooming(o,i,i>this.scale?"ZoomIn":"ZoomOut");else{o=d(e.latitude,e.longitude,n,this.layersCollection[0],this);var a=document.getElementById(this.element.id+"_Layer_Collections").getBoundingClientRect(),l=this.svgObject.getBoundingClientRect(),s=Math.abs(a.left-l.left)/this.scale,p=Math.abs(a.top-l.top)/this.scale,h=this.translatePoint.x+s,c=this.translatePoint.y+p;this.scale=i,this.translatePoint.x=((a.left<l.left?h:0)+r.width/2-o.x*i)/i,this.translatePoint.y=((a.top<l.top?c:0)+r.height/2-o.y*i)/i,this.zoomModule.applyTransform()}else this.zoomModule&&(this.tileZoomLevel=i,this.tileTranslatePoint=this.mapLayerPanel.panTileMap(this.availableSize.width,this.availableSize.height,{x:e.longitude,y:e.latitude}),this.mapLayerPanel.generateTiles(i,this.tileTranslatePoint,new zt(this)))},n.prototype.panByDirection=function(e){var t=0,i=0;switch(e){case"Left":t=-this.mapAreaRect.width/7;break;case"Right":t=this.mapAreaRect.width/7;break;case"Top":i=-this.mapAreaRect.height/7;break;case"Bottom":i=this.mapAreaRect.height/7}this.zoomModule&&this.zoomModule.panning(e,t,i)},n.prototype.addLayer=function(e){this.layers.push(new gt(this.layers[0],"layers",e)),this.refresh()},n.prototype.removeLayer=function(e){this.layers.splice(e,1),this.refresh()},n.prototype.addMarker=function(e,t){var i=document.getElementById(this.element.id+"_LayerIndex_"+e);if(t.length>0&&i){for(var o=0,n=t;o<n.length;o++){var r=n[o];this.layersCollection[e].markerSettings.push(new ut(this,"markerSettings",r))}new bt(this).markerRender(i,e,this.mapLayerPanel.currentFactor,"AddMarker"),this.arrangeTemplate()}},n.prototype.setCulture=function(){this.intl=new t.Internationalization,this.setLocaleConstants(),this.localeObject=new t.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},n.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom In",Zoom:"Zoom",ZoomOut:"Zoom Out",Pan:"Pan",Reset:"Reset"}},n.prototype.destroy=function(){this.unWireEVents(),e.prototype.destroy.call(this)},n.prototype.getModuleName=function(){return"maps"},n.prototype.getPersistData=function(){return""},n.prototype.onPropertyChanged=function(e,t){for(var i=!1,o=0,n=Object.keys(e);o<n.length;o++){switch(n[o]){case"background":this.renderBorder();break;case"height":case"width":case"layers":case"projectionType":case"legendSettings":case"zoomSettings":i=!0}}i&&(this.createSVG(),this.render())},n.prototype.requiredModules=function(){var e=[],t=this.findVisibleLayers(this.layers),i=!1;return this.annotations.map(function(e,t){i=null!=e.content}),this.isBubbleVisible()&&e.push({member:"Bubble",args:[this]}),t.highlight&&e.push({member:"Highlight",args:[this]}),t.selection&&e.push({member:"Selection",args:[this]}),this.legendSettings.visible&&e.push({member:"Legend",args:[this]}),(this.zoomSettings.enable||this.zoomSettings.zoomFactor>this.zoomSettings.minZoom)&&e.push({member:"Zoom",args:[this]}),this.isMarkersVisible()&&e.push({member:"Marker",args:[this]}),this.isDataLabelVisible()&&e.push({member:"DataLabel",args:[this]}),this.isNavigationVisible()&&e.push({member:"NavigationLine",args:[this]}),t.tooltip&&e.push({member:"MapsTooltip",args:[this]}),i&&e.push({member:"Annotations",args:[this,At]}),e},n.prototype.isMarkersVisible=function(){var e=!1;return this.layers.forEach(function(t,i){for(var o=0;o<t.markerSettings.length;o++)if(t.markerSettings[o].visible){e=!0;break}}),e},n.prototype.isDataLabelVisible=function(){for(var e=!1,t=0;t<this.layers.length;t++)if(this.layers[t].dataLabelSettings.visible){e=!0;break}return e},n.prototype.isNavigationVisible=function(){var e=!1;return this.layers.forEach(function(t,i){for(var o=0;o<t.navigationLineSettings.length;o++)if(t.navigationLineSettings[o].visible){e=!0;break}}),e},n.prototype.isBubbleVisible=function(){for(var e=!1,t=0,i=this.layers;t<i.length;t++){var o=i[t];if(this.getBubbleVisible(o)){e=!0;break}}return e},n.prototype.getBubbleVisible=function(e){for(var t=!1,i=0,o=e.bubbleSettings;i<o.length;i++){if(o[i].visible){t=!0;break}}return t},n.prototype.print=function(e){new Ut(this).print(e)},n.prototype.export=function(e,t,i){new Ut(this).export(e,t,i)},n.prototype.findVisibleLayers=function(e,t,i,o,n,r){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===r&&(r=!1);for(var a,l,s=0,p=e;s<p.length;s++){var h=p[s];if(t=h.visible||t,h.visible){a=h.bubbleSettings,l=h.markerSettings;for(var d=0,c=h.navigationLineSettings;d<c.length;d++){var m=c[d];m.visible&&(n=m.highlightSettings.enable||n,r=m.selectionSettings.enable||r)}for(var u=0,g=l;u<g.length;u++){var y=g[u];if(y.visible&&(o=y.tooltipSettings.visible||o,n=y.selectionSettings.enable||n,r=y.highlightSettings.enable||r),o)break}for(var f=0,v=a;f<v.length;f++){var b=v[f];if(b.visible&&(o=b.tooltipSettings.visible||o,n=b.selectionSettings.enable||n,r=b.highlightSettings.enable||r),o)break}o=h.tooltipSettings.visible||o,n=h.selectionSettings.enable||n,r=h.highlightSettings.enable||r}if(t&&i&&o)break}return{layer:t,bubble:i,tooltip:o,selection:n,highlight:r}},n.prototype.getGeoLocation=function(e,t){var i=document.getElementById(this.element.id),o=t.layerX-i.offsetLeft,n=t.layerY-i.offsetTop,r=H(this,this.layersCollection[e],!1).location,a=r.x*this.scale,l=r.y*this.scale,s=Math.min(this.mapAreaRect.height,this.mapAreaRect.width)*this.mapLayerPanel.currentFactor*this.scale,p=this.clip(o-a,0,s-1)/s-.5,h=.5-this.clip(n-l,0,s-1)/s;return{latitude:90-360*Math.atan(Math.exp(2*-h*Math.PI))/Math.PI,longitude:360*p}},n.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},n.prototype.getTileGeoLocation=function(e){var t,i=document.getElementById(this.element.id),o=document.getElementById(this.element.id+"_tile_parent");this.mapLayerPanel.tiles[this.mapLayerPanel.tiles.length-1],this.mapLayerPanel.tiles[0];return t=this.pointToLatLong(e.layerX-(o.offsetLeft-i.offsetLeft),e.layerY-(o.offsetTop-i.offsetTop)),{latitude:t.latitude,longitude:t.longitude}},n.prototype.pointToLatLong=function(e,t){t=this.zoomSettings.enable?t+10:t;var i=256*Math.pow(2,this.tileZoomLevel),o=this.clip(e-this.translatePoint.x*this.scale,0,i-1)/i-.5,n=.5-this.clip(t-this.translatePoint.y*this.scale,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-n*Math.PI))/Math.PI,longitude:360*o}},Ht([t.Property(null)],n.prototype,"background",void 0),Ht([t.Property(!1)],n.prototype,"useGroupingSeparator",void 0),Ht([t.Property(null)],n.prototype,"format",void 0),Ht([t.Property(null)],n.prototype,"width",void 0),Ht([t.Property(null)],n.prototype,"height",void 0),Ht([t.Complex({},st)],n.prototype,"titleSettings",void 0),Ht([t.Complex({},pt)],n.prototype,"zoomSettings",void 0),Ht([t.Complex({},ht)],n.prototype,"legendSettings",void 0),Ht([t.Collection([],gt)],n.prototype,"layers",void 0),Ht([t.Collection([],qe)],n.prototype,"annotations",void 0),Ht([t.Complex({},$e)],n.prototype,"margin",void 0),Ht([t.Complex({color:"#DDDDDD",width:0},Je)],n.prototype,"border",void 0),Ht([t.Property("Material")],n.prototype,"theme",void 0),Ht([t.Property("Mercator")],n.prototype,"projectionType",void 0),Ht([t.Property(0)],n.prototype,"baseLayerIndex",void 0),Ht([t.Property(null)],n.prototype,"description",void 0),Ht([t.Property(1)],n.prototype,"tabIndex",void 0),Ht([t.Complex({latitude:null,longitude:null},Ke)],n.prototype,"centerPosition",void 0),Ht([t.Complex({},ft)],n.prototype,"mapsArea",void 0),Ht([t.Event()],n.prototype,"load",void 0),Ht([t.Event()],n.prototype,"beforePrint",void 0),Ht([t.Event()],n.prototype,"loaded",void 0),Ht([t.Event()],n.prototype,"click",void 0),Ht([t.Event()],n.prototype,"doubleClick",void 0),Ht([t.Event()],n.prototype,"rightClick",void 0),Ht([t.Event()],n.prototype,"resize",void 0),Ht([t.Event()],n.prototype,"tooltipRender",void 0),Ht([t.Event()],n.prototype,"shapeSelected",void 0),Ht([t.Event()],n.prototype,"itemSelection",void 0),Ht([t.Event()],n.prototype,"itemHighlight",void 0),Ht([t.Event()],n.prototype,"shapeHighlight",void 0),Ht([t.Event()],n.prototype,"layerRendering",void 0),Ht([t.Event()],n.prototype,"shapeRendering",void 0),Ht([t.Event()],n.prototype,"markerRendering",void 0),Ht([t.Event()],n.prototype,"markerClusterRendering",void 0),Ht([t.Event()],n.prototype,"markerClick",void 0),Ht([t.Event()],n.prototype,"markerClusterClick",void 0),Ht([t.Event()],n.prototype,"markerClusterMouseMove",void 0),Ht([t.Event()],n.prototype,"markerMouseMove",void 0),Ht([t.Event()],n.prototype,"dataLabelRendering",void 0),Ht([t.Event()],n.prototype,"bubbleRendering",void 0),Ht([t.Event()],n.prototype,"bubbleClick",void 0),Ht([t.Event()],n.prototype,"bubbleMouseMove",void 0),Ht([t.Event()],n.prototype,"animationComplete",void 0),Ht([t.Event()],n.prototype,"annotationRendering",void 0),Ht([t.Event()],n.prototype,"zoom",void 0),Ht([t.Event()],n.prototype,"pan",void 0),n=Ht([t.NotifyPropertyChanges],n)}(t.Component),Gt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},Wt=function(){function e(e){this.id="",this.maps=e,this.bubbleCollection=[]}return e.prototype.renderBubble=function(e,i,o,n,r,a,l,s,p){var h,d,c=this,m=s.layerData,u=e.colorValuePath,g=i[u],y=Number(i[u]),f=Number(i[e.valuePath]);if(isNaN(f)&&isNaN(y)&&t.isNullOrUndefined(g))return null;var v=F(e.minRadius,e.maxRadius,f,n.min,n.max),b=new Ft(this.maps).getColorByValue(e.colorMapping,y,g);d="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.fill)?o:b.fill,h="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.opacity)?e.opacity:b.opacity;for(var x=[[]],S=0,w=0,M=0,O=0,_=m.length;O<_;O++){var C=m[O];C=C.property;var P=B(i[s.shapeDataPath],s.shapePropertyPath,C);if(i[s.shapeDataPath]===C[P])if("Point"===m[O].type)x.push(this.getPoints(m[O],[]));else if(m[O]._isMultiPolygon)for(var L=m[O],E=0;E<L.length;E++)x.push(this.getPoints(L[E],[])),w<(M=x[x.length-1].length)&&(w=M,S=x.length-1);else x.push(this.getPoints(m[O],[])),w<(M=x[x.length-1].length)&&(w=M,S=x.length-1)}var k,N,z=this.maps.projectionType,j=R(x[S],z);if(e.visible){if(t.isNullOrUndefined(j)){var A=x.length-1;if(N={cancel:!1,name:Lt,border:e.border,cx:x[A].x,cy:x[A].y,data:i,fill:d,maps:this.maps,radius:v},this.maps.isBlazor){N.maps;var U=Gt(N,["maps"]);N=U}}else k="Mercator"===this.maps.projectionType?j.y:-j.y,N={cancel:!1,name:Lt,border:e.border,cx:j.x,cy:k,data:i,fill:d,maps:this.maps.isBlazor?null:this.maps,radius:v};this.maps.trigger("bubbleRendering",N,function(i){if(!N.cancel){var o;if("Circle"===e.bubbleType){var n=new ke(c.id,N.fill,N.border,h,0,0,N.radius,null);o=T(c.maps,n,p)}else{var d="Mercator"===c.maps.projectionType?N.cy-v:N.cy+v,m=new Ee(c.id,N.fill,N.border,h,new je(0,0,2*v,2*v),2,2);N.cx-=v,N.cy=d,o=I(c.maps,m,p)}c.bubbleCollection.push({LayerIndex:l,BubbleIndex:r,DataIndex:a,element:o,center:{x:N.cx,y:N.cy}});var u,g=0!==s.animationDuration||t.isNullOrUndefined(c.maps.zoomModule),y=(u=c.maps.zoomSettings.zoomFactor>1&&!t.isNullOrUndefined(c.maps.zoomModule)?Z(c.maps,s,g):H(c.maps,s,g)).scale,f=u.location,b=new Re(c.maps.isTileMap?N.cx:(N.cx+f.x)*y,c.maps.isTileMap?N.cy:(N.cy+f.y)*y);o.setAttribute("transform","translate( "+b.x+" "+b.y+" )");var x=e.dataSource.length-1===a?"bubble":null;"Square"===e.bubbleType?(b.x+=v,b.y+=v*("Mercator"===c.maps.projectionType?1:-1)):v=0,e.animationDuration>0&&ie(o,e.animationDelay,e.animationDuration,b,c.maps,x,v)}})}},e.prototype.getPoints=function(e,i){return t.isNullOrUndefined(e.map)?i=e.point:e.map(function(e,t){i.push(new _e(e.point.x,e.point.y))}),i},e.prototype.bubbleClick=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")){var o=this.getbubble(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Tt,data:o,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=Gt(n,["maps"])}this.maps.trigger(Tt,n)}}},e.prototype.getbubble=function(e){var t=e.split("_LayerIndex_"),i=parseInt(t[1].split("_")[0],10),o=this.maps.layers[i];if(e.indexOf("_BubbleIndex_")>-1){var n=parseInt(t[1].split("_BubbleIndex_")[1],10);if(!isNaN(n))return o.dataSource[n]}return null},e.prototype.bubbleMove=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")){var o=this.getbubble(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:It,data:o,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=Gt(n,["maps"])}this.maps.trigger(It,n)}}},e.prototype.getModuleName=function(){return"Bubble"},e.prototype.destroy=function(e){},e}(),Vt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},qt=function(){function e(e){this.value={rightWidth:0,leftWidth:0,heightTop:0,heightBottom:0},this.maps=e,this.dataLabelCollections=[]}return e.prototype.getDataLabel=function(e,t,i,o){for(var n,r=0;r<e.length;r++){var a=e[r];if(a[o]===i){n=a;break}}return n},e.prototype.renderLabel=function(e,i,o,n,r,a,l,s){var p,h,d,c,m,u,g,y,f=this,v=e.dataLabelSettings,b=e.dataLabelSettings.textStyle,w=e.dataLabelSettings,O=e.dataLabelSettings.labelPath,_=[[]],C=0,P=0,L=o,T="",I=0,E=!1,k=o.properties,N=this.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+l+"_LabelIndex_"+l,B=new _e(0,0),F=n[l];b.fontFamily=this.maps.themeStyle.labelFontFamily,o=F.property;for(var j,U,D="[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)?e.shapePropertyPath:[e.shapePropertyPath],Z=0!==e.animationDuration||t.isNullOrUndefined(this.maps.zoomModule),G=this.maps.isTileMap?new Object:H(this.maps,e,Z),q=this.maps.isTileMap?this.maps.scale:G.scale,X=this.maps.isTileMap?this.maps.translatePoint:G.location,Y=this.maps.zoomTranslatePoint,J=t.isNullOrUndefined(this.maps.scale)?1:Math.floor(this.maps.scale),K=this.maps.zoomSettings.enable?!t.isNullOrUndefined(this.maps.zoomShapeCollection)&&this.maps.zoomShapeCollection.length>0:this.maps.zoomSettings.enable,Q=0;Q<D.length;Q++)if(k[D[Q]]){j=D[Q];break}if(c=this.getDataLabel(e.dataSource,O,L.properties[j],e.shapeDataPath),!t.isNullOrUndefined(F.property)&&(k[O]||c))if(_=[[]],n[l]._isMultiPolygon){var $=n[l];for(Q=0;Q<$.length;Q++)_.push(this.getPoint($[Q],[])),P<(I=_[_.length-1].length)&&(P=I,C=_.length-1)}else _.push(this.getPoint(n[l],[])),P<(I=_[_.length-1].length)&&(P=I,C=_.length-1);var ee=T=t.isNullOrUndefined(c)?L.properties[O]:c[O].toString(),te=this.maps.projectionType,ie=u=R(_[C],te);if(!t.isNullOrUndefined(T)&&!t.isNullOrUndefined(u)){if(K&&J>1){if(i>0)for(var oe=0;oe<this.maps.zoomLabelPositions.length;oe++)if(this.maps.zoomLabelPositions[oe].dataLabelText===T){m=l,l=oe,E=!0;break}g=u.x,y=u.y,u.x=(u.x+Y.x)*q,u.y=(u.y+Y.y)*q}u.y="Mercator"===this.maps.projectionType?u.y:-u.y,t.isNullOrUndefined(this.maps.format)||isNaN(parseFloat(T))||this.maps.useGroupingSeparator&&(T=W(this.maps,parseFloat(T)),t.isNullOrUndefined(c)||(c[O]=T));var ne={name:Pt,maps:this.maps,cancel:!1,border:v.border,datalabel:v,fill:v.fill,template:v.template,text:T};if(this.maps.isBlazor){ne.maps;var re=Vt(ne,["maps"]);ne=re}this.maps.trigger("dataLabelRendering",ne,function(e){var o=[],n=K&&J>1?f.maps.zoomShapeCollection[l].width:u.rightMax.x-u.leftMax.x;t.isNullOrUndefined(f.maps.dataLabelShape)||(U=ie.rightMax.x-ie.leftMax.x,f.maps.dataLabelShape.push(U)),ne.text===T||ne.cancel||(T=ne.text);var v=x(T,b),O=A(n,T,b),P=x(O,b),I=u.y-v.height/4,k=u.y+v.height/4,F=u.y-v.height/4,j=u.y+v.height/4;if((o=z(_[C],I,k)).length>5&&"MultiPolygon"!==L.geometry.type&&"MultiPolygon"!==L.type){var D=R(o,te);K&&J>1&&(D.x=(f.maps.zoomLabelPositions[l].location.x+Y.x)*q,D.y=(f.maps.zoomLabelPositions[l].location.y+Y.y)*q),g=D.x,u.x=D.x,n=K&&J>1?f.maps.zoomShapeCollection[l].width:D.rightMax.x-D.leftMax.x}var H=u.x+v.width/2,Z=u.x-v.width/2;P=x(O=A(n,T,b),b),f.value[l]={rightWidth:H,leftWidth:Z,heightTop:F,heightBottom:j};var G;if(""!==ne.template){var W=(p=V(ne.template))?p(window.Blazor?{}:f.maps,null,null,f.maps.element.id):document.createElement("div");W.innerHTML=p?"":ne.template,(G=M(W,N,t.isNullOrUndefined(c)?L.properties:c,0,f.maps)).style.left=Math.abs(f.maps.baseMapRectBounds.min.x-u.x)*q+"px",G.style.top=Math.abs(f.maps.baseMapRectBounds.min.y-u.y)*q+"px",a.appendChild(G)}else{if("Trim"===w.smartLabelMode&&(h=new Le(N,B.x,B.y,"middle",O,"","")),"None"===w.smartLabelMode&&(h=new Le(N,B.x,B.y,"middle",T,"","")),"Hide"===w.smartLabelMode&&(T=n>=v.width?T:"",h=new Le(N,B.x,B.y,"middle",T,"","")),T=h.text,"Hide"===w.intersectionAction){for(var Q=0;Q<s.length;Q++)if(!t.isNullOrUndefined(s[Q])){if(!(f.value[l].leftWidth>s[Q].rightWidth||f.value[l].rightWidth<s[Q].leftWidth||f.value[l].heightTop>s[Q].heightBottom||f.value[l].heightBottom<s[Q].heightTop)){T="";break}T=T}s.push(f.value[l]),h=new Le(N,B.x,B.y,"middle",T,"","")}if("Trim"===w.intersectionAction){for(var $=0;$<s.length;$++)if(!t.isNullOrUndefined(s[$]))if(s[$].rightWidth<f.value[l].leftWidth||s[$].leftWidth>f.value[l].rightWidth||s[$].heightBottom<f.value[l].heightTop||s[$].heightTop>f.value[l].heightBottom)O=T,0;else{if(f.value[l].leftWidth>s[$].leftWidth){O=A((n=s[$].rightWidth-f.value[l].leftWidth)-(f.value[l].rightWidth-f.value[l].leftWidth),T,b);break}if(f.value[l].leftWidth<s[$].leftWidth){n=f.value[l].rightWidth-s[$].leftWidth,O=A(Math.abs(n-(f.value[l].rightWidth-f.value[l].leftWidth)),T,b);break}}s.push(f.value[l]),h=new Le(N,B.x,B.y,"middle",O,"","")}if("None"===w.intersectionAction&&(h=new Le(N,B.x,B.y,"middle",T,"","")),O.length>1){var oe=ne.border;if(oe.width>1){var re=ne.fill,ae=w.opacity,le=w.rx,se=w.ry,pe=void 0,he=void 0;K&&J>1?(pe=u.x-v.width/2,he=u.y-v.height/2-5):(pe=(u.x+X.x)*q-v.width/2,he=(u.y+X.y)*q-v.height/2);var de=new Ee(f.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+l+"_rectIndex_"+l,re,oe,ae,new je(pe,he,v.width,v.height),le,se),ce=f.maps.renderer.drawRectangle(de);r.appendChild(ce)}}d=S(h,b,b.color||f.maps.themeStyle.dataLabelFontColor,r),K&&J>1?(d.setAttribute("transform","translate( "+u.x+" "+u.y+" )"),u.x=g,u.y=y):(d.setAttribute("transform","translate( "+(u.x+X.x)*q+" "+((u.y+X.y)*q+P.height/4)+" )"),u.y=u.y+P.height/4),r.appendChild(d)}f.dataLabelCollections.push({location:{x:u.x,y:u.y},element:t.isNullOrUndefined(G)?d:G,layerIndex:i,shapeIndex:E?m:l,labelIndex:E?m:l,dataLabelText:ee}),a.childElementCount>0&&!f.maps.element.contains(a)&&document.getElementById(f.maps.element.id+"_Secondary_Element").appendChild(a)})}},e.prototype.getPoint=function(e,t){return e.map(function(e,i){t.push(new _e(e.point.x,e.point.y))}),t},e.prototype.getModuleName=function(){return"DataLabel"},e.prototype.destroy=function(e){},e}(),Xt=function(){function e(e){this.maps=e}return e.prototype.renderNavigation=function(e,i,o){var n,r;r=e.navigationLineSettings;for(var a,l,s,p,h,m,u,g,y,f,v,b,x,S,w,M,O,_,C,P,L=[],T=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+o+"_line_Group"}),I=0;I<r.length;I++){if(l=r[I].properties.latitude,a=r[I].properties.longitude,s=r[I].properties.visible,p=r[I].angle,h=r[I].width||1,m=r[I].color,u=r[I].properties.dashArray,x=r[I].properties.arrowSettings,f=!t.isNullOrUndefined(x)&&x.properties.showArrow,a.length===l.length&&s)for(var E=0;E<a.length;E++){var k=this.maps.isTileMap?c(new _e(a[E],l[E]),i,this.maps.tileTranslatePoint,!0):d(l[E],a[E],i,e,this.maps);L.push(k)}C=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+o+"_NavigationGroup"+I});for(var N=0;N<L.length-1;N++){p=1<(p=-1>p?-1:p)?1:p;var B=this.maps.element.id+"_LayerIndex_"+o+"_NavigationIndex_"+I+"_Line"+N,z=this.convertRadius(L[N],L[N+1]);if(p<=1&&p>0&&(y=0,L[N].x>L[N+1].x&&(y=1)),p>=-1&&p<0&&(y=1,L[N].x>L[N+1].x&&(y=0)),L[N].x!==L[N+1].x){if(f){v=x.properties.color,b=x.properties.size,_=void 0===x.properties.offSet?0:x.properties.offSet;var F=Math.round(b/2);w="Start"===(S=x.properties.position)?"url(#triangle"+I+")":null,M="End"===S?"url(#triangle"+I+")":null,0!==O&&0===p&&(O="Start"===S?_:-_),O=t.isNullOrUndefined(O)?0:O;var R=this.maps.element.id+"_triangle",j=this.maps.renderer.createDefs();j.innerHTML+='<marker id="triangle'+I+'"></marker>';var A=j.querySelector("#triangle"+I);A.setAttribute("markerWidth",b.toString()),A.setAttribute("markerHeight",b.toString()),A.setAttribute("refX",(F-O).toString()),A.setAttribute("refY",F.toString()),A.setAttribute("orient","auto");g=new Te(R,v,h,m,1,u,"M 0,0  L 0,"+b+" L "+F+", "+F+" Z"),n=this.maps.renderer.drawPath(g),A.appendChild(n),j.appendChild(A),C.appendChild(j)}P=0===(p=Math.abs(p))?"M "+L[N].x+","+L[N].y+"L "+L[N+1].x+","+L[N+1].y+" ":"M "+L[N].x+","+L[N].y+" A "+(z/2+(1-p)*z/(10*p))+" "+(z/2+(1-p)*z/(10*p))+" 0,0,"+y+" , "+L[N+1].x+","+L[N+1].y+" ",g=new Te(B,"none",h,m,1,u,P),n=this.maps.renderer.drawPath(g),t.isNullOrUndefined(S)||("Start"===S?n.setAttribute("marker-start",w):n.setAttribute("marker-end",M)),C.appendChild(n),T.appendChild(C)}}L=[]}return T},e.prototype.convertRadius=function(e,t){var i=t.x-e.x,o=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))},e.prototype.getModuleName=function(){return"NavigationLine"},e.prototype.destroy=function(e){},e}(),Yt=function(){function e(e){this.legendBorderRect=new je(0,0,0,0),this.totalPages=[],this.page=0,this.currentPage=0,this.legendItemRect=new je(0,0,0,0),this.heightIncrement=0,this.widthIncrement=0,this.textMaxWidth=0,this.shapeHighlightCollection=[],this.shapeSelectionCollection=[],this.legendHighlightCollection=[],this.legendSelectionCollection=[],this.legendElement=null,this.shapeElement=null,this.shapeSelection=!0,this.legendSelection=!0,this.maps=e,this.addEventListener()}return e.prototype.renderLegend=function(){this.legendRenderingCollections=[],this.legendCollection=[],this.totalPages=[],this.widthIncrement=0,this.heightIncrement=0,this.defsElement=this.maps.renderer.createDefs(),this.maps.svgObject.appendChild(this.defsElement),this.calculateLegendBounds(),this.drawLegend()},e.prototype.calculateLegendBounds=function(){var e=this,i=this.maps,o=i.legendSettings;this.legendCollection=[];var n=i.mapAreaRect.y;this.legendRenderingCollections=[],i.layersCollection.forEach(function(i,n){if(!t.isNullOrUndefined(i.shapeData)){var r=i.shapeData.features,a=i.shapeDataPath,l=i.shapePropertyPath,s=i.dataSource,p=void 0,h=void 0;if("Layers"===o.type&&i.visible)p=i.shapeSettings.colorValuePath,h=i.shapeSettings.colorMapping,e.getLegends(n,r,h,s,a,p,l);else if("Bubbles"===o.type)for(var d=0,c=i.bubbleSettings;d<c.length;d++){var m=c[d];m.visible&&(p=m.colorValuePath,h=m.colorMapping,s=m.dataSource,e.getLegends(n,r,h,s,a,p,l))}else e.getMarkersLegendCollections(n,i.markerSettings)}});var r=i.legendSettings.title.text,a=i.legendSettings.titleStyle;if(this.legendCollection.length>0){var l,s,p=o.mode,h=0,d=0,c=0,m=0,u=o.shapePadding,g=o.shapeHeight,y=o.shapeWidth,f=[],v=[],b=o.position,S=o.labelDisplayMode,w="None"===o.orientation?"Top"===b||"Bottom"===b?"Horizontal":"Vertical":o.orientation,M=o.width.length>1?o.width.indexOf("%")>-1?i.availableSize.width/100*parseInt(o.width,10):parseInt(o.width,10):null,O=o.height.length>1?o.height.indexOf("%")>-1?i.availableSize.height/100*parseInt(o.height,10):parseInt(o.height,10):null,_=0,C=0,P=x(r,a);if("Interactive"===p){var L=o.textStyle,T=void 0,I=void 0,E=this.legendCollection.length;T="Horizontal"===w?t.isNullOrUndefined(M)?i.mapAreaRect.width/E:M/E:t.isNullOrUndefined(M)?25:M,I="Horizontal"===w?t.isNullOrUndefined(O)?25:O:t.isNullOrUndefined(O)?i.mapAreaRect.height/E:O/E,_=0,C=P.height+10;for(var k=o.labelPosition,N=0,B=0,z=0,F=0,R=0,j=0,U=0;U<this.legendCollection.length;U++){_="Horizontal"===w?_+T:_,C="Horizontal"===w?C:C+I;var D=this.legendCollection[U].text,H=new Oe(0,0);"None"===S?H=x(D,L):"Trim"===S?H=x(D=A("Horizontal"===w?T:I,D,L),L):D="",R=Math.max(R,H.height),j=Math.max(j,H.width),H.width>0&&H.height>0&&("Horizontal"===w?(N=_+T/2,B="After"===k?C+I+H.height/2+10:C-10):(N="After"===k?_-H.width/2-10:_+T+H.width/2+10,B=C+I/2+H.height/4)),0===U?(z="Horizontal"===w?_:"After"===k?N-H.width/2:_,F="Horizontal"===w?"After"===k?C:B-H.height/2:C):U===this.legendCollection.length-1&&(M="Horizontal"===w?Math.abs(_+T-z):T+j+10,O="Horizontal"===w?I+R/2+10:Math.abs(C+I-F)),this.legendRenderingCollections.push({fill:this.legendCollection[U].fill,x:_,y:C,width:T,height:I,text:D,textX:N,textY:B,textWidth:H.width,textHeight:H.height})}this.legendItemRect={x:z,y:F,width:M,height:O}}else{M=t.isNullOrUndefined(M)?i.mapAreaRect.width:M,O=t.isNullOrUndefined(O)?i.mapAreaRect.height:O;var Z=0;for(U=0;U<this.legendCollection.length;U++){var G=this.legendCollection[U];t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]});var W=x(G.text,o.textStyle);if(this.textMaxWidth=Math.max(this.textMaxWidth,W.width),0===U)_=h=10+y/2,C=d=n+P.height+(g>W.height?g/2:W.height/4);else{var V=W.height>g?W.height:g;if("Horizontal"===w){var q=v[Z-1].x+v[Z-1].width+10+y;if(q+u+W.width>M){var X=(v[Z-1].y>f[Z-1].y+g/2?v[Z-1].y:f[Z-1].y+g/2)+n;X+V>O?(this.getPageChanged(),Z=0,f=[],v=[],h=_,d=C):(h=f[0].x,d=X+V/2)}else h=q-y/2,d=f[Z-1].y}else{var Y=v[Z-1].y>f[Z-1].y+g/2?v[Z-1].y:f[Z-1].y+g/2;if(Y+n+V>O){var J=v[Z-1].x+this.textMaxWidth+10;J+u+W.width>M?(h=_,d=C,v=[],f=[],this.getPageChanged(),Z=0):(h=J+y/2,d=f[0].y)}else h=f[Z-1].x,d=Y+n+g/2}}c=h+y/2+u,m=d+W.height/4,f.push({x:h,y:d}),v.push({x:c,y:m,width:W.width,height:W.height/2}),this.totalPages[this.page].Collection.push({DisplayText:G.text,ImageSrc:G.imageSrc,Shape:{x:h,y:d},Text:{x:c,y:m},Fill:G.fill,Rect:{x:f[Z].x-y/2,y:f[Z].y-g/2<m-W.height?f[Z].y-g/2:m-W.height,width:Math.abs(f[Z].x-y/2-(c+W.width)),height:g>W.height?g:W.height}}),Z++}var K=this.totalPages[0].Collection;K.forEach(function(t,i){var o=new je(t.Rect.x,t.Rect.y,t.Rect.width,t.Rect.height);0===i&&(l=o.x,s=o.y),e.widthIncrement=Math.max(e.widthIncrement,Math.abs(l-(o.x+o.width))),e.heightIncrement=Math.max(e.heightIncrement,Math.abs(s-(o.y+o.height)))}),M=this.widthIncrement<M?this.widthIncrement:M,O=this.heightIncrement<O?this.heightIncrement:O,this.legendItemRect={x:K[0].Rect.x,y:K[0].Rect.y,width:M,height:O}}}},e.prototype.getLegends=function(e,t,i,o,n,r,a){this.getRangeLegendCollection(e,t,i,o,n,r,a),this.getEqualLegendCollection(e,t,i,o,n,r,a),this.getDataLegendCollection(e,t,i,o,n,r,a)},e.prototype.getPageChanged=function(){this.page++,t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},e.prototype.drawLegend=function(){var e,t=this,i=this.maps,o=i.legendSettings,n=i.renderer,r=o.textStyle;this.legendGroup=n.createGroup({id:i.element.id+"_Legend_Group"});var a={name:kt,cancel:!1,fill:"",shape:o.shape,shapeBorder:o.shapeBorder};if("Interactive"===o.mode)for(var l=function(l){var p=i.element.id+"_Legend_Index_"+l,h=i.element.id+"_Legend_Index_"+l+"_Text",d=s.legendRenderingCollections[l],c=new je(d.x,d.y,d.width,d.height),m=new _e(d.textX,d.textY);a.fill=d.fill,i.trigger(kt,a,function(){r.color=null!==r.color?r.color:t.maps.themeStyle.legendTextColor;var s=new Ee(p,a.fill,a.shapeBorder,o.opacity,c);e=new Le(h,m.x,m.y,"middle",d.text,"",""),r.fontFamily=i.themeStyle.fontFamily||r.fontFamily,r.size=i.themeStyle.legendFontSize||r.size,S(e,r,r.color,t.legendGroup),t.legendGroup.appendChild(n.drawRectangle(s)),l===t.legendRenderingCollections.length-1&&t.renderLegendBorder()})},s=this,p=0;p<this.legendRenderingCollections.length;p++)l(p);else this.drawLegendItem(this.currentPage)},e.prototype.drawLegendItem=function(e){var i,o=this,n=this.maps,r=n.legendSettings,a=new Oe(r.shapeWidth,r.shapeHeight),l=n.renderer,s=r.shapeBorder,p={name:kt,cancel:!1,fill:"",shape:r.shape};if(e>=0&&e<this.totalPages.length){K(this.legendGroup.id,this.maps.element.id)&&t.remove(K(this.legendGroup.id,this.maps.element.id));var h="HorizontalLine"===r.shape||"VerticalLine"===r.shape||"Cross"===r.shape?t.isNullOrUndefined(r.fill)?"#000000":r.fill:s.color,d=("HorizontalLine"===r.shape||"VerticalLine"===r.shape||"Cross"===r.shape)&&0===s.width?1:s.width;p.shapeBorder={width:d,color:h};for(var c=function(s){var h=m.totalPages[e].Collection[s],d=l.createGroup({id:n.element.id+"_Legend_Index_"+s}),c=h.DisplayText;p.fill=h.Fill,p.shape="Markers"===r.type?t.isNullOrUndefined(h.ImageSrc)?r.shape:"Image":r.shape,n.trigger(kt,p,function(){var m=n.element.id+"_Legend_Shape_Index_"+s,u=n.element.id+"_Legend_Text_Index_"+s,g=h.Shape,y=h.Text,f=(t.isNullOrUndefined(h.ImageSrc)?r.shape:h.ImageSrc,new Te(m,p.fill,p.shapeBorder.width,p.shapeBorder.color,r.opacity,""));if(r.textStyle.color=null!==r.textStyle.color?r.textStyle.color:o.maps.themeStyle.legendTextColor,r.textStyle.fontFamily=n.themeStyle.fontFamily||r.textStyle.fontFamily,r.textStyle.size=n.themeStyle.legendFontSize||r.textStyle.size,d.appendChild(le(g,p.shape,a,h.ImageSrc,f)),i=new Le(u,y.x,y.y,"start",c,"",""),S(i,r.textStyle,r.textStyle.color,d),o.legendGroup.appendChild(d),s===o.totalPages[e].Collection.length-1){var v=void 0;if(0!==o.page){var b=e+1+"/"+o.totalPages.length,w=r.textStyle,M=x(b,w),O=o.legendItemRect.x+o.legendItemRect.width-M.width-20-10,_=o.legendItemRect.x+o.legendItemRect.width,C=o.legendItemRect.y+o.legendItemRect.height+2.5+10,P=_-10-M.width/2-5;v=l.createGroup({id:n.element.id+"_Legend_Paging_Group"});var L=l.createGroup({id:n.element.id+"_Legend_Left_Paging_Group"}),T=l.createGroup({id:n.element.id+"_Legend_Right_Paging_Group"}),I=" M "+_+" "+C+" L "+(_-10)+" "+(C-5)+" L "+(_-10)+" "+(C+5)+" z ",E=" M "+O+" "+C+" L "+(O+10)+" "+(C-5)+" L "+(O+10)+" "+(C+5)+" z ",k=new Te(n.element.id+"_Left_Page","#a6a6a6",0,"#a6a6a6",1,"",E);L.appendChild(l.drawPath(k));var N=new Ee(n.element.id+"_Left_Page_Rect","transparent",{},1,new je(O-5,C-10,20,20),null,null,"","");L.appendChild(l.drawRectangle(N)),o.wireEvents(L);var B=new Te(n.element.id+"_Right_Page","#a6a6a6",0,"#a6a6a6",1,"",I);T.appendChild(l.drawPath(B));var z=new Ee(n.element.id+"_Right_Page_Rect","transparent",{},1,new je(_-10,C-5,10,10),null,null,"","");T.appendChild(l.drawRectangle(z)),o.wireEvents(T),v.appendChild(L),v.appendChild(T);var F={id:n.element.id+"_Paging_Text",x:P,y:C+M.height/4,fill:"#a6a6a6","font-size":"14px","font-style":w.fontStyle,"font-family":w.fontFamily,"font-weight":w.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""};v.appendChild(l.createText(F,b)),o.legendGroup.appendChild(v)}o.renderLegendBorder()}})},m=this,u=0;u<this.totalPages[e].Collection.length;u++)c(u)}},e.prototype.legendHighLightAndSelection=function(e,i){var o,n,r,a;a="Default"===this.maps.legendSettings.mode?document.getElementById(e.id.replace("Shape","Text")):document.getElementById(e.id+"_Text");var l,s=this.maps.legendModule.legendCollection,p=0,h=!0;if("selection"===i){if(this.shapeHighlightCollection=[],this.legendSelectionCollection.length>0)for(var d=0;d<this.legendSelectionCollection.length;d++){if(e===this.legendSelectionCollection[d].legendElement){h=!1,this.removeLegendSelectionCollection(),this.legendSelectionCollection.splice(d,1);break}this.removeLegendSelectionCollection(),this.legendSelectionCollection.splice(d,1)}}else{if(this.legendSelectionCollection.length>0)for(d=0;d<this.legendSelectionCollection.length;d++){if((e.id.indexOf("_Legend_Shape")>-1||e.id.indexOf("_Legend_Index"))&&e===this.legendSelectionCollection[d].legendElement){h=!1;break}this.removeLegendHighlightCollection()}this.removeLegendHighlightCollection()}if(h)for(var c=0;c<s.length;c++)if(a.textContent===s[c].text&&s[c].data.length>0&&parseFloat(e.id.split("_Legend_Index_")[1])===c){var m=this.maps.layers[s[c].data[0].layerIndex],u="selection"===i?m.selectionSettings.enable:m.highlightSettings.enable,g=void 0;g="selection"===i?m.selectionSettings:m.highlightSettings;var y=s[c].data;if(u)for(var f=0;f<y.length;f++){o=y[f].shapeIndex,n=y[f].layerIndex,r=y[f].dataIndex;var v=document.getElementById(this.maps.element.id+"_LayerIndex_"+n+"_shapeIndex_"+o+"_dataIndex_"+r);if(null!==v)if("highlight"===i&&this.shapeElement!==e){0===f&&(this.legendHighlightCollection=[],this.pushCollection(e,this.legendHighlightCollection,s[c],m.shapeSettings)),l=this.legendHighlightCollection.length;var b=this.legendHighlightCollection[l-1].legendOldFill;this.legendHighlightCollection[l-1].MapShapeCollection.Elements.push(v),this.setColor(v,t.isNullOrUndefined(g.fill)?b:g.fill,g.opacity.toString(),g.border.color,g.border.width.toString()),this.setColor(e,t.isNullOrUndefined(g.fill)?b:g.fill,g.opacity.toString(),g.border.color,g.border.width.toString())}else if("selection"===i&&this.shapeSelection){this.legendHighlightCollection=[],0===f&&this.pushCollection(e,this.legendSelectionCollection,s[c],m.shapeSettings),p=this.legendSelectionCollection.length;var x=this.legendSelectionCollection[p-1].legendOldFill;this.legendSelectionCollection[p-1].MapShapeCollection.Elements.push(v),this.setColor(e,t.isNullOrUndefined(g.fill)?x:g.fill,g.opacity.toString(),g.border.color,g.border.width.toString()),this.setColor(v,t.isNullOrUndefined(g.fill)?x:g.fill,g.opacity.toString(),g.border.color,g.border.width.toString()),this.legendElement=e,f===y.length-1&&(this.legendSelection=!1)}}}},e.prototype.setColor=function(e,t,i,o,n){e.setAttribute("fill",t),e.setAttribute("opacity",i),e.setAttribute("stroke",o),e.setAttribute("stroke-width",(Number(n)/this.maps.scale).toString())},e.prototype.pushCollection=function(e,t,i,o){t.push({legendElement:e,legendOldFill:i.fill,legendOldOpacity:i.opacity,legendOldBorderColor:i.borderColor,legendOldBorderWidth:i.borderWidth,shapeOpacity:o.opacity,shapeOldBorderColor:o.border.color,shapeOldBorderWidth:o.border.width}),length=t.length,t[length-1].MapShapeCollection={Elements:[]}},e.prototype.removeLegend=function(e){for(var t=0;t<e.length;t++){var i=e[t];this.setColor(i.legendElement,i.legendOldFill,i.legendOldOpacity,i.legendOldBorderColor,i.legendOldBorderWidth);for(var o=i.MapShapeCollection.Elements.length,n=0;n<o;n++)this.setColor(i.MapShapeCollection.Elements[n],i.legendOldFill,i.shapeOpacity,i.shapeOldBorderColor,i.shapeOldBorderWidth)}},e.prototype.removeLegendHighlightCollection=function(){this.legendHighlightCollection.length>0&&this.removeLegend(this.legendHighlightCollection)},e.prototype.removeLegendSelectionCollection=function(){this.legendSelectionCollection.length>0&&(this.removeLegend(this.legendSelectionCollection),this.legendElement=null,this.legendSelection=!0)},e.prototype.removeShapeHighlightCollection=function(){if(this.shapeHighlightCollection.length>0)for(var e=0;e<this.shapeHighlightCollection.length;e++){for(var t=this.shapeHighlightCollection[e],i=!0,o=0;o<this.shapeSelectionCollection.length;o++)this.shapeSelectionCollection[o].legendElement===t.legendElement&&(i=!1);i&&this.setColor(t.legendElement,t.legendOldFill,t.legendOldOpacity,t.legendOldBorderColor,t.legendOldBorderWidth)}},e.prototype.shapeHighLightAndSelection=function(e,i,o,n,r){if(void 0!==i){var a=this.maps.legendModule.legendCollection,l=this.legendIndexOnShape(i,r),s=a[l].text,p=void 0,h=void 0;"Default"===this.maps.legendSettings.mode?(p=document.getElementById(this.maps.element.id+"_Legend_Text_Index_"+l).textContent,h=document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+l)):(p=document.getElementById(this.maps.element.id+"_Legend_Index_"+l+"_Text").textContent,h=document.getElementById(this.maps.element.id+"_Legend_Index_"+l));var d=this.shapeDataOnLegend(e);this.oldShapeElement=d.LegendEle;var c=this.shapeSelectionCollection.length;if(s===p)if("highlight"===n&&d.LegendEle!==this.legendElement){if((void 0===(u=this.isTargetSelected(d,this.shapeHighlightCollection))||u&&!u.IsSelected)&&this.pushCollection(h,this.shapeHighlightCollection,a[l],this.maps.layers[r].shapeSettings),c>0)for(var m=0;m<c&&d.LegendEle!==this.shapeSelectionCollection[m].legendElement;m++)m===c-1&&(this.removeShapeHighlightCollection(),this.setColor(h,t.isNullOrUndefined(o.fill)?h.getAttribute("fill"):o.fill,o.opacity.toString(),o.border.color,o.border.width.toString()));else this.removeShapeHighlightCollection(),this.setColor(h,t.isNullOrUndefined(o.fill)?h.getAttribute("fill"):o.fill,o.opacity.toString(),o.border.color,o.border.width.toString())}else if("selection"===n){var u=this.isTargetSelected(d,this.shapeSelectionCollection);if(c>0)for(m=0;m<c;m++)if(d.LegendEle!==this.shapeSelectionCollection[m].legendElement){var g=this.shapeSelectionCollection[m];this.setColor(g.legendElement,g.legendOldFill,g.legendOldOpacity,g.legendOldBorderColor,g.legendOldBorderWidth),this.shapeSelection=!0,this.shapeElement=null}if(u&&u.IsSelected&&"ShapeselectionMapStyle"===e.getAttribute("class")){g=this.shapeSelectionCollection[u.SelectionIndex];this.setColor(d.LegendEle,g.legendOldFill,g.legendOldOpacity,g.legendOldBorderColor,g.legendOldBorderWidth),this.shapeSelectionCollection.splice(u.SelectionIndex,1),this.shapeSelection=!0,this.shapeElement=null}"ShapeselectionMapStyle"!==e.getAttribute("class")&&this.legendSelection&&((void 0===u||u&&!u.IsSelected)&&this.pushCollection(h,this.shapeSelectionCollection,a[l],this.maps.layers[r].shapeSettings),this.setColor(h,t.isNullOrUndefined(o.fill)?h.getAttribute("fill"):o.fill,o.opacity.toString(),o.border.color,o.border.width.toString()),this.shapeElement=d.LegendEle,this.shapeSelection=!1)}else document.getElementsByClassName("highlightMapStyle").length>0&&(this.removeShapeHighlightCollection(),te(document.getElementsByClassName("highlightMapStyle")[0]))}else this.removeShapeHighlightCollection()},e.prototype.isTargetSelected=function(e,t){for(var i,o=0;o<t.length;o++)e.LegendEle===t[o].legendElement&&(i={IsSelected:!0,SelectionIndex:o});return i},e.prototype.legendIndexOnShape=function(e,t){for(var i,o=e[this.maps.layers[t].shapeDataPath],n=this.maps.legendModule.legendCollection,r=0;r<n.length;r++)for(var a=n[r].data,l=0;l<a.length;l++)o===a[l].name&&(i=r);return i},e.prototype.shapeDataOnLegend=function(e){for(var i,o,n,r=this.maps.legendModule.legendCollection,a=this.maps.legendSettings,l=0;l<r.length;l++){for(var s=r[l].data,p=!1,h=[],d={Elements:[]},c=0;c<s.length;c++){i=s[c].shapeIndex,o=s[c].layerIndex,n=s[c].dataIndex;var m=document.getElementById(this.maps.element.id+"_LayerIndex_"+o+"_shapeIndex_"+i+"_dataIndex_"+n);e===m&&(p=!0),h.push(m)}if(p)return t.isNullOrUndefined(d.LegendEle)&&(d.LegendEle="Default"===a.mode?document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+l):document.getElementById(this.maps.element.id+"_Legend_Index_"+l)),d.Elements=h,d}return null},e.prototype.renderLegendBorder=function(){var e=this.maps,t=e.legendSettings,i=t.title.text,o=t.titleStyle,n=A(this.legendItemRect.width+20,i,o),r=x(n,o);this.legendBorderRect=new je(this.legendItemRect.x-10,this.legendItemRect.y-10-r.height,this.legendItemRect.width+20,this.legendItemRect.height+20+r.height+("Interactive"===t.mode?0:0!==this.page?10:0)),i&&(o.color=null!==o.color?o.color:this.maps.themeStyle.legendTextColor,S(new Le(e.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-r.height/2-5,"middle",n,""),o,o.color,this.legendGroup));var a=new Ee(e.element.id+"_Legend_Border",t.background,t.border,1,this.legendBorderRect,null,null,"","");this.legendGroup.appendChild(e.renderer.drawRectangle(a)),this.translate="Float"!==t.position?this.getLegendAlignment(e,this.legendBorderRect.width,this.legendBorderRect.height,t):t.location,this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )"),e.svgObject.appendChild(this.legendGroup)},e.prototype.changeNextPage=function(e){this.currentPage=e.target.id.indexOf("_Left_Page_")>-1?this.currentPage-1:this.currentPage+1,this.legendGroup=this.maps.renderer.createGroup({id:this.maps.element.id+"_Legend_Group"}),this.drawLegendItem(this.currentPage),K(this.maps.element.id+"_Legend_Border",this.maps.element.id)&&(K(this.maps.element.id+"_Legend_Border",this.maps.element.id).style.pointerEvents="none")},e.prototype.getLegendAlignment=function(e,t,i,o){var n,r,a=e.availableSize.width,l=e.availableSize.height;switch(o.position){case"Top":case"Bottom":e.mapAreaRect.height=e.mapAreaRect.height-i,n=a/2-t/2,r="Top"===o.position?e.mapAreaRect.y:e.mapAreaRect.y+e.mapAreaRect.height,e.mapAreaRect.y="Top"===o.position?e.mapAreaRect.y+i+10:e.mapAreaRect.y;break;case"Left":case"Right":e.mapAreaRect.width=e.mapAreaRect.width-t,n="Left"===o.position?e.mapAreaRect.x:e.mapAreaRect.x+e.mapAreaRect.width,r=l/2-i/2,e.mapAreaRect.x="Left"===o.position?e.mapAreaRect.x+t:e.mapAreaRect.x}switch(o.alignment){case"Near":"Top"===o.position||"Bottom"===o.position?n=e.mapAreaRect.x:r=e.mapAreaRect.y;break;case"Far":"Top"===o.position||"Bottom"===o.position?n=a-t:r=l-i}return new _e(n,r)},e.prototype.getMarkersLegendCollections=function(e,i){var o=this;i.forEach(function(i,n){var r=i.dataSource,a=i.legendText;r.forEach(function(r,l){var s=null,p=!!t.isNullOrUndefined(r[o.maps.legendSettings.showLegendPath])||r[o.maps.legendSettings.showLegendPath];if(i.visible&&p&&!t.isNullOrUndefined(r.latitude|r.Latitude)&&!t.isNullOrUndefined(r.longitude|r.Longitude)){if(i.template){var h=V(i.template)(o.maps);s=(t.isNullOrUndefined(h.childElementCount)?h[0]:h).querySelector("img").src}var d=t.isNullOrUndefined(r[a])?"":r[a];!!o.maps.legendSettings.removeDuplicateLegend&&o.removeDuplicates(o.legendCollection,d)||o.legendCollection.push({layerIndex:e,markerIndex:n,dataIndex:l,fill:i.fill,text:d,imageSrc:s})}})})},e.prototype.getRangeLegendCollection=function(e,i,o,n,r,a,l){for(var s,p=this,h=0,d=this.maps.legendSettings.fill,c=[],m=function(o){if(!t.isNullOrUndefined(o.from)&&!t.isNullOrUndefined(o.to)){s=t.isNullOrUndefined(o.label)?o.from+" - "+o.to:o.label,c=[];var m=!1;n.forEach(function(t,n){var s=parseFloat(t[a]);s>=o.from&&s<=o.to&&(m=!0,c.push(p.getLegendData(e,n,t,r,i,l,s)))}),m||c.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var g=t.isNullOrUndefined(d)?"[object Array]"===Object.prototype.toString.call(o.color)?t.isNullOrUndefined(o.value)?u.legendGradientColor(o,h):o.color[0]:o.color:d;h++,u.getOverallLegendItemsCollection(s,g,c,o.showLegend)}},u=this,g=0,y=o;g<y.length;g++){m(y[g])}},e.prototype.getOverallLegendItemsCollection=function(e,t,i,o){var n=[],r=this.maps.legendSettings;if(i.length>0&&o){for(var a=0;a<i.length;a++){var l=i[a];if(l.length>0)for(var s=0;s<l.length;s++)n.push(l[s]);else n.push(i[a]);n._isVisible=!0}!!this.maps.legendSettings.removeDuplicateLegend&&this.removeDuplicates(this.legendCollection,e)||this.legendCollection.push({text:e,fill:t,data:n,opacity:r.opacity,borderColor:r.shapeBorder.color,borderWidth:r.shapeBorder.width})}},e.prototype.removeDuplicates=function(e,t){for(var i=!1,o=0;o<e.length;o++)if(e[o].text===t){i=!0;break}return i},e.prototype.getEqualLegendCollection=function(e,i,o,n,r,a,l){for(var s,p=this,h=this.maps.legendSettings.fill,d=[],c=[],m=[],u=[],g=function(g){if(t.isNullOrUndefined(g.value)){if(t.isNullOrUndefined(g.minOpacity)&&t.isNullOrUndefined(g.maxOpacity)&&t.isNullOrUndefined(g.value)&&t.isNullOrUndefined(g.from)&&t.isNullOrUndefined(g.to)&&!t.isNullOrUndefined(g.color)){if(n.forEach(function(t,o){for(var n=t[a],s=0;s<m.length;s++)n===m[s]&&u.push(p.getLegendData(e,o,t,r,i,l,n))}),0===m.length){var f=!1;n.forEach(function(n,s){f=!1;for(var h=n[a],d=0;d<o.length;d++)t.isNullOrUndefined(h)||0===h?f||(f=!1):h>=o[d].from&&h<=o[d].to&&(f=!0);f||u.push(p.getLegendData(e,s,n,r,i,l,h))})}s=t.isNullOrUndefined(g.label)?"Others":g.label;var v="[object Array]"===Object.prototype.toString.call(g.color)?g.color[0]:g.color;y.getOverallLegendItemsCollection(s,v,u,g.showLegend)}}else{s=t.isNullOrUndefined(g.label)?g.value:g.label,c=[];var b=!1;n.forEach(function(t,o){var n=t[a];n===g.value?(b=!0,-1===d.indexOf(n)&&d.push(n),c.push(p.getLegendData(e,o,t,r,i,l,n))):-1===m.indexOf(n)&&m.push(n)});for(var x=0;x<d.length;x++)for(var S=0;S<m.length;S++)if(d[x]===m[S]){var w=m.indexOf(d[x]);m.splice(w,1)}b||c.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var M=t.isNullOrUndefined(h)?"[object Array]"===Object.prototype.toString.call(g.color)?g.color[0]:g.color:h;y.getOverallLegendItemsCollection(s,M,c,g.showLegend)}},y=this,f=0,v=o;f<v.length;f++){g(v[f])}},e.prototype.getDataLegendCollection=function(e,i,o,n,r,a,l){var s,p=this,h=this.maps.legendSettings.fill,d=this.maps.legendSettings.valuePath;t.isNullOrUndefined(a)||t.isNullOrUndefined(n)||n.forEach(function(n,c){var m=!!t.isNullOrUndefined(p.maps.legendSettings.showLegendPath)||!t.isNullOrUndefined(n[p.maps.legendSettings.showLegendPath])&&n[p.maps.legendSettings.showLegendPath],u=n[a],g=[],y=t.isNullOrUndefined(h)?u:h;t.isNullOrUndefined(u)||0!==o.length||(s=t.isNullOrUndefined(n[d])?n[r]:n[d],g.push(p.getLegendData(e,c,n,r,i,l,u))),p.getOverallLegendItemsCollection(s,y,g,m)})},e.prototype.interactiveHandler=function(e){var i=e.target,o=this.maps.legendSettings,n=this.maps.element.id+"_Interactive_Legend",r="Layers"===o.type?"_shapeIndex_":"Markers"===o.type?"_MarkerIndex_":"_BubbleIndex_";if(i.id.indexOf(r)>1){var a=parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),l=parseFloat(i.id.split(/_dataIndex_/i)[1].split("_")[0]),s=void 0,p=void 0,h=void 0;t.isNullOrUndefined(K(n,this.maps.element.id))||t.remove(K(n,this.maps.element.id));var d=this.maps.layersCollection[a],c="Layers"===o.type?d.visible:"Markers"===o.type?d.markerSettings[parseFloat(i.id.split("_MarkerIndex_")[1].split("_")[0])].visible:this.maps.getBubbleVisible(this.maps.layersCollection[a]);if(o.visible&&this.legendRenderingCollections.length>0&&"Interactive"===o.mode&&c)for(var m=this.maps.svgObject.getBoundingClientRect(),u=0;u<this.legendCollection.length;u++){var g=this.legendCollection[u],y=K(this.maps.element.id+"_Legend_Index_"+u,this.maps.element.id),f=y.getBoundingClientRect(),v=new je(Math.abs(f.left-m.left),Math.abs(f.top-m.top),f.width,f.height);if(s=y.getAttribute("fill"),p=o.shapeBorder.color,h=o.shapeBorder.width,!t.isNullOrUndefined(g.data))for(var b=g.data,x=0;x<b.length;x++)if(l===b[x].dataIndex&&a===b[x].layerIndex){this.renderInteractivePointer(o,s,p,n,h,v);break}}}else t.isNullOrUndefined(K(n,this.maps.element.id))||t.remove(K(n,this.maps.element.id))},e.prototype.renderInteractivePointer=function(e,t,i,o,n,r){var a,l,s,p;a="Horizontal"===("None"===e.orientation?"Top"===e.position||"Bottom"===e.position?"Horizontal":"Vertical":e.orientation)?e.invertedPointer?" M "+(s=r.x+r.width/2)+" "+(p=r.y+r.height)+" L "+(s-10)+" "+(p+10)+" L "+(s+10)+" "+(p+10)+" Z ":" M "+(s=r.x+r.width/2)+" "+(p=r.y)+" L "+(s-10)+" "+(p-10)+" L "+(s+10)+" "+(p-10)+" Z ":e.invertedPointer?" M "+(s=r.x)+" "+(p=r.y+r.height/2)+" L "+(s-10)+" "+(p-10)+" L "+(s-10)+" "+(p+10)+" z ":" M "+(s=r.x+r.width)+" "+(p=r.y+r.height/2)+" L "+(s+10)+" "+(p-10)+" L "+(s+10)+" "+(p+10)+" z ",l=new Te(o,t,n,i,1,"",a),this.maps.svgObject.appendChild(this.maps.renderer.drawPath(l))},e.prototype.wireEvents=function(e){t.EventHandler.add(e,t.Browser.touchStartEvent,this.changeNextPage,this)},e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(t.Browser.touchMoveEvent,this.interactiveHandler,this),this.maps.on(t.Browser.touchEndEvent,this.interactiveHandler,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(t.Browser.touchMoveEvent,this.interactiveHandler),this.maps.off(t.Browser.touchEndEvent,this.interactiveHandler))},e.prototype.getLegendData=function(e,t,i,o,n,r,a){var l=[];if("[object Array]"===Object.prototype.toString.call(n))for(var s=0;s<n.length;s++){var p=n[s],h=B(i[o],r,p.properties);p.properties[h]===i[o]&&l.push({layerIndex:e,shapeIndex:s,dataIndex:t,name:i[o],value:a})}return l},e.prototype.legendGradientColor=function(e,i){var o,n="http://www.w3.org/2000/svg";if(!t.isNullOrUndefined(e.color)&&"object"==typeof e.color){var r=document.createElementNS(n,"linearGradient"),a=this.maps.legendSettings.position,l=void 0,s=void 0;l="Top"===a||"Bottom"===a?"100":"0",s="Top"===a||"Bottom"===a?"0":"100",r.setAttribute("id","linear_"+i),r.setAttribute("x1","0%"),r.setAttribute("y1","0%"),r.setAttribute("x2",l+"%"),r.setAttribute("y2",s+"%");for(var p=0;p<e.color.length;p++){var h=100/(e.color.length-1),d=document.createElementNS(n,"stop");d.setAttribute("offset",p*h+"%"),d.setAttribute("stop-color",e.color[p]),d.setAttribute("stop-opacity",1..toString()),r.appendChild(d)}this.legendLinearGradient=r;var c="url(#linear_"+i+")";this.defsElement.appendChild(r),o=c}return o},e.prototype.getModuleName=function(){return"Legend"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Jt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},Kt=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.maps.on(t.Browser.touchStartEvent,this.mouseMove,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(t.Browser.touchMoveEvent,this.mouseMove),this.maps.off(t.Browser.touchStartEvent,this.mouseMove))},e.prototype.addHighlight=function(e,t,i){var o=Q(e,t,0,this.maps);i?this.mapHighlight(o,null,null):te(o)},e.prototype.mouseMove=function(e){var i,o=e.target,n="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1;if((-1!==o.id.indexOf("LayerIndex")||o.id.indexOf("NavigationIndex")>-1)&&"ShapeselectionMapStyle"!==o.getAttribute("class")&&!n&&"MarkerselectionMapStyle"!==o.getAttribute("class")){i=parseInt(o.id.split("_LayerIndex_")[1].split("_")[0],10);var r=void 0,a=void 0,l=void 0,s=void 0;if(o.id.indexOf("shapeIndex")>-1)l=parseInt(o.id.split("_shapeIndex_")[1].split("_")[0],10),r=this.maps.layers[i].shapeData.features?this.maps.layers[i].shapeData.features[l].properties:null,s=parseInt(o.id.split("_dataIndex_")[1].split("_")[0],10),a=t.isNullOrUndefined(s)?null:this.maps.layers[i].dataSource[s],this.highlightSettings=this.maps.layers[i].highlightSettings;else if(o.id.indexOf("BubbleIndex")>-1){var p=parseInt(o.id.split("_BubbleIndex_")[1].split("_")[0],10);s=parseInt(o.id.split("_dataIndex_")[1].split("_")[0],10),a=this.maps.layers[i].bubbleSettings[p].dataSource[s],this.highlightSettings=this.maps.layers[i].bubbleSettings[p].highlightSettings}else if(o.id.indexOf("MarkerIndex")>-1){var h=parseInt(o.id.split("_MarkerIndex_")[1].split("_")[0],10);s=parseInt(o.id.split("_dataIndex_")[1].split("_")[0],10),a=this.maps.layers[i].markerSettings[h].dataSource[s],this.highlightSettings=this.maps.layers[i].markerSettings[h].highlightSettings}else{var d=parseInt(o.id.split("_NavigationIndex_")[1].split("_")[0],10);i=parseInt(o.id.split("_LayerIndex_")[1].split("_")[0],10),r=null,a={latitude:this.maps.layers[i].navigationLineSettings[d].latitude,longitude:this.maps.layers[i].navigationLineSettings[d].longitude},this.highlightSettings=this.maps.layers[i].navigationLineSettings[d].highlightSettings}if(this.highlightSettings.enable)this.maps.legendSettings.visible&&-1===o.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(o,a,this.highlightSettings,"highlight",i),this.mapHighlight(o,r,a);else{var c=document.getElementsByClassName("highlightMapStyle")[0];if(!t.isNullOrUndefined(c)&&(te(c),c.id.indexOf("NavigationIndex")>-1)){d=parseInt(c.id.split("_NavigationIndex_")[1].split("_")[0],10);var m=parseInt(c.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);c.setAttribute("stroke-width",this.maps.layers[m].navigationLineSettings[d].width.toString()),c.setAttribute("stroke",this.maps.layers[m].navigationLineSettings[d].color)}}}else if(J("highlightMapStyle").length>0){if((o=J("highlightMapStyle")[0]).id.indexOf("NavigationIndex")>-1){d=parseInt(o.id.split("_NavigationIndex_")[1].split("_")[0],10);i=parseInt(o.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),o.setAttribute("stroke-width",this.maps.layers[i].navigationLineSettings[d].width.toString()),o.setAttribute("stroke",this.maps.layers[i].navigationLineSettings[d].color)}te(o),this.maps.legendSettings.visible&&this.maps.legendModule.removeShapeHighlightCollection()}else-1===o.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")&&-1===o.id.indexOf(this.maps.element.id+"_Legend_Index")||!this.maps.legendSettings.visible||-1!==o.id.indexOf("_Text")?this.maps.legendSettings.visible&&this.maps.legendModule.removeLegendHighlightCollection():this.maps.legendModule.legendHighLightAndSelection(o,"highlight")},e.prototype.mapHighlight=function(e,i,o){var n=this,r=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),a=!1;if(e.id.indexOf("MarkerIndex")>-1){var l=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);a=this.maps.layers[r].markerSettings[l].highlightSettings.enable}if(!this.maps.legendSettings.visible||this.maps.legendModule.legendElement!==this.maps.legendModule.oldShapeElement){var s={opacity:this.highlightSettings.opacity,fill:-1===e.id.indexOf("NavigationIndex")?t.isNullOrUndefined(this.highlightSettings.fill)?e.getAttribute("fill"):this.highlightSettings.fill:"none",border:{color:this.highlightSettings.border.color,width:this.highlightSettings.border.width/(a?1:this.maps.scale)},name:Bt,target:e.id,cancel:!1,shapeData:i,data:o};if(this.maps.isBlazor){s.shapeData;var p=Jt(s,["shapeData"]);s=p}this.maps.trigger(Bt,s,function(){n.highlightMap(e,s)})}},e.prototype.highlightMap=function(e,t){if("highlightMapStyle"!==e.getAttribute("class")){if(J("highlightMapStyle").length>0){var i=J("highlightMapStyle")[0];if(te(i),i.id.indexOf("NavigationIndex")>-1){var o=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);i.setAttribute("stroke-width",this.maps.layers[n].navigationLineSettings[o].width.toString()),i.setAttribute("stroke",this.maps.layers[n].navigationLineSettings[o].color)}}q("highlightMap")?ee("highlightMap","highlightMapStyle",t):document.body.appendChild($("highlightMap","highlightMapStyle",t)),e.setAttribute("class","highlightMapStyle")}},e.prototype.getModuleName=function(){return"Highlight"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Qt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},$t=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on("click",this.mouseClick,this),this.maps.on(t.Browser.touchEndEvent,this.mouseClick,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off("click",this.mouseClick),this.maps.off(t.Browser.touchEndEvent,this.mouseClick))},e.prototype.mouseClick=function(e){if(!t.isNullOrUndefined(e.type)&&-1!==e.type.indexOf("touch")&&t.isNullOrUndefined(e.id)&&(e=e.target),!t.isNullOrUndefined(e.id)&&(e.id.indexOf("LayerIndex")>-1||e.id.indexOf("NavigationIndex")>-1)){var i=void 0,o=void 0,n=void 0,r=void 0,a=void 0;if(i=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),e.id.indexOf("shapeIndex")>-1)r=parseInt(e.id.split("_shapeIndex_")[1].split("_")[0],10),o=this.maps.layers[i].shapeData.features?this.maps.layers[i].shapeData.features[r].properties:null,a=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),n=t.isNullOrUndefined(a)?null:this.maps.layers[i].dataSource[a],this.selectionsettings=this.maps.layers[i].selectionSettings,this.selectionType="Shape";else if(e.id.indexOf("BubbleIndex")>-1){var l=parseInt(e.id.split("_BubbleIndex_")[1].split("_")[0],10);a=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),n=this.maps.layers[i].bubbleSettings[l].dataSource[a],this.selectionsettings=this.maps.layers[i].bubbleSettings[l].selectionSettings,this.selectionType="Bubble"}else if(e.id.indexOf("MarkerIndex")>-1){var s=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);a=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),n=this.maps.layers[i].markerSettings[s].dataSource[a],this.selectionsettings=this.maps.layers[i].markerSettings[s].selectionSettings,this.selectionType="Marker"}else{var p=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10);o=null,n={latitude:this.maps.layers[i].navigationLineSettings[p].latitude,longitude:this.maps.layers[i].navigationLineSettings[p].longitude},this.selectionsettings=this.maps.layers[i].navigationLineSettings[p].selectionSettings,this.selectionType="navigationline"}this.selectionsettings.enable&&(this.maps.legendSettings.visible&&-1===e.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(e,n,this.selectionsettings,"selection",i),this.maps.legendSettings.visible&&!this.maps.legendModule.legendSelection||this.selectMap(e,o,n))}else!t.isNullOrUndefined(e.id)&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendSettings.visible&&-1===e.id.indexOf("_Text")&&this.maps.legendModule.legendHighLightAndSelection(e,"selection")},e.prototype.addSelection=function(e,t,i){var o=Q(e,t,0,this.maps);i?this.selectMap(o,null,null):te(o)},e.prototype.selectMap=function(e,t,i){var o=this,n=(this.selectionsettings,{opacity:this.selectionsettings.opacity,fill:"navigationline"!==this.selectionType?this.selectionsettings.fill:"none",border:{color:this.selectionsettings.border.color,width:this.selectionsettings.border.width/("Marker"===this.selectionType?1:this.maps.scale)},name:"itemSelection",target:e.id,cancel:!1,shapeData:t,data:i});if(this.maps.isBlazor){n.shapeData;var r=Qt(n,["shapeData"]);n=r}this.maps.trigger("itemSelection",n,function(t){if(e.getAttribute("class")===o.selectionType+"selectionMapStyle"){if(te(e),e.id.indexOf("NavigationIndex")>-1){var i=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),r=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);e.setAttribute("stroke-width",o.maps.layers[r].navigationLineSettings[i].width.toString()),e.setAttribute("stroke",o.maps.layers[r].navigationLineSettings[i].color)}}else{if(!o.selectionsettings.enableMultiSelect&&J(o.selectionType+"selectionMapStyle").length>0){var a=J(o.selectionType+"selectionMapStyle")[0];if(te(a),a.id.indexOf("NavigationIndex")>-1){i=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),r=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);a.setAttribute("stroke-width",o.maps.layers[r].navigationLineSettings[i].width.toString()),a.setAttribute("stroke",o.maps.layers[r].navigationLineSettings[i].color)}}q(o.selectionType+"selectionMap")?ee(o.selectionType+"selectionMap",o.selectionType+"selectionMapStyle",n):document.body.appendChild($(o.selectionType+"selectionMap",o.selectionType+"selectionMapStyle",n)),e.setAttribute("class",o.selectionType+"selectionMapStyle")}})},e.prototype.getModuleName=function(){return"Selection"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),ei=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},ti=function(){function e(e){this.maps=e,this.tooltipId=this.maps.element.id+"_mapsTooltip",this.addEventListener()}return e.prototype.renderTooltip=function(e){var o,n,r,a,l,p=this;-1!==e.type.indexOf("touch")?(this.isTouch=!0,o=(a=e).changedTouches[0].pageX,n=a.changedTouches[0].pageY,r=a.target):(this.isTouch="touch"===e.pointerType,o=e.pageX,n=e.pageY,r=e.target);var h,d,c,m="",u=r.id,g=[],y=u.indexOf("_LayerIndex_")>-1&&parseFloat(u.split("_LayerIndex_")[1].split("_")[0]),f=this.maps.layersCollection[y];c=s(o,n,this.maps.svgObject);if(u.indexOf("_shapeIndex_")>-1||u.indexOf("_MarkerIndex_")>-1||u.indexOf("_BubbleIndex_")>-1){if(u.indexOf("_shapeIndex_")>-1){(h=f.tooltipSettings).textStyle.fontFamily=this.maps.themeStyle.fontFamily||h.textStyle.fontFamily,h.textStyle.opacity=this.maps.themeStyle.tooltipTextOpacity||h.textStyle.opacity;var v=parseInt(u.split("_shapeIndex_")[1].split("_")[0],10);if(t.isNullOrUndefined(f.layerData)||t.isNullOrUndefined(f.layerData[v]))return;var b=f.layerData[v].property;if(y=N(f.dataSource,b,f.shapeDataPath,f.shapePropertyPath),g=f.dataSource[y],h.visible&&(!t.isNullOrUndefined(y)&&!isNaN(y)||!t.isNullOrUndefined(b)))if(f.tooltipSettings.format)m=this.formatter(f.tooltipSettings.format,f.dataSource[y]);else{var x=B(f.shapeDataPath,f.shapePropertyPath,b);m=t.isNullOrUndefined(f.dataSource)||t.isNullOrUndefined(y)?b[x]:this.formatValue(f.dataSource[y][h.valuePath],this.maps),t.isNullOrUndefined(m)&&(m=b[h.valuePath])}}else if(u.indexOf("_MarkerIndex_")>-1){var S=parseInt(u.split("_MarkerIndex_")[1].split("_")[0],10),w=parseInt(u.split("_MarkerIndex_")[1].split("_")[2],10),M=f.markerSettings[S];h=M.tooltipSettings,g=M.dataSource[w],h.visible&&!isNaN(S)&&(m=M.tooltipSettings.format?this.formatter(M.tooltipSettings.format,M.dataSource[w]):this.formatValue(M.dataSource[w][M.tooltipSettings.valuePath],this.maps))}else if(u.indexOf("_BubbleIndex_")>-1){var O=parseInt(u.split("_BubbleIndex_")[1].split("_")[0],10),_=(w=parseInt(u.split("_BubbleIndex_")[1].split("_")[2],10),f.bubbleSettings[O]);h=_.tooltipSettings,g=_.dataSource[w],h.visible&&!isNaN(w)&&(m=_.tooltipSettings.format?this.formatter(_.tooltipSettings.format,_.dataSource[w]):this.formatValue(_.dataSource[w][_.tooltipSettings.valuePath],this.maps))}if(document.getElementById(this.tooltipId)?d=document.getElementById(this.tooltipId):(d=t.createElement("div",{id:this.maps.element.id+"_mapsTooltip",className:"EJ2-maps-Tooltip",styles:"position: absolute;pointer-events:none;"}),document.getElementById(this.maps.element.id+"_Secondary_Element").appendChild(d)),null!==h.template&&1===Object.keys("object"==typeof h.template?h.template:{}).length&&(h.template=h.template[Object.keys(h.template)[0]]),g=this.setTooltipContent(h,g),l={cancel:!1,name:"tooltipRender",options:{location:c,text:[],data:g,textStyle:h.textStyle,template:h.template},fill:h.fill,maps:this.maps,element:r,eventArgs:e},this.maps.isBlazor)l.maps,ei(l,["maps"]);this.maps.trigger("tooltipRender",l,function(e){l.cancel||!h.visible||t.isNullOrUndefined(m)||-1!==u.indexOf("_cluster_")||-1!==u.indexOf("_dataLabel_")?p.removeTooltip():(p.maps.isProtectedOnChange=!0,l.options.textStyle.color=p.maps.themeStyle.tooltipFontColor||l.options.textStyle.color,p.svgTooltip=new i.Tooltip({enable:!0,header:"",data:l.options.data,template:l.options.template,content:[m.toString()],shapes:[],location:l.options.location,palette:[void 0],areaBounds:p.maps.mapAreaRect,textStyle:l.options.textStyle,availableSize:p.maps.availableSize,fill:l.fill||p.maps.themeStyle.tooltipFillColor}),p.svgTooltip.opacity=p.maps.themeStyle.tooltipFillOpacity||p.svgTooltip.opacity,p.svgTooltip.appendTo(d))})}else this.removeTooltip()},e.prototype.setTooltipContent=function(e,i){var o=t.extend({},i,null,!0);return this.maps.format&&!isNaN(Number(o[e.valuePath]))?o[e.valuePath]=W(this.maps,Number(o[e.valuePath])):o=Object.keys(o).length?o:void 0,o},e.prototype.formatValue=function(e,t){return t.format&&!isNaN(Number(e))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(e)):e},e.prototype.formatter=function(e,t){void 0===t&&(t={});for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];e=e.split("${"+n+"}").join(this.formatValue(t[n],this.maps))}return e},e.prototype.mouseUpHandler=function(e){this.renderTooltip(e),clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3)},e.prototype.removeTooltip=function(){document.getElementsByClassName("EJ2-maps-Tooltip").length>0&&t.remove(document.getElementsByClassName("EJ2-maps-Tooltip")[0])},e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(t.Browser.touchMoveEvent,this.renderTooltip,this),this.maps.on(t.Browser.touchEndEvent,this.mouseUpHandler,this),this.maps.on(t.Browser.touchCancelEvent,this.removeTooltip,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(t.Browser.touchMoveEvent,this.renderTooltip),this.maps.off(t.Browser.touchEndEvent,this.mouseUpHandler),this.maps.off(t.Browser.touchCancelEvent,this.removeTooltip))},e.prototype.getModuleName=function(){return"MapsTooltip"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),ii=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},oi=function(){function e(e){this.isPanning=!1,this.mouseEnter=!1,this.isTouch=!1,this.rectZoomingStart=!1,this.pinchRect=new je(0,0,0,0),this.browserName=t.Browser.info.name,this.isPointer=t.Browser.isPointer,this.handled=!1,this.pinchFactor=1,this.startTouches=[],this.shapeZoomLocation=[],this.intersect=[],this.maps=e,this.wheelEvent="mozilla"===this.browserName?this.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",this.cancelEvent=this.isPointer?"pointerleave":"mouseleave",this.selectionColor=this.maps.zoomSettings.selectionColor,this.fillColor=this.maps.zoomSettings.color,this.addEventListener(),this.groupElements=[]}return e.prototype.performZooming=function(e,t,i){var o=this.maps;o.previousProjection=o.projectionType;var n=o.tileZoomLevel,r=o.previousScale=o.scale,a=o.zoomSettings.maxZoom,l=o.zoomSettings.minZoom,s=(o.previousPoint=o.translatePoint,o.tileTranslatePoint);if(!o.isTileMap&&("ZoomIn"===i?t>=l&&t<=a:t>=l)){var p=o.mapAreaRect,h=o.baseMapRectBounds.min,d=o.baseMapRectBounds.max,c=Math.abs(h.x-d.x),m=Math.abs(h.y-d.y),u=o.translatePoint,g=u.x-(p.width/r-p.width/t)/(p.width/e.x),y=u.y-(p.height/r-p.height/t)/(p.height/e.y),f=Math.abs(o.baseMapRectBounds.max.y-o.baseMapRectBounds.min.y)*t;g=f<o.mapAreaRect.height?p.x+(-h.x+(p.width/2-c/2)):g,y=f<o.mapAreaRect.height?p.y+(-h.y+(p.height/2-m/2)):y,o.translatePoint=new _e(g,y),o.scale=t,this.triggerZoomEvent(s,n)}else o.isTileMap&&t>=l&&t<=a&&(this.getTileTranslatePosition(n,t,e),o.tileZoomLevel=t,o.scale=Math.pow(2,t-1),o.translatePoint.x=(o.tileTranslatePoint.x-.01*o.scale)/o.scale,o.translatePoint.y=(o.tileTranslatePoint.y-.01*o.scale)/o.scale,this.triggerZoomEvent(s,n),o.mapLayerPanel.generateTiles(t,o.tileTranslatePoint));this.applyTransform()},e.prototype.triggerZoomEvent=function(e,t){var i,o=this.maps;i=o.isTileMap?{cancel:!1,name:"zoom",type:o.tileZoomLevel>t?"zoomIn":"zoomOut",maps:o.isBlazor?null:o,tileTranslatePoint:{previous:e,current:o.tileTranslatePoint},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{previous:t,current:o.tileZoomLevel},scale:{previous:o.previousScale,current:o.scale}}:{cancel:!1,name:"zoom",type:o.scale>o.previousScale?"zoomIn":"zoomOut",maps:o,tileTranslatePoint:{},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{},scale:{previous:o.previousScale,current:o.scale}},o.trigger("zoom",i)},e.prototype.getTileTranslatePosition=function(e,t,i){var o=this.maps,n=G(this.maps.element.id).getBoundingClientRect(),r=256*Math.pow(2,e),a=256*Math.pow(2,t),l=(i.x-o.tileTranslatePoint.x)/r*100,s=(i.y-o.tileTranslatePoint.y)/r*100;o.tileTranslatePoint.x=1===t?n.width/2-256:i.x-l*a/100,o.tileTranslatePoint.y=1===t?n.height/2-256:i.y-s*a/100},e.prototype.performRectZooming=function(){var e=this.maps,t=e.availableSize,i=e.tileZoomLevel,o=this.zoomingRect;if(o.height>0&&o.width>0){var n=this.zoomingRect.x+this.zoomingRect.width/2,r=this.zoomingRect.y+this.zoomingRect.height/2,a=void 0;if(e.isTileMap)a=i+Math.round(i+(t.width/o.width+t.height/o.height)/2),this.getTileTranslatePosition(i,a,{x:n,y:r}),e.tileZoomLevel=a,e.mapLayerPanel.generateTiles(a,e.tileTranslatePoint),e.translatePoint.x=(e.tileTranslatePoint.x-.5*Math.pow(2,a))/Math.pow(2,a),e.translatePoint.y=(e.tileTranslatePoint.y-.5*Math.pow(2,a))/Math.pow(2,a),e.scale=Math.pow(2,a);else{var l=e.previousScale=e.scale;a=l+Math.round((t.width/o.width+t.height/o.height)/2);var s=e.previousPoint=e.translatePoint,p=s.x-(t.width/l-t.width/a)/(t.width/n),h=s.y-(t.height/l-t.height/a)/(t.height/r);e.translatePoint=new _e(p,h),e.scale=a}this.applyTransform(!0),this.zoomingRect=null}},e.prototype.setInteraction=function(e){this.lastScale=1,this.interaction=e},e.prototype.updateInteraction=function(){2===this.fingers?this.setInteraction("zoom"):this.setInteraction(null)},e.prototype.performPinchZooming=function(e){var t=this.maps,i=t.tileZoomLevel,o=t.mapAreaRect;t.previousScale=t.scale,t.previousPoint=t.translatePoint;var n=t.tileTranslatePoint,r=me(this.touchStartList,this.touchMoveList),a=ye(ge(this.touchMoveList,this.maps)),l=r/this.lastScale;this.lastScale=r,this.pinchFactor*=l,this.pinchFactor=Math.min(this.maps.zoomSettings.maxZoom,Math.max(this.pinchFactor,this.maps.zoomSettings.minZoom));var s=this.pinchFactor;if(t.isTileMap){var p=s;this.getTileTranslatePosition(i,p,{x:a.x,y:a.y}),t.tileZoomLevel=p,t.translatePoint.x=(t.tileTranslatePoint.x-.5*Math.pow(2,p))/Math.pow(2,p),t.translatePoint.y=(t.tileTranslatePoint.y-.5*Math.pow(2,p))/Math.pow(2,p),t.scale=Math.pow(2,p),this.triggerZoomEvent(n,i),t.mapLayerPanel.generateTiles(p,t.tileTranslatePoint)}else{var h=t.baseMapRectBounds.min,d=t.baseMapRectBounds.max,c=Math.abs(h.x-d.x),m=Math.abs(h.y-d.y),u=t.translatePoint,g=Math.abs(t.baseMapRectBounds.max.y-t.baseMapRectBounds.min.y)*s,y=u.x-(o.width/t.scale-o.width/s)/(o.width/a.x),f=u.y-(o.height/t.scale-o.height/s)/(o.height/a.y);y=g<t.mapAreaRect.height?o.x+(-h.x+(o.width/2-c/2)):y,f=g<t.mapAreaRect.height?o.y+(-h.y+(o.height/2-m/2)):f,t.translatePoint=new _e(y,f),t.scale=s,this.triggerZoomEvent(n,i)}this.applyTransform()},e.prototype.drawZoomRectangle=function(){var e,t,i,o,n=this.maps,r=this.mouseDownPoints,a=this.mouseMovePoints;i=Math.abs(a.x-r.x),o=Math.abs(a.y-r.y),e=a.x>r.x?r.x:r.x-i,t=a.y>r.y?r.y:r.y-o;G(n.element.id).getBoundingClientRect();if(e>n.mapAreaRect.x&&e<n.mapAreaRect.x+n.mapAreaRect.width&&t>n.mapAreaRect.y&&t<n.mapAreaRect.y+n.mapAreaRect.height){this.zoomingRect=new je(e,t,i,o);var l=n.renderer.createSvg({id:n.element.id+"_Selection_Rect_Zooming",width:n.availableSize.width,height:n.availableSize.height}),s=new Ee(n.element.id+"_ZoomRect","#d3d3d3",{width:1,color:"#009900"},.5,this.zoomingRect,0,0,"","3");l.appendChild(n.renderer.drawRectangle(s)),G(n.element.id+"_Secondary_Element").appendChild(l)}},e.prototype.animateTransform=function(e,t,i,o,n){var r=this.currentLayer.animationDuration;t&&0!==r?ve(e,0,r,new Re(i,o),n,this.maps.mapAreaRect,this.maps):e.setAttribute("transform","scale("+n+") translate( "+i+" "+o+" )")},e.prototype.applyTransform=function(e){var i;this.templateCount=0;var o=this.maps.scale,n=this.maps.translatePoint.x,r=this.maps.translatePoint.y;if(this.maps.zoomShapeCollection=[],this.layerCollectionEle){for(var a=0;a<this.layerCollectionEle.childElementCount;a++){var l=this.layerCollectionEle.childNodes[a];if("g"===l.tagName){this.templateCount++,this.index=l.id.indexOf("_LayerIndex_")>-1&&parseFloat(l.id.split("_LayerIndex_")[1].split("_")[0]),this.currentLayer=this.maps.layersCollection[this.index];for(var s=this.maps.mapLayerPanel.calculateFactor(this.currentLayer),p=0;p<l.childElementCount;p++){var h=l.childNodes[p];if(h.id.indexOf("_Markers_Group")>-1||h.id.indexOf("_bubble_Group")>-1||h.id.indexOf("_dataLableIndex_Group")>-1){if(h.id.indexOf("_Markers_Group")>-1){this.markerTranslates(h.childNodes[0],s,n,r,o,"Marker",l,e),h=l.childNodes[p];for(var d=0;d<h.childElementCount;d++)this.markerTranslate(h.childNodes[d],s,n,r,o,"Marker",e)}else if(h.id.indexOf("_bubble_Group")>-1){var c=void 0;for(d=0;d<h.childElementCount;d++){(c=h.childNodes[d]).getAttribute("transform");i=parseFloat(c.id.split("_LayerIndex_")[1].split("_")[0]);for(var m=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[0]),u=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[2]),g=0;g<this.maps.bubbleModule.bubbleCollection.length;g++){var y=this.maps.bubbleModule.bubbleCollection[g];if(y.LayerIndex===i&&y.BubbleIndex===m&&y.DataIndex===u){var f=(y.center.x+n)*o,v=(y.center.y+r)*o,b=this.currentLayer.animationDuration;e&&0!==b?xe(c,0,b,new Re(f,v)):c.setAttribute("transform","translate( "+f+" "+v+" )");break}}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1){this.intersect=[],this.maps.zoomLabelPositions=[],this.maps.zoomLabelPositions=this.maps.dataLabelModule.dataLabelCollections;for(d=0;d<h.childElementCount;d++)if(h.childNodes[d].id.indexOf("_LabelIndex_")>-1){var S=parseFloat(h.childNodes[d].id.split("_LabelIndex_")[1].split("_")[0]);this.zoomshapewidth=this.shapeZoomLocation[S].getBoundingClientRect(),this.maps.zoomShapeCollection.push(this.zoomshapewidth),this.dataLabelTranslate(h.childNodes[d],s,n,r,o,"DataLabel",e);var w=this.maps.layers[this.index].dataLabelSettings.border;if(d>0&&w.width>1&&h.childNodes[d-1].id.indexOf("_rectIndex_")>-1){var M=(this.maps.zoomLabelPositions[S].location.x+n)*o,O=(this.maps.zoomLabelPositions[S].location.y+r)*o,_=x(h.childNodes[d].innerHTML,this.maps.layers[this.index].dataLabelSettings.textStyle),C=h.childNodes[d-1],P=M-_.width/2,L=O-_.height/2-5;C.setAttribute("x",P),C.setAttribute("y",L)}}}}else this.maps.isTileMap&&h.id.indexOf("_line_Group")>-1?(h.remove(),l.children.length>0&&l.children[0]?l.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index),l.children[0]):l.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index))):(he(h,this.index,o,this.maps),this.maps.zoomTranslatePoint=this.maps.translatePoint,this.animateTransform(h,e,n,r,o),this.shapeZoomLocation=h.childNodes)}}}t.isNullOrUndefined(this.currentLayer)||e&&0!==this.currentLayer.animationDuration||this.processTemplate(n,r,o,this.maps)}},e.prototype.markerTranslates=function(e,i,o,n,r,a,l,s){var p=this;void 0===s&&(s=!1);var h,m=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10);h=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",style:"pointer-events: auto;"}),document.getElementById(h.id)&&document.getElementById(h.id).remove();var u=t.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+m+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+(this.maps.isTileMap?10:this.maps.mapAreaRect.y)+"px;left:"+(this.maps.isTileMap?10:this.maps.mapAreaRect.x)+"px;height:"+this.maps.mapAreaRect.height+"px;width:"+this.maps.mapAreaRect.width+"px;"});document.getElementById(u.id)&&document.getElementById(u.id).remove();parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);var g=this.maps.layersCollection[m];g.markerSettings.map(function(e,a){var l=e.dataSource;l.forEach(function(s,y){var f={template:e.template,data:s,maps:p.maps,marker:e,cancel:!1,name:St,fill:e.fill,height:e.height,width:e.width,imageUrl:e.imageUrl,shape:e.shape,border:e.border};if(p.maps.isBlazor){f.maps,f.marker;var v=ii(f,["maps","marker"]);f=v}p.maps.trigger("markerRendering",f,function(v){var b=s.longitude|s.Longitude,x=s.latitude|s.Latitude,S=e.offset;if(!f.cancel&&e.visible&&!t.isNullOrUndefined(b)&&!t.isNullOrUndefined(x)){var w=p.maps.element.id+"_LayerIndex_"+m+"_MarkerIndex_"+a+"_dataIndex_"+y,M=p.maps.isTileMap?c(new Re(b,x),p.maps.tileZoomLevel,p.maps.tileTranslatePoint,!0):d(x,b,i,g,p.maps),O=(0!==g.animationDuration||t.isNullOrUndefined(p.maps.zoomModule),{x:o,y:n});f.template?P(f,void 0,w,s,0,u,M,r,S,p.maps):C(f,e,l,y,M,O,w,S,r,p.maps,h)}})})}),h.childElementCount>0&&"Template"!==a&&(l.appendChild(h),g.markerClusterSettings.allowClustering&&(this.maps.svgObject.appendChild(h),this.maps.element.appendChild(this.maps.svgObject),_(g,h,this.maps,m,h),l.appendChild(h))),u.childElementCount>0&&G(this.maps.element.id+"_Secondary_Element")&&(G(this.maps.element.id+"_Secondary_Element").appendChild(u),g.markerClusterSettings.allowClustering&&(_(g,u,this.maps,m,h),G(this.maps.element.id+"_Secondary_Element").appendChild(u)))},e.prototype.processTemplate=function(e,i,o,n){for(var r=0;r<this.templateCount;r++){this.currentLayer=n.layersCollection[r];var a=n.mapLayerPanel.calculateFactor(this.currentLayer),l=G(n.element.id+"_LayerIndex_"+r+"_Markers_Template_Group"),s=G(n.element.id+"_LayerIndex_"+r+"_Label_Template_Group");if(!t.isNullOrUndefined(l)&&l.childElementCount>0)for(var p=0;p<l.childElementCount;p++)this.markerTranslate(l.childNodes[p],a,e,i,o,"Template");if(!t.isNullOrUndefined(s)&&s.childElementCount>0)for(p=0;p<s.childElementCount;p++)this.dataLabelTranslate(s.childNodes[p],a,e,i,o,"Template")}},e.prototype.dataLabelTranslate=function(e,i,o,n,r,a,l){void 0===l&&(l=!1);var s,p,h,d,c,m=this.maps.dataLabelModule.dataLabelCollections,u=(e.getBoundingClientRect(),this.maps.layers[this.index].dataLabelSettings.textStyle),g=(this.maps.layers[this.index].dataLabelSettings.labelPath,parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0])),y=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);e.id.indexOf("_LabelIndex_")>-1&&(c=parseFloat(e.id.split("_LabelIndex_")[1].split("_")[0]));for(var f=this.currentLayer.animationDuration,v=0;v<m.length;v++){var b=m[v];if(b.layerIndex===g&&b.shapeIndex===y&&b.labelIndex===c){var S=b.location.x,w=b.location.y;if("Template"===a){var M=G(this.maps.element.id+"_Layer_Collections");S=Math.abs(this.maps.baseMapRectBounds.min.x-S)*r,w=Math.abs(this.maps.baseMapRectBounds.min.y-w)*r;var O=e.getBoundingClientRect(),_=M.getBoundingClientRect(),C=e.parentElement.getBoundingClientRect(),P=S+(_.left-C.left)-O.width/2,L=w+(_.top-C.top)-O.height/2;e.style.left=P+"px",e.style.top=L+"px"}else{S=(S+o)*r;var T=(w=(w+n)*r)-(d=x(h=b.dataLabelText,u)).height/4,I=w+d.height/4,E={rightWidth:S+d.width/2,leftWidth:S-d.width/2,heightTop:T,heightBottom:I};if(l&&0!==f||e.setAttribute("transform","translate( "+S+" "+w+" )"),"Hide"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(r>1?(s=this.zoomshapewidth.width>=d.width?h:"",e.innerHTML=s):(s=this.maps.dataLabelShape[v]>=d.width?h:"",e.innerHTML=s)),"Trim"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(r>1?(s=A(this.zoomshapewidth.width,h,u),e.innerHTML=s):(s=A(this.maps.dataLabelShape[v],h,u),e.innerHTML=s)),"Hide"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var k=0;k<this.intersect.length;k++)if(!t.isNullOrUndefined(this.intersect[k])){if(!(E.leftWidth>this.intersect[k].rightWidth||E.rightWidth<this.intersect[k].leftWidth||E.heightTop>this.intersect[k].heightBottom||E.heightBottom<this.intersect[k].heightTop)){s="",e.innerHTML=s;break}s=t.isNullOrUndefined(s)?h:s,e.innerHTML=s}this.intersect.push(E)}if("Trim"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var N=0;N<this.intersect.length;N++)if(!t.isNullOrUndefined(this.intersect[N]))if(E.rightWidth<this.intersect[N].leftWidth||E.leftWidth>this.intersect[N].rightWidth||E.heightBottom<this.intersect[N].heightTop||E.heightTop>this.intersect[N].heightBottom)p=t.isNullOrUndefined(s)?h:s,r>1&&(p=A(this.zoomshapewidth.width,p,u)),e.innerHTML=p;else{if(E.leftWidth>this.intersect[N].leftWidth){p=A((B=this.intersect[N].rightWidth-E.leftWidth)-(E.rightWidth-E.leftWidth),s=t.isNullOrUndefined(s)?h:s,u),e.innerHTML=p;break}if(E.leftWidth<this.intersect[N].leftWidth){var B=E.rightWidth-this.intersect[N].leftWidth;p=A(Math.abs(B-(E.rightWidth-E.leftWidth)),s=t.isNullOrUndefined(s)?h:s,u),e.innerHTML=p;break}}this.intersect.push(E),t.isNullOrUndefined(p)&&(p=A(this.zoomshapewidth.width,h,u),e.innerHTML=p)}else xe(e,0,f,new Re(S,w))}}}},e.prototype.markerTranslate=function(e,i,o,n,r,a,l){void 0===l&&(l=!1);var s=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),p=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),m=this.maps.layersCollection[s],u=m.markerSettings[p];if(!t.isNullOrUndefined(u)&&!t.isNullOrUndefined(u.dataSource)&&!t.isNullOrUndefined(u.dataSource[h])){var g=u.dataSource[h].longitude,y=u.dataSource[h].latitude,f=this.currentLayer.animationDuration,v=this.maps.isTileMap?c(new _e(g,y),this.maps.tileZoomLevel,this.maps.tileTranslatePoint,!0):d(y,g,i,m,this.maps);if(v.y=this.maps.zoomSettings.enable&&this.maps.isTileMap?v.y-10:v.y,this.maps.isTileMap)if("Template"===a){var b=e.getBoundingClientRect();e.style.left=v.x-b.width/2+"px",e.style.top=v.y-b.height/2+"px"}else e.setAttribute("transform","translate( "+v.x+" "+v.y+" )");else if("Template"===a){v.x=Math.abs(this.maps.baseMapRectBounds.min.x-v.x)*r,v.y=Math.abs(this.maps.baseMapRectBounds.min.y-v.y)*r;b=e.getBoundingClientRect();var x=G(this.maps.element.id+"_Layer_Collections").getBoundingClientRect(),S=e.parentElement.getBoundingClientRect();e.style.left=v.x+(x.left-S.left)-b.width/2+u.offset.x+"px",e.style.top=v.y+(x.top-S.top)-b.height/2+u.offset.y+"px"}else v.x=(v.x+o)*r+u.offset.x,v.y=(v.y+n)*r+u.offset.y,l&&0!==f?xe(e,0,f,v):e.setAttribute("transform","translate( "+v.x+" "+v.y+" )")}},e.prototype.panning=function(e,i,o){var n,r,a,l=this.maps,s=this.mouseDownPoints,p=this.mouseMovePoints,h=l.scale,d=l.translatePoint,c=l.tileTranslatePoint;if(i=t.isNullOrUndefined(i)?s.x-p.x:i,o=t.isNullOrUndefined(o)?s.y-p.y:o,l.isTileMap)this.maps.tileZoomLevel>1&&(r=l.tileTranslatePoint.x-i,a=l.tileTranslatePoint.y-o,this.distanceX=r-l.tileTranslatePoint.x,this.distanceY=a-l.tileTranslatePoint.y,l.tileTranslatePoint.x=r,l.tileTranslatePoint.y=a,l.translatePoint.x=(l.tileTranslatePoint.x-i)/l.scale,l.translatePoint.y=(l.tileTranslatePoint.y-o)/l.scale,n={cancel:!1,name:"pan",maps:l.isBlazor?null:l,tileTranslatePoint:{previous:c,current:l.tileTranslatePoint},translatePoint:{previous:d,current:l.translatePoint},scale:l.scale,tileZoomLevel:l.tileZoomLevel},l.trigger("pan",n),l.mapLayerPanel.generateTiles(l.tileZoomLevel,l.tileTranslatePoint),this.applyTransform());else{r=d.x-i/h,a=d.y-o/h;var m=G(l.element.id+"_Layer_Collections").getBoundingClientRect(),u=G(l.element.id+"_svg").getBoundingClientRect(),g=i<0?m.left<=u.left+l.mapAreaRect.x:m.left+m.width>=u.left+u.width+l.mapAreaRect.x+l.margin.left,y=o<0?m.top<=u.top+l.mapAreaRect.y:m.top+m.height>=u.top+u.height+l.mapAreaRect.y+l.margin.top;n={cancel:!1,name:"pan",maps:l.isBlazor?null:l,tileTranslatePoint:{},translatePoint:{previous:d,current:new _e(r,a)},scale:l.scale,tileZoomLevel:l.tileZoomLevel},l.trigger("pan",n),g&&y?(l.translatePoint=new _e(r,a),this.applyTransform()):g?(l.translatePoint=new _e(r,l.translatePoint.y),this.applyTransform()):y&&(l.translatePoint=new _e(l.translatePoint.x,a),this.applyTransform())}l.zoomTranslatePoint=l.translatePoint,this.mouseDownPoints=this.mouseMovePoints},e.prototype.toAlignSublayer=function(){this.maps.translatePoint.x=t.isNullOrUndefined(this.distanceX)?this.maps.translatePoint.x:this.maps.translatePoint.x-this.distanceX/this.maps.scale,this.maps.translatePoint.y=t.isNullOrUndefined(this.distanceY)?this.maps.translatePoint.y:this.maps.translatePoint.y-this.distanceY/this.maps.scale,this.applyTransform(!1)},e.prototype.toolBarZooming=function(e,t){var i=this.maps,o=i.tileZoomLevel,n=i.previousScale=i.scale;i.mapScaleValue=e;var r=i.zoomSettings.maxZoom,a=i.zoomSettings.minZoom,l=i.mapAreaRect,s=i.previousPoint=i.translatePoint,p=i.tileTranslatePoint;if(i.previousProjection=i.projectionType,e="ZoomOut"===t&&1===Math.round(e)?1:e,!i.isTileMap&&("ZoomIn"===t?e>=a&&e<=r:e>=a)){var h=i.baseMapRectBounds.min,d=i.baseMapRectBounds.max,c=Math.abs(d.x-h.x),m=Math.abs(h.y-d.y),u=s.x-(l.width/n-l.width/e)/2,g=s.y-(l.height/n-l.height/e)/2,y=Math.abs(i.baseMapRectBounds.max.y-i.baseMapRectBounds.min.y)*e;u=y<i.mapAreaRect.height?l.x+(-h.x+(l.width/2-c/2)):u,g=y<i.mapAreaRect.height?l.y+(-h.y+(l.height/2-m/2)):g,i.translatePoint=new _e(u,g),i.zoomTranslatePoint=i.translatePoint,i.scale=e,this.triggerZoomEvent(p,o)}else if(i.isTileMap&&e>=a&&e<=r){var f=e;i.scale=Math.pow(2,f-1),i.tileZoomLevel=f;var v={x:i.availableSize.width/2,y:i.availableSize.height/2};this.getTileTranslatePosition(o,f,v),i.translatePoint.x=(i.tileTranslatePoint.x-.01*i.scale)/i.scale,i.translatePoint.y=(i.tileTranslatePoint.y-.01*i.scale)/i.scale,this.triggerZoomEvent(p,o),i.mapLayerPanel.generateTiles(f,i.tileTranslatePoint)}this.applyTransform(!0)},e.prototype.createZoomingToolbars=function(){var e=this.maps;this.toolBarGroup=e.renderer.createGroup({id:e.element.id+"_Zooming_KitCollection",opacity:.3});var t=15,i=15,o=e.zoomSettings.toolBarOrientation,n=e.zoomSettings.toolbars,r='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/>';r+='<feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/>',r+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var a=e.zoomSettings.toolbars.length,l="Horizontal"===e.zoomSettings.toolBarOrientation?16*a+20*a:32,s="Horizontal"===e.zoomSettings.toolBarOrientation?32:16*a+20*a;this.toolBarGroup.appendChild(e.renderer.drawRectangle(new Ee(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},1,new je(0,0,l,s),0,0)));var p=e.renderer.createDefs();p.innerHTML=r,this.toolBarGroup.appendChild(p);var h=e.renderer.drawRectangle(new Ee(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},.1,new je(0,0,l,s),0,0));h.setAttribute("filter","url(#chart_shadow)"),this.toolBarGroup.appendChild(h);for(var d=0;d<n.length;d++){var c=n[d];this.currentToolbarEle=e.renderer.createGroup({id:e.element.id+"_Zooming_ToolBar_"+c+"_Group",transform:"translate( "+t+" "+i+" ) "}),this.currentToolbarEle.setAttribute("class","e-maps-toolbar");var m="transparent",u="";switch(c.toLowerCase()){case"zoom":u="M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,",u+="5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571",u+="L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Te(e.element.id+"_Zooming_ToolBar_"+c,m,1,this.maps.themeStyle.zoomFillColor,1,null,u+"4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z"))),this.zoomElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomin":u="M 8, 0 L 8, 16 M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Te(e.element.id+"_Zooming_ToolBar_"+c+"_Path",m,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomInElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomout":u="M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Te(e.element.id+"_Zooming_ToolBar_"+c,m,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomOutElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"pan":u="M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,",u+="11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Te(e.element.id+"_Zooming_ToolBar_"+c,this.selectionColor,1,this.selectionColor,1,null,u))),this.panColor=this.selectionColor,this.panElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"reset":u="M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,",u+="1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,",u+="13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,",this.currentToolbarEle.appendChild(e.renderer.drawPath(new Te(e.element.id+"_Zooming_ToolBar_"+c,this.fillColor,null,this.maps.themeStyle.zoomFillColor,1,null,u+"3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"))),this.wireEvents(this.currentToolbarEle,this.performToolBarAction)}this.currentToolbarEle.appendChild(e.renderer.drawCircle(new ke(e.element.id+"_Zooming_ToolBar_"+c+"_Rect",m,{color:this.maps.themeStyle.zoomFillColor,width:1},1,8,8,16,""))),t="Horizontal"===o?t+36:t,i="Horizontal"===o?i:i+36,this.toolBarGroup.appendChild(this.currentToolbarEle)}},e.prototype.performToolBarAction=function(e){var t=e.target;e.stopImmediatePropagation();var i="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1,o=t.id.split("_Zooming_ToolBar_")[1].split("_")[0];i?(this.handled=!0,this.performZoomingByToolBar(o)):"mousedown"!==e.type&&"pointerdown"!==e.type||this.handled?this.handled=!1:(this.handled=!1,this.performZoomingByToolBar(o))},e.prototype.performZoomingByToolBar=function(e){var t=this.maps;switch(e.toLowerCase()){case"zoom":this.panColor=this.fillColor,this.zoomColor=this.selectionColor,this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.fillColor);break;case"pan":this.panColor=this.selectionColor,this.zoomColor=this.fillColor,this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.selectionColor);break;case"zoomin":this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)+1,"ZoomIn");break;case"zoomout":this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)-1,"ZoomOut");break;case"reset":this.toolBarZooming(1,"ZoomOut"),this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.selectionColor)}this.panningStyle(e.toLowerCase())},e.prototype.panningStyle=function(e){var t=G(this.maps.element.id+"_svg");"pan"===e||this.isPanning?t.setAttribute("class","e-maps-panning"):t.setAttribute("class","")},e.prototype.applySelection=function(e,t){if(e)for(var i,o=0;o<e.childElementCount;o++)"circle"!==(i=e.childNodes[o]).tagName&&(i.setAttribute("fill",t),i.setAttribute("stroke",t))},e.prototype.showTooltip=function(e){var t=e.target.id.split("_Zooming_ToolBar_")[1].split("_")[0];this.isTouch||ae("EJ2_Map_Toolbar_Tip",this.maps.getLocalizedLabel(t),e.pageY+10,e.pageX+10,"10px")},e.prototype.removeTooltip=function(){G("EJ2_Map_Toolbar_Tip")&&t.remove(G("EJ2_Map_Toolbar_Tip"))},e.prototype.alignToolBar=function(){var e=this.maps,i=t.createElement("div",{id:e.element.id+"_ToolBar",styles:"position:absolute;z-index:2"}),o=e.renderer.createSvg({id:e.element.id+"_Zooming_ToolBar",width:10,height:10});o.appendChild(this.toolBarGroup),i.appendChild(o),G(e.element.id+"_Secondary_Element")&&G(e.element.id+"_Secondary_Element").appendChild(i);var n=this.toolBarGroup.getBoundingClientRect();o.setAttribute("height",(n.height+5).toString()),o.setAttribute("width",(n.width+5).toString());var r=e.mapAreaRect,a=0,l=0;switch(e.zoomSettings.verticalAlignment){case"Near":l=r.y;break;case"Center":l=r.height/2-n.height/2;break;case"Far":l=r.height-n.height-10}switch(e.zoomSettings.horizontalAlignment){case"Near":a=r.x;break;case"Center":a=r.width/2-n.width/2;break;case"Far":a=r.width-n.width-10}i.style.left=a+"px",i.style.top=l+"px";var s=this.maps.zoomSettings.highlightColor,p=" .e-maps-toolbar:hover > circle { stroke:"+s+"; } .e-maps-toolbar:hover > path { fill: "+s+" ;  stroke: "+s+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",h=document.createElement("style");h.appendChild(document.createTextNode(p)),i.appendChild(h)},e.prototype.wireEvents=function(e,i){t.EventHandler.add(e,t.Browser.touchStartEvent,i,this),t.EventHandler.add(e,"mouseover",this.showTooltip,this),t.EventHandler.add(e,"mouseout",this.removeTooltip,this)},e.prototype.mapMouseWheel=function(e){if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.mouseWheelZoom){var t=this.getMousePosition(e.pageX,e.pageY),i=this.maps,o=(i.availableSize,i.tileZoomLevel),n=i.scale,r=i.isTileMap?o:n;if(t.x>i.mapAreaRect.x&&t.x<i.mapAreaRect.x+i.mapAreaRect.width&&t.y>i.mapAreaRect.y&&t.y<i.mapAreaRect.y+i.mapAreaRect.height){e.preventDefault();var a="mozilla"!==this.browserName||this.isPointer?e.wheelDelta/120>0?"ZoomIn":"ZoomOut":-e.detail/3>0?"ZoomIn":"ZoomOut";"ZoomIn"===a?this.performZooming(t,r+1,a):this.performZooming(t,r-1,a)}}},e.prototype.doubleClick=function(e){var t=e.pageX,i=e.pageY;e.target;if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.doubleClickZoom){var o=this.getMousePosition(t,i),n=this.maps,r=(n.availableSize,n.tileZoomLevel),a=n.scale,l=n.isTileMap?r:a;o.x>n.mapAreaRect.x&&o.x<n.mapAreaRect.x+n.mapAreaRect.width&&o.y>n.mapAreaRect.y&&o.y<n.mapAreaRect.y+n.mapAreaRect.height&&this.performZooming(o,l+1,"ZoomIn")}},e.prototype.mouseDownHandler=function(e){var t,i,o=null;e.target;"touchstart"===e.type?(this.isTouch=!0,o=e.touches,e.target,t=o[0].clientX,i=o[0].clientY):(t=e.pageX,i=e.pageY,e.target),this.isPanning=this.panColor===this.selectionColor||this.zoomColor!==this.selectionColor,this.rectZoomingStart=!this.isPanning&&this.maps.zoomSettings.enable,this.mouseDownPoints=this.getMousePosition(t,i),this.isTouch&&(this.firstMove=!0,this.pinchFactor=this.maps.scale,this.fingers=o.length)},e.prototype.mouseMoveHandler=function(e){var t,i,o,n=this.maps,r=null,a=this.maps.zoomSettings;"touchmove"===e.type?(this.isTouch=!0,o=e.target,t=(r=e.touches)[0].clientX,i=r[0].clientY):(t=e.pageX,i=e.pageY,o=e.target),G(n.element.id+"_Zooming_KitCollection")&&(o.id.indexOf("_Zooming_")>-1?G(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"):G(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3")),this.isTouch&&this.maps.zoomSettings.pinchZooming&&(this.firstMove&&2===r.length?(this.rectZoomingStart=!1,this.updateInteraction(),this.touchStartList=ce(e)):2===this.touchStartList.length&&2===r.length&&(this.touchMoveList=ce(e),e.preventDefault(),this.rectZoomingStart=!1,this.performPinchZooming(e)),this.firstMove=!1),this.mouseMovePoints=this.getMousePosition(t,i);e.target.id,e.target;a.enable&&this.isPanning&&(e.preventDefault(),this.maps.element.style.cursor="pointer",this.panning("None",null,null)),(this.isTouch?1===r.length&&this.rectZoomingStart:this.rectZoomingStart)&&(e.preventDefault(),this.drawZoomRectangle())},e.prototype.mouseUpHandler=function(e){this.maps;this.rectZoomingStart=!1,this.isPanning=!1,this.isTouch=!1,this.touchStartList=[],this.touchMoveList=[],this.lastScale=1,this.maps.element.style.cursor="auto",t.isNullOrUndefined(this.distanceX)&&t.isNullOrUndefined(this.distanceY)||"SubLayer"!==this.currentLayer.type||(this.toAlignSublayer(),this.distanceX=this.distanceY=null);var i=G(this.maps.element.id+"_Selection_Rect_Zooming");i&&this.maps.zoomSettings.enable&&(t.remove(i),this.performRectZooming())},e.prototype.mouseCancelHandler=function(e){this.isPanning=!1,this.isTouch=!1,this.rectZoomingStart=!1;var i=G(this.maps.element.id+"_Selection_Rect_Zooming");i&&this.maps.zoomSettings.enable&&(t.remove(i),this.performRectZooming())},e.prototype.click=function(e){var t=this.maps;if(t.zoomSettings.zoomOnClick&&e.target.id.indexOf("_shapeIndex_")>-1&&!t.zoomSettings.doubleClickZoom&&this.zoomColor!==this.selectionColor){var i=e.target.getBBox(),o=i.width,n=i.height,r=void 0,a=t.availableSize.width,l=t.availableSize.height;r=(a-100)/(l-100)>o/n?(l-100)/n:(a-100)/o;var s=(a/2-o*t.scale/2)/r,p=(l/2-n*t.scale/2)/r,h=-i.x+s,d=-i.y+p;t.previousScale=t.scale,t.previousPoint=t.translatePoint,t.scale=r,t.translatePoint={x:h,y:d},this.applyTransform(!0)}},e.prototype.getMousePosition=function(e,t){var i=this.maps,o=i.element.getBoundingClientRect(),n=i.element.ownerDocument.defaultView.pageXOffset,r=i.element.ownerDocument.defaultView.pageYOffset,a=i.element.ownerDocument.documentElement.clientTop,l=i.element.ownerDocument.documentElement.clientLeft,s=o.left+n-l,p=o.top+r-a;return new _e(e-s,t-p)},e.prototype.addEventListener=function(){this.maps.isDestroyed||(t.EventHandler.add(this.maps.element,this.wheelEvent,this.mapMouseWheel,this),t.EventHandler.add(this.maps.element,"click",this.click,this),t.EventHandler.add(this.maps.element,"dblclick",this.doubleClick,this),this.maps.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.maps.on(t.Browser.touchStartEvent,this.mouseDownHandler,this),this.maps.on(t.Browser.touchEndEvent,this.mouseUpHandler,this),t.EventHandler.add(this.maps.element,this.cancelEvent,this.mouseCancelHandler,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(t.EventHandler.remove(this.maps.element,this.wheelEvent,this.mapMouseWheel),t.EventHandler.remove(this.maps.element,"click",this.click),t.EventHandler.remove(this.maps.element,"dblclick",this.doubleClick),this.maps.off(t.Browser.touchMoveEvent,this.mouseMoveHandler),this.maps.off(t.Browser.touchStartEvent,this.mouseDownHandler),this.maps.off(t.Browser.touchEndEvent,this.mouseUpHandler),this.maps.off(this.cancelEvent,this.mouseCancelHandler))},e.prototype.getModuleName=function(){return"Zoom"},e.prototype.destroy=function(e){this.removeEventListener()},e}();e.Maps=Zt,e.load="load",e.loaded="loaded",e.click="click",e.rightClick="rightClick",e.doubleClick="doubleClick",e.resize="resize",e.tooltipRender="tooltipRender",e.shapeSelected=xt,e.shapeHighlight="shapeHighlight",e.mousemove="mousemove",e.mouseup="mouseup",e.mousedown="mousedown",e.layerRendering="layerRendering",e.shapeRendering="shapeRendering",e.markerRendering=St,e.markerClusterRendering=wt,e.markerClick=Mt,e.markerClusterClick=Ot,e.markerMouseMove=_t,e.markerClusterMouseMove=Ct,e.dataLabelRendering=Pt,e.bubbleRendering=Lt,e.bubbleClick=Tt,e.bubbleMouseMove=It,e.animationComplete=Et,e.legendRendering=kt,e.annotationRendering=Nt,e.itemSelection="itemSelection",e.itemHighlight=Bt,e.beforePrint="beforePrint",e.zoomIn="zoomIn",e.zoomOut="zoomOut",e.pan="pan",e.Annotation=qe,e.Arrow=Xe,e.Font=Ye,e.Border=Je,e.CenterPosition=Ke,e.TooltipSettings=Qe,e.Margin=$e,e.MarkerClusterSettings=et,e.ColorMappingSettings=tt,e.SelectionSettings=it,e.HighlightSettings=ot,e.NavigationLineSettings=nt,e.BubbleSettings=rt,e.CommonTitleSettings=at,e.SubTitleSettings=lt,e.TitleSettings=st,e.ZoomSettings=pt,e.LegendSettings=ht,e.DataLabelSettings=dt,e.ShapeSettings=ct,e.MarkerBase=mt,e.MarkerSettings=ut,e.LayerSettings=gt,e.Tile=yt,e.MapsAreaSettings=ft,e.Size=Oe,e.stringToNumber=r,e.calculateSize=a,e.createSvg=l,e.getMousePosition=s,e.degreesToRadians=p,e.radiansToDegrees=h,e.convertGeoToPoint=d,e.convertTileLatLongToPoint=c,e.xToCoordinate=m,e.yToCoordinate=u,e.aitoff=g,e.roundTo=y,e.sinci=f,e.acos=v,e.calculateBound=b,e.Point=_e,e.MinMax=Ce,e.GeoLocation=Pe,e.measureText=x,e.TextOption=Le,e.PathOption=Te,e.ColorValue=Ie,e.RectOption=Ee,e.CircleOption=ke,e.PolygonOption=Ne,e.PolylineOption=Be,e.LineOption=ze,e.Line=Fe,e.MapLocation=Re,e.Rect=je,e.PatternOptions=Ae,e.renderTextElement=S,e.convertElement=w,e.convertElementFromLabel=M,e.drawSymbols=O,e.clusterTemplate=_,e.marker=C,e.markerTemplate=P,e.appendShape=L,e.drawCircle=T,e.drawRectangle=I,e.drawPath=function(e,t,i){return L(e.renderer.drawPath(t),i)},e.drawPolygon=function(e,t,i){return L(e.renderer.drawPolygon(t),i)},e.drawPolyline=function(e,t,i){return L(e.renderer.drawPolyline(t),i)},e.drawLine=function(e,t,i){return L(e.renderer.drawLine(t),i)},e.calculateShapes=E,e.drawDiamond=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+(o.x+i.width/2)+" "+o.y+" L "+o.x+" "+(o.y+i.height/2)+" L "+(o.x-i.width/2)+" "+o.y+" Z",L(e.renderer.drawPath(t),n)},e.drawTriangle=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+(o.x+i.width/2)+" "+(o.y+i.height/2)+" L "+(o.x-i.width/2)+" "+(o.y+i.height/2)+" Z",L(e.renderer.drawPath(t),n)},e.drawCross=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2)+" M "+(o.x-i.width/2)+" "+o.y+" L "+(o.x+i.width/2)+" "+o.y,L(e.renderer.drawPath(t),n)},e.drawHorizontalLine=function(e,t,i,o,n){return t.d=" M "+(o.x-i.width/2)+" "+o.y+" L "+(o.x+i.width/2)+" "+o.y,L(e.renderer.drawPath(t),n)},e.drawVerticalLine=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2),L(e.renderer.drawPath(t),n)},e.drawStar=function(e,t,i,o,n){return t.d="M "+(o.x+i.width/3)+" "+(o.y-i.height/2)+" L "+(o.x-i.width/2)+" "+(o.y+i.height/6)+" L "+(o.x+i.width/2)+" "+(o.y+i.height/6)+" L "+(o.x-i.width/3)+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2)+" L "+(o.x+i.width/3)+" "+(o.y-i.height/2)+" Z",L(e.renderer.drawPath(t),n)},e.drawBalloon=k,e.drawPattern=function(e,t,i,o){for(var n=e.renderer.createPattern(t,"pattern"),r=0,a=i;r<a.length;r++)L(a[r],n);return L(n,o)},e.getFieldData=function(e,t){for(var i,o=[],n=0,r=e;n<r.length;n++){var a=r[n];i={};for(var l=0,s=t;l<s.length;l++){var p=s[l];a[p]&&(i[p]=a[p])}o.push(i)}return o},e.checkShapeDataFields=N,e.checkPropertyPath=B,e.filter=z,e.getRatioOfBubble=F,e.findMidPointOfPolygon=R,e.isCustomPath=j,e.textTrim=A,e.findPosition=U,e.removeElement=D,e.getTranslate=H,e.getZoomTranslate=Z,e.getElementByID=G,e.Internalize=W,e.getTemplateFunction=V,e.getElement=q,e.getShapeData=X,e.triggerShapeEvent=Y,e.getElementsByClassName=J,e.querySelector=K,e.getTargetElement=Q,e.createStyle=$,e.customizeStyle=ee,e.removeClass=te,e.elementAnimate=ie,e.timeout=oe,e.showTooltip=ne,e.wordWrap=re,e.createTooltip=ae,e.drawSymbol=le,e.renderLegendShape=se,e.getElementOffset=pe,e.changeBorderWidth=he,e.changeNavaigationLineWidth=de,e.targetTouches=ce,e.calculateScale=me,e.getDistance=ue,e.getTouches=ge,e.getTouchCenter=ye,e.sum=fe,e.zoomAnimate=ve,e.animate=be,e.MapAjax=Ue,e.smoothTranslate=xe,e.LayerPanel=jt,e.Bubble=Wt,e.BingMap=zt,e.Marker=bt,e.ColorMapping=Ft,e.DataLabel=qt,e.NavigationLine=Xt,e.Legend=Yt,e.Highlight=Kt,e.Selection=$t,e.MapsTooltip=ti,e.Zoom=oi,e.Annotations=At,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-maps.umd.min.js.map
