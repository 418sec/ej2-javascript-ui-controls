!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-layouts"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-buttons"),require("@syncfusion/ej2-lists"),require("@syncfusion/ej2-splitbuttons"),require("@syncfusion/ej2-navigations"),require("@syncfusion/ej2-grids")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-layouts","@syncfusion/ej2-popups","@syncfusion/ej2-data","@syncfusion/ej2-inputs","@syncfusion/ej2-buttons","@syncfusion/ej2-lists","@syncfusion/ej2-splitbuttons","@syncfusion/ej2-navigations","@syncfusion/ej2-grids"],t):t(e.ej={},e.ej2Base,e.ej2Layouts,e.ej2Popups,e.ej2Data,e.ej2Inputs,e.ej2Buttons,e.ej2Lists,e.ej2Splitbuttons,e.ej2Navigations,e.ej2Grids)}(this,function(e,t,i,n,s,a,r,o,l,h,d){"use strict";function c(e,t,i){i.setProperties({path:p(e,t)},!0),i.pathId=function(e){for(var t=u(e,e.getAttribute("data-uid"),!0),i=[],n=t.length-1;n>=0;n--)i.push(t[n]);return i}(e)}function p(e,t){for(var i=u(e,t,!1),n="/",s=i.length-2;s>=0;s--)n+=i[s]+"/";return n}function u(e,i,n){for(var s=[i],a=e.parentNode;!t.isNullOrUndefined(a);){if(t.matches(a,"."+jt)){var r=n?a.getAttribute("data-uid"):t.select("."+xt,a).textContent;s.push(r)}a=a.parentNode}return s}function f(e){e.isCut&&(b(e),e.selectedNodes=[],e.actionRecords=[],e.enablePaste=!1,e.notify(nn,{}))}function g(e,i){if(i.isSearchCut=!1,i.actionRecords=[],i.activeElements=[],i.notify(an,{}),0===i.activeElements.length)return!1;b(i);var n=i.activeElements;"navigationpane"!==i.activeModule?i.targetPath=i.path:i.targetPath=V(i);var s=0;if(n&&(y(i,n[0]),"cut"===e))for(;s<n.length;)m(n[s]),s++;for(s=0,i.selectedNodes=[],i.enablePaste=!0,i.notify(tn,{});s<i.activeRecords.length;)i.actionRecords.push(i.activeRecords[s]),i.selectedNodes.push(t.getValue("name",i.activeRecords[s])),s++;if(""!==i.breadcrumbbarModule.searchObj.element.value&&"navigationpane"!==i.activeModule){i.selectedNodes=[],i.isSearchCut=!0;for(var a=0;a<i.selectedItems.length;)i.selectedNodes.push(i.selectedItems[a]),a++}return!0}function m(e){e.classList.add(Nt)}function b(e,t){for(var i=t?e.element.querySelectorAll("."+kt):e.element.querySelectorAll("."+Nt),n=0;n<i.length;)t?i[n].classList.remove(kt):i[n].classList.remove(Nt),n++}function y(e,i){i&&(i.classList.contains(Ut)?e.activeModule="detailsview":t.closest(i,"."+Jt)?e.activeModule="largeiconsview":e.activeModule="navigationpane")}function v(e,t,i){var n;if(0===t.length&&e.notify(pn,{args:e}),n="startsWith"===e.searchSettings.filterType?t+"*":"endsWith"===e.searchSettings.filterType?"*"+t:"*"+t+"*",e.searchWord=n,e.itemData=[S(e)],t.length>0){var s=e.searchSettings.ignoreCase,a=e.showHiddenItems;ye(e,i?Yi:Bi,e.path,n,a,!s)}else ae(e,i?Yi:Bi,e.path)}function O(e,t){e.setProperties({view:t},!0),""!==e.breadcrumbbarModule.searchObj.element.value&&(e.layoutSelectedItems=e.selectedItems);var i="";e.breadcrumbbarModule.searchObj.element.value&&(i=e.breadcrumbbarModule.searchObj.element.value),v(e,i,!0)}function w(e,i){var n="";i&&(n=t.closest(i,".e-gridcontent")?"detailsview":t.closest(i,"."+St)?"largeiconsview":i.classList.contains("e-fullrow")||i.classList.contains("e-icon-expandable")?"navigationpane":t.closest(i,".e-address-list-item")?"breadcrumbbar":""),e.targetModule=n}function I(e){e.itemData=[S(e)],ee(e.itemData[0])?ae(e,ki,e.path):$(e,e.itemData[0])}function D(e){ae(e,qi,e.path)}function S(e){return t.getValue(e.path,e.feParent)}function C(e){g("copy",e)&&(e.fileAction="copy")}function j(e){g("cut",e)&&(e.isCut=!0,e.fileAction="move")}function x(e){if(!t.getValue("isFile",e))return Kt;var i=t.getValue("type",e);-1!==(i=i.toLowerCase()).indexOf(".")&&(i=i.split(".").join(""));return-1!==["bmp","dib","jpg","jpeg","jpe","jfif","gif","tif","tiff","png","ico"].indexOf(i)?Wt:-1!==["mp3","wav","aac","ogg","wma","aif","fla","m4a"].indexOf(i)?Gt:-1!==["webm","mkv","flv","vob","ogv","ogg","avi","wmv","mp4","3gp"].indexOf(i)?Yt:-1!==["css","exe","html","js","msi","pdf","pptx","ppt","rar","zip","txt","docx","doc","xlsx","xls","xml","rtf","php"].indexOf(i)?"e-fe-"+i:"e-fe-unknown e-fe-"+i}function E(e,i){var n,s=e.ajaxSettings.getImageUrl?e.ajaxSettings.getImageUrl:e.ajaxSettings.url,a=t.getValue("name",i);n=""!==e.breadcrumbbarModule.searchObj.element.value?s+"?path="+t.getValue("filterPath",i).replace(/\\/g,"/")+a:s+"?path="+e.path+a;var r=t.getValue("id",i);return t.isNullOrUndefined(r)||(n=n+"&id="+r),n}function P(e,i){if(0===i.length)return i;var n=(new s.Query).sortBy(e.sortBy,e.sortOrder.toLowerCase(),!0).group("isFile"),a=new s.DataManager(i).executeLocal(n);return t.getValue("records",a)}function R(e,i){var n=t.getValue(e.path,e.feFiles),a=(new s.Query).where("name","equal",i);return new s.DataManager(n).executeLocal(a)[0]}function N(e,i,n){var s;if("Details"===e.view){s=t.select("."+Zt,i).offsetHeight}else s=i.offsetHeight;if(t.isNullOrUndefined(i.querySelector("."+Ft))){var a=t.createElement("div",{className:Ft}),r=t.createElement("div",{className:Xt}),o=t.createElement("div",{className:Vt}),l=t.createElement("div",{className:Bt});"Details"===e.view?i.querySelector("."+Zt).appendChild(a):i.appendChild(a),a.appendChild(r),a.appendChild(o),a.appendChild(l)}i.querySelector("."+Ft)&&(t.isNullOrUndefined(n.error)?""!==e.breadcrumbbarModule.searchObj.element.value?(i.querySelector("."+Vt).innerHTML=k(e,"Search-Empty"),i.querySelector("."+Bt).innerHTML=k(e,"Search-Key")):(i.querySelector("."+Vt).innerHTML=k(e,"Folder-Empty"),i.querySelector("."+Bt).innerHTML=k(e,"File-Upload")):(i.querySelector("."+Vt).innerHTML=k(e,"Access-Denied"),i.querySelector("."+Bt).innerHTML=k(e,"Access-Details")));var h=t.select("."+Ft,i);s=(s-h.offsetHeight)/2,h.style.marginTop=s+"px"}function M(e){return new s.DataManager(e).executeLocal((new s.Query).where(Ci,"equal",!1,!1))}function k(e,t){var i=e.localeObj.getConstant(t);return""===i?t:i}function L(e,i){var n=e.cssClass;return n=t.isNullOrUndefined(n)||""===n?i:n+" "+i}function A(e,t){-1!==t.item.id.indexOf("ascending")||-1!==t.item.id.indexOf("descending")?e.sortOrder=T(t.item.id):e.sortBy=T(t.item.id),"Details"===e.view&&(e.isMobile?ae(e,Yi,e.path):e.notify(cn,{module:"gridview"})),"LargeIcons"===e.view&&ae(e,Yi,e.path),e.notify(Ji,{})}function T(e){var t=e.substring(e.lastIndexOf("_")+1),i=t;switch(t){case"date":i="_fm_modified";break;case"ascending":i="Ascending";break;case"descending":i="Descending"}return i}function _(e,i){var n=t.getValue("filterPath",i)+t.getValue("name",i)+"/";n=n.replace(/\\/g,"/"),e.notify(Gi,{selectedNode:e.pathId[e.pathId.length-1]}),e.originalPath=n,ae(e,e.path!==e.originalPath?xi:Ei,e.path)}function U(e){if(e.isDragDrop=!1,0!==e.selectedNodes.length&&e.enablePaste){var t=e.path+e.folderPath;F(e,e.actionRecords,t)||("move"===e.fileAction&&e.targetPath!==t||"copy"===e.fileAction?(e.notify(rn,{}),oe(e,e.targetPath,e.selectedNodes,t,e.fileAction,[],e.actionRecords)):(e.enablePaste=!1,e.notify(nn,{}),b(e)))}}function F(e,i,n){for(var s=!1,a=0;a<i.length;a++)if(!t.getValue("isFile",i[a])){var r=i[a].filterPath+i[a].name+"/";if(r=r.replace(/\\/g,"/"),-1!==n.indexOf(r)){we(e,"Error",{files:null,error:{code:"402",message:k(e,"Sub-Folder-Error"),fileExists:null}}),s=!0;break}}return s}function V(e){for(var t=e.path.split("/"),i="/",n=1;n<t.length-2;n++)i+=t[n]+"/";return i}function B(e){var i=t.getValue("filterPath",e.cwd);return""===i?"/":(i=i.replace(/\\/g,"/"))+t.getValue("name",e.cwd)+"/"}function H(e,t,i){"move"===t&&(e.isDragDrop?e.notify(mn,i):(e.enablePaste=!1,e.notify(nn,{}),e.notify(ln,i))),0===e.duplicateItems.length&&(e.pasteNodes=[]);for(var n=0;n<i.files.length;n++)e.pasteNodes.push(i.files[n].name),e.isDragDrop&&e.droppedObjects.push(i.files[n]);e.duplicateItems=[],e.duplicateRecords=[],e.isDragDrop&&!e.isPasteError?e.isDropEnd=!0:e.isDropEnd=!1,!e.isDragDrop||e.path===e.dragPath||e.path===e.dropPath||e.isSearchDrag?(e.isPathDrag=!1,ae(e,on,e.path)):q(e),e.trigger("success",{action:t,result:i})}function q(e){var i=t.getValue(e.dropPath,e.feParent);i&&(e.expandedId=t.getValue("_fm_id",i)),e.itemData=[e.dropData],e.isPathDrag?e.notify(Ri,e.itemData):ae(e,bn,e.dropPath)}function z(e){if(e.isSearchDrag=!1,""!==e.breadcrumbbarModule.searchObj.element.value&&(e.isSearchDrag=!0),"navigationpane"!==e.activeModule){e.dragNodes=[];for(var t=0;t<e.selectedItems.length;)e.dragNodes.push(e.selectedItems[t]),t++}var i=e.createElement("div",{className:"e-fe-icon "+x(e.dragData[0])}),n=e.createElement("div",{className:"e-fe-name",innerHTML:e.dragData[0].name}),s=e.createElement("div",{className:"e-fe-content"});s.appendChild(i),s.appendChild(n);var a=e.createElement("div",{className:Ht});if(a.appendChild(s),e.dragNodes.length>1){var r=e.createElement("span",{className:"e-fe-count",innerHTML:e.dragNodes.length.toString(10)});a.appendChild(r)}e.virtualDragElement=a,e.element.appendChild(e.virtualDragElement)}function K(e,i){var n=i;n.cancel=!1,null!=e.treeExpandTimer&&(window.clearTimeout(e.treeExpandTimer),e.treeExpandTimer=null),Y(e),e.element.classList.remove("e-fe-drop","e-no-drop"),b(e),e.uploadObj.dropArea=t.select("#"+e.element.id+gt,e.element);var s=t.select("."+Ht,e.element);s&&t.detach(s),w(e,i.target),e.notify(gn,i),b(e,"hover"),n.fileDetails=e.dragData,e.trigger("fileDragStop",n,function(i){i.cancel||t.isNullOrUndefined(e.targetModule)||""===e.targetModule||function(e){e.isDragDrop=!0,0!==e.dragData.length&&(e.dragPath=e.dragPath.replace(/\\/g,"/"),e.dropPath=e.dropPath.replace(/\\/g,"/"),F(e,e.dragData,e.dropPath)||e.dragPath===e.dropPath||(e.itemData=[e.dropData],oe(e,e.dragPath,e.dragNodes,e.dropPath,"move",[],e.dragData),e.notify(rn,{})))}(e)})}function W(e,i){var n=i;if(n.cancel=!1,n.fileDetails=e.dragData,e.droppedObjects=[],(!e.allowDragAndDrop||"navigationpane"===e.activeModule&&t.closest(i.element,"li").getAttribute("data-uid")===e.pathId[0])&&(n.cancel=!0),"navigationpane"===e.activeModule&&-1!==e.pathId.indexOf(t.closest(i.element,"li").getAttribute("data-uid"))?e.isPathDrag=!0:e.isPathDrag=!1,b(e),n.cancel)G(e);else if(!n.cancel){for(var s=0;s<e.activeElements.length;)m(e.activeElements[s]),s++;e.trigger("fileDragStart",n,function(t){t.cancel?G(e):e.uploadObj.dropArea=null})}}function G(e){b(e);var i=t.select("."+Ht,e.element);i&&t.detach(i)}function Y(e){J(e,qt),J(e,zt)}function J(e,t){for(var i=e.element.querySelectorAll("."+t),n=0;n<i.length;n++)i[n].classList.remove(t)}function X(e,i){var n=i;n.fileDetails=e.dragData;var s=!1;w(e,i.target),Y(e),null!=e.treeExpandTimer&&(window.clearTimeout(e.treeExpandTimer),e.treeExpandTimer=null),b(e,"hover");var a=null;"navigationpane"===e.targetModule?((a=t.closest(i.target,"li")).classList.add(kt,qt),s=!0,e.treeExpandTimer=window.setTimeout(function(){e.notify(yn,i)},800)):"detailsview"===e.targetModule?((a=t.closest(i.target,"tr"))&&a.querySelector("."+Kt)&&!a.classList.contains(Nt)?a.classList.add(qt):!a||a.querySelector("."+Kt)||a.classList.contains(Nt)||a.classList.add(zt),s=!0):"largeiconsview"===e.targetModule?((a=t.closest(i.target,"li"))&&a.querySelector("."+Kt)&&!a.classList.contains(Nt)&&a.classList.add(kt,qt),s=!0):"breadcrumbbar"===e.targetModule&&(s=!0),e.element.classList.remove("e-fe-drop","e-no-drop"),e.element.classList.add(s?"e-fe-drop":"e-no-drop"),e.trigger("fileDragging",n)}function Q(e){te(e.itemData[0])?we(e,"Rename"):$(e,e.itemData[0])}function $(e,i){we(e,"Error",{error:{code:"401",fileExists:null,message:'"'+function(e){var i=t.getValue("name",e);return t.getValue("filterPath",e).replace(/\\/g,"/")+i}(i)+'" is not accessible. Access is denied.'}})}function Z(e){return ee(e)?"e-fe-locked":"e-fe-locked e-fe-hidden"}function ee(e){var i=t.getValue("permission",e);return!(i&&!t.getValue("read",i))}function te(e){var i=t.getValue("permission",e);return!i||!(!t.getValue("read",i)||!t.getValue("edit",i))}function ie(e){var i=t.getValue("permission",e);return!i||!(!t.getValue("read",i)||!t.getValue("editContents",i))}function ne(e){var i=t.getValue("permission",e);return!i||!(!t.getValue("read",i)||!t.getValue("upload",i))}function se(e){var i=t.getValue("permission",e);return!i||!(!t.getValue("read",i)||!t.getValue("download",i))}function ae(e,t,i){de(e,{action:"read",path:i,showHiddenItems:e.showHiddenItems,data:e.itemData},ce,t)}function re(e,t,i){var n,s;if(""===e.breadcrumbbarModule.searchObj.element.value)n=e.currentItemText,s=i;else{var a=e.filterPath.replace(/\\/g,"/");n=a.replace(t,"")+e.currentItemText,s=a.replace(t,"")+i}de(e,{action:"rename",path:t,name:n,newName:s,data:e.itemData},ue,t)}function oe(e,t,i,n,s,a,r){de(e,{action:s,path:t,targetData:e.itemData[0],targetPath:n,names:i,renameFiles:a,data:r},fe,t,s,n)}function le(e,t,i,n){de(e,{action:n,path:i,names:t,data:e.itemData},ge,i)}function he(e,t,i,n){de(e,{action:n,path:i,names:t,data:e.itemData},me,i,n)}function de(e,i,n,s,a,r){var o={url:e.ajaxSettings.url,type:"POST",mode:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(i),onSuccess:null,onFailure:null,beforeSend:null},l={action:t.getValue("action",i),ajaxSettings:o,cancel:!1};e.trigger("beforeSend",l,function(o){if(!o.cancel){e.notify(Ui,{});new t.Ajax({url:t.getValue("url",o.ajaxSettings),type:t.getValue("type",o.ajaxSettings),mode:t.getValue("mode",o.ajaxSettings),dataType:t.getValue("dataType",o.ajaxSettings),contentType:t.getValue("contentType",o.ajaxSettings),data:t.getValue("data",o.ajaxSettings),beforeSend:t.getValue("beforeSend",o.ajaxSettings),onSuccess:function(l){if("string"==typeof l&&(l=JSON.parse(l)),e.notify(Fi,{action:"success"}),!t.isNullOrUndefined(l.files)){!function(e){for(var i=0;i<e.length;i++)t.setValue("_fm_created",new Date(t.getValue("dateCreated",e[i])),e[i]),t.setValue("_fm_modified",new Date(t.getValue("dateModified",e[i])),e[i])}(l.files);for(var h=0,d=l.files.length;h<d;h++){var c=l.files[h];t.setValue("_fm_iconClass",x(c),c)}}if("read"===t.getValue("action",i)){var p=t.getValue("path",i);!function(e,i){t.setValue("_fm_id",i,e.cwd);for(var n=M(e.files),s=0,a=n.length;s<a;s++)t.setValue("_fm_id",i+"_"+s,n[s])}(l,e.expandedId?e.expandedId:e.pathId[e.pathId.length-1]),t.setValue(p,l.files,e.feFiles),t.setValue(p,l.cwd,e.feParent)}n(e,l,s,a,r),"function"==typeof t.getValue("onSuccess",o.ajaxSettings)&&t.getValue("onSuccess",o.ajaxSettings)()},onFailure:function(){var i={files:null,error:{code:"404",message:"NetworkError: Failed to send on XMLHTTPRequest: Failed to load "+e.ajaxSettings.url,fileExists:null}};e.notify(Fi,{action:"failure"}),n(e,i,s,a,r),"function"==typeof t.getValue("onFailure",o.ajaxSettings)&&t.getValue("onFailure",o.ajaxSettings)()}}).send()}})}function ce(e,i,n){if(t.isNullOrUndefined(i.files))"401"===i.error.code&&(i.files=[],e.notify(n,i),e.notify(zi,{})),be(e,i,"read");else{e.notify(n,i),e.notify(zi,{});var s={action:"read",result:i};e.trigger("success",s)}if(e.isDragDrop&&e.isDropEnd){if(0!==e.droppedObjects.length){s={fileDetails:e.droppedObjects};e.trigger("fileDropped",s)}e.isDropEnd=e.isDragDrop=!1}}function pe(e,i){if(t.isNullOrUndefined(i.files))if("400"===i.error.code){var n=t.select("#newname",e.dialogObj.element),s=k(e,"Validation-NewFolder-Exists").replace("{0}",'"'+n.value+'"');n.parentElement.nextElementSibling.innerHTML=s}else e.dialogObj.hide(),be(e,i,"create");else{e.dialogObj.hide(),e.createdItem=i.files[0],e.breadcrumbbarModule.searchObj.value="";var a={action:"create",result:i};e.trigger("success",a),e.itemData=[S(e)],ae(e,Pi,e.path)}}function ue(e,i,n){if(t.isNullOrUndefined(i.files))if("400"===i.error.code){var s=t.select("#rename",e.dialogObj.element),a=k(e,"Validation-Rename-Exists").replace("{0}",'"'+e.currentItemText+'"');a=a.replace("{1}",'"'+s.value+'"'),s.parentElement.nextElementSibling.innerHTML=a}else e.dialogObj.hide(),be(e,i,"rename");else{e.dialogObj.hide();var r={action:"rename",result:i};if(e.trigger("success",r),e.renamedItem=i.files[0],"navigationpane"===e.activeModule){var o=V(e)+e.renameText+"/";e.setProperties({path:o},!0),e.itemData=i.files}else e.itemData=[S(e)];""!==e.breadcrumbbarModule.searchObj.value?ye(e,en,e.path,e.searchWord,e.showHiddenItems,!e.searchSettings.ignoreCase):ae(e,en,e.path)}}function fe(e,i,n,s){i.error&&i.error.fileExists?(e.fileLength=0,t.isNullOrUndefined(i.files)||(e.isPasteError=!0,H(e,s,i)),Ie(e,"DuplicateItems",i.error.fileExists),"404"===i.error.code&&we(e,"Error",i)):i.error||t.isNullOrUndefined(i.files)?i.error&&!t.isNullOrUndefined(i.files)?(e.isPasteError=!0,H(e,s,i),we(e,"Error",i)):be(e,i,s):(e.isPasteError=!1,H(e,s,i))}function ge(e,i,n){if(t.isNullOrUndefined(i.files))be(e,i,"delete");else{e.setProperties({path:n},!0),e.itemData=[S(e)],ae(e,Mi,e.path);var s={action:"delete",result:i};e.trigger("success",s)}}function me(e,i,n,s){if(t.isNullOrUndefined(i.details))be(e,i,"details");else{we(e,s,null,i.details);var a={action:"details",result:i};e.trigger("success",a)}}function be(e,t,i){we(e,"Error",t);var n={action:i,error:t.error};e.trigger("failure",n)}function ye(e,t,i,n,s,a){de(e,{action:"search",path:i,searchString:n,showHiddenItems:s,caseSensitive:a,data:e.itemData},ve,t)}function ve(e,i,n){if(t.isNullOrUndefined(i.files))be(e,i,"search");else{e.notify(n,i);var s={action:"search",result:i};e.trigger("success",s)}}function Oe(e,i,n){var s=e.ajaxSettings.downloadUrl?e.ajaxSettings.downloadUrl:e.ajaxSettings.url,a={action:"download",path:i,names:n,data:e.itemData},r=t.createElement("form",{id:e.element.id+"_downloadForm",attrs:{action:s,method:"post",name:"downloadForm",download:""}}),o=t.createElement("input",{id:e.element.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(a),type:"hidden"}});r.appendChild(o),e.element.appendChild(r),document.forms.namedItem("downloadForm").submit(),e.element.removeChild(r)}function we(e,i,s,a,r){var o=function(e,i,n,s,a){var r={header:"",content:"",buttons:[],open:null};switch(i=s&&!0===s.multipleFiles?"MultipleFileDetails":i){case"NewFolder":r.header=k(e,"Header-NewFolder"),r.content='<input type="text" value="New folder" id="newname"><div class="e-fe-error"></div>',r.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Create")},click:function(t){"keydown"!==t.type&&je(e)}}],r.open=function(e){var i=t.select("#newname",e.dialogObj.element);i.parentElement.classList.contains("e-control-wrapper")||Ce(i,k(e,"Content-NewFolder"));i.parentElement.nextElementSibling.innerHTML="",i.oninput=function(){Ee(e,i)},i.onkeyup=function(t){var i=Ne(t);13===i&&je(e)},function(e){var i=t.select("#newname",e.dialogObj.element);i.focus(),i.value="";var n=i.value.length;i.setSelectionRange(0,n)}(e)}.bind(this,e);break;case"Delete":e.selectedItems.length>1?(r.content=("<div>"+k(e,"Content-Multiple-Delete")+"</div>").replace("{0}",e.selectedItems.length.toString()),r.header=k(e,"Header-Multiple-Delete")):(r.content="<div>"+k(e,"Content-Delete")+"</div>",r.header=k(e,"Header-Delete")),r.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Yes")},click:function(t){!function(e){e.dialogObj.hide(),e.notify(Ni,{})}(e)}},{buttonModel:{content:k(e,"Button-No")},click:function(){e.dialogObj.hide()}}];break;case"Rename":r.header=k(e,"Header-Rename"),r.content='<input type="text" class="e-input" id="rename"><div class="e-fe-error"></div>',r.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Save")},click:function(t){"keydown"!==t.type&&xe(e)}}],r.open=function(e){var i=t.select("#rename",e.dialogObj.element);i.parentElement.classList.contains("e-control-wrapper")||Ce(i,k(e,"Content-Rename"));i.parentElement.nextElementSibling.innerHTML="",i.oninput=function(){Ee(e,i)},i.onkeyup=function(t){var i=Ne(t);13===i&&xe(e)},function(e,t){t.focus(),t.value=e.currentItemText,e.isFile&&e.isFile&&-1!==t.value.indexOf(".")?t.setSelectionRange(0,t.value.lastIndexOf(".")):t.setSelectionRange(0,t.value.length)}(e,i)}.bind(this,e);break;case"details":var o=new t.Internationalization,l=o.formatDate(new Date(s.modified),{format:"MMMM dd, yyyy HH:mm:ss"}),h="";t.isNullOrUndefined(s.permission)||(h="<tr><td>"+k(e,"Permission")+'</td><td class="'+Si+'" >'+function(e){for(var i="",n=Object.keys(e),s=0;s<n.length;s++)i+=(0===s?"":", ")+n[s]+": "+t.getValue(n[s],e);return i}(s.permission)+"</td></tr>"),r.header=s.name,r.content="<table><tr><td>"+k(e,"Type")+'</td><td class="'+Si+'" title="'+(s.isFile?"File":"Folder")+'">'+(s.isFile?"File":"Folder")+"</td></tr><tr><td>"+k(e,"Size")+'</td><td><span class="'+Si+'" title ="'+s.size+'">'+s.size+"</span></td></tr><tr><td>"+k(e,"Location")+'</td><td class="'+Si+'" title="'+s.location+'">'+s.location+"</td></tr><tr><td>"+k(e,"Modified")+'</td><td class="'+Si+'" >'+l+"</td></tr>"+h+"</table>",r.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Ok")},click:function(t){e.dialogObj.hide()}}];break;case"MultipleFileDetails":var d=s.name.split(", ").map(function(e){var t=e.indexOf(".")+1;return 0===t?"Folder":e.substr(t)}),c=d.every(function(e,t,i){return e===i[0]})?"Folder"===d[0]?"Folder":d[0].toLocaleUpperCase()+" Type":"Multiple Types",p=s.location;r.header=s.name,r.content="<table><tr><td>"+k(e,"Type")+':</td><td class="'+Si+'">'+c+"</td></tr><tr><td>"+k(e,"Size")+":</td><td>"+s.size+'<span class="'+Si+'" title ="'+s.size+'"></span></td></tr><tr><td>'+k(e,"Location")+':</td><td class="'+Si+'" title="'+p+'">'+p+"</td></tr></table>",r.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}];break;case"Error":var u=n;"401"===u.error.code?r.header=k(e,"Access-Denied"):r.header=k(e,"Error"),r.content='<div class="'+vi+'">'+u.error.message+"</div>",r.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Ok")},click:function(t){e.dialogObj.hide()}}]}return r}(e,i,s,a);t.isNullOrUndefined(e.dialogObj)?(e.dialogObj=new n.Dialog({beforeOpen:function(e){for(var i=t.selectAll(".e-btn",e.dialogObj.element),n=function(e){i[e].onkeydown=function(e){13===e.keyCode&&e.preventDefault()},i[e].onkeyup=function(t){13===t.keyCode&&i[e].click()}},s=0;s<i.length;s++)n(s)}.bind(this,e),header:o.header,content:o.content,buttons:o.buttons,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,target:"#"+e.element.id,width:"350px",open:o.open,close:o.close,enableRtl:e.enableRtl,locale:e.locale}),e.dialogObj.appendTo("#"+e.element.id+dt)):function(e,t){e.dialogObj.header=t.header,e.dialogObj.content=t.content,e.dialogObj.buttons=t.buttons,e.dialogObj.enableRtl=e.enableRtl,e.dialogObj.open=t.open,e.dialogObj.close=t.close,e.dialogObj.dataBind(),e.dialogObj.show()}(e,o)}function Ie(e,i,s,a){var o=function(e,i,n,s){var a={header:"",content:"",buttons:[],open:null,close:null};switch(i){case"Extension":a.header=k(e,"Header-Rename-Confirmation"),a.content="<div>"+k(e,"Content-Rename-Confirmation")+"</div>",a.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Yes")},click:function(){e.extDialogObj.hide(),re(e,s,e.renameText)}},{buttonModel:{content:k(e,"Button-No")},click:function(){e.extDialogObj.hide(),e.dialogObj.hide()}}];break;case"DuplicateItems":e.replaceItems=n;var o=e.replaceItems[e.fileLength],l=o.lastIndexOf("/");o=-1===l?o:o.substring(l),a.header=k(e,"Header-Duplicate");var h="<div>"+k(e,"Content-Duplicate")+"</div>";a.content=h.replace("{0}",o),a.close=function(){if(!e.isDropEnd&&0===e.duplicateItems.length){var t={fileDetails:e.droppedObjects};e.trigger("fileDropped",t),e.isDropEnd=e.isDragDrop=!1}},a.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Yes")},click:function(){if(e.duplicateItems.push(e.replaceItems[e.fileLength]),e.duplicateRecords.push(function(e,i){for(var n=null,s=e.isDragDrop?e.dragData:e.actionRecords,a=0;a<s.length;a++)if(t.getValue("name",s[a])===i){n=s[a];break}return n}(e,e.replaceItems[e.fileLength])),e.fileLength++,n[e.fileLength]){var i=e.replaceItems[e.fileLength],s=i.lastIndexOf("/");i=-1===s?i:i.substring(s),e.extDialogObj.content=h.replace("{0}",i),e.extDialogObj.show()}else{e.extDialogObj.hide();var a=e.isDragDrop?e.dragPath:e.targetPath,r=e.isDragDrop?e.dropPath:e.path+e.folderPath,o=e.isDragDrop?"move":e.fileAction;oe(e,a,e.duplicateItems,r,o,e.duplicateItems,e.duplicateRecords)}}},{buttonModel:{content:k(e,"Button-No")},click:function(){if(e.fileLength++,n[e.fileLength]){var t=e.replaceItems[e.fileLength],i=t.lastIndexOf("/");t=-1===i?t:t.substring(i),e.extDialogObj.content=h.replace("{0}",t),e.extDialogObj.show()}else if(e.extDialogObj.hide(),0!==e.duplicateItems.length){var s=e.isDragDrop?"move":e.fileAction,a=e.isDragDrop?e.dragPath:e.targetPath,r=e.isDragDrop?e.dropPath:e.path+e.folderPath;oe(e,a,e.duplicateItems,r,s,e.duplicateItems,e.duplicateRecords)}}}];break;case"UploadRetry":a.header=k(e,"Header-Retry"),a.content=e.retryFiles[0].name+'<div class="e-fe-retrycontent">'+k(e,"Content-Retry")+"</div>",a.open=function(e,i){e.isRetryOpened=!0;var n=t.getValue("element",i),s=t.select(".e-dlg-content",n),a=e.createElement("div",{className:"e-dlg-checkbox"}),o=e.createElement("input",{id:e.element.id+"_applyall"});a.appendChild(o),s.appendChild(a);new r.CheckBox({label:k(e,"ApplyAll-Label"),change:function(t){e.isApplySame=t.checked}}).appendTo("#"+e.element.id+"_applyall")}.bind(this,e),a.close=function(){e.isRetryOpened=!1,Se(e)},a.buttons=[{buttonModel:{isPrimary:!0,content:k(e,"Button-Keep-Both")},click:function(){De(e,!0)}},{buttonModel:{isPrimary:!0,content:k(e,"Button-Replace")},click:function(){De(e,!1)}},{buttonModel:{isPrimary:!0,content:k(e,"Button-Skip")},click:function(){e.isApplySame?(e.retryFiles=[],Se(e)):(e.retryFiles.splice(0,1),0!==e.retryFiles.length?Ie(e,"UploadRetry"):Se(e))}}]}return a}(e,i,s,a);e.isApplySame=!1,t.isNullOrUndefined(e.extDialogObj)?(e.extDialogObj=new n.Dialog({content:o.content,header:o.header,closeOnEscape:!0,animationSettings:{effect:"None"},target:"#"+e.element.id,enableRtl:e.enableRtl,showCloseIcon:!0,isModal:!0,width:350,buttons:o.buttons,open:o.open,close:o.close,locale:e.locale}),e.extDialogObj.appendTo("#"+e.element.id+pt)):(e.extDialogObj.header=o.header,e.extDialogObj.close=o.close,e.extDialogObj.open=o.open,e.extDialogObj.close=o.close,e.extDialogObj.content=o.content,e.extDialogObj.buttons=o.buttons,e.extDialogObj.enableRtl=e.enableRtl,e.extDialogObj.locale=e.locale,e.extDialogObj.dataBind(),e.extDialogObj.show())}function De(e,t){e.isApplySame?(t?function(e){for(;0!==e.retryFiles.length;)e.retryArgs.push({action:"KeepBoth",file:e.retryFiles[0]}),e.uploadObj.retry(e.retryFiles[0]),e.retryFiles.splice(0,1)}(e):function(e){for(;0!==e.retryFiles.length;)e.retryArgs.push({action:"replace",file:e.retryFiles[0]}),e.uploadObj.retry(e.retryFiles[0]),e.retryFiles.splice(0,1)}(e),Se(e)):(e.retryArgs.push({action:t?"keepboth":"replace",file:e.retryFiles[0]}),e.uploadObj.retry(e.retryFiles[0]),e.retryFiles.splice(0,1),0!==e.retryFiles.length?Ie(e,"UploadRetry"):Se(e))}function Se(e){var i=!0;e.isRetryOpened?e.isRetryOpened=!1:i=!1;var n=t.select(".e-dlg-checkbox",e.extDialogObj.element);n&&t.remove(n),i?e.extDialogObj.hide():e.retryFiles=[]}function Ce(e,t){a.Input.createInput({element:e,properties:{placeholder:t}})}function je(e){var i=t.select("#newname",e.dialogObj.element);Pe(e,i),""===i.parentElement.nextElementSibling.innerHTML&&function(e,t){de(e,{action:"create",path:e.path,name:t,data:e.itemData},pe)}(e,i.value)}function xe(e){var i=t.select("#rename",e.dialogObj.element);if(Pe(e,i),""===i.parentElement.nextElementSibling.innerHTML){var n=i.value;if(e.renameText=i.value,e.currentItemText!==n){var s="navigationpane"===e.activeModule?V(e):e.path;if(e.isFile){e.currentItemText.substr(e.currentItemText.lastIndexOf("."))!==n.substr(n.lastIndexOf("."))?Ie(e,"Extension",null,s):re(e,s,n)}else e.renamedNodeId=t.getValue("_fm_id",e.itemData[0]),re(e,s,n)}else e.dialogObj.hide()}}function Ee(e,t){/[/\\|*?"<>:]/.test(t.value)?Re(e,t):""===t.value?t.parentElement.nextElementSibling.innerHTML=k(e,"Validation-Empty"):t.parentElement.nextElementSibling.innerHTML=""}function Pe(e,t){Ee(e,t);var i=t.value.length-1;""===t.value||t.value.lastIndexOf(".")!==i&&t.value.lastIndexOf(" ")!==i||Re(e,t)}function Re(e,t){var i=k(e,"Validation-Invalid").replace("{0}",'"'+t.value+'"');t.parentElement.nextElementSibling.innerHTML=i}function Ne(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function Me(e,i,s){var a=t.createElement("div",{className:"e-image-wrap"}),r=t.createElement("img",{className:"e-image",attrs:{src:s,alt:i}});a.appendChild(r),t.isNullOrUndefined(e.viewerObj)?(e.viewerObj=new n.Dialog({header:i,content:a,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,width:"350px",height:"350px",target:"#"+e.element.id,locale:e.locale,enableResize:!0,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:e.enableRtl,open:function(e){setTimeout(function(){e.viewerObj&&e.viewerObj.element.focus()}),ke(e)}.bind(this,e),resizing:ke.bind(this,e),resizeStop:ke.bind(this,e)}),e.viewerObj.appendTo("#"+e.element.id+ct)):(e.viewerObj.refresh(),e.viewerObj.header=i,e.viewerObj.content=a,e.viewerObj.enableRtl=e.enableRtl,e.viewerObj.dataBind(),e.viewerObj.show())}function ke(e){var i=t.select(".e-dlg-content",e.viewerObj.element),n=t.select(".e-image-wrap",e.viewerObj.element),s=window.getComputedStyle(i,null),a=s?2*parseFloat(s.paddingRight):36,r=s?2*parseFloat(s.paddingBottom):20;n.style.width=i.offsetWidth-a+"px",n.style.height=i.offsetHeight-r+"px"}var Le=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ae=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},Te=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Le(i,e),Ae([t.Property(null)],i.prototype,"downloadUrl",void 0),Ae([t.Property(null)],i.prototype,"getImageUrl",void 0),Ae([t.Property(null)],i.prototype,"uploadUrl",void 0),Ae([t.Property(null)],i.prototype,"url",void 0),i}(t.ChildProperty),_e=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ue=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},Fe=["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"],Ve=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return _e(i,e),Ue([t.Property(Fe)],i.prototype,"items",void 0),Ue([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),Be=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),He=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},qe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Be(i,e),He([t.Property(!0)],i.prototype,"allowSearchOnTyping",void 0),He([t.Property("contains")],i.prototype,"filterType",void 0),He([t.Property(!0)],i.prototype,"ignoreCase",void 0),i}(t.ChildProperty),ze=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ke=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},We=[{field:"name",headerText:"Name",minWidth:120,width:"auto",template:'<span class="e-fe-text">${name}</span>',customAttributes:{class:"e-fe-grid-name"}},{field:"_fm_modified",headerText:"DateModified",format:{type:"date",format:"MMMM dd, yyyy HH:mm"},minWidth:50,width:"190"},{field:"size",headerText:"Size",minWidth:50,width:"110",template:'<span class="e-fe-size">${size}</span>'}],Ge=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ze(i,e),Ke([t.Property(!0)],i.prototype,"columnResizing",void 0),Ke([t.Property(We)],i.prototype,"columns",void 0),i}(t.ChildProperty),Ye=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Je=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},Xe=["Open","|","Cut","Copy","|","Delete","Download","Rename","|","Details"],Qe=["Open","|","Cut","Copy","Paste","|","Delete","Rename","Download","|","Details"],$e=["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"],Ze=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ye(i,e),Je([t.Property(Xe)],i.prototype,"file",void 0),Je([t.Property(Qe)],i.prototype,"folder",void 0),Je([t.Property($e)],i.prototype,"layout",void 0),Je([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),et=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tt=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},it=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("650px")],i.prototype,"maxWidth",void 0),tt([t.Property("240px")],i.prototype,"minWidth",void 0),tt([t.Property(!0)],i.prototype,"visible",void 0),i}(t.ChildProperty),nt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),st=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},at=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return nt(i,e),st([t.Property("")],i.prototype,"allowedExtensions",void 0),st([t.Property(!0)],i.prototype,"autoUpload",void 0),st([t.Property(0)],i.prototype,"minFileSize",void 0),st([t.Property(3e7)],i.prototype,"maxFileSize",void 0),i}(t.ChildProperty),rt="_toolbar",ot="_tree",lt="_grid",ht="_largeicons",dt="_dialog",ct="_img_dialog",pt="_extn_dialog",ut="_upload_dialog",ft="_contextmenu",gt="_content",mt="_breadcrumbbar",bt="_upload",yt="e-fe-cb-select",vt="e-fe-popup",Ot="e-fe-mobile",wt="e-fe-m-select",It="e-fe-m-filter",Dt="e-layout-content",St="e-large-icons",Ct="e-toolbar-item",jt="e-list-item",xt="e-list-text",Et="e-list-parent",Pt="e-icons e-fe-tick",Rt="e-icons e-fe-dot",Nt="e-blur",Mt="e-active",kt="e-hover",Lt="e-focus",At="e-focused",Tt="e-check",_t="e-checkbox-wrapper",Ut="e-row",Ft="e-empty",Vt="e-empty-content",Bt="e-empty-inner-content",Ht="e-fe-clone",qt="e-fe-drop-folder",zt="e-fe-drop-file",Kt="e-fe-folder",Wt="e-fe-image",Gt="e-fe-music",Yt="e-fe-video",Jt="e-large-icon",Xt="e-empty-icon e-fe-folder",Qt="e-treeview",$t="e-menu-icon",Zt="e-content",ei="e-list-parent",ti="e-icons e-fe-open",ii="e-icons e-fe-upload",ni="e-icons e-fe-cut",si="e-icons e-fe-copy",ai="e-icons e-fe-paste",ri="e-icons e-fe-delete",oi="e-icons e-fe-rename",li="e-icons e-fe-newfolder",hi="e-icons e-fe-details",di="e-icons e-fe-sort",ci="e-icons e-fe-refresh",pi="e-icons e-fe-select",ui="e-icons e-fe-download",fi="e-icons e-fe-grid",gi="e-icons e-fe-large",mi="e-icons e-fe-breadcrumb",bi="e-icons e-fe-clear",yi="e-icons",vi="e-fe-errorcontent",Oi="e-display-none",wi="e-fullrow",Ii="e-split-bar",Di="e-headercheck",Si="e-fe-value",Ci="isFile",ji="model-changed",xi="initial-end",Ei="finalize-end",Pi="create-end",Ri="path-drag",Ni="delete-init",Mi="delete-end",ki="refresh-end",Li="resize-end",Ai="splitter-resize",Ti="path-changed",_i="destroy",Ui="before-request",Fi="after-request",Vi="layout-refresh",Bi="search",Hi="open-init",qi="open-end",zi="selection-changed",Ki="select-all-init",Wi="clear-all-init",Gi="clear-path-init",Yi="layout-change",Ji="sort-by-change",Xi="node-expand",Qi="details-init",$i="menu-item-data",Zi="rename-init",en="rename-end",tn="show-paste",nn="hide-paste",sn="selected-data",an="cut-copy-init",rn="paste-init",on="paste-end",ln="cut-end",hn="hide-layout",dn="update-tree-selection",cn="sort-column",pn="path-column",un="search-change",fn="download-init",gn="drop-init",mn="drag-end",bn="drop-path",yn="dragging",vn=function(){function e(e){this.uploadOperation=!1,this.count=0,this.isRendered=!0,this.tapCount=0,this.isPasteOperation=!1,this.parent=e,this.element=t.select("#"+this.parent.element.id+ht,this.parent.element),t.addClass([this.element],St),this.addEventListener(),this.keyConfigs={end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace",ctrlD:"ctrl+d"}}return e.prototype.render=function(e){if(this.parent.visitedItem=null,this.startItem=null,"LargeIcons"===this.parent.view){this.resetMultiSelect(),this.element.setAttribute("tabindex","0"),this.listObj&&(this.unWireEvents(),this.removeEventListener()),this.parent.notify(hn,{});var i=t.select("#"+this.parent.element.id+ht,this.parent.element),n=t.select("ul",i);if(n&&t.remove(n),this.listObj={ariaAttributes:{itemRole:"option",listRole:"listbox",itemText:"",groupItemRole:"group",wrapperRole:""},showIcon:!0,fields:{text:"name",iconCss:"_fm_icon",imageUrl:"_fm_imageUrl",htmlAttributes:"_fm_htmlAttr"},sortOrder:this.parent.sortOrder,itemCreated:this.onItemCreated.bind(this)},this.items=[],this.items=this.renderList(e),this.items=P(this.parent,this.items),this.listElements=o.ListBase.createListFromJson(t.createElement,this.items,this.listObj),this.itemList=Array.prototype.slice.call(t.selectAll("."+jt,this.listElements)),this.element.appendChild(this.listElements),this.preventImgDrag(),this.createDragObj(),i.classList.remove(Oi),0===this.itemList.length){var s=this.element.querySelector("."+Et);this.element.removeChild(s),N(this.parent,this.element,e)}else 0!==this.itemList.length&&this.element.querySelector("."+Ft)&&this.element.removeChild(this.element.querySelector("."+Ft));!0===this.isPasteOperation&&(this.selectItems(this.parent.pasteNodes),this.isPasteOperation=!1),!0===this.uploadOperation&&(this.selectItems(this.parent.uploadItem),this.parent.setProperties({selectedItems:[]},!0),this.count++,this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[]));var a=this.element.querySelectorAll("."+Mt);0!==a.length&&(this.parent.activeModule="largeiconsview");for(var r=0;r<a.length;r++)a[r].setAttribute("aria-selected","true");this.adjustHeight(),this.element.style.maxHeight="100%",this.getItemCount(),this.addEventListener(),this.wireEvents(),this.isRendered=!0,this.parent.selectedItems.length&&this.checkItem()}},e.prototype.preventImgDrag=function(){for(var e=0;e<this.itemList.length;)this.itemList[e].querySelector("img")&&(this.itemList[e].ondragstart=function(){return!1}),e++},e.prototype.createDragObj=function(){!this.parent.isMobile&&this.listObj&&(this.parent.allowDragAndDrop?(this.dragObj&&this.dragObj.destroy(),this.dragObj=new t.Draggable(this.listElements,{enableTailMode:!0,enableAutoScroll:!0,dragTarget:"."+Jt,helper:this.dragHelper.bind(this),cursorAt:this.parent.dragCursorPosition,dragArea:this.parent.element,dragStop:K.bind(this,this.parent),drag:X.bind(this,this.parent),clone:!0,dragStart:W.bind(this,this.parent)})):this.dragObj&&!this.parent.allowDragAndDrop&&this.dragObj.destroy())},e.prototype.dragHelper=function(e){var i=e.sender.target,n=t.closest(i,".e-list-item");if(!n)return null;n&&!n.classList.contains("e-active")&&this.setFocus(n);var s=this.element.querySelectorAll("."+Mt);this.parent.activeElements=[],this.parent.dragData=[];for(var a=0;a<s.length;a++)this.parent.dragData.push(this.getItemObject(s[a])),this.parent.activeElements.push(s[a]);return y(this.parent,n),this.parent.dragPath=this.parent.path,z(this.parent),this.parent.virtualDragElement},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName()){var i=t.closest(e.target,".e-list-item");if(i){var n=this.getItemObject(i);this.parent.dropPath=n.isFile?this.parent.path:n.filterPath.replace(/\\/g,"/")+n.name+"/",this.parent.dropData=n.isFile?n:this.getItemObject(i)}else this.parent.dropPath=this.parent.path,this.parent.dropData=t.getValue(this.parent.dropPath,this.parent.feParent)}},e.prototype.getModuleName=function(){return"largeiconsview"},e.prototype.adjustHeight=function(){var e=t.select("#"+this.parent.element.id+gt,this.parent.element),i=t.select("#"+this.parent.element.id+mt,this.parent.element);this.element.style.height=e.offsetHeight-i.offsetHeight+"px"},e.prototype.onItemCreated=function(e){if(e.item.removeAttribute("aria-level"),!this.parent.showFileExtension&&t.getValue("isFile",e.curData)){var i=e.item.querySelector("."+xt),n=t.getValue("name",e.curData),s=t.getValue("type",e.curData);i.innerHTML=n.substr(0,n.length-s.length)}this.renderCheckbox(e);var a={element:e.item,fileDetails:e.curData,module:"LargeIconsView"};this.parent.trigger("fileLoad",a)},e.prototype.renderCheckbox=function(e){if(this.parent.allowMultiSelection){var i;(i=r.createCheckBox(t.createElement,!1,{checked:!1,cssClass:"e-small"})).setAttribute("role","checkbox"),i.setAttribute("aria-checked","false"),e.item.firstElementChild.insertBefore(i,e.item.firstElementChild.childNodes[0])}},e.prototype.onLayoutChange=function(e){if("LargeIcons"===this.parent.view){if(this.destroy(),this.render(e),"layout-change"===t.getValue("name",e)&&"move"===this.parent.fileAction&&this.parent.isCut&&this.parent.selectedNodes&&0!==this.parent.selectedNodes.length)for(var i=this.getIndexes(this.parent.selectedNodes),n=0;n<i.length;)m(this.itemList[i[n]]),n++;0!==this.element.querySelectorAll("."+Mt).length&&this.element.focus(),this.checkItem()}else this.element.setAttribute("tabindex","-1")},e.prototype.checkItem=function(){var e=this.element.querySelectorAll("."+Mt);if(e)for(var t=0;t<e.length;)this.checkState(e[t],!0),t++},e.prototype.renderList=function(e){for(var i=0,n=JSON.parse(JSON.stringify(e.files));i<n.length;){var s=x(n[i]),a=t.getValue("name",n[i]),r=this.parent.selectedItems&&-1!==this.parent.selectedItems.indexOf(this.getDataName(e.files[i]))?Jt+" e-active":Jt;if(te(n[i])||(r+=" "+Z(n[i])),s===Wt&&this.parent.showThumbnail&&ee(n[i])){var o=E(this.parent,n[i]);t.setValue("_fm_imageUrl",o,n[i]),t.setValue("_fm_imageAttr",{alt:a},n[i])}else t.setValue("_fm_icon",s,n[i]);t.setValue("_fm_htmlAttr",{class:r,title:a},n[i]),i++}return n},e.prototype.onFinalizeEnd=function(e){this.render(e),this.parent.notify(un,e)},e.prototype.onCreateEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.selectItems([t.getValue("name",this.parent.createdItem)]),this.parent.createdItem=null,this.parent.largeiconsviewModule.element.focus())},e.prototype.onSelectedData=function(){"largeiconsview"===this.parent.activeModule&&this.updateSelectedData()},e.prototype.onDeleteInit=function(){"largeiconsview"===this.parent.activeModule&&le(this.parent,this.parent.selectedItems,this.parent.path,"delete")},e.prototype.onDeleteEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.parent.setProperties({selectedItems:[]},!0),this.clearSelect())},e.prototype.onRefreshEnd=function(e){"LargeIcons"===this.parent.view&&this.onLayoutChange(e)},e.prototype.onRenameInit=function(){"largeiconsview"===this.parent.activeModule&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onRenameEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.parent.setProperties({selectedItems:[]},!0),this.addSelection(this.parent.renamedItem),this.parent.renamedItem=null)},e.prototype.onPathChanged=function(e){this.parent.isCut=!1,""===this.parent.breadcrumbbarModule.searchObj.element.value&&(this.parent.searchedItems=[]),"LargeIcons"===this.parent.view&&(b(this.parent),this.parent.setProperties({selectedItems:[]},!0),this.onLayoutChange(e),this.parent.notify(un,e))},e.prototype.onOpenInit=function(e){"largeiconsview"===this.parent.activeModule&&this.doOpenAction(e.target)},e.prototype.onHideLayout=function(){"LargeIcons"!==this.parent.view&&this.element&&this.element.classList.add(Oi)},e.prototype.onSelectAllInit=function(){if("LargeIcons"===this.parent.view){this.startItem=this.getFirstItem();var e=this.getLastItem();this.doSelection(e,{ctrlKey:!0,shiftKey:!0})}},e.prototype.onClearAllInit=function(){"LargeIcons"===this.parent.view&&this.clearSelection()},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(){this.isRendered=!0},e.prototype.onSearch=function(e){"LargeIcons"===this.parent.view&&(this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(zi,{}),this.parent.searchedItems=e.files,this.onLayoutChange(e))},e.prototype.onLayoutRefresh=function(){"LargeIcons"===this.parent.view&&this.adjustHeight()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ei,this.onFinalizeEnd),this.parent.off(Pi,this.onCreateEnd),this.parent.off(sn,this.onSelectedData),this.parent.off(Ni,this.onDeleteInit),this.parent.off(Mi,this.onDeleteEnd),this.parent.off(ki,this.onRefreshEnd),this.parent.off(Ti,this.onPathChanged),this.parent.off(Yi,this.onLayoutChange),this.parent.off(Bi,this.onSearch),this.parent.off(Hi,this.onOpenInit),this.parent.off(qi,this.onPathChanged),this.parent.off(ji,this.onPropertyChanged),this.parent.off(Zi,this.onRenameInit),this.parent.off(en,this.onRenameEnd),this.parent.off(hn,this.onHideLayout),this.parent.off(Ki,this.onSelectAllInit),this.parent.off(Wi,this.onClearAllInit),this.parent.off($i,this.onMenuItemData),this.parent.off(Ui,this.onBeforeRequest),this.parent.off(Fi,this.onAfterRequest),this.parent.off(Ai,this.resizeHandler),this.parent.off(Li,this.resizeHandler),this.parent.off(rn,this.onpasteInit),this.parent.off(on,this.onpasteEnd),this.parent.off(an,this.oncutCopyInit),this.parent.off(gn,this.onDropInit),this.parent.off(Qi,this.onDetailsInit),this.parent.off(Vi,this.onLayoutRefresh))},e.prototype.addEventListener=function(){this.parent.on(Ei,this.onFinalizeEnd,this),this.parent.on(Pi,this.onCreateEnd,this),this.parent.on(ki,this.onRefreshEnd,this),this.parent.on(sn,this.onSelectedData,this),this.parent.on(Ti,this.onPathChanged,this),this.parent.on(Ni,this.onDeleteInit,this),this.parent.on(rn,this.onpasteInit,this),this.parent.on(Mi,this.onDeleteEnd,this),this.parent.on(Yi,this.onLayoutChange,this),this.parent.on(Bi,this.onSearch,this),this.parent.on(Hi,this.onOpenInit,this),this.parent.on(Zi,this.onRenameInit,this),this.parent.on(en,this.onRenameEnd,this),this.parent.on(qi,this.onPathChanged,this),this.parent.on(ji,this.onPropertyChanged,this),this.parent.on(hn,this.onHideLayout,this),this.parent.on(Ki,this.onSelectAllInit,this),this.parent.on(Wi,this.onClearAllInit,this),this.parent.on($i,this.onMenuItemData,this),this.parent.on(Ui,this.onBeforeRequest,this),this.parent.on(Fi,this.onAfterRequest,this),this.parent.on(gn,this.onDropInit,this),this.parent.on(Qi,this.onDetailsInit,this),this.parent.on(Ai,this.resizeHandler,this),this.parent.on(Li,this.resizeHandler,this),this.parent.on(on,this.onpasteEnd,this),this.parent.on(an,this.oncutCopyInit,this),this.parent.on(Vi,this.onLayoutRefresh,this)},e.prototype.onMenuItemData=function(e){if(this.parent.activeModule===this.getModuleName()){var i=t.closest(e.target,"li");this.parent.itemData=[this.getItemObject(i)]}},e.prototype.onDetailsInit=function(){this.parent.activeModule===this.getModuleName()&&(0!==this.parent.selectedItems.length?this.updateSelectedData():this.parent.itemData=[t.getValue(this.parent.path,this.parent.feParent)])},e.prototype.onpasteInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.itemData=""===this.parent.folderPath?[S(this.parent)]:[this.getItemObject(t.select(".e-active",this.element))])},e.prototype.oncutCopyInit=function(){if(this.parent.activeModule===this.getModuleName()){var e=this.element.querySelectorAll("."+Mt);this.parent.activeRecords=[],this.parent.activeElements=[];for(var t=0;t<e.length;t++)this.parent.activeElements.push(e[t]),this.parent.activeRecords.push(this.getItemObject(e[t]))}},e.prototype.onpasteEnd=function(e){"LargeIcons"===this.parent.view&&(this.isPasteOperation=!0,this.parent.path===B(e)&&this.onPathChanged(e))},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++){switch(n[i]){case"allowDragAndDrop":this.createDragObj();break;case"height":this.adjustHeight();break;case"selectedItems":var s=t.isNullOrUndefined(this.parent.selectedItems)?[]:this.parent.selectedItems.slice(0);this.parent.setProperties({selectedItems:[]},!0),this.onClearAllInit(),s.length&&this.selectItems(s);break;case"showThumbnail":I(this.parent);break;case"showFileExtension":case"showHiddenItems":ae(this.parent,Ti,this.parent.path);break;case"allowMultiSelection":I(this.parent),this.parent.selectedItems.length>1&&!this.parent.allowMultiSelection&&(this.parent.selectedItems=[]);break;case"view":O(this.parent,"LargeIcons")}}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.listObj&&this.unWireEvents())},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),this.keyboardDownModule=new t.KeyboardEvents(this.element,{keyAction:this.keydownActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),t.EventHandler.add(this.element,"mouseover",this.onMouseOver,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),t.EventHandler.remove(this.element,"mouseover",this.onMouseOver),this.keyboardModule.destroy(),this.keyboardDownModule.destroy()},e.prototype.onMouseOver=function(e){var i=t.closest(e.target,".e-list-item");b(this.parent,"hover"),null!==i&&i.classList.add(kt)},e.prototype.wireClickEvent=function(e){if(e){var i=this;this.clickObj=new t.Touch(this.element,{tap:function(e){e.originalEvent.preventDefault(),i.parent.isDevice?(i.tapCount=e.tapCount,i.tapEvent=e,setTimeout(function(){i.tapCount>0&&i.doTapAction(i.tapEvent),i.tapCount=0},350)):2===e.tapCount&&3!==e.originalEvent.which?i.dblClickHandler(e):i.clickHandler(e)},tapHold:function(e){i.parent.isDevice&&(i.multiSelect=!!i.parent.allowMultiSelection,i.parent.allowMultiSelection&&t.addClass([i.parent.element],wt),i.clickHandler(e))}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.doTapAction=function(e){var i=e.originalEvent.target,n=t.closest(i,"."+jt);this.multiSelect||i.classList.contains(Et)||t.isNullOrUndefined(n)?this.clickHandler(e):(this.parent.isFile=!1,this.updateType(n),this.parent.isFile?2===e.tapCount?(this.clickHandler(e),this.dblClickHandler(e)):this.clickHandler(e):this.dblClickHandler(e))},e.prototype.clickHandler=function(e){var t=e.originalEvent.target;b(this.parent,"hover"),this.doSelection(t,e.originalEvent),this.parent.activeModule="largeiconsview"},e.prototype.doSelection=function(e,i){var n=t.closest(e,"."+jt),s=e.classList;this.parent.isFile=!1;var a="select";if(3!==i.which||t.isNullOrUndefined(n)||!n.classList.contains(Mt))if(t.isNullOrUndefined(n))this.clearSelection();else{if(this.parent.allowMultiSelection&&(this.multiSelect||!i||i.ctrlKey)||s.contains("e-frame")||(this.updateType(n),this.clearSelect()),this.parent.allowMultiSelection&&i.shiftKey){i&&i.ctrlKey||this.clearSelect(),this.startItem||(this.startItem=n);var r=this.itemList.indexOf(this.startItem),o=this.itemList.indexOf(n);if(r>o)for(var l=r;l>=o;l--)this.addActive(this.itemList[l]);else for(l=r;l<=o;l++)this.addActive(this.itemList[l]);this.addFocus(this.itemList[o])}else this.startItem=n,this.parent.allowMultiSelection&&n.classList.contains(Mt)?(this.removeActive(n),a="unselect"):this.addActive(n),this.addFocus(n);0===this.parent.selectedItems.length&&this.resetMultiSelect(),this.parent.notify(zi,{}),this.triggerSelect(a,n)}else this.updateType(n)},e.prototype.dblClickHandler=function(e){this.parent.activeModule="largeiconsview";var t=e.originalEvent.target;this.doOpenAction(t)},e.prototype.clearSelection=function(){this.clearSelect(),this.resetMultiSelect(),this.parent.notify(zi,{})},e.prototype.resetMultiSelect=function(){this.multiSelect=!1,t.removeClass([this.parent.element],wt)},e.prototype.doOpenAction=function(e){var i=this;if(!t.isNullOrUndefined(e)){var n=t.closest(e,"."+jt);if(this.parent.isFile=!1,!t.isNullOrUndefined(n)){this.updateType(n);var s=this.getItemObject(n);if(!ee(s))return void $(this.parent,s);var a={cancel:!1,fileDetails:s};this.parent.trigger("fileOpen",a,function(e){if(!e.cancel){var a=t.select("."+xt,n).textContent;if(i.parent.isFile){if(x(s)===Wt){var r=E(i.parent,s);Me(i.parent,t.getValue("name",s),r)}}else{if(""===i.parent.breadcrumbbarModule.searchObj.element.value){var o=i.parent.path+a+"/";i.parent.setProperties({path:o},!0),i.parent.pathId.push(t.getValue("_fm_id",s)),i.parent.itemData=[s],D(i.parent)}else _(i.parent,s);i.parent.setProperties({selectedItems:[]},!0)}}})}}},e.prototype.updateType=function(e){var i=t.select("."+Kt,e);this.parent.isFile=!!t.isNullOrUndefined(i)},e.prototype.keydownActionHandler=function(e){if(this.isRendered)switch(e.action){case"end":case"home":case"moveDown":case"moveLeft":case"moveRight":case"moveUp":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"ctrlRight":case"shiftRight":case"csRight":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"ctrlD":e.preventDefault()}},e.prototype.keyActionHandler=function(e){if(this.isRendered){var i=this.getFocusedItem(),n=this.getFirstItem(),s=this.getLastItem();switch(e.action){case"end":this.navigateItem(s);break;case"home":this.navigateItem(n);break;case"tab":t.isNullOrUndefined(i)?t.isNullOrUndefined(n)||this.addFocus(n):this.addFocus(i);break;case"moveDown":this.navigateDown(i,!0);break;case"moveLeft":this.navigateRight(i,!1);break;case"moveRight":this.navigateRight(i,!0);break;case"moveUp":this.navigateDown(i,!1);break;case"ctrlEnd":case"shiftEnd":case"csEnd":this.csEndKey(s,e);break;case"ctrlHome":case"shiftHome":case"csHome":this.csHomeKey(n,e);break;case"ctrlDown":case"shiftDown":case"csDown":this.csDownKey(i,e);break;case"ctrlLeft":case"shiftLeft":case"csLeft":this.csLeftKey(i,e);break;case"ctrlRight":case"shiftRight":case"csRight":this.csRightKey(i,e);break;case"ctrlUp":case"shiftUp":case"csUp":this.csUpKey(i,e);break;case"space":this.spaceKey(i);break;case"ctrlSpace":case"shiftSpace":case"csSpace":t.isNullOrUndefined(i)||this.doSelection(i,e);break;case"ctrlA":this.ctrlAKey(n,s);break;case"enter":this.doOpenAction(this.parent.visitedItem?this.parent.visitedItem:this.getVisitedItem());break;case"altEnter":this.parent.notify(Qi,{}),he(this.parent,this.parent.selectedItems,this.parent.path,"details");break;case"esc":f(this.parent);break;case"del":case"shiftdel":if(this.parent.selectedItems&&this.parent.selectedItems.length>0){this.updateSelectedData();for(var a=this.parent.itemData,r=0;r<a.length;r++)if(!te(a[r]))return void $(this.parent,a[r]);we(this.parent,"Delete")}break;case"ctrlC":C(this.parent);break;case"ctrlV":this.parent.folderPath="",U(this.parent);break;case"ctrlX":j(this.parent);break;case"f2":1===this.parent.selectedItems.length&&(this.updateRenameData(),Q(this.parent));break;case"ctrlD":0!==this.parent.selectedItems.length&&Oe(this.parent,this.parent.path,this.parent.selectedItems)}}},e.prototype.updateRenameData=function(){var e=t.select("."+jt+"."+Mt,this.element),i=this.getItemObject(e);this.parent.itemData=[i],this.parent.currentItemText=t.getValue("name",i),this.parent.isFile=t.getValue("isFile",i),this.parent.filterPath=t.getValue("filterPath",i)},e.prototype.getVisitedItem=function(){var e=this.parent.selectedItems[this.parent.selectedItems.length-1],t=this.getIndexes([e]);return this.itemList[t[0]]},e.prototype.getFocusedItem=function(){return t.select("."+jt+"."+Lt,this.element)},e.prototype.getActiveItem=function(){return t.select("."+jt+"."+Mt,this.element)},e.prototype.getFirstItem=function(){return this.itemList[0]},e.prototype.getLastItem=function(){return this.itemList[this.itemList.length-1]},e.prototype.navigateItem=function(e){this.setFocus(e)},e.prototype.navigateDown=function(e,t){var i=this.getNextItem(e,t,this.perRow);this.setFocus(i)},e.prototype.navigateRight=function(e,t){var i=this.getNextItem(e,t);this.setFocus(i)},e.prototype.getNextItem=function(e,i,n){if(t.isNullOrUndefined(e))return this.getFocusedItem()||this.getActiveItem()||this.getFirstItem();var s,a=this.itemList.indexOf(e);do{if(a=i?n?a+n:a+1:n?a-n:a-1,s=this.itemList[a],t.isNullOrUndefined(s))return e}while(!t.isVisible(s));return s},e.prototype.setFocus=function(e){t.isNullOrUndefined(e)||(this.startItem=e,this.clearSelect(),this.addActive(e),this.addFocus(e),this.parent.notify(zi,{}),this.triggerSelect("select",e))},e.prototype.spaceKey=function(e){t.isNullOrUndefined(e)||e.classList.contains(Mt)||(this.addActive(e),this.parent.notify(zi,{}),this.triggerSelect("select",e))},e.prototype.ctrlAKey=function(e,i){if(this.parent.allowMultiSelection&&!t.isNullOrUndefined(e)){this.startItem=e;this.doSelection(i,{ctrlKey:!0,shiftKey:!0})}},e.prototype.csEndKey=function(e,i){this.parent.allowMultiSelection?t.isNullOrUndefined(e)||("ctrlEnd"===i.action?this.addFocus(e):this.doSelection(e,i)):this.navigateItem(e)},e.prototype.csHomeKey=function(e,i){this.parent.allowMultiSelection?t.isNullOrUndefined(e)||("ctrlHome"===i.action?this.addFocus(e):this.doSelection(e,i)):this.navigateItem(e)},e.prototype.csDownKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!0,this.perRow);t.isNullOrUndefined(n)||("ctrlDown"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateDown(e,!0)},e.prototype.csLeftKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!1);t.isNullOrUndefined(n)||("ctrlLeft"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateRight(e,!1)},e.prototype.csRightKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!0);t.isNullOrUndefined(n)||("ctrlRight"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateRight(e,!0)},e.prototype.csUpKey=function(e,i){if(this.parent.allowMultiSelection){var n=this.getNextItem(e,!1,this.perRow);t.isNullOrUndefined(n)||("ctrlUp"===i.action?this.addFocus(n):this.doSelection(n,i))}else this.navigateDown(e,!1)},e.prototype.addActive=function(e){t.isNullOrUndefined(e)||(e.classList.contains(Mt)||(this.parent.selectedItems.push(this.getName(e)),t.addClass([e],[Mt]),e.setAttribute("aria-selected","true"),this.checkState(e,!0)),this.parent.visitedItem=e)},e.prototype.removeActive=function(e){if(!t.isNullOrUndefined(e)){t.removeClass([e],[Mt]),this.parent.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),this.checkState(e,!1);var i=this.parent.selectedItems.indexOf(this.getName(e));i>-1&&this.parent.selectedItems.splice(i,1),this.parent.visitedItem=null}},e.prototype.getName=function(e){var t=this.getItemObject(e);return this.getDataName(t)},e.prototype.getDataName=function(e){var i=t.getValue("name",e);if(""!==this.parent.breadcrumbbarModule.searchObj.element.value){i=t.getValue("filterPath",e).replace(/\\/g,"/").replace(this.parent.path,"")+i}return i},e.prototype.addFocus=function(e){this.element.setAttribute("tabindex","-1");var i=this.getFocusedItem();i&&(i.removeAttribute("tabindex"),t.removeClass([i],[Lt])),t.addClass([e],[Lt]),e.setAttribute("tabindex","0"),e.focus()},e.prototype.checkState=function(e,i){if(this.parent.allowMultiSelection){var n=t.select(".e-frame",e);t.isNullOrUndefined(n)||(i?n.classList.contains(Tt)||(t.addClass([n],Tt),t.closest(n,"."+_t).setAttribute("aria-checked","true")):n.classList.contains(Tt)&&(t.removeClass([n],Tt),t.closest(n,"."+_t).setAttribute("aria-checked","false")))}},e.prototype.clearSelect=function(){for(var e=Array.prototype.slice.call(t.selectAll("."+Mt,this.listElements)),i=0,n=e.length;i<n;i++)this.removeActive(e[i])},e.prototype.resizeHandler=function(){this.getItemCount()},e.prototype.getItemCount=function(){var e=1;if(this.itemList)for(var t=0,i=this.itemList.length-1;t<i&&this.itemList[t].getBoundingClientRect().top===this.itemList[t+1].getBoundingClientRect().top;t++)e++;this.perRow=e},e.prototype.triggerSelect=function(e,t){var i=this.getItemObject(t);this.parent.visitedData=i;var n={action:e,fileDetails:i};this.parent.trigger("fileSelect",n)},e.prototype.selectItems=function(e,t){for(var i=this.getIndexes(e,t),n=0,s=i.length;n<s;n++){this.doSelection(this.itemList[i[n]],{ctrlKey:!0,shiftKey:!1})}},e.prototype.getIndexes=function(e,i){for(var n=[],s=i?"_fm_id":"name",a=0,r=this.items.length;a<r;a++)-1!==e.indexOf(t.getValue(s,this.items[a]))&&n.push(a);return n},e.prototype.getItemObject=function(e){var t=this.itemList.indexOf(e);return this.items[t]},e.prototype.addSelection=function(e){var i=new s.DataManager(this.items).executeLocal((new s.Query).where("name","equal",t.getValue("name",e),!1));if(i.length>0){var n=new s.DataManager(i).executeLocal((new s.Query).where("filterPath","equal",this.parent.filterPath,!1));if(n.length>0){var a=this.items.indexOf(n[0]);this.doSelection(this.itemList[a],{ctrlKey:!0,shiftKey:!1})}}},e.prototype.updateSelectedData=function(){for(var e=[],i=t.selectAll("."+jt+"."+Mt,this.element),n=0;n<i.length;n++)e[n]=this.getItemObject(i[n]);this.parent.itemData=e},e}(),On=function(){function e(e){this.addressPath="",this.addressBarLink="",this.searchTimer=null,this.parent=e,this.keyConfigs={enter:"enter"},this.render()}return e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++){switch(n[i]){case"searchSettings":var s=e.newProp.searchSettings;t.isNullOrUndefined(s.allowSearchOnTyping)||this.searchEventBind(s.allowSearchOnTyping),!this.parent.breadcrumbbarModule.searchObj.value||""===this.parent.breadcrumbbarModule.searchObj.value||!t.isNullOrUndefined(s.allowSearchOnTyping)&&t.isNullOrUndefined(s.filterType)&&t.isNullOrUndefined(s.ignoreCase)||v(this.parent,this.parent.breadcrumbbarModule.searchObj.value,!1)}}},e.prototype.render=function(){this.addEventListener()},e.prototype.onPathChange=function(){var e=t.getValue("name",t.getValue("/",this.parent.feParent));this.addressBarLink?this.addressPath=this.addressBarLink:this.addressPath=e+this.parent.path;var i=this.addressPath,n=i.substring(i.indexOf("/"),i.length);this.parent.setProperties({path:n},!0);var s=[];s=i.split("/");var a=null;(a=this.parent.createElement("ul")).setAttribute("class","e-addressbar-ul");var r=null,o=s.length-1;if(s.length>1){for(var l="",h=0;h<o;h++){var d=null;r=this.parent.createElement("li");for(var c=0;c<=h;c++)l=l+s[c]+"/";if(r.setAttribute("data-utext",l),r.classList.add("e-address-list-item"),0!==h){var p=t.createElement("span",{className:yi});r.appendChild(p)}o-h!=1?(d=t.createElement("a",{className:xt}),r.setAttribute("tabindex","0")):d=t.createElement("span",{className:xt}),l="",d.innerText=s[h],r.appendChild(d),a.appendChild(r)}var u=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul");t.isNullOrUndefined(u)||(t.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),t.remove(u));var f=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");f?this.parent.breadCrumbBarNavigation.appendChild(a):this.parent.breadCrumbBarNavigation.insertBefore(a,f),this.updateBreadCrumbBar(a)}this.addressBarLink=""},e.prototype.updateBreadCrumbBar=function(e){for(var i=e.querySelectorAll("li"),n=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul"),s=window.getComputedStyle(n,null),r=parseFloat(s.getPropertyValue("padding-right")),o=parseFloat(s.getPropertyValue("padding-left")),h=n.offsetWidth-r-o,d=this.parent.createElement("ul",{className:"e-addressbar-ul"}),c=0,p=[],u=0;u<i.length;u++){var f=i[u].clientWidth;p.push(f),c+=f}t.isNullOrUndefined(n)||t.remove(n);var g=this.parent.createElement("div");g.setAttribute("class","e-search-wrap");var m=this.parent.element.id+"_search",b=t.createElement("input",{id:m,attrs:{autocomplete:"off"}});g.appendChild(b);var y=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap .e-input");if(t.isNullOrUndefined(y)){this.parent.breadCrumbBarNavigation.appendChild(g);var v=t.createElement("span",{className:"e-icons e-fe-search"});t.EventHandler.add(v,"click",this.onShowInput,this),b.parentElement.insertBefore(v,b),this.searchObj=new a.TextBox({value:"",showClearButton:!0,placeholder:k(this.parent,"Search"),focus:this.onFocus.bind(this),blur:this.onBlur.bind(this)}),this.searchObj.appendTo("#"+this.parent.element.id+"_search"),this.searchEventBind(this.parent.searchSettings.allowSearchOnTyping);var O=this.searchObj.element.nextElementSibling;t.EventHandler.add(O,"mousedown",this.searchChangeHandler.bind(this),this),t.EventHandler.add(this.searchObj.element,"keyup",this.onKeyUp.bind(this),this)}var w=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");if(h-=w.offsetWidth,c>h){for(u=i.length;u--;){var I=h-p[u];if(!(I>40)){for(var D=[],S=0;S<=u;S++){var C=i[S];D.push({text:C.innerText,utext:C.getAttribute("data-utext")})}var j=this.parent.createElement("li",{className:"e-breadcrumb-menu"}),x=this.parent.createElement("button",{className:"e-breadcrumb-submenu"});j.appendChild(x),d.insertBefore(j,d.querySelector("li")),this.subMenuObj=new l.DropDownButton({items:D,cssClass:"e-caret-hide e-submenu",iconCss:mi,iconPosition:"Top",beforeItemRender:this.addSubMenuAttributes.bind(this),select:this.subMenuSelectOperations.bind(this)}),this.subMenuObj.appendTo(x);break}d.insertBefore(i[u],d.querySelector("li")),h=I}this.parent.breadCrumbBarNavigation.insertBefore(d,w)}else this.parent.breadCrumbBarNavigation.insertBefore(e,w)},e.prototype.onFocus=function(){t.closest(this.searchObj.element,".e-search-wrap").classList.add("e-focus")},e.prototype.onKeyUp=function(){this.parent.notify(pn,{args:this.parent})},e.prototype.onBlur=function(){t.closest(this.searchObj.element,".e-search-wrap").classList.remove("e-focus")},e.prototype.subMenuSelectOperations=function(e){var t={target:e.element};this.addressPathClickHandler(t)},e.prototype.addSubMenuAttributes=function(e){e.element.setAttribute("data-utext",t.getValue("utext",e.item));var i=this.parent.createElement("a",{className:"e-list-text"});e.element.appendChild(i)},e.prototype.searchEventBind=function(e){e?(this.searchObj.input=this.searchChangeHandler.bind(this),this.searchObj.change=null):(this.searchObj.change=this.searchChangeHandler.bind(this),this.searchObj.input=null)},e.prototype.searchChangeHandler=function(e){var i=this;t.isNullOrUndefined(e.value)||(this.parent.searchSettings.allowSearchOnTyping?(window.clearTimeout(this.searchTimer),this.searchTimer=window.setTimeout(function(){v(i.parent,e.value,!1)},300)):v(this.parent,e.value,!1))},e.prototype.addressPathClickHandler=function(e){var i=e.target;if("LI"===i.nodeName||"A"===i.nodeName){var n="LI"===i.nodeName?i.children[0]:i;if(!t.isNullOrUndefined(n)){var s=this.updatePath(n);this.liClick(s);var a=this.parent.pathId[this.parent.pathId.length-1];this.parent.notify(dn,{module:"treeview",selectedNode:a})}}},e.prototype.onShowInput=function(){this.parent.isMobile&&(this.parent.element.classList.contains(It)?t.removeClass([this.parent.element],It):(t.addClass([this.parent.element],It),this.searchObj.element.focus()))},e.prototype.updatePath=function(e){var i=t.closest(e,"li").getAttribute("data-utext");this.addressBarLink=i;var n=this.addressBarLink.split("/"),s=this.parent.pathId;this.parent.pathId=[];for(var a=0,r=n.length-1;a<r;a++)this.parent.pathId.push(s[a]);return this.addressBarLink.substr(this.addressBarLink.indexOf("/"),this.addressBarLink.length)},e.prototype.onUpdatePath=function(){this.onPathChange(),this.removeSearchValue()},e.prototype.onCreateEnd=function(){this.addressPath.substring(this.addressPath.indexOf("/"),this.addressPath.length)!==this.parent.path&&this.onPathChange()},e.prototype.onRenameEnd=function(){this.onPathChange()},e.prototype.onDeleteEnd=function(){this.addressPath.substring(this.addressPath.indexOf("/"),this.addressPath.length)!==this.parent.path&&this.onUpdatePath()},e.prototype.removeSearchValue=function(){""===this.searchObj.value&&""===this.searchObj.element.value||(this.searchObj.value="",this.searchObj.element.value="",this.searchObj.dataBind())},e.prototype.onResize=function(){this.onPathChange()},e.prototype.onPasteEnd=function(e){this.parent.isPathDrag&&this.onPathChange()},e.prototype.liClick=function(e){this.parent.itemData=[t.getValue(e,this.parent.feParent)],ae(this.parent,Ti,e)},e.prototype.addEventListener=function(){this.keyboardModule=new t.KeyboardEvents(this.parent.breadCrumbBarNavigation,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.parent.on(ji,this.onPropertyChanged,this),t.EventHandler.add(this.parent.breadCrumbBarNavigation,"click",this.addressPathClickHandler,this),this.parent.on(_i,this.destroy,this),this.parent.on(Ti,this.onUpdatePath,this),this.parent.on(Ei,this.onUpdatePath,this),this.parent.on(ki,this.onUpdatePath,this),this.parent.on(qi,this.onUpdatePath,this),this.parent.on(Pi,this.onCreateEnd,this),this.parent.on(en,this.onRenameEnd,this),this.parent.on(Mi,this.onDeleteEnd,this),this.parent.on(Ai,this.onResize,this),this.parent.on(on,this.onPasteEnd,this),this.parent.on(Li,this.onResize,this),this.parent.on(un,this.onSearchTextChange,this),this.parent.on(gn,this.onDropInit,this),this.parent.on(Vi,this.onResize,this)},e.prototype.keyActionHandler=function(e){switch(e.action){case"enter":e.preventDefault(),this.addressPathClickHandler(e)}},e.prototype.removeEventListener=function(){this.keyboardModule.destroy(),this.parent.off(Ti,this.onUpdatePath),this.parent.off(Ei,this.onUpdatePath),this.parent.off(ki,this.onUpdatePath),this.parent.off(qi,this.onUpdatePath),this.parent.off(on,this.onPasteEnd),this.parent.off(Pi,this.onCreateEnd),this.parent.off(en,this.onRenameEnd),this.parent.off(Mi,this.onDeleteEnd),this.parent.off(Ai,this.onResize),this.parent.off(Li,this.onResize),this.parent.off(un,this.onSearchTextChange),this.parent.off(gn,this.onDropInit),this.parent.off(Vi,this.onResize)},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName()){var i=e.target.closest("li").getAttribute("data-utext");this.parent.dropPath=i.substring(i.indexOf("/")),this.parent.dropData=t.getValue(this.parent.dropPath,this.parent.feParent)}},e.prototype.getModuleName=function(){return"breadcrumbbar"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),t.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),t.isNullOrUndefined(this.searchObj)||this.searchObj.destroy())},e.prototype.onSearchTextChange=function(e){this.searchObj.element.placeholder=k(this.parent,"Search")+" "+e.cwd.name},e}(),wn=function(){function e(e){this.parent=e,this.render()}return e.prototype.render=function(){this.keyConfigs={downarrow:"downarrow",uparrow:"uparrown"},this.contextMenu=new h.ContextMenu({enableRtl:this.parent.enableRtl,locale:this.parent.locale,target:"#"+this.parent.element.id,beforeItemRender:this.onBeforeItemRender.bind(this),select:this.onSelect.bind(this),beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this),cssClass:L(this.parent,vt)}),this.contextMenu.appendTo("#"+this.parent.element.id+ft),this.addEventListener()},e.prototype.onBeforeItemRender=function(e){if(e.item.id===this.getMenuId("largeiconsview")){var i=t.createElement("span");(n=e.element).insertBefore(i,"LargeIcons"===this.parent.view?n.childNodes[1]:n.childNodes[0]),i.setAttribute("class",gi+" "+$t)}if(e.item.id===this.getMenuId("detailsview")){var n;i=t.createElement("span");(n=e.element).insertBefore(i,"Details"===this.parent.view?n.childNodes[1]:n.childNodes[0]),i.setAttribute("class",fi+" "+$t)}},e.prototype.onBeforeClose=function(){this.menuTarget=null},e.prototype.onBeforeOpen=function(e){var i,n,s=!1,a=!1,r=e.event.target;this.menuTarget=r,r.classList.contains("e-spinner-pane")&&(r=this.parent.navigationpaneModule.activeNode.getElementsByClassName(wi)[0],this.menuTarget=r),r.classList.contains(wi)&&(this.parent.selectedItems.length=0),this.targetElement="Details"===this.parent.view?t.closest(r,"tr"):r;var o=this.getTargetView(r);if(this.updateActiveModule(),r.classList.contains(Qt)||t.closest(r,"th")||t.closest(r,"#"+this.parent.element.id+mt)||t.closest(r,"#"+this.parent.element.id+rt))e.cancel=!0;else if("LargeIcons"!==this.parent.view&&this.targetElement&&this.targetElement.classList.contains("e-emptyrow"))this.setLayoutItem(r);else if(t.closest(r,"."+Ft))this.setLayoutItem(r);else if(!r.classList.contains("e-menu-item")&&!r.classList.contains($t)&&!r.classList.contains("e-caret")){if("LargeIcons"!==this.parent.view||t.isNullOrUndefined(t.closest(r,"li"))||t.closest(r,"#"+this.parent.element.id+ot))t.isNullOrUndefined(t.closest(r,"tr"))?t.closest(r,"#"+this.parent.element.id+ot)&&(i=t.closest(r,"li").getAttribute("data-uid"),a=!0):(i=this.targetElement.getAttribute("data-uid"),n=this.parent.detailsviewModule.gridObj.getRowObjectFromUID(i).data,t.isNullOrUndefined(this.targetElement.getAttribute("aria-selected"))&&this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute("aria-rowindex"),10)]),s=!0);else{t.closest(r,"li").classList.contains("e-active")||this.parent.largeiconsviewModule.doSelection(r,{ctrlKey:!0,shiftKey:!0}),n=this.parent.visitedData,s=!0}s?!0===t.getValue("isFile",n)?this.setFileItem():this.setFolderItem(!1):a?(this.setFolderItem(!0),i===this.parent.pathId[0]&&this.enableItems(["Delete","Rename","Cut","Copy"],!1,!0)):"TreeView"===o||"GridView"===o||"LargeIcon"===o?this.setLayoutItem(r):e.cancel=!0}var l=t.select("#"+this.getMenuId("Paste"),this.contextMenu.element);if(e.cancel||this.parent.enablePaste||!l||l.classList.contains("e-disabled")||this.enableItems(["Paste"],!1,!0),!e.cancel){this.contextMenu.dataBind(),this.menuItemData=this.getMenuItemData();var h={fileDetails:[this.menuItemData],element:e.element,target:r,items:this.contextMenu.items,menuModule:this.contextMenu,cancel:!1,menuType:this.menuType};this.parent.trigger("menuOpen",h,function(t){e.cancel=t.cancel})}},e.prototype.updateActiveModule=function(){this.parent.activeModule=t.closest(this.menuTarget,"#"+this.parent.element.id+ot)?"navigationpane":t.closest(this.menuTarget,"#"+this.parent.element.id+lt)?"detailsview":t.closest(this.menuTarget,"#"+this.parent.element.id+ht)?"largeiconsview":this.parent.activeModule},e.prototype.getTargetView=function(e){return e.classList.contains(Qt)?"TreeView":e.classList.contains(Zt)?"GridView":e.classList.contains(ei)?"LargeIcon":e.classList.contains(St)?"LargeIcon":""},e.prototype.enableItems=function(e,t,i){for(var n=0;n<e.length;n++)this.checkValidItem(e[n])&&this.contextMenu.enableItems([this.getMenuId(e[n])],t,i)},e.prototype.setFolderItem=function(e){this.menuType="folder",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.folder.map(function(e){return e.trim()})),this.contextMenu.dataBind(),e?this.enableItems(["Open"],!1,!0):1!==this.parent.selectedItems.length&&this.enableItems(["Rename"],!1,!0),1!==this.parent.selectedNodes.length&&this.enableItems(["Paste"],!1,!0)},e.prototype.setFileItem=function(){this.menuType="file",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.file.map(function(e){return e.trim()})),this.contextMenu.dataBind(),1!==this.parent.selectedItems.length&&this.enableItems(["Rename"],!1,!0)},e.prototype.setLayoutItem=function(e){this.menuType="layout",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.layout.map(function(e){return e.trim()})),this.contextMenu.dataBind(),("LargeIcons"===this.parent.view&&0!==t.closest(e,"#"+this.parent.element.id+ht).getElementsByClassName(Ft).length||"Details"===this.parent.view&&0!==t.closest(e,"#"+this.parent.element.id+lt).getElementsByClassName(Ft).length)&&this.enableItems(["SelectAll"],!1,!0),0===this.parent.selectedNodes.length&&this.enableItems(["Paste"],!1,!0),this.contextMenu.dataBind()},e.prototype.checkValidItem=function(e){return!t.isNullOrUndefined(t.select("#"+this.getMenuId(e),this.contextMenu.element))},e.prototype.getMenuItemData=function(){if("layout"===this.menuType)return S(this.parent);var e={target:this.menuTarget};return this.parent.notify($i,e),this.parent.itemData[0]},e.prototype.onSelect=function(e){var i=this;if(!t.isNullOrUndefined(e.item)&&e.item.id){var n,s=e.item.id.substr((this.parent.element.id+"_cm_").length);"refresh"===s||"newfolder"===s||"upload"===s?(n=[S(this.parent)],this.parent.itemData=n):(this.parent.notify(sn,{}),n=this.parent.itemData);var a={cancel:!1,element:e.element,fileDetails:n,item:e.item};this.parent.trigger("menuClick",a,function(t){if(!t.cancel)switch(s){case"cut":j(i.parent);break;case"copy":C(i.parent);break;case"paste":"folder"===i.menuType&&("largeiconsview"===i.parent.activeModule||"detailsview"===i.parent.activeModule)?i.parent.folderPath=i.parent.selectedItems[0]+"/":i.parent.folderPath="",U(i.parent);break;case"delete":for(var a=0;a<n.length;a++)if(!te(n[a]))return void $(i.parent,n[a]);we(i.parent,"Delete");break;case"download":for(var r=0;r<n.length;r++)if(!se(n[r]))return void $(i.parent,n[r]);"navigationpane"===i.parent.activeModule?i.parent.notify(fn,{}):i.parent.selectedItems.length>0&&Oe(i.parent,i.parent.path,i.parent.selectedItems);break;case"rename":te(n[0])?(i.parent.notify(Zi,{}),we(i.parent,"Rename")):$(i.parent,n[0]);break;case"selectall":i.parent.notify(Ki,{});break;case"refresh":I(i.parent);break;case"open":i.parent.visitedItem&&i.parent.notify(Hi,{target:i.parent.visitedItem});break;case"details":i.parent.notify(Qi,{});var o=i.parent.selectedItems;"navigationpane"===i.parent.activeModule&&(o=[]),he(i.parent,o,i.parent.path,"details");break;case"newfolder":ie(n[0])?we(i.parent,"NewFolder"):$(i.parent,n[0]);break;case"upload":ne(n[0])?document.getElementById(i.parent.element.id+"_upload").click():$(i.parent,n[0]);break;case"name":case"size":case"date":case"ascending":case"descending":A(i.parent,e);break;case"largeiconsview":O(i.parent,"LargeIcons");break;case"detailsview":O(i.parent,"Details")}})}},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"cssClass":this.contextMenu.cssClass=L(this.parent,vt)}}},e.prototype.addEventListener=function(){this.parent.on(_i,this.destroy,this),this.parent.on(ji,this.onPropertyChanged,this),this.keyboardModule=new t.KeyboardEvents(this.contextMenu.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.removeEventListener=function(){this.parent.off(_i,this.destroy),this.parent.off(ji,this.onPropertyChanged),this.keyboardModule.destroy()},e.prototype.keyActionHandler=function(e){switch(e.action){case"uparrow":case"downarrow":e.preventDefault()}},e.prototype.getModuleName=function(){return"contextmenu"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.contextMenu.destroy())},e.prototype.getItemData=function(e){for(var t=[],i=0;i<e.length;i++){var n=void 0,s=this.getMenuId(e[i]),a=k(this.parent,e[i]);switch(e[i]){case"|":n={separator:!0};break;case"Open":n={id:s,text:a,iconCss:ti};break;case"Upload":n={id:s,text:a,iconCss:ii};break;case"Cut":n={id:s,text:a,iconCss:ni};break;case"Copy":n={id:s,text:a,iconCss:si};break;case"Paste":n={id:s,text:a,iconCss:ai};break;case"Delete":n={id:s,text:a,iconCss:ri};break;case"Rename":n={id:s,text:a,iconCss:oi};break;case"NewFolder":n={id:s,text:a,iconCss:li};break;case"Details":n={id:s,text:a,iconCss:hi};break;case"SortBy":n={id:s,text:a,iconCss:di,items:[{id:this.getMenuId("Name"),text:k(this.parent,"Name"),iconCss:"name"===this.parent.sortBy?Rt:null},{id:this.getMenuId("Size"),text:k(this.parent,"Size"),iconCss:"size"===this.parent.sortBy?Rt:null},{id:this.getMenuId("Date"),text:k(this.parent,"DateModified"),iconCss:"_fm_modified"===this.parent.sortBy?Rt:null},{separator:!0},{id:this.getMenuId("Ascending"),text:k(this.parent,"Ascending"),iconCss:"Ascending"===this.parent.sortOrder?Pt:null},{id:this.getMenuId("Descending"),text:k(this.parent,"Descending"),iconCss:"Descending"===this.parent.sortOrder?Pt:null}]};break;case"View":n={id:s,text:a,iconCss:"Details"===this.parent.view?fi:gi,items:[{id:this.getMenuId("largeiconsview"),text:k(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?null:Pt},{id:this.getMenuId("detailsview"),text:k(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?Pt:null}]};break;case"Refresh":n={id:s,text:a,iconCss:ci};break;case"SelectAll":n={id:s,text:a,iconCss:pi};break;case"Download":n={id:s,text:a,iconCss:ui};break;default:n={id:s,text:a}}t.push(n)}return t},e.prototype.getMenuId=function(e){return this.parent.element.id+"_cm_"+e.toLowerCase()},e}(),In={NewFolder:"New folder",Upload:"Upload",Delete:"Delete",Rename:"Rename",Download:"Download",Cut:"Cut",Copy:"Copy",Paste:"Paste",SortBy:"Sort by",Refresh:"Refresh","Item-Selection":"item selected","Items-Selection":"items selected",View:"View",Details:"Details",SelectAll:"Select all",Open:"Open","Tooltip-NewFolder":"New folder","Tooltip-Upload":"Upload","Tooltip-Delete":"Delete","Tooltip-Rename":"Rename","Tooltip-Download":"Download","Tooltip-Cut":"Cut","Tooltip-Copy":"Copy","Tooltip-Paste":"Paste","Tooltip-SortBy":"Sort by","Tooltip-Refresh":"Refresh","Tooltip-Selection":"Clear selection","Tooltip-View":"View","Tooltip-Details":"Details","Tooltip-SelectAll":"Select all",Name:"Name",Size:"Size",DateModified:"Modified",DateCreated:"Date created",Path:"Path",Modified:"Modified",Created:"Created",Location:"Location",Type:"Type",Permission:"Permission",Ascending:"Ascending",Descending:"Descending","View-LargeIcons":"Large icons","View-Details":"Details",Search:"Search","Button-Ok":"OK","Button-Cancel":"Cancel","Button-Yes":"Yes","Button-No":"No","Button-Create":"Create","Button-Save":"Save","Header-NewFolder":"Folder","Content-NewFolder":"Enter your folder name","Header-Rename":"Rename","Content-Rename":"Enter your new name","Header-Rename-Confirmation":"Rename Confirmation","Content-Rename-Confirmation":"If you change a file name extension, the file might become unstable. Are you sure you want to change it?","Header-Delete":"Delete File","Content-Delete":"Are you sure you want to delete this file?","Header-Multiple-Delete":"Delete Multiple Files","Content-Multiple-Delete":"Are you sure you want to delete these {0} files?","Header-Duplicate":"File/Folder exists","Content-Duplicate":"{0} already exists. Do you want to rename and paste?","Header-Upload":"Upload Files",Error:"Error","Validation-Empty":"The file or folder name cannot be empty.","Validation-Invalid":'The file or folder name {0} contains invalid characters. Please use a different name. Valid file or folder names cannot end with a dot or space, and cannot contain any of the following characters: \\/:*?"<>|',"Validation-NewFolder-Exists":"A file or folder with the name {0} already exists.","Validation-Rename-Exists":"Cannot rename {0} to {1}: destination already exists.","Folder-Empty":"This folder is empty","File-Upload":"Drag files here to upload","Search-Empty":"No results found","Search-Key":"Try with different keywords","Sub-Folder-Error":"The destination folder is the subfolder of the source folder.","Access-Denied":"Access Denied","Access-Details":'You don"t have permission to access this folder.',"Header-Retry":"File Already Exists","Content-Retry":"A file with this name already exists in this folder. What would you like to do?","Button-Keep-Both":"Keep both","Button-Replace":"Replace","Button-Skip":"Skip","ApplyAll-Label":"Do this for all current items"},Dn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sn=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},Cn=function(e){function s(t,i){var n=e.call(this,t,i)||this;return n.selectedNodes=[],n.duplicateItems=[],n.duplicateRecords=[],n.previousPath=[],n.nextPath=[],n.layoutSelectedItems=[],n.renamedNodeId=null,n.uploadItem=[],n.deleteRecords=[],n.isFile=!1,n.sortOrder="Ascending",n.sortBy="name",n.isCut=!1,n.isSearchCut=!1,n.isSearchDrag=!1,n.isPasteError=!1,n.folderPath="",n.isSameAction=!1,n.enablePaste=!1,n.persistData=!1,n.retryArgs=[],n.isOpened=!1,n.isRetryOpened=!1,n.isPathDrag=!1,n.searchedItems=[],n.retryFiles=[],n.isApplySame=!1,n.dragData=[],n.dragNodes=[],n.dragPath="",n.dropPath="",n.isDragDrop=!1,n.treeExpandTimer=null,n.dragCursorPosition={left:44,top:18},n.isDropEnd=!1,n.droppedObjects=[],r.Inject(On,vn,wn),n}Dn(s,e),r=s,s.prototype.getModuleName=function(){return"filemanager"},s.prototype.preRender=function(){this.ensurePath(),this.feParent=[],this.feFiles=[],t.setStyleAttribute(this.element,{width:t.formatUnit(this.width),height:t.formatUnit(this.height)}),this.isDevice=t.Browser.isDevice,this.isMobile=this.checkMobile(),this.isMobile&&this.setProperties({navigationPaneSettings:{visible:!1}},!0);var e=t.closest(this.element,".e-bigger");this.isBigger=!!e,this.activeModule="LargeIcons"===this.view?"largeiconsview":"detailsview",n.createSpinner({target:this.element},t.createElement),this.addWrapper(),this.keyConfigs={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlU:"ctrl+u"},this.localeObj=new t.L10n(this.getModuleName(),In,this.locale)},s.prototype.getPersistData=function(){return this.addOnPersist(["view","path","selectedItems"])},s.prototype.requiredModules=function(){var e=[];return e.push({member:"breadcrumbbar",args:[this]}),e.push({member:"largeiconsview",args:[this]}),this.toolbarSettings.visible&&e.push({member:"toolbar",args:[this]}),this.navigationPaneSettings.visible&&e.push({member:"navigationpane",args:[this]}),this.view&&e.push({member:"detailsview",args:[this]}),this.contextMenuSettings.visible&&!this.isDevice&&e.push({member:"contextmenu",args:[this]}),e},s.prototype.render=function(){if(this.initialize(),this.setProperties({selectedItems:t.isNullOrUndefined(this.selectedItems)?[]:this.selectedItems},!0),this.fileView=this.view,this.setRtl(this.enableRtl),this.addEventListeners(),ae(this,this.path!==this.originalPath?xi:Ei,this.path),this.adjustHeight(),t.isNullOrUndefined(this.navigationpaneModule)){this.splitterObj.collapse(this.enableRtl?1:0);t.select("."+Ii,this.element).classList.add(Oi)}this.wireEvents()},s.prototype.ensurePath=function(){var e=this.path;t.isNullOrUndefined(e)&&(e="/"),0!==e.indexOf("/")&&(e="/"+e),e.lastIndexOf("/")!==e.length-1&&(e+="/"),this.originalPath=e,this.setProperties({path:"/"},!0),this.pathId=["fe_tree"],this.itemData=[]},s.prototype.initialize=function(){this.isMobile&&t.addClass([this.element],Ot),this.allowMultiSelection&&t.addClass([this.element],yt),this.addCssClass(null,this.cssClass),this.renderFileUpload()},s.prototype.addWrapper=function(){var e=this.createElement("div",{id:this.element.id+rt});this.element.appendChild(e);var t=this.createElement("div",{id:this.element.id+"_layout",className:"e-layout"});this.element.appendChild(t);var n=this.createElement("div",{id:this.element.id+ot}),s=this.createElement("div",{id:this.element.id+gt,className:Dt});this.breadCrumbBarNavigation=this.createElement("div",{id:this.element.id+mt,className:"e-address"}),s.appendChild(this.breadCrumbBarNavigation);var a=this.createElement("div",{id:this.element.id+lt});s.appendChild(a);var r=this.createElement("div",{id:this.element.id+ht,className:St});s.appendChild(r);var o=this.createElement("span",{className:"e-fe-overlay"});s.appendChild(o);var l;this.enableRtl?(t.appendChild(s),t.appendChild(n),l=[{size:"75%",min:"270px"},{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()}]):(t.appendChild(n),t.appendChild(s),l=[{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()},{size:"75%",min:"270px"}]),this.splitterObj=new i.Splitter({paneSettings:l,width:"100%",enableRtl:!1,resizing:this.splitterResize.bind(this)}),this.splitterObj.appendTo(t);var h=this.createElement("div",{id:this.element.id+dt});this.element.appendChild(h);var d=this.createElement("ul",{id:this.element.id+ft});this.element.appendChild(d);var c=this.createElement("div",{id:this.element.id+ct});this.element.appendChild(c);var p=this.createElement("div",{id:this.element.id+pt});this.element.appendChild(p);var u=this.createElement("div",{id:this.element.id+ut});this.element.appendChild(u)},s.prototype.adjustHeight=function(){var e=t.select("#"+this.element.id+rt,this.element),i=this.toolbarModule?e.offsetHeight:0;this.splitterObj.height=(this.element.clientHeight-i).toString(),this.splitterObj.dataBind()},s.prototype.splitterResize=function(){this.notify(Ai,{})},s.prototype.splitterAdjust=function(){var e=t.select("."+Ii,this.element);this.navigationPaneSettings.visible?(this.splitterObj.expand(this.enableRtl?1:0),e.classList.remove(Oi)):(this.splitterObj.collapse(this.enableRtl?1:0),e.classList.add(Oi))},s.prototype.addCssClass=function(e,i){t.isNullOrUndefined(e)||""===e||t.removeClass([this.element],e.split(" ")),t.isNullOrUndefined(i)||""===i||t.addClass([this.element],i.split(" "))},s.prototype.showSpinner=function(){n.showSpinner(this.element)},s.prototype.hideSpinner=function(){n.hideSpinner(this.element)},s.prototype.onContextMenu=function(e){e.preventDefault()},s.prototype.checkMobile=function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(t.Browser.userAgent.toLowerCase())&&/mobile/i.test(t.Browser.userAgent.toLowerCase())},s.prototype.renderFileUpload=function(){var e=this.element.id+bt,t=this.createElement("input",{id:e,attrs:{name:"uploadFiles",type:"file"}});this.element.appendChild(t),this.uploadDialogObj=new n.Dialog({header:k(this,"Header-Upload"),content:t,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!1,isModal:!0,width:"350px",target:"#"+this.element.id,locale:this.locale,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:this.enableRtl,open:this.onOpen.bind(this),close:this.onClose.bind(this)}),this.uploadDialogObj.appendTo("#"+this.element.id+ut),this.renderUploadBox()},s.prototype.renderUploadBox=function(){var e=this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url;this.uploadObj=new a.Uploader({dropArea:t.select("#"+this.element.id+gt,this.element),asyncSettings:{saveUrl:e,removeUrl:e},locale:this.locale,enableRtl:this.enableRtl,uploading:this.onUploading.bind(this),removing:this.onRemoving.bind(this),clearing:this.onClearing.bind(this),selected:this.onSelected.bind(this),success:this.onUploadSuccess.bind(this),failure:this.onUploadFailure.bind(this),autoUpload:this.uploadSettings.autoUpload,minFileSize:this.uploadSettings.minFileSize,maxFileSize:this.uploadSettings.maxFileSize,allowedExtensions:this.uploadSettings.allowedExtensions,fileListRendering:this.onFileListRender.bind(this)}),this.uploadObj.appendTo("#"+this.element.id+bt)},s.prototype.onFileListRender=function(e){this.trigger("uploadListCreate",e)},s.prototype.updateUploader=function(){this.uploadObj.autoUpload=this.uploadSettings.autoUpload,this.uploadObj.minFileSize=this.uploadSettings.minFileSize,this.uploadObj.maxFileSize=this.uploadSettings.maxFileSize,this.uploadObj.allowedExtensions=this.uploadSettings.allowedExtensions,this.uploadObj.dataBind()},s.prototype.onOpen=function(){this.isOpened=!0,this.uploadDialogObj.element.focus()},s.prototype.onClose=function(){this.isOpened=!1,this.uploadObj.clearAll()},s.prototype.onUploading=function(e){var i="save";if(0!==this.retryArgs.length)for(var n=0;n<this.retryArgs.length;n++)e.fileData.name===this.retryArgs[n].file.name&&(i=this.retryArgs[n].action,this.retryArgs.splice(n,1),n=this.retryArgs.length);var s=JSON.stringify(t.getValue(this.path,this.feParent));e.customFormData=[{path:this.path},{action:i},{data:s}];var a={url:this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url,type:"POST",mode:!0,dataType:null,contentType:null,data:JSON.stringify(e.customFormData),onSuccess:null,onFailure:null,beforeSend:null};this.uploadEventArgs={action:"Upload",ajaxSettings:a,cancel:!1},this.trigger("beforeSend",this.uploadEventArgs,function(i){e.customFormData=JSON.parse(t.getValue("data",i.ajaxSettings)),e.cancel=i.cancel;var n={cancel:!1,httpRequest:e.currentRequest};"function"==typeof t.getValue("beforeSend",i.ajaxSettings)&&(t.getValue("beforeSend",i.ajaxSettings)(n),t.getValue("cancel",n)&&(e.cancel=t.getValue("cancel",n)))})},s.prototype.onRemoving=function(){1===this.uploadObj.getFilesData().length&&this.uploadDialogObj.hide()},s.prototype.onClearing=function(){this.isOpened&&this.uploadDialogObj.hide()},s.prototype.onSelected=function(e){if(0!==e.filesData.length){var t=S(this);if(!ne(t))return e.cancel=!0,void $(this,t);this.uploadDialogObj.show()}},s.prototype.onUploadSuccess=function(e){var i={action:"Upload",result:e};this.trigger("success",i),ae(this,Ti,this.path),"function"==typeof t.getValue("onSuccess",this.uploadEventArgs.ajaxSettings)&&t.getValue("onSuccess",this.uploadEventArgs.ajaxSettings)()},s.prototype.onUploadFailure=function(e){var i=t.getValue("response",e),n=t.getValue("statusText",i);""!==n&&t.setValue("statusText",n,e);var s={action:"Upload",error:e};this.trigger("failure",s),400===t.getValue("statusCode",i)&&(this.retryFiles.push(t.getValue("file",e)),this.isRetryOpened||Ie(this,"UploadRetry")),"function"==typeof t.getValue("onFailure",this.uploadEventArgs.ajaxSettings)&&t.getValue("onFailure",this.uploadEventArgs.ajaxSettings)()},s.prototype.onInitialEnd=function(){!function(e,i){for(var n=i.split("/"),s=e.originalPath.split("/"),a=n.length-1,r=s.length-1;a<r;a++){var o=""===s[a+1]?Ei:xi,l=""===s[a]?"/":e.path+s[a]+"/",h=R(e,s[a]),d=t.getValue("_fm_id",h);e.setProperties({path:l},!0),e.pathId.push(d),e.itemData=[h],ae(e,o,e.path);break}}(this,this.path)},s.prototype.addEventListeners=function(){this.on(Ui,this.showSpinner,this),this.on(Fi,this.hideSpinner,this),this.on(xi,this.onInitialEnd,this),this.on(Qi,this.onDetailsInit,this),t.EventHandler.add(this.element,"contextmenu",this.onContextMenu,this)},s.prototype.removeEventListeners=function(){this.isDestroyed||(this.off(Ui,this.showSpinner),this.off(Fi,this.hideSpinner),this.off(xi,this.onInitialEnd),this.off(Qi,this.onDetailsInit),t.EventHandler.remove(this.element,"contextmenu",this.onContextMenu))},s.prototype.onDetailsInit=function(){t.isNullOrUndefined(this.activeModule)&&(this.itemData=[t.getValue(this.path,this.feParent)])},s.prototype.resizeHandler=function(){this.notify(Li,{})},s.prototype.keyActionHandler=function(e){switch(e.action){case"altN":e.preventDefault(),this.itemData=[S(this)],ie(this.itemData[0])?we(this,"NewFolder"):$(this,this.itemData[0]);break;case"f5":e.preventDefault(),I(this);break;case"ctrlShift1":e.preventDefault(),this.fileView="Details",this.setProperties({view:"Details"},!0),O(this,"Details");break;case"ctrlShift2":e.preventDefault(),this.fileView="LargeIcons",this.setProperties({view:"LargeIcons"},!0),O(this,"LargeIcons");break;case"ctrlU":e.preventDefault();t.select("#"+this.element.id+bt,this.element).click()}},s.prototype.wireEvents=function(){window.addEventListener("resize",this.resizeHandler.bind(this)),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},s.prototype.unWireEvents=function(){this.keyboardModule.destroy()},s.prototype.setPath=function(){this.setProperties({selectedItems:[]},!0),this.ensurePath(),this.notify(Gi,{selectedNode:this.pathId[0]}),ae(this,this.path!==this.originalPath?xi:Ei,this.path)},s.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"ajaxSettings":this.ajaxSettingSetModel(e);break;case"allowDragAndDrop":this.allowDragAndDrop=e.allowDragAndDrop,this.notify(ji,{module:"common",newProp:e,oldProp:i});break;case"allowMultiSelection":this.allowMultiSelection?t.addClass([this.element],yt):t.removeClass([this.element],yt),this.notify(ji,{module:"common",newProp:e,oldProp:i});break;case"cssClass":this.addCssClass(i.cssClass,e.cssClass),this.notify(ji,{module:"common",newProp:e,oldProp:i});break;case"detailsViewSettings":this.notify(ji,{module:"detailsview",newProp:e,oldProp:i});break;case"enableRtl":this.enableRtl=e.enableRtl,this.refresh();break;case"height":var a=t.isNullOrUndefined(e.height)?e.height:t.formatUnit(e.height);t.setStyleAttribute(this.element,{height:a}),this.adjustHeight(),this.notify(ji,{module:"common",newProp:e,oldProp:i});break;case"locale":t.isNullOrUndefined(e.enableRtl)||this.setProperties({enableRtl:e.enableRtl},!0),this.localeSetModelOption(e);break;case"navigationPaneSettings":this.splitterAdjust(),this.notify(ji,{module:"navigationpane",newProp:e,oldProp:i});break;case"path":this.setPath();break;case"searchSettings":t.isNullOrUndefined(e.searchSettings.allowSearchOnTyping)||this.setProperties({searchSettings:{allowSearchOnTyping:e.searchSettings.allowSearchOnTyping}},!0),t.isNullOrUndefined(e.searchSettings.ignoreCase)&&this.setProperties({searchSettings:{ignoreCase:e.searchSettings.ignoreCase}},!0),t.isNullOrUndefined(e.searchSettings.filterType)&&this.setProperties({searchSettings:{filterType:e.searchSettings.filterType}},!0),this.notify(ji,{module:"breadcrumbbar",newProp:e,oldProp:i});break;case"selectedItems":"Details"===this.view?this.notify(ji,{module:"detailsview",newProp:e,oldProp:i}):"LargeIcons"===this.view&&this.notify(ji,{module:"largeiconsview",newProp:e,oldProp:i});break;case"showFileExtension":case"showHiddenItems":this.notify(ji,{module:"common",newProp:e,oldProp:i});break;case"showThumbnail":this.notify(ji,{module:"largeiconsview",newProp:e,oldProp:i});break;case"toolbarSettings":this.adjustHeight(),this.notify(ji,{module:"toolbar",newProp:e,oldProp:i});break;case"uploadSettings":this.updateUploader();break;case"view":"Details"===e.view?this.notify(ji,{module:"detailsview",newProp:e,oldProp:i}):"LargeIcons"===e.view&&this.notify(ji,{module:"largeiconsview",newProp:e,oldProp:i});break;case"width":var r=t.isNullOrUndefined(e.width)?e.width:t.formatUnit(e.width);t.setStyleAttribute(this.element,{width:r}),this.notify(ji,{module:"common",newProp:e,oldProp:i})}}},s.prototype.ajaxSettingSetModel=function(i){t.isNullOrUndefined(i.ajaxSettings.url)||this.setProperties({ajaxSettings:{url:i.ajaxSettings.url}},!0),t.isNullOrUndefined(i.ajaxSettings.uploadUrl)||this.setProperties({ajaxSettings:{uploadUrl:i.ajaxSettings.uploadUrl}},!0),t.isNullOrUndefined(i.ajaxSettings.downloadUrl)||this.setProperties({ajaxSettings:{downloadUrl:i.ajaxSettings.downloadUrl}},!0),t.isNullOrUndefined(i.ajaxSettings.getImageUrl)||this.setProperties({ajaxSettings:{getImageUrl:i.ajaxSettings.getImageUrl}},!0),this.setProperties({path:"/"},!0),this.setProperties({selectedItems:[]},!0),e.prototype.refresh.call(this)},s.prototype.localeSetModelOption=function(t){this.uploadObj.locale=t.locale,e.prototype.refresh.call(this)},s.prototype.destroy=function(){this.isDestroyed||(this.refreshing||this.notify(_i,{}),this.uploadObj.destroy(),this.uploadObj=null,this.uploadDialogObj.destroy(),this.uploadDialogObj=null,this.splitterObj.destroy(),this.splitterObj=null,this.dialogObj&&(this.dialogObj.destroy(),this.dialogObj=null),this.viewerObj&&(this.viewerObj.destroy(),this.viewerObj=null),this.extDialogObj&&(this.extDialogObj.destroy(),this.extDialogObj=null),this.element.removeAttribute("style"),this.element.removeAttribute("tabindex"),this.removeEventListeners(),this.unWireEvents(),this.addCssClass(this.cssClass,null),t.removeClass([this.element],["e-rtl",Ot,yt]),this.element.innerHTML="",e.prototype.destroy.call(this))},s.prototype.disableToolbarItems=function(e){t.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!1)},s.prototype.enableToolbarItems=function(e){t.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!0)},s.prototype.refreshFiles=function(){I(this)},s.prototype.refreshLayout=function(){this.adjustHeight(),this.notify(Vi,{})},s.prototype.setRtl=function(e){e?this.addCssClass(null,"e-rtl"):this.addCssClass("e-rtl",null),this.uploadObj&&(this.uploadDialogObj.enableRtl=e,this.uploadObj.enableRtl=e)};var r;return Sn([t.Complex({},Te)],s.prototype,"ajaxSettings",void 0),Sn([t.Property(!1)],s.prototype,"allowDragAndDrop",void 0),Sn([t.Property(!0)],s.prototype,"allowMultiSelection",void 0),Sn([t.Complex({},Ze)],s.prototype,"contextMenuSettings",void 0),Sn([t.Property("")],s.prototype,"cssClass",void 0),Sn([t.Complex({},Ge)],s.prototype,"detailsViewSettings",void 0),Sn([t.Property(!1)],s.prototype,"enablePersistence",void 0),Sn([t.Property("400px")],s.prototype,"height",void 0),Sn([t.Property("LargeIcons")],s.prototype,"view",void 0),Sn([t.Complex({},it)],s.prototype,"navigationPaneSettings",void 0),Sn([t.Property("/")],s.prototype,"path",void 0),Sn([t.Complex({},qe)],s.prototype,"searchSettings",void 0),Sn([t.Property()],s.prototype,"selectedItems",void 0),Sn([t.Property(!0)],s.prototype,"showFileExtension",void 0),Sn([t.Property(!1)],s.prototype,"showHiddenItems",void 0),Sn([t.Property(!0)],s.prototype,"showThumbnail",void 0),Sn([t.Complex({},Ve)],s.prototype,"toolbarSettings",void 0),Sn([t.Complex({},at)],s.prototype,"uploadSettings",void 0),Sn([t.Property("100%")],s.prototype,"width",void 0),Sn([t.Event()],s.prototype,"fileLoad",void 0),Sn([t.Event()],s.prototype,"fileOpen",void 0),Sn([t.Event()],s.prototype,"beforeSend",void 0),Sn([t.Event()],s.prototype,"created",void 0),Sn([t.Event()],s.prototype,"destroyed",void 0),Sn([t.Event()],s.prototype,"fileDragStart",void 0),Sn([t.Event()],s.prototype,"fileDragging",void 0),Sn([t.Event()],s.prototype,"fileDragStop",void 0),Sn([t.Event()],s.prototype,"fileDropped",void 0),Sn([t.Event()],s.prototype,"fileSelect",void 0),Sn([t.Event()],s.prototype,"menuClick",void 0),Sn([t.Event()],s.prototype,"menuOpen",void 0),Sn([t.Event()],s.prototype,"failure",void 0),Sn([t.Event()],s.prototype,"success",void 0),Sn([t.Event()],s.prototype,"toolbarClick",void 0),Sn([t.Event()],s.prototype,"toolbarCreate",void 0),Sn([t.Event()],s.prototype,"uploadListCreate",void 0),s=r=Sn([t.NotifyPropertyChanges],s)}(t.Component),jn=function(){function e(e){this.default=["Delete","Rename","Download","Cut","Copy","Paste"],this.single=["Delete","Rename","Download","Cut","Copy"],this.multiple=["Delete","Download","Cut","Copy","Refresh"],this.selection=["NewFolder","Upload","SortBy","Refresh"],this.parent=e,this.render(),this.addEventListener()}return e.prototype.render=function(){this.items=this.toolbarItemData(this.getItems(this.parent.toolbarSettings.items.map(function(e){return e.trim()}))),this.triggerToolbarCreate(),this.toolbarObj=new h.Toolbar({items:this.items,created:this.toolbarCreateHandler.bind(this),overflowMode:"Popup",clicked:this.onClicked.bind(this),enableRtl:this.parent.enableRtl}),this.toolbarObj.appendTo("#"+this.parent.element.id+rt)},e.prototype.triggerToolbarCreate=function(){var e=this,t={items:this.items};this.parent.trigger("toolbarCreate",t,function(t){e.items=t.items})},e.prototype.getItems=function(e){var t=e.slice();return this.parent.isDevice&&this.parent.allowMultiSelection&&t.push("SelectAll"),t},e.prototype.onClicked=function(e){var i=this;if(!t.isNullOrUndefined(e.item)&&e.item.id){var n,s=e.item.id.substr((this.parent.element.id+"_tb_").length);"refresh"===s||"newfolder"===s||"upload"===s?(n=[S(this.parent)],this.parent.itemData=n):(this.parent.notify(sn,{}),n=this.parent.itemData);var a={cancel:!1,fileDetails:n,item:e.item};this.parent.trigger("toolbarClick",a,function(a){if(!a.cancel)switch(s){case"sortby":var r=t.closest(e.originalEvent.target,"."+Ct);r&&r.classList.contains("e-toolbar-popup")&&(e.cancel=!0);break;case"newfolder":ie(n[0])?we(i.parent,"NewFolder"):$(i.parent,n[0]);break;case"cut":j(i.parent);break;case"copy":C(i.parent);break;case"delete":for(var o=0;o<n.length;o++)if(!te(n[o]))return void $(i.parent,n[o]);we(i.parent,"Delete");break;case"details":i.parent.notify(Qi,{});var l=i.parent.selectedItems;"navigationpane"===i.parent.activeModule&&(l=[]),he(i.parent,l,i.parent.path,"details");break;case"paste":i.parent.folderPath="",U(i.parent);break;case"refresh":I(i.parent);break;case"download":i.doDownload();break;case"rename":te(n[0])?(i.parent.notify(Zi,{}),we(i.parent,"Rename")):$(i.parent,n[0]);break;case"upload":if(ne(n[0])){var h="#"+i.parent.element.id+bt;t.select(h,i.parent.element).click()}else $(i.parent,n[0]);break;case"selectall":i.parent.notify(Ki,{});break;case"selection":i.parent.notify(Wi,{})}})}},e.prototype.doDownload=function(){for(var e=this.parent.itemData,t=0;t<e.length;t++)if(!se(e[t]))return void $(this.parent,e[t]);this.parent.selectedItems.length>0&&Oe(this.parent,this.parent.path,this.parent.selectedItems)},e.prototype.toolbarCreateHandler=function(){if(!t.isNullOrUndefined(t.select("#"+this.getId("SortBy"),this.parent.element))){var e=[{id:this.getPupupId("name"),text:k(this.parent,"Name"),iconCss:Rt},{id:this.getPupupId("size"),text:k(this.parent,"Size")},{id:this.getPupupId("date"),text:k(this.parent,"DateModified")},{separator:!0},{id:this.getPupupId("ascending"),text:k(this.parent,"Ascending"),iconCss:Pt},{id:this.getPupupId("descending"),text:k(this.parent,"Descending")}];this.buttonObj=new l.DropDownButton({items:e,cssClass:L(this.parent,vt),select:A.bind(this,this.parent),enableRtl:this.parent.enableRtl,iconCss:di}),this.buttonObj.appendTo("#"+this.getId("SortBy"))}if(!t.isNullOrUndefined(t.select("#"+this.getId("View"),this.parent.element))){var i=[{id:this.getPupupId("large"),text:'<span class="e-icons e-fe-large e-menu-icon"></span>'+k(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?"":Pt},{id:this.getPupupId("details"),text:'<span class="e-icons e-fe-grid e-menu-icon"></span>'+k(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?Pt:""}];this.layoutBtnObj=new l.DropDownButton({iconCss:"Details"===this.parent.view?fi:gi,cssClass:L(this.parent,"e-caret-hide "+vt),items:i,select:this.layoutChange.bind(this),enableRtl:this.parent.enableRtl}),this.layoutBtnObj.appendTo("#"+this.getId("View"))}this.hideItems(this.default,!0),this.hideStatus();for(var n=t.selectAll(".e-btn",this.toolbarObj.element),s=function(e){n[e].onkeydown=function(e){13!==e.keyCode||e.target.classList.contains("e-fe-popup")||e.preventDefault()},n[e].onkeyup=function(t){13!==t.keyCode||t.target.classList.contains("e-fe-popup")||n[e].click()}},a=0;a<n.length;a++)s(a)},e.prototype.updateSortByButton=function(){for(var e=this.buttonObj.items,t=0;t<e.length;t++)e[t].id===this.getPupupId("name")?e[t].iconCss="name"===this.parent.sortBy?Rt:"":e[t].id===this.getPupupId("size")?e[t].iconCss="size"===this.parent.sortBy?Rt:"":e[t].id===this.getPupupId("date")?e[t].iconCss="_fm_modified"===this.parent.sortBy?Rt:"":e[t].id===this.getPupupId("ascending")?e[t].iconCss="Ascending"===this.parent.sortOrder?Pt:"":e[t].id===this.getPupupId("descending")&&(e[t].iconCss="Descending"===this.parent.sortOrder?Pt:"")},e.prototype.getPupupId=function(e){return this.parent.element.id+"_ddl_"+e.toLowerCase()},e.prototype.layoutChange=function(e){"Details"===this.parent.view?e.item.id===this.getPupupId("large")&&O(this.parent,"LargeIcons"):e.item.id===this.getPupupId("details")&&O(this.parent,"Details")},e.prototype.toolbarItemData=function(e){var t=[],i="Both";this.parent.isMobile&&(i="Overflow");for(var n=0;n<e.length;n++){var s=void 0,a=this.getId(e[n]),r=k(this.parent,e[n]),o=k(this.parent,"Tooltip-"+e[n]);switch(e[n]){case"|":s={type:"Separator"};break;case"Upload":s={id:a,text:r,tooltipText:o,prefixIcon:ii,showTextOn:i};break;case"SortBy":s={id:a,tooltipText:o,template:'<button id="'+a+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1">'+('<span class="e-tbar-btn-text e-tbar-ddb-text">'+r+"</span>")+"</button>"};break;case"Refresh":s={id:a,text:r,tooltipText:o,prefixIcon:ci,showTextOn:i};break;case"Selection":s={id:a,text:r,tooltipText:o,suffixIcon:bi,overflow:"Show",align:"Right"};break;case"View":s={id:a,tooltipText:o,prefixIcon:"Details"===this.parent.view?fi:gi,overflow:"Show",align:"Right",template:'<button id="'+a+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1"></button>'};break;case"Details":s={id:a,tooltipText:o,prefixIcon:hi,overflow:"Show",align:"Right"};break;case"NewFolder":s={id:a,text:r,tooltipText:o,prefixIcon:li,showTextOn:i};break;case"Cut":s={id:a,text:r,tooltipText:o,prefixIcon:ni,showTextOn:i};break;case"Copy":s={id:a,text:r,tooltipText:o,prefixIcon:si,showTextOn:i};break;case"Paste":s={id:a,text:r,tooltipText:o,prefixIcon:ai,showTextOn:i};break;case"Delete":s={id:a,text:r,tooltipText:o,prefixIcon:ri,showTextOn:i};break;case"Rename":s={id:a,text:r,tooltipText:o,prefixIcon:oi,showTextOn:i};break;case"Download":s={id:a,text:r,tooltipText:o,prefixIcon:ui,showTextOn:i};break;case"SelectAll":s={id:a,text:r,tooltipText:o,prefixIcon:pi,showTextOn:i};break;default:s={id:a,text:r,tooltipText:o}}t.push(s)}return t},e.prototype.getId=function(e){return this.parent.element.id+"_tb_"+e.toLowerCase()},e.prototype.addEventListener=function(){this.parent.on(ji,this.onPropertyChanged,this),this.parent.on(zi,this.onSelectionChanged,this),this.parent.on(Yi,this.onLayoutChange,this),this.parent.on(tn,this.showPaste,this),this.parent.on(nn,this.hidePaste,this),this.parent.on(_i,this.destroy,this),this.parent.on(Ji,this.updateSortByButton,this)},e.prototype.reRenderToolbar=function(e){void 0!==e.newProp.toolbarSettings.items&&(this.items=this.toolbarItemData(this.getItems(e.newProp.toolbarSettings.items.map(function(e){return e.trim()}))),this.triggerToolbarCreate(),this.toolbarObj.items=this.items,this.toolbarObj.dataBind(),this.toolbarCreateHandler())},e.prototype.onSelectionChanged=function(){this.hideStatus(),this.hideItems(this.single,!0),this.hideItems(this.selection,!1),1===this.parent.selectedItems.length?(this.hideItems(this.single,!1),this.hideItems(this.selection,!0)):this.parent.selectedItems.length>1&&(this.hideItems(this.multiple,!1),this.hideItems(this.selection,!0));var e=t.select("#"+this.getId("Selection"),this.toolbarObj.element);if(this.parent.selectedItems.length>0&&e){var i=void 0;i=1===this.parent.selectedItems.length?this.parent.selectedItems.length+" "+k(this.parent,"Item-Selection"):this.parent.selectedItems.length+" "+k(this.parent,"Items-Selection"),t.select(".e-tbar-btn-text",e).textContent=i,this.toolbarObj.hideItem(e.parentElement,!1)}},e.prototype.hideItems=function(e,i){for(var n=0;n<e.length;n++){var s=t.select("#"+this.getId(e[n]),this.parent.element);s&&this.toolbarObj.hideItem(s.parentElement,i)}},e.prototype.hideStatus=function(){var e=t.select("#"+this.getId("Selection"),this.toolbarObj.element);e&&this.toolbarObj.hideItem(e.parentElement,!0)},e.prototype.showPaste=function(){this.hideItems(["Paste"],!1)},e.prototype.hidePaste=function(){this.hideItems(["Paste"],!0)},e.prototype.onLayoutChange=function(){if(this.layoutBtnObj){this.layoutBtnObj.iconCss="Details"===this.parent.view?fi:gi;for(var e=this.layoutBtnObj.items,t=0;t<e.length;t++)e[t].id===this.getPupupId("large")?e[t].iconCss="LargeIcons"===this.parent.view?Pt:"":e[t].id===this.getPupupId("details")&&(e[t].iconCss="Details"===this.parent.view?Pt:"")}},e.prototype.removeEventListener=function(){this.parent.off(ji,this.onPropertyChanged),this.parent.off(zi,this.onSelectionChanged),this.parent.off(Yi,this.onLayoutChange),this.parent.off(tn,this.showPaste),this.parent.off(nn,this.hidePaste),this.parent.off(_i,this.destroy),this.parent.off(Ji,this.updateSortByButton)},e.prototype.getModuleName=function(){return"toolbar"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"cssClass":this.buttonObj&&(this.buttonObj.cssClass=L(this.parent,vt)),this.layoutBtnObj&&(this.layoutBtnObj.cssClass=L(this.parent,"e-caret-hide "+vt));break;case"height":case"width":this.toolbarObj.refreshOverflow();break;case"toolbarSettings":this.reRenderToolbar(e)}}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.buttonObj&&this.buttonObj.destroy(),this.layoutBtnObj&&this.layoutBtnObj.destroy(),this.toolbarObj.destroy())},e.prototype.enableItems=function(e,i){for(var n=0;n<e.length;n++){var s=t.select("#"+this.getId(e[n]),this.parent.element);s&&this.toolbarObj.enableItems(s.parentElement,i)}},e}(),xn=function(){function e(e){this.removeNodes=[],this.moveNames=[],this.expandTree=!1,this.isDrag=!1,this.isPathDragged=!1,this.parent=e,this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftF10:"shift+F10",f2:"f2"}}return e.prototype.onInit=function(){if(t.isNullOrUndefined(this.treeObj)){var e=t.getValue("/",this.parent.feParent);t.setValue("_fm_icon","e-fe-folder",e),te(e)||t.setValue("_fm_htmlAttr",{class:Z(e)},e),this.rootNode=t.getValue("name",t.getValue("/",this.parent.feParent)),this.treeObj=new h.TreeView({fields:{dataSource:[e],id:"_fm_id",parentID:"_fm_pId",expanded:"_fm_expanded",selected:"_fm_selected",text:"name",hasChildren:"hasChild",iconCss:"_fm_icon",htmlAttributes:"_fm_htmlAttr",tooltip:"name"},nodeSelected:this.onNodeSelected.bind(this),nodeExpanding:this.onNodeExpand.bind(this),nodeClicked:this.onNodeClicked.bind(this),allowEditing:!0,nodeEditing:this.onNodeEditing.bind(this),drawNode:this.onDrowNode.bind(this),enableRtl:this.parent.enableRtl,dataBound:this.addDragDrop.bind(this)}),this.treeObj.appendTo("#"+this.parent.element.id+ot),this.treeObj.element.style.width="25%",this.wireEvents()}},e.prototype.addDragDrop=function(){!this.parent.isMobile&&this.treeObj&&(this.parent.allowDragAndDrop?(this.dragObj&&this.dragObj.destroy(),this.dragObj=new t.Draggable(this.treeObj.element,{cursorAt:this.parent.dragCursorPosition,dragTarget:"."+wi,dragArea:this.parent.element,drag:X.bind(this,this.parent),dragStart:W.bind(this,this.parent),dragStop:K.bind(this,this.parent),enableTailMode:!0,enableAutoScroll:!0,helper:this.dragHelper.bind(this)})):!this.parent.allowDragAndDrop&&this.dragObj&&this.dragObj.destroy())},e.prototype.dragHelper=function(e){var i=e.sender.target;if(!i.classList.contains(wi))return null;var n=t.closest(i,"li");return this.parent.dragPath="",this.parent.dragData=[],this.parent.activeElements=[],this.parent.activeElements=[n],this.parent.dragNodes=[],y(this.parent,n),this.parent.dragData=this.getTreeData(n),this.parent.dragPath=this.parent.dragData[0].filterPath,this.parent.dragNodes.push(this.parent.dragData[0].name),z(this.parent),this.parent.virtualDragElement},e.prototype.onDrowNode=function(e){var t={element:e.node,fileDetails:e.nodeData,module:"NavigationPane"};this.parent.trigger("fileLoad",t)},e.prototype.addChild=function(e,i,n){var s=M(e);if(s.length>0){for(var a=0,r=s;a<s.length;)r[a]._fm_icon="e-fe-folder",te(r[a])||t.setValue("_fm_htmlAttr",{class:Z(r[a])},r[a]),a++;this.treeObj.addNodes(s,i,null,n)}},e.prototype.onNodeSelected=function(e){if(this.parent.breadcrumbbarModule&&this.parent.breadcrumbbarModule.searchObj&&(this.parent.breadcrumbbarModule.searchObj.element.value=""),this.parent.searchedItems=[],e.isInteracted||this.isPathDragged){var i=t.getValue("text",e.nodeData);this.activeNode=e.node,this.parent.activeModule="navigationpane",this.parent.selectedItems=[],c(e.node,i,this.parent),this.expandNodeTarget=null,e.node.querySelector("."+yi)&&null===e.node.querySelector("."+jt)&&(this.expandNodeTarget="add"),this.parent.itemData=this.getTreeData(t.getValue("id",e.nodeData)),ae(this.parent,this.isPathDragged?on:Ti,this.parent.path),this.parent.visitedItem=e.node,this.isPathDragged=!1}},e.prototype.onPathDrag=function(e){this.isPathDragged=!0,this.selectResultNode(e[0])},e.prototype.onNodeExpand=function(e){if(e.isInteracted||this.isDrag){var i=p(e.node,t.getValue("text",e.nodeData));null===e.node.querySelector("."+jt)&&(this.expandNodeTarget=e.node.getAttribute("data-uid"),this.parent.expandedId=this.expandNodeTarget,this.parent.itemData=this.getTreeData(t.getValue("id",e.nodeData)),ae(this.parent,Xi,i))}},e.prototype.onNodeExpanded=function(e){this.addChild(e.files,this.expandNodeTarget,!1),this.parent.expandedId=null},e.prototype.onNodeClicked=function(e){this.parent.activeModule="navigationpane",this.activeNode=e.node},e.prototype.onNodeEditing=function(e){t.isNullOrUndefined(e.innerHtml)||(e.cancel=!0)},e.prototype.onPathChanged=function(e){this.parent.isCut=!1;var i=t.getValue(this.parent.path,this.parent.feFiles);if("add"===this.expandNodeTarget){var n=t.select('[data-uid="'+this.treeObj.selectedNodes[0]+'"]',this.treeObj.element),s=t.select("."+Et,n);t.isNullOrUndefined(s)&&this.addChild(e.files,this.treeObj.selectedNodes[0],!0),this.expandNodeTarget=""}t.isNullOrUndefined(i)&&t.setValue(this.parent.path,e.files,this.parent.feFiles)},e.prototype.updateTree=function(e){var i=this.treeObj.selectedNodes[0],n=-1!==this.treeObj.expandedNodes.indexOf(i);this.removeChildNodes(i),t.setValue(this.parent.path,e.files,this.parent.feFiles),this.addChild(e.files,i,!n)},e.prototype.removeChildNodes=function(e){var i=t.select('[data-uid="'+e+'"]',this.treeObj.element),n=t.select("."+Et,i),s=n?Array.prototype.slice.call(n.children):null;s&&this.treeObj.removeNodes(s)},e.prototype.onOpenEnd=function(e){var t=this.parent.pathId[this.parent.pathId.length-1];this.treeObj.expandAll(this.treeObj.selectedNodes),this.treeObj.selectedNodes=[t],this.expandNodeTarget="add",this.onPathChanged(e)},e.prototype.onOpenInit=function(e){"navigationpane"===this.parent.activeModule&&e.target.querySelector("."+yi)&&this.treeObj.expandAll(this.treeObj.selectedNodes)},e.prototype.onInitialEnd=function(e){this.onInit(),this.addChild(e.files,t.getValue("_fm_id",e.cwd),!1)},e.prototype.onFinalizeEnd=function(e){this.onInit();var i=t.getValue("_fm_id",e.cwd);this.removeChildNodes(i),this.addChild(e.files,i,!1),this.treeObj.selectedNodes=[this.parent.pathId[this.parent.pathId.length-1]]},e.prototype.onCreateEnd=function(e){this.updateTree(e)},e.prototype.onSelectedData=function(){"navigationpane"===this.parent.activeModule&&this.updateItemData()},e.prototype.onDeleteInit=function(){if("navigationpane"===this.parent.activeModule){this.updateActionData();var e=t.getValue("name",this.parent.itemData[0]);le(this.parent,[e],this.parent.path,"delete")}},e.prototype.onDeleteEnd=function(e){if("navigationpane"===this.parent.activeModule){var i=this.treeObj.selectedNodes[0],n=t.select('[data-uid="'+i+'"]',this.treeObj.element),s=t.closest(n,"."+Et).parentElement;this.treeObj.selectedNodes=[s.getAttribute("data-uid")],this.treeObj.dataBind()}this.updateTree(e)},e.prototype.onRefreshEnd=function(e){this.updateTree(e)},e.prototype.onRenameInit=function(){"navigationpane"===this.parent.activeModule&&this.updateRenameData()},e.prototype.onRenameEnd=function(){if(""===this.parent.breadcrumbbarModule.searchObj.element.value)this.treeObj.updateNode(this.parent.renamedNodeId,this.parent.renameText),this.parent.renamedNodeId=null;else{var e=new s.DataManager(this.treeObj.getTreeData()).executeLocal((new s.Query).where(this.treeObj.fields.text,"equal",this.parent.currentItemText,!1));if(e.length>0){var i=new s.DataManager(e).executeLocal((new s.Query).where("filterPath","equal",this.parent.filterPath,!1));i.length>0&&this.treeObj.updateNode(t.getValue(this.treeObj.fields.id,i[0]),this.parent.renameText)}}},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"allowDragAndDrop":this.addDragDrop();break;case"navigationPaneSettings":ae(this.parent,Ei,"/")}}},e.prototype.onDownLoadInit=function(){this.doDownload()},e.prototype.onSelectionChanged=function(e){this.treeObj.selectedNodes=[e.selectedNode]},e.prototype.onClearPathInit=function(e){this.removeChildNodes(e.selectedNode)},e.prototype.onDragEnd=function(e){var t=[];t=this.parent.isPasteError||this.parent.isSearchDrag?this.getMoveNames(e.files,this.parent.isSearchDrag,this.parent.dragPath):this.moveNames,this.treeObj.removeNodes(t)},e.prototype.getMoveNames=function(e,i,n){for(var a=[],r=0;r<e.length;r++)if(!e[r].isFile){var o=e[r].previousName;if(i){var l=(n+=e[r].previousName).lastIndexOf("/");o=n.substring(l+1),n=n.substring(0,l+1)}for(var h=new s.DataManager(this.treeObj.getTreeData()).executeLocal((new s.Query).where(this.treeObj.fields.text,"equal",o,!1)),d=0;d<h.length;d++){var c=t.getValue("filterPath",h[d]);if((c=c.replace(/\\/g,"/"))===n){a.push(t.getValue(this.treeObj.fields.id,h[d]));break}}}return a},e.prototype.onCutEnd=function(e){var t=[];this.parent.isPasteError||this.parent.isSearchCut?this.moveNames=this.getMoveNames(e.files,this.parent.isSearchCut,this.parent.targetPath):t=this.moveNames,this.treeObj.removeNodes(t)},e.prototype.selectResultNode=function(e){var i=t.getValue("filterPath",e),n=t.getValue("name",e),a=new s.DataManager(this.treeObj.getTreeData()).executeLocal((new s.Query).where(this.treeObj.fields.text,"equal",n,!1));if(a.length>0){var r=new s.DataManager(a).executeLocal((new s.Query).where("filterPath","equal",i,!1));if(r.length>0){var o=t.getValue(this.treeObj.fields.id,r[0]);this.treeObj.selectedNodes=[o]}}},e.prototype.onDropPath=function(e){this.onpasteEnd(e);var i=t.getValue(this.parent.path,this.parent.feParent);this.selectResultNode(i),this.parent.isDropEnd=!this.parent.isPasteError},e.prototype.onpasteEnd=function(e){var i=t.getValue("name",e.cwd),n=t.getValue("filterPath",e.cwd),a=new s.DataManager(this.treeObj.getTreeData()).executeLocal((new s.Query).where(this.treeObj.fields.text,"equal",i,!1));if(a.length>0){var r=new s.DataManager(a).executeLocal((new s.Query).where("filterPath","equal",n,!1));if(r.length>0){var o=t.getValue(this.treeObj.fields.id,r[0]),l=-1===this.treeObj.expandedNodes.indexOf(o);this.removeChildNodes(o),t.setValue(B(e),e.files,this.parent.feFiles),this.addChild(e.files,o,l)}}this.parent.expandedId=null,this.onPathChanged(e),this.parent.isDragDrop&&this.checkDropPath(e)},e.prototype.checkDropPath=function(e){-1===this.parent.dropPath.indexOf(B(e))?(this.parent.isDropEnd=!1,q(this.parent)):this.parent.isDropEnd=!this.parent.isPasteError},e.prototype.onpasteInit=function(){this.parent.activeModule===this.getModuleName()&&this.updateItemData(),this.moveNames=[];for(var e=this.parent.isDragDrop?this.parent.dragData:this.parent.actionRecords,i=0;i<e.length;i++)!1===t.getValue("isFile",e[i])&&this.moveNames.push(t.getValue("_fm_id",e[i]))},e.prototype.oncutCopyInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.activeRecords=this.getTreeData(this.treeObj.selectedNodes[0]),this.parent.activeElements=[this.activeNode])},e.prototype.addEventListener=function(){this.parent.on(ji,this.onPropertyChanged,this),this.parent.on(fn,this.onDownLoadInit,this),this.parent.on(xi,this.onInitialEnd,this),this.parent.on(Ei,this.onFinalizeEnd,this),this.parent.on(Ti,this.onPathChanged,this),this.parent.on(on,this.onpasteEnd,this),this.parent.on(ln,this.onCutEnd,this),this.parent.on(rn,this.onpasteInit,this),this.parent.on(Xi,this.onNodeExpanded,this),this.parent.on(Pi,this.onCreateEnd,this),this.parent.on(sn,this.onSelectedData,this),this.parent.on(Ni,this.onDeleteInit,this),this.parent.on(Mi,this.onDeleteEnd,this),this.parent.on(ki,this.onRefreshEnd,this),this.parent.on(dn,this.onSelectionChanged,this),this.parent.on(Hi,this.onOpenInit,this),this.parent.on(qi,this.onOpenEnd,this),this.parent.on(_i,this.destroy,this),this.parent.on(Zi,this.onRenameInit,this),this.parent.on(en,this.onRenameEnd,this),this.parent.on(Gi,this.onClearPathInit,this),this.parent.on(an,this.oncutCopyInit,this),this.parent.on(gn,this.onDropInit,this),this.parent.on($i,this.onMenuItemData,this),this.parent.on(mn,this.onDragEnd,this),this.parent.on(yn,this.onDragging,this),this.parent.on(bn,this.onDropPath,this),this.parent.on(Qi,this.onDetailsInit,this),this.parent.on(Ri,this.onPathDrag,this)},e.prototype.removeEventListener=function(){this.parent.off(xi,this.onInitialEnd),this.parent.off(fn,this.onDownLoadInit),this.parent.off(Ei,this.onFinalizeEnd),this.parent.off(sn,this.onSelectedData),this.parent.off(ji,this.onPropertyChanged),this.parent.off(Ti,this.onPathChanged),this.parent.off(on,this.onpasteEnd),this.parent.off(ln,this.onCutEnd),this.parent.off(rn,this.onpasteInit),this.parent.off(dn,this.onSelectionChanged),this.parent.off(Xi,this.onNodeExpanded),this.parent.off(Pi,this.onCreateEnd),this.parent.off(ki,this.onRefreshEnd),this.parent.off(Hi,this.onOpenInit),this.parent.off(qi,this.onOpenEnd),this.parent.off(_i,this.destroy),this.parent.off(Zi,this.onRenameInit),this.parent.off(en,this.onRenameEnd),this.parent.off(Gi,this.onClearPathInit),this.parent.off(Ni,this.onDeleteInit),this.parent.off(Mi,this.onDeleteEnd),this.parent.off(an,this.oncutCopyInit),this.parent.off(gn,this.onDropInit),this.parent.off(mn,this.onDragEnd),this.parent.off(yn,this.onDragging),this.parent.off(bn,this.onDropPath),this.parent.off(Qi,this.onDetailsInit),this.parent.off($i,this.onMenuItemData),this.parent.off(Ri,this.onPathDrag)},e.prototype.onDetailsInit=function(){if(this.parent.activeModule===this.getModuleName()){var e=this.getTreeData(this.treeObj.selectedNodes[0]);this.parent.itemData=e}},e.prototype.onMenuItemData=function(e){if(this.parent.activeModule===this.getModuleName()){var i=t.closest(e.target,"li");this.parent.itemData=this.getTreeData(i.getAttribute("data-uid"))}},e.prototype.onDragging=function(e){var i=t.closest(e.target,"li");if(i.classList.contains("e-node-collapsed")){this.isDrag=!0;var n=parseInt(i.getAttribute("aria-level"),10);this.treeObj.expandAll([i.getAttribute("data-uid")],n+1),this.isDrag=!1}},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName()){var i=t.closest(e.target,"li"),n=i.getAttribute("data-uid");if(n!==this.parent.pathId[0]){var s=this.getTreeData(i)[0];this.parent.dropPath=s.filterPath.replace(/\\/g,"/")+s.name+"/",this.parent.dropData=this.getTreeData(n)[0]}else this.parent.dropPath="/",this.parent.dropData=t.getValue(this.parent.dropPath,this.parent.feParent)}},e.prototype.getModuleName=function(){return"navigationpane"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.treeObj&&(this.unWireEvents(),this.treeObj.destroy()))},e.prototype.wireEvents=function(){this.keyboardModule=new t.KeyboardEvents(this.treeObj.element,{keyAction:this.keyDown.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){this.keyboardModule.destroy()},e.prototype.keyDown=function(e){switch(e.action){case"altEnter":this.parent.notify(Qi,{}),he(this.parent,[],this.parent.path,"details");break;case"esc":f(this.parent);break;case"del":this.updateItemData(),te(this.parent.itemData[0])?(this.removeNodes=[],we(this.parent,"Delete")):$(this.parent,this.parent.itemData[0]);break;case"ctrlC":C(this.parent);break;case"ctrlV":this.parent.folderPath="",U(this.parent);break;case"ctrlX":j(this.parent);break;case"shiftF10":if(this.updateItemData(),!se(this.parent.itemData[0]))return void $(this.parent,this.parent.itemData[0]);0!==this.parent.selectedItems.length&&this.doDownload();break;case"f2":if(0===this.parent.selectedItems.length){var t=this.getTreeData(this.treeObj.selectedNodes[0])[0];te(t)?(this.updateRenameData(),we(this.parent,"Rename")):$(this.parent,t)}}},e.prototype.getTreeData=function(e){for(var i=this.treeObj.getTreeData(e),n=0;n<i.length;n++)t.isNullOrUndefined(t.getValue("hasChild",i[n]))&&t.setValue("hasChild",!1,i[n]);return i},e.prototype.updateRenameData=function(){this.updateItemData(),this.parent.currentItemText=t.getValue("name",this.parent.itemData[0])},e.prototype.updateItemData=function(){var e=this.getTreeData(this.treeObj.selectedNodes[0])[0];this.parent.itemData=[e],this.parent.isFile=!1},e.prototype.updateActionData=function(){this.updateItemData();var e=V(this.parent);this.parent.setProperties({path:e},!0)},e.prototype.doDownload=function(){var e=V(this.parent),i=this.treeObj.selectedNodes[0]===this.parent.pathId[0]?"":t.getValue("name",this.parent.itemData[0]);Oe(this.parent,e,[i])},e}(),En=function(){function e(e){this.islayoutChange=!1,this.isInteracted=!0,this.isPasteOperation=!1,this.isCloumnRefresh=!1,this.dragObj=null,this.startIndex=null,this.firstItemIndex=null,this.pasteOperation=!1,this.uploadOperation=!1,this.count=0,this.isRendered=!0,d.Grid.Inject(d.Resize,d.ContextMenu,d.Sort,d.VirtualScroll),this.parent=e,this.element=t.select("#"+this.parent.element.id+lt,this.parent.element),this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",tab:"tab",moveDown:"downarrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",ctrlUp:"ctrl+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",end:"end",home:"home",moveUp:"uparrow",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",ctrlD:"ctrl+d",f2:"f2",ctrlA:"ctrl+a",enter:"enter"}}return e.prototype.render=function(e){if("Details"===this.parent.view){t.removeClass([this.parent.element],wt);var i=P(this.parent,e.files),n=this.getColumns(),s=void 0;s=this.parent.isMobile?[]:[{direction:this.parent.sortOrder,field:this.parent.sortBy}],this.gridObj=new d.Grid({dataSource:i,allowSorting:!0,rowSelected:this.onSelected.bind(this),rowDeselected:this.onDeSelection.bind(this),allowResizing:this.parent.detailsViewSettings.columnResizing,selectionSettings:{type:this.parent.allowMultiSelection?"Multiple":"Single",checkboxMode:"ResetOnRowClick"},enableRtl:this.parent.enableRtl,pageSettings:{pageSize:20},sortSettings:{allowUnsort:!1,columns:s},columns:n,recordDoubleClick:this.DblClickEvents.bind(this),beforeDataBound:this.onBeforeDataBound.bind(this),dataBound:this.onDataBound.bind(this),rowDataBound:this.onRowDataBound.bind(this),actionBegin:this.onActionBegin.bind(this),headerCellInfo:this.onHeaderCellInfo.bind(this),width:"100%",beforeCopy:function(e){e.cancel=!0},load:function(e){this.focusModule.destroy()}}),this.gridObj.appendTo("#"+this.parent.element.id+lt),this.wireEvents(),this.adjustHeight(),this.gridObj.defaultLocale.EmptyRecord="",this.emptyArgs=e}},e.prototype.adjustWidth=function(e,t){for(var i=0;i<e.length;i++)if(e[i].field===t){var n=void 0;n=""===this.parent.breadcrumbbarModule.searchObj.element.value?this.element.clientWidth<=500?"120px":"auto":this.element.clientWidth<=680?"name"===t?"120px":"180px":"auto",e[i].width=n}},e.prototype.getColumns=function(){var e;if(this.parent.isMobile)e=[{field:"name",headerText:k(this.parent,"Name"),width:"auto",minWidth:120,headerTextAlign:"Left",template:'<div class="e-fe-text">${name}</div><div class="e-fe-date">${_fm_modified}</div><span class="e-fe-size">${size}</span>'}];else{e=JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns)),this.adjustWidth(e,"name");for(var t=0,i=e.length;t<i;t++)e[t].headerText=k(this.parent,e[t].headerText)}var n=this.parent.isMobile||this.parent.isBigger?"54":"46",s={field:"type",width:n,minWidth:n,template:'<span class="e-fe-icon ${_fm_iconClass}"></span>',allowResizing:!1,allowSorting:!0,customAttributes:{class:"e-fe-grid-icon"},headerTemplate:'<span class="e-fe-icon e-fe-folder"></span>'};if(e.unshift(s),this.parent.allowMultiSelection){var a=this.parent.isBigger?"36":"26",r={type:"checkbox",width:a,minWidth:a,customAttributes:{class:"e-fe-checkbox"},allowResizing:!1,allowSorting:!1};this.parent.isMobile?e.push(r):e.unshift(r)}return e},e.prototype.adjustHeight=function(){if(this.gridObj){var e=t.select("#"+this.parent.element.id+gt,this.parent.element),i=t.select("#"+this.parent.element.id+mt,this.parent.element),n=t.select(".e-gridheader",this.parent.element),s=e.offsetHeight-i.offsetHeight-n.offsetHeight;this.gridObj.height=s,this.gridObj.dataBind()}},e.prototype.renderCheckBox=function(){this.gridObj.columns=this.getColumns(),this.gridObj.refreshColumns()},e.prototype.onRowDataBound=function(e){var i=t.select(".e-fe-grid-name",e.row);if(i&&i.setAttribute("title",t.getValue("name",e.data)),this.islayoutChange&&this.parent.isCut&&"move"===this.parent.fileAction&&this.parent.selectedNodes&&0!==this.parent.selectedNodes.length&&-1!==this.parent.selectedNodes.indexOf(t.getValue("name",e.data))&&m(e.row),!this.parent.showFileExtension&&t.getValue("isFile",e.data)){var n=e.row.querySelector(".e-fe-text"),s=t.getValue("name",e.data),a=t.getValue("type",e.data);n.innerHTML=s.substr(0,s.length-a.length)}if(void 0!==t.getValue("size",e.data)&&e.row.querySelector(".e-fe-size")){var r=e.row.querySelector(".e-fe-size"),o=void 0;if(t.getValue("isFile",e.data)){var l=t.getValue("size",e.data);if(l/1024==0)o="0 KB";else{o=(d=new t.Internationalization).formatNumber(l/1024,{format:"n"})+" KB"}}else o="";r.innerHTML=o}if(this.parent.isMobile&&void 0!==t.getValue("_fm_modified",e.data)&&e.row.querySelector(".e-fe-date")){for(var h=e.row.querySelector(".e-fe-date"),d=new t.Internationalization,c=this.parent.detailsViewSettings.columns,p=void 0,u=0;u<c.length;u++)if("dateModified"===c[u].field){p=c[u].format;break}var f=d.formatDate(new Date(t.getValue("_fm_modified",e.data)),p);h.innerHTML=f}var g=e.row.querySelector("."+_t);g&&g.classList.add("e-small"),te(e.data)||(e.row.className+=" "+Z(e.data));var b={element:e.row,fileDetails:e.data,module:"DetailsView"};this.parent.trigger("fileLoad",b)},e.prototype.onActionBegin=function(e){if("sorting"===e.requestType){if(this.parent.sortOrder=e.direction,this.parent.sortBy=e.columnName,0!==this.parent.selectedItems.length){this.sortItem=!0;var i=this.gridObj.getSelectedRowIndexes(),n=i.length;for(this.sortSelectedNodes=[];n>0;){var s=this.gridObj.getRowsObject()[i[n-1]].data;this.sortSelectedNodes.push(t.getValue("name",s)),n--}}this.parent.notify(Ji,{})}},e.prototype.onHeaderCellInfo=function(e){var t=e.node.querySelector("."+_t);t&&t.classList.add("e-small")},e.prototype.onBeforeDataBound=function(e){var t=P(this.parent,this.gridObj.dataSource);e.result=t},e.prototype.onDataBound=function(){if(this.createDragObj(),0!==this.parent.selectedItems.length&&this.selectRecords(this.parent.selectedItems),!0===this.isPasteOperation&&(this.isCloumnRefresh?this.isCloumnRefresh=!1:(this.selectRecords(this.parent.pasteNodes),this.isPasteOperation=!1)),this.parent.createdItem&&(this.selectRecords([t.getValue("name",this.parent.createdItem)]),this.parent.createdItem=null),this.parent.layoutSelectedItems.length&&this.selectRecords(this.parent.layoutSelectedItems),this.parent.renamedItem&&(this.addSelection(this.parent.renamedItem),this.parent.renamedItem=null),!0===this.sortItem&&(this.selectRecords(this.sortSelectedNodes),this.sortItem=!1),!0===this.uploadOperation&&(this.count++,this.selectRecords(this.parent.uploadItem),this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[])),this.gridObj.currentViewData.length*this.gridObj.getRowHeight()<this.gridObj.height){(e=this.gridObj.getHeaderContent()).style.paddingRight="",e.style.paddingLeft="";t.select(".e-headercontent",e).style.borderRightWidth="0";(i=this.gridObj.getContent().querySelector(".e-content")).style.overflowY="",i.classList.add("e-scrollShow")}else{var e=this.gridObj.getHeaderContent();this.parent.enableRtl?e.style.paddingLeft="16px":e.style.paddingRight="16px";var i;(i=this.gridObj.getContent().querySelector(".e-content")).classList.remove("e-scrollShow")}this.isRendered=!0,this.islayoutChange=!1,this.checkEmptyDiv(this.emptyArgs)},e.prototype.selectRecords=function(e,i){for(var n=this.gridObj.getCurrentViewRecords(),s=[],a=0,r=n.length;a<r;a++){var o=i?t.getValue("_fm_id",n[a]):this.getName(n[a]);-1!==e.indexOf(o)&&s.push(a)}0!==s.length&&(this.gridObj.selectRows(s),this.addFocus(this.gridObj.selectedRowIndex))},e.prototype.addSelection=function(e){var i=this.gridObj.getCurrentViewRecords(),n=new s.DataManager(i).executeLocal((new s.Query).where("name","equal",t.getValue("name",e),!1));if(n.length>0){var a=new s.DataManager(n).executeLocal((new s.Query).where("filterPath","equal",this.parent.filterPath,!1));if(a.length>0){var r=i.indexOf(a[0]);this.gridObj.selectRows([r])}}},e.prototype.onSortColumn=function(){this.gridObj.sortModule.sortColumn(this.parent.sortBy,this.parent.sortOrder)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var i=0,n=Object.keys(e.newProp);i<n.length;i++){switch(n[i]){case"allowDragAndDrop":this.createDragObj();break;case"height":this.adjustHeight();break;case"detailsViewSettings":if(!t.isNullOrUndefined(this.gridObj)){var s=this.getColumns();this.gridObj.columns=s,this.gridObj.allowResizing=this.parent.detailsViewSettings.columnResizing,this.gridObj.dataBind(),this.gridObj.refreshColumns()}break;case"selectedItems":0!==this.parent.selectedItems.length?this.selectRecords(this.parent.selectedItems):t.isNullOrUndefined(this.gridObj)||this.gridObj.clearSelection();break;case"showFileExtension":case"showHiddenItems":ae(this.parent,Ti,this.parent.path);break;case"allowMultiSelection":t.isNullOrUndefined(this.gridObj)||(this.gridObj.selectionSettings.type=e.newProp.allowMultiSelection?"Multiple":"Single",this.renderCheckBox());break;case"view":O(this.parent,"Details");break;case"width":this.onDetailsResize()}}},e.prototype.onPathChanged=function(e){if(this.parent.isCut=!1,""===this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.gridObj){this.parent.searchedItems=[];var t=this.gridObj.columns.length,i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&(this.gridObj.columns.pop(),this.gridObj.refreshColumns(),this.isCloumnRefresh=!0)}b(this.parent),"Details"===this.parent.view&&(this.isInteracted=!1,this.parent.setProperties({selectedItems:[]},!0),this.gridObj.dataSource=P(this.parent,e.files),this.parent.notify(un,e)),this.emptyArgs=e},e.prototype.checkEmptyDiv=function(e){var i=P(this.parent,e.files);if(0!==i.length||t.isNullOrUndefined(this.element.querySelector("."+Zt))){if(0!==i.length&&this.element.querySelector("."+Ft))if(this.element.querySelector("."+Zt).querySelector("."+Ft)){var n=this.element.querySelector("."+Zt).querySelector("."+Ft);this.element.querySelector("."+Zt).removeChild(n)}else this.element.removeChild(this.element.querySelector("."+Ft))}else N(this.parent,this.element,e)},e.prototype.onOpenInit=function(){if("detailsview"===this.parent.activeModule){var e=this.gridObj.getSelectedRecords()[0];this.openContent(e)}},e.prototype.DblClickEvents=function(e){this.gridObj.selectRows([e.rowIndex]);var t;e.rowData&&(t=JSON.parse(JSON.stringify(e.rowData)),this.openContent(t))},e.prototype.openContent=function(e){var i=this;if(ee(e)){var n={cancel:!1,fileDetails:e};this.parent.trigger("fileOpen",n,function(n){if(!n.cancel){if(t.getValue("isFile",e)){if(x(e)===Wt){var s=t.getValue("name",e),a=E(i.parent,e);Me(i.parent,s,a)}}else{if(""===i.parent.breadcrumbbarModule.searchObj.element.value){var r=i.parent.path+t.getValue("name",e)+"/";i.parent.setProperties({path:r},!0),i.parent.pathId.push(t.getValue("_fm_id",e)),i.parent.itemData=[e],D(i.parent)}else _(i.parent,e)}i.element.focus()}})}else $(this.parent,e)},e.prototype.onLayoutChange=function(e){"Details"===this.parent.view&&("layout-change"===t.getValue("name",e)&&(this.islayoutChange=!0),this.gridObj||this.render(e),this.gridObj.dataSource=P(this.parent,e.files),this.parent.notify(hn,{}),this.gridObj.element.classList.remove(Oi),this.isInteracted=!1,this.gridObj.clearSelection(),""!==this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.onSearchFiles(e),this.adjustHeight())},e.prototype.onSearchFiles=function(e){if("Details"===this.parent.view){this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(zi,{});var t=this.gridObj.columns.length,i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&this.gridObj.columns.pop(),this.islayoutChange||(this.parent.layoutSelectedItems=[]);var n={field:"filterPath",headerText:k(this.parent,"Path"),minWidth:180,width:"auto"};this.parent.isMobile||(this.gridObj.columns.push(n),this.adjustWidth(this.gridObj.columns,"name"),this.adjustWidth(this.gridObj.columns,"filterPath")),this.gridObj.refreshColumns(),this.parent.searchedItems=e.files,this.onPathChanged(e)}},e.prototype.changeData=function(e){this.isInteracted=!1,this.gridObj.dataSource=P(this.parent,e.files)},e.prototype.onFinalizeEnd=function(e){"Details"===this.parent.view&&(this.gridObj?this.onPathChanged(e):(this.render(e),this.parent.notify(un,e)))},e.prototype.onCreateEnd=function(e){"Details"===this.parent.view&&this.onPathChanged(e)},e.prototype.onRenameInit=function(){"detailsview"===this.parent.activeModule&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onSelectedData=function(){"detailsview"===this.parent.activeModule&&(this.parent.itemData=this.gridObj.getSelectedRecords())},e.prototype.onDeleteInit=function(){"detailsview"===this.parent.activeModule&&le(this.parent,this.parent.selectedItems,this.parent.path,"delete")},e.prototype.onDeleteEnd=function(e){"Details"===this.parent.view&&(this.onPathChanged(e),this.parent.setProperties({selectedItems:[]},!0))},e.prototype.onRefreshEnd=function(e){"Details"===this.parent.view&&this.changeData(e)},e.prototype.onHideLayout=function(){"Details"!==this.parent.view&&this.gridObj&&this.gridObj.element.classList.add(Oi)},e.prototype.onSelectAllInit=function(){"Details"===this.parent.view&&(this.isInteracted=!1,this.gridObj.selectionModule.selectRowsByRange(0,this.gridObj.getRows().length),this.isInteracted=!0)},e.prototype.onClearAllInit=function(){"Details"===this.parent.view&&this.removeSelection()},e.prototype.onSelectionChanged=function(){t.removeClass([this.element],Di),this.parent.selectedItems.length>0&&t.addClass([this.element],Di)},e.prototype.onLayoutRefresh=function(){"Details"===this.parent.view&&this.adjustHeight()},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(){this.isRendered=!0},e.prototype.addEventListener=function(){this.parent.on(Ei,this.onFinalizeEnd,this),this.parent.on(_i,this.destroy,this),this.parent.on(Yi,this.onLayoutChange,this),this.parent.on(Ti,this.onPathChanged,this),this.parent.on(Pi,this.onCreateEnd,this),this.parent.on(gn,this.onDropInit,this),this.parent.on(Qi,this.onDetailsInit,this),this.parent.on(ki,this.onRefreshEnd,this),this.parent.on(Bi,this.onSearchFiles,this),this.parent.on(ji,this.onPropertyChanged,this),this.parent.on(Ni,this.onDeleteInit,this),this.parent.on(Mi,this.onDeleteEnd,this),this.parent.on(sn,this.onSelectedData,this),this.parent.on(Zi,this.onRenameInit,this),this.parent.on(en,this.onPathChanged,this),this.parent.on(Hi,this.onOpenInit,this),this.parent.on(cn,this.onSortColumn,this),this.parent.on(qi,this.onPathChanged,this),this.parent.on(rn,this.onPasteInit,this),this.parent.on(hn,this.onHideLayout,this),this.parent.on(Ki,this.onSelectAllInit,this),this.parent.on(Wi,this.onClearAllInit,this),this.parent.on(pn,this.onPathColumn,this),this.parent.on(zi,this.onSelectionChanged,this),this.parent.on(Ui,this.onBeforeRequest,this),this.parent.on(Fi,this.onAfterRequest,this),this.parent.on(on,this.onpasteEnd,this),this.parent.on(an,this.oncutCopyInit,this),this.parent.on($i,this.onMenuItemData,this),this.parent.on(Li,this.onDetailsResize,this),this.parent.on(Ai,this.onDetailsResize,this),this.parent.on(Vi,this.onLayoutRefresh,this)},e.prototype.removeEventListener=function(){this.parent.off(Ei,this.onFinalizeEnd),this.parent.off(_i,this.destroy),this.parent.off(Yi,this.onLayoutChange),this.parent.off(Ti,this.onPathChanged),this.parent.off(rn,this.onPasteInit),this.parent.off(Pi,this.onCreateEnd),this.parent.off(ki,this.onRefreshEnd),this.parent.off(Bi,this.onSearchFiles),this.parent.off(ji,this.onPropertyChanged),this.parent.off(Zi,this.onRenameInit),this.parent.off(en,this.onPathChanged),this.parent.off(Hi,this.onOpenInit),this.parent.off(cn,this.onSortColumn),this.parent.off(qi,this.onPathChanged),this.parent.off(hn,this.onHideLayout),this.parent.off(Ki,this.onSelectAllInit),this.parent.off(Wi,this.onClearAllInit),this.parent.off(Ni,this.onDeleteInit),this.parent.off(Mi,this.onDeleteEnd),this.parent.off(pn,this.onPathColumn),this.parent.off(zi,this.onSelectionChanged),this.parent.off(Ui,this.onBeforeRequest),this.parent.off(Fi,this.onAfterRequest),this.parent.off(on,this.onpasteEnd),this.parent.off(an,this.oncutCopyInit),this.parent.off(gn,this.onDropInit),this.parent.off(sn,this.onSelectedData),this.parent.off(Qi,this.onDetailsInit),this.parent.off($i,this.onMenuItemData),this.parent.off(Li,this.onDetailsResize),this.parent.off(Ai,this.onDetailsResize),this.parent.off(Vi,this.onLayoutRefresh)},e.prototype.onMenuItemData=function(e){this.parent.activeModule===this.getModuleName()&&(this.parent.itemData=[this.gridObj.getRowInfo(e.target).rowData])},e.prototype.onPasteInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.itemData=""!==this.parent.folderPath?this.gridObj.getSelectedRecords():[S(this.parent)])},e.prototype.onDetailsInit=function(){this.parent.activeModule===this.getModuleName()&&(0!==this.parent.selectedItems.length?this.parent.itemData=this.gridObj.getSelectedRecords():this.parent.itemData=[t.getValue(this.parent.path,this.parent.feParent)])},e.prototype.dragHelper=function(e){var t=e.sender.target.closest("tr.e-row");if(!t)return null;var i=t.getElementsByClassName("e-fe-text")[0].innerText;return t&&!t.querySelector(".e-active")&&this.selectRecords([i]),y(this.parent,t),this.parent.activeElements=[],this.parent.dragData=[],this.parent.dragData=this.gridObj.getSelectedRecords(),this.parent.dragPath=this.parent.path,this.parent.activeElements=this.gridObj.getSelectedRows(),z(this.parent),this.parent.virtualDragElement},e.prototype.onDetailsResize=function(){if("Details"===this.parent.view&&!this.parent.isMobile)for(var e=this.gridObj.getHeaderContent().querySelector(".e-headercontent").firstChild.childNodes[0],t=this.gridObj.getContent().querySelector(".e-content .e-table").children[0],i=this.gridObj.getColumns(),n=0;n<i.length;n++)"name"!==i[n].field&&"filterPath"!==i[n].field||(""===this.parent.breadcrumbbarModule.searchObj.element.value?this.element.clientWidth<=500?(e.children[n].setAttribute("style","width: 120px"),t.children[n].setAttribute("style","width: 120px")):this.element.clientWidth>500&&(e.children[n].setAttribute("style","width: auto"),t.children[n].setAttribute("style","width: auto")):this.element.clientWidth<=680?"name"===i[n].field?(e.children[n].setAttribute("style","width: 120px"),t.children[n].setAttribute("style","width: 120px")):(e.children[n].setAttribute("style","width: 180px"),t.children[n].setAttribute("style","width: 180px")):this.element.clientWidth>680&&(e.children[n].setAttribute("style","width: auto"),t.children[n].setAttribute("style","width: auto")))},e.prototype.createDragObj=function(){!this.parent.isMobile&&this.gridObj&&(this.parent.allowDragAndDrop?(this.dragObj&&this.dragObj.destroy(),this.dragObj=new t.Draggable(this.gridObj.element,{cursorAt:this.parent.dragCursorPosition,enableTailMode:!0,dragArea:this.parent.element,dragTarget:"."+Ut,drag:X.bind(this,this.parent),dragStart:W.bind(this,this.parent),dragStop:K.bind(this,this.parent),enableAutoScroll:!0,helper:this.dragHelper.bind(this)})):!this.parent.allowDragAndDrop&&this.dragObj&&this.dragObj.destroy())},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName())if(e.target.closest("tr")){var i=null;i=this.gridObj.getRowInfo(e.target).rowData,this.parent.dropPath=i.isFile?this.parent.path:i.filterPath.replace(/\\/g,"/")+i.name+"/",this.parent.dropData=i.isFile?i:this.gridObj.getRowInfo(e.target).rowData}else this.parent.dropPath=this.parent.path,this.parent.dropData=t.getValue(this.parent.dropPath,this.parent.feParent)},e.prototype.oncutCopyInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.activeRecords=this.gridObj.getSelectedRecords(),this.parent.activeElements=this.gridObj.getSelectedRows())},e.prototype.onpasteEnd=function(e){"Details"===this.parent.view&&(this.isPasteOperation=!0,this.parent.path===B(e)&&this.onPathChanged(e))},e.prototype.getModuleName=function(){return"detailsview"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.gridObj&&(this.unWireEvents(),this.gridObj.destroy()))},e.prototype.onSelected=function(e){this.addFocus(this.gridObj.selectedRowIndex),this.parent.activeModule="detailsview",this.islayoutChange||this.selectedRecords(),this.parent.notify(zi,{}),1===this.gridObj.getSelectedRowIndexes().length&&(this.firstItemIndex=this.gridObj.selectedRowIndex),this.gridObj.element.setAttribute("tabindex","-1"),this.triggerSelect("select",e);var i=this.gridObj.getRowByIndex(this.gridObj.selectedRowIndex);if(!t.isNullOrUndefined(i)&&!t.isNullOrUndefined(i.querySelector(".e-checkselect"))){if(1!==this.gridObj.getSelectedRowIndexes().length){var n=this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length-2];this.gridObj.getRowByIndex(n).querySelector(".e-checkselect").setAttribute("tabindex","-1")}i.querySelector(".e-rowcell.e-fe-checkbox").removeAttribute("tabindex")}t.isNullOrUndefined(this.gridObj)||t.isNullOrUndefined(this.gridObj.element.querySelector(".e-checkselectall"))||this.gridObj.element.querySelector(".e-checkselectall").setAttribute("tabindex","-1");var s=this.gridObj.getSelectedRowIndexes();if(!this.parent.allowMultiSelection)for(var a=0;a<s.length;a++)s[a]===this.gridObj.selectedRowIndex?this.gridObj.getRowByIndex(s[a]).setAttribute("tabindex","0"):this.gridObj.getRowByIndex(s[a]).removeAttribute("tabindex");var r=s.length;if(r>0){var o=this.gridObj.getRowsObject()[s[r-1]].data;this.parent.currentItemText=t.getValue("name",o)}var l=t.getValue("rowIndexes",e),h=t.getValue("enableSelectMultiTouch",this.gridObj.selectionModule);if(this.parent.isDevice&&t.isNullOrUndefined(l)&&e.target&&!h&&!e.target.closest(".e-headercell")&&(this.parent.isFile=t.getValue("isFile",e.data),this.parent.isFile||this.openContent(e.data)),this.parent.visitedItem=e.row,this.parent.allowMultiSelection&&!t.isNullOrUndefined(i)&&!t.isNullOrUndefined(i.querySelector(".e-checkselect"))){i.querySelector(".e-checkselect").focus()}this.islayoutChange||(this.isInteracted=!0)},e.prototype.onPathColumn=function(){if("Details"===this.parent.view&&!t.isNullOrUndefined(this.gridObj)){var e=this.gridObj.columns.length;if(""===this.parent.breadcrumbbarModule.searchObj.element.value){var i=JSON.parse(JSON.stringify(this.gridObj.columns));i[e-1].field&&"filterPath"===i[e-1].field&&(this.gridObj.columns.pop(),this.gridObj.refreshColumns())}}},e.prototype.selectedRecords=function(){this.parent.setProperties({selectedItems:[]},!0);for(var e=this.gridSelectNodes(),t=0;t<e.length;){var i=e[t];this.parent.selectedItems.push(this.getName(i)),t++}},e.prototype.getName=function(e){var i=t.getValue("name",e);if(""!==this.parent.breadcrumbbarModule.searchObj.element.value){i=t.getValue("filterPath",e).replace(/\\/g,"/").replace(this.parent.path,"")+i}return i},e.prototype.onDeSelection=function(e){if(!this.parent.allowMultiSelection&&t.isNullOrUndefined(e.data))this.gridObj.getRowByIndex(e.rowIndex).removeAttribute("tabindex");else if(this.gridObj.getSelectedRowIndexes().length>1){var i=this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length-2];this.gridObj.getRowByIndex(i).querySelector(".e-checkselect").removeAttribute("tabindex")}-1===this.gridObj.selectedRowIndex&&this.gridObj.element.setAttribute("tabindex","0"),this.isInteracted?(this.selectedRecords(),0===this.parent.selectedItems.length&&(t.setValue("enableSelectMultiTouch",!1,this.gridObj.selectionModule),t.removeClass([this.parent.element],wt)),this.parent.notify(zi,{}),this.triggerSelect("unselect",e),this.parent.visitedItem=null):this.isInteracted=!0},e.prototype.triggerSelect=function(e,t){var i={action:e,fileDetails:t.data};this.parent.trigger("fileSelect",i)},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new t.KeyboardEvents(this.gridObj.element,{keyAction:this.keyupHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),this.keyboardDownModule=new t.KeyboardEvents(this.element,{keyAction:this.keydownHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),t.EventHandler.add(this.gridObj.element,"blur",this.removeFocus,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),this.keyboardModule.destroy(),this.keyboardDownModule.destroy(),t.EventHandler.remove(this.gridObj.element,"blur",this.removeFocus)},e.prototype.wireClickEvent=function(e){if(e){var i=this,n=this.gridObj.getContent();this.clickObj=new t.Touch(n,{tap:function(e){1===e.tapCount&&e.originalEvent.target.classList.contains("e-content")&&i.onClearAllInit()},tapHold:function(e){if(i.parent.isDevice){e.originalEvent.preventDefault(),i.parent.allowMultiSelection&&(t.setValue("enableSelectMultiTouch",i.parent.allowMultiSelection,i.gridObj.selectionModule),t.addClass([i.parent.element],wt));var n=e.originalEvent.target;if(n){var s=t.closest(n,"."+Ut),a=i.gridObj.getRows().indexOf(s);i.gridObj.selectRow(a)}}}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.removeSelection=function(){t.removeClass([this.parent.element],wt),this.gridObj.clearSelection(),this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(zi,{}),-1===this.gridObj.selectedRowIndex&&(this.startIndex=null)},e.prototype.removeFocus=function(){this.addFocus(null)},e.prototype.getFocusedItemIndex=function(){return t.isNullOrUndefined(this.getFocusedItem())?null:parseInt(this.getFocusedItem().getAttribute("aria-rowindex"),10)},e.prototype.keydownHandler=function(e){if(this.isRendered)switch(e.action){case"end":case"home":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"moveDown":case"moveUp":e.preventDefault()}},e.prototype.keyupHandler=function(e){if(this.isRendered){e.preventDefault();var i=e.action,n=P(this.parent,this.gridObj.dataSource),s=n.length,a=(this.getFocusedItem(),this.getFocusedItemIndex()),r=this.gridObj.selectedRowIndex,o=this.gridObj.getSelectedRowIndexes();switch(i){case"altEnter":he(this.parent,this.parent.selectedItems,this.parent.path,"details");break;case"esc":f(this.parent);break;case"del":case"shiftdel":if(this.parent.selectedItems&&this.parent.selectedItems.length>0){this.parent.itemData=this.gridObj.getSelectedRecords();for(var l=this.parent.itemData,h=0;h<l.length;h++)if(!te(l[h]))return void $(this.parent,l[h]);we(this.parent,"Delete")}break;case"enter":if(-1===this.gridObj.selectedRowIndex)break;var d=this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;if(d){var c=JSON.parse(JSON.stringify(d));this.openContent(c)}break;case"ctrlC":C(this.parent);break;case"ctrlV":this.parent.folderPath="",U(this.parent);break;case"ctrlX":j(this.parent);break;case"ctrlD":if(0!==this.parent.selectedItems.length){this.parent.itemData=this.gridObj.getSelectedRecords();for(l=this.parent.itemData,h=0;h<l.length;h++)if(!se(l[h]))return void $(this.parent,l[h]);Oe(this.parent,this.parent.path,this.parent.selectedItems)}break;case"f2":1===this.parent.selectedItems.length&&(this.updateRenameData(),Q(this.parent));break;case"ctrlA":!t.isNullOrUndefined(n[0])&&this.parent.allowMultiSelection&&this.gridObj.selectionModule.selectRowsByRange(0,n.length-1);break;case"ctrlHome":case"tab":if(!t.isNullOrUndefined(n[0]))if(this.parent.allowMultiSelection||"ctrlHome"!==e.action){if(-1!==this.gridObj.selectedRowIndex&&"tab"===e.action)return;this.addFocus(0)}else this.gridObj.selectRow(0);break;case"ctrlEnd":t.isNullOrUndefined(n[0])||(this.parent.allowMultiSelection?this.addFocus(s-1):this.gridObj.selectRow(s-1));break;case"shiftHome":case"shiftEnd":case"csHome":case"csEnd":this.parent.allowMultiSelection?t.isNullOrUndefined(n[0])||(t.isNullOrUndefined(r)||-1===r?"csHome"===e.action||"shiftHome"===e.action?this.gridObj.selectRow(0):this.gridObj.selectionModule.selectRowsByRange(0,n.length-1):this.checkRowsKey(n,r,null,e)):this.gridObj.selectRow("shiftHome"===e.action||"csHome"===e.action?0:n.length-1);break;case"space":case"csSpace":case"shiftSpace":case"ctrlSpace":this.spaceSelection(o,a,r,e);break;case"csUp":case"csDown":case"shiftUp":case"shiftDown":this.shiftMoveMethod(n,r,a,o,e);break;case"ctrlUp":case"ctrlDown":this.parent.allowMultiSelection?this.ctrlMoveFunction(n,e,r):this.moveFunction(n,e,r);break;case"home":this.parent.selectedItems=[t.getValue("name",n[0])],this.selectRecords([t.getValue("name",n[0])]);break;case"moveUp":case"moveDown":this.moveFunction(n,e,r);break;case"end":this.parent.selectedItems=[t.getValue("name",n[s-1])],this.selectRecords(this.parent.selectedItems)}}},e.prototype.gridSelectNodes=function(){return this.gridObj.getSelectedRecords()},e.prototype.updateRenameData=function(){var e=this.gridSelectNodes()[0];this.parent.itemData=[e],this.parent.isFile=t.getValue("isFile",e),this.parent.filterPath=t.getValue("filterPath",e)},e.prototype.shiftMoveMethod=function(e,t,i,n,s){this.parent.allowMultiSelection?-1!==t||"csUp"!==s.action&&"csDown"!==s.action?-1===t||i===t||("csUp"===s.action||"csDown"===s.action)&&this.isSelected(n,i)?this.shiftSelectedItem(t,n,e,s):this.shiftSelectFocusItem(t,i,n,s):this.ctrlMoveFunction(e,s,t):this.moveFunction(e,s,t)},e.prototype.moveFunction=function(e,i,n){!t.isNullOrUndefined(this.getFocusedItem())&&this.parent.allowMultiSelection?"moveDown"===i.action?this.gridObj.selectRow(this.getFocusedItemIndex()+1):this.gridObj.selectRow(this.getFocusedItemIndex()-1):t.isNullOrUndefined(n)||-1===n?t.isNullOrUndefined(e[0])||this.gridObj.selectRow(0):"moveDown"===i.action||"ctrlDown"===i.action||"shiftDown"===i.action||"csDown"===i.action?this.gridObj.selectRow(n+(n!==e.length-1?1:0)):this.gridObj.selectRow(n-(0!==n?1:0))},e.prototype.spaceSelection=function(e,i,n,s){if(this.isSelected(e,i)||-1===n||"shiftSpace"!==s.action&&"csSpace"!==s.action)if(t.isNullOrUndefined(this.getFocusedItem())||i===n)if(-1!==n&&"ctrlSpace"===s.action&&this.parent.allowMultiSelection){var a=n;e.pop(),this.gridObj.selectRows(e),this.addFocus(a)}else"shiftSpace"===s.action&&this.gridObj.selectRow(n);else e.push(this.getFocusedItemIndex()),this.gridObj.selectRows(e);else i<n?this.gridObj.selectionModule.selectRowsByRange(i,n):this.gridObj.selectionModule.selectRowsByRange(n,i)},e.prototype.ctrlMoveFunction=function(e,i,n){var s;if(t.isNullOrUndefined(this.getFocusedItem()))t.isNullOrUndefined(n)||-1===n?t.isNullOrUndefined(e[0])||(s=0):s="ctrlDown"===i.action||"csDown"===i.action?n+(n<e.length?1:0):n-(n<1?0:1);else{var a=this.getFocusedItemIndex();s="ctrlDown"===i.action||"csDown"===i.action?a+(a<e.length-1?1:0):a-(a<1?0:1)}this.addFocus(s)},e.prototype.checkRowsKey=function(e,i,n,s){"Uncheck"===this.gridObj.checkAllRows||"Intermediate"===this.gridObj.checkAllRows?"csHome"!==s.action&&"csEnd"!==s.action?(t.isNullOrUndefined(this.startIndex)&&this.firstItemIndex!==i&&(this.firstItemIndex=i),"shiftEnd"===s.action?this.gridObj.selectionModule.selectRowsByRange(this.firstItemIndex,e.length-1):this.gridObj.selectionModule.selectRowsByRange(0,this.firstItemIndex),this.startIndex=i):"csEnd"===s.action?this.gridObj.selectRows(this.InnerItems(t.isNullOrUndefined(i)?0:i,t.isNullOrUndefined(n)?e.length-1:n,s)):t.isNullOrUndefined(i)?this.gridObj.selectRow(0):this.gridObj.selectRows(this.InnerItems(t.isNullOrUndefined(n)?0:n,i,s)):this.gridObj.selectionModule.selectRow("shiftHome"===s.action||"csHome"===s.action?0:e.length-1)},e.prototype.InnerItems=function(e,t,i){var n=this.gridObj.getSelectedRowIndexes();if("csEnd"===i.action)for(var s=e+1;s<=t;s++)n.push(s);else for(s=t-1;e<=s;s--)n.push(s);return n},e.prototype.shiftSelectFocusItem=function(e,i,n,s){var a,r;a=i+("shiftDown"===s.action||"csDown"===s.action?1:-1),(r=t.isNullOrUndefined(this.startIndex)?e:n[0])===a?this.gridObj.selectRow(r):r<a?"shiftDown"===s.action||"csDown"===s.action?this.gridObj.selectionModule.selectRowsByRange(r,a):this.gridObj.selectionModule.selectRowsByRange(a,r):"shiftDown"===s.action||"csDown"===s.action?this.gridObj.selectionModule.selectRowsByRange(a,r):this.gridObj.selectionModule.selectRowsByRange(r,a),this.startIndex=this.gridObj.selectedRowIndex},e.prototype.addFocus=function(e){var i=this.getFocusedItem(),n=this.gridObj.getRowByIndex(e);i&&t.removeClass([i],[Lt,At]),t.isNullOrUndefined(n)||t.addClass([n],[Lt,At])},e.prototype.getFocusedItem=function(){return t.select("."+At,this.element)},e.prototype.isSelected=function(e,t){for(var i=!1,n=0;n<=e.length-1;n++)if(e[n]===t){i=!0;break}return i},e.prototype.shiftSelectedItem=function(e,i,n,s){-1===e?this.gridObj.selectRow(0):t.isNullOrUndefined(this.startIndex)&&s.shiftKey?(this.startIndex=this.gridObj.selectedRowIndex,this.gridObj.selectRows([e,"shiftDown"===s.action||"csDown"===s.action?e+(e!==n.length-1?1:0):e-(0!==e?1:0)])):"shiftDown"===s.action||"shiftUp"===s.action?("shiftDown"===s.action&&-1===i.indexOf(e+1)?e!==n.length-1&&i.push(e+1):"shiftUp"===s.action&&-1===i.indexOf(e-1)?0!==e&&i.push(e-1):i.pop(),this.gridObj.selectRows(i)):"csDown"===s.action?this.isSelected(i,this.getFocusedItemIndex()+1)?this.addFocus(this.getFocusedItemIndex()+1):(i.push(this.getFocusedItemIndex()+1),this.gridObj.selectRows(i)):this.isSelected(i,this.getFocusedItemIndex()-1)?this.addFocus(this.getFocusedItemIndex()-1):(i.push(this.getFocusedItemIndex()-1),this.gridObj.selectRows(i))},e}();e.AjaxSettings=Te,e.toolbarItems=Fe,e.ToolbarSettings=Ve,e.SearchSettings=qe,e.columnArray=We,e.DetailsViewSettings=Ge,e.fileItems=Xe,e.folderItems=Qe,e.layoutItems=$e,e.ContextMenuSettings=Ze,e.NavigationPaneSettings=it,e.UploadSettings=at,e.TOOLBAR_ID=rt,e.LAYOUT_ID="_layout",e.TREE_ID=ot,e.GRID_ID=lt,e.LARGEICON_ID=ht,e.DIALOG_ID=dt,e.ALT_DIALOG_ID="_alt_dialog",e.IMG_DIALOG_ID=ct,e.EXTN_DIALOG_ID=pt,e.UPLOAD_DIALOG_ID=ut,e.RETRY_DIALOG_ID="_retry_dialog",e.CONTEXT_MENU_ID=ft,e.SORTBY_ID="_sortby",e.VIEW_ID="_view",e.SPLITTER_ID="_splitter",e.CONTENT_ID=gt,e.BREADCRUMBBAR_ID=mt,e.UPLOAD_ID=bt,e.RETRY_ID="_retry",e.SEARCH_ID="_search",e.ROOT="e-filemanager",e.CONTROL="e-control",e.CHECK_SELECT=yt,e.ROOT_POPUP=vt,e.MOBILE=Ot,e.MULTI_SELECT=wt,e.FILTER=It,e.LAYOUT="e-layout",e.LAYOUT_CONTENT=Dt,e.LARGE_ICONS=St,e.TB_ITEM=Ct,e.LIST_ITEM=jt,e.LIST_TEXT=xt,e.LIST_PARENT=Et,e.TB_OPTION_TICK=Pt,e.TB_OPTION_DOT=Rt,e.BLUR=Nt,e.ACTIVE=Mt,e.HOVER=kt,e.FOCUS=Lt,e.FOCUSED=At,e.CHECK=Tt,e.FRAME="e-frame",e.CB_WRAP=_t,e.ROW=Ut,e.ROWCELL="e-rowcell",e.EMPTY=Ft,e.EMPTY_CONTENT=Vt,e.EMPTY_INNER_CONTENT=Bt,e.CLONE=Ht,e.DROP_FOLDER=qt,e.DROP_FILE=zt,e.FOLDER=Kt,e.ICON_IMAGE=Wt,e.ICON_MUSIC=Gt,e.ICON_VIDEO=Yt,e.LARGE_ICON=Jt,e.LARGE_EMPTY_FOLDER=Xt,e.LARGE_EMPTY_FOLDER_TWO="e-empty-icon.e-fe-folder",e.LARGE_ICON_FOLDER="e-fe-folder",e.SELECTED_ITEMS="e-items",e.TEXT_CONTENT="e-text-content",e.GRID_HEADER="e-gridheader",e.TEMPLATE_CELL="e-templatecell",e.TREE_VIEW=Qt,e.MENU_ITEM="e-menu-item",e.MENU_ICON=$t,e.SUBMENU_ICON="e-caret",e.GRID_VIEW=Zt,e.ICON_VIEW=ei,e.ICON_OPEN=ti,e.ICON_UPLOAD=ii,e.ICON_CUT=ni,e.ICON_COPY=si,e.ICON_PASTE=ai,e.ICON_DELETE=ri,e.ICON_RENAME=oi,e.ICON_NEWFOLDER=li,e.ICON_DETAILS=hi,e.ICON_SHORTBY=di,e.ICON_REFRESH=ci,e.ICON_SELECTALL=pi,e.ICON_DOWNLOAD=ui,e.ICON_OPTIONS="e-icons e-fe-options",e.ICON_GRID=fi,e.ICON_LARGE=gi,e.ICON_BREADCRUMB=mi,e.ICON_CLEAR=bi,e.ICON_DROP_IN="e-icons e-fe-drop-in",e.ICON_DROP_OUT="e-icons e-fe-drop-out",e.ICON_NO_DROP="e-icons e-fe-no-drop",e.ICONS=yi,e.DETAILS_LABEL="e-detailslabel",e.ERROR_CONTENT=vi,e.STATUS="e-status",e.BREADCRUMBS="e-address",e.RTL="e-rtl",e.DISPLAY_NONE=Oi,e.COLLAPSED="e-node-collapsed",e.FULLROW=wi,e.ICON_COLLAPSIBLE="e-icon-collapsible",e.SPLIT_BAR=Ii,e.HEADER_CHECK=Di,e.OVERLAY="e-fe-overlay",e.VALUE=Si,e.isFile=Ci,e.modelChanged=ji,e.initialEnd=xi,e.finalizeEnd=Ei,e.createEnd=Pi,e.beforeDelete="before-delete",e.pathDrag=Ri,e.deleteInit=Ni,e.deleteEnd=Mi,e.refreshEnd=ki,e.resizeEnd=Li,e.splitterResize=Ai,e.pathChanged=Ti,e.destroy=_i,e.beforeRequest=Ui,e.upload="upload",e.afterRequest=Fi,e.download="download",e.layoutRefresh=Vi,e.search=Bi,e.openInit=Hi,e.openEnd=qi,e.selectionChanged=zi,e.selectAllInit=Ki,e.clearAllInit=Wi,e.clearPathInit=Gi,e.layoutChange=Yi,e.sortByChange=Ji,e.nodeExpand=Xi,e.detailsInit=Qi,e.menuItemData=$i,e.renameInit=Zi,e.renameEnd=en,e.showPaste=tn,e.hidePaste=nn,e.selectedData=sn,e.cutCopyInit=an,e.pasteInit=rn,e.pasteEnd=on,e.cutEnd=ln,e.hideLayout=hn,e.updateTreeSelection=dn,e.treeSelect="select-node",e.sortColumn=cn,e.pathColumn=pn,e.searchTextChange=un,e.beforeDownload="before-download",e.downloadInit=fn,e.dropInit=gn,e.dragEnd=mn,e.dropPath=bn,e.dragHelper="drag-helper",e.dragging=yn,e.FileManager=Cn,e.Toolbar=jn,e.BreadCrumbBar=On,e.NavigationPane=xn,e.DetailsView=En,e.LargeIconsView=vn,e.createDialog=we,e.createExtDialog=Ie,e.createImageDialog=Me,e.ContextMenu=wn,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-filemanager.umd.min.js.map
