{"version":3,"file":"ej2-grids.umd.min.js","sources":["../src/grid/services/aria-service.js","../src/grid/actions/print.js","../src/grid/base/util.js","../src/grid/actions/aggregate.js","../src/grid/renderer/datepicker-edit-cell.js","../src/grid/services/value-formatter.js","../src/grid/models/column.js","../src/grid/base/constant.js","../src/grid/base/enum.js","../src/grid/actions/data.js","../src/grid/models/row.js","../src/grid/models/cell.js","../src/grid/renderer/cell-merge-renderer.js","../src/grid/renderer/row-renderer.js","../src/grid/services/row-model-generator.js","../src/grid/services/summary-model-generator.js","../src/grid/services/group-model-generator.js","../src/grid/renderer/content-renderer.js","../src/grid/renderer/header-renderer.js","../src/grid/renderer/cell-renderer.js","../src/grid/renderer/header-cell-renderer.js","../src/grid/renderer/stacked-cell-renderer.js","../src/grid/renderer/indent-cell-renderer.js","../src/grid/renderer/caption-cell-renderer.js","../src/grid/renderer/expand-cell-renderer.js","../src/grid/renderer/header-indent-renderer.js","../src/grid/renderer/detail-header-indent-renderer.js","../src/grid/renderer/detail-expand-cell-renderer.js","../src/grid/renderer/row-drag-drop-renderer.js","../src/grid/renderer/row-drag-header-indent-render.js","../src/grid/renderer/render.js","../src/grid/services/cell-render-factory.js","../src/grid/services/service-locator.js","../src/grid/services/renderer-factory.js","../src/grid/services/width-controller.js","../src/grid/services/focus-strategy.js","../src/grid/models/page-settings.js","../src/grid/models/column-chooser-settings.js","../src/grid/actions/selection.js","../src/grid/actions/search.js","../src/grid/actions/show-hide.js","../src/grid/actions/scroll.js","../src/grid/models/aggregate.js","../src/grid/actions/clipboard.js","../src/grid/actions/blazor-action.js","../src/grid/base/grid.js","../src/grid/common/checkbox-filter-base.js","../src/grid/common/excel-filter-base.js","../src/grid/actions/sort.js","../src/pager/numeric-container.js","../src/pager/pager-message.js","../src/pager/pager.js","../src/pager/pager-dropdown.js","../src/pager/external-message.js","../src/grid/actions/page.js","../src/grid/renderer/filter-cell-renderer.js","../src/grid/renderer/filter-menu-operator.js","../src/grid/renderer/string-filter-ui.js","../src/grid/renderer/number-filter-ui.js","../src/grid/renderer/boolean-filter-ui.js","../src/grid/renderer/date-filter-ui.js","../src/grid/renderer/filter-menu-renderer.js","../src/grid/actions/checkbox-filter.js","../src/grid/actions/excel-filter.js","../src/grid/actions/filter.js","../src/grid/actions/resize.js","../src/grid/actions/reorder.js","../src/grid/actions/row-reorder.js","../src/grid/actions/group.js","../src/grid/actions/detail-row.js","../src/grid/actions/toolbar.js","../src/grid/renderer/footer-renderer.js","../src/grid/renderer/summary-cell-renderer.js","../src/grid/services/intersection-observer.js","../src/grid/services/virtual-row-model-generator.js","../src/grid/renderer/virtual-content-renderer.js","../src/grid/actions/virtual-scroll.js","../src/grid/renderer/inline-edit-renderer.js","../src/grid/renderer/batch-edit-renderer.js","../src/grid/renderer/dialog-edit-renderer.js","../src/grid/renderer/edit-renderer.js","../src/grid/renderer/boolean-edit-cell.js","../src/grid/renderer/dropdown-edit-cell.js","../src/grid/renderer/numeric-edit-cell.js","../src/grid/renderer/default-edit-cell.js","../src/grid/actions/normal-edit.js","../src/grid/actions/inline-edit.js","../src/grid/actions/batch-edit.js","../src/grid/actions/dialog-edit.js","../src/grid/renderer/template-edit-cell.js","../src/grid/actions/edit.js","../src/grid/actions/column-chooser.js","../src/grid/actions/export-helper.js","../src/grid/actions/excel-export.js","../src/grid/actions/pdf-export.js","../src/grid/renderer/command-column-renderer.js","../src/grid/actions/command-column.js","../src/grid/actions/context-menu.js","../src/grid/services/freeze-row-model-generator.js","../src/grid/renderer/freeze-renderer.js","../src/grid/renderer/virtual-freeze-renderer.js","../src/grid/actions/freeze.js","../src/grid/actions/column-menu.js","../src/grid/actions/foreign-key.js","../src/grid/actions/logger.js","../src/grid/actions/infinite-scroll.js","../src/grid/renderer/group-lazy-load-renderer.js","../src/grid/actions/lazy-load-group.js","../src/grid/renderer/autocomplete-edit-cell.js","../src/grid/renderer/combobox-edit-cell.js","../src/grid/renderer/multiselect-edit-cell.js","../src/grid/renderer/timepicker-edit-cell.js","../src/grid/renderer/toggleswitch-edit-cell.js","../src/grid/renderer/inputmask-edit-cell.js"],"sourcesContent":["/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        for (var i = 0; i < props.length; i++) {\n            setStateAndProperties(target, config[props[i]], options[props[i]]);\n        }\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove && target) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount',\n    rowcount: 'aria-rowcount'\n};\n","import { print as printWindow, createElement, detach, classList, selectAll } from '@syncfusion/ej2-base';\nimport { getPrintGridModel } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\nimport { Deferred } from '@syncfusion/ej2-data';\n/**\n * @hidden\n */\nexport function getCloneProperties() {\n    return ['aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString', 'enableRtl',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging', 'hierarchyPrintMode', 'searchSettings',\n        'queryCellInfo', 'beforeDataBound'];\n}\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.defered = new Deferred();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.isContentReady(), this);\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.on(events.hierarchyPrint, this.hierarchyPrint, this);\n        this.scrollModule = scrollModule;\n    }\n    Print.prototype.isContentReady = function () {\n        var _this = this;\n        if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === 'None' || !this.parent.childGrid)) {\n            return this.contentReady;\n        }\n        return function () {\n            _this.defered.promise.then(function () {\n                _this.contentReady();\n            });\n            if (_this.isPrintGrid()) {\n                _this.hierarchyPrint();\n            }\n        };\n    };\n    Print.prototype.hierarchyPrint = function () {\n        this.removeColGroup(this.parent);\n        var printGridObj = window.printGridObj;\n        if (printGridObj && !printGridObj.element.querySelector('[aria-busy=true')) {\n            printGridObj.printModule.defered.resolve();\n        }\n    };\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](grid/#printmode-string/).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        document.body.appendChild(element);\n        var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));\n        /* tslint:disable-next-line:no-any */\n        if (this.parent.isAngular) {\n            /* tslint:disable-next-line:no-any */\n            printGrid.viewContainerRef = this.parent.viewContainerRef;\n        }\n        /* tslint:disable:no-empty */\n        printGrid.load = function () { };\n        printGrid.query = gObj.getQuery().clone();\n        window.printGridObj = printGrid;\n        printGrid.isPrinting = true;\n        var modules = printGrid.getInjectedModules();\n        var injectedModues = gObj.getInjectedModules();\n        if (!modules || modules.length !== injectedModues.length) {\n            printGrid.setInjectedModules(injectedModues);\n        }\n        gObj.notify(events.printGridInit, { element: element, printgrid: printGrid });\n        this.parent.log('exporting_begin', this.getModuleName());\n        printGrid.registeredTemplate = this.parent.registeredTemplate;\n        printGrid.appendTo(element);\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false,\n                hierarchyPrintMode: gObj.hierarchyPrintMode\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') { // if scroller enabled\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.e-content');\n            var headerDiv = gObj.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj);\n            }\n        }\n        // hide horizontal scroll\n        for (var _i = 0, _a = [].slice.call(gObj.element.querySelectorAll('.e-content')); _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.overflowX = 'hidden';\n        }\n        // Hide the waiting popup\n        var waitingPop = gObj.element.querySelectorAll('.e-spin-show');\n        for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {\n            var element = _c[_b];\n            classList(element, ['e-spin-hide'], ['e-spin-show']);\n        }\n        this.printGridElement(gObj);\n        gObj.isPrinting = false;\n        delete window.printGridObj;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n        this.parent.log('exporting_complete', this.getModuleName());\n    };\n    Print.prototype.printGridElement = function (gObj) {\n        classList(gObj.element, ['e-print-grid-layout'], ['e-print-grid']);\n        if (gObj.isPrinting) {\n            detach(gObj.element);\n        }\n        this.printWind = printWindow(gObj.element, this.printWind);\n    };\n    Print.prototype.removeColGroup = function (gObj) {\n        var depth = gObj.groupSettings.columns.length;\n        var element = gObj.element;\n        var id = '#' + gObj.element.id;\n        if (!depth) {\n            return;\n        }\n        var groupCaption = selectAll(id + \"captioncell.e-groupcaption\", element);\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = selectAll(\"colgroup\" + id + \"colGroup\", element);\n        var contentColGroups = selectAll('.e-content colgroup', element);\n        this.hideColGroup(colGroups, depth);\n        this.hideColGroup(contentColGroups, depth);\n    };\n    Print.prototype.hideColGroup = function (colGroups, depth) {\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].children[j].style.display = 'none';\n            }\n        }\n    };\n    /**\n     * To destroy the print\n     * @hidden\n     */\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent.isPrinting;\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.off(events.hierarchyPrint, this.hierarchyPrint);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = getCloneProperties().concat([events.beforePrint, events.printComplete, events.load]);\n    return Print;\n}());\nexport { Print };\n","import { ChildProperty, compile as baseTemplateComplier, setValue, Internationalization, isUndefined, closest } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { isObject, isBlazor, Browser, select, selectAll } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition, calculatePosition } from '@syncfusion/ej2-popups';\nimport { Print } from '../actions/print';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, data);\n}\n/**\n * Defines the method used to apply custom header cell values from external function and display this on each header cell rendered.\n * @param  {string} field\n * @param  {IColumn} column\n * @hidden\n */\nexport function headerValueAccessor(field, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, column);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function isExportColumns(exportProperties) {\n    return !isNullOrUndefined(exportProperties) &&\n        !isNullOrUndefined(exportProperties.columns) && exportProperties.columns.length > 0;\n}\n/**\n * @hidden\n */\nexport function updateColumnTypeForExportColumns(exportProperties, gObj) {\n    var exportColumns = exportProperties.columns;\n    var gridColumns = gObj.columns;\n    for (var i = 0; i < exportColumns.length; i++) {\n        if (gridColumns.length - 1 >= i) {\n            if (gridColumns[i].columns) {\n                for (var j = 0; j < gridColumns[i].columns.length; j++) {\n                    exportColumns[i].columns[j].type = gridColumns[i].columns[j].type;\n                }\n            }\n            else {\n                exportColumns[i].type = gridColumns[i].type;\n            }\n        }\n    }\n}\n/**\n * @hidden\n */\nexport function updatecloneRow(grid) {\n    var nRows = [];\n    var actualRows = grid.vRows;\n    for (var i = 0; i < actualRows.length; i++) {\n        if (actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n        }\n        else if (!actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n            if (!actualRows[i].isExpand && actualRows[i].isCaptionRow) {\n                i += getCollapsedRowsCount(actualRows[i], grid);\n            }\n        }\n    }\n    grid.vcRows = nRows;\n}\n/**\n * @hidden\n */\nvar count = 0;\nexport function getCollapsedRowsCount(val, grid) {\n    count = 0;\n    var gSummary = 'gSummary';\n    var total = 'count';\n    var gLen = grid.groupSettings.columns.length;\n    var records = 'records';\n    var items = 'items';\n    var value = val[gSummary];\n    var dataRowCnt = 0;\n    var agrCnt = 'aggregatesCount';\n    if (value === val.data[total]) {\n        if (grid.groupSettings.columns.length && !isNullOrUndefined(val[agrCnt]) && val[agrCnt]) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += (val.indent !== 0 && (value) < 2) ? (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent) * val[agrCnt])) :\n                    (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent - 1) * val[agrCnt])) + val[agrCnt];\n            }\n            else if (grid.groupSettings.columns.length === 1) {\n                count += (val[gSummary] * (gLen - val.indent)) + val[agrCnt];\n            }\n        }\n        else if (grid.groupSettings.columns.length) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += val[gSummary] * (grid.groupSettings.columns.length - val.indent);\n            }\n            else {\n                count += val[gSummary];\n            }\n        }\n        return count;\n    }\n    else {\n        for (var i = 0, len = val.data[items].length; i < len; i++) {\n            var gLevel = val.data[items][i];\n            count += gLevel[items].length + ((gLen !== grid.columns.length) &&\n                !isNullOrUndefined(gLevel[items][records]) ? gLevel[items][records].length : 0);\n            dataRowCnt += (!isNullOrUndefined(gLevel[items][records]) && !isNullOrUndefined(val[agrCnt])) ? gLevel[items][records].length :\n                gLevel[items].length;\n            if (gLevel[items].GroupGuid && gLevel[items].childLevels !== 0) {\n                recursive(gLevel);\n            }\n        }\n        count += val.data[items].length;\n        if (!isNullOrUndefined(val[agrCnt])) {\n            if (val[agrCnt] && count && dataRowCnt !== 0) {\n                count += ((count - dataRowCnt) * val[agrCnt]) + val[agrCnt];\n            }\n        }\n    }\n    return count;\n}\n/**\n * @hidden\n */\nexport function recursive(row) {\n    var items = 'items';\n    var rCount = 'count';\n    for (var j = 0, length_1 = row[items].length; j < length_1; j++) {\n        var nLevel = row[items][j];\n        count += nLevel[rCount];\n        if (nLevel[items].childLevels !== 0) {\n            recursive(nLevel);\n        }\n    }\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function iterateExtend(array) {\n    var obj = [];\n    for (var i = 0; i < array.length; i++) {\n        obj.push(baseExtend({}, getActualProperties(array[i]), {}, true));\n    }\n    return obj;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    var values = Object.keys(moved);\n    for (var i = 0; i < values.length; i++) {\n        if (exclude && exclude.indexOf(values[i]) !== -1) {\n            delete moved[values[i]];\n        }\n    }\n    return moved;\n}\n/** @hidden */\nexport function setColumnIndex(columnModel, ind) {\n    if (ind === void 0) { ind = 0; }\n    for (var i = 0, len = columnModel.length; i < len; i++) {\n        if (columnModel[i].columns) {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n            ind = setColumnIndex(columnModel[i].columns, ind);\n        }\n        else {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n        }\n    }\n    return ind;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth, gObj) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] }, gObj);\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c], gObj);\n            }\n            else {\n                columns[c].columns = prepareColumns(columns[c].columns, null, gObj);\n                column = new Column(columns[c], gObj);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        if (column.type && column.type.toLowerCase() === 'checkbox') {\n            column.allowReordering = false;\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = (typeof column.valueAccessor === 'string' ? getValue(column.valueAccessor, window)\n            : column.valueAccessor) || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        var temp = column.customAggregate;\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n        }\n        return temp ? temp.call(context, data, column) : '';\n    }\n    return (column.field in data || data instanceof Array) ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/** @hidden */\nexport function getComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/\\./g, '___');\n}\n/** @hidden */\nexport function setComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/___/g, '.');\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = select('#' + inst.element.id + 'EditConfirm', inst.element);\n    return inst.editSettings.mode === 'Batch' &&\n        (selectAll('.e-updatedtd', inst.element).length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column, isServerRendered) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    var format = 'format';\n    var args;\n    if (column.type === 'date' || column.type === 'datetime') {\n        args = { type: column.type, skeleton: column.format };\n        if (isBlazor() && isServerRendered) {\n            var isServer = 'isServerRendered';\n            args[isServer] = isServerRendered;\n        }\n        if ((typeof (column.format) === 'string') && column.format !== 'yMd') {\n            args[format] = column.format;\n        }\n    }\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction(args));\n            column.setParser(fmtr.getParserFunction(args));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction(args));\n            column.setParser(fmtr.getParserFunction(args));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj, grid) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos;\n    if (!grid.enableRtl) {\n        newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n        dialogObj.element.style.display = elementVisible;\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n        }\n        else {\n            dialogObj.element.style.left = leftPos + -4 + 'px';\n        }\n    }\n    else {\n        newpos = calculatePosition(target, 'left', 'bottom');\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 35 + 'px';\n        dialogObj.element.style.display = elementVisible;\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) + -16 + 'px';\n        }\n        else {\n            dialogObj.element.style.left = leftPos - 16 + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    var input = span.previousSibling;\n    if (span.classList.contains('e-check')) {\n        input.checked = false;\n        classList(span, ['e-uncheck'], ['e-check']);\n    }\n    else {\n        input.checked = true;\n        classList(span, ['e-check'], ['e-uncheck']);\n    }\n}\n/** @hidden */\nexport function setChecked(elem, checked) {\n    elem.checked = checked;\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n * @param row - Grid Row model object.\n * @param columns - Foreign columns array.\n * @param data - Updated Row data.\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    for (var i = 0; i < columns.length; i++) {\n        setValue(columns[i].field, getForeignData(columns[i], data), row.foreignKeyData);\n    }\n    var cells = row.cells;\n    for (var i = 0; i < cells.length; i++) {\n        if (cells[i].isForeignKey) {\n            setValue('foreignKeyData', getValue(cells[i].column.field, row.foreignKeyData), cells[i]);\n        }\n    }\n}\n/**\n * Get the foreign data for the corresponding cell value.\n * @param column - Foreign Key column\n * @param data - Row data.\n * @param lValue - cell value.\n * @param foreignData - foreign data source.\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (!isNullOrUndefined(lValue) ? lValue : valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || ((column.dataSource instanceof DataManager) && column.dataSource.dataSource.json.length ?\n        column.dataSource.dataSource.json : column.columnData);\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n * @param foreignKeyValue - Defines ForeignKeyValue.\n * @param columns - Array of column object.\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @hidden\n * @param filterObject - Defines predicate model object\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    if (isNullOrUndefined(filterObject.value)) {\n        datePredicate = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        return datePredicate;\n    }\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @hidden\n */\nexport function renderMovable(ele, frzCols, gObj) {\n    frzCols = frzCols && gObj && gObj.isRowDragable() ? frzCols + 1 : frzCols;\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\n/**\n * @hidden\n */\nexport function isGroupAdaptive(grid) {\n    return grid.enableVirtualization && grid.groupSettings.columns.length > 0 && grid.isVirtualAdaptive;\n}\n/**\n * @hidden\n */\nexport function getObject(field, object) {\n    if (field === void 0) { field = ''; }\n    if (field) {\n        var value = object;\n        var splits = field.split('.');\n        for (var i = 0; i < splits.length && !isNullOrUndefined(value); i++) {\n            value = value[splits[i]];\n        }\n        return value;\n    }\n}\n/**\n * @hidden\n */\nexport function getCustomDateFormat(format, colType) {\n    var intl = new Internationalization();\n    var formatvalue;\n    var formatter = 'format';\n    var type = 'type';\n    if (colType === 'date') {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'date', format: format[formatter] }, false) :\n            isBlazor() ? intl.getDatePattern({ type: 'dateTime', format: format }, false) :\n                intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    else {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'dateTime', format: format[formatter] }, false) :\n            isBlazor() ? intl.getDatePattern({ type: 'dateTime', format: format }, false) :\n                intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    return formatvalue;\n}\n/**\n * @hidden\n */\nexport function getExpandedState(gObj, hierarchyPrintMode) {\n    var rows = gObj.getRowsObject();\n    var obj = {};\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        if (row.isExpand && !row.isDetailRow) {\n            var index = gObj.allowPaging && gObj.printMode === 'AllPages' ? row.index +\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : row.index;\n            obj[index] = {};\n            obj[index].isExpand = true;\n            obj[index].gridModel = getPrintGridModel(row.childGrid, hierarchyPrintMode);\n            obj[index].gridModel.query = gObj.childGrid.query;\n        }\n    }\n    return obj;\n}\n/**\n * @hidden\n */\nexport function getPrintGridModel(gObj, hierarchyPrintMode) {\n    if (hierarchyPrintMode === void 0) { hierarchyPrintMode = 'Expanded'; }\n    var printGridModel = {};\n    if (!gObj) {\n        return printGridModel;\n    }\n    for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key === 'columns') {\n            printGridModel[key] = getActualPropFromColl(gObj[key]);\n        }\n        else if (key === 'allowPaging') {\n            printGridModel[key] = gObj.printMode === 'CurrentPage';\n        }\n        else {\n            printGridModel[key] = getActualProperties(gObj[key]);\n        }\n    }\n    if (gObj.childGrid && hierarchyPrintMode !== 'None') {\n        printGridModel.expandedRows = getExpandedState(gObj, hierarchyPrintMode);\n    }\n    return printGridModel;\n}\n/**\n * @hidden\n */\nexport function extendObjWithFn(copied, first, second, deep) {\n    var res = copied || {};\n    var len = arguments.length;\n    if (deep) {\n        len = len - 1;\n    }\n    for (var i = 1; i < len; i++) {\n        if (!arguments[i]) {\n            continue;\n        }\n        var obj1 = arguments[i];\n        var keys = Object.keys(Object.getPrototypeOf(obj1)).length ?\n            Object.keys(obj1).concat(getPrototypesOfObj(obj1)) : Object.keys(obj1);\n        for (var i_1 = 0; i_1 < keys.length; i_1++) {\n            var source = res[keys[i_1]];\n            var cpy = obj1[keys[i_1]];\n            var cln = void 0;\n            if (deep && (isObject(cpy) || Array.isArray(cpy))) {\n                if (isObject(cpy)) {\n                    cln = source ? source : {};\n                    res[keys[i_1]] = baseExtend({}, cln, cpy, deep);\n                }\n                else {\n                    cln = source ? source : [];\n                    res[keys[i_1]] = baseExtend([], cln, cpy, deep);\n                }\n            }\n            else {\n                res[keys[i_1]] = cpy;\n            }\n        }\n    }\n    return res;\n}\n/**\n * @hidden\n */\nfunction getPrototypesOfObj(obj) {\n    var keys = [];\n    while (Object.getPrototypeOf(obj) && Object.keys(Object.getPrototypeOf(obj)).length) {\n        keys = keys.concat(Object.keys(Object.getPrototypeOf(obj)));\n        obj = Object.getPrototypeOf(obj);\n    }\n    return keys;\n}\n/**\n * @hidden\n */\nexport function measureColumnDepth(column) {\n    var max = 0;\n    for (var i = 0; i < column.length; i++) {\n        var depth = checkDepth(column[i], 0);\n        if (max < depth) {\n            max = depth;\n        }\n    }\n    return max + 1;\n}\n/**\n * @hidden\n */\nexport function checkDepth(col, index) {\n    var max = index;\n    var indices = [];\n    if (col.columns) {\n        index++;\n        for (var i = 0; i < col.columns.length; i++) {\n            indices[i] = checkDepth(col.columns[i], index);\n        }\n        for (var j = 0; j < indices.length; j++) {\n            if (max < indices[j]) {\n                max = indices[j];\n            }\n        }\n        index = max;\n    }\n    return index;\n}\n/**\n * @hidden\n */\nexport function refreshFilteredColsUid(gObj, filteredCols) {\n    for (var i = 0; i < filteredCols.length; i++) {\n        filteredCols[i].uid = filteredCols[i].isForeignKey ?\n            getColumnByForeignKeyValue(filteredCols[i].field, gObj.getForeignKeyColumns()).uid\n            : gObj.getColumnByField(filteredCols[i].field).uid;\n    }\n}\n/** @hidden */\nexport var Global;\n(function (Global) {\n    Global.timer = null;\n})(Global || (Global = {}));\n/**\n * @hidden\n */\nexport function getTransformValues(element) {\n    var style = document.defaultView.getComputedStyle(element, null);\n    var transformV = style.getPropertyValue('transform');\n    var replacedTv = transformV.replace(/,/g, '');\n    var translateX = parseFloat((replacedTv).split(' ')[4]);\n    var translateY = parseFloat((replacedTv).split(' ')[5]);\n    return { width: translateX, height: translateY };\n}\n/** @hidden */\nexport function applyBiggerTheme(rootElement, element) {\n    if (rootElement.classList.contains('e-bigger')) {\n        element.classList.add('e-bigger');\n    }\n}\n/** @hidden */\nexport function alignFrozenEditForm(mTD, fTD) {\n    if (mTD && fTD) {\n        var mHeight = closest(mTD, '.e-row').getBoundingClientRect().height;\n        var fHeight = closest(fTD, '.e-row').getBoundingClientRect().height;\n        if (mHeight > fHeight) {\n            fTD.style.height = mHeight + 'px';\n        }\n        else {\n            mTD.style.height = fHeight + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function ensureLastRow(row, gridObj) {\n    var cntOffset = gridObj.getContent().firstElementChild.offsetHeight;\n    return row && row.getBoundingClientRect().top > cntOffset;\n}\n/** @hidden */\nexport function ensureFirstRow(row, rowTop) {\n    return row && row.getBoundingClientRect().top < rowTop;\n}\n/** @hidden */\nexport function isRowEnteredInGrid(index, gObj) {\n    var rowHeight = gObj.getRowHeight();\n    var startIndex = gObj.getContent().firstElementChild.scrollTop / rowHeight;\n    var endIndex = startIndex + (gObj.getContent().firstElementChild.offsetHeight / rowHeight);\n    return index < endIndex && index > startIndex;\n}\n/** @hidden */\nexport function getEditedDataIndex(gObj, data) {\n    var keyField = gObj.getPrimaryKeyFieldNames()[0];\n    var dataIndex;\n    gObj.getCurrentViewRecords().filter(function (e, index) {\n        if (e[keyField] === data[keyField]) {\n            dataIndex = index;\n        }\n    });\n    return dataIndex;\n}\n/** @hidden */\nexport function eventPromise(args, query) {\n    var state;\n    state = getStateEventArgument(query);\n    var def = new Deferred();\n    state.dataSource = def.resolve;\n    state.action = args;\n    return { state: state, deffered: def };\n}\n/** @hidden */\nexport function getStateEventArgument(query) {\n    var adaptr = new UrlAdaptor();\n    var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n    var state = adaptr.processQuery(dm, query);\n    var data = JSON.parse(state.data);\n    return data;\n}\n/** @hidden */\nexport function ispercentageWidth(gObj) {\n    var columns = gObj.getVisibleColumns();\n    var percentageCol = 0;\n    var undefinedWidthCol = 0;\n    for (var i = 0; i < columns.length; i++) {\n        if (isUndefined(columns[i].width)) {\n            undefinedWidthCol++;\n        }\n        else if (columns[i].width.toString().indexOf('%') !== -1) {\n            percentageCol++;\n        }\n    }\n    return (gObj.width === 'auto' || typeof (gObj.width) === 'string' && gObj.width.indexOf('%') !== -1) && Browser.info.name !== 'chrome'\n        && !gObj.groupSettings.showGroupedColumn && gObj.groupSettings.columns.length\n        && percentageCol && !undefinedWidthCol;\n}\n/** @hidden */\nexport function resetRowIndex(gObj, rows, rowElms, index) {\n    var startIndex = index ? index : 0;\n    for (var i = 0; i < rows.length; i++) {\n        if (rows[i].isDataRow) {\n            rows[i].index = startIndex;\n            rows[i].isAltRow = gObj.enableAltRow ? startIndex % 2 !== 0 : false;\n            rowElms[i].setAttribute('aria-rowindex', startIndex.toString());\n            rows[i].isAltRow ? rowElms[i].classList.add('e-altrow') : rowElms[i].classList.remove('e-altrow');\n            for (var j = 0; j < rowElms[i].cells.length; j++) {\n                rowElms[i].cells[j].setAttribute('index', startIndex.toString());\n            }\n            startIndex++;\n        }\n    }\n    if (!rows.length) {\n        gObj.renderModule.emptyRow(true);\n    }\n}\n/** @hidden */\nexport function compareChanges(gObj, changes, type, keyField) {\n    var newArray = gObj.dataToBeUpdated[type].concat(changes[type]).reduce(function (r, o) {\n        r[o[keyField]] = r[o[keyField]] === undefined ? o : Object.assign(r[o[keyField]], o);\n        return r;\n    }, {});\n    gObj.dataToBeUpdated[type] = Object.keys(newArray).map(function (k) { return newArray[k]; });\n}\n/** @hidden */\nexport function setRowElements(gObj) {\n    if (gObj.getFrozenColumns()) {\n        (gObj).contentModule.rowElements =\n            [].slice.call(gObj.element.querySelectorAll('.e-movableheader .e-row, .e-movablecontent .e-row'));\n        (gObj).contentModule.freezeRowElements =\n            [].slice.call(gObj.element.querySelectorAll('.e-frozenheader .e-row, .e-frozencontent .e-row'));\n    }\n    else {\n        (gObj).contentModule.rowElements =\n            [].slice.call(gObj.element.querySelectorAll('.e-row:not(.e-addedrow)'));\n    }\n}\n","import { remove, isBlazor, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        var type = [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary];\n        for (var i = 0; i < type.length; i++) {\n            cellFac.addCellRenderer(type[i], instance);\n        }\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        var footerContent = this.footerRenderer.getPanel();\n        if (this.parent.element.scrollHeight >= this.parent.getHeight(this.parent.height)\n            && footerContent) {\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    /**\n     * @hidden\n     */\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            var cFormat = 'customFormat';\n            if (!isNullOrUndefined(column[cFormat])) {\n                column.setPropertiesSilent({ format: column[cFormat] });\n            }\n            if (typeof (column.format) === 'object') {\n                var valueFormatter = new ValueFormatter();\n                column.setFormatter(valueFormatter.getFormatFunction(extend({}, column.format)));\n            }\n            else if (typeof (column.format) === 'string') {\n                var fmtr = _this.locator.getService('valueFormatter');\n                column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            }\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n        if (isBlazor() && this.parent.isServerRendered) {\n            var bulkChanges = 'bulkChanges';\n            var aggregates = 'aggregates';\n            var prop = Object.keys(this.parent[bulkChanges]);\n            for (var i = 0; i < prop.length; i++) {\n                if (prop[i].startsWith(aggregates)) {\n                    delete this.parent[bulkChanges][prop[i]];\n                }\n            }\n        }\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(refreshAggregates, this.refresh, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(refreshAggregates, this.refresh);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    Aggregate.prototype.refresh = function (data) {\n        var editedData = data instanceof Array ? data : [data];\n        this.parent.notify(refreshFooterRenderer, editedData);\n        if (this.parent.groupSettings.columns.length > 0) {\n            this.parent.notify(groupAggregates, editedData);\n        }\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    for (var i = 0; i < aggregates.length; i++) {\n        for (var j = 0; j < aggregates[i].columns.length; j++) {\n            callback(aggregates[i].columns[j], aggregates[i]);\n        }\n    }\n}\n","import { extend, isBlazor } from '@syncfusion/ej2-base';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject, getCustomDateFormat } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        if (args.column.editType === 'datepickeredit') {\n            this.obj = new DatePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        else if (args.column.editType === 'datetimepickeredit') {\n            this.obj = new DateTimePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        if (isBlazor()) {\n            this.obj.locale = this.parent.locale;\n        }\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\nfunction dateanddatetimerender(args, mode, rtl) {\n    var isInline = mode !== 'Dialog';\n    var format = getCustomDateFormat(args.column.format, args.column.type);\n    var value = getObject(args.column.field, args.rowData);\n    value = value ? new Date(value) : null;\n    return {\n        floatLabelType: isInline ? 'Never' : 'Always',\n        value: value,\n        format: format,\n        placeholder: isInline ?\n            '' : args.column.headerText, enableRtl: rtl,\n        enabled: isEditable(args.column, args.requestType, args.element),\n    };\n}\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            if (isBlazor()) {\n                var isServerRendered = 'isServerRendered';\n                format[isServerRendered] = true;\n            }\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            if (isBlazor()) {\n                var isServerRendered = 'isServerRendered';\n                format[isServerRendered] = true;\n            }\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if ((type === 'date' || type === 'datetime' || type === 'number') && (!isNullOrUndefined(format))) {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { merge, isNullOrUndefined, extend, Property } from '@syncfusion/ej2-base';\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData, getObject } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options, parent) {\n        var _this = this;\n        /**\n         * If `disableHtmlEncode` is set to true, it encodes the HTML of the header and content cells.\n         * @default true\n         */\n        this.disableHtmlEncode = true;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create – It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](../../grid/filtering/#custom-component-in-filter-menu) for its customization.\n         *  @default {}\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         * @default {}\n         */\n        this.edit = {};\n        /**\n         * If `allowSearching` set to false, then it disables Searching of a particular column.\n         * By default all columns allow Searching.\n         * @default true\n         */\n        this.allowSearching = true;\n        /**\n         * If `autoFit` set to true, then the particular column content width will be\n         * adjusted based on its content in the initial rendering itself.\n         * Setting this property as true is equivalent to calling `autoFitColumns` method in the `dataBound` event.\n         * @default false\n         */\n        this.autoFit = false;\n        this.sortDirection = 'Descending';\n        /** @hidden */\n        this.getEditTemplate = function () { return _this.editTemplateFn; };\n        /** @hidden */\n        this.getFilterTemplate = function () { return _this.filterTemplateFn; };\n        merge(this, options);\n        this.parent = parent;\n        if (this.type === 'none') {\n            this.type = (isBlazor() && !isNullOrUndefined(this.template) && isNullOrUndefined(this.field)) ? 'none' : null;\n        }\n        else if (this.type) {\n            this.type = typeof (this.type) === 'string' ? this.type.toLowerCase() : undefined;\n        }\n        if (this.editType) {\n            this.editType = this.editType.toLowerCase();\n        }\n        if (isNullOrUndefined(this.uid)) {\n            this.uid = getUid('grid-column');\n        }\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(extend({}, options.format)));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        this.toJSON = function () {\n            var col = {};\n            var skip = ['filter', 'dataSource', isBlazor() ? ' ' : 'headerText', 'template', 'headerTemplate', 'edit',\n                'editTemplate', 'filterTemplate', 'commandsTemplate', 'parent'];\n            var keys = Object.keys(_this);\n            for (var i = 0; i < keys.length; i++) {\n                if (keys[i] === 'columns') {\n                    col[keys[i]] = [];\n                    for (var j = 0; j < _this[keys[i]].length; j++) {\n                        col[keys[i]].push(_this[keys[i]][j].toJSON());\n                    }\n                }\n                else if (skip.indexOf(keys[i]) < 0) {\n                    col[keys[i]] = _this[keys[i]];\n                }\n            }\n            return col;\n        };\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n            if (this.columns) {\n                this.allowResizing = this.columns.some(function (col) {\n                    return col.allowResizing;\n                });\n            }\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (!isNullOrUndefined(this.filter) && this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.editTemplate) {\n            this.editTemplateFn = templateCompiler(this.editTemplate);\n        }\n        if (this.filterTemplate) {\n            this.filterTemplateFn = templateCompiler(this.filterTemplate);\n        }\n        if (this.isForeignColumn() &&\n            (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit' || this.editType === 'defaultedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = extend({\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            }, this.edit.params);\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y, xObj, yObj) {\n                if (typeof a_1 === 'string') {\n                    a_1 = getObject(a_1, window);\n                }\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                    var obj = xObj;\n                    xObj = yObj;\n                    yObj = obj;\n                }\n                return a_1(x, y, xObj, yObj);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getObject(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getObject(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /** @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /** @hidden */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /** @hidden */\n    Column.prototype.setProperties = function (column) {\n        var _this = this;\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n            //Refresh the react columnTemplates on state change\n            if (this.parent && this.parent.isReact && keys[i] === 'template') {\n                //tslint:disable-next-line:no-any\n                this.parent.clearTemplate(['columnTemplate'], undefined, function () {\n                    var rowsObj = _this.parent.getRowsObject();\n                    var pKeyField = _this.parent.getPrimaryKeyFieldNames()[0];\n                    for (var j = 0; j < rowsObj.length; j++) {\n                        var key = rowsObj[j].data[pKeyField];\n                        _this.parent.setCellValue(key, _this.field, rowsObj[j][_this.field]);\n                    }\n                });\n            }\n        }\n    };\n    /**\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n/**\n * Define options for custom command buttons.\n */\nvar CommandColumnModel = /** @class */ (function () {\n    function CommandColumnModel() {\n    }\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"buttonOption\", void 0);\n    return CommandColumnModel;\n}());\nexport { CommandColumnModel };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStartHelper = 'rowDragStartHelper';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var beforePaste = 'beforePaste';\n/** @hidden */\nexport var beforeAutoFill = 'beforeAutoFill';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/** @hidden */\nexport var commandClick = 'commandClick';\n/** @hidden */\nexport var exportGroupCaption = 'exportGroupCaption';\n/** @hidden */\nexport var lazyLoadGroupExpand = 'lazyLoadGroupExpand';\n/** @hidden */\nexport var lazyLoadGroupCollapse = 'lazyLoadGroupCollapse';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var groupAggregates = 'group-aggregates';\n/** @hidden */\nexport var refreshFooterRenderer = 'refresh-footer-rendered';\n/** @hidden */\nexport var refreshAggregateCell = 'refresh-aggregate-cell';\n/** @hidden */\nexport var refreshAggregates = 'refresh-aggregates';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var exportDetailDataBound = 'exportdetaildatabound';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var columnDataStateChange = 'columnDataStateChange';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n/** @hidden */\nexport var textWrapRefresh = 'textWrapRefresh';\n/** @hidden */\nexport var recordAdded = 'recordAdded';\n/** @hidden */\nexport var cancelBegin = 'cancel-Begin';\n/** @hidden */\nexport var editNextValCell = 'editNextValCell';\n/** @hidden */\nexport var hierarchyPrint = 'hierarchyprint';\n/** @hidden */\nexport var expandChildGrid = 'expandchildgrid';\n/** @hidden */\nexport var printGridInit = 'printGrid-Init';\n/** @hidden */\nexport var exportRowDataBound = 'export-RowDataBound';\n/** @hidden */\nexport var exportDataBound = 'export-DataBound';\n/** @hidden */\nexport var rowPositionChanged = 'row-position-changed';\n/** @hidden */\nexport var columnChooserOpened = 'columnChooserOpened';\n/** @hidden */\nexport var batchForm = 'batchedit-form';\n/** @hidden */\nexport var beforeStartEdit = 'edit-form';\n/** @hidden */\nexport var beforeBatchCancel = 'before-batch-cancel';\n/** @hidden */\nexport var batchEditFormRendered = 'batcheditform-rendered';\n/** @hidden */\nexport var partialRefresh = 'partial-refresh';\n/** @hidden */\nexport var beforeCustomFilterOpen = 'beforeCustomFilterOpen';\n/** @hidden */\nexport var selectVirtualRow = 'select-virtual-Row';\n/** @hidden */\nexport var columnsPrepared = 'columns-prepared';\n/** @hidden */\nexport var cBoxFltrBegin = 'cbox-filter-begin';\n/** @hidden */\nexport var cBoxFltrComplete = 'cbox-filter-complete';\n/** @hidden */\nexport var fltrPrevent = 'filter-Prevent';\n/** @hidden */\nexport var beforeFltrcMenuOpen = 'before-filter-cmenu-open';\n/** @hidden */\nexport var valCustomPlacement = 'validation-custom-placement';\n/** @hidden */\nexport var filterCboxValue = 'filter-cbox-value';\n/** @hidden */\nexport var componentRendered = 'component-rendered';\n/** @hidden */\nexport var restoreFocus = 'restore-Focus';\n/** @hidden */\nexport var detailStateChange = 'detail-state-change';\n/** @hidden */\nexport var detailIndentCellInfo = 'detail-indentcell-info';\n/** @hidden */\nexport var virtaulKeyHandler = 'virtaul-key-handler';\n/** @hidden */\nexport var virtaulCellFocus = 'virtaul-cell-focus';\n/** @hidden */\nexport var virtualScrollEditActionBegin = 'virtual-scroll-edit-action-begin';\n/** @hidden */\nexport var virtualScrollEditSuccess = 'virtual-scroll-edit-success';\n/** @hidden */\nexport var virtualScrollEditCancel = 'virtual-scroll-edit-cancel';\n/** @hidden */\nexport var virtualScrollEdit = 'virtual-scroll-edit';\n/** @hidden */\nexport var refreshVirtualCache = 'refresh-virtual-cache';\n/** @hidden */\nexport var editReset = 'edit-reset';\n/** @hidden */\nexport var virtualScrollAddActionBegin = 'virtual-scroll-add-action-begin';\n/** @hidden */\nexport var getVirtualData = 'get-virtual-data';\n/** @hidden */\nexport var refreshInfiniteModeBlocks = 'refresh-infinite-mode-blocks';\n/** @hidden */\nexport var resetInfiniteBlocks = 'reset-infinite-blocks';\n/** @hidden */\nexport var infiniteScrollHandler = 'infinite-scroll-handler';\n/** @hidden */\nexport var infinitePageQuery = 'infinite-page-query';\n/** @hidden */\nexport var infiniteShowHide = 'infinite-show-hide';\n/** @hidden */\nexport var appendInfiniteContent = 'append-infinite-content';\n/** @hidden */\nexport var removeInfiniteRows = 'remove-infinite-rows';\n/** @hidden */\nexport var setInfiniteCache = 'set-infinite-cache';\n/** @hidden */\nexport var infiniteEditHandler = 'infinite-edit-handler';\n/** @hidden */\nexport var initialCollapse = 'initial-collapse';\n/** @hidden */\nexport var getAggregateQuery = 'get-aggregate-query';\n/** @hidden */\nexport var closeFilterDialog = 'close-filter-dialog';\n/** @hidden */\nexport var columnChooserCancelBtnClick = 'columnChooserCancelBtnClick';\n/** @hidden */\nexport var getFilterBarOperator = 'get-filterbar-operator';\n/** @hidden */\nexport var resetColumns = 'reset-columns';\n/** @hidden */\nexport var pdfAggregateQueryCellInfo = 'pdfAggregateQueryCellInfo';\n/** @hidden */\nexport var excelAggregateQueryCellInfo = 'excelAggregateQueryCellInfo';\n/** @hidden */\nexport var setGroupCache = 'group-cache';\n/** @hidden */\nexport var lazyLoadScrollHandler = 'lazy-load-scroll-handler';\n/** @hidden */\nexport var groupCollapse = 'group-collapse';\n/** @hidden */\nexport var beforeCheckboxRenderer = 'beforeCheckboxRenderer';\n/** @hidden */\nexport var refreshHandlers = 'refreshResizeHandlers';\n/** @hidden */\nexport var beforeRefreshOnDataChange = 'before-refresh-on-data-change';\n/** @hidden */\nexport var immutableBatchCancel = 'immutable-batch-cancel';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n    /**  Defines CellType as DetailFooterIntent */\n    CellType[CellType[\"DetailFooterIntent\"] = 15] = \"DetailFooterIntent\";\n    /**  Defines CellType as RowDrag */\n    CellType[CellType[\"RowDragIcon\"] = 16] = \"RowDragIcon\";\n    /**  Defines CellType as RowDragHeader */\n    CellType[CellType[\"RowDragHIcon\"] = 17] = \"RowDragHIcon\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n","import { isNullOrUndefined, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, isGroupAdaptive, getColumnByForeignKeyValue, refreshFilteredColsUid } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.foreignKeyDataState = { isPending: false, resolver: null };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed || this.getModuleName() === 'foreignKey') {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowPositionChanged, this.reorderRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n        this.parent.on(events.autoCol, this.refreshFilteredCols, this);\n        this.parent.on(events.columnsPrepared, this.refreshFilteredCols, this);\n    }\n    Data.prototype.reorderRows = function (e) {\n        this.dataManager.dataSource.json.splice(e.toIndex, 0, this.dataManager.dataSource.json.splice(e.fromIndex, 1)[0]);\n    };\n    Data.prototype.getModuleName = function () {\n        return 'data';\n    };\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        this.isQueryInvokedFromData = true;\n        gObj.query = gObj.query instanceof Query ? gObj.query : new Query();\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.getQuery().clone();\n        if (this.parent.columnQueryMode === 'ExcludeHidden') {\n            query.select(this.parent.getColumns().filter(function (column) { return !(column.isPrimaryKey !== true && column.visible === false || column.field === undefined); }).map(function (column) { return column.field; }));\n        }\n        else if (this.parent.columnQueryMode === 'Schema') {\n            var selectQueryFields = [];\n            var columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                selectQueryFields.push(columns[i].field);\n            }\n            query.select(selectQueryFields);\n        }\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        if (isGroupAdaptive(this.parent)) {\n            this.virtualGroupPageQuery(query);\n        }\n        else {\n            this.pageQuery(query, skipPage);\n        }\n        this.groupQuery(query);\n        return query;\n    };\n    /** @hidden */\n    Data.prototype.aggregateQuery = function (query, isForeign) {\n        var rows = this.parent.aggregates;\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            for (var j = 0; j < row.columns.length; j++) {\n                var cols = row.columns[j];\n                var types = cols.type instanceof Array ? cols.type : [cols.type];\n                for (var k = 0; k < types.length; k++) {\n                    query.aggregate(types[k].toLowerCase(), cols.field);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.virtualGroupPageQuery = function (query) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if (query.queries.length) {\n            for (var i = 0; i < query.queries.length; i++) {\n                if (query.queries[i][fName] === 'onPage') {\n                    query.queries.splice(i, 1);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if ((gObj.allowPaging || gObj.enableVirtualization || gObj.enableInfiniteScrolling) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            if (query.queries.length) {\n                for (var i = 0; i < query.queries.length; i++) {\n                    if (query.queries[i][fName] === 'onPage') {\n                        query.queries.splice(i, 1);\n                    }\n                }\n            }\n            if (!isNullOrUndefined(gObj.infiniteScrollModule) && gObj.enableInfiniteScrolling) {\n                this.parent.notify(events.infinitePageQuery, query);\n            }\n            else {\n                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n            }\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            if (this.parent.groupSettings.enableLazyLoading) {\n                query.lazyLoad.push({ key: 'isLazyLoad', value: this.parent.groupSettings.enableLazyLoading });\n            }\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                if (!column) {\n                    this.parent.log('initial_action', { moduleName: 'group', columnName: columns[i] });\n                }\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                else {\n                    this.parent.log('initial_action', { moduleName: 'sort', columnName: columns[i].field });\n                    return query;\n                }\n                var fn = columns[i].direction;\n                if (col.sortComparer) {\n                    this.parent.log('grid_sort_comparer');\n                    fn = !this.isRemote() ? col.sortComparer.bind(col) : columns[i].direction;\n                }\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    if (col.isForeignColumn() || col.sortComparer) {\n                        query.sortByForeignKey(col.field, fn, undefined, columns[i].direction.toLowerCase());\n                    }\n                    else {\n                        query.sortBy(col.field, fn);\n                    }\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                if (typeof sortGrp[i].direction === 'string') {\n                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n                }\n                else {\n                    var col = this.getColumnByField(sortGrp[i].field);\n                    query.sortByForeignKey(sortGrp[i].field, sortGrp[i].direction, undefined, col.getSortDirection().toLowerCase());\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query, fcolumn, isForeignKey) {\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.getSearchColumnFieldNames();\n        var predicateList = [];\n        var needForeignKeySearch = false;\n        if (this.parent.searchSettings.key.length) {\n            needForeignKeySearch = this.parent.getForeignKeyColumns().some(function (col) { return fields.indexOf(col.field) > -1; });\n            var adaptor = !isForeignKey ? this.dataManager.adaptor : fcolumn.dataSource.adaptor;\n            if (needForeignKeySearch || (adaptor.getModuleName &&\n                adaptor.getModuleName() === 'ODataV4Adaptor')) {\n                fields = isForeignKey ? [fcolumn.foreignKeyValue] : fields;\n                for (var i = 0; i < fields.length; i++) {\n                    var column = isForeignKey ? fcolumn : this.getColumnByField(fields[i]);\n                    if (column.isForeignColumn() && !isForeignKey) {\n                        predicateList = this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(fields[i], sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                }\n                var predList = Predicate.or(predicateList);\n                predList.key = sSettings.key;\n                query.where(predList);\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var foreignCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                var gridColumn = gObj.getColumnByField(col.field);\n                if (isNullOrUndefined(col.type) && gridColumn && (gridColumn.type === 'date' || gridColumn.type === 'datetime')) {\n                    col.type = gObj.getColumnByField(col.field).type;\n                }\n                if (col.isForeignKey) {\n                    foreignCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (defaultFltrCols.length) {\n                if (gObj.filterSettings.type === 'FilterBar' || gObj.filterSettings.type === 'Menu') {\n                    for (var i = 0, len = defaultFltrCols.length; i < len; i++) {\n                        defaultFltrCols[i].uid = defaultFltrCols[i].uid ||\n                            this.parent.grabColumnByFieldFromAllCols(defaultFltrCols[i].field).uid;\n                    }\n                }\n                var excelPredicate = CheckBoxFilterBase.getPredicate(defaultFltrCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    predicateList.push(excelPredicate[prop]);\n                }\n            }\n            if (foreignCols.length) {\n                for (var _e = 0, foreignCols_1 = foreignCols; _e < foreignCols_1.length; _e++) {\n                    var col = foreignCols_1[_e];\n                    col.uid = col.uid || this.parent.grabColumnByFieldFromAllCols(col.field).uid;\n                    var column_1 = this.parent.grabColumnByUidFromAllCols(col.uid);\n                    if (!column_1) {\n                        this.parent.log('initial_action', { moduleName: 'filter', columnName: col.field });\n                    }\n                    if (column_1.isForeignColumn() && getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        var excelPredicate = CheckBoxFilterBase.getPredicate(columns);\n                        for (var _f = 0, _g = Object.keys(excelPredicate); _f < _g.length; _f++) {\n                            var prop = _g[_f];\n                            predicateList.push(excelPredicate[prop]);\n                        }\n                    }\n                }\n            }\n            if (predicateList.length) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        this.parent.log('datasource_syntax_mismatch', { dataState: this.parent });\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    if (isBlazor() && this.parent.isServerRendered) {\n                        this.parent.notify('offset', args);\n                    }\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);\n                    break;\n            }\n            var promise = 'promise';\n            args[promise] = crud;\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                if (isBlazor()) {\n                    return crud.then(function (result) {\n                        return _this.insert(query, args);\n                    }).catch(function (e) {\n                        return null;\n                    });\n                }\n                else {\n                    return crud.then(function (result) {\n                        return _this.insert(query, args);\n                    });\n                }\n            }\n            else {\n                return this.insert(query, args);\n            }\n        }\n    };\n    Data.prototype.insert = function (query, args) {\n        if (args.requestType === 'save') {\n            this.parent.notify(events.recordAdded, args);\n        }\n        return this.executeQuery(query);\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                if (isBlazor() && this.parent.isServerRendered) {\n                    this.parent.notify('offset', args);\n                }\n                promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);\n                break;\n        }\n        args[pr] = promise ? promise : args[pr];\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key, original, query) {\n        if (query === void 0) { query = this.generateQuery(); }\n        query.requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var state = void 0;\n            state = this.getStateEventArgument(query);\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var changedRecords = 'changedRecords';\n            var addedRecords = 'addedRecords';\n            var data = 'data';\n            if (isBlazor() && this.parent.isServerRendered) {\n                for (var i = 0; i < changes[changedRecords].length; i++) {\n                    var args = { data: changes[changedRecords][i] };\n                    this.parent.notify('offset', args);\n                    changes[changedRecords][i] = args[data];\n                }\n                for (var i = 0; i < changes[addedRecords].length; i++) {\n                    var args = { data: changes[addedRecords][i] };\n                    this.parent.notify('offset', args);\n                    changes[addedRecords][i] = args[data];\n                }\n            }\n            var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n        this.parent.off(events.autoCol, this.refreshFilteredCols);\n        this.parent.off(events.columnsPrepared, this.refreshFilteredCols);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getForeignKeyDataState = function () {\n        return this.foreignKeyDataState;\n    };\n    Data.prototype.setForeignKeyDataState = function (state) {\n        this.foreignKeyDataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var state;\n        var dataArgs = args;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs_1 = args;\n                editArgs_1.key = key;\n                var promise = 'promise';\n                editArgs_1[promise] = deff.promise;\n                editArgs_1.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs_1);\n                deff.promise.then(function (e) {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    if (editArgs_1.requestType === 'save') {\n                        _this.parent.notify(events.recordAdded, editArgs_1);\n                    }\n                    _this.parent.trigger(events.dataStateChange, state);\n                })\n                    .catch(function () { return void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * Gets the columns where searching needs to be performed from the Grid.\n     * @return {string[]}\n     */\n    Data.prototype.getSearchColumnFieldNames = function () {\n        var colFieldNames = [];\n        var columns = this.parent.getColumns();\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var col = columns_2[_i];\n            if (col.allowSearching && !isNullOrUndefined(col.field)) {\n                colFieldNames.push(col.field);\n            }\n        }\n        return colFieldNames;\n    };\n    Data.prototype.refreshFilteredCols = function () {\n        if (this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            refreshFilteredColsUid(this.parent, this.parent.filterSettings.columns);\n        }\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options, parent) {\n        merge(this, options);\n        this.parent = parent;\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    /**\n     * Replaces the row data and grid refresh the particular row element only.\n     * @param  {Object} data - To update new data for the particular row.\n     * @return {void}\n     */\n    Row.prototype.setRowValue = function (data) {\n        var key = this.data[this.parent.getPrimaryKeyFieldNames()[0]];\n        this.parent.setRowData(key, data);\n    };\n    /**\n     * Replaces the given field value and refresh the particular cell element only.\n     * @param {string} field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     * @return {void}\n     */\n    Row.prototype.setCellValue = function (field, value) {\n        var isValDiff = !(this.data[field].toString() === value.toString());\n        if (isValDiff) {\n            var pKeyField = this.parent.getPrimaryKeyFieldNames()[0];\n            var key = this.data[pKeyField];\n            this.parent.setCellValue(key, field, value);\n            this.makechanges(pKeyField, this.data);\n        }\n        else {\n            return;\n        }\n    };\n    Row.prototype.makechanges = function (key, data) {\n        var gObj = this.parent;\n        var dataManager = gObj.getDataModule().dataManager;\n        dataManager.update(key, data);\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        this.isRowSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var colSpan = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var rowSpan = cellArgs.rowSpan;\n        var visible = 0;\n        var spannedCell;\n        if (row.index > 0) {\n            var cells = this.parent.groupSettings.columns.length > 0 &&\n                !this.parent.getRowsObject()[row.index - 1].isDataRow ? this.parent.getRowsObject()[row.index].cells :\n                this.parent.getRowsObject()[row.index - 1].cells;\n            var targetCell_1 = row.cells[i];\n            var uid_1 = 'uid';\n            spannedCell = cells.filter(function (cell) { return cell.column.uid === targetCell_1.column[uid_1]; })[0];\n        }\n        var colSpanLen = spannedCell && spannedCell.colSpanRange > 1 && spannedCell.rowSpanRange > 1 ?\n            spannedCell.colSpanRange : colSpan;\n        for (var j = i + 1; j < i + colSpanLen && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + colSpan; j < i + colSpan + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + colSpan + visible >= row.cells.length) {\n                colSpan -= (i + colSpan + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (colSpan > 1) {\n            attributes(td, { 'colSpan': colSpan.toString(), 'aria-colSpan': colSpan.toString() });\n        }\n        if (rowSpan > 1) {\n            attributes(td, { 'rowspan': rowSpan.toString(), 'aria-rowspan': rowSpan.toString() });\n            row.cells[i].isRowSpanned = true;\n            row.cells[i].rowSpanRange = Number(rowSpan);\n            if (colSpan > 1) {\n                row.cells[i].colSpanRange = Number(colSpan);\n            }\n        }\n        if (row.index > 0 && (spannedCell.rowSpanRange > 1)) {\n            row.cells[i].isSpanned = true;\n            row.cells[i].rowSpanRange = Number(spannedCell.rowSpanRange - 1);\n            row.cells[i].colSpanRange = spannedCell.rowSpanRange > 0 ? spannedCell.colSpanRange : 1;\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject, extendObjWithFn } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.isSpan = false;\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extendObjWithFn({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate, null, isChanged);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode, isEdit) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getObject(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var _loop_1 = function (i, len) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = this_1.parent.isPrinting ? 'e-detailrowcollapse' : 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs, row.isExpand, isEdit);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this_1.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        rowSpan: 1, foreignKeyData: row.cells[i].foreignKeyData,\n                        requestType: this_1.parent.requestTypeAction\n                    }));\n                    var isRowSpanned = false;\n                    if (row.index > 0 && this_1.isSpan) {\n                        var prevRowCells = this_1.parent.groupSettings.columns.length > 0 &&\n                            !this_1.parent.getRowsObject()[row.index - 1].isDataRow ?\n                            this_1.parent.getRowsObject()[row.index].cells : this_1.parent.getRowsObject()[row.index - 1].cells;\n                        var uid_1 = 'uid';\n                        var prevRowCell = prevRowCells.filter(function (cell) {\n                            return cell.column.uid === row.cells[i].column[uid_1];\n                        })[0];\n                        isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;\n                    }\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {\n                        this_1.isSpan = true;\n                        var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n            if (this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate) {\n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (row.lazyLoadCssClass) {\n            tr.classList.add(row.lazyLoadCssClass);\n        }\n        var vFTable = this.parent.enableColumnVirtualization && this.parent.frozenColumns !== 0;\n        if (!vFTable && this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\nimport * as events from '../base/constant';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization && args ? args.startIndex : 0;\n        startIndex = this.parent.enableInfiniteScrolling && args ? this.getInfiniteIndex(args) : startIndex;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            var args = {};\n            this.parent.notify(events.detailIndentCellInfo, args);\n            cols.push(this.generateCell(args, null, CellType.DetailExpand));\n        }\n        if (this.parent.isRowDragable()) {\n            cols.push(this.generateCell({}, null, CellType.RowDragIcon));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent, pid, tIndex, parentUid) {\n        var options = {};\n        options.foreignKeyData = {};\n        var isServerRendered = 'isServerRendered';\n        options.uid = isBlazor() && this.parent[isServerRendered] ? this.parent.getRowUid('grid-row') : getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.tIndex = tIndex;\n        options.isDataRow = true;\n        options.parentGid = pid;\n        options.parentUid = parentUid;\n        if (this.parent.isPrinting) {\n            if (this.parent.hierarchyPrintMode === 'All') {\n                options.isExpand = true;\n            }\n            else if (this.parent.hierarchyPrintMode === 'Expanded' && this.parent.expandedRows && this.parent.expandedRows[index]) {\n                options.isExpand = this.parent.expandedRows[index].isExpand;\n            }\n        }\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization && this.parent.selectionModule.checkBoxState) {\n            options.isSelected = this.parent.selectionModule.checkBoxState;\n            if (options.isSelected && this.parent.selectionModule.selectedRowIndexes.indexOf(index) === -1) {\n                this.parent.selectionModule.selectedRowIndexes.push(index);\n            }\n        }\n        else {\n            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        }\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = new Row(options, this.parent);\n        row.cells = cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        var foreignKeyColumns = this.parent.getForeignKeyColumns();\n        for (var i = 0; i < foreignKeyColumns.length; i++) {\n            setValue(foreignKeyColumns[i].field, getForeignData(foreignKeyColumns[i], options.data), options.foreignKeyData);\n        }\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        for (var i = 0; i < dummies.length; i++) {\n            tmp.push(this.generateCell(dummies[i], options.uid, isNullOrUndefined(dummies[i].commands) ? undefined : CellType.CommandColumn, null, i, options.foreignKeyData));\n        }\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox' || opt.commands) {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        for (var i = 0; i < input.length; i++) {\n            this.refreshForeignKeyRow(input[i]);\n            input[i].cells = this.generateCells(input[i]);\n        }\n        return input;\n    };\n    RowModelGenerator.prototype.getInfiniteIndex = function (args) {\n        return args.requestType === 'infiniteScroll' || args.requestType === 'delete' || args.action === 'add'\n            ? args.startIndex : 0;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        var row = this.parent.aggregates.slice();\n        for (var i = 0; i < row.length; i++) {\n            var columns = row[i].columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                columns.push(new Column({}));\n            }\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid) || (this.parent.isRowDragable() && !start)) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        end = end ? end + this.parent.getIndentCount() : end;\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end, columns) {\n        if (input.length === 0) {\n            if (args === undefined || !args.count) {\n                return [];\n            }\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        var row = this.getData();\n        for (var i = 0; i < row.length; i++) {\n            rows.push(this.getGeneratedRow(row[i], data[i], args ? args.level : undefined, start, end, args ? args.parentUid : undefined, columns));\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end, parentUid, columns) {\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.getIndentCount();\n        if (this.parent.isRowDragable()) {\n            indents = ['e-indentcelltop'];\n        }\n        var values = columns ? columns : this.getColumns(start, end);\n        for (var i = 0; i < values.length; i++) {\n            tmp.push(this.getGeneratedCell(values[i], summaryRow, i >= indentLength ? this.getCellType() :\n                i < this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[i], isDetailGridAlone));\n        }\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        if (isBlazor() && this.parent.isServerRendered && !isNullOrUndefined(parentUid)) {\n            row.uid = this.parent.getRowUid('grid-row');\n        }\n        else {\n            row.uid = getUid('grid-row');\n        }\n        row.parentUid = parentUid;\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = {\n            'style': { 'textAlign': column.textAlign },\n            'e-mappinguid': column.uid, index: column.index\n        };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        opt.column.headerText = column.headerText;\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        for (var i = 0; i < summaryRows.length; i++) {\n            single = {};\n            var column = summaryRows[i].columns;\n            for (var j = 0; j < column.length; j++) {\n                single = this.setTemplate(column[j], (args && args.aggregates) ? args : data, single);\n            }\n            dummy.push(single);\n        }\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        for (var i = 0; i < types.length; i++) {\n            var key = column.field + ' - ' + types[i].toLowerCase();\n            var disp = column.columnName;\n            var val = types[i] !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(types[i], group.aggregates ? group : data, column, this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][types[i]] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        }\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        /** @hidden */\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.isInfiniteScroll = (args.requestType === 'infiniteScroll');\n        this.rows = [];\n        this.index = this.parent.enableVirtualization || this.isInfiniteScroll ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level, i, undefined, this.rows.length);\n        }\n        this.index = 0;\n        if (this.parent.isCollapseStateEnabled()) {\n            this.ensureRowVisibility();\n        }\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw, parentid, childId, tIndex, parentUid) {\n        var _a;\n        var isRenderCaption = this.isInfiniteScroll && this.prevKey === data.key;\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length, parentUid));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level, parentid, index, this.rows.length, parentUid);\n                }\n            }\n        }\n        else {\n            var captionRow = this.generateCaptionRow(data, index, parentid, childId, tIndex, parentUid);\n            if (!isRenderCaption) {\n                this.rows = this.rows.concat(captionRow);\n            }\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length, captionRow.uid);\n            }\n            if (this.parent.aggregates.length) {\n                var rowCnt = this.rows.length;\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level, parentUid: captionRow.uid }));\n                for (var i = rowCnt - 1; i >= 0; i--) {\n                    if (this.rows[i].isCaptionRow) {\n                        this.rows[i].aggregatesCount = this.rows.length - rowCnt;\n                    }\n                    else if (!this.rows[i].isCaptionRow && !this.rows[i].isDataRow) {\n                        break;\n                    }\n                }\n            }\n        }\n        this.prevKey = data.key;\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        for (var j = 0; j < cols.length; j++) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            if (gObj.isRowDragable()) {\n                indent++;\n            }\n            cells.push(this.generateCell(column, null, cellType, indent));\n        }\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    /** @hidden */\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent, parentID, childID, tIndex, parentUid) {\n        var options = {};\n        var tmp = [];\n        var records = 'records';\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        options.isExpand = !this.parent.groupSettings.enableLazyLoading && !this.parent.isCollapseStateEnabled();\n        options.parentGid = parentID;\n        options.childGid = childID;\n        options.tIndex = tIndex;\n        options.isCaptionRow = true;\n        options.parentUid = parentUid;\n        options.gSummary = !isNullOrUndefined(data.items[records]) ? data.items[records].length : data.items.length;\n        options.uid = isBlazor() && this.parent.isServerRendered ? this.parent.getRowUid('grid-row') : getUid('grid-row');\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            var fkValue = (isNullOrUndefined(data.key) ? '' : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col));\n            setValue('foreignKey', fkValue, row.data);\n        }\n    };\n    /** @hidden */\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent, childID, tIndex, parentUid) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++, tIndex++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent, childID, tIndex, parentUid);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0; i < input.length; i++) {\n            if (input[i].isDataRow) {\n                input[i].cells = this.generateCells(input[i]);\n                for (var j = 0; j < input[i].indent; j++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(input[i].indent) === -1) {\n                        continue;\n                    }\n                    input[i].cells.unshift(this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = this.generateCaptionRow(input[i].data, input[i].indent);\n                input[i].cells = cRow.cells;\n            }\n        }\n        return input;\n    };\n    GroupModelGenerator.prototype.ensureRowVisibility = function () {\n        for (var i = 0; i < this.rows.length; i++) {\n            var row = this.rows[i];\n            if (!row.isCaptionRow) {\n                continue;\n            }\n            for (var j = i + 1; j < this.rows.length; j++) {\n                var childRow = this.rows[j];\n                if (row.uid === childRow.parentUid) {\n                    this.rows[j].visible = row.isExpand;\n                }\n            }\n        }\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable, isBlazor, addClass, isUndefined } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove, updateBlazorTemplate, removeClass } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren, parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { Row } from '../models/row';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth, isGroupAdaptive } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.freezeRowElements = [];\n        /** @hidden */\n        this.currentInfo = {};\n        /** @hidden */\n        this.prevCurrentView = [];\n        this.isLoaded = true;\n        this.viewColIndexes = [];\n        this.drop = function (e) {\n            if (parentsUntil(e.target, 'e-row') || parentsUntil(e.target, 'e-emptyrow')) {\n                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n                remove(e.droppedElement);\n            }\n        };\n        this.infiniteCache = {};\n        this.isRemove = false;\n        this.visibleRows = [];\n        this.visibleFrozenRows = [];\n        this.isAddRows = false;\n        this.isInfiniteFreeze = false;\n        this.useGroupCache = false;\n        this.mutableData = false;\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                if (_this.parent.getFrozenColumns() && _this.parent.enableVirtualization) {\n                    var mContentRows = [].slice.call(_this.parent.getMovableVirtualContent().querySelectorAll('.e-row'));\n                    var fContentRows = [].slice.call(_this.parent.getFrozenVirtualContent().querySelectorAll('.e-row'));\n                    _this.isLoaded = !mContentRows ? false : mContentRows.length === fContentRows.length;\n                    if (_this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll' && _this.isLoaded) {\n                        var mHdr = [].slice.call(_this.parent.getMovableVirtualHeader().querySelectorAll('.e-row'));\n                        var fHdr = [].slice.call(_this.parent.getFrozenVirtualHeader().querySelectorAll('.e-row'));\n                        _this.isLoaded = mHdr.length === fHdr.length;\n                    }\n                }\n                _this.ariaService.setBusy(_this.getPanel().querySelector('.e-content'), false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.getFrozenColumns() !== 0) {\n                    rows = args.isFrozen ? _this.freezeRows : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {}, function () {\n                        if (_this.parent.allowTextWrap) {\n                            _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                        }\n                    });\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.mutableData = this.parent.getDataModule().isRemote();\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization\n            && !this.parent.groupSettings.enableLazyLoading) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.refreshInfiniteModeBlocks, this.refreshContentRows, this);\n        this.parent.on(events.beforeCellFocused, this.beforeCellFocused, this);\n        this.parent.on(events.destroy, this.droppableDestroy, this);\n    }\n    ContentRender.prototype.beforeCellFocused = function (e) {\n        if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n            this.pressedKey = e.keyArgs.action;\n        }\n        else {\n            this.pressedKey = undefined;\n        }\n    };\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.element.querySelector('.e-gridcontent');\n        if (div) {\n            this.ariaService.setOptions(this.parent.element.querySelector('.e-content'), { busy: false });\n            this.setPanel(div);\n            return;\n        }\n        div = this.parent.createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = this.parent.createElement('div', {\n            className: 'e-content'\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var virtualTable = contentDiv.querySelector('.e-virtualtable');\n        var virtualTrack = contentDiv.querySelector('.e-virtualtrack');\n        if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)\n            && (!isBlazor() || (isBlazor() && !this.parent.isServerRendered))) {\n            remove(virtualTable);\n            remove(virtualTrack);\n        }\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstElementChild;\n        if (!isBlazor()) {\n            if (this.getTable()) {\n                remove(this.getTable());\n            }\n        }\n        var table = innerDiv.querySelector('.e-table') ? innerDiv.querySelector('.e-table') :\n            this.parent.createElement('table', { className: 'e-table', attrs: {\n                    cellspacing: '0.25px', role: 'grid',\n                    id: this.parent.element.id + id\n                }\n            });\n        this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    ContentRender.prototype.splitRows = function (idx) {\n        if (this.parent.getFrozenColumns()) {\n            if (idx === 0) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = this.currentMovableRows || gObj.currentViewData;\n        var isReact = gObj.isReact && !isNullOrUndefined(gObj.rowTemplate);\n        var frag = isReact ? gObj.createElement('tbody') : document.createDocumentFragment();\n        if (!this.initialPageRecords) {\n            this.initialPageRecords = extend([], dataSource);\n        }\n        var hdrfrag = isReact ? gObj.createElement('tbody') : document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var trElement;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling\n            && args.requestType === 'infiniteScroll';\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        if (isGroupAdaptive(gObj)) {\n            if (['sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n                .some(function (value) { return args.requestType === value; })) {\n                gObj.vcRows = [];\n                gObj.vRows = [];\n            }\n        }\n        var modelData;\n        var isServerRendered = 'isServerRendered';\n        if (isBlazor() && this.parent[isServerRendered]) {\n            modelData = this.generator.generateRows(dataSource, args);\n            if (this.parent.enableVirtualization) {\n                this.prevInfo = this.prevInfo ? this.prevInfo : args.virtualInfo;\n                this.prevInfo = args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n                    this.currentInfo.page !== args.virtualInfo.page ? this.currentInfo : args.virtualInfo;\n            }\n            this.rows = modelData;\n            this.freezeRows = modelData;\n            this.rowElements = [].slice.call(this.getTable().querySelectorAll('tr.e-row[data-uid]'));\n            if (frzCols) {\n                this.movableRows = modelData.map(function (mRow) {\n                    var sRow = new Row(mRow);\n                    sRow.cells = mRow.cells.slice(frzCols, mRow.cells.length);\n                    mRow.cells = mRow.cells.slice(0, frzCols);\n                    return sRow;\n                });\n                this.freezeRowElements = this.rowElements;\n            }\n            this.isLoaded = true;\n            this.parent.hideSpinner();\n            args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n            var arg = extend({ rows: this.rows }, args);\n            if (this.getTable().querySelector('.e-emptyrow')) {\n                remove(this.getTable().querySelector('.e-emptyrow'));\n                if (!isNullOrUndefined(this.getTable().querySelectorAll('.e-table > tbody')[1])) {\n                    remove(this.getTable().querySelectorAll('.e-table > tbody')[1]);\n                }\n            }\n            this.parent.notify('contentcolgroup', {});\n            this.rafCallback(arg)();\n            if (frzCols) {\n                cont.style.overflowY = 'hidden';\n                fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                mCont.style.overflowY = this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                fCont.style.borderRightWidth = '1px';\n                this.parent.notify(events.contentReady, { rows: this.movableRows, args: extend({}, arg, { isFrozen: false }) });\n            }\n            if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                || (!this.parent.isPersistSelection && !this.parent.enableVirtualization)) {\n                var rowIndex = 'editRowIndex';\n                if (this.parent.editSettings.mode === 'Normal' && !isNullOrUndefined(args[rowIndex])) {\n                    this.parent.selectRow(args[rowIndex]);\n                }\n            }\n            if (this.parent.enableVirtualization && !this.parent.getHeaderContent().querySelectorAll('.e-check').length) {\n                var removeClassByUid = this.parent.getRows().filter(function (x) { return x.getAttribute('aria-selected'); })\n                    .map(function (y) { return y.getAttribute('data-uid'); });\n                var addClassByUid = this.parent.getRows().filter(function (x) { return x.getAttribute('aria-selected') === null; })\n                    .map(function (y) { return y.getAttribute('data-uid'); });\n                for (var i = 0; i < removeClassByUid.length; i++) {\n                    if (!isNullOrUndefined(this.parent.getRowObjectFromUID(removeClassByUid[i])) &&\n                        !this.parent.getRowObjectFromUID(removeClassByUid[i]).isSelected) {\n                        this.parent.getRowElementByUID(removeClassByUid[i]).removeAttribute('aria-selected');\n                        if (!isNullOrUndefined(this.parent.getRowElementByUID(removeClassByUid[i]).querySelector('.e-check'))) {\n                            removeClass([this.parent.getRowElementByUID(removeClassByUid[i]).querySelector('.e-check')], ['e-check']);\n                        }\n                        for (var j = 0; j < this.parent.getRowElementByUID(removeClassByUid[i]).children.length; j++) {\n                            this.parent.getRowElementByUID(removeClassByUid[i])\n                                .children[j].classList.remove('e-selectionbackground', 'e-active');\n                        }\n                    }\n                }\n                for (var i = 0; i < addClassByUid.length; i++) {\n                    if (!isNullOrUndefined(this.parent.getRowObjectFromUID(addClassByUid[i]))\n                        && this.parent.getRowObjectFromUID(addClassByUid[i]).isSelected) {\n                        this.parent.getRowElementByUID(addClassByUid[i]).setAttribute('aria-selected', 'true');\n                        if (!isNullOrUndefined(this.parent.getRowElementByUID(addClassByUid[i]).querySelector('.e-frame'))) {\n                            addClass([this.parent.getRowElementByUID(addClassByUid[i]).querySelector('.e-frame')], ['e-check']);\n                        }\n                        for (var j = 0; j < this.parent.getRowElementByUID(addClassByUid[i]).children.length; j++) {\n                            this.parent.getRowElementByUID(addClassByUid[i])\n                                .children[j].classList.add('e-selectionbackground', 'e-active');\n                        }\n                    }\n                }\n            }\n            return;\n        }\n        if (this.parent.enableVirtualization && this.parent.getFrozenColumns()) {\n            if (this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll') {\n                if (args.virtualInfo.sentinelInfo.axis === 'X') {\n                    modelData = this.parent.contentModule.generateRows(dataSource, args);\n                    args.renderMovableContent = true;\n                }\n                else if (mCont.scrollLeft > 0 && !args.renderMovableContent) {\n                    this.viewColIndexes = args.virtualInfo.columnIndexes;\n                    var indexes = [];\n                    for (var i = 0; i < this.parent.getFrozenColumns(); i++) {\n                        indexes.push(i);\n                    }\n                    this.parent.setColumnIndexesInView(indexes);\n                    args.virtualInfo.columnIndexes = indexes;\n                }\n            }\n            modelData = this.parent.contentModule.generateRows(dataSource, args);\n        }\n        else {\n            modelData = this.checkCache(modelData, args);\n            if (!this.isAddRows && !this.useGroupCache) {\n                modelData = this.generator.generateRows(dataSource, args);\n            }\n        }\n        this.setGroupCache(modelData, args);\n        this.parent.notify(events.setInfiniteCache, { isInfiniteScroll: isInfiniteScroll, modelData: modelData, args: args });\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            mCont.querySelector('tbody').innerHTML = '';\n        }\n        var idx = modelData[0].cells[0].index;\n        if (isUndefined(idx) && this.parent.getFrozenColumns() && this.parent.isRowDragable()) {\n            idx = modelData[0].cells[1].index;\n        }\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && args.renderMovableContent\n            && args.requestType === 'virtualscroll' && mCont.scrollLeft > 0 && args.virtualInfo.columnIndexes[0] !== 0) {\n            idx = this.parent.getFrozenColumns();\n        }\n        /* tslint:disable:no-any */\n        if (args.requestType !== 'infiniteScroll' && this.parent.registeredTemplate\n            && this.parent.registeredTemplate.template && !args.isFrozen) {\n            var templatetoclear = [];\n            for (var i = 0; i < this.parent.registeredTemplate.template.length; i++) {\n                for (var j = 0; j < this.parent.registeredTemplate.template[i].rootNodes.length; j++) {\n                    if (isNullOrUndefined(this.parent.registeredTemplate.template[i].rootNodes[j].parentNode)) {\n                        templatetoclear.push(this.parent.registeredTemplate.template[i]);\n                        /* tslint:enable:no-any */\n                    }\n                }\n            }\n            this.parent.destroyTemplate(['template'], templatetoclear);\n        }\n        if (this.parent.isReact && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n            this.parent.destroyTemplate(['columnTemplate', 'rowTemplate', 'detailTemplate', 'captionTemplate', 'commandsTemplate']);\n            this.parent.renderTemplates();\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (frzCols && idx >= frzCols) {\n            this.tbody = mCont.querySelector('tbody');\n        }\n        else {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        var startIndex = 0;\n        var blockLoad = true;\n        if (isGroupAdaptive(gObj) && gObj.vcRows.length) {\n            var top_1 = 'top';\n            var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top :\n                (!isNullOrUndefined(args.scrollTop) ? args.scrollTop[top_1] : 0);\n            if (scrollTop !== 0) {\n                var offsets_1 = gObj.vGroupOffsets;\n                var bSize = gObj.pageSettings.pageSize / 2;\n                var values = Object.keys(offsets_1).map(function (key) { return offsets_1[key]; });\n                for (var m = 0; m < values.length; m++) {\n                    if (scrollTop < values[m]) {\n                        if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === 'up') {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m * bSize);\n                            break;\n                        }\n                        else {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m) * bSize;\n                            break;\n                        }\n                    }\n                }\n                if (scrollTop + this.contentPanel.firstElementChild.offsetHeight ===\n                    this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {\n                    blockLoad = false;\n                }\n            }\n        }\n        var isVFFrozenOnly = gObj.frozenRows && !gObj.getFrozenColumns() && this.parent.enableVirtualization\n            && args.requestType === 'reorder';\n        if ((gObj.frozenRows && args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo.axis === 'X') || isVFFrozenOnly) {\n            var bIndex = args.virtualInfo.blockIndexes;\n            var page = args.virtualInfo.page;\n            args.virtualInfo.blockIndexes = [1, 2];\n            if (isVFFrozenOnly) {\n                args.virtualInfo.page = 1;\n            }\n            var data = isVFFrozenOnly ? this.initialPageRecords : dataSource;\n            var mhdrData = this.vgenerator\n                .generateRows(data, args);\n            mhdrData.splice(this.parent.frozenRows);\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                mhdrData[i].cells.splice(0, this.parent.getFrozenColumns());\n                tr = row.render(mhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            args.virtualInfo.blockIndexes = bIndex;\n            args.virtualInfo.page = page;\n            if (isVFFrozenOnly && args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n        }\n        this.virtualFrozenHdrRefresh(hdrfrag, modelData, row, args, dataSource, columns);\n        for (var i = startIndex, len = modelData.length; i < len; i++) {\n            this.rows.push(modelData[i]);\n            if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n                this.setRowsInLazyGroup(modelData[i], i);\n                if (isNullOrUndefined(modelData[i].indent)) {\n                    continue;\n                }\n            }\n            this.setInfiniteVisibleRows(args, modelData[i]);\n            if (isGroupAdaptive(gObj) && this.rows.length >= (gObj.pageSettings.pageSize) && blockLoad) {\n                break;\n            }\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                var isVFreorder = this.ensureFrozenHeaderRender(args);\n                if (gObj.frozenRows && i < gObj.frozenRows && !isInfiniteScroll && args.requestType !== 'virtualscroll' && isVFreorder) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n                if (modelData[i].isExpand) {\n                    gObj.notify(events.expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);\n                }\n            }\n            else {\n                var rowTemplateID = gObj.element.id + 'rowTemplate';\n                var elements = void 0;\n                if (gObj.isReact) {\n                    var isHeader = gObj.frozenRows && i < gObj.frozenRows;\n                    var copied = extend({ index: i }, dataSource[i]);\n                    gObj.getRowTemplate()(copied, gObj, 'rowTemplate', rowTemplateID, null, null, isHeader ? hdrfrag : frag);\n                    gObj.renderTemplates();\n                }\n                else {\n                    elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate', rowTemplateID);\n                }\n                if (!gObj.isReact && elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = !gObj.isReact ? appendChildren(hdrfrag, elements) : hdrfrag.lastElementChild;\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        if (!gObj.isReact) {\n                            tr = appendChildren(frag, elements);\n                        }\n                        trElement = gObj.isReact ? frag.lastElementChild : tr.lastElementChild;\n                    }\n                }\n                var arg = { data: modelData[i].data, row: trElement ? trElement : tr };\n                this.parent.trigger(events.rowDataBound, arg);\n            }\n            if (modelData[i].isDataRow) {\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        this.splitRows(idx);\n        if ((gObj.frozenRows && args.requestType !== 'virtualscroll' && !isInfiniteScroll)\n            || (args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === 'X')) {\n            hdrTbody = frzCols ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n                : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n            if (isReact) {\n                var parentTable = hdrTbody.parentElement;\n                remove(hdrTbody);\n                parentTable.appendChild(hdrfrag);\n            }\n            else {\n                hdrTbody.innerHTML = '';\n                hdrTbody.appendChild(hdrfrag);\n            }\n        }\n        if (!gObj.enableVirtualization && gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (frzCols && idx === 0) {\n            this.getPanel().firstChild.style.overflowY = 'hidden';\n        }\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.rows = this.rows.slice(0);\n        }\n        args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            var isVFTable = _this.parent.enableVirtualization && _this.parent.getFrozenColumns() !== 0;\n            if (!_this.parent.enableVirtualization && !isInfiniteScroll) {\n                remove(_this.tbody);\n                _this.tbody = _this.parent.createElement('tbody');\n            }\n            if (frzCols && !isVFTable && !_this.parent.enableInfiniteScrolling) {\n                if (isReact) {\n                    _this.tbody = frag;\n                }\n                else {\n                    _this.tbody.appendChild(frag);\n                }\n                if (_this.index === 0) {\n                    _this.isLoaded = false;\n                    fCont.querySelector('table').appendChild(_this.tbody);\n                }\n                else {\n                    if (_this.tbody.childElementCount < 1) {\n                        _this.tbody.appendChild(_this.parent.createElement('tr').appendChild(_this.parent.createElement('td')));\n                    }\n                    _this.isLoaded = true;\n                    mCont.querySelector('table').appendChild(_this.tbody);\n                    if (_this.parent.getFrozenColumns() !== 0 && !_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n                    }\n                    fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                    mCont.style.overflowY = _this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                    fCont.style.borderRightWidth = '1px';\n                }\n            }\n            else {\n                if (gObj.rowTemplate) {\n                    updateBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate', gObj);\n                }\n                if (isVFTable) {\n                    if (!args.renderMovableContent) {\n                        _this.appendContent(fCont.querySelector('tbody'), frag, args);\n                        if (_this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll'\n                            && mCont.scrollLeft > 0) {\n                            _this.parent.setColumnIndexesInView(_this.viewColIndexes);\n                            args.virtualInfo.columnIndexes = _this.viewColIndexes;\n                        }\n                    }\n                    else {\n                        _this.appendContent(mCont.querySelector('tbody'), frag, args);\n                        if (args.virtualInfo && args.virtualInfo.direction !== 'right' && args.virtualInfo.direction !== 'left') {\n                            fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                        }\n                        args.renderMovableContent = false;\n                    }\n                }\n                else {\n                    if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                        _this.isAddRows = false;\n                        _this.parent.notify(events.removeInfiniteRows, { args: args });\n                        _this.parent.notify(events.appendInfiniteContent, {\n                            tbody: _this.tbody, frag: frag, args: args, rows: _this.rows,\n                            rowElements: _this.rowElements, visibleRows: _this.visibleRows\n                        });\n                        if (frzCols && idx !== 0) {\n                            fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                            mCont.style.overflowY = _this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                            fCont.style.borderRightWidth = '1px';\n                        }\n                    }\n                    else {\n                        _this.useGroupCache = false;\n                        _this.appendContent(_this.tbody, frag, args);\n                    }\n                }\n            }\n            if (frzCols && idx === 0) {\n                if (isVFTable) {\n                    args.renderMovableContent = true;\n                }\n                _this.refreshContentRows(extend({}, args));\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args) {\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (isReact) {\n            this.getTable().appendChild(frag);\n        }\n        else {\n            tbody.appendChild(frag);\n            this.getTable().appendChild(tbody);\n        }\n    };\n    ContentRender.prototype.setRowsInLazyGroup = function (row, index) {\n        if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n            this.parent.contentModule.maintainRows(row, index);\n        }\n    };\n    ContentRender.prototype.setGroupCache = function (data, args) {\n        if (!this.useGroupCache && this.parent.groupSettings.enableLazyLoading) {\n            this.parent.notify(events.setGroupCache, { args: args, data: data });\n        }\n    };\n    ContentRender.prototype.ensureFrozenHeaderRender = function (args) {\n        return !((this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) || (this.parent.infiniteScrollSettings.enableCache\n            && this.parent.frozenRows && this.parent.infiniteScrollModule.requestType === 'delete'\n            && this.parent.pageSettings.currentPage !== 1));\n    };\n    ContentRender.prototype.checkCache = function (modelData, args) {\n        if (this.parent.infiniteScrollSettings.enableCache && args.requestType === 'infiniteScroll') {\n            var index = args.isFrozen ? 1 : 0;\n            var frozenCols = this.parent.getFrozenColumns();\n            this.isAddRows = !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]);\n            if (frozenCols && !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n                this.isAddRows = this.infiniteCache[this.parent.pageSettings.currentPage][index].length !== 0;\n            }\n            if (this.isAddRows) {\n                var data = !frozenCols ? this.infiniteCache[this.parent.pageSettings.currentPage]\n                    : this.infiniteCache[this.parent.pageSettings.currentPage][index];\n                modelData = this.parent.pageSettings.currentPage === 1 ? data.slice(this.parent.frozenRows) : data;\n            }\n            return modelData;\n        }\n        if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length &&\n            (args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n            && this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]) {\n            this.useGroupCache = true;\n            return this.parent.contentModule.initialGroupRows(args.requestType === 'reorder');\n        }\n        return null;\n    };\n    ContentRender.prototype.setInfiniteVisibleRows = function (args, data) {\n        var frozenCols = this.parent.getFrozenColumns();\n        if (this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache) {\n            if (frozenCols) {\n                !args.isFrozen ? this.visibleFrozenRows.push(data) : this.visibleRows.push(data);\n            }\n            else if (!this.parent.infiniteScrollSettings.enableCache) {\n                this.visibleRows.push(data);\n            }\n        }\n    };\n    ContentRender.prototype.getCurrentBlockInfiniteRecords = function (isFreeze) {\n        var data = [];\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            if (!Object.keys(this.infiniteCache).length) {\n                return [];\n            }\n            var frozenCols = this.parent.getFrozenColumns();\n            var rows = this.parent.getRows();\n            var index = parseInt(rows[this.parent.frozenRows].getAttribute('aria-rowindex'), 10);\n            var first = Math.ceil((index + 1) / this.parent.pageSettings.pageSize);\n            index = parseInt(rows[rows.length - 1].getAttribute('aria-rowindex'), 10);\n            var last = Math.ceil(index / this.parent.pageSettings.pageSize);\n            if (frozenCols) {\n                var idx = isFreeze ? 0 : 1;\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i][idx]\n                        : data.concat(this.infiniteCache[i][idx]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1][idx].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n            else {\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i] : data.concat(this.infiniteCache[i]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n        }\n        return data;\n    };\n    ContentRender.prototype.getReorderedVFRows = function (args) {\n        return this.parent.contentModule.getReorderedFrozenRows(args);\n    };\n    ContentRender.prototype.virtualFrozenHdrRefresh = function (hdrfrag, modelData, row, args, dataSource, columns) {\n        if (this.parent.frozenRows && this.parent.getFrozenColumns() && this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) {\n            var tr = void 0;\n            this.currentMovableRows = dataSource;\n            var fhdrData = this.getReorderedVFRows(args);\n            for (var i = 0; i < fhdrData.length; i++) {\n                tr = row.render(fhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            if (args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n            if (args.renderMovableContent) {\n                this.parent.currentViewData = this.currentMovableRows;\n                this.currentMovableRows = null;\n            }\n        }\n    };\n    ContentRender.prototype.getInfiniteRows = function () {\n        var rows = [];\n        var frozenCols = this.parent.getFrozenColumns();\n        if (this.parent.enableInfiniteScrolling) {\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                var keys = Object.keys(this.infiniteCache);\n                for (var i = 0; i < keys.length; i++) {\n                    rows = !frozenCols ? rows.concat(this.infiniteCache[keys[i]]) : rows.concat(this.infiniteCache[keys[i]][0]);\n                }\n            }\n            else {\n                rows = frozenCols ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return rows;\n    };\n    ContentRender.prototype.getInfiniteMovableRows = function () {\n        var infiniteCacheRows = this.getCurrentBlockInfiniteRecords();\n        var infiniteRows = this.parent.enableInfiniteScrolling ? infiniteCacheRows.length ? infiniteCacheRows\n            : this.visibleRows : [];\n        return infiniteRows;\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        var infiniteRows = this.getInfiniteRows();\n        return infiniteRows.length ? infiniteRows : this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        var infiniteRows = this.getInfiniteMovableRows();\n        return infiniteRows.length ? infiniteRows : this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        if (isBlazor() && gObj.isServerRendered) {\n            this.parent.notify('setvisibility', columns);\n        }\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (frzCols) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        var args = {};\n        var infiniteData = this.infiniteRowVisibility();\n        var contentrows = infiniteData ? infiniteData\n            : this.rows.filter(function (row) { return !row.isDetailRow; });\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                if (frzCols) {\n                    var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n                    if (idx < normalizedfrzCols) {\n                        setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                        var infiniteFreezeData = this.infiniteRowVisibility(true);\n                        contentrows = infiniteFreezeData ? infiniteFreezeData : this.freezeRows;\n                        tr = gObj.getDataRows();\n                    }\n                    else {\n                        var mTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n                        colIdx = idx = idx - frzCols;\n                        setStyleAttribute(mTable.childNodes[idx], { 'display': displayVal });\n                        tr = gObj.getMovableDataRows();\n                        var infiniteMovableData = this.infiniteRowVisibility();\n                        contentrows = infiniteMovableData ? infiniteMovableData : this.movableRows;\n                    }\n                }\n                else {\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                }\n            }\n            if (!needFullRefresh) {\n                this.setDisplayNone(tr, colIdx, displayVal, contentrows);\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            if (!this.parent.getFrozenColumns()) {\n                this.parent.notify(events.partialRefresh, { rows: contentrows, args: args });\n            }\n            else {\n                this.parent.notify(events.partialRefresh, { rows: this.freezeRows, args: { isFrozen: true, rows: this.freezeRows } });\n                this.parent.notify(events.partialRefresh, { rows: this.movableRows, args: { isFrozen: false, rows: this.movableRows } });\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    ContentRender.prototype.setDisplayNone = function (tr, idx, displayVal, rows) {\n        var trs = Object.keys(tr);\n        for (var i = 0; i < trs.length; i++) {\n            var td = tr[trs[i]].querySelectorAll('td.e-rowcell')[idx];\n            if (tr[trs[i]].querySelectorAll('td.e-rowcell').length && td) {\n                setStyleAttribute(tr[trs[i]].querySelectorAll('td.e-rowcell')[idx], { 'display': displayVal });\n                if (tr[trs[i]].querySelectorAll('td.e-rowcell')[idx].classList.contains('e-hide')) {\n                    removeClass([tr[trs[i]].querySelectorAll('td.e-rowcell')[idx]], ['e-hide']);\n                }\n                if (this.parent.isRowDragable()) {\n                    var index = this.parent.getFrozenColumns() ? idx : idx + 1;\n                    rows[trs[i]].cells[index].visible = displayVal === '' ? true : false;\n                }\n                else {\n                    rows[trs[i]].cells[idx].visible = displayVal === '' ? true : false;\n                }\n            }\n        }\n        this.parent.notify(events.infiniteShowHide, { visible: displayVal, index: idx, isFreeze: this.isInfiniteFreeze });\n    };\n    ContentRender.prototype.infiniteRowVisibility = function (isFreeze) {\n        var infiniteData;\n        if (this.parent.enableInfiniteScrolling) {\n            this.isInfiniteFreeze = isFreeze;\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                infiniteData = isFreeze ? this.getCurrentBlockInfiniteRecords(true) : this.getCurrentBlockInfiniteRecords();\n            }\n            else {\n                infiniteData = isFreeze ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return infiniteData;\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = void 0;\n            if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n                && this.parent.contentModule.isXaxis()) {\n                colGroup = this.parent.getMovableVirtualHeader().querySelector('colgroup').cloneNode(true);\n            }\n            else {\n                colGroup = isBlazor() ? this.parent.getHeaderTable().querySelector('colgroup').cloneNode(true) :\n                    this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n            }\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        this.droppable = new Droppable(gObj.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.droppableDestroy = function () {\n        if (this.droppable && !this.droppable.isDestroyed) {\n            this.droppable.destroy();\n        }\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        if (isBlazor() && !this.parent.isJsComponent && this.parent.frozenRows) {\n            return;\n        }\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        if (this.parent.getFrozenColumns()) {\n            var rows = this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; });\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].isSelected = set;\n            }\n        }\n        var row = this.getRows().filter(function (row) { return clearAll || uid === row.uid; });\n        for (var j = 0; j < row.length; j++) {\n            row[j].isSelected = set;\n            var cells = row[j].cells;\n            for (var k = 0; k < cells.length; k++) {\n                cells[k].isSelected = set;\n            }\n        }\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getInfiniteRowIndex = function (index) {\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            var fRows = this.parent.frozenRows;\n            var idx = fRows > index ? 0 : fRows;\n            var firstRowIndex = parseInt(this.parent.getRows()[idx].getAttribute('aria-rowindex'), 10);\n            index = fRows > index ? index : (index - firstRowIndex) + fRows;\n        }\n        return index;\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    ContentRender.prototype.setRowObjects = function (rows) {\n        this.rows = rows;\n    };\n    /** @hidden */\n    ContentRender.prototype.immutableModeRendering = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        gObj.hideSpinner();\n        var key = gObj.getPrimaryKeyFieldNames()[0];\n        var oldKeys = {};\n        var newKeys = {};\n        var newRowObjs = [];\n        var oldIndexes = {};\n        var oldRowObjs = gObj.getRowsObject().slice();\n        var batchChangeKeys = this.getBatchEditedRecords(key, oldRowObjs);\n        var newIndexes = {};\n        var hasBatch = Object.keys(batchChangeKeys).length !== 0;\n        if (gObj.getContent().querySelector('.e-emptyrow') || args.requestType === 'reorder'\n            || this.parent.groupSettings.columns.length) {\n            this.refreshContentRows(args);\n        }\n        else {\n            if (gObj.currentViewData.length === 0) {\n                return;\n            }\n            var oldRowElements = {};\n            var tbody = gObj.createElement('tbody');\n            var dataSource = gObj.currentViewData;\n            var trs = [].slice.call(this.getTable().querySelector('tbody').children);\n            if (this.prevCurrentView.length) {\n                var prevLen = this.prevCurrentView.length;\n                var currentLen = dataSource.length;\n                if (prevLen === currentLen) {\n                    for (var i = 0; i < currentLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        newKeys[dataSource[i][key]] = oldKeys[this.prevCurrentView[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n                else {\n                    for (var i = 0; i < currentLen; i++) {\n                        newKeys[dataSource[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                    }\n                    for (var i = 0; i < prevLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldKeys[this.prevCurrentView[i][key]] = i;\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n            }\n            for (var i = 0; i < dataSource.length; i++) {\n                var oldIndex = oldKeys[dataSource[i][key]];\n                if (!isNullOrUndefined(oldIndex)) {\n                    var isEqual = false;\n                    if (this.mutableData) {\n                        isEqual = this.objectEqualityChecker(this.prevCurrentView[i], dataSource[i]);\n                    }\n                    var tr = oldRowElements[oldRowObjs[oldIndex].uid];\n                    newRowObjs.push(oldRowObjs[oldIndex]);\n                    if (this.rowElements[i] && this.rowElements[i].getAttribute('data-uid') === newRowObjs[i].uid\n                        && ((hasBatch && isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                            || (!hasBatch && (isEqual || this.prevCurrentView[i] === dataSource[i])))) {\n                        if (oldIndex !== i) {\n                            this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                        }\n                        tbody.appendChild(tr);\n                        continue;\n                    }\n                    if ((hasBatch && !isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                        || (!this.mutableData && dataSource[i] !== this.prevCurrentView[oldIndex])\n                        || (this.mutableData && !isEqual)) {\n                        oldRowObjs[oldIndex].setRowValue(dataSource[i]);\n                    }\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n                else {\n                    var row = new RowRenderer(this.serviceLocator, null, gObj);\n                    var modelData = this.generator.generateRows([dataSource[i]]);\n                    newRowObjs.push(modelData[0]);\n                    var tr = row.render(modelData[0], gObj.getColumns());\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n            }\n            this.rows = newRowObjs;\n            this.rowElements = [].slice.call(tbody.children);\n            remove(this.getTable().querySelector('tbody'));\n            this.getTable().appendChild(tbody);\n            this.parent.trigger(events.dataBound, {}, function () {\n                if (_this.parent.allowTextWrap) {\n                    _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                }\n            });\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n        }\n    };\n    ContentRender.prototype.objectEqualityChecker = function (old, next) {\n        var keys = Object.keys(old);\n        var isEqual = true;\n        for (var i = 0; i < keys.length; i++) {\n            if (old[keys[i]] !== next[keys[i]]) {\n                isEqual = false;\n                break;\n            }\n        }\n        return isEqual;\n    };\n    ContentRender.prototype.getBatchEditedRecords = function (primaryKey, rows) {\n        var keys = {};\n        var changes = this.parent.getBatchChanges();\n        var changedRecords = [];\n        var addedRecords = [];\n        if (Object.keys(changes).length) {\n            changedRecords = changes.changedRecords;\n            addedRecords = changes.addedRecords;\n        }\n        var args = { cancel: false };\n        this.parent.notify(events.immutableBatchCancel, { rows: rows, args: args });\n        if (addedRecords.length) {\n            if (this.parent.editSettings.newRowPosition === 'Bottom') {\n                rows.splice(rows.length - 1, addedRecords.length);\n            }\n            else {\n                if (!args.cancel) {\n                    rows.splice(0, addedRecords.length);\n                }\n            }\n        }\n        for (var i = 0; i < changedRecords.length; i++) {\n            keys[changedRecords[i][primaryKey]] = i;\n        }\n        return keys;\n    };\n    ContentRender.prototype.refreshImmutableContent = function (index, tr, row) {\n        row.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        row.isAltRow ? tr.classList.add('e-altrow') : tr.classList.remove('e-altrow');\n        row.index = index;\n        row.edit = undefined;\n        row.isDirty = false;\n        tr.setAttribute('aria-rowindex', index.toString());\n        this.updateCellIndex(tr, index);\n    };\n    ContentRender.prototype.updateCellIndex = function (rowEle, index) {\n        for (var i = 0; i < rowEle.cells.length; i++) {\n            rowEle.cells[i].setAttribute('index', index.toString());\n        }\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.isFirstCol = false;\n        this.isReplaceDragEle = true;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var result = void 0;\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });\n            if (isBlazor()) {\n                e.bindEvents(e.dragElement);\n            }\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    if (!gObj.groupSettings.allowReordering) {\n                        return;\n                    }\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid, droppedElement: e.droppedElement });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.element.querySelector('.e-gridheader');\n        var isRendered = (div != null);\n        div = isRendered ? div : this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = isRendered ? div.querySelector('.e-headercontent') :\n            this.parent.createElement('div', { className: 'e-headercontent' });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (!isRendered) {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        if (!this.parent.getFrozenColumns()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var skipDom = isBlazor() && this.parent.frozenRows !== 0;\n        var table = this.createTable();\n        var innerDiv = this.getPanel().querySelector('.e-headercontent');\n        if (!skipDom) {\n            innerDiv.appendChild(table);\n        }\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function (tableEle) {\n        if (tableEle === void 0) { tableEle = null; }\n        var skipDom = isBlazor() && this.parent.frozenRows !== 0;\n        var gObj = this.parent;\n        if (!(isBlazor() && !gObj.isJsComponent) && this.getTable() && (!gObj.getFrozenColumns())) {\n            remove(this.getTable());\n        }\n        var columns = gObj.getColumns();\n        var innerDiv = this.getPanel().querySelector('.e-headercontent');\n        var table = skipDom ? tableEle || innerDiv.querySelector('.e-table') :\n            this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var findHeaderRow = this.createHeaderContent();\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement('colgroup');\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, this.parent);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        if (!skipDom) {\n            tbody.appendChild(rowBody);\n        }\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        if (!skipDom) {\n            table.appendChild(tbody);\n        }\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    HeaderRender.prototype.createHeaderContent = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows);\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.isRowDragable() && frzCols) {\n            var row = rows[0];\n            if (row.cells[1].column.index === frzCols) {\n                rows[0].cells.shift();\n            }\n        }\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n            && this.parent.contentModule.isXaxis()) {\n            cols = extend([], this.parent.getColumns());\n            cols.splice(0, this.parent.getFrozenColumns());\n        }\n        colGroup.id = this.parent.element.id + 'colGroup';\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable()) {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                var args = {};\n                this.parent.notify(events.detailIndentCellInfo, args);\n                rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows) {\n        var column;\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var frzCols = this.parent.getFrozenColumns();\n        var left;\n        if (this.parent.enableColumnVirtualization && frzCols) {\n            left = this.parent.getContent().querySelector('.e-movablecontent').scrollLeft;\n        }\n        if (!cols.columns) {\n            if (left && left > 0 && this.parent.contentModule.isXaxis()\n                && this.parent.inViewIndexes[0] !== 0 && this.frzIdx > this.parent.getFrozenColumns()) {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            else {\n                if (!frzCols && (!this.parent.lockcolPositionCount\n                    || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))\n                    || (frzCols && ((!isMovable && (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns || cols.isFrozen) &&\n                        (!this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered) ||\n                            (!cols.lockColumn && this.lockColsRendered)))\n                        || (isMovable && (this.frzIdx + this.notfrzIdx >= this.parent.frozenColumns && !cols.isFrozen) &&\n                            (!this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered) ||\n                                (!cols.lockColumn && this.lockColsRendered)))))) {\n                    rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n                }\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.isFirstCol = false;\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var frzObj = this.refreshFrozenHdr(cols.columns, { isPartial: false, isComp: true, cnt: 0 });\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                if (!frzCols && (!this.parent.lockcolPositionCount\n                    || (!this.lockColsRendered && stackedLockColsCount) || (this.lockColsRendered && (colSpan - stackedLockColsCount)))\n                    || (frzCols && ((!isMovable && this.checkFrozenStackHeader(cols.columns, isMovable)\n                        && (this.parent.frozenColumns - this.frzIdx > 0 || (frzObj.isPartial)))\n                        || (isMovable && ((colSpan + this.frzIdx > this.parent.frozenColumns && !frzObj.isComp)\n                            || this.checkFrozenStackHeader(cols.columns, isMovable)))))) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, isMovable, frzObj.cnt, stackedLockColsCount)\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !this.isFirstCol && len !== 1;\n                    var isLaststackedCol = i === (len - 1);\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1, isLaststackedCol && isLastCol, isMovable);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.checkFrozenStackHeader = function (cols, isMovable) {\n        var isTrue = false;\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[i];\n            var colIndex = this.parent.getNormalizedColumnIndex(col.uid);\n            if (!col.columns) {\n                if (isMovable && colIndex >= this.parent.getFrozenColumns() && col.visible) {\n                    isTrue = true;\n                    break;\n                }\n                if (!isMovable && colIndex < this.parent.getFrozenColumns() && col.visible) {\n                    isTrue = true;\n                    break;\n                }\n            }\n        }\n        return isTrue;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.refreshFrozenHdr = function (cols, frzObj) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                frzObj = this.refreshFrozenHdr(cols[i].columns, frzObj);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    frzObj.isPartial = true;\n                    frzObj.cnt++;\n                }\n                frzObj.isComp = frzObj.isComp && (cols[i].isFrozen ||\n                    this.parent.getColumnIndexByField(cols[i].field) < this.parent.frozenColumns);\n            }\n        }\n        return frzObj;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, isMovable, frozenCnt, stackedLockColsCount) {\n        var frzCol = this.parent.frozenColumns;\n        if (this.parent.getFrozenColumns() && this.frzIdx + colSpan > frzCol) {\n            if (isMovable) {\n                colSpan = colSpan - (frzCol > this.frzIdx ? frzCol - this.frzIdx : 0) - frozenCnt;\n            }\n            else {\n                colSpan = colSpan - (colSpan - (frzCol > this.frzIdx ? frzCol + frozenCnt - this.frzIdx : frozenCnt));\n            }\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal;\n        var idx;\n        var className;\n        var element;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n                if (idx < normalizedfrzCols) {\n                    if (isBlazor() && gObj.isServerRendered) {\n                        setStyleAttribute(this.getTable().querySelector('colgroup').children[idx], { 'display': displayVal });\n                        setStyleAttribute(this.getTable().querySelectorAll('th')[idx], { 'display': displayVal });\n                    }\n                    else {\n                        setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                    }\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                    var mTbl = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('table');\n                    setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], { 'display': displayVal });\n                    if (isBlazor() && gObj.isServerRendered) {\n                        setStyleAttribute(mTbl.querySelectorAll('th')[idx - frzCols], { 'display': displayVal });\n                    }\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        if (isBlazor() && this.parent.isServerRendered && this.parent.frozenRows && this.parent.getFrozenColumns()) {\n            this.freezeReorder = true;\n        }\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var frzCols = this.parent.getFrozenColumns();\n        var isVFTable = this.parent.enableColumnVirtualization && frzCols !== 0;\n        var setFrozenTable = isBlazor() && this.parent.isServerRendered && this.parent.frozenRows !== 0 && frzCols !== 0;\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.freezeReorder ? this.headerPanel.querySelector('.e-movableheader').querySelector('.e-table')\n            : this.getTable();\n        if (isVFTable) {\n            table = this.parent.contentModule.getVirtualFreezeHeader();\n        }\n        if (setFrozenTable && !isVFTable) {\n            table = this.freezeReorder ? this.headerPanel.querySelector('.e-movableheader').querySelector('.e-table') :\n                this.headerPanel.querySelector('.e-frozenheader').querySelector('.e-table');\n        }\n        if (table) {\n            if (isBlazor() && this.parent.isServerRendered) {\n                table.removeChild(table.querySelector('colgroup'));\n                table.removeChild(table.querySelector('thead'));\n            }\n            else {\n                remove(table);\n                table.removeChild(table.firstChild);\n                table.removeChild(table.childNodes[0]);\n            }\n            var colGroup = this.parent.createElement('colgroup');\n            var findHeaderRow = this.createHeaderContent();\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            if (!isVFTable && !setFrozenTable) {\n                this.setTable(table);\n            }\n            if (!(isBlazor() && this.parent.isServerRendered)) {\n                this.appendContent(table);\n            }\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols || (this.parent.enableColumnVirtualization && frzCols)) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n            }\n            if (this.parent.enableColumnVirtualization && parentsUntil(table, 'e-movableheader')) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().querySelector('.e-headercontent').appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        this.draggable = new Draggable(gObj.getHeaderContent(), {\n            dragTarget: '.e-headercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            abort: '.e-rhandler',\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren, extendObjWithFn } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData } from '../base/constant';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n        this.element = this.parent.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = this.parent.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            if (column.type === 'number' && isNaN(parseInt(value, 10))) {\n                value = null;\n            }\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData, isEdit) {\n        var _a;\n        var result;\n        if (cell.column.template) {\n            var isReactCompiler = this.parent.isReact && typeof (cell.column.template) !== 'string';\n            var literals = ['index'];\n            var dummyData = extendObjWithFn({}, data, (_a = {}, _a[foreignKeyData] = fData, _a.column = cell.column, _a));\n            var templateID = this.parent.element.id + cell.column.uid;\n            var str = 'isStringTemplate';\n            var index = 'index';\n            if (isBlazor() && isEdit) {\n                var rNumber = this.parent.editSettings.mode !== 'Batch' ? parseInt(attributes[index], 10) : null;\n                result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str], rNumber);\n                window[templateID] = null;\n                if (this.parent.editSettings.mode !== 'Batch') {\n                    updateBlazorTemplate(templateID, 'Template', cell.column, false);\n                }\n            }\n            else {\n                if (isReactCompiler) {\n                    var copied = { 'index': attributes[literals[0]] };\n                    cell.column.getColumnTemplate()(extend(copied, dummyData), this.parent, 'columnTemplate', templateID, this.parent[str], null, node);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str]);\n                }\n            }\n            if (!isReactCompiler) {\n                appendChildren(node, result);\n            }\n            this.parent.notify('template-result', { template: result });\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes, isExpand, isEdit) {\n        return this.refreshCell(cell, data, attributes, isEdit);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var isEdit = this.parent.editSettings.mode === 'Batch' && td.classList.contains('e-editedbatchcell');\n        if (this.parent.isReact) {\n            td.innerHTML = '';\n            var cellIndex = td.cellIndex;\n            var parentRow = td.parentElement;\n            remove(td);\n            var newTD = this.refreshCell(cell, data, attributes, isEdit);\n            this.cloneAttributes(newTD, td);\n            parentRow.cells.length !== cellIndex - 1 ? parentRow.insertBefore(newTD, parentRow.cells[cellIndex])\n                : parentRow.appendChild(newTD);\n        }\n        else {\n            var node = this.refreshCell(cell, data, attributes, isEdit);\n            td.innerHTML = '';\n            td.setAttribute('aria-label', node.getAttribute('aria-label'));\n            var elements = [].slice.call(node.childNodes);\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                td.appendChild(elem);\n            }\n        }\n    };\n    // tslint:disable-next-line:no-any\n    CellRenderer.prototype.cloneAttributes = function (target, source) {\n        // tslint:disable-next-line:no-any\n        var attrs = source.attributes;\n        // tslint:disable-next-line:no-any\n        var i = attrs.length;\n        // tslint:disable-next-line:no-any\n        var attr;\n        while (i--) {\n            attr = attrs[i];\n            target.setAttribute(attr.name, attr.value);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes, isEdit) {\n        var _a;\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if ((column.type === 'date' || column.type === 'datetime') && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        if (this.evaluate(node, cell, data, attributes, fData, isEdit) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            if (column.type !== 'checkbox') {\n                node.classList.add('e-ellipsistooltip');\n            }\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = _this.parent.createElement('span', { className: 'e-headertext' });\n        _this.sortEle = _this.parent.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = _this.parent.createElement('div');\n        _this.chkAllBox = _this.parent.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        var hValueAccer;\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (!isNullOrUndefined(column.headerValueAccessor)) {\n            hValueAccer = this.getValue(column.headerText, column);\n        }\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            if (!isNullOrUndefined(hValueAccer)) {\n                value = hValueAccer;\n            }\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            //need to pass the template id for blazor headertemplate\n            var headerTempID = gridObj.element.id + column.uid + 'headerTemplate';\n            var str = 'isStringTemplate';\n            var col = isBlazor() ? column.toJSON() : column;\n            var isReactCompiler = this.parent.isReact && typeof (column.headerTemplate) !== 'string';\n            if (isReactCompiler) {\n                var copied = { 'index': colIndex };\n                node.firstElementChild.innerHTML = '';\n                column.getHeaderTemplate()(extend(copied, col), gridObj, 'headerTemplate', headerTempID, this.parent[str], null, node.firstElementChild);\n                this.parent.renderTemplates();\n            }\n            else {\n                result = column.getHeaderTemplate()(extend({ 'index': colIndex }, col), gridObj, 'headerTemplate', headerTempID, this.parent[str]);\n                node.firstElementChild.innerHTML = '';\n                appendChildren(node.firstElementChild, result);\n            }\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            if (column.type !== 'checkbox') {\n                node.classList.add('e-ellipsistooltip');\n            }\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.getValue = function (field, column) {\n        return column.headerValueAccessor(field, column);\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (this.parent.createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = this.parent.createElement('div', {\n            className: 'e-stackedheadercelldiv',\n            attrs: { 'e-mappinguid': cell.column.uid }\n        });\n        var column = cell.column;\n        node.appendChild(div);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            appendChildren(div, column.getHeaderTemplate()(column, this.parent, 'headerTemplate'));\n        }\n        else {\n            this.appendHtml(div, column.headerText, column.getDomSetter());\n        }\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            node.classList.add('e-ellipsistooltip');\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        if (cell.column.customAttributes) {\n            setStyleAndAttributes(node, cell.column.customAttributes);\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = cell.column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-groupcaption',\n            attrs: { id: _this.parent.element.id + 'captioncell', role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var fKeyValue;\n        data.headerText = cell.column.headerText;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            var isReactCompiler = this.parent.isReact && typeof (gObj.groupSettings.captionTemplate) !== 'string';\n            if (isBlazor()) {\n                var tempID = gObj.element.id + 'captionTemplate';\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data, null, null, tempID);\n            }\n            else {\n                if (isReactCompiler) {\n                    var tempID = gObj.element.id + 'captionTemplate';\n                    templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent, 'captionTemplate', tempID, null, null, node);\n                    this.parent.renderTemplates();\n                }\n                else if (this.parent.isVue) {\n                    result = templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent);\n                }\n                else {\n                    result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n                }\n            }\n            if (!isReactCompiler) {\n                appendChildren(node, result);\n            }\n        }\n        else {\n            if (gObj.groupSettings.enableLazyLoading) {\n                node.innerHTML = cell.column.headerText + ': ' + value;\n            }\n            else {\n                node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                    (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n            }\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     * @param  {{ [x: string]: string }} attr\n     * @param {boolean} isExpand\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data, attr, isExpand) {\n        var node = this.element.cloneNode();\n        node.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', isExpand ? 'true' : 'false');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(this.parent.createElement('div', {\n            className: isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' : 'e-icons e-gnextforward e-icon-grightarrow'\n        }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar RowDragDropRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropRenderer, _super);\n    function RowDragDropRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowdragdrop',\n            attrs: { role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    RowDragDropRenderer.prototype.render = function (cell, data) {\n        var nodeElement = this.element.cloneNode();\n        nodeElement.appendChild(this.parent.createElement('div', {\n            className: 'e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon'\n        }));\n        if (cell.isSelected) {\n            nodeElement.classList.add('e-selectionbackground');\n            nodeElement.classList.add('e-active');\n        }\n        return nodeElement;\n    };\n    return RowDragDropRenderer;\n}(CellRenderer));\nexport { RowDragDropRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar RowDragDropHeaderRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropHeaderRenderer, _super);\n    function RowDragDropHeaderRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-rowdragheader' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    RowDragDropHeaderRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return RowDragDropHeaderRenderer;\n}(CellRenderer));\nexport { RowDragDropHeaderRenderer };\n","import { remove, resetBlazorTemplate, updateBlazorTemplate, blazorTemplates, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.counter = 0;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        var isServerRendered = 'isServerRendered';\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.parent.scrollModule.setWidth();\n        this.parent.scrollModule.setHeight();\n        if (this.parent.height !== 'auto') {\n            this.parent.scrollModule.setPadding();\n        }\n        if (!(isBlazor() && this.parent[isServerRendered])) {\n            this.refreshDataManager();\n        }\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        var _this = this;\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        var gObj = this.parent;\n        var preventUpdate = 'preventUpdate';\n        gObj.notify(e.requestType + \"-begin\", e);\n        if (isBlazor()) {\n            this.resetTemplates();\n        }\n        if (isBlazor() && gObj.isServerRendered) {\n            var bulkChanges = 'bulkChanges';\n            if (gObj[bulkChanges].dataSource) {\n                delete gObj[bulkChanges].dataSource;\n            }\n            gObj.notify('blazor-action-begin', e);\n            if (e.requestType === 'filtering') {\n                var columns = 'columns';\n                e[columns] = null;\n            }\n            if (e.requestType === 'sorting') {\n                var target = 'target';\n                e[target] = null;\n            }\n            if (gObj.editSettings.mode === 'Batch' && !gObj.isEdit) {\n                gObj.notify('closebatch', {});\n            }\n        }\n        var tempPreventUpdate = this.parent[preventUpdate];\n        gObj.trigger(events.actionBegin, e, function (args) {\n            if (args === void 0) { args = { requestType: 'refresh' }; }\n            if (args.requestType === 'delete' && isBlazor() && !gObj.isJsComponent) {\n                var data = 'data';\n                if (isNullOrUndefined(gObj.commandDelIndex)) {\n                    args[data] = gObj.getSelectedRecords();\n                }\n                else {\n                    var tempSelectedRecord = args[data];\n                    args[data] = {};\n                    args[data][0] = tempSelectedRecord;\n                }\n            }\n            if (args.cancel) {\n                gObj.notify(events.cancelBegin, args);\n                return;\n            }\n            if (isBlazor() && gObj.editSettings.mode === 'Normal' && gObj.isEdit && e.requestType !== 'infiniteScroll') {\n                gObj.notify('closeinline', {});\n            }\n            if (args.requestType === 'delete' && gObj.allowPaging) {\n                var dataLength = args.data.length;\n                var count = gObj.pageSettings.totalRecordsCount - dataLength;\n                if (!(gObj.currentViewData.length - dataLength) && count) {\n                    gObj.prevPageMoving = true;\n                    gObj.setProperties({\n                        pageSettings: {\n                            totalRecordsCount: count, currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n                        }\n                    }, true);\n                    gObj.pagerModule.pagerObj.totalRecordsCount = count;\n                }\n            }\n            if (isBlazor() && _this.parent.isServerRendered) {\n                if (tempPreventUpdate) {\n                    var bulkChanges = 'bulkChanges';\n                    gObj[bulkChanges] = {};\n                    return;\n                }\n                if (e.requestType === 'refresh') {\n                    _this.parent.notify('updateaction', args);\n                }\n                if (args.requestType !== 'virtualscroll') {\n                    _this.parent.showSpinner();\n                }\n                if (args.requestType === 'delete' || args.requestType === 'save') {\n                    _this.parent.notify(events.addDeleteAction, args);\n                    _this.parent.notify('add-delete-success', args);\n                }\n                else {\n                    _this.parent.allowServerDataBinding = true;\n                    _this.parent.serverDataBind();\n                    _this.parent.allowServerDataBinding = false;\n                }\n            }\n            else if (args.requestType === 'reorder' && _this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else if ((args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n                && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length\n                && _this.parent.contentModule.getGroupCache()[_this.parent.pageSettings.currentPage]) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else {\n                _this.refreshDataManager(args);\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Render.prototype.resetTemplates = function () {\n        var gObj = this.parent;\n        var gridColumns = gObj.getColumns();\n        if (gObj.detailTemplate) {\n            var detailTemplateID = gObj.element.id + 'detailTemplate';\n            blazorTemplates[detailTemplateID] = [];\n            resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n        }\n        if (gObj.groupSettings.captionTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n        }\n        if (gObj.rowTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n        }\n        if (gObj.toolbarTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n        }\n        if (gObj.pageSettings.template) {\n            resetBlazorTemplate(gObj.element.id + '_template', 'pageSettings');\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[i].template) {\n                blazorTemplates[gObj.element.id + gridColumns[i].uid] = [];\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid, 'Template');\n            }\n            if (gridColumns[i].headerTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'headerTemplate', 'HeaderTemplate');\n            }\n            if (gridColumns[i].filterTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'filterTemplate', 'FilterTemplate');\n            }\n        }\n        var guid = 'guid';\n        for (var k = 0; k < gObj.aggregates.length; k++) {\n            for (var j = 0; j < gObj.aggregates[k].columns.length; j++) {\n                if (gObj.aggregates[k].columns[j].footerTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'footerTemplate';\n                    resetBlazorTemplate(tempID, 'FooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupFooterTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupFooterTemplate';\n                    resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupCaptionTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupCaptionTemplate';\n                    resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n                }\n            }\n        }\n    };\n    Render.prototype.refreshComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.parent.notify(events.resetInfiniteBlocks, args);\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().querySelector('.e-content'), true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered, args);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1, action: args });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred, args) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred, action: args });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.uid === value.uid;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        if (isBlazor() && !this.parent.isJsComponent) {\n            promise.then(function (e) {\n                _this.parent.notify('editsuccess', args);\n            }).catch(function (e) {\n                var error = 'error';\n                var message = 'message';\n                if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                    e[error] = e[error][message];\n                }\n                _this.parent.trigger(events.actionFailure, e);\n            });\n        }\n        else {\n            var query_1 = this.data.generateQuery().requiresCount();\n            if (this.data.dataManager.dataSource.offline) {\n                this.refreshDataManager({ requestType: 'batchsave' });\n                return;\n            }\n            else {\n                promise.then(function (e) {\n                    _this.data.getData(args, query_1)\n                        .then(function (e) { return _this.dmSuccess(e, args); })\n                        .catch(function (e) { return _this.dmFailure(e, args); });\n                })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            }\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement('tbody');\n        var spanCount = 0;\n        if (gObj.detailTemplate || gObj.childGrid) {\n            ++spanCount;\n        }\n        tr = this.parent.createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(this.parent.createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: (gObj.getColumns().length + spanCount).toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var cFormat = 'customFormat';\n        var equalTo = 'equalTo';\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[i].field || '', data);\n            if (!isNullOrUndefined(columns[i][cFormat])) {\n                columns[i].format = columns[i][cFormat];\n            }\n            if (!isNullOrUndefined(columns[i].validationRules) && !isNullOrUndefined(columns[i].validationRules[equalTo])) {\n                columns[i].validationRules[equalTo][0] = this.parent.element.id + columns[i].validationRules[equalTo][0];\n            }\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type || (isBlazor() && this.parent.isServerRendered && columns[i].type === 'none')) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || (isBlazor() && this.parent.isServerRendered ? 'none' : null);\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(extend({}, columns[i].format)));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                var isServerRendered = 'isServerRendered';\n                var isServerDateMap = this.parent[isServerRendered] || this.parent.printModule.isPrintGrid();\n                setFormatter(this.locator, columns[i], isServerDateMap);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    /** @hidden */\n    // tslint:disable-next-line:max-func-body-length\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var _this = this;\n        var gObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        e.actionArgs = args;\n        var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache\n            && (args.requestType === 'delete' || (args.requestType === 'save' && this.parent.infiniteScrollModule.requestType === 'add'));\n        // tslint:disable-next-line:max-func-body-length\n        gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n            if (dataArgs.cancel) {\n                return;\n            }\n            dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;\n            var len = Object.keys(dataArgs.result).length;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n                gObj.hideSpinner();\n                return;\n            }\n            if (_this.isInfiniteEnd(args) && !len) {\n                _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                return;\n            }\n            _this.parent.isEdit = false;\n            _this.parent.notify(events.editReset, {});\n            _this.parent.notify(events.tooltipDestroy, {});\n            _this.contentRenderer.prevCurrentView = _this.parent.currentViewData.slice();\n            gObj.currentViewData = dataArgs.result;\n            if (isBlazor() && gObj.filterSettings.type === 'FilterBar'\n                && (isNullOrUndefined(gObj.currentViewData) ||\n                    (!isNullOrUndefined(gObj.currentViewData) && !gObj.currentViewData.length))) {\n                var gridColumns = gObj.getColumns();\n                for (var i = 0; i < gridColumns.length; i++) {\n                    if (gridColumns[i].filterTemplate) {\n                        var tempID = gObj.element.id + gridColumns[i].uid + 'filterTemplate';\n                        resetBlazorTemplate(tempID, 'FilterTemplate');\n                        var fieldName = gridColumns[i].field;\n                        var filteredColumns = gObj.filterSettings.columns;\n                        for (var k = 0; k < filteredColumns.length; k++) {\n                            if (fieldName === filteredColumns[k].field) {\n                                blazorTemplates[tempID][0][fieldName] = filteredColumns[k].value;\n                            }\n                        }\n                        updateBlazorTemplate(tempID, 'FilterTemplate', gridColumns[i], false);\n                    }\n                }\n            }\n            if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n                if (_this.parent.groupSettings.enableLazyLoading\n                    && (args.requestType === 'grouping' || args.requestType === 'ungrouping')) {\n                    _this.parent.notify(events.groupComplete, args);\n                }\n                gObj.prevPageMoving = true;\n                gObj.pageSettings.totalRecordsCount = dataArgs.count;\n                if (args.requestType !== 'paging') {\n                    gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n                }\n                gObj.dataBind();\n                return;\n            }\n            if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n                _this.updatesOnInitialRender(dataArgs);\n            }\n            if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n                if (_this.data.dataManager.dataSource.offline && gObj.dataSource.length) {\n                    _this.updateColumnType(gObj.dataSource[0]);\n                }\n                else {\n                    _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n                }\n            }\n            if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates &&\n                !_this.parent.groupSettings.columns.length) {\n                dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n            }\n            _this.parent.notify(events.dataReady, extend({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates }, args));\n            if ((gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping'))\n                && (args && args.requestType !== 'filtering')) {\n                _this.headerRenderer.refreshUI();\n            }\n            if (len) {\n                if (isGroupAdaptive(gObj)) {\n                    var content = 'content';\n                    args.scrollTop = { top: _this.contentRenderer[content].scrollTop };\n                }\n                if (!isInfiniteDelete) {\n                    if (_this.parent.enableImmutableMode) {\n                        _this.contentRenderer.immutableModeRendering(args);\n                    }\n                    else {\n                        _this.contentRenderer.refreshContentRows(args);\n                    }\n                }\n                else {\n                    _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                }\n            }\n            else {\n                if (!gObj.getColumns().length) {\n                    gObj.element.innerHTML = '';\n                    alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                    return;\n                }\n                _this.contentRenderer.setRowElements([]);\n                _this.contentRenderer.setRowObjects([]);\n                _this.ariaService.setBusy(_this.parent.getContent().querySelector('.e-content'), false);\n                _this.renderEmptyRow();\n                if (args) {\n                    var action = (args.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, args);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        args.rows = [];\n                        args.isFrozen = _this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                _this.parent.hideSpinner();\n            }\n            _this.parent.notify(events.toolbarRefresh, {});\n            _this.setRowCount(_this.parent.getCurrentViewRecords().length);\n            _this.parent.getDataModule().isQueryInvokedFromData = false;\n        });\n    };\n    /** @hidden */\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().querySelector('.e-content'), { busy: false, invalid: true });\n        this.setRowCount(1);\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        this.parent.log('actionfailure', { error: e });\n    };\n    Render.prototype.setRowCount = function (dataRowCount) {\n        var gObj = this.parent;\n        this.ariaService.setOptions(this.parent.getHeaderTable(), {\n            rowcount: dataRowCount ? dataRowCount.toString() : '1'\n        });\n    };\n    Render.prototype.isInfiniteEnd = function (args) {\n        return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === 'delete';\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n        }\n        prepareColumns(this.parent.columns, null, this.parent);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.isAutoGen = true;\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.iterateComplexColumns = function (obj, field, split) {\n        var keys = Object.keys(obj);\n        for (var i = 0; i < keys.length; i++) {\n            var childKeys = typeof obj[keys[i]] === 'object' && obj[keys[i]] && !(obj[keys[i]] instanceof Date) ?\n                Object.keys(obj[keys[i]]) : [];\n            if (childKeys.length) {\n                this.iterateComplexColumns(obj[keys[i]], field + (keys[i] + '.'), split);\n            }\n            else {\n                split[this.counter] = field + keys[i];\n                this.counter++;\n            }\n        }\n    };\n    Render.prototype.buildColumns = function (record) {\n        var cols = [];\n        var complexCols = {};\n        this.iterateComplexColumns(record, '', complexCols);\n        var columns = Object.keys(complexCols).filter(function (e) { return complexCols[e] !== 'BlazId'; }).\n            map(function (field) { return complexCols[field]; });\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.setProperties({ 'columns': cols }, true);\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                predicate.push(new Predicate('field', '==', groups[i].field).and(_this.getPredicate('key', 'equal', groups[i].key)));\n            }\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote() || isBlazor()) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                rPredicate.push(this.getPredicate(groups[i].field, 'equal', groups[i].key));\n            }\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var dm = new DataManager(untouched);\n        var elements = current;\n        for (var i = 0; i < elements.length; i++) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', elements[i].field).and(this.getPredicate('key', 'equal', elements[i].key))))[0];\n            elements[i].count = uGroup.count;\n            var itemGroup = elements[i].items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                elements[i].items = this.updateGroupInfo(elements[i].items, uGroup.items);\n            }\n            var rows = this.parent.aggregates;\n            for (var j = 0; j < rows.length; j++) {\n                var row = rows[j];\n                for (var k = 0; k < row.columns.length; k++) {\n                    var types = row.columns[k].type instanceof Array ? (row.columns[k].type) :\n                        [(row.columns[k].type)];\n                    for (var l = 0; l < types.length; l++) {\n                        var key = row.columns[k].field + ' - ' + types[l].toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = this.parent;\n                        if (types[l] === 'Custom') {\n                            var data_1 = itemGroup.level ? uGroupItem : uGroup;\n                            elements[i].aggregates[key] = row.columns[k].customAggregate ?\n                                row.columns[k].customAggregate\n                                    .call(context, data_1, row.columns[k]) : '';\n                        }\n                        else {\n                            elements[i].aggregates[key] = DataUtil.aggregates[types[l].toLowerCase()](data, row.columns[k].field);\n                        }\n                    }\n                }\n            }\n        }\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\nimport { parentsUntil, ispercentageWidth } from '../base/util';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        var totalColumnsWidth = 0;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        if (this.parent.isRowDragable()) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        var columns = this.parent.getColumns();\n        for (var j = 0; j < columns.length; j++) {\n            this.setColumnWidth(columns[j], wFlag && this.parent.enableColumnVirtualization ? undefined : j + i);\n        }\n        totalColumnsWidth = this.getTableWidth(this.parent.getColumns());\n        if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n            this.setMinwidthBycalculation(totalColumnsWidth);\n        }\n    };\n    ColumnWidthService.prototype.setMinwidthBycalculation = function (tWidth) {\n        var difference = 0;\n        var collection = this.parent.getColumns().filter(function (a) {\n            return isNullOrUndefined(a.width) || a.width === 'auto';\n        });\n        if (collection.length) {\n            if (!isNullOrUndefined(this.parent.width) && this.parent.width !== 'auto' &&\n                typeof (this.parent.width) === 'string' && this.parent.width.indexOf('%') === -1) {\n                difference = (typeof this.parent.width === 'string' ? parseInt(this.parent.width, 10) : this.parent.width) - tWidth;\n            }\n            else {\n                difference = this.parent.element.getBoundingClientRect().width - tWidth;\n            }\n            var tmWidth = 0;\n            for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n                var cols = collection_1[_i];\n                tmWidth += !isNullOrUndefined(cols.minWidth) ?\n                    ((typeof cols.minWidth === 'string' ? parseInt(cols.minWidth, 10) : cols.minWidth)) : 0;\n            }\n            for (var i = 0; i < collection.length; i++) {\n                if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && (i !== collection.length - 1)) {\n                    this.setUndefinedColumnWidth(collection);\n                }\n                if (tWidth !== 0 && difference < tmWidth) {\n                    this.setWidth(collection[i].minWidth, this.parent.getColumnIndexByField(collection[i].field));\n                }\n                else if (tWidth !== 0 && difference > tmWidth) {\n                    this.setWidth('', this.parent.getColumnIndexByField(collection[i].field) + this.parent.getIndentCount(), true);\n                }\n            }\n        }\n    };\n    ColumnWidthService.prototype.setUndefinedColumnWidth = function (collection) {\n        for (var k = 0; k < collection.length; k++) {\n            if (k !== collection.length - 1) {\n                collection[k].width = 200;\n                this.setWidth(200, this.parent.getColumnIndexByField(collection[k].field));\n            }\n        }\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        if (this.parent.getColumns().length < 1) {\n            return;\n        }\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        var tgridWidth = this.getTableWidth(this.parent.getColumns());\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n                this.setMinwidthBycalculation(tgridWidth);\n            }\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index, clear) {\n        if (this.parent.groupSettings.columns.length > index && ispercentageWidth(this.parent)) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = (30 / elementWidth * 100).toFixed(1) + '%';\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        frzCols = frzCols && this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mHdr.scrollLeft > 0) {\n            var colGroup = mHdr.querySelector('colgroup');\n            headerCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol && !clear) {\n            headerCol.style.width = fWidth;\n        }\n        else if (headerCol && clear) {\n            headerCol.style.width = '';\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mCont.scrollLeft > 0) {\n            var colGroup = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup');\n            contentCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol && !clear) {\n            contentCol.style.width = fWidth;\n        }\n        else if (contentCol && clear) {\n            contentCol.style.width = '';\n        }\n        var edit = this.parent.element.querySelectorAll('.e-table.e-inline-edit');\n        var editTableCol = [];\n        for (var i = 0; i < edit.length; i++) {\n            if (parentsUntil(edit[i], 'e-grid').id === this.parent.element.id) {\n                for (var j = 0; j < edit[i].querySelector('colgroup').children.length; j++) {\n                    editTableCol.push(edit[i].querySelector('colgroup').children[j]);\n                }\n            }\n        }\n        if (edit.length && editTableCol.length) {\n            editTableCol[index].style.width = fWidth;\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.isWidthUndefined = function () {\n        var isWidUndefCount = this.parent.getColumns().filter(function (col) {\n            return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);\n        }).length;\n        return (this.parent.getColumns().length === isWidUndefCount);\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing\n            && isNullOrUndefined(column.minWidth) && !this.isWidthUndefined()) {\n            column.width = 200;\n        }\n        if (this.parent.frozenColumns && isNullOrUndefined(column.width) &&\n            column.index < this.parent.frozenColumns) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.width === 'auto') {\n                cWidth = 0;\n            }\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.calcMovableOrFreezeColWidth = function (tableType) {\n        var columns = this.parent.getColumns().slice();\n        if (tableType === 'movable') {\n            columns.splice(0, this.parent.getFrozenColumns());\n        }\n        else if (tableType === 'freeze') {\n            columns.splice(this.parent.getFrozenColumns(), columns.length);\n        }\n        return formatUnit(this.getTableWidth(columns));\n    };\n    ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var movableWidth = '';\n        var isColUndefined = this.parent.getColumns().filter(function (a) { return isNullOrUndefined(a.width); }).length >= 1;\n        var isWidthAuto = this.parent.getColumns().filter(function (a) { return (a.width === 'auto'); }).length >= 1;\n        if (typeof this.parent.width === 'number' && !isColUndefined && !isWidthAuto) {\n            movableWidth = formatUnit(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth('freeze').split('px')[0], 10) - 5);\n        }\n        else if (!isColUndefined && !isWidthAuto) {\n            movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        }\n        movableWidth = this.isAutoResize() ? '100%' : movableWidth;\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenEditTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[0].style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableEditTable = function () {\n        var movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        movableWidth = this.isAutoResize() ? '100%' : movableWidth;\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[1].style.width = movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenTable();\n            this.setWidthToMovableTable();\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            tWidth = this.isAutoResize() ? '100%' : tWidth;\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit && this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenEditTable();\n            this.setWidthToMovableEditTable();\n        }\n        else if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    ColumnWidthService.prototype.isAutoResize = function () {\n        return this.parent.allowResizing && this.parent.resizeSettings.mode === 'Auto';\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\nimport { Row } from '../models/row';\nimport { RowModelGenerator } from './row-model-generator';\nimport { parentsUntil } from '../base/util';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = false;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.refMatrix = this.refreshMatrix(true);\n        this.actions = ['downArrow', 'upArrow'];\n        this.parent = parent;\n        this.rowModelGen = new RowModelGenerator(this.parent);\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(!this.parent.enableHeaderFocus && this.parent.frozenRows === 0, this.parent.frozenColumns !== 0);\n        var added = 'addedRecords';\n        if (!this.parent.enableHeaderFocus && !this.parent.getCurrentViewRecords().length && ((this.parent.editSettings.mode !== 'Batch')\n            || (this.parent.editSettings.mode === 'Batch' && !this.parent.editModule.getBatchChanges()[added].length))) {\n            this.getContent().matrix.\n                generate(this.rowModelGen.generateRows({ rows: [new Row({ isDataRow: true })] }), this.getContent().selector, false);\n        }\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        if (parentsUntil(e.target, 'e-filterbarcell') &&\n            e.target.classList.contains('e-input-group-icon')) {\n            return;\n        }\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.e-gridheader'));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.e-frozencontent')) ||\n            !isNullOrUndefined(closest(e.target, '.e-frozenheader'));\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-content') ||\n            !isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader'))) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        this.activeKey = e.action;\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown', 'altDownArrow'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        var th = closest(target, 'th') && !closest(target, 'th').tabIndex;\n        if (e.target.classList.contains('e-filterbaroperator') && (e.keyCode === 13 || e.keyCode === 27)) {\n            var inputTarget = closest(e.target, '.e-filterbarcell');\n            inputTarget.querySelector('input').focus();\n        }\n        if (th && closest(document.activeElement, '.e-filterbarcell') !== null) {\n            this.removeFocus();\n        }\n        var filterCell = closest(document.activeElement, '.e-filterbarcell') !== null;\n        if (this.parent.enableHeaderFocus && filterCell) {\n            var matrix = this.active.matrix;\n            var current = matrix.current;\n            filterCell = matrix.matrix[current[0]].lastIndexOf(1) !== current[1];\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (filterCell ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null))) || closest(target, '.e-filter-popup') !== null;\n    };\n    FocusStrategy.prototype.focusVirtualElement = function (e) {\n        var _this = this;\n        if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n            var data = { virtualData: {}, isAdd: false, isCancel: false };\n            this.parent.notify(event.getVirtualData, data);\n            var isKeyFocus = this.actions.some(function (value) { return value === _this.activeKey; });\n            var isSelected = this.parent.contentModule ?\n                this.parent.contentModule.selectedRowIndex > -1 : false;\n            if (data.isAdd || Object.keys(data.virtualData).length || isKeyFocus || data.isCancel || isSelected) {\n                data.isCancel = false;\n                this.parent.contentModule.selectedRowIndex = -1;\n                if (isKeyFocus) {\n                    this.activeKey = this.empty;\n                    this.parent.notify('virtaul-key-handler', e);\n                }\n                // tslint:disable-next-line:no-any\n                this.currentInfo.elementToFocus.focus({ preventScroll: true });\n            }\n            else {\n                this.currentInfo.elementToFocus.focus();\n            }\n        }\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen) {\n        this.active = content ? isFrozen ? this.fContent : this.content :\n            isFrozen ? this.fHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element, e) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () {\n            if (!isNullOrUndefined(_this.currentInfo.elementToFocus)) {\n                if (_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling) {\n                    _this.focusVirtualElement(e);\n                }\n                else {\n                    _this.currentInfo.elementToFocus.focus();\n                }\n            }\n        }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.parent.notify(event.virtaulCellFocus, e);\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    /** @hidden */\n    FocusStrategy.prototype.addOutline = function () {\n        var info = this.getContent().getFocusInfo();\n        if (info.element) {\n            addClass([info.element], ['e-focused']);\n            addClass([info.elementToFocus], ['e-focus']);\n        }\n    };\n    /** @hidden */\n    FocusStrategy.prototype.focusHeader = function () {\n        this.setActive(false, this.parent.frozenColumns !== 0);\n        this.resetFocus();\n    };\n    /** @hidden */\n    FocusStrategy.prototype.focusContent = function () {\n        this.setActive(true, this.parent.frozenColumns !== 0);\n        this.resetFocus();\n    };\n    FocusStrategy.prototype.resetFocus = function () {\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        this.focus();\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus, e);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : _this.content :\n                (e.args && e.args.isFrozen) ? _this.fHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            if (_this.parent.isCollapseStateEnabled() && content) {\n                rows = rows.filter(function (x) { return x.visible !== false; });\n            }\n            var isRowTemplate = !isNullOrUndefined(_this.parent.rowTemplate);\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector, isRowTemplate);\n            var frozenColumnsCount = _this.parent.getFrozenColumns();\n            if (e.name === 'batchAdd' && frozenColumnsCount) {\n                var mRows = _this.parent.getMovableRowsObject();\n                var newMovableRows = mRows.map(function (row) { return row.clone(); });\n                var newFrozenRows = rows.map(function (row) { return row.clone(); });\n                _this.fContent.matrix.generate(newFrozenRows, _this.fContent.selector, isRowTemplate);\n                _this.content.matrix.generate(newMovableRows, _this.content.selector, isRowTemplate);\n            }\n            else {\n                cFocus.matrix.generate(rows, cFocus.selector, isRowTemplate);\n            }\n            cFocus.generateRows(updateRow, { matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader : _this.header });\n            if (!Browser.isDevice && e && e.args) {\n                if (!_this.focusByClick && e.args.requestType === 'paging') {\n                    _this.skipFocus = false;\n                    _this.parent.element.focus();\n                }\n                if (e.args.requestType === 'grouping') {\n                    _this.skipFocus = true;\n                }\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        var focusElement = _this.getContent().getFocusInfo().elementToFocus;\n                        if (focusElement) {\n                            var cellPosition = focusElement.getBoundingClientRect();\n                            var gridPosition = _this.parent.element.getBoundingClientRect();\n                            if (cellPosition.top >= 0 && cellPosition.left >= 0 &&\n                                cellPosition.right <= Math.min(gridPosition.right, window.innerWidth ||\n                                    document.documentElement.clientWidth) &&\n                                cellPosition.bottom <= Math.min(gridPosition.bottom, window.innerHeight ||\n                                    document.documentElement.clientHeight)) {\n                                _this.focus();\n                            }\n                        }\n                    }\n                }\n                else if (e.args.focusElement && e.args.focusElement.classList.contains('e-filtertext')) {\n                    var focusElement = _this.parent.element.querySelector('#' + e.args.focusElement.id);\n                    if (focusElement) {\n                        focusElement.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refMatrix, this);\n        this.parent.on(event.partialRefresh, this.refMatrix, this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        this.parent.on('restore-Focus', this.restoreFocus, this);\n        var evts = ['start-edit', 'start-add'];\n        for (var i = 0; i < evts.length; i++) {\n            this.parent.on(evts[i], this.clearIndicator, this);\n        }\n        this.parent.on('sorting-complete', this.restoreFocus, this);\n        this.parent.on('filtering-complete', this.filterfocus, this);\n        var actionsG = ['grouping', 'ungrouping'];\n        for (var k = 0; k < actionsG.length; k++) {\n            this.parent.on(actionsG[k] + \"-complete\", this.restoreFocusWithAction, this);\n        }\n        this.parent.on(event.batchAdd, this.refMatrix, this);\n        this.parent.on(event.batchCancel, this.refMatrix, this);\n        this.parent.on(event.batchDelete, this.refMatrix, this);\n        this.parent.on(event.detailDataBound, this.refMatrix, this);\n        this.parent.on(event.onEmpty, this.refMatrix, this);\n        this.parent.on(event.cellFocused, this.internalCellFocus, this);\n    };\n    FocusStrategy.prototype.filterfocus = function () {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            this.restoreFocus();\n        }\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refMatrix);\n        this.parent.off(event.partialRefresh, this.refMatrix);\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        this.parent.off('restore-focus', this.restoreFocus);\n        var evts = ['start-edit', 'start-add'];\n        for (var i = 0; i < evts.length; i++) {\n            this.parent.off(evts[i], this.clearOutline);\n        }\n        this.parent.off('sorting-complete', this.restoreFocus);\n        this.parent.off('filtering-complete', this.filterfocus);\n        var actionsG = ['grouping', 'ungrouping'];\n        for (var k = 0; k < actionsG.length; k++) {\n            this.parent.on(actionsG[k] + \"-complete\", this.restoreFocusWithAction);\n        }\n        this.parent.off(event.batchAdd, this.refMatrix);\n        this.parent.off(event.batchDelete, this.refMatrix);\n        this.parent.off(event.batchCancel, this.refMatrix);\n        this.parent.off(event.detailDataBound, this.refMatrix);\n        this.parent.off(event.onEmpty, this.refMatrix);\n        this.parent.off(event.cellFocused, this.internalCellFocus);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.restoreFocusWithAction = function (e) {\n        if (!this.parent.enableInfiniteScrolling) {\n            var matrix = this.getContent().matrix;\n            var current = matrix.current;\n            switch (e.requestType) {\n                case 'grouping':\n                case 'ungrouping':\n                    current[1] = current.length &&\n                        !this.parent.groupSettings.showGroupedColumn && !isNullOrUndefined(matrix.matrix[current[0]]) ?\n                        matrix.matrix[current[0]].indexOf(1) : e.requestType === 'grouping' ? current[1] + 1 : current[1] - 1;\n                    break;\n            }\n            this.getContent().matrix.current = current;\n            this.addFocus(this.getContent().getFocusInfo());\n        }\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget || !Object.keys(this.prevIndexes).length ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (this.parent.frozenColumns === 0 && this.parent.frozenRows === 0) {\n            return;\n        }\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.frozenColumns !== 0 }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        var emptyTable = true;\n        if (isNullOrUndefined(this.matrix[rowIndex])) {\n            return null;\n        }\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        if (rowIndex === this.rows && (action === 'downArrow' || action === 'enter')) {\n            navigator[0] = -1;\n        }\n        if (first === null) {\n            rowIndex = this.current[0];\n            for (var i = 0; i < this.rows; i++) {\n                if (this.matrix[i].some(function (v) { return v === 1; })) {\n                    emptyTable = false;\n                    break;\n                }\n            }\n            if (emptyTable) {\n                return [rowIndex, columnIndex];\n            }\n        }\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector, isRowTemplate) {\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        for (var i = 0; i < rows.length; i++) {\n            var cells = rows[i].cells.filter(function (c) { return c.isSpanned !== true; });\n            this.columns = Math.max(cells.length - 1, this.columns | 0);\n            for (var j = 0; j < cells.length; j++) {\n                this.set(i, j, selector(rows[i], cells[j], isRowTemplate));\n            }\n        }\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.getFrozenColumns() ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString() || (this.matrix.current[0] === this.matrix.rows &&\n                this.matrix.current.toString() === current.toString())) {\n                return false;\n            }\n            else {\n                current = this.editNextRow(current[0], current[1], e.action);\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.editNextRow = function (rowIndex, cellIndex, action) {\n        var gObj = this.parent;\n        var editNextRow = gObj.editSettings.allowNextRowEdit && (gObj.isEdit || gObj.isLastCellPrimaryKey);\n        var visibleIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[0].field);\n        var cell = this.getTable().rows[rowIndex].cells[cellIndex];\n        if (action === 'tab' && editNextRow) {\n            rowIndex++;\n            var index = (this.getTable().rows[rowIndex].querySelectorAll('.e-indentcell').length +\n                this.getTable().rows[rowIndex].querySelectorAll('.e-detailrowcollapse').length);\n            cellIndex = visibleIndex + index;\n        }\n        if (action === 'shiftTab' && editNextRow) {\n            rowIndex--;\n            cellIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[gObj.getVisibleColumns().length - 1].field);\n        }\n        return !cell.classList.contains('e-rowcell') && !cell.classList.contains('e-headercell') &&\n            !cell.classList.contains('e-groupcaption') ?\n            this.editNextRow(rowIndex, cellIndex, action) : [rowIndex, cellIndex];\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action) || (this.matrix.current.length === 0)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains('e-table') ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex) ||\n            (!parentsUntil(e.target, 'e-rowcell') && !parentsUntil(e.target, 'e-groupcaption'))) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell, isRowTemplate) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand && isNullOrUndefined(cell.visible))\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn)\n            || (row.isDataRow && isRowTemplate))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        if (action === 'tab' && !this.parent.isEdit &&\n            current[1] === this.matrix.matrix[current[0]].lastIndexOf(1) && this.matrix.matrix.length - 1 !== current[0]) {\n            this.matrix.current[0] = this.matrix.current[0] + 1;\n            this.matrix.current[1] = -1;\n            frozenSwap = this.parent.frozenColumns > 0;\n        }\n        if (action === 'shiftTab' && !this.parent.isEdit &&\n            current[0] !== 0 && this.matrix.matrix[current[0]].indexOf(1) === current[1]) {\n            this.matrix.current[0] = this.matrix.current[0] - 1;\n            this.matrix.current[1] = this.matrix.matrix[current[0]].length;\n        }\n        var isHeaderFocus = false;\n        var row = document.activeElement.parentElement;\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && row.classList.contains('e-row')) {\n            var rowIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n            isHeaderFocus = rowIndex > 0;\n        }\n        var info = {\n            swap: !isHeaderFocus ? ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap : false,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var _a;\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            if (!isNullOrUndefined(table.rows[rowIndex])) {\n                var cell = void 0;\n                cellIndex = table.querySelector('.e-emptyrow') ? 0 : cellIndex;\n                if (table.rows[rowIndex].cells[0].classList.contains('e-editcell')) {\n                    cell = table.rows[rowIndex].cells[0].querySelectorAll('td')[cellIndex];\n                }\n                else {\n                    cell = table.rows[rowIndex].cells[cellIndex];\n                }\n                var isCellWidth = cell.getBoundingClientRect().width !== 0;\n                if (action === 'enter' || action === 'shiftEnter') {\n                    return isCellWidth && cell.classList.contains('e-rowcell');\n                }\n                if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                    return isCellWidth;\n                }\n                else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                    return isCellWidth;\n                }\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains('e-rowcell') && !cell.classList.contains('e-unboundcell')\n                && (!cell.classList.contains('e-templatecell') || cell.classList.contains('e-editedbatchcell'))\n                && !cell.classList.contains('e-detailcell') : true;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.getFrozenColumns() ?\n            this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains('e-rowcell') ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (e.target.classList.contains('e-columnheader') ||\n            e.target.querySelector('.e-stackedheadercell')) {\n            return false;\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        if (!isNullOrUndefined(info.element)) {\n            info.elementToFocus = this.getFocusable(info.element);\n            info.outline = !info.element.classList.contains('e-filterbarcell');\n        }\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate || !isNullOrUndefined(cell.column.template))) ||\n            cell.column.type === 'checkbox' || cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            (action === 'leftArrow' || action === 'shiftTab') && current[1] === 0;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var isLastCell;\n        var lastRow;\n        var headerSwap = frozenSwap;\n        var fMatrix = this.parent.focusModule.fHeader && this.parent.focusModule.fHeader.matrix.matrix;\n        var isPresent = fMatrix && !isNullOrUndefined(fMatrix[current[0]]);\n        if (this.parent.enableHeaderFocus && action === 'tab') {\n            lastRow = this.matrix.matrix.length - 1 === current[0];\n            isLastCell = current[1] === this.matrix.matrix[current[0]].lastIndexOf(1);\n            if (isLastCell) {\n                if (!lastRow) {\n                    this.matrix.current[0] = this.matrix.current[0] + 1;\n                }\n                else {\n                    this.matrix.current[0] = 0;\n                }\n                this.matrix.current[1] = -1;\n            }\n            if (this.parent.frozenColumns > 0 && lastRow && isLastCell) {\n                frozenSwap = true;\n                headerSwap = false;\n            }\n        }\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                (isPresent && frozenSwap) || (action === 'tab' && lastRow && isLastCell),\n            toHeader: headerSwap,\n            toFrozen: frozenSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            var cells = rows[0].cells;\n            for (var i = 0; i < cells.length; i++) {\n                this.matrix.set(length, i, cells[i].visible && cells[i].column.allowFiltering !== false);\n            }\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rowIndex = _a[0], columnIndex = _a[1];\n        if (rowIndex < 0 || columnIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rowIndex + \".cells.\" + columnIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        return {\n            swap: (action === 'upArrow' || enterFrozen) && current[0] === 0\n                || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: (action === 'upArrow' || enterFrozen) && current[0] === 0\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'tab' && this.parent.enableHeaderFocus) {\n            current2[0] = previous[0];\n            current2[1] = -1;\n        }\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current2[0] = previous[0];\n            current2[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var hMatrix = this.parent.focusModule.header && this.parent.focusModule.header.matrix.matrix;\n        var isPresent = hMatrix && !isNullOrUndefined(hMatrix[current[0]]);\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n                || ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns && isPresent),\n            toHeader: (action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current3[0] = previous[0];\n            current3[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the column chooser behavior of the Grid.\n */\nvar ColumnChooserSettings = /** @class */ (function (_super) {\n    __extends(ColumnChooserSettings, _super);\n    function ColumnChooserSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('startsWith')\n    ], ColumnChooserSettings.prototype, \"operator\", void 0);\n    return ColumnChooserSettings;\n}(ChildProperty));\nexport { ColumnChooserSettings };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { Browser, EventHandler, createElement, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest, select } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, isGroupAdaptive, parentsUntil, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { iterateExtend, setChecked } from '../base/util';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal letiables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        /**\n         * @hidden\n         */\n        this.preventFocus = false;\n        this.checkBoxState = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.clearRowCheck = false;\n        this.selectRowCheck = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.isPersisted = false;\n        this.cmdKeyPressed = false;\n        this.cellselected = false;\n        this.isMultiSelection = false;\n        this.isAddRowsToSelection = false;\n        this.initialRowSelection = false;\n        /**\n         * @hidden\n         */\n        this.autoFillRLselection = true;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.wireEvents();\n    }\n    Selection.prototype.initializeSelection = function () {\n        this.parent.log('selection_key_missing');\n        this.render();\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (!this.isMultiSelection && (!isNullOrUndefined(args.cellIndex) || !isNullOrUndefined(args.rowIndex))) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n        this.isMultiSelection = false;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        this.unWireEvents();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n        EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' && this.parent.editModule &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.getFrozenColumns() && this.parent.getContent().querySelector('.e-movablecontent')) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getCurrentBatchRecordChanges = function () {\n        var gObj = this.parent;\n        var added = 'addedRecords';\n        var deleted = 'deletedRecords';\n        if (gObj.editSettings.mode === 'Batch' && gObj.editModule) {\n            var currentRecords = iterateExtend(this.parent.getCurrentViewRecords());\n            currentRecords = gObj.editSettings.newRowPosition === 'Bottom' ?\n                currentRecords.concat(this.parent.editModule.getBatchChanges()[added]) :\n                this.parent.editModule.getBatchChanges()[added].concat(currentRecords);\n            var deletedRecords = this.parent.editModule.getBatchChanges()[deleted];\n            var primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < (deletedRecords.length); i++) {\n                for (var j = 0; j < currentRecords.length; j++) {\n                    if (deletedRecords[i][primaryKey] === currentRecords[j][primaryKey]) {\n                        currentRecords.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            return currentRecords;\n        }\n        else {\n            return gObj.getCurrentViewRecords();\n        }\n    };\n    /**\n     * Selects a row by the given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        if (this.selectedRowIndexes.length && this.selectionSettings.enableSimpleMultiRowSelection) {\n            this.addRowsToSelection([index]);\n            return;\n        }\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectData;\n        var isRemoved = false;\n        if (gObj.enableVirtualization && index > -1) {\n            this.parent.notify(events.selectVirtualRow, { selectedIndex: index });\n            var frozenData = gObj.getFrozenColumns() ? gObj.contentModule.getRowObjectByIndex(index)\n                : null;\n            if (selectedRow && (gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')) || frozenData)) {\n                selectData = frozenData ? frozenData : gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')).data;\n            }\n            else {\n                var prevSelectedData = this.parent.getSelectedRecords();\n                if (prevSelectedData.length > 0) {\n                    this.clearRowSelection();\n                }\n                return;\n            }\n        }\n        else {\n            selectData = this.getCurrentBatchRecordChanges()[index];\n        }\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        this.activeTarget();\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                args = {\n                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                    previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                    previousRowIndex: this.prevRowIndex, target: this.actualTarget, cancel: false, isInteracted: this.isInteracted,\n                    isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n            }\n            else {\n                args = {\n                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                    isShiftPressed: this.isMultiShiftRequest, previousRowIndex: this.prevRowIndex,\n                    cancel: false, isInteracted: this.isInteracted, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n                };\n            }\n            this.parent.trigger(events.rowSelecting, this.fDataUpdate(args), this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can));\n        }\n        else {\n            this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can)(args);\n        }\n    };\n    Selection.prototype.rowSelectingCallBack = function (args, isToggle, index, selectData, isRemoved, isRowSelected, can) {\n        var _this = this;\n        return function (args) {\n            if (!isNullOrUndefined(args) && args[can] === true) {\n                _this.disableInteracted();\n                return;\n            }\n            _this.index = index;\n            _this.toggle = isToggle;\n            _this.data = selectData;\n            _this.removed = isRemoved;\n            if (isRowSelected && _this.selectionSettings.persistSelection && !(_this.selectionSettings.checkboxMode === 'ResetOnRowClick')) {\n                _this.clearSelectedRow(index);\n                _this.selectRowCallBack();\n            }\n            else if (!isRowSelected && _this.selectionSettings.persistSelection &&\n                _this.selectionSettings.checkboxMode !== 'ResetOnRowClick') {\n                _this.selectRowCallBack();\n            }\n            if (_this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n                _this.clearSelection();\n            }\n            if (!_this.selectionSettings.persistSelection || _this.selectionSettings.checkboxMode === 'ResetOnRowClick' ||\n                (!_this.parent.isCheckBoxSelection && _this.selectionSettings.persistSelection)) {\n                _this.selectRowCheck = true;\n                _this.clearRow();\n            }\n        };\n    };\n    Selection.prototype.selectRowCallBack = function () {\n        var gObj = this.parent;\n        var args;\n        var index = this.index;\n        var isToggle = this.toggle;\n        var selectData = this.data;\n        var isRemoved = this.removed;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        if (!isToggle && !isRemoved) {\n            if (this.selectedRowIndexes.indexOf(index) <= -1) {\n                if (gObj.getFrozenColumns()) {\n                    this.updateRowSelection(selectedMovableRow, index);\n                }\n                this.updateRowSelection(selectedRow, index);\n            }\n            this.selectRowIndex(index);\n        }\n        if (!isToggle) {\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                args = {\n                    data: selectData, rowIndex: index,\n                    row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                    previousRowIndex: this.prevRowIndex, target: this.actualTarget, isInteracted: this.isInteracted,\n                    isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n            }\n            else {\n                args = {\n                    data: selectData, rowIndex: index,\n                    row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                    previousRowIndex: this.prevRowIndex, isInteracted: this.isInteracted,\n                    isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked\n                };\n            }\n            this.onActionComplete(args, events.rowSelected);\n        }\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization) {\n            var interopAdaptor = 'interopAdaptor';\n            var invokeMethodAsync = 'invokeMethodAsync';\n            this.parent[interopAdaptor][invokeMethodAsync]('MaintainSelection', true, 'normal', [index]);\n        }\n        this.isInteracted = false;\n        this.updateRowProps(index);\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow) {\n        if (this.parent.getFrozenColumns()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.selectRowIndex(endIndex);\n    };\n    /**\n     * Selects a collection of rows by index.\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var _this = this;\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        this.isMultiSelection = true;\n        var selectedRows = [];\n        var foreignKeyData = [];\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var frzCols = gObj.getFrozenColumns();\n        var can = 'cancel';\n        var selectedData = [];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        for (var i = 0, len = rowIndexes.length; i < len; i++) {\n            var currentRow = this.parent.getDataRows()[rowIndexes[i]];\n            var rowObj = this.getRowObj(currentRow);\n            if (rowObj) {\n                selectedData.push(rowObj.data);\n                selectedRows.push(currentRow);\n                foreignKeyData.push(rowObj.foreignKeyData);\n            }\n        }\n        var isHybrid = 'isHybrid';\n        this.activeTarget();\n        var args;\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            args = {\n                cancel: false,\n                rowIndexes: rowIndexes, row: selectedRows, rowIndex: rowIndex, target: this.actualTarget,\n                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                isInteracted: this.isInteracted, isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                data: selectedData, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n        }\n        else {\n            args = {\n                cancel: false,\n                rowIndexes: rowIndexes, rowIndex: rowIndex, previousRowIndex: this.prevRowIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                data: selectedData, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n            };\n        }\n        this.parent.trigger(events.rowSelecting, this.fDataUpdate(args), function (args) {\n            if (!isNullOrUndefined(args) && args[can] === true) {\n                _this.disableInteracted();\n                return;\n            }\n            _this.clearRow();\n            _this.selectRowIndex(rowIndexes.slice(-1)[0]);\n            if (!_this.isSingleSel()) {\n                for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                    var rowIdx = rowIndexes_1[_i];\n                    _this.updateRowSelection(gObj.getRowByIndex(rowIdx), rowIdx);\n                    if (frzCols) {\n                        _this.updateRowSelection(gObj.getMovableRowByIndex(rowIdx), rowIdx);\n                    }\n                    _this.updateRowProps(rowIndex);\n                }\n            }\n            else {\n                _this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n                if (frzCols) {\n                    _this.updateRowSelection(gObj.getMovableRowByIndex(rowIndex), rowIndex);\n                }\n                _this.updateRowProps(rowIndex);\n            }\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                args = {\n                    rowIndexes: rowIndexes, row: selectedRows, rowIndex: rowIndex, target: _this.actualTarget,\n                    prevRow: gObj.getRows()[_this.prevRowIndex], previousRowIndex: _this.prevRowIndex,\n                    data: isBlazor() ? selectedData : _this.getSelectedRecords(), isInteracted: _this.isInteracted,\n                    isHeaderCheckboxClicked: _this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n                };\n                args = _this.addMovableArgs(args, selectedMovableRow);\n            }\n            else {\n                args = {\n                    rowIndexes: rowIndexes, rowIndex: rowIndex, previousRowIndex: _this.prevRowIndex,\n                    row: selectedRows, prevRow: gObj.getRows()[_this.prevRowIndex],\n                    data: isBlazor() ? selectedData : _this.getSelectedRecords(), isInteracted: _this.isInteracted,\n                    isHeaderCheckboxClicked: _this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n                };\n            }\n            if (_this.isRowSelected) {\n                _this.onActionComplete(args, events.rowSelected);\n            }\n        });\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var _this = this;\n        var gObj = this.parent;\n        var can = 'cancel';\n        var target = this.target;\n        this.isMultiSelection = true;\n        var indexes = gObj.getSelectedRowIndexes().concat(rowIndexes);\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var frzCols = gObj.getFrozenColumns();\n        if ((!this.isRowType() || this.isEditing()) && !this.selectionSettings.checkboxOnly) {\n            return;\n        }\n        var args;\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        var _loop_1 = function (rowIndex) {\n            var rowObj = this_1.getRowObj(rowIndex);\n            var isUnSelected = this_1.selectedRowIndexes.indexOf(rowIndex) > -1;\n            this_1.selectRowIndex(rowIndex);\n            if (isUnSelected && ((checkboxColumn.length ? true : this_1.selectionSettings.enableToggle) || this_1.isMultiCtrlRequest)) {\n                this_1.isAddRowsToSelection = true;\n                this_1.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target);\n                if (this_1.isCancelDeSelect) {\n                    return { value: void 0 };\n                }\n                this_1.selectedRowIndexes.splice(this_1.selectedRowIndexes.indexOf(rowIndex), 1);\n                this_1.selectedRecords.splice(this_1.selectedRecords.indexOf(selectedRow), 1);\n                selectedRow.removeAttribute('aria-selected');\n                this_1.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this_1.selectedRecords.splice(this_1.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this_1.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this_1.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target, [selectedMovableRow]);\n                this_1.isInteracted = false;\n                this_1.isMultiSelection = false;\n                this_1.isAddRowsToSelection = false;\n            }\n            else {\n                var isHybrid = 'isHybrid';\n                this_1.activeTarget();\n                if (!isBlazor() || this_1.parent.isJsComponent || this_1.parent[isHybrid]) {\n                    args = {\n                        cancel: false,\n                        data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this_1.actualTarget,\n                        prevRow: gObj.getRows()[this_1.prevRowIndex], previousRowIndex: this_1.prevRowIndex,\n                        isCtrlPressed: this_1.isMultiCtrlRequest, isShiftPressed: this_1.isMultiShiftRequest,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this_1.isInteracted,\n                        isHeaderCheckboxClicked: this_1.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                    args = this_1.addMovableArgs(args, selectedMovableRow);\n                }\n                else {\n                    args = {\n                        cancel: false,\n                        data: rowObj.data, rowIndex: rowIndex, previousRowIndex: this_1.prevRowIndex,\n                        isCtrlPressed: this_1.isMultiCtrlRequest, isShiftPressed: this_1.isMultiShiftRequest,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this_1.isInteracted,\n                        isHeaderCheckboxClicked: this_1.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                }\n                this_1.parent.trigger(events.rowSelecting, this_1.fDataUpdate(args), function (args) {\n                    if (!isNullOrUndefined(args) && args[can] === true) {\n                        _this.disableInteracted();\n                        return;\n                    }\n                    if (_this.isSingleSel()) {\n                        _this.clearRow();\n                    }\n                    _this.updateRowSelection(selectedRow, rowIndex);\n                    if (frzCols) {\n                        _this.updateRowSelection(selectedMovableRow, rowIndex);\n                    }\n                });\n            }\n            if (!isUnSelected) {\n                var isHybrid = 'isHybrid';\n                if (!isBlazor() || this_1.parent.isJsComponent || this_1.parent[isHybrid]) {\n                    args = {\n                        data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this_1.actualTarget,\n                        prevRow: gObj.getRows()[this_1.prevRowIndex], previousRowIndex: this_1.prevRowIndex,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this_1.isInteracted,\n                        isHeaderCheckboxClicked: this_1.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                    args = this_1.addMovableArgs(args, selectedMovableRow);\n                }\n                else {\n                    args = {\n                        data: rowObj.data, rowIndex: rowIndex, previousRowIndex: this_1.prevRowIndex,\n                        row: selectedRow, prevRow: gObj.getRows()[this_1.prevRowIndex],\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this_1.isInteracted,\n                        isHeaderCheckboxClicked: this_1.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                }\n                this_1.onActionComplete(args, events.rowSelected);\n            }\n            this_1.isInteracted = false;\n            this_1.updateRowProps(rowIndex);\n            if (this_1.isSingleSel()) {\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var state_1 = _loop_1(rowIndex);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex <= endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowCheck = true;\n        this.clearRowSelection();\n    };\n    Selection.prototype.clearRowCallBack = function () {\n        if (this.isCancelDeSelect && this.parent.checkAllRows !== 'Check') {\n            return;\n        }\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.selectRowIndex(-1);\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.clearSelectedRow = function (index) {\n        if (this.toggle) {\n            var selectedEle = this.parent.getRowByIndex(index);\n            if (!this.disableUI) {\n                selectedEle.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedEle, false, true, 'e-selectionbackground', 'e-active');\n            }\n            this.removed = true;\n            this.updatePersistCollection(selectedEle, false);\n            this.updateCheckBoxes(selectedEle);\n            this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(index), 1);\n            this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(index)), 1);\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if ((this.parent.isPersistSelection || this.parent.selectionSettings.persistSelection &&\n            this.parent.getPrimaryKeyFieldNames().length > 0) && !isNullOrUndefined(selectedRow)) {\n            if (!this.parent.isPersistSelection) {\n                this.ensureCheckboxFieldSelection();\n            }\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState, rowIndex) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                setChecked(chkBox, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(rowIndex);\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.getFrozenColumns() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)');\n            if (this.parent.contextMenuModule && this.mouseButton === 2) {\n                target = this.parent.contextMenuModule.cell;\n            }\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            if (this.parent.isPersistSelection) {\n                this.persistSelectedData = [];\n                this.selectedRowState = {};\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.prevRowIndex = undefined;\n            this.enableSelectMultiTouch = false;\n            this.isInteracted = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows_1 = this.parent.getDataRows();\n            var data_1 = [];\n            var row_1 = [];\n            var mRow_1 = [];\n            var rowIndex_1 = [];\n            var frzCols = gObj.getFrozenColumns();\n            var foreignKeyData_1 = [];\n            var target_1 = this.target;\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.editSettings.mode === 'Batch' ?\n                    this.parent.getRows()[this.selectedRowIndexes[i]]\n                    : this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data_1.push(rowObj.data);\n                    row_1.push(currentRow);\n                    rowIndex_1.push(this.selectedRowIndexes[i]);\n                    foreignKeyData_1.push(rowObj.foreignKeyData);\n                }\n                if (frzCols) {\n                    mRow_1.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                }\n            }\n            if (this.selectionSettings.persistSelection && this.selectionSettings.checkboxMode !== 'ResetOnRowClick') {\n                this.isInteracted = this.checkSelectAllClicked ? true : false;\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, mRow_1, function () {\n                if (_this.isCancelDeSelect && (_this.isInteracted || _this.checkSelectAllClicked)) {\n                    if (_this.parent.isPersistSelection) {\n                        if (_this.getCheckAllStatus(_this.parent.element.querySelector('.e-checkselectall')) === 'Intermediate') {\n                            for (var i = 0; i < _this.selectedRecords.length; i++) {\n                                _this.updatePersistCollection(_this.selectedRecords[i], true);\n                            }\n                        }\n                        else {\n                            _this.parent.checkAllRows = 'Check';\n                            _this.updatePersistSelectedData(true);\n                        }\n                    }\n                    if (_this.clearRowCheck) {\n                        _this.clearRowCallBack();\n                        _this.clearRowCheck = false;\n                        if (_this.selectRowCheck) {\n                            _this.selectRowCallBack();\n                            _this.selectRowCheck = false;\n                        }\n                    }\n                    return;\n                }\n                var element = [].slice.call(rows_1.filter(function (record) { return record.hasAttribute('aria-selected'); }));\n                for (var j = 0; j < element.length; j++) {\n                    if (!_this.disableUI || isBlazor()) {\n                        element[j].removeAttribute('aria-selected');\n                        _this.addRemoveClassesForRow(element[j], false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    // tslint:disable-next-line:align\n                    _this.updatePersistCollection(element[j], false);\n                    _this.updateCheckBoxes(element[j]);\n                }\n                if (isBlazor() && _this.parent.isServerRendered && _this.parent.enableVirtualization) {\n                    _this.getRenderer().setSelection(null, false, true);\n                }\n                for (var i = 0, len = _this.selectedRowIndexes.length; i < len; i++) {\n                    var movableRow = _this.getSelectedMovableRow(_this.selectedRowIndexes[i]);\n                    if (movableRow) {\n                        if (!_this.disableUI || isBlazor()) {\n                            movableRow.removeAttribute('aria-selected');\n                            _this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                        }\n                        _this.updatePersistCollection(movableRow, false);\n                    }\n                }\n                _this.selectedRowIndexes = [];\n                _this.selectedRecords = [];\n                _this.isRowSelected = false;\n                _this.selectRowIndex(-1);\n                _this.rowDeselect(events.rowDeselected, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, mRow_1);\n                if (_this.clearRowCheck) {\n                    _this.clearRowCallBack();\n                    _this.clearRowCheck = false;\n                    if (_this.selectRowCheck) {\n                        _this.selectRowCallBack();\n                        _this.selectRowCheck = false;\n                    }\n                }\n            });\n        }\n        else {\n            if (this.clearRowCheck) {\n                this.clearRowCallBack();\n                this.clearRowCheck = false;\n                if (this.selectRowCheck) {\n                    this.selectRowCallBack();\n                    this.selectRowCheck = false;\n                }\n            }\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, target, mRow, rowDeselectCallBack) {\n        var _this = this;\n        if ((this.selectionSettings.persistSelection && this.isInteracted) || !this.selectionSettings.persistSelection) {\n            var cancl_1 = 'cancel';\n            var rowDeselectObj = {\n                rowIndex: rowIndex[0], data: this.selectionSettings.persistSelection && this.parent.checkAllRows === 'Uncheck'\n                    && this.selectionSettings.checkboxMode !== 'ResetOnRowClick' ?\n                    this.persistSelectedData : data, foreignKeyData: foreignKeyData,\n                cancel: false, isInteracted: this.isInteracted, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n            };\n            if (type === 'rowDeselected') {\n                delete rowDeselectObj.cancel;\n            }\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                var rowInString = 'row';\n                var target_2 = 'target';\n                var rowidx = 'rowIndex';\n                var rowidxex = 'rowIndexes';\n                var data_2 = 'data';\n                var foreignKey = 'foreignKeyData';\n                rowDeselectObj[rowInString] = row;\n                rowDeselectObj[target_2] = this.actualTarget;\n                var isHeaderCheckBxClick = this.actualTarget && !isNullOrUndefined(closest(this.actualTarget, 'thead'));\n                if (isHeaderCheckBxClick || rowIndex.length > 1) {\n                    rowDeselectObj[rowidx] = rowIndex[0];\n                    rowDeselectObj[rowidxex] = rowIndex;\n                }\n                else if (rowIndex.length === 1) {\n                    rowDeselectObj[data_2] = rowDeselectObj[data_2][0];\n                    rowDeselectObj[rowInString] = rowDeselectObj[rowInString][0];\n                    rowDeselectObj[foreignKey] = rowDeselectObj[foreignKey][0];\n                    if (this.isAddRowsToSelection) {\n                        rowDeselectObj[rowidxex] = rowIndex;\n                    }\n                }\n            }\n            else {\n                var rowIndex_2 = 'rowIndex';\n                var data_3 = 'data';\n                rowDeselectObj[rowIndex_2] = rowDeselectObj[rowIndex_2][rowDeselectObj[rowIndex_2].length - 1];\n                rowDeselectObj[data_3] = rowDeselectObj[data_3][rowDeselectObj[data_3].length - 1];\n            }\n            this.parent.trigger(type, (!isBlazor() || this.parent.isJsComponent) && this.parent.getFrozenColumns() !== 0 ? __assign({}, rowDeselectObj, { mRow: mRow }) : rowDeselectObj, function (args) {\n                _this.isCancelDeSelect = args[cancl_1];\n                if (!_this.isCancelDeSelect || (!_this.isInteracted && !_this.checkSelectAllClicked)) {\n                    _this.updatePersistCollection(row[0], false);\n                    _this.updateCheckBoxes(row[0], undefined, rowIndex[0]);\n                }\n                if (rowDeselectCallBack !== undefined) {\n                    rowDeselectCallBack();\n                }\n            });\n        }\n        else if (this.selectionSettings.persistSelection && !this.isInteracted) {\n            if (rowDeselectCallBack !== undefined) {\n                rowDeselectCallBack();\n            }\n        }\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols) {\n            if (cellIndex.cellIndex >= frzCols) {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        var selectedTable;\n        var cIdx;\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                var currentCell = 'currentCell';\n                args[currentCell] = selectedCell;\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData));\n            this.cellselected = true;\n        }\n        else {\n            this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData)(args);\n        }\n    };\n    Selection.prototype.successCallBack = function (cellSelectingArgs, isToggle, cellIndex, selectedCell, selectedData) {\n        var _this = this;\n        return function (cellSelectingArgs) {\n            var cncl = 'cancel';\n            var currentCell = 'currentCell';\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            if (!isToggle) {\n                cellSelectingArgs[currentCell] = cellSelectingArgs[currentCell] ? cellSelectingArgs[currentCell] : selectedCell;\n            }\n            _this.clearCell();\n            if (!isToggle) {\n                _this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            if (!isToggle) {\n                var args = void 0;\n                var isHybrid = 'isHybrid';\n                if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                    args = {\n                        data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                        selectedRowCellIndex: _this.selectedRowCellIndexes,\n                        previousRowCell: _this.prevECIdxs ?\n                            _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                    };\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    args[previousRowCellIndex] = _this.prevECIdxs;\n                }\n                else {\n                    args = { data: selectedData, cellIndex: cellIndex, selectedRowCellIndex: _this.selectedRowCellIndexes };\n                }\n                _this.updateCellProps(cellIndex, cellIndex);\n                _this.onActionComplete(args, events.cellSelected);\n            }\n        };\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        var _this = this;\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            args[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), function (cellSelectingArgs) {\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            _this.clearCell();\n            if (startIndex.rowIndex > endIndex.rowIndex) {\n                var temp = startIndex;\n                startIndex = endIndex;\n                endIndex = temp;\n            }\n            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n                if (_this.selectionSettings.cellSelectionMode.indexOf('Box') < 0) {\n                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : _this.getLastColIndex(i);\n                }\n                else {\n                    min = startIndex.cellIndex;\n                    max = endIndex.cellIndex;\n                }\n                cellIndexes = [];\n                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                    if (frzCols) {\n                        if (j < frzCols) {\n                            selectedCell = gObj.getCellFromIndex(i, j);\n                        }\n                        else {\n                            selectedCell = gObj.getMovableCellFromIndex(i, j);\n                        }\n                    }\n                    else {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    if (!selectedCell) {\n                        continue;\n                    }\n                    cellIndexes.push(j);\n                    _this.updateCellSelection(selectedCell);\n                    _this.addAttribute(selectedCell);\n                }\n                _this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n            }\n            var cellSelectedArgs;\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                cellSelectedArgs = {\n                    data: selectedData, cellIndex: edIndex, currentCell: gObj.getCellFromIndex(edIndex.rowIndex, edIndex.cellIndex),\n                    selectedRowCellIndex: _this.selectedRowCellIndexes,\n                    previousRowCell: _this.prevECIdxs ? _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                };\n                var previousRowCellIndex = 'previousRowCellIndex';\n                cellSelectedArgs[previousRowCellIndex] = _this.prevECIdxs;\n            }\n            else {\n                cellSelectedArgs = { data: selectedData, cellIndex: edIndex, selectedRowCellIndex: _this.selectedRowCellIndexes };\n            }\n            if (!_this.isDragged) {\n                _this.onActionComplete(cellSelectedArgs, events.cellSelected);\n                _this.cellselected = true;\n            }\n            _this.updateCellProps(stIndex, edIndex);\n        });\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var cellSelectArgs;\n        var isHybrid = 'isHybrid';\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            cellSelectArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            };\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        else {\n            cellSelectArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n            };\n        }\n        this.onActionBegin(cellSelectArgs, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        var cellSelectedArgs;\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            cellSelectedArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                currentCell: selectedCell, selectedRowCellIndex: this.selectedRowCellIndexes,\n                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            };\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        else {\n            cellSelectedArgs = { data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                selectedRowCellIndex: this.selectedRowCellIndexes };\n        }\n        this.onActionComplete(cellSelectedArgs, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedTable;\n        var cIdx;\n        var selectedCell;\n        var frzCols = gObj.getFrozenColumns();\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        var isHybrid = 'isHybrid';\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.hideAutoFill();\n        var rowObj;\n        if (frzCols && cellIndexes[0].cellIndex >= frzCols) {\n            rowObj = gObj.getMovableRowsObject()[cellIndexes[0].rowIndex];\n        }\n        else {\n            rowObj = this.getRowObj(cellIndexes[0].rowIndex);\n        }\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            foreignKeyData.push(rowObj.cells[frzCols && cellIndexes[0].cellIndex >= frzCols\n                ? cellIndex.cellIndex - frzCols : cellIndex.cellIndex].foreignKeyData);\n            var args = void 0;\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                args = {\n                    cancel: false, data: selectedData, cellIndex: cellIndexes[0],\n                    isShiftPressed: this.isMultiShiftRequest,\n                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                    previousRowCell: this.prevECIdxs ?\n                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                };\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            else {\n                args = {\n                    cancel: false, data: selectedData, cellIndex: cellIndexes[0],\n                    isShiftPressed: this.isMultiShiftRequest, isCtrlPressed: this.isMultiCtrlRequest\n                };\n            }\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    if (selectedCellIdx.length === 0) {\n                        this.selectedRowCellIndexes.splice(index, 1);\n                    }\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                if (!isNullOrUndefined(args) && args[cncl] === true) {\n                    return;\n                }\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            if (!isUnSelected) {\n                var cellSelectedArgs = void 0;\n                if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                    cellSelectedArgs = {\n                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                            undefined, selectedRowCellIndex: this.selectedRowCellIndexes\n                    };\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n                }\n                else {\n                    cellSelectedArgs = { data: selectedData, cellIndex: cellIndexes[0], selectedRowCellIndex: this.selectedRowCellIndexes };\n                }\n                this.onActionComplete(cellSelectedArgs, events.cellSelected);\n                this.cellselected = true;\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var cells;\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (index >= frzCols) {\n                cells = this.parent.getMovableDataRows()[rowIndex] &&\n                    this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n            }\n        }\n        if (!cells) {\n            cells = this.parent.getDataRows()[rowIndex] &&\n                this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        }\n        if (cells) {\n            for (var m = 0; m < cells.length; m++) {\n                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n                if (colIndex === index) {\n                    if (frzCols) {\n                        if (index >= frzCols) {\n                            m += frzCols;\n                        }\n                    }\n                    return m;\n                }\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = this.getCurrentBatchRecordChanges();\n            var selectedTable = void 0;\n            var frzCols = gObj.getFrozenColumns();\n            this.hideAutoFill();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        if (rowCell[i].cellIndexes[j] < frzCols) {\n                            cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                        else {\n                            cells.push(gObj.getMovableCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                    }\n                    else {\n                        if (rowObj.cells) {\n                            foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        }\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            if (this.bdrElement) {\n                this.showHideBorders('none');\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            if (!this.isDragged && this.cellselected) {\n                this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n            }\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.getFrozenColumns()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            if (!this.isCellDrag) {\n                this.hideAutoFill();\n                this.selectRowsByRange(this.startDIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, 'e-rowcell');\n                if (td) {\n                    this.startAFCell = this.startCell;\n                    this.endAFCell = parentsUntil(e.target, 'e-rowcell');\n                    this.selectLikeExcel(e, rowIndex, parseInt(td.getAttribute('aria-colindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (e, rowIndex, cellIndex) {\n        if (!this.isAutoFillSel) {\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.drawBorders();\n        }\n        else { //Autofill\n            this.showAFBorders();\n            this.selectLikeAutoFill(e);\n        }\n    };\n    Selection.prototype.drawBorders = function () {\n        if (this.selectionSettings.cellSelectionMode === 'BoxWithBorder' && this.selectedRowCellIndexes.length && !this.parent.isEdit) {\n            this.parent.element.classList.add('e-enabledboxbdr');\n            if (!this.bdrElement) {\n                this.createBorders();\n            }\n            this.positionBorders();\n        }\n        else {\n            this.showHideBorders('none');\n        }\n    };\n    Selection.prototype.isLastCell = function (cell) {\n        var cells = [].slice.call(cell.parentElement.querySelectorAll('.e-rowcell:not(.e-hide)'));\n        return cells[cells.length - 1] === cell;\n    };\n    Selection.prototype.isLastRow = function (cell) {\n        var rows = [].slice.call(closest(cell, 'tbody').querySelectorAll('.e-row:not(.e-hiddenrow)'));\n        return cell.parentElement === rows[rows.length - 1];\n    };\n    Selection.prototype.isFirstRow = function (cell) {\n        var rows = [].slice.call(closest(cell, 'tbody').querySelectorAll('.e-row:not(.e-hiddenrow)'));\n        return cell.parentElement === rows[0];\n    };\n    Selection.prototype.isFirstCell = function (cell) {\n        var cells = [].slice.call(cell.parentElement.querySelectorAll('.e-rowcell:not(.e-hide)'));\n        return cells[0] === cell;\n    };\n    Selection.prototype.setBorders = function (parentEle, border, bdrStr) {\n        var cells = [].slice.call(parentEle.querySelectorAll('.e-cellselectionbackground')).\n            filter(function (ele) { return ele.style.display === ''; });\n        if (cells.length) {\n            var start = cells[0];\n            var end = cells[cells.length - 1];\n            var stOff = start.getBoundingClientRect();\n            var endOff = end.getBoundingClientRect();\n            var parentOff = start.offsetParent.getBoundingClientRect();\n            var rowHeight = this.isLastRow(end) && (bdrStr === '1' || bdrStr === '2') ? 2 : 0;\n            var topOffSet = this.parent.frozenRows && (bdrStr === '1' || bdrStr === '2') &&\n                this.isFirstRow(start) ? 1.5 : 0;\n            var leftOffset = this.parent.getFrozenColumns() && (bdrStr === '2' || bdrStr === '4') &&\n                this.isFirstCell(start) ? 1 : 0;\n            if (this.parent.enableRtl) {\n                border.style.right = parentOff.right - stOff.right - leftOffset + 'px';\n                border.style.width = stOff.right - endOff.left + leftOffset + 1 + 'px';\n            }\n            else {\n                border.style.left = stOff.left - parentOff.left - leftOffset + 'px';\n                border.style.width = endOff.right - stOff.left + leftOffset + 1 + 'px';\n            }\n            border.style.top = stOff.top - parentOff.top - topOffSet + 'px';\n            border.style.height = endOff.top - stOff.top > 0 ?\n                (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) - rowHeight + topOffSet + 'px' :\n                endOff.height + topOffSet - rowHeight + 1 + 'px';\n            this.selectDirection += bdrStr;\n        }\n        else {\n            border.style.display = 'none';\n        }\n    };\n    Selection.prototype.positionBorders = function () {\n        this.updateStartEndCells();\n        if (!this.startCell || !this.bdrElement || !this.selectedRowCellIndexes.length) {\n            return;\n        }\n        this.selectDirection = '';\n        this.showHideBorders('');\n        this.setBorders(this.parent.getContentTable(), this.bdrElement, '1');\n        if (this.parent.getFrozenColumns()) {\n            this.setBorders(this.parent.contentModule.getMovableContent(), this.mcBdrElement, '2');\n        }\n        if (this.parent.frozenRows) {\n            this.setBorders(this.parent.getHeaderTable(), this.fhBdrElement, '3');\n            if (this.parent.getFrozenColumns()) {\n                this.setBorders(this.parent.headerModule.getMovableHeader(), this.mhBdrElement, '4');\n            }\n        }\n        this.applyBorders(this.selectDirection);\n    };\n    Selection.prototype.applyBorders = function (str) {\n        var rtl = this.parent.enableRtl;\n        switch (str.length) {\n            case 4:\n                {\n                    this.bdrElement.style.borderWidth = rtl ? '0 2px 2px 0' : '0 0 2px 2px';\n                    this.mcBdrElement.style.borderWidth = rtl ? '0 0 2px 2px' : '0 2px 2px 0';\n                    this.fhBdrElement.style.borderWidth = rtl ? '2px 2px 0 0' : '2px 0 0 2px';\n                    this.mhBdrElement.style.borderWidth = rtl ? '2px 0 0 2px' : '2px 2px 0 0';\n                }\n                break;\n            case 2:\n                {\n                    this.bdrElement.style.borderWidth = str.includes('2') ? rtl ? '2px 2px 2px 0' : '2px 0 2px 2px' : '0 2px 2px 2px';\n                    if (this.parent.getFrozenColumns()) {\n                        this.mcBdrElement.style.borderWidth = str.includes('1') ? rtl ? '2px 0 2px 2px' : '2px 2px 2px 0' : '0 2px 2px 2px';\n                    }\n                    if (this.parent.frozenRows) {\n                        this.fhBdrElement.style.borderWidth = str.includes('1') ? '2px 2px 0 2px' : rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                        if (this.parent.getFrozenColumns()) {\n                            this.mhBdrElement.style.borderWidth = str.includes('2') ? '2px 2px 0 2px' : rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                        }\n                    }\n                }\n                break;\n            default:\n                this.bdrElement.style.borderWidth = '2px';\n                if (this.parent.getFrozenColumns()) {\n                    this.mcBdrElement.style.borderWidth = '2px';\n                }\n                if (this.parent.frozenRows) {\n                    this.fhBdrElement.style.borderWidth = '2px';\n                    if (this.parent.getFrozenColumns()) {\n                        this.mhBdrElement.style.borderWidth = '2px';\n                    }\n                }\n                break;\n        }\n    };\n    Selection.prototype.createBorders = function () {\n        if (!this.bdrElement) {\n            this.bdrElement = this.parent.getContentTable().parentElement.appendChild(createElement('div', {\n                className: 'e-xlsel', id: this.parent.element.id + '_bdr',\n                styles: 'width: 2px; border-width: 0;'\n            }));\n            if (this.parent.getFrozenColumns()) {\n                this.mcBdrElement = this.parent.contentModule.getMovableContent().appendChild(createElement('div', {\n                    className: 'e-xlsel', id: this.parent.element.id + '_mcbdr',\n                    styles: 'height: 2px; border-width: 0;'\n                }));\n            }\n            if (this.parent.frozenRows) {\n                this.fhBdrElement = this.parent.getHeaderTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_fhbdr', styles: 'height: 2px;' }));\n            }\n            if (this.parent.frozenRows && this.parent.getFrozenColumns()) {\n                this.mhBdrElement = this.parent.headerModule.getMovableHeader().appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_mhbdr', styles: 'height: 2px;' }));\n            }\n        }\n    };\n    Selection.prototype.showHideBorders = function (display) {\n        if (this.bdrElement) {\n            this.bdrElement.style.display = display;\n            if (this.parent.getFrozenColumns()) {\n                this.mcBdrElement.style.display = display;\n            }\n            if (this.parent.frozenRows) {\n                this.fhBdrElement.style.display = display;\n            }\n            if (this.parent.frozenRows && this.parent.getFrozenColumns()) {\n                this.mhBdrElement.style.display = display;\n            }\n        }\n    };\n    Selection.prototype.drawAFBorders = function () {\n        if (!this.bdrAFBottom) {\n            this.createAFBorders();\n        }\n        this.positionAFBorders();\n    };\n    Selection.prototype.positionAFBorders = function () {\n        if (!this.startCell || !this.bdrAFLeft) {\n            return;\n        }\n        var stOff = this.startAFCell.getBoundingClientRect();\n        var endOff = this.endAFCell.getBoundingClientRect();\n        var top = endOff.top - stOff.top > 0 ? 1 : 0;\n        var firstCellTop = endOff.top - stOff.top >= 0 && (parentsUntil(this.startAFCell, 'e-movablecontent') ||\n            parentsUntil(this.startAFCell, 'e-frozencontent')) && this.isFirstRow(this.startAFCell) ? 1.5 : 0;\n        var firstCellLeft = (parentsUntil(this.startAFCell, 'e-movablecontent') ||\n            parentsUntil(this.startAFCell, 'e-movableheader')) && this.isFirstCell(this.startAFCell) ? 1 : 0;\n        var rowHeight = this.isLastRow(this.endAFCell) && (parentsUntil(this.endAFCell, 'e-movablecontent') ||\n            parentsUntil(this.endAFCell, 'e-frozencontent')) ? 2 : 0;\n        var parentOff = this.startAFCell.offsetParent.getBoundingClientRect();\n        var parentRect = this.parent.element.getBoundingClientRect();\n        var sTop = this.startAFCell.offsetParent.parentElement.scrollTop;\n        var sLeft = this.startAFCell.offsetParent.parentElement.scrollLeft;\n        var scrollTop = sTop - this.startAFCell.offsetTop;\n        var scrollLeft = sLeft - this.startAFCell.offsetLeft;\n        var totalHeight = this.parent.element.clientHeight;\n        var totalWidth = this.parent.element.clientWidth;\n        scrollTop = scrollTop > 0 ? Math.floor(scrollTop) - 1 : 0;\n        scrollLeft = scrollLeft > 0 ? scrollLeft : 0;\n        var left = stOff.left - parentRect.left;\n        if (!this.parent.enableRtl) {\n            this.bdrAFLeft.style.left = left - firstCellLeft + scrollLeft - 1 + 'px';\n            this.bdrAFRight.style.left = endOff.left - parentRect.left - 2 + endOff.width + 'px';\n            this.bdrAFRight.style.width = totalWidth <= parseInt(this.bdrAFRight.style.left, 10) ? '0px' : '2px';\n            this.bdrAFTop.style.left = left + scrollLeft - 0.5 + 'px';\n            this.bdrAFTop.style.width = parseInt(this.bdrAFRight.style.left, 10) - parseInt(this.bdrAFLeft.style.left, 10)\n                - firstCellLeft + 1 + 'px';\n            if (totalWidth <= (parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10))) {\n                var leftRemove = (parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10)) - totalWidth;\n                this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) - leftRemove + 'px';\n            }\n        }\n        else {\n            var scrolloffSet = (parentsUntil(this.startAFCell, 'e-movablecontent') ||\n                parentsUntil(this.startAFCell, 'e-movableheader')) ? stOff.right -\n                this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width -\n                parentRect.left : 0;\n            this.bdrAFLeft.style.right = parentRect.right - endOff.right - 2 + endOff.width + 'px';\n            this.bdrAFLeft.style.width = totalWidth <= parseInt(this.bdrAFLeft.style.right, 10) ? '0px' : '2px';\n            this.bdrAFRight.style.right = parentRect.right - stOff.right - firstCellLeft + scrolloffSet - 1 + 'px';\n            this.bdrAFTop.style.left = endOff.left - parentRect.left - 0.5 + 'px';\n            this.bdrAFTop.style.width = parseInt(this.bdrAFLeft.style.right, 10) - parseInt(this.bdrAFRight.style.right, 10)\n                - firstCellLeft + 1 + 'px';\n            if (parseInt(this.bdrAFTop.style.left, 10) < 0) {\n                this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10) + 'px';\n                this.bdrAFTop.style.left = '0px';\n            }\n        }\n        this.bdrAFLeft.style.top = stOff.top - parentRect.top - firstCellTop + scrollTop + 'px';\n        this.bdrAFLeft.style.height = endOff.top - stOff.top > 0 ?\n            (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) + firstCellTop - rowHeight - scrollTop + 'px' :\n            endOff.height + firstCellTop - rowHeight - scrollTop + 'px';\n        this.bdrAFRight.style.top = this.bdrAFLeft.style.top;\n        this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        this.bdrAFTop.style.top = this.bdrAFRight.style.top;\n        this.bdrAFBottom.style.left = this.bdrAFTop.style.left;\n        this.bdrAFBottom.style.top = parseFloat(this.bdrAFLeft.style.top) + parseFloat(this.bdrAFLeft.style.height) - top - 1 + 'px';\n        this.bdrAFBottom.style.width = totalHeight <= parseFloat(this.bdrAFBottom.style.top) ? '0px' : this.bdrAFTop.style.width;\n        if (totalHeight <= (parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10))) {\n            var topRemove = parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10) - totalHeight;\n            this.bdrAFLeft.style.height = parseInt(this.bdrAFLeft.style.height, 10) - topRemove + 'px';\n            this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        }\n    };\n    Selection.prototype.createAFBorders = function () {\n        if (!this.bdrAFLeft) {\n            this.bdrAFLeft = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafleft', styles: 'width: 2px;' }));\n            this.bdrAFRight = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafright', styles: 'width: 2px;' }));\n            this.bdrAFBottom = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafbottom', styles: 'height: 2px;' }));\n            this.bdrAFTop = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdraftop', styles: 'height: 2px;' }));\n        }\n    };\n    Selection.prototype.showAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = '';\n            this.bdrAFRight.style.display = '';\n            this.bdrAFBottom.style.display = '';\n            this.bdrAFTop.style.display = '';\n        }\n    };\n    Selection.prototype.hideAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = 'none';\n            this.bdrAFRight.style.display = 'none';\n            this.bdrAFBottom.style.display = 'none';\n            this.bdrAFTop.style.display = 'none';\n        }\n    };\n    Selection.prototype.updateValue = function (rIdx, cIdx, cell) {\n        var args = this.createBeforeAutoFill(rIdx, cIdx, cell);\n        if (!args.cancel) {\n            var col = this.parent.getColumnByIndex(cIdx);\n            if (this.parent.editModule && cell) {\n                if (col.type === 'number') {\n                    this.parent.editModule.updateCell(rIdx, col.field, parseInt(args.value, 10));\n                }\n                else {\n                    this.parent.editModule.updateCell(rIdx, col.field, args.value);\n                }\n            }\n        }\n    };\n    Selection.prototype.createBeforeAutoFill = function (rowIndex, colIndex, cell) {\n        var col = this.parent.getColumnByIndex(colIndex);\n        var args = {\n            column: col,\n            value: cell.innerText\n        };\n        this.parent.trigger(events.beforeAutoFill, args);\n        return args;\n    };\n    Selection.prototype.getAutoFillCells = function (rowIndex, startCellIdx) {\n        var cells = [].slice.call(this.parent.getDataRows()[rowIndex].querySelectorAll('.e-cellselectionbackground'));\n        if (this.parent.getFrozenColumns()) {\n            cells = cells.concat([].slice.call(this.parent.getMovableDataRows()[rowIndex].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Selection.prototype.selectLikeAutoFill = function (e, isApply) {\n        var startrowIdx = parseInt(parentsUntil(this.startAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var startCellIdx = parseInt(this.startAFCell.getAttribute('aria-colindex'), 10);\n        var endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n        var rowLen = this.selectedRowCellIndexes.length - 1;\n        var colLen = this.selectedRowCellIndexes[0].cellIndexes.length - 1;\n        var col;\n        switch (true) { //direction         \n            case !isApply && this.endAFCell.classList.contains('e-cellselectionbackground') &&\n                !!parentsUntil(e.target, 'e-rowcell'):\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, startCellIdx);\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, startCellIdx + colLen);\n                this.drawAFBorders();\n                break;\n            case this.autoFillRLselection && startCellIdx + colLen < endCellIdx && //right\n                endCellIdx - startCellIdx - colLen + 1 > endrowIdx - startrowIdx - rowLen // right bottom\n                && endCellIdx - startCellIdx - colLen + 1 > startrowIdx - endrowIdx: //right top\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, endCellIdx);\n                endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n                endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var cellIdx = parseInt(this.endCell.getAttribute('aria-colindex'), 10);\n                    for (var i = startrowIdx; i <= endrowIdx; i++) {\n                        var cells = this.getAutoFillCells(i, startCellIdx);\n                        var c = 0;\n                        for (var j = cellIdx + 1; j <= endCellIdx; j++) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: this.startCellIndex }, { rowIndex: endrowIdx, cellIndex: endCellIdx });\n                }\n                break;\n            case this.autoFillRLselection && startCellIdx > endCellIdx && // left\n                startCellIdx - endCellIdx + 1 > endrowIdx - startrowIdx - rowLen && //left top\n                startCellIdx - endCellIdx + 1 > startrowIdx - endrowIdx: // left bottom\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, endCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    for (var i = startrowIdx; i <= startrowIdx + rowLen; i++) {\n                        var cells = this.getAutoFillCells(i, startCellIdx);\n                        cells.reverse();\n                        var c = 0;\n                        for (var j = this.startCellIndex - 1; j >= endCellIdx; j--) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: endCellIdx }, { rowIndex: startrowIdx + rowLen, cellIndex: this.startCellIndex + colLen });\n                }\n                break;\n            case startrowIdx > endrowIdx: //up\n                this.startAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = trIdx;\n                    for (var i = startrowIdx - 1; i >= endrowIdx; i--) {\n                        if (r === this.startIndex - 1) {\n                            r = trIdx;\n                        }\n                        var cells = this.getAutoFillCells(r, startCellIdx);\n                        var c = 0;\n                        r--;\n                        for (var j = this.startCellIndex; j <= this.startCellIndex + colLen; j++) {\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: endrowIdx, cellIndex: startCellIdx + colLen }, { rowIndex: startrowIdx + rowLen, cellIndex: startCellIdx });\n                }\n                break;\n            default: //down\n                this.endAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx + colLen);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = this.startIndex;\n                    for (var i = trIdx + 1; i <= endrowIdx; i++) {\n                        if (r === trIdx + 1) {\n                            r = this.startIndex;\n                        }\n                        var cells = this.getAutoFillCells(r, startCellIdx);\n                        r++;\n                        var c = 0;\n                        for (var m = this.startCellIndex; m <= this.startCellIndex + colLen; m++) {\n                            this.updateValue(i, m, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: trIdx - rowLen, cellIndex: startCellIdx }, { rowIndex: endrowIdx, cellIndex: startCellIdx + colLen });\n                }\n                break;\n        }\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        if (this.isDragged && this.selectedRowCellIndexes.length === 1 && this.selectedRowCellIndexes[0].cellIndexes.length === 1) {\n            this.mUPTarget = parentsUntil(e.target, 'e-rowcell');\n        }\n        else {\n            this.mUPTarget = null;\n        }\n        if (this.isDragged && !this.isAutoFillSel && this.selectionSettings.mode === 'Cell') {\n            var target = e.target;\n            var rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n            var cellIndex = parseInt(target.getAttribute('aria-colindex'), 10);\n            this.isDragged = false;\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isDragged = false;\n        this.updateAutoFillPosition();\n        if (this.isAutoFillSel) {\n            var lastCell = parentsUntil(e.target, 'e-rowcell');\n            this.endAFCell = lastCell ? lastCell : this.endCell === this.endAFCell ? this.startAFCell : this.endAFCell;\n            this.startAFCell = this.startCell;\n            this.updateStartCellsIndex();\n            this.selectLikeAutoFill(e, true);\n            this.updateAutoFillPosition();\n            this.hideAFBorders();\n            this.positionBorders();\n            this.isAutoFillSel = false;\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        if (this.parent.frozenRows) {\n            EventHandler.remove(this.parent.getHeaderContent(), 'mousemove', this.mouseMoveHandler);\n        }\n        EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n    };\n    Selection.prototype.hideAutoFill = function () {\n        if (this.autofill) {\n            this.autofill.style.display = 'none';\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.updateAutoFillPosition = function () {\n        if (this.parent.enableAutoFill && !this.parent.isEdit &&\n            this.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()\n            && this.selectedRowCellIndexes.length) {\n            var frzCols = this.parent.getFrozenColumns();\n            var index = parseInt(this.target.getAttribute('aria-colindex'), 10);\n            var rindex = parseInt(this.target.getAttribute('index'), 10);\n            var rowIndex = this.selectedRowCellIndexes[this.selectedRowCellIndexes.length - 1].rowIndex;\n            var cells = this.getAutoFillCells(rowIndex, index).filter(function (ele) { return ele.style.display === ''; });\n            var isFrozenCol = void 0;\n            var isFrozenRow = void 0;\n            if (frzCols && index >= frzCols) {\n                isFrozenCol = true;\n            }\n            if (rindex < this.parent.frozenRows) {\n                isFrozenRow = true;\n            }\n            if (!select('#' + this.parent.element.id + '_autofill', parentsUntil(this.target, 'e-table'))) {\n                if (select('#' + this.parent.element.id + '_autofill', this.parent.element)) {\n                    select('#' + this.parent.element.id + '_autofill', this.parent.element).remove();\n                }\n                this.autofill = createElement('div', { className: 'e-autofill', id: this.parent.element.id + '_autofill' });\n                this.autofill.style.display = 'none';\n                !isFrozenRow ? !isFrozenCol ? this.parent.getContentTable().parentElement.appendChild(this.autofill) :\n                    this.parent.contentModule.getMovableContent().appendChild(this.autofill) :\n                    !isFrozenCol ? this.parent.getHeaderTable().parentElement.appendChild(this.autofill) :\n                        this.parent.headerModule.getMovableHeader().appendChild(this.autofill);\n            }\n            var cell = cells[cells.length - 1];\n            if (cell && cell.offsetParent) {\n                var clientRect = cell.getBoundingClientRect();\n                var parentOff = cell.offsetParent.getBoundingClientRect();\n                var colWidth = this.isLastCell(cell) ? 4 : 0;\n                var rowHeight = this.isLastRow(cell) ? 3 : 0;\n                if (!this.parent.enableRtl) {\n                    this.autofill.style.left = clientRect.left - parentOff.left + clientRect.width - 4 - colWidth + 'px';\n                }\n                else {\n                    this.autofill.style.right = parentOff.right - clientRect.right + clientRect.width - 4 - colWidth + 'px';\n                }\n                this.autofill.style.top = clientRect.top - parentOff.top + clientRect.height - 5 - rowHeight + 'px';\n            }\n            this.autofill.style.display = '';\n        }\n        else {\n            this.hideAutoFill();\n        }\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        this.mouseButton = e.button;\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id || parentsUntil(target, 'e-headercontent') && !this.parent.frozenRows ||\n            parentsUntil(target, 'e-editedbatchcell') || parentsUntil(target, 'e-editedrow')) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (parentsUntil(target, 'e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop && !gObj.isEdit) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = this.parent.createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                this.enableDrag(e, true);\n            }\n        }\n        this.updateStartEndCells();\n        if (target.classList.contains('e-autofill') || target.classList.contains('e-xlsel')) {\n            this.isCellDrag = true;\n            this.isAutoFillSel = true;\n            this.enableDrag(e);\n        }\n    };\n    Selection.prototype.updateStartEndCells = function () {\n        var cells = [].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground'));\n        this.startCell = cells[0];\n        this.endCell = cells[cells.length - 1];\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.updateStartCellsIndex = function () {\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.enableDrag = function (e, isUpdate) {\n        var gObj = this.parent;\n        if (isUpdate) {\n            var tr = closest(e.target, 'tr');\n            this.startDIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n            this.startDCellIndex = parseInt(parentsUntil(e.target, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n        document.body.classList.add('e-disableuserselect');\n        var gBRect = gObj.element.getBoundingClientRect();\n        var postion = getPosition(e);\n        this.x = postion.x - gBRect.left;\n        this.y = postion.y - gBRect.top;\n        EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n        if (this.parent.frozenRows) {\n            EventHandler.add(gObj.getHeaderContent(), 'mousemove', this.mouseMoveHandler, this);\n        }\n        EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.requestType === 'infiniteScroll';\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection && !isInfiniteScroll) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.beforeFragAppend, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n        this.parent.on(events.headerRefreshed, this.refreshHeader, this);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.beforeFragAppend, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n        this.parent.off(events.headerRefreshed, this.refreshHeader);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.wireEvents = function () {\n        this.isMacOS = navigator.userAgent.indexOf('Mac OS') !== -1;\n        if (this.isMacOS) {\n            EventHandler.add(this.parent.element, 'keydown', this.keyDownHandler, this);\n            EventHandler.add(this.parent.element, 'keyup', this.keyUpHandler, this);\n        }\n    };\n    Selection.prototype.unWireEvents = function () {\n        if (this.isMacOS) {\n            EventHandler.remove(this.parent.element, 'keydown', this.keyDownHandler);\n            EventHandler.remove(this.parent.element, 'keyup', this.keyUpHandler);\n        }\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n        EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n                this.prevCIdxs = undefined;\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n                this.prevRowIndex = undefined;\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n        }\n        this.isPersisted = true;\n        this.checkBoxSelectionChanged();\n        this.isPersisted = false;\n        this.initPerisistSelection();\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length) {\n            gObj.isCheckBoxSelection = !(this.selectionSettings.checkboxMode === 'ResetOnRowClick');\n        }\n        this.drawBorders();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.selectRow(this.parent.selectedRowIndex);\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        this.parent.off(events.contentReady, this.checkBoxSelectionChanged);\n        var gobj = this.parent;\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection && !this.isPersisted) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            if (!query.params) {\n                query.params = this.parent.query.params;\n            }\n            var dataManager = data.getData({}, query);\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        if (!this.parent.getDataModule().isRemote() && !isBlazor()) {\n            if (state) {\n                if (this.parent.groupSettings.columns.length) {\n                    for (var _i = 0, _a = this.getData().records; _i < _a.length; _i++) {\n                        var data = _a[_i];\n                        this.selectedRowState[data[this.primaryKey]] = true;\n                    }\n                }\n                else {\n                    for (var _b = 0, _c = this.getData(); _b < _c.length; _b++) {\n                        var data = _c[_b];\n                        this.selectedRowState[data[this.primaryKey]] = true;\n                    }\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        if (rows !== null && rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data ? rowObj.data[this.primaryKey] : null : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' &&\n                    this.totalRecordsCount === Object.keys(this.selectedRowState).length && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            this.isSingleSel() && indexes.length > 0 ? this.selectRow(indexes[0], true) : this.selectRows(indexes);\n        }\n        if (this.parent.isCheckBoxSelection && this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            var records = [];\n            if (!isBlazor()) {\n                records = e.data;\n            }\n            else {\n                records = this.getSelectedRecords();\n            }\n            var data = records.slice();\n            for (var i = 0; i < data.length; i++) {\n                if (!isNullOrUndefined(data[i][this.primaryKey])) {\n                    this.updatePersistDelete(data[i][this.primaryKey]);\n                }\n            }\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        if (e.requestType === 'paging') {\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n            this.prevECIdxs = undefined;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n        if (this.parent.enableVirtualization) {\n            this.setCheckAllState();\n        }\n        if (this.parent.isCheckBoxSelection && !this.initialRowSelection) {\n            var totalRecords = this.parent.getRowsObject();\n            var indexes = [];\n            for (var i = 0; i < totalRecords.length; i++) {\n                if (totalRecords[i].isSelected) {\n                    indexes.push(i);\n                }\n            }\n            if (indexes.length) {\n                this.selectRows(indexes);\n            }\n            this.initialRowSelection = true;\n        }\n    };\n    Selection.prototype.updatePersistSelectedData = function (checkState) {\n        if (this.parent.isPersistSelection) {\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = (!this.parent.getDataModule().isRemote() && !isBlazor()) ?\n                    this.parent.groupSettings.columns.length ? this.getData().records.slice() :\n                        this.getData().slice() : this.persistSelectedData;\n            }\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.getCurrentBatchRecordChanges().length) {\n            this.parent.checkAllRows = 'Check';\n            this.updatePersistSelectedData(checkState);\n            if (isBlazor() && this.parent.enableVirtualization &&\n                !isNullOrUndefined(this.parent.contentModule.currentInfo.endIndex)) {\n                this.selectRowsByRange(this.parent.contentModule.currentInfo.startIndex, this.parent.contentModule.currentInfo.endIndex);\n            }\n            else {\n                this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length - 1));\n            }\n        }\n        else {\n            this.parent.checkAllRows = 'Uncheck';\n            this.updatePersistSelectedData(checkState);\n            this.clearSelection();\n        }\n        this.chkAllCollec = [];\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n            }\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        this.isHeaderCheckboxClicked = true;\n        if (stateStr === 'Intermediate') {\n            state = this.getCurrentBatchRecordChanges().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        if (this.parent.isPersistSelection && this.parent.allowPaging) {\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        this.checkSelectAllAction(!state);\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization) {\n            var interopAdaptor = 'interopAdaptor';\n            var invokeMethodAsync = 'invokeMethodAsync';\n            this.parent[interopAdaptor][invokeMethodAsync]('MaintainSelection', !state, 'checkbox', null);\n            this.checkBoxState = !state;\n            if (!state) {\n                var values = 'values';\n                var vgenerator = 'vgenerator';\n                var rowCache = this.parent.contentModule[vgenerator].rowCache;\n                Object[values](rowCache).forEach(function (x) { return x.isSelected = true; });\n                for (var i = 0; i < Object.keys(rowCache).length; i++) {\n                    if (this.parent.selectionModule.selectedRowIndexes.indexOf(Number(Object.keys(rowCache)[i])) === -1) {\n                        this.parent.selectionModule.selectedRowIndexes.push(Number(Object.keys(rowCache)[i]));\n                    }\n                }\n            }\n        }\n        this.target = null;\n        if (this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        var gObj = this.parent;\n        this.isMultiCtrlRequest = true;\n        var rIndex = 0;\n        this.isHeaderCheckboxClicked = false;\n        if (isGroupAdaptive(gObj)) {\n            var uid = target.parentElement.getAttribute('data-uid');\n            rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n        }\n        else {\n            rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        }\n        if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0 &&\n            this.parent.editSettings.newRowPosition === 'Top') {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n            && !this.parent.getDataModule().isRemote()\n            && !(isBlazor() && this.parent.isServerRendered)) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                var dataLength = this.getData().length;\n                for (var data = 0; data < dataLength; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                if (index && this.parent.getRowByIndex(index).getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    ;\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            var checkToSelectAll = void 0;\n            var isServerRenderedVirtualization = isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization;\n            if (isServerRenderedVirtualization) {\n                var values = 'values';\n                var vgenerator = 'vgenerator';\n                checkToSelectAll = !Object[values](this.parent.contentModule[vgenerator].rowCache).\n                    filter(function (x) { return x.isSelected === undefined || x.isSelected === false; }).length &&\n                    Object[values](this.parent.contentModule[vgenerator].rowCache).\n                        filter(function (x) { return x.isSelected; }).length === this.selectedRowIndexes.length;\n            }\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection && !(isServerRenderedVirtualization)) {\n                checkedLen = this.selectedRowIndexes.length;\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            var input = this.getCheckAllBox();\n            if (input) {\n                var spanEle = input.nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                setChecked(input, false);\n                input.indeterminate = false;\n                if (checkToSelectAll || checkedLen === this.totalRecordsCount && this.totalRecordsCount\n                    || ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n                        && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()\n                        && !(isBlazor() && this.parent.isServerRendered)\n                        && checkedLen === this.getData().length)) {\n                    addClass([spanEle], ['e-check']);\n                    setChecked(input, true);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (isServerRenderedVirtualization && !this.selectedRowIndexes.length ||\n                    checkedLen === 0 && !isServerRenderedVirtualization || this.getCurrentBatchRecordChanges().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                    input.indeterminate = true;\n                }\n                if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.keyDownHandler = function (e) {\n        // Below are keyCode for command key in MAC OS. Safari/Chrome(91-Left command, 93-Right Command), Opera(17), FireFox(224)\n        if ((((Browser.info.name === 'chrome') || (Browser.info.name === 'safari')) && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = true;\n        }\n    };\n    Selection.prototype.keyUpHandler = function (e) {\n        if ((((Browser.info.name === 'chrome') || (Browser.info.name === 'safari')) && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = false;\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.actualTarget = target;\n        if (parentsUntil(target, 'e-row') || parentsUntil(target, 'e-headerchkcelldiv')) {\n            this.isInteracted = true;\n        }\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch ||\n            (this.isMacOS && this.cmdKeyPressed);\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        this.checkSelectAllClicked = checkWrap && checkWrap.querySelectorAll('.e-checkselectall') ? true : false;\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        this.drawBorders();\n        this.updateAutoFillPosition();\n        target = parentsUntil(target, 'e-rowcell');\n        if ((target && target.parentElement.classList.contains('e-row') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                }\n            }\n            else {\n                var gObj = this.parent;\n                var rIndex = 0;\n                if (isGroupAdaptive(gObj)) {\n                    var uid = target.parentElement.getAttribute('data-uid');\n                    rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n                }\n                else {\n                    rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                }\n                if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                if (!this.mUPTarget || !this.mUPTarget.isEqualNode(target)) {\n                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                }\n                this.parent.hoverFrozenRows(e);\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        if (isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            this.preventFocus = false;\n        }\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        if (!this.selectionSettings.enableSimpleMultiRowSelection) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n                (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                    || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n        }\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, this.selectionSettings.enableToggle);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, this.selectionSettings.enableToggle);\n            if (this.selectedRowCellIndexes.length) {\n                this.updateAutoFillPosition();\n            }\n            this.drawBorders();\n        }\n        else if (this.isMultiShiftRequest) {\n            if (this.parent.isCheckBoxSelection || (!this.parent.isCheckBoxSelection &&\n                !closest(this.target, '.e-rowcell').classList.contains('e-gridchkbox'))) {\n                this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            }\n            else {\n                this.addRowsToSelection([rowIndex]);\n            }\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.updateAutoFillPosition();\n            this.drawBorders();\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            if (isBlazor() && this.parent.enableVirtualization && this.parent.isServerRendered) {\n                var rowIndexes = this.parent.getSelectedRowIndexes();\n                var interopAdaptor = 'interopAdaptor';\n                var invokeMethodAsync = 'invokeMethodAsync';\n                this.parent[interopAdaptor][invokeMethodAsync]('MaintainSelection', true, 'normal', rowIndexes);\n            }\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n            this.showHideBorders('none');\n        }\n        this.isDragged = false;\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute('aria-rowindex'));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.getFrozenColumns() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space')\n            && !(e.element.classList.contains('e-detailrowexpand') || e.element.classList.contains('e-detailrowcollapse'));\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.e-rowcell'))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.e-rowcell'))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n        }\n        if (this.parent.getFrozenColumns()) {\n            var cIdx = Number(e.element.getAttribute('aria-colindex'));\n            var selectedIndexes = this.parent.getSelectedRowCellIndexes();\n            if (selectedIndexes.length && prev.cellIndex === 0) {\n                prev.cellIndex = selectedIndexes[selectedIndexes.length - 1].cellIndexes[0];\n            }\n            prev.cellIndex = !isNullOrUndefined(prev.cellIndex) ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n            cellIndex = cIdx;\n        }\n        if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n            rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n            return;\n        }\n        this.preventFocus = true;\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.target = e.element;\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n            case 'tab':\n                if (this.parent.editSettings.allowNextRowEdit) {\n                    this.selectRow(rowIndex);\n                }\n                break;\n        }\n        this.preventFocus = false;\n        this.positionBorders();\n        this.updateAutoFillPosition();\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.getCurrentBatchRecordChanges().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check' && !this.selectionSettings.persistSelection) {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var detailIndentCell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            var dragdropIndentCell = row.querySelector('.e-rowdragdrop');\n            if (detailIndentCell) {\n                cells.push(detailIndentCell);\n            }\n            if (dragdropIndentCell) {\n                cells.push(dragdropIndentCell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    Selection.prototype.addEventListener_checkbox = function () {\n        var _this = this;\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.parent.on(events.beforeRefreshOnDataChange, this.initPerisistSelection, this);\n        this.parent.on(events.onEmpty, this.setCheckAllForEmptyGrid, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.resizeEndFn = function () {\n            _this.updateAutoFillPosition();\n            _this.drawBorders();\n        };\n        this.resizeEndFn.bind(this);\n        this.parent.addEventListener(events.resizeStop, this.resizeEndFn);\n    };\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.onEmpty, this.setCheckAllForEmptyGrid);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.beforeRefreshOnDataChange, this.initPerisistSelection);\n    };\n    Selection.prototype.setCheckAllForEmptyGrid = function () {\n        var checkAllBox = this.getCheckAllBox();\n        if (checkAllBox) {\n            this.parent.isCheckBoxSelection = true;\n            var spanEle = checkAllBox.nextElementSibling;\n            removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n        }\n    };\n    Selection.prototype.dataReady = function (e) {\n        this.isHeaderCheckboxClicked = false;\n        var isInfinitecroll = this.parent.enableInfiniteScrolling && e.requestType === 'infiniteScroll';\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection && !isInfinitecroll) {\n            this.disableUI = !this.parent.enableImmutableMode;\n            this.clearSelection();\n            this.setCheckAllState();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.selectRowIndex = function (index) {\n        this.parent.isSelectedRowIndexUpdating = true;\n        this.parent.selectedRowIndex = index;\n    };\n    Selection.prototype.disableInteracted = function () {\n        this.isInteracted = false;\n    };\n    Selection.prototype.activeTarget = function () {\n        this.actualTarget = this.isInteracted ? this.actualTarget : null;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](grid/#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    Search.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'searching') {\n            this.parent.setProperties({ searchSettings: { key: '' } }, true);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].visible = true;\n        }\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].visible = false;\n        }\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.columnModel, function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns, changedStateColumns) {\n        var _this = this;\n        if (changedStateColumns === void 0) { changedStateColumns = []; }\n        changedStateColumns = (changedStateColumns.length > 0) ? changedStateColumns :\n            isBlazor() ? (JSON.parse(JSON.stringify(columns))) : columns;\n        var args = {\n            requestType: 'columnstate',\n            cancel: false,\n            columns: changedStateColumns\n        };\n        var cancel = 'cancel';\n        this.parent.trigger(events.actionBegin, args, function (showHideArgs) {\n            var currentViewCols = _this.parent.getColumns();\n            columns = isNullOrUndefined(columns) ? currentViewCols : columns;\n            if (showHideArgs[cancel]) {\n                _this.parent.notify(events.resetColumns, { showHideArgs: showHideArgs });\n                if (columns.length > 0) {\n                    columns[0].visible = true;\n                }\n                return;\n            }\n            if (_this.parent.allowSelection && _this.parent.getSelectedRecords().length) {\n                _this.parent.clearSelection();\n            }\n            if (_this.parent.enableColumnVirtualization) {\n                var colsInCurrentView = columns.filter(function (col1) { return (currentViewCols.some(function (col2) { return col1.field === col2.field; })); });\n                if (colsInCurrentView.length) {\n                    _this.parent.notify(events.columnVisibilityChanged, columns);\n                }\n            }\n            else {\n                _this.parent.notify(events.columnVisibilityChanged, columns);\n            }\n            var params = {\n                requestType: 'columnstate',\n                columns: changedStateColumns\n            };\n            _this.parent.trigger(events.actionComplete, params);\n            if (_this.parent.columnQueryMode !== 'All') {\n                _this.parent.refresh();\n            }\n        });\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed, textWrapRefresh, virtualScrollEdit, infiniteScrollHandler, closeFilterDialog } from '../base/constant';\nimport { lazyLoadScrollHandler } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function (uiupdate) {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (uiupdate) {\n            this.widthService.setWidthToColumns();\n        }\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().querySelector('.e-content');\n        if (!this.parent.enableVirtualization && this.parent.frozenRows && this.parent.height !== 'auto') {\n            var tbody = this.parent.getHeaderContent().querySelector('tbody');\n            mHdrHeight = tbody ? tbody.offsetHeight : 0;\n            content.style.height = formatUnit(this.parent.height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(this.parent.height);\n        }\n        this.ensureOverflow(content);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.querySelector('.e-headercontent').style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        var hDiv = this.parent.getHeaderContent().querySelector('.e-headercontent');\n        hDiv.style[cssProps.border] = '';\n        hDiv.parentElement.style[cssProps.padding] = '';\n        var footerDiv = this.parent.getFooterContent();\n        if (footerDiv && footerDiv.classList.contains('e-footerpadding')) {\n            footerDiv.classList.remove('e-footerpadding');\n        }\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](grid/#height/) must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(textWrapRefresh, this.wireEvents, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(textWrapRefresh, this.wireEvents);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.frozenColumns) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n        else {\n            this.parent.getHeaderContent().querySelector('.e-headercontent').scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                _this.parent.notify(infiniteScrollHandler, e);\n            }\n            if (_this.parent.groupSettings.columns.length && _this.parent.groupSettings.enableLazyLoading) {\n                var isDown = _this.previousValues.top < _this.parent.getContent().firstElementChild.scrollTop;\n                _this.parent.notify(lazyLoadScrollHandler, { scrollDown: isDown });\n            }\n            _this.parent.notify(virtualScrollEdit, {});\n            var target = e.target;\n            var left = target.scrollLeft;\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            _this.parent.notify(closeFilterDialog, e);\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var top = target.scrollTop;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onWheelScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var cont;\n            var mHdr;\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.getHeaderContent().contains(e.target)) {\n                mHdr = _this.parent.getFrozenColumns() ?\n                    _this.parent.getHeaderContent().querySelector('.e-movableheader') :\n                    _this.parent.getHeaderContent().querySelector('.e-headercontent');\n                if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                    return;\n                }\n                e.preventDefault();\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.previousValues.left = left;\n            }\n            else {\n                cont = _this.parent.getContent().querySelector('.e-frozencontent');\n                if (_this.previousValues.top === top && (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)\n                    || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n                    return;\n                }\n                e.preventDefault();\n                cont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.previousValues.top = top;\n            }\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.getFrozenColumns();\n            this.content = this.parent.getContent().querySelector('.e-content');\n            this.header = this.parent.getHeaderContent().querySelector('.e-headercontent');\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (frzCols) {\n                EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n                EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n                EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n                EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n                EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            if (!_this.parent.enableVirtualization) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.getFrozenColumns()) {\n                        addClass(_this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if ((_this.parent.frozenRows > 0 || _this.parent.frozenColumns > 0) && _this.header.querySelector('.e-movableheader')) {\n                    _this.header.querySelector('.e-movableheader').scrollLeft = _this.previousValues.left;\n                }\n                else {\n                    _this.header.scrollLeft = _this.previousValues.left;\n                }\n                _this.content.scrollLeft = _this.previousValues.left;\n                _this.content.scrollTop = _this.previousValues.top;\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.frozenColumns && _this.header.querySelector('.e-movableheader')) {\n                _this.header.querySelector('.e-movableheader').scrollLeft =\n                    _this.content.querySelector('.e-movablecontent').scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        if (this.parent.getFrozenColumns()) {\n            content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n            if (content.querySelector('.e-movablecontent').style.overflowY === 'scroll') {\n                this.setPadding();\n            }\n        }\n        else {\n            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        var width = 'width';\n        this.setWidth(!isNullOrUndefined(e.properties[width]));\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        var cont = this.parent.getContent().querySelector('.e-content');\n        removeClass([this.parent.getHeaderContent().querySelector('.e-headercontent')], 'e-headercontent');\n        removeClass([cont], 'e-content');\n        //Remove height\n        cont.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(cont, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, remove, EventHandler, isUndefined, closest, classList, isBlazor } from '@syncfusion/ej2-base';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        EventHandler.add(this.parent.element, 'keydown', this.pasteHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.click, this.clickHandler);\n        EventHandler.remove(this.parent.element, 'keydown', this.pasteHandler);\n    };\n    Clipboard.prototype.clickHandler = function (e) {\n        var target = e.target;\n        target = parentsUntil(target, 'e-rowcell');\n    };\n    Clipboard.prototype.pasteHandler = function (e) {\n        var _this = this;\n        var grid = this.parent;\n        var isMacLike = /(Mac)/i.test(navigator.platform);\n        if (e.keyCode === 86 && (e.ctrlKey || (isMacLike && e.metaKey)) && !grid.isEdit) {\n            var target = closest(document.activeElement, '.e-rowcell');\n            if (!target || !grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n                grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n                return;\n            }\n            this.activeElement = document.activeElement;\n            this.clipBoardTextArea.value = '';\n            var x_1 = window.scrollX;\n            var y_1 = window.scrollY;\n            this.clipBoardTextArea.focus();\n            setTimeout(function () {\n                _this.activeElement.focus();\n                window.scrollTo(x_1, y_1);\n                _this.paste(_this.clipBoardTextArea.value, _this.parent.getSelectedRowCellIndexes()[0].rowIndex, _this.parent.getSelectedRowCellIndexes()[0].cellIndexes[0]);\n            }, 10);\n        }\n    };\n    /**\n     * Paste data from clipboard to selected cells.\n     * @param {boolean} data - Specifies the date for paste.\n     * @param {boolean} rowIndex - Specifies the row index.\n     * @param {boolean} colIndex - Specifies the column index.\n     */\n    Clipboard.prototype.paste = function (data, rowIndex, colIndex) {\n        var grid = this.parent;\n        var cIdx = colIndex;\n        var rIdx = rowIndex;\n        var col;\n        var value;\n        var isAvail;\n        if (!grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n            grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n            return;\n        }\n        var rows = data.split('\\n');\n        var cols;\n        var dataRows = grid.getDataRows();\n        var mRows;\n        var isFrozen = this.parent.getFrozenColumns();\n        if (isFrozen) {\n            mRows = grid.getMovableDataRows();\n        }\n        for (var r = 0; r < rows.length; r++) {\n            cols = rows[r].split('\\t');\n            cIdx = colIndex;\n            if ((r === rows.length - 1 && rows[r] === '') || isUndefined(grid.getRowByIndex(rIdx))) {\n                cIdx++;\n                break;\n            }\n            for (var c = 0; c < cols.length; c++) {\n                isAvail = grid.getCellFromIndex(rIdx, cIdx);\n                if (isFrozen) {\n                    var fTr = dataRows[rIdx];\n                    var mTr = mRows[rIdx];\n                    isAvail = !fTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') ?\n                        mTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') : true;\n                }\n                if (!isAvail) {\n                    cIdx++;\n                    break;\n                }\n                col = grid.getColumnByIndex(cIdx);\n                value = col.getParser() ? col.getParser()(cols[c]) : cols[c];\n                if (col.allowEditing && !col.isPrimaryKey && !col.template) {\n                    var args = {\n                        column: col,\n                        data: value,\n                        rowIndex: rIdx\n                    };\n                    this.parent.trigger(events.beforePaste, args);\n                    rIdx = args.rowIndex;\n                    if (!args.cancel) {\n                        if (grid.editModule) {\n                            if (col.type === 'number') {\n                                this.parent.editModule.updateCell(rIdx, col.field, parseFloat(args.data));\n                            }\n                            else {\n                                grid.editModule.updateCell(rIdx, col.field, args.data);\n                            }\n                        }\n                    }\n                }\n                cIdx++;\n            }\n            rIdx++;\n        }\n        grid.selectionModule.selectCellsByRange({ rowIndex: rowIndex, cellIndex: colIndex }, { rowIndex: rIdx - 1, cellIndex: cIdx - 1 });\n        var cell = this.parent.getCellFromIndex(rIdx - 1, cIdx - 1);\n        if (cell) {\n            classList(cell, ['e-focus', 'e-focused'], []);\n        }\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.getFrozenColumns();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell')));\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            querySelectorAll('.e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]].querySelectorAll('.e-cellselectionbackground')));\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    if (isBlazor()) {\n                        if ((!cells[j].classList.contains('e-gridchkbox')) &&\n                            Object.keys(cells[j].querySelectorAll('.e-check')).length) {\n                            this.copyContent += true;\n                        }\n                        else if ((!cells[j].classList.contains('e-gridchkbox')) &&\n                            Object.keys(cells[j].querySelectorAll('.e-uncheck')).length) {\n                            this.copyContent += false;\n                        }\n                        else {\n                            this.copyContent += cells[j].innerText;\n                        }\n                    }\n                    else {\n                        this.copyContent += cells[j].innerText;\n                    }\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var isBox = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort(function (a, b) { return a - b; });\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","import { Observer, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Row } from '../models/row';\nimport { AriaService } from '../services/aria-service';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport { DataUtil } from '@syncfusion/ej2-data';\nexport var gridObserver = new Observer();\n/**\n * BlazorAction is used for performing Blazor related Grid Actions.\n * @hidden\n */\nvar BlazorAction = /** @class */ (function () {\n    function BlazorAction(parent) {\n        this.aria = new AriaService();\n        this.actionArgs = {};\n        this.virtualHeight = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    BlazorAction.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('detailclick', this.onDetailRowClick, this);\n        this.parent.on('add-delete-success', this.addDeleteSuccess, this);\n        this.parent.on('editsuccess', this.editSuccess, this);\n        this.parent.on('setvisibility', this.setColumnVisibility, this);\n        this.parent.on('offset', this.setServerOffSet, this);\n        this.parent.on('updateaction', this.modelChanged, this);\n        this.parent.on(events.modelChanged, this.modelChanged, this);\n        this.parent.on('group-expand-collapse', this.onGroupClick, this);\n        this.parent.on('setcolumnstyles', this.setColVTableWidthAndTranslate, this);\n        this.parent.on('refresh-virtual-indices', this.invokeServerDataBind, this);\n        this.parent.on('contentcolgroup', this.contentColGroup, this);\n        this.parent.on(events.dataSourceModified, this.dataSourceModified, this);\n    };\n    BlazorAction.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('detailclick', this.onDetailRowClick);\n        this.parent.off('add-delete-success', this.addDeleteSuccess);\n        this.parent.off('editsuccess', this.editSuccess);\n        this.parent.off('setvisibility', this.setColumnVisibility);\n        this.parent.off('offset', this.setServerOffSet);\n        this.parent.off('updateaction', this.modelChanged);\n        this.parent.off(events.modelChanged, this.modelChanged);\n        this.parent.off('group-expand-collapse', this.onGroupClick);\n        this.parent.off('setcolumnstyles', this.setColVTableWidthAndTranslate);\n        this.parent.off('refresh-virtual-indices', this.invokeServerDataBind);\n        this.parent.off('contentcolgroup', this.contentColGroup);\n        this.parent.off(events.dataSourceModified, this.dataSourceModified);\n    };\n    BlazorAction.prototype.getModuleName = function () { return 'blazor'; };\n    ;\n    BlazorAction.prototype.modelChanged = function (args) {\n        this.actionArgs = args;\n        this.parent.currentAction = args;\n    };\n    BlazorAction.prototype.addDeleteSuccess = function (args) {\n        var _this = this;\n        var editArgs;\n        var action = 'action';\n        var data = 'data';\n        var index = 'index';\n        editArgs = {\n            requestType: args.requestType,\n            data: args[data],\n            action: args[action]\n        };\n        if (!isNullOrUndefined(args[index])) {\n            editArgs[index] = args[index];\n        }\n        args.promise.then(function (e) { return _this.editSuccess(editArgs); }).catch(function (e) {\n            if (isBlazor() && _this.parent.isServerRendered) {\n                var error = 'error';\n                var message = 'message';\n                if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                    e[error] = e[error][message];\n                }\n            }\n            _this.parent.trigger(events.actionFailure, ((isBlazor() && e instanceof Array) ? e[0] : e));\n            _this.parent.hideSpinner();\n            _this.parent.log('actionfailure', { error: e });\n        });\n    };\n    BlazorAction.prototype.editSuccess = function (args) {\n        this.parent.renderModule.resetTemplates();\n        this.invokeServerDataBind(args);\n    };\n    BlazorAction.prototype.invokeServerDataBind = function (args) {\n        this.actionArgs = args;\n        this.parent.currentAction = args;\n        this.parent.allowServerDataBinding = true;\n        this.parent.serverDataBind();\n        this.parent.allowServerDataBinding = false;\n    };\n    BlazorAction.prototype.onDetailRowClick = function (target) {\n        var gObj = this.parent;\n        var adaptor = 'interopAdaptor';\n        var rIndex = 'rowIndex';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var args = {\n            uid: uid, classList: target.classList[0], index: tr.getAttribute('aria-rowindex'),\n            rowIndex: gObj.getRowsObject().indexOf(rowObj), colSpan: this.parent.getVisibleColumns().length\n        };\n        gObj[adaptor][invokeMethodAsync]('OnDetailClick', args);\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var rows = gObj.getRowsObject();\n            var rowData = rowObj.data;\n            var gridRowId = this.parent.getRowUid('grid-row');\n            var len = gObj.groupSettings.columns.length;\n            var gridRow = new Row({\n                isDataRow: true,\n                isExpand: true,\n                uid: gridRowId,\n                isDetailRow: true,\n                cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n            });\n            for (var i = 0; i < len; i++) {\n                gridRow.cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            rows.splice(args[rIndex] + 1, 0, gridRow);\n            gObj.trigger(events.detailDataBound, { data: rowData });\n            gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            rowObj.isExpand = true;\n            this.aria.setExpand(target, true);\n        }\n        else {\n            gObj.getRowsObject().splice(args[rIndex] + 1, 1);\n            gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    BlazorAction.prototype.setColumnVisibility = function (columns) {\n        var visible = {};\n        var adaptor = 'interopAdaptor';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        for (var i = 0; i < columns.length; i++) {\n            visible[columns[i].uid] = columns[i].visible;\n        }\n        this.parent[adaptor][invokeMethodAsync]('setColumnVisibility', { visible: visible });\n    };\n    BlazorAction.prototype.dataSuccess = function (args) {\n        if (this.parent.enableVirtualization && Object.keys(this.actionArgs).length === 0) {\n            this.actionArgs.requestType = 'virtualscroll';\n        }\n        var startIndex = 'startIndex';\n        var endIndex = 'endIndex';\n        this.actionArgs[startIndex] = args[startIndex];\n        this.actionArgs[endIndex] = args[endIndex];\n        if (this.parent.enableVirtualization) {\n            this.virtualContentModule = this.parent.contentModule;\n            if (this.virtualContentModule.activeKey === 'downArrow' || this.virtualContentModule.activeKey === 'upArrow') {\n                var row = this.parent.getRowByIndex(this.virtualContentModule.blzRowIndex);\n                if (row) {\n                    this.parent.selectRow(parseInt(row.getAttribute('aria-rowindex'), 10));\n                    // tslint:disable-next-line:no-any\n                    row.cells[0].focus({ preventScroll: true });\n                }\n            }\n            this.virtualContentModule.blazorDataLoad = false;\n        }\n        if (args.foreignColumnsData) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (args.foreignColumnsData[columns[i].field]) {\n                    columns[i].columnData = args.foreignColumnsData[columns[i].field];\n                }\n            }\n        }\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            var agg = [];\n            var aggRows = this.parent.aggregates;\n            for (var i = 0; i < aggRows.length; i++) {\n                var aggRow = aggRows[i];\n                for (var j = 0; j < aggRow.columns.length; j++) {\n                    var aggr = {};\n                    var type = aggRow.columns[j].type.toString();\n                    aggr = { type: type.toLowerCase(), field: aggRow.columns[j].field };\n                    agg.push(aggr);\n                }\n            }\n            var data = void 0;\n            var aggrds = void 0;\n            var groupedCols = this.parent.groupSettings.columns;\n            for (var k = 0; k < groupedCols.length; k++) {\n                aggrds = data ? data : args.result;\n                data = DataUtil.group(aggrds, groupedCols[k], agg, null, null);\n            }\n            args.result = data ? data : args.result;\n        }\n        var rowUid = 'rowUid';\n        var offsetTime = 'offsetTime';\n        var off = 'offset';\n        this.parent[rowUid] = args[rowUid];\n        args[off] = Math.sign(args[off]) === 1 ? -Math.abs(args[off]) : Math.abs(args[off]);\n        this.parent[offsetTime] = args[off];\n        if (this.parent[offsetTime] !== new Date().getTimezoneOffset() / 60) {\n            if (this.parent.editSettings.mode !== 'Batch') {\n                var action = 'action';\n                var rowIndex = 'rowIndex';\n                var index = 'index';\n                if (this.actionArgs[action] === 'edit') {\n                    this.setClientOffSet(args, this.actionArgs[rowIndex]);\n                }\n                else if (this.actionArgs[action] === 'add') {\n                    this.setClientOffSet(args, this.actionArgs[index]);\n                }\n            }\n            else if (this.parent.editSettings.mode === 'Batch') {\n                var changes = 'changes';\n                var changedRecords = 'changedRecords';\n                var addedRecords = 'addedRecords';\n                var keyField = this.parent.getPrimaryKeyFieldNames()[0];\n                var batchChanges = this.actionArgs[changes] || { changedRecords: [], addedRecords: [] };\n                for (var i = 0; i < batchChanges[changedRecords].length; i++) {\n                    for (var j = 0; j < args.result.length; j++) {\n                        if (batchChanges[changedRecords][i][keyField] === args.result[j][keyField]) {\n                            this.setClientOffSet(args, j);\n                        }\n                    }\n                }\n                for (var i = 0; i < batchChanges[addedRecords].length; i++) {\n                    for (var j = 0; j < args.result.length; j++) {\n                        if (batchChanges[addedRecords][i][keyField] === args.result[j][keyField]) {\n                            this.setClientOffSet(args, j);\n                        }\n                    }\n                }\n            }\n        }\n        this.parent.renderModule.dataManagerSuccess(args, this.actionArgs);\n        this.parent.getMediaColumns();\n        if (this.parent.enableVirtualization) {\n            this.virtualContentModule = this.parent.contentModule;\n            this.setColVTableWidthAndTranslate();\n            if (this.parent.groupSettings.columns.length) {\n                this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n            }\n        }\n        this.actionArgs = this.parent.currentAction = {};\n    };\n    BlazorAction.prototype.removeDisplayNone = function () {\n        var renderedContentRows = this.parent.getContentTable().querySelectorAll('tr');\n        for (var i = 0; i < renderedContentRows.length; i++) {\n            var renderedContentCells = renderedContentRows[i].querySelectorAll('td');\n            for (var j = 0; j < renderedContentCells.length; j++) {\n                renderedContentCells[j].style.display = '';\n            }\n        }\n    };\n    BlazorAction.prototype.setVirtualTrackHeight = function (args) {\n        this.virtualHeight = args.VisibleGroupedRowsCount * this.parent.getRowHeight();\n        this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n    };\n    BlazorAction.prototype.setColVTableWidthAndTranslate = function (args) {\n        if (this.parent.enableColumnVirtualization && this.virtualContentModule.prevInfo &&\n            (JSON.stringify(this.virtualContentModule.currentInfo.columnIndexes) !==\n                JSON.stringify(this.virtualContentModule.prevInfo.columnIndexes)) || ((args && args.refresh))) {\n            var translateX = this.virtualContentModule.getColumnOffset(this.virtualContentModule.startColIndex - 1);\n            var width = this.virtualContentModule.getColumnOffset(this.virtualContentModule.endColIndex - 1) - translateX + '';\n            this.virtualContentModule.header.virtualEle.setWrapperWidth(width);\n            this.virtualContentModule.virtualEle.setWrapperWidth(width);\n            this.virtualContentModule.header.virtualEle.adjustTable(translateX, 0);\n            this.parent.getContentTable().parentElement.style.width = width + 'px';\n        }\n        if (this.dataSourceChanged) {\n            this.virtualContentModule.getPanel().firstElementChild.scrollTop = 0;\n            this.virtualContentModule.getPanel().firstElementChild.scrollLeft = 0;\n            if (this.virtualContentModule.header.virtualEle) {\n                this.virtualContentModule.header.virtualEle.adjustTable(0, 0);\n            }\n            this.parent.getContentTable().parentElement.style.transform = 'translate(0px,0px)';\n            this.virtualContentModule.refreshOffsets();\n            this.virtualContentModule.refreshVirtualElement();\n            this.dataSourceChanged = false;\n        }\n    };\n    BlazorAction.prototype.dataSourceModified = function () {\n        this.dataSourceChanged = true;\n    };\n    BlazorAction.prototype.setClientOffSet = function (args, index) {\n        var timeZone = DataUtil.serverTimezoneOffset;\n        DataUtil.serverTimezoneOffset = 0;\n        args.result[index] = DataUtil.parse.parseJson(JSON.stringify(args.result[index]));\n        DataUtil.serverTimezoneOffset = timeZone;\n    };\n    BlazorAction.prototype.setServerOffSet = function (args) {\n        var serverTimeZone = DataUtil.serverTimezoneOffset;\n        var offsetTime = 'offsetTime';\n        var data = 'data';\n        var timeZone = new Date().getTimezoneOffset() / 60 * 2 + this.parent[offsetTime];\n        DataUtil.serverTimezoneOffset = timeZone;\n        args[data] = DataUtil.parse.parseJson(JSON.stringify(args[data]));\n        DataUtil.serverTimezoneOffset = serverTimeZone;\n    };\n    BlazorAction.prototype.onGroupClick = function (args) {\n        var _this = this;\n        var adaptor = 'interopAdaptor';\n        var content = 'contentModule';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        var exactTopIndex = 'exactTopIndex';\n        args[exactTopIndex] = Math.round((this.parent.element.querySelector('.e-content').scrollTop) / this.parent.getRowHeight());\n        var rowHeight = 'rowHeight';\n        args[rowHeight] = this.parent.getRowHeight();\n        this.parent[adaptor][invokeMethodAsync]('OnGroupExpandClick', args).then(function () {\n            _this.parent[content].rowElements = [].slice.call(_this.parent.getContentTable().querySelectorAll('tr.e-row[data-uid]'));\n        });\n    };\n    BlazorAction.prototype.setPersistData = function (args) {\n        var gObj = this.parent;\n        gObj.mergePersistGridData(args);\n        var bulkChanges = 'bulkChanges';\n        if (gObj[bulkChanges].columns) {\n            delete gObj[bulkChanges].columns;\n        }\n        gObj.headerModule.refreshUI();\n        gObj.notify('persist-data-changed', {});\n        gObj.notify(events.columnVisibilityChanged, gObj.getColumns());\n    };\n    ;\n    BlazorAction.prototype.resetPersistData = function (args) {\n        var gObj = this.parent;\n        var bulkChanges = 'bulkChanges';\n        var parseArgs = JSON.parse(args);\n        var persistArgs = { filterSettings: parseArgs.filterSettings,\n            groupSettings: parseArgs.groupSettings, pageSettings: parseArgs.pageSettings, sortSettings: parseArgs.sortSettings,\n            searchSettings: parseArgs.searchSettings, columns: parseArgs.columns };\n        if (!persistArgs.sortSettings.columns) {\n            persistArgs.sortSettings.columns = [];\n        }\n        if (!persistArgs.groupSettings.columns) {\n            persistArgs.groupSettings.columns = [];\n        }\n        if (!persistArgs.pageSettings.currentPage) {\n            gObj.pageSettings.currentPage = 1;\n        }\n        for (var i = 0; i < gObj.columns.length; i++) {\n            if (gObj.groupSettings.columns.indexOf(gObj.columns[i].field) > -1) {\n                gObj.columns[i].visible = true;\n            }\n        }\n        gObj.mergePersistGridData(persistArgs);\n        gObj.notify('persist-data-changed', {});\n        if (gObj[bulkChanges].columns) {\n            delete gObj[bulkChanges].columns;\n        }\n        gObj.headerModule.refreshUI();\n        for (var i = 0; i < gObj.columns.length; i++) {\n            gObj.columns[i].editType = gObj.columns[i].editType.toLowerCase();\n        }\n        gObj.setProperties({ filterSettings: { columns: [] } }, true);\n    };\n    BlazorAction.prototype.contentColGroup = function () {\n        var gObj = this.parent;\n        var contentTable = gObj.getContent().querySelector('.e-table');\n        contentTable.insertBefore(contentTable.querySelector(\"#content-\" + gObj.element.id + \"colGroup\"), contentTable.querySelector('tbody'));\n        if (gObj.frozenRows) {\n            var headerTable = gObj.getHeaderContent().querySelector('.e-table');\n            headerTable.insertBefore(headerTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), headerTable.querySelector('tbody'));\n        }\n        if (gObj.getFrozenColumns() !== 0) {\n            var movableContentTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('.e-table');\n            movableContentTable.insertBefore(movableContentTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableContentTable.querySelector('tbody'));\n            if (gObj.frozenRows) {\n                var movableHeaderTable = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('.e-table');\n                movableHeaderTable.insertBefore(movableHeaderTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableHeaderTable.querySelector('tbody'));\n            }\n        }\n    };\n    BlazorAction.prototype.dataFailure = function (args) {\n        this.parent.renderModule.dataManagerFailure(args, this.actionArgs);\n        this.actionArgs = this.parent.currentAction = {};\n    };\n    BlazorAction.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return BlazorAction;\n}());\nexport { BlazorAction };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue, getValue, isBlazor, blazorTemplates } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, append, remove, updateBlazorTemplate, classList, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, isGroupAdaptive, refreshForeignData } from './util';\nimport { getRowHeight, setColumnIndex, Global, ispercentageWidth, renderMovable } from './util';\nimport { setRowElements, resetRowIndex, compareChanges } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { ColumnChooserSettings } from '../models/column-chooser-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\nimport { gridObserver } from '../actions/blazor-action';\nimport { RowModelGenerator } from '../services/row-model-generator';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    __decorate([\n        Property(false)\n    ], SortDescriptor.prototype, \"isFromGroup\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"uid\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"isForeignKey\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the infinite scroll behavior of Grid.\n */\nvar InfiniteScrollSettings = /** @class */ (function (_super) {\n    __extends(InfiniteScrollSettings, _super);\n    function InfiniteScrollSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], InfiniteScrollSettings.prototype, \"enableCache\", void 0);\n    __decorate([\n        Property(3)\n    ], InfiniteScrollSettings.prototype, \"maxBlocks\", void 0);\n    __decorate([\n        Property(3)\n    ], InfiniteScrollSettings.prototype, \"initialBlocks\", void 0);\n    return InfiniteScrollSettings;\n}(ChildProperty));\nexport { InfiniteScrollSettings };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"enableCaseSensitivity\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"showFilterBarOperator\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    __decorate([\n        Property('Default')\n    ], SelectionSettings.prototype, \"checkboxMode\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"enableSimpleMultiRowSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"enableToggle\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the resize behavior of the Grid.\n */\nvar ResizeSettings = /** @class */ (function (_super) {\n    __extends(ResizeSettings, _super);\n    function ResizeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Normal')\n    ], ResizeSettings.prototype, \"mode\", void 0);\n    return ResizeSettings;\n}(ChildProperty));\nexport { ResizeSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"enableLazyLoading\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"headerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('Top')\n    ], EditSettings.prototype, \"newRowPosition\", void 0);\n    __decorate([\n        Property({})\n    ], EditSettings.prototype, \"dialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowNextRowEdit\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.keyA = false;\n        _this.media = {};\n        _this.componentRefresh = Component.prototype.refresh;\n        /** @hidden */\n        _this.isVirtualAdaptive = false;\n        /** @hidden */\n        _this.vRows = [];\n        /** @hidden */\n        _this.vcRows = [];\n        /** @hidden */\n        _this.vGroupOffsets = {};\n        /** @hidden */\n        _this.rowUid = 0;\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.lockcolPositionCount = 0;\n        /** @hidden */\n        _this.prevPageMoving = false;\n        /** @hidden */\n        _this.pageTemplateChange = false;\n        /** @hidden */\n        _this.isAutoGen = false;\n        _this.mediaBindInstance = {};\n        /** @hidden */\n        _this.commandDelIndex = undefined;\n        /** @hidden */\n        _this.asyncTimeOut = 50;\n        // enable/disable logger for MVC & Core\n        _this.enableLogger = true;\n        _this.needsID = true;\n        Grid_1.Inject(Selection);\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    Grid_1 = Grid;\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     */\n    Grid.prototype.getPersistData = function () {\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex', 'scrollPosition'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: [], scrollPosition: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands', 'dataSource', 'headerText'];\n        for (var i = 0; i < keyEntity.length; i++) {\n            var currentObject = this[keyEntity[i]];\n            for (var _i = 0, _a = ignoreOnPersist[keyEntity[i]]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        }\n        this.pageSettings.template = undefined;\n        /* tslint:disable-next-line:no-any */\n        if (this.isAngular) {\n            /* tslint:disable:no-string-literal */\n            delete this.groupSettings['properties']['captionTemplate'];\n        }\n        this.pageTemplateChange = !isNullOrUndefined(this.pagerTemplate);\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.enableInfiniteScrolling) {\n            modules.push({\n                member: 'infiniteScroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.groupSettings.enableLazyLoading) {\n            modules.push({\n                member: 'lazyLoadGroup',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n        if (this.enableLogger) {\n            modules.push({ member: 'logger', args: [this] });\n        }\n        if (isBlazor()) {\n            modules.push({ member: 'blazor', args: [this] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        /* tslint:disable */\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.allowServerDataBinding = false;\n        this.ignoreCollectionWatch = true;\n        if (isBlazor() && this.enableVirtualization && this.allowGrouping) {\n            var isExpanded = 'isExpanded';\n            this[isExpanded] = false;\n        }\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.componentRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            UnGroupButton: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No Matches Found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Autofit all columns',\n            autoFit: 'Autofit this column',\n            AutoFitAll: 'Autofit all columns',\n            AutoFit: 'Autofit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No Matches Found',\n            ClearFilter: 'Clear Filter',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            DateTimeFilter: 'DateTime Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:',\n            FilterMenuDialogARIA: 'Filter menu dialog',\n            ExcelFilterDialogARIA: 'Excel filter dialog',\n            DialogEditARIA: 'Edit dialog',\n            ColumnChooserDialogARIA: 'Column chooser dialog',\n            ColumnMenuDialogARIA: 'Column menu dialog',\n            CustomFilterDialogARIA: 'Customer filter dialog',\n            SortAtoZ: 'Sort A to Z',\n            SortZtoA: 'Sort Z to A',\n            SortByOldest: 'Sort by Oldest',\n            SortByNewest: 'Sort by Newest',\n            SortSmallestToLargest: 'Sort Smallest to Largest',\n            SortLargestToSmallest: 'Sort Largest to Smallest'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H',\n            ctrlSpace: 'ctrl+space',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow'\n        };\n        /* tslint:enable */\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.log(['module_missing', 'promise_enabled', 'locale_missing', 'check_datasource_columns']);\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        if (isBlazor()) {\n            this.renderComplete();\n        }\n        createSpinner({ target: this.element }, this.createElement);\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        if (this.getDataModule().dataManager.dataSource.offline === true || this.getDataModule().dataManager.dataSource.url === undefined) {\n            this.isVirtualAdaptive = true;\n        }\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization, this);\n        if (this.enablePersistence) {\n            this.notify(events.columnsPrepared, {});\n        }\n        if (!(isBlazor() && this.isServerRendered)) {\n            this.getMediaColumns();\n            setColumnIndex(this.columns);\n        }\n        this.checkLockColumns(this.columns);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n        if (isBlazor() && this.isServerRendered) {\n            gridObserver.notify(events.componentRendered, { id: this.element.id, grid: this });\n        }\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Manually showed spinner needs to hide by `hideSpinnner`.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia) && (isNullOrUndefined(gcol[index].visible) || gcol[index].visible)) {\n                        this.pushMediaColumn(gcol[index], index);\n                    }\n                }\n            }\n        }\n    };\n    Grid.prototype.pushMediaColumn = function (col, index) {\n        this.mediaCol.push(col);\n        this.media[col.uid] = window.matchMedia(col.hideAtMedia);\n        this.mediaQueryUpdate(index, this.media[col.uid]);\n        this.mediaBindInstance[index] = this.mediaQueryUpdate.bind(this, index);\n        this.media[col.uid].addListener(this.mediaBindInstance[index]);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateMediaColumns = function (col) {\n        if (!this.enableColumnVirtualization) {\n            var index = this.getColumnIndexByUid(col.uid);\n            for (var i = 0; i < this.mediaCol.length; i++) {\n                if (col.uid === this.mediaCol[i].uid) {\n                    this.mediaCol.splice(i, 1);\n                    return;\n                }\n            }\n            this.pushMediaColumn(col, index);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        if (this.mediaCol.some(function (mediaColumn) { return mediaColumn.uid === col.uid; })) {\n            col.visible = e.matches;\n            if (this.isInitialLoad) {\n                this.invokedFromMedia = true;\n                if (col.visible) {\n                    this.showHider.show(col.headerText, 'headerText');\n                }\n                else {\n                    this.showHider.hide(col.headerText, 'headerText');\n                }\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        var footerContent = this.element.querySelector('.e-gridfooter');\n        if (this.aggregates.length && this.element.scrollHeight > this.height && footerContent) {\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        var checkboxColumn = this.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length && this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            this.isCheckBoxSelection = false;\n        }\n    };\n    Grid.prototype.removeMediaListener = function () {\n        for (var i = 0; i < this.mediaCol.length; i++) {\n            this.media[this.mediaCol[i].uid].removeListener(this.mediaBindInstance[this.mediaCol[i].index]);\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.removeMediaListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        if (!(isBlazor() && this.isServerRendered)) {\n            this.element.innerHTML = '';\n        }\n        else {\n            this.element.style.display = 'none';\n        }\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n        if (this.isAngular) {\n            this.element = null;\n        }\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    Grid.prototype.enableBoxSelection = function () {\n        if (this.enableAutoFill) {\n            this.selectionSettings.cellSelectionMode = 'BoxWithBorder';\n            this.element.classList.add('e-afenabled');\n        }\n        else {\n            this.element.classList.remove('e-afenabled');\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    // tslint:disable-next-line:max-func-body-length\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var freezeRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        this.log('module_missing');\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    if (this.pageTemplateChange) {\n                        this.pageTemplateChange = false;\n                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                        break;\n                    }\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.pageSize)\n                        && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || !isNullOrUndefined(oldProp.pageSettings) &&\n                            ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                                && !this.enableColumnVirtualization && !this.enableVirtualization\n                                && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    this.renderModule.refresh();\n                    this.headerModule.refreshUI();\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'enableAutoFill':\n                    if (this.selectionModule) {\n                        this.enableBoxSelection();\n                        this.selectionModule.updateAutoFillPosition();\n                    }\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'enableInfiniteScrolling':\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                case 'enableVirtualization':\n                case 'currencyCode':\n                case 'locale':\n                    this.log('frozen_rows_columns');\n                    freezeRefresh = true;\n                    requireGridRefresh = true;\n                    break;\n                case 'query':\n                    if (!this.getDataModule().isQueryInvokedFromData) {\n                        requireRefresh = true;\n                    }\n                    this.getDataModule().isQueryInvokedFromData = false;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, requireGridRefresh);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            if (freezeRefresh || this.frozenColumns || this.frozenRows) {\n                if (!(isBlazor() && this.isServerRendered)) {\n                    this.freezeRefresh();\n                }\n            }\n            else {\n                this.refresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n            this.maintainSelection(newProp.selectedRowIndex);\n        }\n    };\n    /* tslint:disable */\n    Grid.prototype.extendedPropertyChange = function (prop, newProp, requireGridRefresh) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar && this.toolbarModule) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems && this.contextMenuModule) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu && this.columnMenuModule) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n                    this.refreshHeader();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                var pending_1 = this.getDataModule().getState();\n                if (Object.getPrototypeOf(newProp).deepWatch) {\n                    var pKeyField = this.getPrimaryKeyFieldNames()[0];\n                    for (var i = 0, props = Object.keys(newProp.dataSource); i < props.length; i++) {\n                        this.setRowData(getValue(pKeyField, this.dataSource[props[i]]), this.dataSource[props[i]]);\n                    }\n                }\n                else if (pending_1.isPending) {\n                    var gResult = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    var names = (pending_1.group || []);\n                    for (var i = 0; i < names.length; i++) {\n                        gResult = DataUtil.group(gResult, names[i], pending_1.aggregates || []);\n                    }\n                    this.dataSource = {\n                        result: gResult, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    this.getDataModule().setState({});\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    if (!requireGridRefresh) {\n                        this.renderModule.refresh();\n                        if (this.isCheckBoxSelection) {\n                            this.notify(events.beforeRefreshOnDataChange, {});\n                        }\n                    }\n                }\n                this.scrollRefresh();\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n            case 'selectedRowIndex':\n                if (!this.isSelectedRowIndexUpdating) {\n                    this.selectRow(newProp.selectedRowIndex);\n                }\n                this.isSelectedRowIndexUpdating = false;\n                break;\n            case 'resizeSettings':\n                this.widthService.setWidthToTable();\n                break;\n        }\n    };\n    Grid.prototype.maintainSelection = function (index) {\n        var _this = this;\n        if (index !== -1) {\n            var fn_1 = function () {\n                _this.selectRow(index);\n                _this.off(events.contentReady, fn_1);\n            };\n            this.on(events.contentReady, fn_1, this);\n        }\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        var filterSettings = 'filterSettings';\n        if (prop[filterSettings] && this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerCells = [].slice.call(this.getHeaderContent().querySelectorAll('.e-headercell:not(.e-stackedheadercell)'));\n        var stdHdrCell = [].slice.call(this.getHeaderContent().querySelectorAll('.e-stackedheadercell'));\n        var cols = this.getColumns();\n        if (this.enableColumnVirtualization && this.getFrozenColumns()) {\n            var cells = this.contentModule.getHeaderCells();\n            headerCells = cells.length ? cells : headerCells;\n        }\n        for (var i = 0; i < headerCells.length; i++) {\n            var cell = headerCells[i];\n            if (this.allowGrouping || this.allowReordering || this.allowSorting) {\n                if (!cols[i].allowReordering || !cols[i].allowSorting || !cols[i].allowGrouping) {\n                    cell.classList.add('e-defaultcursor');\n                }\n                else {\n                    cell.classList.add('e-mousepointer');\n                }\n            }\n        }\n        for (var count = 0; count < stdHdrCell.length; count++) {\n            if (this.allowReordering) {\n                stdHdrCell[count].classList.add('e-mousepointer');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateFrozenColumns();\n        this.updateLockableColumns();\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        var cols = this.columnModel;\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].isFrozen) {\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n        }\n    };\n    Grid.prototype.updateLockableColumns = function () {\n        var cols = this.columnModel;\n        var frozenCount = 0;\n        var movableCount = 0;\n        var frozenColumns = this.getFrozenColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].lockColumn) {\n                if (i < frozenColumns) {\n                    cols.splice(frozenCount, 0, cols.splice(i, 1)[0]);\n                    frozenCount++;\n                }\n                else {\n                    cols.splice(frozenColumns + movableCount, 0, cols.splice(i, 1)[0]);\n                    movableCount++;\n                }\n            }\n        }\n    };\n    Grid.prototype.checkLockColumns = function (cols) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                this.checkLockColumns(cols[i].columns);\n            }\n            else if (cols[i].lockColumn) {\n                this.lockcolPositionCount++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     * @return {Column[]}\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        if (this.contentModule && this.enableColumnVirtualization && this.getFrozenColumns() && inview.length\n            && inview[0] > 0) {\n            var frozenCols = this.contentModule.ensureFrozenCols(columns);\n            columns = frozenCols;\n        }\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getQuery = function () {\n        return this.query;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     * @return {Column[]}\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets a frozen tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getFrozenRowByIndex = function (index) {\n        return this.getFrozenDataRows()[index];\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand')))) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!cell) {\n                var row = closest(ele, '.e-row');\n                if (!isNullOrUndefined(row)) {\n                    var rowObj = this.getRowObjectFromUID(row.getAttribute('data-uid'));\n                    var rowIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n                    args = { row: row, rowData: rowObj.data, rowIndex: rowIndex };\n                }\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var frzCols = this.getFrozenColumns();\n                var isMovable = frzCols ? cellIndex >= frzCols : false;\n                var rows = (isMovable ?\n                    this.contentModule.getMovableRows() : this.contentModule.getRows());\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = {};\n                var column = void 0;\n                if (Object.keys(rowsObject).length) {\n                    rowData = rowsObject[0].data;\n                    column = rowsObject[0].cells[isMovable ? cellIndex - frzCols : cellIndex + this.getIndentCount()].column;\n                }\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        if (isNullOrUndefined(this.getContentTable().querySelector('tbody'))) {\n            return [];\n        }\n        var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderTable().querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                if (this.isCollapseStateEnabled()) {\n                    dRows[parseInt(rows[i].getAttribute(\"aria-rowindex\"))] = rows[i];\n                }\n                else {\n                    dRows.push(rows[i]);\n                }\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        var rows = [].slice.call(this.getContent().querySelector('.e-movablecontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * Gets all the Grid's frozen table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getFrozenDataRows = function () {\n        var rows = [].slice.call(this.getContent().querySelector('.e-frozencontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var fieldIdx;\n        var col;\n        var tr;\n        var mTr;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var selectedRow = {};\n        var movableSelectedRow = {};\n        var rowObjects = this.contentModule.getRows();\n        var movableRowObjects = this.contentModule.getMovableRows();\n        fieldIdx = this.getColumnIndexByField(field);\n        if (this.groupSettings.columns.length) {\n            fieldIdx = fieldIdx + this.groupSettings.columns.length;\n        }\n        if (this.childGrid || this.detailTemplate) {\n            fieldIdx++;\n        }\n        if (this.isRowDragable()) {\n            fieldIdx++;\n        }\n        col = this.getColumnByField(field);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        movableSelectedRow = movableRowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        tr = !isNullOrUndefined(selectedRow) ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        mTr = !isNullOrUndefined(movableSelectedRow) ? this.element.querySelector('[data-uid=' + movableSelectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var td = !isNullOrUndefined(tr[cells][fieldIdx]) ?\n                tr[cells][fieldIdx] : mTr[cells][fieldIdx - this.frozenColumns];\n            if (!isNullOrUndefined(td)) {\n                var sRow = selectedRow[cells][fieldIdx];\n                var mRow = void 0;\n                if (this.frozenColumns) {\n                    mRow = movableSelectedRow[cells][fieldIdx - this.frozenColumns];\n                }\n                cell.refreshTD(td, !isNullOrUndefined(sRow) ? sRow : mRow, selectedRow[rowData], { index: selectedRow[rowIdx] });\n                if (this.aggregates.length > 0) {\n                    this.notify(events.refreshFooterRenderer, {});\n                    if (this.groupSettings.columns.length > 0) {\n                        this.notify(events.groupAggregates, {});\n                    }\n                }\n                /* tslint:disable:no-string-literal */\n                if (!isNullOrUndefined(movableSelectedRow) && !isNullOrUndefined(movableSelectedRow['changes'])) {\n                    movableSelectedRow['changes'][field] = value;\n                }\n                /* tslint:disable:no-string-literal */\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *  @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     *  @param {Object} rowData - To update new data for the particular row.\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rwdata = 'data';\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var selectedRow;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        if (this.groupSettings.columns.length > 0 && this.aggregates.length > 0) {\n            rowObjects = rowObjects.filter(function (row) { return row.isDataRow; });\n        }\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n            if (this.aggregates.length > 0) {\n                this.notify(events.refreshFooterRenderer, {});\n                if (this.groupSettings.columns.length > 0) {\n                    this.notify(events.groupAggregates, {});\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        var frzCols = this.getFrozenColumns();\n        return frzCols && columnIndex >= frzCols ?\n            this.getMovableDataRows()[rowIndex] && this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - frzCols] :\n            this.getDataRows()[rowIndex] && this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getMovableDataRows()[rowIndex] &&\n            this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - this.getFrozenColumns()];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.getFrozenColumns()) {\n            if (!row) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                return row;\n            }\n        }\n        if (isNullOrUndefined(row) && this.enableVirtualization && this.groupSettings.columns.length > 0) {\n            row = this.rowObject(this.vRows, uid);\n            return row;\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        return this.contentModule.getMovableRows();\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        var column = this.getColumnByField(field);\n        return column ? this.getColumnHeaderByUid(column.uid) : undefined;\n    };\n    /**\n     * Gets a column header by UID.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        var element = this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']');\n        return element ? element.parentElement : undefined;\n    };\n    /**\n     * @hidden\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {Column}\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns().concat(this.getStackedColumns(this.columns)), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getStackedColumns = function (columns, stackedColumn) {\n        if (stackedColumn === void 0) { stackedColumn = []; }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.columns) {\n                stackedColumn.push(column);\n                this.getStackedColumns(column.columns, stackedColumn);\n            }\n        }\n        return stackedColumn;\n    };\n    /**\n     * Gets a column index by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        return index + this.getIndentCount();\n    };\n    /**\n    * Gets indent cell count.\n    * @private\n    * @return {number}\n    */\n    Grid.prototype.getIndentCount = function () {\n        var index = 0;\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        if (this.isRowDragable() && isNullOrUndefined(this.rowDropSettings.targetID)) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditTemplate = function () {\n        return this.editTemplateFn;\n    };\n    /**\n     * Gets a compiled dialog edit header template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditHeaderTemplate = function () {\n        return this.editHeaderTemplateFn;\n    };\n    /**\n     * Gets a compiled dialog edit footer template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditFooterTemplate = function () {\n        return this.editFooterTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        for (var k = 0; k < this.columnModel.length; k++) {\n            if (this.columnModel[k].isPrimaryKey) {\n                keys.push(this.columnModel[k].field);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        this.headerModule.refreshUI();\n        this.updateStackedFilter();\n        this.renderModule.refresh();\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowCellIndexes : [];\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     * @isGenericType true\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule ? this.selectionModule.getSelectedRecords() : [];\n    };\n    /**\n     * Gets the data module.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    /**\n     * Get the current Filter operator and field.\n     * @return {Object}\n     */\n    Grid.prototype.getFilterUIInfo = function () {\n        return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var col = this.columnModel;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (col[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen && cols[i].visible) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        if (this.pagerModule) {\n            this.pagerModule.goToPage(pageNo);\n        }\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        if (this.pagerModule) {\n            this.pagerModule.updateExternalMessage(message);\n        }\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        if (this.sortModule) {\n            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        if (this.sortModule) {\n            this.sortModule.clearSorting();\n        }\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        if (this.sortModule) {\n            this.sortModule.removeSortColumn(field);\n        }\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        if (this.filterModule) {\n            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n        }\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function (fields) {\n        if (this.filterModule) {\n            this.filterModule.clearFiltering(fields);\n        }\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        if (this.filterModule) {\n            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n        }\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRow(index, isToggle);\n        }\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRows(rowIndexes);\n        }\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearSelection();\n        }\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCell(cellIndex, isToggle);\n        }\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Grid.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        this.selectionModule.selectCellsByRange(startIndex, endIndex);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        if (this.searchModule) {\n            this.searchModule.search(searchString);\n        }\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./#printmode).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        if (this.printModule) {\n            this.printModule.print();\n        }\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        if (this.editModule) {\n            this.editModule.deleteRecord(fieldname, data);\n        }\n    };\n    /**\n     * Starts edit the selected row. At least one row must be selected before invoking this method.\n     * `editSettings.allowEditing` should be true.\n     * {% codeBlock src='grid/startEdit/index.md' %}{% endcodeBlock %}\n     * @return {void}\n     */\n    Grid.prototype.startEdit = function () {\n        if (this.editModule) {\n            this.editModule.startEdit();\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        if (this.editModule) {\n            this.editModule.endEdit();\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        if (this.editModule) {\n            this.editModule.closeEdit();\n        }\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        if (this.editModule) {\n            this.editModule.addRecord(data, index);\n        }\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        if (this.editModule) {\n            this.editModule.deleteRow(tr);\n        }\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Grid.prototype.editCell = function (index, field) {\n        if (this.editModule) {\n            this.editModule.editCell(index, field);\n        }\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     * {% codeBlock src='grid/saveCell/index.md' %}{% endcodeBlock %}\n     */\n    Grid.prototype.saveCell = function () {\n        if (this.editModule) {\n            this.editModule.saveCell();\n        }\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Grid.prototype.updateCell = function (rowIndex, field, value) {\n        if (this.editModule) {\n            this.editModule.updateCell(rowIndex, field, value);\n        }\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     * {% codeBlock src='grid/updateRow/index.md' %}{% endcodeBlock %}\n     */\n    Grid.prototype.updateRow = function (index, data) {\n        if (this.editModule) {\n            this.editModule.updateRow(index, data);\n        }\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Grid.prototype.getBatchChanges = function () {\n        if (this.editModule) {\n            return this.editModule.getBatchChanges();\n        }\n        return {};\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     */\n    Grid.prototype.enableToolbarItems = function (items, isEnable) {\n        if (this.toolbarModule) {\n            this.toolbarModule.enableItems(items, isEnable);\n        }\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        if (this.clipboardModule) {\n            this.clipboardModule.copy(withHeader);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        var _this = this;\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail() && !this.isRowDragable()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = 0;\n        var parentOffset = this.element.offsetWidth;\n        var applyWidth = function (index, width) {\n            if (ispercentageWidth(_this)) {\n                var newWidth = (width / parentOffset * 100).toFixed(1) + '%';\n                headerCol[index].style.width = newWidth;\n                contentCol[index].style.width = newWidth;\n            }\n            else {\n                headerCol[index].style.width = width + 'px';\n                contentCol[index].style.width = width + 'px';\n            }\n            _this.notify(events.columnWidthChanged, { index: index, width: width });\n        };\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (this.enableColumnVirtualization || this.isAutoGen) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            applyWidth(i, indentWidth);\n            i++;\n        }\n        if (this.isDetail()) {\n            applyWidth(i, indentWidth);\n            i++;\n        }\n        if (this.isRowDragable()) {\n            applyWidth(i, indentWidth);\n        }\n        this.isAutoGen = false;\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.resetIndentWidth = function () {\n        if (ispercentageWidth(this)) {\n            this.getHeaderTable().querySelector('.e-emptycell').removeAttribute('indentRefreshed');\n            this.widthService.setWidthToColumns();\n            this.recalcIndentWidth();\n        }\n        if ((this.width === 'auto' || typeof (this.width) === 'string' && this.width.indexOf('%') !== -1)\n            && this.getColumns().filter(function (col) { return (!col.width || col.width === 'auto') && col.minWidth; }).length > 0) {\n            var tgridWidth = this.widthService.getTableWidth(this.getColumns());\n            this.widthService.setMinwidthBycalculation(tgridWidth);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isRowDragable = function () {\n        return this.allowRowDragAndDrop && !this.rowDropSettings.targetID && !this.enableVirtualization;\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumns(fromFName, toFName);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByIndex multiple times,\n     * then you won't get the same results every time.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByIndex(fromIndex, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByTargetIndex multiple times,\n     * then you will get the same results every time.\n     * @param  {string} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByTargetIndex(fieldName, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid Row position with given indexes.\n     * @param  {number} fromIndexes - Defines the origin Indexes.\n     * @param  {number} toIndex - Defines the destination Index.\n     * @return {void}\n     */\n    Grid.prototype.reorderRows = function (fromIndexes, toIndex) {\n        if (this.rowDragAndDropModule) {\n            this.rowDragAndDropModule.reorderRows(fromIndexes, toIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.refreshDataSource = function (e, args) {\n        this.notify('refreshdataSource', e);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.disableRowDD = function (enable) {\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerRows = headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell');\n        var rows = this.getRows();\n        var disValue = enable ? 'none' : '';\n        setStyleAttribute(headerTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        setStyleAttribute(contentTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        for (var i = 0; i < this.getRows().length; i++) {\n            var ele = rows[i].firstElementChild;\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n        for (var j = 0; j < headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell').length; j++) {\n            var ele = headerRows[j];\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        if (this.resizeModule) {\n            this.resizeModule.autoFitColumns(fieldNames);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.renderColumnChooser(x, y, target);\n        }\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending', isFromGroup: true });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    if (column) {\n                        column.visible = false;\n                    }\n                    else {\n                        this_1.log('initial_action', { moduleName: 'group', columnName: gCols[i] });\n                    }\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            for (var i = 0; i < sCols.length; i++) {\n                this.sortedColumns.push(sCols[i].field);\n            }\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        this.editTemplateFn = templateCompiler(this.editSettings.template);\n        this.editHeaderTemplateFn = templateCompiler(this.editSettings.headerTemplate);\n        this.editFooterTemplateFn = templateCompiler(this.editSettings.footerTemplate);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n        this.enableBoxSelection();\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = this.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = this.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, this.createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(this.createElement('span'));\n        append([content, this.createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n            if (this.textWrapSettings.wrapMode !== 'Content') {\n                this.notify(events.refreshHandlers, {});\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n        if (this.textWrapSettings.wrapMode !== 'Content') {\n            this.notify(events.refreshHandlers, {});\n        }\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    /** @hidden */\n    Grid.prototype.freezeRefresh = function () {\n        if (this.enableVirtualization) {\n            this.pageSettings.currentPage = 1;\n        }\n        this.componentRefresh();\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var td = element;\n        var table = element.classList.contains('e-headercell') ? htable : ctable;\n        var ele = element.classList.contains('e-headercell') ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (this.prevElement !== element || e.type === 'mouseout') {\n                this.toolTipObj.close();\n            }\n            var tagName = e.target.tagName;\n            var elemNames = ['A', 'BUTTON', 'INPUT'];\n            if (element && e.type !== 'mouseout' && !(Browser.isDevice && elemNames.indexOf(tagName) !== -1)) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.prevElement = element;\n                    this.toolTipObj.open(element);\n                }\n            }\n        }\n        this.hoverFrozenRows(e);\n    };\n    /** @hidden */\n    Grid.prototype.hoverFrozenRows = function (e) {\n        if (this.getFrozenColumns()) {\n            var row = parentsUntil(e.target, 'e-row');\n            if ([].slice.call(this.element.querySelectorAll('.e-frozenhover')).length && e.type === 'mouseout') {\n                var rows = [].slice.call(this.element.querySelectorAll('.e-frozenhover'));\n                for (var i = 0; i < rows.length; i++) {\n                    rows[i].classList.remove('e-frozenhover');\n                }\n            }\n            else if (row) {\n                var rows = [].slice.call(this.element.querySelectorAll('tr[aria-rowindex=\"' + row.getAttribute('aria-rowindex') + '\"]'));\n                rows.splice(rows.indexOf(row), 1);\n                if (row.getAttribute('aria-selected') != 'true' && rows[0]) {\n                    rows[0].classList.add('e-frozenhover');\n                }\n                else if (rows[0]) {\n                    rows[0].classList.remove('e-frozenhover');\n                }\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        if (this.clipMode === 'EllipsisWithTooltip') {\n            return true;\n        }\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = this.createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = this.createElement('tr');\n        var mytd = this.createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    Grid.prototype.onKeyPressed = function (e) {\n        if (e.action === 'tab' || e.action === 'shiftTab') {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.element, 'dblclick', this.dblClickHandler, this);\n        EventHandler.add(this.element, 'keydown', this.keyPressHandler, this);\n        EventHandler.add(window, 'resize', this.resetIndentWidth, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(this.element, 'mouseout', this.mouseMoveHandler, this);\n        EventHandler.add(this.getContent(), 'touchstart', this.tapEvent, this);\n        EventHandler.add(document.body, 'keydown', this.keyDownHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.element, 'dblclick', this.dblClickHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'mouseout', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'keydown', this.keyPressHandler);\n        EventHandler.remove(this.getContent(), 'touchstart', this.tapEvent);\n        EventHandler.remove(document.body, 'keydown', this.keyDownHandler);\n        EventHandler.remove(window, 'resize', this.resetIndentWidth);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.on(events.keyPressed, this.onKeyPressed, this);\n        this.on(events.contentReady, this.blazorTemplate, this);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.off(events.keyPressed, this.onKeyPressed);\n    };\n    Grid.prototype.blazorTemplate = function () {\n        if (isBlazor()) {\n            if (this.pageSettings.template) {\n                updateBlazorTemplate(this.element.id + \"_template\", 'Template', this.pageSettings);\n            }\n            for (var i = 0; i < this.columnModel.length; i++) {\n                if (this.columnModel[i].template) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid, 'Template', this.columnModel[i], false);\n                }\n                if (this.columnModel[i].headerTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'headerTemplate', 'HeaderTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type == 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    var fieldName = this.columnModel[i].field;\n                    var tempID = this.element.id + this.columnModel[i].uid + 'filterTemplate';\n                    var filteredColumns = this.filterSettings.columns;\n                    for (var k = 0; k < filteredColumns.length; k++) {\n                        if (fieldName == filteredColumns[k].field) {\n                            blazorTemplates[tempID][0][fieldName] = filteredColumns[k].value;\n                        }\n                    }\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type != 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i]);\n                }\n            }\n            if (this.groupSettings.captionTemplate) {\n                updateBlazorTemplate(this.element.id + 'captionTemplate', 'CaptionTemplate', this.groupSettings);\n            }\n            var guid = 'guid';\n            for (var k = 0; k < this.aggregates.length; k++) {\n                for (var j = 0; j < this.aggregates[k].columns.length; j++) {\n                    if (this.aggregates[k].columns[j].footerTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'footerTemplate', 'FooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupFooterTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupFooterTemplate', 'GroupFooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupCaptionTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupCaptionTemplate', 'GroupCaptionTemplate', this.aggregates[k].columns[j]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @isGenericType true\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        if (isGroupAdaptive(this)) {\n            return isNullOrUndefined(this.currentViewData.records) ?\n                this.currentViewData : this.currentViewData.records;\n        }\n        if (this.groupSettings.enableLazyLoading) {\n            return this.currentViewData;\n        }\n        ;\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length && this.currentViewData.records) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, 'e-gridcontent') ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop &&\n            !(parentsUntil(e.target, 'e-filterbarcell'))) {\n            e.preventDefault();\n        }\n        var args = this.getRowInfo(e.target);\n        var cancel = 'cancel';\n        args[cancel] = false;\n        var isDataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            isDataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        if (isBlazor()) {\n            var clonedColumn = extend({}, args.column);\n            args = { rowData: args.rowData, rowIndex: args.rowIndex,\n                cellIndex: args.cellIndex, column: clonedColumn };\n        }\n        if (isDataRow) {\n            this.trigger(events.recordClick, args);\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var dataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            dataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        if (dataRow) {\n            this.trigger(events.recordDoubleClick, args);\n        }\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        var relatedTarget = e.relatedTarget;\n        var ariaOwns = relatedTarget ? relatedTarget.getAttribute('aria-owns') : null;\n        if ((!relatedTarget || (!parentsUntil(relatedTarget, 'e-grid') &&\n            (!isNullOrUndefined(ariaOwns) &&\n                (ariaOwns)) !== e.target.getAttribute('aria-owns')))\n            && !this.keyPress && this.isEdit && !Browser.isDevice) {\n            if (this.editSettings.mode === 'Batch') {\n                this.editModule.saveCell();\n                this.notify(events.editNextValCell, {});\n            }\n            if (this.editSettings.mode === 'Normal') {\n                this.editModule.editFormValidate();\n            }\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mergePersistGridData = function (persistedData) {\n        var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        if (!(isNullOrUndefined(data) || (data === '')) || !isNullOrUndefined(persistedData)) {\n            var dataObj = !isNullOrUndefined(persistedData) ? persistedData : JSON.parse(data);\n            if (this.enableVirtualization) {\n                dataObj.pageSettings.currentPage = 1;\n            }\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        if (!(isBlazor() && this.isServerRendered)) {\n                            setColumnIndex(this[key]);\n                        }\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var storedColumns = storedColumn;\n        var _loop_2 = function (i) {\n            var localCol = columns.filter(function (tCol) { return tCol.index === storedColumns[i].index; })[0];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    this_2.mergeColumns(storedColumns[i].columns, localCol.columns);\n                    storedColumns[i] = extend(localCol, storedColumns[i], {}, true);\n                }\n                else {\n                    if (isBlazor()) {\n                        var guid = 'guid';\n                        storedColumns[i][guid] = localCol[guid];\n                        storedColumns[i].uid = localCol.uid;\n                    }\n                    storedColumns[i] = extend(localCol, storedColumns[i], {}, true);\n                }\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < storedColumns.length; i++) {\n            _loop_2(i);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyPressHandler = function (e) {\n        var presskey = extend(e, { cancel: false, });\n        this.trigger(\"keyPressed\", presskey);\n        if (presskey.cancel === true) {\n            e.stopImmediatePropagation();\n        }\n    };\n    Grid.prototype.keyDownHandler = function (e) {\n        if (e.altKey) {\n            if (e.keyCode === 74) { //alt j\n                if (this.keyA) { //alt A J\n                    this.notify(events.groupCollapse, { target: e.target, collapse: false });\n                    this.keyA = false;\n                }\n                else {\n                    this.focusModule.focusHeader();\n                    this.focusModule.addOutline();\n                }\n            }\n            if (e.keyCode === 87) { //alt w\n                this.focusModule.focusContent();\n                this.focusModule.addOutline();\n            }\n            if (e.keyCode === 65) { //alt A\n                this.keyA = true;\n            }\n            if (e.keyCode === 72 && this.keyA) { //alt A H\n                this.notify(events.groupCollapse, { target: e.target, collapse: true });\n                this.keyA = false;\n            }\n        }\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        else {\n            this.keyPress = true;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization, this);\n        if (!(isBlazor() && this.isServerRendered)) {\n            setColumnIndex(this.columns);\n        }\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     * @return {Column[]}\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     */\n    Grid.prototype.refreshColumns = function () {\n        var fCnt = this.getContent().querySelector('.e-frozencontent');\n        if ((this.getFrozenColumns() === 1 && !fCnt) || (this.getFrozenColumns() === 0 && fCnt)) {\n            if (this.enableColumnVirtualization) {\n                this.columnModel = [];\n                this.updateColumnModel(this.columns);\n            }\n            this.freezeRefresh();\n        }\n        else {\n            this.isPreventScrollEvent = true;\n            this.updateColumnObject();\n            this.checkLockColumns(this.getColumns());\n            this.refresh();\n            if (this.getFrozenColumns()) {\n                var mTbl = this.contentModule.getMovableContent().querySelector('.e-table');\n                remove(mTbl.querySelector('colgroup'));\n                var colGroup = ((this.getHeaderContent()\n                    .querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n                mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n            }\n        }\n        if (this.getFrozenColumns()) {\n            this.headerModule.getMovableHeader().scrollLeft = this.contentModule.getMovableContent().scrollLeft;\n        }\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     * @blazorType void\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n    /* tslint:disable-next-line:no-any */\n    workbook, isBlob) {\n        if (isBlazor()) {\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob);\n            return null;\n        }\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob) : null;\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     * @blazorType void\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, isBlob) {\n        if (isBlazor()) {\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob);\n            return null;\n        }\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob) : null;\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     * @blazorType void\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, pdfDoc, isBlob) {\n        if (isBlazor()) {\n            this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob);\n            return null;\n        }\n        return this.pdfExportModule ? this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) : null;\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.groupColumn(columnName);\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.groupExpandAll = function () {\n        if (this.groupModule) {\n            this.groupModule.expandAll();\n        }\n    };\n    /**\n    * Collapses all the grouped rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.groupCollapseAll = function () {\n        if (this.groupModule) {\n            this.groupModule.collapseAll();\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    // public expandCollapseRows(target: Element): void {\n    //     if (this.groupModule) {\n    //         this.groupModule.expandCollapseRows(target);\n    //     }\n    // }\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearGrouping = function () {\n        if (this.groupModule) {\n            this.groupModule.clearGrouping();\n        }\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * {% codeBlock src='grid/ungroupColumn/index.md' %}{% endcodeBlock %}\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.ungroupColumn(columnName);\n        }\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    Grid.prototype.openColumnChooser = function (x, y) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.openColumnChooser(x, y);\n        }\n    };\n    Grid.prototype.scrollRefresh = function () {\n        var _this = this;\n        var refresh = function () {\n            _this.scrollModule.refresh();\n            _this.off(events.contentReady, refresh);\n        };\n        this.on(events.contentReady, refresh, this);\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    // public detailCollapse(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.collapse(target);\n    //     }\n    // }\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.detailCollapseAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.collapseAll();\n        }\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    // public detailExpand(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.expand(target);\n    //     }\n    // }\n    /**\n    * Expands all the detail rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.detailExpandAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.expandAll();\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Grid.prototype.clearCellSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearCellSelection();\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Grid.prototype.clearRowSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearRowSelection();\n        }\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectCells = function (rowCellIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCells(rowCellIndexes);\n        }\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Grid.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRowsByRange(startIndex, endIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    //tslint:disable-next-line:no-any\n    Grid.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * @hidden\n     * @private\n     */\n    Grid.prototype.log = function (type, args) {\n        this.loggerModule ? this.loggerModule.log(type, args) : (function () { return 0; })();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.applyBiggerTheme = function (element) {\n        if (this.element.classList.contains('e-bigger')) {\n            element.classList.add('e-bigger');\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getPreviousRowData = function () {\n        var previousRowData = this.getRowsObject()[this.getRows().length - 1].data;\n        return previousRowData;\n    };\n    /**\n     * Hides the scrollbar placeholder of Grid content when grid content is not overflown.\n     * @return {void}\n     */\n    Grid.prototype.hideScroll = function () {\n        var content = this.getContent().querySelector('.e-content');\n        var cTable = content.querySelector('.e-movablecontent') ? content.querySelector('.e-movablecontent') : content;\n        var fTable = content.querySelector('.e-frozencontent') ? content.querySelector('.e-frozencontent') : content;\n        if (cTable.scrollHeight <= cTable.clientHeight && fTable.scrollHeight <= fTable.clientHeight) {\n            this.scrollModule.removePadding();\n            cTable.style.overflowY = 'auto';\n        }\n        if (this.frozenColumns && cTable.scrollWidth <= cTable.clientWidth) {\n            cTable.style.overflowX = 'auto';\n            cTable.style.overflowY = 'auto';\n            this.notify(events.frozenHeight, 0);\n        }\n    };\n    /**\n     * Get row index by primary key or row data.\n     * @param  {string} value - Defines the primary key value.\n     * @param  {Object} value - Defines the row data.\n     */\n    Grid.prototype.getRowIndexByPrimaryKey = function (value) {\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        value = typeof value === 'object' ? value[pkName] : value;\n        for (var i = 0; i < this.getRowsObject().length; i++) {\n            if (this.getRowsObject()[i].data[pkName] === value) {\n                return this.getRowsObject()[i].index;\n            }\n        }\n        return -1;\n    };\n    ;\n    /**\n    * @hidden\n    */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByFieldFromAllCols = function (field) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        var gCols = this.columnModel;\n        for (var i = 0; i < gCols.length; i++) {\n            if (field === gCols[i].field) {\n                column = gCols[i];\n            }\n        }\n        return column;\n    };\n    /**\n    * @hidden\n    */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByUidFromAllCols = function (uid) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        var gCols = this.columnModel;\n        for (var i = 0; i < gCols.length; i++) {\n            if (uid === gCols[i].uid) {\n                column = gCols[i];\n            }\n        }\n        return column;\n    };\n    /**\n     * Get all filtered records from the Grid and it returns array of objects for the local dataSource, returns a promise object if the Grid has remote data.\n     * @return {Object[] | Promise<Object>}\n     * @deprecated\n     */\n    Grid.prototype.getFilteredRecords = function () {\n        if (this.allowFiltering && this.filterSettings.columns.length) {\n            var query = this.renderModule.data.generateQuery(true);\n            if (this.dataSource && this.renderModule.data.isRemote() && this.dataSource instanceof DataManager) {\n                return this.renderModule.data.getData(this.dataSource, query);\n            }\n            else {\n                if (this.dataSource instanceof DataManager) {\n                    return this.dataSource.executeLocal(query);\n                }\n                else {\n                    return new DataManager(this.dataSource, query).executeLocal(query);\n                }\n            }\n        }\n        return [];\n    };\n    Grid.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * @hidden\n     */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.dblClickHandler(e);\n                this.notify(events.doubleTap, e);\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowUid = function (prefix) {\n        return \"\" + prefix + this.rowUid++;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableVirtualContent = function () {\n        return this.getContent().querySelector('.e-movablecontent');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenVirtualContent = function () {\n        return this.getContent().querySelector('.e-frozencontent');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableVirtualHeader = function () {\n        return this.getHeaderContent().querySelector('.e-movableheader');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenVirtualHeader = function () {\n        return this.getHeaderContent().querySelector('.e-frozenheader');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowElementByUID = function (uid) {\n        var rowEle;\n        var rows = [];\n        if (this.getFrozenColumns()) {\n            var fRows = [].slice.call(this.getFrozenVirtualContent().querySelector('tbody').children);\n            var mRows = [].slice.call(this.getMovableVirtualContent().querySelector('tbody').children);\n            if (this.frozenRows) {\n                rows = [].slice.call(this.getFrozenVirtualHeader().querySelector('tbody').children);\n                rows = rows.concat([].slice.call(this.getMovableVirtualHeader().querySelector('tbody').children));\n                rows = rows.concat(fRows).concat(mRows);\n            }\n            else {\n                rows = fRows.concat(mRows);\n            }\n        }\n        else {\n            var cntRows = [].slice.call(this.getContent().querySelector('tbody').children);\n            if (this.frozenRows) {\n                rows = [].slice.call(this.getHeaderContent().querySelector('tbody').children);\n                rows = rows.concat(cntRows);\n            }\n            else {\n                rows = cntRows;\n            }\n        }\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            if (row.getAttribute('data-uid') === uid) {\n                rowEle = row;\n                break;\n            }\n        }\n        return rowEle;\n    };\n    /**\n    * Gets the hidden columns from the Grid.\n    * @return {Column[]}\n    * @blazorType List<GridColumn>\n    */\n    Grid.prototype.getHiddenColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible === false) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     *  calculatePageSizeByParentHeight\n     * @deprecated\n     */\n    Grid.prototype.calculatePageSizeByParentHeight = function (containerHeight) {\n        if (this.allowPaging) {\n            if ((this.allowTextWrap && this.textWrapSettings.wrapMode == 'Header') || (!this.allowTextWrap)) {\n                var pagesize = 0;\n                if (containerHeight.indexOf('%') != -1) {\n                    containerHeight = parseInt(containerHeight) / 100 * this.element.clientHeight;\n                }\n                var nonContentHeight = this.getNoncontentHeight() + this.getRowHeight();\n                if (containerHeight > nonContentHeight) {\n                    var contentHeight = 0;\n                    contentHeight = containerHeight - this.getNoncontentHeight();\n                    pagesize = (contentHeight / this.getRowHeight());\n                }\n                if (pagesize > 0) {\n                    return Math.floor(pagesize);\n                }\n            }\n        }\n        return 0;\n    };\n    Grid.prototype.getNoncontentHeight = function () {\n        var height = 0;\n        if (!isNullOrUndefined(this.getHeaderContent().clientHeight)) {\n            height += this.getHeaderContent().clientHeight;\n        }\n        if (this.toolbar && !isNullOrUndefined(this.element.querySelector('.e-toolbar').clientHeight)) {\n            height += this.element.querySelector('.e-toolbar').clientHeight;\n        }\n        if (this.allowPaging && !isNullOrUndefined(this.element.querySelector('.e-gridpager').clientHeight)) {\n            height += this.element.querySelector('.e-gridpager').clientHeight;\n        }\n        if (this.showColumnChooser && !isNullOrUndefined(this.element.querySelector(\".e-columnheader\").clientHeight)) {\n            height += this.element.querySelector(\".e-columnheader\").clientHeight;\n        }\n        if (this.allowGrouping && this.groupSettings.showDropArea && !isNullOrUndefined(this.element.querySelector('.e-groupdroparea').clientHeight)) {\n            height += this.element.querySelector('.e-groupdroparea').clientHeight;\n        }\n        if (this.aggregates.length > 0 && !isNullOrUndefined(this.element.querySelector('.e-summaryrow').clientHeight)) {\n            for (var i = 0; i < this.element.querySelectorAll('.e-summaryrow').length; i++) {\n                height += this.element.querySelectorAll('.e-summaryrow')[i].clientHeight;\n            }\n        }\n        return height;\n    };\n    /**\n     *To perform aggregate operation on a column.\n     *@param  {AggregateColumnModel} summaryCol - Pass Aggregate Column details.\n     *@param  {Object} summaryData - Pass JSON Array for which its field values to be calculated.\n     * @deprecated\n     */\n    Grid.prototype.getSummaryValues = function (summaryCol, summaryData) {\n        return DataUtil.aggregates[summaryCol.type.toLowerCase()](summaryData, summaryCol.field);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isCollapseStateEnabled = function () {\n        var isExpanded = 'isExpanded';\n        return this[isExpanded] === false;\n    };\n    /**\n     * @param {number} key - Defines the primary key value.\n     * @param {Object} value - Defines the row data.\n     * @deprecated\n     */\n    Grid.prototype.updateRowValue = function (key, rowData) {\n        var args = {\n            requestType: 'save', data: rowData,\n        };\n        this.showSpinner();\n        this.notify(events.updateData, args);\n        this.refresh();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setForeignKeyData = function () {\n        this.dataBind();\n        var colpending = this.getDataModule().getForeignKeyDataState();\n        if (colpending.isPending) {\n            this.getDataModule().setForeignKeyDataState({});\n            colpending.resolver();\n        }\n        else {\n            this.getDataModule().setForeignKeyDataState({ isDataChanged: false });\n            if (this.contentModule || this.headerModule) {\n                this.renderModule.render();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.resetFilterDlgPosition = function (field) {\n        var header = this.getColumnHeaderByField(field);\n        if (header) {\n            var target = header.querySelector('.e-filtermenudiv');\n            var filterDlg = this.element.querySelector('.e-filter-popup');\n            if (target && filterDlg) {\n                var gClient = this.element.getBoundingClientRect();\n                var fClient = target.getBoundingClientRect();\n                if (filterDlg) {\n                    filterDlg.style.left = (fClient.right - gClient.left).toString() + 'px';\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.renderTemplates = function () {\n        var portals = 'portals';\n        this.notify('reactTemplateRender', this[portals]);\n        this.renderReactTemplates();\n    };\n    /**\n     * Apply the changes to the Grid without refreshing the rows.\n     * @param  {BatchChanges} changes - Defines changes to be updated.\n     * @return {void}\n     */\n    Grid.prototype.batchUpdate = function (changes) {\n        this.processRowChanges(changes);\n    };\n    /**\n     * Apply the changes to the Grid in one batch after 50ms without refreshing the rows.\n     * @param  {BatchChanges} changes - Defines changes to be updated.\n     * @return {void}\n     */\n    Grid.prototype.batchAsyncUpdate = function (changes) {\n        this.processBulkRowChanges(changes);\n    };\n    Grid.prototype.processBulkRowChanges = function (changes) {\n        var _this = this;\n        if (!this.dataToBeUpdated) {\n            this.dataToBeUpdated = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);\n            setTimeout(function () {\n                _this.processRowChanges(_this.dataToBeUpdated);\n                _this.dataToBeUpdated = null;\n            }, this.asyncTimeOut);\n        }\n        else {\n            var loopstring = ['addedRecords', 'changedRecords', 'deletedRecords'];\n            var keyField = this.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < loopstring.length; i++) {\n                if (changes[loopstring[i]]) {\n                    compareChanges(this, changes, loopstring[i], keyField);\n                }\n            }\n        }\n    };\n    Grid.prototype.processRowChanges = function (changes) {\n        var _this = this;\n        var keyField = this.getPrimaryKeyFieldNames()[0];\n        changes = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);\n        var promise = this.getDataModule().saveChanges(changes, keyField, {}, this.getDataModule().generateQuery().requiresCount());\n        if (this.getDataModule().isRemote()) {\n            promise.then(function (e) {\n                _this.setNewData();\n            });\n        }\n        else {\n            this.setNewData();\n        }\n    };\n    Grid.prototype.setNewData = function () {\n        var _this = this;\n        var oldValues = JSON.parse(JSON.stringify(this.getCurrentViewRecords()));\n        var getData = this.getDataModule().getData({}, this.getDataModule().generateQuery().requiresCount());\n        getData.then(function (e) {\n            _this.bulkRefresh(e.result, oldValues, e.count);\n        });\n    };\n    Grid.prototype.deleteRowElement = function (row) {\n        var tr = this.getRowElementByUID(row.uid);\n        var index = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        remove(tr);\n        if (this.getFrozenColumns()) {\n            var mtr = this.getMovableRows()[index];\n            remove(mtr);\n        }\n    };\n    Grid.prototype.bulkRefresh = function (result, oldValues, count) {\n        var _this = this;\n        var rowObj = this.getRowsObject();\n        var keyField = this.getPrimaryKeyFieldNames()[0];\n        var _loop_3 = function (i) {\n            if (!result.filter(function (e) { return e[keyField] === rowObj[i].data[keyField]; }).length) {\n                this_3.deleteRowElement(rowObj[i]);\n                rowObj.splice(i, 1);\n                i--;\n            }\n            out_i_1 = i;\n        };\n        var this_3 = this, out_i_1;\n        for (var i = 0; i < rowObj.length; i++) {\n            _loop_3(i);\n            i = out_i_1;\n        }\n        var _loop_4 = function (i) {\n            var isRowExist;\n            oldValues.filter(function (e) {\n                if (e[keyField] === result[i][keyField]) {\n                    if (e !== result[i]) {\n                        _this.setRowData(result[i][keyField], result[i]);\n                    }\n                    isRowExist = true;\n                }\n            });\n            if (!isRowExist) {\n                this_4.renderRowElement(result[i], i);\n            }\n        };\n        var this_4 = this;\n        for (var i = 0; i < result.length; i++) {\n            _loop_4(i);\n        }\n        this.currentViewData = result;\n        var rows = [].slice.call(this.getContentTable().querySelectorAll('.e-row'));\n        resetRowIndex(this, this.getRowsObject(), rows);\n        setRowElements(this);\n        if (this.allowPaging) {\n            this.notify(events.inBoundModelChanged, { module: 'pager', properties: { totalRecordsCount: count } });\n        }\n    };\n    Grid.prototype.renderRowElement = function (data, index) {\n        var row = new RowRenderer(this.serviceLocator, null, this);\n        var model = new RowModelGenerator(this);\n        var modelData = model.generateRows([data]);\n        var tr = row.render(modelData[0], this.getColumns());\n        var mTr;\n        var mTbody;\n        this.addRowObject(modelData[0], index);\n        var tbody = this.getContentTable().querySelector('tbody');\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (this.getFrozenColumns()) {\n                var moveTbody = this.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n            }\n        }\n        if (this.getFrozenColumns()) {\n            mTr = renderMovable(tr, this.getFrozenColumns(), this);\n            if (this.frozenRows && index < this.frozenRows) {\n                mTbody = this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.appendChild(mTr);\n            if (this.height === 'auto') {\n                this.notify(events.frozenHeight, {});\n            }\n        }\n        if (this.frozenRows && index < this.frozenRows) {\n            tbody = this.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.getContent().querySelector('tbody');\n        }\n        tbody = this.getContent().querySelector('tbody');\n        tbody.appendChild(tr);\n    };\n    Grid.prototype.addRowObject = function (row, index) {\n        var frzCols = this.getFrozenColumns();\n        if (frzCols) {\n            var mRows = this.getMovableRowsObject();\n            var mRow = row.clone();\n            mRow.cells = mRow.cells.slice(frzCols);\n            row.cells = row.cells.slice(0, frzCols);\n            mRows.splice(index, 1, mRow);\n        }\n        this.getRowsObject().splice(index, 1, row);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getHeight = function (height) {\n        if (!Number.isInteger(height) && height.indexOf('%') != -1) {\n            height = parseInt(height) / 100 * this.element.clientHeight;\n        }\n        else if (!Number.isInteger(height) && this.height !== 'auto') {\n            height = parseInt(height);\n        }\n        else {\n            height = this.height;\n        }\n        return height;\n    };\n    var Grid_1;\n    __decorate([\n        Property()\n    ], Grid.prototype, \"parentDetails\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableAutoFill\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Complex({}, ResizeSettings)\n    ], Grid.prototype, \"resizeSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableInfiniteScrolling\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property('Ellipsis')\n    ], Grid.prototype, \"clipMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Complex({}, InfiniteScrollSettings)\n    ], Grid.prototype, \"infiniteScrollSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableImmutableMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Complex({}, ColumnChooserSettings)\n    ], Grid.prototype, \"columnChooserSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableHeaderFocus\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Grid.prototype, \"hierarchyPrintMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Property('All')\n    ], Grid.prototype, \"columnQueryMode\", void 0);\n    __decorate([\n        Property({})\n    ], Grid.prototype, \"currentAction\", void 0);\n    __decorate([\n        Property('default version')\n    ], Grid.prototype, \"ej2StatePersistenceVersion\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfAggregateQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelAggregateQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportDetailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStartHelper\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"commandClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"keyPressed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePaste\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeAutoFill\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportGroupCaption\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"lazyLoadGroupExpand\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"lazyLoadGroupCollapse\", void 0);\n    Grid = Grid_1 = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked } from '../base/util';\nimport { remove, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilterBase(parent) {\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilterBase.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchHandler, this);\n    };\n    CheckBoxFilterBase.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n        var elem = this.dlg.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            var fpred = fPredicate.predicate.predicates;\n            for (var i = 0; i < fpred.length; i++) {\n                filterCollection.push({\n                    field: fpred[i].field,\n                    predicate: 'or',\n                    matchCase: fpred[i].ignoreCase,\n                    ignoreAccent: fpred[i].ignoreAccent,\n                    operator: fpred[i].operator,\n                    value: fpred[i].value,\n                    type: _this.options.type\n                });\n            }\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilterBase.prototype.foreignFilter = function (args, value) {\n        var operator = this.options.isRemote ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'contains' : 'equal');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.options.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilterBase.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.ignoreAccent = options.ignoreAccent || false;\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            attrs: { uid: this.options.column.uid },\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilterBase.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.notify(events.cBoxFltrBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.dlg.setAttribute('aria-label', this.getLocalizedLabel('ExcelFilterDialogARIA'));\n        this.parent.element.appendChild(this.dlg);\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = this.options.height + 'px';\n        this.dialogObj.show();\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n        }\n        else {\n            this.dialogObj.position = { X: 'center', Y: 'center' };\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilterBase.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilterBase.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            var filterTemplateCol = this.options.columns.filter(function (col) { return col.getFilterItemTemplate(); });\n            // tslint:disable-next-line:no-any\n            var registeredTemplate = this.parent.registeredTemplate;\n            if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            if (this.parent.isReact) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n                this.parent.renderTemplates();\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n        }\n    };\n    CheckBoxFilterBase.prototype.clearFilter = function () {\n        /* tslint:disable-next-line:max-line-length */\n        var args = { instance: this, handler: this.clearFilter, cancel: false };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: this.options.field });\n    };\n    CheckBoxFilterBase.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput')) {\n                var value = e.target.value;\n                if (this.options.column.type === 'boolean') {\n                    if (value !== '' &&\n                        this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = true;\n                    }\n                    else if (value !== '' &&\n                        this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = false;\n                    }\n                }\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.options.isRemote ?\n                            (this.options.column.type === 'string' ? 'contains' : 'equal') :\n                            (this.options.column.type === 'date' || this.options.column.type === 'datetime' ||\n                                this.options.column.type === 'boolean' ? 'equal' : 'contains'),\n                        value: value, matchCase: false, type: this.options.column.type\n                    },\n                    field: this.options.field\n                };\n                value !== undefined && value !== null && value !== '' ? this.isForeignColumn(this.options.column) ?\n                    this.foreignFilter(args, value) : this.options.handler(args) : this.closeDialog();\n            }\n            else {\n                if (e.keyCode === 13) {\n                    this.fltrBtnHandler();\n                }\n                else {\n                    var text = e.target.firstChild.textContent.toLowerCase();\n                    if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                        this.fltrBtnHandler();\n                    }\n                    else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                        this.clearFilter();\n                    }\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var check = checked;\n        var optr = 'equal';\n        var searchInput = this.searchBox.querySelector('.e-searchinput');\n        var caseSen = this.options.allowCaseSensitive;\n        var defaults = {\n            field: this.options.field, predicate: 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput.value === '') {\n            optr = 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = 'and';\n            defaults.operator = 'notequal';\n        }\n        var value;\n        var val;\n        var length;\n        var fObj;\n        var coll = [];\n        if (checked.length !== this.itemsCnt || (searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                if (value === '' || isNullOrUndefined(value)) {\n                    coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                }\n                else {\n                    coll.push(fObj);\n                }\n                var args = {\n                    instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                    arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value, cancel: false\n                };\n                this.parent.notify(events.fltrPrevent, args);\n                if (args.cancel) {\n                    return;\n                }\n            }\n            if (this.options.type === 'date' || this.options.type === 'datetime') {\n                length = check.length - 1;\n                val = this.values[parentsUntil(check[length], 'e-ftrchk').getAttribute('uid')];\n                if (isNullOrUndefined(val) && isNotEqual) {\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: 'equal',\n                        predicate: 'and', value: null\n                    });\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    /** @hidden */\n    CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n        var coll = [];\n        if (defaults.type === 'string') {\n            coll.push({\n                field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                operator: defaults.operator, predicate: defaults.predicate, value: ''\n            });\n        }\n        coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n        });\n        coll.push({\n            field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n            predicate: defaults.predicate, value: undefined\n        });\n        return coll;\n    };\n    CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n        return col.isForeignColumn ? col.isForeignColumn() : false;\n    };\n    CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var pred = query.queries.filter(function (e) { return e && e.fn === 'onWhere'; })[0];\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.isRemote ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'contains' : 'equal');\n        var matchCase = true;\n        var ignoreAccent = this.options.ignoreAccent;\n        var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? true : 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? false : 'false';\n            }\n            operator = 'equal';\n        }\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n        }\n        this.addDistinct(query);\n        /* tslint:disable-next-line:max-line-length */\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query, value: parsed\n        };\n        if (isBlazor() && !this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = {};\n        }\n        this.parent.trigger(events.actionBegin, args, function (filterargs) {\n            filterargs.operator = (isBlazor() && filterargs.excelSearchOperator !== 'none') ?\n                filterargs.excelSearchOperator : filterargs.operator;\n            predicte = new Predicate(field, filterargs.operator, parsed, filterargs.matchCase, filterargs.ignoreAccent);\n            if (_this.options.type === 'date' || _this.options.type === 'datetime') {\n                operator = 'equal';\n                if (isNullOrUndefined(parsed) && val.length) {\n                    return;\n                }\n                var filterObj = {\n                    field: field, operator: operator, value: parsed, matchCase: matchCase,\n                    ignoreAccent: ignoreAccent\n                };\n                predicte = getDatePredicate(filterObj, _this.options.type);\n            }\n            if (val.length) {\n                predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n                query.where(predicte);\n            }\n            else if (!isNullOrUndefined(pred)) {\n                query.where(pred.e);\n            }\n            filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n            var fPredicate = {};\n            showSpinner(_this.spinner);\n            _this.renderEmpty = false;\n            if (_this.isForeignColumn(column) && val.length) {\n                var colData = ('result' in column.dataSource) ? new DataManager(column.dataSource.result) :\n                    column.dataSource;\n                // tslint:disable-next-line:no-any\n                colData.executeQuery(query).then(function (e) {\n                    var columnData = _this.options.column.columnData;\n                    _this.options.column.columnData = e.result;\n                    _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                    if (fPredicate.predicate.predicates.length) {\n                        foreignQuery.where(fPredicate.predicate);\n                    }\n                    else {\n                        _this.renderEmpty = true;\n                    }\n                    _this.options.column.columnData = columnData;\n                    foreignQuery.take(filterargs.filterChoiceCount);\n                    _this.search(filterargs, foreignQuery);\n                });\n            }\n            else {\n                query.take(filterargs.filterChoiceCount);\n                _this.search(filterargs, query);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns) {\n        var predicates = CheckBoxFilterBase.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var isGrid = this.parent.getForeignKeyColumns !== undefined;\n        var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (isGrid && this.parent.getColumnByField(prop).isForeignColumn()) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilterBase.prototype.getQuery = function () {\n        return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n    };\n    CheckBoxFilterBase.prototype.getAllData = function () {\n        var _this = this;\n        var query = this.getQuery();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args, function (args) {\n            args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n            query.take(args.filterChoiceCount);\n            if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.filterEvent(args, query);\n            }\n            else {\n                _this.processDataOperation(query, true);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.addDistinct = function (query) {\n        var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        query.distinct(filteredColumn);\n        return query;\n    };\n    CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var defObj = eventPromise(args, query);\n        this.parent.trigger(events.dataStateChange, defObj.state);\n        var def = defObj.deffered;\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.isForeignColumn(this.options.column) && isInitial) {\n            var colData = ('result' in this.options.column.dataSource) ?\n                new DataManager(this.options.column.dataSource.result) :\n                this.options.column.dataSource;\n            this.foreignKeyQuery.params = query.params;\n            allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            for (var j = 0; j < e.length; j++) {\n                runArray[i++](e[j].result);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };\n        this.parent.notify(events.beforeCheckboxRenderer, args1);\n        if (args1.executeQuery) {\n            var query = new Query();\n            if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n                var sSettings = this.parent.searchSettings;\n                var fields = sSettings.fields.length ? sSettings.fields : this.options.columns.map(function (f) { return f.field; });\n                /* tslint:disable-next-line:max-line-length */\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n            if ((this.options.filteredColumns.length)) {\n                var cols = [];\n                for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                    var filterColumn = this.options.filteredColumns[i];\n                    if (this.options.uid) {\n                        filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                        if (filterColumn.uid !== this.options.uid) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                    else {\n                        if (filterColumn.field !== this.options.field) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                }\n                var predicate = this.getPredicateFromCols(cols);\n                if (predicate) {\n                    query.where(predicate);\n                }\n            }\n            // query.select(this.options.field);\n            var result = new DataManager(args1.dataSource).executeLocal(query);\n            var col = this.options.column;\n            this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n        }\n        var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n        this.processDataSource(null, true, data);\n        this.sInput.focus();\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.notify(events.cBoxFltrComplete, args);\n    };\n    CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial);\n    };\n    CheckBoxFilterBase.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilterBase.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getObject(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n        this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n        this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.setFocus = function (elem) {\n        var prevElem = this.dlg.querySelector('.e-chkfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-chkfocus');\n        }\n        if (elem) {\n            elem.classList.add('e-chkfocus');\n        }\n    };\n    CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n            setChecked(cBox.previousSibling, checked);\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            this.dialogObj.element.querySelector('.e-btn').focus();\n        }\n    };\n    CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        setChecked(elem.querySelector('input'), checked);\n        var label = elem.querySelector('.e-label');\n        var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')) {\n            label.innerHTML = '';\n            var isReactCompiler = this.parent.isReact && this.options.column.filter\n                && typeof (this.options.column.filter.itemTemplate) !== 'string';\n            if (isReactCompiler) {\n                this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate'));\n            }\n        }\n        return elem;\n    };\n    CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dialogObj.btnObj[0];\n        btn.disabled = false;\n        var input = elem.previousSibling;\n        setChecked(input, false);\n        input.indeterminate = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n            setChecked(input, true);\n        }\n        else if (selected) {\n            className = ['e-stop'];\n            input.indeterminate = true;\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial) {\n        var _a;\n        var cBoxes = this.parent.createElement('div');\n        var btn = this.dialogObj.btnObj[0];\n        var nullCounter = -1;\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue('ejValue', data[i]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue('ejValue', data[i]);\n                var value = getValue(this.options.field, data[i]);\n                if (this.options.formatFn) {\n                    value = this.valueFormatter.toView(value, this.options.formatFn);\n                }\n                var args_1 = { value: value, column: this.options.column, data: data[i] };\n                this.parent.notify(events.filterCboxValue, args_1);\n                value = args_1.value;\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            this.updateIndeterminatenBtn();\n            btn.disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ||\n                (isBlazor() && this.parent.isServerRendered) ? [] : data };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.notify(events.cBoxFltrComplete, args);\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            return this.result[value];\n        }\n    };\n    CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n        while (len--) {\n            value = json[len];\n            value = getObject(field, value); //local remote diff, check with mdu   \n            if (!(value in lookup)) {\n                var obj = {};\n                obj[ejValue] = value;\n                lookup[value] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[len], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilterBase.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilterBase.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilterBase.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        var operate = 'or';\n        first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilterBase.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    if (cols[p].predicate === 'and' && cols[p].operator === 'equal') {\n                        predicate = predicate[operate](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                    else {\n                        predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilterBase.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof (filter.value) === 'string') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilterBase.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    return CheckBoxFilterBase;\n}());\nexport { CheckBoxFilterBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser, isBlazor, updateBlazorTemplate, closest } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat, applyBiggerTheme } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { parentsUntil, appendChildren, extend, eventPromise } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilterBase = /** @class */ (function (_super) {\n    __extends(ExcelFilterBase, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilterBase(parent, customFltrOperators) {\n        var _this = _super.call(this, parent) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilterBase.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilterBase.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilterBase.prototype.createMenu = function (type, isFiltered, isCheckIcon, eleOptions) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        if (this.parent.allowSorting) {\n            var hdrele = closest(eleOptions.target, '.e-headercell').getAttribute('aria-sort');\n            var isAsc = (hdrele === 'Ascending') ? 'e-disabled e-excel-ascending' : 'e-excel-ascending';\n            var isDesc = (hdrele === 'Descending') ? 'e-disabled e-excel-descending' : 'e-excel-descending';\n            var ascName = (type === 'string') ? this.getLocalizedLabel('SortAtoZ') : (type === 'datetime' || type === 'date') ?\n                this.getLocalizedLabel('SortByOldest') : this.getLocalizedLabel('SortSmallestToLargest');\n            var descName = (type === 'string') ? this.getLocalizedLabel('SortZtoA') : (type === 'datetime' || type === 'date') ?\n                this.getLocalizedLabel('SortByNewest') : this.getLocalizedLabel('SortLargestToSmallest');\n            ul.appendChild(this.createMenuElem(ascName, isAsc, 'e-sortascending'));\n            ul.appendChild(this.createMenuElem(descName, isDesc, 'e-sortdescending'));\n            var separator = this.parent.createElement('li', { className: 'e-separator e-menu-item e-excel-separator' });\n            ul.appendChild(separator);\n        }\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n        this.parent.notify(events.beforeFltrcMenuOpen, { element: this.menu });\n    };\n    ExcelFilterBase.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilterBase.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilterBase.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilterBase.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilterBase.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilterBase.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left, e.target);\n            applyBiggerTheme(this.parent.element, this.menuObj.element.parentElement);\n        }\n    };\n    ExcelFilterBase.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n                selectedMenu = 'between';\n            }\n            else {\n                selectedMenu = 'customfilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilterBase.prototype.preventClose = function (args) {\n        if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n            args.cancel = true;\n        }\n    };\n    ExcelFilterBase.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilterBase.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        var targetBorder = target.offsetWidth - target.clientWidth;\n        targetBorder = targetBorder ? targetBorder + 1 : 0;\n        return (leftPos < 1) ? (targetPosition.right + 1 - targetBorder) : (targetPosition.left - contextWidth - 1 + targetBorder);\n    };\n    ExcelFilterBase.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2), options);\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        if (this.parent.enableRtl) {\n            this.dlg.classList.add('e-rtl');\n        }\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilterBase.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilterBase.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilterBase.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e.element;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                if (_this.options.column.filterTemplate) {\n                    if (isBlazor()) {\n                        row.querySelector('.e-xlfl-valuediv').children[0].focus();\n                    }\n                    else {\n                        row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n                    }\n                }\n                else {\n                    row.cells[1].querySelector('input:not([type=hidden])').focus();\n                }\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgDiv.setAttribute('aria-label', this.getLocalizedLabel('CustomFilterDialogARIA'));\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilterBase.prototype.removeDialog = function () {\n        if (isBlazor()) {\n            var columns = this.options.columns || [];\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['filterTemplate']);\n            this.parent.renderTemplates();\n        }\n        this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilterBase.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        if (Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.parent.notify(events.beforeCustomFilterOpen, { column: column, dialog: this.dialogObj });\n        this.dlgObj.show();\n        applyBiggerTheme(this.parent.element, this.dlgObj.element.parentElement);\n    };\n    ExcelFilterBase.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilterBase.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.options.column.filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-frstvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.options.column.filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-secndvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.options.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * @hidden\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilterBase.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var col = this.parent.getColumnByField ? this.parent.getColumnByField(fieldName) : this.options.column;\n        var field = this.isForeignColumn(col) ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        var arg = {\n            instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n            arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue, cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, arg);\n        if (arg.cancel) {\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (!isNullOrUndefined(secondValue) && !isNullOrUndefined(secondOperator)) {\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /* tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        if (this.isForeignColumn(col)) {\n            this.foreignKeyFilter(args, fColl, mPredicate);\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(this.options.column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        var col = this.options.column;\n        this.dropOptr = new DropDownList(extend({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl,\n            change: this.dropDownValueChange.bind(this)\n        }, col.filter.params));\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilterBase.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilterBase.prototype.dropDownValueChange = function (args) {\n        if (args.element.id.includes('-xlfl-frstoptr')) {\n            this.firstOperator = args.value.toString();\n        }\n        else {\n            this.secondOperator = args.value.toString();\n        }\n    };\n    /**\n     * @hidden\n     */\n    ExcelFilterBase.prototype.getFilterUIInfo = function () {\n        return { firstOperator: this.firstOperator, secondOperator: this.secondOperator, field: this.options.field };\n    };\n    ExcelFilterBase.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilterBase.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else if (isFirst && col.type === 'string' && !col.filter.operator) {\n            operator = 'startswith';\n        }\n        else {\n            operator = isFirst ? col.filter.operator || 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilterBase.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilterBase.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /* tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        this.firstOperator = optr.operator;\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        this.secondOperator = optr.operator;\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilterBase.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilterBase.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var isFilteredCol = this.options.filteredColumns.some(function (col) { return column === col.field; });\n        var fltrPredicates = this.options.filteredColumns.filter(function (col) { return col.field === column; });\n        if (this.options.column.filterTemplate) {\n            var data = {};\n            var columnObj = this.options.column;\n            if (isFilteredCol && elementId) {\n                data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n            }\n            var isReactCompiler = this.parent.isReact && typeof (this.options.column.filterTemplate) !== 'string';\n            var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n            if (isReactCompiler) {\n                this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID, null, null, valueDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n                appendChildren(valueDiv, element);\n            }\n            if (isBlazor()) {\n                valueDiv.children[0].classList.add(elementId);\n                if (this.dlgDiv.querySelectorAll('.e-xlfl-value').length > 1) {\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columnObj);\n                }\n            }\n            else {\n                valueDiv.children[0].id = isComplex ? complexFieldName + elementId : column + elementId;\n            }\n            value.appendChild(valueDiv);\n        }\n        else {\n            var valueInput = this.parent\n                .createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n            valueDiv.appendChild(valueInput);\n            value.appendChild(valueDiv);\n            var flValue = void 0;\n            var predicate = void 0;\n            if (predicates && predicates.length > 0) {\n                predicate = predicates.length === 2 ?\n                    (isFirst ? predicates[0] : predicates[1]) :\n                    (isFirst ? predicates[0] : undefined);\n                flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n            }\n            var types = {\n                'string': this.renderAutoComplete.bind(this),\n                'number': this.renderNumericTextBox.bind(this),\n                'date': this.renderDate.bind(this),\n                'datetime': this.renderDateTime.bind(this)\n            };\n            types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n        var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n        if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n            data = { column: predicates instanceof Array ? predicates[predIndex] : predicates };\n            var indx = this.options.column.columnData && fltrPredicates.length > 1 ?\n                (this.options.column.columnData.length === 1 ? 0 : 1) : predIndex;\n            data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] :\n                fltrPredicates[indx].value;\n            if (this.options.foreignKeyValue) {\n                data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n            }\n        }\n        return data;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /* tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.datePicker = new DatePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n            locale: this.parent.locale,\n        }, options.column.filter.params));\n        this.datePicker.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.dateTimePicker = new DateTimePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n            locale: this.parent.locale,\n        }, options.column.filter.params));\n        this.dateTimePicker.appendTo(inputValue);\n    };\n    ExcelFilterBase.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue,\n            locale: this.parent.locale,\n        }, options.column.filter.params));\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.options.column;\n        var isForeignColumn = this.isForeignColumn(colObj);\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.getQuery(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return isComplex ? _this.performComplexDataOperation(actObj.fields.value, mapObject)\n                            : mapObject[actObj.fields.value];\n                    }).indexOf(isComplex ? _this.performComplexDataOperation(actObj.fields.value, obj) :\n                        obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            text: fValue\n        }, colObj.filter.params));\n        if (dataSource && 'result' in dataSource) {\n            var defObj = eventPromise({ requestType: 'stringfilterrequest' }, this.getQuery());\n            this.parent.trigger(events.dataStateChange, defObj.state);\n            var def = defObj.deffered;\n            def.promise.then(function (e) {\n                actObj.dataSource = new DataManager(e);\n            });\n        }\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    ExcelFilterBase.prototype.performComplexDataOperation = function (value, mapObject) {\n        var returnObj;\n        var length = value.split('.').length;\n        var splits = value.split('.');\n        var duplicateMap = mapObject;\n        for (var i = 0; i < length; i++) {\n            returnObj = duplicateMap[splits[i]];\n            duplicateMap = returnObj;\n        }\n        return returnObj;\n    };\n    return ExcelFilterBase;\n}(CheckBoxFilterBase));\nexport { ExcelFilterBase };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend, parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.currentTarget = null;\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction, isFromGroup: sCol.isFromGroup });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: columnName });\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;        \n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting',\n                type: events.actionBegin, target: this.currentTarget, cancel: false\n            } : {\n                requestType: 'sorting', type: events.actionBegin, cancel: false,\n                target: this.currentTarget\n            };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        this.sortedColumns.length = 0;\n        var sortColumns = this.sortSettings.columns;\n        for (var i = 0; i < sortColumns.length; i++) {\n            if (!sortColumns[i].isFromGroup) {\n                this.sortedColumns.push(sortColumns[i].field);\n            }\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n        if (isBlazor() && !this.parent.isJsComponent) {\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (cols.length === 0 && this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin, target: this.currentTarget\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        var isServerRendered = 'isServerRendered';\n        if (isBlazor() && this.parent[isServerRendered]) {\n            return;\n        }\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.clearSorting();\n        }\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        this.currentTarget = null;\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv') &&\n            !parentsUntil(e.target, 'e-stackedheadercell')) {\n            var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n                'Descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n        if (e.target.classList.contains('e-excel-ascending') ||\n            e.target.classList.contains('e-excel-descending')) {\n            var colUid = closest(e.target, '.e-filter-popup').getAttribute('uid');\n            var direction = e.target.classList.contains('e-excel-ascending') ? 'Ascending' : 'Descending';\n            this.sortColumn(gObj.getColumnByUid(colUid).field, direction, false);\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        this.currentTarget = e.target;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n            if (isBlazor() && !this.parent.isJsComponent) {\n                this.sortSettings.columns = this.sortSettings.columns;\n            }\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch ||\n                (navigator.userAgent.indexOf('Mac OS') !== -1 && e.metaKey));\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (this.parent.allowMultiSorting && (!isNullOrUndefined(target) || this.parent.isContextMenuOpen())) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (fieldNames.indexOf(cols[i].field) === -1 || isNullOrUndefined(header)) {\n                continue;\n            }\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (isNullOrUndefined(header) || (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerModule.element, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('FirstPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('FirstPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = createElement('div');\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = createElement('div');\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('NextPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('LastPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('LastPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append, isBlazor } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        if (isBlazor()) {\n            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('CurrentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('TotalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        }\n        else {\n            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                    pagerObj.currentPage, pagerObj.totalPages || 0, pagerObj.totalRecordsCount || 0]) + ' ';\n            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel(pagerObj.totalRecordsCount <= 1 ? 'totalItemInfo' : 'totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        }\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /** @hidden */\n        _this.hasParent = false;\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n        this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            totalItemInfo: '({0} item)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page',\n            pagerAllDropDown: 'Items',\n            CurrentPageInfo: '{0} of {1} pages',\n            TotalItemsInfo: '({0} items)',\n            FirstPageTooltip: 'Go to first page',\n            LastPageTooltip: 'Go to last page',\n            NextPageTooltip: 'Go to next page',\n            PreviousPageTooltip: 'Go to previous page',\n            NextPagerTooltip: 'Go to next pager',\n            PreviousPagerTooltip: 'Go to previous pager',\n            PagerDropDown: 'Items per page',\n            PagerAllDropDown: 'Items',\n            All: 'All'\n        };\n        this.containerModule = new NumericContainer(this);\n        this.pagerMessageModule = new PagerMessage(this);\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            if (this.isReactTemplate()) {\n                this.on('pager-refresh', this.pagerTemplate, this);\n                this.notify('pager-refresh', {});\n            }\n            else {\n                this.pagerTemplate();\n            }\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes() && this.pagerdropdownModule) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        if (this.isReactTemplate()) {\n            this.off('pager-refresh', this.pagerTemplate);\n            if (!this.hasParent) {\n                this.destroyTemplate(['template']);\n            }\n        }\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        if (!this.isReactTemplate()) {\n            this.element.innerHTML = '';\n        }\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    //tslint:disable-next-line:no-any\n    Pager.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        if (oldProp.pageSize !== newProp.pageSize) {\n                            this.currentPage = 1;\n                        }\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    if (newProp.pageSize !== oldProp.pageSize) {\n                        this.pageSize = newProp.pageSize;\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    else {\n                        this.refresh();\n                    }\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage && this.externalMessageModule) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Pager.prototype.setPageSize = function (pageSize) {\n        this.pageSize = pageSize;\n        this.dataBind();\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function (newProp, oldProp) {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        if (newProp.currentPage !== oldProp.currentPage || newProp.pageSize !== oldProp.pageSize) {\n            var args = {\n                currentPage: this.currentPage,\n                newProp: newProp, oldProp: oldProp, cancel: false\n            };\n            this.trigger('click', args);\n            if (!args.cancel) {\n                this.refresh();\n            }\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        if (this.isReactTemplate() && this.hasParent) {\n            return;\n        }\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        var tempId = this.element.parentElement.id + '_template';\n        if (this.isReactTemplate()) {\n            this.getPagerTemplate()(data, this, 'template', tempId, null, null, this.element);\n            this.renderReactTemplates();\n        }\n        else {\n            result = isBlazor() ? this.getPagerTemplate()(data, this, 'template', tempId, this.isStringTemplate) :\n                this.getPagerTemplate()(data);\n            appendChildren(this.element, result);\n        }\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            if (this.isReactTemplate()) {\n                this.updateTotalPages();\n                this.notify('pager-refresh', {});\n            }\n            else {\n                this.element.innerHTML = '';\n                this.updateTotalPages();\n                this.pagerTemplate();\n            }\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.pagerdropdownModule) {\n                this.pagerdropdownModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('FirstPageTooltip') : this.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('PreviousPageTooltip') :\n                    this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('NextPageTooltip') :\n                    this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('LastPageTooltip') :\n                    this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            for (var i = 0; i < classList.length; i++) {\n                var element = this.element.querySelector(classList[i]);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            }\n        }\n    };\n    Pager.prototype.isReactTemplate = function () {\n        return this.isReact && this.template && typeof (this.template) !== 'string';\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: isBlazor() ?\n                this.pagerModule.getLocalizedLabel('PagerDropDown') :\n                this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? this.convertValue(pageSizesModule) :\n            [this.pagerModule.getLocalizedLabel('All'), '5', '10', '12', '20']);\n        var defaultValue = this.pagerModule.pageSize;\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue.toString(),\n            change: this.onChange.bind(this),\n            cssClass: 'e-alldrop'\n        });\n        this.dropDownListObject.appendTo(input);\n        if (pageSizesModule.length) {\n            this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();\n        }\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n        this.addEventListener();\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel('All')) {\n            this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;\n            this.refresh();\n            e.value = this.pagerModule.pageSize;\n            if (document.getElementsByClassName('e-popup-open e-alldrop').length) {\n                document.getElementsByClassName('e-popup-open e-alldrop')[0].style.display = 'none';\n            }\n        }\n        else {\n            this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);\n            if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel('pagerDropDown')) {\n                this.refresh();\n            }\n        }\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: parseInt(this.dropDownListObject.value, 10) });\n    };\n    PagerDropDown.prototype.refresh = function () {\n        if (this.pagerModule.pageSize === this.pagerModule.totalRecordsCount) {\n            this.pagerCons.innerHTML = isBlazor() ? this.pagerModule.getLocalizedLabel('PagerAllDropDown') :\n                this.pagerModule.getLocalizedLabel('pagerAllDropDown');\n        }\n        else {\n            this.pagerCons.innerHTML = isBlazor() ? this.pagerModule.getLocalizedLabel('PagerDropDown') :\n                this.pagerModule.getLocalizedLabel('pagerDropDown');\n        }\n    };\n    PagerDropDown.prototype.beforeValueChange = function (prop) {\n        if (typeof prop.newProp.value === 'number') {\n            var val = prop.newProp.value.toString();\n            prop.newProp.value = val;\n        }\n    };\n    PagerDropDown.prototype.convertValue = function (pageSizeValue) {\n        var item = pageSizeValue;\n        for (var i = 0; i < item.length; i++) {\n            item[i] = parseInt(item[i], 10) ? item[i].toString() : this.pagerModule.getLocalizedLabel(item[i]);\n        }\n        return item;\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    PagerDropDown.prototype.addEventListener = function () {\n        this.dropDownListObject.on('beforeValueChange', this.beforeValueChange, this);\n    };\n    PagerDropDown.prototype.removeEventListener = function () {\n        this.dropDownListObject.off('beforeValueChange', this.beforeValueChange);\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.removeEventListener();\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        if (!isNullOrUndefined(this.element)) {\n            this.element.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        this.isInitialRender = true;\n        Pager.Inject(ExternalMessage, PagerDropDown);\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n            this.parent.pageTemplateChange = true;\n        }\n        this.element = this.parent.createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n        this.pagerObj.hasParent = true;\n        this.pagerObj.on('pager-refresh', this.renderReactPagerTemplate, this);\n        this.pagerObj.allowServerDataBinding = false;\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        if (!this.isInitialLoad) {\n            this.pageSettings.currentPage = 1;\n        }\n    };\n    Page.prototype.addAriaAttr = function () {\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = this.parent.createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = this.parent.createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            for (var j = 0; j < classList.length; j++) {\n                var element = this.element.querySelector(classList[j]);\n                if (this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n            }\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.setPageSize = function (pageSize) {\n        this.pagerObj.setPageSize(pageSize);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                if (!isNullOrUndefined(e.newProp) && !isNullOrUndefined(e.newProp.pageSize)) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.setPageSize, arg1: e.newProp.pageSize });\n                    this.pagerObj.pageSize = e.oldProp.pageSize;\n                    gObj.pageSettings.pageSize = e.newProp.pageSize;\n                }\n                else if (e.currentPage) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                    this.pagerObj.currentPage = gObj.pageSettings.currentPage === this.pagerObj.currentPage ?\n                        this.pagerObj.previousPageNo : gObj.pageSettings.currentPage;\n                }\n                this.isForceCancel = true;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.pageSettings.pageSize = this.pagerObj.pageSize;\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        var args = {\n            cancel: false, requestType: 'paging', previousPage: prevPage,\n            currentPage: e.currentPage, type: events.actionBegin\n        };\n        this.parent.notify(events.modelChanged, args);\n        if (args.cancel) {\n            e.cancel = true;\n        }\n        this.parent.requestTypeAction = 'paging';\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.isInitialLoad = true;\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.isReact = this.parent.isReact;\n        this.pagerObj.appendTo(this.element);\n        this.isInitialLoad = false;\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n            if (this.isReactTemplate()) {\n                this.pagerObj.updateTotalPages();\n                this.created();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler,\n            created: this.created\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.isReact) {\n            this.parent.addEventListener('created', this.handlers.created.bind(this));\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    Page.prototype.created = function () {\n        if (this.isInitialRender && this.isReactTemplate()) {\n            this.isInitialRender = false;\n            this.renderReactPagerTemplate();\n        }\n    };\n    Page.prototype.isReactTemplate = function () {\n        return this.parent.isReact && this.pagerObj.template && typeof (this.pagerObj.template) !== 'string';\n    };\n    Page.prototype.renderReactPagerTemplate = function () {\n        if (!this.isInitialRender && this.isReactTemplate()) {\n            this.parent.destroyTemplate(['pagerTemplate']);\n            this.element.classList.add('e-pagertemplate');\n            this.pagerObj.compile(this.pagerObj.template);\n            var page = this.parent.pageSettings;\n            var data = {\n                currentPage: page.currentPage, pageSize: page.pageSize, pageCount: page.pageCount,\n                totalRecordsCount: page.totalRecordsCount, totalPages: this.pagerObj.totalPages\n            };\n            var tempId = this.parent.id + '_pagertemplate';\n            this.pagerObj.templateFn(data, this.parent, 'pagerTemplate', tempId, null, null, this.pagerObj.element);\n            this.parent.renderTemplates();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.isReact) {\n            this.parent.removeEventListener('created', this.handlers.created);\n        }\n        this.parent.off('pager-refresh', this.renderReactPagerTemplate);\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.isReactTemplate()) {\n            this.parent.destroyTemplate(['pagerTemplate']);\n        }\n        this.pagerObj.destroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue, closest } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { appendChildren } from '../base/util';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as events from '../base/constant';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return this.parent.createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    /* tslint:disable-next-line:max-func-body-length */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            if (data) {\n                fltrData[column.field] = data[column.field];\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            if (column.visible) {\n                var isReactCompiler = this.parent.isReact && typeof (column.filterTemplate) !== 'string';\n                var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n                if (isReactCompiler) {\n                    column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID, null, null, node);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    var element = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                    appendChildren(node, element);\n                }\n            }\n            else {\n                node.classList.add('e-hide');\n            }\n        }\n        else {\n            if (column.type !== 'checkbox') {\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    node.classList.add('e-fltrtemp');\n                    attributes(innerDIV, {\n                        'class': 'e-fltrtempdiv'\n                    });\n                    if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                        input = this.parent.createElement('input', {\n                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            attrs: { type: 'search', title: column.headerText }\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                    else {\n                        var args = { column: column, node: Element };\n                        var temp = column.filterBarTemplate.create;\n                        if (typeof temp === 'string') {\n                            temp = getValue(temp, window);\n                        }\n                        input = temp(args);\n                        if (typeof input === 'string') {\n                            var div = this.parent.createElement('div');\n                            div.innerHTML = input;\n                            input = div.firstChild;\n                        }\n                        attributes(innerDIV, {\n                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            title: column.headerText,\n                            id: column.field + '_filterBarcell',\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                }\n                else {\n                    attributes(innerDIV, {\n                        'class': 'e-filterdiv e-fltrinputdiv'\n                    });\n                    input = this.parent.createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n                        attrs: {\n                            type: 'search', title: column.headerText + cell.attributes.title,\n                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                        }\n                    });\n                    innerDIV.appendChild(input);\n                    var args = {\n                        element: input, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.createInput(args, this.parent.createElement);\n                }\n                //TODO: apply intial filtering\n                if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                    input.setAttribute('disabled', 'true');\n                    input.classList.add('e-disable');\n                }\n                if (!column.visible) {\n                    node.classList.add('e-hide');\n                }\n                this.appendHtml(node, innerDIV);\n                // render's the dropdownlist component if showFilterBarOperator sets to true\n                if (this.parent.filterSettings.showFilterBarOperator && this.parent.filterSettings.type === 'FilterBar'\n                    && !this.parent.isPrinting && isNullOrUndefined(column.filterTemplate)) {\n                    this.operatorIconRender(innerDIV, column, cell);\n                }\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    var templateWrite = column.filterBarTemplate.write;\n                    var args = { element: input, column: column };\n                    if (typeof templateWrite === 'string') {\n                        templateWrite = getValue(templateWrite, window);\n                    }\n                    templateWrite.call(this, args);\n                }\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    FilterCellRenderer.prototype.operatorIconRender = function (innerDIV, column, cell) {\n        var gObj = this.parent;\n        var fbicon = this.parent.createElement('input', {\n            className: ' e-filterbaroperator e-icons e-icon-filter',\n            id: cell.column.uid\n        });\n        innerDIV.querySelector('span').appendChild(fbicon);\n        var operators = (column.filter && column.filter.operator) ? column.filter.operator : 'equal';\n        if (!isNullOrUndefined(gObj.filterModule.operators[column.field])) {\n            operators = gObj.filterModule.operators[column.field];\n        }\n        this.dropOptr = new DropDownList({\n            fields: { text: 'text', value: 'value' },\n            popupHeight: 'auto',\n            value: operators,\n            width: '0px',\n            enabled: column.allowFiltering,\n            popupWidth: 'auto',\n            enableRtl: this.parent.enableRtl,\n            change: this.internalEvent.bind(this),\n            beforeOpen: function () {\n                var operator = gObj.filterModule.customOperators;\n                this.dataSource = operator[gObj.getColumnByUid(this.element.id).type + 'Operator'];\n                for (var i = 0; i < this.dataSource.length; i++) {\n                    if (column.filter && column.filter.operator && isNullOrUndefined(gObj.filterModule.operators[column.field]) &&\n                        this.dataSource[i].value === column.filter.operator) {\n                        this.value = column.filter.operator;\n                    }\n                }\n            },\n        });\n        this.dropOptr.appendTo(fbicon);\n        var spanElmt = closest(this.dropOptr.element, 'span');\n        spanElmt.classList.add('e-filterbardropdown');\n        spanElmt.removeAttribute('tabindex');\n    };\n    FilterCellRenderer.prototype.internalEvent = function (e) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByUid(e.element.getAttribute('id'));\n        e.column = col;\n        gObj.filterModule.operators[col.field] = e.value;\n        gObj.notify(events.getFilterBarOperator, e);\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = (!isNullOrUndefined(this.parent.filterSettings.operators) &&\n            !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n            this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = this.parent.createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            cssClass: 'e-popup-flmenu',\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') { // rewuired or not\n            if (col.filter.operator) {\n                var optrLen = Object.keys(this.optrData).length;\n                for (var i = 0; i < optrLen; i++) {\n                    if (this.optrData[i].value === col.filter.operator) {\n                        selValue = this.optrData[i].text;\n                    }\n                }\n            }\n            else {\n                selValue = this.optrData[0].text;\n            }\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Browser, isNullOrUndefined, extend, getValue } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion, eventPromise } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var data;\n        var floptr;\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = this.getAutoCompleteOptions(args);\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        var autoComplete = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return (getValue(_this.actObj.fields.value, mapObj));\n                    }).indexOf(getValue((_this.actObj.fields.value), obj)) === index;\n                });\n            }\n        }, args.column.filter.params));\n        if (dataSource && 'result' in dataSource) {\n            var query = this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n            var defObj = eventPromise({ requestType: 'stringfilterrequest' }, query);\n            this.parent.trigger(events.dataStateChange, defObj.state);\n            var def = defObj.deffered;\n            def.promise.then(function (e) {\n                autoComplete.dataSource = new DataManager(e);\n            });\n        }\n        return autoComplete;\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', this.parent.filterSettings.enableCaseSensitivity);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { extend, isUndefined } from '@syncfusion/ej2-base';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: typeof (args.column.format) === 'string' || isUndefined(args.column.format) ? args.column.format :\n                args.column.format.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        }, args.column.filter.params));\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList(extend({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        }, args.column.filter.params));\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getCustomDateFormat } from '../base/util';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var format = getCustomDateFormat(args.column.format, args.column.type);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        if (args.column.type === 'date') {\n            this.datePickerObj = new DatePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        else if (args.column.type === 'datetime') {\n            this.datePickerObj = new DateTimePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { Browser, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n    }\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) { ///\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function (target) {\n        if (!this.dlgObj) {\n            return;\n        }\n        if (isBlazor()) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['filterTemplate']);\n            this.parent.renderTemplates();\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            var argument = { cancel: false, column: this.col, target: target, element: elem };\n            this.parent.notify(events.filterMenuClose, argument);\n            if (argument.cancel) {\n                return;\n            }\n            this.isDialogOpen = false;\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = this.parent.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('FilterMenuDialogARIA'));\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(target, this.dlgObj, this.parent);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        this.dlgObj.element.style.maxHeight = '350px';\n        this.dlgObj.show();\n        if (!column.filterTemplate) {\n            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.isDialogOpen = true;\n        this.parent.trigger(events.actionComplete, args);\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.parent.log('column_type_missing', { column: col });\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = this.parent.createElement('div', { className: 'e-flmenu-valuediv' });\n        var fObj = this.filterObj;\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            var valueInString = 'value';\n            fltrData[column.field] = fltrData[valueInString] = fObj.values[column.field];\n            if (column.foreignKeyValue) {\n                fltrData[column.foreignKeyValue] = fObj.values[column.field];\n                fltrData[column.field] = undefined;\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            var isReactCompiler = this.parent.isReact && typeof (column.filterTemplate) !== 'string';\n            var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n            if (isReactCompiler) {\n                column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID, null, null, valueDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                var compElement = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                updateBlazorTemplate(tempID, 'FilterTemplate', column);\n                appendChildren(valueDiv, compElement);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n                && !isNullOrUndefined(column.filter.ui.create)) {\n                var temp = column.filter.ui.create;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                temp({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n                });\n            }\n            else {\n                instanceofFilterUI.create({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n                });\n            }\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.uid === column.uid) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (col.filterTemplate) {\n            var element = this.dlgDiv.querySelector('.e-flmenu-valuediv');\n            var fltrValue = void 0;\n            if (element.children[0].value) {\n                fltrValue = element.children[0].value;\n            }\n            else {\n                if (!isBlazor() && !isNullOrUndefined(element.children[0].ej2_instances)) {\n                    fltrValue = element.children[0].ej2_instances[0].value;\n                }\n                else {\n                    var eControl = element.querySelector('.e-control');\n                    fltrValue = col.type === 'boolean' ? eControl.checked :\n                        !isNullOrUndefined(eControl.ej2_instances) ?\n                            eControl.ej2_instances[0].value :\n                            eControl.value;\n                }\n            }\n            this.filterObj.filterByColumn(col.field, flOptrValue, fltrValue);\n        }\n        else {\n            if (!isNullOrUndefined(col.filter) &&\n                !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n                var temp = col.filter.ui.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n            }\n            else {\n                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n            }\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n        var flIcon = column.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.add('e-filtered');\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        if (isBlazor() && !this.parent.isJsComponent) {\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n        }\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    /**\n     * @hidden\n     */\n    FilterMenuRenderer.prototype.getFilterUIInfo = function () {\n        return { field: this.col.field, operator: this.flMuiObj.getFlOperator() };\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","import * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.parent = parent;\n        this.isresetFocus = true;\n        this.checkBoxBase = new CheckBoxFilterBase(parent);\n        this.addEventListener();\n    }\n    /**\n     * To destroy the check box filter.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.removeEventListener();\n        this.checkBoxBase.closeDialog();\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.checkBoxBase.openDialog(options);\n        this.parent.log('column_type_missing', { column: options.column });\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        this.removeEventListener();\n        this.checkBoxBase.closeDialog();\n        if (this.isresetFocus) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    CheckBoxFilter.prototype.actionBegin = function (args) {\n        this.parent.trigger(events.actionBegin, args);\n    };\n    CheckBoxFilter.prototype.actionComplete = function (args) {\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.actionPrevent = function (args) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, args);\n            args.cancel = true;\n        }\n    };\n    CheckBoxFilter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.cBoxFltrBegin, this.actionBegin, this);\n        this.parent.on(events.cBoxFltrComplete, this.actionComplete, this);\n        this.parent.on(events.fltrPrevent, this.actionPrevent, this);\n    };\n    CheckBoxFilter.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.cBoxFltrBegin, this.actionBegin);\n        this.parent.off(events.cBoxFltrComplete, this.actionComplete);\n        this.parent.off(events.fltrPrevent, this.actionPrevent);\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ExcelFilterBase } from '../common/excel-filter-base';\nimport { CheckBoxFilter } from './checkbox-filter';\nimport * as events from '../base/constant';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excelbox filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.parent = parent;\n        _this.isresetFocus = true;\n        _this.excelFilterBase = new ExcelFilterBase(parent, customFltrOperators);\n        return _this;\n    }\n    /**\n     * To destroy the excel filter.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        this.excelFilterBase.closeDialog();\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        this.excelFilterBase.openDialog(options);\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        this.excelFilterBase.closeDialog();\n        if (this.isresetFocus) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        /* tslint:disable-next-line:max-line-length */\n        this.excelFilterBase.filterByColumn(fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue);\n    };\n    /**\n     * @hidden\n     */\n    ExcelFilter.prototype.getFilterUIInfo = function () {\n        return this.excelFilterBase.getFilterUIInfo();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches, isBlazor } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.filterByMethod = true;\n        this.refresh = true;\n        this.values = {};\n        this.operators = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        /** @hidden */\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        /** @hidden */\n        this.skipNumberInput = ['=', ' ', '!'];\n        this.skipStringInput = ['>', '<', '='];\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e)) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                var rowdrag = this.parent.element.querySelector('.e-rowdragheader');\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                if (rowdrag) {\n                    rowdrag.className = 'e-dragheadercell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.filterSettings.columns = [];\n        }\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            var dropdownlist = this.element.querySelectorAll('.e-filterbaroperator');\n            for (var i = 0; i < dropdownlist.length; i++) {\n                dropdownlist[i].ej2_instances[0].destroy();\n            }\n        }\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.getFrozenColumns() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        if (this.parent.isRowDragable()) {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        var arrayVal = Array.isArray(this.value) ? this.value : [this.value];\n        for (var i = 0, len = arrayVal.length; i < len; i++) {\n            var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n            this.currentFilterObject = {\n                field: field, uid: col.uid, isForeignKey: col.isForeignColumn(), operator: this.operator,\n                value: arrayVal[i], predicate: this.predicate,\n                matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n            };\n            var index = this.getFilteredColsIndexByField(col);\n            if (index > -1 && !Array.isArray(this.value)) {\n                this.filterSettings.columns[index] = this.currentFilterObject;\n            }\n            else {\n                this.filterSettings.columns.push(this.currentFilterObject);\n            }\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].uid === col.uid || (col.isForeignColumn() && this.parent.getColumnByUid(col.uid).field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.parent.getHeaderTable().classList.add('e-sortfilter');\n            this.render();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.initialLoad = true;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.initialLoad = false;\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n        this.parent.on('persist-data-changed', this.initialEnd, this);\n        this.parent.on(events.closeFilterDialog, this.clickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.clickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n        this.parent.off(events.closeFilterDialog, this.clickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var _this = this;\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.grabColumnByFieldFromAllCols(fieldName);\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            filterOperator = this.getOperatorName(fieldName);\n        }\n        if (!this.column) {\n            return;\n        }\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: this.column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.predicate = predicate ? predicate : Array.isArray(filterValue) ? 'or' : 'and';\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterCell && this.filterSettings.type === 'FilterBar') {\n            if (filterValue.length < 1 || (!this.filterByMethod &&\n                this.checkForSkipInput(this.column, filterValue))) {\n                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n                this.updateFilterMsg();\n                return;\n            }\n            if (filterCell.value !== filterValue) {\n                filterCell.value = filterValue;\n            }\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n            if (this.initialLoad && this.filterSettings.type === 'FilterBar') {\n                filterCell.value = this.values[this.column.field];\n            }\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        var predObj = {\n            field: this.fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: this.operator,\n            value: this.value,\n            type: this.column.type\n        };\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === _this.fieldName);\n        });\n        if (filterColumn.length > 1 && !isNullOrUndefined(this.actualPredicate[this.fieldName])) {\n            this.actualPredicate[this.fieldName].push(predObj);\n        }\n        else {\n            this.actualPredicate[this.fieldName] = [predObj];\n        }\n        this.addFilteredClass(this.fieldName);\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        this.parent.notify(events.modelChanged, {\n                            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                                this.column.field : undefined, action: 'filter',\n                            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin, cancel: false\n                        });\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'showFilterBarOperator':\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[i].uid);\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.column.field);\n                if (filterElement) {\n                    if (this.cellText[this.filterSettings.columns[i].field] !== ''\n                        && !isNullOrUndefined(this.cellText[this.filterSettings.columns[i].field])) {\n                        filterElement.value = this.cellText[this.column.field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[i].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function (fields) {\n        var _this = this;\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (!isNullOrUndefined(fields)) {\n            this.refresh = false;\n            fields.forEach(function (field) { _this.removeFilteredColsByField(field, false); });\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n            this.parent.renderModule.refresh();\n            this.refresh = true;\n            return;\n        }\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0; i < cols.length; i++) {\n            cols[i].uid = cols[i].uid || this.parent.getColumnByField(cols[i].field).uid;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredcols = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        this.refresh = false;\n        for (var i = 0, len = filteredcols.length; i < len; i++) {\n            this.removeFilteredColsByField(this.parent.getColumnByUid(filteredcols[i]).field, false);\n        }\n        if (isBlazor() && !this.parent.isJsComponent) {\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n        }\n        this.refresh = true;\n        if (filteredcols.length) {\n            this.parent.renderModule.refresh();\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        var gObj = this.parent;\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n        var dataSource = col.filter.dataSource || gObj.dataSource && 'result' in gObj.dataSource ? gObj.dataSource :\n            gObj.getDataModule().dataManager;\n        this.filterModule.openDialog({\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format, height: 800, columns: gObj.getColumns(),\n            filteredColumns: gObj.filterSettings.columns, target: target, dataManager: gObj.getDataModule().dataManager,\n            formatFn: col.getFormatter(), ignoreAccent: gObj.filterSettings.ignoreAccent,\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: gObj.localeObj,\n            isRemote: gObj.getDataModule().isRemote(), allowCaseSensitive: this.filterSettings.enableCaseSensitivity\n        });\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredColsUid = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        var _loop_1 = function (i, len) {\n            cols[i].uid = cols[i].uid || this_1.parent.getColumnByField(cols[i].field).uid;\n            var len_1 = cols.length;\n            var column = this_1.parent.grabColumnByUidFromAllCols(filteredColsUid[i]);\n            if (column.field === field || (column.field === column.foreignKeyValue && column.isForeignColumn())) {\n                var currentPred = this_1.filterSettings.columns.filter(function (e) {\n                    return e.uid === column.uid;\n                })[0];\n                if (this_1.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + column.field + '_filterBarcell\\']';\n                    fCell = this_1.parent.getHeaderContent().querySelector(selector);\n                    if (fCell) {\n                        fCell.value = '';\n                        delete this_1.values[field];\n                    }\n                }\n                while (len_1--) {\n                    if (cols[len_1].uid === column.uid) {\n                        cols.splice(len_1, 1);\n                    }\n                }\n                var fltrElement = this_1.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this_1.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this_1.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this_1.isRemove = true;\n                if (this_1.actualPredicate[field]) {\n                    delete this_1.actualPredicate[field];\n                }\n                if (this_1.values[field]) {\n                    delete this_1.values[field];\n                }\n                if (this_1.refresh) {\n                    if (isBlazor() && !this_1.parent.isJsComponent) {\n                        this_1.parent.setProperties({ filterSettings: { columns: this_1.filterSettings.columns } }, true);\n                        this_1.parent.notify(events.modelChanged, {\n                            requestType: 'filtering', type: events.actionBegin, currentFilterObject: {\n                                field: column.field, operator: this_1.operator, value: this_1.value, predicate: this_1.predicate,\n                                matchCase: this_1.matchCase, ignoreAccent: this_1.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                            }, currentFilterColumn: column\n                        });\n                    }\n                    else {\n                        this_1.parent.notify(events.modelChanged, {\n                            requestType: 'filtering', type: events.actionBegin, currentFilterObject: currentPred,\n                            currentFilterColumn: column, action: 'clearFilter'\n                        });\n                    }\n                }\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = filteredColsUid.length; i < len; i++) {\n            var state_1 = _loop_1(i, len);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandlerImmediate = function (e) {\n        if (e.keyCode !== 13) {\n            this.keyUpHandler(e);\n        }\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if (e.action === 'altDownArrow' && this.parent.filterSettings.showFilterBarOperator) {\n                var dropDownListInput = closest(target, 'span').querySelector('.e-filterbaroperator');\n                dropDownListInput.ej2_instances[0].showPopup();\n                dropDownListInput.focus();\n            }\n            if ((this.filterSettings.mode === 'Immediate' || (e.keyCode === 13 &&\n                !e.target.classList.contains('e-filterbaroperator')))\n                && e.keyCode !== 9) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n        if (e.action === 'altDownArrow' && this.filterSettings.type !== 'FilterBar') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openMenuByField(column.field);\n                this.parent.focusModule.clearIndicator();\n            }\n        }\n        if (e.action === 'escape' && this.filterSettings.type === 'Menu' && this.filterModule) {\n            this.filterModule.closeDialog();\n            gObj.notify(events.restoreFocus, {});\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.grabColumnByUidFromAllCols(columns[index].uid) || gObj.grabColumnByFieldFromAllCols(columns[index].field);\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            this.valueFormatter.fromView(this.values[column.field], column.getParser(), column.type) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater_1 = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater_1.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        if (column.type === 'number') {\n            if (DataUtil.operatorSymbols[value] || this.skipNumberInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (this.skipStringInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.getFrozenColumns()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByMethod = false;\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.filterSettings.enableCaseSensitivity, this.ignoreAccent);\n        this.filterByMethod = true;\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        switch (this.column.type) {\n            case 'number':\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    if (this.column.filter.operator) {\n                        this.operator = this.column.filter.operator;\n                    }\n                    else {\n                        this.operator = this.filterOperators.startsWith;\n                    }\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    /** @hidden */\n    Filter.prototype.openMenuByField = function (field) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(field);\n        var header = gObj.getColumnHeaderByField(field);\n        var target = header.querySelector('.e-filtermenudiv');\n        if (!target) {\n            return;\n        }\n        var gClient = gObj.element.getBoundingClientRect();\n        var fClient = target.getBoundingClientRect();\n        this.filterDialogOpen(column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n    };\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.openMenuByField(col.field);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            if (parentsUntil(e.target, 'e-filterbarcell') &&\n                e.target.classList.contains('e-input-group-icon')) {\n                closest(e.target, 'div').querySelector('.e-filterbaroperator').focus();\n            }\n            if (e.target.classList.contains('e-list-item')) {\n                var inputId = document.querySelector('.e-popup-open').getAttribute('id').replace('_popup', '');\n                if (inputId.indexOf('grid-column') !== -1) {\n                    closest(document.getElementById(inputId), 'div').querySelector('.e-filtertext').focus();\n                }\n            }\n        }\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            var dialog = parentsUntil(this.parent.element, 'e-dialog');\n            var hasDialog = false;\n            var popupEle = parentsUntil(target, 'e-popup');\n            var hasDialogClosed = this.parent.element.querySelector('.e-filter-popup');\n            if (dialog && popupEle) {\n                hasDialog = dialog.id === popupEle.id;\n            }\n            if (target.classList.contains('e-excel-ascending') || target.classList.contains('e-excel-descending')) {\n                this.filterModule.closeDialog(target);\n            }\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule && (!parentsUntil(target, 'e-popup-wrapper')\n                && (!closest(target, '.e-filter-item.e-menu-item'))) && !datepickerEle) {\n                if ((hasDialog && (!parentsUntil(target, 'e-filter-popup'))\n                    && (!parentsUntil(target, 'e-popup-flmenu'))) || (!popupEle && hasDialogClosed)) {\n                    this.filterModule.isresetFocus = parentsUntil(target, 'e-grid') &&\n                        parentsUntil(target, 'e-grid').id === this.parent.element.id;\n                    this.filterModule.closeDialog(target);\n                }\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (args.action === 'clear-filter' && isBlazor() && !this.parent.isJsComponent) {\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            args.requestType = 'filtering';\n            this.parent.renderModule.refresh(args); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        this.actualPredicate = {};\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            /* tslint:disable-next-line:max-line-length */\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent, cols[i].uid);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent, uid) {\n        var obj;\n        obj = {\n            field: fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: operator,\n            value: value,\n            type: type\n        };\n        this.actualPredicate[fieldName] ? this.actualPredicate[fieldName].push(obj) : this.actualPredicate[fieldName] = [obj];\n        var field = uid ? this.parent.grabColumnByUidFromAllCols(uid).field : fieldName;\n        this.addFilteredClass(field);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        if (this.parent.showColumnMenu) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-columnmenu');\n        }\n        else if (this.parent.getColumnByField(fieldName)) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        }\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.getFilterUIInfo = function () {\n        return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.getOperatorName = function (field) {\n        return document.getElementById(this.parent.getColumnByField(field).uid).ej2_instances[0].value;\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, detach, formatUnit, Browser, closest, isBlazor, extend } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil } from '../base/util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.autoFit = function () {\n        var newarray = this.parent.getColumns().filter(function (c) { return c.autoFit === true; })\n            .map(function (c) { return c.field || c.headerText; });\n        if (newarray.length > 0) {\n            this.autoFitColumns(newarray);\n        }\n        if (this.parent.resizeSettings.mode === 'Auto') {\n            this.widthService.setWidthToTable();\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var footerDivTag = 'e-gridfooter';\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var footerTextClone;\n        var columnIndexByField = this.parent.getColumnIndexByField(fName);\n        var frzCols = gObj.getFrozenColumns();\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (frzCols) {\n            if (index < frzCols) {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                if (footerTable) {\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                }\n            }\n            else {\n                headerTable = gObj.getHeaderContent().querySelector('.e-movableheader').children[0];\n                contentTable = gObj.getContent().querySelector('.e-movablecontent').children[0];\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n                if (footerTable) {\n                    footerTable = gObj.getFooterContent().querySelector('.e-movablefootercontent').children[0];\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n                }\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            if (footerTable) {\n                footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            }\n        }\n        var indentWidthClone = headerTable.querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        var footerText = [];\n        if (footerTable) {\n            for (var i = 0; i < footerTextClone.length; i++) {\n                footerText[i] = footerTextClone[i].cloneNode(true);\n            }\n        }\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var wFooter = null;\n        if (footerText.length) {\n            wFooter = this.createTable(footerTable, footerText, footerDivTag);\n        }\n        var columnbyindex = gObj.getColumns()[columnIndexByField];\n        var result;\n        var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n        var colMaxWidth = columnbyindex.maxWidth && parseFloat(columnbyindex.maxWidth.toString());\n        if (parseInt(width, 10) > colMaxWidth) {\n            columnbyindex.width = colMaxWidth;\n        }\n        this.widthService.setColumnWidth(gObj.getColumns()[columnIndexByField]);\n        result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            var element = gObj.getColumns();\n            for (var i = 0; i < element.length; i++) {\n                if (element[i].visible) {\n                    tWidth = tWidth + parseFloat(element[i].width);\n                }\n            }\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.getFrozenColumns()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            if (this.parent.resizeSettings.mode === 'Auto') {\n                calcTableWidth = '100%';\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        for (var i = 0; i < fName.length; i++) {\n            var fieldName = fName[i];\n            var columnIndex = this.parent.getColumnIndexByField(fieldName);\n            var column = this.parent.getColumns()[columnIndex];\n            if (columnIndex > -1 && !isNullOrUndefined(column) && column.visible === true) {\n                this.resizeColumn(fieldName, columnIndex);\n            }\n        }\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        for (var i = 0; i < text.length; i++) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(text[i]);\n            myTable.appendChild(tr);\n        }\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n        this.parent.on(events.contentReady, this.autoFit, this);\n        this.parent.on(events.refreshHandlers, this.refreshHeight, this);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n        this.parent.off(events.refreshHandlers, this.refreshHeight);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        var element = this.getResizeHandlers();\n        for (var i = 0; i < element.length; i++) {\n            if (element[i].parentElement.offsetHeight > 0) {\n                element[i].style.height = element[i].parentElement.offsetHeight + 'px';\n            }\n        }\n        this.setHandlerHeight();\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.getFrozenColumns() ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        var element = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress));\n        for (var i = 0; i < element.length; i++) {\n            element[i].style.height = element[i].parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            if (col.columns) {\n                return;\n            }\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    if (this.parent.allowGrouping) {\n                        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                            this.widthService.setColumnWidth(new Column({ width: '30px' }), i);\n                        }\n                    }\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.refreshStackedColumnWidth();\n                this.element = e.target;\n                if (this.parent.getVisibleFrozenColumns()) {\n                    var mtbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                    var ftbody = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n                    var mtr = mtbody.querySelectorAll('tr');\n                    var ftr = ftbody.querySelectorAll('tr');\n                    for (var i = 0; i < mtr.length; i++) {\n                        if (this.parent.rowHeight) {\n                            mtr[i].style.height = this.parent.rowHeight + 'px';\n                            ftr[i].style.height = this.parent.rowHeight + 'px';\n                        }\n                        else {\n                            mtr[i].style.removeProperty('height');\n                            ftr[i].style.removeProperty('height');\n                        }\n                    }\n                }\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.parent.enableRtl) {\n                    this.minMove = parseFloat(this.column.width.toString())\n                        - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                        - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = void 0;\n                if (!isBlazor() || this.parent.isJsComponent) {\n                    args = { e: e, column: this.column };\n                }\n                else {\n                    var clonedColumn = extend({}, this.column);\n                    args = { column: clonedColumn };\n                }\n                this.parent.trigger(events.resizeStart, args, function (args) {\n                    if (args.cancel || _this.parent.isEdit) {\n                        _this.cancelResizeAction();\n                        return;\n                    }\n                    EventHandler.add(document, Browser.touchEndEvent, _this.resizeEnd, _this);\n                    EventHandler.add(_this.parent.element, Browser.touchMoveEvent, _this.resizing, _this);\n                    _this.updateCursor('add');\n                });\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.updateResizeEleHeight = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[i].style.height = this.element.parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.getColData = function (column, mousemove) {\n        return {\n            width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0'\n                : this.widthService.getWidth(column).toString()) + mousemove,\n            minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n            maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n        };\n    };\n    Resize.prototype.resizing = function (e) {\n        if (isNullOrUndefined(this.column)) {\n            return;\n        }\n        var offsetWidth = 0;\n        if (isNullOrUndefined(this.column)) {\n            offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = this.getColData(this.column, mousemove);\n        if (!colData.width) {\n            colData.width = closest(this.element, 'th').offsetWidth;\n        }\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        this.parent.log('resize_min_max', { column: this.column, width: width });\n        if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n            width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ?\n            offsetWidth.toString() : this.column.width.toString())) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            var columns = [this.column];\n            var finalColumns = [this.column];\n            if (this.column.columns) {\n                columns = this.getSubColumns(this.column, []);\n                columns = this.calulateColumnsWidth(columns, false, mousemove);\n                finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n            }\n            for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n                var col = finalColumns_1[_i];\n                this.widthService.setColumnWidth(col, null, 'resize');\n            }\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n        var finalColumns = [];\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            var totalWidth = 0;\n            for (var i = 0; i < columns.length; i++) {\n                totalWidth += parseFloat(columns[i].width.toString());\n            }\n            var colData = this.getColData(col, (parseFloat(col.width)) * mousemove / totalWidth);\n            var colWidth = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n            if ((colWidth !== parseFloat(col.width.toString()))) {\n                if (isUpdate) {\n                    col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n                }\n                finalColumns.push(col);\n            }\n        }\n        return finalColumns;\n    };\n    Resize.prototype.getSubColumns = function (column, subColumns) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false && col.allowResizing) {\n                if (col.columns) {\n                    this.getSubColumns(col, subColumns);\n                }\n                else {\n                    subColumns.push(col);\n                }\n            }\n        }\n        return subColumns;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args;\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args = { e: e, column: this.column };\n        }\n        else {\n            var clonedColumn = extend({}, this.column);\n            args = { column: clonedColumn };\n        }\n        var content = this.parent.getContent().querySelector('.e-content');\n        var cTable = content.querySelector('.e-movablecontent') ? content.querySelector('.e-movablecontent') : content;\n        if (cTable.scrollHeight > cTable.clientHeight) {\n            this.parent.scrollModule.setPadding();\n            cTable.style.overflowY = 'scroll';\n        }\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.getFrozenColumns()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.parent.notify(events.textWrapRefresh, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderContent().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_2 = columns; _b < columns_2.length; _b++) {\n                var column = columns_2[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.refreshStackedColumnWidth = function () {\n        for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n            var stackedColumn = _a[_i];\n            stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n        }\n    };\n    Resize.prototype.getStackedWidth = function (column, width) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false) {\n                if (col.columns) {\n                    this.getStackedWidth(col, width);\n                }\n                else {\n                    width += col.width;\n                }\n            }\n        }\n        return width;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n        var uid = cell.getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (rect.parentElement.children.length !== frzCols) {\n                tr.splice(0, tr.length / 2);\n            }\n            else {\n                tr.splice(tr.length / 2, tr.length / 2);\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length && i > -1; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.getFrozenColumns()) {\n            var table = closest(rect, '.e-table');\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = parentsUntil(elem, 'e-grid') || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n        var bool = col ? !col.lockColumn : true;\n        return ((srcElem.parentElement.isEqualNode(destElem.parentElement) || this.parent.enableColumnVirtualization)\n            || (this.parent.getFrozenColumns()\n                && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                    === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column });\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n                this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column, destColumn: destColumn });\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.columns.filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n                this.destElement = destElem;\n                if (uid) {\n                    this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n                }\n                else {\n                    var headers = this.getHeaderCells();\n                    var oldIdx = getElementIndex(this.element, headers);\n                    var columns = this.getColumnsModel(this.parent.columns);\n                    var column_2 = columns[oldIdx];\n                    this.moveColumns(newIndex, column_2);\n                }\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn, preventRefresh) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (((this.parent.getFrozenColumns() && parent) || this.parent.lockcolPositionCount) && !reorderByColumn) {\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].field === column.field) {\n                    srcIdx = i;\n                    break;\n                }\n            }\n            var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n            if (col) {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].field === col.field) {\n                        destIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].headerText === this.destElement.innerText.trim()) {\n                        destIndex = i;\n                    }\n                }\n            }\n        }\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        if (preventRefresh !== false) {\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'reorder', fromIndex: destIndex, toIndex: srcIdx, toColumnUid: column.uid\n            });\n        }\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = this.getHeaderCells();\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        var frozenColumns = this.parent.getFrozenColumns();\n        if (frozenColumns || this.parent.lockcolPositionCount) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            if (frozenColumns) {\n                var mRows = [].slice.call(this.parent.getHeaderContent()\n                    .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n                for (var i = 0; i < fRows.length; i++) {\n                    fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                    var isAvail = void 0;\n                    for (var k = 0; k < fTh.length; k++) {\n                        for (var j = 0; j < mTh.length; j++) {\n                            if (mTh[j].innerText === fTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([fTh[k]]);\n                        }\n                    }\n                    for (var j = 0; j < mTh.length; j++) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < fRows.length; i++) {\n                    mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    for (var k = 0; k < mTh.length; k++) {\n                        var isAvail = void 0;\n                        for (var j = k + 1; j < mTh.length; j++) {\n                            if (mTh[j].innerText === mTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([mTh[k]]);\n                        }\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n        var fColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === fromFName; })[0]\n            : this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === toFName; })[0]\n            : this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn)) ||\n            (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: fColumn, destColumn: toColumn });\n            return;\n        }\n        var column = toColumn;\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, fColumn, true);\n        }\n    };\n    Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n        var toIndex = this.parent.getColumnIndexByField(toFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if (toIndex < 0 || (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn))) {\n            return;\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByField(fromFNames[i]);\n            if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n                return;\n            }\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByIndex(toIndex);\n            var parent_1 = this.getColParent(column, this.parent.columns);\n            var columns = parent_1 ? parent_1.columns : this.parent.columns;\n            var destIndex = inArray(column, columns);\n            if (destIndex > -1) {\n                this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true, !(isBlazor() && !this.parent.isJsComponent));\n            }\n            if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n                toIndex++; //R to L\n            }\n        }\n        if (isBlazor() && !this.parent.isJsComponent) {\n            var cols_1 = this.parent.getColumns();\n            this.parent.notify(events.modelChanged, {\n                fromColumnUid: fromFNames.map(function (name) { return cols_1.filter(function (col) { return col.field === name; })[0].uid; }),\n                toColumnUid: toColumn.uid,\n                isMultipleReorder: true,\n                requestType: 'reorder',\n                type: 'actionBegin'\n            });\n        }\n    };\n    Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n        if (toIndex > -1) {\n            this.moveColumns(toIndex, column, true);\n        }\n    };\n    Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n        var column = this.parent.getColumnByField(fieldName);\n        this.moveTargetColumn(column, toIndex);\n    };\n    Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n        for (var i = 0; i < fieldName.length; i++) {\n            this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string | string[]} fromFName - Defines the origin field names.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        if (typeof fromFName === 'string') {\n            this.reorderSingleColumn(fromFName, toFName);\n            this.fromCol = fromFName;\n        }\n        else {\n            this.reorderMultipleColumns(fromFName, toFName);\n            this.fromCol = fromFName[0];\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        var column = this.parent.getColumnByIndex(fromIndex);\n        this.moveTargetColumn(column, toIndex);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {string | string[]} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        typeof fieldName === 'string' ? this.reorderSingleColumnByTarget(fieldName, toIndex) :\n            this.reorderMultipleColumnByTarget(fieldName, toIndex);\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function (e) {\n        if (e && e.args.isXaxis) {\n            this.setDisplay('none');\n        }\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n        var target = this.fromCol && this.parent.getColumnHeaderByField(this.fromCol);\n        if (target) {\n            this.parent.focusModule.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlLeftArrow':\n            case 'ctrlRightArrow':\n                var element = gObj.focusModule.currentInfo.element;\n                if (element && element.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                    var visibleCols = gObj.getVisibleColumns();\n                    var index = visibleCols.indexOf(column);\n                    var toCol = e.action === 'ctrlLeftArrow' ? visibleCols[index - 1] : visibleCols[index + 1];\n                    if (toCol && toCol.field && column.field) {\n                        this.reorderColumns(column.field, toCol.field);\n                    }\n                }\n                break;\n        }\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var content = gObj.getFrozenColumns() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        var isLeft = this.x > getPosition(e.event).x + content.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader')\n            .getBoundingClientRect().left : cliRect.left;\n        var cliRectBaseRight = cliRect.right;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        if (this.parent.getFrozenColumns() && target.classList.contains('e-headercell')) {\n            var col = this.parent.getColumnByUid(target.firstElementChild.getAttribute('e-mappinguid'));\n            var fhdrWidth = Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right);\n            var mhdrRight = Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);\n            if (col && this.parent.getNormalizedColumnIndex(col.uid) >= this.parent.getFrozenColumns()\n                && ((isLeft && Math.round(cliRect.left) < fhdrWidth) || (!isLeft && mhdrRight < cliRect.right))) {\n                return;\n            }\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var content = gObj.getFrozenColumns() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        this.x = getPosition(e.event).x + content.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition, addRemoveActiveClasses, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { Scroll } from '../actions/scroll';\nimport { Query } from '@syncfusion/ej2-data';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        this.selectedRows = [];\n        this.isOverflowBorder = true;\n        this.selectedRowColls = [];\n        this.isRefresh = true;\n        this.isReplaceDragEle = true;\n        /* tslint:disable-next-line:max-line-length */\n        // tslint:disable-next-line:max-func-body-length\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var visualElement = _this.parent.createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = _this.parent.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = _this.parent.createElement('tbody');\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (gObj.rowDropSettings.targetID && (!target.classList.contains('e-selectionbackground')\n                    && gObj.selectionSettings.type !== 'Single')) ||\n                (!gObj.rowDropSettings.targetID && !parentsUntil(e.sender.target, 'e-rowdragdrop'))) {\n                return false;\n            }\n            if (gObj.rowDropSettings.targetID &&\n                gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                gObj.selectRow(parseInt(_this.draggable.currentStateTarget.parentElement.getAttribute('aria-rowindex'), 10));\n            }\n            _this.startedRow = closestElement(target, 'tr').cloneNode(true);\n            var frzCols = _this.parent.getFrozenColumns();\n            if (frzCols) {\n                var rowIndex = parseInt(closestElement(target, 'tr').getAttribute('aria-rowindex'), 10);\n                _this.startedRow.innerHTML = _this.parent.getRows()[rowIndex].innerHTML +\n                    _this.parent.getMovableRows()[rowIndex].innerHTML;\n            }\n            _this.processArgs(target);\n            var args = {\n                selectedRow: _this.rows, dragelement: target,\n                cloneElement: visualElement, cancel: false, data: _this.rowData\n            };\n            var selectedRows = gObj.getSelectedRows();\n            gObj.trigger(events.rowDragStartHelper, args);\n            var cancel = 'cancel';\n            var cloneElement = 'cloneElement';\n            if (args[cancel]) {\n                return false;\n            }\n            removeElement(_this.startedRow, '.e-indentcell');\n            removeElement(_this.startedRow, '.e-detailrowcollapse');\n            removeElement(_this.startedRow, '.e-detailrowexpand');\n            _this.removeCell(_this.startedRow, 'e-gridchkbox');\n            var exp = new RegExp('e-active', 'g'); //high contrast issue\n            _this.startedRow.innerHTML = _this.startedRow.innerHTML.replace(exp, '');\n            tbody.appendChild(_this.startedRow);\n            if (gObj.getSelectedRowIndexes().length > 1 && _this.startedRow.hasAttribute('aria-selected')) {\n                var dropCountEle = _this.parent.createElement('span', {\n                    className: 'e-dropitemscount', innerHTML: frzCols ? '' + selectedRows.length / 2 : '' + selectedRows.length,\n                });\n                visualElement.appendChild(dropCountEle);\n            }\n            var ele = closestElement(target, 'tr').querySelector('.e-icon-rowdragicon');\n            if (ele) {\n                ele.classList.add('e-dragstartrow');\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            var target = e.target;\n            var spanCssEle = _this.parent.element.querySelector('.e-dropitemscount');\n            if (_this.parent.getSelectedRecords().length > 1 && spanCssEle) {\n                spanCssEle.style.left = _this.parent.element.querySelector('.e-cloneproperties table')\n                    .offsetWidth - 5 + 'px';\n            }\n            _this.processArgs(target);\n            gObj.trigger(events.rowDragStart, {\n                rows: (isBlazor()) ? null : _this.rows, target: (isBlazor()) ? null : e.target,\n                draggableType: 'rows', fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                data: (Object.keys(_this.rowData[0]).length > 0) ? _this.rowData : _this.currentViewData()\n            });\n            if (isBlazor()) {\n                e.bindEvents(e.dragElement);\n            }\n            _this.dragStartData = _this.rowData;\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances &&\n                dropElem.ej2_instances[0].getModuleName() === 'grid') {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur', 'e-movecur']);\n            _this.isOverflowBorder = true;\n            _this.hoverState = gObj.enableHover;\n            var trElement = parentsUntil(target, 'e-grid') ? closestElement(e.target, 'tr') : null;\n            gObj.enableHover = false;\n            if (!e.target) {\n                return;\n            }\n            _this.processArgs(target);\n            var args = {\n                rows: _this.rows, target: target, draggableType: 'rows',\n                data: _this.rowData, originalEvent: e, cancel: false\n            };\n            gObj.trigger(events.rowDrag, args);\n            _this.stopTimer();\n            if (args.cancel) {\n                return;\n            }\n            gObj.element.classList.add('e-rowdrag');\n            _this.dragTarget = trElement && parentsUntil(target, 'e-grid').id === cloneElement.parentElement.id ?\n                parseInt(trElement.getAttribute('aria-rowindex'), 10) : parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10);\n            if (gObj.rowDropSettings.targetID) {\n                if (!parentsUntil(target, 'e-grid') ||\n                    parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                }\n            }\n            else {\n                var elem = parentsUntil(target, 'e-grid');\n                if (elem && elem.id === cloneElement.parentElement.id) {\n                    classList(cloneElement, ['e-movecur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-movecur']);\n                }\n            }\n            if (!gObj.rowDropSettings.targetID &&\n                (!gObj.groupSettings.columns.length || e.target.classList.contains('e-selectionbackground'))) {\n                if (parentsUntil(target, 'e-grid')) {\n                    _this.updateScrollPostion(e.event, target);\n                }\n                if ((_this.isOverflowBorder || _this.parent.frozenRows > _this.dragTarget) &&\n                    parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10) !== _this.dragTarget) {\n                    _this.moveDragRows(e, _this.startedRow, trElement);\n                }\n                else {\n                    if (trElement && _this.parent.getRowByIndex(_this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') ===\n                        trElement.getAttribute('data-uid')) {\n                        var bottomborder = _this.parent.createElement('div', { className: 'e-lastrow-dragborder' });\n                        var gridcontentEle = _this.parent.getContent();\n                        bottomborder.style.width = _this.parent.element.offsetWidth - _this.getScrollWidth() + 'px';\n                        if (!gridcontentEle.querySelectorAll('.e-lastrow-dragborder').length) {\n                            gridcontentEle.classList.add('e-grid-relative');\n                            gridcontentEle.appendChild(bottomborder);\n                            bottomborder.style.bottom = _this.getScrollWidth() + 'px';\n                        }\n                    }\n                    _this.removeBorder(trElement);\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            if (isActionPrevent(_this.parent)) {\n                _this.parent.notify(events.preventBatch, {\n                    instance: _this, handler: _this.processDragStop, arg1: e\n                });\n            }\n            else {\n                _this.processDragStop(e);\n            }\n        };\n        this.processDragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var targetEle = _this.getElementFromPosition(e.helper, e.event);\n            var target = targetEle && !targetEle.classList.contains('e-dlg-overlay') ?\n                targetEle : e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElement = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElement && dropElement.ej2_instances &&\n                dropElement.ej2_instances[0].getModuleName() === 'grid') {\n                dropElement.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            if (gObj.isRowDragable()) {\n                _this.stopTimer();\n                gObj.enableHover = _this.hoverState;\n                _this.parent.getContent().classList.remove('e-grid-relative');\n                _this.removeBorder(targetEle);\n                var stRow = gObj.element.querySelector('.e-dragstartrow');\n                if (stRow) {\n                    stRow.classList.remove('e-dragstartrow');\n                }\n            }\n            _this.processArgs(target);\n            var args = {\n                target: (isBlazor()) ? null : target, draggableType: 'rows',\n                cancel: false,\n                fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                dropIndex: _this.dragTarget, rows: (isBlazor()) ? null : _this.rows,\n                data: (Object.keys(_this.dragStartData[0]).length > 0) ? _this.dragStartData : _this.currentViewData()\n            };\n            gObj.trigger(events.rowDrop, args, function () {\n                if (!(parentsUntil(target, 'e-row') || parentsUntil(target, 'e-emptyrow')) || args.cancel) {\n                    _this.dragTarget = null;\n                    remove(e.helper);\n                    return;\n                }\n                _this.isRefresh = false;\n                var selectedIndexes = _this.parent.getSelectedRowIndexes();\n                if (gObj.isRowDragable()) {\n                    if (!isBlazor()) {\n                        if (!_this.parent.rowDropSettings.targetID &&\n                            _this.startedRow.querySelector('td.e-selectionbackground') && selectedIndexes.length > 1 &&\n                            selectedIndexes.length !== _this.parent.getCurrentViewRecords().length) {\n                            _this.reorderRows(selectedIndexes, args.dropIndex);\n                        }\n                        else {\n                            _this.reorderRows([parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10)], _this.dragTarget);\n                        }\n                    }\n                    else {\n                        var draggedData = _this.parent.getSelectedRecords().length ?\n                            _this.parent.getSelectedRecords() : _this.currentViewData();\n                        var changeRecords = {\n                            addedRecords: [],\n                            deletedRecords: draggedData,\n                            changedRecords: []\n                        };\n                        var toIdx = _this.dragTarget ? _this.dragTarget : args.dropIndex;\n                        var dragDropDestinationIndex = 'dragDropDestinationIndex';\n                        var query = new Query;\n                        query[dragDropDestinationIndex] = toIdx;\n                        _this.saveChange(changeRecords, query);\n                        changeRecords.deletedRecords = [];\n                        changeRecords.addedRecords = draggedData;\n                        _this.saveChange(changeRecords, query);\n                    }\n                    _this.dragTarget = null;\n                    if (!gObj.rowDropSettings.targetID) {\n                        remove(e.helper);\n                        gObj.refresh();\n                    }\n                }\n                _this.isRefresh = true;\n            });\n        };\n        this.removeCell = function (targetRow, className) {\n            return [].slice.call(targetRow.querySelectorAll('td')).filter(function (cell) {\n                if (cell.classList.contains(className)) {\n                    targetRow.deleteCell(cell.cellIndex);\n                }\n            });\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.onDataBoundFn = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.currentViewData = function () {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var currentVdata = [];\n        var fromIdx = parseInt(this.startedRow.getAttribute('aria-rowindex'), 10);\n        for (var i = 0, n = selectedIndexes.length; i < n; i++) {\n            var currentV = 'currentViewData';\n            currentVdata[i] = this.parent[currentV][selectedIndexes[i]];\n        }\n        if (!this.parent.rowDropSettings.targetID && selectedIndexes.length === 0) {\n            currentVdata[0] = this.parent.currentViewData[fromIdx];\n        }\n        return currentVdata;\n    };\n    RowDD.prototype.saveChange = function (changeRecords, query) {\n        var _this = this;\n        this.parent.getDataModule().saveChanges(changeRecords, this.parent.getPrimaryKeyFieldNames()[0], {}, query)\n            .then(function () {\n            _this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }).catch(function (e) {\n            var error = 'error';\n            var message = 'message';\n            if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                e[error] = e[error][message];\n            }\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    RowDD.prototype.reorderRows = function (fromIndexes, toIndex) {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var selectedRecords = [];\n        var draggedRecords = [];\n        var currentViewData = this.parent.renderModule.data.dataManager.dataSource.json;\n        var dropIdx = toIndex;\n        var actualIdx = fromIndexes[0];\n        for (var i = 0, len = fromIndexes.length; i < len; i++) {\n            draggedRecords[i] = currentViewData[fromIndexes[i]];\n        }\n        for (var i = 0, len = selectedIndexes.length; i < len; i++) {\n            selectedRecords[i] = currentViewData[selectedIndexes[i]];\n        }\n        for (var i = 0, len = draggedRecords.length; i < len; i++) {\n            if (i !== 0) {\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) ===\n                        JSON.stringify(draggedRecords[i])) {\n                        actualIdx = j;\n                        break;\n                    }\n                }\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(draggedRecords[i - 1])) {\n                        if (actualIdx > j) {\n                            dropIdx = j + 1;\n                        }\n                        break;\n                    }\n                }\n            }\n            this.reorderRow(actualIdx, dropIdx);\n        }\n        if (this.isRefresh) {\n            this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n        for (var i = 0, len = selectedRecords.length; i < len; i++) {\n            for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(selectedRecords[i])) {\n                    selectedIndexes[i] = j;\n                    break;\n                }\n            }\n        }\n        this.selectedRowColls = selectedIndexes;\n    };\n    RowDD.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        this.draggable = new Draggable(gObj.element, {\n            dragTarget: '.e-rowcelldrag, .e-rowdragdrop, .e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            isReplaceDragEle: this.isReplaceDragEle,\n        });\n    };\n    RowDD.prototype.updateScrollPostion = function (e, target) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var y = getPosition(e).y;\n        var cliRect = this.parent.getContent().getBoundingClientRect();\n        var rowHeight = this.parent.getRowHeight() - 15;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (cliRect.top + rowHeight >= y) {\n            var scrollPixel_1 = -(this.parent.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_1, true); }, 200);\n        }\n        else if (cliRect.top + this.parent.getContent().clientHeight - rowHeight - 33 <= y) {\n            var scrollPixel_2 = (this.parent.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_2, true); }, 200);\n        }\n    };\n    RowDD.prototype.setScrollDown = function (scrollElem, scrollPixel, isLeft) {\n        scrollElem.scrollTop = scrollElem.scrollTop + scrollPixel;\n    };\n    RowDD.prototype.moveDragRows = function (e, startedRow, targetRow) {\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        var element = closestElement(e.target, 'tr');\n        if (parentsUntil(element, 'e-grid') &&\n            parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(element, 'e-grid').id) {\n            var targetElement = element ?\n                element : this.startedRow;\n            this.setBorder(targetElement, e.event, startedRow, targetRow);\n        }\n    };\n    RowDD.prototype.setBorder = function (element, event, startedRow, targetRow) {\n        var node = this.parent.element;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        if (parentsUntil(element, 'e-grid') &&\n            parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(element, 'e-grid').id) {\n            removeClass(node.querySelectorAll('.e-rowcell,.e-rowdragdrop'), ['e-dragborder']);\n            var rowElement = [];\n            var targetRowIndex = parseInt(targetRow.getAttribute('aria-rowindex'), 10);\n            if (targetRow && targetRowIndex === 0) {\n                var div = this.parent.createElement('div', { className: 'e-firstrow-dragborder' });\n                var gridheaderEle = this.parent.getHeaderContent();\n                gridheaderEle.classList.add('e-grid-relative');\n                div.style.width = node.offsetWidth - this.getScrollWidth() + 'px';\n                if (!gridheaderEle.querySelectorAll('.e-firstrow-dragborder').length) {\n                    gridheaderEle.appendChild(div);\n                }\n            }\n            else if (targetRow && parseInt(startedRow.getAttribute('aria-rowindex'), 10) > targetRowIndex) {\n                element = this.parent.getRowByIndex(targetRowIndex - 1);\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            else {\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            var frzCols = this.parent.getFrozenColumns();\n            if (targetRow && targetRowIndex !== 0 && frzCols) {\n                var rowIndex = parseInt(element.getAttribute('aria-rowindex'), 10);\n                var selector = '.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse';\n                rowElement = [].slice.call(this.parent.getRows()[rowIndex].querySelectorAll(selector)).\n                    concat([].slice.call(this.parent.getMovableRows()[rowIndex].querySelectorAll(selector)));\n            }\n            if (rowElement.length > 0) {\n                addRemoveActiveClasses(rowElement, true, 'e-dragborder');\n            }\n        }\n    };\n    RowDD.prototype.getScrollWidth = function () {\n        var scrollElem = this.parent.getContent().firstElementChild;\n        return scrollElem.scrollWidth > scrollElem.offsetWidth ? Scroll.getScrollBarWidth() : 0;\n    };\n    RowDD.prototype.removeFirstRowBorder = function (element) {\n        if (this.parent.element.getElementsByClassName('e-firstrow-dragborder').length > 0 && element &&\n            element.rowIndex !== 0) {\n            remove(this.parent.element.getElementsByClassName('e-firstrow-dragborder')[0]);\n        }\n    };\n    RowDD.prototype.removeLastRowBorder = function (element) {\n        var islastRowIndex = element &&\n            this.parent.getRowByIndex(this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') !==\n                element.getAttribute('data-uid');\n        if (this.parent.element.getElementsByClassName('e-lastrow-dragborder').length > 0 && element && islastRowIndex) {\n            remove(this.parent.element.getElementsByClassName('e-lastrow-dragborder')[0]);\n        }\n    };\n    RowDD.prototype.removeBorder = function (element) {\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        element = this.parent.getRows().filter(function (row) {\n            return row.querySelector('td.e-dragborder');\n        })[0];\n        if (element) {\n            var rowElement = [].slice.call(element.querySelectorAll('.e-dragborder'));\n            if (this.parent.getFrozenColumns()) {\n                var rowIndex = parseInt(element.getAttribute('aria-rowindex'), 10);\n                rowElement = [].slice.call(this.parent.getRows()[rowIndex].querySelectorAll('.e-dragborder')).\n                    concat([].slice.call(this.parent.getMovableRows()[rowIndex].querySelectorAll('.e-dragborder')));\n            }\n            addRemoveActiveClasses(rowElement, false, 'e-dragborder');\n        }\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    RowDD.prototype.onDataBound = function (e) {\n        if (this.selectedRowColls.length > 0) {\n            this.parent.selectRows(this.selectedRowColls);\n            this.selectedRowColls = [];\n        }\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.singleRowDrop = function (e) {\n        var targetRow = closestElement(e.target, 'tr');\n        var currentIndex;\n        var srcControl;\n        srcControl = e.droppedElement.parentElement.ej2_instances[0];\n        currentIndex = targetRow ? targetRow.rowIndex : srcControl.currentViewData.length - 1;\n        this.reorderRow(this.startedRowIndex, currentIndex);\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        var draggObj = e.droppedElement.parentElement.ej2_instances[0];\n        if (e.droppedElement.getAttribute('action') !== 'grouping' &&\n            (parentsUntil(e.target, 'e-row') || parentsUntil(e.target, 'e-emptyrow'))) {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl_1;\n            var currentIndex = void 0;\n            if ((e.droppedElement.querySelector('tr').getAttribute('single-dragrow') !== 'true' &&\n                e.droppedElement.parentElement.id === gObj.element.id)\n                || (e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true' &&\n                    e.droppedElement.parentElement.id !== gObj.element.id)) {\n                return;\n            }\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl_1 = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else if (this.isSingleRowDragDrop || e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true') {\n                this.singleRowDrop(e);\n                return;\n            }\n            if (srcControl_1.element.id !== gObj.element.id && srcControl_1.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl_1.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges\n            if (!isBlazor()) {\n                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n                gObj.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n                var selectedRows = srcControl_1.getSelectedRowIndexes();\n                var skip = srcControl_1.allowPaging ?\n                    (srcControl_1.pageSettings.currentPage * srcControl_1.pageSettings.pageSize) - srcControl_1.pageSettings.pageSize : 0;\n                this.selectedRows = [];\n                for (var i = 0, len = records.length; i < len; i++) {\n                    this.selectedRows.push(skip + selectedRows[i]);\n                }\n                srcControl_1.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n                srcControl_1.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n            }\n            else {\n                var currentVdata = [];\n                var selectedIndex = srcControl_1.getSelectedRowIndexes();\n                for (var i = 0; i < selectedIndex.length; i++) {\n                    currentVdata[i] = srcControl_1.currentViewData[selectedIndex[i]];\n                }\n                records = currentVdata;\n                var changes = {\n                    addedRecords: records,\n                    deletedRecords: [],\n                    changedRecords: []\n                };\n                var dragDropDestinationIndex = 'dragDropDestinationIndex';\n                var query = new Query;\n                query[dragDropDestinationIndex] = targetIndex;\n                gObj.getDataModule().saveChanges(changes, gObj.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    gObj.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    var message = 'message';\n                    var error = 'error';\n                    if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                        e[error] = e[error][message];\n                    }\n                    gObj.trigger(events.actionFailure, e);\n                });\n                changes.deletedRecords = records;\n                changes.addedRecords = [];\n                srcControl_1.getDataModule().saveChanges(changes, srcControl_1.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    srcControl_1.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    var error = 'error';\n                    var msg = 'message';\n                    if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][msg])) {\n                        e[error] = e[error][msg];\n                    }\n                    srcControl_1.trigger(events.actionFailure, e);\n                });\n            }\n        }\n    };\n    RowDD.prototype.reorderRow = function (fromIndexes, toIndex) {\n        var gObj = this.parent;\n        if (!gObj.sortSettings.columns.length && !gObj.groupSettings.columns.length && !gObj.filterSettings.columns.length) {\n            //Todo: drag and drop mapper & BatchChanges                 \n            var skip = gObj.allowPaging ?\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : 0;\n            var fromIndex = fromIndexes;\n            toIndex = toIndex + skip;\n            this.selectedRows = gObj.getSelectedRowIndexes();\n            gObj.notify(events.rowPositionChanged, {\n                fromIndex: fromIndexes + skip,\n                toIndex: toIndex\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.draggable.destroy();\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    RowDD.prototype.processArgs = function (target) {\n        var gObj = this.parent;\n        if ((gObj.getSelectedRecords().length > 0 && this.startedRow.cells[0].classList.contains('e-selectionbackground') === false)\n            || gObj.getSelectedRecords().length === 0) {\n            this.rows = [this.startedRow];\n            this.rowData = [this.parent.getRowInfo((this.startedRow).querySelector('.e-rowcell')).rowData];\n        }\n        else {\n            this.rows = gObj.getSelectedRows();\n            this.rowData = gObj.getSelectedRecords();\n        }\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable, isBlazor } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, isGroupAdaptive, updatecloneRow } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        //Internal variables\n        this.sortRequired = true;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.reorderingColumns = [];\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element || (!target.classList.contains('e-drag') && _this.groupSettings.allowReordering)) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function (e) {\n            _this.parent.element.classList.add('e-ungroupdrag');\n            if (isBlazor()) {\n                e.bindEvents(e.dragElement);\n            }\n        };\n        this.drag = function (e) {\n            if (_this.groupSettings.allowReordering) {\n                _this.animateDropper(e);\n            }\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            if (!_this.groupSettings.allowReordering) {\n                classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            var preventDrop = !(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'));\n            if (_this.groupSettings.allowReordering && preventDrop) {\n                remove(e.helper);\n                if (parentsUntil(e.target, 'e-groupdroparea')) {\n                    _this.rearrangeGroup(e);\n                }\n                else if (!(parentsUntil(e.target, 'e-grid'))) {\n                    var field = _this.parent.getColumnByUid(e.helper.getAttribute('e-mappinguid')).field;\n                    if (_this.groupSettings.columns.indexOf(field) !== -1) {\n                        _this.ungroupColumn(field);\n                    }\n                }\n                return;\n            }\n            else if (preventDrop) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.animateDropper = function (e) {\n            var uid = _this.parent.element.querySelector('.e-cloneproperties').getAttribute('e-mappinguid');\n            var dragField = _this.parent.getColumnByUid(uid).field;\n            var parent = parentsUntil(e.target, 'e-groupdroparea');\n            var dropTarget = parentsUntil(e.target, 'e-group-animator');\n            // tslint:disable-next-line\n            var grouped = [].slice.call(_this.element.querySelectorAll('.e-groupheadercell'))\n                .map(function (e) { return e.querySelector('div').getAttribute('ej-mappingname'); });\n            var cols = JSON.parse(JSON.stringify(grouped));\n            if (dropTarget || parent) {\n                if (dropTarget) {\n                    var dropField = dropTarget.querySelector('div[ej-mappingname]').getAttribute('ej-mappingname');\n                    var dropIndex = +(dropTarget.getAttribute('index'));\n                    if (dropField !== dragField) {\n                        var dragIndex = cols.indexOf(dragField);\n                        if (dragIndex !== -1) {\n                            cols.splice(dragIndex, 1);\n                        }\n                        var flag = dropIndex !== -1 && dragIndex === dropIndex;\n                        cols.splice(dropIndex + (flag ? 1 : 0), 0, dragField);\n                    }\n                }\n                else if (parent && cols.indexOf(dragField) === -1) {\n                    cols.push(dragField);\n                }\n                _this.element.innerHTML = '';\n                if (cols.length && !_this.element.classList.contains('e-grouped')) {\n                    _this.element.classList.add('e-grouped');\n                }\n                _this.reorderingColumns = cols;\n                for (var c = 0; c < cols.length; c++) {\n                    _this.addColToGroupDrop(cols[c]);\n                }\n            }\n            else {\n                _this.addLabel();\n                _this.removeColFromGroupDrop(dragField);\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                _this.parent.log('action_disabled_column', { moduleName: _this.getModuleName(), columnName: column.headerText });\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n        this.groupGenerator = new GroupModelGenerator(this.parent);\n    }\n    Group.prototype.addLabel = function () {\n        if (!this.element.querySelectorAll('.e-group-animator').length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n    };\n    Group.prototype.rearrangeGroup = function (e) {\n        this.sortRequired = false;\n        this.updateModel();\n    };\n    Group.prototype.columnDrag = function (e) {\n        if (this.groupSettings.allowReordering) {\n            this.animateDropper(e);\n        }\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.headerDrop, this.columnDrop, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.groupAggregates, this.onGroupAggregates, this);\n        this.parent.on('blazor-action-begin', this.blazorActionBegin, this);\n        this.parent.on('group-expand-collapse', this.updateExpand, this);\n        this.parent.on('persist-data-changed', this.initialEnd, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.groupAggregates, this.onGroupAggregates);\n        this.parent.off('blazor-action-begin', this.blazorActionBegin);\n        this.parent.off('group-expand-collapse', this.updateExpand);\n    };\n    Group.prototype.blazorActionBegin = function () {\n        if (this.parent.allowGrouping && !this.parent.isCollapseStateEnabled()) {\n            this.expandAll();\n        }\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (isBlazor() && gObj.isServerRendered) {\n            for (var i = 0; i < gObj.columns.length; i++) {\n                this.removeColFromGroupDrop(gObj.columns[i].field);\n            }\n            this.updateGroupDropArea();\n        }\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action !== 'ctrlSpace' && (!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n            case 'ctrlSpace':\n                var elem = gObj.focusModule.currentInfo.element;\n                if (elem && elem.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(elem.firstElementChild.getAttribute('e-mappinguid'));\n                    column.field && gObj.groupSettings.columns.indexOf(column.field) < 0 ?\n                        this.groupColumn(column.field) : this.ungroupColumn(column.field);\n                }\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var dataManager = void 0;\n            var query = void 0;\n            var toExpand = [];\n            var gObj = this.parent;\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (isBlazor() && this.parent.isCollapseStateEnabled()) {\n                this.parent.notify('group-expand-collapse', {\n                    uid: trgt.parentElement.getAttribute('data-uid'),\n                    isExpand: trgt.classList.contains('e-recordpluscollapse')\n                });\n                return;\n            }\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, expand, query, dataManager);\n                }\n                if (this.parent.groupSettings.enableLazyLoading) {\n                    this.parent.contentModule.captionExpand(trgt.parentElement);\n                }\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, !isHide, query, dataManager);\n                }\n                if (this.parent.groupSettings.enableLazyLoading) {\n                    this.parent.contentModule.captionCollapse(trgt.parentElement);\n                }\n            }\n            this.aria.setExpand(trgt, expand);\n            if (!isGroupAdaptive(gObj) && !this.parent.groupSettings.enableLazyLoading) {\n                for (var i = 0, len = rows.length; i < len; i++) {\n                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                        if (isHide) {\n                            rows[i].style.display = 'none';\n                        }\n                        else {\n                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                                rows[i].style.display = '';\n                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n                                if (expandElem) {\n                                    toExpand.push(expandElem);\n                                }\n                                if (rows[i].classList.contains('e-detailrow')) {\n                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                        rows[i].style.display = 'none';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.updateVirtualRows = function (gObj, target, isExpand, query, dataManager) {\n        var rObj = gObj.getRowObjectFromUID(target.closest('tr').getAttribute('data-uid'));\n        rObj.isExpand = isExpand;\n        updatecloneRow(gObj);\n        query = gObj.getDataModule().generateQuery(false);\n        query.queries = gObj.getDataModule().aggregateQuery(gObj.getQuery().clone()).queries;\n        var args = { requestType: 'virtualscroll', rowObject: rObj };\n        dataManager = gObj.getDataModule().getData(args, query.requiresCount());\n        dataManager.then(function (e) { return gObj.renderModule.dataManagerSuccess(e, args); });\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        if (isBlazor() && this.parent.isCollapseStateEnabled()) {\n            this.parent.notify('group-expand-collapse', { isExpand: isExpand });\n            return;\n        }\n        if (!isExpand) {\n            this.parent.notify(events.initialCollapse, isExpand);\n        }\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = this.parent.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        if (this.groupSettings.allowReordering) {\n            this.element.classList.add('e-group-animate');\n        }\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: this.groupSettings.allowReordering ? '.e-drag' : '.e-groupheadercell',\n            distance: this.groupSettings.allowReordering ? -10 : 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        if (isBlazor() && gObj.isServerRendered) {\n            var setVisible = [];\n            setVisible[0] = column;\n            this.parent.notify('setvisibility', setVisible);\n        }\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        var isServerRendered = 'isServerRendered';\n        if (isBlazor() && this.parent[isServerRendered]) {\n            gObj.sortSettings.columns = gObj.sortSettings.columns;\n        }\n        if (this.groupSettings.allowReordering) {\n            this.reorderingColumns = columns;\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns = this.reorderingColumns.length ? JSON.parse(JSON.stringify(this.reorderingColumns)) : columns;\n        if (this.sortRequired) {\n            if (columns.indexOf(this.colName) === -1) {\n                columns.push(this.colName);\n            }\n            this.groupAddSortingQuery(this.colName);\n        }\n        this.sortRequired = true;\n        this.parent.groupSettings.columns = columns;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending', isFromGroup: true });\n            var isServerRendered = 'isServerRendered';\n            if (isBlazor() && this.parent[isServerRendered]) {\n                this.parent.sortSettings.columns = this.parent.sortSettings.columns;\n            }\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.createElement = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var animator = this.parent.createElement('div', { className: 'e-grid-icon e-group-animator' });\n        var groupedColumn = this.parent.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = this.parent.createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        // if (!isNullOrUndefined(column.headerTemplate)) {\n        //     if (column.headerTemplate.indexOf('#') !== -1) {\n        //         childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n        //     } else {\n        //         childDiv.innerHTML = column.headerTemplate;\n        //     }\n        //     childDiv.firstElementChild.classList.add('e-grouptext');\n        // } else {\n        if (this.groupSettings.allowReordering) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-drag e-icons e-icon-drag', innerHTML: '&nbsp;',\n                attrs: { title: 'Drag', tabindex: '-1', 'aria-label': 'Drag the grouped column' }\n            }));\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-grouptext', innerHTML: column.headerText,\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        // }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: isBlazor() ? this.l10n.getConstant('UnGroupButton') : this.l10n.getConstant('UnGroup'),\n                tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        var index = this.groupSettings.columns.indexOf(field);\n        if (this.groupSettings.allowReordering) {\n            animator.appendChild(groupedColumn);\n            animator.appendChild(this.createSeparator());\n            groupedColumn = animator;\n        }\n        return groupedColumn;\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        if (this.groupSettings.allowReordering\n            && this.parent.element.querySelector('.e-groupdroparea div[ej-mappingname=' + field + ']')) {\n            return;\n        }\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        var groupedColumn = this.createElement(field);\n        if (this.groupSettings.allowReordering) {\n            var index = this.element.querySelectorAll('.e-group-animator').length;\n            groupedColumn.setAttribute('index', index.toString());\n        }\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.createSeparator = function () {\n        return this.parent.createElement('span', {\n            className: 'e-nextgroup e-icons e-icon-next', innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'Separator for the grouped columns' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        });\n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.getHeaderTable().getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(this.parent.createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            var elem = this.getGHeaderCell(field);\n            if (this.groupSettings.allowReordering) {\n                var parent_1 = parentsUntil(elem, 'e-group-animator');\n                remove(parent_1);\n            }\n            else {\n                remove(elem);\n            }\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    var args = void 0;\n                    if (this.contentRefresh) {\n                        if (!this.isAppliedUnGroup) {\n                            if (!this.isAppliedGroup) {\n                                this.updateGroupDropArea(true);\n                                for (var i = 0; i < this.groupSettings.columns.length; i++) {\n                                    this.colName = this.groupSettings.columns[i];\n                                    var col = this.parent.getColumnByField(this.colName);\n                                    col.visible = this.parent.groupSettings.showGroupedColumn;\n                                    this.groupAddSortingQuery(this.colName);\n                                    if (i < this.groupSettings.columns.length - 1) {\n                                        this.addColToGroupDrop(this.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = {\n                                columnName: this.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin\n                            };\n                        }\n                        else {\n                            args = { columnName: this.colName, requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this.groupSettings.showGroupedColumn) {\n                            var columns = e.oldProperties[prop];\n                            for (var i = 0; i < columns.length; i++) {\n                                if (e.properties[prop].indexOf(columns[i]) === -1) {\n                                    this.parent.getColumnByField(columns[i]).visible = true;\n                                }\n                            }\n                        }\n                        var requestType = 'requestType';\n                        if (isBlazor() && this.parent.isServerRendered && this.parent.isCollapseStateEnabled() &&\n                            args[requestType] === 'grouping') {\n                            this.parent.refreshHeader();\n                        }\n                        this.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this.updateGroupDropArea();\n                    this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n                    this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this.parent.refreshHeader();\n                    break;\n                case 'enableLazyLoading':\n                    this.parent.freezeRefresh();\n                    break;\n            }\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.isDestroyed && !this.parent.refreshing) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (i === (len - 1)) {\n                this.contentRefresh = true;\n            }\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    Group.prototype.onGroupAggregates = function (editedData) {\n        var aggregates = this.iterateGroupAggregates(editedData);\n        var rowData = this.groupGenerator.generateRows(aggregates, {});\n        var summaryRows = this.parent.getRowsObject().filter(function (row) { return !row.isDataRow; });\n        var updateSummaryRows = rowData.filter(function (data) { return !data.isDataRow; });\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['groupFooterTemplate', 'groupCaptionTemplate', 'footerTemplate']);\n        }\n        for (var i = 0; i < updateSummaryRows.length; i++) {\n            var row = updateSummaryRows[i];\n            var cells = row.cells.filter(function (cell) { return cell.isDataCell; });\n            var args = { cells: cells, data: row.data, dataUid: summaryRows[i] ? summaryRows[i].uid : '' };\n            this.parent.notify(events.refreshAggregateCell, args);\n        }\n    };\n    Group.prototype.iterateGroupAggregates = function (editedData) {\n        var updatedData = editedData instanceof Array ? editedData : [];\n        var rows = this.parent.getRowsObject();\n        var initData = this.parent.getCurrentViewRecords();\n        var deletedCols = [];\n        var changeds = rows.map(function (row) {\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.changes instanceof Object ? row.changes : row.data;\n        });\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        changeds = updatedData.length === 0 ? changeds : updatedData;\n        var mergeData = initData.map(function (item) {\n            var pKeyVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return pKeyVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            for (var i = 0; i < deletedCols.length; i++) {\n                var index = mergeData.indexOf(deletedCols[i]);\n                mergeData.splice(index, 1);\n            }\n        }\n        var aggregates = [];\n        var aggregateRows = this.parent.aggregates;\n        for (var j = 0; j < aggregateRows.length; j++) {\n            var row = aggregateRows[j];\n            for (var k = 0; k < row.columns.length; k++) {\n                var aggr = {};\n                var type = row.columns[k].type.toString();\n                aggr = { type: type.toLowerCase(), field: row.columns[k].field };\n                aggregates.push(aggr);\n            }\n        }\n        var result;\n        var aggrds;\n        var groupedCols = this.parent.groupSettings.columns;\n        for (var l = 0; l < groupedCols.length; l++) {\n            aggrds = result ? result : mergeData;\n            result = DataUtil.group(aggrds, groupedCols[l], aggregates, null, null);\n        }\n        return result;\n    };\n    Group.prototype.updateExpand = function (args) {\n        var uid = args.uid;\n        var isExpand = args.isExpand;\n        var rows = this.parent.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            if (row.uid === uid || isNullOrUndefined(uid)) {\n                row.isExpand = isExpand;\n                var _loop_1 = function (j) {\n                    var childRow = rows[j];\n                    var closestParent = void 0;\n                    if (childRow.parentUid !== row.uid) {\n                        closestParent = rows.filter(function (x) { return x.uid === childRow.parentUid; })[0];\n                    }\n                    if (childRow.parentUid === row.uid) {\n                        childRow.visible = row.isExpand;\n                    }\n                    else if (!isNullOrUndefined(closestParent) && childRow.parentUid === closestParent.uid) {\n                        if (closestParent.isExpand && closestParent.visible === true) {\n                            childRow.visible = true;\n                        }\n                        else if (closestParent.isExpand && closestParent.visible === false) {\n                            childRow.visible = false;\n                        }\n                    }\n                    if (isNullOrUndefined(uid)) {\n                        return \"break\";\n                    }\n                };\n                for (var j = i + 1; j < rows.length; j++) {\n                    var state_1 = _loop_1(j);\n                    if (state_1 === \"break\")\n                        break;\n                }\n            }\n        }\n        this.parent.notify(events.contentReady, { rows: rows, args: { isFrozen: false, rows: rows } });\n    };\n    return Group;\n}());\nexport { Group };\n","import { isBlazor, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { closest, classList, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var table = this.parent.getContentTable();\n        var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n        var parent = 'parentDetails';\n        var isServerRendered = 'isServerRendered';\n        var childGrid;\n        var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))) {\n            return;\n        }\n        if (isBlazor() && this.parent[isServerRendered]) {\n            this.parent.notify('detailclick', target);\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n                gObj.notify(events.detailStateChange, { data: data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId } });\n                var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                detailRow.appendChild(detailCell);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                if (gObj.detailTemplate) {\n                    var isReactCompiler = this.parent.isReact && typeof (gObj.detailTemplate) !== 'string';\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    if (isReactCompiler) {\n                        gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell);\n                        this.parent.renderTemplates();\n                    }\n                    else {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID));\n                    }\n                    if (isBlazor()) {\n                        updateBlazorTemplate(detailTemplateID, 'DetailTemplate', gObj, false);\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: data[gObj.childGrid.queryString],\n                        parentRowData: data\n                    };\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid('')\n                    });\n                    detailCell.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                gObj.getRowsObject().splice(rowObj.index + 1, 0, row);\n                gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data, childGrid: childGrid });\n                gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n                removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                var detailrowIdx = table.querySelector('tbody').querySelectorAll('.e-detailrow').length - 1;\n                addClass(table.querySelector('tbody').querySelectorAll('.e-detailrow')[detailrowIdx].childNodes, ['e-lastrowcell']);\n                this.lastrowcell = true;\n            }\n            this.aria.setExpand(target, true);\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n                gObj.notify(events.detailStateChange, { data: rowObj.data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            if (parseInt(tr.getAttribute('aria-rowindex'), 10) === lastrowIdx && this.lastrowcell) {\n                addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                this.lastrowcell = false;\n            }\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    /**\n     * @hidden\n     * @param gObj\n     * @param rowObj\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = gObj.expandedRows[rowObj.index].gridModel;\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n                gridModel = gObj.childGrid;\n            }\n            else {\n                gridModel = gObj.childGrid;\n            }\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        for (var i = 0; i < detailrows.length; i++) {\n            detailrows[i].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, isBlazor, updateBlazorTemplate, select } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren } from '../base/util';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper',\n            type: 'Input'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: this.l10n.getConstant('Columnchooser'), tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right',\n        };\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n                if (this.parent.isReact) {\n                    this.parent.renderTemplates();\n                }\n            }\n            else {\n                this.toolbar.off('render-react-toolbar-template', this.addReactToolbarPortals);\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.bindSearchEvents = function () {\n        this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.toolbarCreated = function () {\n        if (this.element.querySelector('.e-search-wrapper')) {\n            this.element.querySelector('.e-search-wrapper').innerHTML = '<div class=\"e-input-group e-search\" role=\"search\">\\\n        <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n        placeholder= \\\"' + this.l10n.getConstant('Search') + '\\\"/>\\\n        <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n        tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n        </div>';\n        }\n        this.bindSearchEvents();\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            created: this.toolbarCreated.bind(this)\n        });\n        this.toolbar.isReact = this.parent.isReact;\n        this.toolbar.on('render-react-toolbar-template', this.addReactToolbarPortals, this);\n        var isStringTemplate = 'isStringTemplate';\n        this.toolbar[isStringTemplate] = true;\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.toolbarTemplate) {\n            if (!isBlazor() && typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                if (isBlazor()) {\n                    var tempID = this.parent.element.id + 'toolbarTemplate';\n                    var item = appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', tempID));\n                    var items_1 = this.getItem(item);\n                    this.toolbar.items.push(items_1);\n                    this.toolbar.appendTo(this.element);\n                    updateBlazorTemplate(this.parent.element.id + 'toolbarTemplate', 'ToolbarTemplate', this.parent);\n                }\n                else {\n                    var isReactCompiler = this.parent.isReact && typeof (this.parent.toolbarTemplate) !== 'string';\n                    var ID = this.parent.element.id + 'toolbarTemplate';\n                    if (isReactCompiler) {\n                        templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', ID, null, null, this.element);\n                        this.parent.renderTemplates();\n                    }\n                    else {\n                        appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n                    }\n                }\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n    };\n    Toolbar.prototype.addReactToolbarPortals = function (args) {\n        if (this.parent.isReact && args) {\n            this.parent.portals = this.parent.portals.concat(args);\n            this.parent.renderTemplates();\n        }\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing && hasData ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting && hasData ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n            var item = items_2[_i];\n            var element = select('#' + item, this.element);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        var newArgs = !isBlazor() || this.parent.isJsComponent ? args : { item: args.item, cancel: args.cancel, name: args.name };\n        var originalEvent = args.originalEvent;\n        gObj.trigger(events.toolbarClick, newArgs, function (toolbarargs) {\n            toolbarargs.originalEvent = toolbarargs.originalEvent ? toolbarargs.originalEvent : originalEvent;\n            if (!toolbarargs.cancel) {\n                switch (!isNullOrUndefined(toolbarargs.item) && toolbarargs.item.id) {\n                    case gID + '_print':\n                        gObj.print();\n                        break;\n                    case gID + '_edit':\n                        gObj.startEdit();\n                        break;\n                    case gID + '_update':\n                        gObj.endEdit();\n                        break;\n                    case gID + '_cancel':\n                        gObj.closeEdit();\n                        break;\n                    case gID + '_add':\n                        gObj.addRecord();\n                        break;\n                    case gID + '_delete':\n                        gObj.deleteRecord();\n                        break;\n                    case gID + '_search':\n                        if (toolbarargs.originalEvent.target.id === gID + '_searchbutton') {\n                            _this.search();\n                        }\n                        break;\n                    case gID + '_columnchooser':\n                        var tarElement = _this.parent.element.querySelector('.e-ccdiv');\n                        var y = tarElement.getBoundingClientRect().top;\n                        var x = tarElement.getBoundingClientRect().left;\n                        var targetEle = toolbarargs.originalEvent.target;\n                        y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                        gObj.createColumnchooser(x, y, targetEle);\n                        break;\n                    case 'copy':\n                        if (isBlazor()) {\n                            gObj.copy();\n                        }\n                        break;\n                    case 'copyheader':\n                    case 'copyHeader':\n                        if (isBlazor()) {\n                            gObj.copy(true);\n                        }\n                        break;\n                }\n            }\n        });\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate, iterateExtend } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.getFrozenColumns()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            innerDiv.appendChild(fDiv);\n            innerDiv.appendChild(mDiv);\n            this.frozenContent = fDiv;\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.getFrozenColumns()) {\n            var freezeTable = table.cloneNode(true);\n            this.frozenContent.appendChild(freezeTable);\n            this.freezeTable = freezeTable;\n            this.movableContent.appendChild(table);\n            remove(table.querySelector('colgroup'));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector('tbody'));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        if (this.parent.getFrozenColumns()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            this.freezeTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.freezeTable, 0, this.parent.getFrozenColumns());\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), this.parent.getFrozenColumns());\n        // check freeze content have no row case\n        if (this.parent.getFrozenColumns()) {\n            var frozenCnt = [].slice.call(this.parent.element.querySelector('.e-frozenfootercontent')\n                .querySelectorAll('.e-summaryrow'));\n            var movableCnt = [].slice.call(this.parent.element.querySelector('.e-movablefootercontent')\n                .querySelectorAll('.e-summaryrow'));\n            for (var i = 0; i < frozenCnt.length; i++) {\n                var frozenHeight = frozenCnt[i].getBoundingClientRect().height;\n                var movableHeight = movableCnt[i].getBoundingClientRect().height;\n                if (frozenHeight < movableHeight) {\n                    frozenCnt[i].classList.remove('e-hide');\n                    frozenCnt[i].style.height = movableHeight + 'px';\n                }\n                else if (frozenHeight > movableHeight) {\n                    movableCnt[i].classList.remove('e-hide');\n                    movableCnt[i].style.height = frozenHeight + 'px';\n                }\n            }\n            var frozenDiv = this.frozenContent;\n            if (!frozenDiv.offsetHeight) {\n                frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n            }\n            if (this.parent.allowResizing) {\n                this.updateFooterTableWidth(this.getTable());\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table \n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            var isXaxis = this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis();\n            if (isXaxis) {\n                mheaderCol = this.parent.getMovableVirtualHeader().querySelector('colgroup').cloneNode(true);\n            }\n            else {\n                mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns(), this.parent);\n                this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector('colGroup'));\n            }\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent').scrollLeft :\n                this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var fCol = this.parent.getFrozenColumns();\n        fCol = fCol && this.parent.isRowDragable() ? fCol + 1 : fCol;\n        if (fCol && fCol > index) {\n            return this.freezeTable.querySelector('colGroup').children[index];\n        }\n        return this.getColGroup().children[index - fCol];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n        this.parent.on(refreshFooterRenderer, this.refreshFooterRenderer, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n        this.parent.off(refreshFooterRenderer, this.refreshFooterRenderer);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n        var key = this.parent.getPrimaryKeyFieldNames()[0];\n        for (var i = 0; i < ds.length; i++) {\n            if (ds[i][key] === data[key]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var dataSource = [];\n        var isModified = false;\n        var batchChanges = {};\n        var gridData = 'dataSource';\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var currentViewData = this.parent.dataSource instanceof Array ?\n            this.parent.dataSource : this.parent.dataSource[gridData].json.length\n            ? this.parent.dataSource[gridData].json : this.parent.getCurrentViewRecords();\n        if (this.parent.editModule) {\n            batchChanges = this.parent.editModule.getBatchChanges();\n        }\n        if (Object.keys(batchChanges).length) {\n            for (var i = 0; i < currentViewData.length; i++) {\n                isModified = false;\n                if (batchChanges[changedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[changedRecords]) > -1) {\n                    isModified = true;\n                    dataSource.push(batchChanges[changedRecords][this.getIndexByKey(currentViewData[i], batchChanges[changedRecords])]);\n                }\n                if (batchChanges[deletedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[deletedRecords]) > -1) {\n                    isModified = true;\n                }\n                else if (!isModified) {\n                    dataSource.push(currentViewData[i]);\n                }\n            }\n            if (batchChanges[addedRecords].length) {\n                for (var i = 0; i < batchChanges[addedRecords].length; i++) {\n                    dataSource.push(batchChanges[addedRecords][i]);\n                }\n            }\n        }\n        else {\n            if (editedData.length) {\n                var data = iterateExtend(currentViewData);\n                dataSource = data.map(function (item) {\n                    var idVal = DataUtil.getObject(field, item);\n                    var value;\n                    var hasVal = editedData.some(function (cItem) {\n                        value = cItem;\n                        return idVal === DataUtil.getObject(field, cItem);\n                    });\n                    return hasVal ? value : item;\n                });\n            }\n            else {\n                dataSource = currentViewData;\n            }\n        }\n        var eData = editedData;\n        if ((eData.type && eData.type === 'cancel')) {\n            dataSource = currentViewData;\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        for (var i = 0; i < aggregateRows.length; i++) {\n            for (var j = 0; j < aggregateRows[i].columns.length; j++) {\n                var data = [];\n                var type = aggregateRows[i].columns[j].type.toString();\n                data = dataSource;\n                agrVal = calculateAggregate(type, data, aggregateRows[i].columns[j], this.parent);\n                aggregate[aggregateRows[i].columns[j].field + ' - ' + type.toLowerCase()] = agrVal;\n            }\n        }\n        var result = {\n            result: dataSource,\n            count: dataSource.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { refreshAggregateCell } from '../base/constant';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        this.parent.on(refreshAggregateCell, this.refreshWithAggregate(node, cell), this);\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            return true;\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        var tempID = '';\n        var gColumn = this.parent.getColumnByField(data[column.columnName].field);\n        if (!isNullOrUndefined(gColumn)) {\n            data[column.columnName].headerText = gColumn.headerText;\n            if (gColumn.isForeignColumn()) {\n                var fData = gColumn.columnData.filter(function (e) {\n                    return e[gColumn.foreignKeyField] === data[column.columnName].key;\n                })[0];\n                if (fData) {\n                    data[column.columnName].foreignKey = fData[gColumn.foreignKeyValue];\n                }\n            }\n        }\n        if (isBlazor()) {\n            var guid = 'guid';\n            tempID = this.parent.element.id + column[guid] + tempObj.property;\n        }\n        var isReactCompiler = this.parent.isReact && (column.footerTemplate ?\n            typeof (column.footerTemplate) !== 'string' : column.groupFooterTemplate ? typeof (column.groupFooterTemplate) !== 'string'\n            : column.groupCaptionTemplate ? typeof (column.groupCaptionTemplate) !== 'string' : false);\n        if (isReactCompiler) {\n            tempObj.fn(data[column.columnName], this.parent, tempObj.property, tempID, null, null, node);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property, tempID));\n        }\n        return false;\n    };\n    SummaryCellRenderer.prototype.refreshWithAggregate = function (node, cell) {\n        var _this = this;\n        var cellNode = cell;\n        return function (args) {\n            var cell = cellNode;\n            var field = cell.column.columnName ? cell.column.columnName : null;\n            var curCell = (!isNullOrUndefined(field) ? args.cells.filter(function (cell) {\n                return cell.column.columnName === field;\n            })[0] : null);\n            if (node.parentElement && node.parentElement.getAttribute('data-uid') === args.dataUid && field &&\n                field === curCell.column.columnName) {\n                _this.refreshTD(node, curCell, args.data);\n            }\n        };\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var prevTop = 0;\n        var prevLeft = 0;\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top ? 'down' : 'up';\n            direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n            prevTop = top;\n            prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                onEnterCallback(_this.element, current, direction, { top: top, left: left }, _this.fromWheel, check);\n            }\n            if (check) {\n                var fn = debounced100;\n                //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                    focusElement: document.activeElement });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isGroupAdaptive } from '../base/util';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.rowCache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        this.checkAndResetCache(notifyArgs.requestType);\n        if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n            return result = this.parent.vcRows;\n        }\n        if (this.parent.enableColumnVirtualization) {\n            for (var i = 0; i < info.blockIndexes.length; i++) {\n                if (this.isBlockAvailable(info.blockIndexes[i])) {\n                    this.cache[info.blockIndexes[i]] = this.rowModelGenerator.refreshRows(this.cache[info.blockIndexes[i]]);\n                }\n            }\n        }\n        if (isBlazor() && this.parent.isServerRendered) {\n            var virtualStartIdx = 'virtualStartIndex';\n            var startIndex = 'startIndex';\n            var endIndex = 'endIndex';\n            if (!notifyArgs[virtualStartIdx] && Object.keys(this.rowCache).length === 0) {\n                for (var i = 0; i < data.length; i++) {\n                    var args = [];\n                    args.push(data[i]);\n                    this.rowCache[i] = this.rowModelGenerator.generateRows(args, { startIndex: i })[0];\n                }\n                var j = 0;\n                for (var i = 0; i < this.parent.pageSettings.pageSize; i++) {\n                    result[j] = this.rowCache[i];\n                    j++;\n                }\n            }\n            else if (notifyArgs[virtualStartIdx]) {\n                var virtualStartIndex = notifyArgs[startIndex];\n                var cacheindex = [];\n                for (var i = 0; i < Object.keys(this.rowCache).length; i++) {\n                    cacheindex.push(Number(Object.keys(this.rowCache)[i]));\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var args = [];\n                    var check = cacheindex.indexOf(virtualStartIndex);\n                    args.push(data[i]);\n                    if (check === -1) {\n                        this.rowCache[virtualStartIndex] = this.rowModelGenerator.generateRows(args, { startIndex: virtualStartIndex })[0];\n                    }\n                    virtualStartIndex++;\n                }\n            }\n            if (!isNullOrUndefined(notifyArgs[virtualStartIdx])) {\n                var j = 0;\n                for (var i = notifyArgs[startIndex]; i < notifyArgs[endIndex]; i++) {\n                    result[j] = this.rowCache[i];\n                    j++;\n                }\n            }\n        }\n        else {\n            var values = info.blockIndexes;\n            for (var i = 0; i < values.length; i++) {\n                if (!this.isBlockAvailable(values[i])) {\n                    var rows = this.rowModelGenerator.generateRows(data, {\n                        virtualInfo: info, startIndex: this.getStartIndex(values[i], data)\n                    });\n                    if (isGroupAdaptive(this.parent) && !this.parent.vcRows.length) {\n                        this.parent.vRows = rows;\n                        this.parent.vcRows = rows;\n                    }\n                    var median = void 0;\n                    if (isGroupAdaptive(this.parent)) {\n                        median = this.model.pageSize / 2;\n                        if (!this.isBlockAvailable(indexes[0])) {\n                            this.cache[indexes[0]] = rows.slice(0, median);\n                        }\n                        if (!this.isBlockAvailable(indexes[1])) {\n                            this.cache[indexes[1]] = rows.slice(median, this.model.pageSize);\n                        }\n                    }\n                    else {\n                        median = ~~Math.max(rows.length, this.model.pageSize) / 2;\n                        if (!this.isBlockAvailable(indexes[0])) {\n                            this.cache[indexes[0]] = rows.slice(0, median);\n                        }\n                        if (!this.isBlockAvailable(indexes[1])) {\n                            this.cache[indexes[1]] = rows.slice(median);\n                        }\n                    }\n                }\n                if (this.parent.groupSettings.columns.length && !xAxis && this.cache[values[i]]) {\n                    this.cache[values[i]] = this.updateGroupRow(this.cache[values[i]], values[i]);\n                }\n                result.push.apply(result, this.cache[values[i]]);\n                if (this.isBlockAvailable(values[i])) {\n                    loadedBlocks.push(values[i]);\n                }\n            }\n            info.blockIndexes = loadedBlocks;\n        }\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            var grouping = 'records';\n            if (this.parent.allowGrouping) {\n                this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n            }\n            else {\n                this.parent.currentViewData = result.map(function (m) { return m.data; });\n            }\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().querySelector('.e-headercontent'); }\n        if (this.parent.getFrozenColumns()) {\n            content = content.querySelector('.e-movableheader');\n        }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.parent.contentModule.startColIndex = indexes[0];\n            this.parent.contentModule.endColIndex = indexes[indexes.length - 1];\n        }\n        this.addFrozenIndex(indexes);\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.addFrozenIndex = function (indexes) {\n        if (this.parent.getFrozenColumns() && this.parent.enableColumnVirtualization && indexes[0] === 0) {\n            for (var i = 0; i < this.parent.getFrozenColumns(); i++) {\n                indexes.push(indexes[indexes.length - 1] + 1);\n            }\n        }\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var actions = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder',\n            'save', 'delete'];\n        if (this.parent.getFrozenColumns() && this.parent.frozenRows && this.parent.enableColumnVirtualization && action === 'reorder') {\n            actions.splice(actions.indexOf(action), 1);\n        }\n        var clear = actions.some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        var c = this.parent.groupSettings.columns;\n        for (var i = 0; i < c.length; i++) {\n            this.cOffsets[i] = (this.cOffsets[i - 1] | 0) + 30;\n        }\n        var blocks = Array.apply(null, Array(cLen)).map(function () { return col++; });\n        for (var j = 0; j < blocks.length; j++) {\n            blocks[j] = blocks[j] + gLen;\n            this.cOffsets[blocks[j]] = (this.cOffsets[blocks[j] - 1] | 0) + (isVisible(cols[j]) ? parseInt(cols[j].width, 10) : 0);\n        }\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var currentFirst = current[0];\n        var rows = [];\n        var keys = Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            if (Number(keys[i]) < block) {\n                rows = rows.concat(this.cache[keys[i]]);\n            }\n        }\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var rows = [];\n        var isBlazorServerRendered = isBlazor() && this.parent.isServerRendered ? true : false;\n        var keys = isBlazorServerRendered ? Object.keys(this.rowCache) : Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            rows = isBlazorServerRendered ? rows.concat(this.rowCache[keys[i]]) : rows.concat(this.cache[keys[i]]);\n        }\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit, Browser, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive, getTransformValues, ensureLastRow, ensureFirstRow, getEditedDataIndex, getScrollBarWidth } from '../base/util';\nimport { isBlazor, setStyleAttribute } from '@syncfusion/ej2-base';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        /** @hidden */\n        _this.startIndex = 0;\n        _this.preStartIndex = 0;\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        /** @hidden */\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.isSelection = false;\n        _this.isBottom = false;\n        _this.rndrCount = 0;\n        _this.empty = undefined;\n        _this.isCancel = false;\n        _this.requestTypes = ['beginEdit', 'cancel', 'delete', 'add', 'save'];\n        _this.isNormaledit = _this.parent.editSettings.mode === 'Normal';\n        _this.virtualData = {};\n        _this.emptyRowData = {};\n        _this.vfColIndex = [];\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().querySelector('.e-content');\n        var minHeight = this.parent.height;\n        if (this.parent.getFrozenColumns() && this.parent.height.toString().indexOf('%') < 0) {\n            minHeight = parseInt(this.parent.height, 10) - getScrollBarWidth();\n        }\n        this.virtualEle.renderWrapper(minHeight);\n        this.virtualEle.renderPlaceHolder();\n        if (!this.parent.getFrozenColumns()) {\n            this.virtualEle.wrapper.style.position = 'absolute';\n        }\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var content = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent() : this.content;\n        var opt = {\n            container: content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.refreshMvTbalTransform = function () {\n        var mCont = this.parent.getMovableVirtualContent();\n        var fCont = this.parent.getFrozenVirtualContent();\n        var mContTV = getTransformValues(mCont.firstElementChild);\n        var fContTV = getTransformValues(fCont.firstElementChild);\n        var top = mCont.scrollTop;\n        if (top > 0 && mContTV.height !== fContTV.height) {\n            mCont.firstElementChild.style.transform = \"translate(\" + mContTV.width + \"px, \" + fContTV.height + \"px)\";\n        }\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        this.scrollAfterEdit();\n        if (this.parent.enablePersistence) {\n            this.parent.scrollPosition = scrollArgs.offset;\n        }\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        if (isNullOrUndefined(document.activeElement)) {\n            this.isFocused = false;\n        }\n        else {\n            this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        }\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && scrollArgs.sentinel.axis === 'X') {\n            this.refreshMvTbalTransform();\n        }\n        var info = scrollArgs.sentinel;\n        var pStartIndex = this.preStartIndex;\n        var previousColIndexes = this.parent.getColumnIndexesInView();\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableColumnVirtualization &&\n            (JSON.stringify(previousColIndexes) !== JSON.stringify(viewInfo.columnIndexes))) {\n            this.parent.refreshHeader();\n            var translateX = this.getColumnOffset(this.startColIndex - 1);\n            var width = this.getColumnOffset(this.endColIndex - 1) - translateX + '';\n            this.parent.notify('refresh-virtual-indices', { requestType: 'virtualscroll', startColumnIndex: viewInfo.columnIndexes[0],\n                endColumnIndex: viewInfo.columnIndexes[viewInfo.columnIndexes.length - 1], axis: 'X',\n                VTablewidth: width, translateX: this.getColumnOffset(viewInfo.columnIndexes[0] - 1) });\n            this.parent.notify('setcolumnstyles', {});\n        }\n        if (isGroupAdaptive(this.parent) && !isBlazor()) {\n            if ((info.axis === 'Y' && viewInfo.blockIndexes && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n                && scrollArgs.direction === 'up' && viewInfo.blockIndexes[viewInfo.blockIndexes.length - 1] !== 2) {\n                return;\n            }\n            else {\n                viewInfo.event = 'refresh-virtual-block';\n                if (!isNullOrUndefined(viewInfo.offsets)) {\n                    viewInfo.offsets.top = this.content.scrollTop;\n                }\n                this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n                return;\n            }\n        }\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n                if (Browser.isIE) {\n                    this.parent.hideSpinner();\n                }\n                this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n                this.restoreEdit();\n                return;\n            }\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        }\n        else if (isBlazor() && this.parent.isServerRendered && this.preStartIndex !== pStartIndex &&\n            this.parent.pageSettings.currentPage === viewInfo.currentPage) {\n            this.parent.notify('refresh-virtual-indices', { requestType: 'virtualscroll', virtualStartIndex: viewInfo.startIndex,\n                virtualEndIndex: viewInfo.endIndex, axis: 'Y', RHeight: this.parent.getRowHeight() });\n        }\n        if (this.parent.getFrozenColumns() && this.parent.enableColumnVirtualization) {\n            var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n            if (this.parent.pageSettings.currentPage === lastPage && scrollArgs.sentinel.axis === 'Y') {\n                this.rndrCount++;\n            }\n            if (scrollArgs.sentinel.axis === 'Y') {\n                if (this.parent.pageSettings.currentPage === lastPage && this.rndrCount > 1) {\n                    this.rndrCount = 0;\n                    return;\n                }\n                else if (this.parent.pageSettings.currentPage !== lastPage && this.parent.pageSettings.currentPage !== lastPage - 1) {\n                    this.rndrCount = 0;\n                }\n            }\n        }\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            this.requestType = 'virtualscroll';\n            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo,\n                focusElement: scrollArgs.focusElement });\n        }\n        else if (this.preStartIndex !== pStartIndex && this.parent.pageSettings.currentPage !== viewInfo.currentPage) {\n            this.parent.pageSettings.currentPage = viewInfo.currentPage;\n            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualStartIndex: viewInfo.startIndex,\n                virtualEndIndex: viewInfo.endIndex, axis: 'Y', RHeight: this.parent.getRowHeight() });\n        }\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var isBlockAdded = false;\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.preStartIndex, endIndex: this.preEndIndex };\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        if (this.activeKey === 'upArrow' && infoType.blockIndexes.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.blockIndexes.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        if (isBlockAdded) {\n            infoType.blockIndexes = [infoType.blockIndexes[0] - 1, infoType.blockIndexes[0], infoType.blockIndexes[0] + 1];\n        }\n        if (this.activeKey === 'downArrow') {\n            var firstBlock = Math.ceil(this.rowIndex / this.getBlockSize());\n            if (firstBlock !== 1 && (infoType.blockIndexes[1] !== firstBlock || infoType.blockIndexes.length < 3)) {\n                infoType.blockIndexes = [firstBlock - 1, firstBlock, firstBlock + 1];\n            }\n        }\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        if (isBlazor() && this.parent.isServerRendered) {\n            var rowHeight = this.parent.getRowHeight();\n            var exactTopIndex = e.top / rowHeight;\n            var noOfInViewIndexes = vHeight / rowHeight;\n            var exactEndIndex = exactTopIndex + noOfInViewIndexes;\n            var pageSizeBy4 = this.parent.pageSettings.pageSize / 4;\n            if (infoType.direction === 'down') {\n                var sIndex = Math.round(exactEndIndex) - Math.round((pageSizeBy4));\n                if (isNullOrUndefined(infoType.startIndex) || (exactEndIndex >\n                    (infoType.startIndex + Math.round((this.parent.pageSettings.pageSize / 2 + pageSizeBy4)))\n                    && infoType.endIndex !== this.count)) {\n                    infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n                    infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n                    var eIndex = infoType.startIndex + this.parent.pageSettings.pageSize;\n                    infoType.startIndex = eIndex < exactEndIndex ? (Math.ceil(exactEndIndex) - this.parent.pageSettings.pageSize)\n                        : infoType.startIndex;\n                    infoType.endIndex = eIndex < this.count ? eIndex : this.count;\n                    infoType.startIndex = eIndex >= this.count ?\n                        infoType.endIndex - this.parent.pageSettings.pageSize : infoType.startIndex;\n                    infoType.currentPage = Math.ceil(infoType.endIndex / this.parent.pageSettings.pageSize);\n                    this.setKeyboardNavIndex();\n                }\n            }\n            else if (infoType.direction === 'up') {\n                if (infoType.startIndex && infoType.endIndex) {\n                    var loadAtIndex = Math.round(((infoType.startIndex * rowHeight) + (pageSizeBy4 * rowHeight)) / rowHeight);\n                    if (exactTopIndex < loadAtIndex) {\n                        var idxAddedToExactTop = (pageSizeBy4) > noOfInViewIndexes ? pageSizeBy4 :\n                            (noOfInViewIndexes + noOfInViewIndexes / 4);\n                        var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n                        infoType.endIndex = eIndex < this.count ? eIndex : this.count;\n                        var sIndex = infoType.endIndex - this.parent.pageSettings.pageSize;\n                        infoType.startIndex = sIndex > 0 ? sIndex : 0;\n                        infoType.endIndex = sIndex < 0 ? this.parent.pageSettings.pageSize : infoType.endIndex;\n                        infoType.currentPage = Math.ceil(infoType.startIndex / this.parent.pageSettings.pageSize);\n                        this.setKeyboardNavIndex();\n                    }\n                }\n            }\n            this.preStartIndex = this.startIndex = infoType.startIndex;\n            this.preEndIndex = infoType.endIndex;\n            infoType.event = (infoType.currentPage !== this.parent.pageSettings.currentPage) ? modelChanged : refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.setKeyboardNavIndex = function () {\n        this.blazorDataLoad = true;\n        if (this.activeKey === 'downArrow' || this.activeKey === 'upArrow') {\n            this.blzRowIndex = this.activeKey === 'downArrow' ? this.rowIndex + 1 : this.rowIndex - 1;\n            document.activeElement.blur();\n        }\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()) {\n            if (info.sentinelInfo.axis === 'X' || (info.sentinelInfo.axis === 'Y' && (info.page === this.prevInfo.page))) {\n                indexes = this.prevInfo.blockIndexes;\n            }\n        }\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    /**\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.vfTblTransform = function (info, left, top, e, cOffset, translate) {\n        var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n        var isLastPage = lastPage === this.parent.pageSettings.currentPage && this.parent.enableColumnVirtualization;\n        var wrappers = [].slice.call(this.parent.getContent().querySelectorAll('.e-virtualtable'));\n        for (var i = 0; i < wrappers.length; i++) {\n            if (i === 0 && e.requestType === 'virtualscroll' && info.sentinelInfo.axis === 'X') {\n                continue;\n            }\n            if (lastPage !== this.parent.pageSettings.currentPage && this.parent.enableColumnVirtualization\n                && (left > 0 || (top > 0 && left === 0))) {\n                continue;\n            }\n            var cOff = isLastPage && i === 0 ? 0 : cOffset;\n            this.virtualEle.wrapper = wrappers[i];\n            this.virtualEle.adjustTable(cOff, translate);\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        var _this = this;\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var colVFtable = this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() !== 0;\n        this.checkFirstBlockColIndexes(e);\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        if (colVFtable && info.columnIndexes[0] === this.parent.getFrozenColumns()) {\n            cBlock = (info.columnIndexes[0] - this.parent.getFrozenColumns()) - 1;\n        }\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        if (this.parent.height === '100%') {\n            this.parent.element.style.height = '100%';\n        }\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        var translate = 0;\n        if (this.parent.getFrozenColumns()) {\n            var mCont = this.parent.getMovableVirtualContent();\n            var left = mCont.scrollLeft;\n            var top_1 = mCont.scrollTop;\n            translate = this.getTranslateY(mCont.scrollTop, vHeight, info);\n            this.vfTblTransform(info, left, top_1, e, cOffset, translate);\n        }\n        else {\n            if (!this.requestTypes.some(function (value) { return value === _this.requestType; })) {\n                translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n                this.virtualEle.adjustTable(cOffset, translate);\n            }\n        }\n        if (this.parent.enableColumnVirtualization && !this.parent.getFrozenColumns()) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        if (!isNullOrUndefined(target.parentNode)) {\n            remove(target);\n        }\n        var tbody;\n        if (this.parent.getFrozenColumns() && !e.renderMovableContent) {\n            tbody = this.parent.getFrozenVirtualContent().querySelector('tbody');\n        }\n        else if (this.parent.getFrozenColumns() && e.renderMovableContent) {\n            tbody = this.parent.getMovableVirtualContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.element.querySelector('.e-content').querySelector('tbody');\n        }\n        if (tbody) {\n            remove(tbody);\n            target = null;\n        }\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (!isReact) {\n            target = this.parent.createElement('tbody');\n            target.appendChild(newChild);\n        }\n        else {\n            target = newChild;\n        }\n        if (this.parent.frozenRows && e.requestType === 'virtualscroll' && this.parent.pageSettings.currentPage === 1) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                target.children[0].remove();\n            }\n        }\n        if (this.parent.getFrozenColumns()) {\n            if (!e.renderMovableContent) {\n                this.parent.getFrozenVirtualContent().querySelector('.e-table').appendChild(target);\n            }\n            else {\n                this.parent.getMovableVirtualContent().querySelector('.e-table').appendChild(target);\n                this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n            }\n            if (this.vfColIndex.length) {\n                e.virtualInfo.columnIndexes = info.columnIndexes = extend([], this.vfColIndex);\n                this.vfColIndex = e.renderMovableContent ? [] : this.vfColIndex;\n            }\n        }\n        else {\n            this.getTable().appendChild(target);\n            this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n        }\n        if (this.parent.groupSettings.columns.length) {\n            if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused && this.activeKey !== 'downArrow' && this.activeKey !== 'upArrow') {\n            this.content.focus();\n        }\n        var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n        if (this.isBottom) {\n            this.isBottom = false;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n        }\n        if ((this.parent.pageSettings.currentPage === lastPage) && blocks.length === 1) {\n            this.isBottom = true;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 2];\n        }\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n            && e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n            this.refreshMvTbalTransform();\n        }\n        if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n            this.parent.notify(events.autoCol, {});\n        }\n        this.focusCell(e);\n        this.restoreEdit();\n        this.restoreAdd();\n    };\n    VirtualContentRenderer.prototype.checkFirstBlockColIndexes = function (e) {\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && e.virtualInfo.columnIndexes[0] === 0) {\n            var indexes = [];\n            if (!e.renderMovableContent && e.virtualInfo.columnIndexes.length > this.parent.getFrozenColumns()) {\n                this.vfColIndex = e.virtualInfo.columnIndexes;\n                for (var i = 0; i < this.parent.getFrozenColumns(); i++) {\n                    indexes.push(i);\n                }\n                e.virtualInfo.columnIndexes = indexes;\n            }\n            else if (e.renderMovableContent) {\n                if (!this.vfColIndex.length) {\n                    this.vfColIndex = extend([], e.virtualInfo.columnIndexes);\n                }\n                e.virtualInfo.columnIndexes = extend([], this.vfColIndex);\n                e.virtualInfo.columnIndexes.splice(0, this.parent.getFrozenColumns());\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.focusCell = function (e) {\n        if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            return;\n        }\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        // tslint:disable-next-line:no-any\n        var cell = row.cells[this.cellIndex];\n        cell.focus({ preventScroll: true });\n        this.parent.selectRow(parseInt(row.getAttribute('aria-rowindex'), 10));\n        this.activeKey = this.empty;\n    };\n    VirtualContentRenderer.prototype.restoreEdit = function () {\n        if (this.isNormaledit) {\n            if (this.parent.editSettings.allowEditing && this.parent.editModule && !isNullOrUndefined(this.editedRowIndex)) {\n                var row = this.getRowByIndex(this.editedRowIndex);\n                if (Object.keys(this.virtualData).length && row && !this.content.querySelector('.e-editedrow')) {\n                    var top_2 = row.getBoundingClientRect().top;\n                    if (top_2 < this.content.offsetHeight && top_2 > this.parent.getRowHeight()) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n                if (row && this.content.querySelector('.e-editedrow') && !Object.keys(this.virtualData).length) {\n                    var rowData = extend({}, this.getRowObjectByIndex(this.editedRowIndex));\n                    this.virtualData = this.getVirtualEditedData(rowData);\n                }\n            }\n            this.restoreAdd();\n        }\n    };\n    VirtualContentRenderer.prototype.getVirtualEditedData = function (rowData) {\n        var editForm = this.content.querySelector('.e-gridform');\n        return this.parent.editModule.getCurrentEditedData(editForm, rowData);\n    };\n    VirtualContentRenderer.prototype.restoreAdd = function () {\n        if (this.isNormaledit && this.isAdd && !this.content.querySelector('.e-addedrow')) {\n            var isTop = this.parent.editSettings.newRowPosition === 'Top' && this.content.scrollTop < this.parent.getRowHeight();\n            var isBottom = this.parent.editSettings.newRowPosition === 'Bottom'\n                && this.parent.pageSettings.currentPage === this.maxPage;\n            if (isTop || isBottom) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        if (this.parent.getFrozenColumns() && this.parent.enableColumnVirtualization) {\n            var hdrTbls = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-table'));\n            this.header.virtualEle.table = hdrTbls[1];\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    /** @hidden */\n    VirtualContentRenderer.prototype.setVirtualHeight = function (height) {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        if (this.parent.getFrozenColumns()) {\n            var virtualHeightTemp = (this.parent.pageSettings.currentPage === 1 && Object.keys(this.offsets).length <= 2) ?\n                this.offsets[1] : this.offsets[this.getTotalBlocks() - 2];\n            var scrollableElementHeight = this.parent.getMovableVirtualContent().clientHeight;\n            virtualHeightTemp = virtualHeightTemp > scrollableElementHeight ? virtualHeightTemp : 0;\n            var fTblWidth = this.parent.enableColumnVirtualization ? 'auto' : width;\n            this.virtualEle.placeholder = this.parent.getFrozenVirtualContent().querySelector('.e-virtualtrack');\n            // To overcome the white space issue in last page (instead of position absolute)\n            this.virtualEle.setVirtualHeight(virtualHeightTemp, fTblWidth);\n            this.virtualEle.placeholder = this.parent.getMovableVirtualContent().querySelector('.e-virtualtrack');\n            // To overcome the white space issue in last page (instead of position absolute)\n            this.virtualEle.setVirtualHeight(virtualHeightTemp, width);\n        }\n        else {\n            var virtualHeight = (isBlazor() && this.parent.isServerRendered && this.parent.groupSettings.columns.length && height)\n                ? height : (this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()]);\n            this.virtualEle.setVirtualHeight(virtualHeight, width);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = (isGroupAdaptive(this.parent)) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop <= _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && sTop <= _this.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = iOffset + 1;\n                }\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        if (result + blockHeight > this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()]) {\n            result -= (result + blockHeight) - this.offsets[this.getTotalBlocks()];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            if (Browser.isIE && !isWheel && check && !_this.preventEvent) {\n                _this.parent.showSpinner();\n            }\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            if (isBlazor() && _this.parent.isServerRendered && _this.currentInfo && _this.currentInfo.startIndex && xAxis) {\n                y = _this.currentInfo.startIndex * _this.parent.getRowHeight();\n            }\n            _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (isBlazor() && _this.parent.isServerRendered && xAxis) {\n                _this.parent.notify('setcolumnstyles', { refresh: true });\n            }\n            if (_this.parent.getFrozenColumns() && !xAxis) {\n                var left = _this.parent.getMovableVirtualContent().scrollLeft;\n                if (_this.parent.enableColumnVirtualization && left > 0) {\n                    var fvTable = _this.parent.getFrozenVirtualContent().querySelector('.e-virtualtable');\n                    fvTable.style.transform = \"translate(\" + 0 + \"px, \" + Math.min(y, _this.offsets[_this.maxBlock]) + \"px)\";\n                }\n                else {\n                    var fvTable = _this.parent.getFrozenVirtualContent().querySelector('.e-virtualtable');\n                    fvTable.style.transform = \"translate(\" + x + \"px, \" + Math.min(y, _this.offsets[_this.maxBlock]) + \"px)\";\n                }\n            }\n            if (_this.parent.enableColumnVirtualization && (!isBlazor() || (isBlazor() && !_this.parent.isServerRendered))) {\n                _this.header.virtualEle.adjustTable(x, 0);\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.dataBound = function () {\n        if (this.isSelection && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            this.parent.selectRow(this.selectedRowIndex);\n        }\n        else if (!isBlazor()) {\n            this.activeKey = this.empty;\n        }\n    };\n    VirtualContentRenderer.prototype.rowSelected = function () {\n        this.isSelection = false;\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.rowSelected, this.rowSelected.bind(this));\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.parent[action](events.selectVirtualRow, this.selectVirtualRow, this);\n        this.parent[action](events.virtaulCellFocus, this.virtualCellFocus, this);\n        this.parent[action](events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent[action](events.virtualScrollAddActionBegin, this.addActionBegin, this);\n        this.parent[action](events.virtualScrollEdit, this.restoreEdit, this);\n        this.parent[action](events.virtualScrollEditSuccess, this.editSuccess, this);\n        this.parent[action](events.refreshVirtualCache, this.refreshCache, this);\n        this.parent[action](events.editReset, this.resetIsedit, this);\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.virtualScrollEditCancel, this.editCancel, this);\n        var event = this.actions;\n        for (var i = 0; i < event.length; i++) {\n            this.parent[action](event[i] + \"-begin\", this.onActionBegin, this);\n        }\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            var gObj = _this.parent;\n            if (gObj.enablePersistence && gObj.scrollPosition) {\n                _this.content.scrollTop = gObj.scrollPosition.top;\n                var scrollValues = { direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                    offset: gObj.scrollPosition, focusElement: gObj.element };\n                _this.scrollListener(scrollValues);\n                if (gObj.enableColumnVirtualization) {\n                    _this.content.scrollLeft = gObj.scrollPosition.left;\n                }\n            }\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.getVirtualData = function (data) {\n        data.virtualData = this.virtualData;\n        data.isAdd = this.isAdd;\n        data.isCancel = this.isCancel;\n    };\n    VirtualContentRenderer.prototype.editCancel = function (args) {\n        var dataIndex = getEditedDataIndex(this.parent, args.data);\n        if (!isNullOrUndefined(dataIndex)) {\n            args.data = this.parent.getCurrentViewRecords()[dataIndex];\n        }\n    };\n    VirtualContentRenderer.prototype.editSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewData(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    VirtualContentRenderer.prototype.updateCurrentViewData = function (data) {\n        var dataIndex = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(dataIndex)) {\n            this.parent.getCurrentViewRecords()[dataIndex] = data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionBegin = function (args) {\n        if (args.requestType !== 'virtualscroll') {\n            this.requestType = args.requestType;\n        }\n    };\n    VirtualContentRenderer.prototype.virtualCellFocus = function (e) {\n        // To decide the action (select or scroll), when using arrow keys for cell focus\n        var ele = document.activeElement;\n        if (ele.classList.contains('e-rowcell')\n            && e && (e.action === 'upArrow' || e.action === 'downArrow')) {\n            var rowIndex = parseInt(ele.parentElement.getAttribute('aria-rowindex'), 10);\n            if (e && (e.action === 'downArrow' || e.action === 'upArrow')) {\n                var scrollEle = this.parent.getContent().firstElementChild;\n                e.action === 'downArrow' ? rowIndex += 1 : rowIndex -= 1;\n                this.rowIndex = rowIndex;\n                this.cellIndex = parseInt(ele.getAttribute('aria-colindex'), 10);\n                var row = this.parent.getRowByIndex(rowIndex);\n                var page = this.parent.pageSettings.currentPage;\n                var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n                var emptyRow = false;\n                if (isNullOrUndefined(row)) {\n                    emptyRow = true;\n                    if ((e.action === 'downArrow' && page === this.maxPage - 1) || (e.action === 'upArrow' && page === 1)) {\n                        emptyRow = false;\n                    }\n                }\n                if (emptyRow || (ensureLastRow(row, this.parent) && e.action === 'downArrow')\n                    || (ensureFirstRow(row, this.parent.getRowHeight() * 2) && e.action === 'upArrow')) {\n                    this.activeKey = e.action;\n                    scrollEle.scrollTop = e.action === 'downArrow' ?\n                        (rowIndex - visibleRowCount) * this.parent.getRowHeight() : rowIndex * this.parent.getRowHeight();\n                }\n                else {\n                    this.activeKey = this.empty;\n                }\n                if (!isBlazor() || (isBlazor() && !this.blazorDataLoad)) {\n                    this.parent.selectRow(rowIndex);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.editActionBegin = function (e) {\n        this.editedRowIndex = e.index;\n        var rowData = extend({}, this.getRowObjectByIndex(e.index));\n        e.data = Object.keys(this.virtualData).length ? this.virtualData : rowData;\n    };\n    VirtualContentRenderer.prototype.refreshCache = function (data) {\n        var block = Math.ceil((this.editedRowIndex + 1) / this.getBlockSize());\n        var index = this.editedRowIndex - ((block - 1) * this.getBlockSize());\n        this.vgenerator.cache[block][index].data = data;\n    };\n    VirtualContentRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' || args.requestType === 'save' || args.requestType === 'cancel') {\n            this.refreshOffsets();\n            this.refreshVirtualElement();\n            if (this.isNormaledit) {\n                if (args.requestType === 'cancel') {\n                    this.isCancel = true;\n                }\n                this.isAdd = false;\n                this.editedRowIndex = this.empty;\n                this.virtualData = {};\n                this.parent.editModule.previousVirtualData = {};\n            }\n        }\n        if (this.parent.enableColumnVirtualization && args.requestType === 'filterafteropen'\n            && this.currentInfo.columnIndexes && this.currentInfo.columnIndexes[0] > 0) {\n            this.parent.resetFilterDlgPosition(args.columnName);\n        }\n    };\n    VirtualContentRenderer.prototype.resetIsedit = function () {\n        if (this.parent.enableVirtualization && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && Object.keys(this.virtualData).length)\n                || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.scrollAfterEdit = function () {\n        if (this.parent.editModule && this.parent.editSettings.allowEditing && this.isNormaledit) {\n            if (this.content.querySelector('.e-gridform')) {\n                var editForm = this.content.querySelector('.e-editedrow');\n                var addForm = this.content.querySelector('.e-addedrow');\n                if (editForm || addForm) {\n                    var rowData = editForm ? extend({}, this.getRowObjectByIndex(this.editedRowIndex))\n                        : extend({}, this.emptyRowData);\n                    this.virtualData = this.getVirtualEditedData(rowData);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.getColumns().filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    VirtualContentRenderer.prototype.addActionBegin = function (args) {\n        if (this.isNormaledit) {\n            if (!Object.keys(this.emptyRowData).length) {\n                this.createEmptyRowdata();\n            }\n            this.isAdd = true;\n            var page = this.parent.pageSettings.currentPage;\n            if (page > 1 && this.parent.editSettings.newRowPosition === 'Top') {\n                this.isAdd = true;\n                this.onActionBegin();\n                args.startEdit = false;\n                this.content.scrollTop = 0;\n            }\n            if (page < this.maxPage - 1 && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.isAdd = true;\n                this.parent.setProperties({ pageSettings: { currentPage: this.maxPage - 1 } }, true);\n                args.startEdit = false;\n                this.content.scrollTop = this.offsets[this.offsetKeys.length];\n            }\n        }\n    };\n    /** @hidden */\n    VirtualContentRenderer.prototype.getRowObjectByIndex = function (index) {\n        var data = this.getRowCollection(index, false, true);\n        return data;\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n        var rows = this.parent.vcRows;\n        return Math.floor((rows.length / this.getBlockSize()) < 1 ? 1 : rows.length / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            var content = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent() : this.content;\n            this.preventEvent = content.scrollTop !== 0;\n            content.scrollTop = 0;\n        }\n        if (action !== 'virtualscroll') {\n            this.isAdd = false;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        if (isGroupAdaptive(this.parent)) {\n            return this.parent.getDataRows()[index];\n        }\n        return this.getRowCollection(index, false);\n    };\n    VirtualContentRenderer.prototype.getMovableVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, true);\n    };\n    VirtualContentRenderer.prototype.getRowCollection = function (index, isMovable, isRowObject) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) ?\n            (prev[0] - 1) * this.getBlockSize() : this.startIndex;\n        var rowCollection = isMovable ? this.parent.getMovableDataRows() : this.parent.getDataRows();\n        var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n        var selectedRow = collection[index - startIdx];\n        if (!isRowObject && this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n            selectedRow = index <= this.parent.frozenRows ? rowCollection[index]\n                : rowCollection[(index - startIdx) + this.parent.frozenRows];\n        }\n        return selectedRow;\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    /** @hidden */\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var gObj = this.parent;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        var blocks = Array.apply(null, Array(total)).map(function () { return ++row; });\n        for (var i = 0; i < blocks.length; i++) {\n            var tmp = (this.vgenerator.cache[blocks[i]] || []).length;\n            var rem = !isGroupAdaptive(this.parent) ? this.count % bSize : (gObj.vcRows.length % bSize);\n            var size = !isGroupAdaptive(this.parent) && blocks[i] in this.vgenerator.cache ?\n                tmp * this.parent.getRowHeight() : rem && blocks[i] === total ? rem * this.parent.getRowHeight() :\n                this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            this.offsets[blocks[i]] = (this.offsets[blocks[i] - 1] | 0) + size;\n            this.tmpOffsets[blocks[i]] = this.offsets[blocks[i] - 1] | 0;\n        }\n        this.offsetKeys = Object.keys(this.offsets);\n        if (isGroupAdaptive(this.parent)) {\n            this.parent.vGroupOffsets = this.offsets;\n        }\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    VirtualContentRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fcntColGrp;\n        var mcntColGrp;\n        if (frozenCols) {\n            fcntColGrp = [].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll('col'));\n            mcntColGrp = [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('col'));\n        }\n        if (isBlazor() && gObj.isServerRendered) {\n            this.parent.notify('setvisibility', columns);\n        }\n        var rows = [];\n        rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = gObj.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            var colGrp = void 0;\n            if (fcntColGrp && mcntColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mcntColGrp;\n                    tr = this.parent.getMovableRows();\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fcntColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            }\n            if (!needFullRefresh) {\n                var width = void 0;\n                if (column.visible) {\n                    width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (width > gObj.width) {\n                    this.setDisplayNone(tr, idx, displayVal, rows);\n                    if (this.parent.enableColumnVirtualization) {\n                        this.virtualEle.setWrapperWidth(width + '');\n                    }\n                    this.refreshVirtualElement();\n                }\n                else {\n                    needFullRefresh = true;\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (isBlazor() && this.parent.isServerRendered && needFullRefresh) {\n            var inViewIdx = this.parent.inViewIndexes;\n            var translateX = this.getColumnOffset(inViewIdx[0] - 1);\n            var width = this.getColumnOffset(inViewIdx[inViewIdx.length - 1]) - translateX + '';\n            this.parent.notify('refresh-virtual-indices', { requestType: 'virtualScrollRefresh',\n                startColumnIndex: inViewIdx[0], endColumnIndex: inViewIdx[inViewIdx.length - 1], axis: 'X',\n                VTablewidth: width, translateX: translateX });\n            this.parent.notify('setcolumnstyles', {});\n        }\n        if (needFullRefresh || frozenCols) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            this.parent.notify(events.partialRefresh, { rows: rows, args: { isFrozen: false, rows: rows } });\n        }\n    };\n    VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n        var _this = this;\n        if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow'\n            && !this.requestTypes.some(function (value) { return value === _this.requestType; }) && !this.parent.selectionModule.isInteracted) {\n            var ele = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent()\n                : this.parent.getContent().firstElementChild;\n            var selectedRow = this.parent.getRowByIndex(args.selectedIndex);\n            var rowHeight = this.parent.getRowHeight();\n            var eleOffsHeight = ele.offsetHeight;\n            if (!selectedRow || this.isRowInView(args.selectedIndex, selectedRow, ele, eleOffsHeight, rowHeight)) {\n                this.isSelection = true;\n                this.selectedRowIndex = args.selectedIndex;\n                var scrollTop = (args.selectedIndex + 1) * rowHeight;\n                if (!isNullOrUndefined(scrollTop)) {\n                    ele.scrollTop = scrollTop;\n                }\n            }\n        }\n        this.requestType = this.empty;\n    };\n    VirtualContentRenderer.prototype.isRowInView = function (index, selectedRow, ele, eleOffsHeight, rowHeight) {\n        if (isBlazor()) {\n            var exactTopIndex = ele.scrollTop / rowHeight;\n            var exactEndIndex = exactTopIndex + (eleOffsHeight / rowHeight);\n            return (index < exactTopIndex || index > exactEndIndex);\n        }\n        else {\n            if (this.parent.frozenRows && index < this.parent.frozenRows) {\n                return false;\n            }\n            var rectTop = selectedRow ? selectedRow.getBoundingClientRect().top : 0;\n            return (rectTop < rowHeight || rectTop > eleOffsHeight);\n        }\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.e-headercontent')));\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.parent.notify('refresh-virtual-indices', {\n                startColumnIndex: this.parent.contentModule.startColIndex,\n                endColumnIndex: this.parent.contentModule.endColIndex, axis: 'X'\n            });\n        }\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().querySelector('.e-headercontent');\n        if (!this.parent.getFrozenColumns()) {\n            this.virtualEle.content.style.position = 'relative';\n        }\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.setFrozenTable(this.parent.getMovableVirtualContent());\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.e-headercontent')));\n        _super.prototype.refreshUI.call(this);\n        this.setFrozenTable(this.parent.getFrozenVirtualContent());\n    };\n    VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var needFullRefresh;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fhdrColGrp;\n        var mhdrColGrp;\n        if (frozenCols) {\n            fhdrColGrp = [].slice.call(this.parent.getFrozenVirtualHeader().querySelectorAll('col'));\n            mhdrColGrp = [].slice.call(this.parent.getMovableVirtualHeader().querySelectorAll('col'));\n        }\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            var colGrp = void 0;\n            if (fhdrColGrp && mhdrColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mhdrColGrp;\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fhdrColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n                var tablewidth = void 0;\n                if (column.visible) {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (tablewidth > gObj.width) {\n                    this.setDisplayNone(column, displayVal);\n                    this.virtualEle.setWrapperWidth(tablewidth + '');\n                    this.gen.refreshColOffsets();\n                }\n                else {\n                    needFullRefresh = true;\n                }\n            }\n            else {\n                needFullRefresh = true;\n            }\n            if (needFullRefresh && !frozenCols) {\n                this.refreshUI();\n            }\n        }\n        if (frozenCols) {\n            this.parent.notify(events.columnPositionChanged, {});\n        }\n    };\n    VirtualHeaderRenderer.prototype.setFrozenTable = function (content) {\n        if (this.parent.getFrozenColumns() && this.parent.enableColumnVirtualization\n            && this.parent.contentModule.isXaxis()) {\n            this.parent.contentModule\n                .setTable(content.querySelector('.e-table'));\n        }\n    };\n    VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n        var frozenCols = this.parent.getFrozenColumns();\n        var table = this.getTable();\n        if (frozenCols && col.index >= frozenCols) {\n            table = this.parent.getMovableVirtualHeader().querySelector('.e-table');\n        }\n        for (var _i = 0, _a = [].slice.apply(table.querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            if (ele.querySelector('[e-mappinguid]') &&\n                ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n                setStyleAttribute(ele, { 'display': displayVal });\n                if (displayVal === '') {\n                    removeClass([ele], 'e-hide');\n                }\n                break;\n            }\n        }\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        if (isBlazor()) {\n            this.wrapper = this.content.querySelector('.e-virtualtable') ? this.content.querySelector('.e-virtualtable') :\n                createElement('div', { className: 'e-virtualtable' });\n            this.wrapper.setAttribute('styles', \"min-height:\" + formatUnit(height));\n        }\n        else {\n            this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        }\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        if (isBlazor()) {\n            this.placeholder = this.content.querySelector('.e-virtualtrack') ? this.content.querySelector('.e-virtualtrack') :\n                createElement('div', { className: 'e-virtualtrack' });\n            this.placeholder.setAttribute('styles', \"position:\" + position);\n        }\n        else {\n            this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        }\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setFreezeWrapperWidth = function (wrapper, width, full) {\n        wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\nimport { isBlazor } from '@syncfusion/ej2-base';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        this.parent.log(['limitation', 'virtual_height'], 'virtualization');\n        var renderer = this.locator.getService('rendererFactory');\n        if (!this.parent.getFrozenColumns()) {\n            if (this.parent.enableColumnVirtualization) {\n                renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n            }\n            renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        }\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.parent.height :\n            this.parent.element.getBoundingClientRect().height;\n        this.blockSize = ~~(vHeight / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.parent.notify('refresh-virtual-indices', {});\n        }\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass, extend, closest, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var mTbody;\n        var tbody;\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = this.parent.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.getContentTable().querySelector('tbody');\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (this.parent.getFrozenColumns()) {\n                var moveTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n            }\n        }\n        this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(args.row, tbody.firstChild) : tbody.appendChild(args.row);\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (this.parent.getFrozenColumns()) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n                mTbody = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            this.parent.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mEle, mTbody.firstChild) : mTbody.appendChild(mEle);\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.getFrozenColumns()) {\n            var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n            var fCont = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n            var mCont = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            var fHdr = this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            if (this.parent.frozenRows && idx >= this.parent.frozenRows) {\n                idx -= this.parent.frozenRows;\n            }\n            if (fCont.contains(row)) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    return this.parent.getMovableRowByIndex(idx);\n                }\n                return mCont.children[idx];\n            }\n            else if (mCont.contains(row)) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    return this.parent.getRowByIndex(idx);\n                }\n                return fCont.children[idx];\n            }\n            else if (fHdr.contains(row)) {\n                return mHdr.children[idx];\n            }\n            else if (mHdr.contains(row)) {\n                return fHdr.children[idx];\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        var cloneRow = 'cloneRow';\n        if (closest(args.row, '.e-movablecontent')) {\n            args.row = this.getFreezeRow(args.row);\n            if (isBlazor() && this.parent.isServerRendered) {\n                args[cloneRow] = args.row.cloneNode(true);\n            }\n        }\n        if (isBlazor() && this.parent.isServerRendered) {\n            args.row.parentNode.insertBefore(args[cloneRow], args.row);\n            args.row.classList.add('e-hiddenrow');\n            var tdElement = [].slice.call(args[cloneRow].querySelectorAll('td.e-rowcell'));\n            args[cloneRow].innerHTML = '';\n            tdElement = this.updateFreezeEdit(args[cloneRow], tdElement);\n            args[cloneRow].appendChild(this.getEditElement(elements, true, tdElement, args, true));\n            args[cloneRow].classList.add('e-editedrow');\n            this.refreshFreezeEdit(args[cloneRow], args);\n        }\n        else {\n            var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n            args.row.innerHTML = '';\n            tdElement = this.updateFreezeEdit(args.row, tdElement);\n            args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n            args.row.classList.add('e-editedrow');\n            this.parent.editModule.checkLastRow(args.row, args);\n            this.refreshFreezeEdit(args.row, args);\n        }\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        var fCls;\n        var cont;\n        var frozen = 'frozen';\n        var cloneFrozen = 'cloneFrozen';\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        if (this.parent.getFrozenColumns()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.e-frozenheader';\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.e-frozencontent';\n            }\n            var mTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                form.innerHTML = '';\n                this.appendChildren(form, args.rowData, false);\n            }\n            var fRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                if (isBlazor() && this.parent.isServerRendered) {\n                    args[frozen] = fRows;\n                    args[cloneFrozen] = fRows.cloneNode(true);\n                    fRows.classList.add('e-hiddenrow');\n                    fRows.parentNode.insertBefore(args[cloneFrozen], fRows);\n                    this.updateFrozenCont(args[cloneFrozen], td, mTd);\n                }\n                else {\n                    this.updateFrozenCont(fRows, td, mTd);\n                }\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                if (isBlazor() && this.parent.isServerRendered) {\n                    args[frozen] = fRows;\n                    args[cloneFrozen] = fRows.cloneNode(true);\n                    fRows.parentNode.insertBefore(args[cloneFrozen], fRows);\n                    fRows.classList.add('e-hiddenrow');\n                    this.updateFrozenCont(args[cloneFrozen], mTd, td);\n                }\n                else {\n                    this.updateFrozenCont(fRows, mTd, td);\n                }\n            }\n            if (isBlazor() && this.parent.isServerRendered) {\n                args[cloneFrozen].appendChild(mTd);\n                args[cloneFrozen].classList.add('e-editedrow');\n            }\n            else {\n                fRows.appendChild(mTd);\n                fRows.classList.add('e-editedrow');\n            }\n            alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n        }\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        if (!this.parent.editSettings.template) {\n            this.renderMovable(ele, mEle);\n            mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n                .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        }\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        var frzCols = this.parent.getFrozenColumns();\n        mEle.querySelector('tr').innerHTML = '';\n        for (var i = frzCols; i < this.parent.getColumns().length; i++) {\n            mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[frzCols]));\n        }\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length - gObj.getVisibleFrozenColumns() + this.parent.getIndentCount()).toString() }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = this.parent.createElement('tbody');\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            var td_1 = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var _this = this;\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        if (this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string') {\n            this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n        }\n        var setRules = function () {\n            var cols = _this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].validationRules) {\n                    _this.parent.editModule.formObj.rules[cols[i].field] =\n                        cols[i].validationRules;\n                }\n            }\n        };\n        updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { classList, isBlazor } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        if (isBlazor() && this.parent.isServerRendered) {\n            var cloneCell = 'cloneCell';\n            args[cloneCell].innerHTML = '';\n            args[cloneCell].appendChild(this.getEditElement(elements, args));\n            args[cloneCell].classList.remove('e-ellipsistooltip');\n            args[cloneCell].classList.add('e-editedbatchcell');\n            classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n        }\n        else {\n            args.cell.innerHTML = '';\n            args.cell.appendChild(this.getEditElement(elements, args));\n            args.cell.classList.remove('e-ellipsistooltip');\n            args.cell.classList.add('e-editedbatchcell');\n            classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n        }\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, applyBiggerTheme } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper', styles: 'width: auto' });\n        this.dialog.setAttribute('aria-label', 'Dialog edit');\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        // let position: PositionDataModel = this.parent.element.getBoundingClientRect().height < 400 ?\n        //     { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog(extend({\n            header: gObj.editSettings.headerTemplate ? this.getDialogEditTemplateElement('HeaderTemplate', args) :\n                this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements, args),\n            showCloseIcon: true,\n            allowDragging: true,\n            // position: position,\n            close: this.dialogClose.bind(this),\n            closeOnEscape: true, width: gObj.editSettings.template ? 'auto' : '330px',\n            target: args.target ? args.target : document.body, animationSettings: { effect: 'None' },\n            footerTemplate: gObj.editSettings.footerTemplate ? this.getDialogEditTemplateElement('FooterTemplate', args) : null,\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        }, gObj.editSettings.dialog ? (gObj.editSettings.dialog.params || {}) : {}));\n        if (!isBlazor()) {\n            args.dialog = this.dialogObj;\n        }\n        else {\n            this.dialogObj.locale = this.parent.locale;\n        }\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.dialogObj.appendTo(this.dialog);\n        applyBiggerTheme(this.parent.element, this.dialogObj.element.parentElement);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        var dialogEditTemplates = ['template', 'headerTemplate', 'footerTemplate'];\n        for (var i = 0; i < dialogEditTemplates.length; i++) {\n            if (this.parent.editSettings[dialogEditTemplates[i]]) {\n                var templateName = dialogEditTemplates[i].charAt(0).toUpperCase() + dialogEditTemplates[i].slice(1);\n                var editTemplateID = this.parent.element.id + 'editSettings' + templateName;\n                updateBlazorTemplate(editTemplateID, templateName, this.parent.editSettings);\n            }\n        }\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getDialogEditTemplateElement = function (dialogTemp, args) {\n        var tempDiv = this.parent.createElement('div', { className: 'e-dialog' + dialogTemp });\n        var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n        var templateID = this.parent.element.id + 'editSettings' + dialogTemp;\n        appendChildren(tempDiv, (dialogTemp === 'HeaderTemplate' ? this.parent.getEditHeaderTemplate() :\n            this.parent.getEditFooterTemplate())(dummyData, this.parent, 'editSettings' + dialogTemp, templateID));\n        updateBlazorTemplate(templateID, dialogTemp, this.parent.editSettings);\n        return tempDiv;\n    };\n    DialogEditRender.prototype.getEditElement = function (elements, args) {\n        var _this = this;\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n            var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n            var isReactCompiler = this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string';\n            if (isReactCompiler) {\n                this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n            }\n            var setRules = function () {\n                var columns = _this.parent.getColumns();\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].validationRules) {\n                        _this.parent.editModule.formObj.rules[columns[i].field] =\n                            columns[i].validationRules;\n                    }\n                }\n            };\n            updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n            div.appendChild(form);\n            return div;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editModule.checkColumnIsGrouped(cols[i]) || cols[i].commands || cols[i].commandsTemplate ||\n                cols[i].type === 'checkbox') {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = this.parent.createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, extend, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList, isBlazor, select } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren, parentsUntil, extendObjWithFn } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.parent.notify(events.beforeStartEdit, args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.editSettings.mode === 'Dialog' ?\n            select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document) :\n            gObj.element.querySelector('.e-gridform');\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute('aria-rowindex'), 10);\n            if (gObj.frozenRows && ((args.requestType === 'add' && gObj.editSettings.newRowPosition === 'Top')\n                || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            }\n            else {\n                fForm = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n                var cellArgs = extend({}, args);\n                cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                if (isNullOrUndefined(cellArgs.element) && frzCols) {\n                    cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                }\n                if (typeof col.edit.write === 'string') {\n                    getObject(col.edit.write, window)(cellArgs);\n                }\n                else {\n                    col.edit.write(cellArgs);\n                }\n                continue;\n            }\n            if (this.parent.editModule.checkColumnIsGrouped(col) || col.commands) {\n                continue;\n            }\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (frzCols && cols.indexOf(col) >= frzCols && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n        if (frzCols !== 0 && !this.parent.allowTextWrap && ((args.requestType === 'add') || args.requestType === 'beginEdit')\n            && this.parent.editSettings.mode !== 'Dialog' && !isNullOrUndefined(form) && !isNullOrUndefined(fForm)) {\n            var mTdElement = (fForm.querySelector('tr').children[0]);\n            var fTdElement = (form.querySelector('tr').children[0]);\n            if (fTdElement.offsetHeight > mTdElement.offsetHeight) {\n                mTdElement.style.height = fTdElement.offsetHeight + 'px';\n            }\n            else {\n                fTdElement.style.height = mTdElement.offsetHeight + 'px';\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            var isFocus = this.parent.enableVirtualization && this.parent.editSettings.mode === 'Normal' ? false : true;\n            if (isFocus || (this.parent.enableVirtualization && this.parent.editSettings.newRowPosition === 'Bottom'\n                && parentsUntil(elem, 'e-addedrow'))) {\n                elem.focus();\n            }\n            else {\n                // tslint:disable-next-line:no-any\n                elem.focus({ preventScroll: true });\n            }\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        if (this.parent.editSettings.template) {\n            return {};\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (this.parent.editModule.checkColumnIsGrouped(col)) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cells = void 0;\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                cells = model.generateRows(args.rowData)[0].cells;\n                var cell = cells.filter(function (cell) { return cell.rowID; });\n                var td = cellRenderer.render(cell[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (col.editTemplate) {\n                input = this.parent.createElement('span', { attrs: { 'e-mappinguid': col.uid } });\n                var tempID = this.parent.element.id + col.uid + 'editTemplate';\n                var tempData = extendObjWithFn({}, args.rowData, { column: col });\n                var isReactCompiler = this.parent.isReact && typeof (col.editTemplate) !== 'string';\n                if (isReactCompiler) {\n                    col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID, null, null, input);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    var template = col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID);\n                    appendChildren(input, template);\n                }\n                if (isBlazor()) {\n                    var setRules = function (ruleColumn) {\n                        var column = ruleColumn;\n                        var func = function () {\n                            _this.parent.editModule.formObj.rules[column.field] = column.validationRules;\n                        };\n                        return func;\n                    };\n                    updateBlazorTemplate(tempID, 'EditTemplate', col, true, setRules(col));\n                }\n            }\n            else {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    input = temp(tArgs);\n                }\n                else {\n                    input = col.edit.create(tArgs);\n                }\n                if (typeof input === 'string') {\n                    var div = this.parent.createElement('div');\n                    div.innerHTML = input;\n                    input = div.firstChild;\n                }\n                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n                var complexFieldName = getComplexFieldID(col.field);\n                attributes(isInput ? input.querySelector('input') : input, {\n                    name: complexFieldName, 'e-mappinguid': col.uid,\n                    id: gObj.element.id + complexFieldName\n                });\n                classList(input, ['e-input', 'e-field'], []);\n                if (col.textAlign === 'Right') {\n                    input.classList.add('e-ralign');\n                }\n                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                    (col.isIdentity && args.requestType === 'add')) { // already disabled in cell plugins\n                    input.setAttribute('disabled', '');\n                }\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            chkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox) && args.column.type === 'checkbox') {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        if (isBlazor()) {\n            this.obj.locale = this.parent.locale;\n        }\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined, isBlazor, select } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil, Predicate } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n        this.flag = false;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var pred = new Predicate(args.column.field, 'notequal', null, true, false);\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().where(pred).select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete.bind(this),\n            created: this.dropdownCreated.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        this.obj.query.params = this.parent.query.params;\n        if (isBlazor()) {\n            this.obj.locale = this.parent.locale;\n        }\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.dropdownCreated = function (e) {\n        this.flag = true;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n        if (this.flag && this.column.dataSource) {\n            if ('result' in this.column.dataSource) {\n                this.column.dataSource.result = e.result;\n            }\n            else if (this.column.dataSource instanceof DataManager) {\n                this.column.dataSource.dataSource.json = e.result;\n            }\n        }\n        this.flag = false;\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n            var dlgObj = select('#' + dlgElement.id, document).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend, Internationalization } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.keyEventHandler = function (args) {\n        if (args.keyCode === 13 || args.keyCode === 9) {\n            var evt = document.createEvent('HTMLEvents');\n            evt.initEvent('change', false, true);\n            /* tslint:disable-next-line:no-any */\n            this.dispatchEvent(evt);\n        }\n    };\n    NumericEditCell.prototype.create = function (args) {\n        var complexFieldName = getComplexFieldID(args.column.field);\n        this.instances = new Internationalization(this.parent.locale);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        return this.obj.value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new NumericTextBox(extend({\n            value: parseFloat(getObject(args.column.field, args.rowData)),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            locale: this.parent.locale,\n        }, col.edit.params));\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n        this.obj.appendTo(args.element);\n        this.obj.element.addEventListener('keydown', this.keyEventHandler);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.element.removeEventListener('keydown', this.keyEventHandler);\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { isEditable, getComplexFieldID } from '../base/util';\nimport { TextBox } from '@syncfusion/ej2-inputs';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = this.parent.createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + getComplexFieldID(col.field), name: getComplexFieldID(col.field),\n                style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new TextBox(extend({\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n            placeholder: isInline ? '' : args.column.headerText,\n        }, col.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    DefaultEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend, isBlazor, select } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.currentVirtualData = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        var action = 'action';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    if (e[action] !== 'edit') {\n                        this.parent.selectRow(0);\n                    }\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                if (isBlazor() && !this.parent.isJsComponent) {\n                    var d = 'data';\n                    e[d] = e[d][0];\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                if (!this.parent.isCheckBoxSelection) {\n                    this.parent.selectRow(this.editRowIndex);\n                }\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var _this = this;\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        if (gObj.enableVirtualization || gObj.enableInfiniteScrolling) {\n            var selector = '.e-row[aria-rowindex=\"' + this.rowIndex + '\"]';\n            var virtualRow = this.parent.element.querySelector(selector);\n            if (!virtualRow) {\n                return;\n            }\n        }\n        if (isBlazor()) {\n            var cols = this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    resetBlazorTemplate(gObj.element.id + col.uid, 'Template', this.rowIndex);\n                }\n            }\n        }\n        if (isGroupAdaptive(gObj)) {\n            var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            this.previousData = rObj.data;\n        }\n        else if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n            var e = { data: this.previousData, index: this.rowIndex };\n            this.parent.notify(events.virtualScrollEditActionBegin, e);\n            this.previousData = e.data;\n        }\n        else {\n            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        }\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(getObject(primaryKeys[i], this.previousData));\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData, target: undefined\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.row = tr;\n        }\n        gObj.trigger(events.beginEdit, args, function (begineditargs) {\n            begineditargs.type = 'actionBegin';\n            gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n                if (!editargs.cancel) {\n                    var cloneRow = 'cloneRow';\n                    var frozen = 'frozen';\n                    var cloneFrozen = 'cloneFrozen';\n                    gObj.isEdit = true;\n                    editargs.row = editargs.row ? editargs.row : tr;\n                    if (isBlazor() && gObj.isServerRendered) {\n                        _this.originalRow = editargs.row;\n                        _this.cloneRow = editargs.row.cloneNode(true);\n                        editargs[cloneRow] = _this.cloneRow;\n                    }\n                    if (gObj.editSettings.mode !== 'Dialog') {\n                        gObj.clearSelection();\n                    }\n                    if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n                        gObj.selectionModule.preventFocus = true;\n                        editargs.row.classList.add('e-dlgeditrow');\n                    }\n                    _this.renderer.update(editargs);\n                    if (isBlazor()) {\n                        editargs.form = null;\n                        _this.cloneFrozen = editargs[cloneFrozen];\n                        _this.frozen = editargs[frozen];\n                        _this.cloneRow = editargs[cloneRow];\n                        _this.originalRow = editargs.row;\n                    }\n                    _this.uid = tr.getAttribute('data-uid');\n                    gObj.editModule.applyFormValidation();\n                    editargs.type = 'actionComplete';\n                    gObj.trigger(events.actionComplete, editargs);\n                    _this.args = editargs;\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                    if (isBlazor()) {\n                        _this.parent.notify(events.toolbarRefresh, {});\n                        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n                        _this.parent.notify('start-edit', {});\n                    }\n                }\n            });\n        });\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var _this = this;\n        var gObj = this.parent;\n        this.editRowIndex = index;\n        var args = {\n            requestType: 'save', action: 'edit', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index],\n            row: gObj.getRowByIndex(index)\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        if (args.promise) {\n            args.promise.then(function () { return gObj.refresh(); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            gObj.refresh();\n        }\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var form1 = gObj.editModule.formObj.validate();\n        var form2 = gObj.editModule.mFormObj ? gObj.editModule.mFormObj.validate() : true;\n        return (form1 && form2);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        var isDlg = gObj.editSettings.mode === 'Dialog';\n        var dlgWrapper = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n        var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.element.querySelector('.e-gridform');\n        var data = { virtualData: {}, isAdd: false };\n        this.parent.notify(events.getVirtualData, data);\n        if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n            && this.parent.editSettings.mode === 'Normal' && !dlgForm) {\n            if (this.parent.isEdit) {\n                this.currentVirtualData = editedData = args.data = data.virtualData;\n            }\n        }\n        else {\n            editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n        }\n        if (gObj.getFrozenColumns() && gObj.editSettings.mode === 'Normal') {\n            var mForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            if (gObj.frozenRows && mForm) {\n                editedData = gObj.editModule.getCurrentEditedData(mForm, editedData);\n            }\n            else {\n                var form = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n                if (form) {\n                    editedData = gObj.editModule.getCurrentEditedData(form, editedData);\n                }\n            }\n        }\n        if (isBlazor()) {\n            var form = 'form';\n            var movableForm = 'movableForm';\n            args[form] = null;\n            args[movableForm] = null;\n            args.row = {};\n        }\n        var eleLength = [].slice.call(gObj.element.querySelectorAll('.e-editedrow')).length;\n        if (!data.isAdd && Object.keys(this.currentVirtualData).length && !eleLength) {\n            eleLength = 1;\n        }\n        if (isDlg ? dlgWrapper.querySelectorAll('.e-editedrow').length : eleLength) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n                if (endEditArgs.cancel) {\n                    return;\n                }\n                gObj.showSpinner();\n                gObj.notify(events.updateData, endEditArgs);\n            });\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.virtualScrollEditSuccess, {});\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        if (isBlazor() && this.parent.isServerRendered) {\n            var error = 'error';\n            var message = 'message';\n            if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                e[error] = e[error][message];\n            }\n        }\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        if (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) {\n            this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n        }\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add') {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n            var rowData = 'rowData';\n            args.data = extend({}, extend({}, args[rowData], args.data), e);\n        }\n        var editArgs;\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.closeForm();\n            var rowIndex = 'rowIndex';\n            var action = 'action';\n            var data = 'data';\n            editArgs = { requestType: args.requestType,\n                rowIndex: args[rowIndex], action: args[action], data: args[data] };\n            this.parent.notify('editsuccess', editArgs);\n        }\n        else {\n            this.refreshRow(args.data);\n        }\n        this.parent.notify(events.virtualScrollEditSuccess, args);\n        this.parent.editModule.checkLastRow(args.row);\n        this.parent.editModule.isLastRow = false;\n        this.updateCurrentViewData(args.data);\n        this.blazorTemplate();\n        if (!(isBlazor() && this.parent.isServerRendered)) {\n            this.editRowIndex = null;\n            this.parent.trigger(events.actionComplete, args);\n        }\n        if (isBlazor()) {\n            this.parent.notify(events.toolbarRefresh, {});\n        }\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection) && !this.parent.selectionSettings.checkboxOnly) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                if (isBlazor() && this.parent.isServerRendered) {\n                    var rowIndex = 'editRowIndex';\n                    editArgs[rowIndex] = this.rowIndex > -1 ? this.rowIndex : this.editRowIndex;\n                }\n                else {\n                    this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n                }\n            }\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.closeForm = function () {\n        if (!this.cloneRow && this.parent.isEdit) {\n            this.stopEditStatus();\n        }\n        if (this.cloneRow) {\n            this.cloneRow.remove();\n            this.cloneRow = null;\n            this.originalRow.classList.remove('e-hiddenrow');\n        }\n        if (this.parent.getFrozenColumns() && this.cloneFrozen) {\n            this.cloneFrozen.remove();\n            this.frozen.classList.remove('e-hiddenrow');\n        }\n    };\n    NormalEdit.prototype.blazorTemplate = function () {\n        var cols = this.parent.getColumns();\n        if (this.parent.editSettings.template && this.parent.editSettings.mode === 'Normal') {\n            updateBlazorTemplate(this.parent.element.id + 'editSettingsTemplate', 'Template', this.parent.editSettings);\n        }\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[i];\n            if (col.template) {\n                updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n            }\n            if (col.editTemplate) {\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n            }\n        }\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, ((isBlazor() && e instanceof Array) ? e[0] : { error: e }));\n        this.parent.hideSpinner();\n        this.parent.log('actionfailure', { error: e });\n    };\n    NormalEdit.prototype.needRefresh = function () {\n        var refresh = true;\n        var editedRow = this.parent.element.querySelector('.e-gridform');\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && this.parent.editSettings.mode === 'Normal' && !editedRow) {\n            refresh = false;\n        }\n        return refresh;\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            this.parent.notify(events.refreshVirtualCache, data);\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            if (this.needRefresh()) {\n                row.refresh(rowObj, this.parent.getColumns(), true);\n            }\n            if (frzCols) {\n                var uid = void 0;\n                var tr = this.parent.element.querySelector('[data-uid=' + rowObj.uid + ']');\n                if ((parentsUntil(tr, 'e-frozencontent')) || (parentsUntil(tr, 'e-frozenheader'))) {\n                    if (this.parent.infiniteScrollSettings.enableCache) {\n                        uid = this.parent.getMovableRowByIndex(rowObj.index).getAttribute('data-uid');\n                    }\n                    else {\n                        uid = this.parent.getMovableRows()[rowObj.index].getAttribute('data-uid');\n                    }\n                }\n                else {\n                    if (this.parent.infiniteScrollSettings.enableCache) {\n                        uid = this.parent.getRowByIndex(rowObj.index).getAttribute('data-uid');\n                    }\n                    else {\n                        uid = this.parent.getRows()[rowObj.index].getAttribute('data-uid');\n                    }\n                }\n                rowObj = this.parent.getRowObjectFromUID(uid);\n                rowObj.changes = data;\n                row.refresh(rowObj, this.parent.columns, true);\n                this.parent.editModule.checkLastRow(tr);\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        var _this = this;\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, cancel: false, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        gObj.notify(events.virtualScrollEditCancel, args);\n        this.blazorTemplate();\n        if (isBlazor()) {\n            var form = 'form';\n            args[form] = null;\n        }\n        gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n            if (closeEditArgs.cancel) {\n                return;\n            }\n            if (_this.parent.editSettings.mode === 'Dialog') {\n                _this.parent.notify(events.dialogDestroy, {});\n            }\n            gObj.isEdit = false;\n            _this.stopEditStatus();\n            closeEditArgs.type = events.actionComplete;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                if (isBlazor() && gObj.isServerRendered) {\n                    _this.closeForm();\n                }\n                else {\n                    _this.refreshRow(closeEditArgs.data);\n                }\n            }\n            var isLazyLoad = gObj.groupSettings.enableLazyLoading && gObj.groupSettings.columns.length\n                && !gObj.getContentTable().querySelector('tr.e-emptyrow');\n            if (!gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n                !gObj.getContentTable().querySelector('tr.e-row') && !isLazyLoad) {\n                gObj.renderModule.emptyRow();\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.selectRow(_this.rowIndex);\n            }\n            gObj.trigger(events.actionComplete, closeEditArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('close-edit', {});\n            }\n        });\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        var cols = (gObj.columnModel);\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field) {\n                DataUtil.setValue(cols[i].field, cols[i].defaultValue, this.previousData);\n            }\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData, target: undefined\n        };\n        var rowData = { virtualData: {} };\n        this.parent.notify(events.getVirtualData, rowData);\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && Object.keys(rowData.virtualData).length) {\n            args.data = args.rowData = rowData.virtualData;\n        }\n        if (isBlazor()) {\n            var form = 'form';\n            args[form] = null;\n        }\n        gObj.trigger(events.actionBegin, args, function (addArgs) {\n            if (addArgs.cancel) {\n                return;\n            }\n            gObj.isEdit = true;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.clearSelection();\n            }\n            _this.renderer.addNew(addArgs);\n            gObj.editModule.applyFormValidation();\n            addArgs.type = events.actionComplete;\n            addArgs.row = gObj.element.querySelector('.e-addedrow');\n            gObj.trigger(events.actionComplete, addArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n            _this.args = addArgs;\n        });\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getObject(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        var args = {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        };\n        if (!isNullOrUndefined(this.parent.commandDelIndex)) {\n            args.data[0] =\n                this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute('data-uid')).data;\n        }\n        if (this.parent.enableVirtualization && args.data.length > 1) {\n            var uid = this.parent.getSelectedRows()[0].getAttribute('data-uid');\n            args.data = [this.parent.getRowObjectFromUID(uid).data];\n        }\n        var dataInString = 'data';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            args[dataInString] = args[dataInString][0];\n        }\n        this.parent.notify(events.modelChanged, args);\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var elem = gObj.element.querySelector('.e-addedrow');\n        var mElem;\n        var editMElem;\n        if (gObj.getFrozenColumns()) {\n            mElem = gObj.element.querySelectorAll('.e-addedrow')[1];\n            editMElem = gObj.element.querySelectorAll('.e-editedrow')[1];\n            if (mElem) {\n                remove(mElem);\n            }\n            if (editMElem) {\n                editMElem.classList.remove('e-editedrow');\n            }\n        }\n        if (elem) {\n            remove(elem);\n        }\n        elem = gObj.element.querySelector('.e-editedrow');\n        if (elem) {\n            elem.classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.recordAdded, this.requestSuccess, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n        this.parent.on('closeinline', this.closeForm, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.recordAdded, this.requestSuccess);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n        this.parent.off('closeinline', this.closeForm);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass, setValue, isBlazor, closest, select } from '@syncfusion/ej2-base';\nimport { remove, classList, updateBlazorTemplate, blazorTemplates, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getObject, alignFrozenEditForm, getScrollBarWidth } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.originalCell = {};\n        this.cloneCell = {};\n        this.editNext = false;\n        this.preventSaveCell = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.batchCancelFunction = this.batchCancel.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.addEventListener(events.batchCancel, this.batchCancelFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.editNextValCell, this.editNextValCell, this);\n        this.parent.on('closebatch', this.closeForm, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.removeEventListener(events.batchCancel, this.batchCancelFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.editNextValCell, this.editNextValCell);\n        this.parent.off('closebatch', this.closeForm);\n    };\n    BatchEdit.prototype.batchCancel = function (args) {\n        this.parent.focusModule.restoreFocus();\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            if (this.parent.isEdit && closest(this.form, 'td') !== closest(e.target, 'td')) {\n                this.saveCell();\n                this.editNextValCell();\n            }\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))\n            && !target.parentElement.classList.contains('e-editedrow')) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field, this.isAddRow(parseInt(tr.getAttribute('aria-rowindex'), 10)));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenColumns();\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            if (this.parent.isEdit && clear) {\n                this.saveCell();\n            }\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!this.parent.element.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    var col = this.parent.getColumns()[e.indexes[1]];\n                    if (col && !this.parent.isEdit) {\n                        this.editCell(e.indexes[0], col.field);\n                    }\n                    if (isEdit || this.parent.isLastCellPrimaryKey) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    if (isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.closeEdit = function () {\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        var argument = { cancel: false, batchChanges: this.getBatchChanges() };\n        gObj.notify(events.beforeBatchCancel, argument);\n        if (argument.cancel) {\n            return;\n        }\n        if (gObj.frozenColumns && rows.length < this.parent.currentViewData.length * 2 && !(isBlazor() && gObj.isServerRendered)) {\n            rows.push.apply(rows, this.parent.getMovableRowsObject());\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n                }\n            }\n        }\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tr;\n        var mTr;\n        var movObj;\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        gObj.clearSelection();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDirty) {\n                if (gObj.frozenColumns) {\n                    movObj = gObj.getMovableRowsObject()[rows[i].index];\n                    movObj.isDirty = true;\n                }\n                tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n                if (gObj.frozenRows && !tr) {\n                    tr = gObj.getHeaderContent().querySelector('[data-uid=' + rows[i].uid + ']');\n                }\n                if (gObj.frozenColumns) {\n                    if (gObj.frozenRows) {\n                        mTr = gObj.getHeaderContent().querySelector('.e-movableheader')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                        if (!mTr) {\n                            mTr = gObj.getContent().querySelector('.e-movablecontent')\n                                .querySelector('[data-uid=' + rows[i].uid + ']');\n                        }\n                    }\n                    else {\n                        mTr = gObj.getContent().querySelector('.e-movablecontent')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                }\n                if (tr || mTr) {\n                    if (tr && tr.classList.contains('e-insertedrow') || mTr && mTr.classList.contains('e-insertedrow')) {\n                        if (tr) {\n                            remove(tr);\n                        }\n                        if (mTr && (gObj.frozenColumns || gObj.frozenRows)) {\n                            remove(mTr);\n                        }\n                        this.removeRowObjectFromUID(rows[i].uid);\n                        i--;\n                    }\n                    else {\n                        refreshForeignData(rows[i], this.parent.getForeignKeyColumns(), rows[i].data);\n                        delete rows[i].changes;\n                        delete rows[i].edit;\n                        rows[i].isDirty = false;\n                        var ftr = mTr ? mTr : tr;\n                        if (isBlazor() && gObj.isServerRendered) {\n                            if (gObj.getFrozenColumns()) {\n                                this.removeHideAndSelection(mTr);\n                            }\n                            this.removeHideAndSelection(tr);\n                            this.closeForm();\n                        }\n                        else {\n                            classList(ftr, [], ['e-hiddenrow', 'e-updatedtd']);\n                            rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n                        }\n                    }\n                    if (this.parent.aggregates.length > 0) {\n                        var type = 'type';\n                        var editType = [];\n                        editType[type] = 'cancel';\n                        this.parent.notify(events.refreshFooterRenderer, editType);\n                        if (this.parent.groupSettings.columns.length > 0) {\n                            this.parent.notify(events.groupAggregates, editType);\n                        }\n                    }\n                }\n            }\n        }\n        if (isBlazor() && gObj.isServerRendered) {\n            gObj.selectRow(gObj.selectionModule.prevRowIndex);\n        }\n        if (!gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.renderModule.renderEmptyRow();\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n        if (gObj.frozenColumns) {\n            rows.splice(this.parent.getMovableRowsObject().length, rows.length);\n        }\n    };\n    BatchEdit.prototype.removeHideAndSelection = function (tr) {\n        if (tr.classList.contains('e-hiddenrow')) {\n            tr.removeAttribute('aria-selected');\n            var tdElements = [].slice.call(tr.querySelectorAll('.e-selectionbackground'));\n            for (var i = 0; i < tdElements.length; i++) {\n                removeClass([tdElements[i]], ['e-selectionbackground', 'e-active']);\n            }\n        }\n        classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        this.bulkDelete(fieldname, data);\n        if (this.parent.aggregates.length > 0) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n            if (this.parent.groupSettings.columns.length > 0) {\n                this.parent.notify(events.groupAggregates, {});\n            }\n        }\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.closeForm = function () {\n        for (var i = 0; i < Object.keys(this.originalCell).length; i++) {\n            for (var j = 0; j < Object.keys(this.cloneCell).length; j++) {\n                if (Object.keys(this.originalCell)[i] === Object.keys(this.cloneCell)[j]) {\n                    this.cloneCell[Object.keys(this.cloneCell)[j]].replaceWith(this.originalCell[Object.keys(this.originalCell)[i]]);\n                    if (this.originalCell[Object.keys(this.originalCell)[i]].classList.contains('e-selectionbackground')) {\n                        this.originalCell[Object.keys(this.originalCell)[i]]\n                            .classList.remove('e-selectionbackground', 'e-cellselectionbackground', 'e-active');\n                    }\n                }\n            }\n        }\n        this.cloneCell = {};\n        this.originalCell = {};\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var _this = this;\n        var gObj = this.parent;\n        var deletedRecords = 'deletedRecords';\n        if (gObj.isCheckBoxSelection) {\n            var checkAllBox = gObj.element.querySelector('.e-checkselectall').parentElement;\n            if (checkAllBox.classList.contains('e-checkbox-disabled') &&\n                gObj.pageSettings.totalRecordsCount > gObj.currentViewData.length) {\n                removeClass([checkAllBox], ['e-checkbox-disabled']);\n            }\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    blazorTemplates[this.parent.element.id + col.uid] = [];\n                    resetBlazorTemplate(this.parent.element.id + col.uid, 'Template');\n                }\n            }\n        }\n        this.saveCell();\n        if (gObj.isEdit || this.editNextValCell() || gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        if (this.parent.selectionSettings.type === 'Multiple' && changes[deletedRecords].length &&\n            this.parent.selectionSettings.persistSelection) {\n            changes[deletedRecords] = this.removeSelectedData;\n            this.removeSelectedData = [];\n        }\n        var original = {\n            changedRecords: this.parent.getRowsObject()\n                .filter(function (row) { return row.isDirty && ['add', 'delete'].indexOf(row.edit) === -1; })\n                .map(function (row) { return row.data; })\n        };\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args, function (beforeBatchSaveArgs) {\n            if (beforeBatchSaveArgs.cancel) {\n                return;\n            }\n            if (isBlazor() && _this.parent.isServerRendered) {\n                var content = _this.parent.getContent();\n                _this.closeForm();\n                removeClass(content.querySelectorAll('.e-updatedtd'), ['e-updatedtd']);\n                if (content.querySelector('.e-insertedrow, .e-hiddenrow')) {\n                    removeClass(content.querySelectorAll('.e-hiddenrow'), ['e-hiddenrow']);\n                    var insertedRow = [].slice.call(content.querySelectorAll('.e-insertedrow'));\n                    for (var i = 0; i < insertedRow.length; i++) {\n                        insertedRow[i].remove();\n                    }\n                }\n                _this.refreshRowIdx();\n            }\n            gObj.showSpinner();\n            gObj.notify(events.bulkSave, { changes: changes, original: original });\n        });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        rows.splice(i, 1);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        var isTop = this.parent.editSettings.newRowPosition === 'Top';\n        var frozenColumnsCount = this.parent.getFrozenColumns();\n        if (frozenColumnsCount) {\n            var mRow = this.parent.getMovableRowsObject();\n            var mEle = row.clone();\n            mEle.cells = mEle.cells.slice(frozenColumnsCount);\n            row.cells = row.cells.slice(0, frozenColumnsCount);\n            isTop ? mRow.unshift(mEle) : mRow.push(mEle);\n        }\n        isTop ? this.parent.getRowsObject().unshift(row) :\n            this.parent.getRowsObject().push(row);\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var _this = this;\n        this.removeSelectedData = [];\n        var gObj = this.parent;\n        var index = gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            if (data) {\n                args.row = gObj.editModule.deleteRowUid ? gObj.getRowElementByUID(gObj.editModule.deleteRowUid)\n                    : gObj.getRows()[gObj.getCurrentViewRecords().indexOf(data)];\n            }\n            else {\n                args.row = data ? gObj.getRows()[index] : selectedRows[0];\n            }\n            if (!args.row) {\n                return;\n            }\n        }\n        gObj.trigger(events.beforeBatchDelete, args, function (beforeBatchDeleteArgs) {\n            if (beforeBatchDeleteArgs.cancel) {\n                return;\n            }\n            _this.removeSelectedData = gObj.getSelectedRecords();\n            gObj.clearSelection();\n            beforeBatchDeleteArgs.row = beforeBatchDeleteArgs.row ?\n                beforeBatchDeleteArgs.row : data ? gObj.getRows()[index] : selectedRows[0];\n            if (_this.parent.getFrozenColumns()) {\n                if (data) {\n                    index = parseInt(beforeBatchDeleteArgs.row.getAttribute('aria-rowindex'), 10);\n                    selectedRows = [beforeBatchDeleteArgs.row];\n                    if (parentsUntil(beforeBatchDeleteArgs.row, 'e-frozencontent')\n                        || parentsUntil(beforeBatchDeleteArgs.row, 'e-frozenheader')) {\n                        selectedRows = selectedRows.concat(gObj.getMovableRowByIndex(index));\n                    }\n                    else if (parentsUntil(beforeBatchDeleteArgs.row, 'e-movablecontent')\n                        || (parentsUntil(beforeBatchDeleteArgs.row, 'e-movableheader'))) {\n                        selectedRows = selectedRows.concat(gObj.getFrozenRowByIndex(index));\n                    }\n                }\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        var rowObj = gObj.getRowObjectFromUID(uid);\n                        rowObj.isDirty = true;\n                        rowObj.edit = 'delete';\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getMovableDataRows().length >= gObj.frozenRows) {\n                            gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n                                .appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                            gObj.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody')\n                                .appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                        }\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getDataRows().length >= gObj.frozenRows) {\n                            gObj.getHeaderContent().querySelector('tbody').appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                        }\n                    }\n                    delete selectedRows[i];\n                }\n                var fCont = gObj.getContent().querySelector('.e-frozencontent');\n                var mCont = gObj.getContent().querySelector('.e-movablecontent');\n                fCont.style.height = mCont.offsetHeight - getScrollBarWidth() + 'px';\n            }\n            else if (!_this.parent.getFrozenColumns() && (selectedRows.length === 1 || data)) {\n                var uid = beforeBatchDeleteArgs.row.getAttribute('data-uid');\n                uid = data && _this.parent.editModule.deleteRowUid ? uid = _this.parent.editModule.deleteRowUid : uid;\n                if (beforeBatchDeleteArgs.row.classList.contains('e-insertedrow')) {\n                    _this.removeRowObjectFromUID(uid);\n                    remove(beforeBatchDeleteArgs.row);\n                }\n                else {\n                    var rowObj = gObj.getRowObjectFromUID(uid);\n                    rowObj.isDirty = true;\n                    rowObj.edit = 'delete';\n                    classList(beforeBatchDeleteArgs.row, ['e-hiddenrow', 'e-updatedtd'], []);\n                }\n                delete beforeBatchDeleteArgs.row;\n            }\n            else {\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uniqueid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uniqueid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        var selectedRow = gObj.getRowObjectFromUID(uniqueid);\n                        selectedRow.isDirty = true;\n                        selectedRow.edit = 'delete';\n                        delete selectedRows[i];\n                    }\n                }\n            }\n            _this.refreshRowIdx();\n            if (data) {\n                gObj.editModule.deleteRowUid = undefined;\n                if (gObj.getSelectedRows().length) {\n                    index = parseInt(gObj.getSelectedRows()[0].getAttribute('aria-rowindex'), 10);\n                }\n            }\n            if (!gObj.isCheckBoxSelection) {\n                gObj.selectRow(index);\n            }\n            gObj.trigger(events.batchDelete, beforeBatchDeleteArgs);\n            gObj.notify(events.batchDelete, { rows: _this.parent.getRowsObject() });\n            gObj.notify(events.toolbarRefresh, {});\n        });\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var rows = [];\n        var mRows = [];\n        var nonMovableRows = [];\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.frozenRows) {\n            rows = [].slice.call(this.parent.getHeaderTable().querySelector('tbody').children);\n            if (frzCols) {\n                mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n                for (var i = 0; i < mRows.length; i++) {\n                    nonMovableRows[i] = this.parent.createElement('tr', { className: 'emptynonmv' });\n                }\n            }\n        }\n        if (frzCols) {\n            mRows = mRows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n            nonMovableRows = nonMovableRows.concat([].slice.call(this.parent.element.querySelector('.e-movablecontent').querySelector('tbody').children));\n        }\n        rows = rows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                rows[i].setAttribute('aria-rowindex', j.toString());\n                if (frzCols) {\n                    mRows[i].setAttribute('aria-rowindex', j.toString());\n                    if (nonMovableRows[i].classList.contains('e-row')) {\n                        nonMovableRows[i].setAttribute('aria-rowindex', j.toString());\n                    }\n                }\n                j++;\n            }\n            else {\n                rows[i].removeAttribute('aria-rowindex');\n                if (frzCols) {\n                    mRows[i].removeAttribute('aria-rowindex');\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var _this = this;\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.parent.element.classList.add('e-editing');\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args, function (beforeBatchAddArgs) {\n            if (beforeBatchAddArgs.cancel) {\n                return;\n            }\n            _this.isAdded = true;\n            gObj.clearSelection();\n            var mTr;\n            var mTbody;\n            var row = new RowRenderer(_this.serviceLocator, null, _this.parent);\n            var model = new RowModelGenerator(_this.parent);\n            var modelData = model.generateRows([beforeBatchAddArgs.defaultData]);\n            var tr = row.render(modelData[0], gObj.getColumns());\n            var col;\n            var index;\n            for (var i = 0; i < _this.parent.groupSettings.columns.length; i++) {\n                tr.insertBefore(_this.parent.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n                modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            var tbody = gObj.getContentTable().querySelector('tbody');\n            tr.classList.add('e-insertedrow');\n            if (tbody.querySelector('.e-emptyrow')) {\n                var emptyRow = tbody.querySelector('.e-emptyrow');\n                emptyRow.parentNode.removeChild(emptyRow);\n                if (_this.parent.getFrozenColumns()) {\n                    var moveTbody = _this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                    (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n                }\n            }\n            if (gObj.getFrozenColumns()) {\n                mTr = _this.renderMovable(tr);\n                if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                    mTbody = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n                }\n                else {\n                    mTbody = gObj.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                }\n                _this.parent.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mTr, mTbody.firstChild) : mTbody.appendChild(mTr);\n                addClass(mTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n                if (_this.parent.height === 'auto') {\n                    _this.parent.notify(events.frozenHeight, {});\n                }\n            }\n            if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                tbody = gObj.getHeaderContent().querySelector('tbody');\n            }\n            else {\n                tbody = gObj.getContent().querySelector('tbody');\n            }\n            _this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(tr, tbody.firstChild) : tbody.appendChild(tr);\n            addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            modelData[0].isDirty = true;\n            modelData[0].changes = extend({}, {}, modelData[0].data, true);\n            modelData[0].edit = 'add';\n            _this.addRowObject(modelData[0]);\n            _this.refreshRowIdx();\n            _this.focus.forgetPrevious();\n            gObj.notify(events.batchAdd, { rows: _this.parent.getRowsObject(), args: { isFrozen: _this.parent.getFrozenColumns() } });\n            var changes = _this.getBatchChanges();\n            var addedRecords = 'addedRecords';\n            var dRecords = 'deletedRecords';\n            var btmIdx = _this.parent.getCurrentViewRecords().length + changes[addedRecords].length - changes[dRecords].length - 1;\n            _this.parent.editSettings.newRowPosition === 'Top' ? gObj.selectRow(0) : gObj.selectRow(btmIdx);\n            if (!data) {\n                index = _this.findNextEditableCell(0, true);\n                col = gObj.getColumns()[index];\n                _this.parent.editSettings.newRowPosition === 'Top' ? _this.editCell(0, col.field, true) :\n                    _this.editCell(btmIdx, col.field, true);\n            }\n            if (_this.parent.aggregates.length > 0 && (data || changes[addedRecords].length)) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n            }\n            var args1 = {\n                defaultData: beforeBatchAddArgs.defaultData, row: tr,\n                columnObject: col, columnIndex: index, primaryKey: beforeBatchAddArgs.primaryKey, cell: tr.cells[index]\n            };\n            gObj.trigger(events.batchAdd, args1);\n            if (gObj.getFrozenColumns()) {\n                alignFrozenEditForm(mTr.querySelector('td:not(.e-hide)'), tr.querySelector('td:not(.e-hide)'));\n            }\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n        });\n    };\n    BatchEdit.prototype.renderMovable = function (ele) {\n        var mEle = ele.cloneNode(true);\n        for (var i = 0; i < this.parent.getFrozenColumns(); i++) {\n            mEle.removeChild(mEle.children[0]);\n        }\n        for (var i = this.parent.getFrozenColumns(), len = ele.childElementCount; i < len; i++) {\n            ele.removeChild(ele.children[ele.childElementCount - 1]);\n        }\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd, isValOnly) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        var validation;\n        for (var i = columnIndex; i < endIndex; i++) {\n            validation = isValOnly ? isNullOrUndefined(cols[i].validationRules) : false;\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey) && !validation) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = (gObj.columnModel); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.field) {\n                setValue(col.field, col.defaultValue ? col.defaultValue : dValues[col.type], data);\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.getAttribute('index'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        this.index = index;\n        this.field = field;\n        this.isAdd = isAdd;\n        var checkEdit = gObj.isEdit && !(this.cellDetails.column.field === field\n            && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index));\n        if (isBlazor() && col.template && !isAdd) {\n            resetBlazorTemplate(this.parent.element.id + col.uid, 'Template', index);\n        }\n        if (gObj.editSettings.allowEditing) {\n            if (!checkEdit && col.allowEditing) {\n                this.editCellExtend(index, field, isAdd);\n            }\n            else if (checkEdit) {\n                this.editNext = true;\n                this.saveCell();\n            }\n        }\n    };\n    BatchEdit.prototype.editCellExtend = function (index, field, isAdd) {\n        var _this = this;\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (gObj.isEdit) {\n            return;\n        }\n        var row;\n        var rowData;\n        var mRowData;\n        var colIdx = gObj.getColumnIndexByField(field);\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols && colIdx >= frzCols) {\n            row = gObj.getMovableDataRows()[index];\n            mRowData = this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[index].getAttribute('data-uid'));\n            rowData = mRowData.changes ? extend({}, {}, mRowData.changes, true) : extend({}, {}, this.getDataByIndex(index), true);\n        }\n        else {\n            row = gObj.getDataRows()[index];\n            rowData = extend({}, {}, this.getDataByIndex(index), true);\n        }\n        if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.columns ||\n            (col.isPrimaryKey && col.isIdentity)) {\n            this.parent.isLastCellPrimaryKey = true;\n            return;\n        }\n        this.parent.isLastCellPrimaryKey = false;\n        this.parent.element.classList.add('e-editing');\n        var rowObj = gObj.getRowObjectFromUID(row.getAttribute('data-uid'));\n        var cells = [].slice.apply(row.cells);\n        var args = {\n            columnName: col.field, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n            primaryKey: keys, rowData: rowData,\n            validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n            value: getObject(col.field, rowData),\n            type: !isAdd ? 'edit' : 'add', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = cells[this.getColIndex(cells, this.getCellIdx(col.uid))];\n            args.row = row;\n            args.columnObject = col;\n            if (!args.cell) {\n                return;\n            }\n        }\n        gObj.trigger(events.cellEdit, args, function (cellEditArgs) {\n            if (cellEditArgs.cancel) {\n                return;\n            }\n            cellEditArgs.cell = cellEditArgs.cell ? cellEditArgs.cell : cells[_this.getColIndex(cells, _this.getCellIdx(col.uid))];\n            cellEditArgs.row = cellEditArgs.row ? cellEditArgs.row : row;\n            cellEditArgs.columnObject = cellEditArgs.columnObject ? cellEditArgs.columnObject : col;\n            cellEditArgs.columnObject.index = isNullOrUndefined(cellEditArgs.columnObject.index) ? 0 : cellEditArgs.columnObject.index;\n            _this.cellDetails = {\n                rowData: rowData, column: col, value: cellEditArgs.value, isForeignKey: cellEditArgs.isForeignKey, rowIndex: index,\n                cellIndex: parseInt(cellEditArgs.cell.getAttribute('aria-colindex'), 10),\n                foreignKeyData: cellEditArgs.foreignKeyData\n            };\n            if (cellEditArgs.cell.classList.contains('e-updatedtd')) {\n                _this.isColored = true;\n                cellEditArgs.cell.classList.remove('e-updatedtd');\n            }\n            if (isBlazor() && gObj.isServerRendered) {\n                var cell = 'cells';\n                var cloneCell = 'cloneCell';\n                var indent = cellEditArgs.row.querySelectorAll('.e-indentcell, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop').length;\n                _this.cloneCell[\"\" + _this.cellDetails.rowIndex + cellEditArgs.columnObject.index] =\n                    cellEditArgs[cloneCell] = cellEditArgs.cell.cloneNode(true);\n                if ((parentsUntil(cellEditArgs.cell, 'e-movableheader') || parentsUntil(cellEditArgs.cell, 'e-movablecontent'))) {\n                    cellEditArgs.row.insertCell(cellEditArgs.columnObject.index - gObj.getFrozenColumns());\n                    cellEditArgs.row.replaceChild(cellEditArgs[cloneCell], cellEditArgs.row[cell][cellEditArgs.columnObject.index - gObj.getFrozenColumns()]);\n                }\n                else {\n                    cellEditArgs.row.insertCell(cellEditArgs.columnObject.index + indent);\n                    cellEditArgs.row.replaceChild(cellEditArgs[cloneCell], cellEditArgs.row[cell][cellEditArgs.columnObject.index + indent]);\n                }\n                _this.originalCell[\"\" + _this.cellDetails.rowIndex + cellEditArgs.columnObject.index] =\n                    cellEditArgs.cell.parentElement.removeChild(cellEditArgs.cell);\n                removeClass([_this.cloneCell[\"\" + _this.cellDetails.rowIndex + cellEditArgs.columnObject.index]], ['e-focus', 'e-focused']);\n            }\n            gObj.isEdit = true;\n            gObj.clearSelection();\n            if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                gObj.selectRow(_this.cellDetails.rowIndex, true);\n            }\n            _this.renderer.update(cellEditArgs);\n            _this.parent.notify(events.batchEditFormRendered, cellEditArgs);\n            _this.form = select('#' + gObj.element.id + 'EditForm', gObj.element);\n            gObj.editModule.applyFormValidation([col]);\n            _this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        });\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var col = this.parent.getColumnByField(field);\n        var index = this.parent.getColumnIndexByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = this.parent.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[index];\n            if (this.parent.getFrozenColumns()) {\n                var cells = [].slice.call(this.parent.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')).concat([].slice.call(this.parent.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')));\n                td = cells[index];\n            }\n            var rowObj = parentsUntil(td, 'e-movablecontent') ? this.parent.getMovableRowsObject()[rowIndex] :\n                this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value, td) {\n        var currentRowObj;\n        if (!this.parent.getFrozenColumns()) {\n            if (!rowObj.changes) {\n                rowObj.changes = extend({}, {}, rowObj.data, true);\n            }\n            if (!isNullOrUndefined(field)) {\n                DataUtil.setValue(field, value, rowObj.changes);\n            }\n            if (rowObj.data[field] !== value) {\n                rowObj.isDirty = true;\n            }\n        }\n        else {\n            var rowEle = this.parent.getRowElementByUID(rowObj.uid);\n            var rowIndex = parseInt(rowEle.getAttribute('aria-rowindex'), 10);\n            currentRowObj = this.parent.getRowsObject()[rowIndex];\n            if (!currentRowObj.changes) {\n                currentRowObj.changes = extend({}, {}, rowObj.data, true);\n            }\n            if (!isNullOrUndefined(field)) {\n                setValue(field, value, currentRowObj.changes);\n            }\n            var movableRowObject = void 0;\n            if (isBlazor() && this.parent.isServerRendered && (parentsUntil(td, 'e-movableheader') ||\n                parentsUntil(td, 'e-movablecontent'))) {\n                var movRowEle = this.parent.getMovableRowByIndex(this.cellDetails.rowIndex);\n                var movRowIndex = parseInt(movRowEle.getAttribute('aria-rowindex'), 10);\n                movableRowObject = this.parent.getMovableRowsObject()[movRowIndex];\n            }\n            else {\n                movableRowObject = this.parent.getMovableRowsObject()[rowIndex];\n            }\n            movableRowObject.changes = extend({}, {}, currentRowObj.changes, true);\n            if (rowObj.data[field] !== value) {\n                movableRowObject.isDirty = true;\n                currentRowObj.isDirty = true;\n            }\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        value = column.type === 'number' && !isNullOrUndefined(value) ? parseFloat(value) : value;\n        this.setChanges(rowObj, column.field, value, td);\n        var frzCols = this.parent.getFrozenColumns();\n        frzCols = frzCols && this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && this.getCellIdx(column.uid) >= frzCols && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        var parentElement;\n        var cellIndex;\n        if (this.parent.isReact) {\n            parentElement = td.parentElement;\n            cellIndex = td.cellIndex;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - (this.getCellIdx(column.uid) >= frzCols ? frzCols : 0)], rowObj.changes, { 'index': this.getCellIdx(column.uid) });\n        if (this.parent.isReact) {\n            this.newReactTd = parentElement.cells[cellIndex];\n            parentElement.cells[cellIndex].classList.add('e-updatedtd');\n        }\n        else {\n            td.classList.add('e-updatedtd');\n        }\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.editNextValCell = function () {\n        var gObj = this.parent;\n        var changes = this.getBatchChanges();\n        var addedRecords = 'addedRecords';\n        var dRecords = 'deletedRecords';\n        var btmIdx = (this.parent.getCurrentViewRecords().length + changes[addedRecords].length - changes[dRecords].length) - 1;\n        if (this.isAdded && !gObj.isEdit) {\n            for (var i = this.cellDetails.cellIndex; i < gObj.getColumns().length; i++) {\n                if (gObj.isEdit) {\n                    return;\n                }\n                var index = this.findNextEditableCell(this.cellDetails.cellIndex + 1, true, true);\n                var col = gObj.getColumns()[index];\n                if (col) {\n                    this.parent.editSettings.newRowPosition === 'Bottom' ? this.editCell(btmIdx, col.field, true) :\n                        this.editCell(0, col.field, true);\n                    this.saveCell();\n                }\n            }\n            if (!gObj.isEdit) {\n                this.isAdded = false;\n            }\n        }\n    };\n    BatchEdit.prototype.escapeCellEdit = function () {\n        var args = this.generateCellArgs();\n        args.value = args.previousValue;\n        this.successCallBack(args, args.cell.parentElement, args.column, true)(args);\n    };\n    BatchEdit.prototype.generateCellArgs = function () {\n        var gObj = this.parent;\n        this.parent.element.classList.remove('e-editing');\n        var column = this.cellDetails.column;\n        var obj = {};\n        obj[column.field] = getObject(column.field, this.cellDetails.rowData);\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, obj);\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        var value = getObject(column.field, cloneEditedData);\n        if (!isNullOrUndefined(column.field) && !isUndefined(value)) {\n            setValue(column.field, value, editedData);\n        }\n        var args = {\n            columnName: column.field,\n            value: getObject(column.field, editedData),\n            rowData: this.cellDetails.rowData,\n            column: column,\n            previousValue: this.cellDetails.value,\n            isForeignKey: this.cellDetails.isForeignKey,\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = this.form.parentElement;\n            args.columnObject = column;\n        }\n        return args;\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        if (this.preventSaveCell) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        this.preventSaveCell = true;\n        var args = this.generateCellArgs();\n        var tr = isBlazor() ? parentsUntil(this.form, 'e-row') : args.cell.parentElement;\n        var col = isBlazor() ? this.cellDetails.column : args.column;\n        if (isBlazor()) {\n            delete args.column;\n        }\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args, this.successCallBack(args, tr, col));\n            gObj.notify(events.batchForm, { formObj: this.form });\n        }\n        else {\n            this.successCallBack(args, tr, col)(args);\n        }\n    };\n    BatchEdit.prototype.successCallBack = function (cellSaveArgs, tr, column, isEscapeCellEdit) {\n        var _this = this;\n        return function (cellSaveArgs) {\n            var gObj = _this.parent;\n            cellSaveArgs.cell = cellSaveArgs.cell ? cellSaveArgs.cell : _this.form.parentElement;\n            cellSaveArgs.columnObject = cellSaveArgs.columnObject ? cellSaveArgs.columnObject : column;\n            cellSaveArgs.columnObject.index = isNullOrUndefined(cellSaveArgs.columnObject.index) ? 0 : cellSaveArgs.columnObject.index;\n            if (cellSaveArgs.cancel) {\n                _this.preventSaveCell = false;\n                if (_this.editNext) {\n                    _this.editNext = false;\n                    if (_this.cellDetails.rowIndex === _this.index && _this.cellDetails.column.field === _this.field) {\n                        return;\n                    }\n                    _this.editCellExtend(_this.index, _this.field, _this.isAdd);\n                }\n                return;\n            }\n            gObj.editModule.destroyWidgets([column]);\n            gObj.isEdit = false;\n            gObj.editModule.destroyForm();\n            if (isBlazor() && column.template && !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow')) {\n                updateBlazorTemplate(gObj.element.id + column.uid, 'Template', column, false);\n            }\n            _this.parent.notify(events.tooltipDestroy, {});\n            if (isBlazor() && gObj.isServerRendered && (parentsUntil(cellSaveArgs.cell, 'e-movableheader') ||\n                parentsUntil(cellSaveArgs.cell, 'e-movablecontent'))) {\n                _this.refreshTD(cellSaveArgs.cell, column, gObj.getMovableRowsObject()[_this.cellDetails.rowIndex], cellSaveArgs.value);\n            }\n            else {\n                var rowObj = parentsUntil(cellSaveArgs.cell, 'e-movablecontent') ?\n                    gObj.getMovableRowsObject()[_this.cellDetails.rowIndex] : gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n                _this.refreshTD(cellSaveArgs.cell, column, rowObj, cellSaveArgs.value);\n                if (_this.parent.isReact) {\n                    cellSaveArgs.cell = _this.newReactTd;\n                }\n            }\n            removeClass([tr], ['e-editedrow', 'e-batchrow']);\n            removeClass([cellSaveArgs.cell], ['e-editedbatchcell', 'e-boolcell']);\n            if (!isNullOrUndefined(cellSaveArgs.value) && cellSaveArgs.value.toString() ===\n                (!isNullOrUndefined(_this.cellDetails.value) ? _this.cellDetails.value : '').toString() && !_this.isColored\n                || (isNullOrUndefined(cellSaveArgs.value) && isNullOrUndefined(_this.cellDetails.value) &&\n                    !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow'))) {\n                cellSaveArgs.cell.classList.remove('e-updatedtd');\n                if (isBlazor() && gObj.isServerRendered && (!isNullOrUndefined(cellSaveArgs.value) ? cellSaveArgs.value : '').toString() ===\n                    (!isNullOrUndefined(_this.cellDetails.value) ? _this.cellDetails.value : '').toString()) {\n                    if (_this.cloneCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index].\n                        classList.contains('e-selectionbackground')) {\n                        _this.originalCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index].\n                            classList.add('e-selectionbackground', 'e-active');\n                    }\n                    else {\n                        _this.originalCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index].\n                            classList.remove('e-selectionbackground', 'e-active');\n                    }\n                    _this.cloneCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index]\n                        .replaceWith(_this.originalCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index]);\n                }\n            }\n            if (isNullOrUndefined(isEscapeCellEdit)) {\n                gObj.trigger(events.cellSaved, cellSaveArgs);\n            }\n            gObj.notify(events.toolbarRefresh, {});\n            _this.isColored = false;\n            if (_this.parent.aggregates.length > 0) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n                if (_this.parent.groupSettings.columns.length > 0 && !_this.isAddRow(_this.cellDetails.rowIndex)) {\n                    _this.parent.notify(events.groupAggregates, {});\n                }\n            }\n            _this.preventSaveCell = false;\n            if (_this.editNext) {\n                _this.editNext = false;\n                if (_this.cellDetails.rowIndex === _this.index && _this.cellDetails.column.field === _this.field) {\n                    return;\n                }\n                var col = gObj.getColumnByField(_this.field);\n                if (col && col.allowEditing) {\n                    _this.editCellExtend(_this.index, _this.field, _this.isAdd);\n                }\n            }\n            if (isEscapeCellEdit) {\n                gObj.notify(events.restoreFocus, {});\n            }\n        };\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if ((e.action === 'tab' || e.action === 'shiftTab') && this.parent.isEdit) {\n            var gObj = this.parent;\n            var changes = this.getBatchChanges();\n            var addedRecords = 'addedRecords';\n            var dRecords = 'deletedRecords';\n            var btmIdx = (this.parent.getCurrentViewRecords().length + changes[addedRecords].length - changes[dRecords].length) - 1;\n            var rowcell = parentsUntil(e.target, 'e-rowcell');\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    var columnIndex = e.action === 'tab' ? visibleColumns.length - 1 : 0;\n                    if (visibleColumns[columnIndex].field === cell.getAttribute('id').slice(this.parent.element.id.length)) {\n                        if (this.cellDetails.rowIndex === btmIdx && e.action === 'tab') {\n                            if (gObj.editSettings.newRowPosition === 'Top') {\n                                gObj.editSettings.newRowPosition = 'Bottom';\n                                this.addRecord();\n                                gObj.editSettings.newRowPosition = 'Top';\n                            }\n                            else {\n                                this.addRecord();\n                            }\n                        }\n                        else {\n                            this.saveCell();\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addCancelWhilePaging = function () {\n        if (this.validateFormObj()) {\n            this.parent.notify(events.destroyForm, {});\n            this.parent.isEdit = false;\n            this.isColored = false;\n        }\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","/**\n * `TemplateEditCell` is used to handle template cell.\n * @hidden\n */\nvar TemplateEditCell = /** @class */ (function () {\n    function TemplateEditCell(parent) {\n        this.parent = parent;\n    }\n    TemplateEditCell.prototype.read = function (element, value) {\n        return value;\n    };\n    TemplateEditCell.prototype.write = function () {\n        //\n    };\n    TemplateEditCell.prototype.destroy = function () {\n        //\n    };\n    return TemplateEditCell;\n}());\nexport { TemplateEditCell };\n","import { closest, addClass, select } from '@syncfusion/ej2-base';\nimport { extend, getValue, resetBlazorTemplate, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, getComplexFieldID, setComplexFieldID, getScrollBarWidth } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { TemplateEditCell } from '../renderer/template-edit-cell';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editSettings.template || cols[i].editTemplate) {\n                var templteCell = 'templateedit';\n                cols[i].edit = extend(new Edit.editCellType[templteCell](this.parent), cols[i].edit || {});\n            }\n            else {\n                cols[i].edit = extend(new Edit.editCellType[cols[i].editType && Edit.editCellType[cols[i].editType] ?\n                    cols[i].editType : 'defaultedit'](this.parent, this.serviceLocator), cols[i].edit || {});\n            }\n        }\n        this.parent.log('primary_column_missing');\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        this.parent.element.classList.add('e-editing');\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        this.isLastRow = tr.rowIndex === this.parent.getContent().querySelector('tr:last-child').rowIndex;\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            this.parent.notify('start-edit', {});\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.checkLastRow = function (tr, args) {\n        var checkLastRow = this.isLastRow;\n        if (this.parent.height !== 'auto' && this.parent.editSettings.newRowPosition === 'Bottom' && args &&\n            args.requestType === 'add' && this.parent.height > this.parent.getContentTable().scrollHeight) {\n            addClass(tr.querySelectorAll('.e-rowcell'), 'e-lastrowadded');\n        }\n        else if (checkLastRow && tr && tr.classList) {\n            addClass(tr.querySelectorAll('.e-rowcell'), 'e-lastrowcell');\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.parent.element.classList.remove('e-editing');\n        this.editModule.closeEdit();\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            this.parent.notify('close-edit', {});\n        }\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        var args = { startEdit: true };\n        if (!data) {\n            this.parent.notify(events.virtualScrollAddActionBegin, args);\n        }\n        if (args.startEdit) {\n            this.parent.element.classList.add('e-editing');\n            this.editModule.addRecord(data, index);\n            if (!isBlazor()) {\n                this.refreshToolbar();\n                this.parent.notify('start-add', {});\n            }\n        }\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length && isNullOrUndefined(gObj.commandDelIndex)) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRowUid = tr.getAttribute('data-uid');\n        var rowObj = this.parent.getRowObjectFromUID(this.deleteRowUid);\n        if (!isNullOrUndefined(rowObj)) {\n            this.deleteRecord(null, rowObj.data);\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.parent.editModule.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n            if (isNullOrUndefined(this.formObj) || this.formObj.validate()) {\n                this.showDialog('BatchSaveConfirm', this.dialogObj);\n                return;\n            }\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.parent.element.classList.remove('e-editing');\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') || value === true ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepickeredit' && col.editType !== 'datetimepickeredit'\n                    && value && value.length) {\n                    val = new Date(value);\n                }\n                else if (value === '') {\n                    val = null;\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = this.parent.createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        var isStringTemplate = 'isStringTemplate';\n        obj[isStringTemplate] = true;\n        obj.appendTo(div);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.parent.focusModule.clearIndicator();\n        this.parent.focusModule.restoreFocus();\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                if (this.parent.editSettings.mode === 'Batch') {\n                    this.editModule.addCancelWhilePaging();\n                    if (isBlazor() && this.parent.isServerRendered) {\n                        this.editModule.closeEdit();\n                    }\n                }\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        if (e.requestType === 'batchsave') {\n            this.parent.focusModule.restoreFocus();\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            var elements = [].slice.call(form.elements);\n            for (var k = 0; k < elements.length; k++) {\n                if ((elements[k].hasAttribute('name') && (elements[k].className !== 'e-multi-hidden')) ||\n                    elements[k].classList.contains('e-multiselect')) {\n                    var field = (elements[k].hasAttribute('name')) ? setComplexFieldID(elements[k].getAttribute('name')) :\n                        setComplexFieldID(elements[k].getAttribute('id'));\n                    var column = gObj.getColumnByField(field) || { field: field, type: elements[k].getAttribute('type') };\n                    var value = void 0;\n                    if (column.type === 'checkbox' || column.type === 'boolean') {\n                        value = elements[k].checked;\n                    }\n                    else if (elements[k].value) {\n                        value = elements[k].value;\n                        if (elements[k].ej2_instances &&\n                            elements[k].ej2_instances.length &&\n                            !isNullOrUndefined(elements[k].ej2_instances[0].value)) {\n                            elements[k].blur();\n                            value = elements[k].ej2_instances[0].value;\n                            if ((column.type === 'date' || column.type === 'dateTime' || column.type === 'datetime') &&\n                                (elements[k].ej2_instances[0].isServerRendered)) {\n                                value = elements[k].value;\n                            }\n                        }\n                    }\n                    else if (elements[k].ej2_instances) {\n                        value = elements[k].ej2_instances[0].value;\n                    }\n                    if (column.edit && typeof column.edit.read === 'string') {\n                        value = getValue(column.edit.read, window)(elements[k], value);\n                    }\n                    else if (column.edit && column.edit.read) {\n                        value = column.edit.read(elements[k], value);\n                    }\n                    value = gObj.editModule.getValueFromType(column, value);\n                    if (elements[k].type === 'radio') {\n                        if (elements[k].checked) {\n                            DataUtil.setValue(column.field, value, editedData);\n                        }\n                    }\n                    else {\n                        DataUtil.setValue(column.field, value, editedData);\n                    }\n                }\n            }\n            return editedData;\n        }\n        var col = gObj.columnModel.filter(function (col) { return col.editTemplate; });\n        for (var j = 0; j < col.length; j++) {\n            if (form[getComplexFieldID(col[j].field)]) {\n                var inputElements = [].slice.call(form[getComplexFieldID(col[j].field)]);\n                inputElements = inputElements.length ? inputElements : [form[getComplexFieldID(col[j].field)]];\n                var temp = inputElements.filter(function (e) {\n                    return !isNullOrUndefined((e.ej2_instances));\n                });\n                if (temp.length === 0) {\n                    temp = inputElements.filter(function (e) { return e.hasAttribute('name'); });\n                }\n                for (var k = 0; k < temp.length; k++) {\n                    var value = this.getValue(col[j], temp[k], editedData);\n                    DataUtil.setValue(col[j].field, value, editedData);\n                }\n            }\n        }\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col_1 = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            if (col_1 && col_1.field) {\n                var value = this.getValue(col_1, inputs[i], editedData);\n                DataUtil.setValue(col_1.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    Edit.prototype.getValue = function (col, input, editedData) {\n        var value = input.ej2_instances &&\n            !(isBlazor() && input.ej2_instances[0].isServerRendered\n                && (col.type === 'date' || col.type === 'datetime')) ?\n            input.ej2_instances[0].value : input.value;\n        var gObj = this.parent;\n        var temp = col.edit.read;\n        if (col.type === 'checkbox' || col.type === 'boolean') {\n            value = input.checked;\n        }\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n            value = gObj.editModule.getValueFromType(col, (temp)(input, value));\n        }\n        else {\n            value = gObj.editModule.getValueFromType(col, col.edit.read(input, value));\n        }\n        if (isNullOrUndefined(editedData[col.field]) && value === '') {\n            value = editedData[col.field];\n        }\n        return value;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        if (e.requestType === 'columnstate' && this.parent.isEdit\n            && this.parent.editSettings.mode !== 'Batch') {\n            this.closeEdit();\n        }\n        else {\n            var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save', 'infiniteScroll'];\n            if (this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n                && restrictedRequestTypes.indexOf(e.requestType) === -1 && !e.cancel) {\n                this.destroyWidgets();\n                this.destroyForm();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            this.parent.destroyTemplate(['editSettingsTemplate']);\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        cols = cols ? cols : this.parent.getVisibleColumns();\n        if (cols.some(function (column) { return !isNullOrUndefined(column.editTemplate); })) {\n            this.parent.destroyTemplate(['editTemplate']);\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            var temp = col.edit.destroy;\n            if (isBlazor() && col.editTemplate) {\n                resetBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate');\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col, false);\n            }\n            if (col.edit.destroy) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp();\n                }\n                else {\n                    col.edit.destroy();\n                }\n            }\n        }\n        var elements = [].slice.call(this.formObj.element.elements);\n        for (var i = 0; i < elements.length; i++) {\n            if (elements[i].hasAttribute('name')) {\n                if (elements[i].ej2_instances &&\n                    elements[i].ej2_instances.length &&\n                    !elements[i].ej2_instances[0].isDestroyed) {\n                    elements[i].ej2_instances[0].destroy();\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, 'e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, 'e-gridcontent') || (this.parent.frozenRows\n                        && parentsUntil(e.target, 'e-headercontent')))\n                    && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                if (this.parent.isEdit) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        this.editModule.escapeCellEdit();\n                    }\n                    else {\n                        this.closeEdit();\n                    }\n                }\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var form = this.parent.editSettings.mode !== 'Dialog' ?\n            gObj.element.querySelector('.e-gridform') :\n            select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document);\n        var mForm = gObj.element.querySelectorAll('.e-gridform')[1];\n        var rules = {};\n        var mRules = {};\n        cols = cols ? cols : gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (!cols[i].visible) {\n                continue;\n            }\n            if (isBlazor() && cols[i].editTemplate) {\n                continue;\n            }\n            if (i < frzCols && cols[i].validationRules) {\n                rules[getComplexFieldID(cols[i].field)] = cols[i].validationRules;\n            }\n            else if (i >= frzCols && cols[i].validationRules) {\n                mRules[getComplexFieldID(cols[i].field)] = cols[i].validationRules;\n            }\n        }\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n        }\n        else {\n            rules = extend(rules, mRules);\n        }\n        if (isBlazor() && this.parent.editSettings.template) {\n            this.parent.editModule.formObj = this.createFormObj(form, {});\n        }\n        else {\n            this.parent.editModule.formObj = this.createFormObj(form, rules);\n        }\n    };\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            locale: this.parent.locale,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                var uid = inputElement.getAttribute('e-mappinguid');\n                var args = {\n                    column: _this.parent.getColumnByUid(uid),\n                    error: error,\n                    inputElement: inputElement,\n                    value: inputElement.value,\n                };\n                _this.valErrorPlacement(inputElement, error);\n                _this.parent.notify(events.valCustomPlacement, args);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.outerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        if (this.parent.editSettings.mode !== 'Dialog') {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(inputElement, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        return this.parent.editSettings.mode !== 'Dialog' ? isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable() :\n            select('#' + this.parent.element.id + '_dialogEdit_wrapper', document);\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var gcontent = this.parent.getContent().firstElementChild;\n        if (this.parent.getFrozenColumns()) {\n            gcontent = this.parent.getMovableVirtualContent();\n        }\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight || gcontent.scrollWidth > gcontent.clientWidth;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var td = closest(element, '.e-rowcell');\n        var row = closest(element, '.e-row');\n        var fCont = this.parent.getContent().querySelector('.e-frozencontent');\n        var isFHdr;\n        var isFHdrLastRow = false;\n        var validationForBottomRowPos;\n        var isBatchModeLastRow = false;\n        var viewPortRowCount = Math.round(this.parent.getContent().clientHeight / this.parent.getRowHeight()) - 1;\n        var rows = !fCont ? [].slice.call(this.parent.getContent().querySelectorAll('.e-row'))\n            : [].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll('.e-row'));\n        if (this.parent.editSettings.mode === 'Batch') {\n            if (viewPortRowCount > 1 && rows.length >= viewPortRowCount\n                && rows[rows.length - 1].getAttribute('aria-rowindex') === row.getAttribute('aria-rowindex')) {\n                isBatchModeLastRow = true;\n            }\n        }\n        if (isInline) {\n            if (this.parent.frozenRows) {\n                var fHeraderRows = this.parent.getFrozenColumns() ?\n                    this.parent.getFrozenVirtualHeader().querySelector('tbody').children\n                    : this.parent.getHeaderTable().querySelector('tbody').children;\n                isFHdr = fHeraderRows.length > (parseInt(row.getAttribute('aria-rowindex'), 10) || 0);\n                isFHdrLastRow = isFHdr && parseInt(row.getAttribute('aria-rowindex'), 10) === fHeraderRows.length - 1;\n            }\n            if (isFHdrLastRow || (viewPortRowCount > 1 && rows.length >= viewPortRowCount\n                && ((this.parent.editSettings.newRowPosition === 'Bottom' && (this.editModule.args\n                    && this.editModule.args.requestType === 'add')) || (td.classList.contains('e-lastrowcell')\n                    && !row.classList.contains('e-addedrow')))) || isBatchModeLastRow) {\n                validationForBottomRowPos = true;\n            }\n        }\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            select('#' + this.parent.element.id + '_dialogEdit_wrapper .e-dlg-content', document);\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = closest(element, 'td');\n        var inputClient = input ? input.getBoundingClientRect() : element.parentElement.getBoundingClientRect();\n        var div = this.parent.createElement('div', {\n            className: 'e-tooltip-wrap e-lib e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (this.parent.getFrozenColumns() ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + inputClient.width + 'px;text-align:center;'\n        });\n        if (isInline && client.left < left) {\n            div.style.left = parseInt(div.style.left, 10) - client.left + left + 'px';\n        }\n        var content = this.parent.createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow;\n        if (validationForBottomRowPos) {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-bottom' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-bottom' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-bottom' }));\n        }\n        else {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        }\n        div.appendChild(content);\n        div.appendChild(arrow);\n        if ((this.parent.getFrozenColumns() || this.parent.frozenRows) && this.parent.editSettings.mode !== 'Dialog') {\n            var getEditCell = this.parent.editSettings.mode === 'Normal' ?\n                closest(element, '.e-editcell') : closest(element, '.e-table');\n            getEditCell.style.position = 'relative';\n            div.style.position = 'absolute';\n            if (this.parent.editSettings.mode === 'Batch' ||\n                (closest(element, '.e-frozencontent') || closest(element, '.e-frozenheader'))\n                || (this.parent.frozenRows && !this.parent.getFrozenColumns())) {\n                this.formObj.element.appendChild(div);\n            }\n            else {\n                this.mFormObj.element.appendChild(div);\n            }\n        }\n        else {\n            this.formObj.element.appendChild(div);\n        }\n        if (!validationForBottomRowPos && isInline && gcontent.getBoundingClientRect().bottom < inputClient.bottom + inputClient.height) {\n            gcontent.scrollTop = gcontent.scrollTop + div.offsetHeight + arrow.scrollHeight;\n        }\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < inputClient.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        if ((this.parent.getFrozenColumns() || this.parent.frozenRows)\n            && (this.parent.editSettings.mode === 'Normal' || this.parent.editSettings.mode === 'Batch')) {\n            div.style.left = input.offsetLeft + (input.offsetWidth / 2 - div.offsetWidth / 2) + 'px';\n        }\n        else {\n            div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        }\n        if (isInline && !isScroll && !this.parent.allowPaging || this.parent.getFrozenColumns() || this.parent.frozenRows) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n        if (validationForBottomRowPos) {\n            if (isScroll && !this.parent.getFrozenColumns() && this.parent.height !== 'auto' && !this.parent.frozenRows\n                && !this.parent.enableVirtualization) {\n                var scrollWidth = gcontent.scrollWidth > gcontent.offsetWidth ? getScrollBarWidth() : 0;\n                div.style.bottom = (this.parent.height - gcontent.querySelector('table').offsetHeight\n                    - scrollWidth) + inputClient.height + 9 + 'px';\n            }\n            else {\n                div.style.bottom = inputClient.height + 9 + 'px';\n            }\n            if (rows.length < viewPortRowCount && this.parent.editSettings.newRowPosition === 'Bottom' && (this.editModule.args\n                && this.editModule.args.requestType === 'add')) {\n                var rowsCount = this.parent.frozenRows ? this.parent.frozenRows + (rows.length - 1) : rows.length - 1;\n                var rowsHeight = rowsCount * this.parent.getRowHeight();\n                var position = this.parent.getContent().clientHeight - rowsHeight;\n                div.style.bottom = position + 9 + 'px';\n            }\n            div.style.top = null;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.checkColumnIsGrouped = function (col) {\n        return !col.visible && !(this.parent.groupSettings.columns.indexOf(col.field) > -1);\n    };\n    /**\n     * @hidden\n     */\n    Edit.AddEditors = function (editors) {\n        Edit.editCellType = extend(Edit.editCellType, editors);\n    };\n    Edit.editCellType = {\n        'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n        'datepickeredit': DatePickerEditCell, 'datetimepickeredit': DatePickerEditCell,\n        'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell,\n        'templateedit': TemplateEditCell\n    };\n    return Edit;\n}());\nexport { Edit };\n","import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.prevShowedCols = [];\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n        else {\n            removeClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.resetColumns, this.onResetColumns, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.off(events.resetColumns, this.onResetColumns);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args = this.beforeOpenColumnChooserEvent();\n            if (args.cancel) {\n                return;\n            }\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n            this.parent.notify(events.columnChooserOpened, { dialog: this.dlgObj });\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n            this.clearActions();\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        var args = this.beforeOpenColumnChooserEvent();\n        if (args.cancel) {\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.keyUpHandler = function (e) {\n        if (e.action === 'escape') {\n            this.hideDialog();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('ColumnChooserDialogARIA'));\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.changedColumns = (this.changedColumns.length > 0) ? this.changedColumns : this.unchangedColumns;\n        this.changedColumnState(this.changedColumns);\n        var uncheckedLength = this.ulElement.querySelector('.e-uncheck') &&\n            this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < this.parent.getColumns().length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n                if (this.parent.getCurrentViewRecords().length === 0) {\n                    var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n                    emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n                }\n            }\n        }\n    };\n    ColumnChooser.prototype.onResetColumns = function (e) {\n        if (e.requestType === 'columnstate') {\n            this.showColumn = [];\n            this.hideColumn = [];\n            this.hideDialog();\n            return;\n        }\n    };\n    ColumnChooser.prototype.resetColumnState = function () {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.hideDialog();\n    };\n    ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n        for (var index = 0; index < changedColumns.length; index++) {\n            var colUid = changedColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            isBlazor() ? this.changedStateColumns.push(JSON.parse(JSON.stringify(currentCol))) : this.changedStateColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            if (currentCol.type !== 'checkbox') {\n                currentCol.visible = state;\n            }\n            isBlazor() ? this.stateChangeColumns.push(JSON.parse(JSON.stringify(currentCol))) : this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.clearBtnClick = function () {\n        this.clearActions();\n        this.parent.notify(events.columnChooserCancelBtnClick, { dialog: this.dlgObj });\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n        if (selectAll === void 0) { selectAll = false; }\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n        if (selectAll) {\n            if (!isChecked) {\n                this.changedColumns.push(coluid);\n            }\n            else {\n                this.unchangedColumns.push(coluid);\n            }\n        }\n        else if (this.changedColumns.indexOf(coluid) !== -1) {\n            this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n        }\n        else {\n            this.changedColumns.push(coluid);\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCbox = this.ulElement.querySelector('.e-check') &&\n            this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCbox) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!elem.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            this.updateIntermediateBtn();\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumns();\n            if (columnUid === 'grid-selectAll') {\n                this.changedColumns = [];\n                this.unchangedColumns = [];\n                for (var i = 0; i < column.length; i++) {\n                    if (column[i].showInColumnChooser) {\n                        this.checkstatecolumn(checkstate, column[i].uid, true);\n                    }\n                }\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var cnt = this.ulElement.children.length - 1;\n        var className = [];\n        var elem = this.ulElement.children[0].querySelector('.e-frame');\n        var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlgObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var cBoxes = [].slice.call(this.ulElement.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var searchValue = this.dlgObj.element.querySelector('.e-cc.e-input').value;\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[i].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1) {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        var selected;\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = this.parent.element.querySelectorAll('.e-cc-chbox');\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var cclist = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n        if (gdCol.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            cclist.appendChild(selectAll);\n            this.ulElement.appendChild(cclist);\n        }\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            var uncheck = element.parentElement.querySelectorAll('.e-uncheck');\n            if (column.visible && !uncheck.length) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n        if (isBlazor() && this.parent.isServerRendered && this.parent.columnChooserSettings.operator === 'none') {\n            this.parent.columnChooserSettings.operator = 'startsWith';\n        }\n        var args1 = {\n            requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n            columns: this.getColumns(), cancel: false,\n            searchOperator: this.parent.columnChooserSettings.operator\n        };\n        if (isBlazor() && !this.parent.isJsComponent) {\n            args1 = {\n                requestType: 'beforeOpenColumnChooser', cancel: false,\n                searchOperator: this.parent.columnChooserSettings.operator\n            };\n        }\n        this.parent.trigger(events.beforeOpenColumnChooser, args1);\n        this.searchOperator = args1.searchOperator;\n        return args1;\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue, createElement } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getForeignData, measureColumnDepth, getUid } from '../base/util';\nimport { Grid } from '../base/grid';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        var query = data.generateQuery(true).requiresCount();\n        if (data.isRemote()) {\n            if (parent.groupSettings.enableLazyLoading && parent.groupSettings.columns.length) {\n                query.lazyLoad = [];\n            }\n            else {\n                query.take(parent.pageSettings.totalRecordsCount);\n            }\n        }\n        return query;\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getGridRowModel = function (columns, dataSource, gObj, startIndex) {\n        if (startIndex === void 0) { startIndex = 0; }\n        var rows = [];\n        var length = dataSource.length;\n        if (length) {\n            for (var i = 0; i < length; i++, startIndex++) {\n                var options = { isExpand: false };\n                options.data = dataSource[i];\n                options.index = startIndex;\n                if (gObj.childGrid) {\n                    if (gObj.hierarchyPrintMode === 'All') {\n                        options.isExpand = true;\n                    }\n                    else if (gObj.hierarchyPrintMode === 'Expanded' &&\n                        this.parent.expandedRows && this.parent.expandedRows[startIndex]) {\n                        options.isExpand = gObj.expandedRows[startIndex].isExpand;\n                    }\n                }\n                var row = new Row(options);\n                row.cells = this.generateCells(columns, gObj);\n                rows.push(row);\n            }\n            this.processColumns(rows);\n        }\n        return rows;\n    };\n    ExportHelper.prototype.generateCells = function (columns, gObj) {\n        var cells = [];\n        if (gObj.childGridLevel) {\n            var len = gObj.childGridLevel;\n            for (var i = 0; len > i; i++) {\n                cells.push(this.generateCell({}, CellType.Indent));\n            }\n        }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            cells.push(this.generateCell(col, CellType.Data));\n        }\n        return cells;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            for (var i = 0; i < fColumns.length; i++) {\n                var colData = ('result' in fColumns[i].dataSource) ?\n                    new DataManager(fColumns[i].dataSource.result) :\n                    fColumns[i].dataSource;\n                columnPromise.push(colData.executeQuery(new Query()));\n            }\n            promise = Promise.all(columnPromise).then(function (e) {\n                for (var j = 0; j < fColumns.length; j++) {\n                    _this.foreignKeyData[fColumns[j].field] = e[j].result;\n                }\n                // tslint:disable-next-line:no-any\n            });\n        }\n        return promise;\n    };\n    ExportHelper.prototype.getHeaders = function (columns, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        this.colDepth = measureColumnDepth(columns);\n        var rows = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows, columns);\n        return { rows: rows, columns: this.generateActualColumns(columns) };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (columns, actualColumns) {\n        if (actualColumns === void 0) { actualColumns = []; }\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var column = columns_2[_i];\n            if (column.commands) {\n                continue;\n            }\n            if (!column.columns) {\n                if (column.visible || this.hideColumnInclude) {\n                    actualColumns.push(column);\n                }\n            }\n            else {\n                if (column.visible || this.hideColumnInclude) {\n                    var colSpan = this.getCellCount(column, 0);\n                    if (colSpan !== 0) {\n                        this.generateActualColumns(column.columns, actualColumns);\n                    }\n                }\n            }\n        }\n        return actualColumns;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows, cols) {\n        var columns = cols;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0);\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index) {\n        if (!cols.columns && (cols.visible !== false || this.hideColumnInclude) && !cols.commands) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, index));\n        }\n        else if (cols.columns) {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isIgnoreFirstCell = true;\n                }\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, rowIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': cellType === CellType.Data,\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'index': rowIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = [];\n        if (gridObj.enableColumnVirtualization) {\n            columnIndexes = gridObj.getColumnIndexesInView();\n        }\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (gridObj.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.splice(0, 0, this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    ExportHelper.prototype.checkAndExport = function (gridPool, globalResolve) {\n        var bool = Object.keys(gridPool).some(function (key) {\n            return !gridPool[key];\n        });\n        if (!bool) {\n            globalResolve();\n        }\n    };\n    ExportHelper.prototype.failureHandler = function (gridPool, childGridObj, resolve) {\n        var _this = this;\n        return function () {\n            gridPool[childGridObj.id] = true;\n            _this.checkAndExport(gridPool, resolve);\n        };\n    };\n    // tslint:disable-next-line:no-any\n    ExportHelper.prototype.createChildGrid = function (gObj, row, exportType, gridPool) {\n        var childGridObj = new Grid(this.parent.detailRowModule.getGridModel(gObj, row, exportType));\n        gObj.isPrinting = false;\n        var parent = 'parentDetails';\n        childGridObj[parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: getValue(childGridObj.queryString, row.data),\n            parentRowData: row.data\n        };\n        var exportId = getUid('child-grid');\n        var element = createElement('div', {\n            id: exportId, styles: 'display: none'\n        });\n        document.body.appendChild(element);\n        childGridObj.id = exportId;\n        gridPool[exportId] = false;\n        return { childGrid: childGridObj, element: element };\n    };\n    ExportHelper.prototype.getGridExportColumns = function (columns) {\n        var actualGridColumns = [];\n        for (var i = 0, gridColumns = columns; i < gridColumns.length; i++) {\n            if (gridColumns[i].type !== 'checkbox') {\n                actualGridColumns.push(gridColumns[i]);\n            }\n        }\n        return actualGridColumns;\n    };\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args, isServerBlaz) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value || args.value === 0 ?\n                this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean' && args.value !== '') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.value === 'string') {\n                args.value = new Date(args.value);\n            }\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                var cFormat = args.column.format;\n                if (args.column.type === 'date') {\n                    format = isServerBlaz ? { type: 'date', format: cFormat } : { type: 'date', skeleton: cFormat };\n                }\n                else if (args.column.type === 'time') {\n                    format = isServerBlaz ? { type: 'time', format: cFormat } : { type: 'time', skeleton: cFormat };\n                }\n                else {\n                    format = isServerBlaz ? { type: 'dateTime', format: cFormat } : { type: 'dateTime', skeleton: cFormat };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, getValue, detach, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getPrintGridModel, getUid, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent, locator) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.foreignKeyData = {};\n        this.gridPool = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.locator = locator;\n        this.l10n = this.locator.getService('localization');\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n        gObj.id = getUid('main-grid');\n        this.gridPool[gObj.id] = false;\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        var cancel = 'cancel';\n        var isBlb = 'isBlob';\n        var csv = 'isCsv';\n        var workbk = 'workbook';\n        var isMultiEx = 'isMultipleExport';\n        this.gridPool = {};\n        if (grid.childGrid && !(!isNullOrUndefined(exportProperties) && exportProperties.hierarchyExportMode === 'None')) {\n            grid.expandedRows = getPrintGridModel(grid).expandedRows;\n        }\n        var args = {\n            requestType: 'beforeExcelExport', gridObject: gObj, cancel: false,\n            isMultipleExport: isMultipleExport, workbook: workbook, isCsv: isCsv, isBlob: isBlob\n        };\n        gObj.trigger(events.beforeExcelExport, args);\n        if (args[cancel]) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        this.parent.log('exporting_begin', this.getModuleName());\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        this.isBlob = args[isBlb];\n        if (args[csv]) {\n            this.isCsvExport = args[csv];\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        if (isExportColumns(exportProperties)) {\n            updateColumnTypeForExportColumns(exportProperties, gObj);\n        }\n        return this.processRecords(gObj, exportProperties, args[isMultiEx], args[workbk]);\n    };\n    ExcelExport.prototype.exportingSuccess = function (resolve) {\n        this.isExporting = false;\n        this.parent.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n        this.parent.log('exporting_complete', this.getModuleName());\n        resolve(this.book);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource)) {\n            if (!(exportProperties.dataSource instanceof DataManager)) {\n                exportProperties.dataSource = new DataManager(exportProperties.dataSource);\n            }\n            var query_1 = exportProperties.query ? exportProperties.query : new Query();\n            if (isNullOrUndefined(query_1.isCountRequired) || gObj.aggregates) {\n                query_1.isCountRequired = true;\n            }\n            return new Promise(function (resolve, reject) {\n                var dataManager = exportProperties.dataSource.executeQuery(query_1);\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                });\n            });\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, _this.parent.getCurrentViewRecords());\n                _this.exportingSuccess(resolve);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise_1.push(this.helper.getColumnData(gObj));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                }).catch(function (e) {\n                    reject(_this.book);\n                    _this.parent.trigger(events.actionFailure, e);\n                });\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, r) {\n        var _this = this;\n        this.groupedColLength = gObj.groupSettings.columns.length;\n        var blankRows = 5;\n        var separator;\n        var rows = [];\n        var isExportPropertiesPresent = !isNullOrUndefined(exportProperties);\n        if (isExportPropertiesPresent && !isNullOrUndefined(exportProperties.multipleExport)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (isExportPropertiesPresent) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (isExportPropertiesPresent ? exportProperties.includeHiddenColumn : false);\n        return new Promise(function (resolve, reject) {\n            gObj.childGridLevel = 0;\n            rows = _this.processGridExport(gObj, exportProperties, r);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            var organisedRows = [];\n            _this.organiseRows(rows, rows[0].index, organisedRows);\n            _this.rows = _this.rows.concat(organisedRows);\n            //footer template add\n            if (!isNullOrUndefined(_this.footer)) {\n                if ((_this.expType === 'AppendToSheet' && !isMultipleExport) || (_this.expType === 'NewSheet')) {\n                    _this.processExcelFooter(_this.footer);\n                }\n            }\n            var sheet = {};\n            if (_this.columns.length > 0) {\n                sheet.columns = _this.columns;\n            }\n            /* tslint:disable-next-line:no-any */\n            sheet.rows = _this.rows;\n            sheet.enableRtl = _this.parent.enableRtl;\n            _this.workSheet.push(sheet);\n            _this.book.worksheets = _this.workSheet;\n            _this.book.styles = _this.styles;\n            gObj.notify('finalPageSetup', _this.book);\n            if (!isMultipleExport) {\n                if (_this.isCsvExport) {\n                    if (isBlazor() && gObj.isServerRendered) {\n                        _this.book.isServerRendered = gObj.isServerRendered;\n                    }\n                    if (isExportPropertiesPresent && !isNullOrUndefined(exportProperties.separator)\n                        && exportProperties.separator !== ',') {\n                        separator = exportProperties.separator;\n                    }\n                    /* tslint:disable-next-line:max-line-length */\n                    var book = new Workbook(_this.book, 'csv', gObj.locale, gObj.currencyCode, separator);\n                    if (!_this.isBlob) {\n                        if (isExportPropertiesPresent && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.csv');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('text/csv');\n                    }\n                }\n                else {\n                    var book = new Workbook(_this.book, 'xlsx', gObj.locale, gObj.currencyCode);\n                    if (!_this.isBlob) {\n                        if (isExportPropertiesPresent && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.xlsx');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                    }\n                }\n                if (_this.isElementIdChanged) {\n                    gObj.element.id = '';\n                }\n                delete gObj.expandedRows;\n            }\n            return workbook;\n        });\n    };\n    ExcelExport.prototype.organiseRows = function (rows, initialIndex, organisedRows) {\n        if (!rows.length) {\n            return initialIndex;\n        }\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            var childRows = row.childRows;\n            if (childRows) {\n                row.index = initialIndex++;\n                delete row.childRows;\n                organisedRows.push(row);\n                initialIndex = this.organiseRows(childRows, initialIndex, organisedRows);\n            }\n            else {\n                row.index = initialIndex++;\n                organisedRows.push(row);\n            }\n        }\n        return initialIndex;\n    };\n    ExcelExport.prototype.processGridExport = function (gObj, exportProperties, r) {\n        var excelRows = [];\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n            this.theme = exportProperties.theme;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(exportProperties)) {\n            gObj.hierarchyPrintMode = exportProperties.hierarchyExportMode || 'Expanded';\n        }\n        var helper = new ExportHelper(gObj);\n        var gColumns = isExportColumns(exportProperties) ?\n            prepareColumns(exportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(gObj.columns);\n        var headerRow = helper.getHeaders(gColumns, this.includeHiddenColumn);\n        var groupIndent = gObj.groupSettings.columns.length;\n        excelRows = this.processHeaderContent(gObj, headerRow, groupIndent, excelRows);\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, exportProperties.dataSource, excelRows, helper);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, gObj.currentViewData, excelRows, helper);\n        }\n        else {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, undefined, excelRows, helper);\n        }\n        gObj.notify(events.exportDataBound, { excelRows: excelRows, type: 'excel' });\n        return excelRows;\n    };\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, exportProperties, currentViewRecords, excelRow, helper) {\n        var record;\n        if (!isNullOrUndefined(currentViewRecords) && currentViewRecords.length) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level, 0, exportProperties, excelRow, helper);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0, 0, exportProperties, excelRow, helper);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, excelRow, currentViewRecords);\n            }\n            else {\n                var result = returnType.result.GroupGuid ?\n                    returnType.result.records : returnType.result;\n                this.processAggregates(gObj, result, excelRow, null, null, null, headerRow.columns);\n            }\n        }\n        return excelRow;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            var value = gObj.getColumnByField(item.field).headerText +\n                ': ' + (!col.enableGroupByFormat ? this.exportValueFormatter.formatCellValue(args) : item.key) + ' - ';\n            if (item.count > 1) {\n                value += item.count + ' items';\n            }\n            else {\n                value += item.count + ' item';\n            }\n            var cArgs = { captionText: value, type: this.isCsvExport ? 'CSV' : 'Excel' };\n            this.parent.trigger(events.exportGroupCaption, cArgs);\n            cell.value = cArgs.captionText;\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, excelRows, this.rowLength);\n            cells.push(cell);\n            if (excelRows[excelRows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = excelRows[excelRows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level + dataSource.childLevels)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    sCell.index = (hIndex + 1);\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            excelRows[excelRows.length - 1].cells = cells;\n            this.rowLength++;\n            if (this.groupedColLength < 8 && level > 1) {\n                var grouping = { outlineLevel: level - 1, isCollapsed: true };\n                excelRows[excelRows.length - 1].grouping = grouping;\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level, startIndex, excelExportProperties, excelRows, helper);\n            }\n            else {\n                startIndex = this.processRecordRows(gObj, item.items, headerRow, (level), startIndex, excelExportProperties, excelRows, helper);\n                this.processAggregates(gObj, item, excelRows, undefined, (level), true);\n            }\n        }\n    };\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        var index = 1;\n        var cells = [];\n        var columns = headerRow.columns;\n        var rows = helper.getGridRowModel(columns, record, gObj, startIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            cells = [];\n            startIndex++;\n            index = 1;\n            for (var c = 0, len = row.cells.length; c < len; c++) {\n                var gCell = row.cells[c];\n                if (gCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var fkData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    fkData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, fkData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    var cell = {};\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = {\n                        data: row.data, column: column, foreignKeyData: fkData,\n                        value: value, style: undefined, colSpan: 1, cell: cell\n                    };\n                    gObj.trigger(events.excelQueryCellInfo, excelCellArgs);\n                    cell = excelCellArgs.cell;\n                    cell.index = index + level + gObj.childGridLevel;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.data === '' && gObj.childGridLevel && index === 1) {\n                        var style = {};\n                        style.hAlign = 'left';\n                        excelCellArgs = { style: style };\n                        cell.colSpan = gObj.getVisibleColumns().length;\n                        cell.value = this.l10n.getConstant('EmptyRecord');\n                    }\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            var excelRow = { index: this.rowLength++, cells: cells };\n            if (this.groupedColLength < 8 && level > 0) {\n                excelRow.grouping = { outlineLevel: level, isCollapsed: true };\n                excelRows.push(excelRow);\n            }\n            else {\n                excelRows.push(excelRow);\n            }\n            if (!isNullOrUndefined(gObj.childGrid)) {\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(excelExportProperties) && excelExportProperties.exportType) ?\n                    excelExportProperties.exportType : 'AllPages';\n                var returnVal = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnVal.childGrid;\n                var element = returnVal.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                childGridObj.childGridLevel = gObj.childGridLevel + 1;\n                var args = { childGrid: childGridObj, row: row, exportProperties: excelExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(excelRow, childGridObj, excelExportProperties, row);\n                childGridObj.appendTo(element);\n            }\n            gObj.notify(events.exportRowDataBound, { rowObj: row, type: 'excel', excelRows: excelRows });\n        }\n        return startIndex;\n    };\n    ExcelExport.prototype.childGridCell = function (excelRow, childGridObj, excelExportProps, gRow) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            if (result.result.length === 0) {\n                result.result = [''];\n            }\n            excelRow.childRows = _this.processGridExport(childGridObj, excelExportProps, result);\n            var intent = _this.parent.groupSettings.columns.length;\n            var rows = excelRow.childRows;\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].grouping = { outlineLevel: intent + childGridObj.childGridLevel,\n                    isCollapsed: !gRow.isExpand, isHidden: !gRow.isExpand };\n            }\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return excelRow;\n        };\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.processAggregates = function (gObj, rec, excelRows, currentViewRecords, indent, byGroup, columns) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        if (gObj.aggregates.length && this.parent !== gObj) {\n            gObj.aggregateModule.prepareSummaryInfo();\n        }\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                excelRows = this.fillAggregates(gObj, groupSummaryRows, indent, excelRows);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates, null, null, columns);\n            if (sRows.length > 0 && !byGroup) {\n                excelRows = this.fillAggregates(gObj, sRows, indent, excelRows);\n            }\n        }\n        return excelRows;\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.fillAggregates = function (gObj, rows, indent, excelRows, customIndex) {\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            var cells = [];\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    continue;\n                }\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        var footerTemplate = !isNullOrUndefined(cell.column.footerTemplate);\n                        var groupFooterTemplate = !isNullOrUndefined(cell.column.groupFooterTemplate);\n                        var groupCaptionTemplate = !isNullOrUndefined(cell.column.groupCaptionTemplate);\n                        eCell.index = index + indent + gObj.childGridLevel;\n                        if (footerTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (groupFooterTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (groupCaptionTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - sum\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - average\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - max\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - min\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - count\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - truecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - falsecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        this.aggregateStyle(cell.column, eCell.style, cell.column.field);\n                        var gridCellStyle = cell.attributes.style;\n                        if (gridCellStyle.textAlign) {\n                            eCell.style.hAlign = gridCellStyle.textAlign.toLowerCase();\n                        }\n                        var args = {\n                            row: row,\n                            type: footerTemplate ? 'Footer' : groupFooterTemplate ? 'GroupFooter' : 'GroupCaption',\n                            style: eCell\n                        };\n                        this.parent.trigger(events.excelAggregateQueryCellInfo, args);\n                        cells.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent + gObj.childGridLevel;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                excelRows.push({ index: customIndex, cells: cells });\n            }\n            else {\n                var row_1 = {};\n                if (this.groupedColLength < 8 && this.groupedColLength > 0) {\n                    var dummyOutlineLevel = 'outlineLevel';\n                    var dummyGrouping = 'grouping';\n                    var level = excelRows[excelRows.length - 1][dummyGrouping][dummyOutlineLevel];\n                    var grouping = { outlineLevel: level, isCollapsed: true };\n                    row_1 = { index: this.rowLength++, cells: cells, grouping: grouping };\n                }\n                else {\n                    row_1 = { index: this.rowLength++, cells: cells };\n                }\n                excelRows.push(row_1);\n            }\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.aggregateStyle = function (col, style, field) {\n        var column = this.parent.getColumnByField(field);\n        if (typeof col.format === 'object') {\n            var format = col.format;\n            style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n            if (!isNullOrUndefined(format.type)) {\n                style.type = format.type.toLowerCase();\n            }\n        }\n        else {\n            style.numberFormat = col.format;\n        }\n        if (!isNullOrUndefined(column) && isNullOrUndefined(style.type)) {\n            style.type = column.type.toLowerCase();\n        }\n    };\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        var txt;\n        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n        if (this.parent.isReact || this.parent.isVue) {\n            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        else {\n            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data));\n        }\n        return txt[0].textContent;\n    };\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        var result = {};\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, indent, excelRows) {\n        var rowIndex = 1;\n        var gridRows = headerRow.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = headerRow.columns;\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            var cells = [];\n            for (var column = 0; column < gridRows[row].cells.length; column++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                var cell = {};\n                var gridCell = gridRows[row].cells[column];\n                if (gridCell.cellType === CellType.HeaderIndent || gridCell.cellType === CellType.DetailHeader) {\n                    continue;\n                }\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index + gObj.childGridLevel;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign.toLowerCase();\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign.toLowerCase();\n                }\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, style: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, excelHeaderCellArgs);\n                cell.style = excelHeaderCellArgs.style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            excelRows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        style.bold = true;\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        return extend(style, themestyle);\n    };\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (typeof col.format === 'object') {\n                var format = col.format;\n                style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n                if (!isNullOrUndefined(format.type)) {\n                    style.type = format.type.toLowerCase();\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign.toLowerCase();\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width)) {\n            this.columns.push({ index: index + gObj.childGridLevel, width: typeof col.width === 'number' ?\n                    col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @return {void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { PdfTrueTypeFont } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel, measureColumnDepth, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.headerOnPages = [];\n        this.drawPosition = { xPosition: 0, yPosition: 0 };\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.gridPool = {};\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        parent.id = getUid('main-grid');\n        this.gridPool[parent.id] = false;\n        this.pdfPageSettings = new PdfPageSettings();\n    };\n    PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject) {\n        var _this = this;\n        this.init(parent);\n        if (!isNullOrUndefined(pdfDoc)) {\n            this.pdfDocument = pdfDoc;\n        }\n        else {\n            this.pdfDocument = new PdfDocument();\n        }\n        this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            resolve(_this.pdfDocument);\n        }).catch(function (e) {\n            reject(_this.pdfDocument);\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        this.gridPool = {};\n        if (parent.childGrid && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n            parent.expandedRows = getPrintGridModel(parent).expandedRows;\n        }\n        var args = {\n            requestType: 'beforePdfExport', cancel: false,\n            headerPageNumbers: [], gridDrawPosition: { xPosition: 0, yPosition: 0 }\n        };\n        if (!isBlazor()) {\n            var gridObject = 'gridObject';\n            args[gridObject] = parent;\n        }\n        var can = 'cancel';\n        var header = 'headerPageNumbers';\n        var drawPos = 'gridDrawPosition';\n        parent.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        if (isExportColumns(pdfExportProperties)) {\n            updateColumnTypeForExportColumns(pdfExportProperties, parent);\n        }\n        this.headerOnPages = args[header];\n        this.drawPosition = args[drawPos];\n        this.parent.log('exporting_begin', this.getModuleName());\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)) {\n            if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                pdfExportProperties.dataSource = new DataManager(pdfExportProperties.dataSource);\n            }\n            return new Promise(function (resolve, reject) {\n                pdfExportProperties.dataSource.executeQuery(new Query()).then(function (returnType) {\n                    _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject);\n                });\n            });\n        }\n        else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport, reject);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise_1.push(this.helper.getColumnData(parent));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport).then(function () {\n                        _this.isExporting = false;\n                        parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                        _this.parent.log('exporting_complete', _this.getModuleName());\n                        resolve(_this.pdfDocument);\n                    }).catch(function (e) {\n                        reject(_this.pdfDocument);\n                        _this.parent.trigger(events.actionFailure, e);\n                    });\n                });\n            });\n        }\n    };\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        var section = this.pdfDocument.sections.add();\n        var pdfGrid;\n        this.processSectionExportProperties(section, pdfExportProperties);\n        var pdfPage = section.pages.add();\n        return new Promise(function (resolve, reject) {\n            pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            // draw the grid\n            var xPosition = 'xPosition';\n            var yPosition = 'yPosition';\n            pdfGrid.draw(pdfPage, _this.drawPosition[xPosition], _this.drawPosition[yPosition]);\n            _this.drawHeader(pdfExportProperties);\n            if (!isMultipleExport) {\n                // save the PDF\n                if (!_this.isBlob) {\n                    if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                        _this.pdfDocument.save(pdfExportProperties.fileName);\n                    }\n                    else {\n                        _this.pdfDocument.save('Export.pdf');\n                    }\n                }\n                else {\n                    _this.blobPromise = _this.pdfDocument.save();\n                }\n                _this.pdfDocument.destroy();\n                delete gObj.expandedRows;\n            }\n            return _this.pdfDocument;\n        });\n    };\n    PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation)\n            || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n            this.pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ?\n                PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n            this.pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n            section.setPageSettings(this.pdfPageSettings);\n        }\n        return section;\n    };\n    PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n        var allowHorizontalOverflow = true;\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n            if (isBlazor() && !isNullOrUndefined(this.gridTheme)) {\n                this.getGridPdfFont(this.gridTheme);\n            }\n            allowHorizontalOverflow = isNullOrUndefined(pdfExportProperties.allowHorizontalOverflow) ?\n                true : pdfExportProperties.allowHorizontalOverflow;\n        }\n        var helper = new ExportHelper(gObj);\n        var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n        var columns = isExportColumns(pdfExportProperties) ?\n            prepareColumns(pdfExportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(gObj.columns);\n        columns = columns.filter(function (columns) { return isNullOrUndefined(columns.commands); });\n        var isGrouping = false;\n        if (gObj.groupSettings.columns.length) {\n            isGrouping = true;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(pdfExportProperties)) {\n            gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n        }\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj, allowHorizontalOverflow, columns);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow);\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length) {\n            if (isGrouping) {\n                if (!isNullOrUndefined(captionThemeStyle.border)) {\n                    border = captionThemeStyle.border;\n                }\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.\n                    brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                if (gObj.aggregates.length && this.parent !== gObj) {\n                    gObj.aggregateModule.prepareSummaryInfo();\n                }\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates, null, null, columns);\n                }\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ?\n                this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.caption);\n            var pdfColor = new PdfColor(0, 0, 0);\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n                font = this.gridTheme.caption.font;\n            }\n            return { font: font, brush: new PdfSolidBrush(pdfColor), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n                border: borderCaption };\n        }\n        else {\n            //Material theme\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n                backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    PdfExport.prototype.getGridPdfFont = function (args) {\n        var fontFamily = 'fontFamily';\n        var fontSize = 'fontSize';\n        var fontStyle = 'fontStyle';\n        var isTrueType = 'isTrueType';\n        var style = 0;\n        if (args.header && args.header.font) {\n            var headerFont = args.header.font[fontFamily];\n            var headerSize = args.header.font[fontSize];\n            var headerStyle = args.header.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[headerStyle]) ? 0 : PdfFontStyle[headerStyle]);\n            if (args.header.font[isTrueType]) {\n                args.header.font = new PdfTrueTypeFont(headerFont, headerSize, style);\n            }\n            else {\n                var fontFamily_1 = !isNullOrUndefined(headerFont) ?\n                    this.getFontFamily(headerFont) : PdfFontFamily.Helvetica;\n                args.header.font = new PdfStandardFont(fontFamily_1, headerSize, style);\n            }\n        }\n        if (args.caption && args.caption.font) {\n            var captionFont = args.caption.font[fontFamily];\n            var captionSize = args.caption.font[fontSize];\n            var captionStyle = args.caption.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[captionStyle]) ? 0 : PdfFontStyle[captionStyle]);\n            if (args.caption.font[isTrueType]) {\n                args.caption.font = new PdfTrueTypeFont(captionFont, captionSize, style);\n            }\n            else {\n                var fontFamily_2 = !isNullOrUndefined(captionFont) ?\n                    this.getFontFamily(captionFont) : PdfFontFamily.Helvetica;\n                args.caption.font = new PdfStandardFont(fontFamily_2, captionSize, style);\n            }\n        }\n        if (args.record && args.record.font) {\n            var recordFont = args.record.font[fontFamily];\n            var recordSize = args.record.font[fontSize];\n            var recordStyle = args.record.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[recordStyle]) ? 0 : PdfFontStyle[recordStyle]);\n            if (args.record.font[isTrueType]) {\n                args.record.font = new PdfTrueTypeFont(recordFont, recordSize, style);\n            }\n            else {\n                var fontFamily_3 = !isNullOrUndefined(recordFont) ?\n                    this.getFontFamily(recordFont) : PdfFontFamily.Helvetica;\n                args.record.font = new PdfStandardFont(fontFamily_3, recordSize, style);\n            }\n        }\n    };\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ?\n                this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.header);\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.header.font)) {\n                font = this.gridTheme.header.font;\n            }\n            return { border: this.getBorderStyle(this.gridTheme.header.border), font: font, brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n                brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n        var _this = this;\n        var groupIndex = level;\n        var _loop_1 = function (dataSourceItems) {\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = this_1.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this_1.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            var cArgs = { captionText: value, type: 'PDF' };\n            this_1.parent.trigger(events.exportGroupCaption, cArgs, function (cArgs) {\n                row.cells.getCell(groupIndex).value = cArgs.captionText;\n                row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n                row.style.setBorder(border);\n                row.style.setFont(font);\n                row.style.setTextBrush(brush);\n                row.style.setBackgroundBrush(backgroundBrush);\n                var sRows;\n                var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n                if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                }\n                else {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                }\n                if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                }\n                if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    _this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n                }\n                else {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    index = _this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1), pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                    var isGroupedFooter = true;\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false, null, null, isGroupedFooter);\n                }\n            });\n        };\n        var this_1 = this;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            _loop_1(dataSourceItems);\n        }\n    };\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid, allowHorizontalOverflow, eCols) {\n        var _this = this;\n        var columnCount = gridColumn.length + childLevels;\n        var depth = measureColumnDepth(eCols);\n        var cols = eCols;\n        var index = 0;\n        if (this.parent.allowGrouping) {\n            index = this.parent.groupSettings.columns.length;\n        }\n        pdfGrid.columns.add(columnCount);\n        pdfGrid.headers.add(rows.length);\n        var applyTextAndSpan = function (rowIdx, colIdx, col, rowSpan, colSpan) {\n            var gridHeader = pdfGrid.headers.getHeader(rowIdx);\n            var pdfCell = gridHeader.cells.getCell(colIdx);\n            var cell = rows[rowIdx].cells[colIdx];\n            if (!isNullOrUndefined(col.headerTextAlign)) {\n                pdfCell.style.stringFormat = _this.getHorizontalAlignment(col.headerTextAlign);\n            }\n            if (rowSpan > 0) {\n                pdfCell.rowSpan = rowSpan;\n                pdfCell.style.stringFormat = _this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, col.textAlign);\n            }\n            if (colSpan > 0) {\n                pdfCell.columnSpan = colSpan;\n            }\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            pdfCell.value = col.headerText;\n            if (!isNullOrUndefined(cell) && (cell.cellType === CellType.HeaderIndent || cell.cellType === CellType.DetailHeader)) {\n                pdfCell.value = '';\n                pdfCell.width = 20;\n            }\n            var args = {\n                cell: pdfCell,\n                gridCell: cell,\n                style: pdfCell.style\n            };\n            _this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n        };\n        var recuHeader = function (cols, depth, spanCnt, colIndex, rowIndex, isRoot) {\n            var cidx = 0;\n            for (var i = 0; i < cols.length; i++) {\n                if (isRoot) {\n                    cidx = cidx + spanCnt + (i === 0 ? 0 : -1);\n                    colIndex = cidx;\n                    spanCnt = 0;\n                }\n                if (cols[i].columns && cols[i].columns.length) {\n                    var newSpanCnt = recuHeader(cols[i].columns, depth - 1, 0, i + colIndex, rowIndex + 1, false);\n                    applyTextAndSpan(rowIndex, i + colIndex, cols[i], 0, newSpanCnt);\n                    spanCnt = spanCnt + newSpanCnt;\n                    colIndex = colIndex + newSpanCnt - 1;\n                }\n                else if (cols[i].visible || _this.hideColumnInclude) {\n                    spanCnt++;\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], depth, 0);\n                }\n            }\n            return spanCnt;\n        };\n        recuHeader(cols, depth, 0, 0, 0, true);\n        if (pdfGrid.columns.count >= 6 && allowHorizontalOverflow) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            var clientSize = this.pdfPageSettings.size;\n            this.drawHeader(pdfExportProperties);\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return dataSource;\n    };\n    PdfExport.prototype.drawHeader = function (pdfExportProperties) {\n        var _this = this;\n        var clientSize = this.pdfPageSettings.size;\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.header)) {\n            /* tslint:disable-next-line:no-any */\n            var header = pdfExportProperties.header;\n            var position = new PointF(0, header.fromTop);\n            var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n            var bounds = new RectangleF(position, size);\n            if (!this.headerOnPages.length) {\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            else {\n                var headerTemplate_1 = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n                this.headerOnPages.filter(function (index) {\n                    if (index - 1 >= 0 && index - 1 < _this.pdfDocument.pages.count - 1) {\n                        _this.pdfDocument.pages.getPageByIndex(index - 1).graphics\n                            .drawPdfTemplate(headerTemplate_1.template, new PointF(0, 0));\n                    }\n                });\n            }\n        }\n    };\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format = new PdfStringFormat();\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                pageCount.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:max-func-body-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex, isGroupedFooter) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                var cell = row.cells[index];\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    i--;\n                    index++;\n                    continue;\n                }\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (cell.cellType === CellType.DetailFooterIntent) {\n                            continue;\n                        }\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                /* tslint:disable-next-line:max-line-length */\n                                var args = { row: row, type: 'GroupCaption', style: captionRow.cells };\n                                this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                if (!isCaption) {\n                                    i += 1;\n                                }\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        var txt = void 0;\n                        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n                        if (this.parent.isReact || this.parent.isVue) {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n                            if (this.parent.isReact) {\n                                this.parent.renderTemplates();\n                            }\n                        }\n                        else {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data));\n                        }\n                        value.push(txt[0].textContent);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (isCaption) {\n                for (var i = (this.parent.groupSettings.columns.length) + 1; i < value.length - 1; i++) {\n                    value[i] = value[i + 1];\n                }\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    /* tslint:disable-next-line:max-line-length */\n                    var args = { row: row, type: isGroupedFooter ? 'GroupFooter' : 'Footer', style: gridRow.cells };\n                    this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1 && leastCaptionSummaryIndex !== 1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, cell) {\n        if (!isNullOrUndefined(cell.column.footerTemplate) && cell.cellType === CellType.Summary) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(cell.column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(cell.column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(cell.column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    /**\n     * Set alignment, width and type of the values of the column\n     */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow) {\n        var startIndex = gObj.groupSettings.columns.length;\n        for (var i = 0; i < startIndex; i++) {\n            pdfGrid.columns.getColumn(i).width = 20;\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width) && allowHorizontalOverflow) {\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ?\n                    gridColumns[i].width * 0.75 : helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ?\n                this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n            var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n            var fontStyle = this.getFontStyle(this.gridTheme.record);\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.record.font)) {\n                font = this.gridTheme.record.font;\n            }\n            row.style.setFont(font);\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        var borderRecord = this.gridTheme && this.gridTheme.record &&\n            this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n        row.style.setBorder(borderRecord);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n        var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            rowIndex++;\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            var cellLength = row.cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var gridCell = row.cells[j];\n                if (gridCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gridCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = row.data;\n                var cell = gridRow.cells.getCell(j);\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1,\n                    cell: cell\n                };\n                args.value = this.exportValueFormatter.formatCellValue(args, gObj.isServerRendered);\n                this.parent.trigger(events.pdfQueryCellInfo, args);\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n            if (row.isExpand) {\n                var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n                var cell = gridRow_1.cells.getCell(startIndex);\n                cell.columnSpan = gridRow_1.cells.count - (startIndex);\n                cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType) ?\n                    pdfExportProperties.exportType : 'AllPages';\n                var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnValue.childGrid;\n                var element = returnValue.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                var args = { childGrid: childGridObj, row: row, cell: cell, exportProperties: pdfExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, pdfExportProperties);\n                childGridObj.appendTo(element);\n            }\n            this.parent.notify(events.exportRowDataBound, { type: 'pdf', rowObj: row });\n        }\n        return rowIndex;\n    };\n    PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return cell;\n        };\n    };\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.cellPadding)) {\n            cell.style.cellPadding = args.style.cellPadding;\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) ||\n            !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        if (content.font) {\n            return content.font;\n        }\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ?\n            (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.TimesRoman;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    PdfExport.prototype.getFontStyle = function (theme) {\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(theme) && theme.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(theme) && theme.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(theme) && theme.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(theme) && theme.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return fontStyle;\n    };\n    PdfExport.prototype.getBorderStyle = function (border) {\n        var borders = new PdfBorders();\n        if (!isNullOrUndefined(border)) {\n            var borderWidth = border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? borderWidth * 0.75 : undefined;\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(border.color)) {\n                var borderColor = this.hexToRgb(border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(border.dashStyle);\n            }\n            borders.all = pen;\n        }\n        else {\n            borders.all = new PdfPen(new PdfColor(234, 234, 234));\n        }\n        return borders;\n    };\n    /**\n     * To destroy the pdf export\n     * @return {void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, removeClass, attributes, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = _this.parent.createElement('button', {});\n        _this.unbounDiv = _this.parent.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var uid = 'uid';\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            if (this.parent.isReact && typeof (cell.column.commandsTemplate) !== 'string') {\n                var tempID = this.parent + 'commandsTemplate';\n                cell.column.getColumnTemplate()(data, this.parent, 'commandsTemplate', tempID, null, null, node.firstElementChild);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n            }\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index, command[uid]);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index, uid) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index + '_' + uid, 'type': 'button',\n            title: !isNullOrUndefined(buttonOption.title) ? buttonOption.title :\n                buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type,\n            'data-uid': uid\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { click, keyPressed, commandClick, initialEnd } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\nimport { getUid } from '../base/util';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.initiateRender();\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = gObj.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        var uid = target.getAttribute('data-uid');\n        var commandColumn;\n        var row = gObj.getRowObjectFromUID(closest(target, '.e-row').getAttribute('data-uid'));\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].commands) {\n                var commandCols = cols[i].commands;\n                for (var j = 0; j < commandCols.length; j++) {\n                    var idInString = 'uid';\n                    var typeInString = 'type';\n                    if (isBlazor() && !gObj.isJsComponent && commandCols[j][idInString] === uid) {\n                        commandColumn = commandCols[j];\n                        type = commandCols[j][typeInString];\n                    }\n                    else if (commandCols[j][idInString] === uid && commandCols[j][typeInString] === type) {\n                        commandColumn = commandCols[j];\n                    }\n                }\n            }\n        }\n        var args = {\n            cancel: false,\n            target: target,\n            commandColumn: commandColumn,\n            rowData: isNullOrUndefined(row) ? undefined : row.data\n        };\n        this.parent.trigger(commandClick, args, function (commandclickargs) {\n            if (buttonObj.disabled || !gObj.editModule || commandclickargs.cancel) {\n                return;\n            }\n            switch (type) {\n                case 'Edit':\n                    gObj.editModule.endEdit();\n                    gObj.editModule.startEdit(closest(target, 'tr'));\n                    break;\n                case 'Cancel':\n                    gObj.editModule.closeEdit();\n                    break;\n                case 'Save':\n                    gObj.editModule.endEdit();\n                    break;\n                case 'Delete':\n                    if (gObj.editSettings.mode !== 'Batch') {\n                        gObj.editModule.endEdit();\n                    }\n                    gObj.commandDelIndex = parseInt(closest(target, 'tr').getAttribute('aria-rowindex'), 10);\n                    gObj.clearSelection();\n                    //for toogle issue when dbl click\n                    gObj.selectRow(gObj.commandDelIndex, false);\n                    gObj.editModule.deleteRecord();\n                    gObj.commandDelIndex = undefined;\n                    break;\n            }\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(keyPressed, this.keyPressHandler);\n        this.parent.off(initialEnd, this.load);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n        this.parent.on(initialEnd, this.load, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    CommandColumn.prototype.load = function () {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            return;\n        }\n        var uid = 'uid';\n        var col = this.parent.columnModel;\n        for (var i = 0; i < col.length; i++) {\n            if (col[i].commands) {\n                var commandCol = col[i].commands;\n                for (var j = 0; j < commandCol.length; j++) {\n                    commandCol[j][uid] = getUid('gridcommand');\n                }\n            }\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { remove, isBlazor } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n        if (e.code === 'Escape') {\n            this.contextMenu.close();\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                            this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                        }\n                    }\n                    else {\n                        this.parent.editModule.endEdit();\n                        this.parent.editModule.startEdit(this.row);\n                    }\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode !== 'Batch') {\n                        this.parent.editModule.endEdit();\n                    }\n                    if (this.parent.getSelectedRecords().length === 1) {\n                        this.parent.editModule.deleteRow(this.row);\n                    }\n                    else {\n                        this.parent.deleteRecord();\n                    }\n                }\n                break;\n            case 'Save':\n                if (this.parent.editModule) {\n                    this.parent.editModule.endEdit();\n                }\n                break;\n            case 'Cancel':\n                if (this.parent.editModule) {\n                    this.parent.editModule.closeEdit();\n                }\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        args.rowInfo = this.targetRowdata;\n        if (isBlazor()) {\n            var contextMenuClickArgs = args.rowInfo.row ?\n                {\n                    element: args.element, item: args.item, event: args.event, column: this.targetColumn, rowInfo: {\n                        rowData: this.targetRowdata.rowData, rowIndex: this.targetRowdata.rowIndex, cellIndex: this.targetRowdata.cellIndex\n                    }\n                }\n                : this.targetColumn ? { element: args.element, item: args.item, event: args.event, column: this.targetColumn }\n                    : { element: args.element, item: args.item, event: args.event };\n            this.parent.trigger(events.contextMenuClick, contextMenuClickArgs);\n        }\n        else {\n            this.parent.trigger(events.contextMenuClick, args);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.targetRowdata = this.parent.getRowInfo(args.event.target);\n            if ((isNullOrUndefined(args.parentItem)) && this.targetColumn) {\n                if (this.targetRowdata.cell) {\n                    this.selectRow(args.event, (this.targetRowdata.cell.classList.contains('e-selectionbackground')\n                        && this.parent.selectionSettings.type === 'Multiple') ? false : true);\n                }\n            }\n            var hideSepItems = [];\n            var showSepItems = [];\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editModule && this.parent.editSettings.mode === 'Batch' &&\n                        ((closest(args.event.target, '.e-gridform')) ||\n                            this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    if (item.separator) {\n                        hideSepItems.push(item.id);\n                    }\n                    else {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (this.ensureTarget(args.event.target, item.target) && item.separator) {\n                    showSepItems.push(item.id);\n                }\n            }\n            if (showSepItems.length > 0) {\n                this.contextMenu.showItems(showSepItems, true);\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            if (hideSepItems.length > 0) {\n                this.contextMenu.hideItems(hideSepItems, true);\n            }\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            args.rowInfo = this.targetRowdata;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (args.cancel || (this.hiddenItems.length === args.items.length && !args.parentItem)) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n        applyBiggerTheme(this.parent.element, this.contextMenu.element.parentElement);\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : 'tbody');\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.getFrozenColumns() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit)\n                    || (this.targetColumn && !this.targetColumn.field && item === 'AutoFit');\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    }\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n        if (isBlazor()) {\n            var autoFitAll = 'AutoFitAll';\n            localeKeys[autoFitAll] = 'AutoFitAll';\n            var autoFit = 'AutoFit';\n            localeKeys[autoFit] = 'AutoFit';\n        }\n        return localeKeys;\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            var uid = cell.querySelector('.e-headercelldiv, .e-stackedheadercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        else {\n            var ele = (this.parent.getRowInfo(e.target).column);\n            return ele || null;\n        }\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute('aria-rowindex'), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\nimport { isBlazor } from '@syncfusion/ej2-base';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.isFrzLoad = 1;\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs, virtualRows) {\n        var frzCols = this.parent.getFrozenColumns();\n        frzCols = frzCols && this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n        if (this.isFrzLoad % 2 !== 0 && notifyArgs.requestType === 'virtualscroll' && notifyArgs.virtualInfo.sentinelInfo.axis === 'X') {\n            this.isFrzLoad++;\n            return null;\n        }\n        var row = this.parent.enableVirtualization ? virtualRows\n            : this.rowModelGenerator.generateRows(data, notifyArgs);\n        if (isBlazor() && !this.parent.isJsComponent) {\n            return row;\n        }\n        for (var i = 0, len = row.length; i < len; i++) {\n            if (this.isFrzLoad % 2 === 0) {\n                row[i].cells = row[i].cells.slice(frzCols, row[i].cells.length);\n            }\n            else {\n                row[i].isFreezeRow = true;\n                row[i].cells = row[i].cells.slice(0, frzCols);\n            }\n        }\n        this.isFrzLoad++;\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth, wrap } from '../base/util';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        return _super.call(this, parent, locator) || this;\n    }\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.element.querySelector('.e-frozencontent');\n        var mDiv = this.parent.element.querySelector('.e-movablecontent');\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozencontent' });\n            mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n            this.getPanel().querySelector('.e-content').appendChild(fDiv);\n            this.getPanel().querySelector('.e-content').appendChild(mDiv);\n        }\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            return;\n        }\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        this.parent.getContent().querySelector('.e-frozencontent').style.height =\n            this.parent.getContent().querySelector('.e-movablecontent').offsetHeight - getScrollBarWidth() + 'px';\n        addClass([this.getMovableContent().querySelector('tbody').querySelector('tr')], ['e-emptyrow']);\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        var mTbl;\n        if (this.getFrozenContent().querySelector('.e-table') == null) {\n            _super.prototype.renderTable.call(this);\n            this.getFrozenContent().appendChild(this.getTable());\n            mTbl = this.getTable().cloneNode(true);\n            this.getMovableContent().appendChild(mTbl);\n        }\n        else {\n            this.setTable(this.getFrozenContent().querySelector('.e-table'));\n            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n            this.getFrozenContent().querySelector('.e-table').appendChild(this.getColGroup());\n            mTbl = this.getMovableContent().querySelector('.e-table');\n            if (this.parent.frozenRows) {\n                this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n            }\n        }\n        if (this.getMovableContent().querySelector('colgroup')) {\n            remove(this.getMovableContent().querySelector('colgroup'));\n        }\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        if (!isBlazor()) {\n            _super.prototype.renderTable.call(this);\n        }\n        else {\n            this.setTable(this.createTable(this.getFrozenHeader().querySelector('.e-table')));\n            this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: true } });\n            this.createTable(this.getMovableHeader().querySelector('.e-table'));\n        }\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        var fDiv = this.parent.element.querySelector('.e-frozenheader');\n        var mDiv = this.parent.element.querySelector('.e-movableheader');\n        _super.prototype.renderPanel.call(this);\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozenheader' });\n            mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n            this.getPanel().querySelector('.e-headercontent').appendChild(fDiv);\n            this.getPanel().querySelector('.e-headercontent').appendChild(mDiv);\n        }\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        if (!(isBlazor() && this.parent.isServerRendered) || this.parent.frozenRows === 0) {\n            var tbody = this.getMovableHeader().querySelector('tbody');\n            remove(this.getMovableHeader().querySelector('table'));\n            _super.prototype.refreshUI.call(this);\n            this.rfshMovable();\n            this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        }\n        else {\n            if (this.parent.getFrozenColumns() && this.freezeReorder) {\n                _super.prototype.refreshUI.call(this);\n                this.freezeReorder = false;\n                _super.prototype.refreshUI.call(this);\n            }\n            this.rfshMovable();\n        }\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            this.updateColgroup();\n        }\n        if (!this.parent.enableVirtualization) {\n            this.widthService.setWidthToTable();\n        }\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.movableHeader.querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent);\n        }\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        if (this.parent.enableColumnVirtualization) {\n            this.parent.getFrozenVirtualHeader().querySelector('.e-virtualtable').appendChild(this.getTable());\n            this.parent.getMovableVirtualHeader().querySelector('.e-virtualtable').appendChild(this.createTable());\n        }\n        else {\n            if (!isBlazor() || this.parent.frozenRows === 0) {\n                this.getFrozenHeader().appendChild(this.getTable());\n                this.getMovableHeader().appendChild(this.createTable());\n            }\n        }\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader').length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(this.filterRenderer(filterRow, this.parent.getFrozenColumns()));\n                var elements = [].slice.call(this.getMovableHeader().\n                    querySelectorAll('thead .e-filterbarcell .e-input'));\n                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                    var elem = elements_1[_i];\n                    var args = {\n                        element: elem, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.bindInitialEvent(args);\n                }\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            var fRows = void 0;\n            var mRows = void 0;\n            var fHdr = this.getFrozenHeader();\n            var mHdr = this.getMovableHeader();\n            var cont = this.parent.getContent();\n            var wrapMode = this.parent.textWrapSettings.wrapMode;\n            var hdrClassList = this.parent.getHeaderContent().querySelector('.e-headercontent').classList;\n            if (obj.case === 'textwrap') {\n                if (wrapMode !== 'Header' || obj.isModeChg) {\n                    fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                    mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                    this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n                }\n                if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                    hdrClassList.add('e-wrap');\n                }\n                else {\n                    hdrClassList.remove('e-wrap');\n                }\n                if (wrapMode === 'Both' || obj.isModeChg) {\n                    fRows = fHdr.querySelectorAll('tr');\n                    mRows = mHdr.querySelectorAll('tr');\n                }\n                else {\n                    fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                        'tbody' : 'thead').querySelectorAll('tr');\n                    mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                        'tbody' : 'thead').querySelectorAll('tr');\n                }\n                if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                    this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n                }\n                this.refreshStackedHdrHgt();\n            }\n            else if (obj.case === 'refreshHeight') {\n                this.setWrapHeight(cont.querySelector('.e-frozencontent').querySelectorAll('tr'), cont.querySelector('.e-movablecontent').querySelectorAll('tr'), obj.isModeChg);\n                if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                    this.setWrapHeight(fHdr.querySelectorAll('tr'), mHdr.querySelectorAll('tr'), obj.isModeChg);\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'scroll') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[i].style.height = elements[i].parentElement.offsetHeight + 'px';\n        }\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue \n            if (!isNullOrUndefined(fRows[i]) && !isNullOrUndefined(mRows[i])) {\n                height[i] = fRows[i].getBoundingClientRect().height; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n                width[i] = mRows[i].getBoundingClientRect().height;\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (!isNullOrUndefined(fRows[i]) && fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) ||\n                (!isWrap && fRowHgt < mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === false))) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            if (mRows && !isNullOrUndefined(mRows[i]) && mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) ||\n                (!isWrap && fRowHgt > mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function (height) {\n        if (height === void 0) { height = getScrollBarWidth(); }\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var movableContent = this.parent.element.querySelector('.e-movablecontent');\n        var frozenContent = this.parent.element.querySelector('.e-frozencontent');\n        var contentScrollWidth = this.parent.getContent().scrollWidth;\n        var contentTableScrollWidth = this.parent.element.querySelector('.e-movablecontent table').scrollWidth +\n            this.parent.getContentTable().scrollWidth;\n        if (movableContent.scrollWidth - movableContent.clientWidth) {\n            frozenContent.style.height = movableContentHeight -\n                height + 'px';\n            frozenContent.style.borderBottom = '';\n        }\n        else {\n            frozenContent.style.height = movableContentHeight + 'px';\n            if (((frozenContent.scrollHeight <= frozenContent.clientHeight) ||\n                (movableContent.scrollHeight <= movableContent.clientHeight))\n                && contentScrollWidth === contentTableScrollWidth) {\n                this.parent.scrollModule.removePadding();\n            }\n            frozenContent.style.borderBottom = '0px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    /**\n     * @hidden\n     */\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent), mTable.querySelector('thead'));\n    };\n    FreezeRender.prototype.filterRenderer = function (ele, frozenColumn) {\n        var clone = ele.cloneNode(true);\n        clone.innerHTML = '';\n        for (var i = frozenColumn; i < this.parent.getColumns().length; i++) {\n            clone.appendChild(ele.removeChild(ele.children[frozenColumn]));\n        }\n        return clone;\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, extend } from '@syncfusion/ej2-base';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from './virtual-content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\n/**\n * VirtualFreezeRenderer is used to render the virtual table within the frozen table\n * @hidden\n */\nvar VirtualFreezeRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeRenderer, _super);\n    function VirtualFreezeRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.frzeeLoad = 1;\n        _this.serviceLoc = locator;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.renderTable = function () {\n        this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n        this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n        this.virtualRenderer.setPanel(this.parent.getContent());\n        this.virtualRenderer.renderTable();\n        var virtualTable = this.parent.getContent().querySelector('.e-virtualtable');\n        var virtualTrack = this.parent.getContent().querySelector('.e-virtualtrack');\n        virtualTrack.style.position = '';\n        this.getFrozenContent().appendChild(virtualTable);\n        this.getFrozenContent().appendChild(virtualTrack);\n        var mTbl = virtualTable.cloneNode(true);\n        var mTblT = virtualTrack.cloneNode(true);\n        this.getMovableContent().appendChild(mTbl);\n        this.getMovableContent().appendChild(mTblT);\n        remove(this.getMovableContent().querySelector('colgroup'));\n        var colGroup = this.parent.getMovableVirtualHeader().querySelector('colgroup')\n            .cloneNode(true);\n        mTbl.firstElementChild.insertBefore(colGroup, mTbl.firstElementChild.querySelector('tbody'));\n        this.setTable(this.parent.element.querySelector('.e-frozencontent').querySelector('.e-table'));\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n        this.virtualRenderer.appendContent(target, newChild, e);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.generateRows = function (data, notifyArgs) {\n        var virtualRows = this.virtualRenderer.vgenerator.generateRows(data, notifyArgs);\n        var arr = [];\n        arr = virtualRows.map(function (row) { return extend({}, row); });\n        if (!this.firstPageRecords) {\n            this.firstPageRecords = data;\n        }\n        var rows = this.freezeRowGenerator.generateRows(data, notifyArgs, arr);\n        return rows;\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n        return this.virtualRenderer.getRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n        return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRows = function () {\n        return this.virtualRenderer.vgenerator.getRows();\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRows = function () {\n        return this.getMovableRows();\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getColGroup = function () {\n        var mCol = this.parent.getMovableVirtualContent().querySelector('colgroup');\n        var fCol = this.parent.getFrozenVirtualContent().querySelector('colgroup');\n        var colGroup = this.isXaxis() ? mCol : fCol;\n        return colGroup;\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n        var rows;\n        var bIndex = args.virtualInfo.blockIndexes;\n        var colIndex = args.virtualInfo.columnIndexes;\n        var page = args.virtualInfo.page;\n        args.virtualInfo.blockIndexes = [1, 2];\n        args.virtualInfo.page = 1;\n        if (!args.renderMovableContent) {\n            args.virtualInfo.columnIndexes = [];\n        }\n        var virtualRows = this.virtualRenderer.vgenerator.generateRows(this.firstPageRecords, args);\n        rows = this.splitReorderedRows(virtualRows);\n        args.virtualInfo.blockIndexes = bIndex;\n        args.virtualInfo.columnIndexes = colIndex;\n        args.virtualInfo.page = page;\n        return rows.splice(0, this.parent.frozenRows);\n    };\n    VirtualFreezeRenderer.prototype.splitReorderedRows = function (rows) {\n        var frzCols = this.parent.getFrozenColumns();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (this.frzeeLoad % 2 === 0) {\n                rows[i].cells = rows[i].cells.slice(frzCols, rows[i].cells.length);\n            }\n            else {\n                rows[i].isFreezeRow = true;\n                rows[i].cells = rows[i].cells.slice(0, frzCols);\n            }\n        }\n        this.frzeeLoad++;\n        return rows;\n    };\n    VirtualFreezeRenderer.prototype.isXaxis = function () {\n        var value = false;\n        if (this.virtualRenderer) {\n            value = this.virtualRenderer.requestType === 'virtualscroll'\n                && this.virtualRenderer.currentInfo.sentinelInfo.axis === 'X';\n        }\n        return value;\n    };\n    VirtualFreezeRenderer.prototype.getHeaderCells = function () {\n        var content = this.isXaxis() ? this.parent.getMovableVirtualHeader() : this.parent.getHeaderContent();\n        return content ? [].slice.call(content.querySelectorAll('.e-headercell:not(.e-stackedheadercell)')) : [];\n    };\n    VirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n        var headerTable;\n        if (this.isXaxis()) {\n            headerTable = this.parent.getMovableVirtualHeader().querySelector('.e-table');\n        }\n        else {\n            headerTable = this.parent.getFrozenVirtualHeader().querySelector('.e-table');\n        }\n        return headerTable;\n    };\n    VirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n        var frozenCols = this.parent.columns.slice(0, this.parent.getFrozenColumns());\n        columns = frozenCols.concat(columns);\n        return columns;\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n        return this.virtualRenderer.getRowObjectByIndex(index);\n    };\n    return VirtualFreezeRenderer;\n}(FreezeContentRender));\nexport { VirtualFreezeRenderer };\nvar VirtualFreezeHdrRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeHdrRenderer, _super);\n    function VirtualFreezeHdrRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.serviceLoc = locator;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    VirtualFreezeHdrRenderer.prototype.renderTable = function () {\n        this.virtualHdrRenderer = new VirtualHeaderRenderer(this.parent, this.serviceLoc);\n        this.virtualEle = this.virtualHdrRenderer.virtualEle;\n        this.virtualHdrRenderer.setPanel(this.parent.getHeaderContent());\n        this.virtualHdrRenderer.renderTable();\n        this.rfhMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.setTable(this.parent.element.querySelector('.e-frozenheader').querySelector('.e-table'));\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    VirtualFreezeHdrRenderer.prototype.rfhMovable = function () {\n        var fvTbl = this.parent.getHeaderContent().querySelector('.e-virtualtable');\n        var fvTck = this.parent.getHeaderContent().querySelector('.e-virtualtrack');\n        this.getFrozenHeader().appendChild(fvTbl);\n        this.getFrozenHeader().appendChild(fvTck);\n        this.virtualHdrRenderer.virtualEle.table = this.createTable();\n        this.virtualHdrRenderer.virtualEle.renderWrapper();\n        this.virtualHdrRenderer.virtualEle.renderPlaceHolder();\n        var mvTbl = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-virtualtable'));\n        var mvTck = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-virtualtrack'));\n        this.getMovableHeader().appendChild(mvTbl[1]);\n        this.getMovableHeader().appendChild(mvTck[1]);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeHdrRenderer.prototype.getTable = function () {\n        return this.virtualHdrRenderer.getTable();\n    };\n    return VirtualFreezeHdrRenderer;\n}(FreezeRender));\nexport { VirtualFreezeHdrRenderer };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\nimport { VirtualFreezeRenderer, VirtualFreezeHdrRenderer } from '../renderer/virtual-freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        this.parent.log('limitation', this.getModuleName());\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            this.parent.enableColumnVirtualization ?\n                renderer.addRenderer(RenderType.Header, new VirtualFreezeHdrRenderer(this.parent, this.locator))\n                : renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            this.parent.enableVirtualization ?\n                renderer.addRenderer(RenderType.Content, new VirtualFreezeRenderer(this.parent, this.locator))\n                : renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, isBlazor } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.add(elements[i], 'mousedown', this.columnMenuHandlerDown, this);\n        }\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.remove(elements[i], 'mousedown', this.columnMenuHandlerDown);\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    /** @hidden */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n                this.disableItems.push(item.text);\n            }\n            if (item.hide) {\n                this.hiddenItems.push(item.text);\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n            else if (this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    }\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        if (!this.parent.getFrozenColumns()) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n        if (isBlazor()) {\n            var autoFitAll = 'AutoFitAll';\n            localeKeys[autoFitAll] = 'AutoFitAll';\n            var autoFit = 'AutoFit';\n            localeKeys[autoFit] = 'AutoFit';\n        }\n        return localeKeys;\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null && this.parent.filterSettings.type === 'Menu') {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\nimport * as events from '../base/constant';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].dataSource = (columns[i].dataSource instanceof DataManager ? columns[i].dataSource :\n                (isNullOrUndefined(columns[i].dataSource) ? new DataManager() : 'result' in columns[i].dataSource ? columns[i].dataSource :\n                    new DataManager(columns[i].dataSource)));\n        }\n    };\n    ForeignKey.prototype.eventfPromise = function (args, query, key, column) {\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        state.action = args.action;\n        var dataModule = this.parent.getDataModule();\n        if (!isNullOrUndefined(args.action) && args.action.requestType && dataModule.foreignKeyDataState.isDataChanged !== false) {\n            dataModule.setForeignKeyDataState({\n                isPending: true, resolver: deff.resolve\n            });\n            deff.promise.then(function () {\n                def.resolve(column.dataSource);\n            });\n            state.setColumnData = this.parent.setForeignKeyData.bind(this.parent);\n            this.parent.trigger(events.columnDataStateChange, state);\n        }\n        else {\n            dataModule.setForeignKeyDataState({});\n            def.resolve(key);\n        }\n        return def;\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        var _loop_1 = function (i) {\n            var promise = void 0;\n            var query = args.isComplex ? this_1.genarateColumnQuery(foreignColumns[i]) :\n                this_1.genarateQuery(foreignColumns[i], args.result.result, false, true);\n            query.params = this_1.parent.query.params;\n            var dataSource = foreignColumns[i].dataSource;\n            if (dataSource && 'result' in dataSource) {\n                var def = this_1.eventfPromise(args, query, dataSource, foreignColumns[i]);\n                promise = def.promise;\n            }\n            else if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        };\n        var this_1 = this;\n        for (var i = 0; i < foreignColumns.length; i++) {\n            _loop_1(i);\n        }\n        Promise.all(allPromise).then(function (responses) {\n            for (var i = 0; i < responses.length; i++) {\n                foreignColumns[i].columnData = responses[i].result;\n                if (foreignColumns[i].editType === 'dropdownedit' && 'result' in foreignColumns[i].dataSource) {\n                    foreignColumns[i].edit.params = extend(foreignColumns[i].edit.params, {\n                        dataSource: responses[i].result,\n                        query: new Query(), fields: {\n                            value: foreignColumns[i].foreignKeyField || foreignColumns[i].field,\n                            text: foreignColumns[i].foreignKeyValue\n                        }\n                    });\n                }\n            }\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            _this.parent.log(['actionfailure', 'foreign_key_failure']);\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var predicate;\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length && !fromData) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            for (var i = 0; i < filteredValue.length; i++) {\n                if (filteredValue[i] && filteredValue[i].getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: filteredValue[i], matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', filteredValue[i], false));\n                }\n            }\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        predicate = (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n        return predicate;\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = new Query();\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            if (column.dataSource instanceof DataManager && (column.dataSource.adaptor.getModuleName &&\n                column.dataSource.adaptor.getModuleName() === 'ODataV4Adaptor')) {\n                query = this.searchQuery(query, column, true);\n            }\n            else {\n                query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n            }\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue && fColumn.uid === column.uid);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n","/**\n *\n * `Logger` class\n */\nimport { isNullOrUndefined, L10n, isUndefined } from '@syncfusion/ej2-base';\nimport { DataUtil, DataManager } from '@syncfusion/ej2-data';\nvar BASE_DOC_URL = 'https://ej2.syncfusion.com/documentation/grid';\nvar DOC_URL = 'https://ej2.syncfusion.com/documentation/';\nvar WARNING = '[EJ2Grid.Warning]';\nvar ERROR = '[EJ2Grid.Error]';\nvar INFO = '[EJ2Grid.Info]';\nvar Logger = /** @class */ (function () {\n    function Logger(parent) {\n        this.parent = parent;\n        this.parent.on('initial-end', this.patchadaptor, this);\n    }\n    Logger.prototype.getModuleName = function () {\n        return 'logger';\n    };\n    Logger.prototype.log = function (types, args) {\n        if (!(types instanceof Array)) {\n            types = [types];\n        }\n        var type = types;\n        for (var i = 0; i < type.length; i++) {\n            var item = detailLists[type[i]];\n            var cOp = item.check(args, this.parent);\n            if (cOp.success) {\n                console[item.logType](item.generateMessage(args, this.parent, cOp.options));\n            }\n        }\n    };\n    Logger.prototype.patchadaptor = function () {\n        var adaptor = this.parent.getDataModule().dataManager.adaptor;\n        var original = adaptor.beforeSend;\n        if (original) {\n            adaptor.beforeSend = function (dm, request, settings) {\n                original.call(adaptor, dm, request, settings);\n            };\n        }\n    };\n    Logger.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('initial-end', this.patchadaptor);\n    };\n    return Logger;\n}());\nexport { Logger };\nexport var detailLists = {\n    module_missing: {\n        type: 'module_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var injected = parent.getInjectedModules().map(function (m) { return m.prototype.getModuleName(); });\n            /* tslint:disable-next-line:no-any */\n            var modules = parent.requiredModules().map(function (m) { return m.member; })\n                .filter(function (name) { return injected.indexOf(name) === -1; });\n            return { success: modules.filter(function (m) { return m !== 'resize'; }).length > 0, options: modules };\n        },\n        generateMessage: function (args, parent, modules) {\n            modules = modules.filter(function (m) { return m !== 'resize'; })\n                .reduce(function (prev, cur) { return prev + (\"* \" + cur + \"\\n\"); }, '');\n            return WARNING + ': MODULES MISSING\\n' + 'The following modules are not injected:.\\n' +\n                (\"\" + modules) +\n                (\"Refer to \" + BASE_DOC_URL + \"/module.html for documentation on importing feature modules.\");\n        }\n    },\n    promise_enabled: {\n        type: 'promise_enabled',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: typeof Promise === 'undefined' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': PROMISE UNDEFINED\\n' +\n                'Promise object is not present in the global environment,' +\n                'please use polyfil to support Promise object in your environment.\\n' +\n                (\"Refer to \" + DOC_URL + \"/base/browser.html?#required-polyfills for more information.\");\n        }\n    },\n    primary_column_missing: {\n        type: 'primary_column_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' + 'Editing is enabled but primary key column is not specified.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    selection_key_missing: {\n        type: 'selection_key_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.selectionSettings.persistSelection &&\n                    parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' +\n                'selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    actionfailure: {\n        type: 'actionfailure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            var message = '';\n            var formatError = formatErrorHandler(args, parent);\n            var ajaxError = ajaxErrorHandler(args, parent);\n            if (ajaxError !== '') {\n                message = ajaxError;\n            }\n            else if (formatError !== '') {\n                message = formatError;\n            }\n            else {\n                message = args.error;\n            }\n            return WARNING + ': ' + message;\n        }\n    },\n    locale_missing: {\n        type: 'locale_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var lObj = DataUtil.getObject(\"locale.\" + parent.locale + \".grid\", L10n);\n            return { success: parent.locale !== 'en-US' && isNullOrUndefined(lObj) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': LOCALE CONFIG MISSING\\n' + (\"Locale configuration for '\" + parent.locale + \"' is not provided.\\n\") +\n                (\"Refer to \" + BASE_DOC_URL + \"/globalization-and-localization.html?#localization \\n             for documentation on setting locale configuration.\");\n        }\n    },\n    limitation: {\n        type: 'limitation',\n        logType: 'warn',\n        check: function (args, parent) {\n            var name = args;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = {\n                        success: parent.allowGrouping || !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid)\n                            || !isUndefined(parent.rowTemplate) || parent.enableVirtualization,\n                        options: { name: 'freeze' }\n                    };\n                    break;\n                case 'virtualization':\n                    opt = {\n                        success: !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid) || parent.frozenRows !== 0\n                            || parent.frozenColumns !== 0,\n                        options: { name: 'virtualization' }\n                    };\n                    break;\n                default:\n                    opt = { success: false };\n                    break;\n            }\n            return opt;\n        },\n        generateMessage: function (args, parent, options) {\n            var name = options.name;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = 'Frozen rows and columns do not support the following features:\\n' +\n                        '* Virtualization\\n' +\n                        '* Row Template\\n' +\n                        '* Details Template\\n' +\n                        '* Hierarchy Grid\\n' +\n                        '* Grouping';\n                    break;\n                case 'virtualization':\n                    opt = 'Virtualization does not support the following features.\\n' +\n                        '* Freeze rows and columns.\\n' +\n                        '* Details Template.\\n' +\n                        '* Hierarchy Grid.\\n';\n                    break;\n                default:\n                    opt = '';\n                    break;\n            }\n            return WARNING + (\": \" + name.toUpperCase() + \" LIMITATIONS\\n\") + opt;\n        }\n    },\n    check_datasource_columns: {\n        type: 'check_datasource_columns',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: !(parent.columns.length ||\n                    (parent.dataSource instanceof DataManager) || parent.dataSource.length) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': GRID CONFIG MISSING\\n' + 'dataSource and columns are not provided in the grid. ' +\n                'At least one of either must be provided for grid configuration.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns.html for documentation on configuring the grid data and columns.\");\n        }\n    },\n    virtual_height: {\n        type: 'virtual_height',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(parent.height) || parent.height === 'auto' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': GRID HEIGHT MISSING \\n' + 'height property is required to use virtualization.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/virtual.html for documentation on configuring the virtual grid.\");\n        }\n    },\n    grid_remote_edit: {\n        type: 'grid_remote_edit',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: Array.isArray(args) || Array.isArray(args.result) };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': RETRUN VALUE MISSING  \\n' +\n                'Remote service returns invalid data. \\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/edit.html for documentation on configuring editing with remote data.\");\n        }\n    },\n    grid_sort_comparer: {\n        type: 'grid_sort_comparer',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getDataModule().isRemote() };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': SORT COMPARER NOT WORKING  \\n' + 'Sort comparer will not work with remote data.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/sorting/#custom-sort-comparer for documentation on using the sort comparer.\");\n        }\n    },\n    resize_min_max: {\n        type: 'resize_min_max',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: (args.column.minWidth && args.column.minWidth >= args.width) ||\n                    (args.column.maxWidth && args.column.maxWidth <= args.width) };\n        },\n        generateMessage: function (args, parent) {\n            return INFO + ': RESIZING COLUMN REACHED MIN OR MAX  \\n' + 'The column resizing width is at its min or max.';\n        }\n    },\n    action_disabled_column: {\n        type: 'action_disabled_column',\n        logType: 'info',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'reorder':\n                    if (isNullOrUndefined(args.destColumn)) {\n                        fn = \"reordering action is disabled for the \" + args.column.headerText + \" column\";\n                    }\n                    else {\n                        fn = \"reordering action is disabled for the \" + (args.column.allowReordering ?\n                            args.destColumn.headerText : args.column.headerText) + \" column\";\n                    }\n                    break;\n                case 'group':\n                    fn = \"grouping action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'filter':\n                    fn = \"filtering action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'sort':\n                    fn = \"sorting action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": ACTION DISABLED \\n \" + options.fn);\n        }\n    },\n    exporting_begin: {\n        type: 'exporting_begin',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG INPROGRESS \\n Grid \" + options.args + \"ing is in progress\");\n        }\n    },\n    exporting_complete: {\n        type: 'exporting_complete',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG COMPLETED \\n Grid \" + options.args + \"ing is complete\");\n        }\n    },\n    foreign_key_failure: {\n        type: 'foreign_key_failure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': FOREIGNKEY CONFIG \\n  Grid foreign key column needs a valid data source/service.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns/#foreign-key-column for documentation on configuring foreign key columns.\");\n        }\n    },\n    initial_action: {\n        type: 'initial_action',\n        logType: 'error',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'group':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to group the column';\n                    break;\n                case 'filter':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to filter the column.';\n                    break;\n                case 'sort':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to sort the column.';\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": INITIAL ACTION FAILURE \\n \" + options.fn);\n        }\n    },\n    frozen_rows_columns: {\n        type: 'frozen_rows_columns',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: parent.getColumns().length <= parent.frozenColumns || parent.frozenRows >= parent.currentViewData.length };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": OUT OF RANGE ERROR-\\n \" + (parent.getColumns().length <= parent.frozenColumns ? 'FROZEN COLUMNS,' : '')) +\n                ((parent.frozenRows >= parent.currentViewData.length ? 'FROZEN ROWS' : '') + \" invalid\");\n        }\n    },\n    column_type_missing: {\n        type: 'column_type_missing',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(args.column.type), options: args.column.headerText };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": COLUMN TYPE MISSING-\\n  \" + options + \" column type was invalid or not defined.\") +\n                (\"Please go through below help link: \" + DOC_URL + \"/grid/columns/#column-type\");\n        }\n    },\n    datasource_syntax_mismatch: {\n        type: 'datasource_syntax_mismatch',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: (args.dataState.dataSource instanceof DataManager || args.dataState.dataSource instanceof Array) &&\n                    !(isNullOrUndefined(args.dataState.dataStateChange)) };\n        },\n        generateMessage: function (args, parent, options) {\n            return WARNING + ': DATASOURCE SYNTAX WARNING\\n' +\n                'DataSource should be in the form of {result: Object[], count: number}' +\n                'when dataStateChangeEvent used';\n        }\n    }\n};\nvar formatErrorHandler = function (args, parent) {\n    var error = args.error;\n    if (error.indexOf && error.indexOf('Format options') !== 0) {\n        return '';\n    }\n    return 'INVALID FORMAT\\n' +\n        'For more information, refer to the following documentation links:\\n' +\n        (\"Number format: \" + DOC_URL + \"/base/intl.html?#supported-format-string.\\n\") +\n        (\"Date format: \" + DOC_URL + \"/base/intl.html?#manipulating-datetime.\\n\") +\n        (\"Message: \" + error);\n};\nvar ajaxErrorHandler = function (args, parent) {\n    var error = DataUtil.getObject('error.error', args);\n    if (isNullOrUndefined(error)) {\n        return '';\n    }\n    var jsonResult = '';\n    try {\n        jsonResult = JSON.parse(error.responseText);\n    }\n    catch (_a) {\n        jsonResult = '';\n    }\n    return 'XMLHTTPREQUEST FAILED\\n' +\n        (\"Url: \" + error.responseURL + \"\\n\") +\n        (\"Status: \" + error.status + \" - \" + error.statusText + \"\\n\") +\n        (\"\" + (jsonResult !== '' ? 'Message: ' + jsonResult : ''));\n};\n","import { isNullOrUndefined, remove, extend } from '@syncfusion/ej2-base';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, ensureLastRow, ensureFirstRow, getEditedDataIndex, resetRowIndex, setRowElements } from '../base/util';\n/**\n * Infinite Scrolling class\n * @hidden\n */\nvar InfiniteScroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid infinite scrolling.\n     * @hidden\n     */\n    function InfiniteScroll(parent, serviceLocator) {\n        this.infiniteCache = {};\n        this.infiniteFrozenCache = {};\n        this.isDownScroll = false;\n        this.isUpScroll = false;\n        this.isScroll = true;\n        this.enableContinuousScroll = false;\n        this.initialRender = true;\n        this.isRemove = false;\n        this.isInitialCollapse = false;\n        this.prevScrollTop = 0;\n        this.actions = ['filtering', 'searching', 'grouping', 'ungrouping', 'reorder', 'sorting'];\n        this.keys = ['downArrow', 'upArrow', 'PageUp', 'PageDown'];\n        this.rowTop = 0;\n        this.isInitialMovableRender = true;\n        this.virtualInfiniteData = {};\n        this.isCancel = false;\n        this.emptyRowData = {};\n        this.isNormaledit = false;\n        this.isInfiniteScroll = false;\n        this.isLastPage = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.isNormaledit = this.parent.editSettings.mode === 'Normal';\n        this.addEventListener();\n        this.rowModelGenerator = this.parent.getFrozenColumns() ? new FreezeRowModelGenerator(this.parent)\n            : new RowModelGenerator(this.parent);\n    }\n    InfiniteScroll.prototype.getModuleName = function () {\n        return 'infiniteScroll';\n    };\n    /**\n     * @hidden\n     */\n    InfiniteScroll.prototype.addEventListener = function () {\n        this.parent.on(events.dataReady, this.onDataReady, this);\n        this.parent.on(events.dataSourceModified, this.dataSourceModified, this);\n        this.parent.on(events.infinitePageQuery, this.infinitePageQuery, this);\n        this.parent.on(events.infiniteScrollHandler, this.infiniteScrollHandler, this);\n        this.parent.on(events.beforeCellFocused, this.infiniteCellFocus, this);\n        this.parent.on(events.appendInfiniteContent, this.appendInfiniteRows, this);\n        this.parent.on(events.removeInfiniteRows, this.removeInfiniteCacheRows, this);\n        this.parent.on(events.resetInfiniteBlocks, this.resetInfiniteBlocks, this);\n        this.parent.on(events.setInfiniteCache, this.setCache, this);\n        this.parent.on(events.initialCollapse, this.ensureIntialCollapse, this);\n        this.parent.on(events.keyPressed, this.infiniteCellFocus, this);\n        this.parent.on(events.infiniteShowHide, this.setDisplayNone, this);\n        this.parent.on(events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent.on(events.getVirtualData, this.getVirtualInfiniteData, this);\n        this.parent.on(events.editReset, this.resetInfiniteEdit, this);\n        this.parent.on(events.virtualScrollEditSuccess, this.infiniteEditSuccess, this);\n        this.parent.on(events.refreshVirtualCache, this.refreshInfiniteCache, this);\n        this.parent.on(events.infiniteEditHandler, this.infiniteEditHandler, this);\n        this.parent.on(events.virtualScrollAddActionBegin, this.infiniteAddActionBegin, this);\n        this.parent.on(events.modelChanged, this.modelChanged, this);\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    };\n    /**\n     * @hidden\n     */\n    InfiniteScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dataReady, this.onDataReady);\n        this.parent.off(events.dataSourceModified, this.dataSourceModified);\n        this.parent.off(events.infinitePageQuery, this.infinitePageQuery);\n        this.parent.off(events.infiniteScrollHandler, this.infiniteScrollHandler);\n        this.parent.off(events.beforeCellFocused, this.infiniteCellFocus);\n        this.parent.off(events.appendInfiniteContent, this.appendInfiniteRows);\n        this.parent.off(events.removeInfiniteRows, this.removeInfiniteCacheRows);\n        this.parent.off(events.resetInfiniteBlocks, this.resetInfiniteBlocks);\n        this.parent.off(events.setInfiniteCache, this.setCache);\n        this.parent.off(events.initialCollapse, this.ensureIntialCollapse);\n        this.parent.off(events.keyPressed, this.infiniteCellFocus);\n        this.parent.off(events.infiniteShowHide, this.setDisplayNone);\n        this.parent.off(events.virtualScrollEditActionBegin, this.editActionBegin);\n        this.parent.off(events.getVirtualData, this.getVirtualInfiniteData);\n        this.parent.off(events.editReset, this.resetInfiniteEdit);\n        this.parent.off(events.virtualScrollEditSuccess, this.infiniteEditSuccess);\n        this.parent.off(events.refreshVirtualCache, this.refreshInfiniteCache);\n        this.parent.off(events.infiniteEditHandler, this.infiniteEditHandler);\n        this.parent.off(events.virtualScrollAddActionBegin, this.infiniteAddActionBegin);\n        this.parent.off(events.modelChanged, this.modelChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.removeEventListener(events.actionComplete, this.actionComplete.bind(this));\n    };\n    InfiniteScroll.prototype.modelChanged = function (args) {\n        if (args.requestType !== 'infiniteScroll' && (args.requestType === 'delete' || this.requestType === 'add')) {\n            var rows = this.parent.getRows();\n            this.firstIndex = parseInt(rows[0].getAttribute('aria-rowindex'), 10);\n            this.firstBlock = Math.ceil((this.firstIndex + 1) / this.parent.pageSettings.pageSize);\n            this.lastIndex = parseInt(rows[rows.length - 1].getAttribute('aria-rowindex'), 10);\n            if (args.requestType === 'delete') {\n                var rowObj = this.parent.getRowsObject();\n                args.startIndex = this.parent.infiniteScrollSettings.enableCache\n                    ? (this.firstBlock - 1) * this.parent.pageSettings.pageSize : rowObj[rowObj.length - 1].index;\n            }\n            else {\n                args.startIndex = this.firstIndex;\n            }\n            if (!this.parent.infiniteScrollSettings.enableCache\n                && this.parent.pageSettings.currentPage === this.maxPage && args.requestType === 'delete') {\n                this.isLastPage = true;\n                this.lastIndex = this.lastIndex - 1;\n            }\n        }\n    };\n    InfiniteScroll.prototype.infiniteAddActionBegin = function (args) {\n        if (this.isNormaledit) {\n            this.isAdd = true;\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                if (!Object.keys(this.emptyRowData).length) {\n                    this.createEmptyRowdata();\n                }\n                if (this.parent.pageSettings.currentPage > 1) {\n                    args.startEdit = false;\n                    this.resetInfiniteBlocks({}, true);\n                    this.makeRequest({ currentPage: 1 });\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.infiniteEditHandler = function (args) {\n        if (!this.parent.infiniteScrollSettings.enableCache && (args.e.requestType === 'delete'\n            || (args.e.requestType === 'save' && this.requestType === 'add'))) {\n            var frozenCols = this.parent.getFrozenColumns();\n            var rowElms = this.parent.getRows();\n            var rows = this.parent.getRowsObject();\n            if (this.ensureRowAvailability(rows, args.result[0])) {\n                this.resetRowIndex(rows, args.e, rowElms, this.requestType === 'add');\n                if (frozenCols) {\n                    var rows_1 = this.parent.getMovableRowsObject();\n                    this.resetRowIndex(rows_1, args.e, this.parent.getMovableDataRows(), this.requestType === 'add');\n                }\n                if (!this.isLastPage) {\n                    this.createRow(rows, args);\n                }\n                else {\n                    this.isLastPage = false;\n                    this.parent.pageSettings.currentPage = this.maxPage;\n                    if (this.parent.selectionModule.index < this.parent.frozenRows) {\n                        remove(rowElms[this.parent.frozenRows - 1]);\n                        this.createRow([rows[this.parent.frozenRows - 1]], args, false, true);\n                        if (frozenCols) {\n                            var movableRows = this.parent.getMovableDataRows();\n                            remove(movableRows[this.parent.frozenRows]);\n                            this.createRow([this.parent.getMovableRowsObject()[this.parent.frozenRows - 1]], args, true, true);\n                        }\n                        setRowElements(this.parent);\n                    }\n                }\n            }\n            this.parent.hideSpinner();\n            this.requestType === 'delete' ? this.parent.notify(events.deleteComplete, args.e)\n                : this.parent.notify(events.saveComplete, args.e);\n        }\n    };\n    InfiniteScroll.prototype.createRow = function (rows, args, isMovable, isFrozenRows) {\n        var row = !isFrozenRows ? this.generateRows(args.result, args.e) : rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tbody = !this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('tbody') : isMovable\n            ? this.parent.getMovableVirtualContent().querySelector('tbody') : this.parent.getFrozenVirtualContent().querySelector('tbody');\n        if (this.parent.frozenRows) {\n            tbody = isFrozenRows && this.requestType !== 'add' || !isFrozenRows && this.requestType === 'add'\n                ? !this.parent.getFrozenColumns() ? this.parent.getHeaderContent().querySelector('tbody')\n                    : isMovable ? this.parent.getMovableVirtualHeader().querySelector('tbody')\n                        : this.parent.getFrozenVirtualHeader().querySelector('tbody') : tbody;\n        }\n        for (var i = row.length - 1; i >= 0; i--) {\n            if (this.requestType === 'delete') {\n                tbody.appendChild(rowRenderer.render(row[i], this.parent.getColumns()));\n            }\n            else {\n                tbody.insertBefore(rowRenderer.render(row[i], this.parent.getColumns()), tbody.firstElementChild);\n            }\n        }\n        if (!isFrozenRows && this.parent.frozenRows\n            && (this.parent.selectionModule.index < this.parent.frozenRows || this.requestType === 'add')) {\n            var rowElems = isMovable ? this.parent.getMovableDataRows() : this.parent.getRows();\n            var index = isMovable && this.requestType === 'add' ? this.parent.frozenRows : this.parent.frozenRows - 1;\n            remove(rowElems[index]);\n            this.createRow([rows[this.parent.frozenRows - 1]], args, isMovable, true);\n        }\n        if (!this.parent.infiniteScrollSettings.enableCache && !isFrozenRows) {\n            if (!this.parent.getFrozenColumns() || isMovable) {\n                setRowElements(this.parent);\n                this.parent.contentModule.visibleRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n            }\n            else {\n                this.parent.contentModule.visibleFrozenRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n                this.createRow(this.parent.getMovableRowsObject(), args, true);\n            }\n        }\n    };\n    InfiniteScroll.prototype.ensureRowAvailability = function (rows, data) {\n        var resume = true;\n        if (this.parent.frozenRows && !this.parent.infiniteScrollSettings.enableCache\n            && this.parent.sortSettings.columns && this.requestType === 'add') {\n            var key = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].data[key] === data[key]) {\n                    resume = false;\n                    break;\n                }\n            }\n        }\n        return resume;\n    };\n    InfiniteScroll.prototype.generateRows = function (data, args) {\n        return this.rowModelGenerator.generateRows(data, args);\n    };\n    InfiniteScroll.prototype.resetRowIndex = function (rows, args, rowElms, isAdd) {\n        var keyField = this.parent.getPrimaryKeyFieldNames()[0];\n        var isRemove = !(rowElms.length % this.parent.pageSettings.pageSize);\n        if (isAdd) {\n            if (isRemove) {\n                remove(rowElms[rows.length - 1]);\n                rowElms.splice(rows.length - 1, 1);\n                rows.splice(rows.length - 1, 1);\n            }\n        }\n        else {\n            rows.filter(function (e, index) {\n                if (e.data[keyField] === args.data[0][keyField]) {\n                    rows.splice(index, 1);\n                    remove(rowElms[index]);\n                    rowElms.splice(index, 1);\n                }\n            });\n        }\n        var startIndex = isAdd ? 1 : 0;\n        resetRowIndex(this.parent, rows, rowElms, startIndex);\n    };\n    InfiniteScroll.prototype.setDisplayNone = function (args) {\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            var frozenCols = this.parent.getFrozenColumns();\n            var keys = frozenCols ? Object.keys(this.infiniteFrozenCache) : Object.keys(this.infiniteCache);\n            for (var i = 1; i <= keys.length; i++) {\n                var cache = frozenCols ? args.isFreeze ? this.infiniteFrozenCache[i][0]\n                    : this.infiniteFrozenCache[i][1] : this.infiniteCache[i];\n                cache.filter(function (e) {\n                    e.cells[args.index].visible = args.visible === '';\n                });\n            }\n            this.resetContentModuleCache(frozenCols ? this.infiniteFrozenCache : this.infiniteCache);\n        }\n    };\n    InfiniteScroll.prototype.refreshInfiniteCache = function (data) {\n        this.getEditedRowObject().data = data;\n    };\n    InfiniteScroll.prototype.getEditedRowObject = function () {\n        var rowObjects = this.parent.getRowsObject();\n        var editedrow;\n        for (var i = 0; i < rowObjects.length; i++) {\n            if (rowObjects[i].index === this.editRowIndex) {\n                editedrow = rowObjects[i];\n            }\n        }\n        return editedrow;\n    };\n    InfiniteScroll.prototype.infiniteEditSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewRecords(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    InfiniteScroll.prototype.updateCurrentViewRecords = function (data) {\n        var index = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(index)) {\n            this.parent.getCurrentViewRecords()[index] = data;\n        }\n    };\n    InfiniteScroll.prototype.actionBegin = function (args) {\n        if (args.requestType === 'add' || args.requestType === 'delete') {\n            this.requestType = args.requestType;\n        }\n    };\n    InfiniteScroll.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' || args.requestType === 'save' || args.requestType === 'cancel') {\n            this.requestType = this.empty;\n            this.isCancel = args.requestType === 'cancel' || args.requestType === 'save';\n            this.isAdd = this.isEdit = false;\n            if (this.isNormaledit) {\n                this.editRowIndex = this.empty;\n                this.virtualInfiniteData = {};\n                this.parent.editModule.previousVirtualData = {};\n            }\n        }\n    };\n    InfiniteScroll.prototype.resetInfiniteEdit = function () {\n        if (this.parent.enableInfiniteScrolling && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && this.isEdit) || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    InfiniteScroll.prototype.getVirtualInfiniteData = function (data) {\n        data.virtualData = this.virtualInfiniteData;\n        data.isAdd = this.isAdd;\n        data.isCancel = this.isCancel;\n    };\n    InfiniteScroll.prototype.editActionBegin = function (e) {\n        this.isEdit = true;\n        this.editRowIndex = e.index;\n        var rowObject = extend({}, this.getEditedRowObject().data);\n        e.data = Object.keys(this.virtualInfiniteData).length ? this.virtualInfiniteData : rowObject;\n    };\n    InfiniteScroll.prototype.dataSourceModified = function () {\n        this.resetInfiniteBlocks({ requestType: this.empty }, true);\n    };\n    InfiniteScroll.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n    };\n    InfiniteScroll.prototype.ensureIntialCollapse = function (isExpand) {\n        this.isInitialCollapse = !isExpand;\n    };\n    InfiniteScroll.prototype.infiniteScrollHandler = function (e) {\n        var _this = this;\n        this.restoreInfiniteEdit();\n        this.restoreInfiniteAdd();\n        var targetEle = e.target;\n        var isInfinite = targetEle.classList.contains('e-content')\n            || targetEle.classList.contains('e-movablecontent');\n        if (isInfinite && this.parent.enableInfiniteScrolling) {\n            var scrollEle = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent()\n                : this.parent.getContent().firstElementChild;\n            this.prevScrollTop = scrollEle.scrollTop;\n            var rows = this.parent.getRows();\n            var index = parseInt(rows[rows.length - 1].getAttribute('aria-rowindex'), 10) + 1;\n            var prevPage = this.parent.pageSettings.currentPage;\n            var args = void 0;\n            var offset = targetEle.scrollHeight - targetEle.scrollTop;\n            var round = Math.round(targetEle.scrollHeight - targetEle.scrollTop);\n            var floor = offset < targetEle.clientHeight ? Math.ceil(offset) : Math.floor(offset);\n            var isBottom = (floor === targetEle.clientHeight || round === targetEle.clientHeight);\n            if (this.isScroll && isBottom && (this.parent.pageSettings.currentPage <= this.maxPage - 1 || this.enableContinuousScroll)) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    this.isUpScroll = false;\n                    this.isDownScroll = true;\n                    setTimeout(function () {\n                        _this.isScroll = true;\n                    }, 600);\n                }\n                var rows_2 = [].slice.call(scrollEle.querySelectorAll('.e-row:not(.e-addedrow)'));\n                var row = rows_2[rows_2.length - 1];\n                var rowIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n                this.parent.pageSettings.currentPage = Math.ceil(rowIndex / this.parent.pageSettings.pageSize) + 1;\n                args = {\n                    requestType: 'infiniteScroll',\n                    currentPage: this.parent.pageSettings.currentPage,\n                    prevPage: prevPage,\n                    startIndex: index,\n                    direction: 'down'\n                };\n                this.makeRequest(args);\n            }\n            if (this.isScroll && this.parent.infiniteScrollSettings.enableCache && targetEle.scrollTop === 0\n                && this.parent.pageSettings.currentPage !== 1) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    this.isDownScroll = false;\n                    this.isUpScroll = true;\n                    setTimeout(function () {\n                        _this.isScroll = true;\n                    }, 600);\n                }\n                var row = [].slice.call(scrollEle.querySelectorAll('.e-row'));\n                var rowIndex = parseInt(row[this.parent.pageSettings.pageSize - 1].getAttribute('aria-rowindex'), 10);\n                var startIndex = parseInt(row[0].getAttribute('aria-rowindex'), 10) - this.parent.pageSettings.pageSize;\n                this.parent.pageSettings.currentPage = Math.ceil(rowIndex / this.parent.pageSettings.pageSize) - 1;\n                if (this.parent.pageSettings.currentPage) {\n                    args = {\n                        requestType: 'infiniteScroll',\n                        currentPage: this.parent.pageSettings.currentPage,\n                        prevPage: prevPage,\n                        startIndex: startIndex,\n                        direction: 'up'\n                    };\n                    this.makeRequest(args);\n                }\n            }\n            if (this.parent.infiniteScrollSettings.enableCache && !this.isScroll && isNullOrUndefined(args)) {\n                if (this.isDownScroll || this.isUpScroll) {\n                    scrollEle.scrollTop = this.top;\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.makeRequest = function (args) {\n        var _this = this;\n        if (this.parent.pageSettings.currentPage !== args.prevPage) {\n            if (this.parent.pageSettings.currentPage <= this.maxPage) {\n                this.isInfiniteScroll = true;\n                if (isNullOrUndefined(this.infiniteCache[args.currentPage])) {\n                    setTimeout(function () {\n                        _this.getVirtualInfiniteEditedData();\n                        _this.parent.notify('model-changed', args);\n                    }, 100);\n                }\n                else {\n                    setTimeout(function () {\n                        _this.getVirtualInfiniteEditedData();\n                        _this.parent.notify(events.refreshInfiniteModeBlocks, args);\n                    }, 100);\n                }\n            }\n            else {\n                this.parent.pageSettings.currentPage = this.maxPage;\n            }\n        }\n    };\n    InfiniteScroll.prototype.infinitePageQuery = function (query) {\n        if (this.initialRender) {\n            this.initialRender = false;\n            this.intialPageQuery(query);\n        }\n        else {\n            if (!this.isInfiniteScroll && (this.requestType === 'delete' || this.requestType === 'add')) {\n                this.editPageQuery(query);\n            }\n            else {\n                query.page(this.parent.pageSettings.currentPage, this.parent.pageSettings.pageSize);\n            }\n        }\n    };\n    InfiniteScroll.prototype.editPageQuery = function (query) {\n        var initialBlocks = this.parent.infiniteScrollSettings.initialBlocks;\n        var isCache = this.parent.infiniteScrollSettings.enableCache;\n        if (isCache) {\n            this.infiniteCache = {};\n            this.infiniteFrozenCache = {};\n            query.skip(this.firstIndex);\n            query.take(initialBlocks * this.parent.pageSettings.pageSize);\n        }\n        else {\n            if (this.parent.editSettings.mode === 'Dialog') {\n                this.parent.clearSelection();\n            }\n            var index = this.requestType === 'delete' ? this.lastIndex : this.firstIndex;\n            query.skip(index);\n            query.take(1);\n        }\n    };\n    InfiniteScroll.prototype.intialPageQuery = function (query) {\n        if (this.parent.infiniteScrollSettings.enableCache\n            && this.parent.infiniteScrollSettings.initialBlocks > this.parent.infiniteScrollSettings.maxBlocks) {\n            this.parent.infiniteScrollSettings.initialBlocks = this.parent.infiniteScrollSettings.maxBlocks;\n        }\n        var pageSize = this.parent.pageSettings.pageSize * this.parent.infiniteScrollSettings.initialBlocks;\n        query.page(1, pageSize);\n    };\n    InfiniteScroll.prototype.infiniteCellFocus = function (e) {\n        if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n            this.pressedKey = e.keyArgs.action;\n            var ele = document.activeElement;\n            var rowIndex = parseInt(ele.parentElement.getAttribute('aria-rowindex'), 10);\n            var scrollEle = this.parent.getContent().firstElementChild;\n            this.rowIndex = e.keyArgs.action === 'downArrow' ? rowIndex + 1 : rowIndex - 1;\n            this.cellIndex = parseInt(ele.getAttribute('aria-colindex'), 10);\n            var row = this.parent.getRowByIndex(rowIndex);\n            var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight());\n            if (!row || ensureLastRow(row, this.parent) || ensureFirstRow(row, this.rowTop)) {\n                var height = row ? row.getBoundingClientRect().height : this.parent.getRowHeight();\n                if (!this.parent.infiniteScrollSettings.enableCache) {\n                    if (e.keyArgs.action === 'downArrow' && (ensureLastRow(row, this.parent) || !row)) {\n                        var nTop = (this.rowIndex - visibleRowCount) * height;\n                        var oTop = scrollEle.scrollTop + this.parent.getRowHeight();\n                        scrollEle.scrollTop = nTop < oTop ? oTop : nTop;\n                    }\n                    if (e.keyArgs.action === 'upArrow' && ensureFirstRow(row, this.rowTop)) {\n                        scrollEle.scrollTop = this.rowIndex * height;\n                    }\n                }\n            }\n            else {\n                this.pressedKey = this.empty;\n            }\n        }\n        else if (e.key === 'PageDown' || e.key === 'PageUp') {\n            this.pressedKey = e.key;\n        }\n    };\n    InfiniteScroll.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.getColumns().filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    InfiniteScroll.prototype.getVirtualInfiniteEditedData = function () {\n        var editForm = this.parent.element.querySelector('.e-editedrow');\n        var addForm = this.parent.element.querySelector('.e-addedrow');\n        var gridForm = this.parent.element.querySelector('.e-gridform');\n        if (this.parent.infiniteScrollSettings.enableCache && (editForm || addForm)) {\n            var rowData = editForm ? extend({}, this.getEditedRowObject().data)\n                : extend({}, this.emptyRowData);\n            this.virtualInfiniteData = this.parent.editModule.getCurrentEditedData(gridForm, rowData);\n            if (this.parent.getFrozenColumns()) {\n                this.virtualInfiniteData = this.parent.editModule\n                    .getCurrentEditedData(this.parent.getMovableVirtualContent().querySelector('.e-gridform'), rowData);\n            }\n        }\n    };\n    InfiniteScroll.prototype.restoreInfiniteEdit = function () {\n        var content = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent()\n            : this.parent.getContent().firstElementChild;\n        var frozenEdit = this.parent.frozenRows ? this.editRowIndex >= this.parent.frozenRows : true;\n        if (this.isNormaledit && this.parent.infiniteScrollSettings.enableCache && frozenEdit) {\n            if (this.parent.editSettings.allowEditing && !isNullOrUndefined(this.editRowIndex)) {\n                var row = this.parent.getRowByIndex(this.editRowIndex);\n                if (Object.keys(this.virtualInfiniteData).length && row && !this.parent.getContent().querySelector('.e-editedrow')) {\n                    var top_1 = row.getBoundingClientRect().top;\n                    if (top_1 < content.offsetHeight && top_1 > this.parent.getRowHeight()) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.restoreInfiniteAdd = function () {\n        var content = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent()\n            : this.parent.getContent().firstElementChild;\n        if (this.parent.getRowByIndex(0) && this.isNormaledit && this.parent.infiniteScrollSettings.enableCache\n            && this.isAdd && !content.querySelector('.e-addedrow')) {\n            var isTop = content.scrollTop < this.parent.getRowHeight();\n            if (isTop) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    InfiniteScroll.prototype.appendInfiniteRows = function (e) {\n        var target = document.activeElement;\n        var frozenCols = this.parent.getFrozenColumns();\n        var scrollEle = frozenCols ? this.parent.getMovableVirtualContent()\n            : this.parent.getContent().firstElementChild;\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll';\n        if ((isInfiniteScroll && !e.args.isFrozen) || !isInfiniteScroll) {\n            if (isInfiniteScroll && e.args.direction === 'up') {\n                e.tbody.insertBefore(e.frag, e.tbody.firstElementChild);\n            }\n            else {\n                e.tbody.appendChild(e.frag);\n            }\n        }\n        if (!frozenCols) {\n            this.parent.contentModule.getTable().appendChild(e.tbody);\n        }\n        else {\n            if (isInfiniteScroll) {\n                if (e.args.isFrozen) {\n                    this.frozenFrag = e.frag;\n                }\n                else {\n                    var tbody = this.parent.getFrozenVirtualContent().querySelector('tbody');\n                    e.args.direction === 'up' ? tbody.insertBefore(this.frozenFrag, tbody.firstElementChild)\n                        : tbody.appendChild(this.frozenFrag);\n                    this.parent.getMovableVirtualContent().querySelector('.e-table').appendChild(e.tbody);\n                }\n            }\n            else {\n                var table = e.args.isFrozen ? this.parent.getFrozenVirtualContent().querySelector('.e-table')\n                    : this.parent.getMovableVirtualContent().querySelector('.e-table');\n                table.appendChild(e.tbody);\n            }\n        }\n        if (!e.args.isFrozen) {\n            this.rowTop = !this.rowTop ? this.parent.getRows()[0].getBoundingClientRect().top : this.rowTop;\n            if (isInfiniteScroll) {\n                if (this.parent.infiniteScrollSettings.enableCache && this.isRemove) {\n                    scrollEle.scrollTop = this.top;\n                    if (frozenCols) {\n                        this.parent.getFrozenVirtualContent().scrollTop = this.top;\n                    }\n                }\n                setRowElements(this.parent);\n                this.selectNewRow(e.tbody, e.args.startIndex);\n                this.pressedKey = undefined;\n            }\n            this.restoreInfiniteAdd();\n        }\n        this.isInfiniteScroll = false;\n    };\n    InfiniteScroll.prototype.setRowElements = function () {\n        if (this.parent.getFrozenColumns()) {\n            this.parent.contentModule.rowElements =\n                [].slice.call(this.parent.element.querySelectorAll('.e-movableheader .e-row, .e-movablecontent .e-row'));\n            this.parent.contentModule.freezeRowElements =\n                [].slice.call(this.parent.element.querySelectorAll('.e-frozenheader .e-row, .e-frozencontent .e-row'));\n        }\n        else {\n            this.parent.contentModule.rowElements =\n                [].slice.call(this.parent.element.querySelectorAll('.e-row:not(.e-addedrow)'));\n        }\n    };\n    InfiniteScroll.prototype.selectNewRow = function (tbody, startIndex) {\n        var _this = this;\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        if (this.keys.some(function (value) { return value === _this.pressedKey; })) {\n            if (this.pressedKey === 'downArrow' || (this.parent.infiniteScrollSettings.enableCache && this.pressedKey === 'upArrow')) {\n                setTimeout(function () {\n                    // tslint:disable-next-line:no-any\n                    var target = row.cells[0];\n                    target.focus({ preventScroll: true });\n                    _this.parent.selectRow(_this.rowIndex);\n                    _this.parent.getContent().firstElementChild.scrollTop += _this.parent.getRowHeight();\n                }, 0);\n            }\n            if (this.pressedKey === 'PageDown') {\n                var row_1 = this.parent.getRowByIndex(startIndex);\n                if (row_1) {\n                    row_1.cells[0].focus();\n                }\n            }\n            if (this.pressedKey === 'PageUp') {\n                tbody.querySelector('.e-row').cells[0].focus();\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeInfiniteCacheRows = function (e) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll';\n        if (!e.args.isFrozen && isInfiniteScroll && this.parent.infiniteScrollSettings.enableCache && this.isRemove) {\n            var rows = [].slice.call(this.parent.getContentTable().querySelectorAll('.e-row'));\n            if (e.args.direction === 'down') {\n                if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n                    var captionRows = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n                    this.removeCaptionRows(captionRows, e.args);\n                }\n                var addRowCount = this.parent.element.querySelector('.e-addedrow') ? 0 : 1;\n                this.removeTopRows(rows, this.parent.pageSettings.pageSize - addRowCount);\n            }\n            if (e.args.direction === 'up') {\n                if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n                    var captionRows = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n                    this.removeCaptionRows(captionRows, e.args);\n                }\n                else {\n                    this.removeBottomRows(rows, rows.length - 1, e.args);\n                }\n            }\n            this.isScroll = false;\n            this.top = this.calculateScrollTop(e.args);\n        }\n    };\n    InfiniteScroll.prototype.calculateScrollTop = function (args) {\n        var top = 0;\n        var scrollCnt = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent()\n            : this.parent.getContent().firstElementChild;\n        if (args.direction === 'down') {\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !this.isInitialCollapse) {\n                top = this.captionRowHeight();\n            }\n            var captionRows = [].slice.call(this.parent.getContent().firstElementChild.querySelectorAll('tr:not(.e-row)'));\n            var captionCount = 0;\n            if (this.isInitialCollapse && !isNullOrUndefined(captionRows)) {\n                captionCount = Math.round((captionRows.length - 1) / this.parent.groupSettings.columns.length);\n            }\n            var value = captionCount ? captionCount\n                : this.parent.pageSettings.pageSize * (this.parent.infiniteScrollSettings.maxBlocks - 1);\n            var currentViewRowCount = 0;\n            var i = 0;\n            while (currentViewRowCount < scrollCnt.clientHeight) {\n                i++;\n                currentViewRowCount = i * this.parent.getRowHeight();\n            }\n            i = i - 1;\n            top += (value - i) * this.parent.getRowHeight();\n        }\n        if (args.direction === 'up') {\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !this.isInitialCollapse) {\n                top = this.infiniteCache[this.parent.pageSettings.currentPage].length * this.parent.getRowHeight();\n            }\n            else if (this.isInitialCollapse) {\n                var groupedData = this.infiniteCache[this.parent.pageSettings.currentPage];\n                var count = 0;\n                for (var i = 0; i < groupedData.length; i++) {\n                    if (groupedData[i].isCaptionRow) {\n                        count++;\n                    }\n                }\n                top += Math.round(count / this.parent.groupSettings.columns.length) * this.parent.getRowHeight();\n            }\n            else {\n                top += (this.parent.pageSettings.pageSize * this.parent.getRowHeight() + getScrollBarWidth());\n            }\n        }\n        return top;\n    };\n    InfiniteScroll.prototype.captionRowHeight = function () {\n        var rows = [].slice.call(this.parent.getContent().querySelectorAll('tr:not(.e-row)'));\n        return rows.length * this.parent.getRowHeight();\n    };\n    InfiniteScroll.prototype.removeTopRows = function (rows, maxIndx) {\n        var frozeCols = this.parent.getFrozenColumns();\n        var movableRows = frozeCols ?\n            [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('.e-row')) : null;\n        for (var i = 0; i <= maxIndx; i++) {\n            if (this.parent.frozenRows && this.parent.pageSettings.currentPage === this.parent.infiniteScrollSettings.maxBlocks + 1\n                && i > (maxIndx - this.parent.frozenRows)) {\n                continue;\n            }\n            remove(rows[i]);\n            if (movableRows) {\n                remove(movableRows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeBottomRows = function (rows, maxIndx, args) {\n        var cnt = 0;\n        var frozeCols = this.parent.getFrozenColumns();\n        var movableRows = frozeCols ?\n            [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('.e-row')) : null;\n        var pageSize = this.parent.pageSettings.pageSize;\n        if (!frozeCols && this.infiniteCache[args.prevPage].length < pageSize) {\n            cnt = this.parent.pageSettings.pageSize - this.infiniteCache[args.prevPage].length;\n        }\n        if (frozeCols && this.infiniteFrozenCache[args.prevPage][1].length < pageSize) {\n            cnt = this.parent.pageSettings.pageSize - this.infiniteFrozenCache[args.prevPage][1].length;\n        }\n        for (var i = maxIndx; cnt < pageSize; i--) {\n            cnt++;\n            remove(rows[i]);\n            if (movableRows) {\n                remove(movableRows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeCaptionRows = function (rows, args) {\n        if (args.direction === 'down') {\n            var lastRow = this.parent.getRows()[this.parent.pageSettings.pageSize];\n            var lastRowIndex = parseInt(lastRow.getAttribute('aria-rowindex'), 10) - 1;\n            var k = 0;\n            for (var i = 0; k < lastRowIndex; i++) {\n                if (!rows[i].classList.contains('e-row')) {\n                    remove(rows[i]);\n                }\n                else {\n                    k = parseInt(rows[i].getAttribute('aria-rowindex'), 10);\n                }\n            }\n        }\n        if (args.direction === 'up') {\n            var rowElements = [].slice.call(this.parent.getContent().querySelectorAll('.e-row'));\n            var lastIndex = parseInt(rowElements[rowElements.length - 1].getAttribute('aria-rowindex'), 10);\n            var page = Math.ceil(lastIndex / this.parent.pageSettings.pageSize);\n            var startIndex = 0;\n            for (var i = this.parent.pageSettings.currentPage + 1; i < page; i++) {\n                startIndex += this.infiniteCache[i].length;\n            }\n            for (var i = startIndex; i < rows.length; i++) {\n                remove(rows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.resetInfiniteBlocks = function (args, isDataModified) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && args.requestType !== 'infiniteScroll';\n        if (!this.initialRender && !isNullOrUndefined(this.parent.infiniteScrollModule) && isInfiniteScroll) {\n            if (this.actions.some(function (value) { return value === args.requestType; }) || isDataModified) {\n                var scrollEle = this.parent.getFrozenColumns() ? this.parent.getMovableVirtualContent()\n                    : this.parent.getContent().firstElementChild;\n                this.initialRender = true;\n                scrollEle.scrollTop = 0;\n                this.parent.pageSettings.currentPage = 1;\n                this.infiniteCache = this.infiniteFrozenCache = {};\n                this.resetContentModuleCache({});\n                this.isRemove = false;\n                this.top = 0;\n                this.isInitialMovableRender = true;\n                this.isInitialCollapse = false;\n                this.parent.contentModule.isRemove = this.isRemove;\n                this.parent.contentModule.isAddRows = this.isRemove;\n                this.parent.contentModule.visibleRows = [];\n                this.parent.contentModule.visibleFrozenRows = [];\n            }\n        }\n    };\n    InfiniteScroll.prototype.setCache = function (e) {\n        if (this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache) {\n            var frozeCols = this.parent.getFrozenColumns();\n            var idx = e.args.isFrozen ? 1 : 0;\n            var isEdit = e.args.requestType !== 'infiniteScroll'\n                && (this.requestType === 'delete' || this.requestType === 'add');\n            var currentPage = this.parent.pageSettings.currentPage;\n            if ((frozeCols && this.isInitialMovableRender) || (!frozeCols && !Object.keys(this.infiniteCache).length) || isEdit) {\n                this.isInitialMovableRender = !e.args.isFrozen;\n                this.setInitialCache(e.modelData, e.args, isEdit);\n            }\n            if (!frozeCols && isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n                this.infiniteCache[this.parent.pageSettings.currentPage] = e.modelData;\n                this.resetContentModuleCache(this.infiniteCache);\n            }\n            if (frozeCols) {\n                if ((idx === 0 && isNullOrUndefined(this.infiniteFrozenCache[currentPage]))\n                    || !this.infiniteFrozenCache[currentPage][idx].length) {\n                    this.createFrozenCache(currentPage);\n                    this.infiniteFrozenCache[currentPage][idx] = e.modelData;\n                    if (idx === 1) {\n                        this.resetContentModuleCache(this.infiniteFrozenCache);\n                    }\n                }\n            }\n            if (e.isInfiniteScroll && !this.isRemove) {\n                this.isRemove = (currentPage - 1) % this.parent.infiniteScrollSettings.maxBlocks === 0;\n                this.parent.contentModule.isRemove = this.isRemove;\n            }\n        }\n    };\n    InfiniteScroll.prototype.setInitialCache = function (data, args, isEdit) {\n        var frozenCols = this.parent.getFrozenColumns();\n        var idx = args.isFrozen ? 1 : 0;\n        var k = !isEdit ? 1 : this.firstBlock;\n        for (var i = 1; i <= this.parent.infiniteScrollSettings.initialBlocks; i++) {\n            var startIndex = (i - 1) * this.parent.pageSettings.pageSize;\n            var endIndex = i * this.parent.pageSettings.pageSize;\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n                this.setInitialGroupCache(data, k, startIndex, endIndex);\n            }\n            else {\n                if (frozenCols) {\n                    this.createFrozenCache(k);\n                    this.infiniteFrozenCache[k][idx] = data.slice(startIndex, endIndex);\n                    this.resetContentModuleCache(this.infiniteFrozenCache);\n                }\n                else {\n                    this.infiniteCache[k] = data.slice(startIndex, endIndex);\n                    this.resetContentModuleCache(this.infiniteCache);\n                }\n            }\n            k++;\n        }\n    };\n    InfiniteScroll.prototype.createFrozenCache = function (index) {\n        if (!this.infiniteFrozenCache[index]) {\n            this.infiniteFrozenCache[index] = [[], []];\n        }\n    };\n    InfiniteScroll.prototype.setInitialGroupCache = function (data, index, sIndex, eIndex) {\n        var pageData = [];\n        var startIndex = 0;\n        for (var i = 1; i <= Object.keys(this.infiniteCache).length; i++) {\n            startIndex += this.infiniteCache[i].length;\n        }\n        var k = sIndex;\n        for (var i = startIndex; i < data.length && k < eIndex; i++) {\n            if (data[i].index < eIndex || data[i].isCaptionRow) {\n                k = data[i].isCaptionRow ? k : data[i].index;\n                pageData.push(data[i]);\n            }\n            if (data[i].index >= eIndex || data[i].index === eIndex - 1) {\n                break;\n            }\n        }\n        this.infiniteCache[index] = pageData;\n        this.resetContentModuleCache(this.infiniteCache);\n    };\n    InfiniteScroll.prototype.resetContentModuleCache = function (data) {\n        this.parent.contentModule\n            .infiniteCache = data;\n    };\n    /**\n     * @hidden\n     */\n    InfiniteScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return InfiniteScroll;\n}());\nexport { InfiniteScroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.groupCache = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete'];\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n        var data = rowsObject[oriIndex];\n        var key = this.getGroupKeysAndFields(oriIndex, rowsObject);\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n            _this.captionRowExpand(args);\n        });\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[captionIndex], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            _this.removeRows(captionIndex, rowIdx);\n        });\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[i]);\n                var capRow = cache[capIdx];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[i_1].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[i], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n            uids.push(this.initialGroupCaptions[page][i].uid);\n        }\n        return uids;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, 'e-content') && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, 'e-row')) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[j]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[i], null, keys[j]);\n                        }\n                        if (cache[i].isDataRow) {\n                            var from = args.fromIndex + cache[i].indent;\n                            var to = args.toIndex + cache[i].indent;\n                            this.moveCells(cache[i].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[idx].indent;\n        this.addClass(this.getNextChilds(idx));\n        rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[i].indent === indent || rows[i].indent < indent) {\n                capUid = rows[i].uid;\n                break;\n            }\n            if (rows[i].isCaptionRow && rows[i].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[i].getAttribute('data-uid') === aggUid) {\n                remove(trs[i]);\n                break;\n            }\n            else {\n                remove(trs[i]);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[index].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[i].indent < indent) {\n                break;\n            }\n            if (rows[i].indent === indent) {\n                childRows.push(rows[i]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[i], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[capIdx].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[i].indent < cache[capIdx].indent) {\n                    break;\n                }\n                if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n                    count = count + cache[i].data.count;\n                }\n            }\n        }\n        var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[i].indent === 0) {\n                break;\n            }\n            if (cache[i].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n                var count = this.captionCounts[page][cache[i].uid];\n                idx = idx + (count ? count : cache[i].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[i].isCaptionRow) {\n                    !indexes.length ? indexes.push(0)\n                        : indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n        var isLastRow = true;\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[i])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n                }\n            }\n        }\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[page]) {\n            this.rowsByUid[page] = {};\n            this.objIdxByUid[page] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[page][row.uid] = row;\n        }\n        this.objIdxByUid[page][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        this.rowsByUid[page] = {};\n        this.objIdxByUid[page] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[j], k);\n                    newRowsObject.push(newRows[j]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[index];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n                agg.push(cache[i]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[index];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].parentUid === uid) {\n                if (isNullOrUndefined(cache[i].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[i]);\n                if (deep && cache[i].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[i].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[i].indent === 0) {\n                rows.push(cache[i]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n                break;\n            }\n            if (rowsObject[k].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[k]);\n                if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[i].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[i].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[i]);\n                if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().querySelectorAll('.e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().querySelectorAll('.e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().querySelectorAll('.e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[i].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[i];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = this.getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[idx]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[index];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = this.getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[idx]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[index]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[page][uid2] - idx;\n        if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        tr.classList.length > 1 ? tr.classList.remove('e-lazyload-middle-up') : tr.removeAttribute('class');\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = this.getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[i].rowIndex;\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[i];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var page = this.parent.pageSettings.currentPage;\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n                if (trs[i].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n    };\n    GroupLazyLoadRenderer.prototype.getGroupKeysAndFields = function (index, rowsObject) {\n        var fields = [];\n        var keys = [];\n        for (var i = index; i >= 0; i--) {\n            if (rowsObject[i].isCaptionRow && fields.indexOf(rowsObject[i].data.field) === -1\n                && (rowsObject[i].indent < rowsObject[index].indent || i === index)) {\n                fields.push(rowsObject[i].data.field);\n                keys.push(rowsObject[i].data.key);\n                if (rowsObject[i].indent === 0) {\n                    break;\n                }\n            }\n        }\n        return { fields: fields, keys: keys };\n    };\n    GroupLazyLoadRenderer.prototype.generateExpandPredicates = function (fields, values) {\n        var filterCols = [];\n        for (var i = 0; i < fields.length; i++) {\n            var column = this.parent.getColumnByField(fields[i]);\n            var value = values[i] === 'null' ? null : values[i];\n            var pred = {\n                field: fields[i], predicate: 'or', uid: column.uid, operator: 'equal', type: column.type,\n                matchCase: this.allowCaseSensitive, ignoreAccent: this.ignoreAccent\n            };\n            if (value === '' || isNullOrUndefined(value)) {\n                filterCols = filterCols.concat(CheckBoxFilterBase.generateNullValuePredicates(pred));\n            }\n            else {\n                filterCols.push(extend({}, { value: value }, pred));\n            }\n        }\n        return CheckBoxFilterBase.getPredicate(filterCols);\n    };\n    GroupLazyLoadRenderer.prototype.getPredicates = function (pred) {\n        var predicateList = [];\n        for (var _i = 0, _a = Object.keys(pred); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            predicateList.push(pred[prop]);\n        }\n        return predicateList;\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = this.generateExpandPredicates(args.fields, args.keys);\n        var predicateList = this.getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.parent.showSpinner();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                _this.parent.hideSpinner();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().querySelectorAll('.e-row'));\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().querySelectorAll('.e-row'));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (tr[i].getAttribute('aria-rowindex') === index.toString()) {\n                row = tr[i];\n                break;\n            }\n        }\n        return row;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[i];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        var trs = Object.keys(tr);\n        if (!this.parent.groupSettings.columns.length) {\n            for (var i = 0; i < trs.length; i++) {\n                var td = tr[trs[i]].querySelectorAll('td.e-rowcell')[idx];\n                if (tr[trs[i]].querySelectorAll('td.e-rowcell').length && td) {\n                    setStyleAttribute(tr[trs[i]].querySelectorAll('td.e-rowcell')[idx], { 'display': displayVal });\n                    if (tr[trs[i]].querySelectorAll('td.e-rowcell')[idx].classList.contains('e-hide')) {\n                        removeClass([tr[trs[i]].querySelectorAll('td.e-rowcell')[idx]], ['e-hide']);\n                    }\n                    rows[trs[i]].cells[idx].visible = displayVal === '' ? true : false;\n                }\n            }\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[j]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n                    var row = uids[idxs[i]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[j]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[index][row.uid] = data;\n        this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector('tbody');\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[idx], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n","import * as events from '../base/constant';\nimport { GroupLazyLoadRenderer } from '../renderer/group-lazy-load-renderer';\nimport { RenderType } from '../base/enum';\n/**\n * Group lazy load class\n */\nvar LazyLoadGroup = /** @class */ (function () {\n    /**\n     * Constructor for Grid group lazy load module\n     * @hidden\n     */\n    function LazyLoadGroup(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    LazyLoadGroup.prototype.getModuleName = function () {\n        return 'lazyLoadGroup';\n    };\n    /**\n     * @hidden\n     */\n    LazyLoadGroup.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    /**\n     * @hidden\n     */\n    LazyLoadGroup.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    LazyLoadGroup.prototype.instantiateRenderer = function () {\n        if (this.parent.height === 'auto') {\n            this.parent.height = this.parent.pageSettings.pageSize * this.parent.getRowHeight();\n        }\n        var renderer = this.serviceLocator.getService('rendererFactory');\n        if (this.parent.groupSettings.enableLazyLoading) {\n            renderer.addRenderer(RenderType.Content, new GroupLazyLoadRenderer(this.parent, this.serviceLocator));\n        }\n    };\n    /**\n     * @hidden\n     */\n    LazyLoadGroup.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return LazyLoadGroup;\n}());\nexport { LazyLoadGroup };\n","import { extend, isBlazor } from '@syncfusion/ej2-base';\nimport { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `AutoCompleteEditCell` is used to handle autocomplete cell type editing.\n * @hidden\n */\nvar AutoCompleteEditCell = /** @class */ (function () {\n    function AutoCompleteEditCell(parent) {\n        //constructor\n        this.parentObj = parent;\n    }\n    AutoCompleteEditCell.prototype.create = function (args) {\n        //create \n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parentObj.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parentObj.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    AutoCompleteEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parentObj.editSettings.mode !== 'Dialog';\n        this.object = new AutoComplete(extend({\n            dataSource: this.parentObj.dataSource instanceof DataManager ?\n                this.parentObj.dataSource : new DataManager(this.parentObj.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            // enableRtl: this.parentObject.enableRtl,\n            actionComplete: this.selectedValues.bind(this),\n            placeholder: isInlineEdit ? '' : args.column.headerText,\n            floatLabelType: isInlineEdit ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        if (isBlazor()) {\n            this.object.locale = this.parentObj.locale;\n        }\n        this.object.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    AutoCompleteEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    AutoCompleteEditCell.prototype.selectedValues = function (valObj) {\n        valObj.result = DataUtil.distinct(valObj.result, this.object.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = valObj.result;\n        }\n    };\n    AutoCompleteEditCell.prototype.destroy = function () {\n        if (this.object) {\n            this.object.destroy();\n        }\n    };\n    return AutoCompleteEditCell;\n}());\nexport { AutoCompleteEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ComboBoxEditCell` is used to handle ComboBoxEdit cell type editing.\n * @hidden\n */\nvar ComboboxEditCell = /** @class */ (function () {\n    function ComboboxEditCell(parentObject) {\n        //constructor\n        this.parent = parentObject;\n    }\n    ComboboxEditCell.prototype.create = function (args) {\n        //create\n        var fieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + fieldName,\n                name: fieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    ComboboxEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineMode = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new ComboBox(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.finalValue.bind(this),\n            placeholder: isInlineMode ? '' : args.column.headerText,\n            floatLabelType: isInlineMode ? 'Never' : 'Always',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ComboboxEditCell.prototype.read = function (inputEle) {\n        return inputEle.ej2_instances[0].value;\n    };\n    ComboboxEditCell.prototype.finalValue = function (val) {\n        val.result = DataUtil.distinct(val.result, this.obj.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = val.result;\n        }\n    };\n    ComboboxEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ComboboxEditCell;\n}());\nexport { ComboboxEditCell };\n","import { extend, getValue } from '@syncfusion/ej2-base';\nimport { MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { getComplexFieldID, } from '../base/util';\n/**\n * `MultiSelectEditCell` is used to handle multiselect dropdown cell type editing.\n * @hidden\n */\nvar MultiSelectEditCell = /** @class */ (function () {\n    function MultiSelectEditCell(parentObj) {\n        //constructor\n        this.parent = parentObj;\n    }\n    MultiSelectEditCell.prototype.create = function (args) {\n        //create\n        var colName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + colName,\n                name: colName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MultiSelectEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MultiSelectEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MultiSelect(extend({\n            fields: { text: args.column.field, value: args.column.field },\n            value: getValue(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    MultiSelectEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MultiSelectEditCell;\n}());\nexport { MultiSelectEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { TimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `TimePickerEditCell` is used to handle Timepicker cell type editing.\n * @hidden\n */\nvar TimePickerEditCell = /** @class */ (function () {\n    function TimePickerEditCell(grid) {\n        this.parent = grid;\n    }\n    TimePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexField,\n                name: complexField, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    TimePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    TimePickerEditCell.prototype.write = function (args) {\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        var rowDataValue = getObject(args.column.field, args.rowData);\n        rowDataValue = rowDataValue ? new Date(rowDataValue) : null;\n        this.obj = new TimePicker(extend({\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            value: rowDataValue,\n            placeholder: isInlineEdit ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    TimePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return TimePickerEditCell;\n}());\nexport { TimePickerEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Switch } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ToggleEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar ToggleEditCell = /** @class */ (function () {\n    function ToggleEditCell(parentObject) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parentObject;\n    }\n    ToggleEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexField,\n                name: complexField\n            }\n        });\n    };\n    ToggleEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    ToggleEditCell.prototype.write = function (args) {\n        var chkBoxElement;\n        var checkState;\n        // let isAddRow : boolean =  args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            chkBoxElement = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            checkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(chkBoxElement)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                checkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), checkState].concat(this.activeClasses));\n        }\n        this.obj = new Switch(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: checkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.switchModeChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ToggleEditCell.prototype.switchModeChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var addClass = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                addClass = true;\n                this.editRow.setAttribute('aria-selected', addClass.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), addClass].concat(this.activeClasses));\n        }\n    };\n    ToggleEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ToggleEditCell;\n}());\nexport { ToggleEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `MaskedTextBoxCellEdit` is used to handle masked input cell type editing.\n * @hidden\n */\nvar MaskedTextBoxCellEdit = /** @class */ (function () {\n    function MaskedTextBoxCellEdit(parentInstance) {\n        //constructor\n        this.parent = parentInstance;\n    }\n    MaskedTextBoxCellEdit.prototype.create = function (args) {\n        //create\n        var columnField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + columnField,\n                name: columnField, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MaskedTextBoxCellEdit.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MaskedTextBox(extend({\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            mask: '000-000-0000',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    MaskedTextBoxCellEdit.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MaskedTextBoxCellEdit.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MaskedTextBoxCellEdit;\n}());\nexport { MaskedTextBoxCellEdit };\n"],"names":["setStateAndProperties","target","attribute","value","remove","removeAttribute","setAttribute","getCloneProperties","doesImplementInterface","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","DataUtil","getObject","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","isExportColumns","exportProperties","columns","length","updateColumnTypeForExportColumns","gObj","exportColumns","gridColumns","i","j","type","updatecloneRow","grid","nRows","actualRows","vRows","isDataRow","push","isExpand","isCaptionRow","getCollapsedRowsCount","vcRows","val","count","gSummary","gLen","groupSettings","dataRowCnt","agrCnt","indent","len","gLevel","GroupGuid","childLevels","recursive","row","length_1","nLevel","iterateArrayOrObject","collection","predicate","result","pred","iterateExtend","array","obj","baseExtend","getActualProperties","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","values","Object","keys","indexOf","setColumnIndex","columnModel","ind","index","prepareColumns","autoWidth","c","Column","toLowerCase","allowReordering","headerText","foreignKeyValue","foreignKeyField","getValue","window","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","popup","offsetWidth","x","getPosition","right","getPopupLeftPosition","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","context","temp","customAggregate","Array","aggregates","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","isComplexField","split","getComplexFieldID","replace","setComplexFieldID","isEditable","col","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","select","editSettings","mode","selectAll","showConfirmDialog","wrap","action","add","setFormatter","serviceLocator","isServerRendered","args","fmtr","getService","skeleton","format","isBlazor","getFormatFunction","setParser","getParserFunction","addRemoveActiveClasses","cells","_i","arguments","distinctStringValues","res","toString","getFilterMenuPostion","dialogObj","elementVisible","newpos","dlgWidth","enableRtl","calculatePosition","leftPos","calculateRelativeBasedPosition","getZIndexCalcualtion","zIndex","toogleCheckbox","span","input","previousSibling","checked","setChecked","createCboxWithWrap","div","removeAddCboxClasses","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Predicate","Date","setSeconds","getSeconds","setHours","predicateSt","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","isRowDragable","mEle","cloneNode","childElementCount","isGroupAdaptive","enableVirtualization","isVirtualAdaptive","object","splits","getCustomDateFormat","colType","intl","Internationalization","getDatePattern","getExpandedState","hierarchyPrintMode","rows_1","getRowsObject","isDetailRow","allowPaging","printMode","pageSettings","currentPage","pageSize","gridModel","getPrintGridModel","childGrid","printGridModel","_a","Print","printGridProp","expandedRows","extendObjWithFn","deep","obj1","getPrototypeOf","concat","getPrototypesOfObj","i_1","source","cpy","cln","isObject","isArray","measureColumnDepth","max","depth","checkDepth","indices","refreshFilteredColsUid","filteredCols","getForeignKeyColumns","getColumnByField","getTransformValues","replacedTv","defaultView","getComputedStyle","getPropertyValue","parseFloat","applyBiggerTheme","rootElement","alignFrozenEditForm","mTD","fTD","mHeight","closest","fHeight","ensureLastRow","gridObj","cntOffset","getContent","firstElementChild","ensureFirstRow","rowTop","isRowEnteredInGrid","startIndex","scrollTop","getEditedDataIndex","dataIndex","keyField","getPrimaryKeyFieldNames","getCurrentViewRecords","filter","eventPromise","state","getStateEventArgument","def","Deferred","resolve","deffered","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","ispercentageWidth","getVisibleColumns","percentageCol","undefinedWidthCol","isUndefined","Browser","info","name","showGroupedColumn","resetRowIndex","rows","rowElms","isAltRow","enableAltRow","renderModule","emptyRow","compareChanges","changes","newArray","dataToBeUpdated","reduce","r","o","assign","map","k","setRowElements","getFrozenColumns","contentModule","rowElements","freezeRowElements","summaryIterator","callback","dateanddatetimerender","rtl","isInline","rowData","floatLabelType","placeholder","enabled","requestType","ValueFormatter","cultureName","this","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","setCulture","__decorate","decorators","desc","d","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","options","_this","disableHtmlEncode","allowSorting","allowResizing","allowFiltering","allowGrouping","showColumnMenu","enableGroupByFormat","showInColumnChooser","edit","allowSearching","autoFit","sortDirection","getEditTemplate","editTemplateFn","getFilterTemplate","filterTemplateFn","merge","editType","valueFormatter","toJSON","skip","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","editTemplate","filterTemplate","isForeignColumn","params","fields","text","sortComparer","a_1","xObj","yObj","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","isReact","clearTemplate","rowsObj","pKeyField","setCellValue","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","CommandColumnModel","Property","rowDataBound","queryCellInfo","headerCellInfo","actionBegin","actionComplete","actionFailure","dataBound","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStartHelper","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","batchAdd","batchCancel","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","recordDoubleClick","beforeDataBound","beforeOpenColumnChooser","resizeStop","checkBoxChange","beforeAutoFill","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","filterSearchBegin","exportGroupCaption","lazyLoadGroupExpand","lazyLoadGroupCollapse","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","pageComplete","sortComplete","filterComplete","searchComplete","reorderComplete","groupComplete","ungroupComplete","groupAggregates","refreshFooterRenderer","refreshAggregateCell","refreshAggregates","rowSelectionComplete","cellSelectionComplete","beforeCellFocused","cellFocused","keyPressed","click","destroy","columnVisibilityChanged","scroll","columnWidthChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshComplete","refreshVirtualBlock","dblclick","toolbarRefresh","bulkSave","autoCol","tooltipDestroy","updateData","saveComplete","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","excelHeaderQueryCellInfo","exportDetailDataBound","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","pdfHeaderQueryCellInfo","contextMenuClick","freezeRender","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","initForeignKeyColumn","getForeignKeyData","generateQuery","showEmptyGrid","columnDataStateChange","dataStateChange","dataSourceChanged","rtlUpdated","beforeFragAppend","frozenHeight","textWrapRefresh","recordAdded","cancelBegin","editNextValCell","hierarchyPrint","expandChildGrid","printGridInit","exportRowDataBound","exportDataBound","rowPositionChanged","columnChooserOpened","batchForm","beforeBatchCancel","batchEditFormRendered","partialRefresh","beforeCustomFilterOpen","selectVirtualRow","columnsPrepared","cBoxFltrBegin","cBoxFltrComplete","fltrPrevent","beforeFltrcMenuOpen","valCustomPlacement","filterCboxValue","componentRendered","restoreFocus","detailStateChange","detailIndentCellInfo","virtaulCellFocus","virtualScrollEditActionBegin","virtualScrollEditSuccess","virtualScrollEditCancel","virtualScrollEdit","refreshVirtualCache","editReset","virtualScrollAddActionBegin","getVirtualData","refreshInfiniteModeBlocks","resetInfiniteBlocks","infiniteScrollHandler","infinitePageQuery","infiniteShowHide","appendInfiniteContent","removeInfiniteRows","setInfiniteCache","infiniteEditHandler","initialCollapse","closeFilterDialog","columnChooserCancelBtnClick","getFilterBarOperator","resetColumns","pdfAggregateQueryCellInfo","excelAggregateQueryCellInfo","setGroupCache","lazyLoadScrollHandler","groupCollapse","beforeCheckboxRenderer","refreshHandlers","beforeRefreshOnDataChange","immutableBatchCancel","CellType","RenderType","ToolbarItem","Data","dataState","isPending","resolver","group","foreignKeyDataState","initDataManager","isDestroyed","getModuleName","on","events.rowsAdded","addRows","events.rowPositionChanged","reorderRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","events.autoCol","refreshFilteredCols","events.columnsPrepared","dataManager","splice","toIndex","fromIndex","isQueryInvokedFromData","skipPage","getQuery","clone","columnQueryMode","getColumns","selectQueryFields","filterQuery","searchQuery","aggregateQuery","sortQuery","virtualGroupPageQuery","pageQuery","groupQuery","isForeign","cols","types","aggregate","queries","enableInfiniteScrolling","pageCount","infiniteScrollModule","notify","events.infinitePageQuery","page","enableLazyLoading","lazyLoad","log","moduleName","columnName","isGrpFmt","formatGroupColumn","bind","sortSettings","sortGrp","fn","isRemote","sortByForeignKey","sortBy","fcolumn","sSettings","searchSettings","getSearchColumnFieldNames","predicateList","needForeignKeySearch","fGeneratePredicate","ignoreCase","ignoreAccent","predList","search","skipFoerign","actualFilter","foreignColumn","filterSettings","foreignCols","defaultFltrCols","_b","columns_1","gridColumn","grabColumnByFieldFromAllCols","excelPredicate","CheckBoxFilterBase","getPredicate","_c","_d","prop","_e","foreignCols_1","column_1","grabColumnByUidFromAllCols","_f","_g","events.showEmptyGrid","fPredicate","events.generateQuery","predicates","getKey","promise","crud","fromTable","addedRecords","deletedRecords","changedRecords","saveChanges","requiresCount","insert","then","catch","events.recordAdded","executeQuery","ready","deferred_1","reject","date","getHours","getMinutes","getMilliseconds","update","previousData","events.crudAction","original","deff","endEdit","setState","trigger","events.dataSourceChanged","offline","records","off","getState","getForeignKeyDataState","setForeignKeyDataState","pvtData","dataArgs","isDataChanged","editArgs_1","cancelEdit","events.dataStateChange","colFieldNames","columns_2","Row","cell","setRowValue","setRowData","makechanges","getDataModule","Cell","isSpanned","isRowSpanned","CellMergeRender","render","cellArgs","td","spannedCell","cellRenderer","getCellRenderer","cellType","colSpan","cellSpan","rowSpan","targetCell_1","colSpanLen","colSpanRange","rowSpanRange","spanText","aria-colSpan","rowspan","aria-rowspan","Number","enableColumnVirtualization","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","item","RowRenderer","isSpan","attrs","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","tr","cells_1","isEdit","rowArgs","attrCopy","chekBoxEnable","isSelected","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","_loop_1","DetailExpand","this_1","isPrinting","Filter","CommandColumn","requestTypeAction","prevRowCell","detailTemplate","cssClass","lazyLoadCssClass","frozenColumns","scrollHeight","footerTemplate","summarycell","lastSummaryCell","attr","classes","class","RowModelGenerator","generateRows","getInfiniteIndex","generateRow","ensureColumns","events.detailIndentCellInfo","generateCell","RowDragIcon","pid","tIndex","parentUid","getRowUid","parentGid","selectionModule","checkBoxState","selectedRowIndexes","refreshForeignKeyRow","generateCells","foreignKeyColumns","dummies","tmp","rowId","oIndex","opt","isDataCell","isTemplate","rowID","refreshRows","__extends","extendStatics","b","setPrototypeOf","__proto__","p","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","start","end","apply","getIndentCount","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","DetailFooterIntent","sColumn","scolumn","e-mappinguid","dummy","summaryRows","single","setTemplate","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","isInfiniteScroll","getGroupedRecords","isCollapseStateEnabled","ensureRowVisibility","parentid","childId","isRenderCaption","prevKey","items","generateDataRows","captionRow","generateCaptionRow","rowCnt","aggregatesCount","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","parentID","childID","childGid","fkValue","unshift","cRow","childRow","ContentRender","freezeRows","movableRows","currentInfo","prevCurrentView","isLoaded","viewColIndexes","drop","events.columnDrop","droppedElement","infiniteCache","isRemove","visibleRows","visibleFrozenRows","isAddRows","isInfiniteFreeze","useGroupCache","mutableData","rafCallback","arg","mContentRows","getMovableVirtualContent","fContentRows","getFrozenVirtualContent","mHdr","getMovableVirtualHeader","fHdr","getFrozenVirtualHeader","ariaService","setBusy","getPanel","isFrozen","events.contentReady","events.dataBound","allowTextWrap","events.freezeRender","case","cancel","events.actionComplete","hideSpinner","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","events.refreshInfiniteModeBlocks","refreshContentRows","events.beforeCellFocused","droppableDestroy","byKey","keyArgs","pressedKey","renderPanel","setOptions","busy","setPanel","innerDiv","renderTable","contentDiv","virtualTable","virtualTrack","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","frozenRows","getHeaderContent","cellspacing","setColGroup","getColGroup","splitRows","idx","currentViewData","currentMovableRows","frag","createDocumentFragment","initialPageRecords","hdrTbody","trElement","hdrfrag","fCont","mCont","cont","modelData","prevInfo","virtualInfo","sentinelInfo","axis","mRow","sRow","overflowY","borderRightWidth","isPersistSelection","selectRow","removeClassByUid","getRows","getAttribute","addClassByUid","getRowObjectFromUID","getRowElementByUID","renderMovableContent","scrollLeft","columnIndexes","setColumnIndexesInView","checkCache","events.setInfiniteCache","registeredTemplate","templatetoclear","rootNodes","parentNode","destroyTemplate","renderTemplates","tbody","blockLoad","offsets","offsets_1","vGroupOffsets","bSize","m","blockIndexes","contentPanel","rowObject","isVFFrozenOnly","bIndex","mhdrData","vgenerator","virtualFrozenHdrRefresh","setRowsInLazyGroup","setInfiniteVisibleRows","rowTemplateID","isHeader","getRowTemplate","tagName","lastElementChild","isTR","nodeName","events.rowDataBound","isVFreorder","ensureFrozenHeaderRender","events.expandChildGrid","colcount","getHeaderTable","parentTable","firstChild","isJsComponent","events.beforeFragAppend","isVFTable","updateBlazorTemplate","appendContent","events.removeInfiniteRows","events.appendInfiniteContent","maintainRows","events.setGroupCache","infiniteScrollSettings","enableCache","frozenCols","getGroupCache","initialGroupRows","getCurrentBlockInfiniteRecords","isFreeze","parseInt","last","getReorderedVFRows","getReorderedFrozenRows","fhdrData","getInfiniteRows","getInfiniteMovableRows","infiniteCacheRows","panel","contentTable","infiniteRows","getMovableRows","getRowElements","getMovableRowElements","colgroup","colGroup","fRows","mRows","rowLen","cellLen","testRow","needFullRefresh","getDataRows","infiniteData","infiniteRowVisibility","contentrows","clen","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","displayVal","childNodes","infiniteFreezeData","mTable","getMovableDataRows","infiniteMovableData","setDisplayNone","invokedFromMedia","hideAtMedia","updateMediaColumns","events.partialRefresh","trs","events.infiniteShowHide","isXaxis","replaceChild","droppable","Droppable","accept","canSkip","renderEmpty","setSelection","set","clearAll","getRowByIndex","getInfiniteRowIndex","firstRowIndex","getVirtualRowIndex","getMovableRowByIndex","module","enable","setRowObjects","immutableModeRendering","oldKeys","newKeys","newRowObjs","oldIndexes","oldRowObjs","batchChangeKeys","getBatchEditedRecords","newIndexes","hasBatch","oldRowElements","prevLen","currentLen","oldIndex","refreshImmutableContent","isEqual","objectEqualityChecker","old","next","primaryKey","getBatchChanges","events.immutableBatchCancel","newRowPosition","isDirty","updateCellIndex","rowEle","HeaderRender","frzIdx","notfrzIdx","isFirstCol","isReplaceDragEle","draggable","currentStateTarget","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","getColumnByUid","lockColumn","colIndex","getColumnIndexByField","lineHeight","dragStart","events.columnDragStart","event","bindEvents","dragElement","drag","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","widthService","events.columnPositionChanged","colPosRefresh","isRendered","toggleStackClass","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","skipDom","createTable","tableEle","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","Header","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getHeaderCells","shift","len_2","HeaderIndent","DetailHeader","RowDragHIcon","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isLastCol","isMovable","lastCol","getCellCnt","frzObj","refreshFrozenHdr","isPartial","isComp","cnt","stackedLockColsCount","getStackedLockColsCount","checkFrozenStackHeader","StackedHeader","getColSpan","isFirstCol_1","isLaststackedCol","inViewIndexes","isTrue","lockColsCount","frozenCnt","frzCol","rowIndex","normalizedfrzCols","mTblColGrp","mTbl","refreshUI","freezeReorder","setFrozenTable","getVirtualFreezeHeader","insertBefore","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","showDropArea","Draggable","dragTarget","distance","abort","CellRenderer","locator","localizer","formatter","tabindex","rowChkBox","getGui","isNaN","evaluate","fData","isReactCompiler","dummyData","templateID","str","rNumber","invokeFormatter","refreshCell","refreshTD","cellIndex","parentRow","newTD","cloneAttributes","elements_1","innerHtml","displayAsCheckBox","localeStr","getConstant","fromFormatter","appendHtml","persistSelection","checkWrap","createCheckBox","label","setAttributes","property","buildAttributeFromCell","clipMode","isCheckBoxType","AriaService","props","config","setExpand","expand","setSort","sort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","selected","haspopup","rowcount","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","hValueAccer","ariaAttr","innerDIV","headerValueAccessor","checkAllWrap","matchFlColumns","extendPrepareHeader","headerTempID","headerTextAlign","alignment","matchFilteredColumns","handler","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","tempID","isVue","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","RowDragDropRenderer","nodeElement","RowDragDropHeaderRenderer","Render","emptyGrid","counter","l10n","renderer","addEventListener","headerRenderer","getRenderer","contentRenderer","Content","isLayoutRendered","scrollModule","setWidth","setHeight","setPadding","refreshDataManager","resetTemplates","tempPreventUpdate","events.actionBegin","commandDelIndex","getSelectedRecords","tempSelectedRecord","events.cancelBegin","dataLength","totalRecordsCount","prevPageMoving","pagerModule","pagerObj","showSpinner","allowServerDataBinding","serverDataBind","detailTemplateID","blazorTemplates","resetBlazorTemplate","toolbarTemplate","events.resetInfiniteBlocks","isFActon","isNeedForeignAction","getFData","deffered_1","events.getForeignKeyData","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","events.actionFailure","query_1","dmSuccess","dmFailure","renderEmptyRow","isTrigger","spanCount","colspan","events.onEmpty","dynamicColumnChange","updateColumnType","record","validationRules","isColTypeDef","isServerDateMap","printModule","isPrintGrid","actionArgs","isInfiniteDelete","events.beforeDataBound","isInfiniteEnd","events.editReset","events.tooltipDestroy","fieldName","filteredColumns","events.groupComplete","dataBind","updatesOnInitialRender","isInitialLoad","events.dataReady","events.infiniteEditHandler","agg","enableImmutableMode","alert","events.toolbarRefresh","setRowCount","error","dataRowCount","buildColumns","isAutoGen","iterateComplexColumns","complexCols","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","events.refreshComplete","events.bulkSave","Promise","group0","groupN","addWhere","groups","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","uGroup","itemGroup","uGroupItem","l","data_1","CellRendererFactory","cellRenderMap","getEnumValue","ServiceLocator","services","register","RendererFactory","rendererMap","rName","ColumnWidthService","totalColumnsWidth","setColumnWidth","getTableWidth","setMinwidthBycalculation","tWidth","difference","tmWidth","collection_1","minWidth","isWidthUndefined","setUndefinedColumnWidth","cWidth","getWidth","tgridWidth","setWidthToTable","clear","toFixed","headerCol","header","content","getContentTable","fWidth","formatUnit","contentCol","editTableCol","getSiblingsHeight","getHeightFromDirection","sibling","isWidUndefCount","maxWidth","calcMovableOrFreezeColWidth","tableType","setWidthToFrozenTable","freezeWidth","isAutoResize","setWidthToMovableTable","movableWidth","isColUndefined","isWidthAuto","setWidthToFrozenEditTable","setWidthToMovableEditTable","resizeSettings","FocusStrategy","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","refMatrix","refreshMatrix","actions","rowModelGen","focusCheck","onFocus","isDevice","setActive","enableHeaderFocus","editModule","matrix","generate","get","validator","focus","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","force","isContent","beforeArgs","byClick","clickArgs","event.beforeCellFocused","clearOutline","onKeyPress","skipOn","activeKey","bValue","outline","swapInfo","jump","toHeader","toFrozen","getNextCurrent","active","setActiveByKey","preventDefault","clearIndicator","th","keyCode","activeElement","filterCell","lastIndexOf","focusVirtualElement","virtualData","isAdd","isCancel","event.getVirtualData","isKeyFocus","selectedRowIndex","empty","preventScroll","getFocusedElement","fContent","fHeader","setFocusedElement","setTimeout","event.virtaulCellFocus","addFocus","addOutline","focusHeader","resetFocus","focusContent","isFocused","event.cellFocused","isJump","container","getInfo","focusedColumnUid","getColumnByIndex","FixedContentFocus","ContentFocus","FixedHeaderFocus","HeaderFocus","cFocus","updateRow","isRowTemplate","frozenColumnsCount","newMovableRows","getMovableRowsObject","newFrozenRows","handlerInstance","index_1","focusElement","cellPosition","gridPosition","min","innerWidth","documentElement","bottom","innerHeight","clientHeight","EventHandler","passiveHandler","event.keyPressed","event.click","event.contentReady","event.partialRefresh","event.headerRefreshed","evts","filterfocus","actionsG","restoreFocusWithAction","event.batchAdd","event.batchCancel","event.batchDelete","event.detailDataBound","event.onEmpty","internalCellFocus","removeEventListener","getPrevIndexes","forgetPrevious","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","navigator","emptyTable","inValid","vector","moveTo","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","editNextRow","allowNextRowEdit","isLastCellPrimaryKey","visibleIndex","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","child","frozenSwap","enterFrozen","isHeaderFocus","previous","optionals","defaultLen","rIndex","cIndex","isData","isSelectable","isCellWidth","isLastCell","lastRow","headerSwap","fMatrix","focusModule","current1","current2","hMatrix","current3","SearchBox","searchBox","searchFocus","searchBlur","wireEvent","unWireEvent","PageSettings","ColumnChooserSettings","__assign","t","s","n","Selection","selectedRowCellIndexes","selectedRecords","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","clearRowCheck","selectRowCheck","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","isCancelDeSelect","isPreventCellSelect","disableUI","isPersisted","cmdKeyPressed","cellselected","isMultiSelection","isAddRowsToSelection","initialRowSelection","autoFillRLselection","factory","wireEvents","initializeSelection","onActionBegin","fDataUpdate","rowObj","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","clearSelection","unWireEvents","mouseDownHandler","isEditing","formObj","validate","getSelectedMovableRow","getCurrentBatchRecordChanges","currentRecords","isToggle","enableSimpleMultiRowSelection","addRowsToSelection","selectData","selectedRow","selectedMovableRow","events.selectVirtualRow","selectedIndex","frozenData","getRowObjectByIndex","clearRowSelection","isRowType","isRowSelected","hasAttribute","activeTarget","rowSelectingCallBack","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","actualTarget","isInteracted","isHeaderCheckboxClicked","addMovableArgs","events.rowSelecting","isRemoved","can","toggle","removed","checkboxMode","clearSelectedRow","selectRowCallBack","clearRow","disableInteracted","updateRowSelection","selectRowIndex","isHeaderCheckBoxClicked","events.rowSelected","updateRowProps","targetObj","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedRows","selectedData","currentRow","prevRow","rowIndexes_1","rowIdx","checkboxOnly","checkboxColumn","isUnSelected","enableToggle","rowDeselect","events.rowDeselecting","addRemoveClassesForRow","events.rowDeselected","isHybrid","rowIndexes_2","state_1","reverse","clearRowCallBack","selectedEle","updatePersistCollection","updateCheckBoxes","chkState","ensureCheckboxFieldSelection","pKey_1","updatePersistDelete","pKey","chkBox","nextElementSibling","checkedTarget","setCheckAllState","pop","contextMenuModule","mouseButton","clearCellSelection","row_1","mRow_1","rowIndex_1","foreignKeyData_1","target_1","checkSelectAllClicked","getCheckAllStatus","updatePersistSelectedData","movableRow","rowDeselectCallBack","rowDeselectObj","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","prevCIdxs","successCallBack","previousRowCell","prevECIdxs","getCellIndex","events.cellSelecting","cellSelectingArgs","currentCell","clearCell","updateCellSelection","selectedRowCellIndex","updateCellProps","events.cellSelected","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","cellSelectedArgs","isDragged","selectCells","rowCellIndexes","cellSelectArgs","addRowCellIndex","addCellsToSelection","hideAutoFill","cellIndexes_1","selectedCellIdx","cellDeselect","events.cellDeselecting","events.cellDeselected","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","bdrElement","showHideBorders","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","startAFCell","startCell","endAFCell","selectLikeExcel","startDIndex","isAutoFillSel","showAFBorders","selectLikeAutoFill","startDCellIndex","drawBorders","createBorders","positionBorders","isLastRow","isFirstRow","isFirstCell","setBorders","border","bdrStr","stOff","endOff","parentOff","offsetParent","topOffSet","leftOffset","selectDirection","updateStartEndCells","getMovableContent","mcBdrElement","fhBdrElement","headerModule","getMovableHeader","mhBdrElement","applyBorders","borderWidth","includes","drawAFBorders","bdrAFBottom","createAFBorders","positionAFBorders","bdrAFLeft","firstCellTop","firstCellLeft","parentRect","sTop","sLeft","offsetTop","totalHeight","totalWidth","floor","scrolloffSet","bdrAFRight","bdrAFTop","leftRemove","topRemove","hideAFBorders","updateValue","createBeforeAutoFill","updateCell","events.beforeAutoFill","getAutoFillCells","startCellIdx","isApply","startrowIdx","endrowIdx","endCellIdx","colLen","cellIdx","endCell","startCellIndex","trIdx","mouseUpHandler","mUPTarget","updateAutoFillPosition","lastCell","updateStartCellsIndex","autofill","enableAutoFill","rindex","isFrozenCol","isFrozenRow","clientRect","colWidth","button","isDrag","allowRowDragAndDrop","enableDrag","isUpdate","postion","clearSelAfterRefresh","events.initialEnd","events.rowSelectionComplete","events.cellSelectionComplete","events.inBoundModelChanged","onPropertyChanged","events.cellFocused","onCellFocused","actionBeginFunction","actionCompleteFunction","refreshHeader","addEventListener_checkbox","removeEventListener_checkbox","isMacOS","userAgent","keyDownHandler","keyUpHandler","getCheckAllBox","initPerisistSelection","checkBoxSelectionChanged","gobj","chkField","proxy_1","dataSuccess","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","totalRecords","checkSelectAllAction","cRenderer","editForm","checkSelectAll","checkBox","stateStr","rowCache","forEach","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","events.checkBoxChange","updateSelectedRowIndex","selectedVal","isInteraction","checkToSelectAll","isServerRenderedVirtualization","checkedLen","spanEle","indeterminate","clickHandler","popUpClickHandler","chkSelect","hoverFrozenRows","showPopup","headerAction","thLen","selectedIndexes","getSelectedRowCellIndexes","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","applyUpDown","detailIndentCell","dragdropIndentCell","onDataBoundFunction","events.beforeRefreshOnDataChange","setCheckAllForEmptyGrid","actionCompleteFunc","actionCompleteHandler","events.click","resizeEndFn","events.resizeStop","checkAllBox","isInfinitecroll","isSelectedRowIndexUpdating","Search","searchString","events.preventBatch","instance","arg1","refreshSearch","events.searchComplete","onSearchComplete","cancelBeginEvent","ShowHide","show","showBy","getToggleFields","hide","hideBy","getKeyBy","changedStateColumns","stringify","showHideArgs","currentViewCols","events.resetColumns","allowSelection","col1","col2","Scroll","lastScrollTop","previousValues","oneTimeReady","uiupdate","toolbarModule","toolbar","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","cssProps","getCssProperties","padding","removePadding","hDiv","footerDiv","getFooterContent","setScrollLeft","onContentScroll","scrollTarget","isPreventScrollEvent","isDown","scrollDown","isFooter","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","setPageXY","touches","pageX","pageY","sHeight","css","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","pasteHandler","isMacLike","test","platform","metaKey","clipBoardTextArea","x_1","scrollX","y_1","scrollY","scrollTo","paste","isAvail","dataRows","fTr","mTr","aria-label","copy","setCopyData","withHeader","getSelection","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","gridObserver","Observer","BlazorAction","aria","virtualHeight","onDetailRowClick","addDeleteSuccess","editSuccess","setColumnVisibility","setServerOffSet","onGroupClick","setColVTableWidthAndTranslate","invokeServerDataBind","contentColGroup","currentAction","editArgs","gridRowId","gridRow","events.detailDataBound","virtualContentModule","blzRowIndex","blazorDataLoad","foreignColumnsData","aggRows","aggRow","aggr","aggrds","groupedCols","sign","abs","getTimezoneOffset","setClientOffSet","batchChanges","getMediaColumns","setVirtualHeight","removeDisplayNone","renderedContentRows","renderedContentCells","setVirtualTrackHeight","VisibleGroupedRowsCount","translateX","getColumnOffset","startColIndex","endColIndex","virtualEle","setWrapperWidth","adjustTable","transform","refreshOffsets","refreshVirtualElement","timeZone","serverTimezoneOffset","parseJson","serverTimeZone","round","setPersistData","mergePersistGridData","resetPersistData","parseArgs","persistArgs","movableContentTable","movableHeaderTable","dataFailure","SortDescriptor","SortSettings","InfiniteScrollSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","ResizeSettings","GroupSettings","EditSettings","Grid","keyA","media","componentRefresh","Component","rowUid","pageTemplateChange","mediaBindInstance","asyncTimeOut","enableLogger","needsID","Grid_1","Inject","getPersistData","keyEntity","ignoreOnPersist","scrollPosition","currentObject","isAngular","pagerTemplate","addOnPersist","requiredModules","modules","member","allowExcelExport","allowPdfExport","sortedColumns","isDetail","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","isInitial","mediaCol","ignoreCollectionWatch","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","UnGroupButton","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","AutoFitAll","AutoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","NumberFilter","TextFilter","DateFilter","DateTimeFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","FilterMenuDialogARIA","ExcelFilterDialogARIA","DialogEditARIA","ColumnChooserDialogARIA","ColumnMenuDialogARIA","CustomFilterDialogARIA","SortAtoZ","SortZtoA","SortByOldest","SortByNewest","SortSmallestToLargest","SortLargestToSmallest","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","ctrlSpace","ctrlLeftArrow","ctrlRightArrow","renderComplete","createSpinner","searchModule","checkLockColumns","processModel","gridRender","addListener","updateStackedFilter","events.componentRendered","gcol","getShowHideService","pushMediaColumn","matchMedia","mediaQueryUpdate","mediaColumn","matches","showHider","refreshMediaCol","footerContent","removeMediaListener","removeListener","eventInitializer","hasGridChild","unwireEvents","destroyDependentModules","toolTipObj","keyboardModule","enableBoxSelection","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","freezeRefresh","isEllipsisTooltip","close","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","maintainSelection","updateRTL","ej2_instances","getToolbar","getContextMenu","columnMenuModule","getColumnMenu","showFilterBarOperator","events.rtlUpdated","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","deepWatch","gResult","names","scrollRefresh","enableHover","fn_1","muteOnChange","filterModule","refreshFilter","headerCells","stdHdrCell","updateColumnModel","updateFrozenColumns","updateLockableColumns","frozenCount","movableCount","isRefresh","inview","vLen","ensureFrozenCols","stackedHeader","individualColumn","stackedColumn","getLocaleConstants","setGridHeaderContent","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getElementsByClassName","getFooterContentTable","getPager","gridPager","setGridPager","getFrozenRowByIndex","getFrozenDataRows","getRowInfo","rowsObject","mrows","dRows","fieldIdx","pkName","movableSelectedRow","rowObjects","movableRowObjects","events.refreshFooterRenderer","events.groupAggregates","events.queryCellInfo","getColumnHeaderByField","getColumnHeaderByUid","getStackedColumns","getUidByColumnField","rowDropSettings","targetID","getColumnFieldNames","columnNames","getDetailTemplate","getEditHeaderTemplate","editHeaderTemplateFn","getEditFooterTemplate","editFooterTemplateFn","getSelectedRows","showColumns","hideColumns","getFrozenCount","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","getFilterUIInfo","visibleFrozenColumns","goToPage","pageNo","updateExternalMessage","message","sortColumn","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","filterOperator","filterValue","actualFilterValue","actualOperator","clearFiltering","removeFilteredColsByField","isClearFilterBar","print","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","editCell","saveCell","enableToolbarItems","isEnable","enableItems","clipboardModule","recalcIndentWidth","indentWidth","perPixel","parentOffset","applyWidth","newWidth","events.columnWidthChanged","resetIndentWidth","reorderColumns","fromFName","toFName","reorderModule","reorderColumnByIndex","reorderColumnByTargetIndex","fromIndexes","rowDragAndDropModule","refreshDataSource","disableRowDD","headerRows","disValue","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","localeObj","L10n","locale","valueFormatterService","flag","gCols","sCols","sLen","isFromGroup","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","events.initForeignKeyColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","events.refreshHandlers","Tooltip","opensOn","getTooltipStatus","htable","ctable","prevElement","open","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","onKeyPressed","mouseClickHandler","focusOutHandler","dblClickHandler","keyPressHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","tapEvent","dataBoundFunction","blazorTemplate","isChildGrid","checkEdit","clonedColumn","dataRow","events.recordDoubleClick","events.dblclick","filterClear","ariaOwns","keyPress","events.editNextValCell","editFormValidate","persistedData","localStorage","getItem","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","storedColumns","_loop_2","localCol","tCol","this_2","presskey","stopImmediatePropagation","altKey","events.groupCollapse","collapse","setInjectedModules","injectedModules","refreshColumns","fCnt","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","groupExpandAll","expandAll","groupCollapseAll","collapseAll","clearGrouping","ungroupColumn","openColumnChooser","detailCollapseAll","detailRowModule","detailExpandAll","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","propertyNames","loggerModule","getPreviousRowData","hideScroll","cTable","fTable","overflowX","events.frozenHeight","getRowIndexByPrimaryKey","getFilteredRecords","getUserAgent","Global","timer","clearTimeout","events.doubleTap","cntRows","rows_2","getHiddenColumns","calculatePageSizeByParentHeight","containerHeight","pagesize","getNoncontentHeight","getSummaryValues","summaryCol","summaryData","updateRowValue","setForeignKeyData","colpending","resetFilterDlgPosition","filterDlg","gClient","fClient","renderReactTemplates","batchUpdate","processRowChanges","batchAsyncUpdate","processBulkRowChanges","loopstring","setNewData","oldValues","bulkRefresh","deleteRowElement","mtr","out_i_1","_loop_3","this_3","_loop_4","isRowExist","this_4","renderRowElement","addRowObject","moveTbody","getHeight","isInteger","Complex","Event","NotifyPropertyChanges","isAsyncPrint","defered","isContentReady","events.hierarchyPrint","removeColGroup","printGridObj","renderPrintGrid","printWind","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printGrid","viewContainerRef","load","injectedModues","events.printGridInit","printgrid","appendTo","events.beforePrint","detach","waitingPop","printGridElement","events.printComplete","printWindow","groupCaption","colGroups","contentColGroups","hideColGroup","existingPredicate","foreignKeyQuery","filterState","cBoxTrue","cBoxFalse","closeDialog","keyupHandler","searchHandler","debounce","searchBoxKeyUp","foreignKeyFilter","fColl","mPredicate","filterCollection","fpred","foreignFilter","initalPredicate","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","sIcon","getLocalizedLabel","updateDataSource","updateModel","actualPredicate","allowCaseSensitive","isFiltered","getAndSetChkElem","sBox","hideSearchbox","title","inputargs","Input","createInput","spinner","cBox","showDialog","events.filterBeforeOpen","columnType","events.cBoxFltrBegin","Dialog","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","isPrimary","created","dialogCreated","dialogOpen","maxHeight","getAllData","X","Y","events.filterDialogCreated","openDialog","filterTemplateCol","filterItemTemplate","events.filterMenuClose","clearFilter","events.fltrPrevent","fltrBtnHandler","textContent","check","optr","searchInput","caseSen","defaults","isNotEqual","itemsCnt","fObj","generateNullValuePredicates","arg2","arg3","arg4","arg5","arg6","initiateFilter","firstVal","foreignQuery","parsed","predicte","addDistinct","events.filterSearchBegin","filterModel","filterChoiceCount","filterargs","excelSearchOperator","take","filterEvent","processSearch","getPredicateFromCols","isGrid","events.filterChoiceRequest","processDataOperation","filteredColumn","distinct","defObj","allPromise","runArray","colData","all","fullData","args1","events.beforeCheckboxRenderer","f","filterColumn","filteredData","getDistinct","processDataSource","events.filterAfterOpen","events.cBoxFltrComplete","updateResult","createFilterItems","result_1","updateAllCBoxes","updateIndeterminatenBtn","setFocus","prevElem","cBoxes_1","createCheckbox","btn","btnObj","disabled","cBoxes","nullCounter","selectAllValue","isColFiltered","isRndere","args_1","events.filterCboxValue","checkbox","getCheckedState","lookup","foreignDataObj","events.foreignKeyData","generatePredicate","updateDateFilter","getCaseValue","ExcelFilterBase","customFltrOperators","customFilterOperators","getCMenuDS","number","string","datetime","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","eleOptions","menu","ul","icon","hdrele","isAsc","isDesc","ascName","descName","createMenuElem","ensureTextFilter","events.beforeFltrcMenuOpen","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","submenu","isCMenuOpen","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","isIE","pageYOffset","getCMenuYPosition","optrData","MouseEvent","contextWidth","targetBorder","filterLength","renderDialogue","complexFieldName","mainDiv","dlgDiv","dlgObj","isModal","overlayClick","removeDialog","showCloseIcon","closeOnEscape","createdDialog","filterBtnClick","removeObjects","dropOptr","datePicker","dateTimePicker","actObj","numericTxtObj","renderCustomFilter","events.beforeCustomFilterOpen","dialog","dlgConetntEle","dlgFields","fieldSet","displayName","renderFilterUI","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","andRadio","firstOperator","firstValue","secondOperator","secondValue","arg7","arg8","renderOperatorUI","elementID","isFirst","fieldElement","xlfloptr","optrDiv","optrInput","dropDatasource","selectedValue","dropSelectedVal","menuText","DropDownList","dropDownOpen","change","dropDownValueChange","getSelectedValue","selectedField","getSelectedText","renderFlValueUI","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","RadioButton","orRadio","elementId","valueDiv","isFilteredCol","fltrPredicates","columnObj","getExcelFilterData","valueInput","flValue","renderAutoComplete","renderNumericTextBox","renderDate","renderDateTime","predIndex","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","DatePicker","DateTimePicker","completeAction","NumericTextBox","colObj","AutoComplete","sortOrder","columnvalue","filterType","arr","mapObject","performComplexDataOperation","returnObj","duplicateMap","Sort","contentRefresh","isModelChanged","currentTarget","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","allowMultiSorting","backupSettings","removeSortIcons","updateSortedCols","lastSortedCols","lastCols","restoreSettings","refreshSortSettings","addSortIcons","sortColumns","events.sortComplete","refreshSortIcons","refreshing","initiateSort","showPopUp","colUid","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","hasParent","enableExternalMessage","checkpagesizes","defaultConstants","currentPageInfo","totalItemsInfo","totalItemInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","pagerAllDropDown","CurrentPageInfo","TotalItemsInfo","FirstPageTooltip","LastPageTooltip","NextPageTooltip","PreviousPageTooltip","NextPagerTooltip","PreviousPagerTooltip","PagerDropDown","PagerAllDropDown","All","containerModule","pagerMessageModule","isReactTemplate","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","setPageSize","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","tempId","getPagerTemplate","isStringTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","convertValue","defaultValue","dropDownListObject","onChange","beforeValueChange","pageSizeValue","ExternalMessage","externalMessage","Page","isInitialRender","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","renderReactPagerTemplate","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","appendToElement","handlers","complete","updateLayout","inboundChange","events.pageComplete","FilterCellRenderer","fltrData","filterBarTemplate","showClearButton","Element","operatorIconRender","templateWrite","write","fbicon","operators","popupHeight","popupWidth","internalEvent","beforeOpen","customOperators","spanElmt","events.getFilterBarOperator","FlMenuOptrUI","customOptr","selValue","optrLen","getFlOperator","StringFilterUI","serLocator","getAutoCompleteOptions","autoComplete","openPopup","getOptrInstance","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","enableCaseSensitivity","NumberFilterUI","BooleanFilterUI","dropInstance","drpuiObj","DateFilterUI","fltrSettings","inputElem","datePickerObj","FilterMenuRenderer","fltrObj","isDialogOpen","colTypes","boolean","flMuiObj","renderDlgContent","getElementById","argument","clearBtnClick","writeMethod","instanceofFilterUI","compElement","ui","dlgContentEle","flOptrValue","targ","fltrValue","eControl","iconClass","flIcon","CheckBoxFilter","isresetFocus","checkBoxBase","events.restoreFocus","actionPrevent","ExcelFilter","excelFilterBase","filterByMethod","cellText","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","skipNumberInput","skipStringInput","getLocalizedCustomOperators","fltrElem","rowdrag","detail","updateFilterMsg","dropdownlist","filterBarElement","arrayVal","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","keyUpHandlerImmediate","events.filterComplete","events.filterOpen","columnMenuFilter","filterIconClickHandler","events.closeFilterDialog","getOperatorName","checkForSkipInput","filterStatusMsg","applyColumnFormat","predObj","fColumn","addFilteredClass","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","refreshFilterSettings","updateFilter","getFilterBarElement","filteredcols","fltrElement","isClose","filterDialogOpen","filterHandler","localizedStrings","fCell","filteredColsUid","currentPred","currentFilterColumn","closeHeaderEle","dropDownListInput","processFilter","openMenuByField","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","operatorSymbols","value_1","stopTimer","startTimer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","skipInput","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","inputId","datepickerEle","hasDialog","popupEle","hasDialogClosed","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","newarray","resizeColumn","footerTable","headerTextClone","contentTextClone","footerTextClone","columnIndexByField","indentWidthClone","detailsElement","contentText","footerText","wHeader","wContent","wFooter","columnbyindex","colMaxWidth","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","resizeStart","callAutoFit","getTargetColumn","refreshColumnWidth","refreshStackedColumnWidth","mtbody","ftbody","ftr","removeProperty","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","updateResizeEleHeight","getColData","mousemove","setHelperHeight","finalColumns","getSubColumns","calulateColumnsWidth","finalColumns_1","updateHelper","subColumns","isFrozenColResized","events.textWrapRefresh","doubleTapEvent","getStackedWidth","headerRows_1","calcPos","cls","fLeft","offset","doc","ownerDocument","nodeType","timeoutHandler","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","bool","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","newIndex","destElement","oldIdx","column_2","destIndex","reorderByColumn","preventRefresh","getColParent","srcIdx","toColumnUid","flatColumns","fTh","mTh","fHeaders","reorderSingleColumn","toColumn","reorderMultipleColumns","fromFNames","parent_1","cols_1","fromColumnUid","isMultipleReorder","moveTargetColumn","reorderSingleColumnByTarget","reorderMultipleColumnByTarget","fromCol","setDisplay","visibleCols","toCol","isLeft","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseLeft","cliRectBaseRight","scrollElem","cliRectBase","fhdrWidth","mhdrRight","RowDD","isOverflowBorder","selectedRowColls","sender","startedRow","processArgs","dragelement","events.rowDragStartHelper","removeCell","exp","dropCountEle","spanCssEle","events.rowDragStart","dragStartData","dropElem","getElementFromPosition","hoverState","originalEvent","events.rowDrag","moveDragRows","bottomborder","gridcontentEle","getScrollWidth","removeBorder","processDragStop","targetEle","dropElement","stRow","dropIndex","events.rowDrop","draggedData","changeRecords","toIdx","saveChange","targetRow","deleteCell","initializeDrag","onDataBoundFn","currentVdata","fromIdx","draggedRecords","dropIdx","actualIdx","len1","reorderRow","scrollPixel_1","setScrollDown","scrollPixel_2","scrollPixel","targetElement","setBorder","removeFirstRowBorder","removeLastRowBorder","rowElement","targetRowIndex","gridheaderEle","islastRowIndex","getTargetIdx","singleRowDrop","srcControl","startedRowIndex","srcControl_1","isSingleRowDragDrop","targetIndex","sortRequired","isAppliedGroup","isAppliedUnGroup","reorderingColumns","animateDropper","preventDrop","rearrangeGroup","dragField","dropTarget","grouped","dropField","dragIndex","addColToGroupDrop","addLabel","removeColFromGroupDrop","groupGenerator","dragLabel","dropArea","events.ungroupComplete","onGroupAggregates","blazorActionBegin","updateExpand","updateGroupDropArea","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","rowNodes","isHide","expandElem","toExpand","updateVirtualRows","captionExpand","captionCollapse","rObj","expandCollapse","events.initialCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","initializeGHeaderDrop","initializeGHeaderDrag","colName","groupAddSortingQuery","animator","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","createSeparator","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","editedData","iterateGroupAggregates","updateSummaryRows","dataUid","events.refreshAggregateCell","updatedData","initData","deletedCols","changeds","mergeData","pKeyVal","cItem","eData","aggregateRows","closestParent","DetailRow","refreshColSpan","toogleExpandcollapse","lastrowIdx","isExpanded","nextRow","events.detailStateChange","detailElement","detailRow","data-uid","detailCell","nextSibling","getGridModel","parentPrimaryKeys","parentKeyField","parentRowData","promiseResolve","gridElem","detailrowIdx","lastrowcell","getTDfromIndex","moduleObj","detailrows","Toolbar","predefinedItems","gridID","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","createToolbar","addReactToolbarPortals","bindSearchEvents","searchElement","refreshToolbarItems","updateSearchBox","toolbarCreated","getItems","tool","clicked","toolbarClickHandler","viewStr","items_1","ID","portals","disableItems","hasData","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","items_2","gID","newArgs","toolbarargs","tarElement","searchBoxObj","FooterRenderer","gridModule","modelGenerator","movableContent","fDiv","mDiv","frozenContent","tFoot","freezeTable","renderSummaryContent","cStart","cEnd","summaries","fragment","rowrenderer","srow","movableCnt","movableHeight","frozenDiv","updateFooterTableWidth","onScroll","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","fCol","onAggregates","getIndexByKey","ds","isModified","idVal","agrVal","SummaryCellRenderer","refreshWithAggregate","tempObj","gColumn","cellNode","curCell","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","cModel","InterSectionObserver","fromWheel","touchMove","up","containerRect","entered","pageHeight","down","observe","onEnterCallback","virtualScrollHandler","delay","prevTop","prevLeft","debounced100","debounced50","axes","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","cache","rowModelGenerator","notifyArgs","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","isBlockAvailable","virtualStartIdx","virtualStartIndex","cacheindex","getStartIndex","median","updateGroupRow","getPage","block","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","addFrozenIndex","refreshColOffsets","blocks","currentFirst","iterateGroup","oRow","isBlazorServerRendered","VirtualContentRenderer","prevHeight","preStartIndex","preventEvent","tmpOffsets","VirtualElementHandler","offsetKeys","isSelection","isBottom","rndrCount","requestTypes","isNormaledit","emptyRowData","vfColIndex","eventListener","minHeight","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","getBlockHeight","observer","refreshMvTbalTransform","mContTV","fContTV","scrollListener","scrollArgs","scrollAfterEdit","pStartIndex","previousColIndexes","viewInfo","getInfoFromView","startColumnIndex","endColumnIndex","VTablewidth","restoreEdit","virtualEndIndex","RHeight","getTotalBlocks","isBlockAdded","tempBlocks","infoType","preEndIndex","vHeight","getPageFromTop","ensureBlocks","newBlock","every","firstBlock","getBlockSize","exactTopIndex","noOfInViewIndexes","exactEndIndex","pageSizeBy4","sIndex","eIndex","setKeyboardNavIndex","idxAddedToExactTop","mIdx","isEndBlock","getGroupedTotalBlocks","vfTblTransform","cOffset","translate","isLastPage","wrappers","cOff","newChild","colVFtable","checkFirstBlockColIndexes","cBlock","top_1","getTranslateY","getOffset","focusCell","restoreAdd","editedRowIndex","top_2","getVirtualEditedData","getCurrentEditedData","isTop","maxPage","onDataReady","hdrTbls","resetScrollPosition","virtualHeightTemp","fTblWidth","total","cHeight","isOnenter","endTranslate","blockHeight","maxBlock","onEntered","isWheel","events.virtaulCellFocus","virtualCellFocus","events.virtualScrollEditActionBegin","editActionBegin","events.virtualScrollAddActionBegin","addActionBegin","events.virtualScrollEdit","events.virtualScrollEditSuccess","events.refreshVirtualCache","refreshCache","resetIsedit","events.getVirtualData","events.virtualScrollEditCancel","editCancel","scrollValues","updateCurrentViewData","scrollEle","visibleRowCount","previousVirtualData","addForm","createEmptyRowdata","getRowCollection","totalBlocks","getMovableVirtualRowByIndex","isRowObject","startIdx","rowCollection","rem","size","fcntColGrp","mcntColGrp","colGrp","inViewIdx","eleOffsHeight","isRowInView","rectTop","VirtualHeaderRenderer","gen","fhdrColGrp","mhdrColGrp","tablewidth","xValue","yValue","setFreezeWrapperWidth","VirtualScroll","ensurePageSize","blockSize","InlineEditRender","addNew","mTbody","getEditElement","checkLastRow","renderMovableform","form","movableForm","updateFreezeEdit","getFreezeRow","cloneRow","tdElement","refreshFreezeEdit","fCls","cloneFrozen","mTd","updateFrozenCont","td_1","editTemplateID","rules","BatchEditRender","cloneCell","columnObject","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","getDialogEditTemplateElement","primaryKeyValue","allowDragging","dialogClose","dialogEditTemplates","templateName","events.destroyForm","dialogTemp","tempDiv","checkColumnIsGrouped","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","mTdElement","fTdElement","tArgs","tempData","ruleColumn","setRules","isInput","BooleanEditCell","activeClasses","classNames","selectChkBox","editRow","DropDownEditCell","ddActionComplete","dropdownCreated","dlgElement","NumericEditCell","keyEventHandler","evt","createEvent","initEvent","dispatchEvent","instances","DefaultEditCell","TextBox","NormalEdit","currentVirtualData","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","begineditargs","editargs","originalRow","frozen","applyFormValidation","edFail","form1","form2","mFormObj","isDlg","dlgWrapper","dlgForm","mForm","eleLength","endEditArgs","addedRowIndex","destroyElements","destroyWidgets","editHandler","edSucc","editFailure","requestSuccess","stopEditStatus","closeForm","needRefresh","editedRow","closeEditArgs","isLazyLoad","addArgs","dataLen","tmpRecord","contained","mElem","editMElem","events.deleteComplete","events.saveComplete","InlineEdit","BatchEdit","cellDetails","originalCell","editNext","preventSaveCell","onBeforeCellFocused","batchCancelFunction","events.batchCancel","setCellIdx","isAddRow","validateFormObj","editCellFromIndex","events.beforeBatchCancel","isAdded","removeRowObjectFromUID","removeHideAndSelection","refreshRowIdx","tdElements","bulkDelete","bulkAddRow","batchSave","replaceWith","removeSelectedData","events.beforeBatchSave","beforeBatchSaveArgs","insertedRow","deleteRowUid","events.beforeBatchDelete","beforeBatchDeleteArgs","uniqueid","events.batchDelete","nonMovableRows","getIndexFromData","defaultData","getDefaultData","events.beforeBatchAdd","beforeBatchAddArgs","events.batchAdd","btmIdx","findNextEditableCell","isValOnly","validation","checkNPCell","dValues","editCellExtend","mRowData","getDataByIndex","getCellIdx","cellEditArgs","isColored","insertCell","events.batchEditFormRendered","setChanges","currentRowObj","movableRowObject","movRowEle","movRowIndex","rowcell","newReactTd","escapeCellEdit","generateCellArgs","previousValue","cloneEditedData","isForceSave","events.batchForm","cellSaveArgs","isEscapeCellEdit","visibleColumns","addCancelWhilePaging","DialogEdit","DatePickerEditCell","TemplateEditCell","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","editCellType","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","inputElements","inputs","col_1","preventObj","mRules","createFormObj","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","events.valCustomPlacement","getElemTable","outerHTML","isFHdr","inputName","gcontent","validationForBottomRowPos","isScroll","isFHdrLastRow","isBatchModeLastRow","viewPortRowCount","fHeraderRows","inputClient","arrow","rowsHeight","AddEditors","editors","dropdownedit","numericedit","datepickeredit","datetimepickeredit","booleanedit","defaultedit","templateedit","showColumn","hideColumn","changedColumns","unchangedColumns","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","prevShowedCols","rtlUpdate","enableAfterRenderEle","hideDialog","onResetColumns","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","targetdlg","hideOpenedDialog","addcancelIcon","beforeOpenColumnChooserEvent","refreshPosition","mOpenDlg","events.columnChooserOpened","renderChooserList","updateIntermediateBtn","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","changedColumnState","uncheckedLength","ulElement","columnStateChange","resetColumnState","currentCol","stateColumns","events.columnChooserCancelBtnClick","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","okButton","clearSearch","buttonEle","selectedCbox","nMatchele","checkBoxClickHandler","checkstate","updateSelectAll","columnUid","columnUID","srchShowCols","searchData","itemsLen","hideCols","gdCol","cclist","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","uncheck","cbox","hideColState","showColState","cccheckboxlist","searchValue","proxy","interval","openCC","dlgEle","dlgLen","columnChooserSettings","events.beforeOpenColumnChooser","ExportHelper","hideColumnInclude","getGridRowModel","processColumns","childGridLevel","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","processHeaderCells","generateActualColumns","getConvertedWidth","actualColumns","getCellCount","appendGridCells","gridRows","isIgnoreFirstCell","option","checkAndExport","gridPool","globalResolve","failureHandler","childGridObj","createChildGrid","exportType","exportId","getGridExportColumns","actualGridColumns","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","isServerBlaz","cFormat","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","isCsv","hierarchyExportMode","events.beforeExcelExport","processRecords","exportingSuccess","events.excelExportComplete","blobPromise","allPromise_1","processInnerRecords","isCountRequired","groupedColLength","blankRows","isExportPropertiesPresent","multipleExport","worksheets","processExcelHeader","processGridExport","organisedRows","organiseRows","processExcelFooter","sheet","Workbook","currencyCode","saveAsBlob","fileName","save","initialIndex","childRows","excelRows","theme","gColumns","groupIndent","processHeaderContent","processRecordContent","events.exportDataBound","returnType","currentViewRecords","excelRow","processRecordRows","processGroupedRows","processAggregates","dataSource_1","cArgs","captionText","events.exportGroupCaption","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","grouping","outlineLevel","isCollapsed","gCell","cellValue","fkData","excelCellArgs","events.excelQueryCellInfo","hAlign","styleIndex","getColumnStyle","mergeOptions","returnVal","events.exportDetailDataBound","childGridCell","events.exportRowDataBound","excelExportProps","gRow","intent","isHidden","rec","byGroup","summaryModel","aggregateModule","groupSummaryRows","sRows","customIndex","eCell","getAggreateValue","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","aggregateStyle","gridCellStyle","events.excelAggregateQueryCellInfo","numberFormat","txt","JSON1","JSON2","attrname","spannedCells","currentCellIndex","gridCell","getIndex","getHeaderThemeStyle","excelHeaderCellArgs","events.excelHeaderQueryCellInfo","parseStyles","getRecordThemeStyle","fontSize","borders","color","bold","updateThemeStyle","themestyle","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","PdfExport","customDataSource","isGrouping","headerOnPages","drawPosition","xPosition","yPosition","pdfDocument","pdfPageSettings","PdfPageSettings","exportWithData","PdfDocument","processExport","events.pdfExportComplete","headerPageNumbers","gridDrawPosition","events.beforePdfExport","pdfGrid","section","sections","processSectionExportProperties","pdfPage","pages","draw","drawHeader","pageOrientation","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","allowHorizontalOverflow","gridTheme","getGridPdfFont","processExportProperties","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","returnValue","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","fontFamily","fontName","getFontFamily","fontStyle","getFontStyle","pdfColor","fontColor","penBrushColor","hexToRgb","g","borderCaption","getBorderStyle","headerSize","headerStyle","PdfFontStyle","PdfTrueTypeFont","fontFamily_1","captionFont","captionSize","captionStyle","fontFamily_2","recordFont","recordSize","recordStyle","fontFamily_3","PdfBorders","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","eCols","columnCount","applyTextAndSpan","gridHeader","getHeader","pdfCell","getHorizontalAlignment","getVerticalAlignment","events.pdfHeaderQueryCellInfo","recuHeader","spanCnt","isRoot","cidx","newSpanCnt","clientSize","PointF","fromBottom","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromTop","headerTemplate_1","getPageByIndex","graphics","drawPdfTemplate","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","isGroupedFooter","sRows_1","leastCaptionSummaryIndex","events.pdfAggregateQueryCellInfo","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","getColumn","setRecordThemeStyle","borderRecord","cellLength","events.pdfQueryCellInfo","processCellStyle","gridRow_1","cellPadding","PdfPaddings","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","italic","underline","strikeout","borderColor","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","TimesRoman","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","onclick","buttonObj","Button","commandType","commandClickHandler","commandColumn","commandCols","commandclickargs","commandCol","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","rowInfo","targetRowdata","contextMenuClickArgs","events.contextMenuClick","updateItemStatus","getLocaleText","showItems","closestGrid","parentItem","hideSepItems","showSepItems","dItem","ensureDisabledStatus","ensureTarget","hideItems","eventArgs","events.contextMenuOpen","ensureFrozenHeader","substr","generateID","localeKeys","CsvExport","export","PrevPage","FreezeRowModelGenerator","isFrzLoad","virtualRows","isFreezeRow","FreezeContentRender","setFrozenContent","setMovableContent","getFrozenContent","FreezeRender","refreshFreeze","setFrozenHeight","getFrozenHeader","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","movableHeader","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","filterRenderer","bindInitialEvent","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","contentScrollWidth","contentTableScrollWidth","borderBottom","fRowSpan","mRowSpan","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenHeader","frozenColumn","VirtualFreezeRenderer","frzeeLoad","serviceLoc","freezeRowGenerator","virtualRenderer","mTblT","firstPageRecords","mCol","splitReorderedRows","VirtualFreezeHdrRenderer","virtualHdrRenderer","rfhMovable","fvTbl","fvTck","mvTbl","mvTck","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","openColumnMenuByField","elePos","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","field_1","colChooser","events.columnMenuOpen","getFilter","events.columnMenuClick","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initForeignKeyColumns","generateQueryFormData","eventfPromise","dataModule","setColumnData","events.columnDataStateChange","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","destroyEvent","BASE_DOC_URL","DOC_URL","WARNING","ERROR","INFO","Logger","patchadaptor","detailLists","cOp","success","console","logType","generateMessage","beforeSend","request","settings","module_missing","injected","promise_enabled","primary_column_missing","selection_key_missing","actionfailure","formatError","formatErrorHandler","ajaxError","ajaxErrorHandler","locale_missing","lObj","limitation","check_datasource_columns","virtual_height","grid_remote_edit","grid_sort_comparer","resize_min_max","action_disabled_column","exporting_begin","exporting_complete","foreign_key_failure","initial_action","frozen_rows_columns","column_type_missing","datasource_syntax_mismatch","jsonResult","responseText","responseURL","statusText","InfiniteScroll","infiniteFrozenCache","isDownScroll","isUpScroll","enableContinuousScroll","initialRender","isInitialCollapse","prevScrollTop","isInitialMovableRender","virtualInfiniteData","events.infiniteScrollHandler","infiniteCellFocus","appendInfiniteRows","removeInfiniteCacheRows","setCache","ensureIntialCollapse","getVirtualInfiniteData","resetInfiniteEdit","infiniteEditSuccess","refreshInfiniteCache","infiniteAddActionBegin","firstIndex","lastIndex","makeRequest","ensureRowAvailability","createRow","isFrozenRows","rowElems","resume","resetContentModuleCache","getEditedRowObject","editedrow","updateCurrentViewRecords","restoreInfiniteEdit","restoreInfiniteAdd","getVirtualInfiniteEditedData","intialPageQuery","editPageQuery","initialBlocks","maxBlocks","nTop","oTop","gridForm","frozenEdit","frozenFrag","selectNewRow","captionRows","removeCaptionRows","addRowCount","removeTopRows","removeBottomRows","calculateScrollTop","scrollCnt","captionRowHeight","captionCount","currentViewRowCount","groupedData","maxIndx","frozeCols","lastRowIndex","isDataModified","setInitialCache","createFrozenCache","setInitialGroupCache","pageData","GroupLazyLoadRenderer","childCount","scrollData","isFirstChildRow","groupCache","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","cacheMode","cacheBlockSize","setLazyLoadPageSize","events.lazyLoadScrollHandler","collapseShortcut","oriIndex","getRowObjectIndexByUid","getGroupKeysAndFields","captionRowElement","groupInfo","enableCaching","events.lazyLoadGroupExpand","clearCache","captionRowExpand","captionIndex","events.lazyLoadGroupCollapse","clearLazyGroupCache","uids","getInitialCaptionIndexes","capIdx","capRow","getNextChilds","subChild","getChildRowsByParentIndex","refreshCaches","getRowByUid","capEle","getRowElementByUid","resetRowMaintenance","changeCaptionRow","from","to","moveCells","scrollReset","aggUid","getAggregateByCaptionIndex","capUid","lazyLoadHandler","setStartIndexes","setRowIndexes","refreshCaptionRowCount","nxtChild","hasLastChildRow","refreshRowObjects","rowObjectIndex","prevCapRow","prevCaptionCount","rowCount","insertAdjacentElement","confirmRowRendering","cap","newRows","newRowsObject","includeAgg","includeCollapseAgg","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","downTrs","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","findRowElements","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","parentCapRow","capRowObjIdx","capRowEleIndex","childIdx","getCurrentBlockEndIndex","child_1","removeBlock","cachedRowIndex","lastchild","child_2","uid1","uid2","uid3","currenBlock","lastIdx","trEle","scrollUp","generateExpandPredicates","filterCols","getPredicates","oriIdx","idxs","tr_1","showAndHideCells","captionData","isSummary","LazyLoadGroup","AutoCompleteEditCell","parentObj","isInlineEdit","selectedValues","valObj","ComboboxEditCell","parentObject","isInlineMode","ComboBox","finalValue","inputEle","MultiSelectEditCell","MultiSelect","TimePickerEditCell","complexField","rowDataValue","TimePicker","ToggleEditCell","chkBoxElement","Switch","switchModeChange","MaskedTextBoxCellEdit","parentInstance","columnField","MaskedTextBox","mask"],"mappings":"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"}