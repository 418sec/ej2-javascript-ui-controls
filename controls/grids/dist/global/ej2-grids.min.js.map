{"version":3,"file":"ej2-grids.min.js","sources":["../../src/grid/base/util.js","../../src/grid/services/aria-service.js","../../src/grid/actions/aggregate.js","../../src/grid/renderer/datepicker-edit-cell.js","../../src/grid/services/value-formatter.js","../../src/grid/models/column.js","../../src/grid/base/constant.js","../../src/grid/base/enum.js","../../src/grid/actions/checkbox-filter.js","../../src/grid/actions/data.js","../../src/grid/models/row.js","../../src/grid/models/cell.js","../../src/grid/renderer/cell-merge-renderer.js","../../src/grid/renderer/row-renderer.js","../../src/grid/services/row-model-generator.js","../../src/grid/services/summary-model-generator.js","../../src/grid/services/group-model-generator.js","../../src/grid/renderer/content-renderer.js","../../src/grid/renderer/header-renderer.js","../../src/grid/renderer/cell-renderer.js","../../src/grid/renderer/header-cell-renderer.js","../../src/grid/renderer/stacked-cell-renderer.js","../../src/grid/renderer/indent-cell-renderer.js","../../src/grid/renderer/caption-cell-renderer.js","../../src/grid/renderer/expand-cell-renderer.js","../../src/grid/renderer/header-indent-renderer.js","../../src/grid/renderer/detail-header-indent-renderer.js","../../src/grid/renderer/detail-expand-cell-renderer.js","../../src/grid/renderer/render.js","../../src/grid/services/cell-render-factory.js","../../src/grid/services/service-locator.js","../../src/grid/services/renderer-factory.js","../../src/grid/services/width-controller.js","../../src/grid/services/focus-strategy.js","../../src/grid/models/page-settings.js","../../src/grid/actions/selection.js","../../src/grid/actions/search.js","../../src/grid/actions/show-hide.js","../../src/grid/actions/scroll.js","../../src/grid/actions/print.js","../../src/grid/models/aggregate.js","../../src/grid/actions/clipboard.js","../../src/grid/base/grid.js","../../src/grid/actions/sort.js","../../src/pager/numeric-container.js","../../src/pager/pager-message.js","../../src/pager/pager.js","../../src/pager/pager-dropdown.js","../../src/pager/external-message.js","../../src/grid/actions/page.js","../../src/grid/renderer/filter-cell-renderer.js","../../src/grid/renderer/filter-menu-operator.js","../../src/grid/renderer/string-filter-ui.js","../../src/grid/renderer/number-filter-ui.js","../../src/grid/renderer/boolean-filter-ui.js","../../src/grid/renderer/date-filter-ui.js","../../src/grid/renderer/filter-menu-renderer.js","../../src/grid/actions/excel-filter.js","../../src/grid/actions/filter.js","../../src/grid/actions/resize.js","../../src/grid/actions/reorder.js","../../src/grid/actions/row-reorder.js","../../src/grid/actions/group.js","../../src/grid/actions/detail-row.js","../../src/grid/actions/toolbar.js","../../src/grid/renderer/footer-renderer.js","../../src/grid/renderer/summary-cell-renderer.js","../../src/grid/services/intersection-observer.js","../../src/grid/services/virtual-row-model-generator.js","../../src/grid/renderer/virtual-content-renderer.js","../../src/grid/actions/virtual-scroll.js","../../src/grid/renderer/inline-edit-renderer.js","../../src/grid/renderer/batch-edit-renderer.js","../../src/grid/renderer/dialog-edit-renderer.js","../../src/grid/renderer/edit-renderer.js","../../src/grid/renderer/boolean-edit-cell.js","../../src/grid/renderer/dropdown-edit-cell.js","../../src/grid/renderer/numeric-edit-cell.js","../../src/grid/renderer/default-edit-cell.js","../../src/grid/actions/normal-edit.js","../../src/grid/actions/inline-edit.js","../../src/grid/actions/batch-edit.js","../../src/grid/actions/dialog-edit.js","../../src/grid/renderer/template-edit-cell.js","../../src/grid/actions/edit.js","../../src/grid/actions/column-chooser.js","../../src/grid/actions/export-helper.js","../../src/grid/actions/excel-export.js","../../src/grid/actions/pdf-export.js","../../src/grid/renderer/command-column-renderer.js","../../src/grid/actions/command-column.js","../../src/grid/actions/context-menu.js","../../src/grid/services/freeze-row-model-generator.js","../../src/grid/renderer/freeze-renderer.js","../../src/grid/actions/freeze.js","../../src/grid/actions/column-menu.js","../../src/grid/actions/foreign-key.js"],"sourcesContent":["import { ChildProperty, compile as baseTemplateComplier, setValue, Internationalization } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { isObject } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition, calculatePosition } from '@syncfusion/ej2-popups';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    field = isNullOrUndefined(field) ? '' : field;\n    return DataUtil.getObject(field, data);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function iterateExtend(array) {\n    var obj = [];\n    for (var i = 0; i < array.length; i++) {\n        obj.push(baseExtend({}, getActualProperties(array[i]), {}, true));\n    }\n    return obj;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    Object.keys(moved).forEach(function (value, index) {\n        if (exclude.indexOf(value) !== -1) {\n            delete moved[value];\n        }\n    });\n    return moved;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] });\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c]);\n            }\n            else {\n                column = new Column(columns[c]);\n                columns[c].columns = prepareColumns(columns[c].columns);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = (typeof column.valueAccessor === 'string' ? getValue(column.valueAccessor, window)\n            : column.valueAccessor) || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        var temp = column.customAggregate;\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n        }\n        return temp ? temp.call(context, data, column) : '';\n    }\n    return (column.field in data || data instanceof Array) ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/** @hidden */\nexport function getComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/\\./g, '_');\n}\n/** @hidden */\nexport function setComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/_/g, '.');\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity && col.isPrimaryKey) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n    return inst.editSettings.mode === 'Batch' &&\n        (inst.element.querySelectorAll('.e-updatedtd').length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj, grid) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos;\n    if (!grid.enableRtl) {\n        newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n        dialogObj.element.style.display = elementVisible;\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n        }\n        else {\n            dialogObj.element.style.left = leftPos + -4 + 'px';\n        }\n    }\n    else {\n        newpos = calculatePosition(target, 'left', 'bottom');\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 35 + 'px';\n        dialogObj.element.style.display = elementVisible;\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) + -16 + 'px';\n        }\n        else {\n            dialogObj.element.style.left = leftPos - 16 + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    span.classList.contains('e-check') ? classList(span, ['e-uncheck'], ['e-check']) :\n        classList(span, ['e-check'], ['e-uncheck']);\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n * @param row - Grid Row model object.\n * @param columns - Foreign columns array.\n * @param data - Updated Row data.\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    columns.forEach(function (col) {\n        setValue(col.field, getForeignData(col, data), row.foreignKeyData);\n    });\n    row.cells.forEach(function (cell) {\n        if (cell.isForeignKey) {\n            setValue('foreignKeyData', getValue(cell.column.field, row.foreignKeyData), cell);\n        }\n    });\n}\n/**\n * Get the foreign data for the corresponding cell value.\n * @param column - Foreign Key column\n * @param data - Row data.\n * @param lValue - cell value.\n * @param foreignData - foreign data source.\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (lValue || valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || ((column.dataSource instanceof DataManager) && column.dataSource.dataSource.json.length ?\n        column.dataSource.dataSource.json : column.columnData);\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n * @param foreignKeyValue - Defines ForeignKeyValue.\n * @param columns - Array of column object.\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @hidden\n * @param filterObject - Defines predicate model object\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @hidden\n */\nexport function renderMovable(ele, frzCols) {\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\nexport function getObject(field, object) {\n    if (field === void 0) { field = ''; }\n    if (field) {\n        var value = object;\n        var splits = field.split('.');\n        for (var i = 0; i < splits.length && !isNullOrUndefined(value); i++) {\n            value = value[splits[i]];\n        }\n        return value;\n    }\n}\nexport function getCustomDateFormat(format, colType) {\n    var intl = new Internationalization();\n    var formatvalue;\n    var formatter = 'format';\n    var type = 'type';\n    if (colType === 'date') {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'date', format: format[formatter] }, false) :\n            intl.getDatePattern({ type: 'date', skeleton: format }, false);\n    }\n    else {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'dateTime', format: format[formatter] }, false) :\n            intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    return formatvalue;\n}\nexport function extendObjWithFn(copied, first, second, deep) {\n    var result = copied || {};\n    var length = arguments.length;\n    if (deep) {\n        length = length - 1;\n    }\n    var _loop_1 = function (i) {\n        if (!arguments_1[i]) {\n            return \"continue\";\n        }\n        var obj1 = arguments_1[i];\n        var keys = Object.keys(Object.getPrototypeOf(obj1)).length ?\n            Object.keys(obj1).concat(Object.keys(Object.getPrototypeOf(obj1))) : Object.keys(obj1);\n        keys.forEach(function (key) {\n            var src = result[key];\n            var copy = obj1[key];\n            var clone;\n            if (deep && (isObject(copy) || Array.isArray(copy))) {\n                if (isObject(copy)) {\n                    clone = src ? src : {};\n                    result[key] = baseExtend({}, clone, copy, deep);\n                }\n                else {\n                    clone = src ? src : [];\n                    result[key] = baseExtend([], clone, copy, deep);\n                }\n            }\n            else {\n                result[key] = copy;\n            }\n        });\n    };\n    var arguments_1 = arguments;\n    for (var i = 1; i < length; i++) {\n        _loop_1(i);\n    }\n    return result;\n}\n","/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount'\n};\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary].forEach(function (type) {\n            return cellFac.addCellRenderer(type, instance);\n        });\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            column.setPropertiesSilent({ format: _this.getFormatFromType(column.format, type) });\n            column.setFormatter(_this.parent.locale);\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n    };\n    Aggregate.prototype.getFormatFromType = function (format, type) {\n        if (isNullOrUndefined(type) || typeof format !== 'string') {\n            return format;\n        }\n        var obj;\n        switch (type) {\n            case 'number':\n                obj = { format: format };\n                break;\n            case 'date':\n                obj = { type: type, skeleton: format };\n                break;\n            case 'datetime':\n                obj = { type: 'dateTime', skeleton: format };\n                break;\n        }\n        return obj;\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(refreshAggregates, this.refresh, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(refreshAggregates, this.refresh);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    Aggregate.prototype.refresh = function (data) {\n        var editedData = data instanceof Array ? data : [data];\n        this.parent.notify(refreshFooterRenderer, editedData);\n        if (this.parent.groupSettings.columns.length > 0) {\n            this.parent.notify(groupAggregates, editedData);\n        }\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    aggregates.forEach(function (row) {\n        row.columns.forEach(function (column) {\n            callback(column, row);\n        });\n    });\n}\n","import { extend } from '@syncfusion/ej2-base';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject, getCustomDateFormat } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        if (args.column.editType === 'datepickeredit') {\n            this.obj = new DatePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        else if (args.column.editType === 'datetimepickeredit') {\n            this.obj = new DateTimePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\nfunction dateanddatetimerender(args, mode, rtl) {\n    var isInline = mode !== 'Dialog';\n    var format = getCustomDateFormat(args.column.format, args.column.type);\n    var value = getObject(args.column.field, args.rowData);\n    value = value ? new Date(value) : null;\n    return {\n        floatLabelType: isInline ? 'Never' : 'Always',\n        value: value,\n        format: format,\n        placeholder: isInline ?\n            '' : args.column.headerText, enableRtl: rtl,\n        enabled: isEditable(args.column, args.type, args.element),\n    };\n}\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if ((type === 'date' || type === 'datetime' || type === 'number') && (!isNullOrUndefined(format))) {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","import { merge, isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData, getObject } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options) {\n        var _this = this;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create – It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](./filtering.html#custom-component-in-filter-menu) for its customization.\n         *  @default null\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         * @default {}\n         */\n        this.edit = {};\n        this.sortDirection = 'Descending';\n        /** @hidden */\n        this.getEditTemplate = function () { return _this.editTemplateFn; };\n        /** @hidden */\n        this.getFilterTemplate = function () { return _this.filterTemplateFn; };\n        merge(this, options);\n        this.uid = getUid('grid-column');\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(options.format));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.editTemplate) {\n            this.editTemplateFn = templateCompiler(this.editTemplate);\n        }\n        if (this.filterTemplate) {\n            this.filterTemplateFn = templateCompiler(this.filterTemplate);\n        }\n        if (this.isForeignColumn() && (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = extend({\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            }, this.edit.params);\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y) {\n                if (typeof a_1 === 'string') {\n                    a_1 = getObject(a_1, window);\n                }\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                }\n                return a_1(x, y);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getObject(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getObject(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /** @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /** @hidden */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /** @hidden */\n    Column.prototype.setProperties = function (column) {\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n        }\n    };\n    /**\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var groupAggregates = 'group-aggregates';\n/** @hidden */\nexport var refreshFooterRenderer = 'refresh-footer-rendered';\n/** @hidden */\nexport var refreshAggregateCell = 'refresh-aggregate-cell';\n/** @hidden */\nexport var refreshAggregates = 'refresh-aggregates';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n/** @hidden */\nexport var recordAdded = 'recordAdded';\n/** @hidden */\nexport var cancelBegin = 'cancel-Begin';\n/** @hidden */\nexport var editNextValCell = 'editNextValCell';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, isActionPrevent, appendChildren, getDatePredicate } from '../base/util';\nimport { remove, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilter.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchHandler, this);\n    };\n    CheckBoxFilter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        var elem = this.dlg.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilter.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            fPredicate.predicate.predicates.forEach(function (fpred) {\n                filterCollection.push({\n                    field: fpred.field,\n                    predicate: 'or',\n                    matchCase: fpred.ignoreCase,\n                    ignoreAccent: fpred.ignoreAccent,\n                    operator: fpred.operator,\n                    value: fpred.value,\n                    type: _this.options.type\n                });\n            });\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilter.prototype.foreignFilter = function (args, value) {\n        var operator = this.parent.getDataModule().isRemote() ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'startswith' : 'contains');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.parent.filterSettings.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilter.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilter.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilter.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilter.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type || 'string';\n        this.options.format = options.format || '';\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilter.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen, filterModel: this,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        this.parent.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = '800px';\n        this.dialogObj.show();\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilter.prototype.dialogCreated = function (e) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n        }\n        else {\n            this.dialogObj.position = { X: 'center', Y: 'center' };\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            var filterTemplateCol = this.parent.getColumns().filter(function (col) { return col.getFilterItemTemplate(); });\n            if (filterTemplateCol.length) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n        }\n    };\n    CheckBoxFilter.prototype.clearFilter = function () {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFilter });\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: this.options.field });\n    };\n    CheckBoxFilter.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input') {\n                var value = e.target.value;\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.parent.getDataModule().isRemote() ?\n                            (this.options.column.type === 'string' ? 'contains' : 'equal') :\n                            (this.options.column.type === 'date' || this.options.column.type === 'datetime' ||\n                                this.options.column.type === 'boolean' ? 'equal' : 'contains'),\n                        value: value, matchCase: false, type: this.options.column.type\n                    },\n                    field: this.options.field\n                };\n                value ? this.options.column.isForeignColumn() ? this.foreignFilter(args, value) :\n                    this.options.handler(args) : this.closeDialog();\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    this.fltrBtnHandler();\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    CheckBoxFilter.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var optr = 'equal';\n        var caseSen = this.options.type === 'string' ?\n            this.options.allowCaseSensitive : true;\n        var defaults = {\n            field: this.options.field, predicate: 'or',\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.parent.filterSettings.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual) {\n            optr = 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = 'and';\n            defaults.operator = 'notequal';\n        }\n        var value;\n        var fObj;\n        var coll = [];\n        var searchInput = this.searchBox.querySelector('.e-searchinput');\n        if (checked.length !== this.itemsCnt || (searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                coll.push(fObj);\n                if (isActionPrevent(this.parent)) {\n                    this.parent.notify(events.preventBatch, {\n                        instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                        arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value\n                    });\n                    return;\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilter.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = column.isForeignColumn() ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.parent.getDataModule().isRemote() ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'startswith' : 'contains');\n        var matchCase = true;\n        var ignoreAccent = this.parent.filterSettings.ignoreAccent;\n        var field = column.isForeignColumn() ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            parsed = parsed === 'true';\n            operator = 'equal';\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query\n        };\n        this.parent.trigger(events.actionBegin, args);\n        predicte = new Predicate(field, args.operator, parsed, args.matchCase, args.ignoreAccent);\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n            operator = 'equal';\n            if (isNullOrUndefined(parsed) && val.length) {\n                return;\n            }\n            var filterObj = {\n                field: field, operator: operator, value: parsed, matchCase: matchCase,\n                ignoreAccent: ignoreAccent\n            };\n            predicte = getDatePredicate(filterObj, this.options.type);\n        }\n        if (val.length) {\n            query.where(predicte);\n        }\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        var fPredicate = {};\n        showSpinner(this.spinner);\n        this.renderEmpty = false;\n        if (column.isForeignColumn() && val.length) {\n            // tslint:disable-next-line:no-any\n            column.dataSource.executeQuery(query).then(function (e) {\n                var columnData = _this.options.column.columnData;\n                _this.options.column.columnData = e.result;\n                _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                if (fPredicate.predicate.predicates.length) {\n                    foreignQuery.where(fPredicate.predicate);\n                }\n                else {\n                    _this.renderEmpty = true;\n                }\n                _this.options.column.columnData = columnData;\n                foreignQuery.take(args.filterChoiceCount);\n                _this.search(args, foreignQuery);\n            });\n        }\n        else {\n            query.take(args.filterChoiceCount);\n            this.search(args, query);\n        }\n    };\n    CheckBoxFilter.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n        var predicates = CheckBoxFilter.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = getColumnByForeignKeyValue(prop, foreignColumn);\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilter.prototype.addDistinct = function (query) {\n        var filteredColumn = DataUtil.distinct(this.parent.filterSettings.columns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        query.distinct(filteredColumn);\n        return query;\n    };\n    CheckBoxFilter.prototype.getAllData = function () {\n        var query = this.parent.query.clone();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, filterModel: this, query: query, filterChoiceCount: null\n        };\n        this.parent.trigger(events.actionBegin, args);\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        query.take(args.filterChoiceCount);\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processDataOperation(query, true);\n        }\n    };\n    CheckBoxFilter.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var def = this.eventPromise(args, query);\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilter.prototype.eventPromise = function (args, query) {\n        var state;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.dataSource = def.resolve;\n        state.action = args;\n        this.parent.trigger(events.dataStateChange, state);\n        return def;\n    };\n    ;\n    CheckBoxFilter.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return data;\n    };\n    ;\n    CheckBoxFilter.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.options.column.isForeignColumn() && isInitial) {\n            allPromise.push(this.options.column.dataSource.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            e.forEach(function (data) {\n                runArray[i++](data.result);\n            });\n        });\n    };\n    CheckBoxFilter.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var query = new Query();\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                if (!(this.options.filteredColumns[i].field === this.options.field ||\n                    this.options.filteredColumns[i].field === this.options.foreignKeyValue)) {\n                    cols.push(this.options.filteredColumns[i]);\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n        // query.select(this.options.field);\n        var result = new DataManager(this.fullData).executeLocal(query);\n        var col = this.options.column;\n        this.filteredData = CheckBoxFilter.\n            getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n        this.processDataSource(null, true, this.filteredData);\n        this.sInput.focus();\n        var args = {\n            requestType: events.filterAfterOpen,\n            filterModel: this, columnName: this.options.field, columnType: this.options.type\n        };\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.processDataSource = function (query, isInitial, dataSource) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial);\n    };\n    CheckBoxFilter.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilter.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getValue(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilter.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n    };\n    CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    CheckBoxFilter.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            this.dialogObj.element.querySelector('.e-btn').focus();\n        }\n    };\n    CheckBoxFilter.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        var label = elem.querySelector('.e-label');\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template) {\n            label.innerHTML = '';\n            appendChildren(label, this.options.template(data, this.parent, 'filterItemTemplate'));\n        }\n        return elem;\n    };\n    CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dialogObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n        var _a;\n        var cBoxes = this.parent.createElement('div');\n        var btn = this.dialogObj.btnObj[0];\n        this.itemsCnt = data.length;\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue('ejValue', data[i]);\n                var value = this.valueFormatter.toView(getValue(this.options.field, data[i]), this.options.formatFn);\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            this.updateIndeterminatenBtn();\n            btn.disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        var args = { requestType: events.filterChoiceRequest, filterModel: this, dataSource: this.renderEmpty ? [] : data };\n        this.parent.trigger(events.actionComplete, args);\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            return this.result[value];\n        }\n    };\n    CheckBoxFilter.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn();\n        while (len--) {\n            value = json[len];\n            value = getValue(field, value); //local remote diff, check with mdu           \n            if (!isNullOrUndefined(value)) {\n                if (!(value in lookup)) {\n                    var obj = {};\n                    obj[ejValue] = value;\n                    lookup[value] = true;\n                    if (isForeignKey) {\n                        var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                        setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                        value = getValue(column.foreignKeyValue, foreignDataObj);\n                    }\n                    setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                    setValue('dataObj', json[len], obj);\n                    result.push(obj);\n                }\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilter.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilter.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        first = CheckBoxFilter.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilter.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p]), cols[p].type, cols[p].ignoreAccent);\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilter.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            return true;\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilter.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, getDatePredicate, getColumnByForeignKeyValue } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed || this.getModuleName() === 'foreignKey') {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n    }\n    Data.prototype.getModuleName = function () {\n        return 'data';\n    };\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        gObj.query = gObj.query instanceof Query ? gObj.query : new Query();\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.query.clone();\n        if (this.parent.columnQueryMode === 'ExcludeHidden') {\n            query.select(this.parent.getColumns().filter(function (column) { return !(column.isPrimaryKey !== true && column.visible === false || column.field === undefined); }).map(function (column) { return column.field; }));\n        }\n        else if (this.parent.columnQueryMode === 'Schema') {\n            var selectQueryFields = [];\n            var columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                selectQueryFields.push(columns[i].field);\n            }\n            query.select(selectQueryFields);\n        }\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        this.pageQuery(query, skipPage);\n        this.groupQuery(query);\n        return query;\n    };\n    Data.prototype.aggregateQuery = function (query, isForeign) {\n        this.parent.aggregates.forEach(function (row) {\n            row.columns.forEach(function (column) {\n                var types = column.type instanceof Array ? column.type : [column.type];\n                types.forEach(function (type) { return query.aggregate(type.toLowerCase(), column.field); });\n            });\n        });\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                var fn = col.sortComparer && !this.isRemote() ? col.sortComparer.bind(col) :\n                    columns[i].direction;\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    query.sortBy(col.field, fn);\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query) {\n        var _this = this;\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.parent.getColumns().map(function (f) { return f.field; });\n        var predicateList = [];\n        var needForeignKeySearch = false;\n        if (this.parent.searchSettings.key.length) {\n            needForeignKeySearch = this.parent.getForeignKeyColumns().some(function (col) { return fields.indexOf(col.field) > -1; });\n            if (needForeignKeySearch && !(this.dataManager.adaptor.getModulename &&\n                this.dataManager.adaptor.getModulename() === 'ODataV4Adaptor')) {\n                fields.forEach(function (columnName) {\n                    var column = _this.getColumnByField(columnName);\n                    if (column.isForeignColumn()) {\n                        predicateList = _this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(column.field, sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                });\n                query.where(Predicate.or(predicateList));\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var fPredicate = {};\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var checkBoxCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                if (colType[col.field] === 'CheckBox' || colType[col.field] === 'Excel') {\n                    checkBoxCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (checkBoxCols.length) {\n                var excelPredicate = CheckBoxFilter.getPredicate(checkBoxCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    var col = getColumnByForeignKeyValue(prop, foreignColumn);\n                    if (col && !skipFoerign) {\n                        predicateList = this.fGeneratePredicate(col, predicateList);\n                        actualFilter.push(col);\n                    }\n                    else {\n                        predicateList.push(excelPredicate[prop]);\n                    }\n                }\n            }\n            if (defaultFltrCols.length) {\n                for (var _e = 0, defaultFltrCols_1 = defaultFltrCols; _e < defaultFltrCols_1.length; _e++) {\n                    var col = defaultFltrCols_1[_e];\n                    var column_1 = this.getColumnByField(col.field) ||\n                        getColumnByForeignKeyValue(col.field, this.parent.getForeignKeyColumns());\n                    var sType = column_1.type;\n                    if (getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        if (sType !== 'date' && sType !== 'datetime') {\n                            predicateList.push(new Predicate(col.field, col.operator, col.value, !col.matchCase, this.parent.filterSettings.ignoreAccent));\n                        }\n                        else {\n                            predicateList.push(getDatePredicate(col, sType));\n                        }\n                    }\n                }\n            }\n            if (predicateList.length) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);\n                    break;\n            }\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                return crud.then(function (result) {\n                    return _this.insert(query, args);\n                });\n            }\n            else {\n                return this.insert(query, args);\n            }\n        }\n    };\n    Data.prototype.insert = function (query, args) {\n        if (args.requestType === 'save') {\n            this.parent.notify(events.recordAdded, args);\n        }\n        return this.executeQuery(query);\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);\n                break;\n        }\n        args[pr] = promise;\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key, original) {\n        var query = this.generateQuery().requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var state = void 0;\n            state = this.getStateEventArgument(query);\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var state;\n        var dataArgs = args;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs = args;\n                editArgs.key = key;\n                editArgs.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                this.parent.trigger(events.dataSourceChanged, editArgs);\n                deff.promise.then(function (e) {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    _this.parent.trigger(events.dataStateChange, state);\n                });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options) {\n        merge(this, options);\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var span = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var visible = 0;\n        for (var j = i + 1; j < i + span && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + span; j < i + span + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + span + visible >= row.cells.length) {\n                span -= (i + span + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (span > 1) {\n            attributes(td, { 'colSpan': span.toString(), 'aria-colSpan': span.toString() });\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extend({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getObject(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        foreignKeyData: row.cells[i].foreignKeyData\n                    }));\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1) {\n                        var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cols.push(this.generateCell({}, null, CellType.DetailExpand));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n        var options = {};\n        options.foreignKeyData = {};\n        options.uid = getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.isDataRow = true;\n        options.isExpand = false;\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = new Row(options);\n        row.cells = cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        this.parent.getForeignKeyColumns().forEach(function (col) {\n            setValue(col.field, getForeignData(col, options.data), options.foreignKeyData);\n        });\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var _this = this;\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        dummies.forEach(function (dummy, index) {\n            return tmp.push(_this.generateCell(dummy, options.uid, isNullOrUndefined(dummy.commands) ? undefined : CellType.CommandColumn, null, index, options.foreignKeyData));\n        });\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox') {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        input.forEach(function (row) {\n            _this.refreshForeignKeyRow(row);\n            row.cells = _this.generateCells(row);\n        });\n        return input;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        this.parent.aggregates.slice().forEach(function (row) {\n            var columns = row.columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new Column({})); });\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid)) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end) {\n        var _this = this;\n        if (this.parent.currentViewData.length === 0) {\n            return [];\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        this.getData().forEach(function (row, index) {\n            rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined, start, end));\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end) {\n        var _this = this;\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ||\n            !isNullOrUndefined(this.parent.childGrid) ? 1 : 0);\n        this.getColumns(start, end).forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : CellType.Indent, indents[index], isDetailGridAlone)); });\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.uid = getUid('grid-row');\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = { 'style': { 'textAlign': column.textAlign } };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var _this = this;\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        summaryRows.forEach(function (row) {\n            single = {};\n            row.columns.forEach(function (column) {\n                single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n            });\n            dummy.push(single);\n        });\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var _this = this;\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        types.forEach(function (type) {\n            var key = column.field + ' - ' + type.toLowerCase();\n            var disp = column.columnName;\n            var val = type !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(type, group.aggregates ? group : data, column, _this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][type] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        });\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.rows = [];\n        this.index = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level);\n        }\n        this.index = 0;\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n        var _a;\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level);\n                }\n            }\n        }\n        else {\n            this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level);\n            }\n            if (this.parent.aggregates.length) {\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n            }\n        }\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var _this = this;\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        cols.forEach(function (col, index) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = _this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            cells.push(_this.generateCell(column, null, cellType, indent));\n        });\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n        var options = {};\n        var tmp = [];\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        options.uid = getUid('grid-row');\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            setValue('foreignKey', col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col), row.data);\n        }\n    };\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        var indexes = this.parent.getColumnIndexesInView();\n        input.forEach(function (row) {\n            if (row.isDataRow) {\n                row.cells = _this.generateCells(row);\n                for (var j = 0; j < row.indent; j++) {\n                    if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n                        continue;\n                    }\n                    row.cells.unshift(_this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = _this.generateCaptionRow(row.data, row.indent);\n                row.cells = cRow.cells;\n            }\n        });\n        return input;\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.isLoaded = true;\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.getFrozenColumns() !== 0) {\n                    rows = args.isFrozen ? _this.freezeRows : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {});\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = this.parent.createElement('div', {\n            className: 'e-content'\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstChild;\n        var table = this.parent.createElement('table', {\n            className: 'e-table', attrs: {\n                cellspacing: '0.25px', role: 'grid',\n                id: this.parent.element.id + id\n            }\n        });\n        this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    ContentRender.prototype.splitRows = function (idx) {\n        if (this.parent.getFrozenColumns()) {\n            if (idx === 0) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = gObj.currentViewData;\n        var frag = document.createDocumentFragment();\n        var hdrfrag = document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        var modelData = this.generator.generateRows(dataSource, args);\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            mCont.querySelector('tbody').innerHTML = '';\n        }\n        var idx = modelData[0].cells[0].index;\n        // tslint:disable-next-line:no-any\n        if (this.parent.registeredTemplate && this.parent.registeredTemplate.template && !args.isFrozen) {\n            this.parent.destroyTemplate(['template']);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (frzCols && idx >= frzCols) {\n            this.tbody = mCont.querySelector('tbody');\n        }\n        else {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        for (var i = 0, len = modelData.length; i < len; i++) {\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                if (gObj.frozenRows && i < gObj.frozenRows) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n            }\n            else {\n                var elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n                if (elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = appendChildren(hdrfrag, elements);\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        tr = appendChildren(frag, elements);\n                    }\n                }\n            }\n            this.rows.push(modelData[i]);\n            if (modelData[i].isDataRow) {\n                //detailrowvisible \n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        this.splitRows(idx);\n        if (gObj.frozenRows) {\n            hdrTbody = frzCols ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n                : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n            hdrTbody.innerHTML = '';\n            hdrTbody.appendChild(hdrfrag);\n        }\n        if (gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (frzCols && idx === 0) {\n            this.getPanel().firstChild.style.overflowY = 'hidden';\n        }\n        args.rows = this.rows.slice(0);\n        args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            if (!_this.parent.enableVirtualization) {\n                remove(_this.tbody);\n                _this.tbody = _this.parent.createElement('tbody');\n            }\n            if (frzCols) {\n                _this.tbody.appendChild(frag);\n                if (_this.index === 0) {\n                    _this.isLoaded = false;\n                    fCont.querySelector('table').appendChild(_this.tbody);\n                }\n                else {\n                    if (_this.tbody.childElementCount < 1) {\n                        _this.tbody.appendChild(_this.parent.createElement('tr').appendChild(_this.parent.createElement('td')));\n                    }\n                    _this.isLoaded = true;\n                    mCont.querySelector('table').appendChild(_this.tbody);\n                    fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                    mCont.style.overflowY = _this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                    fCont.style.borderRightWidth = '1px';\n                }\n            }\n            else {\n                _this.appendContent(_this.tbody, frag, args);\n            }\n            if (frzCols && idx === 0) {\n                _this.refreshContentRows(extend({}, args));\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args) {\n        tbody.appendChild(frag);\n        this.getTable().appendChild(tbody);\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        return this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (frzCols) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            //used canSkip method to skip unwanted visible toggle operation. \n            if (this.canSkip(column, testRow, idx)) {\n                continue;\n            }\n            var displayVal = column.visible === true ? '' : 'none';\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n                    setStyleAttribute(mTable.childNodes[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshContentRows({ requestType: 'refresh' });\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        if (this.parent.getFrozenColumns()) {\n            this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; }).forEach(function (row) { return row.isSelected = set; });\n        }\n        this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n            .forEach(function (row) {\n            row.isSelected = set;\n            row.cells.forEach(function (cell) { return cell.isSelected = set; });\n        });\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    ContentRender.prototype.setRowObjects = function (rows) {\n        this.rows = rows;\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { parentsUntil, wrap } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (col.headerTemplate.indexOf('#') !== -1) {\n                    visualElement.innerHTML = document.querySelector(col.headerTemplate).innerHTML.trim();\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    return;\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-headercontent' });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        this.parent.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        if (!this.parent.getFrozenColumns()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().firstChild;\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var innerDiv = this.getPanel().firstChild;\n        var findHeaderRow = this.createHeaderContent();\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement('colgroup');\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, this.parent);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    HeaderRender.prototype.createHeaderContent = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = this.getObjDepth();\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col');\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col');\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows) {\n        var column;\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n        this.frzIdx = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var frzCols = this.parent.getFrozenColumns();\n        if (!cols.columns) {\n            if (!frzCols || (frzCols\n                && ((!isMovable && (this.frzIdx < this.parent.frozenColumns || cols.isFrozen))\n                    || (isMovable && this.frzIdx >= this.parent.frozenColumns && !cols.isFrozen)))) {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            this.frzIdx++;\n        }\n        else {\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var frzObj = this.refreshFrozenHdr(cols.columns, { isPartial: false, isComp: true, cnt: 0 });\n                if (!frzCols || (frzCols\n                    && ((!isMovable && (this.parent.frozenColumns - this.frzIdx > 0 || (frzObj.isPartial)))\n                        || (isMovable && (colSpan + this.frzIdx > this.parent.frozenColumns && !frzObj.isComp))))) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, isMovable, frzObj.cnt)\n                    }));\n                }\n            }\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol, isMovable);\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.refreshFrozenHdr = function (cols, frzObj) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                frzObj = this.refreshFrozenHdr(cols[i].columns, frzObj);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    frzObj.isPartial = true;\n                    frzObj.cnt++;\n                }\n                frzObj.isComp = frzObj.isComp && (cols[i].isFrozen ||\n                    this.parent.getColumnIndexByField(cols[i].field) < this.parent.frozenColumns);\n            }\n        }\n        return frzObj;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, isMovable, frozenCnt) {\n        var frzCol = this.parent.frozenColumns;\n        if (this.parent.getFrozenColumns() && this.frzIdx + colSpan > frzCol) {\n            if (isMovable) {\n                colSpan = colSpan - (frzCol > this.frzIdx ? frzCol - this.frzIdx : 0) - frozenCnt;\n            }\n            else {\n                colSpan = colSpan - (colSpan - (frzCol > this.frzIdx ? frzCol + frozenCnt - this.frzIdx : frozenCnt));\n            }\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal = '';\n        var idx;\n        var className;\n        var element;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            if (column.visible === false) {\n                displayVal = 'none';\n            }\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                    setStyleAttribute(mTblColGrp.children[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n            this.refreshUI();\n        }\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var headerDiv = this.getPanel();\n        var table = this.getTable();\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.getTable()) {\n            remove(this.getTable());\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement('colgroup');\n            var findHeaderRow = this.createHeaderContent();\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            this.setTable(table);\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().firstChild.appendChild(table);\n    };\n    HeaderRender.prototype.getObjDepth = function () {\n        var max = 0;\n        var cols = this.parent.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var depth = this.checkDepth(cols[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    HeaderRender.prototype.checkDepth = function (col, index) {\n        var max = index;\n        var indices = [];\n        if (col.columns) {\n            index++;\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                indices[i] = this.checkDepth(col.columns[i], index);\n            }\n            for (var j = 0; j < indices.length; j++) {\n                if (max < indices[j]) {\n                    max = indices[j];\n                }\n            }\n            index = max;\n        }\n        return index;\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n        for (var i = 0, len = headerRows.length; i < len; i++) {\n            var drag = new Draggable(headerRows[i], {\n                dragTarget: '.e-headercell',\n                distance: 5,\n                helper: this.helper,\n                dragStart: this.dragStart,\n                drag: this.drag,\n                dragStop: this.dragStop,\n                abort: '.e-rhandler'\n            });\n        }\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren, extendObjWithFn } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData } from '../base/constant';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n        this.element = this.parent.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = this.parent.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData) {\n        var _a;\n        var result;\n        if (cell.column.template) {\n            var literals = ['index'];\n            var dummyData = extendObjWithFn({}, data, (_a = {}, _a[foreignKeyData] = fData, _a));\n            result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template');\n            appendChildren(node, result);\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes) {\n        return this.refreshCell(cell, data, attributes);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var node = this.refreshCell(cell, data, attributes);\n        td.innerHTML = '';\n        var elements = [].slice.call(node.childNodes);\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            td.appendChild(elem);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n        var _a;\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if ((column.type === 'date' || column.type === 'datetime') && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', (innerHtml === '' ? 'empty' : innerHtml) + ' column header ' + cell.column.headerText);\n        if (!isNullOrUndefined(cell.column.headerText)) {\n            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        }\n        if (this.evaluate(node, cell, data, attributes, fData) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = _this.parent.createElement('span', { className: 'e-headertext' });\n        _this.sortEle = _this.parent.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = _this.parent.createElement('div');\n        _this.chkAllBox = _this.parent.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            result = column.getHeaderTemplate()(extend({ 'index': colIndex }, column), gridObj, 'headerTemplate');\n            node.firstElementChild.innerHTML = '';\n            appendChildren(node.firstElementChild, result);\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (this.parent.createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = this.parent.createElement('div', { className: 'e-stackedheadercelldiv' });\n        node.appendChild(div);\n        div.innerHTML = cell.column.headerText;\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var fKeyValue;\n        data.headerText = cell.column.headerText;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            if (gObj.groupSettings.captionTemplate.indexOf('#') !== -1) {\n                result = templateCompiler(document.querySelector(gObj.groupSettings.captionTemplate).innerHTML.trim())(data);\n            }\n            else {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n            }\n            appendChildren(node, result);\n        }\n        else {\n            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.className = 'e-recordplusexpand';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', 'true');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(this.parent.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, getDatePredicate, getObject } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n        this.parent.trigger(events.actionBegin, e);\n        if (e.cancel) {\n            this.parent.notify(events.cancelBegin, e);\n            return;\n        }\n        this.refreshDataManager(e);\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1 });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.foreignKeyValue === value.field;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement('tbody');\n        tr = this.parent.createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(this.parent.createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: gObj.getColumns().length.toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[i].field || '', data);\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(columns[i].format));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                setFormatter(this.locator, columns[i]);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var gObj = this.parent;\n        gObj.trigger(events.beforeDataBound, e);\n        var len = Object.keys(e.result).length;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n            gObj.hideSpinner();\n            return;\n        }\n        this.parent.isEdit = false;\n        this.parent.notify(events.tooltipDestroy, {});\n        gObj.currentViewData = e.result;\n        if (!len && e.count && gObj.allowPaging) {\n            gObj.prevPageMoving = true;\n            gObj.pageSettings.totalRecordsCount = e.count;\n            gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n            gObj.dataBind();\n            return;\n        }\n        if (!gObj.getColumns().length && len || !this.isLayoutRendered) {\n            this.updatesOnInitialRender(e);\n        }\n        if (!this.isColTypeDef && gObj.getCurrentViewRecords()) {\n            this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n        }\n        this.parent.notify(events.dataReady, extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n        if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n            this.headerRenderer.refreshUI();\n        }\n        if (len) {\n            this.contentRenderer.refreshContentRows(args);\n        }\n        else {\n            if (!gObj.getColumns().length) {\n                gObj.element.innerHTML = '';\n                alert(this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                return;\n            }\n            this.contentRenderer.setRowElements([]);\n            this.contentRenderer.setRowObjects([]);\n            this.renderEmptyRow();\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n            this.parent.hideSpinner();\n        }\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n        }\n        prepareColumns(this.parent.columns);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.buildColumns = function (record) {\n        var columns = Object.keys(record);\n        var cols = [];\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.columns = cols;\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            [group0, groupN].forEach(function (group) {\n                return predicate.push(new Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n            });\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            [group0, groupN].forEach(function (group) {\n                return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n            });\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var _this = this;\n        var dm = new DataManager(untouched);\n        current.forEach(function (element, index, array) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n            element.count = uGroup.count;\n            var itemGroup = element.items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                element.items = _this.updateGroupInfo(element.items, uGroup.items);\n            }\n            _this.parent.aggregates.forEach(function (row) {\n                return row.columns.forEach(function (column) {\n                    var types = column.type instanceof Array ? column.type : [column.type];\n                    types.forEach(function (type) {\n                        var key = column.field + ' - ' + type.toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = _this.parent;\n                        if (type === 'Custom') {\n                            var data_1 = itemGroup.level ? uGroupItem : uGroup;\n                            element.aggregates[key] = column.customAggregate ?\n                                column.customAggregate.call(context, data_1, column) : '';\n                        }\n                        else {\n                            element.aggregates[key] = DataUtil.aggregates[type.toLowerCase()](data, column.field);\n                        }\n                    });\n                });\n            });\n        });\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var _this = this;\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n        }\n        this.parent.getColumns().forEach(function (column, index) {\n            _this.setColumnWidth(column, wFlag ? undefined : index);\n        });\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index) {\n        var chrome = 'chrome';\n        var webstore = 'webstore';\n        if (typeof (width) === 'string' && width.indexOf('%') !== -1 &&\n            !(Boolean(window[chrome]) && Boolean(window[chrome][webstore])) && this.parent.allowGrouping) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = parseInt(width, 10) / 100 * (elementWidth);\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol) {\n            headerCol.style.width = fWidth;\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol) {\n            contentCol.style.width = fWidth;\n        }\n        var edit = content.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            if (edit.querySelector('colgroup').children[index]) {\n                edit.querySelector('colgroup').children[index].style.width = fWidth;\n            }\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n        var columns = this.parent.getColumns();\n        columns.splice(this.parent.getFrozenColumns(), columns.length);\n        var freezeWidth = formatUnit(this.getTableWidth(columns));\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var columns = this.parent.getColumns();\n        columns.splice(0, this.parent.getFrozenColumns());\n        var movableWidth = formatUnit(this.getTableWidth(columns));\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenTable();\n            this.setWidthToMovableTable();\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = true;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(this.parent.frozenRows === 0, this.parent.frozenColumns !== 0);\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.e-gridheader'));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.e-frozencontent')) ||\n            !isNullOrUndefined(closest(e.target, '.e-frozenheader'));\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-content')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-filtermenudiv')) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (closest(document.activeElement, '.e-filterbarcell') !== null ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null)));\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen) {\n        this.active = content ? isFrozen ? this.fContent : this.content :\n            isFrozen ? this.fHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : _this.content :\n                (e.args && e.args.isFrozen) ? _this.fHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector);\n            cFocus.matrix.generate(rows, cFocus.selector);\n            cFocus.generateRows(updateRow, { matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader : _this.header });\n            if (!Browser.isDevice && !_this.focusByClick && e && e.args && e.args.requestType === 'paging') {\n                _this.skipFocus = false;\n                _this.parent.element.focus();\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        var focusElement = _this.getContent().getFocusInfo().elementToFocus;\n                        if (focusElement) {\n                            var cellPosition = focusElement.getBoundingClientRect();\n                            var gridPosition = _this.parent.element.getBoundingClientRect();\n                            if (cellPosition.top >= 0 && cellPosition.left >= 0 &&\n                                cellPosition.right <= Math.min(gridPosition.right, window.innerWidth ||\n                                    document.documentElement.clientWidth) &&\n                                cellPosition.bottom <= Math.min(gridPosition.bottom, window.innerHeight ||\n                                    document.documentElement.clientHeight)) {\n                                _this.focus();\n                            }\n                        }\n                    }\n                }\n                else if (e.args.focusElement && e.args.focusElement.classList.contains('e-filtertext')) {\n                    var focusElement = _this.parent.element.querySelector('#' + e.args.focusElement.id);\n                    if (focusElement) {\n                        focusElement.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearIndicator, _this); });\n        ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n        this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n        this.parent.on(event.batchCancel, this.refreshMatrix(true), this);\n        this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n        this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n        this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n        this.parent.on(event.cellFocused, this.internalCellFocus, this);\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refreshMatrix(true));\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n        ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n        this.parent.off(event.batchAdd, this.refreshMatrix(true));\n        this.parent.off(event.batchDelete, this.refreshMatrix(true));\n        this.parent.off(event.batchCancel, this.refreshMatrix(true));\n        this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n        this.parent.off(event.onEmpty, this.refreshMatrix(true));\n        this.parent.off(event.cellFocused, this.internalCellFocus);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (this.parent.frozenColumns === 0 && this.parent.frozenRows === 0) {\n            return;\n        }\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.frozenColumns !== 0 }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        if (rowIndex === this.rows && action === 'downArrow') {\n            navigator[0] = -1;\n        }\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector) {\n        var _this = this;\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        rows.forEach(function (row, rIndex) {\n            var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n            _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n            cells.forEach(function (cell, cIndex) {\n                _this.set(rIndex, cIndex, selector(row, cell));\n            });\n        });\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.frozenColumns ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString()) {\n                return false;\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains('e-table') ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand)\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var info = {\n            swap: ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var _a;\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            var cell = table.rows[rowIndex].cells[cellIndex];\n            if (action === 'enter' || action === 'shiftEnter') {\n                return cell.classList.contains('e-rowcell');\n            }\n            if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                return true;\n            }\n            else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                return cell.getBoundingClientRect().width !== 0;\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains('e-rowcell') && !cell.classList.contains('e-unboundcell')\n                && !cell.classList.contains('e-templatecell') && !cell.classList.contains('e-detailcell') : true;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.getFrozenColumns() ?\n            this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains('e-rowcell') ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        info.elementToFocus = this.getFocusable(info.element);\n        info.outline = !info.element.classList.contains('e-filterbarcell');\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox' ||\n            cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            (action === 'leftArrow' || action === 'shiftTab') && current[1] === 0;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                frozenSwap,\n            toHeader: frozenSwap,\n            toFrozen: frozenSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var _this = this;\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            rows[0].cells.forEach(function (cell, cIndex) {\n                return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n            });\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rowIndex = _a[0], columnIndex = _a[1];\n        if (rowIndex < 0 || columnIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rowIndex + \".cells.\" + columnIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        return {\n            swap: (action === 'upArrow' || enterFrozen) && current[0] === 0\n                || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: (action === 'upArrow' || enterFrozen) && current[0] === 0\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current2[0] = previous[0];\n            current2[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n                || ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns),\n            toHeader: (action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current3[0] = previous[0];\n            current3[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, parentsUntil, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { iterateExtend } from '../base/util';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal variables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        this.preventFocus = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    Selection.prototype.initializeSelection = function () {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (args.cellIndex || args.rowIndex) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.getFrozenColumns()) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getCurrentBatchRecordChanges = function () {\n        var gObj = this.parent;\n        var added = 'addedRecords';\n        var deleted = 'deletedRecords';\n        if (gObj.editSettings.mode === 'Batch') {\n            var currentRecords = iterateExtend(this.parent.getCurrentViewRecords());\n            currentRecords = this.parent.editModule.getBatchChanges()[added].concat(currentRecords);\n            var deletedRecords = this.parent.editModule.getBatchChanges()[deleted];\n            var primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < (deletedRecords.length); i++) {\n                for (var j = 0; j < currentRecords.length; j++) {\n                    if (deletedRecords[i][primaryKey] === currentRecords[j][primaryKey]) {\n                        currentRecords.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            return currentRecords;\n        }\n        else {\n            return gObj.getCurrentViewRecords();\n        }\n    };\n    /**\n     * Selects a row by the given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectData = this.getCurrentBatchRecordChanges()[index];\n        if (gObj.enableVirtualization && gObj.allowGrouping && gObj.groupSettings.columns.length && selectedRow) {\n            selectData = gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')).data;\n        }\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                previousRow: gObj.getRowByIndex(this.prevRowIndex), previousRowIndex: this.prevRowIndex, target: this.target, cancel: false\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionBegin(args, events.rowSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        if (!this.selectionSettings.persistSelection) {\n            this.clearRow();\n        }\n        if (!isToggle) {\n            this.updateRowSelection(selectedRow, index);\n            if (gObj.getFrozenColumns()) {\n                this.updateRowSelection(selectedMovableRow, index);\n            }\n            gObj.selectedRowIndex = index;\n        }\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index,\n                row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                previousRowIndex: this.prevRowIndex, target: this.target\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionComplete(args, events.rowSelected);\n        }\n        this.updateRowProps(index);\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow) {\n        if (this.parent.getFrozenColumns()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.parent.selectedRowIndex = endIndex;\n    };\n    /**\n     * Selects a collection of rows by index.\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        var selectedRow = gObj.getRowByIndex(rowIndex);\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var frzCols = gObj.getFrozenColumns();\n        var can = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[rowIndexes[0]];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionBegin(args, events.rowSelecting);\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        this.clearRow();\n        gObj.selectedRowIndex = rowIndexes.slice(-1)[0];\n        if (!this.isSingleSel()) {\n            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                var rowIdx = rowIndexes_1[_i];\n                this.updateRowSelection(gObj.getRowByIndex(rowIdx), rowIdx);\n                if (frzCols) {\n                    this.updateRowSelection(gObj.getMovableRowByIndex(rowIdx), rowIdx);\n                }\n                this.updateRowProps(rowIndex);\n            }\n        }\n        else {\n            this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n            if (frzCols) {\n                this.updateRowSelection(gObj.getMovableRowByIndex(rowIndex), rowIndex);\n            }\n            this.updateRowProps(rowIndex);\n        }\n        args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionComplete(args, events.rowSelected);\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var can = 'cancel';\n        var target = this.target;\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args;\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var rowObj = this.getRowObj(rowIndex);\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            gObj.selectedRowIndex = rowIndex;\n            if (isUnSelected) {\n                this.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target);\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target, [selectedMovableRow]);\n            }\n            else {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionBegin(args, events.rowSelecting);\n                if (!isNullOrUndefined(args) && args[can] === true) {\n                    return;\n                }\n                if (this.isSingleSel()) {\n                    this.clearRow();\n                }\n                this.updateRowSelection(selectedRow, rowIndex);\n                if (frzCols) {\n                    this.updateRowSelection(selectedMovableRow, rowIndex);\n                }\n            }\n            if (!isUnSelected) {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionComplete(args, events.rowSelected);\n            }\n            this.updateRowProps(rowIndex);\n            if (this.isSingleSel()) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex < endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowSelection();\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.parent.selectedRowIndex = -1;\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if (this.parent.isPersistSelection && !isNullOrUndefined(selectedRow)) {\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(parseInt(row.getAttribute('aria-rowindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.getFrozenColumns() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide)');\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.enableSelectMultiTouch = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows = this.parent.getDataRows();\n            var data = [];\n            var row = [];\n            var mRow = [];\n            var rowIndex = [];\n            var frzCols = gObj.getFrozenColumns();\n            var foreignKeyData = [];\n            var target = this.target;\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data.push(rowObj.data);\n                    row.push(currentRow);\n                    rowIndex.push(this.selectedRowIndexes[i]);\n                    foreignKeyData.push(rowObj.foreignKeyData);\n                }\n                if (frzCols) {\n                    mRow.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                }\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex, data, row, foreignKeyData, target, mRow);\n            if (this.isCancelDeSelect === true) {\n                return;\n            }\n            rows.filter(function (record) { return record.hasAttribute('aria-selected'); }).forEach(function (ele) {\n                if (!_this.disableUI) {\n                    ele.removeAttribute('aria-selected');\n                    _this.addRemoveClassesForRow(ele, false, true, 'e-selectionbackground', 'e-active');\n                }\n                _this.updatePersistCollection(ele, false);\n                _this.updateCheckBoxes(ele);\n            });\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var movableRow = this.getSelectedMovableRow(this.selectedRowIndexes[i]);\n                if (movableRow) {\n                    if (!this.disableUI) {\n                        movableRow.removeAttribute('aria-selected');\n                        this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    this.updatePersistCollection(movableRow, false);\n                }\n            }\n            this.selectedRowIndexes = [];\n            this.selectedRecords = [];\n            this.isRowSelected = false;\n            this.parent.selectedRowIndex = -1;\n            this.rowDeselect(events.rowDeselected, rowIndex, data, row, foreignKeyData, target, mRow);\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, target, mRow) {\n        var cancl = 'cancel';\n        this.updatePersistCollection(row[0], false);\n        var rowDeselectObj = { rowIndex: rowIndex, data: data, row: row, foreignKeyData: foreignKeyData,\n            cancel: false, target: target };\n        this.parent.trigger(type, this.parent.getFrozenColumns() ? __assign({}, rowDeselectObj, { mRow: mRow }) : rowDeselectObj);\n        this.isCancelDeSelect = rowDeselectObj[cancl];\n        this.updateCheckBoxes(row[0]);\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols) {\n            if (cellIndex.cellIndex >= frzCols) {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        var cncl = 'cancel';\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        var selectedTable;\n        var cIdx;\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            this.onActionBegin(args, events.cellSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[cncl] === true) {\n            return;\n        }\n        this.clearCell();\n        if (!isToggle) {\n            this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n        }\n        this.updateCellProps(cellIndex, cellIndex);\n        if (!isToggle) {\n            this.onActionComplete({\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            }, events.cellSelected);\n        }\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        this.onActionBegin(args, events.cellSelecting);\n        if (!isNullOrUndefined(args) && args[cncl] === true) {\n            return;\n        }\n        this.clearCell();\n        if (startIndex.rowIndex > endIndex.rowIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n            if (this.selectionSettings.cellSelectionMode !== 'Box') {\n                min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                max = i === endIndex.rowIndex ? (endIndex.cellIndex) : this.getLastColIndex(i);\n            }\n            else {\n                min = startIndex.cellIndex;\n                max = endIndex.cellIndex;\n            }\n            cellIndexes = [];\n            for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                if (frzCols) {\n                    if (j < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(i, j);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(i, j);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                cellIndexes.push(j);\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n            }\n            this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n        }\n        this.updateCellProps(stIndex, edIndex);\n        this.onActionComplete({\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.onActionBegin({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n            isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        this.onActionComplete({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedTable;\n        var cIdx;\n        var selectedCell;\n        var frzCols = gObj.getFrozenColumns();\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var rowObj;\n        if (frzCols && cellIndexes[0].cellIndex >= frzCols) {\n            rowObj = gObj.getMovableRowsObject()[cellIndexes[0].rowIndex];\n        }\n        else {\n            rowObj = this.getRowObj(cellIndexes[0].rowIndex);\n        }\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            foreignKeyData.push(rowObj.cells[frzCols && cellIndexes[0].cellIndex >= frzCols\n                ? cellIndex.cellIndex - frzCols : cellIndex.cellIndex].foreignKeyData);\n            var args = {\n                data: selectedData, cellIndex: cellIndexes[0],\n                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n            };\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n            if (!isUnSelected) {\n                this.onActionComplete({\n                    data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                    previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                        undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n                }, events.cellSelected);\n            }\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var cells;\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (index >= frzCols) {\n                cells = this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n            }\n        }\n        if (!cells) {\n            cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index) {\n                if (frzCols) {\n                    if (index >= frzCols) {\n                        m += frzCols;\n                    }\n                }\n                return m;\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = this.getCurrentBatchRecordChanges();\n            var selectedTable = void 0;\n            var frzCols = gObj.getFrozenColumns();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        if (rowCell[i].cellIndexes[j] < frzCols) {\n                            cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                        else {\n                            cells.push(gObj.getMovableCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                    }\n                    else {\n                        foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n            this.prevECIdxs = undefined;\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.getFrozenColumns()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            if (!this.isCellDrag) {\n                this.selectRowsByRange(this.startIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, 'e-rowcell');\n                if (td) {\n                    this.selectLikeExcel(rowIndex, parseInt(td.getAttribute('aria-colindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (rowIndex, cellIndex) {\n        this.clearCellSelection();\n        this.selectCellsByRange({ rowIndex: this.startIndex, cellIndex: this.startCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n        this.isDragged = false;\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode === 'Box' && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = this.parent.createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                var tr = closest(e.target, 'tr');\n                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n                this.startCellIndex = parseInt(parentsUntil(target, 'e-rowcell').getAttribute('aria-colindex'), 10);\n                document.body.classList.add('e-disableuserselect');\n                var gBRect = gObj.element.getBoundingClientRect();\n                var postion = getPosition(e);\n                this.x = postion.x - gBRect.left;\n                this.y = postion.y - gBRect.top;\n                EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n                EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n            }\n        }\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.beforeFragAppend, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n        this.parent.on(events.headerRefreshed, this.refreshHeader, this);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.beforeFragAppend, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n        this.parent.off(events.headerRefreshed, this.refreshHeader);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n        }\n        this.checkBoxSelectionChanged();\n        this.initPerisistSelection();\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length) {\n            gObj.isCheckBoxSelection = !(this.selectionSettings.checkboxMode === 'ResetOnRowClick');\n        }\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.selectRow(this.parent.selectedRowIndex);\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        this.parent.off(events.contentReady, this.checkBoxSelectionChanged);\n        var gobj = this.parent;\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            var dataManager = data.getData({}, query);\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        if (!this.parent.getDataModule().isRemote()) {\n            if (state) {\n                for (var _i = 0, _a = this.getData(); _i < _a.length; _i++) {\n                    var data = _a[_i];\n                    this.selectedRowState[data[this.primaryKey]] = true;\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.dataSource.json;\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        if (rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            this.isSingleSel() && indexes.length > 0 ? this.selectRow(indexes[0], true) : this.selectRows(indexes);\n        }\n        if (this.parent.isCheckBoxSelection && this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        var _this = this;\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            e.data.slice().forEach(function (data) {\n                if (!isNullOrUndefined(data[_this.primaryKey])) {\n                    _this.updatePersistDelete(data[_this.primaryKey]);\n                }\n            });\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.getCurrentBatchRecordChanges().length) {\n            this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length));\n            this.parent.checkAllRows = 'Check';\n        }\n        else {\n            this.clearSelection();\n            this.parent.checkAllRows = 'Uncheck';\n        }\n        this.chkAllCollec = [];\n        if (this.parent.isPersistSelection) {\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = !this.parent.getDataModule().isRemote() ? this.getData().slice() : this.persistSelectedData;\n            }\n        }\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        if (stateStr === 'Intermediate') {\n            state = this.getCurrentBatchRecordChanges().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        this.checkSelectAllAction(!state);\n        this.target = null;\n        if (this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        this.isMultiCtrlRequest = true;\n        var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && this.parent.enableVirtualization && !this.parent.getDataModule().isRemote()) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                for (var data = 0; data < this.getData().length; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                if (index && this.parent.getRowByIndex(index).getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    ;\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection) {\n                checkedLen = this.selectedRecords.length;\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.getCheckAllBox()) {\n                var spanEle = this.getCheckAllBox().nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                if (checkedLen === this.totalRecordsCount && this.totalRecordsCount || (this.parent.enableVirtualization\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote() && checkedLen === this.getData().length)) {\n                    addClass([spanEle], ['e-check']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (checkedLen === 0 || this.getCurrentBatchRecordChanges().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                }\n                if (this.parent.enableVirtualization && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        target = parentsUntil(target, 'e-rowcell');\n        if ((target && target.parentElement.classList.contains('e-row') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                    this.target = closest(target, '.e-rowcell');\n                }\n            }\n            else {\n                var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        this.preventFocus = false;\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n            (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, true);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else if (this.isMultiShiftRequest) {\n            if (this.parent.isCheckBoxSelection || (!this.parent.isCheckBoxSelection && !this.target.classList.contains('e-gridchkbox'))) {\n                this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            }\n            else {\n                this.addRowsToSelection([rowIndex]);\n            }\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n        }\n        this.isDragged = false;\n    };\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute('aria-rowindex'));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.getFrozenColumns() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space');\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.e-rowcell'))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.e-rowcell'))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = prev.rowIndex ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n            if (this.parent.getFrozenColumns()) {\n                var cIdx = Number(e.element.getAttribute('aria-colindex'));\n                prev.cellIndex = prev.cellIndex ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n                cellIndex = cIdx;\n            }\n        }\n        if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n            rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n            return;\n        }\n        this.preventFocus = true;\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n        }\n        this.preventFocus = false;\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.parent.getRows().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check' && !this.selectionSettings.persistSelection) {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            if (cell) {\n                cells.push(cell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    Selection.prototype.addEventListener_checkbox = function () {\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n    };\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.click, this.clickHandler);\n    };\n    Selection.prototype.dataReady = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.disableUI = true;\n            this.clearSelection();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](./api-grid.html#searchsettings-searchsettingsmodel).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    Search.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'searching') {\n            this.parent.setProperties({ searchSettings: { key: '' } }, true);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = true;\n        });\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = false;\n        });\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.setVisible,\n                arg1: columns\n            });\n            return;\n        }\n        columns = isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n        if (this.parent.allowSelection && this.parent.getSelectedRecords().length) {\n            this.parent.clearSelection();\n        }\n        this.parent.notify(events.columnVisibilityChanged, columns);\n        if (this.parent.columnQueryMode !== 'All') {\n            this.parent.refresh();\n        }\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().firstChild;\n        if (this.parent.frozenRows && this.parent.height !== 'auto') {\n            mHdrHeight =\n                this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n            content.style.height = formatUnit(this.parent.height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(this.parent.height);\n        }\n        this.ensureOverflow(content);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n        this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](./api-grid.html#height) must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.frozenColumns) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var top = target.scrollTop;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onWheelScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var cont;\n            var mHdr;\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.getHeaderContent().contains(e.target)) {\n                mHdr = _this.parent.getFrozenColumns() ?\n                    _this.parent.getHeaderContent().querySelector('.e-movableheader') : _this.parent.getHeaderContent().firstChild;\n                if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                    return;\n                }\n                e.preventDefault();\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.previousValues.left = left;\n            }\n            else {\n                cont = _this.parent.getContent().querySelector('.e-frozencontent');\n                if (_this.previousValues.top === top || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n                    return;\n                }\n                e.preventDefault();\n                cont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.previousValues.top = top;\n            }\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.getFrozenColumns();\n            this.content = this.parent.getContent().firstChild;\n            this.header = this.parent.getHeaderContent().firstChild;\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (frzCols) {\n                EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n                EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n                EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n                EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n                EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            if (!_this.parent.enableVirtualization) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.getFrozenColumns()) {\n                        addClass(_this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if ((_this.parent.frozenRows > 0 || _this.parent.frozenColumns > 0) && _this.header.querySelector('.e-movableheader')) {\n                    _this.header.querySelector('.e-movableheader').scrollLeft = _this.previousValues.left;\n                }\n                else {\n                    _this.header.scrollLeft = _this.previousValues.left;\n                }\n                _this.content.scrollLeft = _this.previousValues.left;\n                _this.content.scrollTop = _this.previousValues.top;\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.frozenColumns && _this.header.querySelector('.e-movableheader')) {\n                _this.header.querySelector('.e-movableheader').scrollLeft =\n                    _this.content.querySelector('.e-movablecontent').scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        if (this.parent.getFrozenColumns()) {\n            content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n        else {\n            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        this.setWidth();\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n        removeClass([this.parent.getContent().firstChild], 'e-content');\n        //Remove height\n        this.parent.getContent().firstChild.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { print as printWindow, createElement, detach } from '@syncfusion/ej2-base';\nimport { removeElement, getActualProperties, getActualPropFromColl } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.printing = 'isPrinting';\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.contentReady.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.scrollModule = scrollModule;\n    }\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var elem = 'element';\n        var printGridModel = {};\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        document.body.appendChild(element);\n        for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (key === 'columns') {\n                printGridModel[key] = getActualPropFromColl(gObj[key]);\n            }\n            else if (key === 'allowPaging') {\n                printGridModel[key] = this.parent.printMode === 'CurrentPage';\n            }\n            else {\n                printGridModel[key] = getActualProperties(gObj[key]);\n            }\n        }\n        var printGrid = new Grid(printGridModel);\n        printGrid.appendTo(element);\n        printGrid.registeredTemplate = this.parent.registeredTemplate;\n        printGrid[this.printing] = true;\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            else if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Pager eleement process based on primt mode\n        if (gObj.allowPaging && gObj.printMode === 'CurrentPage') {\n            gObj.element.querySelector('.e-gridpager').style.display = 'none';\n        }\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') { // if scroller enabled\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.e-content');\n            var headerDiv = gObj.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj.groupSettings.columns.length, gObj.element);\n                removeElement(gObj.element, '.e-grouptopleftcell');\n                removeElement(gObj.element, '.e-recordpluscollapse');\n                removeElement(gObj.element, '.e-indentcell');\n                removeElement(gObj.element, '.e-recordplusexpand');\n            }\n        }\n        // hide horizontal scroll\n        gObj.element.querySelector('.e-content').style.overflowX = 'hidden';\n        //hide filter bar in print grid\n        if (gObj.allowFiltering && gObj.filterSettings.type === 'FilterBar') {\n            gObj.element.querySelector('.e-filterbar').style.display = 'none';\n        }\n        // Hide the waiting popup\n        var waitingPop = gObj.element.querySelectorAll('.e-spin-show');\n        if (waitingPop.length > 0) {\n            waitingPop[0].classList.add('e-spin-hide');\n            waitingPop[0].classList.remove('e-spin-show');\n        }\n        if (gObj[this.printing]) {\n            detach(gObj.element);\n        }\n        gObj.element.classList.remove('e-print-grid');\n        this.printWind = printWindow(gObj.element, this.printWind);\n        gObj[this.printing] = false;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n    };\n    Print.prototype.removeColGroup = function (depth, element) {\n        var groupCaption = element.querySelectorAll('.e-groupcaption');\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = element.querySelectorAll('colgroup');\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].childNodes[j].style.display = 'none';\n            }\n        }\n    };\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent[this.printing];\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = [\n        'aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging',\n        events.beforePrint, events.printComplete\n    ];\n    return Print;\n}());\nexport { Print };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\nimport { ValueFormatter } from '../services/value-formatter';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function (cultureName) {\n        var valueFormatter = new ValueFormatter(cultureName);\n        if (this.format && (this.format.skeleton || this.format.format)) {\n            this.formatFn = valueFormatter.getFormatFunction(this.format);\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, remove } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { readonly: 'true', tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.getFrozenColumns();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell')));\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            querySelectorAll('.e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]].querySelectorAll('.e-cellselectionbackground')));\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    this.copyContent += cells[j].textContent;\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var isBox = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort();\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue, getValue } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, append, classList } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, refreshForeignData, getRowHeight } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    __decorate([\n        Property('Default')\n    ], SelectionSettings.prototype, \"checkboxMode\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"template\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.freezeRefresh = Component.prototype.refresh;\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.prevPageMoving = false;\n        _this.needsID = true;\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    Grid.prototype.getPersistData = function () {\n        var _this = this;\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands', 'dataSource'];\n        keyEntity.forEach(function (value) {\n            var currentObject = _this[value];\n            for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        });\n        this.ignoreInArrays(ignoreOnColumn, this.columns);\n        return this.addOnPersist(keyEntity);\n    };\n    Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n        var _this = this;\n        columns.forEach(function (column) {\n            if (column.columns) {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n                _this.ignoreInArrays(ignoreOnColumn, column.columns);\n            }\n            else {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n            }\n        });\n    };\n    Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n        ignoreOnColumn.forEach(function (val) {\n            delete column[val];\n            column.filter = {};\n        });\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        /* tslint:disable */\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.freezeRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No Matches Found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Auto Fit all columns',\n            autoFit: 'Auto Fit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No Matches Found',\n            ClearFilter: 'Clear Filter',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            DateTimeFilter: 'DateTime Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H'\n        };\n        /* tslint:enable */\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        createSpinner({ target: this.element }, this.createElement);\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.getMediaColumns();\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Manually showed spinner needs to hide by `hideSpinnner`.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia)) {\n                        this.mediaCol.push(gcol[index]);\n                        var media = window.matchMedia(gcol[index].hideAtMedia);\n                        this.mediaQueryUpdate(index, media);\n                        media.addListener(this.mediaQueryUpdate.bind(this, index));\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        col.visible = e.matches;\n        if (this.isInitialLoad) {\n            if (col.visible) {\n                this.showHider.show(col.headerText, 'headerText');\n            }\n            else {\n                this.showHider.hide(col.headerText, 'headerText');\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        if (this.aggregates.length && this.element.scrollHeight > this.height) {\n            var footerContent = this.element.querySelector('.e-gridfooter');\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        var checkboxColumn = this.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length && this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            this.isCheckBoxSelection = false;\n            this.refreshHeader();\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        this.element.innerHTML = '';\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    // tslint:disable-next-line:max-func-body-length\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var freezeRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || !isNullOrUndefined(oldProp.pageSettings) &&\n                            ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                                && !this.enableColumnVirtualization && !this.enableVirtualization\n                                && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'currencyCode':\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                    freezeRefresh = true;\n                    requireGridRefresh = true;\n                    break;\n                case 'enableVirtualization':\n                    _super.prototype.refresh.call(this);\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            if (freezeRefresh || this.frozenColumns || this.frozenRows) {\n                this.freezeRefresh();\n            }\n            else {\n                this.refresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                var pending_1 = this.getDataModule().getState();\n                if (pending_1.isPending) {\n                    var gResult_1 = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    (pending_1.group || []).forEach(function (name) {\n                        gResult_1 = DataUtil.group(gResult_1, name, pending_1.aggregates || []);\n                    });\n                    this.dataSource = {\n                        result: gResult_1, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    this.renderModule.refresh();\n                }\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        if (this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            if (this.allowSorting || (this.allowGrouping && this.groupSettings.showDropArea) || this.allowReordering) {\n                row.classList.remove('e-defaultcursor');\n            }\n            else {\n                row.classList.add('e-defaultcursor');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateFrozenColumns();\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        var cols = this.columnModel;\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].isFrozen) {\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand'))) && !this.isEdit) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!cell) {\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var frzCols = this.getFrozenColumns();\n                var isMovable = frzCols ? cellIndex >= frzCols : false;\n                var rows = (isMovable ?\n                    this.contentModule.getMovableRows() : this.contentModule.getRows());\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = rowsObject[0].data;\n                var column = rowsObject[0].cells[isMovable ? cellIndex - frzCols : cellIndex].column;\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderTable().querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                dRows.push(rows[i]);\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        var rows = [].slice.call(this.getContent().querySelector('.e-movablecontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var fieldIdx;\n        var col;\n        var tr;\n        var mTr;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var selectedRow = {};\n        var movableSelectedRow = {};\n        var rowObjects = this.contentModule.getRows();\n        var movableRowObjects = this.contentModule.getMovableRows();\n        fieldIdx = this.getColumnIndexByField(field);\n        if (this.groupSettings.columns.length > 0 || this.childGrid || this.detailTemplate) {\n            fieldIdx = fieldIdx + 1;\n        }\n        col = this.getColumnByField(field);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        movableSelectedRow = movableRowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        tr = !isNullOrUndefined(selectedRow) ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        mTr = !isNullOrUndefined(movableSelectedRow) ? this.element.querySelector('[data-uid=' + movableSelectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var td = !isNullOrUndefined(tr.childNodes[fieldIdx]) ?\n                tr.childNodes[fieldIdx] : mTr.childNodes[fieldIdx - this.frozenColumns];\n            if (!isNullOrUndefined(td)) {\n                var sRow = selectedRow[cells][fieldIdx];\n                var mRow = void 0;\n                if (this.frozenColumns) {\n                    mRow = movableSelectedRow[cells][fieldIdx - this.frozenColumns];\n                }\n                cell.refreshTD(td, !isNullOrUndefined(sRow) ? sRow : mRow, selectedRow[rowData], { index: selectedRow[rowIdx] });\n                if (this.aggregates.length > 0) {\n                    this.notify(events.refreshFooterRenderer, {});\n                    if (this.groupSettings.columns.length > 0) {\n                        this.notify(events.groupAggregates, {});\n                    }\n                }\n                /* tslint:disable:no-string-literal */\n                if (!isNullOrUndefined(movableSelectedRow) && !isNullOrUndefined(movableSelectedRow['changes'])) {\n                    movableSelectedRow['changes'][field] = value;\n                }\n                /* tslint:disable:no-string-literal */\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *  @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     *  @param {Object} rowData - To update new data for the particular row.\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rwdata = 'data';\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var selectedRow;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        if (this.groupSettings.columns.length > 0 && this.aggregates.length > 0) {\n            rowObjects = rowObjects.filter(function (row) { return row.isDataRow; });\n        }\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n            if (this.aggregates.length > 0) {\n                this.notify(events.refreshFooterRenderer, {});\n                if (this.groupSettings.columns.length > 0) {\n                    this.notify(events.groupAggregates, {});\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - this.getFrozenColumns()];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.getFrozenColumns()) {\n            if (!row) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                return row;\n            }\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        return this.contentModule.getMovableRows();\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n    };\n    /**\n     * Gets a column header by UID.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditTemplate = function () {\n        return this.editTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        for (var k = 0; k < this.columnModel.length; k++) {\n            if (this.columnModel[k].isPrimaryKey) {\n                keys.push(this.columnModel[k].field);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        this.headerModule.refreshUI();\n        this.updateStackedFilter();\n        this.renderModule.refresh();\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule.selectedRowCellIndexes;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule ? this.selectionModule.getSelectedRecords() : [];\n    };\n    /**\n     * Gets the data module.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var col = this.columns;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (col[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen && cols[i].visible) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        this.pagerModule.goToPage(pageNo);\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        this.pagerModule.updateExternalMessage(message);\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        this.sortModule.sortColumn(columnName, direction, isMultiSort);\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        this.sortModule.clearSorting();\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        this.sortModule.removeSortColumn(field);\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function () {\n        this.filterModule.clearFiltering();\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        this.selectionModule.selectRow(index, isToggle);\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        this.selectionModule.selectRows(rowIndexes);\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        this.selectionModule.clearSelection();\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        this.selectionModule.selectCell(cellIndex, isToggle);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./api-searchSettings.html).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        this.searchModule.search(searchString);\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        this.printModule.print();\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * To edit any particular row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Grid.prototype.startEdit = function () {\n        this.editModule.startEdit();\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        this.editModule.endEdit();\n    };\n    /**\n     * Cancels edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        this.editModule.closeEdit();\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        this.editModule.addRecord(data, index);\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        this.editModule.deleteRow(tr);\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        this.clipboardModule.copy(withHeader);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = 0;\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (this.enableColumnVirtualization) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isDetail()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n        }\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        this.reorderModule.reorderColumns(fromFName, toFName);\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        this.resizeModule.autoFitColumns(fieldNames);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        this.columnChooserModule.renderColumnChooser(x, y, target);\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var _this = this;\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending' });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    column.visible = false;\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            sCols.forEach(function (col) {\n                _this.sortedColumns.push(col.field);\n            });\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        this.editTemplateFn = templateCompiler(this.editSettings.template);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = this.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = this.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, this.createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(this.createElement('span'));\n        append([content, this.createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var td = element;\n        var table = headerTable.contains(element) ? htable : ctable;\n        var ele = headerTable.contains(element) ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (element) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.toolTipObj.open(element);\n                }\n                else {\n                    this.toolTipObj.close();\n                }\n            }\n            else {\n                this.toolTipObj.close();\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = this.createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = this.createElement('tr');\n        var mytd = this.createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    Grid.prototype.keyPressed = function (e) {\n        if (e.action === 'tab' || e.action === 'shiftTab') {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.on(events.keyPressed, this.keyPressed, this);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.off(events.keyPressed, this.keyPressed);\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @hidden\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, 'e-gridcontent') ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n            e.preventDefault();\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        this.trigger(events.recordDoubleClick, args);\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        if ((!e.relatedTarget || !parentsUntil(e.relatedTarget, 'e-grid'))\n            && !this.keyPress && this.editSettings.mode === 'Batch' && this.isEdit && !Browser.isDevice) {\n            this.editModule.saveCell();\n            this.notify(events.editNextValCell, {});\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mergePersistGridData = function () {\n        var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj = JSON.parse(data);\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var _this = this;\n        storedColumn.forEach(function (col, index, arr) {\n            var ind;\n            var localCol = _this.getColumnByField(col.field) ||\n                columns.some(function (element, i) {\n                    ind = i;\n                    return element.headerText === col.headerText;\n                }) && columns[ind];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    _this.mergeColumns(col.columns, localCol.columns);\n                }\n                else {\n                    arr[index] = extend({}, localCol, col, true);\n                }\n            }\n        });\n    };\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        this.keyPress = e.action !== 'space';\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.isPreventScrollEvent = true;\n        this.updateColumnObject();\n        this.refresh();\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n    /* tslint:disable-next-line:no-any */\n    workbook, isBlob) {\n        return this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob);\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, isBlob) {\n        return this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob);\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, pdfDoc, isBlob) {\n        return this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob);\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        this.groupModule.groupColumn(columnName);\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        this.groupModule.ungroupColumn(columnName);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    Grid.prototype.destroyTemplate = function (propertyNames) {\n        this.clearTemplate(propertyNames);\n    };\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Property('All')\n    ], Grid.prototype, \"columnQueryMode\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    Grid = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\nGrid.Inject(Selection);\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;        \n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n            } : { requestType: 'sorting', type: events.actionBegin, cancel: false };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        var _this = this;\n        this.sortedColumns = [];\n        this.sortSettings.columns.forEach(function (e) {\n            _this.sortedColumns.push(e.field);\n        });\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        this.clearSorting();\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !e.target.classList.contains('e-stackedheadercell') &&\n            !e.target.classList.contains('e-stackedheadercelldiv') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv')) {\n            var gObj = this.parent;\n            var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n                'Descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (!isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                (isNullOrUndefined(header) || !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = createElement('div');\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = createElement('div');\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n        this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page',\n            pagerAllDropDown: 'Items',\n            All: 'All'\n        };\n        /**\n         * `containerModule` is used to manipulate numeric container behavior of Pager.\n         */\n        _this.containerModule = new NumericContainer(_this);\n        /**\n         * `pagerMessageModule` is used to manipulate pager message of Pager.\n         */\n        _this.pagerMessageModule = new PagerMessage(_this);\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            this.pagerTemplate();\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes() && this.pagerdropdownModule) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        this.element.innerHTML = '';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged();\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    this.refresh();\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes()) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage && this.externalMessageModule) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function () {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        var args = { currentPage: this.currentPage, cancel: false };\n        this.trigger('click', args);\n        if (!args.cancel) {\n            this.refresh();\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        result = this.getPagerTemplate()(data);\n        appendChildren(this.element, result);\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            this.element.innerHTML = '';\n            this.updateTotalPages();\n            this.pagerTemplate();\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var _this = this;\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            });\n        }\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? this.convertValue(pageSizesModule) :\n            [this.pagerModule.getLocalizedLabel('All'), '5', '10', '12', '20']);\n        var defaultValue = this.pagerModule.pageSize;\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue.toString(),\n            change: this.onChange.bind(this),\n            cssClass: 'e-alldrop'\n        });\n        this.dropDownListObject.appendTo(input);\n        if (pageSizesModule.length) {\n            this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();\n        }\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n        this.addEventListener();\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel('All')) {\n            this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;\n            this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerAllDropDown');\n            e.value = this.pagerModule.pageSize;\n            if (document.getElementsByClassName('e-popup-open e-alldrop').length) {\n                document.getElementsByClassName('e-popup-open e-alldrop')[0].style.display = 'none';\n            }\n        }\n        else {\n            this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);\n            if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel('pagerDropDown')) {\n                this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerDropDown');\n            }\n        }\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n    };\n    PagerDropDown.prototype.beforeValueChange = function (prop) {\n        if (typeof prop.newProp.value === 'number') {\n            var val = prop.newProp.value.toString();\n            prop.newProp.value = val;\n        }\n    };\n    PagerDropDown.prototype.convertValue = function (pageSizeValue) {\n        var item = pageSizeValue;\n        for (var i = 0; i < item.length; i++) {\n            item[i] = typeof item[i] === 'number' ? item[i].toString() : item[i];\n        }\n        return item;\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    PagerDropDown.prototype.addEventListener = function () {\n        this.dropDownListObject.on('beforeValueChange', this.beforeValueChange, this);\n    };\n    PagerDropDown.prototype.removeEventListener = function () {\n        this.dropDownListObject.off('beforeValueChange', this.beforeValueChange);\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.removeEventListener();\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        this.element.style.display = 'none';\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nPager.Inject(ExternalMessage, PagerDropDown);\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n        }\n        this.element = this.parent.createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        this.pageSettings.currentPage = 1;\n    };\n    Page.prototype.addAriaAttr = function () {\n        var _this = this;\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = this.parent.createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = this.parent.createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                if (_this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n                }\n            });\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                this.isForceCancel = true;\n                this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        this.parent.notify(events.modelChanged, {\n            requestType: 'paging',\n            previousPage: prevPage,\n            currentPage: e.currentPage,\n            type: events.actionBegin\n        });\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.appendTo(this.element);\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        this.pagerDestroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { appendChildren } from '../base/util';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return this.parent.createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            if (data) {\n                fltrData[column.field] = data[column.field];\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            if (column.visible) {\n                var element = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate');\n                appendChildren(node, element);\n            }\n            else {\n                node.classList.add('e-hide');\n            }\n        }\n        else {\n            if (column.type !== 'checkbox') {\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    node.classList.add('e-fltrtemp');\n                    attributes(innerDIV, {\n                        'class': 'e-fltrtempdiv'\n                    });\n                    if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                        input = this.parent.createElement('input', {\n                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            attrs: { type: 'search', title: column.headerText }\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                    else {\n                        var args = { column: column, node: Element };\n                        var temp = column.filterBarTemplate.create;\n                        if (typeof temp === 'string') {\n                            temp = getValue(temp, window);\n                        }\n                        input = temp(args);\n                        if (typeof input === 'string') {\n                            var div = this.parent.createElement('div');\n                            div.innerHTML = input;\n                            input = div.firstChild;\n                        }\n                        attributes(innerDIV, {\n                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            title: column.headerText,\n                            id: column.field + '_filterBarcell',\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                }\n                else {\n                    attributes(innerDIV, {\n                        'class': 'e-filterdiv e-fltrinputdiv'\n                    });\n                    input = this.parent.createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n                        attrs: {\n                            type: 'search', title: column.headerText + cell.attributes.title,\n                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                        }\n                    });\n                    innerDIV.appendChild(input);\n                    var args = {\n                        element: input, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.createInput(args, this.parent.createElement);\n                }\n                //TODO: apply intial filtering\n                if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                    input.setAttribute('disabled', 'true');\n                    input.classList.add('e-disable');\n                }\n                if (!column.visible) {\n                    node.classList.add('e-hide');\n                }\n                this.appendHtml(node, innerDIV);\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    var templateWrite = column.filterBarTemplate.write;\n                    var args = { element: input, column: column };\n                    if (typeof templateWrite === 'string') {\n                        templateWrite = getValue(templateWrite, window);\n                    }\n                    templateWrite.call(this, args);\n                }\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = (!isNullOrUndefined(this.parent.filterSettings.operators) &&\n            !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n            this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = this.parent.createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') { // rewuired or not\n            selValue = this.optrData[0].text;\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion } from '../base/util';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var data;\n        var floptr;\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = new AutoComplete(this.getAutoCompleteOptions(args));\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        return {\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return mapObj[_this.actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            }\n        };\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox({\n            format: args.column.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        });\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        });\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getCustomDateFormat } from '../base/util';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var format = getCustomDateFormat(args.column.format, args.column.type);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        if (args.column.type === 'date') {\n            this.datePickerObj = new DatePicker({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            });\n        }\n        else if (args.column.type === 'datetime') {\n            this.datePickerObj = new DateTimePicker({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            });\n        }\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n    }\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) { ///\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function () {\n        if (!this.dlgObj) {\n            return;\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            this.parent.notify(events.filterMenuClose, { field: this.col.field });\n            this.isDialogOpen = false;\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen, filterModel: this,\n            columnName: column.field, columnType: column.type\n        };\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = this.parent.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(target, this.dlgObj, this.parent);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        this.dlgObj.element.style.maxHeight = '350px';\n        this.dlgObj.show();\n        if (!column.filterTemplate) {\n            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            filterModel: this, columnName: column.field, columnType: column.type\n        };\n        this.isDialogOpen = true;\n        this.parent.trigger(events.actionComplete, args);\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = this.parent.createElement('div', { className: 'e-flmenu-valuediv' });\n        var fObj = this.filterObj;\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            fltrData[column.field] = fObj.values[column.field];\n            if (column.foreignKeyValue) {\n                fltrData[column.foreignKeyValue] = fObj.values[column.foreignKeyValue];\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            var compElement = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate');\n            appendChildren(valueDiv, compElement);\n        }\n        else {\n            if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n                && !isNullOrUndefined(column.filter.ui.create)) {\n                var temp = column.filter.ui.create;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                temp({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n                });\n            }\n            else {\n                instanceofFilterUI.create({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n                });\n            }\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || col.foreignKeyValue === column.field) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (col.filterTemplate) {\n            var element = this.dlgDiv.querySelector('.e-flmenu-valuediv');\n            var fltrValue = void 0;\n            if (element.children[0].value) {\n                fltrValue = element.children[0].value;\n            }\n            else {\n                fltrValue = element.children[0].ej2_instances[0].value;\n            }\n            this.filterObj.filterByColumn(col.field, flOptrValue, fltrValue);\n        }\n        else {\n            if (!isNullOrUndefined(col.filter) &&\n                !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n                var temp = col.filter.ui.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n            }\n            else {\n                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n            }\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n        var flIcon = column.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.add('e-filtered');\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { isNullOrUndefined, } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n    };\n    ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilter.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilter.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilter.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left, e.target);\n        }\n    };\n    ExcelFilter.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterThanOrEqual' && predicates[1].operator === 'lessThanOrEqual') {\n                selectedMenu = 'Between';\n            }\n            else {\n                selectedMenu = 'CustomFilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilter.prototype.preventClose = function (args) {\n        if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n            args.cancel = true;\n        }\n    };\n    ExcelFilter.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilter.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        return (leftPos < 1) ? (targetPosition.right + 1) : (targetPosition.left - contextWidth - 1);\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2));\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilter.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilter.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e.element;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                if (_this.options.column.filterTemplate) {\n                    row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n                }\n                else {\n                    row.cells[1].querySelector('input:not([type=hidden])').focus();\n                }\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilter.prototype.removeDialog = function () {\n        this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilter.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        if (Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.dlgObj.show();\n    };\n    ExcelFilter.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilter.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.parent.filterSettings.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var col = this.parent.getColumnByField(fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue\n            });\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (secondValue) {\n            secondOperator = !isNullOrUndefined(secondOperator) ? secondOperator : 'equal';\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /* tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        if (col.isForeignColumn()) {\n            this.foreignKeyFilter(args, fColl, mPredicate);\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilter.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilter.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilter.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else {\n            operator = isFirst ? 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilter.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilter.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /* tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilter.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilter.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var isFilteredCol = this.filterSettings.columns.some(function (col) { return column === col.field; });\n        var fltrPredicates = this.options.filteredColumns.filter(function (col) { return col.field === column; });\n        if (this.options.column.filterTemplate) {\n            var data = {};\n            var columnObj = this.parent.getColumnByField(column);\n            if (isFilteredCol && elementId === '-xlfl-frstvalue') {\n                data = { column: predicates instanceof Array ? predicates[0] : predicates };\n                var indx = this.options.column.columnData && fltrPredicates.length > 1 ?\n                    (this.options.column.columnData.length === 1 ? 0 : 1) : 0;\n                data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] :\n                    fltrPredicates[indx].value;\n                if (this.options.foreignKeyValue) {\n                    data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n                }\n            }\n            var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate');\n            appendChildren(valueDiv, element);\n            valueDiv.children[0].id = isComplex ? complexFieldName + elementId : column + elementId;\n            value.appendChild(valueDiv);\n        }\n        else {\n            var valueInput = this.parent\n                .createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n            valueDiv.appendChild(valueInput);\n            value.appendChild(valueDiv);\n            var flValue = void 0;\n            var predicate = void 0;\n            if (predicates && predicates.length > 0) {\n                predicate = predicates.length === 2 ?\n                    (isFirst ? predicates[0] : predicates[1]) :\n                    (isFirst ? predicates[0] : undefined);\n                flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n            }\n            var types = {\n                'string': this.renderAutoComplete.bind(this),\n                'number': this.renderNumericTextBox.bind(this),\n                'date': this.renderDate.bind(this),\n                'datetime': this.renderDateTime.bind(this)\n            };\n            types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /* tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.datePicker = new DatePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        });\n        this.datePicker.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.dateTimePicker = new DateTimePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        });\n        this.dateTimePicker.appendTo(inputValue);\n    };\n    ExcelFilter.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue\n        });\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.parent.getColumnByField(column);\n        var isForeignColumn = colObj.isForeignColumn();\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return isComplex ? _this.performComplexDataOperation(actObj.fields.value, mapObject)\n                            : mapObject[actObj.fields.value];\n                    }).indexOf(isComplex ? _this.performComplexDataOperation(actObj.fields.value, obj) :\n                        obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            value: fValue\n        });\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    ExcelFilter.prototype.performComplexDataOperation = function (value, mapObject) {\n        var returnObj;\n        var length = value.split('.').length;\n        var splits = value.split('.');\n        var duplicateMap = mapObject;\n        for (var i = 0; i < length; i++) {\n            returnObj = duplicateMap[splits[i]];\n            duplicateMap = returnObj;\n        }\n        return returnObj;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.values = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e)) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        this.filterSettings.columns = [];\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.getFrozenColumns() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n        this.currentFilterObject = {\n            field: field, operator: this.operator, value: this.value, predicate: this.predicate,\n            matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n        };\n        var index = this.getFilteredColsIndexByField(col);\n        if (index > -1) {\n            this.filterSettings.columns[index] = this.currentFilterObject;\n        }\n        else {\n            this.filterSettings.columns.push(this.currentFilterObject);\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === col.field || (col.isForeignColumn() && cols[i].field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.clickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.getColumnByField(fieldName);\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.predicate = predicate || 'and';\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n            this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n            this.updateFilterMsg();\n            return;\n        }\n        if (filterCell && this.filterSettings.type === 'FilterBar' && filterCell.value !== filterValue) {\n            filterCell.value = filterValue;\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        this.actualPredicate[this.fieldName] = [{\n                field: this.fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: this.operator,\n                value: this.value,\n                type: this.column.type\n            }];\n        this.addFilteredClass(this.fieldName);\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        this.parent.notify(events.modelChanged, {\n                            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                                this.column.field : undefined,\n                            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n                        });\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.getColumnByField(this.filterSettings.columns[i].field) ||\n                    getColumnByForeignKeyValue(this.filterSettings.columns[i].field, this.parent.getForeignKeyColumns());\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.filterSettings.columns[i].field);\n                if (filterElement) {\n                    if (!isNullOrUndefined(this.cellText[this.filterSettings.columns[i].field])) {\n                        filterElement.value = this.cellText[this.filterSettings.columns[i].field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[i].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function () {\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeFilteredColsByField(cols[i].field, false);\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        var gObj = this.parent;\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n        var dataSource = col.filter.dataSource || gObj.getDataModule().dataManager;\n        this.filterModule.openDialog({\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format,\n            filteredColumns: gObj.filterSettings.columns, target: target,\n            sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: this.parent.localeObj\n        });\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var column = this.parent.getColumnByField(field) ||\n                getColumnByForeignKeyValue(field, this.parent.getForeignKeyColumns());\n            if (cols[i].field === field || cols[i].field === column.foreignKeyValue) {\n                if (this.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + cols[i].field + '_filterBarcell\\']';\n                    fCell = this.parent.getHeaderContent().querySelector(selector);\n                    if (fCell) {\n                        fCell.value = '';\n                        delete this.values[field];\n                    }\n                }\n                cols.splice(i, 1);\n                var fltrElement = this.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this.isRemove = true;\n                if (this.actualPredicate[field]) {\n                    delete this.actualPredicate[field];\n                }\n                if (this.values[field]) {\n                    delete this.values[field];\n                }\n                this.parent.notify(events.modelChanged, {\n                    requestType: 'filtering', type: events.actionBegin, currentFilterObject: {\n                        field: column.field, operator: this.operator, value: this.value, predicate: this.predicate,\n                        matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                    }, currentFilterColumn: column\n                });\n                break;\n            }\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if ((this.filterSettings.mode === 'Immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.getColumnByField(columns[index].field) ||\n                        getColumnByForeignKeyValue(columns[index].field, this.parent.getForeignKeyColumns());\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            new Date(this.values[column.field]) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater_1 = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater_1.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        var skipInput;\n        if (column.type === 'number') {\n            skipInput = ['=', ' ', '!'];\n            if (DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            skipInput = ['>', '<', '=', '!'];\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (skipInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.getFrozenColumns()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase, this.ignoreAccent);\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = true;\n        switch (this.column.type) {\n            case 'number':\n                this.operator = this.filterOperators.equal;\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    this.operator = this.filterOperators.startsWith;\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                this.operator = this.filterOperators.equal;\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            var gClient = gObj.element.getBoundingClientRect();\n            var fClient = target.getBoundingClientRect();\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule &&\n                (!parentsUntil(target, 'e-popup-wrapper')\n                    && (!closest(target, '.e-filter-item.e-menu-item'))\n                    && (!parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n                this.filterModule.closeDialog(target);\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            this.parent.renderModule.refresh(); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            /* tslint:disable-next-line:max-line-length */\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent) {\n        this.actualPredicate[fieldName] = [{\n                field: fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: operator,\n                value: value,\n                type: type\n            }];\n        this.addFilteredClass(fieldName);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil } from '../base/util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var frzCols = gObj.getFrozenColumns();\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (frzCols) {\n            if (index < frzCols) {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n            }\n            else {\n                headerTable = gObj.getHeaderContent().querySelector('.e-movableheader').children[0];\n                contentTable = gObj.getContent().querySelector('.e-movablecontent').children[0];\n                headerTextClone = headerTable.querySelectorAll('th')[columnIndex - frzCols].cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n        }\n        var indentWidthClone = headerTable.querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var columnbyindex = gObj.getColumns()[index];\n        var result;\n        var width = (wHeader > wContent) ? columnbyindex.width = formatUnit(wHeader) : columnbyindex.width = formatUnit(wContent);\n        this.widthService.setColumnWidth(gObj.getColumns()[index]);\n        result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            gObj.getColumns().forEach(function (element) {\n                if (element.visible) {\n                    tWidth = tWidth + parseInt(element.width, 10);\n                }\n            });\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.getFrozenColumns()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        var _this = this;\n        fName.forEach(function (element) {\n            var fieldName = element;\n            var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n            if (_this.parent.getColumns()[columnIndex].visible === true) {\n                _this.resizeColumn(fieldName, columnIndex);\n            }\n        });\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        text.forEach(function (element) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(element);\n            myTable.appendChild(tr);\n        });\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        this.getResizeHandlers().forEach(function (ele) {\n            if (ele.parentElement.offsetHeight > 0) {\n                ele.style.height = ele.parentElement.offsetHeight + 'px';\n            }\n        });\n        this.setHandlerHeight();\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.getFrozenColumns() ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress)).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.element = e.target;\n                if (this.parent.getVisibleFrozenColumns()) {\n                    var mtbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                    var ftbody = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n                    var mtr = mtbody.querySelectorAll('tr');\n                    var ftr = ftbody.querySelectorAll('tr');\n                    for (var i = 0; i < mtr.length; i++) {\n                        if (this.parent.rowHeight) {\n                            mtr[i].style.height = this.parent.rowHeight + 'px';\n                            ftr[i].style.height = this.parent.rowHeight + 'px';\n                        }\n                        else {\n                            mtr[i].style.removeProperty('height');\n                            ftr[i].style.removeProperty('height');\n                        }\n                    }\n                }\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.parent.enableRtl) {\n                    this.minMove = parseInt(this.column.width.toString(), 10)\n                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n                        - parseInt(this.column.width.toString(), 10);\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = {\n                    e: e,\n                    column: this.column\n                };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n                EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n                EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n                this.updateCursor('add');\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.resizing = function (e) {\n        if (this.parent.allowTextWrap) {\n            this.element.style.height = this.element.parentElement.offsetHeight + 'px';\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = {\n            width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n            minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n            maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n        };\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n            width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseInt(this.column.width.toString(), 10)) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            this.widthService.setColumnWidth(this.column, null, 'resize');\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = {\n            e: e,\n            column: this.column\n        };\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.getFrozenColumns()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var column = columns_1[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (rect.parentElement.children.length !== frzCols) {\n                tr.splice(0, tr.length / 2);\n            }\n            else {\n                tr.splice(tr.length / 2, tr.length / 2);\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.getFrozenColumns()) {\n            var table = closest(rect, '.e-table');\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        return (srcElem.parentElement.isEqualNode(destElem.parentElement) || (this.parent.getFrozenColumns()\n            && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && column.allowReordering === false)) {\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || destColumn.allowReordering === false) {\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.getColumns(true).filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var headers = this.getHeaderCells();\n                var oldIdx = getElementIndex(this.element, headers);\n                var columns = this.getColumnsModel(this.parent.columns);\n                var column_2 = columns[oldIdx];\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                this.moveColumns(newIndex, column_2);\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        gObj.notify(events.modelChanged, {\n            type: events.actionBegin, requestType: 'reorder'\n        });\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = this.getHeaderCells();\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        if (this.parent.getFrozenColumns()) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            var mRows = [].slice.call(this.parent.getHeaderContent()\n                .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n            for (var i = 0; i < fRows.length; i++) {\n                fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                fHeaders = fHeaders.concat(fTh);\n                for (var j = 0; j < mTh.length; j++) {\n                    if (!fTh.length || j !== 0 || fTh[fTh.length - 1].innerText !== mTh[0].innerText) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        var fColumn = this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && !fColumn.allowReordering) || (!isNullOrUndefined(toColumn) && !toColumn.allowReordering)) {\n            return;\n        }\n        var column = this.parent.getColumnByField(toFName);\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n        }\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function () {\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (e.column.allowReordering === false) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var isLeft = this.x > getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader')\n            .getBoundingClientRect().left : cliRect.left;\n        var cliRectBaseRight = cliRect.right;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (e.column.allowReordering === false) {\n            return;\n        }\n        this.x = getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable } from '@syncfusion/ej2-base';\nimport { extend } from '@syncfusion/ej2-base';\nimport { remove, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        //Internal variables    \n        this.selectedRows = [];\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (!e.sender.target.classList.contains('e-selectionbackground') && gObj.selectionSettings.type !== 'Single')) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = _this.parent.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = _this.parent.createElement('tbody');\n            if (gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                var index = parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10);\n                gObj.selectRow(index);\n            }\n            var selectedRows = gObj.getSelectedRows();\n            for (var i = 0, len = selectedRows.length; i < len; i++) {\n                var selectedRow = selectedRows[i].cloneNode(true);\n                removeElement(selectedRow, '.e-indentcell');\n                removeElement(selectedRow, '.e-detailrowcollapse');\n                removeElement(selectedRow, '.e-detailrowexpand');\n                tbody.appendChild(selectedRow);\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            gObj.trigger(events.rowDragStart, {\n                rows: gObj.getSelectedRows(),\n                target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n            _this.isDragStop = false;\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            gObj.trigger(events.rowDrag, {\n                rows: gObj.getSelectedRows(),\n                target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            gObj.element.classList.add('e-rowdrag');\n            if (!parentsUntil(target, 'e-gridcontent') ||\n                parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var target = _this.getElementFromPosition(e.helper, e.event);\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            var args = {\n                target: target, draggableType: 'rows', cancel: false,\n                rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n            };\n            gObj.trigger(events.rowDrop, args);\n            if (!parentsUntil(target, 'e-gridcontent') || args.cancel) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        var column;\n        var drag;\n        drag = new Draggable(gObj.getContent(), {\n            dragTarget: '.e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') !== 'grouping') {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl = void 0;\n            var currentIndex = void 0;\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else {\n                return;\n            }\n            if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges                   \n            gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n            var selectedRows = srcControl.getSelectedRowIndexes();\n            var skip = srcControl.allowPaging ?\n                (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n            this.selectedRows = [];\n            for (var i = 0, len = records.length; i < len; i++) {\n                this.selectedRows.push(skip + selectedRows[i]);\n            }\n            srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n            srcControl.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function () {\n            _this.parent.element.classList.add('e-ungroupdrag');\n        };\n        this.drag = function (e) {\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            if (!(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'))) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n        this.groupGenerator = new GroupModelGenerator(this.parent);\n    }\n    Group.prototype.columnDrag = function (e) {\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.groupAggregates, this.onGroupAggregates, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.groupAggregates, this.onGroupAggregates);\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if ((!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var toExpand = [];\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n            }\n            this.aria.setExpand(trgt, expand);\n            for (var i = 0, len = rows.length; i < len; i++) {\n                if (rows[i].querySelectorAll('td')[cellIdx] &&\n                    rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                    if (isHide) {\n                        rows[i].style.display = 'none';\n                    }\n                    else {\n                        if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                            rows[i].style.display = '';\n                            expandElem = rows[i].querySelector('.e-recordplusexpand');\n                            if (expandElem) {\n                                toExpand.push(expandElem);\n                            }\n                            if (rows[i].classList.contains('e-detailrow')) {\n                                if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                    rows[i].style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = this.parent.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: '.e-groupheadercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.push(this.colName);\n        this.groupSettings.columns = columns;\n        this.groupAddSortingQuery(this.colName);\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending' });\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var groupedColumn = this.parent.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = this.parent.createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            if (column.headerTemplate.indexOf('#') !== -1) {\n                childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n            }\n            else {\n                childDiv.innerHTML = column.headerTemplate;\n            }\n            childDiv.firstElementChild.classList.add('e-grouptext');\n        }\n        else {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-grouptext', innerHTML: column.headerText,\n                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n            }));\n        }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(this.parent.createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            remove(this.getGHeaderCell(field));\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        var _this = this;\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'columns':\n                    var args = void 0;\n                    if (this_1.contentRefresh) {\n                        if (!this_1.isAppliedUnGroup) {\n                            if (!this_1.isAppliedGroup) {\n                                this_1.updateGroupDropArea(true);\n                                for (var i = 0; i < this_1.groupSettings.columns.length; i++) {\n                                    this_1.colName = this_1.groupSettings.columns[i];\n                                    var col = this_1.parent.getColumnByField(this_1.colName);\n                                    col.visible = this_1.parent.groupSettings.showGroupedColumn;\n                                    this_1.groupAddSortingQuery(this_1.colName);\n                                    if (i < this_1.groupSettings.columns.length - 1) {\n                                        this_1.addColToGroupDrop(this_1.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = { columnName: this_1.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin };\n                        }\n                        else {\n                            args = { requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this_1.groupSettings.showGroupedColumn) {\n                            e.oldProperties[prop].forEach(function (column) {\n                                if (e.properties[prop].indexOf(column) === -1) {\n                                    _this.parent.getColumnByField(column).visible = true;\n                                }\n                            });\n                        }\n                        this_1.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this_1.updateGroupDropArea();\n                    this_1.groupSettings.showDropArea ? this_1.element.style.display = '' : this_1.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this_1.updateGroupedColumn(this_1.groupSettings.showGroupedColumn);\n                    this_1.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this_1.parent.refreshHeader();\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (!this.parent.isDestroyed) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    Group.prototype.onGroupAggregates = function (editedData) {\n        var _this = this;\n        var aggregates = this.iterateGroupAggregates(editedData);\n        var rowData = this.groupGenerator.generateRows(aggregates, {});\n        var summaryRows = this.parent.getRowsObject().filter(function (row) { return !row.isDataRow; });\n        var updateSummaryRows = rowData.filter(function (data) { return !data.isDataRow; });\n        updateSummaryRows.forEach(function (row, indx) {\n            var cells = row.cells.filter(function (cell) { return cell.isDataCell; });\n            var args = { cells: cells, data: row.data, dataUid: summaryRows[indx] ? summaryRows[indx].uid : '' };\n            _this.parent.notify(events.refreshAggregateCell, args);\n        });\n    };\n    Group.prototype.iterateGroupAggregates = function (editedData) {\n        var updatedData = editedData instanceof Array ? editedData : [];\n        var rows = this.parent.getRowsObject();\n        var initData = this.parent.getCurrentViewRecords();\n        var deletedCols = [];\n        var changeds = rows.map(function (row) {\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.changes instanceof Object ? row.changes : row.data;\n        });\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        changeds = updatedData.length === 0 ? changeds : updatedData;\n        var mergeData = initData.map(function (item) {\n            var pKeyVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return pKeyVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            deletedCols.forEach(function (row) {\n                var index = mergeData.indexOf(row);\n                mergeData.splice(index, 1);\n            });\n        }\n        var aggregates = [];\n        var aggregateRows = this.parent.aggregates;\n        aggregateRows.forEach(function (row) {\n            row.columns.forEach(function (col) {\n                var aggr = {};\n                var type = col.type.toString();\n                aggr = { type: type.toLowerCase(), field: col.field };\n                aggregates.push(aggr);\n            });\n        });\n        var result;\n        var aggrds;\n        var groupedCols = this.parent.groupSettings.columns;\n        groupedCols.forEach(function (field) {\n            aggrds = result ? result : mergeData;\n            result = DataUtil.group(aggrds, field, aggregates, null, null);\n        });\n        return result;\n    };\n    return Group;\n}());\nexport { Group };\n","import { closest, classList } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var parent = 'parentDetails';\n        if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n            var tr = target.parentElement;\n            var uid_1 = tr.getAttribute('data-uid');\n            var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n            if (target.classList.contains('e-detailrowcollapse')) {\n                var key = 'records';\n                var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n                    gObj.currentViewData[key] : gObj.currentViewData;\n                var data = currentViewData[tr.getAttribute('aria-rowindex')];\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = '';\n                }\n                else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                    var detailRow = this.parent.createElement('tr', { className: 'e-detailrow' });\n                    var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                    detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n                    var row = new Row({\n                        isDataRow: true,\n                        isExpand: true,\n                        cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                    });\n                    for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                        detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                        row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                    }\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    if (gObj.detailTemplate) {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n                    }\n                    else {\n                        gObj.childGrid[parent] = {\n                            parentID: gObj.element.id,\n                            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                            parentKeyField: gObj.childGrid.queryString,\n                            parentKeyFieldValue: data[gObj.childGrid.queryString],\n                            parentRowData: data\n                        };\n                        var grid = new Grid(gObj.childGrid);\n                        var modules = grid.getInjectedModules();\n                        var injectedModues = gObj.getInjectedModules();\n                        if (!modules || modules.length !== injectedModues.length) {\n                            grid.setInjectedModules(injectedModues);\n                        }\n                        var gridElem = this.parent.createElement('div', {\n                            id: 'child' + parents(tr, 'e-grid').length +\n                                '_grid' + tr.rowIndex + getUid('')\n                        });\n                        detailCell.appendChild(gridElem);\n                        grid.appendTo(gridElem);\n                    }\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    var idx_1;\n                    this.parent.getRowsObject().some(function (r, rIndex) { idx_1 = rIndex; return r.uid === uid_1; });\n                    gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                    this.parent.getRowsObject().splice(idx_1 + 1, 0, row);\n                    gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n                    gObj.notify(events.detailDataBound, { rows: this.parent.getRowsObject() });\n                }\n                classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n                classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n                this.parent.getRowsObject()[tr.rowIndex].isExpand = true;\n                this.aria.setExpand(target, true);\n            }\n            else {\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = 'none';\n                }\n                classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n                classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n                this.parent.getRowsObject()[tr.rowIndex].isExpand = false;\n                this.aria.setExpand(target, false);\n            }\n        }\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren } from '../base/util';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            template: '<div class=\"e-input-group e-search\" role=\"search\">\\\n            <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n            placeholder= \\\"' + this.l10n.getConstant('Search') + '\\\"/>\\\n            <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n            tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n            </div>',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: this.l10n.getConstant('Columnchooser'), tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right',\n        };\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n            }\n            else {\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl\n        });\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.toolbarTemplate) {\n            if (typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n        this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing && hasData ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting && hasData ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            var element = this.element.querySelector('#' + item);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        gObj.trigger(events.toolbarClick, args);\n        if (args.cancel) {\n            return;\n        }\n        switch (!isNullOrUndefined(args.item) && args.item.id) {\n            case gID + '_print':\n                gObj.print();\n                break;\n            case gID + '_edit':\n                gObj.startEdit();\n                break;\n            case gID + '_update':\n                gObj.endEdit();\n                break;\n            case gID + '_cancel':\n                gObj.closeEdit();\n                break;\n            case gID + '_add':\n                gObj.addRecord();\n                break;\n            case gID + '_delete':\n                gObj.deleteRecord();\n                break;\n            case gID + '_search':\n                if (args.originalEvent.target.id === gID + '_searchbutton') {\n                    this.search();\n                }\n                break;\n            case gID + '_columnchooser':\n                var tarElement = this.parent.element.querySelector('.e-ccdiv');\n                var y = tarElement.getBoundingClientRect().top;\n                var x = tarElement.getBoundingClientRect().left;\n                var targetEle = args.originalEvent.target;\n                y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                gObj.createColumnchooser(x, y, targetEle);\n                break;\n        }\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.getFrozenColumns()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            innerDiv.appendChild(fDiv);\n            innerDiv.appendChild(mDiv);\n            this.frozenContent = fDiv;\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.getFrozenColumns()) {\n            var freezeTable = table.cloneNode(true);\n            this.frozenContent.appendChild(freezeTable);\n            this.freezeTable = freezeTable;\n            this.movableContent.appendChild(table);\n            remove(table.querySelector('colgroup'));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector('tbody'));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = e;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        if (this.parent.getFrozenColumns()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            this.freezeTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.freezeTable, 0, this.parent.getFrozenColumns());\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), this.parent.getFrozenColumns());\n        // check freeze content have no row case\n        if (this.parent.getFrozenColumns()) {\n            var frozenDiv = this.frozenContent;\n            if (!frozenDiv.offsetHeight) {\n                frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table \n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns());\n            this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector('colGroup'));\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var fCol = this.parent.getFrozenColumns();\n        if (fCol && fCol > index) {\n            return this.freezeTable.querySelector('colGroup').children[index];\n        }\n        return this.getColGroup().children[index - fCol];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n        this.parent.on(refreshFooterRenderer, this.refreshFooterRenderer, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n        this.parent.off(refreshFooterRenderer, this.refreshFooterRenderer);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        var _this = this;\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var deletedCols = [];\n        var mergeds;\n        var rows = this.parent.frozenColumns > 0 ? this.parent.getMovableRowsObject() : this.parent.getRowsObject();\n        var initds = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.getCurrentViewRecords();\n        var addrow = [];\n        var changeds = rows.map(function (row) {\n            if (row.changes && row.edit === 'add') {\n                addrow.push(row.changes);\n            }\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.isDirty && row.changes ? row.changes : row.data;\n        });\n        changeds = editedData.length === 0 ? changeds : editedData;\n        mergeds = initds.map(function (item) {\n            var idVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return idVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var currentData = this.parent.groupSettings.columns.length > 0 && 'records' in this.parent.currentViewData ?\n            this.parent.getCurrentViewRecords() : this.parent.currentViewData;\n        var currentds;\n        currentds = currentData.map(function (item) {\n            var idVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = mergeds.some(function (cItem) {\n                value = cItem;\n                return idVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        if (addrow.length > 0) {\n            addrow.forEach(function (row) { mergeds.push(row); currentds.push(row); });\n        }\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            deletedCols.forEach(function (row) {\n                var index = mergeds.indexOf(row);\n                var curIndx = currentData.indexOf(row);\n                mergeds.splice(index, 1);\n                if (currentds && currentds.length) {\n                    currentds.splice(curIndx, 1);\n                }\n            });\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        aggregateRows.forEach(function (row) {\n            row.columns.forEach(function (col) {\n                var data = [];\n                var type = col.type.toString();\n                data = type.toLowerCase() === 'custom' && !isNullOrUndefined(currentds) ? currentds : mergeds;\n                agrVal = calculateAggregate(type, data, col, _this.parent);\n                aggregate[col.field + ' - ' + type.toLowerCase()] = agrVal;\n            });\n        });\n        var result = {\n            result: this.parent.groupSettings.columns.length > 0 ? mergeds : currentds,\n            count: mergeds.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { refreshAggregateCell } from '../base/constant';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        this.parent.on(refreshAggregateCell, this.refreshWithAggregate(node, cell), this);\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            return true;\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n        return false;\n    };\n    SummaryCellRenderer.prototype.refreshWithAggregate = function (node, cell) {\n        var _this = this;\n        var cellNode = cell;\n        return function (args) {\n            var cell = cellNode;\n            var field = cell.column.columnName ? cell.column.columnName : null;\n            var curCell = (!isNullOrUndefined(field) ? args.cells.filter(function (cell) {\n                return cell.column.columnName === field;\n            })[0] : null);\n            if (node.parentElement && node.parentElement.getAttribute('data-uid') === args.dataUid && field &&\n                field === curCell.column.columnName) {\n                _this.refreshTD(node, curCell, args.data);\n            }\n        };\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var prevTop = 0;\n        var prevLeft = 0;\n        var debounced100 = debounce(callback, 100);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top ? 'down' : 'up';\n            direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n            prevTop = top;\n            prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                onEnterCallback(_this.element, current, direction, { top: top, left: left });\n            }\n            if (check) {\n                var fn = debounced100; //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                    focusElement: document.activeElement });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var _this = this;\n        var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        this.checkAndResetCache(notifyArgs.requestType);\n        if (this.parent.enableColumnVirtualization) {\n            info.blockIndexes.forEach(function (value) {\n                if (_this.isBlockAvailable(value)) {\n                    _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n                }\n            });\n        }\n        info.blockIndexes.forEach(function (value) {\n            if (!_this.isBlockAvailable(value)) {\n                var rows = _this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n                });\n                var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n                if (!_this.isBlockAvailable(indexes[0])) {\n                    _this.cache[indexes[0]] = rows.slice(0, median);\n                }\n                if (!_this.isBlockAvailable(indexes[1])) {\n                    _this.cache[indexes[1]] = rows.slice(median);\n                }\n            }\n            if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n                _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n            }\n            result.push.apply(result, _this.cache[value]);\n            if (_this.isBlockAvailable(value)) {\n                loadedBlocks.push(value);\n            }\n        });\n        info.blockIndexes = loadedBlocks;\n        var grouping = 'records';\n        if (this.parent.allowGrouping) {\n            this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n        }\n        else {\n            this.parent.currentViewData = result.map(function (m) { return m.data; });\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n            .some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n        Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n            block = block + gLen;\n            _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n        });\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var _this = this;\n        var currentFirst = current[0];\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) {\n            if (Number(key) < block) {\n                rows = rows.concat(_this.cache[key]);\n            }\n        });\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var _this = this;\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        _this.currentInfo = {};\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().firstChild;\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === _this.getTotalBlocks();\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n        this.virtualEle.adjustTable(cOffset, translate);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization);\n        remove(target);\n        target = this.parent.createElement('tbody');\n        target.appendChild(newChild);\n        this.getTable().appendChild(target);\n        if (this.parent.groupSettings.columns.length) {\n            if (info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused) {\n            this.content.focus();\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    VirtualContentRenderer.prototype.setVirtualHeight = function () {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        if (result + blockHeight > this.offsets[this.getTotalBlocks()]) {\n            result -= (result + blockHeight) - this.offsets[this.getTotalBlocks()];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e) {\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(x, 0);\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return this.parent.getDataRows()[index - startIdx];\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var _this = this;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        Array.apply(null, Array(total)).map(function () { return ++row; })\n            .forEach(function (block) {\n            var tmp = (_this.vgenerator.cache[block] || []).length;\n            var rem = _this.count % bSize;\n            var size = block in _this.vgenerator.cache ?\n                tmp * _this.parent.getRowHeight() : rem && block === total ? rem * _this.parent.getRowHeight() : _this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n            _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n        });\n        this.offsetKeys = Object.keys(this.offsets);\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().firstChild;\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.refreshUI.call(this);\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.enableColumnVirtualization) {\n            renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n        }\n        renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        this.blockSize = ~~(this.parent.height / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var mTbody;\n        var tbody;\n        if (this.parent.frozenRows) {\n            tbody = this.parent.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.getContentTable().querySelector('tbody');\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').classList.add('e-hide');\n        }\n        tbody.insertBefore(args.row, tbody.firstChild);\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        if (this.parent.getFrozenColumns()) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.frozenRows) {\n                mTbody = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.insertBefore(mEle, mTbody.firstChild);\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.getFrozenColumns()) {\n            var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n            var fCont = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n            var mCont = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            var fHdr = this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            if (this.parent.frozenRows && idx >= this.parent.frozenRows) {\n                idx -= this.parent.frozenRows;\n            }\n            if (fCont.contains(row)) {\n                return mCont.children[idx];\n            }\n            else if (mCont.contains(row)) {\n                return fCont.children[idx];\n            }\n            else if (fHdr.contains(row)) {\n                return mHdr.children[idx];\n            }\n            else if (mHdr.contains(row)) {\n                return fHdr.children[idx];\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        if (closest(args.row, '.e-movablecontent')) {\n            args.row = this.getFreezeRow(args.row);\n        }\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        tdElement = this.updateFreezeEdit(args.row, tdElement);\n        args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n        args.row.classList.add('e-editedrow');\n        this.refreshFreezeEdit(args.row, args);\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        if (this.parent.getFrozenColumns()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.e-frozenheader';\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.e-frozencontent';\n            }\n            var mTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                form.innerHTML = '';\n                this.appendChildren(form, args.rowData, false);\n            }\n            var fRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add('e-editedrow');\n        }\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        if (!this.parent.editSettings.template) {\n            this.renderMovable(ele, mEle);\n            mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n                .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        }\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        var frzCols = this.parent.getFrozenColumns();\n        for (var i = 0; i < frzCols; i++) {\n            mEle.querySelector('tr').removeChild(mEle.querySelector('tr').children[0]);\n        }\n        for (var i = frzCols, len = ele.querySelector('tr').childElementCount; i < len; i++) {\n            ele.querySelector('tr').removeChild(ele.querySelector('tr').children[ele.querySelector('tr').childElementCount - 1]);\n        }\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length - gObj.getVisibleFrozenColumns() + gLen + isDetail).toString() }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = this.parent.createElement('tbody');\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            var td_1 = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate'));\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { classList } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        args.cell.innerHTML = '';\n        args.cell.appendChild(this.getEditElement(elements, args));\n        args.cell.classList.add('e-editedbatchcell');\n        classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper', styles: 'width: auto' });\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        var position = this.parent.element.getBoundingClientRect().height < 400 ?\n            { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = args.dialog = new Dialog({\n            header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements, args),\n            showCloseIcon: true,\n            allowDragging: true,\n            position: position,\n            close: this.dialogClose.bind(this),\n            closeOnEscape: true, width: gObj.editSettings.template ? 'auto' : '330px',\n            target: gObj.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        });\n        this.dialogObj.appendTo(this.dialog);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n        this.destroy();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate'));\n            div.appendChild(form);\n            return div;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (!cols[i].visible || cols[i].commands || cols[i].commandsTemplate) {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = this.parent.createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, extend } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.element.querySelector('.e-gridform');\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute('aria-rowindex'), 10);\n            if (gObj.frozenRows && (args.requestType === 'add' || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            }\n            else {\n                fForm = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n                var cellArgs = extend({}, args);\n                cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                if (isNullOrUndefined(cellArgs.element) && frzCols) {\n                    cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                }\n                if (typeof col.edit.write === 'string') {\n                    getObject(col.edit.write, window)(cellArgs);\n                }\n                else {\n                    col.edit.write(cellArgs);\n                }\n                continue;\n            }\n            if (!col.visible || col.commands) {\n                continue;\n            }\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (frzCols && cols.indexOf(col) >= frzCols && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            elem.focus();\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        if (this.parent.editSettings.template) {\n            return {};\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (!col.visible) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var cell = cells.filter(function (cell) { return cell.commands; })[0];\n                var td = cellRenderer.render(cell, args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (col.editTemplate) {\n                input = this.parent.createElement('span', { attrs: { 'e-mappinguid': col.uid } });\n                appendChildren(input, col.getEditTemplate()(args.rowData, this.parent, 'editTemplate'));\n            }\n            else {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    input = temp(tArgs);\n                }\n                else {\n                    input = col.edit.create(tArgs);\n                }\n                if (typeof input === 'string') {\n                    var div = this.parent.createElement('div');\n                    div.innerHTML = input;\n                    input = div.firstChild;\n                }\n                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n                var complexFieldName = getComplexFieldID(col.field);\n                attributes(isInput ? input.querySelector('input') : input, {\n                    name: complexFieldName, 'e-mappinguid': col.uid,\n                    id: gObj.element.id + complexFieldName\n                });\n                classList(input, ['e-input', 'e-field'], []);\n                if (col.textAlign === 'Right') {\n                    input.classList.add('e-ralign');\n                }\n                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                    (col.isIdentity && args.requestType === 'add')) { // already disabled in cell plugins\n                    input.setAttribute('disabled', 'true');\n                }\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            chkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? '' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = e.result;\n        }\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n            var dlgObj = this.parent.element.querySelector('#' + dlgElement.id).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend, Internationalization } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.create = function (args) {\n        var complexFieldName = getComplexFieldID(args.column.field);\n        this.instances = new Internationalization(this.parent.locale);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        var value = this.instances.getNumberParser({ format: 'n' })(element.value);\n        return value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new NumericTextBox(extend({\n            value: parseFloat(getObject(args.column.field, args.rowData)),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n        }, col.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID } from '../base/util';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = this.parent.createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + getComplexFieldID(col.field), name: getComplexFieldID(col.field),\n                style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var inputargs = {\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n                placeholder: isInline ? '' : args.column.headerText\n            }\n        };\n        Input.createInput(inputargs, this.parent.createElement);\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { parentsUntil, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    this.parent.selectRow(0);\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                this.parent.selectRow(this.editRowIndex);\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData\n        };\n        gObj.trigger(events.beginEdit, args);\n        args.type = 'actionBegin';\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.clearSelection();\n        }\n        if (gObj.editSettings.mode === 'Dialog') {\n            gObj.selectionModule.preventFocus = true;\n            args.row.classList.add('e-dlgeditrow');\n        }\n        this.renderer.update(args);\n        this.uid = tr.getAttribute('data-uid');\n        gObj.editModule.applyFormValidation();\n        args.type = 'actionComplete';\n        gObj.trigger(events.actionComplete, args);\n        this.args = args;\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var gObj = this.parent;\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index]\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        gObj.refresh();\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var form1 = gObj.editModule.formObj.validate();\n        var form2 = gObj.editModule.mFormObj ? gObj.editModule.mFormObj.validate() : true;\n        return (form1 && form2);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n        if (gObj.getFrozenColumns() && gObj.editSettings.mode === 'Normal') {\n            var mForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            if (gObj.frozenRows && mForm) {\n                editedData = gObj.editModule.getCurrentEditedData(mForm, editedData);\n            }\n            else {\n                editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform'), editedData);\n            }\n        }\n        if (gObj.element.querySelectorAll('.e-editedrow').length) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            gObj.showSpinner();\n            gObj.notify(events.updateData, args);\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add') {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e)) {\n            args.data = e;\n        }\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        this.refreshRow(args.data);\n        this.updateCurrentViewData(args.data);\n        this.parent.trigger(events.actionComplete, args);\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection)) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n            }\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, e);\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            row.refresh(rowObj, this.parent.getColumns(), true);\n            if (frzCols) {\n                var uid = void 0;\n                var tr = this.parent.element.querySelector('[data-uid=' + rowObj.uid + ']');\n                if ((parentsUntil(tr, 'e-frozencontent')) || (parentsUntil(tr, 'e-frozenheader'))) {\n                    uid = this.parent.getMovableRows()[rowObj.index].getAttribute('data-uid');\n                }\n                else {\n                    uid = this.parent.getRows()[rowObj.index].getAttribute('data-uid');\n                }\n                rowObj = this.parent.getRowObjectFromUID(uid);\n                rowObj.changes = data;\n                row.refresh(rowObj, this.parent.columns, true);\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        gObj.trigger(events.actionBegin, args);\n        if (this.parent.editSettings.mode === 'Dialog') {\n            this.parent.notify(events.dialogDestroy, {});\n        }\n        gObj.isEdit = false;\n        this.stopEditStatus();\n        args.type = events.actionComplete;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            this.refreshRow(args.data);\n        }\n        if (gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n            !gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.getContentTable().querySelector('tr.e-emptyrow').classList.remove('e-hide');\n        }\n        if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.selectRow(this.rowIndex);\n        }\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        gObj.columns.forEach(function (col) {\n            if (col.field) {\n                DataUtil.setValue(col.field, col.defaultValue, _this.previousData);\n            }\n        });\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData\n        };\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.clearSelection();\n        }\n        this.renderer.addNew(args);\n        gObj.editModule.applyFormValidation();\n        args.type = events.actionComplete;\n        args.row = gObj.element.querySelector('.e-addedrow');\n        gObj.trigger(events.actionComplete, args);\n        this.args = args;\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getObject(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        this.parent.notify(events.modelChanged, {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        });\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var elem = gObj.element.querySelector('.e-addedrow');\n        var mElem;\n        var editMElem;\n        if (gObj.getFrozenColumns()) {\n            mElem = gObj.element.querySelectorAll('.e-addedrow')[1];\n            editMElem = gObj.element.querySelectorAll('.e-editedrow')[1];\n            if (mElem) {\n                remove(mElem);\n            }\n            if (editMElem) {\n                editMElem.classList.remove('e-editedrow');\n            }\n        }\n        if (elem) {\n            remove(elem);\n        }\n        elem = gObj.element.querySelector('.e-editedrow');\n        if (elem) {\n            elem.classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.recordAdded, this.requestSuccess, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.recordAdded, this.requestSuccess);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass, setValue } from '@syncfusion/ej2-base';\nimport { remove, classList } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.editNextValCell, this.editNextValCell, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.editNextValCell, this.editNextValCell);\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            if (this.parent.isEdit) {\n                this.saveCell();\n                this.editNextValCell();\n            }\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))\n            && !target.parentElement.classList.contains('e-editedrow')) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field, this.isAddRow(parseInt(tr.getAttribute('aria-rowindex'), 10)));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenColumns();\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!this.parent.element.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    if (isEdit || this.parent.isLastCellPrimaryKey) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    if (isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    BatchEdit.prototype.closeEdit = function () {\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        if (gObj.frozenColumns && rows.length < this.parent.currentViewData.length * 2) {\n            rows.push.apply(rows, this.parent.getMovableRowsObject());\n        }\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tr;\n        var mTr;\n        var movObj;\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        gObj.clearSelection();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDirty) {\n                if (gObj.frozenColumns) {\n                    movObj = gObj.getMovableRowsObject()[rows[i].index];\n                    movObj.isDirty = true;\n                }\n                tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n                if (gObj.frozenRows) {\n                    tr = gObj.getHeaderContent().querySelector('[data-uid=' + rows[i].uid + ']');\n                }\n                if (gObj.frozenColumns) {\n                    if (gObj.frozenRows) {\n                        mTr = gObj.getHeaderContent().querySelector('.e-movableheader')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                    else {\n                        mTr = gObj.getContent().querySelector('.e-movablecontent')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                }\n                if (tr || mTr) {\n                    if (tr && tr.classList.contains('e-insertedrow') || mTr && mTr.classList.contains('e-insertedrow')) {\n                        if (tr) {\n                            remove(tr);\n                        }\n                        if (mTr && (gObj.frozenColumns || gObj.frozenRows)) {\n                            remove(mTr);\n                        }\n                        this.removeRowObjectFromUID(rows[i].uid);\n                        i--;\n                    }\n                    else {\n                        refreshForeignData(rows[i], this.parent.getForeignKeyColumns(), rows[i].data);\n                        delete rows[i].changes;\n                        rows[i].isDirty = false;\n                        var ftr = mTr ? mTr : tr;\n                        classList(ftr, [], ['e-hiddenrow', 'e-updatedtd']);\n                        rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n                        if (this.parent.aggregates.length > 0) {\n                            var type = 'type';\n                            var editType = [];\n                            editType[type] = 'cancel';\n                            this.parent.notify(events.refreshFooterRenderer, editType);\n                            if (this.parent.groupSettings.columns.length > 0) {\n                                this.parent.notify(events.groupAggregates, editType);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n            !gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.getContentTable().querySelector('tr.e-emptyrow').classList.remove('e-hide');\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n        if (gObj.frozenColumns) {\n            rows.splice(this.parent.getMovableRowsObject().length, rows.length);\n        }\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        this.bulkDelete(fieldname, data);\n        if (this.parent.aggregates.length > 0) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n            if (this.parent.groupSettings.columns.length > 0) {\n                this.parent.notify(events.groupAggregates, {});\n            }\n        }\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var gObj = this.parent;\n        var deletedRecords = 'deletedRecords';\n        this.saveCell();\n        if (gObj.isEdit || this.editNextValCell() || gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        if (this.parent.selectionSettings.type === 'Multiple' && changes[deletedRecords].length) {\n            changes[deletedRecords] = changes[deletedRecords].concat(this.parent.getSelectedRecords());\n        }\n        var original = {\n            changedRecords: this.parent.getRowsObject()\n                .filter(function (row) { return row.isDirty && ['add', 'delete'].indexOf(row.edit) === -1; })\n                .map(function (row) { return row.data; })\n        };\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.showSpinner();\n        gObj.notify(events.bulkSave, { changes: changes, original: original });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        var mRows = this.parent.getMovableRowsObject();\n        var frzCols = this.parent.getFrozenColumns();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (frzCols) {\n                this.mergeBatchChanges(row, mRows[row.index], frzCols);\n            }\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    BatchEdit.prototype.mergeBatchChanges = function (row, mRow, frzCols) {\n        if (row.isDirty) {\n            if (mRow.isDirty) {\n                var i_1 = 0;\n                Object.keys(row.changes).forEach(function (key) {\n                    if (i_1 >= frzCols) {\n                        row.changes[key] = mRow.changes[key];\n                    }\n                    i_1++;\n                });\n            }\n        }\n        else if (mRow.isDirty) {\n            row.changes = mRow.changes;\n            row.isDirty = mRow.isDirty;\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        rows.splice(i, 1);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        this.parent.getRowsObject().unshift(row);\n    };\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var gObj = this.parent;\n        var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            row: data ? gObj.getRows()[index] : selectedRows[0], cancel: false\n        };\n        if (!args.row) {\n            return;\n        }\n        gObj.trigger(events.beforeBatchDelete, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.clearSelection();\n        var uid = args.row.getAttribute('data-uid');\n        if (args.row.classList.contains('e-insertedrow')) {\n            this.removeRowObjectFromUID(uid);\n            remove(args.row);\n        }\n        else {\n            var rowObj = gObj.getRowObjectFromUID(uid);\n            rowObj.isDirty = true;\n            rowObj.edit = 'delete';\n            classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n            if (gObj.getFrozenColumns()) {\n                classList(data ? gObj.getMovableRows()[index] : selectedRows[1], ['e-hiddenrow', 'e-updatedtd'], []);\n                if (gObj.frozenRows && index < gObj.frozenRows) {\n                    gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n                        .appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                    gObj.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody')\n                        .appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                }\n            }\n            else if (gObj.frozenRows && index < gObj.frozenRows) {\n                gObj.getHeaderContent().querySelector('tbody').appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n            }\n        }\n        if (!this.parent.frozenColumns && selectedRows.length > 1) {\n            for (var i = 0; i < selectedRows.length; i++) {\n                classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                var uniqueid = selectedRows[i].getAttribute('data-uid');\n                var selectedRow = gObj.getRowObjectFromUID(uniqueid);\n                selectedRow.isDirty = true;\n                selectedRow.edit = 'delete';\n                delete selectedRows[i];\n            }\n        }\n        else {\n            delete args.row;\n        }\n        this.refreshRowIdx();\n        gObj.selectRow(index);\n        gObj.trigger(events.batchDelete, args);\n        gObj.notify(events.batchDelete, { rows: this.parent.getRowsObject() });\n        gObj.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var rows = [];\n        var mRows = [];\n        var nonMovableRows = [];\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.frozenRows) {\n            rows = [].slice.call(this.parent.getHeaderTable().querySelector('tbody').children);\n            if (frzCols) {\n                mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n                for (var i = 0; i < mRows.length; i++) {\n                    nonMovableRows[i] = this.parent.createElement('tr', { className: 'emptynonmv' });\n                }\n            }\n        }\n        if (frzCols) {\n            mRows = mRows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n            nonMovableRows = nonMovableRows.concat([].slice.call(this.parent.element.querySelector('.e-movablecontent').querySelector('tbody').children));\n        }\n        rows = rows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                rows[i].setAttribute('aria-rowindex', j.toString());\n                if (frzCols) {\n                    mRows[i].setAttribute('aria-rowindex', j.toString());\n                    if (nonMovableRows[i].classList.contains('e-row')) {\n                        nonMovableRows[i].setAttribute('aria-rowindex', j.toString());\n                    }\n                }\n                j++;\n            }\n            else {\n                rows[i].removeAttribute('aria-rowindex');\n                if (frzCols) {\n                    mRows[i].removeAttribute('aria-rowindex');\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args);\n        if (args.cancel) {\n            return;\n        }\n        this.isAdded = true;\n        gObj.clearSelection();\n        var mTr;\n        var mTbody;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var model = new RowModelGenerator(this.parent);\n        var modelData = model.generateRows([args.defaultData]);\n        var tr = row.render(modelData[0], gObj.getColumns());\n        var col;\n        var index;\n        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n            modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n        }\n        var tbody = gObj.getContentTable().querySelector('tbody');\n        tr.classList.add('e-insertedrow');\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').classList.add('e-hide');\n        }\n        if (gObj.getFrozenColumns()) {\n            mTr = this.renderMovable(tr);\n            if (gObj.frozenRows) {\n                mTbody = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = gObj.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.insertBefore(mTr, mTbody.firstChild);\n            addClass(mTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n        if (gObj.frozenRows) {\n            tbody = gObj.getHeaderContent().querySelector('tbody');\n        }\n        tbody.insertBefore(tr, tbody.firstChild);\n        addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n        modelData[0].isDirty = true;\n        modelData[0].changes = extend({}, {}, modelData[0].data, true);\n        modelData[0].edit = 'add';\n        this.addRowObject(modelData[0]);\n        this.refreshRowIdx();\n        this.focus.forgetPrevious();\n        gObj.notify(events.batchAdd, { rows: this.parent.getRowsObject() });\n        gObj.selectRow(0);\n        if (!data) {\n            index = this.findNextEditableCell(0, true);\n            col = gObj.getColumns()[index];\n            this.editCell(0, col.field, true);\n        }\n        if (this.parent.aggregates.length > 0 && data) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n        }\n        var args1 = {\n            defaultData: args.defaultData, row: tr,\n            columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n        };\n        gObj.trigger(events.batchAdd, args1);\n    };\n    BatchEdit.prototype.renderMovable = function (ele) {\n        var mEle = ele.cloneNode(true);\n        for (var i = 0; i < this.parent.frozenColumns; i++) {\n            mEle.removeChild(mEle.children[0]);\n        }\n        for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n            ele.removeChild(ele.children[ele.childElementCount - 1]);\n        }\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd, isValOnly) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        var validation;\n        for (var i = columnIndex; i < endIndex; i++) {\n            validation = isValOnly ? isNullOrUndefined(cols[i].validationRules) : false;\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey) && !validation) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.field) {\n                setValue(col.field, col.defaultValue ? col.defaultValue : dValues[col.type], data);\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (gObj.editSettings.allowEditing && col.allowEditing) {\n            if (gObj.isEdit && !(this.cellDetails.column.field === field\n                && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index))) {\n                this.saveCell();\n                if (this.cellDetails.rowIndex === index && this.cellDetails.column.field === field) {\n                    return;\n                }\n            }\n            if (gObj.isEdit) {\n                return;\n            }\n            var row = void 0;\n            var rowData = void 0;\n            var mRowData = void 0;\n            var colIdx = gObj.getColumnIndexByField(field);\n            var frzCols = gObj.getFrozenColumns();\n            if (frzCols && colIdx >= frzCols) {\n                row = gObj.getMovableDataRows()[index];\n                mRowData = this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[index].getAttribute('data-uid'));\n                rowData = mRowData.changes ? extend({}, {}, mRowData.changes, true) : extend({}, {}, this.getDataByIndex(index), true);\n            }\n            else {\n                row = gObj.getDataRows()[index];\n                rowData = extend({}, {}, this.getDataByIndex(index), true);\n            }\n            if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.columns ||\n                (col.isPrimaryKey && col.isIdentity)) {\n                this.parent.isLastCellPrimaryKey = true;\n                return;\n            }\n            this.parent.isLastCellPrimaryKey = false;\n            var rowObj = gObj.getRowObjectFromUID(row.getAttribute('data-uid'));\n            var cells = [].slice.apply(row.cells);\n            var args = {\n                cell: cells[this.getColIndex(cells, this.getCellIdx(col.uid))], row: row,\n                columnName: col.field, columnObject: col, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n                primaryKey: keys, rowData: rowData,\n                validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n                value: getObject(col.field, rowData),\n                type: !isAdd ? 'edit' : 'add', cancel: false,\n                foreignKeyData: rowObj && rowObj.foreignKeyData\n            };\n            if (!args.cell) {\n                return;\n            }\n            gObj.trigger(events.cellEdit, args);\n            if (args.cancel) {\n                return;\n            }\n            this.cellDetails = {\n                rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey, rowIndex: index,\n                cellIndex: parseInt(args.cell.getAttribute('aria-colindex'), 10),\n                foreignKeyData: args.foreignKeyData\n            };\n            if (args.cell.classList.contains('e-updatedtd')) {\n                this.isColored = true;\n                args.cell.classList.remove('e-updatedtd');\n            }\n            gObj.isEdit = true;\n            gObj.clearSelection();\n            if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                gObj.selectRow(this.cellDetails.rowIndex, true);\n            }\n            this.renderer.update(args);\n            this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n            gObj.editModule.applyFormValidation([col]);\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var col = this.parent.getColumnByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n            var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n        if (!rowObj.changes) {\n            rowObj.changes = extend({}, {}, rowObj.data, true);\n        }\n        if (!isNullOrUndefined(field)) {\n            DataUtil.setValue(field, value, rowObj.changes);\n        }\n        if (rowObj.data[field] !== value) {\n            rowObj.isDirty = true;\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        this.setChanges(rowObj, column.field, value);\n        var frzCols = this.parent.getFrozenColumns();\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && this.getCellIdx(column.uid) >= frzCols && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - (this.getCellIdx(column.uid) >= frzCols ? frzCols : 0)], rowObj.changes, { 'index': this.getCellIdx(column.uid) });\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.editNextValCell = function () {\n        var gObj = this.parent;\n        if (this.isAdded && !gObj.isEdit) {\n            for (var i = this.cellDetails.cellIndex; i < gObj.getColumns().length; i++) {\n                if (gObj.isEdit) {\n                    return;\n                }\n                var index = this.findNextEditableCell(this.cellDetails.cellIndex + 1, true, true);\n                var col = gObj.getColumns()[index];\n                if (col) {\n                    this.editCell(0, col.field, true);\n                    this.saveCell();\n                }\n            }\n            if (!gObj.isEdit) {\n                this.isAdded = false;\n            }\n        }\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        var tr = parentsUntil(this.form, 'e-row');\n        var column = this.cellDetails.column;\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        var value = getObject(column.field, cloneEditedData);\n        if (!isNullOrUndefined(column.field)) {\n            setValue(column.field, value, editedData);\n        }\n        var args = {\n            columnName: column.field,\n            value: getObject(column.field, editedData),\n            rowData: this.cellDetails.rowData,\n            previousValue: this.cellDetails.value,\n            columnObject: column,\n            cell: this.form.parentElement,\n            isForeignKey: this.cellDetails.isForeignKey, cancel: false\n        };\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args);\n        }\n        if (args.cancel) {\n            return;\n        }\n        gObj.editModule.destroyForm();\n        gObj.isEdit = false;\n        gObj.editModule.destroyWidgets([column]);\n        this.parent.notify(events.tooltipDestroy, {});\n        this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n        removeClass([tr], ['e-editedrow', 'e-batchrow']);\n        removeClass([args.cell], ['e-editedbatchcell', 'e-boolcell']);\n        if (!isNullOrUndefined(args.value) && args.value.toString() ===\n            (!isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored\n            || (isNullOrUndefined(args.value) && isNullOrUndefined(this.cellDetails.value) &&\n                !args.cell.parentElement.classList.contains('e-insertedrow'))) {\n            args.cell.classList.remove('e-updatedtd');\n        }\n        gObj.trigger(events.cellSaved, args);\n        gObj.notify(events.toolbarRefresh, {});\n        this.isColored = false;\n        if (this.parent.aggregates.length > 0) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n            if (this.parent.groupSettings.columns.length > 0 && !this.isAddRow(this.cellDetails.rowIndex)) {\n                this.parent.notify(events.groupAggregates, {});\n            }\n        }\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if (e.action === 'tab' && this.parent.isEdit) {\n            var rowcell = parentsUntil(e.target, 'e-rowcell');\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    if (visibleColumns[visibleColumns.length - 1].field === cell.getAttribute('name')) {\n                        this.saveCell();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addCancelWhilePaging = function () {\n        if (this.validateFormObj()) {\n            this.parent.notify(events.destroyForm, {});\n            this.parent.isEdit = false;\n            this.isColored = false;\n        }\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","/**\n * `TemplateEditCell` is used to handle template cell.\n * @hidden\n */\nvar TemplateEditCell = /** @class */ (function () {\n    function TemplateEditCell(parent) {\n        this.parent = parent;\n    }\n    TemplateEditCell.prototype.read = function (element, value) {\n        return value;\n    };\n    TemplateEditCell.prototype.write = function () {\n        //\n    };\n    TemplateEditCell.prototype.destroy = function () {\n        //\n    };\n    return TemplateEditCell;\n}());\nexport { TemplateEditCell };\n","import { EventHandler, closest } from '@syncfusion/ej2-base';\nimport { extend, getValue } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, getComplexFieldID, setComplexFieldID } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { TemplateEditCell } from '../renderer/template-edit-cell';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editCellType = {\n            'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n            'datepickeredit': DatePickerEditCell, 'datetimepickeredit': DatePickerEditCell,\n            'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell,\n            'templateedit': TemplateEditCell\n        };\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        var _this = this;\n        this.parent.columnModel.forEach(function (col) {\n            if (_this.parent.editSettings.template || col.editTemplate) {\n                var templteCell = 'templateedit';\n                col.edit = extend(new _this.editCellType[templteCell](_this.parent), col.edit || {});\n            }\n            else {\n                col.edit = extend(new _this.editCellType[col.editType && _this.editCellType[col.editType] ?\n                    col.editType : 'defaultedit'](_this.parent, _this.serviceLocator), col.edit || {});\n            }\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    Edit.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n    };\n    Edit.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n    };\n    Edit.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.parent.notify(events.doubleTap, e);\n            }\n        }\n    };\n    Edit.prototype.getUserAgent = function () {\n        var userAgent = window.navigator.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        this.refreshToolbar();\n        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n        this.parent.notify('start-edit', {});\n    };\n    /**\n     * Cancels edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.editModule.closeEdit();\n        this.refreshToolbar();\n        this.parent.notify('close-edit', {});\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        this.editModule.addRecord(data, index);\n        this.refreshToolbar();\n        this.parent.notify('start-add', {});\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.parent.editModule.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n            if (isNullOrUndefined(this.formObj) || this.formObj.validate()) {\n                this.showDialog('BatchSaveConfirm', this.dialogObj);\n                return;\n            }\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') || value === true ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepickeredit' && col.editType !== 'datetimepickeredit') {\n                    val = (value && value.length) ? new Date(value) : null;\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = this.parent.createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        obj.appendTo(div);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                if (this.parent.editSettings.mode === 'Batch') {\n                    this.editModule.addCancelWhilePaging();\n                }\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.off(events.initialEnd, this.unwireEvents);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            [].slice.call(form.elements).forEach(function (element) {\n                if (element.hasAttribute('name')) {\n                    var field = setComplexFieldID(element.getAttribute('name'));\n                    var column = gObj.getColumnByField(field) || { field: field, type: element.getAttribute('type') };\n                    var value = void 0;\n                    if (column.type === 'checkbox' || column.type === 'boolean') {\n                        value = element.checked;\n                    }\n                    else if (element.value) {\n                        value = element.value;\n                        if (element.ej2_instances &&\n                            element.ej2_instances.length &&\n                            !isNullOrUndefined(element.ej2_instances[0].value)) {\n                            element.blur();\n                            value = element.ej2_instances[0].value;\n                        }\n                    }\n                    if (column.edit && typeof column.edit.read === 'string') {\n                        value = getValue(column.edit.read, window)(element, value);\n                    }\n                    else if (column.edit && column.edit.read) {\n                        value = column.edit.read(element, value);\n                    }\n                    value = gObj.editModule.getValueFromType(column, value);\n                    DataUtil.setValue(column.field, value, editedData);\n                }\n            });\n            return editedData;\n        }\n        gObj.columnModel.filter(function (col) { return col.editTemplate; }).forEach(function (col) {\n            if (form[getComplexFieldID(col.field)]) {\n                var inputElements = [].slice.call(form[getComplexFieldID(col.field)]);\n                inputElements = inputElements.length ? inputElements : [form[getComplexFieldID(col.field)]];\n                inputElements.forEach(function (input) {\n                    var value = _this.getValue(col, input);\n                    DataUtil.setValue(col.field, value, editedData);\n                });\n            }\n        });\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            if (col && col.field) {\n                var value = this.getValue(col, inputs[i]);\n                DataUtil.setValue(col.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    Edit.prototype.getValue = function (col, input) {\n        var value = input.value;\n        var gObj = this.parent;\n        var temp = col.edit.read;\n        if (col.type === 'checkbox' || col.type === 'boolean') {\n            value = input.checked;\n        }\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n            value = gObj.editModule.getValueFromType(col, (temp)(input, value));\n        }\n        else {\n            value = gObj.editModule.getValueFromType(col, col.edit.read(input, value));\n        }\n        return value;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save'];\n        if (this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n            && restrictedRequestTypes.indexOf(e.requestType) === -1) {\n            this.destroyWidgets();\n            this.destroyForm();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            this.parent.destroyTemplate(['editSettingsTemplate']);\n        }\n        if (gObj.columnModel.some(function (column) { return !isNullOrUndefined(column.editTemplate); })) {\n            this.parent.destroyTemplate(['editTemplate']);\n        }\n        cols = cols ? cols : this.parent.getColumns();\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            var temp = col.edit.destroy;\n            if (col.edit.destroy) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp();\n                }\n                else {\n                    col.edit.destroy();\n                }\n            }\n        }\n        [].slice.call(this.formObj.element.elements).forEach(function (element) {\n            if (element.hasAttribute('name')) {\n                if (element.ej2_instances &&\n                    element.ej2_instances.length &&\n                    !element.ej2_instances[0].isDestroyed) {\n                    element.ej2_instances[0].destroy();\n                }\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        this.unwireEvents();\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, 'e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, 'e-gridcontent') || (this.parent.frozenRows\n                        && parentsUntil(e.target, 'e-headercontent')))\n                    && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                this.closeEdit();\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.element.querySelector('.e-gridform');\n        var mForm = gObj.element.querySelectorAll('.e-gridform')[1];\n        var rules = {};\n        var mRules = {};\n        cols = cols ? cols : gObj.columns;\n        cols.forEach(function (col, index) {\n            if (!col.visible) {\n                return;\n            }\n            if (index < frzCols && col.validationRules) {\n                rules[getComplexFieldID(col.field)] = col.validationRules;\n            }\n            else if (index >= frzCols && col.validationRules) {\n                mRules[getComplexFieldID(col.field)] = col.validationRules;\n            }\n        });\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n        }\n        else {\n            rules = extend(rules, mRules);\n        }\n        this.parent.editModule.formObj = this.createFormObj(form, rules);\n    };\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                _this.valErrorPlacement(inputElement, error);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.outerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        if (this.parent.editSettings.mode !== 'Dialog') {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(inputElement, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        return this.parent.editSettings.mode !== 'Dialog' ? isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable() :\n            this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var gcontent = this.parent.getContent().firstElementChild;\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight || gcontent.scrollWidth > gcontent.clientWidth;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isFHdr;\n        if (isInline) {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(element, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        var fCont = this.parent.getContent().querySelector('.e-frozencontent');\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = closest(element, 'td');\n        var inputClient = input ? input.getBoundingClientRect() : element.parentElement.getBoundingClientRect();\n        var div = this.parent.createElement('div', {\n            className: 'e-tooltip-wrap e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (this.parent.getFrozenColumns() ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + inputClient.width + 'px;text-align:center;'\n        });\n        var content = this.parent.createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        table.appendChild(div);\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < inputClient.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        if (!isScroll && isInline && !this.parent.allowPaging) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n    };\n    return Edit;\n}());\nexport { Edit };\n/** @hidden */\nexport var Global;\n(function (Global) {\n    Global.timer = null;\n})(Global || (Global = {}));\n","import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n        else {\n            removeClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args1 = {\n                requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n                columns: this.getColumns(), cancel: false, searchOperator: this.searchOperator\n            };\n            this.parent.trigger(events.beforeOpenColumnChooser, args1);\n            if (args1.cancel) {\n                return;\n            }\n            this.searchOperator = args1.searchOperator;\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearActions.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') } });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        if (!isNullOrUndefined(args)) {\n            if (this.hideColumn.length) {\n                this.columnStateChange(this.hideColumn, false);\n            }\n            if (this.showColumn.length) {\n                this.columnStateChange(this.showColumn, true);\n            }\n            var params = {\n                requestType: 'columnstate', element: this.parent.element,\n                columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n            };\n            this.parent.trigger(events.actionComplete, params);\n            this.getShowHideService.setVisible(this.stateChangeColumns);\n            this.clearActions();\n            this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            currentCol.visible = state;\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            toogleCheckbox(elem.parentElement);\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            this.checkstatecolumn(checkstate, columnUid);\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var searchValue = this.dlgObj.element.querySelector('.e-cc.e-input').value;\n        var selected = this.innerDiv.querySelectorAll('.e-check').length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = this.parent.element.querySelectorAll('.e-cc-chbox');\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            if (column.visible) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query } from '@syncfusion/ej2-data';\nimport { getForeignData } from '../base/util';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        return data.isRemote() ?\n            data.generateQuery(true).requiresCount().take(parent.pageSettings.totalRecordsCount) :\n            data.generateQuery(true).requiresCount();\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            fColumns.forEach(function (col) {\n                columnPromise.push(col.dataSource.executeQuery(new Query()));\n            });\n            promise = Promise.all(columnPromise).then(function (e) {\n                fColumns.forEach(function (col, index) {\n                    _this.foreignKeyData[col.field] = e[index].result;\n                });\n                // tslint:disable-next-line:no-any\n            });\n        }\n        return promise;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        var cols = column;\n        this.colDepth = this.measureColumnDepth(cols);\n        var rows = [];\n        var actualColumns = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            for (var i = 0; i < row.cells.length; i++) {\n                var cell = row.cells[i];\n                if (cell.visible === undefined && cell.cellType !== CellType.StackedHeader) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n                if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n            }\n        }\n        for (var i = 0; i < cols.length; i++) {\n            this.generateActualColumns(cols[i], actualColumns);\n        }\n        return { rows: rows, columns: actualColumns };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        /* tslint:disable-next-line:max-line-length */\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n        if (column.commands) {\n            return;\n        }\n        if (!column.columns) {\n            if (column.visible || this.hideColumnInclude) {\n                actualColumns.push(column);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                var colSpan = this.getCellCount(column, 0);\n                if (colSpan !== 0) {\n                    for (var i = 0; i < column.columns.length; i++) {\n                        /* tslint:disable-next-line:max-line-length */\n                        this.generateActualColumns(column.columns[i], actualColumns);\n                    }\n                }\n            }\n        }\n    };\n    ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n        var resultCells = [];\n        for (var i = 0; i < cellIndex; i++) {\n            resultCells.push(cells[i]);\n        }\n        for (var i = (cellIndex + 1); i < cells.length; i++) {\n            resultCells.push(cells[i]);\n        }\n        return resultCells;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows) {\n        var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n            }\n        }\n        return rows;\n    };\n    /* tslint:disable */\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n        /* tslint:enable */\n        var lastCol = isLastColumn ? 'e-lastcell' : '';\n        if (!cols.columns) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n        else {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isFirstCell = void 0;\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                isFirstCell = false;\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isFirstCell = true;\n                    isIgnoreFirstCell = true;\n                }\n                /* tslint:disable-next-line:max-line-length */\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(gridColumn.headerTemplate),\n            'rowID': '',\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': columnIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gridObj.detailTemplate || gridObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.measureColumnDepth = function (column) {\n        var max = 0;\n        for (var i = 0; i < column.length; i++) {\n            var depth = this.checkDepth(column[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.checkDepth = function (col, index) {\n        var max = index;\n        var indices = [];\n        if (col.columns) {\n            index++;\n            for (var i = 0; i < col.columns.length; i++) {\n                indices[i] = this.checkDepth(col.columns[i], index);\n            }\n            for (var j = 0; j < indices.length; j++) {\n                if (max < indices[j]) {\n                    max = indices[j];\n                }\n            }\n            index = max;\n        }\n        return index;\n    };\n    ;\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value ? this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                if (args.column.type === 'date') {\n                    format = { type: 'date', skeleton: args.column.format };\n                }\n                else if (args.column.type === 'time') {\n                    format = { type: 'time', skeleton: args.column.format };\n                }\n                else {\n                    format = { type: 'dateTime', skeleton: args.column.format };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, extend, getValue } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        /* tslint:disable-next-line:no-any */\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        var cancel = 'cancel';\n        var isBlb = 'isBlob';\n        var csv = 'isCsv';\n        var workbk = 'workbook';\n        var isMultiEx = 'isMultipleExport';\n        var args = {\n            requestType: 'beforeExcelExport', gridObject: gObj, cancel: false,\n            isMultipleExport: isMultipleExport, workbook: workbook, isCsv: isCsv, isBlob: isBlob\n        };\n        gObj.trigger(events.beforeExcelExport, args);\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        this.isBlob = args[isBlb];\n        if (args[csv]) {\n            this.isCsvExport = args[csv];\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        return this.processRecords(gObj, exportProperties, args[isMultiEx], args[workbk]);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) &&\n            exportProperties.dataSource instanceof DataManager) {\n            /* tslint:disable-next-line:no-any */\n            return new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:max-line-length */\n                /* tslint:disable-next-line:no-any */\n                var dataManager = exportProperties.dataSource.executeQuery(new Query());\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n                    resolve(_this.book);\n                });\n            });\n        }\n        else {\n            /* tslint:disable-next-line:no-any */\n            var allPromise = [];\n            allPromise.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise.push(this.helper.getColumnData(gObj));\n            return Promise.all(allPromise).then(function (e) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]);\n                return _this.book;\n            }).catch(function (e) {\n                _this.parent.trigger(events.actionFailure, e);\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n        this.groupedColLength = gObj.groupSettings.columns.length;\n        var blankRows = 5;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.multipleExport)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (!isNullOrUndefined(exportProperties)) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (!isNullOrUndefined(exportProperties) ? exportProperties.includeHiddenColumn : false);\n        /* tslint:disable-next-line:max-line-length */\n        /* tslint:disable-next-line:no-any */\n        var headerRow = this.helper.getHeaders(gObj.columns, this.includeHiddenColumn);\n        var groupIndent = 0;\n        /* tslint:disable:no-any */\n        if (!isNullOrUndefined((r.result).level)) {\n            groupIndent += (r.result).level;\n            groupIndent += (r.result).childLevels;\n        }\n        /* tslint:enable:no-any */\n        this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties, exportProperties.dataSource);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties, gObj.currentViewData);\n        }\n        else {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties);\n        }\n        this.isExporting = false;\n        gObj.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, exportProperties, currentViewRecords) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        /* tslint:disable-next-line:no-any */\n        var record = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, currentViewRecords);\n            }\n            else {\n                this.processAggregates(gObj, returnType.result);\n            }\n        }\n        //footer template add\n        if (!isNullOrUndefined(this.footer)) {\n            if ((this.expType === 'AppendToSheet' && !isMultipleExport) || (this.expType === 'NewSheet')) {\n                this.processExcelFooter(this.footer);\n            }\n        }\n        /* tslint:disable-next-line:no-any */\n        var sheet = {};\n        if (this.columns.length > 0) {\n            sheet.columns = this.columns;\n        }\n        sheet.rows = this.rows;\n        this.workSheet.push(sheet);\n        this.book.worksheets = this.workSheet;\n        this.book.styles = this.styles;\n        if (!isMultipleExport) {\n            if (this.isCsvExport) {\n                var book = new Workbook(this.book, 'csv', gObj.locale);\n                if (!this.isBlob) {\n                    if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                        book.save(exportProperties.fileName);\n                    }\n                    else {\n                        book.save('Export.csv');\n                    }\n                }\n                else {\n                    this.blobPromise = book.saveAsBlob('text/csv');\n                }\n            }\n            else {\n                var book = new Workbook(this.book, 'xlsx', gObj.locale);\n                if (!this.isBlob) {\n                    if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                        book.save(exportProperties.fileName);\n                    }\n                    else {\n                        book.save('Export.xlsx');\n                    }\n                }\n                else {\n                    this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                }\n            }\n            if (this.isElementIdChanged) {\n                gObj.element.id = '';\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            cell.value = this.parent.getColumnByField(item.field).headerText +\n                ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n            if (item.count > 1) {\n                cell.value += item.count + ' items';\n            }\n            else {\n                cell.value += item.count + ' item';\n            }\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n            cells.push(cell);\n            if (this.rows[this.rows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = this.rows[this.rows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    tCell.style = this.getCaptionThemeStyle(this.theme);\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level + dataSource.childLevels)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    sCell.index = (hIndex + 1);\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            this.rows[this.rows.length - 1].cells = cells;\n            this.rowLength++;\n            if (this.groupedColLength < 8 && level > 1) {\n                var grouping = { outlineLevel: level - 1, isCollapsed: true };\n                this.rows[this.rows.length - 1].grouping = grouping;\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n            }\n            else {\n                this.processRecordRows(gObj, item.items, headerRow, (level));\n                this.processAggregates(gObj, item, undefined, (level), true);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n        var rLen = Object.keys(record).length;\n        var index = 1;\n        /* tslint:disable-next-line:no-any */\n        var cells = [];\n        for (var r = 0; r < rLen; r++) {\n            cells = [];\n            index = 1;\n            for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n                /* tslint:disable-next-line:no-any */\n                var value = !isNullOrUndefined(headerRow.columns[c].field) ? getValue(headerRow.columns[c].field, record[r]) : '';\n                var column = headerRow.columns[c];\n                var foreignKeyData = void 0;\n                // tslint:disable-next-line:max-line-length\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = this.helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = { data: record[r], column: headerRow.columns[c], foreignKeyData: foreignKeyData };\n                    var cell = {};\n                    gObj.trigger(events.excelQueryCellInfo, extend(excelCellArgs, {\n                        column: headerRow.columns[c], data: record[r],\n                        value: value, style: undefined, colSpan: 1, cell: cell\n                    }));\n                    cell = excelCellArgs.cell;\n                    cell.index = index + level;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            if (this.groupedColLength < 8 && level > 0) {\n                var grouping = { outlineLevel: level, isCollapsed: true };\n                this.rows.push({ index: this.rowLength++, cells: cells, grouping: grouping });\n            }\n            else {\n                this.rows.push({ index: this.rowLength++, cells: cells });\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent, byGroup) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        /* tslint:disable-next-line:no-any */\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                this.fillAggregates(gObj, groupSummaryRows, indent);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates);\n            if (sRows.length > 0 && !byGroup) {\n                this.fillAggregates(gObj, sRows, indent);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var row = cells_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells_2 = [];\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        eCell.index = index + indent;\n                        if (!isNullOrUndefined(cell.column.footerTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field].Sum;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field].Average;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field].Max;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field].Min;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field].Count;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field].TrueCount;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field].FalseCount;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        if (cell.attributes.style.textAlign) {\n                            eCell.style.hAlign = cell.attributes.style.textAlign;\n                        }\n                        cells_2.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells_2.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                this.rows.push({ index: customIndex, cells: cells_2 });\n            }\n            else {\n                var row_1 = {};\n                if (this.groupedColLength < 8 && this.groupedColLength > 0) {\n                    var dummyOutlineLevel = 'outlineLevel';\n                    var dummyGrouping = 'grouping';\n                    var level = this.rows[this.rows.length - 1][dummyGrouping][dummyOutlineLevel];\n                    var grouping = { outlineLevel: level, isCollapsed: true };\n                    row_1 = { index: this.rowLength++, cells: cells_2, grouping: grouping };\n                }\n                else {\n                    row_1 = { index: this.rowLength++, cells: cells_2 };\n                }\n                this.rows.push(row_1);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        /* tslint:disable-next-line:max-line-length */\n        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n        return txt[0].wholeText;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        /* tslint:disable-next-line:no-any */\n        var result = {};\n        /* tslint:disable-next-line:no-any */\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        var rowIndex = 1;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = headerRow;\n        /* tslint:enable:no-any */\n        var gridRows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        /* tslint:disable-next-line:no-any */\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                /* tslint:disable-next-line:no-any */\n                var cell = {};\n                /* tslint:disable-next-line:no-any */\n                var gridCell = gridRows[row].cells[column_1];\n                /* tslint:disable-next-line:no-any */\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        /* tslint:disable-next-line:no-any */\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n                    this.theme = exportProperties.theme;\n                }\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign;\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign;\n                }\n                /* tslint:disable-next-line:no-any */\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, setStyle: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, extend(excelHeaderCellArgs, {\n                    cell: cell, setStyle: style\n                }));\n                cell.style = style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            this.rows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        if (!isNullOrUndefined(themestyle.fontColor)) {\n            style.fontColor = themestyle.fontColor;\n        }\n        if (!isNullOrUndefined(themestyle.fontName)) {\n            style.fontName = themestyle.fontName;\n        }\n        if (!isNullOrUndefined(themestyle.fontSize)) {\n            style.fontSize = themestyle.fontSize;\n        }\n        if (!isNullOrUndefined(themestyle.borders)) {\n            if (!isNullOrUndefined(themestyle.borders.color)) {\n                style.borders.color = themestyle.borders.color;\n            }\n            if (!isNullOrUndefined(themestyle.borders.lineStyle)) {\n                style.borders.lineStyle = themestyle.borders.lineStyle;\n            }\n        }\n        if (themestyle.bold !== false) {\n            style.bold = themestyle.bold;\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            /* tslint:disable-next-line:no-any */\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (typeof col.format === 'object') {\n                style.numberFormat = !isNullOrUndefined(col.format.format) ? col.format.format : col.format.skeleton;\n                if (!isNullOrUndefined(col.format.type)) {\n                    style.type = col.format.type;\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign;\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.columns.push({ index: index, width: typeof col.width === 'number' ? col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @return {void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        var gObj = parent;\n        var can = 'cancel';\n        this.isGrouping = false;\n        this.isExporting = true;\n        var args = {\n            requestType: 'beforePdfExport', gridObject: gObj, cancel: false\n        };\n        gObj.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            return;\n        }\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource) && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n                new DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new Query()).then(function (returnType) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n                    _this.isExporting = false;\n                    parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                    resolve(_this.pdfDocument);\n                });\n            });\n        }\n        else {\n            var allPromise = [];\n            allPromise.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise.push(this.helper.getColumnData(parent));\n            return Promise.all(allPromise).then(function (e) {\n                _this.init(parent);\n                if (!isNullOrUndefined(pdfDoc)) {\n                    _this.pdfDocument = pdfDoc;\n                }\n                else {\n                    _this.pdfDocument = new PdfDocument();\n                }\n                _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport);\n                _this.isExporting = false;\n                parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                return _this.pdfDocument;\n                // tslint:disable-next-line:no-any\n            });\n        }\n    };\n    /* tslint:disable:no-any */\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n        }\n        var columns = gObj.columns;\n        var dataSource = returnType.result;\n        /* tslint:enable:no-any */\n        var section = this.pdfDocument.sections.add();\n        /* tslint:disable-next-line:no-any */\n        var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n        dataSource = result.dataSource;\n        /* tslint:disable-next-line:no-any */\n        if (!isNullOrUndefined(dataSource.GroupGuid)) {\n            this.isGrouping = true;\n        }\n        section = result.section;\n        var pdfPage = section.pages.add();\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        /* tslint:disable-next-line:no-any */\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = this.helper.getHeaders(columns, this.hideColumnInclude);\n        var rows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid);\n        /* tslint:disable-next-line:no-any */\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length > 0) {\n            if (this.isGrouping) {\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (this.isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n                }\n                /* tslint:disable-next-line:max-line-length */\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        // draw the grid\n        pdfGrid.draw(pdfPage, 20, 20);\n        if (!isMultipleExport) {\n            // save the PDF\n            if (!this.isBlob) {\n                if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                    this.pdfDocument.save(pdfExportProperties.fileName);\n                }\n                else {\n                    this.pdfDocument.save('Export.pdf');\n                }\n            }\n            else {\n                this.blobPromise = this.pdfDocument.save();\n            }\n            this.pdfDocument.destroy();\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption) && this.gridTheme.caption !== null) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(pdfColor)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n        else {\n            //Material theme\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            if (!isNullOrUndefined(this.gridTheme.header.borders) && !isNullOrUndefined(this.gridTheme.header.borders.color)) {\n                var borderColor = this.hexToRgb(this.gridTheme.header.borders.color);\n                border.all = new PdfPen(new PdfColor(borderColor.r, borderColor.g, borderColor.b));\n            }\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, fontSize), brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n        var groupIndex = level;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = this.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            row.cells.getCell(groupIndex).value = value;\n            row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n            row.style.setBorder(border);\n            row.style.setFont(font);\n            row.style.setTextBrush(brush);\n            row.style.setBackgroundBrush(backgroundBrush);\n            var sRows = void 0;\n            var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n            if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n            }\n            else {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n            }\n            if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n            else {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n        var columnCount = gridColumns.length;\n        var gObj = this.parent;\n        if (this.isGrouping) {\n            columnCount += (childLevels + 1);\n        }\n        // add columns\n        pdfGrid.columns.add(columnCount);\n        if (this.isGrouping) {\n            for (var i = 0; i < (childLevels + 1); i++) {\n                pdfGrid.columns.getColumn(i).width = 20;\n            }\n        }\n        // add header\n        pdfGrid.headers.add(rows.length);\n        // set cell values of each rows in the header\n        for (var i = 0; i < rows.length; i++) {\n            var gridHeader = pdfGrid.headers.getHeader(i);\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n            if (rows[i].cells.length === 0) {\n                for (var j = 0; j < gridHeader.cells.count; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n            }\n            else {\n                for (var j = 0; j < cellIndex; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n                for (var j = 0; j < rows[i].cells.length; j++) {\n                    var cell = gridHeader.cells.getCell(cellIndex);\n                    /* tslint:disable-next-line:no-any */\n                    var args = {\n                        cell: cell,\n                        gridCell: rows[i].cells[j],\n                        style: cell.style\n                    };\n                    /* tslint:enable:no-any */\n                    gObj.trigger(events.pdfHeaderQueryCellInfo, args);\n                    if (cell.value !== null) {\n                        cell.value = rows[i].cells[j].column.headerText;\n                        if (!isNullOrUndefined(rows[i].cells[j].column.headerTextAlign)) {\n                            cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n                        }\n                        if (!isNullOrUndefined(rows[i].cells[j].rowSpan)) {\n                            cell.rowSpan = rows[i].cells[j].rowSpan;\n                            /* tslint:disable-next-line:max-line-length */\n                            cell.style.stringFormat = this.getVerticalAlignment('Bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n                            for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n                                pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n                            }\n                        }\n                        if (!isNullOrUndefined(rows[i].cells[j].colSpan)) {\n                            cell.columnSpan = rows[i].cells[j].colSpan;\n                        }\n                        cellIndex += cell.columnSpan;\n                    }\n                    else {\n                        cell.value = '';\n                        cellIndex += cell.columnSpan;\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        if (pdfGrid.columns.count >= 6) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.pageOrientation) || !isNullOrUndefined(pdfExportProperties.pageSize)) {\n                var pdfPageSettings = new PdfPageSettings();\n                /* tslint:disable-next-line:max-line-length */\n                pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ? PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n                pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n                section.setPageSettings(pdfPageSettings);\n            }\n            var clientSize = this.pdfDocument.pageSettings.size;\n            if (!isNullOrUndefined(pdfExportProperties.header)) {\n                /* tslint:disable-next-line:no-any */\n                var header = pdfExportProperties.header;\n                var position = new PointF(0, header.fromTop);\n                var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return { dataSource: dataSource, section: section };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format;\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                /* tslint:disable-next-line:no-any */\n                var cell = row.cells[index];\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                i += 1;\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        /* tslint:disable-next-line:max-line-length */\n                        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n                        value.push(txt[0].wholeText);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n        if (!isNullOrUndefined(column.footerTemplate)) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    // Set alignment, width and type of the values of the column\n    /* tslint:disable:no-any */\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n        var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width)) {\n                /* tslint:disable-next-line:max-line-length */\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ? gridColumns[i].width * 0.75 : this.helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record) && this.gridTheme.record !== null) {\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        row.style.setBorder(border);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n        var startIndex = this.isGrouping ? groupIndex : 0;\n        for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n            var items = _a[_i];\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            for (var j = 0; j < columns.length; j++) {\n                /* tslint:disable:no-any */\n                var value = (!isNullOrUndefined(columns[j].field) && getValue(columns[j].field, items)) || '';\n                var column = columns[j];\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = this.helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = items;\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1\n                };\n                args.value = this.exportValueFormatter.formatCellValue(args);\n                /* tslint:enable:no-any */\n                gObj.trigger(events.pdfQueryCellInfo, args);\n                var cell = gridRow.cells.getCell(j + startIndex);\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + startIndex + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + startIndex + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + startIndex + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) || !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        /* tslint:disable-next-line:max-line-length */\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ? (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.Helvetica;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    /**\n     * To destroy the pdf export\n     * @return {void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, removeClass, attributes, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = _this.parent.createElement('button', {});\n        _this.unbounDiv = _this.parent.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button',\n            title: !isNullOrUndefined(buttonOption.title) ? buttonOption.title :\n                buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest } from '@syncfusion/ej2-base';\nimport { initialEnd, click, keyPressed } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = gObj.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !gObj.editModule || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        if (buttonObj.disabled) {\n            return;\n        }\n        switch (type) {\n            case 'Edit':\n                gObj.editModule.endEdit();\n                gObj.editModule.startEdit(closest(target, 'tr'));\n                break;\n            case 'Cancel':\n                gObj.editModule.closeEdit();\n                break;\n            case 'Save':\n                gObj.editModule.endEdit();\n                break;\n            case 'Delete':\n                gObj.editModule.endEdit();\n                gObj.clearSelection();\n                //for toogle issue when dbl click\n                gObj.selectRow(parseInt(closest(target, 'tr').getAttribute('aria-rowindex'), 10), false);\n                gObj.editModule.deleteRecord();\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(keyPressed, this.keyPressHandler);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editSettings.mode === 'Batch') {\n                    if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                        this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                    }\n                }\n                else {\n                    this.parent.editModule.endEdit();\n                    this.parent.editModule.startEdit(this.row);\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editSettings.mode !== 'Batch') {\n                    this.parent.editModule.endEdit();\n                }\n                if (this.parent.getSelectedRecords().length === 1) {\n                    this.parent.editModule.deleteRow(this.row);\n                }\n                else {\n                    this.parent.deleteRecord();\n                }\n                break;\n            case 'Save':\n                this.parent.editModule.endEdit();\n                break;\n            case 'Cancel':\n                this.parent.editModule.closeEdit();\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.selectRow(args.event, this.parent.selectionSettings.type !== 'Multiple');\n            var hiddenSepItems = [];\n            var showSepItems = [];\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editSettings.mode === 'Batch' && ((closest(args.event.target, '.e-gridform')) ||\n                        this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    if (item.separator) {\n                        hiddenSepItems.push(item.id);\n                    }\n                    else {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (this.ensureTarget(args.event.target, item.target) && item.separator) {\n                    showSepItems.push(item.id);\n                }\n            }\n            if (showSepItems.length > 0) {\n                this.contextMenu.showItems(showSepItems, true);\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            if (hiddenSepItems.length > 0) {\n                this.contextMenu.hideItems(hiddenSepItems, true);\n            }\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (this.hiddenItems.length === args.items.length) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : 'tbody');\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.getFrozenColumns() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit);\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (element) {\n                        if (element.field === _this.targetColumn.field\n                            && element.direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    });\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute('aria-rowindex'), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.isFrzLoad = 1;\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n        for (var i = 0, len = row.length; i < len; i++) {\n            if (this.isFrzLoad % 2 === 0) {\n                row[i].cells = row[i].cells.slice(frzCols, row[i].cells.length);\n            }\n            else {\n                row[i].cells = row[i].cells.slice(0, frzCols);\n            }\n        }\n        this.isFrzLoad++;\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth } from '../base/util';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        return _super.call(this, parent, locator) || this;\n    }\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozencontent' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.getFrozenContent().appendChild(this.getTable());\n        var mTbl = this.getTable().cloneNode(true);\n        this.getMovableContent().appendChild(mTbl);\n        remove(this.getMovableContent().querySelector('colgroup'));\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozenheader' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        var tbody = this.getMovableHeader().querySelector('tbody');\n        remove(this.getMovableHeader().querySelector('table'));\n        _super.prototype.refreshUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        this.updateColgroup();\n        this.parent.updateDefaultCursor();\n        renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns());\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.getMovableHeader().appendChild(this.createTable());\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader').length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(renderMovable(filterRow, this.parent.getFrozenColumns()));\n            }\n        }\n        else if (obj.case === 'textwrap') {\n            var fRows = void 0;\n            var mRows = void 0;\n            var fHdr = this.getFrozenHeader();\n            var mHdr = this.getMovableHeader();\n            var cont = this.parent.getContent();\n            var wrapMode = this.parent.textWrapSettings.wrapMode;\n            var hdrClassList = this.parent.getHeaderContent().firstChild.classList;\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                fRows = fHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n                mRows = mHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n            }\n            this.refreshStackedHdrHgt();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler')).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue \n            height[i] = fRows[i].offsetHeight; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n            width[i] = mRows[i].offsetHeight;\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) || (!isWrap && fRowHgt > mRowHgt) ||\n                (this.parent.allowResizing && !this.parent.resizeModule.isFrozenColResized))) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            if (mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) || (!isWrap && fRowHgt < mRowHgt) ||\n                (this.parent.allowResizing && this.parent.resizeModule.isFrozenColResized))) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function () {\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var frozenContentHeight = this.parent.element.querySelector('.e-frozencontent').getBoundingClientRect().height;\n        if (movableContentHeight > frozenContentHeight) {\n            this.parent.element.querySelector('.e-frozencontent').style.height = movableContentHeight -\n                getScrollBarWidth() + 'px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns()), mTable.querySelector('thead'));\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { parentsUntil } from '../base/util';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    Freeze.prototype.wireEvents = function () {\n        if (this.parent.frozenRows) {\n            EventHandler.add(this.parent.getHeaderContent(), 'dblclick', this.dblClickHandler, this);\n        }\n    };\n    Freeze.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-grid').id !== this.parent.element.id) {\n            return;\n        }\n        this.parent.notify(events.dblclick, e);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n        });\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n        });\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        e.preventDefault();\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.getColumnByField(field);\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column.visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1) {\n                if (this.ensureDisabledStatus(key) && !dItem.hide) {\n                    this.disableItems.push(item.text);\n                }\n                else if (item.hide) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (ele) {\n                        if (ele.field === _this.targetColumn.field\n                            && ele.direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    });\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                status = !(this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter));\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        columns.forEach(function (column) {\n            column.dataSource = (column.dataSource instanceof DataManager ? column.dataSource :\n                (isNullOrUndefined(column.dataSource) ? new DataManager() : new DataManager(column.dataSource)));\n        });\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        foreignColumns.forEach(function (col) {\n            var promise;\n            var query = args.isComplex ? _this.genarateColumnQuery(col) :\n                _this.genarateQuery(col, args.result.result, false, true);\n            var dataSource = col.dataSource;\n            if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        });\n        Promise.all(allPromise).then(function (responses) {\n            responses.forEach(function (data, index) {\n                foreignColumns[index].columnData = data.result;\n            });\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var predicate;\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length && !fromData) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            filteredValue.forEach(function (obj) {\n                if (obj && obj.getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: obj, matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', obj, false));\n                }\n            });\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        predicate = (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n        return predicate;\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = new Query();\n        var predicate = [];\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n"],"names":["doesImplementInterface","target","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","DataUtil","getObject","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","iterateArrayOrObject","collection","predicate","result","i","len","length","pred","push","iterateExtend","array","obj","baseExtend","getActualProperties","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","Object","keys","forEach","value","index","indexOf","prepareColumns","columns","autoWidth","c","Column","headerText","foreignKeyValue","foreignKeyField","getValue","window","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","popup","offsetWidth","x","getPosition","right","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","remove","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","type","context","temp","customAggregate","Array","aggregates","toLowerCase","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","isComplexField","split","getComplexFieldID","replace","setComplexFieldID","isEditable","col","row","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","editSettings","mode","showConfirmDialog","wrap","action","add","setFormatter","serviceLocator","fmtr","getService","getFormatFunction","skeleton","format","setParser","getParserFunction","addRemoveActiveClasses","cells","args","_i","arguments","setAttribute","removeAttribute","distinctStringValues","res","toString","getFilterMenuPostion","dialogObj","grid","elementVisible","newpos","dlgWidth","enableRtl","calculatePosition","leftPos","calculateRelativeBasedPosition","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","removeAddCboxClasses","checked","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","cell","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Date","setSeconds","getSeconds","setHours","predicateSt","Predicate","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","mEle","cloneNode","childElementCount","object","splits","getCustomDateFormat","colType","intl","Internationalization","getDatePattern","extendObjWithFn","deep","arguments_1","obj1","getPrototypeOf","concat","clone","src","copy","isObject","isArray","setStateAndProperties","attribute","summaryIterator","callback","dateanddatetimerender","rtl","isInline","rowData","floatLabelType","placeholder","enabled","ValueFormatter","cultureName","this","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","setCulture","options","_this","allowSorting","allowResizing","allowFiltering","allowGrouping","allowReordering","showColumnMenu","enableGroupByFormat","filter","showInColumnChooser","edit","sortDirection","getEditTemplate","editTemplateFn","getFilterTemplate","filterTemplateFn","merge","valueFormatter","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","editTemplate","filterTemplate","isForeignColumn","editType","params","fields","text","sortComparer","a_1","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","actionBegin","actionComplete","dataBound","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","reorderComplete","rowDragAndDropComplete","keyPressed","click","destroy","columnVisibilityChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshVirtualBlock","updateData","preventBatch","dialogDestroy","addDeleteAction","freezeRender","CellType","RenderType","ToolbarItem","CheckBoxFilter","filterSettings","existingPredicate","foreignKeyQuery","filterState","values","renderEmpty","locale","cBoxTrue","createCheckBox","label","cBoxFalse","insertBefore","attrs","firstChild","closeDialog","wireEvents","EventHandler","clickHandler","searchHandler","debounce","searchBoxKeyUp","unWireEvents","foreignKeyFilter","fColl","mPredicate","fPredicate","filterCollection","executeQuery","then","notify","predicates","fpred","ignoreCase","ignoreAccent","handler","foreignFilter","getDataModule","isRemote","initalPredicate","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","localeObj","getConstant","updateDataSource","updateModel","actualPredicate","filteredColumns","sortedColumns","sortSettings","allowCaseSensitive","isFiltered","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","inputargs","Input","createInput","spinner","cBox","showDialog","requestType","filterModel","columnName","columnType","cancel","trigger","events.actionBegin","Dialog","content","close","bind","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","cssClass","isPrimary","created","dialogCreated","open","dialogOpen","appendTo","maxHeight","show","createSpinner","showSpinner","getAllData","Browser","isDevice","X","Y","openDialog","isDestroyed","getColumns","destroyTemplate","clearFilter","events.preventBatch","instance","tagName","textContent","fltrBtnHandler","optr","caseSen","defaults","isNotEqual","itemsCnt","fObj","searchInput","getAttribute","arg1","arg2","arg3","arg4","arg5","arg6","initiateFilter","firstVal","j","val","foreignQuery","parsed","parseFloat","predicte","addDistinct","filterChoiceCount","take","search","filterEvent","processSearch","getPredicateFromCols","getPredicate","predicateList","foreignColumn","getForeignKeyColumns","_a","prop","filteredColumn","distinct","requiresCount","processDataOperation","eventPromise","promise","dataSuccess","state","getStateEventArgument","def","Deferred","resolve","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","isInitial","allPromise","runArray","Promise","all","fullData","cols","filteredData","getDistinct","records","processDataSource","events.actionComplete","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes_1","createCheckbox","cnt","selected","btn","btnObj","disabled","dataBind","cBoxes","selectAllValue","checkBox","isColFiltered","checkbox","getCheckedState","hideSpinner","lookup","foreignDataObj","group","sort","generatePredicate","updateDateFilter","getCaseValue","p","getModuleName","Data","dataState","isPending","resolver","initDataManager","on","events.rowsAdded","addRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","gObj","dataManager","generateQuery","skipPage","columnQueryMode","select","map","selectQueryFields","filterQuery","searchQuery","aggregateQuery","sortQuery","pageQuery","groupQuery","isForeign","aggregate","allowPaging","enableVirtualization","pageSettings","currentPage","max","pageCount","pageSize","page","groupSettings","getColumnByField","isGrpFmt","formatGroupColumn","sortGrp","fn","sortBy","sSettings","searchSettings","f","getModulename","fGeneratePredicate","skipFoerign","actualFilter","checkBoxCols","defaultFltrCols","_b","columns_1","excelPredicate","_c","_d","_e","defaultFltrCols_1","column_1","sType","getKey","getPrimaryKeyFieldNames","crud","fromTable","changes","addedRecords","deletedRecords","changedRecords","saveChanges","insert","ready","deferred_1","catch","reject","date","getHours","getMinutes","getMilliseconds","update","previousData","original","deff","endEdit","setState","offline","splice","toIndex","off","getState","pvtData","dataArgs","isDataChanged","editArgs","Row","Cell","isSpanned","CellMergeRender","render","cellArgs","td","cellRenderer","getCellRenderer","cellType","cellSpan","colSpan","spanText","aria-colSpan","enableColumnVirtualization","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","rows","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","rows_1","getVisibleColumns","item","RowRenderer","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","tr","cells_1","rowArgs","attrCopy","chekBoxEnable","isDataRow","isSelected","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","isExpand","DetailExpand","Filter","CommandColumn","scrollHeight","footerTemplate","summarycell","lastSummaryCell","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","rowSpan","class","RowModelGenerator","generateRows","startIndex","generateRow","ensureColumns","detailTemplate","childGrid","generateCell","indent","enableAltRow","refreshForeignKeyRow","generateCells","tmp","dummy","rowId","oIndex","opt","isDataCell","isTemplate","rowID","refreshRows","input","__extends","extendStatics","d","b","setPrototypeOf","__proto__","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","start","end","apply","currentViewData","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","sColumn","scolumn","single","setTemplate","types","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","initVal","reduce","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","getGroupedRecords","items","GroupGuid","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","getForeignKeyData","unshift","cRow","ContentRender","freezeRows","movableRows","isLoaded","drop","events.columnDrop","droppedElement","rafCallback","arg","ariaService","setBusy","getPanel","getFrozenColumns","isFrozen","events.contentReady","events.dataBound","allowTextWrap","events.freezeRender","case","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","renderPanel","innerDiv","setOptions","busy","setPanel","renderTable","contentDiv","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","frozenRows","getHeaderContent","cellspacing","setColGroup","getColGroup","splitRows","idx","freezeRowElements","rowElements","refreshContentRows","hdrTbody","frag","createDocumentFragment","hdrfrag","fCont","mCont","cont","modelData","registeredTemplate","tbody","getRowTemplate","isTR","nodeName","colcount","getHeaderTable","Number","overflowY","borderRightWidth","appendContent","contentPanel","panel","contentTable","getRows","getMovableRows","getRowElements","getMovableRowElements","setRowElements","colgroup","colGroup","fRows","mRows","rowLen","cellLen","testRow","r","clen","getNormalizedColumnIndex","canSkip","displayVal","childNodes","mTable","getContent","replaceChild","Droppable","accept","setSelection","set","clearAll","getRowByIndex","getDataRows","getVirtualRowIndex","getMovableRowByIndex","getMovableDataRows","module","enable","setRowObjects","HeaderRender","frzIdx","sender","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","getColumnByUid","firstElementChild","lineHeight","dragStart","events.columnDragStart","event","drag","closest","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","widthService","events.columnPositionChanged","colPosRefresh","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","createTable","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","Header","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getObjDepth","getHeaderCells","len_2","HeaderIndent","DetailHeader","appendCells","isFirstObj","isFirstCol","isLastCol","isMovable","lastCol","getCellCnt","frzObj","refreshFrozenHdr","isPartial","isComp","frozenColumns","StackedHeader","getColSpan","getColumnIndexByUid","getColumnIndexByField","frozenCnt","frzCol","rowIndex","colIndex","mTblColGrp","refreshUI","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","depth","checkDepth","indices","showDropArea","headerRows","Draggable","dragTarget","distance","abort","CellRenderer","locator","localizer","formatter","tabindex","rowChkBox","getGui","evaluate","fData","dummyData","invokeFormatter","refreshCell","refreshTD","elements_1","innerHtml","displayAsCheckBox","localeStr","fromFormatter","appendHtml","persistSelection","checkWrap","setAttributes","isNaN","parseInt","property","buildAttributeFromCell","clipMode","isCheckBoxType","colindex","AriaService","name","config","setExpand","expand","setSort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","haspopup","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","checkAllWrap","matchFlColumns","count","extendPrepareHeader","gridObj","headerTextAlign","alignment","matchFilteredColumns","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","Render","emptyGrid","l10n","renderer","addEventListener","headerRenderer","getRenderer","contentRenderer","Content","isLayoutRendered","emptyRow","refreshDataManager","refreshComplete","isFActon","isNeedForeignAction","deffered","getFData","deffered_1","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","dmSuccess","dmFailure","renderEmptyRow","isTrigger","colspan","events.onEmpty","dynamicColumnChange","getCurrentViewRecords","updateColumnType","record","isColTypeDef","isEdit","prevPageMoving","totalRecordsCount","updatesOnInitialRender","events.dataReady","alert","error","buildColumns","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","group0","groupN","addWhere","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","uGroup","itemGroup","uGroupItem","data_1","CellRendererFactory","cellRenderMap","getEnumValue","ServiceLocator","services","register","RendererFactory","rendererMap","rName","ColumnWidthService","setColumnWidth","cWidth","getWidth","setWidth","setWidthToTable","Boolean","elementWidth","headerCol","header","getContentTable","fWidth","formatUnit","mHdr","contentCol","getSiblingsHeight","getHeightFromDirection","sibling","minWidth","maxWidth","getTableWidth","tWidth","setWidthToFrozenTable","freezeWidth","setWidthToMovableTable","movableWidth","FocusStrategy","currentInfo","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","force","isContent","isHeader","clearOutline","beforeArgs","byKey","byClick","clickArgs","onKeyPress","skipOn","keyArgs","bValue","outline","swapInfo","jump","toHeader","toFrozen","getNextCurrent","active","setActiveByKey","clearIndicator","preventDefault","activeElement","getFocusedElement","fContent","fHeader","setFocusedElement","setTimeout","addFocus","info","isFocused","isJump","container","getInfo","cellIndex","focusedColumnUid","getColumnByIndex","refreshMatrix","FixedContentFocus","ContentFocus","FixedHeaderFocus","HeaderFocus","cFocus","updateRow","generate","handlerInstance","index_1","focusElement","cellPosition","gridPosition","min","innerWidth","documentElement","bottom","innerHeight","clientHeight","passiveHandler","event.keyPressed","event.click","event.contentReady","event.headerRefreshed","restoreFocus","evt","event.onEmpty","internalCellFocus","removeEventListener","getPrevIndexes","forgetPrevious","actions","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","navigator","inValid","vector","moveTo","rIndex","cIndex","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","child","isDirty","frozenSwap","enterFrozen","previous","optionals","defaultLen","isData","isSelectable","current1","current2","current3","SearchBox","searchFocus","searchBlur","wireEvent","unWireEvent","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","PageSettings","Property","__assign","assign","t","s","n","Selection","selectedRowIndexes","selectedRowCellIndexes","selectedRecords","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","isCancelDeSelect","isPreventCellSelect","disableUI","factory","initializeSelection","mouseDownHandler","onActionBegin","fDataUpdate","rowObj","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","clearSelection","isEditing","editModule","formObj","validate","isPersistSelection","getSelectedMovableRow","getCurrentBatchRecordChanges","currentRecords","getBatchChanges","primaryKey","selectRow","isToggle","selectedRow","selectedMovableRow","selectData","getRowObjectFromUID","isRowType","hasAttribute","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","addMovableArgs","clearRow","updateRowSelection","selectedRowIndex","updateRowProps","targetObj","mRow","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedData","prevRow","rowIndexes_1","rowIdx","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","isRowSelected","updatePersistCollection","chkState","pKey_1","updatePersistDelete","pKey","updateCheckBoxes","chkBox","nextElementSibling","checkedTarget","setCheckAllState","pop","clearCellSelection","currentRow","movableRow","rowDeselectObj","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","getCellIndex","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","selectCells","rowCellIndexes","addRowCellIndex","addCellsToSelection","getMovableRowsObject","cellIndexes_1","selectedCellIdx","cellDeselect","m","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","selectLikeExcel","startCellIndex","mouseUpHandler","isDrag","allowRowDragAndDrop","postion","clearSelAfterRefresh","events.initialEnd","events.inBoundModelChanged","onPropertyChanged","onCellFocused","actionBeginFunction","actionCompleteFunction","refreshHeader","addEventListener_checkbox","removeEventListener_checkbox","beforeFragAppend","getCheckAllBox","checkBoxSelectionChanged","initPerisistSelection","checkboxMode","gobj","checkboxColumn","chkField","ensureCheckboxFieldSelection","proxy_1","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","checkSelectAllAction","cRenderer","editForm","checkSelectAll","stateStr","getCheckAllStatus","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","updateSelectedRowIndex","selectedVal","isInteraction","checkedLen","spanEle","popUpClickHandler","chkSelect","checkboxOnly","showPopup","clear","headerAction","thLen","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","applyUpDown","isAdd","getSelectedRecords","getRowsObject","onDataBoundFunction","actionCompleteFunc","actionCompleteHandler","events.click","Search","searchString","refreshSearch","onSearchComplete","cancelBeginEvent","ShowHide","showBy","getToggleFields","hide","hideBy","getKeyBy","allowSelection","Scroll","lastScrollTop","previousValues","oneTimeReady","toolbarModule","toolbar","refreshOverflow","setHeight","mHdrHeight","ensureOverflow","setPadding","getThreshold","cssProps","getCssProperties","border","padding","removePadding","setScrollLeft","headerModule","getMovableHeader","scrollLeft","onContentScroll","scrollTarget","isPreventScrollEvent","isFooter","scrollTop","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","setPageXY","touches","pageX","pageY","getFooterContent","sLeft","sHeight","css","Print","scrollModule","isAsyncPrint","printing","print","renderPrintGrid","printWind","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","isPrintGrid","printGridModel","printGridProp","printMode","printGrid","Grid","selectedRows","detach","removeColGroup","overflowX","waitingPop","printWindow","groupCaption","colGroups","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","keyDownHandler","clipBoardTextArea","readonly","aria-label","setCopyData","withHeader","getSelection","selectedIndexes","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","userAgent","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","getSelectedRowCellIndexes","str","stringify","SortDescriptor","SortSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","inViewIndexes","freezeRefresh","Component","needsID","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","ignoreOnColumn","currentObject","ignoreInArrays","addOnPersist","ignoreInColumn","requiredModules","modules","member","allowExcelExport","allowPdfExport","isDetail","toolbarTemplate","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","mediaCol","isInitialLoad","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","autoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","NumberFilter","TextFilter","DateFilter","DateTimeFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","renderModule","getMediaColumns","searchModule","processModel","gridRender","addListener","updateStackedFilter","gcol","getShowHideService","hideAtMedia","media","matchMedia","mediaQueryUpdate","matches","showHider","refreshMediaCol","footerContent","eventInitializer","hasGridChild","unwireEvents","removeListener","destroyDependentModules","toolTipObj","keyboardModule","focusModule","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","updateRTL","ej2_instances","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","gResult_1","enableHover","muteOnChange","filterModule","refreshFilter","headerRows_1","updateColumnModel","columnModel","updateFrozenColumns","isRefresh","inview","vLen","stackedHeader","individualColumn","stackedColumn","getLocaleConstants","setColumnIndexesInView","setGridHeaderContent","contentModule","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getElementsByClassName","getFooterContentTable","getPager","gridPager","setGridPager","getRowInfo","row_1","rowsObject","mrows","dRows","setCellValue","fieldIdx","mTr","pkName","movableSelectedRow","rowObjects","movableRowObjects","sRow","setRowData","rowObject","getColumnHeaderByField","getColumnHeaderByUid","getUidByColumnField","getColumnFieldNames","columnNames","getDetailTemplate","k","getSelectedRows","selectionModule","showColumns","hideColumns","getFrozenCount","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","visibleFrozenColumns","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","actualFilterValue","actualOperator","clearFiltering","removeFilteredColsByField","isClearFilterBar","printModule","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","clipboardModule","recalcIndentWidth","indentWidth","perPixel","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","L10n","valueFormatterService","flag","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","Tooltip","opensOn","getTooltipStatus","htable","ctable","isEllipsisTooltip","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","dataBoundFunction","isChildGrid","checkEdit","filterClear","keyPress","saveCell","localStorage","getItem","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","arr","ind","localCol","setInjectedModules","injectedModules","refreshColumns","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","ungroupColumn","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","propertyNames","clearTemplate","Complex","Event","NotifyPropertyChanges","Inject","Sort","contentRefresh","isModelChanged","aria","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","allowMultiSorting","backupSettings","removeSortIcons","updateSortedCols","lastSortedCols","lastCols","restoreSettings","refreshSortSettings","addSortIcons","refreshSortIcons","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","pagerObj","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","next","last","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","pagerAllDropDown","All","containerModule","pagerMessageModule","enableExternalMessage","checkpagesizes","pagerTemplate","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","getPagerTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","PagerDropDown","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","convertValue","defaultValue","dropDownListObject","DropDownList","change","onChange","beforeValueChange","pageSizeValue","ExternalMessage","externalMessage","Page","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","keyPressHandler","appendToElement","handlers","load","complete","updateLayout","inboundChange","FilterCellRenderer","fltrData","filterBarTemplate","showClearButton","Element","templateWrite","write","FlMenuOptrUI","customFltrOperators","customFilterOperators","renderOperatorUI","dlgConetntEle","dlgObj","optrData","customOptr","operators","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","getFlOperator","StringFilterUI","serLocator","actObj","AutoComplete","getAutoCompleteOptions","sortOrder","openPopup","filterType","getOptrInstance","autofill","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","NumberFilterUI","numericTxtObj","NumericTextBox","BooleanFilterUI","dropInstance","drpuiObj","DateFilterUI","fltrSettings","inputElem","datePickerObj","DatePicker","DateTimePicker","FilterMenuRenderer","fltrObj","isDialogOpen","colTypes","string","number","boolean","datetime","flMuiObj","renderDlgContent","getElementById","mainDiv","dlgDiv","showCloseIcon","closeOnEscape","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","renderFlValueUI","valueDiv","instanceofFilterUI","ui","dlgContentEle","flValue","flOptrValue","targ","fltrValue","iconClass","flIcon","ExcelFilter","getCMenuDS","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","menu","ul","icon","createMenuElem","ensureTextFilter","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","submenu","isCMenuOpen","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","getCMenuYPosition","MouseEvent","contextWidth","filterLength","renderDialogue","complexFieldName","isModal","overlayClick","removeDialog","createdDialog","removeObjects","datePicker","dateTimePicker","renderCustomFilter","dlgFields","fieldSet","displayName","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","andRadio","firstOperator","firstValue","secondOperator","secondValue","arg7","arg8","elementID","isFirst","fieldElement","xlfloptr","menuText","getSelectedValue","getSelectedText","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","RadioButton","orRadio","elementId","isFilteredCol","fltrPredicates","columnObj","valueInput","renderAutoComplete","renderNumericTextBox","renderDate","renderDateTime","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","completeAction","columnvalue","mapObject","performComplexDataOperation","returnObj","duplicateMap","cellText","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","detail","updateFilterMsg","filterBarElement","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","keyUpHandler","filterMenuClose","columnMenuFilter","filterIconClickHandler","filterCell","checkForSkipInput","filterStatusMsg","applyColumnFormat","addFilteredClass","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","refreshFilterSettings","updateFilter","getFilterBarElement","fltrElement","isClose","filterDialogOpen","customOperators","filterHandler","localizedStrings","fCell","currentFilterColumn","closeHeaderEle","keyCode","processFilter","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","stopTimer","startTimer","timer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","datepickerEle","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","resizeColumn","footerTable","headerTextClone","contentTextClone","indentWidthClone","detailsElement","contentText","wHeader","wContent","columnbyindex","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","resizeStart","callAutoFit","getTargetColumn","refreshColumnWidth","mtbody","ftbody","mtr","ftr","removeProperty","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","setHelperHeight","mousemove","colData","updateHelper","isFrozenColResized","doubleTapEvent","calcPos","floor","cls","fLeft","parentOffset","offset","doc","ownerDocument","offsetParent","parentNode","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","oldIdx","column_2","newIndex","destIndex","getColParent","srcIdx","fromIndex","flatColumns","fTh","mTh","fHeaders","fColumn","toColumn","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseLeft","cliRectBaseRight","scrollElem","cliRectBase","RowDD","events.rowDragStart","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","events.rowDrag","events.rowDrop","initializeDrag","events.rowDragAndDropComplete","getTargetIdx","targetRow","srcControl","targetIndex","skip","isAppliedGroup","isAppliedUnGroup","groupGenerator","dropArea","onGroupAggregates","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","groupAddSortingQuery","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","editedData","iterateGroupAggregates","summaryRows","dataUid","updatedData","initData","deletedCols","changeds","mergeData","pKeyVal","cItem","eData","aggr","aggrds","DetailRow","toogleExpandcollapse","uid_1","nextRow","isDetailRow","detailRow","detailCell","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","injectedModues","gridElem","idx_1","detailElement","getTDfromIndex","collapse","Toolbar","predefinedItems","gridID","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","createToolbar","getItems","tool","clicked","toolbarClickHandler","enablePersistence","viewStr","searchElement","refreshToolbarItems","updateSearchBox","enableItems","disableItems","hasData","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","isEnable","items_1","gID","originalEvent","tarElement","targetEle","offsetTop","searchBoxObj","FooterRenderer","gridModule","modelGenerator","movableContent","fDiv","mDiv","frozenContent","tFoot","freezeTable","renderSummaryContent","cStart","cEnd","summaries","dummies","fragment","rowrenderer","srow","frozenDiv","onScroll","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","updateFooterTableWidth","fCol","refreshFooterRenderer","onAggregates","mergeds","initds","addrow","idVal","currentds","currentData","curIndx","agrVal","SummaryCellRenderer","refreshWithAggregate","tempObj","cellNode","curCell","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","getFormatFromType","cModel","InterSectionObserver","fromWheel","touchMove","sentinelInfo","up","check","containerRect","entered","pageHeight","axis","down","observe","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounced50","axes","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","cache","groups","rowModelGenerator","notifyArgs","virtualInfo","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","blockIndexes","isBlockAvailable","getStartIndex","median","updateGroupRow","getPage","block","columnIndexes","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","refreshColOffsets","gLen","currentFirst","iterateGroup","oRow","shift","VirtualContentRenderer","prevHeight","preventEvent","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","getBlockHeight","observer","adjustTable","scrollListener","scrollArgs","viewInfo","getInfoFromView","prevInfo","tempBlocks","infoType","getPageFromTop","blocks","ensureBlocks","every","mIdx","old","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","sTop","setVirtualHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","cHeight","isOnenter","endTranslate","blockHeight","maxBlock","onEntered","getBlockSize","totalBlocks","startIdx","bSize","rem","size","refreshVirtualElement","VirtualHeaderRenderer","gen","xValue","yValue","transform","VirtualScroll","ensurePageSize","blockSize","InlineEditRender","addNew","mTbody","getEditElement","renderMovableform","form","movableForm","updateFreezeEdit","getFreezeRow","fHdr","tdElement","refreshFreezeEdit","fCls","mTd","updateFrozenCont","td_1","BatchEditRender","columnObject","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","dialog","primaryKeyValue","allowDragging","dialogClose","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","cols_1","tArgs","isInput","BooleanEditCell","activeClasses","classNames","selectChkBox","editRow","checkBoxChange","DropDownEditCell","ddActionComplete","popupHeight","dlgElement","NumericEditCell","instances","DefaultEditCell","NormalEdit","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","applyFormValidation","editFormValidate","form1","form2","mFormObj","getCurrentEditedData","mForm","addedRowIndex","destroyElements","destroyWidgets","destroyForm","editHandler","edSucc","edFail","editSuccess","editFailure","updateCurrentViewData","requestSuccess","stopEditStatus","dataLen","tmpRecord","contained","mElem","editMElem","InlineEdit","BatchEdit","cellDetails","onBeforeCellFocused","editNextValCell","setCellIdx","editCell","isAddRow","validateFormObj","isLastCellPrimaryKey","editCellFromIndex","isAdded","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchSave","batchChanges","mergeBatchChanges","i_1","addRowObject","getIndexFromData","uniqueid","nonMovableRows","defaultData","getDefaultData","findNextEditableCell","args1","isValOnly","validation","validationRules","checkNPCell","dValues","mRowData","colIdx","getDataByIndex","getCellIdx","isColored","updateCell","setChanges","rowcell","isForceSave","cloneEditedData","previousValue","visibleColumns","addCancelWhilePaging","DialogEdit","DatePickerEditCell","TemplateEditCell","editCellType","dropdownedit","numericedit","datepickeredit","datetimepickeredit","booleanedit","defaultedit","templateedit","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","tapEvent","Global","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","batchCancel","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","inputElements","inputs","restrictedRequestTypes","preventObj","rules","mRules","createFormObj","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","getElemTable","outerHTML","isFHdr","inputName","gcontent","isScroll","inputClient","arrow","defaultView","getComputedStyle","getPropertyValue","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","rtlUpdate","enableAfterRenderEle","hideDialog","targetElement","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","targetdlg","hideOpenedDialog","addcancelIcon","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","beforeOpen","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","columnStateChange","dialogInstance","stateColumns","colUid","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","okButton","clearSearch","buttonEle","nMatchele","checkBoxClickHandler","checkstate","columnUid","srchShowCols","searchData","itemsLen","columnUID","hideCols","gdCol","ulElement","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","cbox","cclist","hideColState","showColState","cccheckboxlist","searchValue","proxy","interval","openCC","dlgEle","dlgLen","ExportHelper","hideColumnInclude","getQuery","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getConvertedWidth","getCellCount","resultCells","appendGridCells","gridRows","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","exportProperties","isCsv","processRecords","processInnerRecords","groupedColLength","blankRows","multipleExport","worksheets","processExcelHeader","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","blobPromise","returnType","currentViewRecords","processRecordRows","processGroupedRows","processAggregates","processExcelFooter","sheet","Workbook","saveAsBlob","fileName","save","dataSource_1","getCaptionThemeStyle","theme","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","grouping","outlineLevel","isCollapsed","rLen","excelCellArgs","styleIndex","getColumnStyle","mergeOptions","rec","byGroup","summaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","getAggreateValue","hAlign","wholeText","JSON1","JSON2","attrname","returnValue","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","excelHeaderCellArgs","setStyle","parseStyles","getRecordThemeStyle","fontSize","borders","color","updateThemeStyle","themestyle","fontColor","fontName","lineStyle","bold","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","PdfExport","customDataSource","isGrouping","pdfDocument","PdfDocument","processExport","gridTheme","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","pdfColor","penBrushColor","hexToRgb","g","PdfBorders","PdfPen","borderColor","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","groupSummaryModel","columnCount","getColumn","gridHeader","getHeader","getHorizontalAlignment","getVerticalAlignment","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","txt","gridRow","setRecordThemeStyle","processCellStyle","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","button","onclick","buttonObj","Button","commandType","commandClickHandler","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","updateItemStatus","getLocaleText","showItems","closestGrid","hiddenSepItems","showSepItems","dItem","ensureDisabledStatus","ensureTarget","parentItem","hideItems","eventArgs","ensureFrozenHeader","substr","generateID","AutoFitAll","AutoFit","CsvExport","export","PrevPage","FreezeRowModelGenerator","isFrzLoad","FreezeContentRender","setFrozenContent","setMovableContent","getMovableContent","getFrozenContent","mTbl","FreezeRender","refreshFreeze","setFrozenHeight","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","getFrozenHeader","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","fRowSpan","mRowSpan","fTr","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenHeader","movableHeader","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","colChooser","currentTarget","getFilter","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initEvent","initForeignKeyColumns","generateQueryFormData","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","isTrue","filterColumn","destroyEvent"],"mappings":"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"}