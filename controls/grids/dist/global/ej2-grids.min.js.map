{"version":3,"file":"ej2-grids.min.js","sources":["../../src/grid/actions/print.js","../../src/grid/base/util.js","../../src/grid/services/aria-service.js","../../src/grid/actions/aggregate.js","../../src/grid/renderer/datepicker-edit-cell.js","../../src/grid/services/value-formatter.js","../../src/grid/models/column.js","../../src/grid/base/constant.js","../../src/grid/base/enum.js","../../src/grid/actions/checkbox-filter.js","../../src/grid/actions/data.js","../../src/grid/models/row.js","../../src/grid/models/cell.js","../../src/grid/renderer/cell-merge-renderer.js","../../src/grid/renderer/row-renderer.js","../../src/grid/services/row-model-generator.js","../../src/grid/services/summary-model-generator.js","../../src/grid/services/group-model-generator.js","../../src/grid/renderer/content-renderer.js","../../src/grid/renderer/header-renderer.js","../../src/grid/renderer/cell-renderer.js","../../src/grid/renderer/header-cell-renderer.js","../../src/grid/renderer/stacked-cell-renderer.js","../../src/grid/renderer/indent-cell-renderer.js","../../src/grid/renderer/caption-cell-renderer.js","../../src/grid/renderer/expand-cell-renderer.js","../../src/grid/renderer/header-indent-renderer.js","../../src/grid/renderer/detail-header-indent-renderer.js","../../src/grid/renderer/detail-expand-cell-renderer.js","../../src/grid/renderer/row-drag-drop-renderer.js","../../src/grid/renderer/row-drag-header-indent-render.js","../../src/grid/renderer/render.js","../../src/grid/services/cell-render-factory.js","../../src/grid/services/service-locator.js","../../src/grid/services/renderer-factory.js","../../src/grid/services/width-controller.js","../../src/grid/services/focus-strategy.js","../../src/grid/models/page-settings.js","../../src/grid/actions/selection.js","../../src/grid/actions/search.js","../../src/grid/actions/show-hide.js","../../src/grid/actions/scroll.js","../../src/grid/models/aggregate.js","../../src/grid/actions/clipboard.js","../../src/grid/base/grid.js","../../src/grid/actions/sort.js","../../src/pager/numeric-container.js","../../src/pager/pager-message.js","../../src/pager/pager.js","../../src/pager/pager-dropdown.js","../../src/pager/external-message.js","../../src/grid/actions/page.js","../../src/grid/renderer/filter-cell-renderer.js","../../src/grid/renderer/filter-menu-operator.js","../../src/grid/renderer/string-filter-ui.js","../../src/grid/renderer/number-filter-ui.js","../../src/grid/renderer/boolean-filter-ui.js","../../src/grid/renderer/date-filter-ui.js","../../src/grid/renderer/filter-menu-renderer.js","../../src/grid/actions/excel-filter.js","../../src/grid/actions/filter.js","../../src/grid/actions/resize.js","../../src/grid/actions/reorder.js","../../src/grid/actions/row-reorder.js","../../src/grid/actions/group.js","../../src/grid/actions/detail-row.js","../../src/grid/actions/toolbar.js","../../src/grid/renderer/footer-renderer.js","../../src/grid/renderer/summary-cell-renderer.js","../../src/grid/services/intersection-observer.js","../../src/grid/services/virtual-row-model-generator.js","../../src/grid/renderer/virtual-content-renderer.js","../../src/grid/actions/virtual-scroll.js","../../src/grid/renderer/inline-edit-renderer.js","../../src/grid/renderer/batch-edit-renderer.js","../../src/grid/renderer/dialog-edit-renderer.js","../../src/grid/renderer/edit-renderer.js","../../src/grid/renderer/boolean-edit-cell.js","../../src/grid/renderer/dropdown-edit-cell.js","../../src/grid/renderer/numeric-edit-cell.js","../../src/grid/renderer/default-edit-cell.js","../../src/grid/actions/normal-edit.js","../../src/grid/actions/inline-edit.js","../../src/grid/actions/batch-edit.js","../../src/grid/actions/dialog-edit.js","../../src/grid/renderer/template-edit-cell.js","../../src/grid/actions/edit.js","../../src/grid/actions/column-chooser.js","../../src/grid/actions/export-helper.js","../../src/grid/actions/excel-export.js","../../src/grid/actions/pdf-export.js","../../src/grid/renderer/command-column-renderer.js","../../src/grid/actions/command-column.js","../../src/grid/actions/context-menu.js","../../src/grid/services/freeze-row-model-generator.js","../../src/grid/renderer/freeze-renderer.js","../../src/grid/actions/freeze.js","../../src/grid/actions/column-menu.js","../../src/grid/actions/foreign-key.js","../../src/grid/actions/logger.js","../../src/grid/renderer/autocomplete-edit-cell.js","../../src/grid/renderer/combobox-edit-cell.js","../../src/grid/renderer/multiselect-edit-cell.js","../../src/grid/renderer/timepicker-edit-cell.js","../../src/grid/renderer/toggleswitch-edit-cell.js","../../src/grid/renderer/inputmask-edit-cell.js","../../src/global.js"],"sourcesContent":["import { print as printWindow, createElement, detach, classList } from '@syncfusion/ej2-base';\nimport { getPrintGridModel } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\nimport { Deferred } from '@syncfusion/ej2-data';\n/**\n * @hidden\n */\nexport function getCloneProperties() {\n    return ['aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString', 'enableRtl',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging', 'hierarchyPrintMode', 'searchSettings'];\n}\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.defered = new Deferred();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.isContentReady(), this);\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.on(events.hierarchyPrint, this.hierarchyPrint, this);\n        this.scrollModule = scrollModule;\n    }\n    Print.prototype.isContentReady = function () {\n        var _this = this;\n        if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === 'None' || !this.parent.childGrid)) {\n            return this.contentReady;\n        }\n        return function () {\n            _this.defered.promise.then(function () {\n                _this.contentReady();\n            });\n            if (_this.isPrintGrid()) {\n                _this.hierarchyPrint();\n            }\n        };\n    };\n    Print.prototype.hierarchyPrint = function () {\n        this.removeColGroup(this.parent);\n        var printGridObj = window.printGridObj;\n        if (printGridObj && !printGridObj.element.querySelector('[aria-busy=true')) {\n            printGridObj.printModule.defered.resolve();\n        }\n    };\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](grid/#printmode-string/).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        document.body.appendChild(element);\n        var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));\n        printGrid.query = gObj.getQuery().clone();\n        window.printGridObj = printGrid;\n        printGrid.isPrinting = true;\n        var modules = printGrid.getInjectedModules();\n        var injectedModues = gObj.getInjectedModules();\n        if (!modules || modules.length !== injectedModues.length) {\n            printGrid.setInjectedModules(injectedModues);\n        }\n        gObj.notify(events.printGridInit, { element: element, printgrid: printGrid });\n        this.parent.log('exporting_begin', this.getModuleName());\n        printGrid.appendTo(element);\n        printGrid.registeredTemplate = this.parent.registeredTemplate;\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false,\n                hierarchyPrintMode: gObj.hierarchyPrintMode\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') { // if scroller enabled\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.e-content');\n            var headerDiv = gObj.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj);\n            }\n        }\n        // hide horizontal scroll\n        for (var _i = 0, _a = [].slice.call(gObj.element.querySelectorAll('.e-content')); _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.overflowX = 'hidden';\n        }\n        // Hide the waiting popup\n        var waitingPop = gObj.element.querySelectorAll('.e-spin-show');\n        for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {\n            var element = _c[_b];\n            classList(element, ['e-spin-hide'], ['e-spin-show']);\n        }\n        this.printGridElement(gObj);\n        gObj.isPrinting = false;\n        delete window.printGridObj;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n        this.parent.log('exporting_complete', this.getModuleName());\n    };\n    Print.prototype.printGridElement = function (gObj) {\n        classList(gObj.element, ['e-print-grid-layout'], ['e-print-grid']);\n        if (gObj.isPrinting) {\n            detach(gObj.element);\n        }\n        this.printWind = printWindow(gObj.element, this.printWind);\n    };\n    Print.prototype.removeColGroup = function (gObj) {\n        var depth = gObj.groupSettings.columns.length;\n        var element = gObj.element;\n        var id = '#' + gObj.element.id;\n        if (!depth) {\n            return;\n        }\n        var groupCaption = element.querySelectorAll(id + \"captioncell.e-groupcaption\");\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = element.querySelectorAll(\"colgroup\" + id + \"colGroup\");\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].childNodes[j].style.display = 'none';\n            }\n        }\n    };\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent.isPrinting;\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.off(events.hierarchyPrint, this.hierarchyPrint);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = getCloneProperties().concat([events.beforePrint, events.printComplete]);\n    return Print;\n}());\nexport { Print };\n","import { ChildProperty, compile as baseTemplateComplier, setValue, Internationalization } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { isObject } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition, calculatePosition } from '@syncfusion/ej2-popups';\nimport { Print } from '../actions/print';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, data);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function updatecloneRow(grid) {\n    var nRows = [];\n    var actualRows = grid.vRows;\n    for (var i = 0; i < actualRows.length; i++) {\n        if (actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n        }\n        else if (!actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n            if (!actualRows[i].isExpand && actualRows[i].isCaptionRow) {\n                i += getCollapsedRowsCount(actualRows[i], grid);\n            }\n        }\n    }\n    grid.vcRows = nRows;\n}\n/**\n * @hidden\n */\nvar count = 0;\nexport function getCollapsedRowsCount(val, grid) {\n    count = 0;\n    var gSummary = 'gSummary';\n    var total = 'count';\n    var gLen = grid.groupSettings.columns.length;\n    var records = 'records';\n    var items = 'items';\n    var value = val[gSummary];\n    var dataRowCnt = 0;\n    var agrCnt = 'aggregatesCount';\n    if (value === val.data[total]) {\n        if (grid.groupSettings.columns.length && !isNullOrUndefined(val[agrCnt])) {\n            if (grid.groupSettings.columns.length !== 1 && val[agrCnt]) {\n                count += (val.indent !== 0 && (value) < 2) ? (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent) * val[agrCnt])) :\n                    (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent - 1) * val[agrCnt])) + val[agrCnt];\n            }\n            else if (val[agrCnt] && grid.groupSettings.columns.length === 1) {\n                count += (val[gSummary] * (gLen - val.indent)) + val[agrCnt];\n            }\n        }\n        else if (grid.groupSettings.columns.length) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += val[gSummary] * (grid.groupSettings.columns.length - val.indent);\n            }\n            else {\n                count += val[gSummary];\n            }\n        }\n        return count;\n    }\n    else {\n        for (var i = 0, len = val.data[items].length; i < len; i++) {\n            var gLevel = val.data[items][i];\n            count += gLevel[items].length + ((gLen !== grid.columns.length) &&\n                !isNullOrUndefined(gLevel[items][records]) ? gLevel[items][records].length : 0);\n            dataRowCnt += (!isNullOrUndefined(gLevel[items][records]) && !isNullOrUndefined(val[agrCnt])) ? gLevel[items][records].length :\n                gLevel[items].length;\n            if (gLevel[items].GroupGuid && gLevel[items].childLevels !== 0) {\n                recursive(gLevel);\n            }\n        }\n        count += val.data[items].length;\n        if (!isNullOrUndefined(val[agrCnt])) {\n            if (val[agrCnt] && count && dataRowCnt !== 0) {\n                count += ((count - dataRowCnt) * val[agrCnt]) + val[agrCnt];\n            }\n        }\n    }\n    return count;\n}\n/**\n * @hidden\n */\nexport function recursive(row) {\n    var items = 'items';\n    var rCount = 'count';\n    for (var j = 0, length_1 = row[items].length; j < length_1; j++) {\n        var nLevel = row[items][j];\n        count += nLevel[rCount];\n        if (nLevel[items].childLevels !== 0) {\n            recursive(nLevel);\n        }\n    }\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function iterateExtend(array) {\n    var obj = [];\n    for (var i = 0; i < array.length; i++) {\n        obj.push(baseExtend({}, getActualProperties(array[i]), {}, true));\n    }\n    return obj;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    Object.keys(moved).forEach(function (value, index) {\n        if (exclude && exclude.indexOf(value) !== -1) {\n            delete moved[value];\n        }\n    });\n    return moved;\n}\n/** @hidden */\nexport function setColumnIndex(columnModel, ind) {\n    if (ind === void 0) { ind = 0; }\n    for (var i = 0, len = columnModel.length; i < len; i++) {\n        if (columnModel[i].columns) {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n            ind = setColumnIndex(columnModel[i].columns, ind);\n        }\n        else {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n        }\n    }\n    return ind;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] });\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c]);\n            }\n            else {\n                columns[c].columns = prepareColumns(columns[c].columns);\n                column = new Column(columns[c]);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = (typeof column.valueAccessor === 'string' ? getValue(column.valueAccessor, window)\n            : column.valueAccessor) || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        var temp = column.customAggregate;\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n        }\n        return temp ? temp.call(context, data, column) : '';\n    }\n    return (column.field in data || data instanceof Array) ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/** @hidden */\nexport function getComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/\\./g, '___');\n}\n/** @hidden */\nexport function setComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/___/g, '.');\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n    return inst.editSettings.mode === 'Batch' &&\n        (inst.element.querySelectorAll('.e-updatedtd').length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj, grid) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos;\n    if (!grid.enableRtl) {\n        newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n        dialogObj.element.style.display = elementVisible;\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n        }\n        else {\n            dialogObj.element.style.left = leftPos + -4 + 'px';\n        }\n    }\n    else {\n        newpos = calculatePosition(target, 'left', 'bottom');\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 35 + 'px';\n        dialogObj.element.style.display = elementVisible;\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) + -16 + 'px';\n        }\n        else {\n            dialogObj.element.style.left = leftPos - 16 + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    span.classList.contains('e-check') ? classList(span, ['e-uncheck'], ['e-check']) :\n        classList(span, ['e-check'], ['e-uncheck']);\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n * @param row - Grid Row model object.\n * @param columns - Foreign columns array.\n * @param data - Updated Row data.\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    columns.forEach(function (col) {\n        setValue(col.field, getForeignData(col, data), row.foreignKeyData);\n    });\n    row.cells.forEach(function (cell) {\n        if (cell.isForeignKey) {\n            setValue('foreignKeyData', getValue(cell.column.field, row.foreignKeyData), cell);\n        }\n    });\n}\n/**\n * Get the foreign data for the corresponding cell value.\n * @param column - Foreign Key column\n * @param data - Row data.\n * @param lValue - cell value.\n * @param foreignData - foreign data source.\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (!isNullOrUndefined(lValue) ? lValue : valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || ((column.dataSource instanceof DataManager) && column.dataSource.dataSource.json.length ?\n        column.dataSource.dataSource.json : column.columnData);\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n * @param foreignKeyValue - Defines ForeignKeyValue.\n * @param columns - Array of column object.\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @hidden\n * @param filterObject - Defines predicate model object\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    if (filterObject.value === null) {\n        datePredicate = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        return datePredicate;\n    }\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @hidden\n */\nexport function renderMovable(ele, frzCols) {\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\n/**\n * @hidden\n */\nexport function isGroupAdaptive(grid) {\n    return grid.enableVirtualization && grid.groupSettings.columns.length > 0 && grid.isVirtualAdaptive;\n}\n/**\n * @hidden\n */\nexport function getObject(field, object) {\n    if (field === void 0) { field = ''; }\n    if (field) {\n        var value = object;\n        var splits = field.split('.');\n        for (var i = 0; i < splits.length && !isNullOrUndefined(value); i++) {\n            value = value[splits[i]];\n        }\n        return value;\n    }\n}\n/**\n * @hidden\n */\nexport function getCustomDateFormat(format, colType) {\n    var intl = new Internationalization();\n    var formatvalue;\n    var formatter = 'format';\n    var type = 'type';\n    if (colType === 'date') {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'date', format: format[formatter] }, false) :\n            intl.getDatePattern({ type: 'date', skeleton: format }, false);\n    }\n    else {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'dateTime', format: format[formatter] }, false) :\n            intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    return formatvalue;\n}\n/**\n * @hidden\n */\nexport function getExpandedState(gObj, hierarchyPrintMode) {\n    var rows = gObj.getRowsObject();\n    var obj = {};\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        if (row.isExpand && !row.isDetailRow) {\n            var index = gObj.allowPaging && gObj.printMode === 'AllPages' ? row.index +\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : row.index;\n            obj[index] = {};\n            obj[index].isExpand = true;\n            obj[index].gridModel = getPrintGridModel(row.childGrid, hierarchyPrintMode);\n            obj[index].gridModel.query = gObj.childGrid.query;\n        }\n    }\n    return obj;\n}\n/**\n * @hidden\n */\nexport function getPrintGridModel(gObj, hierarchyPrintMode) {\n    if (hierarchyPrintMode === void 0) { hierarchyPrintMode = 'Expanded'; }\n    var printGridModel = {};\n    if (!gObj) {\n        return printGridModel;\n    }\n    for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key === 'columns') {\n            printGridModel[key] = getActualPropFromColl(gObj[key]);\n        }\n        else if (key === 'allowPaging') {\n            printGridModel[key] = gObj.printMode === 'CurrentPage';\n        }\n        else {\n            printGridModel[key] = getActualProperties(gObj[key]);\n        }\n    }\n    if (gObj.childGrid && hierarchyPrintMode !== 'None') {\n        printGridModel.expandedRows = getExpandedState(gObj, hierarchyPrintMode);\n    }\n    return printGridModel;\n}\n/**\n * @hidden\n */\nexport function extendObjWithFn(copied, first, second, deep) {\n    var res = copied || {};\n    var len = arguments.length;\n    if (deep) {\n        len = len - 1;\n    }\n    var _loop_1 = function (i) {\n        if (!arguments_1[i]) {\n            return \"continue\";\n        }\n        var obj1 = arguments_1[i];\n        var keys = Object.keys(Object.getPrototypeOf(obj1)).length ?\n            Object.keys(obj1).concat(getPrototypesOfObj(obj1)) : Object.keys(obj1);\n        keys.forEach(function (key) {\n            var source = res[key];\n            var cpy = obj1[key];\n            var cln;\n            if (deep && (isObject(cpy) || Array.isArray(cpy))) {\n                if (isObject(cpy)) {\n                    cln = source ? source : {};\n                    res[key] = baseExtend({}, cln, cpy, deep);\n                }\n                else {\n                    cln = source ? source : [];\n                    res[key] = baseExtend([], cln, cpy, deep);\n                }\n            }\n            else {\n                res[key] = cpy;\n            }\n        });\n    };\n    var arguments_1 = arguments;\n    for (var i = 1; i < len; i++) {\n        _loop_1(i);\n    }\n    return res;\n}\n/**\n * @hidden\n */\nfunction getPrototypesOfObj(obj) {\n    var keys = [];\n    while (Object.getPrototypeOf(obj) && Object.keys(Object.getPrototypeOf(obj)).length) {\n        keys = keys.concat(Object.keys(Object.getPrototypeOf(obj)));\n        obj = Object.getPrototypeOf(obj);\n    }\n    return keys;\n}\n/**\n * @hidden\n */\nexport function measureColumnDepth(column) {\n    var max = 0;\n    for (var i = 0; i < column.length; i++) {\n        var depth = checkDepth(column[i], 0);\n        if (max < depth) {\n            max = depth;\n        }\n    }\n    return max + 1;\n}\n/**\n * @hidden\n */\nexport function checkDepth(col, index) {\n    var max = index;\n    var indices = [];\n    if (col.columns) {\n        index++;\n        for (var i = 0; i < col.columns.length; i++) {\n            indices[i] = checkDepth(col.columns[i], index);\n        }\n        for (var j = 0; j < indices.length; j++) {\n            if (max < indices[j]) {\n                max = indices[j];\n            }\n        }\n        index = max;\n    }\n    return index;\n}\n/**\n * @hidden\n */\nexport function refreshFilteredColsUid(gObj, filteredCols) {\n    for (var i = 0; i < filteredCols.length; i++) {\n        filteredCols[i].uid = filteredCols[i].isForeignKey ?\n            getColumnByForeignKeyValue(filteredCols[i].field, gObj.getForeignKeyColumns()).uid\n            : gObj.getColumnByField(filteredCols[i].field).uid;\n    }\n}\n","/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove && target) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount'\n};\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary].forEach(function (type) {\n            return cellFac.addCellRenderer(type, instance);\n        });\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            var cFormat = 'customFormat';\n            if (!isNullOrUndefined(column[cFormat])) {\n                column.setPropertiesSilent({ format: column[cFormat] });\n            }\n            column.setPropertiesSilent({ format: _this.getFormatFromType(column.format, type) });\n            column.setFormatter(_this.parent.locale);\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n    };\n    Aggregate.prototype.getFormatFromType = function (format, type) {\n        if (isNullOrUndefined(type) || typeof format !== 'string') {\n            return format;\n        }\n        var obj;\n        switch (type) {\n            case 'number':\n                obj = { format: format };\n                break;\n            case 'date':\n                obj = { type: type, skeleton: format };\n                break;\n            case 'datetime':\n                obj = { type: 'dateTime', skeleton: format };\n                break;\n        }\n        return obj;\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(refreshAggregates, this.refresh, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(refreshAggregates, this.refresh);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    Aggregate.prototype.refresh = function (data) {\n        var editedData = data instanceof Array ? data : [data];\n        this.parent.notify(refreshFooterRenderer, editedData);\n        if (this.parent.groupSettings.columns.length > 0) {\n            this.parent.notify(groupAggregates, editedData);\n        }\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    aggregates.forEach(function (row) {\n        row.columns.forEach(function (column) {\n            callback(column, row);\n        });\n    });\n}\n","import { extend } from '@syncfusion/ej2-base';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject, getCustomDateFormat } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        if (args.column.editType === 'datepickeredit') {\n            this.obj = new DatePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        else if (args.column.editType === 'datetimepickeredit') {\n            this.obj = new DateTimePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\nfunction dateanddatetimerender(args, mode, rtl) {\n    var isInline = mode !== 'Dialog';\n    var format = getCustomDateFormat(args.column.format, args.column.type);\n    var value = getObject(args.column.field, args.rowData);\n    value = value ? new Date(value) : null;\n    return {\n        floatLabelType: isInline ? 'Never' : 'Always',\n        value: value,\n        format: format,\n        placeholder: isInline ?\n            '' : args.column.headerText, enableRtl: rtl,\n        enabled: isEditable(args.column, args.requestType, args.element),\n    };\n}\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if ((type === 'date' || type === 'datetime' || type === 'number') && (!isNullOrUndefined(format))) {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","import { merge, isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData, getObject } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options) {\n        var _this = this;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create – It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](../../grid/filtering/#custom-component-in-filter-menu) for its customization.\n         *  @default {}\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         * @default {}\n         */\n        this.edit = {};\n        /**\n         * If `allowSearching` set to false, then it disables Searching of a particular column.\n         * By default all columns allow Searching.\n         * @default true\n         */\n        this.allowSearching = true;\n        /**\n         * If `autoFit` set to true, then the particular column content width will be\n         * adjusted based on its content in the initial rendering itself.\n         * Setting this property as true is equivalent to calling `autoFitColumns` method in the `dataBound` event.\n         * @default false\n         */\n        this.autoFit = false;\n        this.sortDirection = 'Descending';\n        /** @hidden */\n        this.getEditTemplate = function () { return _this.editTemplateFn; };\n        /** @hidden */\n        this.getFilterTemplate = function () { return _this.filterTemplateFn; };\n        merge(this, options);\n        this.uid = getUid('grid-column');\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(options.format));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        this.toJSON = function () {\n            var col = {};\n            var skip = ['filter', 'dataSource', 'headerText', 'template', 'headerTemplate', 'edit',\n                'editTemplate', 'filterTemplate', 'commandsTemplate'];\n            var keys = Object.keys(_this);\n            for (var i = 0; i < keys.length; i++) {\n                if (keys[i] === 'columns') {\n                    col[keys[i]] = [];\n                    for (var j = 0; j < _this[keys[i]].length; j++) {\n                        col[keys[i]].push(_this[keys[i]][j].toJSON());\n                    }\n                }\n                else if (skip.indexOf(keys[i]) < 0) {\n                    col[keys[i]] = _this[keys[i]];\n                }\n            }\n            return col;\n        };\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n            if (this.columns) {\n                this.allowResizing = this.columns.some(function (col) {\n                    return col.allowResizing;\n                });\n            }\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (!isNullOrUndefined(this.filter) && this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.editTemplate) {\n            this.editTemplateFn = templateCompiler(this.editTemplate);\n        }\n        if (this.filterTemplate) {\n            this.filterTemplateFn = templateCompiler(this.filterTemplate);\n        }\n        if (this.isForeignColumn() && (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = extend({\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            }, this.edit.params);\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y, xObj, yObj) {\n                if (typeof a_1 === 'string') {\n                    a_1 = getObject(a_1, window);\n                }\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                    var obj = xObj;\n                    xObj = yObj;\n                    yObj = obj;\n                }\n                return a_1(x, y, xObj, yObj);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getObject(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getObject(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /** @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /** @hidden */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /** @hidden */\n    Column.prototype.setProperties = function (column) {\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n        }\n    };\n    /**\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStartHelper = 'rowDragStartHelper';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var beforePaste = 'beforePaste';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/** @hidden */\nexport var commandClick = 'commandClick';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var groupAggregates = 'group-aggregates';\n/** @hidden */\nexport var refreshFooterRenderer = 'refresh-footer-rendered';\n/** @hidden */\nexport var refreshAggregateCell = 'refresh-aggregate-cell';\n/** @hidden */\nexport var refreshAggregates = 'refresh-aggregates';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var exportDetailDataBound = 'exportdetaildatabound';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n/** @hidden */\nexport var textWrapRefresh = 'textWrapRefresh';\n/** @hidden */\nexport var recordAdded = 'recordAdded';\n/** @hidden */\nexport var cancelBegin = 'cancel-Begin';\n/** @hidden */\nexport var editNextValCell = 'editNextValCell';\n/** @hidden */\nexport var hierarchyPrint = 'hierarchyprint';\n/** @hidden */\nexport var expandChildGrid = 'expandchildgrid';\n/** @hidden */\nexport var printGridInit = 'printGrid-Init';\n/** @hidden */\nexport var exportRowDataBound = 'export-RowDataBound';\n/** @hidden */\nexport var rowPositionChanged = 'row-position-changed';\n/** @hidden */\nexport var batchForm = 'batchedit-form';\n/** @hidden */\nexport var beforeStartEdit = 'edit-form';\n/** @hidden */\nexport var beforeBatchCancel = 'before-batch-cancel';\n/** @hidden */\nexport var batchEditFormRendered = 'batcheditform-rendered';\n/** @hidden */\nexport var partialRefresh = 'partial-refresh';\n/** @hidden */\nexport var blazorId = 'BlazorTemplateId';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n    /**  Defines CellType as DetailFooterIntent */\n    CellType[CellType[\"DetailFooterIntent\"] = 15] = \"DetailFooterIntent\";\n    /**  Defines CellType as RowDrag */\n    CellType[CellType[\"RowDragIcon\"] = 16] = \"RowDragIcon\";\n    /**  Defines CellType as RowDragHeader */\n    CellType[CellType[\"RowDragHIcon\"] = 17] = \"RowDragHIcon\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, isActionPrevent, appendChildren, getDatePredicate } from '../base/util';\nimport { remove, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilter.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchHandler, this);\n    };\n    CheckBoxFilter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        var elem = this.dlg.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilter.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            fPredicate.predicate.predicates.forEach(function (fpred) {\n                filterCollection.push({\n                    field: fpred.field,\n                    predicate: 'or',\n                    matchCase: fpred.ignoreCase,\n                    ignoreAccent: fpred.ignoreAccent,\n                    operator: fpred.operator,\n                    value: fpred.value,\n                    type: _this.options.type\n                });\n            });\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilter.prototype.foreignFilter = function (args, value) {\n        var operator = this.parent.getDataModule().isRemote() ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'startswith' : 'contains');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.parent.filterSettings.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilter.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilter.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilter.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilter.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.updateDataSource();\n        this.parent.log('column_type_missing', { column: options.column });\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilter.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = '800px';\n        this.dialogObj.show();\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilter.prototype.dialogCreated = function (e) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n        }\n        else {\n            this.dialogObj.position = { X: 'center', Y: 'center' };\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            var filterTemplateCol = this.parent.getColumns().filter(function (col) { return col.getFilterItemTemplate(); });\n            if (filterTemplateCol.length) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n        }\n    };\n    CheckBoxFilter.prototype.clearFilter = function () {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFilter });\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: this.options.field });\n    };\n    CheckBoxFilter.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input') {\n                var value = e.target.value;\n                if (this.options.column.type === 'boolean') {\n                    if (value !== undefined &&\n                        this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = 'true';\n                    }\n                    else if (value !== undefined &&\n                        this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = 'false';\n                    }\n                }\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.parent.getDataModule().isRemote() ?\n                            (this.options.column.type === 'string' ? 'contains' : 'equal') :\n                            (this.options.column.type === 'date' || this.options.column.type === 'datetime' ||\n                                this.options.column.type === 'boolean' ? 'equal' : 'contains'),\n                        value: value, matchCase: false, type: this.options.column.type\n                    },\n                    field: this.options.field\n                };\n                value ? this.options.column.isForeignColumn() ? this.foreignFilter(args, value) :\n                    this.options.handler(args) : this.closeDialog();\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    this.fltrBtnHandler();\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    CheckBoxFilter.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var optr = 'equal';\n        var searchInput = this.searchBox.querySelector('.e-searchinput');\n        var caseSen = this.filterSettings.enableCaseSensitivity;\n        var defaults = {\n            field: this.options.field, predicate: 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.parent.filterSettings.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput.value === '') {\n            optr = 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = 'and';\n            defaults.operator = 'notequal';\n        }\n        var value;\n        var fObj;\n        var coll = [];\n        if (checked.length !== this.itemsCnt || (searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                if (value === '' || isNullOrUndefined(value)) {\n                    if (this.options.type === 'string') {\n                        coll.push({\n                            field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                            operator: defaults.operator, predicate: defaults.predicate, value: ''\n                        });\n                    }\n                    coll.push({\n                        field: defaults.field,\n                        matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n                    });\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n                        predicate: defaults.predicate, value: undefined\n                    });\n                }\n                else {\n                    coll.push(fObj);\n                }\n                if (isActionPrevent(this.parent)) {\n                    this.parent.notify(events.preventBatch, {\n                        instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                        arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value\n                    });\n                    return;\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilter.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = column.isForeignColumn() ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.parent.getDataModule().isRemote() ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'startswith' : 'contains');\n        var matchCase = true;\n        var ignoreAccent = this.parent.filterSettings.ignoreAccent;\n        var field = column.isForeignColumn() ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            operator = 'equal';\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query\n        };\n        this.parent.trigger(events.actionBegin, args);\n        predicte = new Predicate(field, args.operator, parsed, args.matchCase, args.ignoreAccent);\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n            operator = 'equal';\n            if (isNullOrUndefined(parsed) && val.length) {\n                return;\n            }\n            var filterObj = {\n                field: field, operator: operator, value: parsed, matchCase: matchCase,\n                ignoreAccent: ignoreAccent\n            };\n            predicte = getDatePredicate(filterObj, this.options.type);\n        }\n        if (val.length) {\n            query.where(predicte);\n        }\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        var fPredicate = {};\n        showSpinner(this.spinner);\n        this.renderEmpty = false;\n        if (column.isForeignColumn() && val.length) {\n            // tslint:disable-next-line:no-any\n            column.dataSource.executeQuery(query).then(function (e) {\n                var columnData = _this.options.column.columnData;\n                _this.options.column.columnData = e.result;\n                _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                if (fPredicate.predicate.predicates.length) {\n                    foreignQuery.where(fPredicate.predicate);\n                }\n                else {\n                    _this.renderEmpty = true;\n                }\n                _this.options.column.columnData = columnData;\n                foreignQuery.take(args.filterChoiceCount);\n                _this.search(args, foreignQuery);\n            });\n        }\n        else {\n            query.take(args.filterChoiceCount);\n            this.search(args, query);\n        }\n    };\n    CheckBoxFilter.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n        var predicates = CheckBoxFilter.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (this.parent.getColumnByField(prop).isForeignColumn()) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilter.prototype.getAllData = function () {\n        var query = this.parent.getQuery().clone();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        query.take(args.filterChoiceCount);\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processDataOperation(query, true);\n        }\n    };\n    CheckBoxFilter.prototype.addDistinct = function (query) {\n        var filteredColumn = DataUtil.distinct(this.parent.filterSettings.columns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        query.distinct(filteredColumn);\n        return query;\n    };\n    CheckBoxFilter.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var def = this.eventPromise(args, query);\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilter.prototype.eventPromise = function (args, query) {\n        var state;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.dataSource = def.resolve;\n        state.action = args;\n        this.parent.trigger(events.dataStateChange, state);\n        return def;\n    };\n    ;\n    CheckBoxFilter.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return data;\n    };\n    ;\n    CheckBoxFilter.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.options.column.isForeignColumn() && isInitial) {\n            allPromise.push(this.options.column.dataSource.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            e.forEach(function (data) {\n                runArray[i++](data.result);\n            });\n        });\n    };\n    CheckBoxFilter.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var query = new Query();\n        if (this.parent.searchSettings.key.length) {\n            var sSettings = this.parent.searchSettings;\n            var fields = sSettings.fields.length ? sSettings.fields : this.parent.getColumns().map(function (f) { return f.field; });\n            query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n        }\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                var filterColumn = this.options.filteredColumns[i];\n                filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                if (filterColumn.uid !== this.options.uid) {\n                    cols.push(this.options.filteredColumns[i]);\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n        // query.select(this.options.field);\n        var result = new DataManager(this.fullData).executeLocal(query);\n        var col = this.options.column;\n        this.filteredData = CheckBoxFilter.\n            getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n        this.processDataSource(null, true, this.filteredData);\n        this.sInput.focus();\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.processDataSource = function (query, isInitial, dataSource) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial);\n    };\n    CheckBoxFilter.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilter.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getValue(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilter.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n    };\n    CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    CheckBoxFilter.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            this.dialogObj.element.querySelector('.e-btn').focus();\n        }\n    };\n    CheckBoxFilter.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        var label = elem.querySelector('.e-label');\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template) {\n            label.innerHTML = '';\n            appendChildren(label, this.options.template(data, this.parent, 'filterItemTemplate'));\n        }\n        return elem;\n    };\n    CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dialogObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n        var _a;\n        var cBoxes = this.parent.createElement('div');\n        var btn = this.dialogObj.btnObj[0];\n        var nullCounter = -1;\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue('ejValue', data[i]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue('ejValue', data[i]);\n                var value = this.valueFormatter.toView(getValue(this.options.field, data[i]), this.options.formatFn);\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            this.updateIndeterminatenBtn();\n            btn.disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionComplete, args);\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            return this.result[value];\n        }\n    };\n    CheckBoxFilter.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn();\n        while (len--) {\n            value = json[len];\n            value = getValue(field, value); //local remote diff, check with mdu   \n            if (!(value in lookup)) {\n                var obj = {};\n                obj[ejValue] = value;\n                lookup[value] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[len], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilter.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilter.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        first = CheckBoxFilter.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilter.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p]), cols[p].type, cols[p].ignoreAccent);\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilter.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            return true;\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilter.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, getDatePredicate, isGroupAdaptive, getColumnByForeignKeyValue, refreshFilteredColsUid } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed || this.getModuleName() === 'foreignKey') {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowPositionChanged, this.reorderRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n        this.parent.on(events.autoCol, this.refreshFilteredCols, this);\n    }\n    Data.prototype.reorderRows = function (e) {\n        this.dataManager.dataSource.json.splice(e.toIndex, 0, this.dataManager.dataSource.json.splice(e.fromIndex, 1)[0]);\n    };\n    Data.prototype.getModuleName = function () {\n        return 'data';\n    };\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        gObj.setProperties({ query: gObj.query instanceof Query ? gObj.query : new Query() }, true);\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.getQuery().clone();\n        if (this.parent.columnQueryMode === 'ExcludeHidden') {\n            query.select(this.parent.getColumns().filter(function (column) { return !(column.isPrimaryKey !== true && column.visible === false || column.field === undefined); }).map(function (column) { return column.field; }));\n        }\n        else if (this.parent.columnQueryMode === 'Schema') {\n            var selectQueryFields = [];\n            var columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                selectQueryFields.push(columns[i].field);\n            }\n            query.select(selectQueryFields);\n        }\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        if (isGroupAdaptive(this.parent)) {\n            this.virtualGroupPageQuery(query);\n        }\n        else {\n            this.pageQuery(query, skipPage);\n        }\n        this.groupQuery(query);\n        return query;\n    };\n    Data.prototype.aggregateQuery = function (query, isForeign) {\n        this.parent.aggregates.forEach(function (row) {\n            row.columns.forEach(function (column) {\n                var types = column.type instanceof Array ? column.type : [column.type];\n                types.forEach(function (type) { return query.aggregate(type.toLowerCase(), column.field); });\n            });\n        });\n        return query;\n    };\n    Data.prototype.virtualGroupPageQuery = function (query) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if (query.queries.length) {\n            for (var i = 0; i < query.queries.length; i++) {\n                if (query.queries[i][fName] === 'onPage') {\n                    query.queries.splice(i, 1);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            if (query.queries.length) {\n                for (var i = 0; i < query.queries.length; i++) {\n                    if (query.queries[i][fName] === 'onPage') {\n                        query.queries.splice(i, 1);\n                    }\n                }\n            }\n            query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                if (!column) {\n                    this.parent.log('initial_action', { moduleName: 'group', columnName: columns[i] });\n                }\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                else {\n                    this.parent.log('initial_action', { moduleName: 'sort', columnName: columns[i].field });\n                    return query;\n                }\n                var fn = columns[i].direction;\n                if (col.sortComparer) {\n                    this.parent.log('grid_sort_comparer');\n                    fn = !this.isRemote() ? col.sortComparer.bind(col) : columns[i].direction;\n                }\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    query.sortBy(col.field, fn);\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query) {\n        var _this = this;\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.getSearchColumnFieldNames();\n        var predicateList = [];\n        var needForeignKeySearch = false;\n        if (this.parent.searchSettings.key.length) {\n            needForeignKeySearch = this.parent.getForeignKeyColumns().some(function (col) { return fields.indexOf(col.field) > -1; });\n            if (needForeignKeySearch && !(this.dataManager.adaptor.getModulename &&\n                this.dataManager.adaptor.getModulename() === 'ODataV4Adaptor')) {\n                fields.forEach(function (columnName) {\n                    var column = _this.getColumnByField(columnName);\n                    if (column.isForeignColumn()) {\n                        predicateList = _this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(column.field, sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                });\n                query.where(Predicate.or(predicateList));\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var fPredicate = {};\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var checkBoxCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                if (colType[col.field] === 'CheckBox' || colType[col.field] === 'Excel') {\n                    checkBoxCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (checkBoxCols.length) {\n                var excelPredicate = CheckBoxFilter.getPredicate(checkBoxCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    var col = void 0;\n                    if (this.parent.getColumnByField(prop).isForeignColumn()) {\n                        col = getColumnByForeignKeyValue(prop, foreignColumn);\n                    }\n                    if (!col) {\n                        this.parent.log('initial_action', { moduleName: 'filter', columnName: prop });\n                    }\n                    if (col && !skipFoerign) {\n                        predicateList = this.fGeneratePredicate(col, predicateList);\n                        actualFilter.push(col);\n                    }\n                    else {\n                        predicateList.push(excelPredicate[prop]);\n                    }\n                }\n            }\n            if (defaultFltrCols.length) {\n                for (var _e = 0, defaultFltrCols_1 = defaultFltrCols; _e < defaultFltrCols_1.length; _e++) {\n                    var col = defaultFltrCols_1[_e];\n                    col.uid = col.uid || this.parent.getColumnByField(col.field).uid;\n                    var column_1 = this.parent.getColumnByUid(col.uid);\n                    if (!column_1) {\n                        this.parent.log('initial_action', { moduleName: 'filter', columnName: col.field });\n                    }\n                    var sType = column_1.type;\n                    if (column_1.isForeignColumn() && getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        if (sType !== 'date' && sType !== 'datetime') {\n                            predicateList.push(new Predicate(col.field, col.operator, col.value, !col.matchCase, this.parent.filterSettings.ignoreAccent));\n                        }\n                        else {\n                            predicateList.push(getDatePredicate(col, sType));\n                        }\n                    }\n                }\n            }\n            if (predicateList.length) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        this.parent.log('datasource_syntax_mismatch', { dataState: this.parent });\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);\n                    break;\n            }\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                return crud.then(function (result) {\n                    return _this.insert(query, args);\n                });\n            }\n            else {\n                return this.insert(query, args);\n            }\n        }\n    };\n    Data.prototype.insert = function (query, args) {\n        if (args.requestType === 'save') {\n            this.parent.notify(events.recordAdded, args);\n        }\n        return this.executeQuery(query);\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);\n                break;\n        }\n        args[pr] = promise ? promise : args[pr];\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key, original, query) {\n        if (query === void 0) { query = this.generateQuery(); }\n        query.requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var state = void 0;\n            state = this.getStateEventArgument(query);\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n        this.parent.off(events.autoCol, this.refreshFilteredCols);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var state;\n        var dataArgs = args;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs = args;\n                editArgs.key = key;\n                var promise = 'promise';\n                editArgs[promise] = deff.promise;\n                editArgs.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs);\n                deff.promise.then(function (e) {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    _this.parent.trigger(events.dataStateChange, state);\n                })\n                    .catch(function () { return void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * Gets the columns where searching needs to be performed from the Grid.\n     * @return {string[]}\n     */\n    Data.prototype.getSearchColumnFieldNames = function () {\n        var colFieldNames = [];\n        var columns = this.parent.getColumns();\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var col = columns_2[_i];\n            if (col.allowSearching && !isNullOrUndefined(col.field)) {\n                colFieldNames.push(col.field);\n            }\n        }\n        return colFieldNames;\n    };\n    Data.prototype.refreshFilteredCols = function () {\n        if (this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            refreshFilteredColsUid(this.parent, this.parent.filterSettings.columns);\n        }\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options) {\n        merge(this, options);\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        this.isRowSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var colSpan = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var rowSpan = cellArgs.rowSpan;\n        var visible = 0;\n        var spannedCell;\n        if (row.index > 0) {\n            var cells = this.parent.groupSettings.columns.length > 0 &&\n                !this.parent.getRowsObject()[row.index - 1].isDataRow ? this.parent.getRowsObject()[row.index].cells :\n                this.parent.getRowsObject()[row.index - 1].cells;\n            var targetCell_1 = row.cells[i];\n            var uid_1 = 'uid';\n            spannedCell = cells.filter(function (cell) { return cell.column.uid === targetCell_1.column[uid_1]; })[0];\n        }\n        var colSpanLen = spannedCell && spannedCell.colSpanRange > 1 && spannedCell.rowSpanRange > 1 ?\n            spannedCell.colSpanRange : colSpan;\n        for (var j = i + 1; j < i + colSpanLen && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + colSpan; j < i + colSpan + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + colSpan + visible >= row.cells.length) {\n                colSpan -= (i + colSpan + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (colSpan > 1) {\n            attributes(td, { 'colSpan': colSpan.toString(), 'aria-colSpan': colSpan.toString() });\n        }\n        if (rowSpan > 1) {\n            attributes(td, { 'rowspan': rowSpan.toString(), 'aria-rowspan': rowSpan.toString() });\n            row.cells[i].isRowSpanned = true;\n            row.cells[i].rowSpanRange = Number(rowSpan);\n            if (colSpan > 1) {\n                row.cells[i].colSpanRange = Number(colSpan);\n            }\n        }\n        if (row.index > 0 && (spannedCell.rowSpanRange > 1)) {\n            row.cells[i].isSpanned = true;\n            row.cells[i].rowSpanRange = Number(spannedCell.rowSpanRange - 1);\n            row.cells[i].colSpanRange = spannedCell.rowSpanRange > 0 ? spannedCell.colSpanRange : 1;\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject, extendObjWithFn } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.isSpan = false;\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extendObjWithFn({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate, null, isChanged);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode, isEdit) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getObject(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var _loop_1 = function (i, len) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = this_1.parent.isPrinting ? 'e-detailrowcollapse' : 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs, row.isExpand, isEdit);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this_1.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        rowSpan: 1, foreignKeyData: row.cells[i].foreignKeyData,\n                        requestType: this_1.parent.requestTypeAction\n                    }));\n                    var isRowSpanned = false;\n                    if (row.index > 0 && this_1.isSpan) {\n                        var prevRowCells = this_1.parent.groupSettings.columns.length > 0 &&\n                            !this_1.parent.getRowsObject()[row.index - 1].isDataRow ?\n                            this_1.parent.getRowsObject()[row.index].cells : this_1.parent.getRowsObject()[row.index - 1].cells;\n                        var uid_1 = 'uid';\n                        var prevRowCell = prevRowCells.filter(function (cell) {\n                            return cell.column.uid === row.cells[i].column[uid_1];\n                        })[0];\n                        isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;\n                    }\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {\n                        this_1.isSpan = true;\n                        var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n            if (this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate) {\n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cols.push(this.generateCell({}, null, CellType.DetailExpand));\n        }\n        if (this.parent.isRowDragable()) {\n            cols.push(this.generateCell({}, null, CellType.RowDragIcon));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent, pid, tIndex) {\n        var options = {};\n        options.foreignKeyData = {};\n        options.uid = getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.tIndex = tIndex;\n        options.isDataRow = true;\n        options.parentGid = pid;\n        if (this.parent.isPrinting) {\n            if (this.parent.hierarchyPrintMode === 'All') {\n                options.isExpand = true;\n            }\n            else if (this.parent.hierarchyPrintMode === 'Expanded' && this.parent.expandedRows && this.parent.expandedRows[index]) {\n                options.isExpand = this.parent.expandedRows[index].isExpand;\n            }\n        }\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = new Row(options);\n        row.cells = cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        this.parent.getForeignKeyColumns().forEach(function (col) {\n            setValue(col.field, getForeignData(col, options.data), options.foreignKeyData);\n        });\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var _this = this;\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        dummies.forEach(function (dummy, index) {\n            return tmp.push(_this.generateCell(dummy, options.uid, isNullOrUndefined(dummy.commands) ? undefined : CellType.CommandColumn, null, index, options.foreignKeyData));\n        });\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox') {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        input.forEach(function (row) {\n            _this.refreshForeignKeyRow(row);\n            row.cells = _this.generateCells(row);\n        });\n        return input;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        this.parent.aggregates.slice().forEach(function (row) {\n            var columns = row.columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new Column({})); });\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid) || this.parent.isRowDragable()) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end) {\n        var _this = this;\n        if (this.parent.currentViewData.length === 0) {\n            return [];\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        this.getData().forEach(function (row, index) {\n            rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined, start, end));\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end) {\n        var _this = this;\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ||\n            !isNullOrUndefined(this.parent.childGrid) ? 1 : 0);\n        if (this.parent.isRowDragable()) {\n            indentLength++;\n            indents = ['e-indentcelltop'];\n        }\n        this.getColumns(start, end).forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() :\n            index < _this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[index], isDetailGridAlone)); });\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.uid = getUid('grid-row');\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = { 'style': { 'textAlign': column.textAlign } };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var _this = this;\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        summaryRows.forEach(function (row) {\n            single = {};\n            row.columns.forEach(function (column) {\n                single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n            });\n            dummy.push(single);\n        });\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var _this = this;\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        types.forEach(function (type) {\n            var key = column.field + ' - ' + type.toLowerCase();\n            var disp = column.columnName;\n            var val = type !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(type, group.aggregates ? group : data, column, _this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][type] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        });\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.rows = [];\n        this.index = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level, i, undefined, this.rows.length);\n        }\n        this.index = 0;\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw, parentid, childId, tIndex) {\n        var _a;\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level, parentid, index, this.rows.length);\n                }\n            }\n        }\n        else {\n            this.rows = this.rows.concat(this.generateCaptionRow(data, index, parentid, childId, tIndex));\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length);\n            }\n            if (this.parent.aggregates.length) {\n                var rowCnt = this.rows.length;\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n                for (var i = rowCnt - 1; i >= 0; i--) {\n                    if (this.rows[i].isCaptionRow) {\n                        this.rows[i].aggregatesCount = this.rows.length - rowCnt;\n                    }\n                    else if (!this.rows[i].isCaptionRow && !this.rows[i].isDataRow) {\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var _this = this;\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        cols.forEach(function (col, index) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = _this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            if (gObj.isRowDragable()) {\n                indent++;\n            }\n            cells.push(_this.generateCell(column, null, cellType, indent));\n        });\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent, parentID, childID, tIndex) {\n        var options = {};\n        var tmp = [];\n        var records = 'records';\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        options.isExpand = true;\n        options.parentGid = parentID;\n        options.childGid = childID;\n        options.tIndex = tIndex;\n        options.isCaptionRow = true;\n        options.gSummary = !isNullOrUndefined(data.items[records]) ? data.items[records].length : data.items.length;\n        options.uid = getUid('grid-row');\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            var fkValue = (isNullOrUndefined(data.key) ? '' : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col));\n            setValue('foreignKey', fkValue, row.data);\n        }\n    };\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent, childID, tIndex) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++, tIndex++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent, childID, tIndex);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        var indexes = this.parent.getColumnIndexesInView();\n        input.forEach(function (row) {\n            if (row.isDataRow) {\n                row.cells = _this.generateCells(row);\n                for (var j = 0; j < row.indent; j++) {\n                    if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n                        continue;\n                    }\n                    row.cells.unshift(_this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = _this.generateCaptionRow(row.data, row.indent);\n                row.cells = cRow.cells;\n            }\n        });\n        return input;\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove, updateBlazorTemplate, removeClass } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth, isGroupAdaptive } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.freezeRowElements = [];\n        this.isLoaded = true;\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.getFrozenColumns() !== 0) {\n                    rows = args.isFrozen ? _this.freezeRows : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {});\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                    if (_this.parent.getFrozenColumns() !== 0 && !_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n                    }\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = this.parent.createElement('div', {\n            className: 'e-content'\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var virtualTable = contentDiv.querySelector('.e-virtualtable');\n        var virtualTrack = contentDiv.querySelector('.e-virtualtrack');\n        if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)) {\n            remove(virtualTable);\n            remove(virtualTrack);\n        }\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstChild;\n        if (this.getTable()) {\n            remove(this.getTable());\n        }\n        var table = this.parent.createElement('table', {\n            className: 'e-table', attrs: {\n                cellspacing: '0.25px', role: 'grid',\n                id: this.parent.element.id + id\n            }\n        });\n        this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    ContentRender.prototype.splitRows = function (idx) {\n        if (this.parent.getFrozenColumns()) {\n            if (idx === 0) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = gObj.currentViewData;\n        var frag = document.createDocumentFragment();\n        var hdrfrag = document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var trElement;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        if (isGroupAdaptive(gObj)) {\n            if (['sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n                .some(function (value) { return args.requestType === value; })) {\n                gObj.vcRows = [];\n                gObj.vRows = [];\n            }\n        }\n        var modelData = this.generator.generateRows(dataSource, args);\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            mCont.querySelector('tbody').innerHTML = '';\n        }\n        var idx = modelData[0].cells[0].index;\n        /* tslint:disable:no-any */\n        if (this.parent.registeredTemplate && this.parent.registeredTemplate.template && !args.isFrozen) {\n            var templatetoclear = [];\n            for (var i = 0; i < this.parent.registeredTemplate.template.length; i++) {\n                for (var j = 0; j < this.parent.registeredTemplate.template[i].rootNodes.length; j++) {\n                    if (isNullOrUndefined(this.parent.registeredTemplate.template[i].rootNodes[j].parentNode)) {\n                        templatetoclear.push(this.parent.registeredTemplate.template[i]);\n                        /* tslint:enable:no-any */\n                    }\n                }\n            }\n            this.parent.destroyTemplate(['template'], templatetoclear);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (frzCols && idx >= frzCols) {\n            this.tbody = mCont.querySelector('tbody');\n        }\n        else {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        var startIndex = 0;\n        var blockLoad = true;\n        if (isGroupAdaptive(gObj) && gObj.vcRows.length) {\n            var top_1 = 'top';\n            var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top :\n                (!isNullOrUndefined(args.scrollTop) ? args.scrollTop[top_1] : 0);\n            if (scrollTop !== 0) {\n                var offsets_1 = gObj.vGroupOffsets;\n                var bSize = gObj.pageSettings.pageSize / 2;\n                var values = Object.keys(offsets_1).map(function (key) { return offsets_1[key]; });\n                for (var m = 0; m < values.length; m++) {\n                    if (scrollTop < values[m]) {\n                        if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === 'up') {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m * bSize);\n                            break;\n                        }\n                        else {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m) * bSize;\n                            break;\n                        }\n                    }\n                }\n                if (scrollTop + this.contentPanel.firstElementChild.offsetHeight ===\n                    this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {\n                    blockLoad = false;\n                }\n            }\n        }\n        for (var i = startIndex, len = modelData.length; i < len; i++) {\n            this.rows.push(modelData[i]);\n            if (isGroupAdaptive(gObj) && this.rows.length >= (gObj.pageSettings.pageSize) && blockLoad) {\n                break;\n            }\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                if (gObj.frozenRows && i < gObj.frozenRows) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n                if (modelData[i].isExpand) {\n                    gObj.notify(events.expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);\n                }\n            }\n            else {\n                var rowTemplateID = gObj.element.id + 'rowTemplate';\n                var elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate', rowTemplateID);\n                if (elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = appendChildren(hdrfrag, elements);\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        tr = appendChildren(frag, elements);\n                        trElement = tr.lastElementChild;\n                    }\n                }\n                var arg = { data: modelData[i].data, row: trElement ? trElement : tr };\n                this.parent.trigger(events.rowDataBound, arg);\n            }\n            if (modelData[i].isDataRow) {\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        this.parent.blazorTemplate();\n        this.splitRows(idx);\n        if (gObj.frozenRows) {\n            hdrTbody = frzCols ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n                : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n            hdrTbody.innerHTML = '';\n            hdrTbody.appendChild(hdrfrag);\n        }\n        if (gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (frzCols && idx === 0) {\n            this.getPanel().firstChild.style.overflowY = 'hidden';\n        }\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.rows = this.rows.slice(0);\n        }\n        args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            if (!_this.parent.enableVirtualization) {\n                remove(_this.tbody);\n                _this.tbody = _this.parent.createElement('tbody');\n            }\n            if (frzCols) {\n                _this.tbody.appendChild(frag);\n                if (_this.index === 0) {\n                    _this.isLoaded = false;\n                    fCont.querySelector('table').appendChild(_this.tbody);\n                }\n                else {\n                    if (_this.tbody.childElementCount < 1) {\n                        _this.tbody.appendChild(_this.parent.createElement('tr').appendChild(_this.parent.createElement('td')));\n                    }\n                    _this.isLoaded = true;\n                    mCont.querySelector('table').appendChild(_this.tbody);\n                    fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                    mCont.style.overflowY = _this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                    fCont.style.borderRightWidth = '1px';\n                }\n            }\n            else {\n                if (gObj.rowTemplate) {\n                    updateBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate', gObj);\n                }\n                _this.appendContent(_this.tbody, frag, args);\n            }\n            if (frzCols && idx === 0) {\n                _this.refreshContentRows(extend({}, args));\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args) {\n        tbody.appendChild(frag);\n        this.getTable().appendChild(tbody);\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        return this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (frzCols) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        var args = {};\n        var contentrows = this.rows.filter(function (row) { return !row.isDetailRow; });\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                if (frzCols) {\n                    if (idx < frzCols) {\n                        setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                        contentrows = this.freezeRows;\n                    }\n                    else {\n                        var mTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n                        idx = idx - frzCols;\n                        setStyleAttribute(mTable.childNodes[idx], { 'display': displayVal });\n                        tr = gObj.getMovableDataRows();\n                        contentrows = this.movableRows;\n                    }\n                }\n                else {\n                    if (gObj.isRowDragable()) {\n                        idx++;\n                    }\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                    if (gObj.isRowDragable()) {\n                        idx--;\n                    }\n                }\n            }\n            idx = gObj.isDetail() ? idx - 1 : idx;\n            if (!needFullRefresh) {\n                this.setDisplayNone(tr, idx, displayVal, contentrows);\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            if (!this.parent.getFrozenColumns()) {\n                this.parent.notify(events.partialRefresh, { rows: contentrows, args: args });\n            }\n            else {\n                this.parent.notify(events.partialRefresh, { rows: this.freezeRows, args: { isFrozen: true, rows: this.freezeRows } });\n                this.parent.notify(events.partialRefresh, { rows: this.movableRows, args: { isFrozen: false, rows: this.movableRows } });\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    ContentRender.prototype.setDisplayNone = function (tr, idx, displayVal, rows) {\n        Object.keys(tr).forEach(function (i) {\n            if (tr[i].querySelectorAll('td.e-rowcell').length) {\n                setStyleAttribute(tr[i].querySelectorAll('td.e-rowcell')[idx], { 'display': displayVal });\n                if (tr[i].querySelectorAll('td.e-rowcell')[idx].classList.contains('e-hide')) {\n                    removeClass([tr[i].querySelectorAll('td.e-rowcell')[idx]], ['e-hide']);\n                }\n                rows[i].cells[idx].visible = displayVal === '' ? true : false;\n            }\n        });\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        if (this.parent.getFrozenColumns()) {\n            this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; }).forEach(function (row) { return row.isSelected = set; });\n        }\n        this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n            .forEach(function (row) {\n            row.isSelected = set;\n            row.cells.forEach(function (cell) { return cell.isSelected = set; });\n        });\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    ContentRender.prototype.setRowObjects = function (rows) {\n        this.rows = rows;\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var result = void 0;\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    return;\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-headercontent' });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        this.parent.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        if (!this.parent.getFrozenColumns()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().firstChild;\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function () {\n        var gObj = this.parent;\n        if (this.getTable() && (!gObj.getFrozenColumns())) {\n            remove(this.getTable());\n        }\n        var columns = gObj.getColumns();\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var innerDiv = this.getPanel().firstChild;\n        var findHeaderRow = this.createHeaderContent();\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement('colgroup');\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, this.parent);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    HeaderRender.prototype.createHeaderContent = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        colGroup.id = this.parent.element.id + 'colGroup';\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable()) {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows) {\n        var column;\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var frzCols = this.parent.getFrozenColumns();\n        if (!cols.columns) {\n            if (!frzCols && (!this.parent.lockcolPositionCount\n                || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))\n                || (frzCols && ((!isMovable && (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns || cols.isFrozen) &&\n                    (!this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered) ||\n                        (!cols.lockColumn && this.lockColsRendered)))\n                    || (isMovable && (this.frzIdx + this.notfrzIdx >= this.parent.frozenColumns && !cols.isFrozen) &&\n                        (!this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered) ||\n                            (!cols.lockColumn && this.lockColsRendered)))))) {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var frzObj = this.refreshFrozenHdr(cols.columns, { isPartial: false, isComp: true, cnt: 0 });\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                if (!frzCols && (!this.parent.lockcolPositionCount\n                    || (!this.lockColsRendered && stackedLockColsCount) || (this.lockColsRendered && (colSpan - stackedLockColsCount)))\n                    || (frzCols && ((!isMovable && (this.parent.frozenColumns - this.frzIdx > 0 || (frzObj.isPartial)))\n                        || (isMovable && (colSpan + this.frzIdx > this.parent.frozenColumns && !frzObj.isComp))))) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, isMovable, frzObj.cnt, stackedLockColsCount)\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol, isMovable);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.refreshFrozenHdr = function (cols, frzObj) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                frzObj = this.refreshFrozenHdr(cols[i].columns, frzObj);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    frzObj.isPartial = true;\n                    frzObj.cnt++;\n                }\n                frzObj.isComp = frzObj.isComp && (cols[i].isFrozen ||\n                    this.parent.getColumnIndexByField(cols[i].field) < this.parent.frozenColumns);\n            }\n        }\n        return frzObj;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, isMovable, frozenCnt, stackedLockColsCount) {\n        var frzCol = this.parent.frozenColumns;\n        if (this.parent.getFrozenColumns() && this.frzIdx + colSpan > frzCol) {\n            if (isMovable) {\n                colSpan = colSpan - (frzCol > this.frzIdx ? frzCol - this.frzIdx : 0) - frozenCnt;\n            }\n            else {\n                colSpan = colSpan - (colSpan - (frzCol > this.frzIdx ? frzCol + frozenCnt - this.frzIdx : frozenCnt));\n            }\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal;\n        var idx;\n        var className;\n        var element;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                    setStyleAttribute(mTblColGrp.children[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                if (gObj.isRowDragable()) {\n                    idx++;\n                }\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n            this.refreshUI();\n        }\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.getTable();\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.getTable()) {\n            remove(this.getTable());\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement('colgroup');\n            var findHeaderRow = this.createHeaderContent();\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            this.setTable(table);\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().firstChild.appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n        for (var i = 0, len = headerRows.length; i < len; i++) {\n            var drag = new Draggable(headerRows[i], {\n                dragTarget: '.e-headercell',\n                distance: 5,\n                helper: this.helper,\n                dragStart: this.dragStart,\n                drag: this.drag,\n                dragStop: this.dragStop,\n                abort: '.e-rhandler'\n            });\n        }\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { isNullOrUndefined, extend, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren, extendObjWithFn } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData, blazorId } from '../base/constant';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n        this.element = this.parent.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = this.parent.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData, isEdit) {\n        var _a;\n        var result;\n        if (cell.column.template) {\n            var literals = ['index'];\n            var dummyData = extendObjWithFn({}, data, (_a = {}, _a[foreignKeyData] = fData, _a.column = cell.column, _a));\n            var templateID = this.parent.element.id + cell.column.uid;\n            var str = 'isStringTemplate';\n            var index = 'index';\n            if (isBlazor() && isEdit) {\n                result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str], parseInt(attributes[index], 10));\n                if (this.parent.editSettings.mode !== 'Batch') {\n                    updateBlazorTemplate(templateID, 'Template', cell.column, false);\n                }\n            }\n            else {\n                var tData = extend({ 'index': attributes[literals[0]] }, dummyData);\n                result = cell.column.getColumnTemplate()(tData, this.parent, 'template', templateID, this.parent[str]);\n                window[templateID] = window[templateID] || {};\n                window[templateID][tData[blazorId]] = node;\n            }\n            appendChildren(node, result);\n            this.parent.notify('template-result', { template: result });\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes, isExpand, isEdit) {\n        return this.refreshCell(cell, data, attributes, isEdit);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var node = this.refreshCell(cell, data, attributes);\n        td.innerHTML = '';\n        td.setAttribute('aria-label', node.getAttribute('aria-label'));\n        var elements = [].slice.call(node.childNodes);\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            td.appendChild(elem);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes, isEdit) {\n        var _a;\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if ((column.type === 'date' || column.type === 'datetime') && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', (innerHtml === '' ? 'empty' : innerHtml) + ' column header ' + cell.column.headerText);\n        if (!isNullOrUndefined(cell.column.headerText)) {\n            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        }\n        if (this.evaluate(node, cell, data, attributes, fData, isEdit) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = _this.parent.createElement('span', { className: 'e-headertext' });\n        _this.sortEle = _this.parent.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = _this.parent.createElement('div');\n        _this.chkAllBox = _this.parent.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            //need to pass the template id for blazor headertemplate\n            var headerTempID = gridObj.element.id + column.uid + 'headerTemplate';\n            var str = 'isStringTemplate';\n            result = column.getHeaderTemplate()(extend({ 'index': colIndex }, column), gridObj, 'headerTemplate', headerTempID, this.parent[str]);\n            node.firstElementChild.innerHTML = '';\n            appendChildren(node.firstElementChild, result);\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (this.parent.createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = this.parent.createElement('div', {\n            className: 'e-stackedheadercelldiv',\n            attrs: { 'e-mappinguid': cell.column.uid }\n        });\n        var column = cell.column;\n        node.appendChild(div);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            appendChildren(div, column.getHeaderTemplate()(column, this.parent, 'headerTemplate'));\n        }\n        else {\n            this.appendHtml(div, column.headerText, column.getDomSetter());\n        }\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        if (cell.column.customAttributes) {\n            setStyleAndAttributes(node, cell.column.customAttributes);\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = cell.column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\nimport { blazorId } from '../base/constant';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-groupcaption',\n            attrs: { id: _this.parent.element.id + 'captioncell', role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var fKeyValue;\n        data.headerText = cell.column.headerText;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            if (isBlazor()) {\n                var tempID = gObj.element.id + 'captionTemplate';\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data, null, null, tempID);\n                window[tempID] = window[tempID] || {};\n                window[tempID][data[blazorId]] = node;\n            }\n            else {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n            }\n            appendChildren(node, result);\n        }\n        else {\n            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     * @param  {{ [x: string]: string }} attr\n     * @param {boolean} isExpand\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data, attr, isExpand) {\n        var node = this.element.cloneNode();\n        node.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', isExpand ? 'true' : 'false');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(this.parent.createElement('div', {\n            className: isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' : 'e-icons e-gnextforward e-icon-grightarrow'\n        }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar RowDragDropRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropRenderer, _super);\n    function RowDragDropRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowdragdrop',\n            attrs: { role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    RowDragDropRenderer.prototype.render = function (cell, data) {\n        var nodeElement = this.element.cloneNode();\n        nodeElement.appendChild(this.parent.createElement('div', {\n            className: 'e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon'\n        }));\n        return nodeElement;\n    };\n    return RowDragDropRenderer;\n}(CellRenderer));\nexport { RowDragDropRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar RowDragDropHeaderRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropHeaderRenderer, _super);\n    function RowDragDropHeaderRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-rowdragheader' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    RowDragDropHeaderRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return RowDragDropHeaderRenderer;\n}(CellRenderer));\nexport { RowDragDropHeaderRenderer };\n","import { remove, resetBlazorTemplate, blazorTemplates, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.parent.scrollModule.setWidth();\n        this.parent.scrollModule.setHeight();\n        if (this.parent.height !== 'auto') {\n            this.parent.scrollModule.setPadding();\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        var _this = this;\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        var gObj = this.parent;\n        gObj.notify(e.requestType + \"-begin\", e);\n        if (isBlazor()) {\n            this.resetTemplates();\n        }\n        gObj.trigger(events.actionBegin, e, function (args) {\n            if (args === void 0) { args = { requestType: 'refresh' }; }\n            if (args.requestType === 'delete' && isBlazor() && !gObj.isJsComponent) {\n                var data = 'data';\n                args[data] = gObj.getSelectedRecords();\n            }\n            if (args.cancel) {\n                gObj.notify(events.cancelBegin, args);\n                return;\n            }\n            if (args.requestType === 'delete' && gObj.allowPaging) {\n                var dataLength = args.data.length;\n                var count = gObj.pageSettings.totalRecordsCount - dataLength;\n                if (!(gObj.currentViewData.length - dataLength) && count) {\n                    gObj.prevPageMoving = true;\n                    gObj.setProperties({\n                        pageSettings: {\n                            totalRecordsCount: count, currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n                        }\n                    }, true);\n                    gObj.pagerModule.pagerObj.totalRecordsCount = count;\n                }\n            }\n            _this.refreshDataManager(args);\n        });\n    };\n    Render.prototype.resetTemplates = function () {\n        var gObj = this.parent;\n        var gridColumns = gObj.getColumns();\n        if (gObj.detailTemplate) {\n            var detailTemplateID = gObj.element.id + 'detailTemplate';\n            blazorTemplates[detailTemplateID] = [];\n            window[detailTemplateID] = null;\n            resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n        }\n        if (gObj.groupSettings.captionTemplate) {\n            window[gObj.element.id + 'captionTemplate'] = null;\n            resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n        }\n        if (gObj.rowTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n        }\n        if (gObj.toolbarTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[i].template) {\n                blazorTemplates[gObj.element.id + gridColumns[i].uid] = [];\n                window[gObj.element.id + gridColumns[i].uid] = null;\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid, 'Template');\n            }\n            if (gridColumns[i].headerTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'headerTemplate', 'HeaderTemplate');\n            }\n            if (gridColumns[i].filterTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'filterTemplate', 'FilterTemplate');\n            }\n        }\n        var guid = 'guid';\n        for (var k = 0; k < gObj.aggregates.length; k++) {\n            for (var j = 0; j < gObj.aggregates[k].columns.length; j++) {\n                if (gObj.aggregates[k].columns[j].footerTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'footerTemplate';\n                    resetBlazorTemplate(tempID, 'FooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupFooterTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupFooterTemplate';\n                    resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupCaptionTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupCaptionTemplate';\n                    resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n                }\n            }\n        }\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1 });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.uid === value.uid;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement('tbody');\n        var spanCount = 0;\n        if (gObj.detailTemplate || gObj.childGrid) {\n            ++spanCount;\n        }\n        tr = this.parent.createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(this.parent.createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: (gObj.getColumns().length + spanCount).toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var cFormat = 'customFormat';\n        var equalTo = 'equalTo';\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[i].field || '', data);\n            if (!isNullOrUndefined(columns[i][cFormat])) {\n                columns[i].format = columns[i][cFormat];\n            }\n            if (!isNullOrUndefined(columns[i].validationRules) && !isNullOrUndefined(columns[i].validationRules[equalTo])) {\n                columns[i].validationRules[equalTo][0] = this.parent.element.id + columns[i].validationRules[equalTo][0];\n            }\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(columns[i].format));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                setFormatter(this.locator, columns[i]);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    /** @hidden */\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var _this = this;\n        var gObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        e.actionArgs = args;\n        gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n            if (dataArgs.cancel) {\n                return;\n            }\n            var len = Object.keys(dataArgs.result).length;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n                gObj.hideSpinner();\n                return;\n            }\n            _this.parent.isEdit = false;\n            _this.parent.notify(events.tooltipDestroy, {});\n            gObj.currentViewData = dataArgs.result;\n            if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n                gObj.prevPageMoving = true;\n                gObj.pageSettings.totalRecordsCount = dataArgs.count;\n                gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n                gObj.dataBind();\n                return;\n            }\n            if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n                _this.updatesOnInitialRender(dataArgs);\n            }\n            if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n                _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n            }\n            if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates &&\n                !_this.parent.groupSettings.columns.length) {\n                dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n            }\n            _this.parent.notify(events.dataReady, extend({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates }, args));\n            if ((gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping'))\n                && (args && args.requestType !== 'filtering')) {\n                _this.headerRenderer.refreshUI();\n            }\n            if (len) {\n                if (isGroupAdaptive(gObj)) {\n                    var content = 'content';\n                    args.scrollTop = { top: _this.contentRenderer[content].scrollTop };\n                }\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else {\n                if (!gObj.getColumns().length) {\n                    gObj.element.innerHTML = '';\n                    alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                    return;\n                }\n                _this.contentRenderer.setRowElements([]);\n                _this.contentRenderer.setRowObjects([]);\n                _this.ariaService.setBusy(_this.parent.getContent().firstChild, false);\n                _this.renderEmptyRow();\n                if (args) {\n                    var action = (args.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, args);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        args.rows = [];\n                        args.isFrozen = _this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                _this.parent.hideSpinner();\n            }\n            _this.parent.notify(events.toolbarRefresh, {});\n        });\n    };\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        this.parent.log('actionfailure', { error: e });\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n        }\n        prepareColumns(this.parent.columns);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.buildColumns = function (record) {\n        var columns = Object.keys(record);\n        var cols = [];\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.setProperties({ 'columns': cols }, true);\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            [group0, groupN].forEach(function (group) {\n                return predicate.push(new Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n            });\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            [group0, groupN].forEach(function (group) {\n                return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n            });\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var _this = this;\n        var dm = new DataManager(untouched);\n        current.forEach(function (element, index, array) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n            element.count = uGroup.count;\n            var itemGroup = element.items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                element.items = _this.updateGroupInfo(element.items, uGroup.items);\n            }\n            _this.parent.aggregates.forEach(function (row) {\n                return row.columns.forEach(function (column) {\n                    var types = column.type instanceof Array ? column.type : [column.type];\n                    types.forEach(function (type) {\n                        var key = column.field + ' - ' + type.toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = _this.parent;\n                        if (type === 'Custom') {\n                            var data_1 = itemGroup.level ? uGroupItem : uGroup;\n                            element.aggregates[key] = column.customAggregate ?\n                                column.customAggregate.call(context, data_1, column) : '';\n                        }\n                        else {\n                            element.aggregates[key] = DataUtil.aggregates[type.toLowerCase()](data, column.field);\n                        }\n                    });\n                });\n            });\n        });\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var _this = this;\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        var totalColumnsWidth = 0;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        if (this.parent.isRowDragable()) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        this.parent.getColumns().forEach(function (column, index) {\n            _this.setColumnWidth(column, wFlag && _this.parent.enableColumnVirtualization ? undefined : index + i);\n        });\n        totalColumnsWidth = this.getTableWidth(this.parent.getColumns());\n        if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n            this.setMinwidthBycalculation(totalColumnsWidth);\n        }\n    };\n    ColumnWidthService.prototype.setMinwidthBycalculation = function (tWidth) {\n        var difference = 0;\n        var collection = this.parent.getColumns().filter(function (a) {\n            return isNullOrUndefined(a.width) || a.width === 'auto';\n        });\n        if (collection.length) {\n            if (!isNullOrUndefined(this.parent.width) && this.parent.width !== 'auto') {\n                difference = (typeof this.parent.width === 'string' ? parseInt(this.parent.width, 10) : this.parent.width) - tWidth;\n            }\n            var tmWidth = 0;\n            for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n                var cols = collection_1[_i];\n                tmWidth += !isNullOrUndefined(cols.minWidth) ?\n                    ((typeof cols.minWidth === 'string' ? parseInt(cols.minWidth, 10) : cols.minWidth)) : 0;\n            }\n            for (var i = 0; i < collection.length; i++) {\n                if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && (i !== collection.length - 1)) {\n                    this.setUndefinedColumnWidth(collection);\n                }\n                if (tWidth !== 0 && difference < tmWidth) {\n                    this.setWidth(collection[i].minWidth, this.parent.getColumnIndexByField(collection[i].field));\n                }\n                else if (tWidth !== 0 && difference > tmWidth) {\n                    this.setWidth('', this.parent.getColumnIndexByField(collection[i].field), true);\n                }\n            }\n        }\n    };\n    ColumnWidthService.prototype.setUndefinedColumnWidth = function (collection) {\n        for (var k = 0; k < collection.length; k++) {\n            if (k !== collection.length - 1) {\n                collection[k].width = 200;\n                this.setWidth(200, this.parent.getColumnIndexByField(collection[k].field));\n            }\n        }\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        var tgridWidth = this.getTableWidth(this.parent.getColumns());\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n                this.setMinwidthBycalculation(tgridWidth);\n            }\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index, clear) {\n        var chrome = 'chrome';\n        var webstore = 'webstore';\n        if (typeof (width) === 'string' && width.indexOf('%') !== -1 &&\n            !(Boolean(window[chrome]) && Boolean(window[chrome][webstore])) && this.parent.allowGrouping) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = parseInt(width, 10) / 100 * (elementWidth);\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol && !clear) {\n            headerCol.style.width = fWidth;\n        }\n        else if (headerCol && clear) {\n            headerCol.style.width = ' ';\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol && !clear) {\n            contentCol.style.width = fWidth;\n        }\n        else if (contentCol && clear) {\n            contentCol.style.width = ' ';\n        }\n        var edit = this.parent.element.querySelectorAll('.e-table.e-inline-edit');\n        var editTableCol = [];\n        for (var i = 0; i < edit.length; i++) {\n            for (var j = 0; j < edit[i].querySelector('colgroup').children.length; j++) {\n                editTableCol.push(edit[i].querySelector('colgroup').children[j]);\n            }\n        }\n        if (edit.length) {\n            editTableCol[index].style.width = fWidth;\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.isWidthUndefined = function () {\n        var isWidUndefCount = this.parent.getColumns().filter(function (col) {\n            return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);\n        }).length;\n        return (this.parent.getColumns().length === isWidUndefCount);\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing\n            && isNullOrUndefined(column.minWidth) && !this.isWidthUndefined()) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.width === 'auto') {\n                cWidth = 0;\n            }\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.calcMovableOrFreezeColWidth = function (tableType) {\n        var columns = this.parent.getColumns().slice();\n        if (tableType === 'movable') {\n            columns.splice(0, this.parent.getFrozenColumns());\n        }\n        else if (tableType === 'freeze') {\n            columns.splice(this.parent.getFrozenColumns(), columns.length);\n        }\n        return formatUnit(this.getTableWidth(columns));\n    };\n    ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var movableWidth = '';\n        var isColUndefined = this.parent.getColumns().filter(function (a) { return isNullOrUndefined(a.width); }).length >= 1;\n        var isWidthAuto = this.parent.getColumns().filter(function (a) { return (a.width === 'auto'); }).length >= 1;\n        if (typeof this.parent.width === 'number' && !isColUndefined && !isWidthAuto) {\n            movableWidth = formatUnit(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth('freeze').split('px')[0], 10) - 5);\n        }\n        else if (!isColUndefined && !isWidthAuto) {\n            movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        }\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenEditTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[0].style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableEditTable = function () {\n        var movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[1].style.width = movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenTable();\n            this.setWidthToMovableTable();\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit && this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenEditTable();\n            this.setWidthToMovableEditTable();\n        }\n        else if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = true;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(this.parent.frozenRows === 0, this.parent.frozenColumns !== 0);\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.e-gridheader'));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.e-frozencontent')) ||\n            !isNullOrUndefined(closest(e.target, '.e-frozenheader'));\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-content') ||\n            !isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-filtermenudiv')) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        var th = closest(target, 'th') && !closest(target, 'th').tabIndex;\n        if (th && closest(document.activeElement, '.e-filterbarcell') !== null) {\n            this.removeFocus();\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (closest(document.activeElement, '.e-filterbarcell') !== null ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null)));\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen) {\n        this.active = content ? isFrozen ? this.fContent : this.content :\n            isFrozen ? this.fHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : _this.content :\n                (e.args && e.args.isFrozen) ? _this.fHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            var isRowTemplate = !isNullOrUndefined(_this.parent.rowTemplate);\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector, isRowTemplate);\n            var frozenColumnsCount = _this.parent.getFrozenColumns();\n            if (e.name === 'batchAdd' && frozenColumnsCount) {\n                var newMovableRows = rows.map(function (row) { return row.clone(); });\n                var newFrozenRows = rows.map(function (row) { return row.clone(); });\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].cells.length > frozenColumnsCount) {\n                        newFrozenRows[i].cells = rows[i].cells.slice(0, frozenColumnsCount);\n                        newMovableRows[i].cells = rows[i].cells.slice(frozenColumnsCount);\n                    }\n                }\n                _this.fContent.matrix.generate(newFrozenRows, _this.fContent.selector, isRowTemplate);\n                cFocus.matrix.generate(newMovableRows, cFocus.selector, isRowTemplate);\n            }\n            else {\n                cFocus.matrix.generate(rows, cFocus.selector, isRowTemplate);\n            }\n            cFocus.generateRows(updateRow, { matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader : _this.header });\n            if (!Browser.isDevice && !_this.focusByClick && e && e.args && e.args.requestType === 'paging') {\n                _this.skipFocus = false;\n                _this.parent.element.focus();\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        var focusElement = _this.getContent().getFocusInfo().elementToFocus;\n                        if (focusElement) {\n                            var cellPosition = focusElement.getBoundingClientRect();\n                            var gridPosition = _this.parent.element.getBoundingClientRect();\n                            if (cellPosition.top >= 0 && cellPosition.left >= 0 &&\n                                cellPosition.right <= Math.min(gridPosition.right, window.innerWidth ||\n                                    document.documentElement.clientWidth) &&\n                                cellPosition.bottom <= Math.min(gridPosition.bottom, window.innerHeight ||\n                                    document.documentElement.clientHeight)) {\n                                _this.focus();\n                            }\n                        }\n                    }\n                }\n                else if (e.args.focusElement && e.args.focusElement.classList.contains('e-filtertext')) {\n                    var focusElement = _this.parent.element.querySelector('#' + e.args.focusElement.id);\n                    if (focusElement) {\n                        focusElement.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n        this.parent.on(event.partialRefresh, this.refreshMatrix(true), this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearIndicator, _this); });\n        ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n        this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n        this.parent.on(event.batchCancel, this.refreshMatrix(true), this);\n        this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n        this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n        this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n        this.parent.on(event.cellFocused, this.internalCellFocus, this);\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refreshMatrix(true));\n        this.parent.off(event.partialRefresh, this.refreshMatrix(true));\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n        ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n        this.parent.off(event.batchAdd, this.refreshMatrix(true));\n        this.parent.off(event.batchDelete, this.refreshMatrix(true));\n        this.parent.off(event.batchCancel, this.refreshMatrix(true));\n        this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n        this.parent.off(event.onEmpty, this.refreshMatrix(true));\n        this.parent.off(event.cellFocused, this.internalCellFocus);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (this.parent.frozenColumns === 0 && this.parent.frozenRows === 0) {\n            return;\n        }\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.frozenColumns !== 0 }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        if (isNullOrUndefined(this.matrix[rowIndex])) {\n            return null;\n        }\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        if (rowIndex === this.rows && (action === 'downArrow' || action === 'enter')) {\n            navigator[0] = -1;\n        }\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector, isRowTemplate) {\n        var _this = this;\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        rows.forEach(function (row, rIndex) {\n            var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n            _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n            cells.forEach(function (cell, cIndex) {\n                _this.set(rIndex, cIndex, selector(row, cell, isRowTemplate));\n            });\n        });\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.frozenColumns ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString() || (this.matrix.current[0] === this.matrix.rows &&\n                this.matrix.current.toString() === current.toString())) {\n                return false;\n            }\n            else {\n                current = this.editNextRow(current[0], current[1], e.action);\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.editNextRow = function (rowIndex, cellIndex, action) {\n        var gObj = this.parent;\n        var editNextRow = gObj.editSettings.allowNextRowEdit && (gObj.isEdit || gObj.isLastCellPrimaryKey);\n        var visibleIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[0].field);\n        if (action === 'tab' && editNextRow) {\n            rowIndex++;\n            var index = (this.getTable().rows[rowIndex].querySelectorAll('.e-indentcell').length +\n                this.getTable().rows[rowIndex].querySelectorAll('.e-detailrowcollapse').length);\n            cellIndex = visibleIndex + index;\n        }\n        if (action === 'shiftTab' && editNextRow) {\n            rowIndex--;\n            cellIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[gObj.getVisibleColumns().length - 1].field);\n        }\n        return !this.getTable().rows[rowIndex].cells[cellIndex].classList.contains('e-rowcell') ?\n            this.editNextRow(rowIndex, cellIndex, action) : [rowIndex, cellIndex];\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action) || (this.matrix.current.length === 0)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains('e-table') ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell, isRowTemplate) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand && isNullOrUndefined(cell.visible))\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn)\n            || (row.isDataRow && isRowTemplate))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var info = {\n            swap: ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var _a;\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            var cell;\n            if (table.rows[rowIndex].cells[0].classList.contains('e-editcell')) {\n                cell = table.rows[rowIndex].cells[0].querySelectorAll('td')[cellIndex];\n            }\n            else {\n                cell = table.rows[rowIndex].cells[cellIndex];\n            }\n            var isCellWidth = cell.getBoundingClientRect().width !== 0;\n            if (action === 'enter' || action === 'shiftEnter') {\n                return isCellWidth && cell.classList.contains('e-rowcell');\n            }\n            if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                return isCellWidth;\n            }\n            else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                return isCellWidth;\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains('e-rowcell') && !cell.classList.contains('e-unboundcell')\n                && !cell.classList.contains('e-templatecell') && !cell.classList.contains('e-detailcell') : true;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.getFrozenColumns() ?\n            this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains('e-rowcell') ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (e.target.classList.contains('e-columnheader') ||\n            e.target.querySelector('.e-stackedheadercell')) {\n            return false;\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        info.elementToFocus = this.getFocusable(info.element);\n        info.outline = !info.element.classList.contains('e-filterbarcell');\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox' ||\n            cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            (action === 'leftArrow' || action === 'shiftTab') && current[1] === 0;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                frozenSwap,\n            toHeader: frozenSwap,\n            toFrozen: frozenSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var _this = this;\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            rows[0].cells.forEach(function (cell, cIndex) {\n                return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n            });\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rowIndex = _a[0], columnIndex = _a[1];\n        if (rowIndex < 0 || columnIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rowIndex + \".cells.\" + columnIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        return {\n            swap: (action === 'upArrow' || enterFrozen) && current[0] === 0\n                || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: (action === 'upArrow' || enterFrozen) && current[0] === 0\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current2[0] = previous[0];\n            current2[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n                || ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns),\n            toHeader: (action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current3[0] = previous[0];\n            current3[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { Browser, EventHandler, createElement, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, isGroupAdaptive, parentsUntil, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { iterateExtend } from '../base/util';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal letiables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        /**\n         * @hidden\n         */\n        this.preventFocus = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.isPersisted = false;\n        this.cmdKeyPressed = false;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.wireEvents();\n    }\n    Selection.prototype.initializeSelection = function () {\n        this.parent.log('selection_key_missing');\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (args.cellIndex || args.rowIndex) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        this.unWireEvents();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' && this.parent.editModule &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.getFrozenColumns()) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getCurrentBatchRecordChanges = function () {\n        var gObj = this.parent;\n        var added = 'addedRecords';\n        var deleted = 'deletedRecords';\n        if (gObj.editSettings.mode === 'Batch' && gObj.editModule) {\n            var currentRecords = iterateExtend(this.parent.getCurrentViewRecords());\n            currentRecords = this.parent.editModule.getBatchChanges()[added].concat(currentRecords);\n            var deletedRecords = this.parent.editModule.getBatchChanges()[deleted];\n            var primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < (deletedRecords.length); i++) {\n                for (var j = 0; j < currentRecords.length; j++) {\n                    if (deletedRecords[i][primaryKey] === currentRecords[j][primaryKey]) {\n                        currentRecords.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            return currentRecords;\n        }\n        else {\n            return gObj.getCurrentViewRecords();\n        }\n    };\n    /**\n     * Selects a row by the given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        if (this.selectedRowIndexes.length && this.selectionSettings.enableSimpleMultiRowSelection) {\n            this.addRowsToSelection([index]);\n            return;\n        }\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectData;\n        var isRemoved = false;\n        if (gObj.enableVirtualization && selectedRow) {\n            selectData = gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')).data;\n        }\n        else {\n            selectData = this.getCurrentBatchRecordChanges()[index];\n        }\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                previousRowIndex: this.prevRowIndex, target: this.actualTarget, cancel: false\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionBegin(args, events.rowSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        if (isRowSelected && this.selectionSettings.persistSelection) {\n            this.clearSelectedRow(index);\n            isRemoved = true;\n        }\n        if (!this.selectionSettings.persistSelection) {\n            this.clearRow();\n        }\n        if (!isToggle && !isRemoved) {\n            if (this.selectedRowIndexes.indexOf(index) <= -1) {\n                this.updateRowSelection(selectedRow, index);\n                if (gObj.getFrozenColumns()) {\n                    this.updateRowSelection(selectedMovableRow, index);\n                }\n            }\n            this.selectRowIndex(index);\n        }\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index,\n                row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                previousRowIndex: this.prevRowIndex, target: this.actualTarget\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionComplete(args, events.rowSelected);\n        }\n        this.updateRowProps(index);\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow) {\n        if (this.parent.getFrozenColumns()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.selectRowIndex(endIndex);\n    };\n    /**\n     * Selects a collection of rows by index.\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        var selectedRow = gObj.getRowByIndex(rowIndex);\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var frzCols = gObj.getFrozenColumns();\n        var can = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[rowIndexes[0]];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.actualTarget,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionBegin(args, events.rowSelecting);\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        this.clearRow();\n        this.selectRowIndex(rowIndexes.slice(-1)[0]);\n        if (!this.isSingleSel()) {\n            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                var rowIdx = rowIndexes_1[_i];\n                this.updateRowSelection(gObj.getRowByIndex(rowIdx), rowIdx);\n                if (frzCols) {\n                    this.updateRowSelection(gObj.getMovableRowByIndex(rowIdx), rowIdx);\n                }\n                this.updateRowProps(rowIndex);\n            }\n        }\n        else {\n            this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n            if (frzCols) {\n                this.updateRowSelection(gObj.getMovableRowByIndex(rowIndex), rowIndex);\n            }\n            this.updateRowProps(rowIndex);\n        }\n        args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.actualTarget,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionComplete(args, events.rowSelected);\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var can = 'cancel';\n        var target = this.target;\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args;\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var rowObj = this.getRowObj(rowIndex);\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            this.selectRowIndex(rowIndex);\n            if (isUnSelected && ((checkboxColumn.length ? true : this.selectionSettings.enableToggle) || this.isMultiCtrlRequest)) {\n                this.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target);\n                if (this.isCancelDeSelect) {\n                    return;\n                }\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target, [selectedMovableRow]);\n                this.isInteracted = false;\n            }\n            else {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionBegin(args, events.rowSelecting);\n                if (!isNullOrUndefined(args) && args[can] === true) {\n                    return;\n                }\n                if (this.isSingleSel()) {\n                    this.clearRow();\n                }\n                this.updateRowSelection(selectedRow, rowIndex);\n                if (frzCols) {\n                    this.updateRowSelection(selectedMovableRow, rowIndex);\n                }\n            }\n            if (!isUnSelected) {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionComplete(args, events.rowSelected);\n            }\n            this.updateRowProps(rowIndex);\n            if (this.isSingleSel()) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex <= endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowSelection();\n        if (this.isCancelDeSelect && this.parent.checkAllRows !== 'Check') {\n            return;\n        }\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.selectRowIndex(-1);\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.clearSelectedRow = function (index) {\n        if (this.target) {\n            var selectedEle = this.target.parentElement;\n            if (!this.disableUI) {\n                selectedEle.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedEle, false, true, 'e-selectionbackground', 'e-active');\n            }\n            this.updatePersistCollection(selectedEle, false);\n            this.updateCheckBoxes(selectedEle);\n            this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(index), 1);\n            this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(index)), 1);\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if (this.parent.isPersistSelection && !isNullOrUndefined(selectedRow)) {\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState, rowIndex) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(rowIndex);\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.getFrozenColumns() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)');\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            this.isInteracted = false;\n            if (this.parent.isPersistSelection) {\n                this.persistSelectedData = [];\n                this.selectedRowState = {};\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.enableSelectMultiTouch = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows = this.parent.getDataRows();\n            var data = [];\n            var row = [];\n            var mRow = [];\n            var rowIndex = [];\n            var frzCols = gObj.getFrozenColumns();\n            var foreignKeyData = [];\n            var target = this.target;\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.editSettings.mode === 'Batch' ?\n                    this.parent.getRows()[this.selectedRowIndexes[i]]\n                    : this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data.push(rowObj.data);\n                    row.push(currentRow);\n                    rowIndex.push(this.selectedRowIndexes[i]);\n                    foreignKeyData.push(rowObj.foreignKeyData);\n                }\n                if (frzCols) {\n                    mRow.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                }\n            }\n            if (this.selectionSettings.persistSelection) {\n                this.isInteracted = this.checkSelectAllClicked ? true : false;\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex, data, row, foreignKeyData, target, mRow);\n            if (this.isCancelDeSelect && (this.isInteracted || this.checkSelectAllClicked)) {\n                if (this.parent.isPersistSelection) {\n                    if (this.getCheckAllStatus(this.parent.element.querySelector('.e-checkselectall')) === 'Intermediate') {\n                        for (var i = 0; i < this.selectedRecords.length; i++) {\n                            this.updatePersistCollection(this.selectedRecords[i], true);\n                        }\n                    }\n                    else {\n                        this.parent.checkAllRows = 'Check';\n                        this.updatePersistSelectedData(true);\n                    }\n                }\n                return;\n            }\n            rows.filter(function (record) { return record.hasAttribute('aria-selected'); }).forEach(function (ele) {\n                if (!_this.disableUI) {\n                    ele.removeAttribute('aria-selected');\n                    _this.addRemoveClassesForRow(ele, false, true, 'e-selectionbackground', 'e-active');\n                }\n                _this.updatePersistCollection(ele, false);\n                _this.updateCheckBoxes(ele);\n            });\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var movableRow = this.getSelectedMovableRow(this.selectedRowIndexes[i]);\n                if (movableRow) {\n                    if (!this.disableUI) {\n                        movableRow.removeAttribute('aria-selected');\n                        this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    this.updatePersistCollection(movableRow, false);\n                }\n            }\n            this.selectedRowIndexes = [];\n            this.selectedRecords = [];\n            this.isRowSelected = false;\n            this.selectRowIndex(-1);\n            this.rowDeselect(events.rowDeselected, rowIndex, data, row, foreignKeyData, target, mRow);\n            this.isInteracted = false;\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, target, mRow) {\n        if ((this.selectionSettings.persistSelection && this.isInteracted) || !this.selectionSettings.persistSelection) {\n            var cancl = 'cancel';\n            var rowDeselectObj = {\n                rowIndex: rowIndex, data: data, foreignKeyData: foreignKeyData,\n                cancel: false, target: target, isInteracted: this.isInteracted\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                var rowInString = 'row';\n                rowDeselectObj[rowInString] = row;\n            }\n            else {\n                var rowIndex_1 = 'rowIndex';\n                var data_1 = 'data';\n                rowDeselectObj[rowIndex_1] = rowDeselectObj[rowIndex_1][rowDeselectObj[rowIndex_1].length - 1];\n                rowDeselectObj[data_1] = rowDeselectObj[data_1][rowDeselectObj[data_1].length - 1];\n            }\n            this.parent.trigger(type, this.parent.getFrozenColumns() ? __assign({}, rowDeselectObj, { mRow: mRow }) : rowDeselectObj);\n            this.isCancelDeSelect = rowDeselectObj[cancl];\n            if (!this.isCancelDeSelect || (!this.isInteracted && !this.checkSelectAllClicked)) {\n                this.updatePersistCollection(row[0], false);\n                this.updateCheckBoxes(row[0], undefined, rowIndex[0]);\n            }\n        }\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols) {\n            if (cellIndex.cellIndex >= frzCols) {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        var selectedTable;\n        var cIdx;\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                var currentCell = 'currentCell';\n                args[currentCell] = selectedCell;\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData));\n        }\n        else {\n            this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData)(args);\n        }\n    };\n    Selection.prototype.successCallBack = function (cellSelectingArgs, isToggle, cellIndex, selectedCell, selectedData) {\n        var _this = this;\n        return function (cellSelectingArgs) {\n            var cncl = 'cancel';\n            var currentCell = 'currentCell';\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            if (!isToggle) {\n                cellSelectingArgs[currentCell] = cellSelectingArgs[currentCell] ? cellSelectingArgs[currentCell] : selectedCell;\n            }\n            _this.clearCell();\n            if (!isToggle) {\n                _this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            _this.updateCellProps(cellIndex, cellIndex);\n            if (!isToggle) {\n                var args = {\n                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                    selectedRowCellIndex: _this.selectedRowCellIndexes,\n                    previousRowCell: _this.prevECIdxs ?\n                        _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                };\n                if (!isBlazor()) {\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    args[previousRowCellIndex] = _this.prevECIdxs;\n                }\n                _this.onActionComplete(args, events.cellSelected);\n            }\n        };\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        var _this = this;\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            args[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), function (cellSelectingArgs) {\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            _this.clearCell();\n            if (startIndex.rowIndex > endIndex.rowIndex) {\n                var temp = startIndex;\n                startIndex = endIndex;\n                endIndex = temp;\n            }\n            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n                if (_this.selectionSettings.cellSelectionMode.indexOf('Box') < 0) {\n                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : _this.getLastColIndex(i);\n                }\n                else {\n                    min = startIndex.cellIndex;\n                    max = endIndex.cellIndex;\n                }\n                cellIndexes = [];\n                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                    if (frzCols) {\n                        if (j < frzCols) {\n                            selectedCell = gObj.getCellFromIndex(i, j);\n                        }\n                        else {\n                            selectedCell = gObj.getMovableCellFromIndex(i, j);\n                        }\n                    }\n                    else {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    if (!selectedCell) {\n                        continue;\n                    }\n                    cellIndexes.push(j);\n                    _this.updateCellSelection(selectedCell);\n                    _this.addAttribute(selectedCell);\n                }\n                _this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n            }\n            _this.updateCellProps(stIndex, edIndex);\n            var cellSelectedArgs = {\n                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n                selectedRowCellIndex: _this.selectedRowCellIndexes,\n                previousRowCell: _this.prevECIdxs ? _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n            };\n            if (!isBlazor()) {\n                var previousRowCellIndex = 'previousRowCellIndex';\n                cellSelectedArgs[previousRowCellIndex] = _this.prevECIdxs;\n            }\n            _this.onActionComplete(cellSelectedArgs, events.cellSelected);\n        });\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var cellSelectArgs = {\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n            isShiftPressed: this.isMultiShiftRequest,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.onActionBegin(cellSelectArgs, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        var cellSelectedArgs = {\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.onActionComplete(cellSelectedArgs, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedTable;\n        var cIdx;\n        var selectedCell;\n        var frzCols = gObj.getFrozenColumns();\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.hideAutoFill();\n        var rowObj;\n        if (frzCols && cellIndexes[0].cellIndex >= frzCols) {\n            rowObj = gObj.getMovableRowsObject()[cellIndexes[0].rowIndex];\n        }\n        else {\n            rowObj = this.getRowObj(cellIndexes[0].rowIndex);\n        }\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            foreignKeyData.push(rowObj.cells[frzCols && cellIndexes[0].cellIndex >= frzCols\n                ? cellIndex.cellIndex - frzCols : cellIndex.cellIndex].foreignKeyData);\n            var args = {\n                data: selectedData, cellIndex: cellIndexes[0],\n                isShiftPressed: this.isMultiShiftRequest,\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n            };\n            if (!isBlazor()) {\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    if (selectedCellIdx.length === 0) {\n                        this.selectedRowCellIndexes.splice(index, 1);\n                    }\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n            if (!isUnSelected) {\n                var cellSelectedArgs = {\n                    data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                    previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                        undefined, selectedRowCellIndex: this.selectedRowCellIndexes\n                };\n                if (!isBlazor()) {\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n                }\n                this.onActionComplete(cellSelectedArgs, events.cellSelected);\n            }\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var cells;\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (index >= frzCols) {\n                cells = this.parent.getMovableDataRows()[rowIndex] &&\n                    this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n            }\n        }\n        if (!cells) {\n            cells = this.parent.getDataRows()[rowIndex] &&\n                this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        }\n        if (cells) {\n            for (var m = 0; m < cells.length; m++) {\n                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n                if (colIndex === index) {\n                    if (frzCols) {\n                        if (index >= frzCols) {\n                            m += frzCols;\n                        }\n                    }\n                    return m;\n                }\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = this.getCurrentBatchRecordChanges();\n            var selectedTable = void 0;\n            var frzCols = gObj.getFrozenColumns();\n            this.hideAutoFill();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        if (rowCell[i].cellIndexes[j] < frzCols) {\n                            cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                        else {\n                            cells.push(gObj.getMovableCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                    }\n                    else {\n                        if (rowObj.cells) {\n                            foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        }\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            if (this.bdrBottom) {\n                this.hideBorders();\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.getFrozenColumns()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            if (!this.isCellDrag) {\n                this.hideAutoFill();\n                this.selectRowsByRange(this.startDIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, 'e-rowcell');\n                if (td) {\n                    this.startAFCell = this.startCell;\n                    this.endAFCell = parentsUntil(e.target, 'e-rowcell');\n                    this.selectLikeExcel(e, rowIndex, parseInt(td.getAttribute('aria-colindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (e, rowIndex, cellIndex) {\n        if (!this.isAutoFillSel) {\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.drawBorders();\n        }\n        else { //Autofill\n            this.showAFBorders();\n            this.selectLikeAutoFill(e);\n        }\n    };\n    Selection.prototype.drawBorders = function () {\n        if (this.selectionSettings.cellSelectionMode === 'BoxWithBorder' && this.selectedRowCellIndexes.length && !this.parent.isEdit) {\n            if (!this.bdrBottom) {\n                this.createBorders();\n            }\n            this.positionBorders();\n        }\n        else {\n            this.hideBorders();\n        }\n    };\n    Selection.prototype.positionBorders = function () {\n        this.updateStartEndCells();\n        if (!this.startCell || !this.bdrLeft || !this.selectedRowCellIndexes.length) {\n            return;\n        }\n        this.showBorders();\n        var stOff = this.startCell.getBoundingClientRect();\n        var endOff = this.endCell.getBoundingClientRect();\n        var parentOff = this.startCell.offsetParent.getBoundingClientRect();\n        this.bdrLeft.style.left = stOff.left - parentOff.left + 'px';\n        this.bdrLeft.style.top = stOff.top - parentOff.top + 'px';\n        this.bdrLeft.style.height = endOff.top - stOff.top > 0 ?\n            (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) + 'px' : endOff.height + 'px';\n        this.bdrRight.style.left = endOff.left - parentOff.left + endOff.width + 'px';\n        this.bdrRight.style.top = this.bdrLeft.style.top;\n        this.bdrRight.style.height = this.bdrLeft.style.height;\n        this.bdrTop.style.left = this.bdrLeft.style.left;\n        this.bdrTop.style.top = this.bdrRight.style.top;\n        this.bdrTop.style.width = parseInt(this.bdrRight.style.left, 10) - parseInt(this.bdrLeft.style.left, 10) + 1 + 'px';\n        this.bdrBottom.style.left = this.bdrLeft.style.left;\n        this.bdrBottom.style.top = parseInt(this.bdrLeft.style.top, 10) + parseInt(this.bdrLeft.style.height, 10) + 'px';\n        this.bdrBottom.style.width = this.bdrTop.style.width;\n    };\n    Selection.prototype.createBorders = function () {\n        if (!this.bdrLeft) {\n            this.bdrLeft = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrleft', styles: 'width: 2px;' }));\n            this.bdrRight = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrright', styles: 'width: 2px;' }));\n            this.bdrBottom = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrbottom', styles: 'height: 2px;' }));\n            this.bdrTop = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrtop', styles: 'height: 2px;' }));\n        }\n    };\n    Selection.prototype.showBorders = function () {\n        if (this.bdrLeft) {\n            this.bdrLeft.style.display = '';\n            this.bdrRight.style.display = '';\n            this.bdrBottom.style.display = '';\n            this.bdrTop.style.display = '';\n        }\n    };\n    Selection.prototype.hideBorders = function () {\n        if (this.bdrLeft) {\n            this.bdrLeft.style.display = 'none';\n            this.bdrRight.style.display = 'none';\n            this.bdrBottom.style.display = 'none';\n            this.bdrTop.style.display = 'none';\n        }\n    };\n    Selection.prototype.drawAFBorders = function () {\n        if (!this.bdrAFBottom) {\n            this.createAFBorders();\n        }\n        this.positionAFBorders();\n    };\n    Selection.prototype.positionAFBorders = function () {\n        if (!this.startCell || !this.bdrAFLeft) {\n            return;\n        }\n        this.showBorders();\n        var stOff = this.startAFCell.getBoundingClientRect();\n        var endOff = this.endAFCell.getBoundingClientRect();\n        var parentOff = this.startAFCell.offsetParent.getBoundingClientRect();\n        this.bdrAFLeft.style.left = stOff.left - parentOff.left + 'px';\n        this.bdrAFLeft.style.top = stOff.top - parentOff.top + 'px';\n        this.bdrAFLeft.style.height = endOff.top - stOff.top > 0 ?\n            (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) + 'px' : endOff.height + 'px';\n        this.bdrAFRight.style.left = endOff.left - parentOff.left + endOff.width + 'px';\n        this.bdrAFRight.style.top = this.bdrAFLeft.style.top;\n        this.bdrAFRight.style.height = this.bdrAFLeft.style.height;\n        this.bdrAFTop.style.left = this.bdrAFLeft.style.left;\n        this.bdrAFTop.style.top = this.bdrAFRight.style.top;\n        this.bdrAFTop.style.width = parseInt(this.bdrAFRight.style.left, 10) - parseInt(this.bdrAFLeft.style.left, 10) + 1 + 'px';\n        this.bdrAFBottom.style.left = this.bdrAFLeft.style.left;\n        this.bdrAFBottom.style.top = parseInt(this.bdrAFLeft.style.top, 10) + parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        this.bdrAFBottom.style.width = this.bdrAFTop.style.width;\n    };\n    Selection.prototype.createAFBorders = function () {\n        if (!this.bdrAFLeft) {\n            this.bdrAFLeft = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrafleft', styles: 'width: 2px;' }));\n            this.bdrAFRight = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrafright', styles: 'width: 2px;' }));\n            this.bdrAFBottom = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrafbottom', styles: 'height: 2px;' }));\n            this.bdrAFTop = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdraftop', styles: 'height: 2px;' }));\n        }\n    };\n    Selection.prototype.showAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = '';\n            this.bdrAFRight.style.display = '';\n            this.bdrAFBottom.style.display = '';\n            this.bdrAFTop.style.display = '';\n        }\n    };\n    Selection.prototype.hideAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = 'none';\n            this.bdrAFRight.style.display = 'none';\n            this.bdrAFBottom.style.display = 'none';\n            this.bdrAFTop.style.display = 'none';\n        }\n    };\n    Selection.prototype.updateValue = function (rIdx, cIdx, cell) {\n        var col = this.parent.getColumnByIndex(cIdx);\n        if (this.parent.editModule && cell) {\n            if (col.type === 'number') {\n                this.parent.editModule.updateCell(rIdx, col.field, parseInt(cell.textContent, 10));\n            }\n            else {\n                this.parent.editModule.updateCell(rIdx, col.field, cell.textContent);\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Selection.prototype.selectLikeAutoFill = function (e, isApply) {\n        var startrowIdx = parseInt(parentsUntil(this.startAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var startCellIdx = parseInt(this.startAFCell.getAttribute('aria-colindex'), 10);\n        var endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n        var rowLen = this.selectedRowCellIndexes.length - 1;\n        var colLen = this.selectedRowCellIndexes[0].cellIndexes.length - 1;\n        var col;\n        switch (true) { //direction         \n            case !isApply && this.endAFCell.classList.contains('e-cellselectionbackground') &&\n                !!parentsUntil(e.target, 'e-rowcell'):\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, startCellIdx);\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, startCellIdx + colLen);\n                this.drawAFBorders();\n                break;\n            case startCellIdx + colLen < endCellIdx && //right\n                endCellIdx - startCellIdx - colLen + 1 > endrowIdx - startrowIdx - rowLen // right bottom\n                && endCellIdx - startCellIdx - colLen + 1 > startrowIdx - endrowIdx: //right top\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, endCellIdx);\n                endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n                endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var cellIdx = parseInt(this.endCell.getAttribute('aria-colindex'), 10);\n                    for (var i = startrowIdx; i <= endrowIdx; i++) {\n                        var cells = [].slice.call(this.parent.getDataRows()[i].querySelectorAll('.e-cellselectionbackground'));\n                        var c = 0;\n                        for (var j = cellIdx + 1; j <= endCellIdx; j++) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: this.startCellIndex }, { rowIndex: endrowIdx, cellIndex: endCellIdx });\n                }\n                break;\n            case startCellIdx > endCellIdx && // left\n                startCellIdx - endCellIdx + 1 > endrowIdx - startrowIdx - rowLen && //left top\n                startCellIdx - endCellIdx + 1 > startrowIdx - endrowIdx: // left bottom\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, endCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    for (var i = startrowIdx; i <= startrowIdx + rowLen; i++) {\n                        var cells = [].slice.call(this.parent.getDataRows()[i].querySelectorAll('.e-cellselectionbackground'));\n                        cells.reverse();\n                        var c = 0;\n                        for (var j = this.startCellIndex - 1; j >= endCellIdx; j--) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: endCellIdx }, { rowIndex: startrowIdx + rowLen, cellIndex: this.startCellIndex + colLen });\n                }\n                break;\n            case startrowIdx > endrowIdx: //up\n                this.startAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = trIdx;\n                    for (var i = startrowIdx - 1; i >= endrowIdx; i--) {\n                        if (r === this.startIndex - 1) {\n                            r = trIdx;\n                        }\n                        var cells = [].slice.call(this.parent.getDataRows()[r].querySelectorAll('.e-cellselectionbackground'));\n                        var c = 0;\n                        r--;\n                        for (var j = this.startCellIndex; j <= this.startCellIndex + colLen; j++) {\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: endrowIdx, cellIndex: startCellIdx + colLen }, { rowIndex: startrowIdx + rowLen, cellIndex: startCellIdx });\n                }\n                break;\n            default: //down\n                this.endAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx + colLen);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = this.startIndex;\n                    for (var i = trIdx + 1; i <= endrowIdx; i++) {\n                        if (r === trIdx + 1) {\n                            r = this.startIndex;\n                        }\n                        var cells = [].slice.call(this.parent.getDataRows()[r].querySelectorAll('.e-cellselectionbackground'));\n                        r++;\n                        var c = 0;\n                        for (var m = this.startCellIndex; m <= this.startCellIndex + colLen; m++) {\n                            this.updateValue(i, m, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: trIdx - rowLen, cellIndex: startCellIdx }, { rowIndex: endrowIdx, cellIndex: startCellIdx + colLen });\n                }\n                break;\n        }\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        if (this.isDragged && this.selectedRowCellIndexes.length === 1 && this.selectedRowCellIndexes[0].cellIndexes.length === 1) {\n            this.mUPTarget = parentsUntil(e.target, 'e-rowcell');\n        }\n        else {\n            this.mUPTarget = null;\n        }\n        this.isDragged = false;\n        this.updateAutoFillPosition();\n        if (this.isAutoFillSel) {\n            this.startAFCell = this.startCell;\n            this.endAFCell = parentsUntil(e.target, 'e-rowcell');\n            this.updateStartCellsIndex();\n            this.selectLikeAutoFill(e, true);\n            this.updateAutoFillPosition();\n            this.hideAFBorders();\n            this.positionBorders();\n            this.isAutoFillSel = false;\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n    };\n    Selection.prototype.hideAutoFill = function () {\n        if (this.autofill) {\n            this.autofill.style.display = 'none';\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.updateAutoFillPosition = function () {\n        if (this.parent.enableAutoFill && !this.parent.isEdit &&\n            this.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()\n            && this.selectedRowCellIndexes.length) {\n            var cells = [].slice.call(this.parent.getDataRows()[this.selectedRowCellIndexes[this.selectedRowCellIndexes.length - 1].rowIndex].querySelectorAll('.e-cellselectionbackground'));\n            if (!this.parent.element.querySelector('#' + this.parent.element.id + '_autofill')) {\n                this.autofill = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-autofill', id: this.parent.element.id + '_autofill' }));\n            }\n            var cell = cells[cells.length - 1];\n            if (cell && cell.offsetParent) {\n                var clientRect = cell.getBoundingClientRect();\n                var parentOff = cell.offsetParent.getBoundingClientRect();\n                this.autofill.style.left = clientRect.left - parentOff.left + clientRect.width - 3 + 'px';\n                this.autofill.style.top = clientRect.top - parentOff.top + clientRect.height - 3 + 'px';\n            }\n            this.autofill.style.display = '';\n        }\n        else {\n            this.hideAutoFill();\n        }\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (parentsUntil(target, 'e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop && !gObj.isEdit) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = this.parent.createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                this.enableDrag(e, true);\n            }\n        }\n        this.updateStartEndCells();\n        if (target.classList.contains('e-autofill')) {\n            this.isCellDrag = true;\n            this.isAutoFillSel = true;\n            this.enableDrag(e);\n        }\n    };\n    Selection.prototype.updateStartEndCells = function () {\n        var cells = [].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground'));\n        this.startCell = cells[0];\n        this.endCell = cells[cells.length - 1];\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.updateStartCellsIndex = function () {\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.enableDrag = function (e, isUpdate) {\n        var gObj = this.parent;\n        if (isUpdate) {\n            var tr = closest(e.target, 'tr');\n            this.startDIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n            this.startDCellIndex = parseInt(parentsUntil(e.target, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n        document.body.classList.add('e-disableuserselect');\n        var gBRect = gObj.element.getBoundingClientRect();\n        var postion = getPosition(e);\n        this.x = postion.x - gBRect.left;\n        this.y = postion.y - gBRect.top;\n        EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.beforeFragAppend, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n        this.parent.on(events.headerRefreshed, this.refreshHeader, this);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.beforeFragAppend, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n        this.parent.off(events.headerRefreshed, this.refreshHeader);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.wireEvents = function () {\n        this.isMacOS = navigator.userAgent.indexOf('Mac OS') !== -1;\n        if (this.isMacOS) {\n            EventHandler.add(this.parent.element, 'keydown', this.keyDownHandler, this);\n            EventHandler.add(this.parent.element, 'keyup', this.keyUpHandler, this);\n        }\n    };\n    Selection.prototype.unWireEvents = function () {\n        if (this.isMacOS) {\n            EventHandler.remove(this.parent.element, 'keydown', this.keyDownHandler);\n            EventHandler.remove(this.parent.element, 'keyup', this.keyUpHandler);\n        }\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n                this.prevCIdxs = undefined;\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n                this.prevRowIndex = undefined;\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n        }\n        this.isPersisted = true;\n        this.checkBoxSelectionChanged();\n        this.isPersisted = false;\n        this.initPerisistSelection();\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length) {\n            gObj.isCheckBoxSelection = !(this.selectionSettings.checkboxMode === 'ResetOnRowClick');\n        }\n        this.drawBorders();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.selectRow(this.parent.selectedRowIndex);\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        this.parent.off(events.contentReady, this.checkBoxSelectionChanged);\n        var gobj = this.parent;\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection && !this.isPersisted) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            if (!query.params) {\n                query.params = this.parent.query.params;\n            }\n            var dataManager = data.getData({}, query);\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        var adaptorName = 'adaptorName';\n        if (!this.parent.getDataModule().isRemote() && !(this.parent.dataSource[adaptorName] === 'BlazorAdaptor')) {\n            if (state) {\n                for (var _i = 0, _a = this.getData(); _i < _a.length; _i++) {\n                    var data = _a[_i];\n                    this.selectedRowState[data[this.primaryKey]] = true;\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        if (rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            this.isSingleSel() && indexes.length > 0 ? this.selectRow(indexes[0], true) : this.selectRows(indexes);\n        }\n        if (this.parent.isCheckBoxSelection && this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        var _this = this;\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            e.data.slice().forEach(function (data) {\n                if (!isNullOrUndefined(data[_this.primaryKey])) {\n                    _this.updatePersistDelete(data[_this.primaryKey]);\n                }\n            });\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        if (e.requestType === 'paging') {\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n            this.prevECIdxs = undefined;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.updatePersistSelectedData = function (checkState) {\n        if (this.parent.isPersistSelection) {\n            var adaptorName = 'adaptorName';\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = (!this.parent.getDataModule().isRemote() &&\n                    !(this.parent.dataSource[adaptorName] === 'BlazorAdaptor')) ?\n                    this.getData().slice() : this.persistSelectedData;\n            }\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.getCurrentBatchRecordChanges().length) {\n            this.parent.checkAllRows = 'Check';\n            this.updatePersistSelectedData(checkState);\n            this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length - 1));\n        }\n        else {\n            this.parent.checkAllRows = 'Uncheck';\n            this.updatePersistSelectedData(checkState);\n            this.clearSelection();\n        }\n        this.chkAllCollec = [];\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n            }\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        if (stateStr === 'Intermediate') {\n            state = this.getCurrentBatchRecordChanges().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        this.checkSelectAllAction(!state);\n        this.target = null;\n        if (this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        var gObj = this.parent;\n        this.isMultiCtrlRequest = true;\n        var rIndex = 0;\n        if (isGroupAdaptive(gObj)) {\n            var uid = target.parentElement.getAttribute('data-uid');\n            rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n        }\n        else {\n            rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        }\n        if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && this.parent.enableVirtualization && !this.parent.getDataModule().isRemote()) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                for (var data = 0; data < this.getData().length; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                if (index && this.parent.getRowByIndex(index).getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    ;\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection) {\n                checkedLen = this.selectedRecords.length;\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.getCheckAllBox()) {\n                var spanEle = this.getCheckAllBox().nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                if (checkedLen === this.totalRecordsCount && this.totalRecordsCount || (this.parent.enableVirtualization\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote() && checkedLen === this.getData().length)) {\n                    addClass([spanEle], ['e-check']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (checkedLen === 0 || this.getCurrentBatchRecordChanges().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                }\n                if (this.parent.enableVirtualization && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.keyDownHandler = function (e) {\n        // Below are keyCode for command key in MAC OS. Safari/Chrome(91-Left command, 93-Right Command), Opera(17), FireFox(224)\n        if ((Browser.info.name === ('chrome' || 'safari') && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = true;\n        }\n    };\n    Selection.prototype.keyUpHandler = function (e) {\n        if ((Browser.info.name === ('chrome' || 'safari') && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = false;\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.actualTarget = target;\n        this.isInteracted = true;\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch ||\n            (this.isMacOS && this.cmdKeyPressed);\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        this.checkSelectAllClicked = checkWrap && checkWrap.querySelectorAll('.e-checkselectall') ? true : false;\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        this.drawBorders();\n        target = parentsUntil(target, 'e-rowcell');\n        if ((target && target.parentElement.classList.contains('e-row') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                }\n            }\n            else {\n                var gObj = this.parent;\n                var rIndex = 0;\n                if (isGroupAdaptive(gObj)) {\n                    var uid = target.parentElement.getAttribute('data-uid');\n                    rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n                }\n                else {\n                    rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                }\n                if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                if (!this.mUPTarget || !this.mUPTarget.isEqualNode(target)) {\n                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                }\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        if (isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            this.preventFocus = false;\n        }\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        if (!this.selectionSettings.enableSimpleMultiRowSelection) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n                (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                    || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n        }\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, this.selectionSettings.enableToggle);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, this.selectionSettings.enableToggle);\n            if (this.selectedRowCellIndexes.length) {\n                this.updateAutoFillPosition();\n            }\n            this.drawBorders();\n        }\n        else if (this.isMultiShiftRequest) {\n            if (this.parent.isCheckBoxSelection || (!this.parent.isCheckBoxSelection &&\n                !closest(this.target, '.e-rowcell').classList.contains('e-gridchkbox'))) {\n                this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            }\n            else {\n                this.addRowsToSelection([rowIndex]);\n            }\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.updateAutoFillPosition();\n            this.drawBorders();\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n            this.hideBorders();\n        }\n        this.isDragged = false;\n    };\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute('aria-rowindex'));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.getFrozenColumns() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space');\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.e-rowcell'))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.e-rowcell'))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = prev.rowIndex ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n        }\n        if (this.parent.getFrozenColumns()) {\n            var cIdx = Number(e.element.getAttribute('aria-colindex'));\n            prev.cellIndex = prev.cellIndex ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n            cellIndex = cIdx;\n        }\n        if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n            rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n            return;\n        }\n        this.preventFocus = true;\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n            case 'tab':\n                if (this.parent.editSettings.allowNextRowEdit) {\n                    this.selectRow(rowIndex);\n                }\n                break;\n        }\n        this.preventFocus = false;\n        this.positionBorders();\n        this.updateAutoFillPosition();\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.parent.getRows().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check' && !this.selectionSettings.persistSelection) {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var detailIndentCell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            var dragdropIndentCell = row.querySelector('.e-rowdragdrop');\n            if (detailIndentCell) {\n                cells.push(detailIndentCell);\n            }\n            if (dragdropIndentCell) {\n                cells.push(dragdropIndentCell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    Selection.prototype.addEventListener_checkbox = function () {\n        var _this = this;\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.resizeEndFn = function () {\n            _this.updateAutoFillPosition();\n            _this.drawBorders();\n        };\n        this.resizeEndFn.bind(this);\n        this.parent.addEventListener(events.resizeStop, this.resizeEndFn);\n    };\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.click, this.clickHandler);\n    };\n    Selection.prototype.dataReady = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.disableUI = true;\n            this.clearSelection();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.selectRowIndex = function (index) {\n        this.parent.isSelectedRowIndexUpdating = true;\n        this.parent.selectedRowIndex = index;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](grid/#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    Search.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'searching') {\n            this.parent.setProperties({ searchSettings: { key: '' } }, true);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = true;\n        });\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = false;\n        });\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.columnModel, function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.setVisible,\n                arg1: columns\n            });\n            return;\n        }\n        var currentViewCols = this.parent.getColumns();\n        columns = isNullOrUndefined(columns) ? currentViewCols : columns;\n        if (this.parent.allowSelection && this.parent.getSelectedRecords().length) {\n            this.parent.clearSelection();\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var colsInCurrentView = columns.filter(function (col1) { return (currentViewCols.some(function (col2) { return col1.field === col2.field; })); });\n            if (colsInCurrentView.length) {\n                this.parent.notify(events.columnVisibilityChanged, columns);\n            }\n        }\n        else {\n            this.parent.notify(events.columnVisibilityChanged, columns);\n        }\n        if (this.parent.columnQueryMode !== 'All') {\n            this.parent.refresh();\n        }\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed, textWrapRefresh } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function (uiupdate) {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (uiupdate) {\n            this.widthService.setWidthToColumns();\n        }\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().firstChild;\n        if (this.parent.frozenRows && this.parent.height !== 'auto') {\n            mHdrHeight =\n                this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n            content.style.height = formatUnit(this.parent.height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(this.parent.height);\n        }\n        this.ensureOverflow(content);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n        this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](grid/#height/) must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(textWrapRefresh, this.wireEvents, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(textWrapRefresh, this.wireEvents);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.frozenColumns) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var top = target.scrollTop;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onWheelScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var cont;\n            var mHdr;\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.getHeaderContent().contains(e.target)) {\n                mHdr = _this.parent.getFrozenColumns() ?\n                    _this.parent.getHeaderContent().querySelector('.e-movableheader') : _this.parent.getHeaderContent().firstChild;\n                if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                    return;\n                }\n                e.preventDefault();\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.previousValues.left = left;\n            }\n            else {\n                cont = _this.parent.getContent().querySelector('.e-frozencontent');\n                if (_this.previousValues.top === top && (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)\n                    || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n                    return;\n                }\n                e.preventDefault();\n                cont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.previousValues.top = top;\n            }\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.getFrozenColumns();\n            this.content = this.parent.getContent().firstChild;\n            this.header = this.parent.getHeaderContent().firstChild;\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (frzCols) {\n                EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n                EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n                EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n                EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n                EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            if (!_this.parent.enableVirtualization) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.getFrozenColumns()) {\n                        addClass(_this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if ((_this.parent.frozenRows > 0 || _this.parent.frozenColumns > 0) && _this.header.querySelector('.e-movableheader')) {\n                    _this.header.querySelector('.e-movableheader').scrollLeft = _this.previousValues.left;\n                }\n                else {\n                    _this.header.scrollLeft = _this.previousValues.left;\n                }\n                _this.content.scrollLeft = _this.previousValues.left;\n                _this.content.scrollTop = _this.previousValues.top;\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.frozenColumns && _this.header.querySelector('.e-movableheader')) {\n                _this.header.querySelector('.e-movableheader').scrollLeft =\n                    _this.content.querySelector('.e-movablecontent').scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        if (this.parent.getFrozenColumns()) {\n            content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n            if (content.querySelector('.e-movablecontent').style.overflowY === 'scroll') {\n                this.setPadding();\n            }\n        }\n        else {\n            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        var width = 'width';\n        this.setWidth(!isNullOrUndefined(e.properties[width]));\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n        removeClass([this.parent.getContent().firstChild], 'e-content');\n        //Remove height\n        this.parent.getContent().firstChild.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\nimport { ValueFormatter } from '../services/value-formatter';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function (cultureName) {\n        var valueFormatter = new ValueFormatter(cultureName);\n        if (this.format && (this.format.skeleton || this.format.format)) {\n            this.formatFn = valueFormatter.getFormatFunction(this.format);\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, remove, EventHandler, isUndefined, closest, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        EventHandler.add(this.parent.element, 'keydown', this.pasteHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.click, this.clickHandler);\n        EventHandler.remove(this.parent.element, 'keydown', this.pasteHandler);\n    };\n    Clipboard.prototype.clickHandler = function (e) {\n        var target = e.target;\n        target = parentsUntil(target, 'e-rowcell');\n    };\n    Clipboard.prototype.pasteHandler = function (e) {\n        var _this = this;\n        if (e.keyCode === 86 && e.ctrlKey && !this.parent.isEdit) {\n            var target_1 = closest(document.activeElement, '.e-rowcell');\n            if (!target_1) {\n                return;\n            }\n            this.activeElement = document.activeElement;\n            this.clipBoardTextArea.value = '';\n            var x_1 = window.scrollX;\n            var y_1 = window.scrollY;\n            this.clipBoardTextArea.focus();\n            setTimeout(function () {\n                _this.activeElement.focus();\n                window.scrollTo(x_1, y_1);\n                _this.paste(_this.clipBoardTextArea.value, parseInt(target_1.parentElement.getAttribute('aria-rowindex'), 10), parseInt(target_1.getAttribute('aria-colindex'), 10));\n            }, 10);\n        }\n    };\n    /**\n     * Paste data from clipboard to selected cells.\n     * @param {boolean} data - Specifies the date for paste.\n     * @param {boolean} rowIndex - Specifies the row index.\n     * @param {boolean} colIndex - Specifies the column index.\n     */\n    Clipboard.prototype.paste = function (data, rowIndex, colIndex) {\n        var grid = this.parent;\n        var cIdx = colIndex;\n        var rIdx = rowIndex;\n        var col;\n        var value;\n        var isAvail;\n        if (!grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n            grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n            return;\n        }\n        var rows = data.split('\\n');\n        var cols;\n        var dataRows = grid.getDataRows();\n        var mRows;\n        var isFrozen = this.parent.getFrozenColumns();\n        if (isFrozen) {\n            mRows = grid.getMovableDataRows();\n        }\n        for (var r = 0; r < rows.length; r++) {\n            cols = rows[r].split('\\t');\n            cIdx = colIndex;\n            if ((r === rows.length - 1 && rows[r] === '') || isUndefined(grid.getRowByIndex(rIdx))) {\n                cIdx++;\n                break;\n            }\n            for (var c = 0; c < cols.length; c++) {\n                isAvail = grid.getCellFromIndex(rIdx, cIdx);\n                if (isFrozen) {\n                    var fTr = dataRows[rIdx];\n                    var mTr = mRows[rIdx];\n                    isAvail = !fTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') ?\n                        mTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') : true;\n                }\n                if (!isAvail) {\n                    cIdx++;\n                    break;\n                }\n                col = grid.getColumnByIndex(cIdx);\n                value = col.getParser() ? col.getParser()(cols[c]) : cols[c];\n                if (col.allowEditing && !col.isPrimaryKey && !col.template) {\n                    var args = {\n                        column: col,\n                        data: value,\n                    };\n                    this.parent.trigger(events.beforePaste, args);\n                    if (grid.editModule) {\n                        if (col.type === 'number') {\n                            this.parent.editModule.updateCell(rIdx, col.field, parseInt(args.data, 10));\n                        }\n                        else {\n                            grid.editModule.updateCell(rIdx, col.field, args.data);\n                        }\n                    }\n                }\n                cIdx++;\n            }\n            rIdx++;\n        }\n        grid.selectionModule.selectCellsByRange({ rowIndex: rowIndex, cellIndex: colIndex }, { rowIndex: rIdx - 1, cellIndex: cIdx - 1 });\n        var cell = this.parent.getCellFromIndex(rIdx - 1, cIdx - 1);\n        if (cell) {\n            classList(cell, ['e-focus', 'e-focused'], []);\n        }\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.getFrozenColumns();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell')));\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            querySelectorAll('.e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]].querySelectorAll('.e-cellselectionbackground')));\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    this.copyContent += cells[j].textContent;\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var isBox = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort(function (a, b) { return a - b; });\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue, getValue, isBlazor, blazorTemplates } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, append, updateBlazorTemplate, classList, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, isGroupAdaptive, refreshForeignData } from './util';\nimport { getRowHeight, setColumnIndex } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    __decorate([\n        Property(false)\n    ], SortDescriptor.prototype, \"isFromGroup\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"uid\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"isForeignKey\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"enableCaseSensitivity\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    __decorate([\n        Property('Default')\n    ], SelectionSettings.prototype, \"checkboxMode\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"enableSimpleMultiRowSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"enableToggle\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Top')\n    ], EditSettings.prototype, \"newRowPosition\", void 0);\n    __decorate([\n        Property({})\n    ], EditSettings.prototype, \"dialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowNextRowEdit\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.media = {};\n        _this.freezeRefresh = Component.prototype.refresh;\n        /** @hidden */\n        _this.isVirtualAdaptive = false;\n        /** @hidden */\n        _this.vRows = [];\n        /** @hidden */\n        _this.vcRows = [];\n        /** @hidden */\n        _this.vGroupOffsets = {};\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.lockcolPositionCount = 0;\n        /** @hidden */\n        _this.prevPageMoving = false;\n        /** @hidden */\n        _this.pageTemplateChange = false;\n        // enable/disable logger for MVC & Core\n        _this.enableLogger = true;\n        _this.needsID = true;\n        Grid_1.Inject(Selection);\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    Grid_1 = Grid;\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    Grid.prototype.getPersistData = function () {\n        var _this = this;\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex', 'scrollPosition'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: [], scrollPosition: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands', 'dataSource', 'headerText'];\n        keyEntity.forEach(function (value) {\n            var currentObject = _this[value];\n            for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        });\n        this.pageSettings.template = undefined;\n        this.pageTemplateChange = !isNullOrUndefined(this.pagerTemplate);\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n        if (this.enableLogger) {\n            modules.push({ member: 'logger', args: [this] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        /* tslint:disable */\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.freezeRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No Matches Found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Autofit all columns',\n            autoFit: 'Autofit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No Matches Found',\n            ClearFilter: 'Clear Filter',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            DateTimeFilter: 'DateTime Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H'\n        };\n        /* tslint:enable */\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.log(['module_missing', 'promise_enabled', 'locale_missing', 'check_datasource_columns']);\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        if (isBlazor()) {\n            this.renderComplete();\n        }\n        createSpinner({ target: this.element }, this.createElement);\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        if (this.getDataModule().dataManager.dataSource.offline === true || this.getDataModule().dataManager.dataSource.url === undefined) {\n            this.isVirtualAdaptive = true;\n        }\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.getMediaColumns();\n        setColumnIndex(this.columns);\n        this.checkLockColumns(this.columns);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Manually showed spinner needs to hide by `hideSpinnner`.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia) && (isNullOrUndefined(gcol[index].visible) || gcol[index].visible)) {\n                        this.pushMediaColumn(gcol[index], index);\n                    }\n                }\n            }\n        }\n    };\n    Grid.prototype.pushMediaColumn = function (col, index) {\n        this.mediaCol.push(col);\n        this.media[col.uid] = window.matchMedia(col.hideAtMedia);\n        this.mediaQueryUpdate(index, this.media[col.uid]);\n        this.media[col.uid].addListener(this.mediaQueryUpdate.bind(this, index));\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateMediaColumns = function (col) {\n        if (!this.enableColumnVirtualization) {\n            var index = this.getColumnIndexByUid(col.uid);\n            for (var i = 0; i < this.mediaCol.length; i++) {\n                if (col.uid === this.mediaCol[i].uid) {\n                    this.mediaCol.splice(i, 1);\n                    return;\n                }\n            }\n            this.pushMediaColumn(col, index);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        if (this.mediaCol.some(function (mediaColumn) { return mediaColumn.uid === col.uid; })) {\n            col.visible = e.matches;\n            if (this.isInitialLoad) {\n                this.invokedFromMedia = true;\n                if (col.visible) {\n                    this.showHider.show(col.headerText, 'headerText');\n                }\n                else {\n                    this.showHider.hide(col.headerText, 'headerText');\n                }\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        if (this.aggregates.length && this.element.scrollHeight > this.height) {\n            var footerContent = this.element.querySelector('.e-gridfooter');\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        var checkboxColumn = this.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length && this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            this.isCheckBoxSelection = false;\n            this.refreshHeader();\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        this.element.innerHTML = '';\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    Grid.prototype.enableBoxSelection = function () {\n        if (this.enableAutoFill) {\n            this.selectionSettings.cellSelectionMode = 'BoxWithBorder';\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    // tslint:disable-next-line:max-func-body-length\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var freezeRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        this.log('module_missing');\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    if (this.pageTemplateChange) {\n                        this.pageTemplateChange = false;\n                        break;\n                    }\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.pageSize)\n                        && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || !isNullOrUndefined(oldProp.pageSettings) &&\n                            ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                                && !this.enableColumnVirtualization && !this.enableVirtualization\n                                && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'enableAutoFill':\n                    if (this.selectionModule) {\n                        this.enableBoxSelection();\n                        this.selectionModule.updateAutoFillPosition();\n                    }\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                case 'enableVirtualization':\n                case 'currencyCode':\n                case 'locale':\n                    this.log('frozen_rows_columns');\n                    freezeRefresh = true;\n                    requireGridRefresh = true;\n                    break;\n                case 'query':\n                    requireRefresh = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, requireGridRefresh);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            if (freezeRefresh || this.frozenColumns || this.frozenRows) {\n                this.freezeRefresh();\n            }\n            else {\n                this.refresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n            this.maintainSelection(newProp.selectedRowIndex);\n        }\n    };\n    /* tslint:disable */\n    Grid.prototype.extendedPropertyChange = function (prop, newProp, requireGridRefresh) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar && this.toolbarModule) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems && this.contextMenuModule) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu && this.columnMenuModule) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                var pending_1 = this.getDataModule().getState();\n                if (Object.getPrototypeOf(newProp).deepWatch) {\n                    var pKeyField = this.getPrimaryKeyFieldNames()[0];\n                    for (var i = 0, props = Object.keys(newProp.dataSource); i < props.length; i++) {\n                        this.setRowData(getValue(pKeyField, this.dataSource[props[i]]), this.dataSource[props[i]]);\n                    }\n                }\n                else if (pending_1.isPending) {\n                    var gResult_1 = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    (pending_1.group || []).forEach(function (name) {\n                        gResult_1 = DataUtil.group(gResult_1, name, pending_1.aggregates || []);\n                    });\n                    this.dataSource = {\n                        result: gResult_1, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    this.getDataModule().setState({});\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    if (!requireGridRefresh) {\n                        this.renderModule.refresh();\n                    }\n                }\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n            case 'selectedRowIndex':\n                if (!this.isSelectedRowIndexUpdating) {\n                    this.selectRow(newProp.selectedRowIndex);\n                }\n                this.isSelectedRowIndexUpdating = false;\n                break;\n        }\n    };\n    Grid.prototype.maintainSelection = function (index) {\n        var _this = this;\n        if (index !== -1) {\n            var fn_1 = function () {\n                _this.selectRow(index);\n                _this.off(events.contentReady, fn_1);\n            };\n            this.on(events.contentReady, fn_1, this);\n        }\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        var filterSettings = 'filterSettings';\n        if (prop[filterSettings] && this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            if (this.allowSorting || (this.allowGrouping && this.groupSettings.showDropArea) || this.allowReordering) {\n                row.classList.remove('e-defaultcursor');\n            }\n            else {\n                row.classList.add('e-defaultcursor');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateFrozenColumns();\n        this.updateLockableColumns();\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        var cols = this.columnModel;\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].isFrozen) {\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n        }\n    };\n    Grid.prototype.updateLockableColumns = function () {\n        var cols = this.columnModel;\n        var frozenCount = 0;\n        var movableCount = 0;\n        var frozenColumns = this.getFrozenColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].lockColumn) {\n                if (i < frozenColumns) {\n                    cols.splice(frozenCount, 0, cols.splice(i, 1)[0]);\n                    frozenCount++;\n                }\n                else {\n                    cols.splice(frozenColumns + movableCount, 0, cols.splice(i, 1)[0]);\n                    movableCount++;\n                }\n            }\n        }\n    };\n    Grid.prototype.checkLockColumns = function (cols) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                this.checkLockColumns(cols[i].columns);\n            }\n            else if (cols[i].lockColumn) {\n                this.lockcolPositionCount++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getQuery = function () {\n        return this.query;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand'))) && !this.isEdit) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!cell) {\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var frzCols = this.getFrozenColumns();\n                var isMovable = frzCols ? cellIndex >= frzCols : false;\n                var rows = (isMovable ?\n                    this.contentModule.getMovableRows() : this.contentModule.getRows());\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = {};\n                var column = void 0;\n                if (Object.keys(rowsObject).length) {\n                    rowData = rowsObject[0].data;\n                    column = rowsObject[0].cells[isMovable ? cellIndex - frzCols : cellIndex].column;\n                }\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderTable().querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                dRows.push(rows[i]);\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        var rows = [].slice.call(this.getContent().querySelector('.e-movablecontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var fieldIdx;\n        var col;\n        var tr;\n        var mTr;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var selectedRow = {};\n        var movableSelectedRow = {};\n        var rowObjects = this.contentModule.getRows();\n        var movableRowObjects = this.contentModule.getMovableRows();\n        fieldIdx = this.getColumnIndexByField(field);\n        if (this.groupSettings.columns.length > 0 || this.childGrid || this.detailTemplate) {\n            fieldIdx = fieldIdx + 1;\n        }\n        col = this.getColumnByField(field);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        movableSelectedRow = movableRowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        tr = !isNullOrUndefined(selectedRow) ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        mTr = !isNullOrUndefined(movableSelectedRow) ? this.element.querySelector('[data-uid=' + movableSelectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var td = !isNullOrUndefined(tr.childNodes[fieldIdx]) ?\n                tr.childNodes[fieldIdx] : mTr.childNodes[fieldIdx - this.frozenColumns];\n            if (!isNullOrUndefined(td)) {\n                var sRow = selectedRow[cells][fieldIdx];\n                var mRow = void 0;\n                if (this.frozenColumns) {\n                    mRow = movableSelectedRow[cells][fieldIdx - this.frozenColumns];\n                }\n                cell.refreshTD(td, !isNullOrUndefined(sRow) ? sRow : mRow, selectedRow[rowData], { index: selectedRow[rowIdx] });\n                if (this.aggregates.length > 0) {\n                    this.notify(events.refreshFooterRenderer, {});\n                    if (this.groupSettings.columns.length > 0) {\n                        this.notify(events.groupAggregates, {});\n                    }\n                }\n                /* tslint:disable:no-string-literal */\n                if (!isNullOrUndefined(movableSelectedRow) && !isNullOrUndefined(movableSelectedRow['changes'])) {\n                    movableSelectedRow['changes'][field] = value;\n                }\n                /* tslint:disable:no-string-literal */\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *  @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     *  @param {Object} rowData - To update new data for the particular row.\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rwdata = 'data';\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var selectedRow;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        if (this.groupSettings.columns.length > 0 && this.aggregates.length > 0) {\n            rowObjects = rowObjects.filter(function (row) { return row.isDataRow; });\n        }\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n            if (this.aggregates.length > 0) {\n                this.notify(events.refreshFooterRenderer, {});\n                if (this.groupSettings.columns.length > 0) {\n                    this.notify(events.groupAggregates, {});\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getDataRows()[rowIndex] && this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getMovableDataRows()[rowIndex] &&\n            this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - this.getFrozenColumns()];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.getFrozenColumns()) {\n            if (!row) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                return row;\n            }\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        return this.contentModule.getMovableRows();\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n    };\n    /**\n     * Gets a column header by UID.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns().concat(this.getStackedColumns(this.columns)), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getStackedColumns = function (columns, stackedColumn) {\n        if (stackedColumn === void 0) { stackedColumn = []; }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.columns) {\n                stackedColumn.push(column);\n                this.getStackedColumns(column.columns, stackedColumn);\n            }\n        }\n        return stackedColumn;\n    };\n    /**\n     * Gets a column index by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        if (this.allowRowDragAndDrop && this.allowResizing) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditTemplate = function () {\n        return this.editTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        for (var k = 0; k < this.columnModel.length; k++) {\n            if (this.columnModel[k].isPrimaryKey) {\n                keys.push(this.columnModel[k].field);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        this.headerModule.refreshUI();\n        this.updateStackedFilter();\n        this.renderModule.refresh();\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowCellIndexes : [];\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     * @isGenericType true\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule ? this.selectionModule.getSelectedRecords() : [];\n    };\n    /**\n     * Gets the data module.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var col = this.columns;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (col[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen && cols[i].visible) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        if (this.pagerModule) {\n            this.pagerModule.goToPage(pageNo);\n        }\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        if (this.pagerModule) {\n            this.pagerModule.updateExternalMessage(message);\n        }\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        if (this.sortModule) {\n            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        if (this.sortModule) {\n            this.sortModule.clearSorting();\n        }\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        if (this.sortModule) {\n            this.sortModule.removeSortColumn(field);\n        }\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        if (this.filterModule) {\n            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n        }\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function () {\n        if (this.filterModule) {\n            this.filterModule.clearFiltering();\n        }\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        if (this.filterModule) {\n            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n        }\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRow(index, isToggle);\n        }\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRows(rowIndexes);\n        }\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearSelection();\n        }\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCell(cellIndex, isToggle);\n        }\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Grid.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        this.selectionModule.selectCellsByRange(startIndex, endIndex);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        if (this.searchModule) {\n            this.searchModule.search(searchString);\n        }\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./#printmode).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        if (this.printModule) {\n            this.printModule.print();\n        }\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        if (this.editModule) {\n            this.editModule.deleteRecord(fieldname, data);\n        }\n    };\n    /**\n     * Starts edit the selected row. At least one row must be selected before invoking this method.\n     * `editSettings.allowEditing` should be true.\n     * @return {void}\n     */\n    Grid.prototype.startEdit = function () {\n        if (this.editModule) {\n            this.editModule.startEdit();\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        if (this.editModule) {\n            this.editModule.endEdit();\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        if (this.editModule) {\n            this.editModule.closeEdit();\n        }\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        if (this.editModule) {\n            this.editModule.addRecord(data, index);\n        }\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        if (this.editModule) {\n            this.editModule.deleteRow(tr);\n        }\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Grid.prototype.editCell = function (index, field) {\n        if (this.editModule) {\n            this.editModule.editCell(index, field);\n        }\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Grid.prototype.saveCell = function () {\n        if (this.editModule) {\n            this.editModule.saveCell();\n        }\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Grid.prototype.updateCell = function (rowIndex, field, value) {\n        if (this.editModule) {\n            this.editModule.updateCell(rowIndex, field, value);\n        }\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Grid.prototype.updateRow = function (index, data) {\n        if (this.editModule) {\n            this.editModule.updateRow(index, data);\n        }\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Grid.prototype.getBatchChanges = function () {\n        if (this.editModule) {\n            return this.editModule.getBatchChanges();\n        }\n        return {};\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     */\n    Grid.prototype.enableToolbarItems = function (items, isEnable) {\n        if (this.toolbarModule) {\n            this.toolbarModule.enableItems(items, isEnable);\n        }\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        if (this.clipboardModule) {\n            this.clipboardModule.copy(withHeader);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail() && !this.isRowDragable()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = 0;\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (this.enableColumnVirtualization) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isDetail()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isRowDragable()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n        }\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isRowDragable = function () {\n        return this.allowRowDragAndDrop && !this.rowDropSettings.targetID;\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumns(fromFName, toFName);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByIndex multiple times,\n     * then you won't get the same results every time.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByIndex(fromIndex, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByTargetIndex multiple times,\n     * then you will get the same results every time.\n     * @param  {string} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByTargetIndex(fieldName, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid Row position with given indexes.\n     * @param  {number} fromIndexes - Defines the origin Indexes.\n     * @param  {number} toIndex - Defines the destination Index.\n     * @return {void}\n     */\n    Grid.prototype.reorderRows = function (fromIndexes, toIndex) {\n        if (this.rowDragAndDropModule) {\n            this.rowDragAndDropModule.reorderRows(fromIndexes, toIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.refreshDataSource = function (e, args) {\n        this.notify('refreshdataSource', e);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.disableRowDD = function (enable) {\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerRows = headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell');\n        var rows = this.getRows();\n        var disValue = enable ? 'none' : '';\n        setStyleAttribute(headerTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        setStyleAttribute(contentTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        for (var i = 0; i < this.getRows().length; i++) {\n            var ele = rows[i].firstElementChild;\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n        for (var j = 0; j < headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell').length; j++) {\n            var ele = headerRows[j];\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        if (this.resizeModule) {\n            this.resizeModule.autoFitColumns(fieldNames);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.renderColumnChooser(x, y, target);\n        }\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var _this = this;\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending' });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    if (column) {\n                        column.visible = false;\n                    }\n                    else {\n                        this_1.log('initial_action', { moduleName: 'group', columnName: gCols[i] });\n                    }\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            sCols.forEach(function (col) {\n                _this.sortedColumns.push(col.field);\n            });\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        this.editTemplateFn = templateCompiler(this.editSettings.template);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n        this.enableBoxSelection();\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = this.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = this.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, this.createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(this.createElement('span'));\n        append([content, this.createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var td = element;\n        var table = headerTable.contains(element) ? htable : ctable;\n        var ele = headerTable.contains(element) ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (this.prevElement !== element || e.type === 'mouseout') {\n                this.toolTipObj.close();\n            }\n            var tagName = e.target.tagName;\n            var elemNames = ['A', 'BUTTON', 'INPUT'];\n            if (element && e.type !== 'mouseout' && !(Browser.isDevice && elemNames.indexOf(tagName) !== -1)) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.prevElement = element;\n                    this.toolTipObj.open(element);\n                }\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = this.createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = this.createElement('tr');\n        var mytd = this.createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    Grid.prototype.onKeyPressed = function (e) {\n        if (e.action === 'tab' || e.action === 'shiftTab') {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.element, 'dblclick', this.dblClickHandler, this);\n        EventHandler.add(this.element, 'keydown', this.keyPressHandler, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(this.element, 'mouseout', this.mouseMoveHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'mouseout', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'keydown', this.keyPressHandler);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.on(events.keyPressed, this.onKeyPressed, this);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.off(events.keyPressed, this.onKeyPressed);\n    };\n    Grid.prototype.blazorTemplate = function () {\n        if (isBlazor()) {\n            for (var i = 0; i < this.columnModel.length; i++) {\n                if (this.columnModel[i].template) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid, 'Template', this.columnModel[i], false);\n                }\n                if (this.columnModel[i].headerTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'headerTemplate', 'HeaderTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type == 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    var fieldName = this.columnModel[i].field;\n                    var tempID = this.element.id + this.columnModel[i].uid + 'filterTemplate';\n                    var filteredColumns = this.filterSettings.columns;\n                    for (var k = 0; k < filteredColumns.length; k++) {\n                        if (fieldName == filteredColumns[k].field) {\n                            blazorTemplates[tempID][0][fieldName] = filteredColumns[k].value;\n                        }\n                    }\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type != 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i]);\n                }\n            }\n            if (this.groupSettings.captionTemplate) {\n                updateBlazorTemplate(this.element.id + 'captionTemplate', 'CaptionTemplate', this.groupSettings);\n            }\n            var guid = 'guid';\n            for (var k = 0; k < this.aggregates.length; k++) {\n                for (var j = 0; j < this.aggregates[k].columns.length; j++) {\n                    if (this.aggregates[k].columns[j].footerTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'footerTemplate', 'FooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupFooterTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupFooterTemplate', 'GroupFooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupCaptionTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupCaptionTemplate', 'GroupCaptionTemplate', this.aggregates[k].columns[j]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @hidden\n     * @isGenericType true\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        if (isGroupAdaptive(this)) {\n            return isNullOrUndefined(this.currentViewData.records) ?\n                this.currentViewData : this.currentViewData.records;\n        }\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, 'e-gridcontent') ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n            e.preventDefault();\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var dataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            dataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        if (dataRow) {\n            this.trigger(events.recordDoubleClick, args);\n        }\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        var relatedTarget = e.relatedTarget;\n        var ariaOwns = relatedTarget ? relatedTarget.getAttribute('aria-owns') : null;\n        if ((!relatedTarget || (!parentsUntil(relatedTarget, 'e-grid') &&\n            (!isNullOrUndefined(ariaOwns) &&\n                (ariaOwns)) !== e.target.getAttribute('aria-owns')))\n            && !this.keyPress && this.isEdit && !Browser.isDevice) {\n            if (this.editSettings.mode === 'Batch') {\n                this.editModule.saveCell();\n                this.notify(events.editNextValCell, {});\n            }\n            if (this.editSettings.mode === 'Normal') {\n                this.editModule.editFormValidate();\n            }\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mergePersistGridData = function () {\n        var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj = JSON.parse(data);\n            if (this.enableVirtualization) {\n                dataObj.pageSettings.currentPage = 1;\n            }\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        setColumnIndex(this[key]);\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var _this = this;\n        storedColumn.forEach(function (col, index, arr) {\n            var localCol = columns.filter(function (tCol) { return tCol.index === col.index; })[0];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    _this.mergeColumns(col.columns, localCol.columns);\n                    arr[index] = extend(localCol, col, true);\n                }\n                else {\n                    arr[index] = extend(localCol, col, true);\n                }\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyPressHandler = function (e) {\n        var presskey = extend(e, { cancel: false, });\n        this.trigger(\"keyPressed\", presskey);\n        if (presskey.cancel === true) {\n            e.stopImmediatePropagation();\n        }\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        this.keyPress = e.action !== 'space';\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        setColumnIndex(this.columns);\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.isPreventScrollEvent = true;\n        this.updateColumnObject();\n        this.checkLockColumns(this.getColumns());\n        this.refresh();\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n    /* tslint:disable-next-line:no-any */\n    workbook, isBlob) {\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob) : null;\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, isBlob) {\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob) : null;\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, pdfDoc, isBlob) {\n        return this.pdfExportModule ? this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) : null;\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.groupColumn(columnName);\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.groupExpandAll = function () {\n        if (this.groupModule) {\n            this.groupModule.expandAll();\n        }\n    };\n    /**\n    * Collapses all the grouped rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.groupCollapseAll = function () {\n        if (this.groupModule) {\n            this.groupModule.collapseAll();\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    // public expandCollapseRows(target: Element): void {\n    //     if (this.groupModule) {\n    //         this.groupModule.expandCollapseRows(target);\n    //     }\n    // }\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearGrouping = function () {\n        if (this.groupModule) {\n            this.groupModule.clearGrouping();\n        }\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.ungroupColumn(columnName);\n        }\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    Grid.prototype.openColumnChooser = function (x, y) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.openColumnChooser(x, y);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    // public detailCollapse(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.collapse(target);\n    //     }\n    // }\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.detailCollapseAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.collapseAll();\n        }\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    // public detailExpand(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.expand(target);\n    //     }\n    // }\n    /**\n    * Expands all the detail rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.detailExpandAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.expandAll();\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Grid.prototype.clearCellSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearCellSelection();\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Grid.prototype.clearRowSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearRowSelection();\n        }\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectCells = function (rowCellIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCells(rowCellIndexes);\n        }\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Grid.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRowsByRange(startIndex, endIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    //tslint:disable-next-line:no-any\n    Grid.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * @hidden\n     * @private\n     */\n    Grid.prototype.log = function (type, args) {\n        this.loggerModule ? this.loggerModule.log(type, args) : (function () { return 0; })();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.applyBiggerTheme = function (element) {\n        if (this.element.classList.contains('e-bigger')) {\n            element.classList.add('e-bigger');\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getPreviousRowData = function () {\n        var previousRowData = this.getRowsObject()[this.getRows().length - 1].data;\n        return previousRowData;\n    };\n    /**\n     * Hides the scrollbar placeholder of Grid content when grid content is not overflown.\n     * @return {void}\n     */\n    Grid.prototype.hideScroll = function () {\n        var content = this.getContent().querySelector('.e-content');\n        var cTable = content.querySelector('.e-movablecontent') ? content.querySelector('.e-movablecontent') : content;\n        var fTable = content.querySelector('.e-frozencontent') ? content.querySelector('.e-frozencontent') : content;\n        if (cTable.scrollHeight <= cTable.clientHeight && fTable.scrollHeight <= fTable.clientHeight) {\n            this.scrollModule.removePadding();\n            cTable.style.overflowY = 'auto';\n        }\n        if (this.frozenColumns && cTable.scrollWidth <= cTable.clientWidth) {\n            cTable.style.overflowX = 'auto';\n            cTable.style.overflowY = 'auto';\n            this.notify(events.frozenHeight, 0);\n        }\n    };\n    /**\n     * Get row index by primary key or row data.\n     * @param  {string} value - Defines the primary key value.\n     * @param  {Object} value - Defines the row data.\n     */\n    Grid.prototype.getRowIndexByPrimaryKey = function (value) {\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        value = typeof value === 'object' ? value[pkName] : value;\n        for (var i = 0; i < this.getRowsObject().length; i++) {\n            if (this.getRowsObject()[i].data[pkName] === value) {\n                return this.getRowsObject()[i].index;\n            }\n        }\n        return -1;\n    };\n    ;\n    var Grid_1;\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableAutoFill\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Grid.prototype, \"hierarchyPrintMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Property('All')\n    ], Grid.prototype, \"columnQueryMode\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportDetailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStartHelper\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"commandClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"keyPressed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePaste\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    Grid = Grid_1 = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.currentTarget = null;\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction, isFromGroup: sCol.isFromGroup });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: columnName });\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;        \n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting',\n                type: events.actionBegin, target: this.currentTarget\n            } : {\n                requestType: 'sorting', type: events.actionBegin, cancel: false,\n                target: this.currentTarget\n            };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        var _this = this;\n        this.sortedColumns.length = 0;\n        this.sortSettings.columns.forEach(function (e) {\n            if (!e.isFromGroup) {\n                _this.sortedColumns.push(e.field);\n            }\n        });\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin, target: this.currentTarget\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.clearSorting();\n        }\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        this.currentTarget = null;\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !e.target.classList.contains('e-stackedheadercell') &&\n            !e.target.classList.contains('e-stackedheadercelldiv') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv')) {\n            var gObj = this.parent;\n            var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n                'Descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        this.currentTarget = e.target;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (!isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                (isNullOrUndefined(header) || !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerModule.element, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = createElement('div');\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = createElement('div');\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n        this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n        this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page',\n            pagerAllDropDown: 'Items',\n            All: 'All'\n        };\n        this.containerModule = new NumericContainer(this);\n        this.pagerMessageModule = new PagerMessage(this);\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            this.pagerTemplate();\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes() && this.pagerdropdownModule) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        this.element.innerHTML = '';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    if (newProp.pageSize !== oldProp.pageSize) {\n                        this.pageSize = newProp.pageSize;\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    else {\n                        this.refresh();\n                    }\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage && this.externalMessageModule) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Pager.prototype.setPageSize = function (pageSize) {\n        this.pageSize = pageSize;\n        this.dataBind();\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function (newProp, oldProp) {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        if (newProp.currentPage !== oldProp.currentPage || newProp.pageSize !== oldProp.pageSize) {\n            var args = {\n                currentPage: this.currentPage,\n                newProp: newProp, oldProp: oldProp, cancel: false\n            };\n            this.trigger('click', args);\n            if (!args.cancel) {\n                this.refresh();\n            }\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        result = this.getPagerTemplate()(data);\n        appendChildren(this.element, result);\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            this.element.innerHTML = '';\n            this.updateTotalPages();\n            this.pagerTemplate();\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var _this = this;\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            });\n        }\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? this.convertValue(pageSizesModule) :\n            [this.pagerModule.getLocalizedLabel('All'), '5', '10', '12', '20']);\n        var defaultValue = this.pagerModule.pageSize;\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue.toString(),\n            change: this.onChange.bind(this),\n            cssClass: 'e-alldrop'\n        });\n        this.dropDownListObject.appendTo(input);\n        if (pageSizesModule.length) {\n            this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();\n        }\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n        this.addEventListener();\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel('All')) {\n            this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;\n            this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerAllDropDown');\n            e.value = this.pagerModule.pageSize;\n            if (document.getElementsByClassName('e-popup-open e-alldrop').length) {\n                document.getElementsByClassName('e-popup-open e-alldrop')[0].style.display = 'none';\n            }\n        }\n        else {\n            this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);\n            if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel('pagerDropDown')) {\n                this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerDropDown');\n            }\n        }\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: parseInt(this.dropDownListObject.value, 10) });\n    };\n    PagerDropDown.prototype.beforeValueChange = function (prop) {\n        if (typeof prop.newProp.value === 'number') {\n            var val = prop.newProp.value.toString();\n            prop.newProp.value = val;\n        }\n    };\n    PagerDropDown.prototype.convertValue = function (pageSizeValue) {\n        var item = pageSizeValue;\n        for (var i = 0; i < item.length; i++) {\n            item[i] = typeof item[i] === 'number' ? item[i].toString() : item[i];\n        }\n        return item;\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    PagerDropDown.prototype.addEventListener = function () {\n        this.dropDownListObject.on('beforeValueChange', this.beforeValueChange, this);\n    };\n    PagerDropDown.prototype.removeEventListener = function () {\n        this.dropDownListObject.off('beforeValueChange', this.beforeValueChange);\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.removeEventListener();\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        if (!isNullOrUndefined(this.element)) {\n            this.element.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        Pager.Inject(ExternalMessage, PagerDropDown);\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n        }\n        this.element = this.parent.createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        if (!this.isInitialLoad) {\n            this.pageSettings.currentPage = 1;\n        }\n    };\n    Page.prototype.addAriaAttr = function () {\n        var _this = this;\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = this.parent.createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = this.parent.createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                if (_this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n                }\n            });\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.setPageSize = function (pageSize) {\n        this.pagerObj.setPageSize(pageSize);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                if (!isNullOrUndefined(e.newProp) && !isNullOrUndefined(e.newProp.pageSize)) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.setPageSize, arg1: e.newProp.pageSize });\n                    this.pagerObj.pageSize = e.oldProp.pageSize;\n                    gObj.pageSettings.pageSize = e.newProp.pageSize;\n                }\n                else if (e.currentPage) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                    this.pagerObj.currentPage = gObj.pageSettings.currentPage === this.pagerObj.currentPage ?\n                        this.pagerObj.previousPageNo : gObj.pageSettings.currentPage;\n                }\n                this.isForceCancel = true;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.pageSettings.pageSize = this.pagerObj.pageSize;\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        this.parent.notify(events.modelChanged, {\n            requestType: 'paging',\n            previousPage: prevPage,\n            currentPage: e.currentPage,\n            type: events.actionBegin\n        });\n        this.parent.requestTypeAction = 'paging';\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.isInitialLoad = true;\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.appendTo(this.element);\n        this.isInitialLoad = false;\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        this.pagerDestroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { appendChildren } from '../base/util';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return this.parent.createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            if (data) {\n                fltrData[column.field] = data[column.field];\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            if (column.visible) {\n                var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n                var element = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                appendChildren(node, element);\n            }\n            else {\n                node.classList.add('e-hide');\n            }\n        }\n        else {\n            if (column.type !== 'checkbox') {\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    node.classList.add('e-fltrtemp');\n                    attributes(innerDIV, {\n                        'class': 'e-fltrtempdiv'\n                    });\n                    if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                        input = this.parent.createElement('input', {\n                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            attrs: { type: 'search', title: column.headerText }\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                    else {\n                        var args = { column: column, node: Element };\n                        var temp = column.filterBarTemplate.create;\n                        if (typeof temp === 'string') {\n                            temp = getValue(temp, window);\n                        }\n                        input = temp(args);\n                        if (typeof input === 'string') {\n                            var div = this.parent.createElement('div');\n                            div.innerHTML = input;\n                            input = div.firstChild;\n                        }\n                        attributes(innerDIV, {\n                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            title: column.headerText,\n                            id: column.field + '_filterBarcell',\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                }\n                else {\n                    attributes(innerDIV, {\n                        'class': 'e-filterdiv e-fltrinputdiv'\n                    });\n                    input = this.parent.createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n                        attrs: {\n                            type: 'search', title: column.headerText + cell.attributes.title,\n                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                        }\n                    });\n                    innerDIV.appendChild(input);\n                    var args = {\n                        element: input, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.createInput(args, this.parent.createElement);\n                }\n                //TODO: apply intial filtering\n                if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                    input.setAttribute('disabled', 'true');\n                    input.classList.add('e-disable');\n                }\n                if (!column.visible) {\n                    node.classList.add('e-hide');\n                }\n                this.appendHtml(node, innerDIV);\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    var templateWrite = column.filterBarTemplate.write;\n                    var args = { element: input, column: column };\n                    if (typeof templateWrite === 'string') {\n                        templateWrite = getValue(templateWrite, window);\n                    }\n                    templateWrite.call(this, args);\n                }\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = (!isNullOrUndefined(this.parent.filterSettings.operators) &&\n            !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n            this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = this.parent.createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') { // rewuired or not\n            if (col.filter.operator) {\n                var optrLen = Object.keys(this.optrData).length;\n                for (var i = 0; i < optrLen; i++) {\n                    if (this.optrData[i].value === col.filter.operator) {\n                        selValue = this.optrData[i].text;\n                    }\n                }\n            }\n            else {\n                selValue = this.optrData[0].text;\n            }\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { Browser, isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion } from '../base/util';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var data;\n        var floptr;\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = this.getAutoCompleteOptions(args);\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        var autoComplete = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return mapObj[_this.actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            }\n        }, args.column.filter.params));\n        return autoComplete;\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { extend } from '@syncfusion/ej2-base';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: args.column.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        }, args.column.filter.params));\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList(extend({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        }, args.column.filter.params));\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getCustomDateFormat } from '../base/util';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var format = getCustomDateFormat(args.column.format, args.column.type);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        if (args.column.type === 'date') {\n            this.datePickerObj = new DatePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        else if (args.column.type === 'datetime') {\n            this.datePickerObj = new DateTimePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { Browser, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n    }\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) { ///\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function () {\n        if (!this.dlgObj) {\n            return;\n        }\n        if (isBlazor()) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            this.parent.notify(events.filterMenuClose, { field: this.col.field });\n            this.isDialogOpen = false;\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = this.parent.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(target, this.dlgObj, this.parent);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        this.dlgObj.element.style.maxHeight = '350px';\n        this.dlgObj.show();\n        if (!column.filterTemplate) {\n            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.isDialogOpen = true;\n        this.parent.trigger(events.actionComplete, args);\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.parent.log('column_type_missing', { column: col });\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = this.parent.createElement('div', { className: 'e-flmenu-valuediv' });\n        var fObj = this.filterObj;\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            var valueInString = 'value';\n            fltrData[column.field] = fltrData[valueInString] = fObj.values[column.field];\n            if (column.foreignKeyValue) {\n                fltrData[column.foreignKeyValue] = fObj.values[column.field];\n                fltrData[column.field] = undefined;\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n            var compElement = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n            updateBlazorTemplate(tempID, 'FilterTemplate', column);\n            appendChildren(valueDiv, compElement);\n        }\n        else {\n            if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n                && !isNullOrUndefined(column.filter.ui.create)) {\n                var temp = column.filter.ui.create;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                temp({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n                });\n            }\n            else {\n                instanceofFilterUI.create({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n                });\n            }\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.uid === column.uid) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (col.filterTemplate) {\n            var element = this.dlgDiv.querySelector('.e-flmenu-valuediv');\n            var fltrValue = void 0;\n            if (element.children[0].value) {\n                fltrValue = element.children[0].value;\n            }\n            else {\n                fltrValue = !isBlazor() && !isNullOrUndefined((element.children[0].ej2_instances)) ?\n                    element.children[0].ej2_instances[0].value\n                    : element.querySelector('.e-control').ej2_instances[0].value;\n            }\n            this.filterObj.filterByColumn(col.field, flOptrValue, fltrValue);\n        }\n        else {\n            if (!isNullOrUndefined(col.filter) &&\n                !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n                var temp = col.filter.ui.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n            }\n            else {\n                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n            }\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n        var flIcon = column.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.add('e-filtered');\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, appendChildren, extend } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { isNullOrUndefined, } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n    };\n    ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilter.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilter.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilter.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left, e.target);\n            this.parent.applyBiggerTheme(this.menuObj.element.parentElement);\n        }\n    };\n    ExcelFilter.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n                selectedMenu = 'between';\n            }\n            else {\n                selectedMenu = 'customfilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilter.prototype.preventClose = function (args) {\n        if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n            args.cancel = true;\n        }\n    };\n    ExcelFilter.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilter.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        var targetBorder = target.offsetWidth - target.clientWidth;\n        targetBorder = targetBorder ? targetBorder + 1 : 0;\n        return (leftPos < 1) ? (targetPosition.right + 1 - targetBorder) : (targetPosition.left - contextWidth - 1 + targetBorder);\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2));\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilter.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilter.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e.element;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                if (_this.options.column.filterTemplate) {\n                    if (isBlazor()) {\n                        row.querySelector('.e-xlfl-valuediv').children[0].focus();\n                    }\n                    else {\n                        row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n                    }\n                }\n                else {\n                    row.cells[1].querySelector('input:not([type=hidden])').focus();\n                }\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilter.prototype.removeDialog = function () {\n        if (isBlazor()) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilter.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        if (Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.dlgObj.show();\n        this.parent.applyBiggerTheme(this.dlgObj.element.parentElement);\n    };\n    ExcelFilter.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilter.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.parent.getColumnByField(col).filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-frstvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.parent.getColumnByField(col).filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-secndvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.parent.filterSettings.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var col = this.parent.getColumnByField(fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue\n            });\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (!isNullOrUndefined(secondValue)) {\n            secondOperator = !isNullOrUndefined(secondOperator) ? secondOperator : 'equal';\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /* tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        if (col.isForeignColumn()) {\n            this.foreignKeyFilter(args, fColl, mPredicate);\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(this.parent.getColumnByField(column), predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        var col = this.parent.getColumnByField(column);\n        this.dropOptr = new DropDownList(extend({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl\n        }, col.filter.params));\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilter.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilter.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilter.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else {\n            operator = isFirst ? col.filter.operator || 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilter.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilter.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /* tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilter.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilter.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var isFilteredCol = this.filterSettings.columns.some(function (col) { return column === col.field; });\n        var fltrPredicates = this.options.filteredColumns.filter(function (col) { return col.field === column; });\n        if (this.options.column.filterTemplate) {\n            var data = {};\n            var columnObj = this.parent.getColumnByField(column);\n            if (isFilteredCol && elementId) {\n                data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n            }\n            var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n            var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n            appendChildren(valueDiv, element);\n            if (isBlazor()) {\n                valueDiv.children[0].classList.add(elementId);\n                if (this.dlgDiv.querySelectorAll('.e-xlfl-value').length > 1) {\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columnObj);\n                }\n            }\n            else {\n                valueDiv.children[0].id = isComplex ? complexFieldName + elementId : column + elementId;\n            }\n            value.appendChild(valueDiv);\n        }\n        else {\n            var valueInput = this.parent\n                .createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n            valueDiv.appendChild(valueInput);\n            value.appendChild(valueDiv);\n            var flValue = void 0;\n            var predicate = void 0;\n            if (predicates && predicates.length > 0) {\n                predicate = predicates.length === 2 ?\n                    (isFirst ? predicates[0] : predicates[1]) :\n                    (isFirst ? predicates[0] : undefined);\n                flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n            }\n            var types = {\n                'string': this.renderAutoComplete.bind(this),\n                'number': this.renderNumericTextBox.bind(this),\n                'date': this.renderDate.bind(this),\n                'datetime': this.renderDateTime.bind(this)\n            };\n            types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n        }\n    };\n    ExcelFilter.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n        var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n        if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n            data = { column: predicates instanceof Array ? predicates[predIndex] : predicates };\n            var indx = this.options.column.columnData && fltrPredicates.length > 1 ?\n                (this.options.column.columnData.length === 1 ? 0 : 1) : predIndex;\n            data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] :\n                fltrPredicates[indx].value;\n            if (this.options.foreignKeyValue) {\n                data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n            }\n        }\n        return data;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /* tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.datePicker = new DatePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        }, options.column.filter.params));\n        this.datePicker.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.dateTimePicker = new DateTimePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        }, options.column.filter.params));\n        this.dateTimePicker.appendTo(inputValue);\n    };\n    ExcelFilter.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue\n        }, options.column.filter.params));\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.parent.getColumnByField(column);\n        var isForeignColumn = colObj.isForeignColumn();\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.parent.getQuery().clone(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return isComplex ? _this.performComplexDataOperation(actObj.fields.value, mapObject)\n                            : mapObject[actObj.fields.value];\n                    }).indexOf(isComplex ? _this.performComplexDataOperation(actObj.fields.value, obj) :\n                        obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            value: fValue\n        }, colObj.filter.params));\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    ExcelFilter.prototype.performComplexDataOperation = function (value, mapObject) {\n        var returnObj;\n        var length = value.split('.').length;\n        var splits = value.split('.');\n        var duplicateMap = mapObject;\n        for (var i = 0; i < length; i++) {\n            returnObj = duplicateMap[splits[i]];\n            duplicateMap = returnObj;\n        }\n        return returnObj;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.refresh = true;\n        this.values = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e)) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                var rowdrag = this.parent.element.querySelector('.e-rowdragheader');\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                if (rowdrag) {\n                    rowdrag.className = 'e-dragheadercell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.filterSettings.columns = [];\n        }\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.getFrozenColumns() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        if (this.parent.isRowDragable()) {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n        this.currentFilterObject = {\n            field: field, uid: col.uid, isForeignKey: col.isForeignColumn(), operator: this.operator,\n            value: this.value, predicate: this.predicate,\n            matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n        };\n        var index = this.getFilteredColsIndexByField(col);\n        if (index > -1) {\n            this.filterSettings.columns[index] = this.currentFilterObject;\n        }\n        else {\n            this.filterSettings.columns.push(this.currentFilterObject);\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].uid === col.uid || (col.isForeignColumn() && this.parent.getColumnByUid(col.uid).field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.parent.getHeaderTable().classList.add('e-sortfilter');\n            this.render();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.initialLoad = true;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.initialLoad = false;\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.clickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.getColumnByField(fieldName);\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: this.column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.value = filterValue;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.predicate = predicate || 'and';\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n            this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n            this.updateFilterMsg();\n            return;\n        }\n        if (filterCell && this.filterSettings.type === 'FilterBar' && filterCell.value !== filterValue) {\n            filterCell.value = filterValue;\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n            if (this.initialLoad && this.filterSettings.type === 'FilterBar') {\n                filterCell.value = this.values[this.column.field];\n            }\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        this.actualPredicate[this.fieldName] = [{\n                field: this.fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: this.operator,\n                value: this.value,\n                type: this.column.type\n            }];\n        this.addFilteredClass(this.fieldName);\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        this.parent.notify(events.modelChanged, {\n                            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                                this.column.field : undefined,\n                            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n                        });\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.getColumnByUid(this.filterSettings.columns[i].uid);\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.column.field);\n                if (filterElement) {\n                    if (!isNullOrUndefined(this.cellText[this.filterSettings.columns[i].field])) {\n                        filterElement.value = this.cellText[this.column.field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[i].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function () {\n        var _this = this;\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        cols.forEach(function (col) {\n            col.uid = col.uid || _this.parent.getColumnByField(col.field).uid;\n        });\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredcols = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        this.refresh = false;\n        for (var i = 0, len = filteredcols.length; i < len; i++) {\n            this.removeFilteredColsByField(this.parent.getColumnByUid(filteredcols[i]).field, false);\n        }\n        this.refresh = true;\n        if (filteredcols.length) {\n            this.parent.renderModule.refresh();\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        var gObj = this.parent;\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n        var dataSource = col.filter.dataSource || gObj.getDataModule().dataManager;\n        this.filterModule.openDialog({\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format,\n            filteredColumns: gObj.filterSettings.columns, target: target,\n            sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: this.parent.localeObj\n        });\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredColsUid = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        for (var i = 0, len = filteredColsUid.length; i < len; i++) {\n            cols[i].uid = cols[i].uid || this.parent.getColumnByField(cols[i].field).uid;\n            var len_1 = cols.length;\n            var column = this.parent.getColumnByUid(filteredColsUid[i]);\n            if (column.field === field || (column.field === column.foreignKeyValue && column.isForeignColumn())) {\n                if (this.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + column.field + '_filterBarcell\\']';\n                    fCell = this.parent.getHeaderContent().querySelector(selector);\n                    if (fCell) {\n                        fCell.value = '';\n                        delete this.values[field];\n                    }\n                }\n                while (len_1--) {\n                    if (cols[len_1].uid === column.uid) {\n                        cols.splice(len_1, 1);\n                    }\n                }\n                var fltrElement = this.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this.isRemove = true;\n                if (this.actualPredicate[field]) {\n                    delete this.actualPredicate[field];\n                }\n                if (this.values[field]) {\n                    delete this.values[field];\n                }\n                if (this.refresh) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'filtering', type: events.actionBegin, currentFilterObject: {\n                            field: column.field, operator: this.operator, value: this.value, predicate: this.predicate,\n                            matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                        }, currentFilterColumn: column\n                    });\n                }\n                break;\n            }\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if ((this.filterSettings.mode === 'Immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.getColumnByUid(columns[index].uid);\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            this.valueFormatter.fromView(this.values[column.field], column.getParser(), column.type) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater_1 = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater_1.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        var skipInput;\n        if (column.type === 'number') {\n            skipInput = ['=', ' ', '!'];\n            if (DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            skipInput = ['>', '<', '=', '!'];\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (skipInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.getFrozenColumns()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase, this.ignoreAccent);\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        switch (this.column.type) {\n            case 'number':\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    this.operator = this.filterOperators.startsWith;\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                this.operator = this.filterOperators.equal;\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            var gClient = gObj.element.getBoundingClientRect();\n            var fClient = target.getBoundingClientRect();\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule &&\n                (!parentsUntil(target, 'e-popup-wrapper')\n                    && (!closest(target, '.e-filter-item.e-menu-item'))\n                    && (!parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n                this.filterModule.closeDialog(target);\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            this.parent.renderModule.refresh(); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        this.actualPredicate = {};\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            /* tslint:disable-next-line:max-line-length */\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent, cols[i].uid);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent, uid) {\n        var obj;\n        obj = {\n            field: fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: operator,\n            value: value,\n            type: type\n        };\n        this.actualPredicate[fieldName] ? this.actualPredicate[fieldName].push(obj) : this.actualPredicate[fieldName] = [obj];\n        var field = uid ? this.parent.getColumnByUid(uid).field : fieldName;\n        this.addFilteredClass(field);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        if (this.parent.showColumnMenu) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-columnmenu');\n        }\n        else {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        }\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil } from '../base/util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.autoFit = function () {\n        var newarray = this.parent.getColumns().filter(function (c) { return c.autoFit === true; })\n            .map(function (c) { return c.field || c.headerText; });\n        if (newarray.length > 0) {\n            this.autoFitColumns(newarray);\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var footerDivTag = 'e-gridfooter';\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var footerTextClone;\n        var frzCols = gObj.getFrozenColumns();\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (frzCols) {\n            if (index < frzCols) {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                if (footerTable) {\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                }\n            }\n            else {\n                headerTable = gObj.getHeaderContent().querySelector('.e-movableheader').children[0];\n                contentTable = gObj.getContent().querySelector('.e-movablecontent').children[0];\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n                if (footerTable) {\n                    footerTable = gObj.getFooterContent().querySelector('.e-movablefootercontent').children[0];\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n                }\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            if (footerTable) {\n                footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            }\n        }\n        var indentWidthClone = headerTable.querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        var footerText = [];\n        if (footerTable) {\n            for (var i = 0; i < footerTextClone.length; i++) {\n                footerText[i] = footerTextClone[i].cloneNode(true);\n            }\n        }\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var wFooter = null;\n        if (footerText.length) {\n            wFooter = this.createTable(footerTable, footerText, footerDivTag);\n        }\n        var columnbyindex = gObj.getColumns()[index];\n        var result;\n        var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n        this.widthService.setColumnWidth(gObj.getColumns()[index]);\n        result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            gObj.getColumns().forEach(function (element) {\n                if (element.visible) {\n                    tWidth = tWidth + parseFloat(element.width);\n                }\n            });\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.getFrozenColumns()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        var _this = this;\n        fName.forEach(function (element) {\n            var fieldName = element;\n            var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n            if (_this.parent.getColumns()[columnIndex].visible === true) {\n                _this.resizeColumn(fieldName, columnIndex);\n            }\n        });\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        text.forEach(function (element) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(element);\n            myTable.appendChild(tr);\n        });\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n        this.parent.on(events.contentReady, this.autoFit, this);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        this.getResizeHandlers().forEach(function (ele) {\n            if (ele.parentElement.offsetHeight > 0) {\n                ele.style.height = ele.parentElement.offsetHeight + 'px';\n            }\n        });\n        this.setHandlerHeight();\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.getFrozenColumns() ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress)).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            if (col.columns) {\n                return;\n            }\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.refreshStackedColumnWidth();\n                this.element = e.target;\n                if (this.parent.getVisibleFrozenColumns()) {\n                    var mtbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                    var ftbody = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n                    var mtr = mtbody.querySelectorAll('tr');\n                    var ftr = ftbody.querySelectorAll('tr');\n                    for (var i = 0; i < mtr.length; i++) {\n                        if (this.parent.rowHeight) {\n                            mtr[i].style.height = this.parent.rowHeight + 'px';\n                            ftr[i].style.height = this.parent.rowHeight + 'px';\n                        }\n                        else {\n                            mtr[i].style.removeProperty('height');\n                            ftr[i].style.removeProperty('height');\n                        }\n                    }\n                }\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.parent.enableRtl) {\n                    this.minMove = parseFloat(this.column.width.toString())\n                        - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                        - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = {\n                    e: e,\n                    column: this.column\n                };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n                EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n                EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n                this.updateCursor('add');\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.getColData = function (column, mousemove) {\n        return {\n            width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0'\n                : this.widthService.getWidth(column).toString()) + mousemove,\n            minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n            maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n        };\n    };\n    Resize.prototype.resizing = function (e) {\n        if (isNullOrUndefined(this.column)) {\n            return;\n        }\n        var offsetWidth = 0;\n        if (isNullOrUndefined(this.column)) {\n            offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n        }\n        if (this.parent.allowTextWrap) {\n            this.element.style.height = this.element.parentElement.offsetHeight + 'px';\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = this.getColData(this.column, mousemove);\n        if (!colData.width) {\n            colData.width = closest(this.element, 'th').offsetWidth;\n        }\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        this.parent.log('resize_min_max', { column: this.column, width: width });\n        if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n            width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ?\n            offsetWidth.toString() : this.column.width.toString())) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            var columns = [this.column];\n            var finalColumns = [this.column];\n            if (this.column.columns) {\n                columns = this.getSubColumns(this.column, []);\n                columns = this.calulateColumnsWidth(columns, false, mousemove);\n                finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n            }\n            for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n                var col = finalColumns_1[_i];\n                this.widthService.setColumnWidth(col, null, 'resize');\n            }\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n        var finalColumns = [];\n        var _loop_1 = function (col) {\n            var totalWidth = 0;\n            columns.forEach(function (col) {\n                totalWidth += parseFloat(col.width.toString());\n            });\n            var colData = this_1.getColData(col, (parseFloat(col.width)) * mousemove / totalWidth);\n            var colWidth = this_1.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n            if ((colWidth !== parseFloat(col.width.toString()))) {\n                if (isUpdate) {\n                    col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n                }\n                finalColumns.push(col);\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            _loop_1(col);\n        }\n        return finalColumns;\n    };\n    Resize.prototype.getSubColumns = function (column, subColumns) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false && col.allowResizing) {\n                if (col.columns) {\n                    this.getSubColumns(col, subColumns);\n                }\n                else {\n                    subColumns.push(col);\n                }\n            }\n        }\n        return subColumns;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = {\n            e: e,\n            column: this.column\n        };\n        var content = this.parent.getContent().querySelector('.e-content');\n        var cTable = content.querySelector('.e-movablecontent') ? content.querySelector('.e-movablecontent') : content;\n        if (cTable.scrollHeight >= cTable.clientHeight) {\n            this.parent.scrollModule.setPadding();\n            cTable.style.overflowY = 'scroll';\n        }\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.getFrozenColumns()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.textWrapRefresh, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_2 = columns; _b < columns_2.length; _b++) {\n                var column = columns_2[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.refreshStackedColumnWidth = function () {\n        for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n            var stackedColumn = _a[_i];\n            stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n        }\n    };\n    Resize.prototype.getStackedWidth = function (column, width) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false) {\n                if (col.columns) {\n                    this.getStackedWidth(col, width);\n                }\n                else {\n                    width += col.width;\n                }\n            }\n        }\n        return width;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n        var uid = cell.getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (rect.parentElement.children.length !== frzCols) {\n                tr.splice(0, tr.length / 2);\n            }\n            else {\n                tr.splice(tr.length / 2, tr.length / 2);\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.getFrozenColumns()) {\n            var table = closest(rect, '.e-table');\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n        var bool = col ? !col.lockColumn : true;\n        return (srcElem.parentElement.isEqualNode(destElem.parentElement) || (this.parent.getFrozenColumns()\n            && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column });\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n                this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column, destColumn: destColumn });\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.getColumns(true).filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n                this.destElement = destElem;\n                if (uid) {\n                    this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n                }\n                else {\n                    var headers = this.getHeaderCells();\n                    var oldIdx = getElementIndex(this.element, headers);\n                    var columns = this.getColumnsModel(this.parent.columns);\n                    var column_2 = columns[oldIdx];\n                    this.moveColumns(newIndex, column_2);\n                }\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (((this.parent.getFrozenColumns() && parent) || this.parent.lockcolPositionCount) && !reorderByColumn) {\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].field === column.field) {\n                    srcIdx = i;\n                    break;\n                }\n            }\n            var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n            if (col) {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].field === col.field) {\n                        destIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].headerText === this.destElement.innerText.trim()) {\n                        destIndex = i;\n                    }\n                }\n            }\n        }\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        gObj.notify(events.modelChanged, {\n            type: events.actionBegin, requestType: 'reorder'\n        });\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = this.getHeaderCells();\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        var frozenColumns = this.parent.getFrozenColumns();\n        if (frozenColumns || this.parent.lockcolPositionCount) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            if (frozenColumns) {\n                var mRows = [].slice.call(this.parent.getHeaderContent()\n                    .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n                for (var i = 0; i < fRows.length; i++) {\n                    fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                    var isAvail = void 0;\n                    for (var k = 0; k < fTh.length; k++) {\n                        for (var j = 0; j < mTh.length; j++) {\n                            if (mTh[j].innerText === fTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([fTh[k]]);\n                        }\n                    }\n                    for (var j = 0; j < mTh.length; j++) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < fRows.length; i++) {\n                    mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    for (var k = 0; k < mTh.length; k++) {\n                        var isAvail = void 0;\n                        for (var j = k + 1; j < mTh.length; j++) {\n                            if (mTh[j].innerText === mTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([mTh[k]]);\n                        }\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n        var fColumn = this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn)) ||\n            (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: fColumn, destColumn: toColumn });\n            return;\n        }\n        var column = this.parent.getColumnByField(toFName);\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, this.parent.getColumnByField(fromFName), true);\n        }\n    };\n    Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n        var toIndex = this.parent.getColumnIndexByField(toFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if (toIndex < 0 || (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn))) {\n            return;\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByField(fromFNames[i]);\n            if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n                return;\n            }\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByIndex(toIndex);\n            var parent_1 = this.getColParent(column, this.parent.columns);\n            var columns = parent_1 ? parent_1.columns : this.parent.columns;\n            var destIndex = inArray(column, columns);\n            if (destIndex > -1) {\n                this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true);\n            }\n            if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n                toIndex++; //R to L\n            }\n        }\n    };\n    Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n        if (toIndex > -1) {\n            this.moveColumns(toIndex, column, true);\n        }\n    };\n    Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n        var column = this.parent.getColumnByField(fieldName);\n        this.moveTargetColumn(column, toIndex);\n    };\n    Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n        for (var i = 0; i < fieldName.length; i++) {\n            this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string | string[]} fromFName - Defines the origin field names.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        typeof fromFName === 'string' ? this.reorderSingleColumn(fromFName, toFName) : this.reorderMultipleColumns(fromFName, toFName);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        var column = this.parent.getColumnByIndex(fromIndex);\n        this.moveTargetColumn(column, toIndex);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {string | string[]} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        typeof fieldName === 'string' ? this.reorderSingleColumnByTarget(fieldName, toIndex) :\n            this.reorderMultipleColumnByTarget(fieldName, toIndex);\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function () {\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var isLeft = this.x > getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader')\n            .getBoundingClientRect().left : cliRect.left;\n        var cliRectBaseRight = cliRect.right;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        this.x = getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable, isBlazor } from '@syncfusion/ej2-base';\nimport { removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition, addRemoveActiveClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { Scroll } from '../actions/scroll';\nimport { Query } from '@syncfusion/ej2-data';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        this.selectedRows = [];\n        this.isOverflowBorder = true;\n        this.selectedRowColls = [];\n        this.isRefresh = true;\n        /* tslint:disable-next-line:max-line-length */\n        // tslint:disable-next-line:max-func-body-length\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var visualElement = _this.parent.createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = _this.parent.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = _this.parent.createElement('tbody');\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (gObj.rowDropSettings.targetID && (!e.sender.target.classList.contains('e-selectionbackground')\n                    && gObj.selectionSettings.type !== 'Single')) ||\n                (!gObj.rowDropSettings.targetID && !parentsUntil(e.sender.target, 'e-rowdragdrop'))) {\n                return false;\n            }\n            if (gObj.rowDropSettings.targetID &&\n                gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                gObj.selectRow(parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10));\n            }\n            _this.startedRow = closestElement(target, 'tr').cloneNode(true);\n            _this.processArgs(target);\n            var args = {\n                selectedRow: _this.rows, dragelement: target,\n                cloneElement: visualElement, cancel: false, data: _this.rowData\n            };\n            var selectedRows = gObj.getSelectedRows();\n            gObj.trigger(events.rowDragStartHelper, args);\n            var cancel = 'cancel';\n            var cloneElement = 'cloneElement';\n            if (args[cancel]) {\n                visualElement = args[cloneElement];\n                return visualElement;\n            }\n            removeElement(_this.startedRow, '.e-indentcell');\n            removeElement(_this.startedRow, '.e-detailrowcollapse');\n            removeElement(_this.startedRow, '.e-detailrowexpand');\n            _this.removeCell(_this.startedRow, 'e-gridchkbox');\n            var exp = new RegExp('e-active', 'g'); //high contrast issue\n            _this.startedRow.innerHTML = _this.startedRow.innerHTML.replace(exp, '');\n            tbody.appendChild(_this.startedRow);\n            if (gObj.getSelectedRows().length > 1) {\n                var dropCountEle = _this.parent.createElement('span', {\n                    className: 'e-dropitemscount', innerHTML: '' + selectedRows.length,\n                });\n                visualElement.appendChild(dropCountEle);\n            }\n            var ele = closestElement(target, 'tr').querySelector('.e-icon-rowdragicon');\n            if (ele) {\n                ele.classList.add('e-dragstartrow');\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            var target = e.target;\n            var spanCssEle = _this.parent.element.querySelector('.e-dropitemscount');\n            if (_this.parent.getSelectedRecords().length > 1 && spanCssEle) {\n                spanCssEle.style.left = _this.parent.element.querySelector('.e-cloneproperties table')\n                    .offsetWidth - 5 + 'px';\n            }\n            _this.processArgs(target);\n            gObj.trigger(events.rowDragStart, {\n                rows: _this.rows,\n                target: e.target, draggableType: 'rows', fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                data: _this.rowData\n            });\n            _this.dragStartData = _this.rowData;\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances &&\n                dropElem.ej2_instances[0].getModuleName() === 'grid') {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur', 'e-movecur']);\n            _this.isOverflowBorder = true;\n            _this.hoverState = gObj.enableHover;\n            var trElement = closestElement(e.target, 'tr');\n            gObj.enableHover = false;\n            if (!e.target) {\n                return;\n            }\n            _this.processArgs(target);\n            var args = {\n                rows: _this.rows, target: target, draggableType: 'rows',\n                data: _this.rowData, originalEvent: e, cancel: false\n            };\n            gObj.trigger(events.rowDrag, args);\n            _this.stopTimer();\n            if (args.cancel) {\n                return;\n            }\n            gObj.element.classList.add('e-rowdrag');\n            _this.dragTarget = trElement && parentsUntil(target, 'e-grid').id === cloneElement.parentElement.id ?\n                trElement.rowIndex : parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10);\n            if (gObj.rowDropSettings.targetID) {\n                if (!parentsUntil(target, 'e-gridcontent') ||\n                    parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                }\n            }\n            else {\n                var elem = parentsUntil(target, 'e-grid');\n                if (elem && elem.id === cloneElement.parentElement.id) {\n                    classList(cloneElement, ['e-movecur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-movecur']);\n                }\n            }\n            if (!gObj.rowDropSettings.targetID &&\n                (!gObj.groupSettings.columns.length || e.target.classList.contains('e-selectionbackground'))) {\n                if (parentsUntil(target, 'e-grid')) {\n                    _this.updateScrollPostion(e.event, target);\n                }\n                if (_this.isOverflowBorder && parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10) !== _this.dragTarget) {\n                    _this.moveDragRows(e, _this.startedRow, trElement);\n                }\n                else {\n                    if (trElement && _this.parent.getRowByIndex(_this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') ===\n                        trElement.getAttribute('data-uid')) {\n                        var bottomborder = _this.parent.createElement('div', { className: 'e-lastrow-dragborder' });\n                        var gridcontentEle = _this.parent.getContent();\n                        bottomborder.style.width = _this.parent.element.offsetWidth - _this.getScrollWidth() + 'px';\n                        if (!gridcontentEle.querySelectorAll('.e-lastrow-dragborder').length) {\n                            gridcontentEle.classList.add('e-grid-relative');\n                            gridcontentEle.appendChild(bottomborder);\n                            bottomborder.style.bottom = _this.getScrollWidth() + 'px';\n                        }\n                    }\n                    _this.removeBorder(trElement);\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var targetEle = _this.getElementFromPosition(e.helper, e.event);\n            var target = targetEle ? targetEle : e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElement = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElement && dropElement.ej2_instances &&\n                dropElement.ej2_instances[0].getModuleName() === 'grid') {\n                dropElement.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            if (gObj.isRowDragable()) {\n                _this.stopTimer();\n                gObj.enableHover = _this.hoverState;\n                _this.parent.getContent().classList.remove('e-grid-relative');\n                _this.removeBorder(targetEle);\n                var stRow = gObj.element.querySelector('.e-dragstartrow');\n                if (stRow) {\n                    stRow.classList.remove('e-dragstartrow');\n                }\n            }\n            _this.processArgs(target);\n            var args = {\n                target: target, draggableType: 'rows',\n                cancel: false,\n                fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                dropIndex: _this.dragTarget,\n                rows: _this.rows, data: _this.dragStartData\n            };\n            gObj.trigger(events.rowDrop, args);\n            if (!parentsUntil(target, 'e-gridcontent') || args.cancel) {\n                _this.dragTarget = null;\n                remove(e.helper);\n                return;\n            }\n            _this.isRefresh = false;\n            var selectedIndexes = _this.parent.getSelectedRowIndexes();\n            if (gObj.isRowDragable()) {\n                if (!_this.parent.rowDropSettings.targetID &&\n                    _this.startedRow.querySelector('td.e-selectionbackground') && selectedIndexes.length > 1 &&\n                    selectedIndexes.length !== _this.parent.getCurrentViewRecords().length) {\n                    _this.reorderRows(selectedIndexes, args.dropIndex);\n                }\n                else {\n                    _this.reorderRows([parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10)], _this.dragTarget);\n                }\n                _this.dragTarget = null;\n                if (!gObj.rowDropSettings.targetID) {\n                    remove(e.helper);\n                    gObj.refresh();\n                }\n            }\n            _this.isRefresh = true;\n        };\n        this.removeCell = function (targetRow, className) {\n            return [].slice.call(targetRow.querySelectorAll('td')).filter(function (cell) {\n                if (cell.classList.contains(className)) {\n                    targetRow.deleteCell(cell.cellIndex);\n                }\n            });\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.onDataBoundFn = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.reorderRows = function (fromIndexes, toIndex) {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var selectedRecords = [];\n        var draggedRecords = [];\n        var currentViewData = this.parent.renderModule.data.dataManager.dataSource.json;\n        var dropIdx = toIndex;\n        var actualIdx = fromIndexes[0];\n        for (var i = 0, len = fromIndexes.length; i < len; i++) {\n            draggedRecords[i] = currentViewData[fromIndexes[i]];\n        }\n        for (var i = 0, len = selectedIndexes.length; i < len; i++) {\n            selectedRecords[i] = currentViewData[selectedIndexes[i]];\n        }\n        for (var i = 0, len = draggedRecords.length; i < len; i++) {\n            if (i !== 0) {\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) ===\n                        JSON.stringify(draggedRecords[i])) {\n                        actualIdx = j;\n                        break;\n                    }\n                }\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(draggedRecords[i - 1])) {\n                        if (actualIdx > j) {\n                            dropIdx = j + 1;\n                        }\n                        break;\n                    }\n                }\n            }\n            this.reorderRow(actualIdx, dropIdx);\n        }\n        if (this.isRefresh) {\n            this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n        for (var i = 0, len = selectedRecords.length; i < len; i++) {\n            for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(selectedRecords[i])) {\n                    selectedIndexes[i] = j;\n                    break;\n                }\n            }\n        }\n        this.selectedRowColls = selectedIndexes;\n    };\n    RowDD.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        this.draggable = new Draggable(gObj.getContent(), {\n            dragTarget: '.e-rowcelldrag, .e-rowdragdrop, .e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    RowDD.prototype.updateScrollPostion = function (e, target) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var y = getPosition(e).y;\n        var cliRect = this.parent.getContent().getBoundingClientRect();\n        var rowHeight = this.parent.getRowHeight() - 15;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (cliRect.top + rowHeight >= y) {\n            var scrollPixel_1 = -(this.parent.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_1, true); }, 200);\n        }\n        else if (cliRect.top + this.parent.getContent().clientHeight - rowHeight - 33 <= y) {\n            var scrollPixel_2 = (this.parent.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_2, true); }, 200);\n        }\n    };\n    RowDD.prototype.setScrollDown = function (scrollElem, scrollPixel, isLeft) {\n        scrollElem.scrollTop = scrollElem.scrollTop + scrollPixel;\n    };\n    RowDD.prototype.moveDragRows = function (e, startedRow, targetRow) {\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        var element = closestElement(e.target, 'tr');\n        if (parentsUntil(element, 'e-gridcontent') && parentsUntil(cloneElement.parentElement, 'e-grid').id ===\n            parentsUntil(element, 'e-grid').id) {\n            var targetElement = element ?\n                element : this.startedRow;\n            this.setBorder(targetElement, e.event, startedRow, targetRow);\n        }\n    };\n    RowDD.prototype.setBorder = function (element, event, startedRow, targetRow) {\n        var node = this.parent.element;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        if (parentsUntil(element, 'e-gridcontent') && parentsUntil(cloneElement.parentElement, 'e-grid').id ===\n            parentsUntil(element, 'e-grid').id) {\n            removeClass(node.querySelectorAll('.e-rowcell,.e-rowdragdrop'), ['e-dragborder']);\n            var rowElement = [];\n            if (targetRow && targetRow.rowIndex === 0) {\n                var div = this.parent.createElement('div', { className: 'e-firstrow-dragborder' });\n                var gridheaderEle = this.parent.getHeaderContent();\n                gridheaderEle.classList.add('e-grid-relative');\n                div.style.width = node.offsetWidth - this.getScrollWidth() + 'px';\n                if (!gridheaderEle.querySelectorAll('.e-firstrow-dragborder').length) {\n                    gridheaderEle.appendChild(div);\n                }\n            }\n            else if (targetRow && parseInt(startedRow.getAttribute('aria-rowindex'), 10) > targetRow.rowIndex) {\n                element = this.parent.getRowByIndex(targetRow.rowIndex - 1);\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            else {\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            if (rowElement.length > 0) {\n                addRemoveActiveClasses(rowElement, true, 'e-dragborder');\n            }\n        }\n    };\n    RowDD.prototype.getScrollWidth = function () {\n        var scrollElem = this.parent.getContent().firstElementChild;\n        return scrollElem.scrollWidth > scrollElem.offsetWidth ? Scroll.getScrollBarWidth() : 0;\n    };\n    RowDD.prototype.removeFirstRowBorder = function (element) {\n        if (this.parent.element.getElementsByClassName('e-firstrow-dragborder').length > 0 && element &&\n            element.rowIndex !== 0) {\n            this.parent.element.getElementsByClassName('e-firstrow-dragborder')[0].remove();\n        }\n    };\n    RowDD.prototype.removeLastRowBorder = function (element) {\n        var islastRowIndex = element &&\n            this.parent.getRowByIndex(this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') !==\n                element.getAttribute('data-uid');\n        if (this.parent.element.getElementsByClassName('e-lastrow-dragborder').length > 0 && element && islastRowIndex) {\n            this.parent.element.getElementsByClassName('e-lastrow-dragborder')[0].remove();\n        }\n    };\n    RowDD.prototype.removeBorder = function (element) {\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        element = this.parent.getRows().filter(function (row) {\n            return row.querySelector('td.e-dragborder');\n        })[0];\n        if (element) {\n            var rowElement = [].slice.call(element.querySelectorAll('.e-dragborder'));\n            addRemoveActiveClasses(rowElement, false, 'e-dragborder');\n        }\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    RowDD.prototype.onDataBound = function (e) {\n        if (this.selectedRowColls.length > 0) {\n            this.parent.selectRows(this.selectedRowColls);\n            this.selectedRowColls = [];\n        }\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.singleRowDrop = function (e) {\n        var targetRow = closestElement(e.target, 'tr');\n        var currentIndex;\n        var srcControl;\n        srcControl = e.droppedElement.parentElement.ej2_instances[0];\n        currentIndex = targetRow ? targetRow.rowIndex : srcControl.currentViewData.length - 1;\n        this.reorderRow(this.startedRowIndex, currentIndex);\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        var draggObj = e.droppedElement.parentElement.ej2_instances[0];\n        if (e.droppedElement.getAttribute('action') !== 'grouping') {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl_1;\n            var currentIndex = void 0;\n            if ((e.droppedElement.querySelector('tr').getAttribute('single-dragrow') !== 'true' &&\n                e.droppedElement.parentElement.id === gObj.element.id)\n                || (e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true' &&\n                    e.droppedElement.parentElement.id !== gObj.element.id)) {\n                return;\n            }\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl_1 = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else if (this.isSingleRowDragDrop || e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true') {\n                this.singleRowDrop(e);\n                return;\n            }\n            if (srcControl_1.element.id !== gObj.element.id && srcControl_1.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl_1.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges\n            if (!isBlazor()) {\n                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n                gObj.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n                var selectedRows = srcControl_1.getSelectedRowIndexes();\n                var skip = srcControl_1.allowPaging ?\n                    (srcControl_1.pageSettings.currentPage * srcControl_1.pageSettings.pageSize) - srcControl_1.pageSettings.pageSize : 0;\n                this.selectedRows = [];\n                for (var i = 0, len = records.length; i < len; i++) {\n                    this.selectedRows.push(skip + selectedRows[i]);\n                }\n                srcControl_1.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n                srcControl_1.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n            }\n            else {\n                var changes = {\n                    addedRecords: records,\n                    deletedRecords: [],\n                    changedRecords: []\n                };\n                var dragDropDestinationIndex = 'dragDropDestinationIndex';\n                var query = new Query;\n                query[dragDropDestinationIndex] = targetIndex;\n                gObj.getDataModule().saveChanges(changes, gObj.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    gObj.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    gObj.trigger(events.actionFailure, { error: e });\n                });\n                changes.deletedRecords = records;\n                changes.addedRecords = [];\n                srcControl_1.getDataModule().saveChanges(changes, srcControl_1.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    srcControl_1.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    srcControl_1.trigger(events.actionFailure, { error: e });\n                });\n            }\n        }\n    };\n    RowDD.prototype.reorderRow = function (fromIndexes, toIndex) {\n        var gObj = this.parent;\n        if (!gObj.sortSettings.columns.length && !gObj.groupSettings.columns.length && !gObj.filterSettings.columns.length) {\n            //Todo: drag and drop mapper & BatchChanges                 \n            var skip = gObj.allowPaging ?\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : 0;\n            var fromIndex = fromIndexes;\n            toIndex = toIndex + skip;\n            this.selectedRows = gObj.getSelectedRowIndexes();\n            gObj.notify(events.rowPositionChanged, {\n                fromIndex: fromIndexes + skip,\n                toIndex: toIndex\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.draggable.destroy();\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    RowDD.prototype.processArgs = function (target) {\n        var gObj = this.parent;\n        if ((gObj.getSelectedRecords().length > 0 && this.startedRow.cells[0].classList.contains('e-selectionbackground') === false)\n            || gObj.getSelectedRecords().length === 0) {\n            this.rows = [this.startedRow];\n            this.rowData = this.parent.getRowInfo((this.startedRow).querySelector('.e-rowcell')).rowData;\n        }\n        else {\n            this.rows = gObj.getSelectedRows();\n            this.rowData = gObj.getSelectedRecords();\n        }\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, isGroupAdaptive, updatecloneRow } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function () {\n            _this.parent.element.classList.add('e-ungroupdrag');\n        };\n        this.drag = function (e) {\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            if (!(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'))) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                _this.parent.log('action_disabled_column', { moduleName: _this.getModuleName(), columnName: column.headerText });\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n        this.groupGenerator = new GroupModelGenerator(this.parent);\n    }\n    Group.prototype.columnDrag = function (e) {\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.groupAggregates, this.onGroupAggregates, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.groupAggregates, this.onGroupAggregates);\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if ((!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var dataManager = void 0;\n            var query = void 0;\n            var toExpand = [];\n            var gObj = this.parent;\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, expand, query, dataManager);\n                }\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, !isHide, query, dataManager);\n                }\n            }\n            this.aria.setExpand(trgt, expand);\n            if (!isGroupAdaptive(gObj)) {\n                for (var i = 0, len = rows.length; i < len; i++) {\n                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                        if (isHide) {\n                            rows[i].style.display = 'none';\n                        }\n                        else {\n                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                                rows[i].style.display = '';\n                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n                                if (expandElem) {\n                                    toExpand.push(expandElem);\n                                }\n                                if (rows[i].classList.contains('e-detailrow')) {\n                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                        rows[i].style.display = 'none';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.updateVirtualRows = function (gObj, target, isExpand, query, dataManager) {\n        var rObj = gObj.getRowObjectFromUID(target.closest('tr').getAttribute('data-uid'));\n        rObj.isExpand = isExpand;\n        updatecloneRow(gObj);\n        query = gObj.getDataModule().generateQuery(false);\n        query.queries = [];\n        var args = { requestType: 'virtualscroll', rowObject: rObj };\n        dataManager = gObj.getDataModule().getData(args, query.requiresCount());\n        dataManager.then(function (e) { return gObj.renderModule.dataManagerSuccess(e, args); });\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = this.parent.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: '.e-groupheadercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.push(this.colName);\n        this.groupSettings.columns = columns;\n        this.groupAddSortingQuery(this.colName);\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending', isFromGroup: true });\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var groupedColumn = this.parent.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = this.parent.createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        // if (!isNullOrUndefined(column.headerTemplate)) {\n        //     if (column.headerTemplate.indexOf('#') !== -1) {\n        //         childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n        //     } else {\n        //         childDiv.innerHTML = column.headerTemplate;\n        //     }\n        //     childDiv.firstElementChild.classList.add('e-grouptext');\n        // } else {\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-grouptext', innerHTML: column.headerText,\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        // }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(this.parent.createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            remove(this.getGHeaderCell(field));\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        var _this = this;\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'columns':\n                    var args = void 0;\n                    if (this_1.contentRefresh) {\n                        if (!this_1.isAppliedUnGroup) {\n                            if (!this_1.isAppliedGroup) {\n                                this_1.updateGroupDropArea(true);\n                                for (var i = 0; i < this_1.groupSettings.columns.length; i++) {\n                                    this_1.colName = this_1.groupSettings.columns[i];\n                                    var col = this_1.parent.getColumnByField(this_1.colName);\n                                    col.visible = this_1.parent.groupSettings.showGroupedColumn;\n                                    this_1.groupAddSortingQuery(this_1.colName);\n                                    if (i < this_1.groupSettings.columns.length - 1) {\n                                        this_1.addColToGroupDrop(this_1.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = {\n                                columnName: this_1.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin\n                            };\n                        }\n                        else {\n                            args = { requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this_1.groupSettings.showGroupedColumn) {\n                            e.oldProperties[prop].forEach(function (column) {\n                                if (e.properties[prop].indexOf(column) === -1) {\n                                    _this.parent.getColumnByField(column).visible = true;\n                                }\n                            });\n                        }\n                        this_1.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this_1.updateGroupDropArea();\n                    this_1.groupSettings.showDropArea ? this_1.element.style.display = '' : this_1.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this_1.updateGroupedColumn(this_1.groupSettings.showGroupedColumn);\n                    this_1.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this_1.parent.refreshHeader();\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.isDestroyed && !this.parent.refreshing) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (i === (len - 1)) {\n                this.contentRefresh = true;\n            }\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    Group.prototype.onGroupAggregates = function (editedData) {\n        var _this = this;\n        var aggregates = this.iterateGroupAggregates(editedData);\n        var rowData = this.groupGenerator.generateRows(aggregates, {});\n        var summaryRows = this.parent.getRowsObject().filter(function (row) { return !row.isDataRow; });\n        var updateSummaryRows = rowData.filter(function (data) { return !data.isDataRow; });\n        updateSummaryRows.forEach(function (row, indx) {\n            var cells = row.cells.filter(function (cell) { return cell.isDataCell; });\n            var args = { cells: cells, data: row.data, dataUid: summaryRows[indx] ? summaryRows[indx].uid : '' };\n            _this.parent.notify(events.refreshAggregateCell, args);\n        });\n    };\n    Group.prototype.iterateGroupAggregates = function (editedData) {\n        var updatedData = editedData instanceof Array ? editedData : [];\n        var rows = this.parent.getRowsObject();\n        var initData = this.parent.getCurrentViewRecords();\n        var deletedCols = [];\n        var changeds = rows.map(function (row) {\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.changes instanceof Object ? row.changes : row.data;\n        });\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        changeds = updatedData.length === 0 ? changeds : updatedData;\n        var mergeData = initData.map(function (item) {\n            var pKeyVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return pKeyVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            deletedCols.forEach(function (row) {\n                var index = mergeData.indexOf(row);\n                mergeData.splice(index, 1);\n            });\n        }\n        var aggregates = [];\n        var aggregateRows = this.parent.aggregates;\n        aggregateRows.forEach(function (row) {\n            row.columns.forEach(function (col) {\n                var aggr = {};\n                var type = col.type.toString();\n                aggr = { type: type.toLowerCase(), field: col.field };\n                aggregates.push(aggr);\n            });\n        });\n        var result;\n        var aggrds;\n        var groupedCols = this.parent.groupSettings.columns;\n        groupedCols.forEach(function (field) {\n            aggrds = result ? result : mergeData;\n            result = DataUtil.group(aggrds, field, aggregates, null, null);\n        });\n        return result;\n    };\n    return Group;\n}());\nexport { Group };\n","import { isBlazor } from '@syncfusion/ej2-base';\nimport { closest, classList, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var parent = 'parentDetails';\n        var childGrid;\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))) {\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId } });\n                var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                detailRow.appendChild(detailCell);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                if (gObj.detailTemplate) {\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID));\n                    if (isBlazor()) {\n                        window[detailTemplateID] = window[detailTemplateID] || {};\n                        window[detailTemplateID][data[events.blazorId]] = detailCell;\n                        //resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n                        updateBlazorTemplate(detailTemplateID, 'DetailTemplate', gObj, false);\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: data[gObj.childGrid.queryString],\n                        parentRowData: data\n                    };\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid('')\n                    });\n                    detailCell.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                gObj.getRowsObject().splice(rowObj.index + 1, 0, row);\n                gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data, childGrid: childGrid });\n                gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            this.aria.setExpand(target, true);\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    /**\n     * @hidden\n     * @param gObj\n     * @param rowObj\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = gObj.expandedRows[rowObj.index].gridModel;\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n                gridModel = gObj.childGrid;\n            }\n            else {\n                gridModel = gObj.childGrid;\n            }\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        detailrows.forEach(function (detailrow) {\n            detailrow.querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren } from '../base/util';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            template: '<div class=\"e-input-group e-search\" role=\"search\">\\\n            <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n            placeholder= \\\"' + this.l10n.getConstant('Search') + '\\\"/>\\\n            <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n            tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n            </div>',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: this.l10n.getConstant('Columnchooser'), tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right',\n        };\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n            }\n            else {\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.bindSearchEvents = function () {\n        this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            created: this.bindSearchEvents.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.toolbar[isStringTemplate] = true;\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.toolbarTemplate) {\n            if (!isBlazor() && typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                if (isBlazor()) {\n                    var tempID = this.parent.element.id + 'toolbarTemplate';\n                    var item = appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', tempID));\n                    var items_1 = this.getItem(item);\n                    this.toolbar.items.push(items_1);\n                    this.toolbar.appendTo(this.element);\n                    updateBlazorTemplate(this.parent.element.id + 'toolbarTemplate', 'ToolbarTemplate', this.parent);\n                }\n                else {\n                    appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n                }\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n        this.bindSearchEvents();\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing && hasData ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting && hasData ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n            var item = items_2[_i];\n            var element = this.element.querySelector('#' + item);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        var newArgs = !isBlazor() || this.parent.isJsComponent ? args : { item: args.item, cancel: args.cancel, name: args.name };\n        var originalEvent = args.originalEvent;\n        gObj.trigger(events.toolbarClick, newArgs, function (toolbarargs) {\n            toolbarargs.originalEvent = toolbarargs.originalEvent ? toolbarargs.originalEvent : originalEvent;\n            if (!toolbarargs.cancel) {\n                switch (!isNullOrUndefined(toolbarargs.item) && toolbarargs.item.id) {\n                    case gID + '_print':\n                        gObj.print();\n                        break;\n                    case gID + '_edit':\n                        gObj.startEdit();\n                        break;\n                    case gID + '_update':\n                        gObj.endEdit();\n                        break;\n                    case gID + '_cancel':\n                        gObj.closeEdit();\n                        break;\n                    case gID + '_add':\n                        gObj.addRecord();\n                        break;\n                    case gID + '_delete':\n                        gObj.deleteRecord();\n                        break;\n                    case gID + '_search':\n                        if (toolbarargs.originalEvent.target.id === gID + '_searchbutton') {\n                            _this.search();\n                        }\n                        break;\n                    case gID + '_columnchooser':\n                        var tarElement = _this.parent.element.querySelector('.e-ccdiv');\n                        var y = tarElement.getBoundingClientRect().top;\n                        var x = tarElement.getBoundingClientRect().left;\n                        var targetEle = toolbarargs.originalEvent.target;\n                        y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                        gObj.createColumnchooser(x, y, targetEle);\n                        break;\n                }\n            }\n        });\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.getFrozenColumns()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            innerDiv.appendChild(fDiv);\n            innerDiv.appendChild(mDiv);\n            this.frozenContent = fDiv;\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.getFrozenColumns()) {\n            var freezeTable = table.cloneNode(true);\n            this.frozenContent.appendChild(freezeTable);\n            this.freezeTable = freezeTable;\n            this.movableContent.appendChild(table);\n            remove(table.querySelector('colgroup'));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector('tbody'));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = e;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        if (this.parent.getFrozenColumns()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            this.freezeTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.freezeTable, 0, this.parent.getFrozenColumns());\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), this.parent.getFrozenColumns());\n        // check freeze content have no row case\n        if (this.parent.getFrozenColumns()) {\n            var frozenDiv = this.frozenContent;\n            if (!frozenDiv.offsetHeight) {\n                frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table \n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns());\n            this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector('colGroup'));\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent').scrollLeft :\n                this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var fCol = this.parent.getFrozenColumns();\n        if (fCol && fCol > index) {\n            return this.freezeTable.querySelector('colGroup').children[index];\n        }\n        return this.getColGroup().children[index - fCol];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n        this.parent.on(refreshFooterRenderer, this.refreshFooterRenderer, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n        this.parent.off(refreshFooterRenderer, this.refreshFooterRenderer);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        var _this = this;\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var deletedCols = [];\n        var data = 'dataSource';\n        var mergeds;\n        var rows = this.parent.frozenColumns > 0 ? this.parent.getMovableRowsObject() : this.parent.getRowsObject();\n        var initds = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.dataSource[data].json.length\n            ? this.parent.dataSource[data].json : this.parent.getCurrentViewRecords();\n        var addrow = [];\n        var changeds = rows.map(function (row) {\n            if (row.changes && row.edit === 'add') {\n                addrow.push(row.changes);\n            }\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.isDirty && row.changes ? row.changes : row.data;\n        });\n        changeds = editedData.length === 0 ? changeds : editedData;\n        mergeds = initds.map(function (item) {\n            var idVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return idVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var currentData = this.parent.groupSettings.columns.length > 0 && 'records' in this.parent.currentViewData ?\n            this.parent.getCurrentViewRecords() : this.parent.currentViewData;\n        var currentds;\n        currentds = currentData.map(function (item) {\n            var idVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = mergeds.some(function (cItem) {\n                value = cItem;\n                return idVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        if (addrow.length > 0) {\n            addrow.forEach(function (row) { mergeds.push(row); currentds.push(row); });\n        }\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            deletedCols.forEach(function (row) {\n                var index = mergeds.indexOf(row);\n                var curIndx = currentData.indexOf(row);\n                mergeds.splice(index, 1);\n                if (currentds && currentds.length) {\n                    currentds.splice(curIndx, 1);\n                }\n            });\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        aggregateRows.forEach(function (row) {\n            row.columns.forEach(function (col) {\n                var data = [];\n                var type = col.type.toString();\n                data = type.toLowerCase() === 'custom' && !isNullOrUndefined(currentds) ? currentds : mergeds;\n                agrVal = calculateAggregate(type, data, col, _this.parent);\n                aggregate[col.field + ' - ' + type.toLowerCase()] = agrVal;\n            });\n        });\n        var result = {\n            result: this.parent.groupSettings.columns.length > 0 ? mergeds : currentds,\n            count: mergeds.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { refreshAggregateCell } from '../base/constant';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        this.parent.on(refreshAggregateCell, this.refreshWithAggregate(node, cell), this);\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            return true;\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        var tempID = '';\n        if (isBlazor()) {\n            var guid = 'guid';\n            tempID = this.parent.element.id + column[guid] + tempObj.property;\n        }\n        appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property, tempID));\n        return false;\n    };\n    SummaryCellRenderer.prototype.refreshWithAggregate = function (node, cell) {\n        var _this = this;\n        var cellNode = cell;\n        return function (args) {\n            var cell = cellNode;\n            var field = cell.column.columnName ? cell.column.columnName : null;\n            var curCell = (!isNullOrUndefined(field) ? args.cells.filter(function (cell) {\n                return cell.column.columnName === field;\n            })[0] : null);\n            if (node.parentElement && node.parentElement.getAttribute('data-uid') === args.dataUid && field &&\n                field === curCell.column.columnName) {\n                _this.refreshTD(node, curCell, args.data);\n            }\n        };\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var prevTop = 0;\n        var prevLeft = 0;\n        var debounced100 = debounce(callback, 100);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top ? 'down' : 'up';\n            direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n            prevTop = top;\n            prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                onEnterCallback(_this.element, current, direction, { top: top, left: left }, _this.fromWheel, check);\n            }\n            if (check) {\n                var fn = debounced100; //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                    focusElement: document.activeElement });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { isGroupAdaptive } from '../base/util';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var _this = this;\n        var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        this.checkAndResetCache(notifyArgs.requestType);\n        if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n            return result = this.parent.vcRows;\n        }\n        if (this.parent.enableColumnVirtualization) {\n            info.blockIndexes.forEach(function (value) {\n                if (_this.isBlockAvailable(value)) {\n                    _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n                }\n            });\n        }\n        info.blockIndexes.forEach(function (value) {\n            if (!_this.isBlockAvailable(value)) {\n                var rows = _this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n                });\n                if (isGroupAdaptive(_this.parent) && !_this.parent.vcRows.length) {\n                    _this.parent.vRows = rows;\n                    _this.parent.vcRows = rows;\n                }\n                var median = void 0;\n                if (isGroupAdaptive(_this.parent)) {\n                    median = _this.model.pageSize / 2;\n                    if (!_this.isBlockAvailable(indexes[0])) {\n                        _this.cache[indexes[0]] = rows.slice(0, median);\n                    }\n                    if (!_this.isBlockAvailable(indexes[1])) {\n                        _this.cache[indexes[1]] = rows.slice(median, _this.model.pageSize);\n                    }\n                }\n                else {\n                    median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n                    if (!_this.isBlockAvailable(indexes[0])) {\n                        _this.cache[indexes[0]] = rows.slice(0, median);\n                    }\n                    if (!_this.isBlockAvailable(indexes[1])) {\n                        _this.cache[indexes[1]] = rows.slice(median);\n                    }\n                }\n            }\n            if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n                _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n            }\n            result.push.apply(result, _this.cache[value]);\n            if (_this.isBlockAvailable(value)) {\n                loadedBlocks.push(value);\n            }\n        });\n        info.blockIndexes = loadedBlocks;\n        var grouping = 'records';\n        if (this.parent.allowGrouping) {\n            this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n        }\n        else {\n            this.parent.currentViewData = result.map(function (m) { return m.data; });\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder',\n            'save', 'delete'].some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n        Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n            block = block + gLen;\n            _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n        });\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var _this = this;\n        var currentFirst = current[0];\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) {\n            if (Number(key) < block) {\n                rows = rows.concat(_this.cache[key]);\n            }\n        });\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var _this = this;\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive } from '../base/util';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        _this.currentInfo = {};\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().firstChild;\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        if (this.parent.enablePersistence) {\n            this.parent.scrollPosition = scrollArgs.offset;\n        }\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        if (isNullOrUndefined(document.activeElement)) {\n            this.isFocused = false;\n        }\n        else {\n            this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        }\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (isGroupAdaptive(this.parent)) {\n            if ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n                && scrollArgs.direction === 'up' && viewInfo.blockIndexes[viewInfo.blockIndexes.length - 1] !== 2) {\n                return;\n            }\n            else {\n                viewInfo.event = 'refresh-virtual-block';\n                if (!isNullOrUndefined(viewInfo.offsets)) {\n                    viewInfo.offsets.top = this.content.scrollTop;\n                }\n                this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n                return;\n            }\n        }\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            if (Browser.isIE) {\n                this.parent.hideSpinner();\n            }\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        infoType.page = this.getPageFromTop(e.top + vHeight, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        if (this.parent.height === '100%') {\n            this.parent.element.style.height = '100%';\n        }\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n        this.virtualEle.adjustTable(cOffset, translate);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        if (!isNullOrUndefined(target.parentNode)) {\n            remove(target);\n        }\n        var tbody = this.parent.element.querySelector('.e-content').querySelector('tbody');\n        if (tbody) {\n            remove(tbody);\n            target = null;\n        }\n        target = this.parent.createElement('tbody');\n        target.appendChild(newChild);\n        this.getTable().appendChild(target);\n        if (this.parent.groupSettings.columns.length) {\n            if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused) {\n            this.content.focus();\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    VirtualContentRenderer.prototype.setVirtualHeight = function () {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        this.virtualEle.setVirtualHeight(this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()], width);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = (isGroupAdaptive(this.parent)) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop <= _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop + cHeight, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        if (result + blockHeight > this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()]) {\n            result -= (result + blockHeight) - this.offsets[this.getTotalBlocks()];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            if (Browser.isIE && !isWheel && check && !_this.preventEvent) {\n                _this.parent.showSpinner();\n            }\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(x, 0);\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            var gObj = _this.parent;\n            if (gObj.enablePersistence && gObj.scrollPosition) {\n                _this.content.scrollTop = gObj.scrollPosition.top;\n                var scrollValues = { direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                    offset: gObj.scrollPosition, focusElement: gObj.element };\n                _this.scrollListener(scrollValues);\n                if (gObj.enableColumnVirtualization) {\n                    _this.content.scrollLeft = gObj.scrollPosition.left;\n                }\n            }\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n        var rows = this.parent.vcRows;\n        return Math.floor((rows.length / this.getBlockSize()) < 1 ? 1 : rows.length / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        if (isGroupAdaptive(this.parent)) {\n            return this.parent.getDataRows()[index];\n        }\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return this.parent.getDataRows()[index - startIdx];\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var _this = this;\n        var gObj = this.parent;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        Array.apply(null, Array(total)).map(function () { return ++row; })\n            .forEach(function (block) {\n            var tmp = (_this.vgenerator.cache[block] || []).length;\n            var rem = !isGroupAdaptive(_this.parent) ? _this.count % bSize : (gObj.vcRows.length % bSize);\n            var size = !isGroupAdaptive(_this.parent) && block in _this.vgenerator.cache ?\n                tmp * _this.parent.getRowHeight() : rem && block === total ? rem * _this.parent.getRowHeight() : _this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n            _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n        });\n        this.offsetKeys = Object.keys(this.offsets);\n        if (isGroupAdaptive(this.parent)) {\n            this.parent.vGroupOffsets = this.offsets;\n        }\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    VirtualContentRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [];\n        rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = gObj.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            if (!needFullRefresh) {\n                var width = void 0;\n                if (column.visible) {\n                    width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (width > gObj.width) {\n                    this.setDisplayNone(tr, idx, displayVal, rows);\n                    this.virtualEle.setWrapperWidth(width + '');\n                    this.vgenerator.refreshColOffsets();\n                    this.refreshVirtualElement();\n                }\n                else {\n                    this.refreshContentRows({ requestType: 'refresh' });\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            this.parent.notify(events.partialRefresh, { rows: rows, args: { isFrozen: false, rows: rows } });\n        }\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().firstChild;\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.refreshUI.call(this);\n    };\n    VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n                var tablewidth = void 0;\n                if (column.visible) {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (tablewidth > gObj.width) {\n                    this.setDisplayNone(column, displayVal);\n                    this.virtualEle.setWrapperWidth(tablewidth + '');\n                    this.gen.refreshColOffsets();\n                }\n                else {\n                    this.refreshUI();\n                }\n            }\n            else {\n                this.refreshUI();\n            }\n        }\n    };\n    VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n        for (var _i = 0, _a = [].slice.apply(this.getTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            if (ele.querySelector('[e-mappinguid]') &&\n                ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n                setStyleAttribute(ele, { 'display': displayVal });\n                break;\n            }\n        }\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        this.parent.log(['limitation', 'virtual_height'], 'virtualization');\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.enableColumnVirtualization) {\n            renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n        }\n        renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.parent.height :\n            this.parent.element.getBoundingClientRect().height;\n        this.blockSize = ~~(vHeight / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var mTbody;\n        var tbody;\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = this.parent.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.getContentTable().querySelector('tbody');\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').remove();\n        }\n        this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(args.row, tbody.firstChild) : tbody.appendChild(args.row);\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        if (this.parent.getFrozenColumns()) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n                mTbody = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            this.parent.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mEle, mTbody.firstChild) : mTbody.appendChild(mEle);\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.getFrozenColumns()) {\n            var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n            var fCont = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n            var mCont = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            var fHdr = this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            if (this.parent.frozenRows && idx >= this.parent.frozenRows) {\n                idx -= this.parent.frozenRows;\n            }\n            if (fCont.contains(row)) {\n                return mCont.children[idx];\n            }\n            else if (mCont.contains(row)) {\n                return fCont.children[idx];\n            }\n            else if (fHdr.contains(row)) {\n                return mHdr.children[idx];\n            }\n            else if (mHdr.contains(row)) {\n                return fHdr.children[idx];\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        if (closest(args.row, '.e-movablecontent')) {\n            args.row = this.getFreezeRow(args.row);\n        }\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        tdElement = this.updateFreezeEdit(args.row, tdElement);\n        args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n        args.row.classList.add('e-editedrow');\n        this.refreshFreezeEdit(args.row, args);\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        if (this.parent.getFrozenColumns()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.e-frozenheader';\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.e-frozencontent';\n            }\n            var mTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                form.innerHTML = '';\n                this.appendChildren(form, args.rowData, false);\n            }\n            var fRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add('e-editedrow');\n        }\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        if (!this.parent.editSettings.template) {\n            this.renderMovable(ele, mEle);\n            mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n                .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        }\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        var frzCols = this.parent.getFrozenColumns();\n        for (var i = 0; i < frzCols; i++) {\n            mEle.querySelector('tr').removeChild(mEle.querySelector('tr').children[0]);\n        }\n        for (var i = frzCols, len = ele.querySelector('tr').childElementCount; i < len; i++) {\n            ele.querySelector('tr').removeChild(ele.querySelector('tr').children[ele.querySelector('tr').childElementCount - 1]);\n        }\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        var isDragable = gObj.isRowDragable() ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length - gObj.getVisibleFrozenColumns() + gLen + isDetail + isDragable).toString() }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = this.parent.createElement('tbody');\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            var td_1 = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate'));\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { classList } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        args.cell.innerHTML = '';\n        args.cell.appendChild(this.getEditElement(elements, args));\n        args.cell.classList.remove('e-ellipsistooltip');\n        args.cell.classList.add('e-editedbatchcell');\n        classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper', styles: 'width: auto' });\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        // let position: PositionDataModel = this.parent.element.getBoundingClientRect().height < 400 ?\n        //     { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog(extend({\n            header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements, args),\n            showCloseIcon: true,\n            allowDragging: true,\n            // position: position,\n            close: this.dialogClose.bind(this),\n            closeOnEscape: true, width: gObj.editSettings.template ? 'auto' : '330px',\n            target: args.target ? args.target : document.body, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        }, gObj.editSettings.dialog.params));\n        if (!isBlazor()) {\n            args.dialog = this.dialogObj;\n        }\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.dialogObj.appendTo(this.dialog);\n        this.parent.applyBiggerTheme(this.dialogObj.element.parentElement);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n        this.destroy();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings);\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n            var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n            updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings);\n            div.appendChild(form);\n            return div;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editModule.checkColumnIsGrouped(cols[i]) || cols[i].commands || cols[i].commandsTemplate) {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = this.parent.createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, extend, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.parent.notify(events.beforeStartEdit, args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.editSettings.mode === 'Dialog' ?\n            document.querySelector('#' + gObj.element.id + '_dialogEdit_wrapper').querySelector('.e-gridform') :\n            gObj.element.querySelector('.e-gridform');\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute('aria-rowindex'), 10);\n            if (gObj.frozenRows && ((args.requestType === 'add' && gObj.editSettings.newRowPosition === 'Top')\n                || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            }\n            else {\n                fForm = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n                var cellArgs = extend({}, args);\n                cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                if (isNullOrUndefined(cellArgs.element) && frzCols) {\n                    cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                }\n                if (typeof col.edit.write === 'string') {\n                    getObject(col.edit.write, window)(cellArgs);\n                }\n                else {\n                    col.edit.write(cellArgs);\n                }\n                continue;\n            }\n            if (this.parent.editModule.checkColumnIsGrouped(col) || col.commands) {\n                continue;\n            }\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (frzCols && cols.indexOf(col) >= frzCols && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n        if (frzCols !== 0 && !this.parent.allowTextWrap && ((args.requestType === 'add') || args.requestType === 'beginEdit')\n            && this.parent.editSettings.mode !== 'Dialog' && !isNullOrUndefined(form) && !isNullOrUndefined(fForm)) {\n            var mTdElement = (fForm.querySelector('tr').children[0]);\n            var fTdElement = (form.querySelector('tr').children[0]);\n            if (fTdElement.offsetHeight > mTdElement.offsetHeight) {\n                mTdElement.style.height = fTdElement.offsetHeight + 'px';\n            }\n            else {\n                fTdElement.style.height = mTdElement.offsetHeight + 'px';\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            elem.focus();\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        if (this.parent.editSettings.template) {\n            return {};\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (this.parent.editModule.checkColumnIsGrouped(col)) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var cell = cells.filter(function (cell) { return cell.rowID; });\n                var td = cellRenderer.render(cell[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (col.editTemplate) {\n                input = this.parent.createElement('span', { attrs: { 'e-mappinguid': col.uid } });\n                var tempID = this.parent.element.id + col.uid + 'editTemplate';\n                appendChildren(input, col.getEditTemplate()(args.rowData, this.parent, 'editTemplate', tempID));\n                if (isBlazor()) {\n                    updateBlazorTemplate(tempID, 'EditTemplate', col);\n                }\n            }\n            else {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    input = temp(tArgs);\n                }\n                else {\n                    input = col.edit.create(tArgs);\n                }\n                if (typeof input === 'string') {\n                    var div = this.parent.createElement('div');\n                    div.innerHTML = input;\n                    input = div.firstChild;\n                }\n                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n                var complexFieldName = getComplexFieldID(col.field);\n                attributes(isInput ? input.querySelector('input') : input, {\n                    name: complexFieldName, 'e-mappinguid': col.uid,\n                    id: gObj.element.id + complexFieldName\n                });\n                classList(input, ['e-input', 'e-field'], []);\n                if (col.textAlign === 'Right') {\n                    input.classList.add('e-ralign');\n                }\n                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                    (col.isIdentity && args.requestType === 'add')) { // already disabled in cell plugins\n                    input.setAttribute('disabled', '');\n                }\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            chkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n        this.flag = false;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, filtering: this.ddFiltering.bind(this), actionComplete: this.ddActionComplete.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.ddFiltering = function (e) {\n        this.flag = true;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n        if (!this.flag && this.column.dataSource) {\n            this.column.dataSource.dataSource.json = e.result;\n        }\n        this.flag = false;\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n            var dlgObj = document.querySelector('#' + dlgElement.id).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend, Internationalization } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.create = function (args) {\n        var complexFieldName = getComplexFieldID(args.column.field);\n        this.instances = new Internationalization(this.parent.locale);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        var value = this.instances.getNumberParser({ format: 'n' })(element.value);\n        return value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new NumericTextBox(extend({\n            value: parseFloat(getObject(args.column.field, args.rowData)),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n        }, col.edit.params));\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n        this.obj.appendTo(args.element);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID } from '../base/util';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = this.parent.createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + getComplexFieldID(col.field), name: getComplexFieldID(col.field),\n                style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var inputargs = {\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n                placeholder: isInline ? '' : args.column.headerText\n            }\n        };\n        Input.createInput(inputargs, this.parent.createElement);\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend, isBlazor } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    this.parent.selectRow(0);\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                if (isBlazor() && !this.parent.isJsComponent) {\n                    var d = 'data';\n                    e[d] = e[d][0];\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                this.parent.selectRow(this.editRowIndex);\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var _this = this;\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        if (isBlazor()) {\n            var cols = this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    resetBlazorTemplate(gObj.element.id + col.uid, 'Template', this.rowIndex);\n                }\n            }\n        }\n        if (isGroupAdaptive(gObj)) {\n            var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            this.previousData = rObj.data;\n        }\n        else {\n            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        }\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData, target: undefined\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.row = tr;\n        }\n        gObj.trigger(events.beginEdit, args, function (begineditargs) {\n            begineditargs.type = 'actionBegin';\n            gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n                if (!editargs.cancel) {\n                    gObj.isEdit = true;\n                    editargs.row = editargs.row ? editargs.row : tr;\n                    if (gObj.editSettings.mode !== 'Dialog') {\n                        gObj.clearSelection();\n                    }\n                    if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n                        gObj.selectionModule.preventFocus = true;\n                        editargs.row.classList.add('e-dlgeditrow');\n                    }\n                    _this.renderer.update(editargs);\n                    _this.uid = tr.getAttribute('data-uid');\n                    gObj.editModule.applyFormValidation();\n                    editargs.type = 'actionComplete';\n                    gObj.trigger(events.actionComplete, editargs);\n                    _this.args = editargs;\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                    if (isBlazor()) {\n                        _this.parent.notify(events.toolbarRefresh, {});\n                        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n                        _this.parent.notify('start-edit', {});\n                    }\n                }\n            });\n        });\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var _this = this;\n        var gObj = this.parent;\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index]\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        if (args.promise) {\n            args.promise.then(function () { return gObj.refresh(); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            gObj.refresh();\n        }\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var form1 = gObj.editModule.formObj.validate();\n        var form2 = gObj.editModule.mFormObj ? gObj.editModule.mFormObj.validate() : true;\n        return (form1 && form2);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        var isDlg = gObj.editSettings.mode === 'Dialog';\n        var dlgWrapper = document.querySelector('#' + gObj.element.id + '_dialogEdit_wrapper');\n        var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.element.querySelector('.e-gridform');\n        editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n        if (gObj.getFrozenColumns() && gObj.editSettings.mode === 'Normal') {\n            var mForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            if (gObj.frozenRows && mForm) {\n                editedData = gObj.editModule.getCurrentEditedData(mForm, editedData);\n            }\n            else {\n                editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform'), editedData);\n            }\n        }\n        if (isDlg ? dlgWrapper.querySelectorAll('.e-editedrow').length : gObj.element.querySelectorAll('.e-editedrow').length) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n                if (endEditArgs.cancel) {\n                    return;\n                }\n                gObj.showSpinner();\n                gObj.notify(events.updateData, endEditArgs);\n            });\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add') {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n            var rowData = 'rowData';\n            args.data = extend({}, extend({}, args[rowData], args.data), e);\n        }\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        this.refreshRow(args.data);\n        this.updateCurrentViewData(args.data);\n        this.blazorTemplate();\n        this.parent.trigger(events.actionComplete, args);\n        if (isBlazor()) {\n            this.parent.notify(events.toolbarRefresh, {});\n        }\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection)) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n            }\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.blazorTemplate = function () {\n        var cols = this.parent.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[i];\n            if (col.template) {\n                updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n            }\n            if (col.editTemplate) {\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n            }\n        }\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, e);\n        this.parent.hideSpinner();\n        this.parent.log('actionfailure', { error: e });\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            row.refresh(rowObj, this.parent.getColumns(), true);\n            if (frzCols) {\n                var uid = void 0;\n                var tr = this.parent.element.querySelector('[data-uid=' + rowObj.uid + ']');\n                if ((parentsUntil(tr, 'e-frozencontent')) || (parentsUntil(tr, 'e-frozenheader'))) {\n                    uid = this.parent.getMovableRows()[rowObj.index].getAttribute('data-uid');\n                }\n                else {\n                    uid = this.parent.getRows()[rowObj.index].getAttribute('data-uid');\n                }\n                rowObj = this.parent.getRowObjectFromUID(uid);\n                rowObj.changes = data;\n                row.refresh(rowObj, this.parent.columns, true);\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        var _this = this;\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        this.blazorTemplate();\n        gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n            if (_this.parent.editSettings.mode === 'Dialog') {\n                _this.parent.notify(events.dialogDestroy, {});\n            }\n            gObj.isEdit = false;\n            _this.stopEditStatus();\n            closeEditArgs.type = events.actionComplete;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                _this.refreshRow(closeEditArgs.data);\n            }\n            if (!gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n                !gObj.getContentTable().querySelector('tr.e-row')) {\n                gObj.renderModule.emptyRow();\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.selectRow(_this.rowIndex);\n            }\n            gObj.trigger(events.actionComplete, closeEditArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('close-edit', {});\n            }\n        });\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        (gObj.columnModel).forEach(function (col) {\n            if (col.field) {\n                DataUtil.setValue(col.field, col.defaultValue, _this.previousData);\n            }\n        });\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData, target: undefined\n        };\n        gObj.trigger(events.actionBegin, args, function (addArgs) {\n            if (addArgs.cancel) {\n                return;\n            }\n            gObj.isEdit = true;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.clearSelection();\n            }\n            _this.renderer.addNew(addArgs);\n            gObj.editModule.applyFormValidation();\n            addArgs.type = events.actionComplete;\n            addArgs.row = gObj.element.querySelector('.e-addedrow');\n            gObj.trigger(events.actionComplete, addArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n            _this.args = addArgs;\n        });\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getObject(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        var args = {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        };\n        var dataInString = 'data';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            args[dataInString] = args[dataInString][0];\n        }\n        this.parent.notify(events.modelChanged, args);\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var elem = gObj.element.querySelector('.e-addedrow');\n        var mElem;\n        var editMElem;\n        if (gObj.getFrozenColumns()) {\n            mElem = gObj.element.querySelectorAll('.e-addedrow')[1];\n            editMElem = gObj.element.querySelectorAll('.e-editedrow')[1];\n            if (mElem) {\n                remove(mElem);\n            }\n            if (editMElem) {\n                editMElem.classList.remove('e-editedrow');\n            }\n        }\n        if (elem) {\n            remove(elem);\n        }\n        elem = gObj.element.querySelector('.e-editedrow');\n        if (elem) {\n            elem.classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.recordAdded, this.requestSuccess, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.recordAdded, this.requestSuccess);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { remove, classList, updateBlazorTemplate, blazorTemplates, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.editNextValCell, this.editNextValCell, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.editNextValCell, this.editNextValCell);\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            if (this.parent.isEdit) {\n                this.saveCell();\n                this.editNextValCell();\n            }\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))\n            && !target.parentElement.classList.contains('e-editedrow')) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field, this.isAddRow(parseInt(tr.getAttribute('aria-rowindex'), 10)));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenColumns();\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            if (this.parent.isEdit && clear) {\n                this.saveCell();\n            }\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!this.parent.element.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    if (isEdit || this.parent.isLastCellPrimaryKey) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    if (isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.closeEdit = function () {\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        var argument = { cancel: false, batchChanges: this.getBatchChanges() };\n        gObj.notify(events.beforeBatchCancel, argument);\n        if (argument.cancel) {\n            return;\n        }\n        if (gObj.frozenColumns && rows.length < this.parent.currentViewData.length * 2) {\n            rows.push.apply(rows, this.parent.getMovableRowsObject());\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n                }\n            }\n        }\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tr;\n        var mTr;\n        var movObj;\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        gObj.clearSelection();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDirty) {\n                if (gObj.frozenColumns) {\n                    movObj = gObj.getMovableRowsObject()[rows[i].index];\n                    movObj.isDirty = true;\n                }\n                tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n                if (gObj.frozenRows && !tr) {\n                    tr = gObj.getHeaderContent().querySelector('[data-uid=' + rows[i].uid + ']');\n                }\n                if (gObj.frozenColumns) {\n                    if (gObj.frozenRows) {\n                        mTr = gObj.getHeaderContent().querySelector('.e-movableheader')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                        if (!mTr) {\n                            mTr = gObj.getContent().querySelector('.e-movablecontent')\n                                .querySelector('[data-uid=' + rows[i].uid + ']');\n                        }\n                    }\n                    else {\n                        mTr = gObj.getContent().querySelector('.e-movablecontent')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                }\n                if (tr || mTr) {\n                    if (tr && tr.classList.contains('e-insertedrow') || mTr && mTr.classList.contains('e-insertedrow')) {\n                        if (tr) {\n                            remove(tr);\n                        }\n                        if (mTr && (gObj.frozenColumns || gObj.frozenRows)) {\n                            remove(mTr);\n                        }\n                        this.removeRowObjectFromUID(rows[i].uid);\n                        i--;\n                    }\n                    else {\n                        refreshForeignData(rows[i], this.parent.getForeignKeyColumns(), rows[i].data);\n                        delete rows[i].changes;\n                        delete rows[i].edit;\n                        rows[i].isDirty = false;\n                        var ftr = mTr ? mTr : tr;\n                        classList(ftr, [], ['e-hiddenrow', 'e-updatedtd']);\n                        rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n                        if (this.parent.aggregates.length > 0) {\n                            var type = 'type';\n                            var editType = [];\n                            editType[type] = 'cancel';\n                            this.parent.notify(events.refreshFooterRenderer, editType);\n                            if (this.parent.groupSettings.columns.length > 0) {\n                                this.parent.notify(events.groupAggregates, editType);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (!gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.renderModule.renderEmptyRow();\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n        if (gObj.frozenColumns) {\n            rows.splice(this.parent.getMovableRowsObject().length, rows.length);\n        }\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        this.bulkDelete(fieldname, data);\n        if (this.parent.aggregates.length > 0) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n            if (this.parent.groupSettings.columns.length > 0) {\n                this.parent.notify(events.groupAggregates, {});\n            }\n        }\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var gObj = this.parent;\n        var deletedRecords = 'deletedRecords';\n        if (gObj.isCheckBoxSelection) {\n            var checkAllBox = gObj.element.querySelector('.e-checkselectall').parentElement;\n            if (checkAllBox.classList.contains('e-checkbox-disabled') &&\n                gObj.pageSettings.totalRecordsCount > gObj.currentViewData.length) {\n                removeClass([checkAllBox], ['e-checkbox-disabled']);\n            }\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    blazorTemplates[this.parent.element.id + col.uid] = [];\n                    resetBlazorTemplate(this.parent.element.id + col.uid, 'Template');\n                }\n            }\n        }\n        this.saveCell();\n        if (gObj.isEdit || this.editNextValCell() || gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        if (this.parent.selectionSettings.type === 'Multiple' && changes[deletedRecords].length) {\n            changes[deletedRecords] = changes[deletedRecords].concat(this.removeSelectedData);\n            this.removeSelectedData = [];\n        }\n        var original = {\n            changedRecords: this.parent.getRowsObject()\n                .filter(function (row) { return row.isDirty && ['add', 'delete'].indexOf(row.edit) === -1; })\n                .map(function (row) { return row.data; })\n        };\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args, function (beforeBatchSaveArgs) {\n            if (beforeBatchSaveArgs.cancel) {\n                return;\n            }\n            gObj.showSpinner();\n            gObj.notify(events.bulkSave, { changes: changes, original: original });\n        });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        var mRows = this.parent.getMovableRowsObject();\n        var frzCols = this.parent.getFrozenColumns();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (frzCols) {\n                this.mergeBatchChanges(row, mRows[row.index], frzCols);\n            }\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    BatchEdit.prototype.mergeBatchChanges = function (row, mRow, frzCols) {\n        if (row.isDirty) {\n            if (mRow.isDirty) {\n                var i_1 = 0;\n                Object.keys(row.changes).forEach(function (key) {\n                    if (i_1 >= frzCols) {\n                        row.changes[key] = mRow.changes[key];\n                    }\n                    i_1++;\n                });\n            }\n        }\n        else if (mRow.isDirty) {\n            row.changes = mRow.changes;\n            row.isDirty = mRow.isDirty;\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        rows.splice(i, 1);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        var isTop = this.parent.editSettings.newRowPosition === 'Top';\n        isTop ? this.parent.getRowsObject().unshift(row) :\n            this.parent.getRowsObject().push(row);\n        var mRow = this.parent.getMovableRowsObject();\n        if (this.parent.getFrozenColumns() && !mRow.length) {\n            isTop ? mRow.unshift(row) : mRow.push(row);\n        }\n    };\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var _this = this;\n        this.removeSelectedData = [];\n        var gObj = this.parent;\n        if (data) {\n            gObj.selectRow(this.getIndexFromData(data));\n        }\n        var index = gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.row = data ? gObj.getRows()[index] : selectedRows[0];\n            if (!args.row) {\n                return;\n            }\n        }\n        gObj.trigger(events.beforeBatchDelete, args, function (beforeBatchDeleteArgs) {\n            if (beforeBatchDeleteArgs.cancel) {\n                return;\n            }\n            beforeBatchDeleteArgs.row = beforeBatchDeleteArgs.row ?\n                beforeBatchDeleteArgs.row : data ? gObj.getRows()[index] : selectedRows[0];\n            if (_this.parent.frozenColumns || selectedRows.length === 1) {\n                var uid = beforeBatchDeleteArgs.row.getAttribute('data-uid');\n                if (beforeBatchDeleteArgs.row.classList.contains('e-insertedrow')) {\n                    _this.removeRowObjectFromUID(uid);\n                    remove(beforeBatchDeleteArgs.row);\n                }\n                else {\n                    var rowObj = gObj.getRowObjectFromUID(uid);\n                    rowObj.isDirty = true;\n                    rowObj.edit = 'delete';\n                    classList(beforeBatchDeleteArgs.row, ['e-hiddenrow', 'e-updatedtd'], []);\n                    if (gObj.getFrozenColumns()) {\n                        classList(data ? gObj.getMovableRows()[index] : selectedRows[1], ['e-hiddenrow', 'e-updatedtd'], []);\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getMovableDataRows().length >= gObj.frozenRows) {\n                            gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n                                .appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                            gObj.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody')\n                                .appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                        }\n                    }\n                    else if (gObj.frozenRows && index < gObj.frozenRows && gObj.getDataRows().length >= gObj.frozenRows) {\n                        gObj.getHeaderContent().querySelector('tbody').appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                    }\n                }\n                delete beforeBatchDeleteArgs.row;\n            }\n            else {\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uniqueid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uniqueid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        var selectedRow = gObj.getRowObjectFromUID(uniqueid);\n                        selectedRow.isDirty = true;\n                        selectedRow.edit = 'delete';\n                        delete selectedRows[i];\n                    }\n                }\n            }\n            _this.refreshRowIdx();\n            _this.removeSelectedData = gObj.getSelectedRecords();\n            gObj.clearSelection();\n            gObj.selectRow(index);\n            gObj.trigger(events.batchDelete, beforeBatchDeleteArgs);\n            gObj.notify(events.batchDelete, { rows: _this.parent.getRowsObject() });\n            gObj.notify(events.toolbarRefresh, {});\n        });\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var rows = [];\n        var mRows = [];\n        var nonMovableRows = [];\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.frozenRows) {\n            rows = [].slice.call(this.parent.getHeaderTable().querySelector('tbody').children);\n            if (frzCols) {\n                mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n                for (var i = 0; i < mRows.length; i++) {\n                    nonMovableRows[i] = this.parent.createElement('tr', { className: 'emptynonmv' });\n                }\n            }\n        }\n        if (frzCols) {\n            mRows = mRows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n            nonMovableRows = nonMovableRows.concat([].slice.call(this.parent.element.querySelector('.e-movablecontent').querySelector('tbody').children));\n        }\n        rows = rows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                rows[i].setAttribute('aria-rowindex', j.toString());\n                if (frzCols) {\n                    mRows[i].setAttribute('aria-rowindex', j.toString());\n                    if (nonMovableRows[i].classList.contains('e-row')) {\n                        nonMovableRows[i].setAttribute('aria-rowindex', j.toString());\n                    }\n                }\n                j++;\n            }\n            else {\n                rows[i].removeAttribute('aria-rowindex');\n                if (frzCols) {\n                    mRows[i].removeAttribute('aria-rowindex');\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var _this = this;\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args, function (beforeBatchAddArgs) {\n            if (beforeBatchAddArgs.cancel) {\n                return;\n            }\n            _this.isAdded = true;\n            gObj.clearSelection();\n            var mTr;\n            var mTbody;\n            var row = new RowRenderer(_this.serviceLocator, null, _this.parent);\n            var model = new RowModelGenerator(_this.parent);\n            var modelData = model.generateRows([beforeBatchAddArgs.defaultData]);\n            var tr = row.render(modelData[0], gObj.getColumns());\n            var col;\n            var index;\n            for (var i = 0; i < _this.parent.groupSettings.columns.length; i++) {\n                tr.insertBefore(_this.parent.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n                modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            var tbody = gObj.getContentTable().querySelector('tbody');\n            tr.classList.add('e-insertedrow');\n            if (tbody.querySelector('.e-emptyrow')) {\n                tbody.querySelector('.e-emptyrow').remove();\n            }\n            if (gObj.getFrozenColumns()) {\n                mTr = _this.renderMovable(tr);\n                if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                    mTbody = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n                }\n                else {\n                    mTbody = gObj.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                }\n                _this.parent.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mTr, mTbody.firstChild) : mTbody.appendChild(mTr);\n                addClass(mTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n                if (_this.parent.height === 'auto') {\n                    _this.parent.notify(events.frozenHeight, {});\n                }\n            }\n            if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                tbody = gObj.getHeaderContent().querySelector('tbody');\n            }\n            else {\n                tbody = gObj.getContent().querySelector('tbody');\n            }\n            _this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(tr, tbody.firstChild) : tbody.appendChild(tr);\n            addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            modelData[0].isDirty = true;\n            modelData[0].changes = extend({}, {}, modelData[0].data, true);\n            modelData[0].edit = 'add';\n            _this.addRowObject(modelData[0]);\n            _this.refreshRowIdx();\n            _this.focus.forgetPrevious();\n            gObj.notify(events.batchAdd, { rows: _this.parent.getRowsObject(), args: { isFrozen: _this.parent.getFrozenColumns() } });\n            var changes = _this.getBatchChanges();\n            var addedRecords = 'addedRecords';\n            _this.parent.editSettings.newRowPosition === 'Top' ? gObj.selectRow(0) :\n                gObj.selectRow(_this.parent.getCurrentViewRecords().length + changes[addedRecords].length - 1);\n            if (!data) {\n                index = _this.findNextEditableCell(0, true);\n                col = gObj.getColumns()[index];\n                _this.parent.editSettings.newRowPosition === 'Top' ? _this.editCell(0, col.field, true) :\n                    _this.editCell(_this.parent.getCurrentViewRecords().length + changes[addedRecords].length - 1, col.field, true);\n            }\n            if (_this.parent.aggregates.length > 0 && data) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n            }\n            var args1 = {\n                defaultData: beforeBatchAddArgs.defaultData, row: tr,\n                columnObject: col, columnIndex: index, primaryKey: beforeBatchAddArgs.primaryKey, cell: tr.cells[index]\n            };\n            gObj.trigger(events.batchAdd, args1);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n        });\n    };\n    BatchEdit.prototype.renderMovable = function (ele) {\n        var mEle = ele.cloneNode(true);\n        for (var i = 0; i < this.parent.frozenColumns; i++) {\n            mEle.removeChild(mEle.children[0]);\n        }\n        for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n            ele.removeChild(ele.children[ele.childElementCount - 1]);\n        }\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd, isValOnly) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        var validation;\n        for (var i = columnIndex; i < endIndex; i++) {\n            validation = isValOnly ? isNullOrUndefined(cols[i].validationRules) : false;\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey) && !validation) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = (gObj.columnModel); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.field) {\n                setValue(col.field, col.defaultValue ? col.defaultValue : dValues[col.type], data);\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.getAttribute('index'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var _this = this;\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (isBlazor() && col.template && !isAdd) {\n            resetBlazorTemplate(this.parent.element.id + col.uid, 'Template', index);\n        }\n        if (gObj.editSettings.allowEditing && col.allowEditing) {\n            if (gObj.isEdit && !(this.cellDetails.column.field === field\n                && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index))) {\n                this.saveCell();\n                if (this.cellDetails.rowIndex === index && this.cellDetails.column.field === field) {\n                    return;\n                }\n            }\n            if (gObj.isEdit) {\n                return;\n            }\n            var row_1;\n            var rowData_1;\n            var mRowData = void 0;\n            var colIdx = gObj.getColumnIndexByField(field);\n            var frzCols = gObj.getFrozenColumns();\n            if (frzCols && colIdx >= frzCols) {\n                row_1 = gObj.getMovableDataRows()[index];\n                mRowData = this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[index].getAttribute('data-uid'));\n                rowData_1 = mRowData.changes ? extend({}, {}, mRowData.changes, true) : extend({}, {}, this.getDataByIndex(index), true);\n            }\n            else {\n                row_1 = gObj.getDataRows()[index];\n                rowData_1 = extend({}, {}, this.getDataByIndex(index), true);\n            }\n            if ((keys[0] === col.field && !row_1.classList.contains('e-insertedrow')) || col.columns ||\n                (col.isPrimaryKey && col.isIdentity)) {\n                this.parent.isLastCellPrimaryKey = true;\n                return;\n            }\n            this.parent.isLastCellPrimaryKey = false;\n            var rowObj = gObj.getRowObjectFromUID(row_1.getAttribute('data-uid'));\n            var cells_1 = [].slice.apply(row_1.cells);\n            var args = {\n                columnName: col.field, columnObject: col, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n                primaryKey: keys, rowData: rowData_1,\n                validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n                value: getObject(col.field, rowData_1),\n                type: !isAdd ? 'edit' : 'add', cancel: false,\n                foreignKeyData: rowObj && rowObj.foreignKeyData\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                args.cell = cells_1[this.getColIndex(cells_1, this.getCellIdx(col.uid))];\n                args.row = row_1;\n                if (!args.cell) {\n                    return;\n                }\n            }\n            gObj.trigger(events.cellEdit, args, function (cellEditArgs) {\n                if (cellEditArgs.cancel) {\n                    return;\n                }\n                cellEditArgs.cell = cellEditArgs.cell ? cellEditArgs.cell : cells_1[_this.getColIndex(cells_1, _this.getCellIdx(col.uid))];\n                cellEditArgs.row = cellEditArgs.row ? cellEditArgs.row : row_1;\n                _this.cellDetails = {\n                    rowData: rowData_1, column: col, value: cellEditArgs.value, isForeignKey: cellEditArgs.isForeignKey, rowIndex: index,\n                    cellIndex: parseInt(cellEditArgs.cell.getAttribute('aria-colindex'), 10),\n                    foreignKeyData: cellEditArgs.foreignKeyData\n                };\n                if (cellEditArgs.cell.classList.contains('e-updatedtd')) {\n                    _this.isColored = true;\n                    cellEditArgs.cell.classList.remove('e-updatedtd');\n                }\n                gObj.isEdit = true;\n                gObj.clearSelection();\n                if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                    gObj.selectRow(_this.cellDetails.rowIndex, true);\n                }\n                _this.renderer.update(cellEditArgs);\n                _this.parent.notify(events.batchEditFormRendered, cellEditArgs);\n                _this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n                gObj.editModule.applyFormValidation([col]);\n                _this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n            });\n        }\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var col = this.parent.getColumnByField(field);\n        var index = this.parent.getColumnIndexByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = this.parent.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[index];\n            if (this.parent.getFrozenColumns()) {\n                var cells = [].slice.call(this.parent.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')).concat([].slice.call(this.parent.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')));\n                td = cells[index];\n            }\n            var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n        if (!rowObj.changes) {\n            rowObj.changes = extend({}, {}, rowObj.data, true);\n        }\n        if (!isNullOrUndefined(field)) {\n            DataUtil.setValue(field, value, rowObj.changes);\n        }\n        if (rowObj.data[field] !== value) {\n            rowObj.isDirty = true;\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        this.setChanges(rowObj, column.field, value);\n        var frzCols = this.parent.getFrozenColumns();\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && this.getCellIdx(column.uid) >= frzCols && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - (this.getCellIdx(column.uid) >= frzCols ? frzCols : 0)], rowObj.changes, { 'index': this.getCellIdx(column.uid) });\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.editNextValCell = function () {\n        var gObj = this.parent;\n        if (this.isAdded && !gObj.isEdit) {\n            for (var i = this.cellDetails.cellIndex; i < gObj.getColumns().length; i++) {\n                if (gObj.isEdit) {\n                    return;\n                }\n                var index = this.findNextEditableCell(this.cellDetails.cellIndex + 1, true, true);\n                var col = gObj.getColumns()[index];\n                if (col) {\n                    this.editCell(0, col.field, true);\n                    this.saveCell();\n                }\n            }\n            if (!gObj.isEdit) {\n                this.isAdded = false;\n            }\n        }\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        var tr = parentsUntil(this.form, 'e-row');\n        var column = this.cellDetails.column;\n        var obj = {};\n        obj[column.field] = this.cellDetails.rowData[column.field];\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, obj);\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        var value = getObject(column.field, cloneEditedData);\n        if (!isNullOrUndefined(column.field)) {\n            setValue(column.field, value, editedData);\n        }\n        var args = {\n            columnName: column.field,\n            value: getObject(column.field, editedData),\n            rowData: this.cellDetails.rowData,\n            previousValue: this.cellDetails.value,\n            columnObject: column,\n            isForeignKey: this.cellDetails.isForeignKey, cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = this.form.parentElement;\n        }\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args, this.successCallBack(args, tr, column));\n            gObj.notify(events.batchForm, { formObj: this.form });\n        }\n        else {\n            this.successCallBack(args, tr, column)(args);\n        }\n    };\n    BatchEdit.prototype.successCallBack = function (cellSaveArgs, tr, column) {\n        var _this = this;\n        return function (cellSaveArgs) {\n            var gObj = _this.parent;\n            cellSaveArgs.cell = cellSaveArgs.cell ? cellSaveArgs.cell : _this.form.parentElement;\n            if (cellSaveArgs.cancel) {\n                return;\n            }\n            gObj.editModule.destroyForm();\n            gObj.isEdit = false;\n            gObj.editModule.destroyWidgets([column]);\n            if (isBlazor() && column.template && !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow')) {\n                updateBlazorTemplate(gObj.element.id + column.uid, 'Template', column, false);\n            }\n            _this.parent.notify(events.tooltipDestroy, {});\n            _this.refreshTD(cellSaveArgs.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), cellSaveArgs.value);\n            removeClass([tr], ['e-editedrow', 'e-batchrow']);\n            removeClass([cellSaveArgs.cell], ['e-editedbatchcell', 'e-boolcell']);\n            if (!isNullOrUndefined(cellSaveArgs.value) && cellSaveArgs.value.toString() ===\n                (!isNullOrUndefined(_this.cellDetails.value) ? _this.cellDetails.value : '').toString() && !_this.isColored\n                || (isNullOrUndefined(cellSaveArgs.value) && isNullOrUndefined(_this.cellDetails.value) &&\n                    !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow'))) {\n                cellSaveArgs.cell.classList.remove('e-updatedtd');\n            }\n            gObj.trigger(events.cellSaved, cellSaveArgs);\n            gObj.notify(events.toolbarRefresh, {});\n            _this.isColored = false;\n            if (_this.parent.aggregates.length > 0) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n                if (_this.parent.groupSettings.columns.length > 0 && !_this.isAddRow(_this.cellDetails.rowIndex)) {\n                    _this.parent.notify(events.groupAggregates, {});\n                }\n            }\n        };\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if ((e.action === 'tab' || e.action === 'shiftTab') && this.parent.isEdit) {\n            var gObj = this.parent;\n            var rowcell = parentsUntil(e.target, 'e-rowcell');\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    var columnIndex = e.action === 'tab' ? visibleColumns.length - 1 : 0;\n                    if (visibleColumns[columnIndex].field === cell.getAttribute('id').slice(this.parent.element.id.length)) {\n                        if (this.cellDetails.rowIndex !== gObj.getRows().length - 1) {\n                            this.saveCell();\n                        }\n                        else {\n                            if (gObj.editSettings.newRowPosition === 'Top') {\n                                gObj.editSettings.newRowPosition = 'Bottom';\n                                this.addRecord();\n                                gObj.editSettings.newRowPosition = 'Top';\n                            }\n                            else {\n                                this.addRecord();\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addCancelWhilePaging = function () {\n        if (this.validateFormObj()) {\n            this.parent.notify(events.destroyForm, {});\n            this.parent.isEdit = false;\n            this.isColored = false;\n        }\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","/**\n * `TemplateEditCell` is used to handle template cell.\n * @hidden\n */\nvar TemplateEditCell = /** @class */ (function () {\n    function TemplateEditCell(parent) {\n        this.parent = parent;\n    }\n    TemplateEditCell.prototype.read = function (element, value) {\n        return value;\n    };\n    TemplateEditCell.prototype.write = function () {\n        //\n    };\n    TemplateEditCell.prototype.destroy = function () {\n        //\n    };\n    return TemplateEditCell;\n}());\nexport { TemplateEditCell };\n","import { EventHandler, closest } from '@syncfusion/ej2-base';\nimport { extend, getValue, resetBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, getComplexFieldID, setComplexFieldID, getScrollBarWidth } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { TemplateEditCell } from '../renderer/template-edit-cell';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        var _this = this;\n        this.parent.columnModel.forEach(function (col) {\n            if (_this.parent.editSettings.template || col.editTemplate) {\n                var templteCell = 'templateedit';\n                col.edit = extend(new Edit.editCellType[templteCell](_this.parent), col.edit || {});\n            }\n            else {\n                col.edit = extend(new Edit.editCellType[col.editType && Edit.editCellType[col.editType] ?\n                    col.editType : 'defaultedit'](_this.parent, _this.serviceLocator), col.edit || {});\n            }\n        });\n        this.parent.log('primary_column_missing');\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    Edit.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n    };\n    Edit.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n    };\n    Edit.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.parent.notify(events.doubleTap, e);\n            }\n        }\n    };\n    Edit.prototype.getUserAgent = function () {\n        var userAgent = window.navigator.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            this.parent.notify('start-edit', {});\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.editModule.closeEdit();\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            this.parent.notify('close-edit', {});\n        }\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        this.editModule.addRecord(data, index);\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            this.parent.notify('start-add', {});\n        }\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.parent.editModule.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n            if (isNullOrUndefined(this.formObj) || this.formObj.validate()) {\n                this.showDialog('BatchSaveConfirm', this.dialogObj);\n                return;\n            }\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') || value === true ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepickeredit' && col.editType !== 'datetimepickeredit' && value && value.length) {\n                    val = new Date(value);\n                }\n                else if (value === '') {\n                    val = null;\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = this.parent.createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        var isStringTemplate = 'isStringTemplate';\n        obj[isStringTemplate] = true;\n        obj.appendTo(div);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                if (this.parent.editSettings.mode === 'Batch') {\n                    this.editModule.addCancelWhilePaging();\n                }\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.off(events.initialEnd, this.unwireEvents);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            [].slice.call(form.elements).forEach(function (element) {\n                if (element.hasAttribute('name')) {\n                    var field = setComplexFieldID(element.getAttribute('name'));\n                    var column = gObj.getColumnByField(field) || { field: field, type: element.getAttribute('type') };\n                    var value = void 0;\n                    if (column.type === 'checkbox' || column.type === 'boolean') {\n                        value = element.checked;\n                    }\n                    else if (element.value) {\n                        value = element.value;\n                        if (element.ej2_instances &&\n                            element.ej2_instances.length &&\n                            !isNullOrUndefined(element.ej2_instances[0].value)) {\n                            element.blur();\n                            value = element.ej2_instances[0].value;\n                        }\n                    }\n                    if (column.edit && typeof column.edit.read === 'string') {\n                        value = getValue(column.edit.read, window)(element, value);\n                    }\n                    else if (column.edit && column.edit.read) {\n                        value = column.edit.read(element, value);\n                    }\n                    value = gObj.editModule.getValueFromType(column, value);\n                    DataUtil.setValue(column.field, value, editedData);\n                }\n            });\n            return editedData;\n        }\n        gObj.columnModel.filter(function (col) { return col.editTemplate; }).forEach(function (col) {\n            if (form[getComplexFieldID(col.field)]) {\n                var inputElements = [].slice.call(form[getComplexFieldID(col.field)]);\n                inputElements = inputElements.length ? inputElements : [form[getComplexFieldID(col.field)]];\n                inputElements.forEach(function (input) {\n                    var value = _this.getValue(col, input, editedData);\n                    DataUtil.setValue(col.field, value, editedData);\n                });\n            }\n        });\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            if (col && col.field) {\n                var value = this.getValue(col, inputs[i], editedData);\n                DataUtil.setValue(col.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    Edit.prototype.getValue = function (col, input, editedData) {\n        var value = input.value;\n        var gObj = this.parent;\n        var temp = col.edit.read;\n        if (col.type === 'checkbox' || col.type === 'boolean') {\n            value = input.checked;\n        }\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n            value = gObj.editModule.getValueFromType(col, (temp)(input, value));\n        }\n        else {\n            value = gObj.editModule.getValueFromType(col, col.edit.read(input, value));\n        }\n        if (isNullOrUndefined(editedData[col.field]) && value === '') {\n            value = editedData[col.field];\n        }\n        return value;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save'];\n        if (this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n            && restrictedRequestTypes.indexOf(e.requestType) === -1) {\n            this.destroyWidgets();\n            this.destroyForm();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            this.parent.destroyTemplate(['editSettingsTemplate']);\n        }\n        cols = cols ? cols : this.parent.getColumns();\n        if (cols.some(function (column) { return !isNullOrUndefined(column.editTemplate); })) {\n            this.parent.destroyTemplate(['editTemplate']);\n        }\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            var temp = col.edit.destroy;\n            if (isBlazor() && col.editTemplate) {\n                resetBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate');\n            }\n            if (col.edit.destroy) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp();\n                }\n                else {\n                    col.edit.destroy();\n                }\n            }\n        }\n        [].slice.call(this.formObj.element.elements).forEach(function (element) {\n            if (element.hasAttribute('name')) {\n                if (element.ej2_instances &&\n                    element.ej2_instances.length &&\n                    !element.ej2_instances[0].isDestroyed) {\n                    element.ej2_instances[0].destroy();\n                }\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        this.unwireEvents();\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, 'e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, 'e-gridcontent') || (this.parent.frozenRows\n                        && parentsUntil(e.target, 'e-headercontent')))\n                    && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                this.closeEdit();\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var form = this.parent.editSettings.mode !== 'Dialog' ?\n            gObj.element.querySelector('.e-gridform') :\n            document.querySelector('#' + gObj.element.id + '_dialogEdit_wrapper').querySelector('.e-gridform');\n        var mForm = gObj.element.querySelectorAll('.e-gridform')[1];\n        var rules = {};\n        var mRules = {};\n        cols = cols ? cols : gObj.getColumns();\n        cols.forEach(function (col, index) {\n            if (!col.visible) {\n                return;\n            }\n            if (index < frzCols && col.validationRules) {\n                rules[getComplexFieldID(col.field)] = col.validationRules;\n            }\n            else if (index >= frzCols && col.validationRules) {\n                mRules[getComplexFieldID(col.field)] = col.validationRules;\n            }\n        });\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n        }\n        else {\n            rules = extend(rules, mRules);\n        }\n        this.parent.editModule.formObj = this.createFormObj(form, rules);\n    };\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            locale: this.parent.locale,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                _this.valErrorPlacement(inputElement, error);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.outerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        if (this.parent.editSettings.mode !== 'Dialog') {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(inputElement, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        return this.parent.editSettings.mode !== 'Dialog' ? isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable() :\n            document.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var gcontent = this.parent.getContent().firstElementChild;\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight || gcontent.scrollWidth > gcontent.clientWidth;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isFHdr;\n        if (isInline) {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(element, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        var fCont = this.parent.getContent().querySelector('.e-frozencontent');\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            document.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = closest(element, 'td');\n        var inputClient = input ? input.getBoundingClientRect() : element.parentElement.getBoundingClientRect();\n        var div = this.parent.createElement('div', {\n            className: 'e-tooltip-wrap e-lib e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (this.parent.getFrozenColumns() ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + inputClient.width + 'px;text-align:center;'\n        });\n        if (isInline && client.left < left) {\n            div.style.left = parseInt(div.style.left, 10) - client.left + left + 'px';\n        }\n        var content = this.parent.createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var validationForBottomRowPos;\n        if (this.parent.editSettings.newRowPosition === 'Bottom' && this.parent.editSettings.mode !== 'Dialog' &&\n            ((this.editModule.args && this.editModule.args.requestType === 'add') || this.editModule.isAdded)) {\n            validationForBottomRowPos = true;\n        }\n        var arrow;\n        if (validationForBottomRowPos) {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-bottom' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-bottom' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-bottom' }));\n        }\n        else {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        }\n        div.appendChild(content);\n        div.appendChild(arrow);\n        this.formObj.element.appendChild(div);\n        if (isInline && gcontent.getBoundingClientRect().bottom < inputClient.bottom + inputClient.height) {\n            gcontent.scrollTop = gcontent.scrollTop + div.offsetHeight + arrow.scrollHeight;\n        }\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < inputClient.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        if (!isScroll && isInline && !this.parent.allowPaging) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n        if (validationForBottomRowPos) {\n            if (isScroll) {\n                var scrollElem = this.parent.getContent().firstElementChild;\n                var scrollWidth = scrollElem.scrollWidth > scrollElem.offsetWidth ? getScrollBarWidth() : 0;\n                div.style.bottom = (this.parent.height - this.parent.getContentTable().offsetHeight\n                    - scrollWidth) + inputClient.height + 9 + 'px';\n            }\n            else {\n                div.style.bottom = inputClient.height + 9 + 'px';\n            }\n            div.style.top = null;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.checkColumnIsGrouped = function (col) {\n        return !col.visible && !(this.parent.groupSettings.columns.indexOf(col.field) > -1);\n    };\n    /**\n     * @hidden\n     */\n    Edit.AddEditors = function (editors) {\n        Edit.editCellType = extend(Edit.editCellType, editors);\n    };\n    Edit.editCellType = {\n        'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n        'datepickeredit': DatePickerEditCell, 'datetimepickeredit': DatePickerEditCell,\n        'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell,\n        'templateedit': TemplateEditCell\n    };\n    return Edit;\n}());\nexport { Edit };\n/** @hidden */\nexport var Global;\n(function (Global) {\n    Global.timer = null;\n})(Global || (Global = {}));\n","import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.prevShowedCols = [];\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n        else {\n            removeClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args1 = {\n                requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n                columns: this.getColumns(), cancel: false, searchOperator: this.searchOperator\n            };\n            this.parent.trigger(events.beforeOpenColumnChooser, args1);\n            if (args1.cancel) {\n                return;\n            }\n            this.searchOperator = args1.searchOperator;\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearActions.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        var uncheckedLength = this.ulElement.querySelectorAll('.e-uncheck').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < this.parent.getColumns().length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                var params = {\n                    requestType: 'columnstate', element: this.parent.element,\n                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n                };\n                this.parent.trigger(events.actionComplete, params);\n                this.getShowHideService.setVisible(this.stateChangeColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n            }\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            if (currentCol.type !== 'checkbox') {\n                currentCol.visible = state;\n            }\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCbox = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCbox) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var _this = this;\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!elem.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            this.updateIntermediateBtn();\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumns();\n            if (columnUid === 'grid-selectAll') {\n                column.forEach(function (col) {\n                    if (col.showInColumnChooser) {\n                        _this.checkstatecolumn(checkstate, col.uid);\n                    }\n                });\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var cnt = this.ulElement.children.length - 1;\n        var className = [];\n        var elem = this.ulElement.children[0].querySelector('.e-frame');\n        var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlgObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var cBoxes = [].slice.call(this.ulElement.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var searchValue = this.dlgObj.element.querySelector('.e-cc.e-input').value;\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[i].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1) {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        var selected;\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = this.parent.element.querySelectorAll('.e-cc-chbox');\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var cclist = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n        if (gdCol.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            cclist.appendChild(selectAll);\n            this.ulElement.appendChild(cclist);\n        }\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            if (column.visible) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue, createElement } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query } from '@syncfusion/ej2-data';\nimport { getForeignData, measureColumnDepth, getUid } from '../base/util';\nimport { Grid } from '../base/grid';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        return data.isRemote() ?\n            data.generateQuery(true).requiresCount().take(parent.pageSettings.totalRecordsCount) :\n            data.generateQuery(true).requiresCount();\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getGridRowModel = function (columns, dataSource, gObj, startIndex) {\n        if (startIndex === void 0) { startIndex = 0; }\n        var rows = [];\n        var length = dataSource.length;\n        if (length) {\n            for (var i = 0; i < length; i++, startIndex++) {\n                var options = { isExpand: false };\n                options.data = dataSource[i];\n                options.index = startIndex;\n                if (gObj.childGrid) {\n                    if (gObj.hierarchyPrintMode === 'All') {\n                        options.isExpand = true;\n                    }\n                    else if (gObj.hierarchyPrintMode === 'Expanded' &&\n                        this.parent.expandedRows && this.parent.expandedRows[startIndex]) {\n                        options.isExpand = gObj.expandedRows[startIndex].isExpand;\n                    }\n                }\n                var row = new Row(options);\n                row.cells = this.generateCells(columns, gObj);\n                rows.push(row);\n            }\n            this.processColumns(rows);\n        }\n        return rows;\n    };\n    ExportHelper.prototype.generateCells = function (columns, gObj) {\n        var cells = [];\n        if (gObj.childGridLevel) {\n            var len = gObj.childGridLevel;\n            for (var i = 0; len > i; i++) {\n                cells.push(this.generateCell({}, CellType.Indent));\n            }\n        }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            cells.push(this.generateCell(col, CellType.Data));\n        }\n        return cells;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            fColumns.forEach(function (col) {\n                columnPromise.push(col.dataSource.executeQuery(new Query()));\n            });\n            promise = Promise.all(columnPromise).then(function (e) {\n                fColumns.forEach(function (col, index) {\n                    _this.foreignKeyData[col.field] = e[index].result;\n                });\n                // tslint:disable-next-line:no-any\n            });\n        }\n        return promise;\n    };\n    ExportHelper.prototype.getHeaders = function (columns, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        this.colDepth = measureColumnDepth(columns);\n        var rows = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows);\n        return { rows: rows, columns: this.generateActualColumns(columns) };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (columns, actualColumns) {\n        if (actualColumns === void 0) { actualColumns = []; }\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var column = columns_2[_i];\n            if (column.commands) {\n                continue;\n            }\n            if (!column.columns) {\n                if (column.visible || this.hideColumnInclude) {\n                    actualColumns.push(column);\n                }\n            }\n            else {\n                if (column.visible || this.hideColumnInclude) {\n                    var colSpan = this.getCellCount(column, 0);\n                    if (colSpan !== 0) {\n                        this.generateActualColumns(column.columns, actualColumns);\n                    }\n                }\n            }\n        }\n        return actualColumns;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows) {\n        var columns = this.parent.columns;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0);\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index) {\n        if (!cols.columns && (cols.visible !== false || this.hideColumnInclude) && !cols.commands) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, index));\n        }\n        else if (cols.columns) {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isIgnoreFirstCell = true;\n                }\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, rowIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': cellType === CellType.Data,\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'index': rowIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = [];\n        if (gridObj.enableColumnVirtualization) {\n            columnIndexes = gridObj.getColumnIndexesInView();\n        }\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (gridObj.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.splice(0, 0, this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    ExportHelper.prototype.checkAndExport = function (gridPool, globalResolve) {\n        var bool = Object.keys(gridPool).some(function (key) {\n            return !gridPool[key];\n        });\n        if (!bool) {\n            globalResolve();\n        }\n    };\n    ExportHelper.prototype.failureHandler = function (gridPool, childGridObj, resolve) {\n        var _this = this;\n        return function () {\n            gridPool[childGridObj.id] = true;\n            _this.checkAndExport(gridPool, resolve);\n        };\n    };\n    // tslint:disable-next-line:no-any\n    ExportHelper.prototype.createChildGrid = function (gObj, row, exportType, gridPool) {\n        var childGridObj = new Grid(this.parent.detailRowModule.getGridModel(gObj, row, exportType));\n        gObj.isPrinting = false;\n        var parent = 'parentDetails';\n        childGridObj[parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: getValue(childGridObj.queryString, row.data),\n            parentRowData: row.data\n        };\n        var exportId = getUid('child-grid');\n        var element = createElement('div', {\n            id: exportId, styles: 'display: none'\n        });\n        document.body.appendChild(element);\n        childGridObj.id = exportId;\n        gridPool[exportId] = false;\n        return { childGrid: childGridObj, element: element };\n    };\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value ? this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.value === 'string') {\n                args.value = new Date(args.value);\n            }\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                if (args.column.type === 'date') {\n                    format = { type: 'date', skeleton: args.column.format };\n                }\n                else if (args.column.type === 'time') {\n                    format = { type: 'time', skeleton: args.column.format };\n                }\n                else {\n                    format = { type: 'dateTime', skeleton: args.column.format };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, getValue, detach, extend } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getPrintGridModel, getUid } from '../base/util';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent, locator) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.foreignKeyData = {};\n        this.gridPool = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.locator = locator;\n        this.l10n = this.locator.getService('localization');\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n        gObj.id = getUid('main-grid');\n        this.gridPool[gObj.id] = false;\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        var cancel = 'cancel';\n        var isBlb = 'isBlob';\n        var csv = 'isCsv';\n        var workbk = 'workbook';\n        var isMultiEx = 'isMultipleExport';\n        this.gridPool = {};\n        if (grid.childGrid && !(!isNullOrUndefined(exportProperties) && exportProperties.hierarchyExportMode === 'None')) {\n            grid.expandedRows = getPrintGridModel(grid).expandedRows;\n        }\n        var args = {\n            requestType: 'beforeExcelExport', gridObject: gObj, cancel: false,\n            isMultipleExport: isMultipleExport, workbook: workbook, isCsv: isCsv, isBlob: isBlob\n        };\n        gObj.trigger(events.beforeExcelExport, args);\n        if (args[cancel]) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        this.parent.log('exporting_begin', this.getModuleName());\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        this.isBlob = args[isBlb];\n        if (args[csv]) {\n            this.isCsvExport = args[csv];\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        return this.processRecords(gObj, exportProperties, args[isMultiEx], args[workbk]);\n    };\n    ExcelExport.prototype.exportingSuccess = function (resolve) {\n        this.isExporting = false;\n        this.parent.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n        this.parent.log('exporting_complete', this.getModuleName());\n        resolve(this.book);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) &&\n            exportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                var dataManager = exportProperties.dataSource.executeQuery(new Query());\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                });\n            });\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, _this.parent.getCurrentViewRecords());\n                _this.exportingSuccess(resolve);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise_1.push(this.helper.getColumnData(gObj));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                }).catch(function (e) {\n                    reject(_this.book);\n                    _this.parent.trigger(events.actionFailure, e);\n                });\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, r) {\n        var _this = this;\n        this.groupedColLength = gObj.groupSettings.columns.length;\n        var blankRows = 5;\n        var rows = [];\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.multipleExport)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (!isNullOrUndefined(exportProperties)) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (!isNullOrUndefined(exportProperties) ? exportProperties.includeHiddenColumn : false);\n        return new Promise(function (resolve, reject) {\n            gObj.childGridLevel = 0;\n            rows = _this.processGridExport(gObj, exportProperties, r);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            var organisedRows = [];\n            _this.organiseRows(rows, rows[0].index, organisedRows);\n            _this.rows = _this.rows.concat(organisedRows);\n            //footer template add\n            if (!isNullOrUndefined(_this.footer)) {\n                if ((_this.expType === 'AppendToSheet' && !isMultipleExport) || (_this.expType === 'NewSheet')) {\n                    _this.processExcelFooter(_this.footer);\n                }\n            }\n            var sheet = {};\n            if (_this.columns.length > 0) {\n                sheet.columns = _this.columns;\n            }\n            /* tslint:disable-next-line:no-any */\n            sheet.rows = _this.rows;\n            _this.workSheet.push(sheet);\n            _this.book.worksheets = _this.workSheet;\n            _this.book.styles = _this.styles;\n            if (!isMultipleExport) {\n                if (_this.isCsvExport) {\n                    var book = new Workbook(_this.book, 'csv', gObj.locale, gObj.currencyCode);\n                    if (!_this.isBlob) {\n                        if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.csv');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('text/csv');\n                    }\n                }\n                else {\n                    var book = new Workbook(_this.book, 'xlsx', gObj.locale, gObj.currencyCode);\n                    if (!_this.isBlob) {\n                        if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.xlsx');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                    }\n                }\n                if (_this.isElementIdChanged) {\n                    gObj.element.id = '';\n                }\n                delete gObj.expandedRows;\n            }\n            return workbook;\n        });\n    };\n    ExcelExport.prototype.organiseRows = function (rows, initialIndex, organisedRows) {\n        if (!rows.length) {\n            return initialIndex;\n        }\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            var childRows = row.childRows;\n            if (childRows) {\n                row.index = initialIndex++;\n                delete row.childRows;\n                organisedRows.push(row);\n                initialIndex = this.organiseRows(childRows, initialIndex, organisedRows);\n            }\n            else {\n                row.index = initialIndex++;\n                organisedRows.push(row);\n            }\n        }\n        return initialIndex;\n    };\n    ExcelExport.prototype.processGridExport = function (gObj, exportProperties, r) {\n        var excelRows = [];\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n            this.theme = exportProperties.theme;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(exportProperties)) {\n            gObj.hierarchyPrintMode = exportProperties.hierarchyExportMode || 'Expanded';\n        }\n        var helper = new ExportHelper(gObj);\n        var headerRow = helper.getHeaders(gObj.columns, this.includeHiddenColumn);\n        var groupIndent = gObj.groupSettings.columns.length;\n        excelRows = this.processHeaderContent(gObj, headerRow, groupIndent, excelRows);\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, exportProperties.dataSource, excelRows, helper);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, gObj.currentViewData, excelRows, helper);\n        }\n        else {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, undefined, excelRows, helper);\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, exportProperties, currentViewRecords, excelRow, helper) {\n        var record;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level, 0, exportProperties, excelRow, helper);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0, 0, exportProperties, excelRow, helper);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, excelRow, currentViewRecords);\n            }\n            else {\n                var result = returnType.result.GroupGuid ?\n                    returnType.result.records : returnType.result;\n                this.processAggregates(gObj, result, excelRow);\n            }\n        }\n        return excelRow;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            cell.value = gObj.getColumnByField(item.field).headerText +\n                ': ' + (!col.enableGroupByFormat ? this.exportValueFormatter.formatCellValue(args) : item.key) + ' - ';\n            if (item.count > 1) {\n                cell.value += item.count + ' items';\n            }\n            else {\n                cell.value += item.count + ' item';\n            }\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, excelRows, this.rowLength);\n            cells.push(cell);\n            if (excelRows[excelRows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = excelRows[excelRows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level + dataSource.childLevels)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    sCell.index = (hIndex + 1);\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            excelRows[excelRows.length - 1].cells = cells;\n            this.rowLength++;\n            if (this.groupedColLength < 8 && level > 1) {\n                var grouping = { outlineLevel: level - 1, isCollapsed: true };\n                excelRows[excelRows.length - 1].grouping = grouping;\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level, startIndex, excelExportProperties, excelRows, helper);\n            }\n            else {\n                startIndex = this.processRecordRows(gObj, item.items, headerRow, (level), startIndex, excelExportProperties, excelRows, helper);\n                this.processAggregates(gObj, item, excelRows, undefined, (level), true);\n            }\n        }\n    };\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        var index = 1;\n        var cells = [];\n        var columns = headerRow.columns;\n        var rows = helper.getGridRowModel(columns, record, gObj, startIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            cells = [];\n            startIndex++;\n            index = 1;\n            for (var c = 0, len = row.cells.length; c < len; c++) {\n                var gCell = row.cells[c];\n                if (gCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var fkData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    fkData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, fkData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    var cell = {};\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = {\n                        data: row.data, column: column, foreignKeyData: fkData,\n                        value: value, style: undefined, colSpan: 1, cell: cell\n                    };\n                    gObj.trigger(events.excelQueryCellInfo, excelCellArgs);\n                    cell = excelCellArgs.cell;\n                    cell.index = index + level + gObj.childGridLevel;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.data === '' && gObj.childGridLevel && index === 1) {\n                        var style = {};\n                        style.hAlign = 'left';\n                        excelCellArgs = { style: style };\n                        cell.colSpan = gObj.getVisibleColumns().length;\n                        cell.value = this.l10n.getConstant('EmptyRecord');\n                    }\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            var excelRow = { index: this.rowLength++, cells: cells };\n            if (this.groupedColLength < 8 && level > 0) {\n                excelRow.grouping = { outlineLevel: level, isCollapsed: true };\n                excelRows.push(excelRow);\n            }\n            else {\n                excelRows.push(excelRow);\n            }\n            if (!isNullOrUndefined(gObj.childGrid)) {\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(excelExportProperties) && excelExportProperties.exportType) ?\n                    excelExportProperties.exportType : 'AllPages';\n                var returnVal = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnVal.childGrid;\n                var element = returnVal.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                childGridObj.childGridLevel = gObj.childGridLevel + 1;\n                var args = { childGrid: childGridObj, row: row, exportProperties: excelExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(excelRow, childGridObj, excelExportProperties, row);\n                childGridObj.appendTo(element);\n            }\n            gObj.notify(events.exportRowDataBound, { rowObj: row, type: 'excel' });\n        }\n        return startIndex;\n    };\n    ExcelExport.prototype.childGridCell = function (excelRow, childGridObj, excelExportProps, gRow) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            if (result.result.length === 0) {\n                result.result = [''];\n            }\n            excelRow.childRows = _this.processGridExport(childGridObj, excelExportProps, result);\n            var intent = _this.parent.groupSettings.columns.length;\n            excelRow.childRows.forEach(function (row) {\n                row.grouping = { outlineLevel: intent + childGridObj.childGridLevel,\n                    isCollapsed: !gRow.isExpand, isHidden: !gRow.isExpand };\n            });\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return excelRow;\n        };\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.processAggregates = function (gObj, rec, excelRows, currentViewRecords, indent, byGroup) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                excelRows = this.fillAggregates(gObj, groupSummaryRows, indent, excelRows);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates);\n            if (sRows.length > 0 && !byGroup) {\n                excelRows = this.fillAggregates(gObj, sRows, indent, excelRows);\n            }\n        }\n        return excelRows;\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.fillAggregates = function (gObj, rows, indent, excelRows, customIndex) {\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            var cells = [];\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    continue;\n                }\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        eCell.index = index + indent + gObj.childGridLevel;\n                        if (!isNullOrUndefined(cell.column.footerTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - sum\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - average\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - max\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - min\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - count\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - truecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - falsecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        this.aggregateStyle(cell.column, eCell.style, cell.column.field);\n                        var gridCellStyle = cell.attributes.style;\n                        if (gridCellStyle.textAlign) {\n                            eCell.style.hAlign = gridCellStyle.textAlign.toLowerCase();\n                        }\n                        cells.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent + gObj.childGridLevel;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                excelRows.push({ index: customIndex, cells: cells });\n            }\n            else {\n                var row_1 = {};\n                if (this.groupedColLength < 8 && this.groupedColLength > 0) {\n                    var dummyOutlineLevel = 'outlineLevel';\n                    var dummyGrouping = 'grouping';\n                    var level = excelRows[excelRows.length - 1][dummyGrouping][dummyOutlineLevel];\n                    var grouping = { outlineLevel: level, isCollapsed: true };\n                    row_1 = { index: this.rowLength++, cells: cells, grouping: grouping };\n                }\n                else {\n                    row_1 = { index: this.rowLength++, cells: cells };\n                }\n                excelRows.push(row_1);\n            }\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.aggregateStyle = function (col, style, field) {\n        if (typeof col.format === 'object') {\n            var format = col.format;\n            style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n            style.type = !isNullOrUndefined(format.type) ? format.type.toLowerCase() :\n                this.parent.getColumnByField(field).type.toLowerCase();\n        }\n        else {\n            style.numberFormat = col.format;\n            style.type = this.parent.getColumnByField(field).type.toLowerCase();\n        }\n    };\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        /* tslint:disable-next-line:max-line-length */\n        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n        return txt[0].textContent;\n    };\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        var result = {};\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, indent, excelRows) {\n        var rowIndex = 1;\n        var gridRows = headerRow.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = headerRow.columns;\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            var cells = [];\n            for (var column = 0; column < gridRows[row].cells.length; column++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                var cell = {};\n                var gridCell = gridRows[row].cells[column];\n                if (gridCell.cellType === CellType.HeaderIndent || gridCell.cellType === CellType.DetailHeader) {\n                    continue;\n                }\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index + gObj.childGridLevel;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign.toLowerCase();\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign.toLowerCase();\n                }\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, style: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, excelHeaderCellArgs);\n                cell.style = excelHeaderCellArgs.style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            excelRows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        style.bold = true;\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        return extend(style, themestyle);\n    };\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (typeof col.format === 'object') {\n                var format = col.format;\n                style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n                if (!isNullOrUndefined(format.type)) {\n                    style.type = format.type.toLowerCase();\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign.toLowerCase();\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width)) {\n            this.columns.push({ index: index + gObj.childGridLevel, width: typeof col.width === 'number' ?\n                    col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @return {void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.gridPool = {};\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        parent.id = getUid('main-grid');\n        this.gridPool[parent.id] = false;\n    };\n    PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        this.init(parent);\n        if (!isNullOrUndefined(pdfDoc)) {\n            this.pdfDocument = pdfDoc;\n        }\n        else {\n            this.pdfDocument = new PdfDocument();\n        }\n        this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            resolve(_this.pdfDocument);\n        });\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        this.gridPool = {};\n        if (parent.childGrid && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n            parent.expandedRows = getPrintGridModel(parent).expandedRows;\n        }\n        var args = {\n            requestType: 'beforePdfExport', cancel: false\n        };\n        if (!isBlazor()) {\n            var gridObject = 'gridObject';\n            args[gridObject] = parent;\n        }\n        var can = 'cancel';\n        parent.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        this.parent.log('exporting_begin', this.getModuleName());\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)\n            && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                pdfExportProperties.dataSource.executeQuery(new Query()).then(function (returnType) {\n                    _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport);\n                });\n            });\n        }\n        else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise_1.push(this.helper.getColumnData(parent));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport).then(function () {\n                        _this.isExporting = false;\n                        parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                        _this.parent.log('exporting_complete', _this.getModuleName());\n                        resolve(_this.pdfDocument);\n                    });\n                });\n            });\n        }\n    };\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        var section = this.pdfDocument.sections.add();\n        var pdfGrid;\n        this.processSectionExportProperties(section, pdfExportProperties);\n        var pdfPage = section.pages.add();\n        return new Promise(function (resolve, reject) {\n            pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            // draw the grid\n            pdfGrid.draw(pdfPage, 0, 0);\n            if (!isMultipleExport) {\n                // save the PDF\n                if (!_this.isBlob) {\n                    if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                        _this.pdfDocument.save(pdfExportProperties.fileName);\n                    }\n                    else {\n                        _this.pdfDocument.save('Export.pdf');\n                    }\n                }\n                else {\n                    _this.blobPromise = _this.pdfDocument.save();\n                }\n                _this.pdfDocument.destroy();\n                delete gObj.expandedRows;\n            }\n            return _this.pdfDocument;\n        });\n    };\n    PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation)\n            || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n            var pdfPageSettings = new PdfPageSettings();\n            pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ?\n                PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n            pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n            section.setPageSettings(pdfPageSettings);\n        }\n        return section;\n    };\n    PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n        }\n        var helper = new ExportHelper(gObj);\n        var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n        var columns = gObj.columns;\n        var isGrouping = false;\n        if (gObj.groupSettings.columns.length) {\n            isGrouping = true;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(pdfExportProperties)) {\n            gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n        }\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid, helper, gObj);\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length) {\n            if (isGrouping) {\n                if (!isNullOrUndefined(captionThemeStyle.border)) {\n                    border = captionThemeStyle.border;\n                }\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.\n                    brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n                }\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ?\n                this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.caption);\n            var pdfColor = new PdfColor(0, 0, 0);\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n                font = this.gridTheme.caption.font;\n            }\n            return { font: font, brush: new PdfSolidBrush(pdfColor), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n                border: borderCaption };\n        }\n        else {\n            //Material theme\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n                backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ?\n                this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.header);\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.header.font)) {\n                font = this.gridTheme.header.font;\n            }\n            return { border: this.getBorderStyle(this.gridTheme.header.border), font: font, brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n                brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n        var groupIndex = level;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = this.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            row.cells.getCell(groupIndex).value = value;\n            row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n            row.style.setBorder(border);\n            row.style.setFont(font);\n            row.style.setTextBrush(brush);\n            row.style.setBackgroundBrush(backgroundBrush);\n            var sRows = void 0;\n            var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n            if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n            }\n            else {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n            }\n            if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n            else {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                index = this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1), pdfExportProperties, helper, index);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n        }\n    };\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid) {\n        var columnCount = gridColumn.length + childLevels;\n        // add columns\n        pdfGrid.columns.add(columnCount);\n        // add header\n        pdfGrid.headers.add(rows.length);\n        // set cell values of each rows in the header\n        for (var i = 0; i < rows.length; i++) {\n            var gridHeader = pdfGrid.headers.getHeader(i);\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            var colSpan = 0;\n            var cellLength = rows[i].cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var cell = rows[i].cells[j];\n                var pdfCell = gridHeader.cells.getCell(j + colSpan);\n                switch (cell.cellType) {\n                    case CellType.HeaderIndent:\n                    case CellType.DetailHeader:\n                        pdfCell.value = '';\n                        pdfCell.width = 20;\n                        break;\n                    case CellType.Header:\n                    case CellType.StackedHeader:\n                        if (pdfCell.value !== null) {\n                            if (!isNullOrUndefined(cell.column.headerTextAlign)) {\n                                pdfCell.style.stringFormat = this.getHorizontalAlignment(cell.column.headerTextAlign);\n                            }\n                            if (!isNullOrUndefined(cell.rowSpan)) {\n                                pdfCell.rowSpan = cell.rowSpan;\n                                pdfCell.style.stringFormat = this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, cell.column.textAlign);\n                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n                                    pdfGrid.headers.getHeader(i + k).cells.getCell(j).value = null;\n                                }\n                            }\n                            if (!isNullOrUndefined(cell.colSpan)) {\n                                pdfCell.columnSpan = cell.colSpan;\n                                colSpan += cell.colSpan - 1;\n                            }\n                            pdfCell.value = cell.column.headerText;\n                            var args = {\n                                cell: pdfCell,\n                                gridCell: cell,\n                                style: pdfCell.style\n                            };\n                            this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n                        }\n                        else {\n                            colSpan += pdfCell.columnSpan;\n                            j = j - 1;\n                        }\n                        break;\n                }\n            }\n        }\n        if (pdfGrid.columns.count >= 6) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            var clientSize = this.pdfDocument.pageSettings.size;\n            if (!isNullOrUndefined(pdfExportProperties.header)) {\n                /* tslint:disable-next-line:no-any */\n                var header = pdfExportProperties.header;\n                var position = new PointF(0, header.fromTop);\n                var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return dataSource;\n    };\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format;\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                var cell = row.cells[index];\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    i--;\n                    index++;\n                    continue;\n                }\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (cell.cellType === CellType.DetailFooterIntent) {\n                            continue;\n                        }\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                i += 1;\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        /* tslint:disable-next-line:max-line-length */\n                        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n                        value.push(txt[0].textContent);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n        if (!isNullOrUndefined(column.footerTemplate)) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    /**\n     * Set alignment, width and type of the values of the column\n     */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj) {\n        var startIndex = gObj.groupSettings.columns.length;\n        for (var i = 0; i < startIndex; i++) {\n            pdfGrid.columns.getColumn(i).width = 20;\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width)) {\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ?\n                    gridColumns[i].width * 0.75 : helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ?\n                this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n            var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n            var fontStyle = this.getFontStyle(this.gridTheme.record);\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.record.font)) {\n                font = this.gridTheme.record.font;\n            }\n            row.style.setFont(font);\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        var borderRecord = this.gridTheme && this.gridTheme.record &&\n            this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n        row.style.setBorder(borderRecord);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n        var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            rowIndex++;\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            var cellLength = row.cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var gridCell = row.cells[j];\n                if (gridCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gridCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = row.data;\n                var cell = gridRow.cells.getCell(j);\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1,\n                    cell: cell\n                };\n                args.value = this.exportValueFormatter.formatCellValue(args);\n                this.parent.trigger(events.pdfQueryCellInfo, args);\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n            if (row.isExpand) {\n                var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n                var cell = gridRow_1.cells.getCell(startIndex);\n                cell.columnSpan = gridRow_1.cells.count - (startIndex);\n                cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType) ?\n                    pdfExportProperties.exportType : 'AllPages';\n                var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnValue.childGrid;\n                var element = returnValue.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                var args = { childGrid: childGridObj, row: row, cell: cell, exportProperties: pdfExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, pdfExportProperties);\n                childGridObj.appendTo(element);\n            }\n            this.parent.notify(events.exportRowDataBound, { type: 'pdf', rowObj: row });\n        }\n        return rowIndex;\n    };\n    PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return cell;\n        };\n    };\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.cellPadding)) {\n            cell.style.cellPadding = args.style.cellPadding;\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) ||\n            !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        if (content.style.font) {\n            return content.style.font;\n        }\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ?\n            (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.TimesRoman;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    PdfExport.prototype.getFontStyle = function (theme) {\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(theme) && theme.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(theme) && theme.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(theme) && theme.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(theme) && theme.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return fontStyle;\n    };\n    PdfExport.prototype.getBorderStyle = function (border) {\n        var borders = new PdfBorders();\n        if (!isNullOrUndefined(border)) {\n            var borderWidth = border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? borderWidth * 0.75 : undefined;\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(border.color)) {\n                var borderColor = this.hexToRgb(border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(border.dashStyle);\n            }\n            borders.all = pen;\n        }\n        else {\n            borders.all = new PdfPen(new PdfColor(234, 234, 234));\n        }\n        return borders;\n    };\n    /**\n     * To destroy the pdf export\n     * @return {void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, removeClass, attributes, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = _this.parent.createElement('button', {});\n        _this.unbounDiv = _this.parent.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button',\n            title: !isNullOrUndefined(buttonOption.title) ? buttonOption.title :\n                buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { click, keyPressed, commandClick } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.initiateRender();\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = gObj.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        var commandColumn;\n        var row = gObj.getRowObjectFromUID(closest(target, '.e-row').getAttribute('data-uid'));\n        this.parent.columnModel.forEach(function (col) {\n            if (col.commands) {\n                col.commands.forEach(function (commandCol) {\n                    var typeInString = 'type';\n                    if (commandCol[typeInString] === type) {\n                        commandColumn = commandCol;\n                    }\n                });\n            }\n        });\n        var args = {\n            cancel: false,\n            target: target,\n            commandColumn: commandColumn,\n            rowData: isNullOrUndefined(row) ? undefined : row.data\n        };\n        this.parent.trigger(commandClick, args, function (commandclickargs) {\n            if (buttonObj.disabled || !gObj.editModule || commandclickargs.cancel) {\n                return;\n            }\n            switch (type) {\n                case 'Edit':\n                    gObj.editModule.endEdit();\n                    gObj.editModule.startEdit(closest(target, 'tr'));\n                    break;\n                case 'Cancel':\n                    gObj.editModule.closeEdit();\n                    break;\n                case 'Save':\n                    gObj.editModule.endEdit();\n                    break;\n                case 'Delete':\n                    if (gObj.editSettings.mode !== 'Batch') {\n                        gObj.editModule.endEdit();\n                    }\n                    gObj.clearSelection();\n                    //for toogle issue when dbl click\n                    gObj.selectRow(parseInt(closest(target, 'tr').getAttribute('aria-rowindex'), 10), false);\n                    gObj.editModule.deleteRecord();\n                    break;\n            }\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(keyPressed, this.keyPressHandler);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                            this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                        }\n                    }\n                    else {\n                        this.parent.editModule.endEdit();\n                        this.parent.editModule.startEdit(this.row);\n                    }\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode !== 'Batch') {\n                        this.parent.editModule.endEdit();\n                    }\n                    if (this.parent.getSelectedRecords().length === 1) {\n                        this.parent.editModule.deleteRow(this.row);\n                    }\n                    else {\n                        this.parent.deleteRecord();\n                    }\n                }\n                break;\n            case 'Save':\n                if (this.parent.editModule) {\n                    this.parent.editModule.endEdit();\n                }\n                break;\n            case 'Cancel':\n                if (this.parent.editModule) {\n                    this.parent.editModule.closeEdit();\n                }\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        args.rowInfo = this.targetRowdata;\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.targetRowdata = this.parent.getRowInfo(args.event.target);\n            if ((isNullOrUndefined(args.parentItem)) && this.targetColumn) {\n                this.selectRow(args.event, (args.event.target.classList.contains('e-selectionbackground')\n                    && this.parent.selectionSettings.type === 'Multiple') ? false : true);\n            }\n            var hideSepItems = [];\n            var showSepItems = [];\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editModule && this.parent.editSettings.mode === 'Batch' &&\n                        ((closest(args.event.target, '.e-gridform')) ||\n                            this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    if (item.separator) {\n                        hideSepItems.push(item.id);\n                    }\n                    else {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (this.ensureTarget(args.event.target, item.target) && item.separator) {\n                    showSepItems.push(item.id);\n                }\n            }\n            if (showSepItems.length > 0) {\n                this.contextMenu.showItems(showSepItems, true);\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            if (hideSepItems.length > 0) {\n                this.contextMenu.hideItems(hideSepItems, true);\n            }\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            args.rowInfo = this.targetRowdata;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (args.cancel || (this.hiddenItems.length === args.items.length && !args.parentItem)) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n        this.parent.applyBiggerTheme(this.contextMenu.element.parentElement);\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : 'tbody');\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.getFrozenColumns() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit)\n                    || (this.targetColumn && !this.targetColumn.field && item === 'AutoFit');\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (element) {\n                        if (element.field === _this.targetColumn.field\n                            && element.direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    });\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            var uid = cell.querySelector('.e-headercelldiv, .e-stackedheadercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        else {\n            var ele = (this.parent.getRowInfo(e.target).column);\n            return ele || null;\n        }\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute('aria-rowindex'), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.isFrzLoad = 1;\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n        for (var i = 0, len = row.length; i < len; i++) {\n            if (this.isFrzLoad % 2 === 0) {\n                row[i].cells = row[i].cells.slice(frzCols, row[i].cells.length);\n            }\n            else {\n                row[i].cells = row[i].cells.slice(0, frzCols);\n            }\n        }\n        this.isFrzLoad++;\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth, wrap } from '../base/util';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        return _super.call(this, parent, locator) || this;\n    }\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozencontent' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.getFrozenContent().appendChild(this.getTable());\n        var mTbl = this.getTable().cloneNode(true);\n        this.getMovableContent().appendChild(mTbl);\n        remove(this.getMovableContent().querySelector('colgroup'));\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozenheader' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        var tbody = this.getMovableHeader().querySelector('tbody');\n        remove(this.getMovableHeader().querySelector('table'));\n        _super.prototype.refreshUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        this.updateColgroup();\n        this.widthService.setWidthToTable();\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.movableHeader.querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns());\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.getMovableHeader().appendChild(this.createTable());\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader').length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(renderMovable(filterRow, this.parent.getFrozenColumns()));\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            var fRows = void 0;\n            var mRows = void 0;\n            var fHdr = this.getFrozenHeader();\n            var mHdr = this.getMovableHeader();\n            var cont = this.parent.getContent();\n            var wrapMode = this.parent.textWrapSettings.wrapMode;\n            var hdrClassList = this.parent.getHeaderContent().firstChild.classList;\n            if (obj.case === 'textwrap') {\n                if (wrapMode !== 'Header' || obj.isModeChg) {\n                    fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                    mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                    this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n                }\n                if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                    hdrClassList.add('e-wrap');\n                }\n                else {\n                    hdrClassList.remove('e-wrap');\n                }\n                if (wrapMode === 'Both' || obj.isModeChg) {\n                    fRows = fHdr.querySelectorAll('tr');\n                    mRows = mHdr.querySelectorAll('tr');\n                }\n                else {\n                    fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                        'tbody' : 'thead').querySelectorAll('tr');\n                    mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                        'tbody' : 'thead').querySelectorAll('tr');\n                }\n                if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                    this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n                }\n                this.refreshStackedHdrHgt();\n            }\n            else if (obj.case === 'refreshHeight') {\n                this.setWrapHeight(cont.querySelector('.e-frozencontent').querySelectorAll('tr'), cont.querySelector('.e-movablecontent').querySelectorAll('tr'), obj.isModeChg);\n                this.setWrapHeight(fHdr.querySelectorAll('tr'), mHdr.querySelectorAll('tr'), obj.isModeChg);\n            }\n        }\n    };\n    FreezeRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'scroll') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler')).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue \n            if (!fRows[i].classList.contains('e-columnheader')) {\n                height[i] = fRows[i].offsetHeight; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n                width[i] = mRows[i].offsetHeight;\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) || (!isWrap && fRowHgt < mRowHgt) ||\n                (this.parent.allowResizing && this.parent.resizeModule && !this.parent.resizeModule.isFrozenColResized))) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            if (mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) || (!isWrap && fRowHgt > mRowHgt) ||\n                (this.parent.allowResizing && this.parent.resizeModule && this.parent.resizeModule.isFrozenColResized))) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function (height) {\n        if (height === void 0) { height = getScrollBarWidth(); }\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var movableContent = this.parent.element.querySelector('.e-movablecontent');\n        var frozenContent = this.parent.element.querySelector('.e-frozencontent');\n        if (movableContent.scrollWidth - movableContent.clientWidth) {\n            frozenContent.style.height = movableContentHeight -\n                height + 'px';\n            frozenContent.style.borderBottom = '';\n        }\n        else {\n            frozenContent.style.height = movableContentHeight + 'px';\n            if ((frozenContent.scrollHeight <= frozenContent.clientHeight) ||\n                (movableContent.scrollHeight <= movableContent.clientHeight)) {\n                this.parent.scrollModule.removePadding();\n            }\n            frozenContent.style.borderBottom = '0px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns()), mTable.querySelector('thead'));\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        this.parent.log('limitation', this.getModuleName());\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n        });\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n        });\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        e.preventDefault();\n        this.parent.applyBiggerTheme(this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1) {\n                if (this.ensureDisabledStatus(key) && !dItem.hide) {\n                    this.disableItems.push(item.text);\n                }\n                else if (item.hide) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n            else if (this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    this.parent.sortSettings.columns.forEach(function (ele) {\n                        if (ele.field === _this.targetColumn.field\n                            && ele.direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    });\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null) {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        columns.forEach(function (column) {\n            column.dataSource = (column.dataSource instanceof DataManager ? column.dataSource :\n                (isNullOrUndefined(column.dataSource) ? new DataManager() : new DataManager(column.dataSource)));\n        });\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        foreignColumns.forEach(function (col) {\n            var promise;\n            var query = args.isComplex ? _this.genarateColumnQuery(col) :\n                _this.genarateQuery(col, args.result.result, false, true);\n            query.params = _this.parent.query.params;\n            var dataSource = col.dataSource;\n            if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        });\n        Promise.all(allPromise).then(function (responses) {\n            responses.forEach(function (data, index) {\n                foreignColumns[index].columnData = data.result;\n            });\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            _this.parent.log(['actionfailure', 'foreign_key_failure']);\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var predicate;\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length && !fromData) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            filteredValue.forEach(function (obj) {\n                if (obj && obj.getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: obj, matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', obj, false));\n                }\n            });\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        predicate = (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n        return predicate;\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = new Query();\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue && fColumn.uid === column.uid);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n","/**\n *\n * `Logger` class\n */\nimport { isNullOrUndefined, L10n, isUndefined } from '@syncfusion/ej2-base';\nimport { DataUtil, DataManager } from '@syncfusion/ej2-data';\nvar BASE_DOC_URL = 'https://ej2.syncfusion.com/documentation/grid';\nvar DOC_URL = 'https://ej2.syncfusion.com/documentation/';\nvar WARNING = '[EJ2Grid.Warning]';\nvar ERROR = '[EJ2Grid.Error]';\nvar INFO = '[EJ2Grid.Info]';\nvar Logger = /** @class */ (function () {\n    function Logger(parent) {\n        this.parent = parent;\n        this.parent.on('initial-end', this.patchadaptor, this);\n    }\n    Logger.prototype.getModuleName = function () {\n        return 'logger';\n    };\n    Logger.prototype.log = function (types, args) {\n        var _this = this;\n        if (!(types instanceof Array)) {\n            types = [types];\n        }\n        types.forEach(function (type) {\n            var item = detailLists[type];\n            var cOp = item.check(args, _this.parent);\n            if (cOp.success) {\n                console[item.logType](item.generateMessage(args, _this.parent, cOp.options));\n            }\n        });\n    };\n    Logger.prototype.patchadaptor = function () {\n        var adaptor = this.parent.getDataModule().dataManager.adaptor;\n        var original = adaptor.beforeSend;\n        if (original) {\n            adaptor.beforeSend = function (dm, request, settings) {\n                original.call(adaptor, dm, request, settings);\n            };\n        }\n    };\n    Logger.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('initial-end', this.patchadaptor);\n    };\n    return Logger;\n}());\nexport { Logger };\nexport var detailLists = {\n    module_missing: {\n        type: 'module_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var injected = parent.getInjectedModules().map(function (m) { return m.prototype.getModuleName(); });\n            /* tslint:disable-next-line:no-any */\n            var modules = parent.requiredModules().map(function (m) { return m.member; })\n                .filter(function (name) { return injected.indexOf(name) === -1; });\n            return { success: modules.filter(function (m) { return m !== 'resize'; }).length > 0, options: modules };\n        },\n        generateMessage: function (args, parent, modules) {\n            modules = modules.filter(function (m) { return m !== 'resize'; })\n                .reduce(function (prev, cur) { return prev + (\"* \" + cur + \"\\n\"); }, '');\n            return WARNING + ': MODULES MISSING\\n' + 'The following modules are not injected:.\\n' +\n                (\"\" + modules) +\n                (\"Refer to \" + BASE_DOC_URL + \"/module.html for documentation on importing feature modules.\");\n        }\n    },\n    promise_enabled: {\n        type: 'promise_enabled',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: typeof Promise === 'undefined' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': PROMISE UNDEFINED\\n' +\n                'Promise object is not present in the global environment,' +\n                'please use polyfil to support Promise object in your environment.\\n' +\n                (\"Refer to \" + DOC_URL + \"/base/browser.html?#required-polyfills for more information.\");\n        }\n    },\n    primary_column_missing: {\n        type: 'primary_column_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' + 'Editing is enabled but primary key column is not specified.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    selection_key_missing: {\n        type: 'selection_key_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.selectionSettings.persistSelection &&\n                    parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' +\n                'selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    actionfailure: {\n        type: 'actionfailure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            var message = '';\n            var formatError = formatErrorHandler(args, parent);\n            var ajaxError = ajaxErrorHandler(args, parent);\n            if (ajaxError !== '') {\n                message = ajaxError;\n            }\n            else if (formatError !== '') {\n                message = formatError;\n            }\n            else {\n                message = args.error;\n            }\n            return WARNING + ': ' + message;\n        }\n    },\n    locale_missing: {\n        type: 'locale_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var lObj = DataUtil.getObject(\"locale.\" + parent.locale + \".grid\", L10n);\n            return { success: parent.locale !== 'en-US' && isNullOrUndefined(lObj) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': LOCALE CONFIG MISSING\\n' + (\"Locale configuration for '\" + parent.locale + \"' is not provided.\\n\") +\n                (\"Refer to \" + BASE_DOC_URL + \"/globalization-and-localization.html?#localization \\n             for documentation on setting locale configuration.\");\n        }\n    },\n    limitation: {\n        type: 'limitation',\n        logType: 'warn',\n        check: function (args, parent) {\n            var name = args;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = {\n                        success: parent.allowGrouping || !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid)\n                            || !isUndefined(parent.rowTemplate) || parent.enableVirtualization,\n                        options: { name: 'freeze' }\n                    };\n                    break;\n                case 'virtualization':\n                    opt = {\n                        success: !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid) || parent.frozenRows !== 0\n                            || parent.frozenColumns !== 0,\n                        options: { name: 'virtualization' }\n                    };\n                    break;\n                default:\n                    opt = { success: false };\n                    break;\n            }\n            return opt;\n        },\n        generateMessage: function (args, parent, options) {\n            var name = options.name;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = 'Frozen rows and columns do not support the following features:\\n' +\n                        '* Virtualization\\n' +\n                        '* Row Template\\n' +\n                        '* Details Template\\n' +\n                        '* Hierarchy Grid\\n' +\n                        '* Grouping';\n                    break;\n                case 'virtualization':\n                    opt = 'Virtualization does not support the following features.\\n' +\n                        '* Freeze rows and columns.\\n' +\n                        '* Details Template.\\n' +\n                        '* Hierarchy Grid.\\n';\n                    break;\n                default:\n                    opt = '';\n                    break;\n            }\n            return WARNING + (\": \" + name.toUpperCase() + \" LIMITATIONS\\n\") + opt;\n        }\n    },\n    check_datasource_columns: {\n        type: 'check_datasource_columns',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: !(parent.columns.length ||\n                    (parent.dataSource instanceof DataManager) || parent.dataSource.length) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': GRID CONFIG MISSING\\n' + 'dataSource and columns are not provided in the grid. ' +\n                'At least one of either must be provided for grid configuration.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns.html for documentation on configuring the grid data and columns.\");\n        }\n    },\n    virtual_height: {\n        type: 'virtual_height',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(parent.height) || parent.height === 'auto' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': GRID HEIGHT MISSING \\n' + 'height property is required to use virtualization.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/virtual.html for documentation on configuring the virtual grid.\");\n        }\n    },\n    grid_remote_edit: {\n        type: 'grid_remote_edit',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: Array.isArray(args) || Array.isArray(args.result) };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': RETRUN VALUE MISSING  \\n' +\n                'Remote service returns invalid data. \\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/edit.html for documentation on configuring editing with remote data.\");\n        }\n    },\n    grid_sort_comparer: {\n        type: 'grid_sort_comparer',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getDataModule().isRemote() };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': SORT COMPARER NOT WORKING  \\n' + 'Sort comparer will not work with remote data.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/sorting/#custom-sort-comparer for documentation on using the sort comparer.\");\n        }\n    },\n    resize_min_max: {\n        type: 'resize_min_max',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: (args.column.minWidth && args.column.minWidth >= args.width) ||\n                    (args.column.maxWidth && args.column.maxWidth <= args.width) };\n        },\n        generateMessage: function (args, parent) {\n            return INFO + ': RESIZING COLUMN REACHED MIN OR MAX  \\n' + 'The column resizing width is at its min or max.';\n        }\n    },\n    action_disabled_column: {\n        type: 'action_disabled_column',\n        logType: 'info',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'reorder':\n                    if (isNullOrUndefined(args.destColumn)) {\n                        fn = \"reordering action is disabled for the \" + args.column.headerText + \" column\";\n                    }\n                    else {\n                        fn = \"reordering action is disabled for the \" + (args.column.allowReordering ?\n                            args.destColumn.headerText : args.column.headerText) + \" column\";\n                    }\n                    break;\n                case 'group':\n                    fn = \"grouping action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'filter':\n                    fn = \"filtering action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'sort':\n                    fn = \"sorting action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": ACTION DISABLED \\n \" + options.fn);\n        }\n    },\n    exporting_begin: {\n        type: 'exporting_begin',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG INPROGRESS \\n Grid \" + options.args + \"ing is in progress\");\n        }\n    },\n    exporting_complete: {\n        type: 'exporting_complete',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG COMPLETED \\n Grid \" + options.args + \"ing is complete\");\n        }\n    },\n    foreign_key_failure: {\n        type: 'foreign_key_failure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': FOREIGNKEY CONFIG \\n  Grid foreign key column needs a valid data source/service.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns/#foreign-key-column for documentation on configuring foreign key columns.\");\n        }\n    },\n    initial_action: {\n        type: 'initial_action',\n        logType: 'error',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'group':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to group the column';\n                    break;\n                case 'filter':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to filter the column.';\n                    break;\n                case 'sort':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to sort the column.';\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": INITIAL ACTION FAILURE \\n \" + options.fn);\n        }\n    },\n    frozen_rows_columns: {\n        type: 'frozen_rows_columns',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: parent.getColumns().length <= parent.frozenColumns || parent.frozenRows >= parent.currentViewData.length };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": OUT OF RANGE ERROR-\\n \" + (parent.getColumns().length <= parent.frozenColumns ? 'FROZEN COLUMNS,' : '')) +\n                ((parent.frozenRows >= parent.currentViewData.length ? 'FROZEN ROWS' : '') + \" invalid\");\n        }\n    },\n    column_type_missing: {\n        type: 'column_type_missing',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(args.column.type), options: args.column.headerText };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": COLUMN TYPE MISSING-\\n  \" + options + \" column type was invalid or not defined.\") +\n                (\"Please go through below help link: \" + DOC_URL + \"/grid/columns/#column-type\");\n        }\n    },\n    datasource_syntax_mismatch: {\n        type: 'datasource_syntax_mismatch',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: (args.dataState.dataSource instanceof DataManager || args.dataState.dataSource instanceof Array) &&\n                    !(isNullOrUndefined(args.dataState.dataStateChange)) };\n        },\n        generateMessage: function (args, parent, options) {\n            return WARNING + ': DATASOURCE SYNTAX WARNING\\n' +\n                'DataSource should be in the form of {result: Object[], count: number}' +\n                'when dataStateChangeEvent used';\n        }\n    }\n};\nvar formatErrorHandler = function (args, parent) {\n    var error = args.error;\n    if (error.indexOf && error.indexOf('Format options') !== 0) {\n        return '';\n    }\n    return 'INVALID FORMAT\\n' +\n        'For more information, refer to the following documentation links:\\n' +\n        (\"Number format: \" + DOC_URL + \"/base/intl.html?#supported-format-string.\\n\") +\n        (\"Date format: \" + DOC_URL + \"/base/intl.html?#manipulating-datetime.\\n\") +\n        (\"Message: \" + error);\n};\nvar ajaxErrorHandler = function (args, parent) {\n    var error = DataUtil.getObject('error.error', args);\n    if (isNullOrUndefined(error)) {\n        return '';\n    }\n    var jsonResult = '';\n    try {\n        jsonResult = JSON.parse(error.responseText);\n    }\n    catch (_a) {\n        jsonResult = '';\n    }\n    return 'XMLHTTPREQUEST FAILED\\n' +\n        (\"Url: \" + error.responseURL + \"\\n\") +\n        (\"Status: \" + error.status + \" - \" + error.statusText + \"\\n\") +\n        (\"\" + (jsonResult !== '' ? 'Message: ' + jsonResult : ''));\n};\n","import { extend } from '@syncfusion/ej2-base';\nimport { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `AutoCompleteEditCell` is used to handle autocomplete cell type editing.\n * @hidden\n */\nvar AutoCompleteEditCell = /** @class */ (function () {\n    function AutoCompleteEditCell(parent) {\n        //constructor\n        this.parentObj = parent;\n    }\n    AutoCompleteEditCell.prototype.create = function (args) {\n        //create \n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parentObj.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parentObj.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    AutoCompleteEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parentObj.editSettings.mode !== 'Dialog';\n        this.object = new AutoComplete(extend({\n            dataSource: this.parentObj.dataSource instanceof DataManager ?\n                this.parentObj.dataSource : new DataManager(this.parentObj.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            // enableRtl: this.parentObject.enableRtl,\n            actionComplete: this.selectedValues.bind(this),\n            placeholder: isInlineEdit ? '' : args.column.headerText,\n            floatLabelType: isInlineEdit ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.object.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    AutoCompleteEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    AutoCompleteEditCell.prototype.selectedValues = function (valObj) {\n        valObj.result = DataUtil.distinct(valObj.result, this.object.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = valObj.result;\n        }\n    };\n    AutoCompleteEditCell.prototype.destroy = function () {\n        if (this.object) {\n            this.object.destroy();\n        }\n    };\n    return AutoCompleteEditCell;\n}());\nexport { AutoCompleteEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ComboBoxEditCell` is used to handle ComboBoxEdit cell type editing.\n * @hidden\n */\nvar ComboboxEditCell = /** @class */ (function () {\n    function ComboboxEditCell(parentObject) {\n        //constructor\n        this.parent = parentObject;\n    }\n    ComboboxEditCell.prototype.create = function (args) {\n        //create\n        var fieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + fieldName,\n                name: fieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    ComboboxEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineMode = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new ComboBox(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.finalValue.bind(this),\n            placeholder: isInlineMode ? '' : args.column.headerText,\n            floatLabelType: isInlineMode ? 'Never' : 'Always',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ComboboxEditCell.prototype.read = function (inputEle) {\n        return inputEle.ej2_instances[0].value;\n    };\n    ComboboxEditCell.prototype.finalValue = function (val) {\n        val.result = DataUtil.distinct(val.result, this.obj.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = val.result;\n        }\n    };\n    ComboboxEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ComboboxEditCell;\n}());\nexport { ComboboxEditCell };\n","import { extend, getValue } from '@syncfusion/ej2-base';\nimport { MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { getComplexFieldID, } from '../base/util';\n/**\n * `MultiSelectEditCell` is used to handle multiselect dropdown cell type editing.\n * @hidden\n */\nvar MultiSelectEditCell = /** @class */ (function () {\n    function MultiSelectEditCell(parentObj) {\n        //constructor\n        this.parent = parentObj;\n    }\n    MultiSelectEditCell.prototype.create = function (args) {\n        //create\n        var colName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + colName,\n                name: colName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MultiSelectEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MultiSelectEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MultiSelect(extend({\n            fields: { text: args.column.field, value: args.column.field },\n            value: getValue(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    MultiSelectEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MultiSelectEditCell;\n}());\nexport { MultiSelectEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { TimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `TimePickerEditCell` is used to handle Timepicker cell type editing.\n * @hidden\n */\nvar TimePickerEditCell = /** @class */ (function () {\n    function TimePickerEditCell(grid) {\n        this.parent = grid;\n    }\n    TimePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexField,\n                name: complexField, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    TimePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    TimePickerEditCell.prototype.write = function (args) {\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        var rowDataValue = getObject(args.column.field, args.rowData);\n        rowDataValue = rowDataValue ? new Date(rowDataValue) : null;\n        this.obj = new TimePicker(extend({\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            value: rowDataValue,\n            placeholder: isInlineEdit ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    TimePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return TimePickerEditCell;\n}());\nexport { TimePickerEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Switch } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ToggleEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar ToggleEditCell = /** @class */ (function () {\n    function ToggleEditCell(parentObject) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parentObject;\n    }\n    ToggleEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexField,\n                name: complexField\n            }\n        });\n    };\n    ToggleEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    ToggleEditCell.prototype.write = function (args) {\n        var chkBoxElement;\n        var checkState;\n        // let isAddRow : boolean =  args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            chkBoxElement = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            checkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(chkBoxElement)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                checkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), checkState].concat(this.activeClasses));\n        }\n        this.obj = new Switch(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: checkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.switchModeChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ToggleEditCell.prototype.switchModeChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var addClass = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                addClass = true;\n                this.editRow.setAttribute('aria-selected', addClass.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), addClass].concat(this.activeClasses));\n        }\n    };\n    ToggleEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ToggleEditCell;\n}());\nexport { ToggleEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `MaskedTextBoxCellEdit` is used to handle masked input cell type editing.\n * @hidden\n */\nvar MaskedTextBoxCellEdit = /** @class */ (function () {\n    function MaskedTextBoxCellEdit(parentInstance) {\n        //constructor\n        this.parent = parentInstance;\n    }\n    MaskedTextBoxCellEdit.prototype.create = function (args) {\n        //create\n        var columnField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + columnField,\n                name: columnField, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MaskedTextBoxCellEdit.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MaskedTextBox(extend({\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            mask: '000-000-0000',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    MaskedTextBoxCellEdit.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MaskedTextBoxCellEdit.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MaskedTextBoxCellEdit;\n}());\nexport { MaskedTextBoxCellEdit };\n","import * as index from './index';\nindex.Grid.Inject(index.Filter, index.Page, index.Selection, index.Sort, index.Group, index.Reorder, index.RowDD, index.DetailRow, index.Toolbar, index.Aggregate, index.Search, index.VirtualScroll, index.Edit, index.Resize, index.ExcelExport, index.PdfExport, index.CommandColumn, index.ContextMenu, index.Freeze, index.ColumnMenu, index.ColumnChooser, index.ForeignKey);\nexport * from './index';\n"],"names":["getCloneProperties","doesImplementInterface","target","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","DataUtil","getObject","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","updatecloneRow","grid","nRows","actualRows","vRows","i","length","isDataRow","push","isExpand","isCaptionRow","getCollapsedRowsCount","vcRows","val","count","gLen","groupSettings","columns","items","value","dataRowCnt","agrCnt","indent","len","gLevel","GroupGuid","childLevels","recursive","row","j","length_1","nLevel","iterateArrayOrObject","collection","predicate","result","pred","iterateExtend","array","obj","baseExtend","getActualProperties","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","Object","keys","forEach","index","indexOf","setColumnIndex","columnModel","ind","prepareColumns","autoWidth","c","Column","headerText","foreignKeyValue","foreignKeyField","getValue","window","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","popup","offsetWidth","x","getPosition","right","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","remove","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","type","context","temp","customAggregate","Array","aggregates","toLowerCase","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","isComplexField","split","getComplexFieldID","replace","setComplexFieldID","isEditable","col","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","editSettings","mode","showConfirmDialog","wrap","action","add","setFormatter","serviceLocator","fmtr","getService","getFormatFunction","skeleton","format","setParser","getParserFunction","addRemoveActiveClasses","cells","args","_i","arguments","setAttribute","removeAttribute","distinctStringValues","res","toString","getFilterMenuPostion","dialogObj","elementVisible","newpos","dlgWidth","enableRtl","calculatePosition","leftPos","calculateRelativeBasedPosition","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","removeAddCboxClasses","checked","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","cell","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Predicate","Date","setSeconds","getSeconds","setHours","predicateSt","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","mEle","cloneNode","childElementCount","isGroupAdaptive","enableVirtualization","isVirtualAdaptive","object","splits","getCustomDateFormat","colType","intl","Internationalization","getDatePattern","getExpandedState","gObj","hierarchyPrintMode","rows_1","getRowsObject","isDetailRow","allowPaging","printMode","pageSettings","currentPage","pageSize","gridModel","getPrintGridModel","childGrid","printGridModel","_a","Print","printGridProp","expandedRows","extendObjWithFn","deep","arguments_1","obj1","getPrototypeOf","concat","getPrototypesOfObj","cln","source","cpy","isObject","isArray","measureColumnDepth","max","depth","checkDepth","indices","refreshFilteredColsUid","filteredCols","getForeignKeyColumns","getColumnByField","setStateAndProperties","attribute","summaryIterator","callback","dateanddatetimerender","rtl","isInline","rowData","floatLabelType","placeholder","enabled","requestType","ValueFormatter","cultureName","this","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","setCulture","options","_this","allowSorting","allowResizing","allowFiltering","allowGrouping","allowReordering","showColumnMenu","enableGroupByFormat","filter","showInColumnChooser","edit","allowSearching","autoFit","sortDirection","getEditTemplate","editTemplateFn","getFilterTemplate","filterTemplateFn","merge","valueFormatter","toJSON","skip","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","editTemplate","filterTemplate","isForeignColumn","editType","params","fields","text","sortComparer","a_1","xObj","yObj","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","actionBegin","actionComplete","dataBound","columnDragStart","columnDrag","columnDrop","rowDragStartHelper","rowDragStart","rowDrag","rowDrop","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","reorderComplete","keyPressed","click","destroy","columnVisibilityChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshVirtualBlock","toolbarRefresh","autoCol","updateData","preventBatch","dialogDestroy","addDeleteAction","freezeRender","hierarchyPrint","expandChildGrid","rowPositionChanged","blazorId","scrollModule","isAsyncPrint","defered","Deferred","isDestroyed","on","events.contentReady","isContentReady","addEventListener","events.actionBegin","bind","events.onEmpty","events.hierarchyPrint","isPrintGrid","promise","then","removeColGroup","printGridObj","printModule","resolve","print","renderPrintGrid","printWind","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","printGrid","Grid","getQuery","clone","isPrinting","modules","getInjectedModules","injectedModues","setInjectedModules","notify","printgrid","log","getModuleName","appendTo","registeredTemplate","trigger","selectedRows","getContentTable","cancel","detach","cssProps","getCssProperties","contentDiv","headerDiv","overflowY","padding","firstElementChild","border","overflowX","waitingPop","_b","_c","printGridElement","printWindow","groupCaption","colSpan","getAttribute","colGroups","childNodes","off","removeEventListener","CellType","RenderType","ToolbarItem","CheckBoxFilter","filterSettings","existingPredicate","foreignKeyQuery","filterState","values","renderEmpty","locale","cBoxTrue","createCheckBox","label","cBoxFalse","insertBefore","attrs","firstChild","closeDialog","wireEvents","EventHandler","clickHandler","searchHandler","debounce","searchBoxKeyUp","unWireEvents","foreignKeyFilter","fColl","mPredicate","fPredicate","filterCollection","executeQuery","predicates","fpred","ignoreCase","ignoreAccent","handler","foreignFilter","getDataModule","isRemote","initalPredicate","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","localeObj","getConstant","updateDataSource","updateModel","actualPredicate","filteredColumns","sortedColumns","sortSettings","allowCaseSensitive","isFiltered","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","inputargs","Input","createInput","spinner","cBox","showDialog","columnName","columnType","isBlazor","isJsComponent","Dialog","content","close","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","cssClass","isPrimary","created","dialogCreated","dialogOpen","maxHeight","show","createSpinner","showSpinner","getAllData","Browser","isDevice","X","Y","openDialog","getColumns","destroyTemplate","clearFilter","events.preventBatch","instance","tagName","textContent","fltrBtnHandler","optr","searchInput","caseSen","enableCaseSensitivity","defaults","isNotEqual","itemsCnt","fObj","arg1","arg2","arg3","arg4","arg5","arg6","initiateFilter","firstVal","foreignQuery","queries","parsed","parseFloat","predicte","addDistinct","filterModel","filterChoiceCount","take","search","filterEvent","processSearch","getPredicateFromCols","getPredicate","predicateList","foreignColumn","prop","requiresCount","processDataOperation","filteredColumn","distinct","eventPromise","dataSuccess","state","getStateEventArgument","def","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","isInitial","allPromise","runArray","Promise","all","fullData","searchSettings","sSettings","map","f","cols","filterColumn","filteredData","getDistinct","records","processDataSource","events.actionComplete","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes_1","createCheckbox","cnt","selected","btn","btnObj","disabled","dataBind","cBoxes","nullCounter","selectAllValue","checkBox","isColFiltered","isRndere","checkbox","getCheckedState","hideSpinner","lookup","foreignDataObj","group","sort","generatePredicate","updateDateFilter","getCaseValue","p","Data","dataState","isPending","resolver","initDataManager","events.rowsAdded","addRows","events.rowPositionChanged","reorderRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","events.autoCol","refreshFilteredCols","dataManager","splice","toIndex","fromIndex","generateQuery","skipPage","columnQueryMode","select","selectQueryFields","filterQuery","searchQuery","aggregateQuery","sortQuery","virtualGroupPageQuery","pageQuery","groupQuery","isForeign","aggregate","pageCount","page","moduleName","isGrpFmt","formatGroupColumn","sortGrp","fn","sortBy","getSearchColumnFieldNames","getModulename","fGeneratePredicate","skipFoerign","actualFilter","checkBoxCols","defaultFltrCols","columns_1","excelPredicate","_d","_e","defaultFltrCols_1","column_1","getColumnByUid","sType","getKey","getPrimaryKeyFieldNames","crud","fromTable","changes","addedRecords","deletedRecords","changedRecords","saveChanges","insert","ready","deferred_1","catch","reject","date","getHours","getMinutes","getMilliseconds","pr","update","previousData","original","deff","endEdit","setState","offline","getState","pvtData","dataArgs","isDataChanged","editArgs","cancelEdit","colFieldNames","columns_2","Row","Cell","isSpanned","isRowSpanned","CellMergeRender","render","cellArgs","td","spannedCell","cellRenderer","getCellRenderer","cellType","cellSpan","rowSpan","targetCell_1","colSpanLen","colSpanRange","rowSpanRange","spanText","aria-colSpan","rowspan","aria-rowspan","Number","enableColumnVirtualization","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","rows","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","getVisibleColumns","item","RowRenderer","isSpan","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","tr","cells_1","isEdit","rowArgs","attrCopy","chekBoxEnable","isSelected","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","this_1","DetailExpand","Filter","CommandColumn","requestTypeAction","prevRowCell","isRowDragable","detailTemplate","scrollHeight","footerTemplate","summarycell","lastSummaryCell","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","class","RowModelGenerator","generateRows","startIndex","generateRow","ensureColumns","generateCell","RowDragIcon","pid","tIndex","parentGid","enableAltRow","refreshForeignKeyRow","generateCells","tmp","dummy","rowId","oIndex","opt","isDataCell","isTemplate","rowID","refreshRows","input","__extends","extendStatics","d","b","setPrototypeOf","__proto__","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","start","end","apply","currentViewData","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","DetailFooterIntent","sColumn","scolumn","single","setTemplate","types","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","initVal","reduce","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","getGroupedRecords","parentid","childId","generateDataRows","generateCaptionRow","rowCnt","aggregatesCount","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","parentID","childID","childGid","gSummary","getForeignKeyData","fkValue","unshift","cRow","ContentRender","freezeRows","movableRows","freezeRowElements","isLoaded","drop","events.columnDrop","droppedElement","rafCallback","arg","ariaService","setBusy","getPanel","getFrozenColumns","isFrozen","events.dataBound","allowTextWrap","events.freezeRender","case","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","renderPanel","innerDiv","setOptions","busy","setPanel","renderTable","virtualTable","virtualTrack","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","frozenRows","getHeaderContent","cellspacing","setColGroup","getColGroup","splitRows","idx","rowElements","refreshContentRows","hdrTbody","trElement","frag","createDocumentFragment","hdrfrag","fCont","mCont","cont","modelData","templatetoclear","rootNodes","parentNode","tbody","blockLoad","scrollTop","virtualInfo","offsets","offsets_1","vGroupOffsets","bSize","m","blockIndexes","contentPanel","rowObject","rowTemplateID","getRowTemplate","isTR","nodeName","lastElementChild","events.expandChildGrid","colcount","blazorTemplate","getHeaderTable","borderRightWidth","updateBlazorTemplate","appendContent","panel","contentTable","getRows","getMovableRows","getRowElements","getMovableRowElements","setRowElements","colgroup","colGroup","fRows","mRows","rowLen","cellLen","testRow","r","needFullRefresh","getDataRows","contentrows","clen","getNormalizedColumnIndex","displayVal","mTable","getContent","getMovableDataRows","isDetail","setDisplayNone","invokedFromMedia","hideAtMedia","updateMediaColumns","replaceChild","Droppable","accept","canSkip","setSelection","set","clearAll","getRowByIndex","getVirtualRowIndex","getMovableRowByIndex","module","enable","setRowObjects","HeaderRender","frzIdx","notfrzIdx","sender","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","lockColumn","colIndex","getColumnIndexByField","lineHeight","dragStart","events.columnDragStart","event","drag","closest","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","widthService","events.columnPositionChanged","colPosRefresh","toggleStackClass","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","createTable","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","Header","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getHeaderCells","len_2","HeaderIndent","DetailHeader","RowDragHIcon","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isFirstCol","isLastCol","isMovable","lastCol","getCellCnt","frzObj","refreshFrozenHdr","isPartial","isComp","stackedLockColsCount","getStackedLockColsCount","frozenColumns","StackedHeader","getColSpan","getColumnIndexByUid","lockColsCount","frozenCnt","frzCol","rowIndex","mTblColGrp","refreshUI","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","showDropArea","headerRows","Draggable","dragTarget","distance","abort","CellRenderer","locator","localizer","formatter","tabindex","rowChkBox","getGui","evaluate","fData","dummyData","templateID","str","parseInt","tData","invokeFormatter","refreshCell","refreshTD","elements_1","innerHtml","displayAsCheckBox","localeStr","fromFormatter","appendHtml","persistSelection","checkWrap","setAttributes","isNaN","property","buildAttributeFromCell","clipMode","isCheckBoxType","colindex","AriaService","name","config","setExpand","expand","setSort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","haspopup","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","checkAllWrap","matchFlColumns","extendPrepareHeader","gridObj","headerTempID","headerTextAlign","alignment","matchFilteredColumns","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","tempID","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","RowDragDropRenderer","nodeElement","RowDragDropHeaderRenderer","Render","emptyGrid","l10n","renderer","headerRenderer","getRenderer","contentRenderer","Content","isLayoutRendered","emptyRow","setWidth","setHeight","setPadding","refreshDataManager","resetTemplates","getSelectedRecords","dataLength","totalRecordsCount","prevPageMoving","pagerModule","pagerObj","gridColumns","detailTemplateID","blazorTemplates","resetBlazorTemplate","toolbarTemplate","k","refreshComplete","isFActon","isNeedForeignAction","deffered","getFData","deffered_1","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","dmSuccess","dmFailure","renderEmptyRow","isTrigger","spanCount","colspan","dynamicColumnChange","getCurrentViewRecords","updateColumnType","record","validationRules","isColTypeDef","actionArgs","updatesOnInitialRender","isInitialLoad","events.dataReady","alert","events.toolbarRefresh","error","buildColumns","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","group0","groupN","addWhere","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","uGroup","itemGroup","uGroupItem","data_1","CellRendererFactory","cellRenderMap","getEnumValue","ServiceLocator","services","register","RendererFactory","rendererMap","rName","ColumnWidthService","totalColumnsWidth","setColumnWidth","getTableWidth","setMinwidthBycalculation","tWidth","difference","tmWidth","collection_1","minWidth","isWidthUndefined","setUndefinedColumnWidth","cWidth","getWidth","tgridWidth","setWidthToTable","clear","Boolean","elementWidth","headerCol","header","fWidth","formatUnit","mHdr","contentCol","editTableCol","getSiblingsHeight","getHeightFromDirection","sibling","isWidUndefCount","maxWidth","calcMovableOrFreezeColWidth","tableType","setWidthToFrozenTable","freezeWidth","setWidthToMovableTable","movableWidth","isColUndefined","isWidthAuto","setWidthToFrozenEditTable","setWidthToMovableEditTable","FocusStrategy","currentInfo","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","force","isContent","isHeader","clearOutline","beforeArgs","byKey","byClick","clickArgs","onKeyPress","skipOn","keyArgs","bValue","outline","swapInfo","jump","toHeader","toFrozen","getNextCurrent","active","setActiveByKey","clearIndicator","preventDefault","activeElement","getFocusedElement","fContent","fHeader","setFocusedElement","setTimeout","addFocus","info","isFocused","isJump","container","getInfo","cellIndex","focusedColumnUid","getColumnByIndex","refreshMatrix","FixedContentFocus","ContentFocus","FixedHeaderFocus","HeaderFocus","cFocus","updateRow","isRowTemplate","generate","frozenColumnsCount","newMovableRows","newFrozenRows","handlerInstance","index_1","focusElement","cellPosition","gridPosition","min","innerWidth","documentElement","bottom","innerHeight","clientHeight","passiveHandler","event.keyPressed","event.click","event.contentReady","event.headerRefreshed","restoreFocus","evt","event.onEmpty","internalCellFocus","getPrevIndexes","forgetPrevious","actions","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","navigator","inValid","vector","rIndex","cIndex","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","editNextRow","allowNextRowEdit","isLastCellPrimaryKey","visibleIndex","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","child","isDirty","frozenSwap","enterFrozen","previous","optionals","defaultLen","isData","isSelectable","isCellWidth","current1","current2","current3","SearchBox","searchFocus","searchBlur","wireEvent","unWireEvent","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","PageSettings","Property","__assign","assign","t","s","n","Selection","selectedRowIndexes","selectedRowCellIndexes","selectedRecords","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","isCancelDeSelect","isPreventCellSelect","disableUI","isPersisted","cmdKeyPressed","factory","initializeSelection","mouseDownHandler","onActionBegin","fDataUpdate","rowObj","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","clearSelection","isEditing","editModule","formObj","validate","isPersistSelection","getSelectedMovableRow","getCurrentBatchRecordChanges","currentRecords","getBatchChanges","primaryKey","selectRow","isToggle","enableSimpleMultiRowSelection","addRowsToSelection","selectData","selectedRow","selectedMovableRow","isRemoved","getRowObjectFromUID","isRowType","isRowSelected","hasAttribute","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","actualTarget","addMovableArgs","clearSelectedRow","clearRow","updateRowSelection","selectRowIndex","updateRowProps","targetObj","mRow","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedData","prevRow","rowIndexes_1","rowIdx","checkboxColumn","rowIndexes_2","isUnSelected","enableToggle","rowDeselect","addRemoveClassesForRow","isInteracted","reverse","clearRowSelection","selectedEle","updatePersistCollection","updateCheckBoxes","chkState","pKey_1","updatePersistDelete","pKey","chkBox","nextElementSibling","checkedTarget","setCheckAllState","pop","clearCellSelection","currentRow","checkSelectAllClicked","getCheckAllStatus","updatePersistSelectedData","movableRow","rowDeselectObj","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","isUndefined","prevCIdxs","successCallBack","previousRowCell","prevECIdxs","getCellIndex","cellSelectingArgs","clearCell","updateCellSelection","updateCellProps","currentCell","selectedRowCellIndex","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","cellSelectedArgs","selectCells","rowCellIndexes","cellSelectArgs","previousRowCellIndex","addRowCellIndex","addCellsToSelection","hideAutoFill","getMovableRowsObject","cellIndexes_1","selectedCellIdx","cellDeselect","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","bdrBottom","hideBorders","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","startAFCell","startCell","endAFCell","selectLikeExcel","startDIndex","isAutoFillSel","showAFBorders","selectLikeAutoFill","startDCellIndex","drawBorders","createBorders","positionBorders","updateStartEndCells","bdrLeft","showBorders","stOff","endOff","endCell","parentOff","offsetParent","bdrRight","bdrTop","drawAFBorders","bdrAFBottom","createAFBorders","positionAFBorders","bdrAFLeft","bdrAFRight","bdrAFTop","hideAFBorders","updateValue","updateCell","isApply","startrowIdx","startCellIdx","endrowIdx","endCellIdx","colLen","cellIdx","startCellIndex","trIdx","mouseUpHandler","mUPTarget","updateAutoFillPosition","updateStartCellsIndex","autofill","enableAutoFill","clientRect","isDrag","allowRowDragAndDrop","enableDrag","isUpdate","postion","clearSelAfterRefresh","events.initialEnd","events.inBoundModelChanged","onPropertyChanged","onCellFocused","actionBeginFunction","actionCompleteFunction","refreshHeader","addEventListener_checkbox","removeEventListener_checkbox","isMacOS","userAgent","keyDownHandler","keyUpHandler","beforeFragAppend","getCheckAllBox","checkBoxSelectionChanged","initPerisistSelection","checkboxMode","selectedRowIndex","gobj","chkField","ensureCheckboxFieldSelection","proxy_1","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","checkSelectAllAction","cRenderer","editForm","checkSelectAll","stateStr","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","updateSelectedRowIndex","selectedVal","isInteraction","checkedLen","spanEle","keyCode","popUpClickHandler","chkSelect","checkboxOnly","showPopup","headerAction","thLen","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","applyUpDown","isAdd","detailIndentCell","dragdropIndentCell","onDataBoundFunction","actionCompleteFunc","actionCompleteHandler","events.click","resizeEndFn","isSelectedRowIndexUpdating","Search","searchString","refreshSearch","onSearchComplete","cancelBeginEvent","ShowHide","showBy","getToggleFields","hide","hideBy","getKeyBy","currentViewCols","allowSelection","col1","col2","Scroll","lastScrollTop","previousValues","oneTimeReady","uiupdate","toolbarModule","toolbar","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","removePadding","setScrollLeft","headerModule","getMovableHeader","scrollLeft","onContentScroll","scrollTarget","isPreventScrollEvent","isFooter","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","setPageXY","touches","pageX","pageY","getFooterContent","sLeft","sHeight","css","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","pasteHandler","target_1","clipBoardTextArea","x_1","scrollX","y_1","scrollY","scrollTo","paste","isAvail","dataRows","fTr","mTr","selectionModule","aria-label","copy","setCopyData","withHeader","getSelection","selectedIndexes","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","getSelectedRowCellIndexes","stringify","SortDescriptor","SortSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","inViewIndexes","media","freezeRefresh","Component","pageTemplateChange","enableLogger","needsID","Grid_1","Inject","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","scrollPosition","currentObject","pagerTemplate","addOnPersist","requiredModules","member","allowExcelExport","allowPdfExport","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","mediaCol","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","NumberFilter","TextFilter","DateFilter","DateTimeFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","renderComplete","renderModule","searchModule","getMediaColumns","checkLockColumns","processModel","gridRender","addListener","updateStackedFilter","gcol","getShowHideService","pushMediaColumn","matchMedia","mediaQueryUpdate","mediaColumn","matches","showHider","refreshMediaCol","footerContent","eventInitializer","hasGridChild","unwireEvents","removeListener","destroyDependentModules","toolTipObj","keyboardModule","focusModule","enableBoxSelection","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","maintainSelection","updateRTL","ej2_instances","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","deepWatch","pKeyField","props","setRowData","gResult_1","enableHover","fn_1","muteOnChange","filterModule","refreshFilter","headerRows_1","updateColumnModel","updateFrozenColumns","updateLockableColumns","frozenCount","movableCount","isRefresh","inview","vLen","stackedHeader","individualColumn","stackedColumn","getLocaleConstants","setColumnIndexesInView","setGridHeaderContent","contentModule","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getElementsByClassName","getFooterContentTable","getPager","gridPager","setGridPager","getRowInfo","row_1","rowsObject","mrows","dRows","setCellValue","fieldIdx","pkName","movableSelectedRow","rowObjects","movableRowObjects","sRow","getColumnHeaderByField","getColumnHeaderByUid","getStackedColumns","getUidByColumnField","getColumnFieldNames","columnNames","getDetailTemplate","getSelectedRows","showColumns","hideColumns","getFrozenCount","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","visibleFrozenColumns","goToPage","pageNo","updateExternalMessage","message","sortColumn","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","actualFilterValue","actualOperator","clearFiltering","removeFilteredColsByField","isClearFilterBar","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","editCell","saveCell","enableToolbarItems","isEnable","enableItems","clipboardModule","recalcIndentWidth","indentWidth","perPixel","rowDropSettings","targetID","reorderColumns","fromFName","toFName","reorderModule","reorderColumnByIndex","reorderColumnByTargetIndex","fromIndexes","rowDragAndDropModule","refreshDataSource","disableRowDD","disValue","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","L10n","valueFormatterService","flag","gCols","sCols","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","Tooltip","opensOn","getTooltipStatus","htable","ctable","isEllipsisTooltip","prevElement","elemNames","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","onKeyPressed","mouseClickHandler","focusOutHandler","dblClickHandler","keyPressHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","dataBoundFunction","isChildGrid","checkEdit","dataRow","filterClear","ariaOwns","keyPress","editFormValidate","localStorage","getItem","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","arr","localCol","tCol","presskey","stopImmediatePropagation","injectedModules","refreshColumns","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","groupExpandAll","expandAll","groupCollapseAll","collapseAll","clearGrouping","ungroupColumn","openColumnChooser","detailCollapseAll","detailRowModule","detailExpandAll","isContextMenuOpen","isOpen","ensureModuleInjected","propertyNames","clearTemplate","loggerModule","applyBiggerTheme","getPreviousRowData","hideScroll","cTable","fTable","getRowIndexByPrimaryKey","Complex","Event","NotifyPropertyChanges","Sort","contentRefresh","isModelChanged","aria","currentTarget","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","isFromGroup","lastSortedCol","isRemove","allowMultiSorting","backupSettings","removeSortIcons","updateSortedCols","lastSortedCols","lastCols","restoreSettings","refreshSortSettings","addSortIcons","refreshSortIcons","refreshing","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","next","last","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","enableExternalMessage","checkpagesizes","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","pagerAllDropDown","All","containerModule","pagerMessageModule","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","setPageSize","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","getPagerTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","PagerDropDown","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","convertValue","defaultValue","dropDownListObject","DropDownList","change","onChange","beforeValueChange","pageSizeValue","ExternalMessage","externalMessage","Page","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","appendToElement","handlers","load","complete","updateLayout","inboundChange","FilterCellRenderer","fltrData","filterBarTemplate","showClearButton","Element","templateWrite","write","FlMenuOptrUI","customFltrOperators","customFilterOperators","renderOperatorUI","dlgConetntEle","dlgObj","optrData","customOptr","operators","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","optrLen","getFlOperator","StringFilterUI","serLocator","actObj","getAutoCompleteOptions","AutoComplete","sortOrder","openPopup","filterType","getOptrInstance","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","NumberFilterUI","numericTxtObj","NumericTextBox","BooleanFilterUI","dropInstance","drpuiObj","DateFilterUI","fltrSettings","inputElem","datePickerObj","DatePicker","DateTimePicker","FilterMenuRenderer","fltrObj","isDialogOpen","colTypes","string","number","boolean","datetime","flMuiObj","renderDlgContent","getElementById","mainDiv","dlgDiv","showCloseIcon","closeOnEscape","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","renderFlValueUI","valueDiv","instanceofFilterUI","compElement","ui","dlgContentEle","flValue","flOptrValue","targ","fltrValue","iconClass","flIcon","ExcelFilter","getCMenuDS","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","menu","ul","icon","createMenuElem","ensureTextFilter","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","submenu","isCMenuOpen","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","isIE","pageYOffset","getCMenuYPosition","MouseEvent","contextWidth","targetBorder","filterLength","renderDialogue","complexFieldName","isModal","overlayClick","removeDialog","createdDialog","removeObjects","datePicker","dateTimePicker","renderCustomFilter","dlgFields","fieldSet","displayName","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","andRadio","firstOperator","firstValue","secondOperator","secondValue","arg7","arg8","elementID","isFirst","fieldElement","xlfloptr","menuText","getSelectedValue","getSelectedText","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","RadioButton","orRadio","elementId","isFilteredCol","fltrPredicates","columnObj","getExcelFilterData","valueInput","renderAutoComplete","renderNumericTextBox","renderDate","renderDateTime","predIndex","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","completeAction","columnvalue","mapObject","performComplexDataOperation","returnObj","duplicateMap","cellText","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","rowdrag","detail","updateFilterMsg","filterBarElement","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","filterMenuClose","columnMenuFilter","filterIconClickHandler","filterCell","checkForSkipInput","filterStatusMsg","applyColumnFormat","addFilteredClass","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","refreshFilterSettings","updateFilter","getFilterBarElement","colUid","filteredcols","fltrElement","isClose","filterDialogOpen","customOperators","filterHandler","localizedStrings","fCell","filteredColsUid","currentFilterColumn","closeHeaderEle","processFilter","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","stopTimer","startTimer","timer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","datepickerEle","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","newarray","resizeColumn","footerTable","headerTextClone","contentTextClone","footerTextClone","indentWidthClone","detailsElement","contentText","footerText","wHeader","wContent","wFooter","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","resizeStart","callAutoFit","getTargetColumn","refreshColumnWidth","refreshStackedColumnWidth","mtbody","ftbody","mtr","ftr","removeProperty","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","getColData","mousemove","setHelperHeight","colData","finalColumns","getSubColumns","calulateColumnsWidth","finalColumns_1","updateHelper","totalWidth","colWidth","subColumns","isFrozenColResized","doubleTapEvent","getStackedWidth","calcPos","floor","cls","fLeft","parentOffset","offset","doc","ownerDocument","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","bool","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","newIndex","destElement","oldIdx","column_2","destIndex","reorderByColumn","getColParent","srcIdx","flatColumns","fTh","mTh","fHeaders","reorderSingleColumn","fColumn","toColumn","reorderMultipleColumns","fromFNames","parent_1","moveTargetColumn","reorderSingleColumnByTarget","reorderMultipleColumnByTarget","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseLeft","cliRectBaseRight","scrollElem","cliRectBase","RowDD","isOverflowBorder","selectedRowColls","startedRow","processArgs","dragelement","events.rowDragStartHelper","removeCell","exp","dropCountEle","spanCssEle","events.rowDragStart","dragStartData","dropElem","getElementFromPosition","hoverState","originalEvent","events.rowDrag","moveDragRows","bottomborder","gridcontentEle","getScrollWidth","removeBorder","targetEle","dropElement","stRow","dropIndex","events.rowDrop","targetRow","deleteCell","initializeDrag","onDataBoundFn","draggedRecords","dropIdx","actualIdx","len1","reorderRow","draggable","scrollPixel_1","setScrollDown","scrollPixel_2","scrollPixel","targetElement","setBorder","removeFirstRowBorder","removeLastRowBorder","rowElement","gridheaderEle","islastRowIndex","getTargetIdx","singleRowDrop","srcControl","startedRowIndex","srcControl_1","isSingleRowDragDrop","targetIndex","isAppliedGroup","isAppliedUnGroup","groupGenerator","dropArea","onGroupAggregates","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","rowNodes","isHide","expandElem","toExpand","updateVirtualRows","rObj","expandCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","groupAddSortingQuery","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","editedData","iterateGroupAggregates","summaryRows","dataUid","updatedData","initData","deletedCols","changeds","mergeData","pKeyVal","cItem","eData","aggr","aggrds","DetailRow","refreshColSpan","toogleExpandcollapse","nextRow","detailRow","data-uid","detailCell","nextSibling","events.blazorId","getGridModel","parentPrimaryKeys","parentKeyField","parentRowData","promiseResolve","gridElem","detailElement","getTDfromIndex","collapse","moduleObj","detailrows","detailrow","Toolbar","predefinedItems","gridID","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","createToolbar","bindSearchEvents","searchElement","refreshToolbarItems","updateSearchBox","getItems","tool","clicked","toolbarClickHandler","viewStr","items_1","disableItems","hasData","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","items_2","gID","newArgs","toolbarargs","tarElement","offsetTop","searchBoxObj","FooterRenderer","gridModule","modelGenerator","movableContent","fDiv","mDiv","frozenContent","tFoot","freezeTable","renderSummaryContent","cStart","cEnd","summaries","dummies","fragment","rowrenderer","srow","frozenDiv","onScroll","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","updateFooterTableWidth","fCol","refreshFooterRenderer","onAggregates","mergeds","initds","addrow","idVal","currentds","currentData","curIndx","agrVal","SummaryCellRenderer","refreshWithAggregate","tempObj","cellNode","curCell","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","getFormatFromType","cModel","InterSectionObserver","fromWheel","touchMove","sentinelInfo","up","check","containerRect","entered","pageHeight","axis","down","observe","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounced50","axes","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","cache","groups","rowModelGenerator","notifyArgs","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","isBlockAvailable","getStartIndex","median","updateGroupRow","getPage","block","columnIndexes","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","refreshColOffsets","currentFirst","iterateGroup","oRow","shift","VirtualContentRenderer","prevHeight","preventEvent","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","getBlockHeight","observer","adjustTable","scrollListener","scrollArgs","viewInfo","getInfoFromView","prevInfo","tempBlocks","infoType","vHeight","getPageFromTop","blocks","ensureBlocks","every","mIdx","old","isEndBlock","getGroupedTotalBlocks","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","sTop","setVirtualHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","cHeight","isOnenter","endTranslate","blockHeight","maxBlock","onEntered","isWheel","scrollValues","getBlockSize","totalBlocks","startIdx","rem","size","refreshVirtualElement","VirtualHeaderRenderer","gen","tablewidth","xValue","yValue","transform","VirtualScroll","ensurePageSize","blockSize","InlineEditRender","addNew","mTbody","newRowPosition","getEditElement","renderMovableform","form","movableForm","updateFreezeEdit","getFreezeRow","fHdr","tdElement","refreshFreezeEdit","fCls","mTd","updateFrozenCont","isDragable","td_1","BatchEditRender","columnObject","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","dialog","primaryKeyValue","allowDragging","dialogClose","editTemplateID","checkColumnIsGrouped","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","cols_1","mTdElement","fTdElement","tArgs","isInput","BooleanEditCell","activeClasses","classNames","selectChkBox","editRow","checkBoxChange","DropDownEditCell","filtering","ddFiltering","ddActionComplete","popupHeight","dlgElement","NumericEditCell","instances","DefaultEditCell","NormalEdit","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","begineditargs","editargs","applyFormValidation","edFail","form1","form2","mFormObj","isDlg","dlgWrapper","dlgForm","getCurrentEditedData","mForm","endEditArgs","addedRowIndex","destroyElements","destroyWidgets","destroyForm","editHandler","edSucc","editSuccess","editFailure","updateCurrentViewData","requestSuccess","stopEditStatus","closeEditArgs","addArgs","dataLen","tmpRecord","contained","mElem","editMElem","InlineEdit","BatchEdit","cellDetails","onBeforeCellFocused","editNextValCell","setCellIdx","isAddRow","validateFormObj","editCellFromIndex","argument","batchChanges","isAdded","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchSave","checkAllBox","removeSelectedData","beforeBatchSaveArgs","mergeBatchChanges","i_1","addRowObject","isTop","getIndexFromData","beforeBatchDeleteArgs","uniqueid","nonMovableRows","defaultData","getDefaultData","beforeBatchAddArgs","findNextEditableCell","args1","isValOnly","validation","checkNPCell","dValues","rowData_1","mRowData","colIdx","getDataByIndex","getCellIdx","cellEditArgs","isColored","setChanges","rowcell","isForceSave","cloneEditedData","previousValue","cellSaveArgs","visibleColumns","addCancelWhilePaging","DialogEdit","DatePickerEditCell","TemplateEditCell","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","editCellType","tapEvent","Global","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","batchCancel","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","inputElements","inputs","restrictedRequestTypes","preventObj","rules","mRules","createFormObj","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","getElemTable","outerHTML","isFHdr","inputName","gcontent","isScroll","inputClient","validationForBottomRowPos","arrow","defaultView","getComputedStyle","getPropertyValue","AddEditors","editors","dropdownedit","numericedit","datepickeredit","datetimepickeredit","booleanedit","defaultedit","templateedit","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","prevShowedCols","rtlUpdate","enableAfterRenderEle","hideDialog","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","targetdlg","hideOpenedDialog","addcancelIcon","refreshPosition","mOpenDlg","renderChooserList","updateIntermediateBtn","beforeOpen","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","uncheckedLength","ulElement","columnStateChange","dialogInstance","stateColumns","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","okButton","clearSearch","buttonEle","selectedCbox","nMatchele","checkBoxClickHandler","checkstate","updateSelectAll","columnUid","visibleCols","columnUID","srchShowCols","searchData","itemsLen","hideCols","gdCol","cclist","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","cbox","hideColState","showColState","cccheckboxlist","searchValue","proxy","interval","openCC","dlgEle","dlgLen","ExportHelper","hideColumnInclude","getGridRowModel","processColumns","childGridLevel","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","processHeaderCells","generateActualColumns","getConvertedWidth","actualColumns","getCellCount","appendGridCells","gridRows","isIgnoreFirstCell","gridColumn","option","checkAndExport","gridPool","globalResolve","failureHandler","childGridObj","createChildGrid","exportType","exportId","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","exportProperties","isCsv","hierarchyExportMode","processRecords","exportingSuccess","blobPromise","processInnerRecords","allPromise_1","groupedColLength","blankRows","multipleExport","worksheets","processExcelHeader","processGridExport","organisedRows","organiseRows","processExcelFooter","sheet","Workbook","currencyCode","saveAsBlob","fileName","save","initialIndex","childRows","excelRows","theme","groupIndent","processHeaderContent","processRecordContent","returnType","currentViewRecords","excelRow","processRecordRows","processGroupedRows","processAggregates","dataSource_1","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","grouping","outlineLevel","isCollapsed","gCell","cellValue","fkData","excelCellArgs","hAlign","styleIndex","getColumnStyle","mergeOptions","returnVal","actionFailure","beforeDataBound","childGridCell","excelExportProps","gRow","intent","isHidden","rec","byGroup","summaryModel","groupSummaryRows","sRows","customIndex","rows_2","eCell","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","getAggreateValue","aggregateStyle","gridCellStyle","numberFormat","JSON1","JSON2","attrname","spannedCells","currentCellIndex","gridCell","getIndex","getHeaderThemeStyle","excelHeaderCellArgs","parseStyles","getRecordThemeStyle","fontSize","borders","color","bold","updateThemeStyle","themestyle","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","PdfExport","customDataSource","isGrouping","pdfDocument","exportWithData","PdfDocument","processExport","pdfGrid","section","sections","processSectionExportProperties","pdfPage","pages","draw","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","gridTheme","processExportProperties","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","returnValue","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","fontFamily","fontName","getFontFamily","fontStyle","getFontStyle","pdfColor","fontColor","penBrushColor","hexToRgb","g","borderCaption","getBorderStyle","PdfBorders","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","groupSummaryModel","columnCount","gridHeader","getHeader","cellLength","pdfCell","getHorizontalAlignment","getVerticalAlignment","allowHorizontalOverflow","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","txt","gridRow","getColumn","setRecordThemeStyle","borderRecord","processCellStyle","gridRow_1","cellPadding","PdfPaddings","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","italic","underline","strikeout","borderWidth","borderColor","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","TimesRoman","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","button","onclick","buttonObj","Button","commandType","commandClickHandler","commandColumn","commandCol","commandclickargs","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","rowInfo","targetRowdata","updateItemStatus","getLocaleText","showItems","closestGrid","parentItem","hideSepItems","showSepItems","dItem","ensureDisabledStatus","ensureTarget","hideItems","eventArgs","ensureFrozenHeader","substr","generateID","AutoFitAll","AutoFit","CsvExport","export","PrevPage","FreezeRowModelGenerator","isFrzLoad","FreezeContentRender","setFrozenContent","setMovableContent","getMovableContent","getFrozenContent","mTbl","FreezeRender","refreshFreeze","setFrozenHeight","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","movableHeader","getFrozenHeader","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","borderBottom","fRowSpan","mRowSpan","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenHeader","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","field_1","colChooser","getFilter","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initEvent","initForeignKeyColumns","generateQueryFormData","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","isTrue","destroyEvent","BASE_DOC_URL","DOC_URL","WARNING","ERROR","INFO","Logger","patchadaptor","detailLists","cOp","success","console","logType","generateMessage","beforeSend","request","settings","module_missing","injected","promise_enabled","primary_column_missing","selection_key_missing","actionfailure","formatError","formatErrorHandler","ajaxError","ajaxErrorHandler","locale_missing","lObj","limitation","check_datasource_columns","virtual_height","grid_remote_edit","grid_sort_comparer","resize_min_max","action_disabled_column","exporting_begin","exporting_complete","foreign_key_failure","initial_action","frozen_rows_columns","column_type_missing","datasource_syntax_mismatch","dataStateChange","jsonResult","responseText","responseURL","statusText","AutoCompleteEditCell","parentObj","isInlineEdit","selectedValues","valObj","ComboboxEditCell","parentObject","isInlineMode","ComboBox","finalValue","inputEle","MultiSelectEditCell","MultiSelect","TimePickerEditCell","complexField","rowDataValue","TimePicker","ToggleEditCell","chkBoxElement","Switch","switchModeChange","MaskedTextBoxCellEdit","parentInstance","columnField","MaskedTextBox","mask","index.Grid","index.Filter","index.Page","index.Selection","index.Sort","index.Group","index.Reorder","index.RowDD","index.DetailRow","index.Toolbar","index.Aggregate","index.Search","index.VirtualScroll","index.Edit","index.Resize","index.ExcelExport","index.PdfExport","index.CommandColumn","index.ContextMenu","index.Freeze","index.ColumnMenu","index.ColumnChooser","index.ForeignKey"],"mappings":"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CVvlC,EAAKne,UAAW,iBAAc,IACjCkjD,IACIQ,WAAS,IACVvlC,EAAKne,UAAW,oBAAiB,IACpCkjD,IACIQ,WAAS,QACVvlC,EAAKne,UAAW,sBAAmB,IACtCkjD,IACIozB,WACDn4D,EAAKne,UAAW,cAAW,IAC9BkjD,IACIozB,WACDn4D,EAAKne,UAAW,gBAAa,IAChCkjD,IACIozB,WACDn4D,EAAKne,UAAW,WAAQ,IAC3BkjD,IACIozB,WACDn4D,EAAKne,UAAW,mBAAgB,IACnCkjD,IACIozB,WACDn4D,EAAKne,UAAW,oBAAiB,IACpCkjD,IACIozB,WACDn4D,EAAKne,UAAW,qBAAkB,IACrCkjD,IACIozB,WACDn4D,EAAKne,UAAW,kBAAe,IAClCkjD,IACIozB,WACDn4D,EAAKne,UAAW,qBAAkB,IACrCkjD,IACIozB,WACDn4D,EAAKne,UAAW,oBAAiB,IACpCkjD,IACIozB,WACDn4D,EAAKne,UAAW,gBAAa,IAChCkjD,IACIozB,WACDn4D,EAAKne,UAAW,wBAAqB,IACxCkjD,IACIozB,WACDn4D,EAAKne,UAAW,mBAAgB,IACnCkjD,IACIozB,WACDn4D,EAAKne,UAAW,kBAAe,IAClCkjD,IACIozB,WACDn4D,EAAKne,UAAW,qBAAkB,IACrCkjD,IACIozB,WACDn4D,EAAKne,UAAW,oBAAiB,IACpCkjD,IACIozB,WACDn4D,EAAKne,UAAW,oBAAiB,IACpCkjD,IACIozB,WACDn4D,EAAKne,UAAW,mBAAgB,IACnCkjD,IACIozB,WACDn4D,EAAKne,UAAW,sBAAmB,IACtCkjD,IACIozB,WACDn4D,EAAKne,UAAW,qBAAkB,IACrCkjD,IACIozB,WACDn4D,EAAKne,UAAW,sBAAmB,IACtCkjD,IACIozB,WACDn4D,EAAKne,UAAW,iBAAc,IACjCkjD,IACIozB,WACDn4D,EAAKne,UAAW,iBAAc,IACjCkjD,IACIozB,WACDn4D,EAAKne,UAAW,oBAAiB,IACpCkjD,IACIozB,WACDn4D,EAAKne,UAAW,kBAAe,IAClCkjD,IACIozB,WACDn4D,EAAKne,UAAW,uBAAoB,IACvCkjD,IACIozB,WACDn4D,EAAKne,UAAW,6BAA0B,IAC7CkjD,IACIozB,WACDn4D,EAAKne,UAAW,4BAAyB,IAC5CkjD,IACIozB,WACDn4D,EAAKne,UAAW,yBAAsB,IACzCkjD,IACIozB,WACDn4D,EAAKne,UAAW,+BAA4B,IAC/CkjD,IACIozB,WACDn4D,EAAKne,UAAW,wBAAqB,IACxCkjD,IACIozB,WACDn4D,EAAKne,UAAW,0BAAuB,IAC1CkjD,IACIozB,WACDn4D,EAAKne,UAAW,sBAAmB,IACtCkjD,IACIozB,WACDn4D,EAAKne,UAAW,wBAAqB,IACxCkjD,IACIozB,WACDn4D,EAAKne,UAAW,yBAAsB,IACzCkjD,IACIozB,WACDn4D,EAAKne,UAAW,sBAAmB,IACtCkjD,IACIozB,WACDn4D,EAAKne,UAAW,mBAAgB,IACnCkjD,IACIozB,WACDn4D,EAAKne,UAAW,cAAW,IAC9BkjD,IACIozB,WACDn4D,EAAKne,UAAW,cAAW,IAC9BkjD,IACIozB,WACDn4D,EAAKne,UAAW,mBAAgB,IACnCkjD,IACIozB,WACDn4D,EAAKne,UAAW,8BAA2B,IAC9CkjD,IACIozB,WACDn4D,EAAKne,UAAW,eAAY,IAC/BkjD,IACIozB,WACDn4D,EAAKne,UAAW,kBAAe,IAClCkjD,IACIozB,WACDn4D,EAAKne,UAAW,kBAAe,IAClCkjD,IACIozB,WACDn4D,EAAKne,UAAW,qBAAkB,IACrCkjD,IACIozB,WACDn4D,EAAKne,UAAW,wBAAqB,IACxCkjD,IACIozB,WACDn4D,EAAKne,UAAW,sBAAmB,IACtCkjD,IACIozB,WACDn4D,EAAKne,UAAW,gBAAa,IAChCkjD,IACIozB,WACDn4D,EAAKne,UAAW,mBAAgB,IACnCkjD,IACIozB,WACDn4D,EAAKne,UAAW,eAAY,IAC/BkjD,IACIozB,WACDn4D,EAAKne,UAAW,eAAY,IAC/BkjD,IACIozB,WACDn4D,EAAKne,UAAW,gBAAa,IAChCkjD,IACIozB,WACDn4D,EAAKne,UAAW,kBAAe,IAClCkjD,IACIozB,WAC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"}