{"version":3,"file":"ej2-pdfviewer.min.js","sources":["../../src/pdfviewer/annotation/annotation.js","../../src/pdfviewer/annotation/link-annotation.js","../../src/pdfviewer/annotation/text-markup-annotation.js","../../src/pdfviewer/base/navigation-pane.js","../../src/pdfviewer/base/pdfviewer-base.js","../../src/pdfviewer/base/text-layer.js","../../src/pdfviewer/base/context-menu.js","../../src/pdfviewer/magnification/magnification.js","../../src/pdfviewer/navigation/page-navigation.js","../../src/pdfviewer/thumbnail-view/thumbnail-view.js","../../src/pdfviewer/toolbar/toolbar.js","../../src/pdfviewer/toolbar/annotation-toolbar.js","../../src/pdfviewer/pdfviewer.js","../../src/pdfviewer/bookmark-view/bookmark-view.js","../../src/pdfviewer/text-selection/text-selection.js","../../src/pdfviewer/text-search/text-search.js","../../src/pdfviewer/print/print.js"],"sourcesContent":["import { TextMarkupAnnotation } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     * @param type\n     * @returns void\n     */\n    Annotation.prototype.setAnnotationMode = function (type) {\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.addAction = function (pageNumber, index, annotation, actionString, property) {\n        var action = { pageIndex: pageNumber, index: index, annotation: annotation, action: actionString, modifiedProperty: property };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    Annotation.prototype.updateToolbar = function () {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // tslint:disable-next-line:max-line-length\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // tslint:disable-next-line:max-line-length\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        this.popupNote.style.display = 'none';\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // tslint:disable-next-line:max-line-length\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // tslint:disable-next-line:max-line-length\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // tslint:disable-next-line:max-line-length\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // tslint:disable-next-line:max-line-length\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // tslint:disable-next-line:max-line-length\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () { _this.noteContentElement.focus(); });\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // tslint:disable-next-line:max-line-length\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // tslint:disable-next-line:max-line-length\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // tslint:disable-next-line:max-line-length\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // tslint:disable-next-line:max-line-length\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // tslint:disable-next-line:max-line-length\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line:max-line-length\n        var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1];\n        // tslint:disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    return Annotation;\n}());\nexport { Annotation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n            }\n            var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n            if (pageDiv) {\n                var pageChildNodes = pageDiv.childNodes;\n                for (var i = 0; i < pageChildNodes.length; i++) {\n                    var childElement = pageChildNodes[i];\n                    if (childElement.tagName === 'A') {\n                        if (isAdd) {\n                            childElement.classList.add('e-pv-onselection');\n                        }\n                        else {\n                            childElement.classList.remove('e-pv-onselection');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.\n * @hidden\n */\nvar TextMarkupAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextMarkupAnnotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.currentTextMarkupAddMode = '';\n        /**\n         * @private\n         */\n        this.selectTextMarkupCurrentPage = null;\n        /**\n         * @private\n         */\n        this.currentTextMarkupAnnotation = null;\n        this.currentAnnotationIndex = null;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.highlightColor = pdfViewer.highlightSettings.color;\n        this.underlineColor = pdfViewer.underlineSettings.color;\n        this.strikethroughColor = pdfViewer.strikethroughSettings.color;\n        this.highlightOpacity = pdfViewer.highlightSettings.opacity;\n        this.underlineOpacity = pdfViewer.underlineSettings.opacity;\n        this.strikethroughOpacity = pdfViewer.strikethroughSettings.opacity;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        // tslint:disable-next-line:max-line-length\n        var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n        annotationCanvas.width = pageWidth;\n        annotationCanvas.height = pageHeight;\n        annotationCanvas.style.display = displayMode;\n        pageDiv.appendChild(annotationCanvas);\n        return annotationCanvas;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage = function (textMarkupAnnotations, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        this.renderTextMarkupAnnotations(textMarkupAnnotations, pageNumber, canvas, this.pdfViewerBase.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotations = function (textMarkupAnnotations, pageNumber, canvas, factor) {\n        if (canvas) {\n            canvas.width = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].width, factor);\n            canvas.height = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].height, factor);\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            // tslint:disable-next-line\n            var annotations = this.getAnnotations(pageNumber, textMarkupAnnotations);\n            if (annotations) {\n                for (var i = 0; i < annotations.length; i++) {\n                    // tslint:disable-next-line\n                    var annotation = annotations[i];\n                    var annotationObject = null;\n                    if (annotation.TextMarkupAnnotationType) {\n                        // tslint:disable-next-line:max-line-length\n                        annotationObject = { textMarkupAnnotationType: annotation.TextMarkupAnnotationType, color: annotation.Color, opacity: annotation.Opacity, bounds: annotation.Bounds, author: annotation.Author, subject: annotation.Subject, modifiedDate: annotation.ModifiedDate, note: annotation.Note, rect: annotation.Rect };\n                        this.storeAnnotations(pageNumber, annotationObject);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var type = annotation.TextMarkupAnnotationType ? annotation.TextMarkupAnnotationType : annotation.textMarkupAnnotationType;\n                    // tslint:disable-next-line\n                    var annotBounds = annotation.Bounds ? annotation.Bounds : annotation.bounds;\n                    var opacity = annotation.Opacity ? annotation.Opacity : annotation.opacity;\n                    var color = annotation.Color ? annotation.Color : annotation.color;\n                    switch (type) {\n                        case 'Highlight':\n                            this.renderHighlightAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Strikethrough':\n                            this.renderStrikeoutAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Underline':\n                            this.renderUnderlineAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                    }\n                }\n            }\n            if (pageNumber === this.selectTextMarkupCurrentPage) {\n                this.maintainAnnotationSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.drawTextMarkupAnnotations = function (type) {\n        this.isTextMarkupAnnotationMode = true;\n        this.currentTextMarkupAddMode = type;\n        var selectionObject = this.pdfViewer.textSelectionModule.selectionRangeArray;\n        if (selectionObject.length > 0) {\n            this.convertSelectionToTextMarkup(type, selectionObject, this.pdfViewerBase.getZoomFactor());\n        }\n        if (window.getSelection().toString()) {\n            var pageBounds = this.getDrawnBounds();\n            if (pageBounds.length > 0) {\n                for (var i = 0; i < pageBounds.length; i++) {\n                    // tslint:disable-next-line:max-line-length\n                    this.drawTextMarkups(type, pageBounds[i].bounds, pageBounds[i].pageIndex, pageBounds[i].rect, this.pdfViewerBase.getZoomFactor());\n                }\n            }\n        }\n        // this.pdfViewerBase.annotationHelper.redoCollection = [];\n        this.pdfViewer.textSelectionModule.clearTextSelection();\n    };\n    TextMarkupAnnotation.prototype.convertSelectionToTextMarkup = function (type, selectionObject, factor) {\n        for (var i = 0; i < selectionObject.length; i++) {\n            this.drawTextMarkups(type, selectionObject[i].rectangleBounds, selectionObject[i].pageNumber, selectionObject[i].bound, factor);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.drawTextMarkups = function (type, bounds, pageNumber, rect, factor) {\n        var annotation = null;\n        var context = this.getPageContext(pageNumber);\n        if (context) {\n            context.setLineDash([]);\n            switch (type) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.highlightColor, this.highlightOpacity, bounds, this.pdfViewer.highlightSettings.author, this.pdfViewer.highlightSettings.subject, this.pdfViewer.highlightSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderHighlightAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.strikethroughColor, this.strikethroughOpacity, bounds, this.pdfViewer.strikethroughSettings.author, this.pdfViewer.strikethroughSettings.subject, this.pdfViewer.strikethroughSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderStrikeoutAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.underlineColor, this.underlineOpacity, bounds, this.pdfViewer.underlineSettings.author, this.pdfViewer.underlineSettings.subject, this.pdfViewer.underlineSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderUnderlineAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n            }\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line\n            var settings = { opacity: annotation.opacity, color: annotation.color, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate };\n            var index = this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length - 1].index;\n            this.pdfViewer.fireAnnotationAdd(pageNumber, index, type, annotation.rect, settings);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderHighlightAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = bounds[i];\n            context.beginPath();\n            var x = bound.X ? bound.X : bound.left;\n            var y = bound.Y ? bound.Y : bound.top;\n            var width = bound.Width ? bound.Width : bound.width;\n            var height = bound.Height ? bound.Height : bound.height;\n            // tslint:disable-next-line:max-line-length\n            context.rect((x * factor), (y * factor), (width * factor), (height * factor));\n            context.globalAlpha = opacity * 0.5;\n            context.closePath();\n            context.fillStyle = color;\n            context.msFillRule = 'nonzero';\n            context.fill();\n        }\n        context.save();\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderStrikeoutAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, bound.x, bound.y, bound.width, (bound.height / 2), color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderUnderlineAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var boundValues = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, boundValues.x, boundValues.y, boundValues.width, boundValues.height, color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getProperBounds = function (bound) {\n        var x = bound.X ? bound.X : bound.left;\n        var y = bound.Y ? bound.Y : bound.top;\n        var width = bound.Width ? bound.Width : bound.width;\n        var height = bound.Height ? bound.Height : bound.height;\n        return { x: x, y: y, width: width, height: height };\n    };\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.drawLine = function (opacity, x, y, width, height, color, factor, context) {\n        context.globalAlpha = opacity;\n        context.beginPath();\n        context.moveTo((x * factor), (y + height) * factor);\n        context.lineTo((width + x) * factor, (y + height) * factor);\n        context.lineWidth = 1;\n        context.strokeStyle = color;\n        context.closePath();\n        context.msFillRule = 'nonzero';\n        context.stroke();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.printTextMarkupAnnotations = function (textMarkupAnnotations, pageIndex) {\n        var canvas = createElement('canvas', { id: this.pdfViewer.element.id + '_print_annotation_layer_' + pageIndex });\n        // tslint:disable-next-line\n        var annotations = this.getAnnotations(pageIndex, null);\n        if (annotations) {\n            this.renderTextMarkupAnnotations(null, pageIndex, canvas, 1);\n        }\n        else {\n            this.renderTextMarkupAnnotations(textMarkupAnnotations, pageIndex, canvas, 1);\n        }\n        var imageSource = canvas.toDataURL();\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveTextMarkupAnnotations = function () {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        // tslint:disable-next-line\n        var annotations = new Array();\n        var colorpick = new ColorPicker();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        // tslint:disable-next-line:max-line-length\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds));\n                        var colorString = colorpick.getValue(pageAnnotationObject.annotations[z].color, 'rgba');\n                        pageAnnotationObject.annotations[z].color = JSON.stringify(this.getRgbCode(colorString));\n                        pageAnnotationObject.annotations[z].rect = JSON.stringify(pageAnnotationObject.annotations[z].rect);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n            var deletedAnnotation = null;\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    deletedAnnotation = pageAnnotations.splice(i, 1)[0];\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, deletedAnnotation, 'Text Markup Deleted', null);\n                    this.currentAnnotationIndex = i;\n                }\n            }\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.currentTextMarkupAnnotation = null;\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, deletedAnnotation.textMarkupAnnotationType);\n            this.currentAnnotationIndex = null;\n            this.selectTextMarkupCurrentPage = null;\n            if (Browser.isDevice) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyColorProperty = function (color) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Color', color, null);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, true, false);\n            this.currentAnnotationIndex = null;\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyOpacityProperty = function (args) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Opacity', args.value / 100, args.name);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            if (args.name === 'changed') {\n                this.pdfViewerBase.isDocumentEdited = true;\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, false, true);\n                this.currentAnnotationIndex = null;\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.modifyAnnotationProperty = function (property, value, status) {\n        var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                if (property === 'Color') {\n                    pageAnnotations[i].color = value;\n                }\n                else if (property === 'Opacity') {\n                    pageAnnotations[i].opacity = value;\n                }\n                var date = new Date();\n                pageAnnotations[i].modifiedDate = date.toLocaleString();\n                this.currentAnnotationIndex = i;\n                if (status === null || status === 'changed') {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, this.currentTextMarkupAnnotation, 'Text Markup Property modified', property);\n                }\n                this.currentTextMarkupAnnotation = pageAnnotations[i];\n            }\n        }\n        return pageAnnotations;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.undoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.splice(index, 1);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 0, annotation);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.undoRedoPropertyChange = function (annotation, pageNumber, index, property) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (property === 'Color') {\n                var tempColor = pageAnnotations[index].color;\n                pageAnnotations[index].color = annotation.color;\n                annotation.color = tempColor;\n            }\n            else {\n                var tempOpacity = pageAnnotations[index].opacity;\n                pageAnnotations[index].opacity = annotation.opacity;\n                annotation.opacity = tempOpacity;\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        return annotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.redoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.push(annotation);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 1);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveNoteContent = function (pageNumber, note) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    pageAnnotations[i].note = note;\n                }\n            }\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.pdfViewerBase.isDocumentEdited = true;\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotation = function () {\n        this.selectTextMarkupCurrentPage = null;\n        this.currentTextMarkupAnnotation = null;\n        this.enableAnnotationPropertiesTool(false);\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection = function (pageNumber) {\n        var lowerPageIndex = (pageNumber - 2) >= 0 ? (pageNumber - 2) : 0;\n        // tslint:disable-next-line:max-line-length\n        var higherPageIndex = (pageNumber + 2) < this.pdfViewerBase.pageCount ? (pageNumber + 2) : this.pdfViewerBase.pageCount - 1;\n        for (var k = lowerPageIndex; k <= higherPageIndex; k++) {\n            this.clearAnnotationSelection(k);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getBoundsForSave = function (bounds) {\n        // tslint:disable-next-line\n        var newArray = [];\n        for (var i = 0; i < bounds.length; i++) {\n            var left = bounds[i].left ? bounds[i].left : bounds[i].Left;\n            var top_1 = bounds[i].top ? bounds[i].top : bounds[i].Top;\n            var height = bounds[i].height ? bounds[i].height : bounds[i].Height;\n            var width = bounds[i].width ? bounds[i].width : bounds[i].Width;\n            newArray.push({ left: left, top: top_1, width: width, height: height });\n        }\n        return newArray;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getRgbCode = function (colorString) {\n        var stringArray = colorString.split(',');\n        // tslint:disable-next-line:radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // tslint:disable-next-line:radix\n        var g = parseInt(stringArray[1]);\n        // tslint:disable-next-line:radix\n        var b = parseInt(stringArray[2]);\n        return { r: r, g: g, b: b };\n    };\n    TextMarkupAnnotation.prototype.getDrawnBounds = function () {\n        var pageBounds = [];\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var range = document.createRange();\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode === selection.focusNode) {\n                var pageId = this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);\n                if (!isNaN(pageId)) {\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + pageId).getBoundingClientRect();\n                    if (isBackWardSelection) {\n                        range.setStart(selection.focusNode, selection.focusOffset);\n                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                    }\n                    else {\n                        if (selection.anchorOffset < selection.focusOffset) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            range.setStart(selection.focusNode, selection.focusOffset);\n                            range.setEnd(selection.anchorNode, selection.anchorOffset);\n                        }\n                    }\n                    var boundingRect = range.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                    var rectangleArray = [];\n                    rectangleArray.push(rectangle);\n                    // tslint:disable-next-line\n                    var rect = { left: rectangle.left, top: rectangle.top, right: rectangle.right, bottom: rectangle.bottom };\n                    pageBounds.push({ pageIndex: pageId, bounds: rectangleArray, rect: rect });\n                }\n            }\n            else {\n                var startNode = void 0;\n                var endNode = void 0;\n                var selectionStartOffset = void 0;\n                var selectionEndOffset = void 0;\n                if (isBackWardSelection) {\n                    startNode = selection.focusNode;\n                    selectionStartOffset = selection.focusOffset;\n                    endNode = selection.anchorNode;\n                    selectionEndOffset = selection.anchorOffset;\n                }\n                else {\n                    startNode = selection.anchorNode;\n                    selectionStartOffset = selection.anchorOffset;\n                    endNode = selection.focusNode;\n                    selectionEndOffset = selection.focusOffset;\n                }\n                var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(startNode);\n                var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(startNode, anchorPageId);\n                var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(endNode);\n                var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(endNode, focusPageId);\n                var startOffset = 0;\n                var endOffset = 0;\n                var currentId = 0;\n                for (var i = anchorPageId; i <= focusPageId; i++) {\n                    var selectionRects = [];\n                    var pageStartId = void 0;\n                    var pageEndId = void 0;\n                    var pageStartOffset = void 0;\n                    var pageEndOffset = void 0;\n                    var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + i).getBoundingClientRect();\n                    if (i === anchorPageId) {\n                        currentId = anchorTextId;\n                    }\n                    else {\n                        currentId = 0;\n                    }\n                    for (var j = currentId; j < textDivs.length; j++) {\n                        var textElement = textDivs[j];\n                        if (j === currentId) {\n                            pageStartId = currentId;\n                            pageStartOffset = (i === anchorPageId) ? selectionStartOffset : 0;\n                        }\n                        else {\n                            pageEndId = j;\n                            pageEndOffset = (i === focusPageId) ? selectionEndOffset : textElement.textContent.length;\n                        }\n                        if (j === anchorTextId && i === anchorPageId) {\n                            startOffset = selectionStartOffset;\n                        }\n                        else {\n                            startOffset = 0;\n                        }\n                        if (j === focusTextId && i === focusPageId) {\n                            endOffset = selectionEndOffset;\n                        }\n                        else {\n                            endOffset = textElement.textContent.length;\n                        }\n                        for (var k = 0; k < textElement.childNodes.length; k++) {\n                            var node = textElement.childNodes[k];\n                            range.setStart(node, startOffset);\n                            range.setEnd(node, endOffset);\n                        }\n                        var boundingRect = range.getBoundingClientRect();\n                        // tslint:disable-next-line:max-line-length\n                        var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                        selectionRects.push(rectangle);\n                        range.detach();\n                        if (i === focusPageId && j === focusTextId) {\n                            break;\n                        }\n                    }\n                    var startElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageStartId).childNodes[0];\n                    var endElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageEndId).childNodes[0];\n                    var pageRange = document.createRange();\n                    pageRange.setStart(startElementNode, pageStartOffset);\n                    pageRange.setEnd(endElementNode, pageEndOffset);\n                    var pageRectBounds = pageRange.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageRectangle = { left: this.getDefaultValue(pageRectBounds.left - pageRect.left), top: this.getDefaultValue(pageRectBounds.top - pageRect.top), width: this.getDefaultValue(pageRectBounds.width), height: this.getDefaultValue(pageRectBounds.height), right: this.getDefaultValue(pageRectBounds.right - pageRect.left), bottom: this.getDefaultValue(pageRectBounds.bottom - pageRect.top) };\n                    // tslint:disable-next-line\n                    var rect = { left: pageRectangle.left, top: pageRectangle.top, right: pageRectangle.right, bottom: pageRectangle.bottom };\n                    pageBounds.push({ pageIndex: i, bounds: selectionRects, rect: rect });\n                }\n            }\n        }\n        selection.removeAllRanges();\n        return pageBounds;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotationsPinch = function (pageNumber) {\n        var annotCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (annotCanvas) {\n            var oldAnnotCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n            if (oldAnnotCanvas) {\n                if (annotCanvas) {\n                    oldAnnotCanvas.id = annotCanvas.id;\n                    annotCanvas.parentElement.removeChild(annotCanvas);\n                }\n                else {\n                    oldAnnotCanvas.id = this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber;\n                }\n                annotCanvas = oldAnnotCanvas;\n            }\n            annotCanvas.style.width = '';\n            annotCanvas.style.height = '';\n            annotCanvas.width = this.pdfViewerBase.pageSize[pageNumber].width * this.pdfViewerBase.getZoomFactor();\n            annotCanvas.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor();\n            this.renderTextMarkupAnnotations(null, pageNumber, annotCanvas, this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotations = function (pageNumber) {\n        var oldCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n        if (oldCanvas) {\n            oldCanvas.parentElement.removeChild(oldCanvas);\n        }\n        var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (newCanvas) {\n            newCanvas.style.display = 'block';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageNumber, canvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, canvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n                if (this.pdfViewer.toolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                }\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else {\n            if (!this.pdfViewerBase.isClickedOnScrollBar(event)) {\n                this.clearCurrentAnnotation();\n                this.clearCurrentAnnotationSelection(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber)) {\n            this.clearCurrentAnnotationSelection(pageNumber);\n            var touchCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            // tslint:disable-next-line:max-line-length\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.touches[0].clientX, event.touches[0].clientY, pageNumber, touchCanvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, touchCanvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else if (this.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n            var number = this.selectTextMarkupCurrentPage;\n            this.selectTextMarkupCurrentPage = null;\n            this.clearAnnotationSelection(number);\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line\n        var pageIndex = parseInt(eventTarget.id.split('_text_')[1]) || parseInt(eventTarget.id.split('_textLayer_')[1]) || parseInt(eventTarget.id.split('_annotationCanvas_')[1]);\n        if (pageIndex) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageIndex, canvas);\n            if (currentAnnot) {\n                eventTarget.style.cursor = 'pointer';\n                this.showPopupNote(event, currentAnnot);\n            }\n            else {\n                this.pdfViewer.annotationModule.hidePopupNote();\n                if (this.pdfViewerBase.isPanMode && !this.pdfViewerBase.getAnnotationToolStatus()) {\n                    eventTarget.style.cursor = 'grab';\n                }\n                else {\n                    eventTarget.style.cursor = 'auto';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.showPopupNote = function (event, annotation) {\n        if (annotation.note) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.showPopupNote(event, annotation.color, annotation.author, annotation.note, annotation.textMarkupAnnotationType);\n        }\n    };\n    TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation = function (clientX, clientY, pageNumber, canvas) {\n        var currentTextMarkupAnnotations = [];\n        var canvasParentPosition = canvas.parentElement.getBoundingClientRect();\n        var leftClickPosition = clientX - canvasParentPosition.left;\n        var topClickPosition = clientY - canvasParentPosition.top;\n        var annotationList = this.getAnnotations(pageNumber, null);\n        var isAnnotationGot = false;\n        if (annotationList) {\n            for (var i = 0; i < annotationList.length; i++) {\n                var annotation = annotationList[i];\n                for (var j = 0; j < annotation.bounds.length; j++) {\n                    // tslint:disable-next-line\n                    var bound = annotation.bounds[j];\n                    var left = bound.left ? bound.left : bound.Left;\n                    var top_2 = bound.top ? bound.top : bound.Top;\n                    var width = bound.width ? bound.width : bound.Width;\n                    var height = bound.height ? bound.height : bound.Height;\n                    // tslint:disable-next-line:max-line-length\n                    if (leftClickPosition >= this.getMagnifiedValue(left, this.pdfViewerBase.getZoomFactor()) && leftClickPosition <= this.getMagnifiedValue(left + width, this.pdfViewerBase.getZoomFactor()) && topClickPosition >= this.getMagnifiedValue(top_2, this.pdfViewerBase.getZoomFactor()) && topClickPosition <= this.getMagnifiedValue(top_2 + height, this.pdfViewerBase.getZoomFactor())) {\n                        currentTextMarkupAnnotations.push(annotation);\n                        isAnnotationGot = true;\n                    }\n                    else {\n                        if (isAnnotationGot) {\n                            isAnnotationGot = false;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        var currentAnnot = null;\n        if (currentTextMarkupAnnotations.length > 1) {\n            currentAnnot = this.compareCurrentAnnotations(currentTextMarkupAnnotations);\n        }\n        else if (currentTextMarkupAnnotations.length === 1) {\n            currentAnnot = currentTextMarkupAnnotations[0];\n        }\n        return currentAnnot;\n    };\n    TextMarkupAnnotation.prototype.compareCurrentAnnotations = function (annotations) {\n        var previousX;\n        var currentAnnotation = null;\n        for (var i = 0; i < annotations.length; i++) {\n            if (i === annotations.length - 1) {\n                break;\n            }\n            // tslint:disable-next-line\n            var firstAnnotBounds = annotations[i].bounds;\n            var firstXposition = firstAnnotBounds[0].left ? firstAnnotBounds[0].left : firstAnnotBounds[0].Left;\n            var firstYposition = firstAnnotBounds[0].top ? firstAnnotBounds[0].top : firstAnnotBounds[0].Top;\n            // tslint:disable-next-line\n            var secondAnnotBounds = annotations[i + 1].bounds;\n            var secondXposition = secondAnnotBounds[0].left ? secondAnnotBounds[0].left : secondAnnotBounds[0].Left;\n            var secondYposition = secondAnnotBounds[0].top ? secondAnnotBounds[0].top : secondAnnotBounds[0].Top;\n            if ((firstXposition < secondXposition) || (firstYposition < secondYposition)) {\n                previousX = secondXposition;\n                currentAnnotation = annotations[i + 1];\n            }\n            else {\n                previousX = firstXposition;\n                currentAnnotation = annotations[i];\n            }\n            if (previousX && (i === (annotations.length - 2))) {\n                if ((previousX === firstXposition) && (previousX === secondXposition)) {\n                    previousX = secondXposition;\n                    currentAnnotation = annotations[i + 1];\n                }\n            }\n        }\n        return currentAnnotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clearAnnotationSelection = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        }\n    };\n    TextMarkupAnnotation.prototype.selectAnnotation = function (annotation, canvas) {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = annotation.bounds[i];\n            var x = bound.left ? bound.left : bound.Left;\n            var y = bound.top ? bound.top : bound.Top;\n            var width = bound.width ? bound.width : bound.Width;\n            var height = bound.height ? bound.height : bound.Height;\n            // tslint:disable-next-line:max-line-length\n            this.drawAnnotationSelectRect(canvas, this.getMagnifiedValue(x - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(y - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(width + 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(height + 0.5, this.pdfViewerBase.getZoomFactor()));\n        }\n    };\n    TextMarkupAnnotation.prototype.drawAnnotationSelectRect = function (canvas, x, y, width, height) {\n        var context = canvas.getContext('2d');\n        context.beginPath();\n        context.setLineDash([4 * this.pdfViewerBase.getZoomFactor()]);\n        context.globalAlpha = 1;\n        context.rect(x, y, width, height);\n        context.closePath();\n        context.strokeStyle = '#0000ff';\n        context.stroke();\n        context.save();\n    };\n    TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool = function (isEnable) {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(isEnable);\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);\n                var enable = isEnable;\n                if (this.isTextMarkupAnnotationMode) {\n                    enable = true;\n                }\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(enable);\n                if (this.currentTextMarkupAnnotation) {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, this.currentTextMarkupAnnotation.color);\n                }\n                else {\n                    if (!this.isTextMarkupAnnotationMode) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, '#000000');\n                    }\n                    else {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.maintainAnnotationSelection = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + this.selectTextMarkupCurrentPage);\n            if (canvas) {\n                this.selectAnnotation(this.currentTextMarkupAnnotation, canvas);\n            }\n        }\n    };\n    TextMarkupAnnotation.prototype.storeAnnotations = function (pageNumber, annotation) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        var index = 0;\n        if (!storeObject) {\n            var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n            markupAnnotation.annotations.push(annotation);\n            index = markupAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(markupAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var pageIndex = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        return index;\n    };\n    TextMarkupAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAnnotations = function (pageIndex, textMarkupAnnotations) {\n        // tslint:disable-next-line\n        var annotationCollection;\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = textMarkupAnnotations;\n            }\n        }\n        else {\n            annotationCollection = textMarkupAnnotations;\n        }\n        return annotationCollection;\n    };\n    TextMarkupAnnotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAddedAnnotation = function (type, color, opacity, bounds, author, subject, predefinedDate, note, rect, pageNumber) {\n        var date = new Date();\n        // tslint:disable-next-line:max-line-length\n        var modifiedDate = predefinedDate ? predefinedDate : date.toLocaleString();\n        // tslint:disable-next-line\n        var annotation = { textMarkupAnnotationType: type, color: color, opacity: opacity, bounds: bounds, author: author, subject: subject, modifiedDate: modifiedDate, note: note, rect: rect };\n        var storedIndex = this.storeAnnotations(pageNumber, annotation);\n        this.pdfViewer.annotationModule.addAction(pageNumber, storedIndex, annotation, 'Text Markup Added', null);\n        return annotation;\n    };\n    TextMarkupAnnotation.prototype.getPageContext = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var context = null;\n        if (canvas) {\n            context = canvas.getContext('2d');\n        }\n        return context;\n    };\n    TextMarkupAnnotation.prototype.getDefaultValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    TextMarkupAnnotation.prototype.getMagnifiedValue = function (value, factor) {\n        return value * factor;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clear = function () {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    };\n    return TextMarkupAnnotation;\n}());\nexport { TextMarkupAnnotation };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { Toast } from '@syncfusion/ej2-notifications';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isBookmarkOpen = false;\n        this.isThumbnailOpen = false;\n        this.isTooltipCreated = false;\n        /**\n         * @private\n         */\n        this.isNavigationToolbarVisible = false;\n        /**\n         * @private\n         */\n        this.isBookmarkListOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY,\n                proxy.sideBarResizer.offsetParent.clientWidth\n            ];\n            _this.previousX = event.clientX;\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            if (!_this.pdfViewerBase.getPopupNoteVisibleStatus()) {\n                event.preventDefault();\n                if (proxy.isDown && _this.sideBarContentContainer) {\n                    // prevent the sidebar from becoming too narrow, or from occupying more\n                    // than half of the available viewer width.\n                    if (_this.pdfViewer.enableRtl) {\n                        var currentWidth = _this.previousX - event.clientX;\n                        var width = currentWidth + proxy.offset[2];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.right = width + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    else {\n                        var width = event.clientX + proxy.offset[0];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.left = width + 'px';\n                        proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                    proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                    proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.pdfViewerBase.updateZoomValue();\n                    if (!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')) {\n                        proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();\n                    }\n                }\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            _this.sideBarContent.setAttribute('aria-label', 'Thumbnail View Panel');\n            _this.sideBarContent.focus();\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.sideBarContent.setAttribute('aria-label', 'Bookmark View Panel');\n            _this.sideBarContent.focus();\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        if (!Browser.isDevice) {\n            this.createNavigationPane();\n        }\n    };\n    NavigationPane.prototype.createNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar', attrs: { 'role': 'toolbar', 'aria-orientation': 'vertical', 'tabindex': '-1' } });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbar.style.cssFloat = 'right';\n            this.sideBarToolbar.style.right = 1 + 'px';\n            this.sideBarToolbar.style.position = 'relative';\n        }\n        // tslint:disable-next-line:max-line-length\n        var sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(sideBarToolbarSplitter);\n        if (this.pdfViewer.enableRtl) {\n            sideBarToolbarSplitter.classList.add('e-right');\n        }\n        else {\n            sideBarToolbarSplitter.classList.add('e-left');\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentContainer.classList.add('e-right');\n        }\n        else {\n            this.sideBarContentContainer.classList.add('e-left');\n        }\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentSplitter.style.right = 0 + 'px';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content', attrs: { 'tabindex': '0' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContent.style.right = 0 + 'px';\n            this.sideBarContent.style.direction = 'rtl';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitleContainer.style.right = 0 + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title', attrs: { 'tabindex': '-1' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitle.classList.add('e-right');\n        }\n        else {\n            this.sideBarTitle.classList.add('e-left');\n        }\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarResizer.classList.add('e-right');\n        }\n        else {\n            this.sideBarResizer.classList.add('e-left');\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        if (!this.pdfViewer.enableRtl) {\n            this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        }\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.adjustPane = function () {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar.style.top = toolbarHeight + 'px';\n        this.sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createNavigationPaneMobile = function (option) {\n        var _this = this;\n        this.isNavigationToolbarVisible = true;\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_navigationToolbar', className: 'e-pv-nav-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        var items;\n        if (option === 'search') {\n            var searchTemplate = '<div class=\"e-input-group e-pv-search-input-mobile\" id=\"' + this.pdfViewer.element.id +\n                '_search_input_container\"><input class=\"e-input\" type=\"text\" placeholder=\"' +\n                this.pdfViewer.localeObj.getConstant('Find in document') + '\" id=\"' +\n                this.pdfViewer.element.id + '_search_input\"></input></div>';\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { template: searchTemplate },\n                {\n                    prefixIcon: 'e-pv-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_search_box-icon',\n                    click: function () {\n                        var iconElement = _this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n                        if (iconElement.classList.contains('e-pv-search-close')) {\n                            _this.enableSearchItems(false);\n                        }\n                        _this.pdfViewer.textSearchModule.searchButtonClick(iconElement, _this.searchInput);\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-prev-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_prev_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchPrevious();\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-next-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_next_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchNext();\n                    }\n                }\n            ];\n        }\n        else {\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { text: this.pdfViewer.localeObj.getConstant('Bookmarks') }\n            ];\n        }\n        this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Popup' });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        if (option === 'search') {\n            this.initiateSearchBox();\n        }\n        else {\n            this.initiateBookmarks();\n        }\n    };\n    NavigationPane.prototype.initiateSearchBox = function () {\n        var _this = this;\n        this.searchInput = this.pdfViewerBase.getElement('_search_input');\n        this.pdfViewer.textSearchModule.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n        this.searchInput.addEventListener('keyup', function (event) {\n            _this.enableSearchItems(true);\n            var searchString = _this.searchInput.value;\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n            }\n            else {\n                _this.pdfViewer.textSearchModule.resetVariables();\n            }\n        });\n        this.pdfViewer.textSearchModule.searchInput = this.searchInput;\n        this.setSearchInputWidth();\n        this.enableSearchItems(false);\n        this.searchInput.focus();\n    };\n    NavigationPane.prototype.enableSearchItems = function (isEnable) {\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_prev_occurrence').parentElement, isEnable);\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_next_occurrence').parentElement, isEnable);\n    };\n    NavigationPane.prototype.initiateBookmarks = function () {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = 'none';\n        }\n        // tslint:disable-next-line:max-line-length\n        var bookmarkContainer = createElement('div', { id: this.pdfViewer.element.id + '_bookmarks_container', className: 'e-pv-bookmark-container' });\n        bookmarkContainer.style.width = '100%';\n        bookmarkContainer.style.height = this.pdfViewerBase.viewerContainer.style.height;\n        this.pdfViewerBase.getElement('_viewerMainContainer').appendChild(bookmarkContainer);\n        this.pdfViewerBase.viewerContainer.style.display = 'none';\n        this.isBookmarkListOpen = true;\n        this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile();\n    };\n    NavigationPane.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        this.pdfViewer.textSearchModule.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.goBackToToolbar = function () {\n        this.isNavigationToolbarVisible = false;\n        this.pdfViewer.textSearchModule.cancelTextSearch();\n        this.searchInput = null;\n        if (this.pdfViewer.bookmarkViewModule.childNavigateCount !== 0) {\n            this.pdfViewer.bookmarkViewModule.bookmarkList.back();\n            this.pdfViewer.bookmarkViewModule.childNavigateCount--;\n        }\n        else {\n            if (this.toolbar != null) {\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n            var bookmarkContainer = this.pdfViewerBase.getElement('_bookmarks_container');\n            if (bookmarkContainer) {\n                bookmarkContainer.parentElement.removeChild(bookmarkContainer);\n                if (Browser.isDevice) {\n                    this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n                }\n            }\n            if (this.toolbarElement && this.toolbarElement.parentElement != null) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            this.pdfViewerBase.viewerContainer.style.display = 'block';\n            this.isBookmarkListOpen = false;\n            if (!this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n                this.pdfViewerBase.onWindowResize();\n            }\n        }\n    };\n    NavigationPane.prototype.setSearchInputWidth = function () {\n        var searchInputParent = this.searchInput.parentElement;\n        var padding = window.getComputedStyle(searchInputParent.parentElement, null).getPropertyValue('padding-left');\n        // tslint:disable-next-line:max-line-length\n        var width = this.toolbarElement.clientWidth - this.getParentElementSearchBox('_backward').clientWidth\n            - this.getParentElementSearchBox('_search_box-icon').clientWidth - this.getParentElementSearchBox('_prev_occurrence').clientWidth\n            - this.getParentElementSearchBox('_next_occurrence').clientWidth - 6;\n        if (padding !== '') {\n            width = width - (parseFloat(padding) * 2);\n        }\n        searchInputParent.style.width = width + 'px';\n    };\n    NavigationPane.prototype.getParentElementSearchBox = function (idString) {\n        return this.pdfViewerBase.getElement(idString).parentElement;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createTooltipMobile = function (text) {\n        if (!this.isTooltipCreated) { //boolean to prevent again toast creation.\n            // tslint:disable-next-line:max-line-length\n            var tooltipDiv = createElement('div', { className: 'e-pv-container-tooltip', id: this.pdfViewer.element.id + '_container_tooltip' });\n            this.pdfViewer.element.appendChild(tooltipDiv);\n            // tslint:disable-next-line:max-line-length\n            this.toastObject = new Toast({ title: text, target: this.pdfViewer.element, close: this.onTooltipClose.bind(this), position: { X: 0, Y: 0 }, animation: { hide: { duration: 200, effect: 'FadeOut' } } });\n            this.toastObject.appendTo(tooltipDiv);\n            var y = this.pdfViewer.element.clientHeight * 0.65;\n            var x = (this.pdfViewer.element.clientWidth - tooltipDiv.clientWidth) / 2;\n            this.isTooltipCreated = true;\n            this.toastObject.show({ position: { X: x, Y: y } });\n            var tooltipChild = tooltipDiv.firstElementChild;\n            if (tooltipChild) {\n                tooltipChild.style.width = 'auto';\n            }\n        }\n        else {\n            if (this.toastObject) {\n                this.toastObject.title = text;\n                var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n                var tooltipChild = tooltipElement.firstElementChild;\n                if (tooltipChild) {\n                    tooltipChild.style.width = 'auto';\n                    tooltipChild.firstElementChild.firstElementChild.textContent = text;\n                }\n            }\n        }\n    };\n    NavigationPane.prototype.onTooltipClose = function (args) {\n        this.isTooltipCreated = false;\n        var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n        this.pdfViewer.textSearchModule.isMessagePopupOpened = false;\n        this.toastObject.destroy();\n        tooltipElement.parentElement.removeChild(tooltipElement);\n        this.toastObject = null;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.toolbarResize = function () {\n        if (this.searchInput) {\n            this.searchInput.style.width = 'auto';\n            this.setSearchInputWidth();\n        }\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled', 'aria-label': 'Page Thumbnails', 'tabindex': '-1' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled', 'aria-label': 'Bookmarks', 'tabindex': '-1' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        if (this.pdfViewer.enableRtl) {\n            this.closeDiv.style.left = 8 + 'px';\n        }\n        else {\n            this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        var resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        resizeIcon.style.position = 'absolute';\n        resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(resizeIcon);\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                proxy.pdfViewerBase.viewerContainer.style.right = (proxy.sideToolbarWidth) + 'px';\n            }\n            else {\n                proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            }\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            if (this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                this.pdfViewerBase.viewerContainer.style.left = 1 + 'px';\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            }\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.isDocumentEdited = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // tslint:disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                var toolbarHeight = proxy.getElement('_toolbarContainer').getBoundingClientRect().height;\n                if (proxy.isAnnotationToolbarHidden() || Browser.isDevice) {\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight);\n                }\n                else {\n                    var annotationToolbarHeight = proxy.getElement('_annotation_toolbar').getBoundingClientRect().height;\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && !Browser.isDevice) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (!proxy.navigationPane.isBookmarkListOpen) {\n                proxy.updateZoomValue();\n            }\n            if (Browser.isDevice) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus()) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                if (event.button === 0) {\n                    // 0 is for left button.\n                    var eventTarget = event.target;\n                    if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                        var idStringArray = eventTarget.id.split('_');\n                        // tslint:disable-next-line\n                        _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                    }\n                    if (_this.isTextMarkupAnnotationModule()) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                switch (event.keyCode) {\n                    case 46:\n                        if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n                        }\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // tslint:disable-next-line:max-line-length\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    _this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // tslint:disable-next-line\n        this.onWindowMouseUp = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                        }\n                        if (_this.viewerContainer.contains(event.target)) {\n                            if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                            else {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                }\n                            }\n                        }\n                    }\n                    else if (_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target)) {\n                        window.getSelection().removeAllRanges();\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (Browser.isDevice && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints);\n                }\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            if (Browser.isDevice) {\n                clearTimeout(_this.singleTapTimer);\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if (Browser.isDevice && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // tslint:disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // tslint:disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // tslint:disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    _this.viewerContainer.scrollTop += scrollTop;\n                    _this.updateMobileScrollerPosition();\n                }\n            }\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = _this;\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && Browser.isDevice) {\n                // tslint:disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // tslint:disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= _this.viewerContainer.clientHeight)) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    _this.mobilePageNoContainer.style.display = 'none';\n                    scrollposY = _this.touchClientY - event.touches[0].pageY;\n                    scrollposX = _this.touchClientX - event.touches[0].pageX;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    // tslint:disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n                if (!Browser.isDevice) {\n                    _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                }\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            if (Browser.isDevice) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container', attrs: { 'aria-label': 'pdfviewer scroll view' } });\n            if (Browser.isDevice) {\n                this.createMobilePageNumberContainer();\n            }\n            this.viewerContainer.tabIndex = 0;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'tabindex': '0', 'aria-label': 'pdfviewer Page View' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice) {\n                this.createGoToPagePopup();\n            }\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && !Browser.isDevice) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        if (!Browser.isDevice) {\n            element.style.minHeight = '500px';\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = '';\n                this.mobileScrollerContainer.style.top = (this.toolbarHeight) + 'px';\n            }\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        if (Browser.isDevice) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            this.promptElement.focus();\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.initiateTextSelectMode();\n        if (!Browser.isDevice) {\n            if (this.navigationPane.sideBarToolbar) {\n                this.navigationPane.clear();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.clear();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.initializeCollection();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        this.contextMenuModule.destroy();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.currentPageNumber > 0) {\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // tslint:disable-next-line:max-line-length\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this),\n                },\n                // tslint:disable-next-line:max-line-length\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this),\n                },\n            ], close: this.closeGoToPagePopUp.bind(this),\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n        goToPageTextBox.appendTo(this.goToPageInput);\n        this.goToPageInput.addEventListener('keyup', function () {\n            // tslint:disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // tslint:disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // tslint:disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            this.mobileScrollerContainer.style.top = (this.toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        this.enableAnnotationAddTools(false);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n        if (!Browser.isDevice) {\n            this.enableAnnotationAddTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n        var _this = this;\n        this.singleTapTimer = setTimeout(function () { _this.onSingleTap(touchPoints); }, 300);\n        this.tapCount++;\n        // tslint:disable-next-line\n        var timer = setTimeout(function () { _this.onDoubleTap(touchPoints); }, 200);\n        if (this.tapCount > 2) {\n            this.tapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        this.viewerContainer.scrollTop -= this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        this.viewerContainer.scrollTop += this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        // tslint:disable-next-line:max-line-length\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n                    }\n                    if (this.isTapHidden && Browser.isDevice) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                    }\n                    else if (Browser.isDevice && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        this.pdfViewer.toolbarModule.showToolbar(this.isTapHidden);\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        if (this.tapCount === 2) {\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            this.tapCount = 0;\n            if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                this.pdfViewer.magnification.onDoubleTapMagnification();\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n            if (Browser.isDevice && this.mobiletotalPageContainer) {\n                this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n                this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n            }\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * window.devicePixelRatio;\n                                canvas_1.width = pageWidth_1 * window.devicePixelRatio;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.isTextMarkupAnnotationModule()) {\n                    // tslint:disable-next-line\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(data['textMarkupAnnotation'], pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        // tslint:disable-next-line\n        var rotation = data['rotation'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // tslint:disable-next-line:max-line-length\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '0' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n        }\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        blobUrl = URL.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            jsonObject = { hashId: this.hashId, textMarkupAnnotations: textMarkupAnnotationCollection };\n        }\n        else {\n            jsonObject = { hashId: this.hashId };\n        }\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, _this.pdfViewer.fileName);\n                    }\n                    else {\n                        _this.downloadDocument(blobUrl);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        if (!this.getPagesZoomed()) {\n            this.showPageLoadingIndicator(pageIndex, true);\n        }\n        else {\n            this.showPageLoadingIndicator(pageIndex, false);\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        var blobUrl = URL.createObjectURL(blobObj);\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // tslint:disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n        return textLayer;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text', attrs: { 'tabindex': '0' } });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n        var scaleString = 'scale(' + scale + ')';\n        if (rotation === 0) {\n            if (textRotation === 0) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 1) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n            }\n            else if (textRotation === -90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 2) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n            }\n            else if (textRotation === 180) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 3) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n            }\n            else if (textRotation === 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // tslint:disable-next-line\n        var rotation;\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n            // tslint:disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.notifyDialog.enableRtl = true;\n        }\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy'), iconCss: 'e-pv-copy-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('highlight'), iconCss: 'e-pv-highlight-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('underline'), iconCss: 'e-pv-underline-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('strikethrough'), iconCss: 'e-pv-strikethrough-icon' }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        if (this.pdfViewer.enableRtl) {\n            this.contextMenuElement.style.direction = 'rtl';\n        }\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            created: this.contextMenuOnCreated.bind(this)\n        });\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnCreated = function (args) {\n        var items = [this.pdfViewer.localeObj.getConstant('highlight'), this.pdfViewer.localeObj.getConstant('underline'),\n            this.pdfViewer.localeObj.getConstant('strikethrough')];\n        if (this.pdfViewer.annotationModule) {\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                this.contextMenuObj.enableItems(items, false);\n            }\n        }\n        else {\n            this.contextMenuObj.enableItems(items, false);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    // tslint:disable-next-line:max-line-length\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && args.event.target.classList.contains('e-pv-page-container')) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            var currentBound = bounds;\n            if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                isWithin = true;\n            }\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n            isWithin = true;\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('highlight'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('underline'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('strikethrough'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenuObj.destroy();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { Browser } from '@syncfusion/ej2-base';\n/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        this.isTapToFitZoom = false;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            return scaleX * 100;\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            if (this.pdfViewerBase.pageCount === 1) {\n                return ((viewerHeight - this.pdfViewerBase.pageSize[0].top) / highestHeight) * 100;\n            }\n            else {\n                return (viewerHeight / highestHeight) * 100;\n            }\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.closePopupMenu();\n        }\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    if (Browser.isDevice) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewerBase.mobilePageNoContainer.style.left = (this.pdfViewer.element.clientWidth / 2) - (parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2) + 'px';\n                    }\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n        if (Browser.isDevice && this.isPinchZoomed) {\n            // tslint:disable-next-line:radix\n            var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n            this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        this.renderInSeparateThread(this.reRenderPageNumber);\n        this.isPagesZoomed = false;\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            this.calculateScrollValues(scrollValue);\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.calculateScrollValues = function (scrollValue) {\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n        if (currentPageCanvas) {\n            var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n            // update scroll top for the viewer container based on pinch zoom factor\n            var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n            var previousY = scrollValue + this.touchCenterY;\n            // tslint:disable-next-line:max-line-length\n            var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                // tslint:disable-next-line:max-line-length\n                previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n            this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n            // update scroll left for the viewer container based on pinch zoom factor\n            var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n            var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n            var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n            this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n        }\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                var annotationLayers = document.querySelectorAll('canvas[id*=\"_annotationCanvas_\"]');\n                for (var j = 0; j < annotationLayers.length; j++) {\n                    var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1];\n                    // tslint:disable-next-line:radix\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                    var annotationCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + i);\n                    annotationCanvas.id = this.pdfViewer.element.id + '_old_annotationCanvas_' + i;\n                }\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i, 'none');\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        if (this.pdfViewer.enableRtl) {\n                            pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        else {\n                            pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                                this.pdfViewer.annotationModule.textMarkupAnnotationModule.resizeAnnotations(width, height, i);\n                            }\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.onDoubleTapMagnification = function () {\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (!this.isTapToFitZoom) {\n            if (this.zoomFactor < 2) {\n                this.zoomTo(200);\n            }\n            else {\n                this.fitToWidth();\n            }\n        }\n        else {\n            this.zoomTo(this.previousZoomFactor * 100);\n        }\n        this.calculateScrollValues(scrollValue);\n        this.isTapToFitZoom = !this.isTapToFitZoom;\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber - Defines the page number to navigate\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n * @hidden\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                // tslint:disable-next-line:max-line-length\n                var pageLink = createElement('a', { id: 'page_' + i, attrs: { 'aria-label': 'Thumbnail of Page' + (i + 1), 'tabindex': '-1', 'role': 'link' } });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { AnnotationToolbar } from '../index';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.isUndoRedoBtnsVisible = true;\n        this.isAnnotationEditBtnVisible = true;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                    args.cancel = true;\n                }\n                else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                    var tooltipData = args.originalEvent.target.parentElement.dataset;\n                    if (tooltipData && tooltipData.tooltipId) {\n                        var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                        if (tooltipElement) {\n                            tooltipElement.style.display = 'none';\n                        }\n                    }\n                }\n            }\n            _this.handleToolbarButtonClick(args);\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                    args.originalEvent.target.blur();\n                    _this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        if (!Browser.isDevice) {\n            this.applyToolbarSettings();\n            this.initialEnableItems();\n            this.pdfViewerBase.navigationPane.adjustPane();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.annotationToolbarModule = new AnnotationToolbar(this.pdfViewer, this.pdfViewerBase, this);\n            if (!Browser.isDevice) {\n                this.annotationToolbarModule.initializeAnnotationToolbar();\n            }\n        }\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n            if (!Browser.isDevice) {\n                this.pdfViewerBase.navigationPane.sideBarToolbar.style.display = 'none';\n            }\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isVisible - If set true, then its show the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n                case 'UndoRedoTool':\n                    this.showUndoRedoTool(isVisible);\n                    break;\n                case 'AnnotationEditTool':\n                    this.showAnnotationEditTool(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.applyHideToToolbar(true, 15, 15);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n                case 'UndoRedoTool':\n                    this.enableUndoRedoTool(isEnable);\n                    break;\n                case 'AnnotationEditTool':\n                    this.enableAnnotationEditTool(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 21, 21);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 20, 20);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 18, 18);\n    };\n    Toolbar.prototype.showUndoRedoTool = function (isEnable) {\n        this.isUndoRedoBtnsVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 16, 17);\n    };\n    Toolbar.prototype.showAnnotationEditTool = function (isEnable) {\n        this.isAnnotationEditBtnVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 19, 19);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    Toolbar.prototype.enableUndoRedoTool = function (isEnable) {\n        this.toolbar.enableItems(this.undoItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.redoItem.parentElement, isEnable);\n    };\n    Toolbar.prototype.enableAnnotationEditTool = function (isEnable) {\n        this.toolbar.enableItems(this.annotationItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        if (!Browser.isDevice) {\n            this.currentPageBox.min = 0;\n            this.currentPageBox.value = 0;\n            this.updateTotalPage();\n            this.updateToolbarItems();\n            if (this.annotationToolbarModule) {\n                this.annotationToolbarModule.clear();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, false);\n                this.toolbar.enableItems(this.printItem.parentElement, false);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = true;\n                }\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n                this.toolbar.enableItems(this.annotationItem.parentElement, false);\n                this.toolbar.enableItems(this.panItem.parentElement, false);\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.deSelectItem(this.annotationItem);\n                if (this.annotationToolbarModule) {\n                    this.annotationToolbarModule.resetToolbar();\n                }\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, true);\n                this.toolbar.enableItems(this.printItem.parentElement, true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.updateZoomButtons();\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = false;\n                }\n                this.updateInteractionItems();\n                // modify this condition if new annotation types are added.\n                if (this.pdfViewer.annotationModule && this.pdfViewer.enableAnnotation) {\n                    this.toolbar.enableItems(this.annotationItem.parentElement, true);\n                }\n                if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                    this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                }\n            }\n            if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.length === 0 || !this.pdfViewer.annotationModule) {\n                this.enableToolbarItem(['AnnotationEditTool'], false);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, true);\n                this.updateUndoRedoButtons();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled && !Browser.isDevice) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateUndoRedoButtons = function () {\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection, this.undoItem.parentElement);\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection, this.redoItem.parentElement);\n            }\n            else {\n                this.disableUndoRedoButtons();\n            }\n        }\n        else {\n            this.disableUndoRedoButtons();\n        }\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.enableCollectionAvailable = function (collection, item) {\n        if (collection.length > 0) {\n            this.toolbar.enableItems(item, true);\n        }\n        else {\n            this.toolbar.enableItems(item, false);\n        }\n    };\n    Toolbar.prototype.disableUndoRedoButtons = function () {\n        this.toolbar.enableItems(this.undoItem.parentElement, false);\n        this.toolbar.enableItems(this.redoItem.parentElement, false);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.moreDropDown) {\n            this.moreDropDown.destroy();\n        }\n        if (this.annotationToolbarModule) {\n            this.annotationToolbarModule.destroy();\n        }\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (!Browser.isDevice) {\n            if (this.currentPageBox.value === pageIndex) {\n                this.currentPageBoxElement.value = pageIndex.toString();\n            }\n            this.currentPageBox.value = pageIndex;\n        }\n        else {\n            this.pdfViewerBase.mobileSpanContainer.innerHTML = pageIndex.toString();\n            this.pdfViewerBase.mobilecurrentPageContainer.innerHTML = pageIndex.toString();\n        }\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.currentPageBox.min = 1;\n            }\n            this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        if (!Browser.isDevice) {\n            this.toolbar = new tool({\n                clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup',\n                items: this.createToolbarItems(), created: function () {\n                    _this.createZoomDropdown();\n                    _this.createNumericTextBox();\n                    _this.toolbar.refreshOverflow();\n                }\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.toolbar.appendTo(this.toolbarElement);\n            this.afterToolbarCreation();\n            this.updateTotalPage();\n            this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        }\n        else {\n            this.createToolbarItemsForMobile();\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.disableUndoRedoButtons();\n        }\n        return this.toolbarElement;\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.createToolbarItems = function () {\n        var currentPageInputTemplate = this.createCurrentPageInputTemplate();\n        var totalPageTemplate = this.createTotalPageTemplate();\n        var zoomDropDownTemplateString = this.createZoomDropdownElement();\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-open-document-icon e-pv-icon', cssClass: 'e-pv-open-document-container', id: this.pdfViewer.element.id + '_open', text: this.pdfViewer.localeObj.getConstant('Open text'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n        }\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-zoom-out-icon e-pv-icon', cssClass: 'e-pv-zoom-out-container', id: this.pdfViewer.element.id + '_zoomOut', text: this.pdfViewer.localeObj.getConstant('Zoom out text'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-zoom-in-icon e-pv-icon', cssClass: 'e-pv-zoom-in-container', id: this.pdfViewer.element.id + '_zoomIn', text: this.pdfViewer.localeObj.getConstant('Zoom in text'), align: 'Left' });\n        items.push({ template: zoomDropDownTemplateString, cssClass: 'e-pv-zoom-drop-down-container', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-select-tool-icon e-pv-icon', cssClass: 'e-pv-text-select-tool-container', id: this.pdfViewer.element.id + '_selectTool', text: this.pdfViewer.localeObj.getConstant('Selection text') });\n        items.push({ prefixIcon: 'e-pv-pan-tool-icon e-pv-icon', cssClass: 'e-pv-pan-tool-container', id: this.pdfViewer.element.id + '_handTool', text: this.pdfViewer.localeObj.getConstant('Pan text') });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-undo-icon e-pv-icon', cssClass: 'e-pv-undo-container', id: this.pdfViewer.element.id + '_undo', text: this.pdfViewer.localeObj.getConstant('Undo'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-redo-icon e-pv-icon', cssClass: 'e-pv-redo-container', id: this.pdfViewer.element.id + '_redo', text: this.pdfViewer.localeObj.getConstant('Redo'), align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-search-icon e-pv-icon', cssClass: 'e-pv-text-search-container', id: this.pdfViewer.element.id + '_search', text: this.pdfViewer.localeObj.getConstant('Seach text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-annotation-icon e-pv-icon', cssClass: 'e-pv-annotation-container', id: this.pdfViewer.element.id + '_annotation', text: this.pdfViewer.localeObj.getConstant('Annotation Edit text'), align: 'Right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-print-document-icon e-pv-icon', cssClass: 'e-pv-print-document-container', id: this.pdfViewer.element.id + '_print', text: this.pdfViewer.localeObj.getConstant('Print text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-download-document-icon e-pv-icon', cssClass: 'e-pv-download-document-container', id: this.pdfViewer.element.id + '_download', text: this.pdfViewer.localeObj.getConstant('Download'), align: 'Right' });\n        return items;\n    };\n    Toolbar.prototype.afterToolbarCreation = function () {\n        this.itemsContainer = this.toolbar.element.childNodes[0];\n        this.itemsContainer.id = this.pdfViewer.element.id + '_toolbarItemsContainer';\n        this.openDocumentItem = this.addClassToolbarItem('_open', 'e-pv-open-document', this.pdfViewer.localeObj.getConstant('Open'));\n        this.undoItem = this.addClassToolbarItem('_undo', 'e-pv-undo', this.pdfViewer.localeObj.getConstant('Undo'));\n        this.redoItem = this.addClassToolbarItem('_redo', 'e-pv-redo', this.pdfViewer.localeObj.getConstant('Redo'));\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        this.zoomOutItem = this.addClassToolbarItem('_zoomOut', 'e-pv-zoom-out', this.pdfViewer.localeObj.getConstant('Zoom Out'));\n        this.zoomInItem = this.addClassToolbarItem('_zoomIn', 'e-pv-zoom-in', this.pdfViewer.localeObj.getConstant('Zoom In'));\n        // tslint:disable-next-line:max-line-length\n        this.textSelectItem = this.addClassToolbarItem('_selectTool', 'e-pv-text-select-tool', this.pdfViewer.localeObj.getConstant('Text Selection'));\n        this.panItem = this.addClassToolbarItem('_handTool', 'e-pv-pan-tool', this.pdfViewer.localeObj.getConstant('Panning'));\n        // tslint:disable-next-line:max-line-length\n        this.textSearchItem = this.addClassToolbarItem('_search', 'e-pv-text-search', this.pdfViewer.localeObj.getConstant('Text Search'));\n        this.annotationItem = this.addClassToolbarItem('_annotation', 'e-pv-annotation', this.pdfViewer.localeObj.getConstant('Annotation'));\n        // tslint:disable-next-line:max-line-length\n        this.printItem = this.addClassToolbarItem('_print', 'e-pv-print-document', this.pdfViewer.localeObj.getConstant('Print'));\n        this.downloadItem = this.addClassToolbarItem('_download', 'e-pv-download-document', this.pdfViewer.localeObj.getConstant('Download file'));\n        this.zoomDropdownItem = this.pdfViewerBase.getElement('_zoomDropDown');\n        this.createTooltip(this.zoomDropdownItem, this.pdfViewer.localeObj.getConstant('Zoom'));\n        this.zoomDropdownItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Zoom'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement, null, '_zoomDropDownContainer');\n        this.pdfViewerBase.getElement('_zoomDropDownContainer').style.minWidth = '';\n        this.createTooltip(this.currentPageBoxElement, this.pdfViewer.localeObj.getConstant('Page Number'));\n        this.currentPageBoxElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Page Number'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement, 'e-pv-current-page-container', '_currentPageInputContainer');\n        this.pdfViewerBase.getElement('_currentPageInputContainer').style.minWidth = '20px';\n        this.totalPageItem = this.pdfViewerBase.getElement('_totalPage');\n        this.addPropertiesToolItemContainer(this.totalPageItem.parentElement, 'e-pv-total-page-container', '_totalPageContainer');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.addClassToolbarItem = function (idString, className, tooltipText) {\n        var element = this.pdfViewerBase.getElement(idString);\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        element.setAttribute('aria-label', tooltipText);\n        element.parentElement.classList.add(className + '-container');\n        element.parentElement.classList.add('e-popup-text');\n        element.parentElement.id = this.pdfViewer.element.id + idString + 'Container';\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n            spanElement.classList.remove('e-icons');\n            spanElement.classList.remove('e-btn-icon');\n            if (this.pdfViewer.enableRtl) {\n                spanElement.classList.add('e-right');\n            }\n            var textElement = element.childNodes[1];\n            if (textElement) {\n                if (textElement.classList.contains('e-tbar-btn-text')) {\n                    textElement.id = this.pdfViewer.element.id + idString + 'Text';\n                }\n            }\n        }\n        element.style.width = '';\n        this.createTooltip(element, tooltipText);\n        return element;\n    };\n    Toolbar.prototype.addPropertiesToolItemContainer = function (element, className, idString) {\n        if (className !== null) {\n            element.classList.add(className);\n        }\n        element.classList.add('e-popup-text');\n        element.id = this.pdfViewer.element.id + idString;\n    };\n    Toolbar.prototype.createZoomDropdownElement = function () {\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', null);\n        return zoomDropdownElement.outerHTML;\n    };\n    Toolbar.prototype.createZoomDropdown = function () {\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.pdfViewerBase.getElement('_zoomDropDown'));\n    };\n    Toolbar.prototype.createCurrentPageInputTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var goToPageElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', null);\n        return goToPageElement.outerHTML;\n    };\n    Toolbar.prototype.createTotalPageTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var totalPageElement = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', 'e-pv-total-page');\n        return totalPageElement.outerHTML;\n    };\n    Toolbar.prototype.createNumericTextBox = function () {\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = this.pdfViewerBase.getElement('_currentPageInput');\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n    };\n    Toolbar.prototype.createToolbarItemsForMobile = function () {\n        this.toolbarElement.classList.add('e-pv-mobile-toolbar');\n        var template = '<button id=\"' + this.pdfViewer.element.id + '_more_option\" class=\"e-tbar-btn\"></button>';\n        this.toolbar = new tool({\n            // tslint:disable-next-line:max-line-length\n            items: [{ prefixIcon: 'e-pv-open-document-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Open'), id: this.pdfViewer.element.id + '_open' },\n                { type: 'Separator', align: 'Left' },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-undo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Undo'), id: this.pdfViewer.element.id + '_undo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-redo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Redo'), id: this.pdfViewer.element.id + '_redo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-text-search-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Text Search'), id: this.pdfViewer.element.id + '_search', align: 'Right' },\n                { template: template, align: 'Right' }\n            ], clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup'\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.openDocumentItem = this.pdfViewerBase.getElement('_open');\n        this.openDocumentItem.classList.add('e-pv-open-document');\n        this.openDocumentItem.firstElementChild.id = this.pdfViewer.element.id + '_openIcon';\n        this.textSearchItem = this.pdfViewerBase.getElement('_search');\n        this.textSearchItem.classList.add('e-pv-text-search');\n        this.textSearchItem.firstElementChild.id = this.pdfViewer.element.id + '_searchIcon';\n        this.undoItem = this.pdfViewerBase.getElement('_undo');\n        this.undoItem.classList.add('e-pv-undo');\n        this.redoItem = this.pdfViewerBase.getElement('_redo');\n        this.redoItem.classList.add('e-pv-redo');\n        this.redoItem.firstElementChild.id = this.pdfViewer.element.id + '_redoIcon';\n        this.undoItem.firstElementChild.id = this.pdfViewer.element.id + '_undoIcon';\n        this.createMoreOption(this.pdfViewer.element.id + '_more_option');\n    };\n    Toolbar.prototype.createMoreOption = function (idString) {\n        var _this = this;\n        this.moreOptionItem = document.getElementById(idString);\n        var items = [\n            {\n                text: this.pdfViewer.localeObj.getConstant('Download'), id: this.pdfViewer.element.id + '_menu_download',\n                iconCss: 'e-icons e-pv-download-document-icon e-pv-icon'\n            },\n            {\n                text: this.pdfViewer.localeObj.getConstant('Bookmarks'), id: this.pdfViewer.element.id + '_menu_bookmarks',\n                iconCss: 'e-icons e-pv-bookmark-icon e-pv-icon'\n            }\n        ];\n        this.moreDropDown = new DropDownButton({\n            items: items, iconCss: 'e-pv-more-icon e-pv-icon', cssClass: 'e-caret-hide',\n            open: function (args) {\n                var dropdownButtonPosition = _this.moreDropDown.element.getBoundingClientRect();\n                // tslint:disable-next-line:max-line-length\n                if (!_this.pdfViewer.enableRtl) {\n                    args.element.parentElement.style.left = dropdownButtonPosition.left + dropdownButtonPosition.width - args.element.parentElement.offsetWidth + 'px';\n                }\n            }, select: function (args) {\n                switch (args.item.id) {\n                    case _this.pdfViewer.element.id + '_menu_download':\n                        _this.pdfViewerBase.download();\n                        break;\n                    case _this.pdfViewer.element.id + '_menu_bookmarks':\n                        _this.showToolbar(false);\n                        _this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');\n                        break;\n                    default:\n                        break;\n                }\n            }, beforeItemRender: function (args) {\n                if (args.item.id === _this.pdfViewer.element.id + '_menu_bookmarks') {\n                    if (!_this.pdfViewer.bookmarkViewModule || !_this.pdfViewer.bookmarkViewModule.bookmarks) {\n                        args.element.classList.add('e-disabled');\n                    }\n                    else {\n                        args.element.classList.remove('e-disabled');\n                    }\n                }\n            }, close: function (args) {\n                _this.moreOptionItem.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        });\n        this.moreDropDown.appendTo('#' + idString);\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, className) {\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            toolbarItem.className = className;\n        }\n        if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        return toolbarItem;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.createTooltip = function (toolbarItem, tooltipText) {\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip && this.toolbarElement.contains(args.target)) {\n            args.cancel = true;\n        }\n        if (this.annotationToolbarModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.annotationToolbarSettings.showTooltip && this.annotationToolbarModule.toolbarElement.contains(args.target)) {\n                args.cancel = true;\n            }\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n            this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n            this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n            this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n            this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.navigationPane.toolbarResize();\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.handleToolbarButtonClick = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_open':\n            case this.pdfViewer.element.id + '_openIcon':\n            case this.pdfViewer.element.id + '_openText':\n                this.fileInputElement.click();\n                if (Browser.isDevice) {\n                    args.originalEvent.target.blur();\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n                break;\n            case this.pdfViewer.element.id + '_download':\n            case this.pdfViewer.element.id + '_downloadIcon':\n            case this.pdfViewer.element.id + '_downloadText':\n                this.pdfViewerBase.download();\n                break;\n            case this.pdfViewer.element.id + '_print':\n            case this.pdfViewer.element.id + '_printIcon':\n            case this.pdfViewer.element.id + '_printText':\n                if (this.pdfViewer.printModule) {\n                    this.pdfViewer.printModule.print();\n                }\n                break;\n            case this.pdfViewer.element.id + '_undo':\n            case this.pdfViewer.element.id + '_undoIcon':\n            case this.pdfViewer.element.id + '_undoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.undo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_redo':\n            case this.pdfViewer.element.id + '_redoIcon':\n            case this.pdfViewer.element.id + '_redoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.redo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_firstPage':\n            case this.pdfViewer.element.id + '_firstPageIcon':\n            case this.pdfViewer.element.id + '_firstPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToFirstPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_previousPage':\n            case this.pdfViewer.element.id + '_previousPageIcon':\n            case this.pdfViewer.element.id + '_previousPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToPreviousPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_nextPage':\n            case this.pdfViewer.element.id + '_nextPageIcon':\n            case this.pdfViewer.element.id + '_nextPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToNextPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_lastPage':\n            case this.pdfViewer.element.id + '_lastPageIcon':\n            case this.pdfViewer.element.id + '_lastPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToLastPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_zoomIn':\n            case this.pdfViewer.element.id + '_zoomInIcon':\n            case this.pdfViewer.element.id + '_zoomInText':\n                this.pdfViewer.magnificationModule.zoomIn();\n                break;\n            case this.pdfViewer.element.id + '_zoomOut':\n            case this.pdfViewer.element.id + '_zoomOutIcon':\n            case this.pdfViewer.element.id + '_zoomOutText':\n                this.pdfViewer.magnificationModule.zoomOut();\n                break;\n            case this.pdfViewer.element.id + '_selectTool':\n            case this.pdfViewer.element.id + '_selectToolIcon':\n            case this.pdfViewer.element.id + '_selectToolText':\n                if (!this.isSelectionToolDisabled) {\n                    this.pdfViewerBase.initiateTextSelectMode();\n                    this.updateInteractionTools(true);\n                }\n                break;\n            case this.pdfViewer.element.id + '_handTool':\n            case this.pdfViewer.element.id + '_handToolIcon':\n            case this.pdfViewer.element.id + '_handToolText':\n                if (!this.isScrollingToolDisabled) {\n                    this.pdfViewerBase.initiatePanning();\n                    this.updateInteractionTools(false);\n                }\n                break;\n            case this.pdfViewer.element.id + '_search':\n            case this.pdfViewer.element.id + '_searchIcon':\n            case this.pdfViewer.element.id + '_searchText':\n                this.textSearchButtonHandler();\n                break;\n            case this.pdfViewer.element.id + '_annotation':\n            case this.pdfViewer.element.id + '_annotationIcon':\n            case this.pdfViewer.element.id + '_annotationText':\n                this.initiateAnnotationMode();\n                break;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:radix\n            var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n            if (this.zoomDropDown.text === currentPercent) {\n                this.zoomDropDown.element.value = currentPercent;\n            }\n            if (this.zoomDropDown.index === 9) {\n                this.zoomDropDown.value = 2;\n            }\n            // tslint:disable-next-line\n            this.zoomDropDown.text = currentPercent;\n        }\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n                this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n                this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n                if (this.isTextSearchBoxDisplayed) {\n                    this.selectItem(this.textSearchItem);\n                    // tslint:disable-next-line:max-line-length\n                    var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                    searchInputElement.select();\n                    searchInputElement.focus();\n                }\n                else {\n                    this.deSelectItem(this.textSearchItem);\n                }\n            }\n        }\n        else {\n            this.showToolbar(false);\n            this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');\n        }\n    };\n    Toolbar.prototype.initiateAnnotationMode = function () {\n        if (this.annotationToolbarModule) {\n            if (this.pdfViewerBase.isPanMode && this.annotationToolbarModule.isToolbarHidden) {\n                this.pdfViewerBase.initiateTextSelectMode();\n                this.updateInteractionTools(true);\n            }\n            this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.isPrintBtnVisible) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.isDownloadBtnVisible) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.isSearchBtnVisible) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (this.isOpenBtnVisible && toolbarItems.length === 1) ||\n            // tslint:disable-next-line:max-line-length\n            (!this.isNavigationToolVisible && !this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible && !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if (((!this.isNavigationToolVisible && !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) ||\n            (this.isOpenBtnVisible && !this.isNavigationToolVisible) ||\n            // tslint:disable-next-line:max-line-length\n            ((!this.isOpenBtnVisible && !this.isNavigationToolVisible) || (!this.isMagnificationToolVisible && !this.isScrollingBtnVisible && !this.isSelectionBtnVisible))) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible || this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n        if (((!this.isMagnificationToolVisible && !this.isNavigationToolVisible && !this.isScrollingBtnVisible\n            && !this.isSelectionBtnVisible) && this.isUndoRedoBtnsVisible || !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems) {\n            if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n                this.showOpenOption(true);\n            }\n            else {\n                this.showOpenOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n                this.showPageNavigationTool(true);\n            }\n            else {\n                this.showPageNavigationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n                this.showMagnificationTool(true);\n            }\n            else {\n                this.showMagnificationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n                this.showSelectionTool(true);\n            }\n            else {\n                this.showSelectionTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n                this.showScrollingTool(true);\n            }\n            else {\n                this.showScrollingTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n                this.showPrintOption(true);\n            }\n            else {\n                this.showPrintOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n                this.showDownloadOption(true);\n            }\n            else {\n                this.showDownloadOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n                this.showSearchOption(true);\n            }\n            else {\n                this.showSearchOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('UndoRedoTool') !== -1) {\n                this.showUndoRedoTool(true);\n            }\n            else {\n                this.showUndoRedoTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('AnnotationEditTool') !== -1) {\n                this.showAnnotationEditTool(true);\n            }\n            else {\n                this.showAnnotationEditTool(false);\n            }\n            this.showSeparator(toolbarSettingsItems);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.showAnnotationToolbar(null);\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable) {\n        var _this = this;\n        if (Browser.isDevice) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // tslint:disable-next-line:max-line-length\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns();\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            this.toolbarElement.style.display = 'none';\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // tslint:disable-next-line:max-line-length\n        items.push({ template: colorTemplate, align: 'right' });\n        items.push({ template: opacityTemplate, align: 'right' });\n        items.push({ type: 'Separator', align: 'right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        this.hideMobileAnnotationToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(true);\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate, align: 'Left' });\n        items.push({ template: opacityTemplate, align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    AnnotationToolbar.prototype.createDropDowns = function () {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            var opacityElement = this.pdfViewerBase.getElement('_annotation_opacity-popup');\n            opacityElement.style.left = '0px';\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                case 'Highlight':\n                    this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor;\n                    break;\n                case 'Underline':\n                    this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor;\n                    break;\n                case 'Strikethrough':\n                    this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor;\n                    break;\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function () {\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                    this.isCurrentAnnotationOpacitySet = false;\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = args.value / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = args.value / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = args.value / 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // tslint:disable-next-line:max-line-length\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // tslint:disable-next-line:max-line-length\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            change: this.onColorPickerChange.bind(this), value: '#000000'\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(args.currentValue.hex);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = args.currentValue.hex;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = args.currentValue.hex;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = args.currentValue.hex;\n                        break;\n                }\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, args.currentValue.hex);\n        this.colorDropDown.toggle();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // tslint:disable-next-line:max-line-length\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // tslint:disable-next-line:max-line-length\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // tslint:disable-next-line:max-line-length\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.selectAnnotationDeleteItem(false);\n        this.enableAnnotationPropertiesTools(false);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.handleHighlight();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.handleUnderline();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.handleStrikethrough();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                this.selectAnnotationDeleteItem(false);\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element) {\n        if (!this.isToolbarHidden) {\n            if (element) {\n                this.adjustViewer(false);\n                this.primaryToolbar.deSelectItem(element);\n            }\n            this.deselectAllItems();\n            this.toolbarElement.style.display = 'none';\n        }\n        else {\n            var toolBarInitialStatus = this.toolbarElement.style.display;\n            this.toolbarElement.style.display = 'block';\n            if (element) {\n                this.primaryToolbar.selectItem(element);\n                if (toolBarInitialStatus === 'none') {\n                    this.adjustViewer(true);\n                }\n            }\n        }\n        if (this.pdfViewerBase.isPanMode) {\n            this.enableAnnotationAddTools(false);\n        }\n        else {\n            this.enableAnnotationAddTools(true);\n        }\n        this.isToolbarHidden = !this.isToolbarHidden;\n    };\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('HighlightTool') !== -1) {\n            this.showHighlightTool(true);\n        }\n        else {\n            this.showHighlightTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('UnderlineTool') !== -1) {\n            this.showUnderlineTool(true);\n        }\n        else {\n            this.showUnderlineTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('StrikethroughTool') !== -1) {\n            this.showStrikethroughTool(true);\n        }\n        else {\n            this.showStrikethroughTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('ColorEditTool') !== -1) {\n            this.showColorEditTool(true);\n        }\n        else {\n            this.showColorEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('OpacityEditTool') !== -1) {\n            this.showOpacityEditTool(true);\n        }\n        else {\n            this.showOpacityEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('AnnotationDeleteTool') !== -1) {\n            this.showAnnotationDeleteTool(true);\n        }\n        else {\n            this.showAnnotationDeleteTool(false);\n        }\n        this.showSeparator();\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)\n            || (!this.isColorToolVisible && !this.isOpacityToolVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if ((!this.isColorToolVisible && !this.isOpacityToolVisible) && (!this.isHighlightBtnVisible &&\n            !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 6, 6);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 1, 1);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 2, 2);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 4, 4);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 5, 5);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 7, 7);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        var annotationToolbarHeight = this.toolbarElement.getBoundingClientRect().height;\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        if (isAdjust) {\n            // tslint:disable-next-line:max-line-length\n            sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight)) + 'px';\n            sideBarToolbar.style.height = sideBarToolbar.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n            splitterElement.style.height = splitterElement.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            sideBarToolbar.style.top = toolbarHeight + 'px';\n            sideBarContentContainer.style.top = toolbarHeight + 'px';\n            splitterElement.style.top = toolbarHeight + 'px';\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            sideBarToolbar.style.height = sideBarToolbar.getBoundingClientRect().height + annotationToolbarHeight + 'px';\n            splitterElement.style.height = splitterElement.getBoundingClientRect().height + annotationToolbarHeight + 'px';\n        }\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.enableAnnotationPropertiesTools(true);\n            // tslint:disable-next-line:max-line-length\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(false);\n        this.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.selectAnnotationDeleteItem(false);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable) {\n        this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableAnnotationAddTools(true);\n        }\n        else {\n            this.enableAnnotationAddTools(false);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.adjustViewer(false);\n        this.updateToolbarItems();\n        this.toolbarElement.style.display = 'none';\n        this.isToolbarHidden = true;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.colorDropDown.destroy();\n        this.opacityDropDown.destroy();\n        this.toolbar.destroy();\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        return element.getBoundingClientRect().height;\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.\n */\nvar AnnotationToolbarSettings = /** @class */ (function (_super) {\n    __extends(AnnotationToolbarSettings, _super);\n    function AnnotationToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], AnnotationToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], AnnotationToolbarSettings.prototype, \"annotationToolbarItem\", void 0);\n    return AnnotationToolbarSettings;\n}(ChildProperty));\nexport { AnnotationToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.\n */\nvar StrikethroughSettings = /** @class */ (function (_super) {\n    __extends(StrikethroughSettings, _super);\n    function StrikethroughSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], StrikethroughSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ff0000')\n    ], StrikethroughSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], StrikethroughSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('strikethrough')\n    ], StrikethroughSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], StrikethroughSettings.prototype, \"modifiedDate\", void 0);\n    return StrikethroughSettings;\n}(ChildProperty));\nexport { StrikethroughSettings };\n/**\n * The `UnderlineSettings` module is used to provide the properties to Underline annotation.\n */\nvar UnderlineSettings = /** @class */ (function (_super) {\n    __extends(UnderlineSettings, _super);\n    function UnderlineSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], UnderlineSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#00ff00')\n    ], UnderlineSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], UnderlineSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('underline')\n    ], UnderlineSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], UnderlineSettings.prototype, \"modifiedDate\", void 0);\n    return UnderlineSettings;\n}(ChildProperty));\nexport { UnderlineSettings };\n/**\n * The `HighlightSettings` module is used to provide the properties to Highlight annotation.\n */\nvar HighlightSettings = /** @class */ (function (_super) {\n    __extends(HighlightSettings, _super);\n    function HighlightSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], HighlightSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ffff00')\n    ], HighlightSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], HighlightSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('highlight')\n    ], HighlightSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], HighlightSettings.prototype, \"modifiedDate\", void 0);\n    return HighlightSettings;\n}(ChildProperty));\nexport { HighlightSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download file': 'Download file',\n            'Download': 'Download',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            'Apply': 'Apply',\n            'GoToPage': 'Go to Page',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            'No Text Found': 'No Text Found',\n            'Undo': 'Undo',\n            'Redo': 'Redo',\n            'Annotation': 'Add or Edit annotations',\n            'Highlight': 'Highlight Text',\n            'Underline': 'Underline Text',\n            'Strikethrough': 'Strikethrough Text',\n            'Delete': 'Delete annotation',\n            'Opacity': 'Opacity',\n            'Color edit': 'Change Color',\n            'Opacity edit': 'Change Opacity',\n            'highlight': 'Highlight',\n            'underline': 'Underline',\n            'strikethrough': 'Strike through',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.',\n            'Open text': 'Open',\n            'First text': 'First Page',\n            'Previous text': 'Previous Page',\n            'Next text': 'Next Page',\n            'Last text': 'Last Page',\n            'Zoom in text': 'Zoom In',\n            'Zoom out text': 'Zoom Out',\n            'Selection text': 'Selection',\n            'Pan text': 'Pan',\n            'Print text': 'Print',\n            'Seach text': 'Search',\n            'Annotation Edit text': 'Edit Annotation'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"isDocumentEdited\", {\n        /**\n         * Checks whether the PDF document is edited.\n         */\n        get: function () {\n            return this.viewerBase.isDocumentEdited;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"annotation\", {\n        /**\n         * Gets the annotation object of the pdf viewer.\n         * @returns { Annotation }\n         */\n        get: function () {\n            return this.annotationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableAnnotation) {\n            modules.push({\n                member: 'Annotation', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document - Specifies the document name for load\n     * @param  {string} password - Specifies the Given document password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    /**\n     * Perform undo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.undo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.undo();\n        }\n    };\n    /**\n     * Perform redo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.redo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.redo();\n        }\n    };\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.classList.remove('e-pdfviewer');\n            this.element.innerHTML = '';\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewer.prototype.fireAnnotationAdd = function (pageNumber, index, type, bounds, settings) {\n        var eventArgs = { name: 'annotationAdd', pageIndex: pageNumber, annotationId: index, annotationType: type, annotationBound: bounds, annotationSettings: settings };\n        this.trigger('annotationAdd', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAnnotationRemove = function (pageNumber, index, type) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'annotationRemove', pageIndex: pageNumber, annotationId: index, annotationType: type };\n        this.trigger('annotationRemove', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewer.prototype.fireAnnotationPropertiesChange = function (pageNumber, index, type, isColorChanged, isOpacityChanged) {\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pageNumber, annotationId: index, annotationType: type, isColorChanged: isColorChanged, isOpacityChanged: isOpacityChanged };\n        this.trigger('annotationPropertiesChange', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableAnnotation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextMarkupAnnotation\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'AnnotationEditTool', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ showTooltip: true, annotationToolbarItem: ['HighlightTool', 'UnderlineTool', 'StrikethroughTool', 'ColorEditTool', 'OpacityEditTool', 'AnnotationDeleteTool'] })\n    ], PdfViewer.prototype, \"annotationToolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#ffff00', author: 'Guest', subject: 'Highlight', modifiedDate: '' })\n    ], PdfViewer.prototype, \"highlightSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#ff0000', author: 'Guest', subject: 'Strikethrough', modifiedDate: '' })\n    ], PdfViewer.prototype, \"strikethroughSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#00ff00', author: 'Guest', subject: 'Underline', modifiedDate: '' })\n    ], PdfViewer.prototype, \"underlineSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationAdd\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationRemove\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationPropertiesChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ListView } from '@syncfusion/ej2-lists';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.childNavigateCount = 0;\n        // tslint:disable-next-line\n        this.bookmarkClick = function (args) {\n            // tslint:disable-next-line\n            if (!args.event.target.classList.contains('e-icons')) {\n                var bookid = args.data.Id;\n                _this.childNavigateCount = 0;\n                _this.pdfViewerBase.navigationPane.goBackToToolbar();\n                _this.navigateToBookmark(bookid);\n            }\n            else {\n                _this.childNavigateCount++;\n            }\n            return false;\n        };\n        this.nodeClick = function (args) {\n            _this.setHeight(args.node);\n            var bookid = Number(args.nodeData.id);\n            _this.navigateToBookmark(bookid);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                if (_this.pdfViewerBase.navigationPane) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.pdfViewerBase.navigationPane) {\n                    if (_this.bookmarks == null) {\n                        _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                    }\n                    else {\n                        _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                        _this.isBookmarkViewDiv = false;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        var _this = this;\n        if (!this.isBookmarkViewDiv) {\n            this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n            this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n            // tslint:disable-next-line:max-line-length\n            var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon e-right' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            // tslint:disable-next-line:max-line-length\n            var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n            if (this.pdfViewer.enableRtl) {\n                bookmarkTitle.style.paddingRight = 26 + 'px';\n            }\n            else {\n                bookmarkTitle.style.paddingLeft = 40 + 'px';\n            }\n            bookmarkTitle.innerText = '${Title}';\n            bookmarkIconView.appendChild(bookmarkTitle);\n            // tslint:disable-next-line:max-line-length\n            this.treeObj = new TreeView({\n                fields: {\n                    dataSource: this.bookmarks.bookMark,\n                    id: 'Id',\n                    text: 'Title',\n                    child: 'Child',\n                    hasChildren: 'HasChild',\n                },\n                nodeTemplate: bookmarkIconView.outerHTML,\n                nodeSelected: this.nodeClick.bind(this),\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.treeObj.enableRtl = true;\n            }\n            this.treeObj.appendTo(this.bookmarkView);\n            ['mouseover', 'keydown'].forEach(function (evt) { return _this.bookmarkView.addEventListener(evt, function (event) {\n                _this.setHeight(event.target);\n            }); });\n            this.isBookmarkViewDiv = true;\n        }\n        this.bookmarkView.style.display = 'block';\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkContentMobile = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.remove();\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);\n        this.bookmarkList = new ListView({\n            dataSource: this.bookmarks.bookMark,\n            fields: {\n                id: 'Id',\n                text: 'Title',\n                child: 'Child'\n            },\n            showHeader: false,\n            select: this.bookmarkClick.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.bookmarkList.enableRtl = true;\n        }\n        this.bookmarkList.appendTo(this.bookmarkView);\n    };\n    // tslint:disable-next-line\n    BookmarkView.prototype.setHeight = function (element) {\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            else if (element.classList.contains('e-list-parent')) {\n                element = element.querySelector('.e-fullrow');\n            }\n            else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\n                element = element.closest('.e-list-item').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.setBookmarkContentHeight = function () {\n        // tslint:disable-next-line\n        var element = this.treeObj.element;\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    BookmarkView.prototype.navigateToBookmark = function (bookid) {\n        var pageIndex = this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n        var Y = this.bookmarksDestination.bookMarkDestination[bookid].Y;\n        this.goToBookmark(pageIndex, Y);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @param  {number} pageIndex - Specifies the pageIndex for Navigate\n     * @param  {number} y - Specifies the Y coordinates value of the Page\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n            this.pdfViewerBase.updateMobileScrollerPosition();\n        }\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.disableBookmarkButton();\n            this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        }\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            if (this.bookmarkView.parentElement !== null) {\n                this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n            }\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.contextMenuHeight = 144;\n        /**\n         * @private\n         */\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                var selectionRectBounds = this.getSelectionRectangleBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    // tslint:disable-next-line:max-line-length\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bound: selectionBounds, rectangleBounds: selectionRectBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBound = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    var selectionRectBounds = this.getSelectionRectangleBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bound: selectionBound, rectangleBounds: selectionRectBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode).childNodes[0];\n        var endElement = document.getElementById(endNode).childNodes[0];\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds = this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber);\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getSelectionRectangleBounds = function (range, pageNumber) {\n        var selectionBounds = [];\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var startOffset = 0;\n            var endOffset = 0;\n            var currentId = 0;\n            var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);\n            var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(range.startContainer, anchorPageId);\n            var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);\n            var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(range.endContainer, focusPageId);\n            var textDivs = this.pdfViewerBase.getElement('_textLayer_' + pageNumber).childNodes;\n            if (pageNumber === anchorPageId) {\n                currentId = anchorTextId;\n            }\n            else {\n                currentId = 0;\n            }\n            for (var j = currentId; j < textDivs.length; j++) {\n                var textElement = textDivs[j];\n                if (j === anchorTextId) {\n                    startOffset = range.startOffset;\n                }\n                else {\n                    startOffset = 0;\n                }\n                if (j === focusTextId) {\n                    endOffset = range.endOffset;\n                }\n                else {\n                    endOffset = textElement.textContent.length;\n                }\n                var newRange = document.createRange();\n                for (var k = 0; k < textElement.childNodes.length; k++) {\n                    var node = textElement.childNodes[k];\n                    newRange.setStart(node, startOffset);\n                    newRange.setEnd(node, endOffset);\n                }\n                var boundingRect = this.normalizeBounds(newRange.getBoundingClientRect(), pageNumber);\n                selectionBounds.push(boundingRect);\n                newRange.detach();\n                if (j === focusTextId) {\n                    break;\n                }\n            }\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n            selectionBounds.push(bounds);\n        }\n        return selectionBounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.width)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bound = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bound = ranges[i].bound;\n                }\n            }\n        }\n        return bound;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.calculateContextMenuPosition(event.touches[0].clientY, event.touches[0].clientX);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.calculateContextMenuPosition = function (top, left) {\n        top = top - this.pdfViewerBase.toolbarHeight;\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var contextTop = top - this.contextMenuHeight;\n            if (contextTop < this.pdfViewerBase.toolbarHeight) {\n                top = top + this.contextMenuHeight;\n            }\n            else {\n                top = contextTop;\n            }\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(top, left - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        if (this.pdfViewerBase.getTextMarkupAnnotationMode()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch(_this.searchInput);\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        if (this.pdfViewer.enableRtl) {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n        }\n        else {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        }\n        this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        if (this.pdfViewer.enableRtl) {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n        }\n        else {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        }\n        this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        if (this.pdfViewer.enableRtl) {\n            this.searchBox.classList.add('e-rtl');\n            this.searchBox.style.left = '88.3px';\n        }\n        else {\n            this.searchBox.classList.remove('e-rtl');\n            this.searchBox.style.right = '88.3px';\n        }\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n            var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n            if (secondaryToolbar) {\n                if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n                    this.searchBox.style.right = '0px';\n                }\n            }\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n                this.searchBox.style.right = '0px';\n                // tslint:disable-next-line\n                this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n                // tslint:disable-next-line\n                this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            }\n            else {\n                this.searchBox.style.right = '88.3px';\n                this.searchBox.style.width = '';\n                this.searchInput.style.width = '';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function (searchElement) {\n        var inputString = searchElement.value;\n        this.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.initiateSearch = function (inputString) {\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch(this.searchInput);\n            }\n        }\n        else {\n            this.initiateTextSearch(this.searchInput);\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -100 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                var targetScrollElement = this.getScrollElement(element);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                var targetScrollElement = this.getScrollElement(element_1);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    TextSearch.prototype.getScrollElement = function (element) {\n        var targetElement = element;\n        if (element.childNodes.length > 0) {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                if (element.childNodes[i].classList) {\n                    if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n                        targetElement = element.childNodes[i];\n                    }\n                }\n            }\n        }\n        return targetElement;\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (Browser.isDevice) {\n                parent.scrollLeft = offsetX;\n            }\n            else {\n                if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                    parent.scrollLeft = offsetX;\n                }\n            }\n        }\n        parent.scrollTop = offsetY;\n        this.pdfViewerBase.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        if (this.pdfViewer.enableRtl) {\n            if (className === 'e-pv-prev-search') {\n                iconSpan.style.paddingRight = '5px';\n            }\n        }\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.prevSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.prevSearchBtn.disabled = true;\n            }\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.nextSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.nextSearchBtn.disabled = true;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n        if (element.classList.contains('e-pv-search-icon')) {\n            this.initiateTextSearch(inputElement);\n        }\n        else if (element.classList.contains('e-pv-search-close')) {\n            inputElement.value = '';\n            this.resetTextSearch();\n            inputElement.focus();\n        }\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (this.searchBtn) {\n            if (isEnable) {\n                this.searchBtn.classList.remove('e-pv-search-close');\n                this.searchBtn.classList.add('e-pv-search-icon');\n            }\n            else {\n                this.searchBtn.classList.remove('e-pv-search-icon');\n                this.searchBtn.classList.add('e-pv-search-close');\n            }\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText - Specifies the searchText content\n     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', {\n                id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container'\n            });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n                    var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                    var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                    _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = {\n            pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1\n        };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        var printImage = request.responseText;\n        if (typeof printImage !== 'object') {\n            printImage = JSON.parse(printImage);\n        }\n        var annotationSource = '';\n        if (printImage.textMarkupAnnotation && this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            annotationSource = this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printImage.textMarkupAnnotation, pageIndex);\n        }\n        // tslint:disable-next-line:max-line-length\n        this.printCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_printCanvas_' + pageIndex, className: 'e-pv-print-canvas' });\n        this.printCanvas.style.width = pageWidth + 'px';\n        this.printCanvas.style.height = pageHeight + 'px';\n        this.printCanvas.height = 1056 * window.devicePixelRatio;\n        this.printCanvas.width = 816 * window.devicePixelRatio;\n        var context = this.printCanvas.getContext('2d');\n        var pageImage = new Image();\n        var annotationImage = new Image();\n        pageImage.onload = function () {\n            if (pageHeight > pageWidth) {\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                }\n            }\n            else {\n                // translate to center canvas\n                context.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5);\n                // rotate the canvas to - 90 degree \n                context.rotate(-0.5 * Math.PI);\n                // un translate the canvas back to origin\n                context.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5);\n                // draw the image\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                }\n            }\n            if (pageIndex === (proxy.pdfViewerBase.pageCount - 1)) {\n                proxy.printWindowOpen();\n            }\n        };\n        pageImage.src = printImage.image;\n        annotationImage.src = annotationSource;\n        this.printViewerContainer.appendChild(this.printCanvas);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:100%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n            this.frameDoc.document.write('<div style=\"margin:0mm;width:816px;height:1056px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /></div>');\n        }\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            try {\n                this.iframe.contentWindow.document.execCommand('print', false, null);\n            }\n            catch (e) {\n                this.iframe.contentWindow.print();\n            }\n        }\n        else {\n            setTimeout(function () {\n                _this.iframe.contentWindow.print();\n                _this.iframe.contentWindow.focus();\n                document.body.removeChild(_this.iframe);\n            }, 200);\n        }\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["Annotation","pdfViewer","viewerBase","this","actionCollection","redoCollection","isPopupNoteVisible","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","TextMarkupAnnotation","prototype","setAnnotationMode","type","clearAnnotationMode","drawTextMarkupAnnotations","toString","isTextMarkupAnnotationMode","deleteAnnotation","deleteTextMarkupAnnotation","initializeCollection","popupNote","createNote","addAction","pageNumber","index","annotation","actionString","property","action","pageIndex","modifiedProperty","push","updateToolbar","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","redo","redoTextMarkupAction","toolbarModule","updateUndoRedoButtons","createElement","id","element","className","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","style","backgroundColor","display","topPosition","pageY","top","leftPosition","pageX","left","width","height","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","viewerContainer","addEventListener","saveClosePopupMenu","bind","onPopupElementMoveStart","onPopupElementMove","window","onPopupElementMoveEnd","focus","changedTouches","target","contains","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","pageSize","currentAnnotPageNumber","getZoomFactor","parseFloat","top_1","clientPosition","pageDiv","document","getElementById","saveNoteContent","innerText","closePopupMenu","parentElement","removeChild","showAnnotationPopup","getEventPageNumber","currentTextMarkupAnnotation","getProperDate","modifiedDate","canvasPosition","date","dateObject","Date","isNaN","getFullYear","dateString","slice","getMonth","getDate","getHours","getMinutes","getSeconds","eventTarget","pageString","split","parseInt","clear","destroy","getModuleName","LinkAnnotation","renderHyperlinkContent","data","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","this_1","i","aTag","rect","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","onclick","fireHyperlinkClick","open","this_2","undefined","destPageHeight","destLocation","scrollValue","name","scrollTop","background","position","Left","Top","Width","Height","modifyZindexForTextSelection","isAdd","pageCount","getElement","pageChildNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","aElement","getElementsByTagName","parentNode","currentTextMarkupAddMode","selectTextMarkupCurrentPage","currentAnnotationIndex","highlightColor","highlightSettings","underlineColor","underlineSettings","strikethroughColor","strikethroughSettings","highlightOpacity","opacity","underlineOpacity","strikethroughOpacity","createAnnotationLayer","pageWidth","pageHeight","displayMode","annotationCanvas","renderTextMarkupAnnotationsInPage","textMarkupAnnotations","canvas","renderTextMarkupAnnotations","factor","getMagnifiedValue","context","getContext","setLineDash","annotations","getAnnotations","annotationObject","TextMarkupAnnotationType","textMarkupAnnotationType","Color","Opacity","bounds","Bounds","Author","subject","Subject","ModifiedDate","Note","Rect","storeAnnotations","annotBounds","renderHighlightAnnotation","renderStrikeoutAnnotation","renderUnderlineAnnotation","maintainAnnotationSelection","selectionObject","textSelectionModule","selectionRangeArray","convertSelectionToTextMarkup","getSelection","pageBounds","getDrawnBounds","drawTextMarkups","clearTextSelection","rectangleBounds","bound","getPageContext","getAddedAnnotation","isDocumentEdited","settings","annotationModule","fireAnnotationAdd","beginPath","x","X","y","Y","globalAlpha","closePath","fillStyle","msFillRule","fill","save","getProperBounds","drawLine","boundValues","moveTo","lineTo","lineWidth","strokeStyle","stroke","printTextMarkupAnnotations","toDataURL","saveTextMarkupAnnotations","storeObject","sessionStorage","getItem","documentId","Array","colorpick","ColorPicker","j","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","stringify","getBoundsForSave","colorString","getValue","getRgbCode","pageAnnotations","deletedAnnotation","splice","manageAnnotations","fireAnnotationRemove","Browser","isDevice","annotationToolbarModule","hideMobileAnnotationToolbar","showToolbar","modifyColorProperty","modifyAnnotationProperty","fireAnnotationPropertiesChange","modifyOpacityProperty","args","value","status","toLocaleString","clearCurrentAnnotation","tempColor","tempOpacity","enableAnnotationPropertiesTool","clearCurrentAnnotationSelection","lowerPageIndex","higherPageIndex","k","clearAnnotationSelection","stringArray","r","g","b","selection","anchorNode","range","createRange","isBackWardSelection","textLayer","focusNode","pageId","getPageIndex","pageRect","setStart","focusOffset","setEnd","anchorOffset","boundingRect","rectangle","getDefaultValue","right","bottom","rectangleArray","startNode","endNode","selectionStartOffset","selectionEndOffset","anchorPageId","anchorTextId","getTextIndex","focusPageId","focusTextId","startOffset","endOffset","currentId","selectionRects","pageStartId","pageEndId","pageStartOffset","pageEndOffset","textDivs","textElement","node","detach","startElementNode","endElementNode","pageRange","pageRectBounds","pageRectangle","removeAllRanges","rerenderAnnotationsPinch","annotCanvas","oldAnnotCanvas","rerenderAnnotations","oldCanvas","newCanvas","resizeAnnotations","onTextMarkupAnnotationMouseUp","isNullOrUndefined","isClickedOnScrollBar","currentAnnot","getCurrentMarkupAnnotation","selectAnnotation","isToolbarHidden","showAnnotationToolbar","annotationItem","onTextMarkupAnnotationTouchEnd","number","touchCanvas","touches","onTextMarkupAnnotationMouseMove","cursor","isPanMode","getAnnotationToolStatus","currentTextMarkupAnnotations","canvasParentPosition","leftClickPosition","topClickPosition","annotationList","isAnnotationGot","top_2","compareCurrentAnnotations","previousX","currentAnnotation","firstAnnotBounds","firstXposition","firstYposition","secondAnnotBounds","secondXposition","secondYposition","drawAnnotationSelectRect","isEnable","createMobileAnnotationToolbar","isMobileAnnotEnabled","selectAnnotationDeleteItem","enable","enableAnnotationPropertiesTools","updateColorInIcon","colorDropDownElement","setCurrentColorInPicker","annotObject","removeItem","getPageCollection","indexOf","markupAnnotation","annotationStringified","setItem","predefinedDate","storedIndex","NavigationPane","viewer","base","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isBookmarkOpen","isThumbnailOpen","isTooltipCreated","isNavigationToolbarVisible","isBookmarkListOpen","isNavigationPaneResized","resizeIconMouseOver","srcElement","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","offsetTop","offsetParent","clientWidth","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","getPopupNoteVisibleStatus","preventDefault","enableRtl","maxWidth","Math","floor","outerContainerWidth","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","closeDiv","viewerWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","bookmarkButton","children","bookmarkViewModule","setBookmarkContentHeight","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","localeObj","getConstant","bookmarkPane","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","bookmarkButtonOnClick","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","createNavigationPane","sideBarToolbar","attrs","role","aria-orientation","tabindex","cssFloat","sideBarToolbarSplitter","direction","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","sideBarTitleOnMouseup","adjustPane","splitterElement","toolbarHeight","createNavigationPaneMobile","option","toolbarElement","viewerMainContainer","insertBefore","items","searchTemplate","prefixIcon","tooltipText","click","goBackToToolbar","template","iconElement","firstElementChild","enableSearchItems","textSearchModule","searchButtonClick","searchInput","searchPrevious","searchNext","text","toolbar","Tool","overflowMode","appendTo","initiateSearchBox","initiateBookmarks","searchBtn","which","initiateTextSearch","resetVariables","setSearchInputWidth","enableItems","mobileScrollerContainer","bookmarkContainer","renderBookmarkContentMobile","inputString","initiateSearch","cancelTextSearch","childNavigateCount","bookmarkList","back","onWindowResize","searchInputParent","padding","getComputedStyle","getPropertyValue","getParentElementSearchBox","idString","createTooltipMobile","toastObject","tooltipChild","tooltipDiv","Toast","close","onTooltipClose","animation","hide","duration","effect","clientHeight","show","tooltipElement","isMessagePopupOpened","toolbarResize","thumbnailButton","disabled","aria-label","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","buttonSpan","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","enableBookmarkButton","resizeIcon","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","t","call","label","ops","trys","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","navigationPane","isAnnotationToolbarHidden","updatePageHeight","annotationToolbarHeight","onToolbarResize","enableToolbar","textSearchBoxOnResize","mobilePageNoContainer","updateMobileScrollerPosition","viewerContainerOnMousedown","button","detail","isIE","documentMode","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","idStringArray","firePageClick","offsetX","offsetY","isTextMarkupAnnotationModule","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isCollapsed","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","getTextMarkupAnnotationMode","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","setTouchPoints","preventTouchEvent","getTime","handleTaps","contextMenuObj","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","difference","speed","abs","viewerContainerOnPointerEnd","viewerContainerOnScroll","scrollposX","scrollposY","ratio","scrollHeight","containerValue","verticalScrollValue","getPageHeight","getPageTop","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","TextLayer","initializeComponent","toolbarDiv","createMobilePageNumberContainer","tabIndex","touchAction","setMaximumHeight","intializeToolbar","mobilecurrentPageContainer","mobilenumberContainer","mobiletotalPageContainer","mobileSpanContainer","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","innerHTML","zIndex","mobileScrollContainerDown","mobileScrollContainerEnd","initiatePageRender","documentData","password","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","minHeight","goToPagePopup","removeEventListener","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","responseType","send","onreadystatechange","readyState","currentTarget","response","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","initPageDiv","isAutoZoom","isInitialLoading","createRequestForRender","pageTop","viewerHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","unload","updateWaitingPopup","pageCurrentRect","firstChild","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","request_1","forEach","getScrollParent","scrollNodeX","scrollNodeY","userAgent","appVersion","scrollTo","nodeName","overflowY","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","closeCorruptPopup","beforeClose","goToPageElement","inputContainer","goToPageInput","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","NumericTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","getElementsByClassName","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","passwordCancelClick","applyPassword","isInteraction","fitToAuto","fitType","fitToWidth","applyLeftPosition","initiatePanning","modifyTextCursor","disableTextSelectionMode","enableAnnotationAddTools","enableTextSelectionMode","onSingleTap","onDoubleTap","moreDropDown","dropDown","getSelectTextMarkupCurrentPage","magnification","onDoubleTapMagnification","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","pageCanvas","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","imageData","matrix_1","image_1","Image","onload","devicePixelRatio","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","renderTextContent","linkAnnotationModule","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","rotation","addTextLayer","renderTextContents","resizeTextContents","orderPageDivElements","renderPageCanvas","nextElement","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","URL","createObjectURL","anchorElement","href","documentElement","location","padCharacter","replace","textMarkupAnnotationCollection","createBlobUrl","info","msSaveOrOpenBlob","getStoredData","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","blobObj","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","Blob","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","isAnnotationButtonsEnabled","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","whiteSpace","setStyleToTextDiv","Bottom","setTextElementProperties","font","fontSize","fontFamily","contextWidth","measureText","scale","applyTextRotation","Rotation","resizeExcessDiv","textRotation","scaleString","transform","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","startId","endId","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","compareDocumentPosition","backward","Node","DOCUMENT_POSITION_PRECEDING","previousZoomFactor","textSearch","copyContextMenu","iconCss","Context","contextMenuOnBeforeOpen","select","onMenuItemSelect","created","contextMenuOnCreated","animationSettings","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","isTapToFitZoom","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","zoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","calculateScrollValues","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","annotationLayers","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","isThumbnailElementBottomAfterViewTop","thumbnailViewChildrenElement","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","isUndoRedoBtnsVisible","isAnnotationEditBtnVisible","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","handleToolbarButtonClick","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","enteredValue","navigationModule","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","AnnotationToolbar","initializeAnnotationToolbar","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","showUndoRedoTool","showAnnotationEditTool","applyHideToToolbar","showSeparator","enableToolbarItem","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableUndoRedoTool","enableAnnotationEditTool","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","undoItem","redoItem","resetToolbar","moreOptionItem","deSelectItem","updateInteractionItems","enableAnnotation","annotationToolbarSettings","annotationToolbarItem","enableCollectionAvailable","disableUndoRedoButtons","collection","unWireEvent","fileInputElement","controlWidth","createToolbarItemsForMobile","tool","clicked","createToolbarItems","createZoomDropdown","createNumericTextBox","refreshOverflow","afterToolbarCreation","currentPageInputTemplate","createCurrentPageInputTemplate","totalPageTemplate","createTotalPageTemplate","zoomDropDownTemplateString","createZoomDropdownElement","align","itemsContainer","addClassToolbarItem","createTooltip","addPropertiesToolItemContainer","minWidth","createToolbarItem","outerHTML","ComboBox","dataSource","fields","popupHeight","showClearButton","createMoreOption","DropDownButton","dropdownButtonPosition","beforeItemRender","bookmarks","elementName","toolbarItem","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","endIndex","isHide","hideItem","printModule","print","updateInteractionTools","initiateAnnotationMode","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","interactionMode","selectItem","showSearchBox","searchInputElement","isTextSelect","toolbarItems","toolbarSettingsItems","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","primaryToolbar","onToolbarClicked","createDropDowns","applyAnnotationToolbarSettings","createMobileToolbarItems","deleteItem","colorTemplate","getTemplate","opacityTemplate","page","colorPalette","createColorPicker","colorDropDown","createDropDownButton","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","changed","opacityDropDownOpen","toggle","refresh","updateOpacityIndicator","iconClass","dropDownButton","inputElement","colorPicker","inline","mode","enableOpacity","onColorPickerChange","currentValue","hex","borderBottomColor","opacityIndicator","outerContainer","sliderElement","Slider","highlightItem","underlineItem","strikethroughItem","closeItem","handleHighlight","handleUnderline","handleStrikethrough","toolBarInitialStatus","adjustViewer","deselectAllItems","showHighlightTool","showUnderlineTool","showStrikethroughTool","showColorEditTool","showOpacityEditTool","showAnnotationDeleteTool","isAdjust","updateViewerHeight","getElementHeight","resetViewerHeight","isButtonsEnabled","__extends","extendStatics","d","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","AnnotationToolbarSettings","ServerActionSettings","StrikethroughSettings","UnderlineSettings","HighlightSettings","PdfViewer","options","defaultLocale","Cancel","Download file","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","Apply","GoToPage","No matches","No Text Found","Undo","Redo","Highlight","Underline","Strikethrough","Delete","Color edit","Opacity edit","highlight","underline","strikethrough","Server error","Open text","First text","Previous text","Next text","Last text","Zoom in text","Zoom out text","Selection text","Pan text","Print text","Seach text","Annotation Edit text","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","enablePrint","enableDownload","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","annotationId","annotationType","annotationBound","annotationSettings","isColorChanged","isOpacityChanged","Event","NotifyPropertyChanges","Component","BookmarkView","bookmarkClick","bookid","Id","navigateToBookmark","nodeClick","setHeight","Number","nodeData","bookMark","bookmarksDestination","bookMarkDestination","BookmarksDestination","isBookmarkViewDiv","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","paddingRight","paddingLeft","treeObj","TreeView","child","hasChildren","nodeTemplate","nodeSelected","evt","ListView","showHeader","fullRowSelect","querySelector","closest","nextElementSibling","PageIndex","goToBookmark","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","contextMenuHeight","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","yTouch","getNodeElement","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","selectNodeContents","currentPosition","endPosition","rangeBounds","addRange","extend","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","getNodeElementFromNode","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","selectionBounds","getSelectionBounds","getRangeAt","selectionRectBounds","getSelectionRectangleBounds","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","selectionBound","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","newRange","getTextId","lastIndexOf","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","calculateContextMenuPosition","contextTop","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","clearAllOccurrences","searchKeypressHandler","enableNextButton","enablePrevButton","updateSearchInputIcon","searchClickHandler","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","secondaryToolbar","onTextSearchClose","initSearch","highlightOthers","searchElement","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","targetScrollElement","getScrollElement","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","applyTextSelection","iconSpan","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printImage","responseText","annotationSource","textMarkupAnnotation","printCanvas","pageImage","annotationImage","translate","rotate","PI","printWindowOpen","browserUserAgent","write","canvasUrl"],"mappings":"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"}