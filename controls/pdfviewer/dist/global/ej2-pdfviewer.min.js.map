{"version":3,"file":"ej2-pdfviewer.min.js","sources":["../../src/pdfviewer/annotation/annotation.js","../../src/pdfviewer/annotation/link-annotation.js","../../src/pdfviewer/annotation/text-markup-annotation.js","../../src/pdfviewer/base/navigation-pane.js","../../src/pdfviewer/base/pdfviewer-base.js","../../src/pdfviewer/base/text-layer.js","../../src/pdfviewer/base/context-menu.js","../../src/pdfviewer/magnification/magnification.js","../../src/pdfviewer/navigation/page-navigation.js","../../src/pdfviewer/thumbnail-view/thumbnail-view.js","../../src/pdfviewer/toolbar/toolbar.js","../../src/pdfviewer/toolbar/annotation-toolbar.js","../../src/pdfviewer/pdfviewer.js","../../src/pdfviewer/bookmark-view/bookmark-view.js","../../src/pdfviewer/text-selection/text-selection.js","../../src/pdfviewer/text-search/text-search.js","../../src/pdfviewer/print/print.js","../../src/global.js"],"sourcesContent":["import { TextMarkupAnnotation } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     * @param type\n     * @returns void\n     */\n    Annotation.prototype.setAnnotationMode = function (type) {\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false);\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.addAction = function (pageNumber, index, annotation, actionString, property) {\n        var action = { pageIndex: pageNumber, index: index, annotation: annotation, action: actionString, modifiedProperty: property };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    Annotation.prototype.updateToolbar = function () {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // tslint:disable-next-line:max-line-length\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // tslint:disable-next-line:max-line-length\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        this.popupNote.style.display = 'none';\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // tslint:disable-next-line:max-line-length\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // tslint:disable-next-line:max-line-length\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // tslint:disable-next-line:max-line-length\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // tslint:disable-next-line:max-line-length\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // tslint:disable-next-line:max-line-length\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () { _this.noteContentElement.focus(); });\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // tslint:disable-next-line:max-line-length\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // tslint:disable-next-line:max-line-length\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // tslint:disable-next-line:max-line-length\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // tslint:disable-next-line:max-line-length\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // tslint:disable-next-line:max-line-length\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line:max-line-length\n        var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1];\n        // tslint:disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    return Annotation;\n}());\nexport { Annotation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n                var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n                pageDiv.appendChild(aTag);\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n            if (pageDiv) {\n                var pageChildNodes = pageDiv.childNodes;\n                for (var i = 0; i < pageChildNodes.length; i++) {\n                    var childElement = pageChildNodes[i];\n                    if (childElement.tagName === 'A') {\n                        if (isAdd) {\n                            childElement.classList.add('e-pv-onselection');\n                        }\n                        else {\n                            childElement.classList.remove('e-pv-onselection');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.\n * @hidden\n */\nvar TextMarkupAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextMarkupAnnotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.currentTextMarkupAddMode = '';\n        /**\n         * @private\n         */\n        this.selectTextMarkupCurrentPage = null;\n        /**\n         * @private\n         */\n        this.currentTextMarkupAnnotation = null;\n        this.currentAnnotationIndex = null;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.highlightColor = pdfViewer.highlightSettings.color;\n        this.underlineColor = pdfViewer.underlineSettings.color;\n        this.strikethroughColor = pdfViewer.strikethroughSettings.color;\n        this.highlightOpacity = pdfViewer.highlightSettings.opacity;\n        this.underlineOpacity = pdfViewer.underlineSettings.opacity;\n        this.strikethroughOpacity = pdfViewer.strikethroughSettings.opacity;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        // tslint:disable-next-line:max-line-length\n        var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n        annotationCanvas.width = pageWidth;\n        annotationCanvas.height = pageHeight;\n        annotationCanvas.style.display = displayMode;\n        pageDiv.appendChild(annotationCanvas);\n        return annotationCanvas;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage = function (textMarkupAnnotations, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        this.renderTextMarkupAnnotations(textMarkupAnnotations, pageNumber, canvas, this.pdfViewerBase.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotations = function (textMarkupAnnotations, pageNumber, canvas, factor) {\n        if (canvas) {\n            canvas.width = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].width, factor);\n            canvas.height = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].height, factor);\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            // tslint:disable-next-line\n            var annotations = this.getAnnotations(pageNumber, textMarkupAnnotations);\n            if (annotations) {\n                for (var i = 0; i < annotations.length; i++) {\n                    // tslint:disable-next-line\n                    var annotation = annotations[i];\n                    var annotationObject = null;\n                    if (annotation.TextMarkupAnnotationType) {\n                        // tslint:disable-next-line:max-line-length\n                        annotationObject = { textMarkupAnnotationType: annotation.TextMarkupAnnotationType, color: annotation.Color, opacity: annotation.Opacity, bounds: annotation.Bounds, author: annotation.Author, subject: annotation.Subject, modifiedDate: annotation.ModifiedDate, note: annotation.Note, rect: annotation.Rect };\n                        this.storeAnnotations(pageNumber, annotationObject);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var type = annotation.TextMarkupAnnotationType ? annotation.TextMarkupAnnotationType : annotation.textMarkupAnnotationType;\n                    // tslint:disable-next-line\n                    var annotBounds = annotation.Bounds ? annotation.Bounds : annotation.bounds;\n                    var opacity = annotation.Opacity ? annotation.Opacity : annotation.opacity;\n                    var color = annotation.Color ? annotation.Color : annotation.color;\n                    switch (type) {\n                        case 'Highlight':\n                            this.renderHighlightAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Strikethrough':\n                            this.renderStrikeoutAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Underline':\n                            this.renderUnderlineAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                    }\n                }\n            }\n            if (pageNumber === this.selectTextMarkupCurrentPage) {\n                this.maintainAnnotationSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.drawTextMarkupAnnotations = function (type) {\n        this.isTextMarkupAnnotationMode = true;\n        this.currentTextMarkupAddMode = type;\n        var selectionObject = this.pdfViewer.textSelectionModule.selectionRangeArray;\n        if (selectionObject.length > 0) {\n            this.convertSelectionToTextMarkup(type, selectionObject, this.pdfViewerBase.getZoomFactor());\n        }\n        if (window.getSelection().toString()) {\n            var pageBounds = this.getDrawnBounds();\n            if (pageBounds.length > 0) {\n                for (var i = 0; i < pageBounds.length; i++) {\n                    // tslint:disable-next-line:max-line-length\n                    this.drawTextMarkups(type, pageBounds[i].bounds, pageBounds[i].pageIndex, pageBounds[i].rect, this.pdfViewerBase.getZoomFactor());\n                }\n            }\n        }\n        // this.pdfViewerBase.annotationHelper.redoCollection = [];\n        this.pdfViewer.textSelectionModule.clearTextSelection();\n    };\n    TextMarkupAnnotation.prototype.convertSelectionToTextMarkup = function (type, selectionObject, factor) {\n        for (var i = 0; i < selectionObject.length; i++) {\n            this.drawTextMarkups(type, selectionObject[i].rectangleBounds, selectionObject[i].pageNumber, selectionObject[i].bound, factor);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.drawTextMarkups = function (type, bounds, pageNumber, rect, factor) {\n        var annotation = null;\n        var context = this.getPageContext(pageNumber);\n        if (context) {\n            context.setLineDash([]);\n            switch (type) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.highlightColor, this.highlightOpacity, bounds, this.pdfViewer.highlightSettings.author, this.pdfViewer.highlightSettings.subject, this.pdfViewer.highlightSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderHighlightAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.strikethroughColor, this.strikethroughOpacity, bounds, this.pdfViewer.strikethroughSettings.author, this.pdfViewer.strikethroughSettings.subject, this.pdfViewer.strikethroughSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderStrikeoutAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.underlineColor, this.underlineOpacity, bounds, this.pdfViewer.underlineSettings.author, this.pdfViewer.underlineSettings.subject, this.pdfViewer.underlineSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderUnderlineAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n            }\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line\n            var settings = { opacity: annotation.opacity, color: annotation.color, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate };\n            var index = this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length - 1].index;\n            this.pdfViewer.fireAnnotationAdd(pageNumber, index, type, annotation.rect, settings);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderHighlightAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = bounds[i];\n            context.beginPath();\n            var x = bound.X ? bound.X : bound.left;\n            var y = bound.Y ? bound.Y : bound.top;\n            var width = bound.Width ? bound.Width : bound.width;\n            var height = bound.Height ? bound.Height : bound.height;\n            // tslint:disable-next-line:max-line-length\n            context.rect((x * factor), (y * factor), (width * factor), (height * factor));\n            context.globalAlpha = opacity * 0.5;\n            context.closePath();\n            context.fillStyle = color;\n            context.msFillRule = 'nonzero';\n            context.fill();\n        }\n        context.save();\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderStrikeoutAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, bound.x, bound.y, bound.width, (bound.height / 2), color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderUnderlineAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var boundValues = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, boundValues.x, boundValues.y, boundValues.width, boundValues.height, color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getProperBounds = function (bound) {\n        var x = bound.X ? bound.X : bound.left;\n        var y = bound.Y ? bound.Y : bound.top;\n        var width = bound.Width ? bound.Width : bound.width;\n        var height = bound.Height ? bound.Height : bound.height;\n        return { x: x, y: y, width: width, height: height };\n    };\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.drawLine = function (opacity, x, y, width, height, color, factor, context) {\n        context.globalAlpha = opacity;\n        context.beginPath();\n        context.moveTo((x * factor), (y + height) * factor);\n        context.lineTo((width + x) * factor, (y + height) * factor);\n        context.lineWidth = 1;\n        context.strokeStyle = color;\n        context.closePath();\n        context.msFillRule = 'nonzero';\n        context.stroke();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.printTextMarkupAnnotations = function (textMarkupAnnotations, pageIndex) {\n        var canvas = createElement('canvas', { id: this.pdfViewer.element.id + '_print_annotation_layer_' + pageIndex });\n        // tslint:disable-next-line\n        var annotations = this.getAnnotations(pageIndex, null);\n        if (annotations) {\n            this.renderTextMarkupAnnotations(null, pageIndex, canvas, 1);\n        }\n        else {\n            this.renderTextMarkupAnnotations(textMarkupAnnotations, pageIndex, canvas, 1);\n        }\n        var imageSource = canvas.toDataURL();\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveTextMarkupAnnotations = function () {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        // tslint:disable-next-line\n        var annotations = new Array();\n        var colorpick = new ColorPicker();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        // tslint:disable-next-line:max-line-length\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds));\n                        var colorString = colorpick.getValue(pageAnnotationObject.annotations[z].color, 'rgba');\n                        pageAnnotationObject.annotations[z].color = JSON.stringify(this.getRgbCode(colorString));\n                        pageAnnotationObject.annotations[z].rect = JSON.stringify(pageAnnotationObject.annotations[z].rect);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n            var deletedAnnotation = null;\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    deletedAnnotation = pageAnnotations.splice(i, 1)[0];\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, deletedAnnotation, 'Text Markup Deleted', null);\n                    this.currentAnnotationIndex = i;\n                }\n            }\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.currentTextMarkupAnnotation = null;\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, deletedAnnotation.textMarkupAnnotationType);\n            this.currentAnnotationIndex = null;\n            this.selectTextMarkupCurrentPage = null;\n            if (Browser.isDevice) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyColorProperty = function (color) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Color', color, null);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, true, false);\n            this.currentAnnotationIndex = null;\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyOpacityProperty = function (args) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Opacity', args.value / 100, args.name);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            if (args.name === 'changed') {\n                this.pdfViewerBase.isDocumentEdited = true;\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, false, true);\n                this.currentAnnotationIndex = null;\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.modifyAnnotationProperty = function (property, value, status) {\n        var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                if (property === 'Color') {\n                    pageAnnotations[i].color = value;\n                }\n                else if (property === 'Opacity') {\n                    pageAnnotations[i].opacity = value;\n                }\n                var date = new Date();\n                pageAnnotations[i].modifiedDate = date.toLocaleString();\n                this.currentAnnotationIndex = i;\n                if (status === null || status === 'changed') {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, this.currentTextMarkupAnnotation, 'Text Markup Property modified', property);\n                }\n                this.currentTextMarkupAnnotation = pageAnnotations[i];\n            }\n        }\n        return pageAnnotations;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.undoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.splice(index, 1);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 0, annotation);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.undoRedoPropertyChange = function (annotation, pageNumber, index, property) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (property === 'Color') {\n                var tempColor = pageAnnotations[index].color;\n                pageAnnotations[index].color = annotation.color;\n                annotation.color = tempColor;\n            }\n            else {\n                var tempOpacity = pageAnnotations[index].opacity;\n                pageAnnotations[index].opacity = annotation.opacity;\n                annotation.opacity = tempOpacity;\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        return annotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.redoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.push(annotation);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 1);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveNoteContent = function (pageNumber, note) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    pageAnnotations[i].note = note;\n                }\n            }\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.pdfViewerBase.isDocumentEdited = true;\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotation = function () {\n        this.selectTextMarkupCurrentPage = null;\n        this.currentTextMarkupAnnotation = null;\n        this.enableAnnotationPropertiesTool(false);\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection = function (pageNumber) {\n        var lowerPageIndex = (pageNumber - 2) >= 0 ? (pageNumber - 2) : 0;\n        // tslint:disable-next-line:max-line-length\n        var higherPageIndex = (pageNumber + 2) < this.pdfViewerBase.pageCount ? (pageNumber + 2) : this.pdfViewerBase.pageCount - 1;\n        for (var k = lowerPageIndex; k <= higherPageIndex; k++) {\n            this.clearAnnotationSelection(k);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getBoundsForSave = function (bounds) {\n        // tslint:disable-next-line\n        var newArray = [];\n        for (var i = 0; i < bounds.length; i++) {\n            var left = bounds[i].left ? bounds[i].left : bounds[i].Left;\n            var top_1 = bounds[i].top ? bounds[i].top : bounds[i].Top;\n            var height = bounds[i].height ? bounds[i].height : bounds[i].Height;\n            var width = bounds[i].width ? bounds[i].width : bounds[i].Width;\n            newArray.push({ left: left, top: top_1, width: width, height: height });\n        }\n        return newArray;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getRgbCode = function (colorString) {\n        var stringArray = colorString.split(',');\n        // tslint:disable-next-line:radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // tslint:disable-next-line:radix\n        var g = parseInt(stringArray[1]);\n        // tslint:disable-next-line:radix\n        var b = parseInt(stringArray[2]);\n        return { r: r, g: g, b: b };\n    };\n    TextMarkupAnnotation.prototype.getDrawnBounds = function () {\n        var pageBounds = [];\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var range = document.createRange();\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode === selection.focusNode) {\n                var pageId = this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);\n                if (!isNaN(pageId)) {\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + pageId).getBoundingClientRect();\n                    if (isBackWardSelection) {\n                        range.setStart(selection.focusNode, selection.focusOffset);\n                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                    }\n                    else {\n                        if (selection.anchorOffset < selection.focusOffset) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            range.setStart(selection.focusNode, selection.focusOffset);\n                            range.setEnd(selection.anchorNode, selection.anchorOffset);\n                        }\n                    }\n                    var boundingRect = range.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                    var rectangleArray = [];\n                    rectangleArray.push(rectangle);\n                    // tslint:disable-next-line\n                    var rect = { left: rectangle.left, top: rectangle.top, right: rectangle.right, bottom: rectangle.bottom };\n                    pageBounds.push({ pageIndex: pageId, bounds: rectangleArray, rect: rect });\n                }\n            }\n            else {\n                var startNode = void 0;\n                var endNode = void 0;\n                var selectionStartOffset = void 0;\n                var selectionEndOffset = void 0;\n                if (isBackWardSelection) {\n                    startNode = selection.focusNode;\n                    selectionStartOffset = selection.focusOffset;\n                    endNode = selection.anchorNode;\n                    selectionEndOffset = selection.anchorOffset;\n                }\n                else {\n                    startNode = selection.anchorNode;\n                    selectionStartOffset = selection.anchorOffset;\n                    endNode = selection.focusNode;\n                    selectionEndOffset = selection.focusOffset;\n                }\n                var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(startNode);\n                var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(startNode, anchorPageId);\n                var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(endNode);\n                var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(endNode, focusPageId);\n                var startOffset = 0;\n                var endOffset = 0;\n                var currentId = 0;\n                for (var i = anchorPageId; i <= focusPageId; i++) {\n                    var selectionRects = [];\n                    var pageStartId = void 0;\n                    var pageEndId = void 0;\n                    var pageStartOffset = void 0;\n                    var pageEndOffset = void 0;\n                    var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + i).getBoundingClientRect();\n                    if (i === anchorPageId) {\n                        currentId = anchorTextId;\n                    }\n                    else {\n                        currentId = 0;\n                    }\n                    for (var j = currentId; j < textDivs.length; j++) {\n                        var textElement = textDivs[j];\n                        if (j === currentId) {\n                            pageStartId = currentId;\n                            pageStartOffset = (i === anchorPageId) ? selectionStartOffset : 0;\n                        }\n                        else {\n                            pageEndId = j;\n                            pageEndOffset = (i === focusPageId) ? selectionEndOffset : textElement.textContent.length;\n                        }\n                        if (j === anchorTextId && i === anchorPageId) {\n                            startOffset = selectionStartOffset;\n                        }\n                        else {\n                            startOffset = 0;\n                        }\n                        if (j === focusTextId && i === focusPageId) {\n                            endOffset = selectionEndOffset;\n                        }\n                        else {\n                            endOffset = textElement.textContent.length;\n                        }\n                        for (var k = 0; k < textElement.childNodes.length; k++) {\n                            var node = textElement.childNodes[k];\n                            range.setStart(node, startOffset);\n                            range.setEnd(node, endOffset);\n                        }\n                        var boundingRect = range.getBoundingClientRect();\n                        // tslint:disable-next-line:max-line-length\n                        var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                        selectionRects.push(rectangle);\n                        range.detach();\n                        if (i === focusPageId && j === focusTextId) {\n                            break;\n                        }\n                    }\n                    var startElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageStartId).childNodes[0];\n                    var endElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageEndId).childNodes[0];\n                    var pageRange = document.createRange();\n                    pageRange.setStart(startElementNode, pageStartOffset);\n                    pageRange.setEnd(endElementNode, pageEndOffset);\n                    var pageRectBounds = pageRange.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageRectangle = { left: this.getDefaultValue(pageRectBounds.left - pageRect.left), top: this.getDefaultValue(pageRectBounds.top - pageRect.top), width: this.getDefaultValue(pageRectBounds.width), height: this.getDefaultValue(pageRectBounds.height), right: this.getDefaultValue(pageRectBounds.right - pageRect.left), bottom: this.getDefaultValue(pageRectBounds.bottom - pageRect.top) };\n                    // tslint:disable-next-line\n                    var rect = { left: pageRectangle.left, top: pageRectangle.top, right: pageRectangle.right, bottom: pageRectangle.bottom };\n                    pageBounds.push({ pageIndex: i, bounds: selectionRects, rect: rect });\n                }\n            }\n        }\n        selection.removeAllRanges();\n        return pageBounds;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotationsPinch = function (pageNumber) {\n        var annotCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (annotCanvas) {\n            var oldAnnotCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n            if (oldAnnotCanvas) {\n                if (annotCanvas) {\n                    oldAnnotCanvas.id = annotCanvas.id;\n                    annotCanvas.parentElement.removeChild(annotCanvas);\n                }\n                else {\n                    oldAnnotCanvas.id = this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber;\n                }\n                annotCanvas = oldAnnotCanvas;\n            }\n            annotCanvas.style.width = '';\n            annotCanvas.style.height = '';\n            annotCanvas.width = this.pdfViewerBase.pageSize[pageNumber].width * this.pdfViewerBase.getZoomFactor();\n            annotCanvas.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor();\n            this.renderTextMarkupAnnotations(null, pageNumber, annotCanvas, this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotations = function (pageNumber) {\n        var oldCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n        if (oldCanvas) {\n            oldCanvas.parentElement.removeChild(oldCanvas);\n        }\n        var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (newCanvas) {\n            newCanvas.style.display = 'block';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageNumber, canvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, canvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n                if (this.pdfViewer.toolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                }\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else {\n            if (!this.pdfViewerBase.isClickedOnScrollBar(event)) {\n                this.clearCurrentAnnotation();\n                this.clearCurrentAnnotationSelection(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            this.clearCurrentAnnotationSelection(pageNumber);\n            var touchCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            // tslint:disable-next-line:max-line-length\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.touches[0].clientX, event.touches[0].clientY, pageNumber, touchCanvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, touchCanvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else if (this.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n            var number = this.selectTextMarkupCurrentPage;\n            this.selectTextMarkupCurrentPage = null;\n            this.clearAnnotationSelection(number);\n        }\n        else {\n            this.clearCurrentAnnotation();\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line\n        var pageIndex = parseInt(eventTarget.id.split('_text_')[1]) || parseInt(eventTarget.id.split('_textLayer_')[1]) || parseInt(eventTarget.id.split('_annotationCanvas_')[1]);\n        if (pageIndex) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageIndex, canvas);\n            if (currentAnnot) {\n                eventTarget.style.cursor = 'pointer';\n                // this.showPopupNote(event, currentAnnot);\n            }\n            else {\n                this.pdfViewer.annotationModule.hidePopupNote();\n                if (this.pdfViewerBase.isPanMode && !this.pdfViewerBase.getAnnotationToolStatus()) {\n                    eventTarget.style.cursor = 'grab';\n                }\n                else {\n                    eventTarget.style.cursor = 'auto';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.showPopupNote = function (event, annotation) {\n        if (annotation.note) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.showPopupNote(event, annotation.color, annotation.author, annotation.note, annotation.textMarkupAnnotationType);\n        }\n    };\n    TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation = function (clientX, clientY, pageNumber, canvas) {\n        var currentTextMarkupAnnotations = [];\n        var canvasParentPosition = canvas.parentElement.getBoundingClientRect();\n        var leftClickPosition = clientX - canvasParentPosition.left;\n        var topClickPosition = clientY - canvasParentPosition.top;\n        var annotationList = this.getAnnotations(pageNumber, null);\n        var isAnnotationGot = false;\n        if (annotationList) {\n            for (var i = 0; i < annotationList.length; i++) {\n                var annotation = annotationList[i];\n                for (var j = 0; j < annotation.bounds.length; j++) {\n                    // tslint:disable-next-line\n                    var bound = annotation.bounds[j];\n                    var left = bound.left ? bound.left : bound.Left;\n                    var top_2 = bound.top ? bound.top : bound.Top;\n                    var width = bound.width ? bound.width : bound.Width;\n                    var height = bound.height ? bound.height : bound.Height;\n                    // tslint:disable-next-line:max-line-length\n                    if (leftClickPosition >= this.getMagnifiedValue(left, this.pdfViewerBase.getZoomFactor()) && leftClickPosition <= this.getMagnifiedValue(left + width, this.pdfViewerBase.getZoomFactor()) && topClickPosition >= this.getMagnifiedValue(top_2, this.pdfViewerBase.getZoomFactor()) && topClickPosition <= this.getMagnifiedValue(top_2 + height, this.pdfViewerBase.getZoomFactor())) {\n                        currentTextMarkupAnnotations.push(annotation);\n                        isAnnotationGot = true;\n                    }\n                    else {\n                        if (isAnnotationGot) {\n                            isAnnotationGot = false;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        var currentAnnot = null;\n        if (currentTextMarkupAnnotations.length > 1) {\n            currentAnnot = this.compareCurrentAnnotations(currentTextMarkupAnnotations);\n        }\n        else if (currentTextMarkupAnnotations.length === 1) {\n            currentAnnot = currentTextMarkupAnnotations[0];\n        }\n        return currentAnnot;\n    };\n    TextMarkupAnnotation.prototype.compareCurrentAnnotations = function (annotations) {\n        var previousX;\n        var currentAnnotation = null;\n        for (var i = 0; i < annotations.length; i++) {\n            if (i === annotations.length - 1) {\n                break;\n            }\n            // tslint:disable-next-line\n            var firstAnnotBounds = annotations[i].bounds;\n            var firstXposition = firstAnnotBounds[0].left ? firstAnnotBounds[0].left : firstAnnotBounds[0].Left;\n            var firstYposition = firstAnnotBounds[0].top ? firstAnnotBounds[0].top : firstAnnotBounds[0].Top;\n            // tslint:disable-next-line\n            var secondAnnotBounds = annotations[i + 1].bounds;\n            var secondXposition = secondAnnotBounds[0].left ? secondAnnotBounds[0].left : secondAnnotBounds[0].Left;\n            var secondYposition = secondAnnotBounds[0].top ? secondAnnotBounds[0].top : secondAnnotBounds[0].Top;\n            if ((firstXposition < secondXposition) || (firstYposition < secondYposition)) {\n                previousX = secondXposition;\n                currentAnnotation = annotations[i + 1];\n            }\n            else {\n                previousX = firstXposition;\n                currentAnnotation = annotations[i];\n            }\n            if (previousX && (i === (annotations.length - 2))) {\n                if ((previousX === firstXposition) && (previousX === secondXposition)) {\n                    previousX = secondXposition;\n                    currentAnnotation = annotations[i + 1];\n                }\n            }\n        }\n        return currentAnnotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clearAnnotationSelection = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        }\n    };\n    TextMarkupAnnotation.prototype.selectAnnotation = function (annotation, canvas) {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = annotation.bounds[i];\n            var x = bound.left ? bound.left : bound.Left;\n            var y = bound.top ? bound.top : bound.Top;\n            var width = bound.width ? bound.width : bound.Width;\n            var height = bound.height ? bound.height : bound.Height;\n            // tslint:disable-next-line:max-line-length\n            this.drawAnnotationSelectRect(canvas, this.getMagnifiedValue(x - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(y - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(width + 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(height + 0.5, this.pdfViewerBase.getZoomFactor()));\n        }\n    };\n    TextMarkupAnnotation.prototype.drawAnnotationSelectRect = function (canvas, x, y, width, height) {\n        var context = canvas.getContext('2d');\n        context.beginPath();\n        context.setLineDash([4 * this.pdfViewerBase.getZoomFactor()]);\n        context.globalAlpha = 1;\n        context.rect(x, y, width, height);\n        context.closePath();\n        context.strokeStyle = '#0000ff';\n        context.stroke();\n        context.save();\n    };\n    TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool = function (isEnable) {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(isEnable);\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);\n                var enable = isEnable;\n                if (this.isTextMarkupAnnotationMode) {\n                    enable = true;\n                }\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(enable);\n                if (this.currentTextMarkupAnnotation) {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, this.currentTextMarkupAnnotation.color);\n                }\n                else {\n                    if (!this.isTextMarkupAnnotationMode) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, '#000000');\n                    }\n                    else {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.maintainAnnotationSelection = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + this.selectTextMarkupCurrentPage);\n            if (canvas) {\n                this.selectAnnotation(this.currentTextMarkupAnnotation, canvas);\n            }\n        }\n    };\n    TextMarkupAnnotation.prototype.storeAnnotations = function (pageNumber, annotation) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        var index = 0;\n        if (!storeObject) {\n            var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n            markupAnnotation.annotations.push(annotation);\n            index = markupAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(markupAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var pageIndex = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        return index;\n    };\n    TextMarkupAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAnnotations = function (pageIndex, textMarkupAnnotations) {\n        // tslint:disable-next-line\n        var annotationCollection;\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = textMarkupAnnotations;\n            }\n        }\n        else {\n            annotationCollection = textMarkupAnnotations;\n        }\n        return annotationCollection;\n    };\n    TextMarkupAnnotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAddedAnnotation = function (type, color, opacity, bounds, author, subject, predefinedDate, note, rect, pageNumber) {\n        var date = new Date();\n        // tslint:disable-next-line:max-line-length\n        var modifiedDate = predefinedDate ? predefinedDate : date.toLocaleString();\n        // tslint:disable-next-line\n        var annotation = { textMarkupAnnotationType: type, color: color, opacity: opacity, bounds: bounds, author: author, subject: subject, modifiedDate: modifiedDate, note: note, rect: rect };\n        var storedIndex = this.storeAnnotations(pageNumber, annotation);\n        this.pdfViewer.annotationModule.addAction(pageNumber, storedIndex, annotation, 'Text Markup Added', null);\n        return annotation;\n    };\n    TextMarkupAnnotation.prototype.getPageContext = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var context = null;\n        if (canvas) {\n            context = canvas.getContext('2d');\n        }\n        return context;\n    };\n    TextMarkupAnnotation.prototype.getDefaultValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    TextMarkupAnnotation.prototype.getMagnifiedValue = function (value, factor) {\n        return value * factor;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clear = function () {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    };\n    return TextMarkupAnnotation;\n}());\nexport { TextMarkupAnnotation };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { Toast } from '@syncfusion/ej2-notifications';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isTooltipCreated = false;\n        /**\n         * @private\n         */\n        this.isNavigationToolbarVisible = false;\n        /**\n         * @private\n         */\n        this.isBookmarkListOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        /**\n         * @private\n         */\n        this.isBookmarkOpen = false;\n        /**\n         * @private\n         */\n        this.isThumbnailOpen = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY,\n                proxy.sideBarResizer.offsetParent.clientWidth\n            ];\n            _this.previousX = event.clientX;\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            if (!_this.pdfViewerBase.getPopupNoteVisibleStatus()) {\n                event.preventDefault();\n                if (proxy.isDown && _this.sideBarContentContainer) {\n                    // prevent the sidebar from becoming too narrow, or from occupying more\n                    // than half of the available viewer width.\n                    if (_this.pdfViewer.enableRtl) {\n                        var currentWidth = _this.previousX - event.clientX;\n                        var width = currentWidth + proxy.offset[2];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.right = width + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    else {\n                        var width = event.clientX + proxy.offset[0];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.left = width + 'px';\n                        proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                    proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                    proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.pdfViewerBase.updateZoomValue();\n                    if (!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')) {\n                        proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();\n                    }\n                }\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            _this.sideBarContent.setAttribute('aria-label', 'Thumbnail View Panel');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.sideBarContent.setAttribute('aria-label', 'Bookmark View Panel');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        if (!Browser.isDevice) {\n            this.createNavigationPane();\n        }\n    };\n    NavigationPane.prototype.createNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar', attrs: { 'role': 'toolbar', 'aria-orientation': 'vertical', 'tabindex': '-1' } });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbar.style.cssFloat = 'right';\n            this.sideBarToolbar.style.right = 1 + 'px';\n            this.sideBarToolbar.style.position = 'relative';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbarSplitter.classList.add('e-right');\n        }\n        else {\n            this.sideBarToolbarSplitter.classList.add('e-left');\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentContainer.classList.add('e-right');\n        }\n        else {\n            this.sideBarContentContainer.classList.add('e-left');\n        }\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentSplitter.style.right = 0 + 'px';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content', attrs: { 'tabindex': '0' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContent.style.right = 0 + 'px';\n            this.sideBarContent.style.direction = 'rtl';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitleContainer.style.right = 0 + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title', attrs: { 'tabindex': '-1' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitle.classList.add('e-right');\n        }\n        else {\n            this.sideBarTitle.classList.add('e-left');\n        }\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarResizer.classList.add('e-right');\n        }\n        else {\n            this.sideBarResizer.classList.add('e-left');\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        if (!this.pdfViewer.enableRtl) {\n            this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        }\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.adjustPane = function () {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        if (toolbarHeight === 0) {\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(toolbarContainer)['height']) + 1;\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar.style.top = toolbarHeight + 'px';\n        this.sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createNavigationPaneMobile = function (option) {\n        var _this = this;\n        this.isNavigationToolbarVisible = true;\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_navigationToolbar', className: 'e-pv-nav-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        var items;\n        if (option === 'search') {\n            var searchTemplate = '<div class=\"e-input-group e-pv-search-input-mobile\" id=\"' + this.pdfViewer.element.id +\n                '_search_input_container\"><input class=\"e-input\" type=\"text\" placeholder=\"' +\n                this.pdfViewer.localeObj.getConstant('Find in document') + '\" id=\"' +\n                this.pdfViewer.element.id + '_search_input\"></input></div>';\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { template: searchTemplate },\n                {\n                    prefixIcon: 'e-pv-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_search_box-icon',\n                    click: function () {\n                        var iconElement = _this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n                        if (iconElement.classList.contains('e-pv-search-close')) {\n                            _this.enableSearchItems(false);\n                        }\n                        _this.pdfViewer.textSearchModule.searchButtonClick(iconElement, _this.searchInput);\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-prev-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_prev_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchPrevious();\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-next-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_next_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchNext();\n                    }\n                }\n            ];\n        }\n        else {\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { text: this.pdfViewer.localeObj.getConstant('Bookmarks') }\n            ];\n        }\n        this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Popup' });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        if (option === 'search') {\n            this.initiateSearchBox();\n        }\n        else {\n            this.initiateBookmarks();\n        }\n    };\n    NavigationPane.prototype.initiateSearchBox = function () {\n        var _this = this;\n        this.searchInput = this.pdfViewerBase.getElement('_search_input');\n        this.pdfViewer.textSearchModule.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n        this.searchInput.addEventListener('keyup', function (event) {\n            _this.enableSearchItems(true);\n            var searchString = _this.searchInput.value;\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n            }\n            else {\n                _this.pdfViewer.textSearchModule.resetVariables();\n            }\n        });\n        this.pdfViewer.textSearchModule.searchInput = this.searchInput;\n        this.setSearchInputWidth();\n        this.enableSearchItems(false);\n        this.searchInput.focus();\n    };\n    NavigationPane.prototype.enableSearchItems = function (isEnable) {\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_prev_occurrence').parentElement, isEnable);\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_next_occurrence').parentElement, isEnable);\n    };\n    NavigationPane.prototype.initiateBookmarks = function () {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = 'none';\n        }\n        // tslint:disable-next-line:max-line-length\n        var bookmarkContainer = createElement('div', { id: this.pdfViewer.element.id + '_bookmarks_container', className: 'e-pv-bookmark-container' });\n        bookmarkContainer.style.width = '100%';\n        bookmarkContainer.style.height = this.pdfViewerBase.viewerContainer.style.height;\n        this.pdfViewerBase.getElement('_viewerMainContainer').appendChild(bookmarkContainer);\n        this.pdfViewerBase.viewerContainer.style.display = 'none';\n        this.isBookmarkListOpen = true;\n        this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile();\n    };\n    NavigationPane.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        this.pdfViewer.textSearchModule.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.goBackToToolbar = function () {\n        this.isNavigationToolbarVisible = false;\n        this.pdfViewer.textSearchModule.cancelTextSearch();\n        this.searchInput = null;\n        if (this.pdfViewer.bookmarkViewModule.childNavigateCount !== 0) {\n            this.pdfViewer.bookmarkViewModule.bookmarkList.back();\n            this.pdfViewer.bookmarkViewModule.childNavigateCount--;\n        }\n        else {\n            if (this.toolbar != null) {\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n            var bookmarkContainer = this.pdfViewerBase.getElement('_bookmarks_container');\n            if (bookmarkContainer) {\n                bookmarkContainer.parentElement.removeChild(bookmarkContainer);\n                if (Browser.isDevice) {\n                    this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n                }\n            }\n            if (this.toolbarElement && this.toolbarElement.parentElement != null) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            this.pdfViewerBase.viewerContainer.style.display = 'block';\n            this.isBookmarkListOpen = false;\n            if (!this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n                this.pdfViewerBase.onWindowResize();\n            }\n        }\n    };\n    NavigationPane.prototype.setSearchInputWidth = function () {\n        var searchInputParent = this.searchInput.parentElement;\n        var padding = window.getComputedStyle(searchInputParent.parentElement, null).getPropertyValue('padding-left');\n        // tslint:disable-next-line:max-line-length\n        var width = this.toolbarElement.clientWidth - this.getParentElementSearchBox('_backward').clientWidth\n            - this.getParentElementSearchBox('_search_box-icon').clientWidth - this.getParentElementSearchBox('_prev_occurrence').clientWidth\n            - this.getParentElementSearchBox('_next_occurrence').clientWidth - 6;\n        if (padding !== '') {\n            width = width - (parseFloat(padding) * 2);\n        }\n        searchInputParent.style.width = width + 'px';\n    };\n    NavigationPane.prototype.getParentElementSearchBox = function (idString) {\n        return this.pdfViewerBase.getElement(idString).parentElement;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createTooltipMobile = function (text) {\n        if (!this.isTooltipCreated) { //boolean to prevent again toast creation.\n            // tslint:disable-next-line:max-line-length\n            var tooltipDiv = createElement('div', { className: 'e-pv-container-tooltip', id: this.pdfViewer.element.id + '_container_tooltip' });\n            this.pdfViewer.element.appendChild(tooltipDiv);\n            // tslint:disable-next-line:max-line-length\n            this.toastObject = new Toast({ title: text, target: this.pdfViewer.element, close: this.onTooltipClose.bind(this), position: { X: 0, Y: 0 }, animation: { hide: { duration: 200, effect: 'FadeOut' } } });\n            this.toastObject.appendTo(tooltipDiv);\n            var y = this.pdfViewer.element.clientHeight * 0.65;\n            var x = (this.pdfViewer.element.clientWidth - tooltipDiv.clientWidth) / 2;\n            this.isTooltipCreated = true;\n            this.toastObject.show({ position: { X: x, Y: y } });\n            var tooltipChild = tooltipDiv.firstElementChild;\n            if (tooltipChild) {\n                tooltipChild.style.width = 'auto';\n            }\n        }\n        else {\n            if (this.toastObject) {\n                this.toastObject.title = text;\n                var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n                var tooltipChild = tooltipElement.firstElementChild;\n                if (tooltipChild) {\n                    tooltipChild.style.width = 'auto';\n                    tooltipChild.firstElementChild.firstElementChild.textContent = text;\n                }\n            }\n        }\n    };\n    NavigationPane.prototype.onTooltipClose = function (args) {\n        this.isTooltipCreated = false;\n        var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n        this.pdfViewer.textSearchModule.isMessagePopupOpened = false;\n        this.toastObject.destroy();\n        tooltipElement.parentElement.removeChild(tooltipElement);\n        this.toastObject = null;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.toolbarResize = function () {\n        if (this.searchInput) {\n            this.searchInput.style.width = 'auto';\n            this.setSearchInputWidth();\n        }\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled', 'aria-label': 'Page Thumbnails', 'tabindex': '-1' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled', 'aria-label': 'Bookmarks', 'tabindex': '-1' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        if (this.pdfViewer.enableRtl) {\n            this.closeDiv.style.left = 8 + 'px';\n        }\n        else {\n            this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        this.resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        this.setResizeIconTop();\n        this.resizeIcon.style.position = 'absolute';\n        this.resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        this.resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(this.resizeIcon);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.setResizeIconTop = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.sideBarToolbar && this.sideBarToolbar.clientHeight && this.resizeIcon.style.top === '') {\n            this.resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        }\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                proxy.pdfViewerBase.viewerContainer.style.right = (proxy.sideToolbarWidth) + 'px';\n            }\n            else {\n                proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            }\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            if (this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                this.pdfViewerBase.viewerContainer.style.left = 1 + 'px';\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            }\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.isDocumentEdited = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // tslint:disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                var toolbarHeight = proxy.getElement('_toolbarContainer').getBoundingClientRect().height;\n                if (proxy.isAnnotationToolbarHidden() || Browser.isDevice) {\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight);\n                }\n                else {\n                    var annotationToolbarHeight = proxy.getElement('_annotation_toolbar').getBoundingClientRect().height;\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && !Browser.isDevice) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (!proxy.navigationPane.isBookmarkListOpen) {\n                proxy.updateZoomValue();\n            }\n            if (Browser.isDevice) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n            else {\n                proxy.navigationPane.setResizeIconTop();\n            }\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus()) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                if (event.button === 0) {\n                    // 0 is for left button.\n                    var eventTarget = event.target;\n                    if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                        var idStringArray = eventTarget.id.split('_');\n                        // tslint:disable-next-line\n                        _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                    }\n                    if (_this.isTextMarkupAnnotationModule()) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                switch (event.keyCode) {\n                    case 46:\n                        if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                            _this.pdfViewer.annotationModule.deleteAnnotation();\n                        }\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // tslint:disable-next-line:max-line-length\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // tslint:disable-next-line\n        this.onWindowMouseUp = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                        }\n                        if (_this.viewerContainer.contains(event.target)) {\n                            if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                            else {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                }\n                            }\n                        }\n                    }\n                    else if (_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target)) {\n                        window.getSelection().removeAllRanges();\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (Browser.isDevice && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints);\n                }\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            if (Browser.isDevice) {\n                clearTimeout(_this.singleTapTimer);\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if (Browser.isDevice && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // tslint:disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // tslint:disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // tslint:disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    _this.viewerContainer.scrollTop += scrollTop;\n                    _this.updateMobileScrollerPosition();\n                }\n            }\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = _this;\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && Browser.isDevice) {\n                // tslint:disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // tslint:disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= _this.viewerContainer.clientHeight)) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    _this.mobilePageNoContainer.style.display = 'none';\n                    scrollposY = _this.touchClientY - event.touches[0].pageY;\n                    scrollposX = _this.touchClientX - event.touches[0].pageX;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    // tslint:disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            // tslint:disable-next-line:max-line-length\n            if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n                _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n                if (!Browser.isDevice) {\n                    _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                }\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            if (Browser.isDevice) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container', attrs: { 'aria-label': 'pdfviewer scroll view' } });\n            if (Browser.isDevice) {\n                this.createMobilePageNumberContainer();\n            }\n            this.viewerContainer.tabIndex = 0;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'tabindex': '0', 'aria-label': 'pdfviewer Page View' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice) {\n                this.createGoToPagePopup();\n            }\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && !Browser.isDevice) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        if (!Browser.isDevice) {\n            element.style.minHeight = '500px';\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = '';\n                this.mobileScrollerContainer.style.top = (this.toolbarHeight) + 'px';\n            }\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        if (Browser.isDevice) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            this.promptElement.focus();\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.initiateTextSelectMode();\n        if (!Browser.isDevice) {\n            if (this.navigationPane.sideBarToolbar) {\n                this.navigationPane.clear();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.clear();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.initializeCollection();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        this.contextMenuModule.destroy();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.currentPageNumber > 0) {\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // tslint:disable-next-line:max-line-length\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this),\n                },\n                // tslint:disable-next-line:max-line-length\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this),\n                },\n            ], close: this.closeGoToPagePopUp.bind(this),\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n        goToPageTextBox.appendTo(this.goToPageInput);\n        this.goToPageInput.addEventListener('keyup', function () {\n            // tslint:disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // tslint:disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // tslint:disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            this.mobileScrollerContainer.style.top = (this.toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        this.enableAnnotationAddTools(false);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n        if (!Browser.isDevice) {\n            this.enableAnnotationAddTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n        var _this = this;\n        this.singleTapTimer = setTimeout(function () { _this.onSingleTap(touchPoints); }, 300);\n        this.tapCount++;\n        // tslint:disable-next-line\n        var timer = setTimeout(function () { _this.onDoubleTap(touchPoints); }, 200);\n        if (this.tapCount > 2) {\n            this.tapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        this.viewerContainer.scrollTop -= this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        this.viewerContainer.scrollTop += this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        // tslint:disable-next-line:max-line-length\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n                    }\n                    if (this.isTapHidden && Browser.isDevice) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                    }\n                    else if (Browser.isDevice && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        this.pdfViewer.toolbarModule.showToolbar(this.isTapHidden);\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        if (this.tapCount === 2) {\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            this.tapCount = 0;\n            if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                if (this.pdfViewer.magnification) {\n                    this.pdfViewer.magnification.onDoubleTapMagnification();\n                }\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n            if (Browser.isDevice && this.mobiletotalPageContainer) {\n                this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n                this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n            }\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * window.devicePixelRatio;\n                                canvas_1.width = pageWidth_1 * window.devicePixelRatio;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.isTextMarkupAnnotationModule()) {\n                    // tslint:disable-next-line\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(data['textMarkupAnnotation'], pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        // tslint:disable-next-line\n        var rotation = data['rotation'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // tslint:disable-next-line:max-line-length\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '0' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n        }\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        blobUrl = URL.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            jsonObject = { hashId: this.hashId, textMarkupAnnotations: textMarkupAnnotationCollection };\n        }\n        else {\n            jsonObject = { hashId: this.hashId };\n        }\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, _this.pdfViewer.fileName);\n                    }\n                    else {\n                        _this.downloadDocument(blobUrl);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        if (!this.getPagesZoomed()) {\n            this.showPageLoadingIndicator(pageIndex, true);\n        }\n        else {\n            this.showPageLoadingIndicator(pageIndex, false);\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        var blobUrl = URL.createObjectURL(blobObj);\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // tslint:disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n        return textLayer;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text', attrs: { 'tabindex': '0' } });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n        var scaleString = 'scale(' + scale + ')';\n        if (rotation === 0) {\n            if (textRotation === 0) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 1) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n            }\n            else if (textRotation === -90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 2) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n            }\n            else if (textRotation === 180) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 3) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n            }\n            else if (textRotation === 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // tslint:disable-next-line\n        var rotation;\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n            // tslint:disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.notifyDialog.enableRtl = true;\n        }\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy'), iconCss: 'e-pv-copy-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Highlight context'), iconCss: 'e-pv-highlight-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Underline context'), iconCss: 'e-pv-underline-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Strikethrough context'), iconCss: 'e-pv-strikethrough-icon' }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            created: this.contextMenuOnCreated.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.contextMenuObj.enableRtl = true;\n        }\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnCreated = function (args) {\n        // tslint:disable-next-line:max-line-length\n        var items = [this.pdfViewer.localeObj.getConstant('Highlight context'), this.pdfViewer.localeObj.getConstant('Underline context'),\n            this.pdfViewer.localeObj.getConstant('Strikethrough context')];\n        if (this.pdfViewer.annotationModule) {\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                this.contextMenuObj.enableItems(items, false);\n            }\n        }\n        else {\n            this.contextMenuObj.enableItems(items, false);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    // tslint:disable-next-line:max-line-length\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && args.event.target.classList.contains('e-pv-page-container')) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            var currentBound = bounds;\n            if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                isWithin = true;\n            }\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n            isWithin = true;\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Highlight context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Underline context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenuObj.destroy();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { Browser } from '@syncfusion/ej2-base';\n/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        this.isTapToFitZoom = false;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt((scaleX * 100).toString());\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt(((viewerHeight / highestHeight) * 100).toString());\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.closePopupMenu();\n        }\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    if (Browser.isDevice) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewerBase.mobilePageNoContainer.style.left = (this.pdfViewer.element.clientWidth / 2) - (parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2) + 'px';\n                    }\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n        if (Browser.isDevice && this.isPinchZoomed) {\n            // tslint:disable-next-line:radix\n            var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n            this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        this.renderInSeparateThread(this.reRenderPageNumber);\n        this.isPagesZoomed = false;\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            this.calculateScrollValues(scrollValue);\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.calculateScrollValues = function (scrollValue) {\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n        if (currentPageCanvas) {\n            var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n            // update scroll top for the viewer container based on pinch zoom factor\n            var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n            var previousY = scrollValue + this.touchCenterY;\n            // tslint:disable-next-line:max-line-length\n            var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                // tslint:disable-next-line:max-line-length\n                previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n            this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n            // update scroll left for the viewer container based on pinch zoom factor\n            var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n            var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n            var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n            this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n        }\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                var annotationLayers = document.querySelectorAll('canvas[id*=\"_annotationCanvas_\"]');\n                for (var j = 0; j < annotationLayers.length; j++) {\n                    var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1];\n                    // tslint:disable-next-line:radix\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                    var annotationCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + i);\n                    annotationCanvas.id = this.pdfViewer.element.id + '_old_annotationCanvas_' + i;\n                }\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i, 'none');\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        if (this.pdfViewer.enableRtl) {\n                            pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        else {\n                            pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                                this.pdfViewer.annotationModule.textMarkupAnnotationModule.resizeAnnotations(width, height, i);\n                            }\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            this.isMagnified = false;\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.onDoubleTapMagnification = function () {\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (!this.isTapToFitZoom) {\n            if (this.zoomFactor < 2) {\n                this.zoomTo(200);\n            }\n            else {\n                this.fitToWidth();\n            }\n        }\n        else {\n            this.zoomTo(this.previousZoomFactor * 100);\n        }\n        this.calculateScrollValues(scrollValue);\n        this.isTapToFitZoom = !this.isTapToFitZoom;\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber - Defines the page number to navigate\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n * @hidden\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                // tslint:disable-next-line:max-line-length\n                var pageLink = createElement('a', { id: 'page_' + i, attrs: { 'aria-label': 'Thumbnail of Page' + (i + 1), 'tabindex': '-1', 'role': 'link' } });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { AnnotationToolbar } from '../index';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.isUndoRedoBtnsVisible = true;\n        this.isAnnotationEditBtnVisible = true;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                    args.cancel = true;\n                }\n                else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                    var tooltipData = args.originalEvent.target.parentElement.dataset;\n                    if (tooltipData && tooltipData.tooltipId) {\n                        var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                        if (tooltipElement) {\n                            tooltipElement.style.display = 'none';\n                        }\n                    }\n                }\n            }\n            _this.handleToolbarButtonClick(args);\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                    args.originalEvent.target.blur();\n                    _this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        if (!Browser.isDevice) {\n            this.applyToolbarSettings();\n            this.initialEnableItems();\n            this.pdfViewerBase.navigationPane.adjustPane();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.annotationToolbarModule = new AnnotationToolbar(this.pdfViewer, this.pdfViewerBase, this);\n            if (!Browser.isDevice) {\n                this.annotationToolbarModule.initializeAnnotationToolbar();\n            }\n        }\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n            if (!Browser.isDevice) {\n                this.pdfViewerBase.navigationPane.sideBarToolbar.style.display = 'none';\n            }\n        }\n    };\n    /**\n     * Shows/hides the Navigation toolbar in the PdfViewer\n     * @param  {boolean} enableNavigationToolbar - If set true , its show the Navigation Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showNavigationToolbar = function (enableNavigationToolbar) {\n        if (!Browser.isDevice) {\n            var navigationToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n            var navigationToolbarSplitter = this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;\n            if (enableNavigationToolbar) {\n                navigationToolbar.style.display = 'block';\n                navigationToolbarSplitter.style.display = 'block';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.clear();\n                }\n            }\n            else {\n                navigationToolbar.style.display = 'none';\n                navigationToolbarSplitter.style.display = 'none';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n                }\n            }\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isVisible - If set true, then its show the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n                case 'UndoRedoTool':\n                    this.showUndoRedoTool(isVisible);\n                    break;\n                case 'AnnotationEditTool':\n                    this.showAnnotationEditTool(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.applyHideToToolbar(true, 15, 15);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n                case 'UndoRedoTool':\n                    this.enableUndoRedoTool(isEnable);\n                    break;\n                case 'AnnotationEditTool':\n                    this.enableAnnotationEditTool(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 21, 21);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 20, 20);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 18, 18);\n    };\n    Toolbar.prototype.showUndoRedoTool = function (isEnable) {\n        this.isUndoRedoBtnsVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 16, 17);\n    };\n    Toolbar.prototype.showAnnotationEditTool = function (isEnable) {\n        this.isAnnotationEditBtnVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 19, 19);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    Toolbar.prototype.enableUndoRedoTool = function (isEnable) {\n        this.toolbar.enableItems(this.undoItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.redoItem.parentElement, isEnable);\n    };\n    Toolbar.prototype.enableAnnotationEditTool = function (isEnable) {\n        this.toolbar.enableItems(this.annotationItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        if (!Browser.isDevice) {\n            this.currentPageBox.min = 0;\n            this.currentPageBox.value = 0;\n            this.updateTotalPage();\n            this.updateToolbarItems();\n            if (this.annotationToolbarModule) {\n                this.annotationToolbarModule.clear();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, false);\n                this.toolbar.enableItems(this.printItem.parentElement, false);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = true;\n                }\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n                this.toolbar.enableItems(this.annotationItem.parentElement, false);\n                this.toolbar.enableItems(this.panItem.parentElement, false);\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.deSelectItem(this.annotationItem);\n                if (this.annotationToolbarModule) {\n                    this.annotationToolbarModule.resetToolbar();\n                }\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, true);\n                this.toolbar.enableItems(this.printItem.parentElement, true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.updateZoomButtons();\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = false;\n                }\n                this.updateInteractionItems();\n                // modify this condition if new annotation types are added.\n                if (this.pdfViewer.annotationModule && this.pdfViewer.enableAnnotation) {\n                    this.toolbar.enableItems(this.annotationItem.parentElement, true);\n                }\n                if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                    this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                }\n            }\n            if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.length === 0 || !this.pdfViewer.annotationModule) {\n                this.enableToolbarItem(['AnnotationEditTool'], false);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, true);\n                this.updateUndoRedoButtons();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled && !Browser.isDevice) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateUndoRedoButtons = function () {\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection, this.undoItem.parentElement);\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection, this.redoItem.parentElement);\n            }\n            else {\n                this.disableUndoRedoButtons();\n            }\n        }\n        else {\n            this.disableUndoRedoButtons();\n        }\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.enableCollectionAvailable = function (collection, item) {\n        if (collection.length > 0) {\n            this.toolbar.enableItems(item, true);\n        }\n        else {\n            this.toolbar.enableItems(item, false);\n        }\n    };\n    Toolbar.prototype.disableUndoRedoButtons = function () {\n        this.toolbar.enableItems(this.undoItem.parentElement, false);\n        this.toolbar.enableItems(this.redoItem.parentElement, false);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.moreDropDown) {\n            this.moreDropDown.destroy();\n        }\n        if (this.annotationToolbarModule) {\n            this.annotationToolbarModule.destroy();\n        }\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (!Browser.isDevice) {\n            if (this.currentPageBox.value === pageIndex) {\n                this.currentPageBoxElement.value = pageIndex.toString();\n            }\n            this.currentPageBox.value = pageIndex;\n        }\n        else {\n            this.pdfViewerBase.mobileSpanContainer.innerHTML = pageIndex.toString();\n            this.pdfViewerBase.mobilecurrentPageContainer.innerHTML = pageIndex.toString();\n        }\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.currentPageBox.min = 1;\n            }\n            this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        if (!Browser.isDevice) {\n            this.toolbar = new tool({\n                clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup',\n                items: this.createToolbarItems(), created: function () {\n                    _this.createZoomDropdown();\n                    _this.createNumericTextBox();\n                    _this.toolbar.refreshOverflow();\n                }\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.toolbar.appendTo(this.toolbarElement);\n            this.afterToolbarCreation();\n            this.updateTotalPage();\n            this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        }\n        else {\n            this.createToolbarItemsForMobile();\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.disableUndoRedoButtons();\n        }\n        return this.toolbarElement;\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.createToolbarItems = function () {\n        var currentPageInputTemplate = this.createCurrentPageInputTemplate();\n        var totalPageTemplate = this.createTotalPageTemplate();\n        var zoomDropDownTemplateString = this.createZoomDropdownElement();\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-open-document-icon e-pv-icon', cssClass: 'e-pv-open-document-container', id: this.pdfViewer.element.id + '_open', text: this.pdfViewer.localeObj.getConstant('Open text'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n        }\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-zoom-out-icon e-pv-icon', cssClass: 'e-pv-zoom-out-container', id: this.pdfViewer.element.id + '_zoomOut', text: this.pdfViewer.localeObj.getConstant('Zoom out text'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-zoom-in-icon e-pv-icon', cssClass: 'e-pv-zoom-in-container', id: this.pdfViewer.element.id + '_zoomIn', text: this.pdfViewer.localeObj.getConstant('Zoom in text'), align: 'Left' });\n        items.push({ template: zoomDropDownTemplateString, cssClass: 'e-pv-zoom-drop-down-container', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-select-tool-icon e-pv-icon', cssClass: 'e-pv-text-select-tool-container', id: this.pdfViewer.element.id + '_selectTool', text: this.pdfViewer.localeObj.getConstant('Selection text') });\n        items.push({ prefixIcon: 'e-pv-pan-tool-icon e-pv-icon', cssClass: 'e-pv-pan-tool-container', id: this.pdfViewer.element.id + '_handTool', text: this.pdfViewer.localeObj.getConstant('Pan text') });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-undo-icon e-pv-icon', cssClass: 'e-pv-undo-container', id: this.pdfViewer.element.id + '_undo', text: this.pdfViewer.localeObj.getConstant('Undo'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-redo-icon e-pv-icon', cssClass: 'e-pv-redo-container', id: this.pdfViewer.element.id + '_redo', text: this.pdfViewer.localeObj.getConstant('Redo'), align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-search-icon e-pv-icon', cssClass: 'e-pv-text-search-container', id: this.pdfViewer.element.id + '_search', text: this.pdfViewer.localeObj.getConstant('Search text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-annotation-icon e-pv-icon', cssClass: 'e-pv-annotation-container', id: this.pdfViewer.element.id + '_annotation', text: this.pdfViewer.localeObj.getConstant('Annotation Edit text'), align: 'Right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-print-document-icon e-pv-icon', cssClass: 'e-pv-print-document-container', id: this.pdfViewer.element.id + '_print', text: this.pdfViewer.localeObj.getConstant('Print text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-download-document-icon e-pv-icon', cssClass: 'e-pv-download-document-container', id: this.pdfViewer.element.id + '_download', text: this.pdfViewer.localeObj.getConstant('Download'), align: 'Right' });\n        return items;\n    };\n    Toolbar.prototype.afterToolbarCreation = function () {\n        this.itemsContainer = this.toolbar.element.childNodes[0];\n        this.itemsContainer.id = this.pdfViewer.element.id + '_toolbarItemsContainer';\n        this.openDocumentItem = this.addClassToolbarItem('_open', 'e-pv-open-document', this.pdfViewer.localeObj.getConstant('Open'));\n        this.undoItem = this.addClassToolbarItem('_undo', 'e-pv-undo', this.pdfViewer.localeObj.getConstant('Undo'));\n        this.redoItem = this.addClassToolbarItem('_redo', 'e-pv-redo', this.pdfViewer.localeObj.getConstant('Redo'));\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        this.zoomOutItem = this.addClassToolbarItem('_zoomOut', 'e-pv-zoom-out', this.pdfViewer.localeObj.getConstant('Zoom Out'));\n        this.zoomInItem = this.addClassToolbarItem('_zoomIn', 'e-pv-zoom-in', this.pdfViewer.localeObj.getConstant('Zoom In'));\n        // tslint:disable-next-line:max-line-length\n        this.textSelectItem = this.addClassToolbarItem('_selectTool', 'e-pv-text-select-tool', this.pdfViewer.localeObj.getConstant('Text Selection'));\n        this.panItem = this.addClassToolbarItem('_handTool', 'e-pv-pan-tool', this.pdfViewer.localeObj.getConstant('Panning'));\n        // tslint:disable-next-line:max-line-length\n        this.textSearchItem = this.addClassToolbarItem('_search', 'e-pv-text-search', this.pdfViewer.localeObj.getConstant('Text Search'));\n        this.annotationItem = this.addClassToolbarItem('_annotation', 'e-pv-annotation', this.pdfViewer.localeObj.getConstant('Annotation'));\n        // tslint:disable-next-line:max-line-length\n        this.printItem = this.addClassToolbarItem('_print', 'e-pv-print-document', this.pdfViewer.localeObj.getConstant('Print'));\n        this.downloadItem = this.addClassToolbarItem('_download', 'e-pv-download-document', this.pdfViewer.localeObj.getConstant('Download file'));\n        this.zoomDropdownItem = this.pdfViewerBase.getElement('_zoomDropDown');\n        this.createTooltip(this.zoomDropdownItem, this.pdfViewer.localeObj.getConstant('Zoom'));\n        this.zoomDropdownItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Zoom'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement, null, '_zoomDropDownContainer');\n        this.pdfViewerBase.getElement('_zoomDropDownContainer').style.minWidth = '';\n        this.createTooltip(this.currentPageBoxElement, this.pdfViewer.localeObj.getConstant('Page Number'));\n        this.currentPageBoxElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Page Number'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement, 'e-pv-current-page-container', '_currentPageInputContainer');\n        this.pdfViewerBase.getElement('_currentPageInputContainer').style.minWidth = '20px';\n        this.totalPageItem = this.pdfViewerBase.getElement('_totalPage');\n        this.addPropertiesToolItemContainer(this.totalPageItem.parentElement, 'e-pv-total-page-container', '_totalPageContainer');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.addClassToolbarItem = function (idString, className, tooltipText) {\n        var element = this.pdfViewerBase.getElement(idString);\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        element.setAttribute('aria-label', tooltipText);\n        element.parentElement.classList.add(className + '-container');\n        element.parentElement.classList.add('e-popup-text');\n        element.parentElement.id = this.pdfViewer.element.id + idString + 'Container';\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n            spanElement.classList.remove('e-icons');\n            spanElement.classList.remove('e-btn-icon');\n            if (this.pdfViewer.enableRtl) {\n                spanElement.classList.add('e-right');\n            }\n            var textElement = element.childNodes[1];\n            if (textElement) {\n                if (textElement.classList.contains('e-tbar-btn-text')) {\n                    textElement.id = this.pdfViewer.element.id + idString + 'Text';\n                }\n            }\n        }\n        element.style.width = '';\n        this.createTooltip(element, tooltipText);\n        return element;\n    };\n    Toolbar.prototype.addPropertiesToolItemContainer = function (element, className, idString) {\n        if (className !== null) {\n            element.classList.add(className);\n        }\n        element.classList.add('e-popup-text');\n        element.id = this.pdfViewer.element.id + idString;\n    };\n    Toolbar.prototype.createZoomDropdownElement = function () {\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', null);\n        return zoomDropdownElement.outerHTML;\n    };\n    Toolbar.prototype.createZoomDropdown = function () {\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.pdfViewerBase.getElement('_zoomDropDown'));\n    };\n    Toolbar.prototype.createCurrentPageInputTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var goToPageElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', null);\n        return goToPageElement.outerHTML;\n    };\n    Toolbar.prototype.createTotalPageTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var totalPageElement = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', 'e-pv-total-page');\n        return totalPageElement.outerHTML;\n    };\n    Toolbar.prototype.createNumericTextBox = function () {\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = this.pdfViewerBase.getElement('_currentPageInput');\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n    };\n    Toolbar.prototype.createToolbarItemsForMobile = function () {\n        this.toolbarElement.classList.add('e-pv-mobile-toolbar');\n        var template = '<button id=\"' + this.pdfViewer.element.id + '_more_option\" class=\"e-tbar-btn\"></button>';\n        this.toolbar = new tool({\n            // tslint:disable-next-line:max-line-length\n            items: [{ prefixIcon: 'e-pv-open-document-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Open'), id: this.pdfViewer.element.id + '_open' },\n                { type: 'Separator', align: 'Left' },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-undo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Undo'), id: this.pdfViewer.element.id + '_undo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-redo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Redo'), id: this.pdfViewer.element.id + '_redo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-text-search-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Text Search'), id: this.pdfViewer.element.id + '_search', align: 'Right' },\n                { template: template, align: 'Right' }\n            ], clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup'\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.openDocumentItem = this.pdfViewerBase.getElement('_open');\n        this.openDocumentItem.classList.add('e-pv-open-document');\n        this.openDocumentItem.firstElementChild.id = this.pdfViewer.element.id + '_openIcon';\n        this.textSearchItem = this.pdfViewerBase.getElement('_search');\n        this.textSearchItem.classList.add('e-pv-text-search');\n        this.textSearchItem.firstElementChild.id = this.pdfViewer.element.id + '_searchIcon';\n        this.undoItem = this.pdfViewerBase.getElement('_undo');\n        this.undoItem.classList.add('e-pv-undo');\n        this.redoItem = this.pdfViewerBase.getElement('_redo');\n        this.redoItem.classList.add('e-pv-redo');\n        this.redoItem.firstElementChild.id = this.pdfViewer.element.id + '_redoIcon';\n        this.undoItem.firstElementChild.id = this.pdfViewer.element.id + '_undoIcon';\n        this.createMoreOption(this.pdfViewer.element.id + '_more_option');\n    };\n    Toolbar.prototype.createMoreOption = function (idString) {\n        var _this = this;\n        this.moreOptionItem = document.getElementById(idString);\n        var items = [\n            {\n                text: this.pdfViewer.localeObj.getConstant('Download'), id: this.pdfViewer.element.id + '_menu_download',\n                iconCss: 'e-icons e-pv-download-document-icon e-pv-icon'\n            },\n            {\n                text: this.pdfViewer.localeObj.getConstant('Bookmarks'), id: this.pdfViewer.element.id + '_menu_bookmarks',\n                iconCss: 'e-icons e-pv-bookmark-icon e-pv-icon'\n            }\n        ];\n        this.moreDropDown = new DropDownButton({\n            items: items, iconCss: 'e-pv-more-icon e-pv-icon', cssClass: 'e-caret-hide',\n            open: function (args) {\n                var dropdownButtonPosition = _this.moreDropDown.element.getBoundingClientRect();\n                // tslint:disable-next-line:max-line-length\n                if (!_this.pdfViewer.enableRtl) {\n                    args.element.parentElement.style.left = dropdownButtonPosition.left + dropdownButtonPosition.width - args.element.parentElement.offsetWidth + 'px';\n                }\n            }, select: function (args) {\n                switch (args.item.id) {\n                    case _this.pdfViewer.element.id + '_menu_download':\n                        _this.pdfViewerBase.download();\n                        break;\n                    case _this.pdfViewer.element.id + '_menu_bookmarks':\n                        _this.showToolbar(false);\n                        _this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');\n                        break;\n                    default:\n                        break;\n                }\n            }, beforeItemRender: function (args) {\n                if (args.item.id === _this.pdfViewer.element.id + '_menu_bookmarks') {\n                    if (!_this.pdfViewer.bookmarkViewModule || !_this.pdfViewer.bookmarkViewModule.bookmarks) {\n                        args.element.classList.add('e-disabled');\n                    }\n                    else {\n                        args.element.classList.remove('e-disabled');\n                    }\n                }\n            }, close: function (args) {\n                _this.moreOptionItem.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        });\n        this.moreDropDown.appendTo('#' + idString);\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, className) {\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            toolbarItem.className = className;\n        }\n        if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        return toolbarItem;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.createTooltip = function (toolbarItem, tooltipText) {\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip && this.toolbarElement.contains(args.target)) {\n            args.cancel = true;\n        }\n        if (this.annotationToolbarModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.annotationToolbarSettings.showTooltip && this.annotationToolbarModule.toolbarElement.contains(args.target)) {\n                args.cancel = true;\n            }\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n            this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n            this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n            this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n            this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.navigationPane.toolbarResize();\n        }\n        else {\n            this.toolbar.refreshOverflow();\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.handleToolbarButtonClick = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_open':\n            case this.pdfViewer.element.id + '_openIcon':\n            case this.pdfViewer.element.id + '_openText':\n                this.fileInputElement.click();\n                if (Browser.isDevice) {\n                    args.originalEvent.target.blur();\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n                break;\n            case this.pdfViewer.element.id + '_download':\n            case this.pdfViewer.element.id + '_downloadIcon':\n            case this.pdfViewer.element.id + '_downloadText':\n                this.pdfViewerBase.download();\n                break;\n            case this.pdfViewer.element.id + '_print':\n            case this.pdfViewer.element.id + '_printIcon':\n            case this.pdfViewer.element.id + '_printText':\n                if (this.pdfViewer.printModule) {\n                    this.pdfViewer.printModule.print();\n                }\n                break;\n            case this.pdfViewer.element.id + '_undo':\n            case this.pdfViewer.element.id + '_undoIcon':\n            case this.pdfViewer.element.id + '_undoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.undo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_redo':\n            case this.pdfViewer.element.id + '_redoIcon':\n            case this.pdfViewer.element.id + '_redoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.redo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_firstPage':\n            case this.pdfViewer.element.id + '_firstPageIcon':\n            case this.pdfViewer.element.id + '_firstPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToFirstPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_previousPage':\n            case this.pdfViewer.element.id + '_previousPageIcon':\n            case this.pdfViewer.element.id + '_previousPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToPreviousPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_nextPage':\n            case this.pdfViewer.element.id + '_nextPageIcon':\n            case this.pdfViewer.element.id + '_nextPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToNextPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_lastPage':\n            case this.pdfViewer.element.id + '_lastPageIcon':\n            case this.pdfViewer.element.id + '_lastPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToLastPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_zoomIn':\n            case this.pdfViewer.element.id + '_zoomInIcon':\n            case this.pdfViewer.element.id + '_zoomInText':\n                this.pdfViewer.magnificationModule.zoomIn();\n                break;\n            case this.pdfViewer.element.id + '_zoomOut':\n            case this.pdfViewer.element.id + '_zoomOutIcon':\n            case this.pdfViewer.element.id + '_zoomOutText':\n                this.pdfViewer.magnificationModule.zoomOut();\n                break;\n            case this.pdfViewer.element.id + '_selectTool':\n            case this.pdfViewer.element.id + '_selectToolIcon':\n            case this.pdfViewer.element.id + '_selectToolText':\n                if (!this.isSelectionToolDisabled) {\n                    this.pdfViewerBase.initiateTextSelectMode();\n                    this.updateInteractionTools(true);\n                }\n                break;\n            case this.pdfViewer.element.id + '_handTool':\n            case this.pdfViewer.element.id + '_handToolIcon':\n            case this.pdfViewer.element.id + '_handToolText':\n                if (!this.isScrollingToolDisabled) {\n                    this.pdfViewerBase.initiatePanning();\n                    this.updateInteractionTools(false);\n                }\n                break;\n            case this.pdfViewer.element.id + '_search':\n            case this.pdfViewer.element.id + '_searchIcon':\n            case this.pdfViewer.element.id + '_searchText':\n                this.textSearchButtonHandler();\n                break;\n            case this.pdfViewer.element.id + '_annotation':\n            case this.pdfViewer.element.id + '_annotationIcon':\n            case this.pdfViewer.element.id + '_annotationText':\n                this.initiateAnnotationMode();\n                break;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:radix\n            var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n            if (this.zoomDropDown.text === currentPercent) {\n                this.zoomDropDown.element.value = currentPercent;\n            }\n            if (this.zoomDropDown.index === 9) {\n                this.zoomDropDown.value = 2;\n            }\n            // tslint:disable-next-line\n            this.zoomDropDown.text = currentPercent;\n        }\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n                this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n                this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n                if (this.isTextSearchBoxDisplayed) {\n                    this.selectItem(this.textSearchItem);\n                    // tslint:disable-next-line:max-line-length\n                    var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                    searchInputElement.select();\n                    searchInputElement.focus();\n                }\n                else {\n                    this.deSelectItem(this.textSearchItem);\n                }\n            }\n        }\n        else {\n            this.showToolbar(false);\n            this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');\n        }\n    };\n    Toolbar.prototype.initiateAnnotationMode = function () {\n        if (this.annotationToolbarModule) {\n            if (this.pdfViewerBase.isPanMode && this.annotationToolbarModule.isToolbarHidden) {\n                this.pdfViewerBase.initiateTextSelectMode();\n            }\n            this.DisableInteractionTools();\n            this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.DisableInteractionTools = function () {\n        this.deSelectItem(this.textSelectItem);\n        this.deSelectItem(this.panItem);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enableNavigationToolbar) {\n            this.showNavigationToolbar(true);\n        }\n        else {\n            this.showNavigationToolbar(false);\n        }\n        if (this.isPrintBtnVisible) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.isDownloadBtnVisible) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.isSearchBtnVisible) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (this.isOpenBtnVisible && toolbarItems.length === 1) ||\n            // tslint:disable-next-line:max-line-length\n            (!this.isNavigationToolVisible && !this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible && !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if (((!this.isNavigationToolVisible && !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) ||\n            (this.isOpenBtnVisible && !this.isNavigationToolVisible) ||\n            // tslint:disable-next-line:max-line-length\n            ((!this.isOpenBtnVisible && !this.isNavigationToolVisible) || (!this.isMagnificationToolVisible && !this.isScrollingBtnVisible && !this.isSelectionBtnVisible))) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible || this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n        if (((!this.isMagnificationToolVisible && !this.isNavigationToolVisible && !this.isScrollingBtnVisible\n            && !this.isSelectionBtnVisible) && this.isUndoRedoBtnsVisible || !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems) {\n            if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n                this.showOpenOption(true);\n            }\n            else {\n                this.showOpenOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n                this.showPageNavigationTool(true);\n            }\n            else {\n                this.showPageNavigationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n                this.showMagnificationTool(true);\n            }\n            else {\n                this.showMagnificationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n                this.showSelectionTool(true);\n            }\n            else {\n                this.showSelectionTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n                this.showScrollingTool(true);\n            }\n            else {\n                this.showScrollingTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n                this.showPrintOption(true);\n            }\n            else {\n                this.showPrintOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n                this.showDownloadOption(true);\n            }\n            else {\n                this.showDownloadOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n                this.showSearchOption(true);\n            }\n            else {\n                this.showSearchOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('UndoRedoTool') !== -1) {\n                this.showUndoRedoTool(true);\n            }\n            else {\n                this.showUndoRedoTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('AnnotationEditTool') !== -1) {\n                this.showAnnotationEditTool(true);\n            }\n            else {\n                this.showAnnotationEditTool(false);\n            }\n            this.showSeparator(toolbarSettingsItems);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        this.toolbarBorderHeight = 1;\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.showAnnotationToolbar(null);\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable) {\n        var _this = this;\n        if (Browser.isDevice) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // tslint:disable-next-line:max-line-length\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns();\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            this.toolbarElement.style.display = 'none';\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // tslint:disable-next-line:max-line-length\n        items.push({ template: colorTemplate, align: 'right' });\n        items.push({ template: opacityTemplate, align: 'right' });\n        items.push({ type: 'Separator', align: 'right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        this.hideMobileAnnotationToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(true);\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate, align: 'Left' });\n        items.push({ template: opacityTemplate, align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    AnnotationToolbar.prototype.createDropDowns = function () {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            var opacityElement = this.pdfViewerBase.getElement('_annotation_opacity-popup');\n            opacityElement.style.left = '0px';\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        this.colorPalette.refresh();\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor }, true);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor }, true);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor }, true);\n                    break;\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.getElement('_annotation_color-popup').style.left = '0px';\n        }\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                    this.isCurrentAnnotationOpacitySet = false;\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = args.value / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = args.value / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = args.value / 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // tslint:disable-next-line:max-line-length\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // tslint:disable-next-line:max-line-length\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            change: this.onColorPickerChange.bind(this), value: '#000000', showButtons: false,\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(args.currentValue.hex);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = args.currentValue.hex;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = args.currentValue.hex;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = args.currentValue.hex;\n                        break;\n                }\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, args.currentValue.hex);\n        this.colorDropDown.toggle();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // tslint:disable-next-line:max-line-length\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // tslint:disable-next-line:max-line-length\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // tslint:disable-next-line:max-line-length\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.selectAnnotationDeleteItem(false);\n        this.enableAnnotationPropertiesTools(false);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.handleHighlight();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.handleUnderline();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.handleStrikethrough();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element) {\n        if (!this.isToolbarHidden) {\n            // tslint:disable-next-line\n            var annotationModule = this.pdfViewer.annotationModule;\n            if (element) {\n                this.adjustViewer(false);\n                this.primaryToolbar.deSelectItem(element);\n            }\n            // tslint:disable-next-line:max-line-length           \n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.enablePropertiesTool(annotationModule);\n            }\n            else {\n                this.deselectAllItems();\n            }\n            this.toolbarElement.style.display = 'none';\n            this.primaryToolbar.updateInteractionTools(true);\n        }\n        else {\n            var toolBarInitialStatus = this.toolbarElement.style.display;\n            this.toolbarElement.style.display = 'block';\n            if (element) {\n                this.primaryToolbar.selectItem(element);\n                if (toolBarInitialStatus === 'none') {\n                    this.primaryToolbar.DisableInteractionTools();\n                    this.adjustViewer(true);\n                }\n            }\n        }\n        // tslint:disable-next-line:max-line-length           \n        if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n            this.pdfViewer.magnification.fitToPage();\n        }\n        if (this.pdfViewerBase.isPanMode) {\n            this.enableAnnotationAddTools(false);\n        }\n        else {\n            this.enableAnnotationAddTools(true);\n        }\n        this.isToolbarHidden = !this.isToolbarHidden;\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(true);\n        // tslint:disable-next-line:max-line-length  \n        this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n        this.selectAnnotationDeleteItem(true);\n    };\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('HighlightTool') !== -1) {\n            this.showHighlightTool(true);\n        }\n        else {\n            this.showHighlightTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('UnderlineTool') !== -1) {\n            this.showUnderlineTool(true);\n        }\n        else {\n            this.showUnderlineTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('StrikethroughTool') !== -1) {\n            this.showStrikethroughTool(true);\n        }\n        else {\n            this.showStrikethroughTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('ColorEditTool') !== -1) {\n            this.showColorEditTool(true);\n        }\n        else {\n            this.showColorEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('OpacityEditTool') !== -1) {\n            this.showOpacityEditTool(true);\n        }\n        else {\n            this.showOpacityEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('AnnotationDeleteTool') !== -1) {\n            this.showAnnotationDeleteTool(true);\n        }\n        else {\n            this.showAnnotationDeleteTool(false);\n        }\n        this.showSeparator();\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)\n            || (!this.isColorToolVisible && !this.isOpacityToolVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if ((!this.isColorToolVisible && !this.isOpacityToolVisible) && (!this.isHighlightBtnVisible &&\n            !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 6, 6);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 1, 1);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 2, 2);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 4, 4);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 5, 5);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 7, 7);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        if (isAdjust) {\n            // tslint:disable-next-line:max-line-length\n            sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight)) + 'px';\n            sideBarToolbar.style.height = sideBarToolbar.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n            splitterElement.style.height = splitterElement.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            sideBarToolbar.style.top = toolbarHeight + 'px';\n            sideBarContentContainer.style.top = toolbarHeight + 'px';\n            splitterElement.style.top = toolbarHeight + 'px';\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            sideBarToolbar.style.height = this.getHeight(sideBarToolbar, annotationToolbarHeight);\n            splitterElement.style.height = this.getHeight(splitterElement, annotationToolbarHeight);\n        }\n        this.updateContentContainerHeight(isAdjust);\n    };\n    AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust) {\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n        if (sideBarClientRect.height !== 0) {\n            if (isAdjust) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n        var toolbarHeight = element.getBoundingClientRect().height;\n        if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n            // getComputedStyle gets the value from style and toolbar border height is added to it.\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n        }\n        return toolbarHeight;\n    };\n    AnnotationToolbar.prototype.getHeight = function (element, toolbarHeight) {\n        var height = element.getBoundingClientRect().height;\n        return (height !== 0) ? height + toolbarHeight + 'px' : '';\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.enableAnnotationPropertiesTools(true);\n            // tslint:disable-next-line:max-line-length\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(false);\n        this.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.selectAnnotationDeleteItem(false);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable) {\n        this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableAnnotationAddTools(true);\n        }\n        else {\n            this.enableAnnotationAddTools(false);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.adjustViewer(false);\n        this.updateToolbarItems();\n        this.toolbarElement.style.display = 'none';\n        this.isToolbarHidden = true;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.colorDropDown.destroy();\n        this.opacityDropDown.destroy();\n        this.toolbar.destroy();\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        return element.getBoundingClientRect().height;\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.\n */\nvar AnnotationToolbarSettings = /** @class */ (function (_super) {\n    __extends(AnnotationToolbarSettings, _super);\n    function AnnotationToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], AnnotationToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], AnnotationToolbarSettings.prototype, \"annotationToolbarItem\", void 0);\n    return AnnotationToolbarSettings;\n}(ChildProperty));\nexport { AnnotationToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.\n */\nvar StrikethroughSettings = /** @class */ (function (_super) {\n    __extends(StrikethroughSettings, _super);\n    function StrikethroughSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], StrikethroughSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ff0000')\n    ], StrikethroughSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], StrikethroughSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('strikethrough')\n    ], StrikethroughSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], StrikethroughSettings.prototype, \"modifiedDate\", void 0);\n    return StrikethroughSettings;\n}(ChildProperty));\nexport { StrikethroughSettings };\n/**\n * The `UnderlineSettings` module is used to provide the properties to Underline annotation.\n */\nvar UnderlineSettings = /** @class */ (function (_super) {\n    __extends(UnderlineSettings, _super);\n    function UnderlineSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], UnderlineSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#00ff00')\n    ], UnderlineSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], UnderlineSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('underline')\n    ], UnderlineSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], UnderlineSettings.prototype, \"modifiedDate\", void 0);\n    return UnderlineSettings;\n}(ChildProperty));\nexport { UnderlineSettings };\n/**\n * The `HighlightSettings` module is used to provide the properties to Highlight annotation.\n */\nvar HighlightSettings = /** @class */ (function (_super) {\n    __extends(HighlightSettings, _super);\n    function HighlightSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], HighlightSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ffff00')\n    ], HighlightSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], HighlightSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('highlight')\n    ], HighlightSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], HighlightSettings.prototype, \"modifiedDate\", void 0);\n    return HighlightSettings;\n}(ChildProperty));\nexport { HighlightSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download file': 'Download file',\n            'Download': 'Download',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            'Apply': 'Apply',\n            'GoToPage': 'Go to Page',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            'No Text Found': 'No Text Found',\n            'Undo': 'Undo',\n            'Redo': 'Redo',\n            'Annotation': 'Add or Edit annotations',\n            'Highlight': 'Highlight Text',\n            'Underline': 'Underline Text',\n            'Strikethrough': 'Strikethrough Text',\n            'Delete': 'Delete annotation',\n            'Opacity': 'Opacity',\n            'Color edit': 'Change Color',\n            'Opacity edit': 'Change Opacity',\n            'Highlight context': 'Highlight',\n            'Underline context': 'Underline',\n            'Strikethrough context': 'Strike through',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.',\n            'Open text': 'Open',\n            'First text': 'First Page',\n            'Previous text': 'Previous Page',\n            'Next text': 'Next Page',\n            'Last text': 'Last Page',\n            'Zoom in text': 'Zoom In',\n            'Zoom out text': 'Zoom Out',\n            'Selection text': 'Selection',\n            'Pan text': 'Pan',\n            'Print text': 'Print',\n            'Search text': 'Search',\n            'Annotation Edit text': 'Edit Annotation'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"isDocumentEdited\", {\n        /**\n         * Checks whether the PDF document is edited.\n         */\n        get: function () {\n            return this.viewerBase.isDocumentEdited;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"annotation\", {\n        /**\n         * Gets the annotation object of the pdf viewer.\n         * @returns { Annotation }\n         */\n        get: function () {\n            return this.annotationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableAnnotation) {\n            modules.push({\n                member: 'Annotation', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document - Specifies the document name for load\n     * @param  {string} password - Specifies the Given document password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    /**\n     * Perform undo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.undo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.undo();\n        }\n    };\n    /**\n     * Perform redo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.redo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.redo();\n        }\n    };\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.classList.remove('e-pdfviewer');\n            this.element.innerHTML = '';\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewer.prototype.fireAnnotationAdd = function (pageNumber, index, type, bounds, settings) {\n        var eventArgs = { name: 'annotationAdd', pageIndex: pageNumber, annotationId: index, annotationType: type, annotationBound: bounds, annotationSettings: settings };\n        this.trigger('annotationAdd', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAnnotationRemove = function (pageNumber, index, type) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'annotationRemove', pageIndex: pageNumber, annotationId: index, annotationType: type };\n        this.trigger('annotationRemove', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewer.prototype.fireAnnotationPropertiesChange = function (pageNumber, index, type, isColorChanged, isOpacityChanged) {\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pageNumber, annotationId: index, annotationType: type, isColorChanged: isColorChanged, isOpacityChanged: isOpacityChanged };\n        this.trigger('annotationPropertiesChange', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigationToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableAnnotation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextMarkupAnnotation\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'AnnotationEditTool', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ showTooltip: true, annotationToolbarItem: ['HighlightTool', 'UnderlineTool', 'StrikethroughTool', 'ColorEditTool', 'OpacityEditTool', 'AnnotationDeleteTool'] })\n    ], PdfViewer.prototype, \"annotationToolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#FFDF56', author: 'Guest', subject: 'Highlight', modifiedDate: '' })\n    ], PdfViewer.prototype, \"highlightSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#ff0000', author: 'Guest', subject: 'Strikethrough', modifiedDate: '' })\n    ], PdfViewer.prototype, \"strikethroughSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#00ff00', author: 'Guest', subject: 'Underline', modifiedDate: '' })\n    ], PdfViewer.prototype, \"underlineSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationAdd\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationRemove\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationPropertiesChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ListView } from '@syncfusion/ej2-lists';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.childNavigateCount = 0;\n        // tslint:disable-next-line\n        this.bookmarkClick = function (args) {\n            // tslint:disable-next-line\n            if (!args.event.target.classList.contains('e-icons')) {\n                var bookid = args.data.Id;\n                _this.childNavigateCount = 0;\n                _this.pdfViewerBase.navigationPane.goBackToToolbar();\n                _this.navigateToBookmark(bookid);\n            }\n            else {\n                _this.childNavigateCount++;\n            }\n            return false;\n        };\n        this.nodeClick = function (args) {\n            _this.setHeight(args.node);\n            var bookid = Number(args.nodeData.id);\n            _this.navigateToBookmark(bookid);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                if (_this.pdfViewerBase.navigationPane) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.pdfViewerBase.navigationPane) {\n                    if (_this.bookmarks == null) {\n                        _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                    }\n                    else {\n                        _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                        _this.isBookmarkViewDiv = false;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        var _this = this;\n        if (!this.isBookmarkViewDiv) {\n            this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n            this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n            // tslint:disable-next-line:max-line-length\n            var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon e-right' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            // tslint:disable-next-line:max-line-length\n            var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n            if (this.pdfViewer.enableRtl) {\n                bookmarkTitle.style.paddingRight = 26 + 'px';\n            }\n            else {\n                bookmarkTitle.style.paddingLeft = 40 + 'px';\n            }\n            bookmarkTitle.innerText = '${Title}';\n            bookmarkIconView.appendChild(bookmarkTitle);\n            // tslint:disable-next-line:max-line-length\n            this.treeObj = new TreeView({\n                fields: {\n                    dataSource: this.bookmarks.bookMark,\n                    id: 'Id',\n                    text: 'Title',\n                    child: 'Child',\n                    hasChildren: 'HasChild',\n                },\n                nodeTemplate: bookmarkIconView.outerHTML,\n                nodeSelected: this.nodeClick.bind(this),\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.treeObj.enableRtl = true;\n            }\n            this.treeObj.appendTo(this.bookmarkView);\n            ['mouseover', 'keydown'].forEach(function (evt) { return _this.bookmarkView.addEventListener(evt, function (event) {\n                _this.setHeight(event.target);\n            }); });\n            this.isBookmarkViewDiv = true;\n        }\n        this.bookmarkView.style.display = 'block';\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkContentMobile = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.remove();\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);\n        this.bookmarkList = new ListView({\n            dataSource: this.bookmarks.bookMark,\n            fields: {\n                id: 'Id',\n                text: 'Title',\n                child: 'Child'\n            },\n            showHeader: false,\n            select: this.bookmarkClick.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.bookmarkList.enableRtl = true;\n        }\n        this.bookmarkList.appendTo(this.bookmarkView);\n    };\n    // tslint:disable-next-line\n    BookmarkView.prototype.setHeight = function (element) {\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            else if (element.classList.contains('e-list-parent')) {\n                element = element.querySelector('.e-fullrow');\n            }\n            else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\n                element = element.closest('.e-list-item').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.setBookmarkContentHeight = function () {\n        // tslint:disable-next-line\n        var element = this.treeObj.element;\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    BookmarkView.prototype.navigateToBookmark = function (bookid) {\n        var pageIndex = this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n        var Y = this.bookmarksDestination.bookMarkDestination[bookid].Y;\n        this.goToBookmark(pageIndex, Y);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @param  {number} pageIndex - Specifies the pageIndex for Navigate\n     * @param  {number} y - Specifies the Y coordinates value of the Page\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n            this.pdfViewerBase.updateMobileScrollerPosition();\n        }\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.disableBookmarkButton();\n            this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        }\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            if (this.bookmarkView.parentElement !== null) {\n                this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n            }\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.contextMenuHeight = 144;\n        /**\n         * @private\n         */\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                var selectionRectBounds = this.getSelectionRectangleBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    // tslint:disable-next-line:max-line-length\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bound: selectionBounds, rectangleBounds: selectionRectBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            if (lastElement.childNodes[0]) {\n                                this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                            }\n                            else {\n                                this.extendSelectionStich(lastElement, this.getTextLastLength(lastElement), selection);\n                            }\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBound = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    var selectionRectBounds = this.getSelectionRectangleBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bound: selectionBound, rectangleBounds: selectionRectBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode);\n        var endElement = document.getElementById(endNode);\n        if (startElement.childNodes[0]) {\n            startElement = startElement.childNodes[0];\n        }\n        if (endElement.childNodes[0]) {\n            endElement = endElement.childNodes[0];\n        }\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds = this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber);\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getSelectionRectangleBounds = function (range, pageNumber) {\n        var selectionBounds = [];\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var startOffset = 0;\n            var endOffset = 0;\n            var currentId = 0;\n            var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);\n            var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(range.startContainer, anchorPageId);\n            var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);\n            var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(range.endContainer, focusPageId);\n            var textDivs = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).childNodes;\n            if (pageNumber === anchorPageId) {\n                currentId = anchorTextId;\n            }\n            else {\n                currentId = 0;\n            }\n            for (var j = currentId; j < textDivs.length; j++) {\n                var textElement = textDivs[j];\n                if (j === anchorTextId) {\n                    startOffset = range.startOffset;\n                }\n                else {\n                    startOffset = 0;\n                }\n                if (j === focusTextId) {\n                    endOffset = range.endOffset;\n                }\n                else {\n                    endOffset = textElement.textContent.length;\n                }\n                var newRange = document.createRange();\n                for (var k = 0; k < textElement.childNodes.length; k++) {\n                    var node = textElement.childNodes[k];\n                    newRange.setStart(node, startOffset);\n                    newRange.setEnd(node, endOffset);\n                }\n                var boundingRect = this.normalizeBounds(newRange.getBoundingClientRect(), pageNumber);\n                selectionBounds.push(boundingRect);\n                newRange.detach();\n                if (j === focusTextId) {\n                    break;\n                }\n            }\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n            selectionBounds.push(bounds);\n        }\n        return selectionBounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.width)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bound = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bound = ranges[i].bound;\n                }\n            }\n        }\n        return bound;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.calculateContextMenuPosition(event.touches[0].clientY, event.touches[0].clientX);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.calculateContextMenuPosition = function (top, left) {\n        top = top - this.pdfViewerBase.toolbarHeight;\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var contextTop = top - this.contextMenuHeight;\n            if (contextTop < this.pdfViewerBase.toolbarHeight) {\n                top = top + this.contextMenuHeight;\n            }\n            else {\n                top = contextTop;\n            }\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(top, left - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        if (this.pdfViewerBase.getTextMarkupAnnotationMode()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch(_this.searchInput);\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        if (this.pdfViewer.enableRtl) {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n        }\n        else {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        }\n        this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        if (this.pdfViewer.enableRtl) {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n        }\n        else {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        }\n        this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        if (this.pdfViewer.enableRtl) {\n            this.searchBox.classList.add('e-rtl');\n            this.searchBox.style.left = '88.3px';\n        }\n        else {\n            this.searchBox.classList.remove('e-rtl');\n            this.searchBox.style.right = '88.3px';\n        }\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n            var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n            if (secondaryToolbar) {\n                if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n                    this.searchBox.style.right = '0px';\n                }\n            }\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n                this.searchBox.style.right = '0px';\n                // tslint:disable-next-line\n                this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n                // tslint:disable-next-line\n                this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            }\n            else {\n                this.searchBox.style.right = '88.3px';\n                this.searchBox.style.width = '';\n                this.searchInput.style.width = '';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function (searchElement) {\n        var inputString = searchElement.value;\n        this.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.initiateSearch = function (inputString) {\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch(this.searchInput);\n            }\n        }\n        else {\n            this.initiateTextSearch(this.searchInput);\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -100 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                var targetScrollElement = this.getScrollElement(element);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                var targetScrollElement = this.getScrollElement(element_1);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    TextSearch.prototype.getScrollElement = function (element) {\n        var targetElement = element;\n        if (element.childNodes.length > 0) {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                if (element.childNodes[i].classList) {\n                    if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n                        targetElement = element.childNodes[i];\n                    }\n                }\n            }\n        }\n        return targetElement;\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (Browser.isDevice) {\n                parent.scrollLeft = offsetX;\n            }\n            else {\n                if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                    parent.scrollLeft = offsetX;\n                }\n            }\n        }\n        parent.scrollTop = offsetY;\n        this.pdfViewerBase.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.prevSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.prevSearchBtn.disabled = true;\n            }\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.nextSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.nextSearchBtn.disabled = true;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n        if (element.classList.contains('e-pv-search-icon')) {\n            this.initiateTextSearch(inputElement);\n        }\n        else if (element.classList.contains('e-pv-search-close')) {\n            inputElement.value = '';\n            this.resetTextSearch();\n            inputElement.focus();\n        }\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (this.searchBtn) {\n            if (isEnable) {\n                this.searchBtn.classList.remove('e-pv-search-close');\n                this.searchBtn.classList.add('e-pv-search-icon');\n            }\n            else {\n                this.searchBtn.classList.remove('e-pv-search-icon');\n                this.searchBtn.classList.add('e-pv-search-close');\n            }\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText - Specifies the searchText content\n     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', {\n                id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container'\n            });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n                    var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                    var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                    _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = {\n            pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1\n        };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        var printImage = request.responseText;\n        if (typeof printImage !== 'object') {\n            printImage = JSON.parse(printImage);\n        }\n        var annotationSource = '';\n        if (printImage.textMarkupAnnotation && this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            annotationSource = this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printImage.textMarkupAnnotation, pageIndex);\n        }\n        // tslint:disable-next-line:max-line-length\n        this.printCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_printCanvas_' + pageIndex, className: 'e-pv-print-canvas' });\n        this.printCanvas.style.width = pageWidth + 'px';\n        this.printCanvas.style.height = pageHeight + 'px';\n        this.printCanvas.height = 1056 * window.devicePixelRatio;\n        this.printCanvas.width = 816 * window.devicePixelRatio;\n        var context = this.printCanvas.getContext('2d');\n        var pageImage = new Image();\n        var annotationImage = new Image();\n        pageImage.onload = function () {\n            if (pageHeight > pageWidth) {\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                }\n            }\n            else {\n                // translate to center canvas\n                context.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5);\n                // rotate the canvas to - 90 degree \n                context.rotate(-0.5 * Math.PI);\n                // un translate the canvas back to origin\n                context.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5);\n                // draw the image\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                }\n            }\n            if (pageIndex === (proxy.pdfViewerBase.pageCount - 1)) {\n                proxy.printWindowOpen();\n            }\n        };\n        pageImage.src = printImage.image;\n        annotationImage.src = annotationSource;\n        this.printViewerContainer.appendChild(this.printCanvas);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:100%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n            this.frameDoc.document.write('<div style=\"margin:0mm;width:816px;height:1056px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /></div>');\n        }\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            try {\n                this.iframe.contentWindow.document.execCommand('print', false, null);\n            }\n            catch (e) {\n                this.iframe.contentWindow.print();\n            }\n        }\n        else {\n            setTimeout(function () {\n                _this.iframe.contentWindow.print();\n                _this.iframe.contentWindow.focus();\n                document.body.removeChild(_this.iframe);\n            }, 200);\n        }\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n","import * as index from './index';\nindex.PdfViewer.Inject(index.LinkAnnotation, index.BookmarkView, index.Magnification, index.ThumbnailView, index.Toolbar, index.Navigation, index.Print, index.TextSelection, index.TextSearch, index.Annotation);\nexport * from './index';\n"],"names":["Annotation","pdfViewer","viewerBase","this","actionCollection","redoCollection","isPopupNoteVisible","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","TextMarkupAnnotation","prototype","setAnnotationMode","type","clearAnnotationMode","drawTextMarkupAnnotations","toString","isTextMarkupAnnotationMode","deleteAnnotation","deleteTextMarkupAnnotation","toolbarModule","annotationToolbarModule","selectAnnotationDeleteItem","enableAnnotationPropertiesTools","initializeCollection","popupNote","createNote","addAction","pageNumber","index","annotation","actionString","property","action","pageIndex","modifiedProperty","push","updateToolbar","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","redo","redoTextMarkupAction","updateUndoRedoButtons","createElement","id","element","className","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","style","backgroundColor","display","topPosition","pageY","top","leftPosition","pageX","left","width","height","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","viewerContainer","addEventListener","saveClosePopupMenu","bind","onPopupElementMoveStart","onPopupElementMove","window","onPopupElementMoveEnd","focus","changedTouches","target","contains","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","pageSize","currentAnnotPageNumber","getZoomFactor","parseFloat","top_1","clientPosition","pageDiv","document","getElementById","saveNoteContent","innerText","closePopupMenu","parentElement","removeChild","showAnnotationPopup","getEventPageNumber","currentTextMarkupAnnotation","getProperDate","modifiedDate","canvasPosition","date","dateObject","Date","isNaN","getFullYear","dateString","slice","getMonth","getDate","getHours","getMinutes","getSeconds","eventTarget","pageString","split","parseInt","clear","destroy","getModuleName","LinkAnnotation","renderHyperlinkContent","data","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","this_1","i","aTag","rect","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","onclick","fireHyperlinkClick","open","this_2","undefined","destPageHeight","destLocation","scrollValue","name","scrollTop","background","position","Left","Top","Width","Height","modifyZindexForTextSelection","isAdd","pageCount","getElement","pageChildNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","aElement","getElementsByTagName","parentNode","currentTextMarkupAddMode","selectTextMarkupCurrentPage","currentAnnotationIndex","highlightColor","highlightSettings","underlineColor","underlineSettings","strikethroughColor","strikethroughSettings","highlightOpacity","opacity","underlineOpacity","strikethroughOpacity","createAnnotationLayer","pageWidth","pageHeight","displayMode","annotationCanvas","renderTextMarkupAnnotationsInPage","textMarkupAnnotations","canvas","renderTextMarkupAnnotations","factor","getMagnifiedValue","context","getContext","setLineDash","annotations","getAnnotations","annotationObject","TextMarkupAnnotationType","textMarkupAnnotationType","Color","Opacity","bounds","Bounds","Author","subject","Subject","ModifiedDate","Note","Rect","storeAnnotations","annotBounds","renderHighlightAnnotation","renderStrikeoutAnnotation","renderUnderlineAnnotation","maintainAnnotationSelection","selectionObject","textSelectionModule","selectionRangeArray","convertSelectionToTextMarkup","getSelection","pageBounds","getDrawnBounds","drawTextMarkups","clearTextSelection","rectangleBounds","bound","getPageContext","getAddedAnnotation","isDocumentEdited","settings","annotationModule","fireAnnotationAdd","beginPath","x","X","y","Y","globalAlpha","closePath","fillStyle","msFillRule","fill","save","getProperBounds","drawLine","boundValues","moveTo","lineTo","lineWidth","strokeStyle","stroke","printTextMarkupAnnotations","toDataURL","saveTextMarkupAnnotations","storeObject","sessionStorage","getItem","documentId","Array","colorpick","ColorPicker","j","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","stringify","getBoundsForSave","colorString","getValue","getRgbCode","pageAnnotations","deletedAnnotation","splice","manageAnnotations","fireAnnotationRemove","Browser","isDevice","hideMobileAnnotationToolbar","showToolbar","modifyColorProperty","modifyAnnotationProperty","fireAnnotationPropertiesChange","modifyOpacityProperty","args","value","status","toLocaleString","clearCurrentAnnotation","tempColor","tempOpacity","enableAnnotationPropertiesTool","clearCurrentAnnotationSelection","lowerPageIndex","higherPageIndex","k","clearAnnotationSelection","stringArray","r","g","b","selection","anchorNode","range","createRange","isBackWardSelection","textLayer","focusNode","pageId","getPageIndex","pageRect","setStart","focusOffset","setEnd","anchorOffset","boundingRect","rectangle","getDefaultValue","right","bottom","rectangleArray","startNode","endNode","selectionStartOffset","selectionEndOffset","anchorPageId","anchorTextId","getTextIndex","focusPageId","focusTextId","startOffset","endOffset","currentId","selectionRects","pageStartId","pageEndId","pageStartOffset","pageEndOffset","textDivs","textElement","node","detach","startElementNode","endElementNode","pageRange","pageRectBounds","pageRectangle","removeAllRanges","rerenderAnnotationsPinch","annotCanvas","oldAnnotCanvas","rerenderAnnotations","oldCanvas","newCanvas","resizeAnnotations","onTextMarkupAnnotationMouseUp","isNullOrUndefined","isClickedOnScrollBar","currentAnnot","getCurrentMarkupAnnotation","selectAnnotation","isToolbarHidden","showAnnotationToolbar","annotationItem","onTextMarkupAnnotationTouchEnd","number","touchCanvas","touches","onTextMarkupAnnotationMouseMove","cursor","isPanMode","getAnnotationToolStatus","currentTextMarkupAnnotations","canvasParentPosition","leftClickPosition","topClickPosition","annotationList","isAnnotationGot","top_2","compareCurrentAnnotations","previousX","currentAnnotation","firstAnnotBounds","firstXposition","firstYposition","secondAnnotBounds","secondXposition","secondYposition","drawAnnotationSelectRect","isEnable","createMobileAnnotationToolbar","isMobileAnnotEnabled","enable","updateColorInIcon","colorDropDownElement","setCurrentColorInPicker","annotObject","removeItem","getPageCollection","indexOf","markupAnnotation","annotationStringified","setItem","predefinedDate","storedIndex","NavigationPane","viewer","base","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isTooltipCreated","isNavigationToolbarVisible","isBookmarkListOpen","isNavigationPaneResized","isBookmarkOpen","isThumbnailOpen","resizeIconMouseOver","srcElement","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","offsetTop","offsetParent","clientWidth","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","getPopupNoteVisibleStatus","preventDefault","enableRtl","maxWidth","Math","floor","outerContainerWidth","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","closeDiv","viewerWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","bookmarkButton","children","bookmarkViewModule","setBookmarkContentHeight","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","localeObj","getConstant","bookmarkPane","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","bookmarkButtonOnClick","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","createNavigationPane","sideBarToolbar","attrs","role","aria-orientation","tabindex","cssFloat","sideBarToolbarSplitter","direction","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","sideBarTitleOnMouseup","adjustPane","splitterElement","toolbarContainer","toolbarHeight","getComputedStyle","createNavigationPaneMobile","option","toolbarElement","viewerMainContainer","insertBefore","items","searchTemplate","prefixIcon","tooltipText","click","goBackToToolbar","template","iconElement","firstElementChild","enableSearchItems","textSearchModule","searchButtonClick","searchInput","searchPrevious","searchNext","text","toolbar","Tool","overflowMode","appendTo","initiateSearchBox","initiateBookmarks","searchBtn","which","initiateTextSearch","resetVariables","setSearchInputWidth","enableItems","mobileScrollerContainer","bookmarkContainer","renderBookmarkContentMobile","inputString","initiateSearch","cancelTextSearch","childNavigateCount","bookmarkList","back","onWindowResize","searchInputParent","padding","getPropertyValue","getParentElementSearchBox","idString","createTooltipMobile","toastObject","tooltipChild","tooltipDiv","Toast","close","onTooltipClose","animation","hide","duration","effect","clientHeight","show","tooltipElement","isMessagePopupOpened","toolbarResize","thumbnailButton","disabled","aria-label","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","buttonSpan","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","enableBookmarkButton","resizeIcon","setResizeIconTop","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","t","call","label","ops","trys","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","navigationPane","isAnnotationToolbarHidden","updatePageHeight","annotationToolbarHeight","onToolbarResize","enableToolbar","textSearchBoxOnResize","mobilePageNoContainer","updateMobileScrollerPosition","viewerContainerOnMousedown","button","detail","isIE","documentMode","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","idStringArray","firePageClick","offsetX","offsetY","isTextMarkupAnnotationModule","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isCollapsed","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","getTextMarkupAnnotationMode","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","setTouchPoints","preventTouchEvent","getTime","handleTaps","contextMenuObj","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","difference","speed","abs","viewerContainerOnPointerEnd","viewerContainerOnScroll","scrollposX","scrollposY","ratio","scrollHeight","containerValue","verticalScrollValue","getPageHeight","getPageTop","fitType","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","TextLayer","initializeComponent","toolbarDiv","createMobilePageNumberContainer","tabIndex","touchAction","setMaximumHeight","intializeToolbar","mobilecurrentPageContainer","mobilenumberContainer","mobiletotalPageContainer","mobileSpanContainer","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","innerHTML","zIndex","mobileScrollContainerDown","mobileScrollContainerEnd","initiatePageRender","documentData","password","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","minHeight","goToPagePopup","removeEventListener","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","responseType","send","onreadystatechange","readyState","currentTarget","response","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","initPageDiv","isAutoZoom","isInitialLoading","createRequestForRender","pageTop","viewerHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","unload","updateWaitingPopup","pageCurrentRect","firstChild","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","request_1","forEach","getScrollParent","scrollNodeX","scrollNodeY","userAgent","appVersion","scrollTo","nodeName","overflowY","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","closeCorruptPopup","beforeClose","goToPageElement","inputContainer","goToPageInput","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","NumericTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","getElementsByClassName","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","passwordCancelClick","applyPassword","isInteraction","fitToAuto","fitToWidth","applyLeftPosition","initiatePanning","modifyTextCursor","disableTextSelectionMode","enableAnnotationAddTools","enableTextSelectionMode","onSingleTap","onDoubleTap","moreDropDown","dropDown","getSelectTextMarkupCurrentPage","magnification","onDoubleTapMagnification","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","pageCanvas","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","imageData","matrix_1","image_1","Image","onload","devicePixelRatio","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","renderTextContent","linkAnnotationModule","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","rotation","addTextLayer","renderTextContents","resizeTextContents","orderPageDivElements","renderPageCanvas","nextElement","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","URL","createObjectURL","anchorElement","href","documentElement","location","padCharacter","replace","textMarkupAnnotationCollection","createBlobUrl","info","msSaveOrOpenBlob","getStoredData","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","blobObj","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","Blob","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","isAnnotationButtonsEnabled","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","whiteSpace","setStyleToTextDiv","Bottom","setTextElementProperties","font","fontSize","fontFamily","contextWidth","measureText","scale","applyTextRotation","Rotation","resizeExcessDiv","textRotation","scaleString","transform","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","startId","endId","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","compareDocumentPosition","backward","Node","DOCUMENT_POSITION_PRECEDING","previousZoomFactor","textSearch","copyContextMenu","iconCss","Context","contextMenuOnBeforeOpen","select","onMenuItemSelect","created","contextMenuOnCreated","animationSettings","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","isTapToFitZoom","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","zoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","calculateScrollValues","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","annotationLayers","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","isThumbnailElementBottomAfterViewTop","thumbnailViewChildrenElement","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","isUndoRedoBtnsVisible","isAnnotationEditBtnVisible","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","handleToolbarButtonClick","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","enteredValue","navigationModule","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","AnnotationToolbar","initializeAnnotationToolbar","showNavigationToolbar","enableNavigationToolbar","navigationToolbar","navigationToolbarSplitter","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","showUndoRedoTool","showAnnotationEditTool","applyHideToToolbar","showSeparator","enableToolbarItem","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableUndoRedoTool","enableAnnotationEditTool","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","undoItem","redoItem","resetToolbar","moreOptionItem","deSelectItem","updateInteractionItems","enableAnnotation","annotationToolbarSettings","annotationToolbarItem","enableCollectionAvailable","disableUndoRedoButtons","collection","unWireEvent","fileInputElement","controlWidth","createToolbarItemsForMobile","tool","clicked","createToolbarItems","createZoomDropdown","createNumericTextBox","refreshOverflow","afterToolbarCreation","currentPageInputTemplate","createCurrentPageInputTemplate","totalPageTemplate","createTotalPageTemplate","zoomDropDownTemplateString","createZoomDropdownElement","align","itemsContainer","addClassToolbarItem","createTooltip","addPropertiesToolItemContainer","minWidth","createToolbarItem","outerHTML","ComboBox","dataSource","fields","popupHeight","showClearButton","createMoreOption","DropDownButton","dropdownButtonPosition","beforeItemRender","bookmarks","elementName","toolbarItem","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","endIndex","isHide","hideItem","printModule","print","updateInteractionTools","initiateAnnotationMode","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","interactionMode","selectItem","showSearchBox","searchInputElement","DisableInteractionTools","isTextSelect","toolbarItems","toolbarSettingsItems","toolbarBorderHeight","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","primaryToolbar","onToolbarClicked","createDropDowns","applyAnnotationToolbarSettings","createMobileToolbarItems","deleteItem","colorTemplate","getTemplate","opacityTemplate","page","colorPalette","createColorPicker","colorDropDown","createDropDownButton","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","changed","opacityDropDownOpen","toggle","refresh","setProperties","updateOpacityIndicator","iconClass","dropDownButton","inputElement","colorPicker","inline","mode","enableOpacity","onColorPickerChange","showButtons","currentValue","hex","borderBottomColor","opacityIndicator","outerContainer","sliderElement","Slider","highlightItem","underlineItem","strikethroughItem","closeItem","handleHighlight","handleUnderline","handleStrikethrough","toolBarInitialStatus","adjustViewer","enablePropertiesTool","deselectAllItems","showHighlightTool","showUnderlineTool","showStrikethroughTool","showColorEditTool","showOpacityEditTool","showAnnotationDeleteTool","isAdjust","getToolbarHeight","updateViewerHeight","getElementHeight","resetViewerHeight","getHeight","updateContentContainerHeight","sideBarClientRect","isButtonsEnabled","__extends","extendStatics","d","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","AnnotationToolbarSettings","ServerActionSettings","StrikethroughSettings","UnderlineSettings","HighlightSettings","PdfViewer","options","defaultLocale","Cancel","Download file","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","Apply","GoToPage","No matches","No Text Found","Undo","Redo","Highlight","Underline","Strikethrough","Delete","Color edit","Opacity edit","Highlight context","Underline context","Strikethrough context","Server error","Open text","First text","Previous text","Next text","Last text","Zoom in text","Zoom out text","Selection text","Pan text","Print text","Search text","Annotation Edit text","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","enablePrint","enableDownload","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","annotationId","annotationType","annotationBound","annotationSettings","isColorChanged","isOpacityChanged","Event","NotifyPropertyChanges","Component","BookmarkView","bookmarkClick","bookid","Id","navigateToBookmark","nodeClick","setHeight","Number","nodeData","bookMark","bookmarksDestination","bookMarkDestination","BookmarksDestination","isBookmarkViewDiv","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","paddingRight","paddingLeft","treeObj","TreeView","child","hasChildren","nodeTemplate","nodeSelected","evt","ListView","showHeader","fullRowSelect","querySelector","closest","nextElementSibling","PageIndex","goToBookmark","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","contextMenuHeight","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","yTouch","getNodeElement","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","selectNodeContents","currentPosition","endPosition","rangeBounds","addRange","extend","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","getNodeElementFromNode","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","selectionBounds","getSelectionBounds","getRangeAt","selectionRectBounds","getSelectionRectangleBounds","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","selectionBound","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","newRange","getTextId","lastIndexOf","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","calculateContextMenuPosition","contextTop","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","clearAllOccurrences","searchKeypressHandler","enableNextButton","enablePrevButton","updateSearchInputIcon","searchClickHandler","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","secondaryToolbar","onTextSearchClose","initSearch","highlightOthers","searchElement","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","targetScrollElement","getScrollElement","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","applyTextSelection","iconSpan","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printImage","responseText","annotationSource","textMarkupAnnotation","printCanvas","pageImage","annotationImage","translate","rotate","PI","printWindowOpen","browserUserAgent","write","canvasUrl","index.PdfViewer","Inject","index.LinkAnnotation","index.BookmarkView","index.Magnification","index.ThumbnailView","index.Toolbar","index.Navigation","index.Print","index.TextSelection","index.TextSearch","index.Annotation"],"mappings":"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"}