!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-navigations"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-notifications"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-dropdowns"),require("@syncfusion/ej2-splitbuttons"),require("@syncfusion/ej2-lists"),require("@syncfusion/ej2-buttons")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-navigations","@syncfusion/ej2-popups","@syncfusion/ej2-notifications","@syncfusion/ej2-inputs","@syncfusion/ej2-dropdowns","@syncfusion/ej2-splitbuttons","@syncfusion/ej2-lists","@syncfusion/ej2-buttons"],t):t(e.ej={},e.ej2Base,e.ej2Navigations,e.ej2Popups,e.ej2Notifications,e.ej2Inputs,e.ej2Dropdowns,e.ej2Splitbuttons,e.ej2Lists,e.ej2Buttons)}(this,function(e,t,i,o,n,r,s,a,l,h){"use strict";var p=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderHyperlinkContent=function(e,t){if(this.pdfViewer.enableHyperlink){var i=e.hyperlinks,o=e.hyperlinkBounds,n=e.linkAnnotation,r=e.linkPage,s=e.annotationLocation;i.length>0&&o.length>0&&this.renderWebLink(i,o,t),n.length>0&&r.length>0&&this.renderDocumentLink(n,r,s,t)}},e.prototype.renderWebLink=function(e,i,o){for(var n=this,r=function(r){var a=t.createElement("a",{id:"weblinkdiv_"+r}),l=i[r];(a=s.setHyperlinkProperties(a,l)).title=e[r],a.setAttribute("href",e[r]),"CurrentTab"===s.pdfViewer.hyperlinkOpenState?(a.target="_self",a.onclick=function(){n.pdfViewer.fireHyperlinkClick(e[r])}):"NewTab"===s.pdfViewer.hyperlinkOpenState?(a.target="_blank",a.onclick=function(){n.pdfViewer.fireHyperlinkClick(e[r])}):"NewWindow"===s.pdfViewer.hyperlinkOpenState&&(a.onclick=function(){return n.pdfViewer.fireHyperlinkClick(e[r]),window.open(e[r],"_blank","scrollbars=yes,resizable=yes"),!1});document.getElementById(s.pdfViewer.element.id+"_pageDiv_"+o).appendChild(a)},s=this,a=0;a<e.length;a++)r(a)},e.prototype.renderDocumentLink=function(e,i,o,n){for(var r=this,s=function(s){var l=t.createElement("a",{id:"linkdiv_"+s}),h=e[s];if((l=a.setHyperlinkProperties(l,h)).setAttribute("href",""),void 0!==i[s]&&i[s]>0){var p=a.pdfViewerBase.pageSize[n].height,d=void 0,c=void 0;0!==o.length?(d=o[s],c=a.pdfViewerBase.pageSize[i[s]].top*a.pdfViewerBase.getZoomFactor()+(p-d)*a.pdfViewerBase.getZoomFactor()):c=a.pdfViewerBase.pageSize[i[s]].top*a.pdfViewerBase.getZoomFactor(),void 0!==c&&(l.name=c.toString(),l.onclick=function(){return r.pdfViewerBase.viewerContainer.scrollTop=parseInt(l.name),!1})}document.getElementById(a.pdfViewer.element.id+"_pageDiv_"+n).appendChild(l)},a=this,l=0;l<e.length;l++)s(l)},e.prototype.setHyperlinkProperties=function(e,t){return e.className="e-pv-hyperlink",e.style.background="transparent",e.style.position="absolute",e.style.left=t.Left*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=t.Top*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t.Width*this.pdfViewerBase.getZoomFactor()+"px",t.Height<0?(e.style.height=-t.Height*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(t.Top+t.Height)*this.pdfViewerBase.getZoomFactor()+"px"):e.style.height=(t.Height<0?-t.Height:t.Height)*this.pdfViewerBase.getZoomFactor()+"px",e.style.color="transparent",e},e.prototype.modifyZindexForTextSelection=function(e,t){if(this.pdfViewerBase.pageCount>0)for(var i=this.pdfViewerBase.getElement("_pageDiv_"+e).childNodes,o=0;o<i.length;o++){var n=i[o];"A"===n.tagName&&(t?n.classList.add("e-pv-onselection"):n.classList.remove("e-pv-onselection"))}},e.prototype.modifyZindexForHyperlink=function(e,t){t?e.classList.add("e-pv-onselection"):e.classList.remove("e-pv-onselection")},e.prototype.destroy=function(){for(var e=0;e<this.pdfViewerBase.pageCount-1;e++){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var o=i.length-1;o>=0;o--)i[o].parentNode.removeChild(i[o])}}},e.prototype.getModuleName=function(){return"LinkAnnotation"},e}(),d=function(){function e(e,t){var i=this;this.thumbnailWidthMin=200,this.contentContainerScrollWidth=33,this.closeButtonLeft=170,this.isBookmarkOpen=!1,this.isThumbnailOpen=!1,this.isTooltipCreated=!1,this.isNavigationToolbarVisible=!1,this.isBookmarkListOpen=!1,this.isNavigationPaneResized=!1,this.resizeIconMouseOver=function(e){e.srcElement.style.cursor="default"},this.resizePanelMouseDown=function(e){var t=i;t.offset=[t.sideBarResizer.offsetLeft-e.clientX,t.sideBarResizer.offsetTop-e.clientY,t.sideBarResizer.offsetParent.clientWidth],i.previousX=e.clientX,t.isDown=!0,t.isNavigationPaneResized=!0,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.sideBarContentContainer&&(t.sideBarContentContainer.style.cursor="e-resize")},this.resizeViewerMouseLeave=function(e){var t=i;t.isDown=!1,t.isNavigationPaneResized&&t.sideBarContentContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.sideBarContentContainer.style.cursor="default",t.isNavigationPaneResized=!1)},this.resizePanelMouseMove=function(e){var t=i;if(e.preventDefault(),t.isDown&&i.sideBarContentContainer){if(i.pdfViewer.enableRtl){(o=i.previousX-e.clientX+t.offset[2])>(n=Math.floor(i.outerContainerWidth/2))&&(o=n),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.right=o+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.right=t.getViewerContainerLeft()+"px"}else{var o,n;(o=e.clientX+t.offset[0])>(n=Math.floor(i.outerContainerWidth/2))&&(o=n),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.left=o+"px",t.closeDiv.style.left=o-t.contentContainerScrollWidth+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerLeft()+"px"}var r=t.pdfViewer.element.clientWidth-t.getViewerContainerLeft();t.pdfViewerBase.viewerContainer.style.width=r+"px",t.pdfViewerBase.pageContainer.style.width=t.pdfViewerBase.viewerContainer.clientWidth+"px",t.pdfViewer.thumbnailViewModule.gotoThumbnailImage(t.pdfViewerBase.currentPageNumber-1),t.pdfViewerBase.updateZoomValue(),t.bookmarkButton.children[0].classList.contains("e-pv-bookmark-disable-icon")||t.pdfViewer.bookmarkViewModule.setBookmarkContentHeight()}},this.sideToolbarOnClose=function(e){var t=i;t.removeThumbnailSelectionIconTheme(),t.removeBookmarkSelectionIconTheme(),t.updateViewerContainerOnClose()},this.sideToolbarOnClick=function(e){i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Page Thumbnails");var t=i,o=document.getElementById(i.pdfViewer.element.id+"_bookmark_view");o&&(t.removeBookmarkSelectionIconTheme(),o.style.display="none"),document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="flex",t.sideBarContentContainer&&("none"!==t.sideBarContentContainer.style.display?t.isBookmarkOpen?(t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand()):(t.isThumbnailOpen=!1,t.removeThumbnailSelectionIconTheme(),i.updateViewerContainerOnClose()):(t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand())),t.isBookmarkOpen=!1},this.bookmarkButtonOnClick=function(e){var t=i;document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="none",i.removeThumbnailSelectionIconTheme(),i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Bookmarks"),i.pdfViewer.bookmarkViewModule.renderBookmarkcontent(),i.sideBarContentContainer&&("none"!==t.sideBarContentContainer.style.display?i.isThumbnailOpen?(i.setBookmarkSelectionIconTheme(),i.isBookmarkOpen=!0,i.updateViewerContainerOnExpand()):(i.removeBookmarkSelectionIconTheme(),i.isBookmarkOpen=!1,i.updateViewerContainerOnClose()):(i.setBookmarkSelectionIconTheme(),i.isBookmarkOpen=!0,i.updateViewerContainerOnExpand())),i.isThumbnailOpen=!1},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.initializeNavigationPane=function(){t.Browser.isDevice||this.createNavigationPane()},e.prototype.createNavigationPane=function(){this.sideBarToolbar=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarToolbar",className:"e-pv-sidebar-toolbar"}),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar),this.pdfViewer.enableRtl&&(this.sideBarToolbar.style.cssFloat="right",this.sideBarToolbar.style.right="1px",this.sideBarToolbar.style.position="relative");var e=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarToolbarSplitter",className:"e-pv-sidebar-toolbar-splitter"});this.pdfViewerBase.mainContainer.appendChild(e),this.pdfViewer.enableRtl?e.classList.add("e-right"):e.classList.add("e-left"),this.sideBarContentContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarContentContainer",className:"e-pv-sidebar-content-container"}),this.pdfViewer.enableRtl?this.sideBarContentContainer.classList.add("e-right"):this.sideBarContentContainer.classList.add("e-left"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer),this.sideBarContentSplitter=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarContentSplitter",className:"e-pv-sidebar-content-splitter"}),this.pdfViewer.enableRtl&&(this.sideBarContentSplitter.style.right="0px"),this.sideBarContentContainer.appendChild(this.sideBarContentSplitter),this.sideBarContent=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarContent",className:"e-pv-sidebar-content"}),this.pdfViewer.enableRtl&&(this.sideBarContent.style.right="0px",this.sideBarContent.style.direction="rtl"),this.sideBarContentContainer.appendChild(this.sideBarContent),this.sideBarTitleContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarTitleContainer",className:"e-pv-sidebar-title-container"}),this.pdfViewer.enableRtl&&(this.sideBarTitleContainer.style.right="0px"),this.sideBarTitle=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarTitle",className:"e-pv-sidebar-title"}),this.pdfViewer.enableRtl?this.sideBarTitle.classList.add("e-right"):this.sideBarTitle.classList.add("e-left"),this.sideBarTitleContainer.appendChild(this.sideBarTitle),this.sideBarContentContainer.appendChild(this.sideBarTitleContainer),this.sideBarResizer=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarResizer",className:"e-pv-sidebar-resizer"}),this.sideBarResizer.addEventListener("mousedown",this.resizePanelMouseDown),this.pdfViewerBase.mainContainer.addEventListener("mousemove",this.resizePanelMouseMove),this.pdfViewerBase.mainContainer.addEventListener("mouseup",this.resizeViewerMouseLeave),this.pdfViewer.enableRtl?this.sideBarResizer.classList.add("e-right"):this.sideBarResizer.classList.add("e-left"),this.sideBarContentContainer.appendChild(this.sideBarResizer);var i=this.getViewerContainerLeft();this.pdfViewer.enableRtl||(this.pdfViewerBase.viewerContainer.style.left=i+"px"),this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-i+"px",this.sideBarContentContainer.style.display="none",this.createSidebarToolBar(),this.createSidebarTitleCloseButton(),this.createResizeIcon(),this.sideBarToolbar.addEventListener("mouseup",this.sideToolbarOnMouseup.bind(this)),this.sideBarContentContainer.addEventListener("mouseup",this.sideBarTitleOnMouseup.bind(this))},e.prototype.createNavigationPaneMobile=function(e){var o=this;this.isNavigationToolbarVisible=!0,this.toolbarElement=t.createElement("div",{id:this.pdfViewer.element.id+"_navigationToolbar",className:"e-pv-nav-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer);var n;if("search"===e){var r='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.element.id+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant("Find in document")+'" id="'+this.pdfViewer.element.id+'_search_input"></input></div>';n=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{template:r},{prefixIcon:"e-pv-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_search_box-icon",click:function(){var e=o.pdfViewerBase.getElement("_search_box-icon").firstElementChild;e.classList.contains("e-pv-search-close")&&o.enableSearchItems(!1),o.pdfViewer.textSearchModule.searchButtonClick(e,o.searchInput)}},{prefixIcon:"e-pv-prev-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_prev_occurrence",click:function(e){o.pdfViewer.textSearchModule.searchPrevious()}},{prefixIcon:"e-pv-next-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_next_occurrence",click:function(e){o.pdfViewer.textSearchModule.searchNext()}}]}else n=[{prefixIcon:"e-pv-backward-icon e-pv-icon",id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant("Bookmarks")}];this.toolbar=new i.Toolbar({items:n,width:"",height:"",overflowMode:"Popup"}),this.toolbar.appendTo(this.toolbarElement),"search"===e?this.initiateSearchBox():this.initiateBookmarks()},e.prototype.initiateSearchBox=function(){var e=this;this.searchInput=this.pdfViewerBase.getElement("_search_input"),this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").firstElementChild,this.searchInput.addEventListener("keyup",function(t){e.enableSearchItems(!0);e.searchInput.value;13===t.which?e.initiateTextSearch():e.pdfViewer.textSearchModule.resetVariables()}),this.pdfViewer.textSearchModule.searchInput=this.searchInput,this.setSearchInputWidth(),this.enableSearchItems(!1),this.searchInput.focus()},e.prototype.enableSearchItems=function(e){this.toolbar.enableItems(this.pdfViewerBase.getElement("_prev_occurrence").parentElement,e),this.toolbar.enableItems(this.pdfViewerBase.getElement("_next_occurrence").parentElement,e)},e.prototype.initiateBookmarks=function(){t.Browser.isDevice&&(this.pdfViewerBase.mobileScrollerContainer.style.display="none");var e=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmarks_container",className:"e-pv-bookmark-container"});e.style.width="100%",e.style.height=this.pdfViewerBase.viewerContainer.style.height,this.pdfViewerBase.getElement("_viewerMainContainer").appendChild(e),this.pdfViewerBase.viewerContainer.style.display="none",this.isBookmarkListOpen=!0,this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile()},e.prototype.initiateTextSearch=function(){var e=this.searchInput.value;this.pdfViewer.textSearchModule.initiateSearch(e)},e.prototype.goBackToToolbar=function(){if(this.isNavigationToolbarVisible=!1,this.pdfViewer.textSearchModule.cancelTextSearch(),this.searchInput=null,0!==this.pdfViewer.bookmarkViewModule.childNavigateCount)this.pdfViewer.bookmarkViewModule.bookmarkList.back(),this.pdfViewer.bookmarkViewModule.childNavigateCount--;else{this.toolbar.destroy(),this.toolbar=null;var e=this.pdfViewerBase.getElement("_bookmarks_container");e&&(e.parentElement.removeChild(e),t.Browser.isDevice&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")),this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.pdfViewerBase.viewerContainer.style.display="block",this.isBookmarkListOpen=!1,this.pdfViewer.toolbarModule.showToolbar(!0),this.pdfViewerBase.onWindowResize()}},e.prototype.setSearchInputWidth=function(){var e=this.searchInput.parentElement,t=window.getComputedStyle(e.parentElement,null).getPropertyValue("padding-left"),i=this.toolbarElement.clientWidth-this.getParentElementSearchBox("_backward").clientWidth-this.getParentElementSearchBox("_search_box-icon").clientWidth-this.getParentElementSearchBox("_prev_occurrence").clientWidth-this.getParentElementSearchBox("_next_occurrence").clientWidth-6;""!==t&&(i-=2*parseFloat(t)),e.style.width=i+"px"},e.prototype.getParentElementSearchBox=function(e){return this.pdfViewerBase.getElement(e).parentElement},e.prototype.createTooltipMobile=function(e){if(this.isTooltipCreated){if(this.toastObject){this.toastObject.title=e;(s=this.pdfViewerBase.getElement("_container_tooltip").firstElementChild)&&(s.style.width="auto",s.firstElementChild.firstElementChild.textContent=e)}}else{var i=t.createElement("div",{className:"e-pv-container-tooltip",id:this.pdfViewer.element.id+"_container_tooltip"});this.pdfViewer.element.appendChild(i),this.toastObject=new n.Toast({title:e,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:"FadeOut"}}}),this.toastObject.appendTo(i);var o=.65*this.pdfViewer.element.clientHeight,r=(this.pdfViewer.element.clientWidth-i.clientWidth)/2;this.isTooltipCreated=!0,this.toastObject.show({position:{X:r,Y:o}});var s;(s=i.firstElementChild)&&(s.style.width="auto")}},e.prototype.onTooltipClose=function(e){this.isTooltipCreated=!1;var t=this.pdfViewerBase.getElement("_container_tooltip");this.pdfViewer.textSearchModule.isMessagePopupOpened=!1,this.toastObject.destroy(),t.parentElement.removeChild(t),this.toastObject=null},e.prototype.toolbarResize=function(){this.searchInput&&(this.searchInput.style.width="auto",this.setSearchInputWidth())},e.prototype.createSidebarToolBar=function(){this.thumbnailButton=t.createElement("button",{id:this.pdfViewer.element.id+"_thumbnail-view",attrs:{disabled:"disabled"}}),this.thumbnailButton.className="e-pv-tbar-btn e-pv-thumbnail-view-button e-btn";var e=t.createElement("span",{id:this.pdfViewer.element.id+"_thumbnail-view_icon",className:"e-pv-thumbnail-view-disable-icon e-pv-icon"});this.thumbnailButton.appendChild(e);new o.Tooltip({content:this.pdfViewer.localeObj.getConstant("Page Thumbnails"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.thumbnailButton),this.bookmarkButton=t.createElement("button",{id:this.pdfViewer.element.id+"_bookmark",attrs:{disabled:"disabled"}}),this.bookmarkButton.className="e-pv-tbar-btn e-pv-bookmark-button e-btn";var i=t.createElement("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-disable-icon e-pv-icon"});this.bookmarkButton.appendChild(i);new o.Tooltip({content:this.pdfViewer.localeObj.getConstant("Bookmarks"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.bookmarkButton),this.sideBarToolbar.appendChild(this.thumbnailButton),this.sideBarToolbar.appendChild(this.bookmarkButton),this.thumbnailButton.addEventListener("click",this.sideToolbarOnClick),this.bookmarkButton.addEventListener("click",this.bookmarkButtonOnClick)},e.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},e.prototype.enableThumbnailButton=function(){this.thumbnailButton&&(this.thumbnailButton.removeAttribute("disabled"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-disable-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"))},e.prototype.enableBookmarkButton=function(){this.bookmarkButton&&(this.bookmarkButton.removeAttribute("disabled"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-disable-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"))},e.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=t.createElement("button",{id:this.pdfViewer.element.id+"_close_btn"}),this.closeDiv.className="e-btn e-pv-tbar-btn e-pv-title-close-div e-btn",this.pdfViewer.enableRtl?this.closeDiv.style.left="8px":this.closeDiv.style.left=this.closeButtonLeft+"px";var e=t.createElement("span",{id:this.pdfViewer.element.id+"_close_icon",className:"e-pv-title-close-icon e-pv-icon"});this.closeDiv.appendChild(e),this.sideBarTitleContainer.appendChild(this.closeDiv),this.closeDiv.addEventListener("click",this.sideToolbarOnClose)},e.prototype.createResizeIcon=function(){var e=t.createElement("div",{id:this.pdfViewer.element.id+"_resize",className:"e-pv-resize-icon e-pv-icon"});e.style.top=this.sideBarToolbar.clientHeight/2+"px",e.style.position="absolute",e.addEventListener("click",this.sideToolbarOnClose),e.addEventListener("mouseover",this.resizeIconMouseOver),this.sideBarResizer.appendChild(e)},Object.defineProperty(e.prototype,"outerContainerWidth",{get:function(){return this.mainContainerWidth||(this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth),this.mainContainerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideToolbarWidth",{get:function(){return this.sideBarToolbar?this.sideBarToolbar.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideBarContentContainerWidth",{get:function(){return this.sideBarContentContainer?this.sideBarContentContainer.clientWidth:0},enumerable:!0,configurable:!0}),e.prototype.updateViewerContainerOnClose=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.right=this.sideToolbarWidth+"px":this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.updateZoomValue())},e.prototype.updateViewerContainerOnExpand=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="block",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.right=this.getViewerContainerLeft()+"px":this.pdfViewerBase.viewerContainer.style.left=this.getViewerContainerLeft()+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.getViewerContainerLeft()+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.updateZoomValue(),this.pdfViewer.thumbnailViewModule.gotoThumbnailImage(this.pdfViewerBase.currentPageNumber-1))},e.prototype.getViewerContainerLeft=function(){return this.sideToolbarWidth+this.sideBarContentContainerWidth},e.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth},e.prototype.setThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.add("e-pv-thumbnail-view-button-selection"))},e.prototype.removeThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.remove("e-pv-thumbnail-view-button-selection"))},e.prototype.resetThumbnailIcon=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-disable-icon"))},e.prototype.resetThumbnailView=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.left="1px":this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.thumbnailButton.setAttribute("disabled","disabled"),this.removeThumbnailSelectionIconTheme(),this.resetThumbnailIcon())},e.prototype.setBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.add("e-pv-bookmark-button-selection"))},e.prototype.removeBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.remove("e-pv-bookmark-button-selection"))},e.prototype.sideToolbarOnMouseup=function(e){e.target===this.sideBarToolbar&&this.pdfViewerBase.focusViewerContainer()},e.prototype.sideBarTitleOnMouseup=function(e){this.pdfViewerBase.focusViewerContainer()},e.prototype.disableBookmarkButton=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.bookmarkButton.setAttribute("disabled","disabled"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-disable-icon"))},e.prototype.clear=function(){this.removeBookmarkSelectionIconTheme(),this.removeThumbnailSelectionIconTheme()},e.prototype.getModuleName=function(){return"NavigationPane"},e}(),c=function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,a)}l((o=o.apply(e,t||[])).next())})},u=function(e,t){function i(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var o,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},f=function(){function e(e){var i=this;this.pageSize=[],this.pageCount=0,this.currentPageNumber=0,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.pageLeft=5,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.touchClientX=0,this.touchClientY=0,this.previousTime=0,this.currentTime=0,this.isTouchScrolled=!1,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.scrollX=0,this.scrollY=0,this.ispageMoved=!1,this.isThumb=!1,this.isTapHidden=!1,this.singleTapTimer=null,this.tapCount=0,this.onWindowResize=function(){var e=i;i.pdfViewer.enableRtl?e.viewerContainer.style.right=(e.navigationPane.sideBarToolbar?e.navigationPane.getViewerContainerLeft():0)+"px":e.viewerContainer.style.left=(e.navigationPane.sideBarToolbar?e.navigationPane.getViewerContainerLeft():0)+"px";var o=e.pdfViewer.element.clientWidth-(e.navigationPane.sideBarToolbar?e.navigationPane.getViewerContainerLeft():0);if(e.viewerContainer.style.width=o+"px",e.pdfViewer.toolbarModule?e.viewerContainer.style.height=e.updatePageHeight(e.pdfViewer.element.getBoundingClientRect().height,56):e.viewerContainer.style.height=e.updatePageHeight(e.pdfViewer.element.getBoundingClientRect().height,0),e.pdfViewer.bookmarkViewModule&&t.Browser.isDevice){var n=e.getElement("_bookmarks_container");n&&(n.style.height=e.updatePageHeight(e.pdfViewer.element.getBoundingClientRect().height,0))}e.pageContainer.style.width=e.viewerContainer.clientWidth+"px",e.pdfViewer.toolbarModule&&e.pdfViewer.toolbarModule.onToolbarResize(e.navigationPane.sideBarToolbar?e.navigationPane.getViewerMainContainerWidth():e.pdfViewer.element.clientWidth),i.pdfViewer.enableToolbar&&i.pdfViewer.thumbnailViewModule&&e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.currentPageNumber-1),e.pdfViewer.textSearchModule&&!t.Browser.isDevice&&e.pdfViewer.textSearchModule.textSearchBoxOnResize(),e.navigationPane.isBookmarkListOpen||e.updateZoomValue(),t.Browser.isDevice&&(e.mobileScrollerContainer.style.left=o-parseFloat(e.mobileScrollerContainer.style.width)+"px",e.mobilePageNoContainer.style.left=o/2-parseFloat(e.mobilePageNoContainer.style.width)/2+"px",e.mobilePageNoContainer.style.top=e.pdfViewer.element.clientHeight/2+"px",e.updateMobileScrollerPosition())},this.viewerContainerOnMousedown=function(e){if(0===e.button){i.isViewerMouseDown=!0,1===e.detail&&i.focusViewerContainer(),i.scrollPosition=i.viewerContainer.scrollTop/i.getZoomFactor(),i.mouseX=e.clientX,i.mouseY=e.clientY;var t=!!document.documentMode;!i.pdfViewer.textSelectionModule||i.isClickedOnScrollBar(e)||i.isTextSelectionDisabled||(t||e.preventDefault(),i.pdfViewer.textSelectionModule.clearTextSelection())}i.isPanMode&&(i.dragX=e.pageX,i.dragY=e.pageY,i.viewerContainer.contains(e.target)&&e.target!==i.viewerContainer&&e.target!==i.pageContainer&&i.isPanMode&&(i.viewerContainer.style.cursor="grabbing"))},this.viewerContainerOnMouseup=function(e){if(i.isViewerMouseDown&&(i.scrollHoldTimer&&(clearTimeout(i.scrollHoldTimer),i.scrollHoldTimer=null),i.scrollPosition*i.getZoomFactor()!==i.viewerContainer.scrollTop&&i.pageViewScrollChanged(i.currentPageNumber)),0===e.button){var t=e.target;if(t.classList.contains("e-pv-page-canvas")){var o=t.id.split("_");i.pdfViewer.firePageClick(e.offsetX,e.offsetY,parseInt(o[o.length-1])+1)}i.viewerContainer.contains(e.target)&&e.target!==i.viewerContainer&&e.target!==i.pageContainer&&i.isPanMode&&(i.viewerContainer.style.cursor="move",i.viewerContainer.style.cursor="-webkit-grab",i.viewerContainer.style.cursor="-moz-grab",i.viewerContainer.style.cursor="grab")}i.isViewerMouseDown=!1},this.viewerContainerOnMouseWheel=function(e){i.isViewerMouseWheel=!0,i.getRerenderCanvasCreated()&&e.preventDefault(),i.pdfViewer.magnificationModule&&(i.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),e.ctrlKey&&e.preventDefault(),i.pdfViewer.magnificationModule.fitPageScrollMouseWheel(e)),i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&i.isViewerMouseDown&&(e.target.classList.contains("e-pv-text")||i.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(i.currentPageNumber-1))},this.viewerContainerOnKeyDown=function(e){var t=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),o=!!t&&e.metaKey;if(e.ctrlKey||o){if(e.shiftKey&&!t||t&&!e.shiftKey)switch(e.keyCode){case 38:case 33:e.preventDefault(),1!==i.currentPageNumber&&i.updateScrollTop(0);break;case 40:case 34:e.preventDefault(),i.currentPageNumber!==i.pageCount&&i.updateScrollTop(i.pageCount-1)}switch(e.keyCode){case 79:i.pdfViewer.toolbarModule&&i.pdfViewer.enableToolbar&&i.pdfViewer.toolbarModule.openFileDialogBox(e);break;case 67:i.pdfViewer.textSelectionModule&&i.pdfViewer.enableTextSelection&&!i.isTextSelectionDisabled&&(e.preventDefault(),i.pdfViewer.textSelectionModule.copyText());break;case 70:i.pdfViewer.textSearchModule&&i.pdfViewer.enableTextSearch&&(e.preventDefault(),i.pdfViewer.toolbarModule.textSearchButtonHandler())}}i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(e)},this.viewerContainerOnMousemove=function(e){i.mouseX=e.clientX,i.mouseY=e.clientY;var t=!!document.documentMode;if(i.isViewerMouseDown)if(i.pdfViewer.textSelectionModule&&i.pdfViewer.enableTextSelection&&!i.isTextSelectionDisabled)if(t){var o=window.getSelection();o.type||o.isCollapsed||null===o.anchorNode||(i.pdfViewer.textSelectionModule.isTextSelection=!0)}else e.preventDefault(),i.pdfViewer.textSelectionModule.textSelectionOnMouseMove(e.target,i.mouseX,i.mouseY);else e.preventDefault();i.isPanMode&&i.panOnMouseMove(e)},this.panOnMouseMove=function(e){if(i.viewerContainer.contains(e.target)&&e.target!==i.viewerContainer&&e.target!==i.pageContainer)if(i.isViewerMouseDown){var t=i.dragX-e.pageX,o=i.dragY-e.pageY;i.viewerContainer.scrollTop=i.viewerContainer.scrollTop+o,i.viewerContainer.scrollLeft=i.viewerContainer.scrollLeft+t,i.viewerContainer.style.cursor="move",i.viewerContainer.style.cursor="-webkit-grabbing",i.viewerContainer.style.cursor="-moz-grabbing",i.viewerContainer.style.cursor="grabbing",i.dragX=e.pageX,i.dragY=e.pageY}else i.navigationPane.isNavigationPaneResized||(i.viewerContainer.style.cursor="move",i.viewerContainer.style.cursor="-webkit-grab",i.viewerContainer.style.cursor="-moz-grab",i.viewerContainer.style.cursor="grab");else i.navigationPane.isNavigationPaneResized||(i.viewerContainer.style.cursor="auto")},this.viewerContainerOnMouseLeave=function(e){i.isViewerMouseDown&&i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&i.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(e)},this.viewerContainerOnMouseEnter=function(e){i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&i.pdfViewer.textSelectionModule.clear()},this.viewerContainerOnMouseOver=function(e){var t=!!document.documentMode;i.isViewerMouseDown&&(t||e.preventDefault())},this.viewerContainerOnClick=function(e){"dblclick"===e.type?i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&e.target.classList.contains("e-pv-text")&&(i.isViewerContainerDoubleClick=!0,i.pdfViewer.textSelectionModule.selectAWord(e.target,e.clientX,e.clientY,!1),i.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),i.dblClickTimer=setTimeout(function(){i.applySelection()},100)):3===e.detail&&(i.isViewerContainerDoubleClick&&(clearTimeout(i.dblClickTimer),i.isViewerContainerDoubleClick=!1),i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&(i.pdfViewer.textSelectionModule.selectEntireLine(e),i.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),i.applySelection()))},this.viewerContainerOnDragStart=function(e){!!document.documentMode||e.preventDefault()},this.viewerContainerOnContextMenuClick=function(e){i.isViewerMouseDown=!1},this.onWindowMouseUp=function(e){return 0===e.button?i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&(1!==e.detail||i.viewerContainer.contains(e.target)||i.contextMenuModule.contextMenuElement.contains(e.target)||null!==window.getSelection().anchorNode&&i.pdfViewer.textSelectionModule.textSelectionOnMouseup(),i.viewerContainer.contains(e.target)&&(i.isClickedOnScrollBar(e)||i.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&i.pdfViewer.textSelectionModule.applySpanForSelection():i.pdfViewer.textSelectionModule.textSelectionOnMouseup())):2===e.button&&i.viewerContainer.contains(e.target)&&window.getSelection().removeAllRanges(),!i.isViewerMouseDown||(i.isViewerMouseDown=!1,i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&(i.pdfViewer.textSelectionModule.clear(),i.pdfViewer.textSelectionModule.selectionStartPage=null),e.preventDefault(),e.stopPropagation(),!1)},this.onWindowTouchEnd=function(e){i.pdfViewer.element.contains(e.target)||i.contextMenuModule.contextMenuElement.contains(e.target)||i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&i.pdfViewer.textSelectionModule.clearTextSelection()},this.viewerContainerOnTouchStart=function(e){var o=e.touches;i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.setTouchPoints(o[0].clientX,o[0].clientY),1!==o.length||e.target.classList.contains("e-pv-hyperlink")||i.preventTouchEvent(e),i.touchClientX=o[0].clientX,i.touchClientY=o[0].clientY,i.scrollY=o[0].clientY,i.previousTime=(new Date).getTime(),1!==o.length||e.target.classList.contains("e-pv-touch-select-drop")||e.target.classList.contains("e-pv-touch-ellipse")||(t.Browser.isDevice&&i.pageCount>0&&!i.isThumb&&!e.target.classList.contains("e-pv-hyperlink")&&i.handleTaps(o),i.pdfViewer.textSelectionModule&&!i.isTextSelectionDisabled&&(i.pdfViewer.textSelectionModule.clearTextSelection(),i.contextMenuModule.contextMenuObj.close(),i.isLongTouchPropagated||(i.longTouchTimer=setTimeout(function(){i.viewerContainerOnLongTouch(e)},1e3)),i.isLongTouchPropagated=!0))},this.viewerContainerOnLongTouch=function(e){i.touchClientX=e.touches[0].clientX,i.touchClientY=e.touches[0].clientY,e.preventDefault(),i.pdfViewer.textSelectionModule&&i.pdfViewer.textSelectionModule.initiateTouchSelection(e,i.touchClientX,i.touchClientY)},this.viewerContainerOnPointerDown=function(e){"touch"===e.pointerType&&(i.pointerCount++,i.pointerCount<=2&&(e.preventDefault(),i.pointersForTouch.push(e),2===i.pointerCount&&(i.pointerCount=0),i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.setTouchPoints(e.clientX,e.clientY)))},this.viewerContainerOnTouchMove=function(e){t.Browser.isDevice&&(clearTimeout(i.singleTapTimer),i.tapCount=0),i.preventTouchEvent(e);var o=e.touches;i.pdfViewer.magnificationModule&&(i.isTouchScrolled=!0,o.length>1&&i.pageCount>0?(t.Browser.isDevice&&(i.isTouchScrolled=!1,i.mobileScrollerContainer.style.display="none"),i.pdfViewer.magnificationModule.initiatePinchMove(o[0].clientX,o[0].clientY,o[1].clientX,o[1].clientY)):1===o.length&&i.getPagesPinchZoomed()&&(t.Browser.isDevice&&(i.isTouchScrolled=!1,i.mobileScrollerContainer.style.display="none"),i.pdfViewer.magnificationModule.pinchMoveScroll())),o=null},this.viewerContainerOnPointerMove=function(e){if("touch"===e.pointerType&&i.pageCount>0&&(e.preventDefault(),2===i.pointersForTouch.length)){for(var t=0;t<i.pointersForTouch.length;t++)if(e.pointerId===i.pointersForTouch[t].pointerId){i.pointersForTouch[t]=e;break}i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.initiatePinchMove(i.pointersForTouch[0].clientX,i.pointersForTouch[0].clientY,i.pointersForTouch[1].clientX,i.pointersForTouch[1].clientY)}},this.viewerContainerOnTouchEnd=function(e){if(i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.pinchMoveEnd(),i.isLongTouchPropagated=!1,clearInterval(i.longTouchTimer),i.longTouchTimer=null,t.Browser.isDevice&&i.isTouchScrolled){i.currentTime=(new Date).getTime();var o=i.currentTime-i.previousTime,n=i.scrollY-e.changedTouches[0].pageY,r=n/o;if(Math.abs(r)>1.5){var s=n+o*r;i.viewerContainer.scrollTop+=s,i.updateMobileScrollerPosition()}}},this.viewerContainerOnPointerEnd=function(e){"touch"===e.pointerType&&(e.preventDefault(),i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.pinchMoveEnd(),i.pointersForTouch=[],i.pointerCount=0)},this.viewerContainerOnScroll=function(e){var o=i,n=0,r=0;if(e.touches&&t.Browser.isDevice){var s=(i.viewerContainer.scrollHeight-i.viewerContainer.clientHeight)/(i.viewerContainer.clientHeight-i.toolbarHeight);if(i.isThumb){i.ispageMoved=!0,i.mobilePageNoContainer.style.display="block",n=e.touches[0].pageX-i.scrollX,r=e.touches[0].pageY-i.viewerContainer.offsetTop,i.viewerContainer.scrollTop=r*s;var a=e.touches[0].pageY;0!==i.viewerContainer.scrollTop&&a<=i.viewerContainer.clientHeight&&(i.mobileScrollerContainer.style.top=a+"px")}else i.mobilePageNoContainer.style.display="none",r=i.touchClientY-e.touches[0].pageY,n=i.touchClientX-e.touches[0].pageX,i.viewerContainer.scrollTop=i.viewerContainer.scrollTop+r,i.viewerContainer.scrollLeft=i.viewerContainer.scrollLeft+n,i.updateMobileScrollerPosition(),i.touchClientY=e.touches[0].pageY,i.touchClientX=e.touches[0].pageX}i.scrollHoldTimer&&clearTimeout(i.scrollHoldTimer);var l=i.currentPageNumber;i.scrollHoldTimer=null,i.contextMenuModule.contextMenuObj.close();for(var h=i.viewerContainer.scrollTop,p=0;p<i.pageCount;p++)if(null!=i.pageSize[p]){var d=i.getPageHeight(p);if(h+i.pageStopValue<=i.getPageTop(p)+d){i.currentPageNumber=p+1;break}}i.renderElementsVirtualScroll(i.currentPageNumber),(i.isViewerMouseDown||i.getPinchZoomed()||i.getPinchScrolled()||i.getPagesPinchZoomed())&&!i.isViewerMouseWheel?i.showPageLoadingIndicator(i.currentPageNumber-1,!1):(i.pageViewScrollChanged(i.currentPageNumber),i.isViewerMouseWheel=!1),i.pdfViewer.toolbarModule&&(i.pdfViewer.toolbarModule.updateCurrentPage(i.currentPageNumber),t.Browser.isDevice||i.pdfViewer.toolbarModule.updateNavigationButtons()),l!==i.currentPageNumber&&(o.pdfViewer.thumbnailViewModule&&!t.Browser.isDevice&&(o.pdfViewer.thumbnailViewModule.gotoThumbnailImage(o.currentPageNumber-1),o.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),i.pdfViewer.firePageChange(l)),i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.updatePagesForFitPage(i.currentPageNumber-1);var c=i.getElement("_pageDiv_"+(i.currentPageNumber-1));c&&(c.style.visibility="visible"),i.isViewerMouseDown&&(i.getRerenderCanvasCreated()&&i.pdfViewer.magnificationModule.clearIntervalTimer(),i.scrollHoldTimer=setTimeout(function(){i.initiatePageViewScrollChanged()},100))},this.pdfViewer=e,this.navigationPane=new d(this.pdfViewer,this),this.textLayer=new m(this.pdfViewer,this)}return e.prototype.initializeComponent=function(){var e=document.getElementById(this.pdfViewer.element.id);if(e){t.Browser.isDevice&&this.pdfViewer.element.classList.add("e-pv-mobile-view");var i=void 0;this.viewerMainContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_viewerMainContainer",className:"e-pv-viewer-main-container"}),this.viewerContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_viewerContainer",className:"e-pv-viewer-container"}),t.Browser.isDevice&&this.createMobilePageNumberContainer(),this.viewerContainer.tabIndex=0,this.pdfViewer.enableRtl&&(this.viewerContainer.style.direction="rtl"),e.style.touchAction="pan-x pan-y",this.setMaximumHeight(e),this.mainContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_mainContainer",className:"e-pv-main-container"}),this.mainContainer.appendChild(this.viewerMainContainer),e.appendChild(this.mainContainer),this.pdfViewer.toolbarModule&&(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.toolbarModule.intializeToolbar("100%")),this.viewerContainer.style.height=i?this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,56):this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);var n=this.pdfViewer.element.clientWidth;t.Browser.isDevice||(n-=this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0),this.viewerContainer.style.width=n+"px",this.viewerMainContainer.appendChild(this.viewerContainer),t.Browser.isDevice&&(this.mobileScrollerContainer.style.left=n-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=n/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.mobilePageNoContainer.style.display="none",this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer),this.mobilePageNoContainer.appendChild(this.mobilenumberContainer),this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer),this.viewerContainer.appendChild(this.mobilePageNoContainer),this.viewerMainContainer.appendChild(this.mobileScrollerContainer),this.mobileScrollerContainer.appendChild(this.mobileSpanContainer)),this.pageContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_pageViewContainer",className:"e-pv-page-container"}),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",i&&this.pdfViewer.thumbnailViewModule&&!t.Browser.isDevice&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup(),t.Browser.isDevice&&this.createGoToPagePopup(),this.waitingPopup=t.createElement("div",{id:this.pdfViewer.element.id+"_loadingIndicator"}),this.viewerContainer.appendChild(this.waitingPopup),o.createSpinner({target:this.waitingPopup,cssClass:"e-spin-center"}),this.setLoaderProperties(this.waitingPopup),this.contextMenuModule=new g(this.pdfViewer,this),this.contextMenuModule.createContextMenu(),this.wireEvents(),this.pdfViewer.textSearchModule&&!t.Browser.isDevice&&this.pdfViewer.textSearchModule.createTextSearchBox(),this.pdfViewer.documentPath&&this.pdfViewer.load(this.pdfViewer.documentPath,null)}},e.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_mobilepagenoContainer",className:"e-pv-mobilepagenoscroll-container"}),this.mobilecurrentPageContainer=t.createElement("span",{id:this.pdfViewer.element.id+"_mobilecurrentpageContainer",className:"e-pv-mobilecurrentpage-container"}),this.mobilenumberContainer=t.createElement("span",{id:this.pdfViewer.element.id+"_mobiledashedlineContainer",className:"e-pv-mobiledashedline-container"}),this.mobiletotalPageContainer=t.createElement("span",{id:this.pdfViewer.element.id+"_mobiletotalpageContainer",className:"e-pv-mobiletotalpage-container"}),this.mobileScrollerContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_mobilescrollContainer",className:"e-pv-mobilescroll-container"}),this.mobileSpanContainer=t.createElement("span",{id:this.pdfViewer.element.id+"_mobilespanContainer",className:"e-pv-mobilespanscroll-container"}),this.mobileSpanContainer.innerHTML="1",this.mobilecurrentPageContainer.innerHTML="1",this.mobilenumberContainer.innerHTML="&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;",this.mobileScrollerContainer.style.cssFloat="right",this.mobileScrollerContainer.style.width="40px",this.mobileScrollerContainer.style.height="32px",this.mobileScrollerContainer.style.zIndex="100",this.mobilePageNoContainer.style.width="120px",this.mobilePageNoContainer.style.height="100px",this.mobilePageNoContainer.style.zIndex="100",this.mobilePageNoContainer.style.position="fixed",this.mobileScrollerContainer.addEventListener("touchstart",this.mobileScrollContainerDown.bind(this)),this.mobileScrollerContainer.addEventListener("touchend",this.mobileScrollContainerEnd.bind(this)),this.mobileScrollerContainer.style.display="none"},e.prototype.initiatePageRender=function(e,t){this.documentId=this.createGUID(),this.viewerContainer.scrollTop=0,this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),e=this.checkDocumentData(e),this.setFileName();var i=this.constructJsonObject(e,t);this.createAjaxRequest(i,e,t)},e.prototype.mobileScrollContainerDown=function(e){this.ispageMoved=!1,this.isThumb=!0,this.mobileScrollerContainer.addEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0)},e.prototype.setMaximumHeight=function(e){t.Browser.isDevice||(e.style.minHeight="500px")},e.prototype.mobileScrollContainerEnd=function(e){this.ispageMoved||this.goToPagePopup.show(),this.isThumb=!1,this.ispageMoved=!1,this.mobileScrollerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0),this.mobilePageNoContainer.style.display="none"},e.prototype.createAjaxRequest=function(e,t,i){var o=this,n=new XMLHttpRequest;n.open("POST",this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.responseType="json",n.send(JSON.stringify(e)),n.onreadystatechange=function(e){if(4===n.readyState&&200===n.status){var r=e.currentTarget.response;"object"!=typeof r&&(r=JSON.parse(r)),o.requestSuccess(r,t,i)}else 4===n.readyState&&400===n.status&&o.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)},n.onerror=function(e){o.openNotificationPopup(),o.showLoadingIndicator(!1),o.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)}},e.prototype.openNotificationPopup=function(){this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Server error")),this.getElement("_notify").classList.add("e-pv-notification-large-content")},e.prototype.requestSuccess=function(e,i,o){e&&void 0!==e.pageCount?(this.pageCount=e.pageCount,this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.saveDocumentHashData(),this.pageRender(e),t.Browser.isDevice&&(this.mobileScrollerContainer.style.display="",this.mobileScrollerContainer.style.top=this.toolbarHeight+"px")):(this.pageCount=0,this.currentPageNumber=0,t.Browser.isDevice&&(this.mobileScrollerContainer.style.display="none"),4===e?this.renderPasswordPopup(i,o):3===e&&this.renderCorruptPopup(),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateToolbarItems()),this.pdfViewer.thumbnailViewModule&&!t.Browser.isDevice&&this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks()},e.prototype.pageRender=function(e){this.document=null,this.passwordDialogReset(),this.passwordPopup&&this.passwordPopup.hide();if(this.initPageDiv(e),this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.pdfViewer.magnificationModule.isInitialLoading=!1),this.isDocumentLoaded=!0,-1===this.renderedPagesList.indexOf(0)){this.createRequestForRender(0);var i=1;if(this.pageSize[i])for(var o=this.getPageTop(i),n=this.viewerContainer.clientHeight;n>o&&this.pageSize[i];)this.renderPageElement(i),this.createRequestForRender(i),o=this.getPageTop(i),i+=1}this.showLoadingIndicator(!1),this.currentPageNumber=1,this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.uploadedDocumentName=null,this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber),this.pdfViewer.toolbarModule.updateToolbarItems()),t.Browser.isDevice&&(this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString())},e.prototype.renderPasswordPopup=function(e,t){this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),this.promptElement.classList.add("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Invalid Password"),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.passwordPopup.show()):(this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.createPasswordPopup(),this.pdfViewer.fireDocumentLoadFailed(!0,null),this.passwordPopup.show())},e.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.createCorruptedPopup(),this.documentId=null,this.corruptPopup.show()},e.prototype.constructJsonObject=function(e,t){var i;return t?(this.isPasswordAvailable=!0,i={document:e,password:t,zoomFactor:1,isFileName:this.isFileName}):(this.isPasswordAvailable=!1,i={document:e,zoomFactor:1,isFileName:this.isFileName}),i},e.prototype.checkDocumentData=function(e){var t=e.split("base64,")[1];if(void 0===t&&(this.isFileName=!0,null===this.pdfViewer.fileName)){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],t=e}return t},e.prototype.setFileName=function(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&null!==this.pdfViewer.toolbarModule.uploadedDocumentName?this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName:this.pdfViewer.fileName="undefined.pdf")},e.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)},e.prototype.saveDocumentHashData=function(){window.sessionStorage.setItem("hashId",this.hashId),window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())},e.prototype.updateWaitingPopup=function(e){if(null!=this.pageSize[e].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+"px":i.style.left=t.width/2+"px"}},e.prototype.createWaitingPopup=function(e){this.waitingPopup=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e),this.waitingPopup&&(o.createSpinner({target:this.waitingPopup}),this.setLoaderProperties(this.waitingPopup))},e.prototype.showLoadingIndicator=function(e){this.waitingPopup=this.getElement("_loadingIndicator"),null!=this.waitingPopup&&(e?o.showSpinner(this.waitingPopup):o.hideSpinner(this.waitingPopup))},e.prototype.showPageLoadingIndicator=function(e,t){this.waitingPopup=this.getElement("_pageDiv_"+e),null!=this.waitingPopup&&(t?o.showSpinner(this.waitingPopup):o.hideSpinner(this.waitingPopup),this.updateWaitingPopup(e))},e.prototype.showPrintLoadingIndicator=function(e){this.printWaitingPopup=this.getElement("_printLoadingIndicator"),null!=this.printWaitingPopup&&(e?(this.printMainContainer.style.display="block",o.showSpinner(this.printWaitingPopup)):(this.printMainContainer.style.display="none",o.hideSpinner(this.printWaitingPopup)))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px"},e.prototype.updateScrollTop=function(e){null!=this.pageSize[e]&&(this.viewerContainer.scrollTop=this.getPageTop(e),this.renderElementsVirtualScroll(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e))},e.prototype.getZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1},e.prototype.getPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed},e.prototype.getMagnified=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified},e.prototype.getPinchScrolled=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled},e.prototype.getPagesPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed},e.prototype.getPagesZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed},e.prototype.getRerenderCanvasCreated=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated},e.prototype.getDocumentId=function(){return this.documentId},e.prototype.download=function(){this.pageCount>0&&this.createRequestForDownload()},e.prototype.clear=function(e){for(this.isPasswordAvailable=!1,this.isDocumentLoaded=!1,this.initiateTextSelectMode(),t.Browser.isDevice||this.navigationPane.sideBarToolbar&&this.navigationPane.clear(),this.pdfViewer.thumbnailViewModule&&this.pdfViewer.thumbnailViewModule.clear(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.clear(),this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.clearIntervalTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.resetTextSearch(),this.pageSize&&(this.pageSize=[]),this.renderedPagesList&&(this.renderedPagesList=[]);this.pageContainer.hasChildNodes();)this.pageContainer.removeChild(this.pageContainer.lastChild);this.pageCount>0&&this.unloadDocument(null),this.windowSessionStorageClear(),this.pinchZoomStorage&&(this.pinchZoomStorage=[]),e&&this.pageCount>0&&this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null},e.prototype.destroy=function(){t.Browser.isDevice&&this.pdfViewer.element.classList.remove("e-pv-mobile-view"),this.unWireEvents(),this.clear(!1),this.pageContainer.parentNode.removeChild(this.pageContainer),this.viewerContainer.parentNode.removeChild(this.viewerContainer),this.pdfViewer.thumbnailViewModule&&this.pdfViewer.thumbnailViewModule.clear(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.clear()},e.prototype.unloadDocument=function(e){var t=this,i=window.sessionStorage.getItem("hashId"),o=window.sessionStorage.getItem("documentLiveCount");if(null!==i){var n={hashId:i,documentLiveCount:o},r=new XMLHttpRequest;r.open("POST",window.sessionStorage.getItem("serviceURL")+"/"+window.sessionStorage.getItem("unload"),!1),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(JSON.stringify(n)),r.onreadystatechange=function(e){4===r.readyState&&400===r.status&&t.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText)},r.onerror=function(e){t.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText)}}window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount")},e.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload"),this.sessionStorage.forEach(function(e){window.sessionStorage.removeItem(e)})},e.prototype.focusViewerContainer=function(){var e=window.scrollX,t=window.scrollY,i=this.getScrollParent(this.viewerContainer),o=0,n=0;null!==i&&(o=i.scrollLeft,n=i.scrollTop),this.viewerContainer.focus(),-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge")&&null!=i?(i.scrollLeft=o,i.scrollTop=n):null!==i&&i.scrollTo(o,n),window.scrollTo(e,t)},e.prototype.getScrollParent=function(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e},e.prototype.createCorruptedPopup=function(){var e=this,i=t.createElement("div",{id:this.pdfViewer.element.id+"_corrupted_popup",className:"e-pv-corrupted-popup"});this.pageContainer.appendChild(i),this.corruptPopup=new o.Dialog({showCloseIcon:!0,closeOnEscape:!0,isModal:!0,header:'<div class="e-pv-corrupted-popup-header"> '+this.pdfViewer.localeObj.getConstant("File Corrupted")+"</div>",visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeCorruptPopup.bind(this)}],target:this.pdfViewer.element,beforeClose:function(){e.corruptPopup.destroy(),e.getElement("_corrupted_popup").remove(),e.corruptPopup=null,e.waitingPopup=e.getElement("_loadingIndicator"),null!=e.waitingPopup&&o.hideSpinner(e.waitingPopup)}}),this.pdfViewer.enableRtl?(this.corruptPopup.content='<div id="templatertl" class="e-pv-notification-icon-rtl"> <div class="e-pv-corrupted-popup-content-rtl">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.enableRtl=!0):this.corruptPopup.content='<div id="template" class="e-pv-notification-icon"> <div class="e-pv-corrupted-popup-content">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.appendTo(i)},e.prototype.closeCorruptPopup=function(){this.corruptPopup.hide(),this.waitingPopup=this.getElement("_loadingIndicator"),null!==this.waitingPopup&&o.hideSpinner(this.waitingPopup)},e.prototype.createPrintPopup=function(){var e=document.getElementById(this.pdfViewer.element.id);this.printMainContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none",this.printWaitingPopup=t.createElement("div",{id:this.pdfViewer.element.id+"_printLoadingIndicator",className:"e-pv-print-loading-container"}),this.printMainContainer.appendChild(this.printWaitingPopup),o.createSpinner({target:this.printWaitingPopup,cssClass:"e-spin-center"}),this.setLoaderProperties(this.printWaitingPopup)},e.prototype.createGoToPagePopup=function(){var e=this,i=t.createElement("div",{id:this.pdfViewer.element.id+"_goTopage_popup",className:"e-pv-gotopage-popup"});this.goToPageElement=t.createElement("span",{id:this.pdfViewer.element.id+"_prompt"}),this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant("Enter pagenumber"),i.appendChild(this.goToPageElement);var n=t.createElement("span",{className:"e-pv-text-input"});this.goToPageInput=t.createElement("input",{id:this.pdfViewer.element.id+"_page_input",className:"e-input"}),this.goToPageInput.type="text",this.goToPageInput.style.maxWidth="80%",this.pageNoContainer=t.createElement("span",{className:".e-pv-number-ofpages"}),n.appendChild(this.goToPageInput),n.appendChild(this.pageNoContainer),i.appendChild(n),this.pageContainer.appendChild(i),this.goToPagePopup=new o.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("GoToPage"),visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.GoToPageCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Apply"),disabled:!0,cssClass:"e-pv-gotopage-apply-btn",isPrimary:!0},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)}),this.goToPagePopup.appendTo(i);new r.NumericTextBox({format:"##",showSpinButton:!1}).appendTo(this.goToPageInput),this.goToPageInput.addEventListener("keyup",function(){var t=e.goToPageInput.value;""!==t&&parseFloat(t)>0&&e.pdfViewer.pageCount+1>parseFloat(t)?e.EnableApplyButton():e.DisableApplyButton()})},e.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value="",this.DisableApplyButton()},e.prototype.EnableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].removeAttribute("disabled")},e.prototype.DisableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].setAttribute("disabled",!0)},e.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide()},e.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide();var e=this.goToPageInput.value;this.pdfViewer.navigation.goToPage(e),this.updateMobileScrollerPosition()},e.prototype.updateMobileScrollerPosition=function(){if(t.Browser.isDevice){var e=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56),i=this.viewerContainer.scrollTop/e;i>this.toolbarHeight?this.mobileScrollerContainer.style.top=i+"px":this.mobileScrollerContainer.style.top=this.toolbarHeight+"px"}},e.prototype.createPasswordPopup=function(){var e=this,i=t.createElement("div",{id:this.pdfViewer.element.id+"_password_popup",className:"e-pv-password-popup"});this.promptElement=t.createElement("span",{id:this.pdfViewer.element.id+"_prompt"}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),i.appendChild(this.promptElement);var n=t.createElement("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=t.createElement("input",{id:this.pdfViewer.element.id+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",n.appendChild(this.passwordInput),i.appendChild(n),this.pageContainer.appendChild(i),this.passwordPopup=new o.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null,e.waitingPopup=e.getElement("_loadingIndicator"),null!=e.waitingPopup&&o.hideSpinner(e.waitingPopup)}}),t.Browser.isDevice?this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)}]:this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}],this.pdfViewer.enableRtl&&(this.passwordPopup.enableRtl=!0),this.passwordPopup.appendTo(i),this.passwordInput.addEventListener("keyup",function(){""===e.passwordInput.value&&e.passwordDialogReset()}),this.passwordInput.addEventListener("focus",function(){e.passwordInput.parentElement.classList.add("e-input-focus")}),this.passwordInput.addEventListener("blur",function(){e.passwordInput.parentElement.classList.remove("e-input-focus")})},e.prototype.passwordCancel=function(e){e.isInteraction&&(this.clear(!1),this.passwordDialogReset(),this.passwordInput.value=""),this.waitingPopup=this.getElement("_loadingIndicator"),null!==this.waitingPopup&&o.hideSpinner(this.waitingPopup)},e.prototype.passwordCancelClick=function(){this.clear(!1),this.passwordDialogReset(),this.passwordPopup.hide(),this.waitingPopup=this.getElement("_loadingIndicator"),null!==this.waitingPopup&&o.hideSpinner(this.waitingPopup)},e.prototype.passwordDialogReset=function(){this.promptElement&&(this.promptElement.classList.remove("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),this.passwordInput.value="")},e.prototype.applyPassword=function(){var e=this.passwordInput.value;""!==e&&this.pdfViewer.load(this.document,e),this.focusViewerContainer()},e.prototype.wireEvents=function(){this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),t.Browser.isDevice&&this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("touchend",this.onWindowTouchEnd),window.addEventListener("unload",this.unloadDocument),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),t.Browser.isDevice&&this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("unload",this.unloadDocument),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.updateZoomValue=function(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"fitToWidth"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToWidth());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)},e.prototype.initiatePanning=function(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode()},e.prototype.initiateTextSelectMode=function(){this.isPanMode=!1,this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode())},e.prototype.applySelection=function(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1},e.prototype.handleTaps=function(e){var t=this;this.singleTapTimer=setTimeout(function(){t.onSingleTap(e)},300),this.tapCount++;setTimeout(function(){t.onDoubleTap(e)},200);this.tapCount>2&&(this.tapCount=0)},e.prototype.onSingleTap=function(e){if(!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&this.pdfViewer.toolbarModule){if(this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10){if(this.isTapHidden)this.viewerContainer.scrollTop+=this.getElement("_toolbarContainer").clientHeight*this.getZoomFactor(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,56);else if(this.viewerContainer.scrollTop-=this.getElement("_toolbarContainer").clientHeight*this.getZoomFactor(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0),this.pdfViewer.toolbar.moreDropDown){var i=this.getElement("_more_option-popup");i.firstElementChild&&(i.classList.remove("e-popup-open"),i.classList.add("e-popup-close"),i.removeChild(i.firstElementChild))}this.isTapHidden&&t.Browser.isDevice?(this.mobileScrollerContainer.style.display="",this.updateMobileScrollerPosition()):t.Browser.isDevice&&(this.mobileScrollerContainer.style.display="none"),this.pdfViewer.toolbarModule.showToolbar(this.isTapHidden),this.isTapHidden=!this.isTapHidden}this.tapCount=0}},e.prototype.onDoubleTap=function(e){2===this.tapCount&&(t.Browser.isDevice&&(this.mobileScrollerContainer.style.display="none"),this.tapCount=0,this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10&&(this.pdfViewer.magnification.onDoubleTapMagnification(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0),this.isTapHidden=!1,clearTimeout(this.singleTapTimer)))},e.prototype.preventTouchEvent=function(e){this.pdfViewer.textSelectionModule&&(this.isPanMode||!this.pdfViewer.enableTextSelection||this.isTextSelectionDisabled||(e.preventDefault(),e.stopPropagation()))},e.prototype.initPageDiv=function(e){if(this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.updateTotalPage(),t.Browser.isDevice&&this.mobiletotalPageContainer&&(this.mobiletotalPageContainer.innerHTML=this.pageCount.toString(),this.pageNoContainer.innerHTML="(1-"+this.pageCount.toString()+")")),this.pageCount>0){var i=0,o=0;this.pageCount>100?(o=100,this.pageLimit=o):o=this.pageCount;for(var n=0;n<o;n++){var r=e.pageSizes[n].split(",");if(null!==e.pageSizes[n-1]&&0!==n){var s=e.pageSizes[n-1].split(",");i=this.pageGap+parseFloat(s[1])+i}else i=this.pageGap;var a={width:parseFloat(r[0]),height:parseFloat(r[1]),top:i};this.pageSize.push(a)}var l=this.pageCount<10?this.pageCount:10;for(n=0;n<l;n++)this.renderPageContainer(n,this.getPageWidth(n),this.getPageHeight(n),this.getPageTop(n));if(this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit){null===this.getElement("_pageDiv_"+this.pageLimit)&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}}},e.prototype.renderElementsVirtualScroll=function(e){var t=e+1;t>this.pageCount&&(t=this.pageCount);for(var i=e-1;i<=t;i++)-1!==i&&this.renderPageElement(i);var o=e-3;o<0&&(o=0);for(i=e-1;i>=o;i--)-1!==i&&this.renderPageElement(i);for(var n=0;n<this.pageCount;n++)if(!(o<=n&&n<=t)){var r=this.getElement("_pageDiv_"+n),s=this.getElement("_pageCanvas_"+n),a=this.getElement("_textLayer_"+n);if(s){s.parentNode.removeChild(s),a&&(this.pdfViewer.textSelectionModule&&0!==a.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(n,!0),a.parentNode.removeChild(a));-1!==(l=this.renderedPagesList.indexOf(n))&&this.renderedPagesList.splice(l,1)}if(r){r.parentNode.removeChild(r);var l;-1!==(l=this.renderedPagesList.indexOf(n))&&this.renderedPagesList.splice(l,1)}}},e.prototype.renderPageElement=function(e){var t=this.getElement("_pageDiv_"+e);null==this.getElement("_pageCanvas_"+e)&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))},e.prototype.renderPagesVirtually=function(){return c(this,void 0,void 0,function(){var e,t=this;return u(this,function(i){return e=this,setTimeout(function(){t.initiateRenderPagesVirtually(e)},500),[2]})})},e.prototype.initiateRenderPagesVirtually=function(e){var t=this,i={hashId:e.hashId,isCompletePageSizeNotReceived:!0},o=new XMLHttpRequest;o.open("POST",e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.responseType="json",o.send(JSON.stringify(i)),o.onreadystatechange=function(i){if(4===o.readyState&&200===o.status){var n=i.currentTarget.response;if("object"!=typeof n&&(n=JSON.parse(n)),n){for(var r=n,s=e.pageSize[e.pageLimit-1].top,a=e.pageLimit;a<e.pageCount;a++){var l=r.pageSizes[a].split(",");if(null!==e.pageSize[a-1]&&0!==a){var h=e.pageSize[a-1].height;s=t.pageGap+parseFloat(h)+s}var p={width:parseFloat(l[0]),height:parseFloat(l[1]),top:s};t.pageSize.push(p)}t.pageContainer.style.height=t.getPageTop(t.pageSize.length-1)+t.getPageHeight(t.pageSize.length-1)+"px"}}else 4===o.readyState&&400===o.status&&t.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)},o.onerror=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)}},e.prototype.renderPage=function(e,t){var i=this;if(e){var o=this.getPageWidth(t),n=this.getPageHeight(t),r=this.getElement("_pageCanvas_"+t),s=this.getElement("_pageDiv_"+t);if(s&&(s.style.width=o+"px",s.style.height=n+"px",s.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?s.style.right=this.updateLeftPosition(t)+"px":s.style.left=this.updateLeftPosition(t)+"px"),r){r.style.width=o+"px",r.style.height=n+"px";var a=r.getContext("2d"),l=e.image,h=e.transformationMatrix;if(l){var p=new Image;p.onload=function(){parseInt((1.5*o).toString())===p.width&&(isNaN(parseFloat(r.style.width))||(r.style.width=o+"px",r.style.height=n+"px",r.height=n*window.devicePixelRatio,r.width=o*window.devicePixelRatio),a.imageSmoothingEnabled=!1,a.setTransform(h.Elements[0],h.Elements[1],h.Elements[2],h.Elements[3],h.Elements[4],h.Elements[5]),a.drawImage(p,0,0,r.width,r.height),i.showPageLoadingIndicator(t,!1),0===t&&1===i.getZoomFactor()&&i.isDocumentLoaded&&(i.pdfViewer.fireDocumentLoad(),i.isDocumentLoaded=!1),i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement())},p.src=l,this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.pushImageObjects(p)}var d=s.getElementsByTagName("a");if(0!==d.length)for(var c=d.length-1;c>=0;c--)d[c].parentNode.removeChild(d[c]);this.renderTextContent(e,t),this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(t),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(t)}}},e.prototype.renderTextContent=function(e,t){var i=e.textContent,o=e.textBounds,n=e.rotation,r=this.getElement("_textLayer_"+t);r||(r=this.textLayer.addTextLayer(t,this.getPageWidth(t),this.getPageHeight(t),this.getElement("_pageDiv_"+t))),r&&(0===r.childNodes.length?this.textLayer.renderTextContents(t,i,o,n):this.textLayer.resizeTextContents(t,i,o,n))},e.prototype.renderPageContainer=function(e,i,o,n){var r=t.createElement("div",{id:this.pdfViewer.element.id+"_pageDiv_"+e,className:"e-pv-page-div"});r.style.width=i+"px",r.style.height=o+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(e)+"px":r.style.left=this.updateLeftPosition(e)+"px",r.style.top=n+"px",this.pageContainer.appendChild(r),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(r,e),this.renderPageCanvas(r,i,o,e)},e.prototype.orderPageDivElements=function(e,t){var i=this.getElement("_pageDiv_"+(t+1));i?this.pageContainer.insertBefore(e,i):this.pageContainer.appendChild(e)},e.prototype.renderPageCanvas=function(e,i,o,n){var r=t.createElement("canvas",{id:this.pdfViewer.element.id+"_pageCanvas_"+n,className:"e-pv-page-canvas"});return r.width=i,r.height=o,e.appendChild(r),this.textLayer.addTextLayer(n,i,o,e),r},e.prototype.updateLeftPosition=function(e){var t;return((t=(this.viewerContainer.getBoundingClientRect().width-this.getPageWidth(e))/2)<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType))&&(t=this.pageLeft),t},e.prototype.applyLeftPosition=function(e){var t;if(this.pageSize[e]){((t=(this.viewerContainer.getBoundingClientRect().width-this.pageSize[e].width*this.getZoomFactor())/2)<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType))&&(t=this.pageLeft);var i=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);i&&(this.pdfViewer.enableRtl?i.style.right=t+"px":i.style.left=t+"px")}},e.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},e.prototype.initiatePageViewScrollChanged=function(){this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))},e.prototype.renderCountIncrement=function(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()},e.prototype.pageViewScrollChanged=function(e){this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount&&(-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||(this.createRequestForRender(t),this.renderCountIncrement())),!this.getMagnified()&&!this.getPagesPinchZoomed()){var i=t-1;null!==this.getElement("_pageCanvas_"+i)&&(-1!==this.renderedPagesList.indexOf(i)||this.getMagnified()||(this.createRequestForRender(i),this.renderCountIncrement()));var o=t+1;if(o<this.pageCount&&-1===this.renderedPagesList.indexOf(o)&&!this.getMagnified()){this.createRequestForRender(o);var n=this.getPageHeight(o);for(this.renderCountIncrement();this.viewerContainer.clientHeight>n&&(o+=1)<this.pageCount;)this.renderPageElement(o),this.createRequestForRender(o),n+=this.getPageHeight(o),this.renderCountIncrement()}}},e.prototype.downloadDocument=function(e){var i=t.createElement("a");if(i.click)i.href=e,i.target="_parent","download"in i&&(i.download=this.pdfViewer.fileName),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var o=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,o+"$&")}window.open(e,"_parent")}},e.prototype.createRequestForDownload=function(){var e,t=this;e={hashId:this.hashId};var i=new XMLHttpRequest;i.open("POST",this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.download),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.responseType="text",i.send(JSON.stringify(e)),i.onreadystatechange=function(e){if(4===i.readyState&&200===i.status){var o=e.currentTarget.response;if("object"==typeof o&&(o=JSON.parse(o)),o){var n=t.createBlobUrl(o.split("base64,")[1],"application/pdf");t.downloadDocument(n)}}else 4===i.readyState&&400===i.status&&t.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)},i.onerror=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},e.prototype.createRequestForRender=function(e){var t=this,i=this.getElement("_pageCanvas_"+e),o=this.getElement("_oldCanvas_"+e);if(this.getPagesZoomed()?this.showPageLoadingIndicator(e,!1):this.showPageLoadingIndicator(e,!0),i){isNaN(parseFloat(i.style.width))&&!o||this.showPageLoadingIndicator(e,!1);var n=this.getStoredData(e);if(n)this.renderPage(n,e);else for(var r=0;r<1;r++)for(var s=function(i){var o=void 0;o={xCoordinate:r,yCoordinate:i,pageNumber:e,documentId:a.documentId,hashId:a.hashId,zoomFactor:a.getZoomFactor()};var n=new XMLHttpRequest;n.open("POST",a.pdfViewer.serviceUrl+"/"+a.pdfViewer.serverActionSettings.renderPages),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.responseType="json",n.send(JSON.stringify(o)),n.onreadystatechange=function(i){var o=t;if(4===n.readyState&&200===n.status){var r=i.currentTarget.response;"object"!=typeof r&&(r=JSON.parse(r)),r&&r.image&&(o.storeWinData(r,e),o.renderPage(r,e))}else 4===n.readyState&&400===n.status&&t.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)},n.onerror=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)}},a=this,l=0;l<1;l++)s(l);this.renderedPagesList.push(e)}},e.prototype.getStoredData=function(e){var t=this.getWindowSessionStorage(e)?this.getWindowSessionStorage(e):this.getPinchZoomPage(e),i=null;return t&&(i=t,this.isPinchZoomStorage||(i=JSON.parse(t)),this.isPinchZoomStorage=!1),i},e.prototype.storeWinData=function(e,t){var i={image:this.createBlobUrl(e.image.split("base64,")[1],"image/png"),transformationMatrix:e.transformationMatrix,hyperlinks:e.hyperlinks,hyperlinkBounds:e.hyperlinkBounds,linkAnnotation:e.linkAnnotation,linkPage:e.linkPage,annotationLocation:e.annotationLocation,textContent:e.textContent,textBounds:e.textBounds,pageText:e.pageText,rotation:e.rotation};!this.pdfViewer.magnificationModule||this.pdfViewer.magnificationModule.checkZoomFactor()?this.manageSessionStorage(t,i):this.pinchZoomStorage.push({index:t,pinchZoomStorage:i})},e.prototype.getPinchZoomPage=function(e){for(var t in this.pinchZoomStorage)if(this.pinchZoomStorage.hasOwnProperty(t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null},e.prototype.getWindowSessionStorage=function(e){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+this.getZoomFactor())},e.prototype.manageSessionStorage=function(e,t){if(this.pageCount>this.sessionLimit&&window.sessionStorage.length>this.sessionLimit){var i=this.currentPageNumber-this.sessionLimit;i<0&&(i=0);var o=this.currentPageNumber+this.sessionLimit;o>this.pageCount&&(o=this.pageCount);for(var n=0;n<=this.pageCount;n++)i<=n&&n<o||window.sessionStorage.removeItem(this.documentId+"_"+n+"_"+this.getZoomFactor())}window.sessionStorage.setItem(this.documentId+"_"+e+"_"+this.getZoomFactor(),JSON.stringify(t)),this.sessionStorage.push(this.documentId+"_"+e+"_"+this.getZoomFactor())},e.prototype.createBlobUrl=function(e,t){for(var i=atob(e),o=[],n=0;n<i.length;n+=512){for(var r=i.slice(n,n+512),s=new Array(r.length),a=0;a<r.length;a++)s[a]=r.charCodeAt(a);var l=new Uint8Array(s);o.push(l)}var h=new Blob(o,{type:t});return URL.createObjectURL(h)},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return(16*Math.random()|0).toString(16)})},e.prototype.createGUID=function(){return"Sync_PdfViewer_"+this.getRandomNumber()},e.prototype.isClickedOnScrollBar=function(e){var t=!1;return this.setScrollDownValue(e.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<e.clientX&&e.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(t=!0,this.setScrollDownValue(e.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<e.clientY&&e.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(t=!0,this.setScrollDownValue(e.type,!0)),t},e.prototype.setScrollDownValue=function(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)},e.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",function(){return!1})},e.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.element.id+e)},e.prototype.getPageWidth=function(e){return this.pageSize[e].width*this.getZoomFactor()},e.prototype.getPageHeight=function(e){return this.pageSize[e].height*this.getZoomFactor()},e.prototype.getPageTop=function(e){return this.pageSize[e].top*this.getZoomFactor()},e}(),m=function(){function e(e,t){var i=this;this.textBoundsArray=[],this.closeNotification=function(){i.notifyDialog.hide()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.addTextLayer=function(e,i,o,n){var r;return document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e)||((r=t.createElement("div",{id:this.pdfViewer.element.id+"_textLayer_"+e,className:"e-pv-text-layer"})).style.width=i+"px",r.style.height=o+"px",n.appendChild(r)),r},e.prototype.renderTextContents=function(e,i,o,n){var r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),s=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+e);if(s&&0===r.childNodes.length)for(var a=0;a<i.length;a++){var l=o[a],h=t.createElement("div",{id:this.pdfViewer.element.id+"_text_"+e+"_"+a,className:"e-pv-text"}),p=i[a];p=(p=p.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),h.innerHTML=p.replace(/&nbsp;/g," ");" "!==i[a].replace(/  +/g," ")&&(h.style.whiteSpace="pre"),this.setStyleToTextDiv(h,l.X,l.Y,l.Bottom,l.Width,l.Height),this.setTextElementProperties(h);var d=s.getContext("2d");d.font=h.style.fontSize+" "+h.style.fontFamily;var c=d.measureText(i[a].replace(/(\r\n|\n|\r)/gm,"")).width,u=l.Width*this.pdfViewerBase.getZoomFactor()/c;this.applyTextRotation(u,h,n,l.Rotation),r.appendChild(h),this.resizeExcessDiv(r,h),this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&h.classList.add("e-pv-cursor")}},e.prototype.resizeTextContents=function(e,t,i,o){var n=this.pdfViewerBase.getElement("_textLayer_"+e),r=this.pdfViewerBase.getElement("_pageCanvas_"+e);if(r)for(var s=0;s<n.childNodes.length;s++){var a=void 0,l=this.pdfViewerBase.getElement("_text_"+e+"_"+s);i&&(a=i[s],this.setStyleToTextDiv(l,a.X,a.Y,a.Bottom,a.Width,a.Height)),this.setTextElementProperties(l);var h=r.getContext("2d");h.font=l.style.fontSize+" "+l.style.fontFamily;var p=void 0;p=t?h.measureText(t[s].replace(/(\r\n|\n|\r)/gm,"")).width:h.measureText(l.textContent.replace(/(\r\n|\n|\r)/gm,"")).width;var d=a.Width*this.pdfViewerBase.getZoomFactor()/p;this.applyTextRotation(d,l,o,a.Rotation),this.resizeExcessDiv(n,l)}else n.parentElement.removeChild(n)},e.prototype.applyTextRotation=function(e,t,i,o){var n="scale("+e+")";0===i?t.style.transform=0===o?n:"rotate("+o+"deg) "+n:1===i?t.style.transform=0===o?"rotate(90deg) "+n:-90===o?n:"rotate("+o+"deg) "+n:2===i?t.style.transform=0===o?"rotate(180deg) "+n:180===o?n:"rotate("+o+"deg) "+n:3===i&&(t.style.transform=0===o?"rotate(-90deg) "+n:90===o?n:"rotate("+o+"deg) "+n)},e.prototype.setTextElementProperties=function(e){e.style.fontFamily="sans-serif",e.style.transformOrigin="0%"},e.prototype.resizeTextContentsOnZoom=function(e){var t,i=window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId()+"_"+e+"_"+this.getPreviousZoomFactor()),o=[],n=[];if(i){var r=JSON.parse(i);o=r.textBounds,n=r.textContent,t=r.rotation}if(0!==o.length)this.textBoundsArray.push({pageNumber:e,textBounds:o}),this.resizeTextContents(e,n,o,t);else{var s=this.textBoundsArray.filter(function(t){return t.pageNumber===e});s&&0!==s.length&&(o=s[0].textBounds,this.resizeTextContents(e,null,o,t))}},e.prototype.resizeExcessDiv=function(e,t){var i=e.getBoundingClientRect(),o=t.getBoundingClientRect();(o.width+o.left>=i.width+i.left||o.width>i.width)&&(t.style.width="auto",t.style.width=t.clientWidth+"px")},e.prototype.clearTextLayers=function(){var e=this.pdfViewerBase.currentPageNumber-3;e=e>0?e:0;var t=this.pdfViewerBase.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1;for(var i=document.querySelectorAll('div[id*="_textLayer_"]'),o=0;o<i.length;o++)if(i[o].style.display="block",this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){var n=parseInt(i[o].id.split("_textLayer_")[1]);e+1<=n&&n<=t-1||i[o].remove()}else this.pdfViewerBase.getPinchZoomed(),i[o].remove()},e.prototype.convertToSpan=function(e,i,o,n,r,s){var a=this.pdfViewerBase.getElement("_text_"+e+"_"+i),l=r.substring(o,n),h=document.createTextNode(l);if(s){var p=t.createElement("span");p.className=s+" e-pv-text",p.appendChild(h),a.appendChild(p)}else a.appendChild(h)},e.prototype.applySpanForSelection=function(e,t,i,o,n,r){if(this.pdfViewer.textSelectionModule)for(var s=e;s<=t;s++){var a=void 0,l=void 0,h=this.pdfViewerBase.getElement("_textLayer_"+s).childNodes;s===e?(a=i,l=h.length-1):s===t?(a=0,l=o):(a=0,l=h.length-1),e===t&&(a=i,l=o);for(var p=a;p<=l;p++){var d=this.pdfViewerBase.getElement("_text_"+s+"_"+p),c=void 0,u=void 0,f=void 0;f=d.textContent.length;var m=d.textContent;d.textContent="",p===a?(c=s===e?n:0,u=f,this.convertToSpan(s,p,0,c,m,null)):p===l&&s===t?(c=0,u=r):(c=0,u=f),a===l&&(c=n,u=r),this.convertToSpan(s,p,c,u,m,"e-pv-maintaincontent"),p===l&&s===t&&this.convertToSpan(s,p,u,m.length,m,null)}}},e.prototype.clearDivSelection=function(){for(var e=document.querySelectorAll('div[id*="_textLayer_"]'),t=0;t<e.length;t++)for(var i=e[t].childNodes,o=0;o<i.length;o++){var n=i[o],r=n.textContent;(n.childNodes.length>1||1===n.childNodes.length&&"SPAN"===n.childNodes[0].tagName)&&(n.textContent="",n.textContent=r)}},e.prototype.setStyleToTextDiv=function(e,t,i,o,n,r){e.style.left=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=n*this.pdfViewerBase.getZoomFactor()+"px";var s=r*this.pdfViewerBase.getZoomFactor();e.style.height=s+"px",e.style.fontSize=s>11?(parseInt(r.toString())-2.6)*this.pdfViewerBase.getZoomFactor()+"px":r*this.pdfViewerBase.getZoomFactor()+"px"},e.prototype.getTextSelectionStatus=function(){return!!this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection},e.prototype.modifyTextCursor=function(e){for(var t=document.querySelectorAll('div[id*="_textLayer_"]'),i=0;i<t.length;i++)for(var o=t[i].childNodes,n=0;n<o.length;n++){var r=o[n];e?r.classList.add("e-pv-cursor"):r.classList.remove("e-pv-cursor")}},e.prototype.getPreviousZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.previousZoomFactor:1},e.prototype.getTextSearchStatus=function(){return!!this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch},e.prototype.createNotificationPopup=function(e){var i=this,n=t.createElement("div",{id:this.pdfViewer.element.id+"_notify",className:"e-pv-notification-popup"});this.pdfViewerBase.viewerContainer.appendChild(n),this.notifyDialog=new o.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("PdfViewer"),buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeNotification.bind(this)}],content:'<div class="e-pv-notification-popup-content">'+e+"</div>",target:this.pdfViewer.element,beforeClose:function(){i.notifyDialog.destroy(),i.pdfViewer.element.removeChild(n),i.pdfViewer.textSearchModule&&(i.pdfViewer.textSearch.isMessagePopupOpened=!1)}}),this.pdfViewer.enableRtl&&(this.notifyDialog.enableRtl=!0),this.notifyDialog.appendTo(n)},e}(),g=function(){function e(e,t){this.copyContextMenu=[],this.pdfViewer=e,this.pdfViewerBase=t,this.copyContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Copy")}]}return e.prototype.createContextMenu=function(){this.contextMenuElement=t.createElement("ul",{id:this.pdfViewer.element.id+"_context_menu"}),this.pdfViewer.enableRtl&&(this.contextMenuElement.style.direction="rtl"),this.pdfViewer.element.appendChild(this.contextMenuElement),this.contextMenuObj=new i.ContextMenu({target:"#"+this.pdfViewerBase.viewerContainer.id,items:this.copyContextMenu,beforeOpen:this.contextMenuOnBeforeOpen.bind(this),select:this.onMenuItemSelect.bind(this),cssClass:"e-pv-context-menu"}),this.contextMenuObj.appendTo(this.contextMenuElement),t.Browser.isDevice?this.contextMenuObj.animationSettings.effect="ZoomIn":this.contextMenuObj.animationSettings.effect="SlideDown"},e.prototype.contextMenuOnBeforeOpen=function(e){if(this.pdfViewer.textSelectionModule){if(e.event){this.isClickWithinSelectionBounds(e.event)?(!e.event.target.classList.contains("e-pv-maintaincontent")&&e.event.target.classList.contains("e-pv-text")||e.event.target.classList.contains("e-pv-text-layer"))&&(e.cancel=!0):e.cancel=!0}}else e.cancel=!0},e.prototype.isClickWithinSelectionBounds=function(e){var t=!1,i=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber-1);if(i)for(var o=0;o<i.length;o++){var n=i[o];if(this.getHorizontalValue(n.left)<e.clientX&&this.getHorizontalValue(n.right)>e.clientX&&this.getVerticalValue(n.top)<e.clientY&&this.getVerticalValue(n.bottom)>e.clientY){t=!0;break}}return t},e.prototype.getHorizontalClientValue=function(e){return e-this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left},e.prototype.getVerticalClientValue=function(e){return e-this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().top},e.prototype.getHorizontalValue=function(e){var t=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect();return e*this.pdfViewerBase.getZoomFactor()+t.left},e.prototype.getVerticalValue=function(e){var t=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect();return e*this.pdfViewerBase.getZoomFactor()+t.top},e.prototype.onMenuItemSelect=function(e){switch(e.item.text){case"Copy":this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuObj.close())}},e}(),w=function(){function e(e,t){this.zoomFactor=1,this.previousZoomFactor=1,this.scrollWidth=25,this.zoomPercentages=[50,75,100,125,150,200,400],this.isNotPredefinedZoom=!1,this.pinchStep=.02,this.reRenderPageNumber=0,this.magnifyPageRerenderTimer=null,this.rerenderOnScrollTimer=null,this.rerenderInterval=null,this.touchCenterX=0,this.touchCenterY=0,this.pageRerenderCount=0,this.imageObjects=[],this.topValue=0,this.isTapToFitZoom=!1,this.fitType=null,this.isPinchZoomed=!1,this.isPagePinchZoomed=!1,this.isRerenderCanvasCreated=!1,this.isMagnified=!1,this.isPagesZoomed=!1,this.isPinchScrolled=!1,this.isAutoZoom=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.zoomLevel=2}return e.prototype.zoomTo=function(e){e<50?e=50:e>400&&(e=400),this.fitType=null,this.isNotPredefinedZoom=!1,this.isAutoZoom&&this.isInitialLoading?this.pdfViewerBase.onWindowResize():(this.isAutoZoom=!1,this.onZoomChanged(e)),this.isInitialLoading=!1},e.prototype.zoomIn=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.lowerZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel>=6?this.zoomLevel=6:this.zoomLevel++,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.zoomOut=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.higherZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel<=0?this.zoomLevel=0:this.zoomLevel--,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.fitToWidth=function(){this.isAutoZoom=!1;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToAuto=function(){this.isAutoZoom=!0;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToPage=function(){var e=this.calculateFitZoomFactor("fitToPage");this.isAutoZoom=!1,this.onZoomChanged(e),t.Browser.isDevice?this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor},e.prototype.calculateFitZoomFactor=function(e){var t=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width,i=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height,o=0,n=0;if(this.fitType=e,"fitToWidth"===this.fitType){for(var r=0,s=0;s<this.pdfViewerBase.pageSize.length;s++)(r=this.pdfViewerBase.pageSize[s].width)>o&&(o=r);var a=(t-this.scrollWidth)/o;return this.isAutoZoom&&(this.fitType=null,1===(a=Math.min(1,a))&&(this.zoomLevel=2)),100*a}var l=0;for(s=0;s<this.pdfViewerBase.pageSize.length;s++)(l=this.pdfViewerBase.pageSize[s].height)>n&&(n=l);return 1===this.pdfViewerBase.pageCount?(i-this.pdfViewerBase.pageSize[0].top)/n*100:i/n*100},e.prototype.pinchIn=function(){this.fitType=null;var e=this.zoomFactor-this.pinchStep;e<4&&e>2&&(e=this.zoomFactor-this.pinchStep),e<.5&&(e=.5),this.isPinchZoomed=!0,this.onZoomChanged(100*e)},e.prototype.pinchOut=function(){this.fitType=null;var e=this.zoomFactor+this.pinchStep;e>2&&(e+=this.pinchStep),e>4&&(e=4),this.isPinchZoomed=!0,this.onZoomChanged(100*e)},e.prototype.getZoomLevel=function(e){for(var t=0,i=this.zoomPercentages.length-1;t<=i&&(0!==t||0!==i);){var o=Math.round((t+i)/2);this.zoomPercentages[o]<=e?t=o+1:this.zoomPercentages[o]>=e&&(i=o-1)}return this.higherZoomLevel=t,this.lowerZoomLevel=i,i},e.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(100*this.zoomFactor)>-1},e.prototype.onZoomChanged=function(e){if(this.previousZoomFactor=this.zoomFactor,this.zoomLevel=this.getZoomLevel(e),this.zoomFactor=this.getZoomFactor(e),t.Browser.isDevice?this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageCount>0&&(this.previousZoomFactor!==this.zoomFactor&&(this.isPinchZoomed?(t.Browser.isDevice&&(this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+"px"),this.responsivePages()):this.magnifyPages()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomButtons(),this.pdfViewer.fireZoomChange()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor),t.Browser.isDevice&&this.isPinchZoomed){var i=parseInt((100*this.zoomFactor).toString())+"%";this.pdfViewerBase.navigationPane.createTooltipMobile(i)}},e.prototype.setTouchPoints=function(e,t){this.touchCenterX=e,this.touchCenterY=t},e.prototype.initiatePinchMove=function(e,t,i,o){this.isPinchScrolled=!1,this.isMagnified=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.touchCenterX=(e+i)/2,this.touchCenterY=(t+o)/2,this.zoomOverPages(e,t,i,o)},e.prototype.magnifyPages=function(){this.clearRerenderTimer(),this.isPagesZoomed||(this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber),this.isPagesZoomed=!0;var e=this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);if(this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!1,!0),this.isMagnified=!0,this.updatePageLocation(),this.resizeCanvas(this.reRenderPageNumber),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.resizeTouchElements(),this.pdfViewerBase.pageSize.length>0){this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+"px";var t=this;this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.viewerContainer.scrollTop=e,this.magnifyPageRerenderTimer=setTimeout(function(){t.rerenderMagnifiedPages()},800)}},e.prototype.updatePageLocation=function(){this.topValue=0;for(var e=1;e<this.pdfViewerBase.pageSize.length;e++)this.topValue+=(this.pdfViewerBase.pageSize[e].height+this.pdfViewerBase.pageGap)*this.zoomFactor},e.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer),clearTimeout(this.magnifyPageRerenderTimer),this.clearIntervalTimer(),this.isPinchScrolled=!1},e.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval),this.rerenderInterval=null,this.clearRendering();for(var e=document.querySelectorAll('canvas[id*="oldCanvas"]'),t=0;t<e.length;t++){var i=parseInt(e[t].id.split("_oldCanvas_")[1]),o=this.pdfViewerBase.getElement("_pageCanvas_"+i);o?(e[t].id=o.id,o.parentElement.removeChild(o)):e[t].id=this.pdfViewer.element.id+"_pageCanvas_"+i}this.isRerenderCanvasCreated=!1},e.prototype.pushImageObjects=function(e){this.imageObjects.push(e)},e.prototype.clearRendering=function(){if(this.imageObjects){for(var e=0;e<this.imageObjects.length;e++)this.imageObjects[e]&&(this.imageObjects[e].onload=null);this.imageObjects=[]}},e.prototype.rerenderMagnifiedPages=function(){this.renderInSeparateThread(this.reRenderPageNumber),this.isPagesZoomed=!1},e.prototype.renderInSeparateThread=function(e){var t=this;this.designNewCanvas(e),this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);var i=this;this.rerenderInterval=setInterval(function(){t.initiateRerender(i)},1)},e.prototype.responsivePages=function(){this.isPagesZoomed=!0,this.clearRerenderTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection();var e=this.pdfViewerBase.viewerContainer.scrollTop;this.isAutoZoom=!1,this.updatePageLocation(),this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+"px",this.resizeCanvas(this.pdfViewerBase.currentPageNumber),this.isPinchZoomed&&this.calculateScrollValues(e),this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[]},e.prototype.calculateScrollValues=function(e){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var o=i.getBoundingClientRect(),n=o.top*this.previousZoomFactor,r=e+this.touchCenterY,s=o.top*this.zoomFactor+(r-n<0?r-n:(r-n)*(this.zoomFactor/this.previousZoomFactor));this.pdfViewerBase.viewerContainer.scrollTop=s-this.touchCenterY;var a=o.width*this.previousZoomFactor/o.width,l=this.zoomFactor/a-1,h=this.touchCenterX-o.left;this.pdfViewerBase.viewerContainer.scrollLeft+=h*l}},e.prototype.rerenderOnScroll=function(){var e=this;if(this.isPinchZoomed=!1,this.isPinchScrolled){if(this.rerenderOnScrollTimer=null,this.isPinchScrolled=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.textLayer)for(var t=document.querySelectorAll('div[id*="_textLayer_"]'),i=0;i<t.length;i++)t[i].style.display="block";this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.isPagePinchZoomed=!1,this.rerenderOnScrollTimer=setTimeout(function(){e.pdfViewerBase.pageViewScrollChanged(e.reRenderPageNumber)},300)}},e.prototype.pinchMoveScroll=function(){var e=this;this.isRerenderCanvasCreated&&this.clearIntervalTimer(),(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed)&&(this.clearRendering(),this.isPagesZoomed=!1,clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100))},e.prototype.initiateRerender=function(e){e.pageRerenderCount===e.pdfViewerBase.reRenderedCount&&0!==e.pageRerenderCount&&0!==e.pdfViewerBase.reRenderedCount&&e.reRenderAfterPinch(this.reRenderPageNumber)},e.prototype.reRenderAfterPinch=function(e){this.pageRerenderCount=0;var t=e-3;t=t>0?t:0;var i=e+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var o=t;o<=i;o++){var n=this.pdfViewerBase.getElement("_pageDiv_"+o),r=this.pdfViewerBase.getElement("_pageCanvas_"+o);r&&(r.style.display="block");var s=this.pdfViewerBase.getElement("_oldCanvas_"+o);s&&s.parentNode.removeChild(s),n&&(n.style.visibility="visible")}this.isRerenderCanvasCreated=!1,this.isPagePinchZoomed=!1,0!==this.pdfViewerBase.reRenderedCount&&(this.pdfViewerBase.reRenderedCount=0,this.pageRerenderCount=0,clearInterval(this.rerenderInterval),this.rerenderInterval=null),this.imageObjects=[]},e.prototype.designNewCanvas=function(e){this.pdfViewerBase.textLayer&&this.pdfViewerBase.textLayer.clearTextLayers();var t=e-3;t=t>0?t:0;var i=e+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var o=t;o<=i;o++){var n=this.pdfViewerBase.getElement("_pageCanvas_"+o);if(n){n.id=this.pdfViewer.element.id+"_oldCanvas_"+o;this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+o),this.pdfViewerBase.pageSize[o].width*this.zoomFactor,this.pdfViewerBase.pageSize[o].height*this.zoomFactor,o).style.display="none"}}this.isRerenderCanvasCreated=!0},e.prototype.pageRerenderOnMouseWheel=function(){var e=this;this.isRerenderCanvasCreated&&(this.clearIntervalTimer(),clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled||(this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100)))},e.prototype.renderCountIncrement=function(){this.isRerenderCanvasCreated&&this.pageRerenderCount++},e.prototype.rerenderCountIncrement=function(){this.pageRerenderCount>0&&this.pdfViewerBase.reRenderedCount++},e.prototype.resizeCanvas=function(e){var t=e-3;t=t>0?t:0;var i=e+3;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var o=t;o<=i;o++){var n=this.pdfViewerBase.getElement("_pageDiv_"+o),r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+o);if(n&&t<=o&&o<=i){var s=!1;if(this.pdfViewer.textSelectionModule&&(s=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(o)),null!=this.pdfViewerBase.pageSize[o]){var a=this.pdfViewerBase.pageSize[o].width*this.zoomFactor,l=this.pdfViewerBase.pageSize[o].height*this.zoomFactor;n.style.width=a+"px",n.style.height=l+"px",n.style.top=this.pdfViewerBase.pageSize[o].top*this.zoomFactor+"px",this.pdfViewer.enableRtl?n.style.right=this.pdfViewerBase.updateLeftPosition(o)+"px":n.style.left=this.pdfViewerBase.updateLeftPosition(o)+"px";var h=this.pdfViewerBase.getElement("_pageCanvas_"+o);if(h&&(h.style.width=a+"px",h.style.height=l+"px"),r&&(r.style.width=a+"px",r.style.height=l+"px",this.pdfViewer.textSelectionModule))if(this.isPinchZoomed)r.style.display="none";else if(this.isMagnified){var p=e-2==0?0:e-2,d=e===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:e;p<=o&&o<=d&&(this.pdfViewer.textSelectionModule.isTextSelection&&s||this.pdfViewerBase.textLayer.getTextSearchStatus())?(this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(o),this.pdfViewer.textSelectionModule.isTextSelection&&s&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(o)):r.style.display="none"}else r.style.display="none"}}}},e.prototype.zoomOverPages=function(e,t,i,o){var n=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-o,2));this.previousTouchDifference>-1&&(n>this.previousTouchDifference?this.pinchOut():n<this.previousTouchDifference&&this.pinchIn()),this.previousTouchDifference=n},e.prototype.pinchMoveEnd=function(){this.touchCenterX=0,this.touchCenterY=0,this.previousTouchDifference=-1,this.isPinchZoomed&&(this.isPinchScrolled=!1,this.isPagePinchZoomed=!0,this.pinchMoveScroll())},e.prototype.fitPageScrollMouseWheel=function(e){"fitToPage"===this.fitType&&(e.preventDefault(),e.wheelDelta>0?this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1):this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1))},e.prototype.magnifyBehaviorKeyDown=function(e){var t=!!!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;switch(e.keyCode){case 38:case 37:case 33:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 40:case 39:case 34:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 187:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomIn());break;case 189:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomOut());break;case 48:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.fitToPage());break;case 49:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.zoomTo(100))}},e.prototype.upwardScrollFitPage=function(e){e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e-1].top*this.zoomFactor,this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden")},e.prototype.updatePagesForFitPage=function(e){"fitToPage"===this.fitType&&(e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="hidden"),e<this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="hidden"))},e.prototype.onDoubleTapMagnification=function(){this.pdfViewer.toolbarModule.showToolbar(!1);var e=this.pdfViewerBase.viewerContainer.scrollTop;this.isTapToFitZoom?this.zoomTo(100*this.previousZoomFactor):this.zoomFactor<2?this.zoomTo(200):this.fitToWidth(),this.calculateScrollValues(e),this.isTapToFitZoom=!this.isTapToFitZoom},e.prototype.downwardScrollFitPage=function(e){e!==this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e+1].top*this.zoomFactor,e+1===this.pdfViewerBase.pageCount-1?this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden":this.pdfViewerBase.getElement("_pageDiv_"+(e+2)).style.visibility="hidden")},e.prototype.getMagnifiedValue=function(e){return e/this.previousZoomFactor*this.zoomFactor},e.prototype.destroy=function(){this.imageObjects=void 0},e.prototype.getZoomFactor=function(e){return e/100},e.prototype.getModuleName=function(){return"Magnification"},e}(),v=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber++,this.pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber--,this.pageNumber>0&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e&&this.pdfViewerBase.updateScrollTop(e-1)},e.prototype.goToFirstPage=function(){this.pageNumber=0,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.destroy=function(){this.pageNumber=0},e.prototype.getModuleName=function(){return"Navigation"},e}(),b=function(){function e(e,t){var i=this;this.thumbnailLimit=30,this.thumbnailThreshold=50,this.thumbnailTopMargin=10,this.isThumbnailClicked=!1,this.thumbnailClick=function(e){var t=i,o=t.getPageNumberFromID(e.srcElement.id);t.previousElement&&(t.previousElement.classList.remove("e-pv-thumbnail-selection"),t.previousElement.classList.remove("e-pv-thumbnail-focus"),t.previousElement.classList.add("e-pv-thumbnail-selection-ring")),e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o?(t.setSelectionStyle(e.srcElement.parentElement),t.previousElement=e.srcElement.parentElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o&&(t.setSelectionStyle(e.srcElement),t.previousElement=e.srcElement),t.isThumbnailClicked=!0,t.goToThumbnailPage(o+1),t.pdfViewerBase.focusViewerContainer()},this.thumbnailMouseOver=function(e){var t=i,o=t.getPageNumberFromID(e.srcElement.id);e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o?t.setMouseOverStyle(e.srcElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_image_"+o&&t.setMouseOverStyle(e.srcElement.parentElement)},this.thumbnailMouseLeave=function(e){var t=i,o=t.getPageNumberFromID(e.srcElement.id);e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_view"?t.setMouseLeaveStyle(e.srcElement.children[0].children[0]):e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_"+o&&t.setMouseLeaveStyle(e.srcElement.parentElement.children[0])},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createThumbnailContainer=function(){this.thumbnailView=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_view",className:"e-pv-thumbnail-view e-pv-thumbnail-row"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView)},e.prototype.createRequestForThumbnails=function(){var e=this;return!!document.documentMode?(this.requestCreation(e),null):new Promise(function(t,i){e.requestCreation(e)})},e.prototype.requestCreation=function(e){var t=this;e.isThumbnailCompleted?(e.startIndex=e.thumbnailLimit,e.thumbnailLimit=e.startIndex+e.thumbnailThreshold<e.pdfViewer.pageCount?e.startIndex+e.thumbnailThreshold:e.pdfViewer.pageCount):(e.thumbnailLimit=e.thumbnailLimit<e.pdfViewer.pageCount?e.thumbnailLimit:e.pdfViewer.pageCount,e.thumbnailLimit!==e.pdfViewer.pageCount&&(e.isThumbnailCompleted=!1,e.startIndex=0));var i=new XMLHttpRequest,o={startPage:e.startIndex,endPage:e.thumbnailLimit,sizeX:99.7,sizeY:141,hashId:e.pdfViewerBase.hashId};i.open("POST",e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.renderThumbnail),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.responseType="json",i.send(JSON.stringify(o)),i.onreadystatechange=function(t){if(4===i.readyState&&200===i.status){var o=t.currentTarget.response;"object"!=typeof o&&(o=JSON.parse(o)),e.renderThumbnailImage(o),e.isThumbnailCompleted||(e.startIndex=e.thumbnailLimit,e.isThumbnailCompleted=!0)}},i.onerror=function(o){t.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},e.prototype.gotoThumbnailImage=function(e){var t=this.checkThumbnailScroll(e);if(this.thumbnailView){var i=this.thumbnailView.children[e];if(i){var o=i.children[0];if(t){var n=o.offsetTop+o.clientTop-this.thumbnailTopMargin;this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=n}this.isThumbnailClicked||(this.previousElement&&(this.previousElement.classList.remove("e-pv-thumbnail-selection"),this.previousElement.classList.remove("e-pv-thumbnail-focus"),this.previousElement.classList.remove("e-pv-thumbnail-hover"),this.previousElement.classList.add("e-pv-thumbnail-selection-ring")),this.setFocusStyle(o,e)),this.previousElement=o.children[0]}}},e.prototype.checkThumbnailScroll=function(e){var t=!1;if(this.thumbnailView){var i=this.getVisibleThumbs(),o=i.views.length;if(o>0){var n=this.getPageNumberFromID(i.first.id),r=o>1?this.getPageNumberFromID(i.last.id):n;e<=n||e>=r?t=!0:i.views.some(function(i){var o=i.id.split("_"),n=o[o.length-1];return parseInt(n)===e&&(t=i.percent<100,!0)})}}return t},e.prototype.getPageNumberFromID=function(e){var t=e.split("_"),i=t[t.length-1];return parseInt(i)},e.prototype.setFocusStyle=function(e,t){e.children[0].id===this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+t&&this.setMouseFocusStyle(e.children[0])},e.prototype.renderThumbnailImage=function(e){if(this.thumbnailView)for(var i=this.startIndex;i<this.thumbnailLimit;i++){var o=t.createElement("a",{id:"page_"+i}),n=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_"+i,className:"e-pv-thumbnail e-pv-thumbnail-column"});this.thumbnailSelectionRing=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+i,className:"e-pv-thumbnail-selection-ring"}),n.appendChild(this.thumbnailSelectionRing);var r=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_pagenumber_"+i,className:"e-pv-thumbnail-number"});r.textContent=(i+1).toString(),n.appendChild(r),this.thumbnailImage=t.createElement("img",{id:this.pdfViewer.element.id+"_thumbnail_image_"+i,className:"e-pv-thumbnail-image"}),this.thumbnailImage.src=e.thumbnailImage[i],this.thumbnailSelectionRing.appendChild(this.thumbnailImage),o.appendChild(n),this.thumbnailView.appendChild(o),this.wireUpEvents(),0===i&&this.setMouseFocusToFirstPage()}if(this.pdfViewerBase.navigationPane.enableThumbnailButton(),this.thumbnailLimit!==this.pdfViewerBase.pageCount&&this.thumbnailView){!!document.documentMode?this.createRequestForThumbnails():Promise.all([this.createRequestForThumbnails()])}},e.prototype.wireUpEvents=function(){this.thumbnailSelectionRing&&(this.thumbnailSelectionRing.addEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.addEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.addEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.unwireUpEvents=function(){this.thumbnailSelectionRing&&this.thumbnailImage&&(this.thumbnailSelectionRing.removeEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.removeEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.removeEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.goToThumbnailPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e?this.pdfViewerBase.updateScrollTop(e-1):this.isThumbnailClicked=!1},e.prototype.setSelectionStyle=function(e){e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.remove("e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection")},e.prototype.setMouseOverStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-hover"))},e.prototype.setMouseLeaveStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")?e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection"),e.classList.add("e-pv-thumbnail-focus")):(e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"))},e.prototype.setMouseFocusStyle=function(e){e.classList.remove("e-pv-thumbnail-selection"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.add("e-pv-thumbnail-focus")},e.prototype.setMouseFocusToFirstPage=function(){var e=this.thumbnailView.children[0];if(e){var t=e.children[0].children[0];this.setMouseFocusStyle(t),this.previousElement=t}},e.prototype.clear=function(){if(this.startIndex=0,this.thumbnailLimit=0,this.isThumbnailCompleted=!1,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.sideBarContentContainer&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="block",this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0,this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="none"),this.thumbnailView)for(;this.thumbnailView.hasChildNodes();)this.thumbnailView.removeChild(this.thumbnailView.lastChild);this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.resetThumbnailView(),this.unwireUpEvents()},e.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children)},e.prototype.getVisibleElements=function(e,t){var i,o,n,r,s,a,l,h,p,d=e.scrollTop,c=d+e.clientHeight,u=e.scrollLeft,f=u+e.clientWidth,m=[],g=0===t.length?0:this.binarySearchFirstItem(t,function(e){return e.offsetTop+e.clientTop+e.clientHeight>d});t.length>0&&(g=this.backtrackBeforeAllVisibleElements(g,t,d));for(var w=-1,v=g,b=t.length;v<b;v++){if(i=this.getThumbnailElement(v),o=i,a=o.offsetLeft+o.clientLeft,n=o.offsetTop+o.clientTop,l=o.clientWidth,r=o.clientHeight,h=a+l,s=n+r,-1===w)s>=c&&(w=s);else if(n>w)break;s<=d||n>=c||h<=u||a>=f||(p=(r-(Math.max(0,d-n)+Math.max(0,s-c)))*(l-(Math.max(0,u-a)+Math.max(0,h-f)))*100/r/l|0,m.push({id:i.id,x:a,y:n,view:i,percent:p}))}return{first:m[0],last:m[m.length-1],views:m}},e.prototype.binarySearchFirstItem=function(e,t){var i=0,o=e.length-1;if(0===e.length||!t(this.getThumbnailElement(o)))return e.length-1;if(t(this.getThumbnailElement(i)))return i;for(;i<o;){var n=i+o>>1;t(this.getThumbnailElement(n))?o=n:i=n+1}return i},e.prototype.backtrackBeforeAllVisibleElements=function(e,t,i){if(e<2)return e;var o=this.getThumbnailElement(e),n=o.offsetTop+o.clientTop;n>=i&&(n=(o=this.getThumbnailElement(e-1)).offsetTop+o.clientTop);for(var r=e-2;r>=0&&!((o=this.getThumbnailElement(r)).offsetTop+o.clientTop+o.clientHeight<=n);--r)e=r;return e},e.prototype.getThumbnailElement=function(e){return this.thumbnailView.children[e].children[0]},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"ThumbnailView"},e}(),C=function(){function e(e,i){var o=this;this.isPageNavigationToolDisabled=!1,this.isMagnificationToolDisabled=!1,this.isSelectionToolDisabled=!1,this.isScrollingToolDisabled=!1,this.isOpenBtnVisible=!0,this.isNavigationToolVisible=!0,this.isMagnificationToolVisible=!0,this.isSelectionBtnVisible=!0,this.isScrollingBtnVisible=!0,this.isDownloadBtnVisible=!0,this.isPrintBtnVisible=!0,this.isSearchBtnVisible=!0,this.isTextSearchBoxDisplayed=!1,this.onToolbarKeydown=function(e){var t=e.target.id;t!==o.pdfViewer.element.id+"_currentPageInput"&&t!==o.pdfViewer.element.id+"_zoomDropDown"&&(e.preventDefault(),e.stopPropagation())},this.toolbarClickHandler=function(e){if(!t.Browser.isDevice)if(e.originalEvent.target===o.zoomDropdownItem.parentElement.childNodes[1]||e.originalEvent.target===o.zoomDropdownItem.parentElement.childNodes[2])e.cancel=!0;else if(e.originalEvent.target.id===o.pdfViewer.element.id+"_openIcon"){var i=e.originalEvent.target.parentElement.dataset;if(i&&i.tooltipId){var n=document.getElementById(i.tooltipId);n&&(n.style.display="none")}}switch(e.originalEvent.target.id){case o.pdfViewer.element.id+"_open":case o.pdfViewer.element.id+"_openIcon":o.fileInputElement.click(),t.Browser.isDevice&&(e.originalEvent.target.blur(),o.pdfViewerBase.focusViewerContainer());break;case o.pdfViewer.element.id+"_download":case o.pdfViewer.element.id+"_downloadIcon":o.pdfViewerBase.download();break;case o.pdfViewer.element.id+"_print":case o.pdfViewer.element.id+"_printIcon":o.pdfViewer.printModule&&o.pdfViewer.printModule.print();break;case o.pdfViewer.element.id+"_firstPage":case o.pdfViewer.element.id+"_firstPageIcon":o.pdfViewer.navigationModule&&o.pdfViewer.navigationModule.goToFirstPage();break;case o.pdfViewer.element.id+"_previousPage":case o.pdfViewer.element.id+"_previousPageIcon":o.pdfViewer.navigationModule&&o.pdfViewer.navigationModule.goToPreviousPage();break;case o.pdfViewer.element.id+"_nextPage":case o.pdfViewer.element.id+"_nextPageIcon":o.pdfViewer.navigationModule&&o.pdfViewer.navigationModule.goToNextPage();break;case o.pdfViewer.element.id+"_lastPage":case o.pdfViewer.element.id+"_lastPageIcon":o.pdfViewer.navigationModule&&o.pdfViewer.navigationModule.goToLastPage();break;case o.pdfViewer.element.id+"_zoomIn":case o.pdfViewer.element.id+"_zoomInIcon":o.pdfViewer.magnificationModule.zoomIn();break;case o.pdfViewer.element.id+"_zoomOut":case o.pdfViewer.element.id+"_zoomOutIcon":o.pdfViewer.magnificationModule.zoomOut();break;case o.pdfViewer.element.id+"_selectTool":case o.pdfViewer.element.id+"_selectToolIcon":o.isSelectionToolDisabled||(o.pdfViewerBase.initiateTextSelectMode(),o.updateInteractionTools(!0));break;case o.pdfViewer.element.id+"_handTool":case o.pdfViewer.element.id+"_handToolIcon":o.isScrollingToolDisabled||(o.pdfViewerBase.initiatePanning(),o.updateInteractionTools(!1));break;case o.pdfViewer.element.id+"_search":case o.pdfViewer.element.id+"_searchIcon":o.textSearchButtonHandler()}t.Browser.isDevice||e.originalEvent.target!==o.zoomDropdownItem.parentElement.childNodes[1]&&e.originalEvent.target!==o.zoomDropdownItem.parentElement.childNodes[2]&&e.originalEvent.target!==o.currentPageBoxElement&&e.originalEvent.target!==o.textSearchItem.childNodes[0]&&(e.originalEvent.target.blur(),o.pdfViewerBase.focusViewerContainer())},this.loadDocument=function(e){var t=e.target.files;if(null!==e.target.files[0]){var i=t[0];if(i){o.uploadedDocumentName=i.name;var n=new FileReader;n.readAsDataURL(i),n.onload=function(e){var t=e.currentTarget.result;o.pdfViewer.load(t,null)}}}},this.navigateToPage=function(e){if(13===e.which){var t=parseInt(o.currentPageBoxElement.value);null!==t&&t>0&&t<=o.pdfViewerBase.pageCount?o.pdfViewer.navigationModule&&o.pdfViewer.navigationModule.goToPage(t):o.updateCurrentPage(o.pdfViewerBase.currentPageNumber),o.currentPageBoxElement.blur(),o.pdfViewerBase.focusViewerContainer()}},this.textBoxFocusOut=function(){(null===o.currentPageBox.value||o.currentPageBox.value>=o.pdfViewerBase.pageCount||o.currentPageBox.value!==o.pdfViewerBase.currentPageNumber)&&o.updateCurrentPage(o.pdfViewerBase.currentPageNumber)},this.pdfViewer=e,this.pdfViewerBase=i}return e.prototype.intializeToolbar=function(e){var i=this.createToolbar(e);return!!document.documentMode&&this.totalPageItem.classList.add("e-pv-total-page-ms"),this.createFileElement(i),this.wireEvent(),this.updateToolbarItems(),t.Browser.isDevice||(this.applyToolbarSettings(),this.initialEnableItems()),i},e.prototype.showToolbar=function(e){var i=this.toolbarElement;e?i.style.display="block":(i.style.display="none",t.Browser.isDevice||(this.pdfViewerBase.navigationPane.sideBarToolbar.style.display="none"))},e.prototype.showToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.showOpenOption(t);break;case"PageNavigationTool":this.showPageNavigationTool(t);break;case"MagnificationTool":this.showMagnificationTool(t);break;case"SelectionTool":this.showSelectionTool(t);break;case"PanTool":this.showScrollingTool(t);break;case"DownloadOption":this.showDownloadOption(t);break;case"PrintOption":this.showPrintOption(t);break;case"SearchOption":this.showSearchOption(t)}this.applyHideToToolbar(!0,1,1),this.applyHideToToolbar(!0,8,8),this.applyHideToToolbar(!0,12,12),this.showSeparator(e)},e.prototype.enableToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.enableOpenOption(t);break;case"PageNavigationTool":this.isPageNavigationToolDisabled=t,this.enablePageNavigationTool(t);break;case"MagnificationTool":this.isMagnificationToolDisabled=t,this.enableMagnificationTool(t);break;case"SelectionTool":this.isSelectionToolDisabled=t,this.enableSelectionTool(t);break;case"PanTool":this.isScrollingToolDisabled=t,this.enableScrollingTool(t);break;case"DownloadOption":this.enableDownloadOption(t);break;case"PrintOption":this.enablePrintOption(t);break;case"SearchOption":this.enableSearchOption(t)}},e.prototype.showOpenOption=function(e){this.isOpenBtnVisible=e,this.applyHideToToolbar(e,0,0)},e.prototype.showPageNavigationTool=function(e){this.isNavigationToolVisible=e,this.applyHideToToolbar(e,2,7)},e.prototype.showMagnificationTool=function(e){this.isMagnificationToolVisible=e,this.applyHideToToolbar(e,9,11)},e.prototype.showSelectionTool=function(e){this.isSelectionBtnVisible=e,this.applyHideToToolbar(e,13,13)},e.prototype.showScrollingTool=function(e){this.isScrollingBtnVisible=e,this.applyHideToToolbar(e,14,14)},e.prototype.showDownloadOption=function(e){this.isDownloadBtnVisible=e,this.applyHideToToolbar(e,16,16)},e.prototype.showPrintOption=function(e){this.isPrintBtnVisible=e,this.applyHideToToolbar(e,17,17)},e.prototype.showSearchOption=function(e){this.isSearchBtnVisible=e,this.applyHideToToolbar(e,15,15)},e.prototype.enableOpenOption=function(e){this.toolbar.enableItems(this.openDocumentItem.parentElement,e)},e.prototype.enablePageNavigationTool=function(e){this.toolbar.enableItems(this.firstPageItem.parentElement,e),this.toolbar.enableItems(this.previousPageItem.parentElement,e),this.toolbar.enableItems(this.nextPageItem.parentElement,e),this.toolbar.enableItems(this.lastPageItem.parentElement,e),this.currentPageBox.readonly=!e},e.prototype.enableMagnificationTool=function(e){this.toolbar.enableItems(this.zoomInItem.parentElement,e),this.toolbar.enableItems(this.zoomOutItem.parentElement,e),this.zoomDropDown.readonly=!e},e.prototype.enableSelectionTool=function(e){this.toolbar.enableItems(this.textSelectItem.parentElement,e)},e.prototype.enableScrollingTool=function(e){this.toolbar.enableItems(this.panItem.parentElement,e)},e.prototype.enableDownloadOption=function(e){this.toolbar.enableItems(this.downloadItem.parentElement,e)},e.prototype.enablePrintOption=function(e){this.toolbar.enableItems(this.printItem.parentElement,e)},e.prototype.enableSearchOption=function(e){this.toolbar.enableItems(this.textSearchItem.parentElement,e)},e.prototype.resetToolbar=function(){t.Browser.isDevice||(this.currentPageBox.min=0,this.currentPageBox.value=0,this.updateTotalPage(),this.updateToolbarItems())},e.prototype.updateToolbarItems=function(){t.Browser.isDevice?0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.toolbar.enableItems(this.moreOptionItem.parentElement,!1)):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.toolbar.enableItems(this.moreOptionItem.parentElement,!0)):0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.downloadItem.parentElement,!1),this.toolbar.enableItems(this.printItem.parentElement,!1),this.updateNavigationButtons(),this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!1),this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!1),this.toolbar.enableItems(this.textSearchItem.parentElement,!1)):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.downloadItem.parentElement,!0),this.toolbar.enableItems(this.printItem.parentElement,!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!0),this.updateNavigationButtons(),this.updateZoomButtons(),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!1),this.updateInteractionItems(),this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch&&this.toolbar.enableItems(this.textSearchItem.parentElement,!0))},e.prototype.updateNavigationButtons=function(){this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled?0===this.pdfViewerBase.pageCount||1===this.pdfViewerBase.currentPageNumber&&1===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):1===this.pdfViewerBase.currentPageNumber&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount&&(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1),this.currentPageBox.readonly=!0)},e.prototype.updateZoomButtons=function(){!this.pdfViewer.magnificationModule||this.isMagnificationToolDisabled||t.Browser.isDevice||(this.pdfViewer.magnificationModule.zoomFactor<=.5?(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1)):this.pdfViewer.magnificationModule.zoomFactor>=4?(this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)):(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)))},e.prototype.destroy=function(){this.unWireEvent(),this.moreDropDown&&this.moreDropDown.destroy(),this.toolbar.destroy(),this.toolbarElement.remove()},e.prototype.updateCurrentPage=function(e){t.Browser.isDevice?(this.pdfViewerBase.mobileSpanContainer.innerHTML=e.toString(),this.pdfViewerBase.mobilecurrentPageContainer.innerHTML=e.toString()):(this.currentPageBox.value===e&&(this.currentPageBoxElement.value=e.toString()),this.currentPageBox.value=e),this.pdfViewerBase.currentPageNumber=e},e.prototype.updateTotalPage=function(){t.Browser.isDevice||(this.pdfViewerBase.pageCount>0&&(this.currentPageBox.min=1),this.totalPageItem.textContent="of "+this.pdfViewerBase.pageCount.toString())},e.prototype.openFileDialogBox=function(e){e.preventDefault(),this.fileInputElement.click()},e.prototype.createToolbar=function(e){return this.toolbarElement=t.createElement("div",{id:this.pdfViewer.element.id+"_toolbarContainer",className:"e-pv-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),t.Browser.isDevice?this.createToolbarItemsForMobile():(this.itemsContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_toolbarItemsContainer"}),this.itemsContainer.style.position="absolute",this.toolbarElement.appendChild(this.itemsContainer),this.createToolbarItemsGeneral(),this.toolbar=new i.Toolbar({clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup"}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.toolbarElement.addEventListener("keydown",this.onToolbarKeydown)),this.toolbarElement},e.prototype.createToolbarItemsGeneral=function(){var e=this.createToolbarItem("button",this.pdfViewer.element.id+"_open",this.pdfViewer.localeObj.getConstant("Open"),"e-pv-open-document");this.openDocumentItem=e.firstChild,this.itemsContainer.appendChild(e);var i=t.createElement("div",{className:"e-separator"});this.itemsContainer.appendChild(i),this.createToolbarNavigationItems();var o=t.createElement("div",{className:"e-separator"});this.itemsContainer.appendChild(o),this.createToolbarMagnificationItems();var n=t.createElement("div",{className:"e-separator"});this.itemsContainer.appendChild(n);var r=this.createToolbarItem("button",this.pdfViewer.element.id+"_selectTool",this.pdfViewer.localeObj.getConstant("Text Selection"),"e-pv-text-select-tool");this.textSelectItem=r.firstChild,this.itemsContainer.appendChild(r);var a=this.createToolbarItem("button",this.pdfViewer.element.id+"_handTool",this.pdfViewer.localeObj.getConstant("Panning"),"e-pv-pan-tool");this.panItem=a.firstChild,this.itemsContainer.appendChild(a);var l=this.createToolbarItem("button",this.pdfViewer.element.id+"_search",this.pdfViewer.localeObj.getConstant("Text Search"),"e-pv-text-search");this.textSearchItem=l.firstChild,this.itemsContainer.appendChild(l),l.style.position="absolute";var h=this.createToolbarItem("button",this.pdfViewer.element.id+"_download",this.pdfViewer.localeObj.getConstant("Download file"),"e-pv-download-document");this.downloadItem=h.firstChild,h.style.position="absolute",this.pdfViewer.enableRtl?h.style.right=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()+"px":h.style.left=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()+"px",this.itemsContainer.appendChild(h);var p=this.createToolbarItem("button",this.pdfViewer.element.id+"_print",this.pdfViewer.localeObj.getConstant("Print"),"e-pv-print-document");this.printItem=p.firstChild,p.style.position="absolute",this.pdfViewer.enableRtl?p.style.right=void 0!==h?this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-40+"px":this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()+"px":p.style.left=void 0!==h?this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-43+"px":this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()+"px",this.pdfViewer.enableRtl?(l.style.right=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-h.clientWidth-p.clientWidth-56+"px",l.style.paddingTop="7px"):l.style.left=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-h.clientWidth-p.clientWidth-54+"px",this.itemsContainer.appendChild(p);var d=[{percent:"50%",id:"0"},{percent:"75%",id:"1"},{percent:"100%",id:"2"},{percent:"125%",id:"3"},{percent:"150%",id:"4"},{percent:"200%",id:"5"},{percent:"400%",id:"6"},{percent:this.pdfViewer.localeObj.getConstant("Fit Page"),id:"7"},{percent:this.pdfViewer.localeObj.getConstant("Fit Width"),id:"8"},{percent:this.pdfViewer.localeObj.getConstant("Automatic"),id:"9"}];this.zoomDropDown=new s.ComboBox({dataSource:d,text:"100%",fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down",popupHeight:"402px",showClearButton:!1}),this.zoomDropDown.appendTo(this.zoomDropdownItem)},e.prototype.createToolbarNavigationItems=function(){var e,t,i,o;e=this.pdfViewer.enableRtl?this.createToolbarItem("button",this.pdfViewer.element.id+"_firstPage",this.pdfViewer.localeObj.getConstant("Go To First Page"),"e-pv-last-page-navigation"):this.createToolbarItem("button",this.pdfViewer.element.id+"_firstPage",this.pdfViewer.localeObj.getConstant("Go To First Page"),"e-pv-first-page-navigation"),this.firstPageItem=e.firstChild,this.itemsContainer.appendChild(e),t=this.pdfViewer.enableRtl?this.createToolbarItem("button",this.pdfViewer.element.id+"_previousPage",this.pdfViewer.localeObj.getConstant("Previous Page"),"e-pv-next-page-navigation"):this.createToolbarItem("button",this.pdfViewer.element.id+"_previousPage",this.pdfViewer.localeObj.getConstant("Previous Page"),"e-pv-previous-page-navigation"),this.previousPageItem=t.firstChild,this.itemsContainer.appendChild(t),i=this.pdfViewer.enableRtl?this.createToolbarItem("button",this.pdfViewer.element.id+"_nextPage",this.pdfViewer.localeObj.getConstant("Next Page"),"e-pv-previous-page-navigation"):this.createToolbarItem("button",this.pdfViewer.element.id+"_nextPage",this.pdfViewer.localeObj.getConstant("Next Page"),"e-pv-next-page-navigation"),this.nextPageItem=i.firstChild,this.itemsContainer.appendChild(i),o=this.pdfViewer.enableRtl?this.createToolbarItem("button",this.pdfViewer.element.id+"_lastPage",this.pdfViewer.localeObj.getConstant("Go To Last Page"),"e-pv-first-page-navigation"):this.createToolbarItem("button",this.pdfViewer.element.id+"_lastPage",this.pdfViewer.localeObj.getConstant("Go To Last Page"),"e-pv-last-page-navigation"),this.lastPageItem=o.firstChild,this.itemsContainer.appendChild(o);var n=this.createToolbarItem("input",this.pdfViewer.element.id+"_currentPageInput",this.pdfViewer.localeObj.getConstant("Page Number"),null);this.currentPageBox=new r.NumericTextBox({value:0,format:"##",cssClass:"e-pv-current-page-box",showSpinButton:!1}),this.currentPageBoxElement=n.firstChild,this.currentPageBox.appendTo(this.currentPageBoxElement);var s=this.createToolbarItem("span",this.pdfViewer.element.id+"_totalPage",null,"e-pv-total-page");this.totalPageItem=s.firstChild,this.pdfViewer.enableRtl?(this.itemsContainer.appendChild(s),n.style.paddingLeft="8px",this.itemsContainer.appendChild(n)):(this.itemsContainer.appendChild(n),this.itemsContainer.appendChild(s)),this.updateTotalPage()},e.prototype.createToolbarMagnificationItems=function(){var e=this.createToolbarItem("button",this.pdfViewer.element.id+"_zoomOut",this.pdfViewer.localeObj.getConstant("Zoom Out"),"e-pv-zoom-out");this.zoomOutItem=e.firstChild,this.itemsContainer.appendChild(e);var t=this.createToolbarItem("button",this.pdfViewer.element.id+"_zoomIn",this.pdfViewer.localeObj.getConstant("Zoom In"),"e-pv-zoom-in");this.zoomInItem=t.firstChild,this.itemsContainer.appendChild(t);var i=this.createToolbarItem("input",this.pdfViewer.element.id+"_zoomDropDown",this.pdfViewer.localeObj.getConstant("Zoom"),null);i.className=i.className+" e-pv-zoom-drop-down-container",this.zoomDropdownItem=i.firstChild,this.itemsContainer.appendChild(i)},e.prototype.createToolbarItemsForMobile=function(){this.toolbarElement.classList.add("e-pv-mobile-toolbar");var e='<button id="'+this.pdfViewer.element.id+'_more_option" class="e-tbar-btn"></button>';this.toolbar=new i.Toolbar({items:[{prefixIcon:"e-pv-open-document-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Open"),id:this.pdfViewer.element.id+"_open"},{prefixIcon:"e-pv-text-search-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Text Search"),id:this.pdfViewer.element.id+"_search",align:"Right"},{template:e,align:"Right"}],clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup"}),this.toolbar.appendTo(this.toolbarElement),this.openDocumentItem=this.pdfViewerBase.getElement("_open"),this.openDocumentItem.classList.add("e-pv-open-document"),this.openDocumentItem.firstElementChild.id=this.pdfViewer.element.id+"_openIcon",this.textSearchItem=this.pdfViewerBase.getElement("_search"),this.textSearchItem.classList.add("e-pv-text-search"),this.textSearchItem.firstElementChild.id=this.pdfViewer.element.id+"_searchIcon",this.createMoreOption(this.pdfViewer.element.id+"_more_option")},e.prototype.createMoreOption=function(e){var t=this;this.moreOptionItem=document.getElementById(e);var i=[{text:this.pdfViewer.localeObj.getConstant("Download"),id:this.pdfViewer.element.id+"_menu_download",iconCss:"e-icons e-pv-download-document-icon e-pv-icon"},{text:this.pdfViewer.localeObj.getConstant("Bookmarks"),id:this.pdfViewer.element.id+"_menu_bookmarks",iconCss:"e-icons e-pv-bookmark-icon e-pv-icon"}];this.moreDropDown=new a.DropDownButton({items:i,iconCss:"e-pv-more-icon e-pv-icon",cssClass:"e-caret-hide",open:function(e){var i=t.moreDropDown.element.getBoundingClientRect();e.element.parentElement.style.left=i.left+i.width-e.element.parentElement.offsetWidth+"px"},select:function(e){switch(e.item.id){case t.pdfViewer.element.id+"_menu_download":t.pdfViewerBase.download();break;case t.pdfViewer.element.id+"_menu_bookmarks":t.showToolbar(!1),t.pdfViewerBase.navigationPane.createNavigationPaneMobile("bookmarks")}},beforeItemRender:function(e){e.item.id===t.pdfViewer.element.id+"_menu_bookmarks"&&(t.pdfViewer.bookmarkViewModule&&t.pdfViewer.bookmarkViewModule.bookmarks?e.element.classList.remove("e-disabled"):e.element.classList.add("e-disabled"))},close:function(e){t.moreOptionItem.blur(),t.pdfViewerBase.focusViewerContainer()}}),this.moreDropDown.appendTo("#"+e)},e.prototype.createToolbarItem=function(e,i,n,r){var s=t.createElement("div",{id:i+"Container"}),a=t.createElement(e,{id:i});if(null!==r&&(s.className=r+"-container e-overflow-show e-popup-text",a.className=r),"button"===e&&i!==this.pdfViewer.element.id+"_zoomDropDown")if(a.className="e-btn e-tbar-btn e-icon-btn e-pv-tbar-btn "+r,this.pdfViewer.enableRtl){l=t.createElement("span",{id:i+"Icon",className:r+"-icon e-pv-icon e-right"});a.appendChild(l)}else{var l=t.createElement("span",{id:i+"Icon",className:r+"-icon e-pv-icon"});a.appendChild(l)}else"input"===e&&i!==this.pdfViewer.element.id+"_zoomDropDown"&&(a.type="text");if(s.appendChild(a),null!==n){new o.Tooltip({content:n,opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(a)}return s},e.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},e.prototype.createFileElement=function(e){this.fileInputElement=t.createElement("input",{id:this.pdfViewer.element.id+"_fileUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file"}}),this.fileInputElement.setAttribute("accept",".pdf"),e.appendChild(this.fileInputElement)},e.prototype.wireEvent=function(){this.fileInputElement.addEventListener("change",this.loadDocument),t.Browser.isDevice||(this.toolbarElement.addEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.currentPageBoxElement.addEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.addEventListener("keypress",this.navigateToPage),this.zoomDropDown.change=this.zoomPercentSelect.bind(this),this.zoomDropDown.element.addEventListener("keypress",this.onZoomDropDownInput.bind(this)),this.zoomDropDown.element.addEventListener("click",this.onZoomDropDownInputClick.bind(this)))},e.prototype.unWireEvent=function(){this.fileInputElement.removeEventListener("change",this.loadDocument),t.Browser.isDevice||(this.toolbarElement.removeEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.currentPageBoxElement.removeEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.removeEventListener("keypress",this.navigateToPage),this.zoomDropDown.removeEventListener("change",this.zoomPercentSelect),this.zoomDropDown.element.removeEventListener("keypress",this.onZoomDropDownInput),this.zoomDropDown.element.removeEventListener("click",this.onZoomDropDownInputClick))},e.prototype.onToolbarResize=function(e){if(t.Browser.isDevice)this.pdfViewerBase.navigationPane.toolbarResize();else{var i=document.getElementById(this.pdfViewer.element.id+"_toolbarContainer_nav"),o=document.getElementById(this.pdfViewer.element.id+"_downloadContainer"),n=document.getElementById(this.pdfViewer.element.id+"_printContainer"),r=document.getElementById(this.pdfViewer.element.id+"_searchContainer");i||(o&&(this.pdfViewer.enableRtl?(o.style.right=e+"px",o.style.position="absolute"):(o.style.left=e+"px",o.style.position="absolute")),n&&(this.pdfViewer.enableRtl?null!==o?(n.style.right=e-o.clientWidth+3+"px",n.style.position="absolute"):(n.style.right=e+"px",n.style.position="absolute"):null!==o?(n.style.left=e-o.clientWidth+"px",n.style.position="absolute"):(n.style.left=e+"px",n.style.position="absolute")),r&&(r.style.position="absolute",null!==n?this.pdfViewer.enableRtl?r.style.right=e-o.clientWidth-n.clientWidth+2+"px":r.style.left=parseFloat(n.style.left)-n.clientWidth+"px":null!==o?(this.pdfViewer.enableRtl&&(r.style.right=e-o.clientWidth+3+"px"),r.style.left=parseFloat(o.style.left)-o.clientWidth+"px"):(this.pdfViewer.enableRtl&&(r.style.right=e+"px"),r.style.left=e+"px")))}},e.prototype.toolbarOnMouseup=function(e){e.target!==this.itemsContainer&&e.target!==this.toolbarElement||this.pdfViewerBase.focusViewerContainer()},e.prototype.applyHideToToolbar=function(e,t,i){for(var o=!e,n=t;n<=i;n++)this.toolbar.hideItem(n,o)},e.prototype.onZoomDropDownInput=function(e){if((e.which<48||e.which>57)&&8!==e.which&&13!==e.which)return e.preventDefault(),!1;if(13===e.which){e.preventDefault();var t=this.zoomDropDown.element.value;this.zoomDropDownChange(t)}return!0},e.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select()},e.prototype.zoomPercentSelect=function(e){if(this.pdfViewerBase.pageCount>0)if(e.isInteracted){if(e.itemData){var t=e.itemData.percent;this.zoomDropDownChange(t)}}else this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor)},e.prototype.zoomDropDownChange=function(e){e!==this.pdfViewer.localeObj.getConstant("Fit Width")&&e!==this.pdfViewer.localeObj.getConstant("Fit Page")&&e!==this.pdfViewer.localeObj.getConstant("Automatic")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.zoomTo(parseFloat(e)),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Width")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.fitToWidth(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Page")?(this.pdfViewer.magnificationModule.fitToPage(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Automatic")&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.fitToAuto(),this.zoomDropDown.focusOut())},e.prototype.updateZoomPercentage=function(e){if(!t.Browser.isDevice){var i=parseInt((100*e).toString())+"%";this.zoomDropDown.text===i&&(this.zoomDropDown.element.value=i),9===this.zoomDropDown.index&&(this.zoomDropDown.value=2),this.zoomDropDown.text=i}},e.prototype.updateInteractionItems=function(){this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection?this.toolbar.enableItems(this.textSelectItem.parentElement,!0):this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!0),"TextSelection"===this.pdfViewer.interactionMode?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem),this.pdfViewerBase.initiatePanning())},e.prototype.textSearchButtonHandler=function(){if(t.Browser.isDevice)this.showToolbar(!1),this.pdfViewerBase.navigationPane.createNavigationPaneMobile("search");else if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0)if(this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed,this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed),this.isTextSearchBoxDisplayed){this.selectItem(this.textSearchItem);var e=document.getElementById(this.pdfViewer.element.id+"_search_input");e.select(),e.focus()}else this.deSelectItem(this.textSearchItem)},e.prototype.selectItem=function(e){e.classList.add("e-pv-select")},e.prototype.deSelectItem=function(e){e.classList.remove("e-pv-select")},e.prototype.updateInteractionTools=function(e){e?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem))},e.prototype.initialEnableItems=function(){this.pdfViewer.enableToolbar?this.showToolbar(!0):this.showToolbar(!1),this.pdfViewer.enablePrint?this.showPrintOption(!0):this.showPrintOption(!1),this.pdfViewer.enableDownload?this.showDownloadOption(!0):this.showDownloadOption(!1),this.pdfViewer.enableTextSearch?this.showSearchOption(!0):this.showSearchOption(!1)},e.prototype.showSeparator=function(e){(!this.isOpenBtnVisible||!this.isNavigationToolVisible&&this.isOpenBtnVisible&&this.isDownloadBtnVisible&&this.isPrintBtnVisible||this.isOpenBtnVisible&&1===e.length)&&this.applyHideToToolbar(!1,1,1),this.isNavigationToolVisible&&this.isMagnificationToolVisible||this.isOpenBtnVisible||this.applyHideToToolbar(!1,8,8),(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&this.isSelectionBtnVisible&&this.isScrollingBtnVisible)&&this.applyHideToToolbar(!1,12,12)},e.prototype.applyToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.toolbarItem;-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("PageNavigationTool")?this.showPageNavigationTool(!0):this.showPageNavigationTool(!1),-1!==e.indexOf("MagnificationTool")?this.showMagnificationTool(!0):this.showMagnificationTool(!1),-1!==e.indexOf("SelectionTool")?this.showSelectionTool(!0):this.showSelectionTool(!1),-1!==e.indexOf("PanTool")?this.showScrollingTool(!0):this.showScrollingTool(!1),-1!==e.indexOf("PrintOption")?this.showPrintOption(!0):this.showPrintOption(!1),-1!==e.indexOf("DownloadOption")?this.showDownloadOption(!0):this.showDownloadOption(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1),this.showSeparator(e)},e.prototype.getModuleName=function(){return"Toolbar"},e}(),y=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),V=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},S=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return y(i,e),V([t.Property(!0)],i.prototype,"showTooltip",void 0),V([t.Property()],i.prototype,"toolbarItem",void 0),i}(t.ChildProperty),x=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return y(i,e),V([t.Property("Load")],i.prototype,"load",void 0),V([t.Property("Unload")],i.prototype,"unload",void 0),V([t.Property("RenderPdfPages")],i.prototype,"renderPages",void 0),V([t.Property("RenderPdfPages")],i.prototype,"print",void 0),V([t.Property("Download")],i.prototype,"download",void 0),V([t.Property("RenderThumbnailImages")],i.prototype,"renderThumbnail",void 0),i}(t.ChildProperty),T=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.fileName=null,o.defaultLocale={PdfViewer:"PDF Viewer",Cancel:"Cancel","Download file":"Download file",Download:"Download","Enter Password":"This document is password protected. Please enter a password.","File Corrupted":"File Corrupted","File Corrupted Content":"The file is corrupted and cannot be opened.","Fit Page":"Fit Page","Fit Width":"Fit Width",Automatic:"Automatic","Go To First Page":"Show first page","Invalid Password":"Incorrect Password. Please try again.","Next Page":"Show next page",OK:"OK",Open:"Open file","Page Number":"Current page number","Previous Page":"Show previous page","Go To Last Page":"Show last page",Zoom:"Zoom","Zoom In":"Zoom in","Zoom Out":"Zoom out","Page Thumbnails":"Page thumbnails",Bookmarks:"Bookmarks",Print:"Print file","Password Protected":"Password Required",Copy:"Copy","Text Selection":"Text selection tool",Panning:"Pan mode","Text Search":"Find text","Find in document":"Find in document","Match case":"Match case",Apply:"Apply",GoToPage:"Go to Page","No matches":"Viewer has finished searching the document. No more matches were found","No Text Found":"No Text Found","Server error":"Web-service is not listening. PDF Viewer depends on web-service for all it's features. Please start the web service to continue."},o.viewerBase=new f(o),o}return y(i,e),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this.viewerBase.pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPageNumber",{get:function(){return this.viewerBase.currentPageNumber},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zoomPercentage",{get:function(){return 100*this.magnificationModule.zoomFactor},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bookmark",{get:function(){return this.bookmarkViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"print",{get:function(){return this.printModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"magnification",{get:function(){return this.magnificationModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"navigation",{get:function(){return this.navigationModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textSearch",{get:function(){return this.textSearchModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toolbar",{get:function(){return this.toolbarModule},enumerable:!0,configurable:!0}),i.prototype.preRender=function(){this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale)},i.prototype.render=function(){this.viewerBase.initializeComponent(),this.enableTextSelection&&this.textSelectionModule?this.textSelectionModule.enableTextSelectionMode():this.viewerBase.disableTextSelectionMode()},i.prototype.getModuleName=function(){return"PdfViewer"},i.prototype.getLocaleConstants=function(){return this.defaultLocale},i.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed)for(var i=0,o=Object.keys(e);i<o.length;i++){switch(o[i]){case"enableToolbar":this.notify("",{module:"toolbar",enable:this.enableToolbar})}}},i.prototype.getPersistData=function(){return"PdfViewer"},i.prototype.requiredModules=function(){var e=[];return this.enableMagnification&&e.push({member:"Magnification",args:[this,this.viewerBase]}),this.enableNavigation&&e.push({member:"Navigation",args:[this,this.viewerBase]}),this.enableToolbar&&e.push({member:"Toolbar",args:[this,this.viewerBase]}),this.enableHyperlink&&e.push({member:"LinkAnnotation",args:[this,this.viewerBase]}),this.enableThumbnail&&e.push({member:"ThumbnailView",args:[this,this.viewerBase]}),this.enableBookmark&&e.push({member:"BookmarkView",args:[this,this.viewerBase]}),this.enableTextSelection&&e.push({member:"TextSelection",args:[this,this.viewerBase]}),this.enableTextSearch&&e.push({member:"TextSearch",args:[this,this.viewerBase]}),this.enablePrint&&e.push({member:"Print",args:[this,this.viewerBase]}),e},i.prototype.load=function(e,t){0!==this.viewerBase.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.viewerBase.pageCount=0,this.viewerBase.currentPageNumber=0,this.toolbarModule&&this.toolbarModule.resetToolbar(),this.viewerBase.initiatePageRender(e,t)},i.prototype.download=function(){this.enableDownload&&this.viewerBase.download()},i.prototype.unload=function(){this.viewerBase.clear(!0),this.viewerBase.pageCount=0,this.toolbarModule.resetToolbar(),this.magnificationModule.zoomTo(100)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.toolbarModule&&this.toolbarModule.destroy(),t.isNullOrUndefined(this.element)||(this.element.classList.remove("e-pdfviewer"),this.element.innerHTML=""),this.viewerBase.destroy()},i.prototype.fireDocumentLoad=function(){var e={name:"documentLoad",documentName:this.fileName};this.trigger("documentLoad",e)},i.prototype.fireDocumentUnload=function(e){var t={name:"documentUnload",documentName:e};this.trigger("documentUnload",t)},i.prototype.fireDocumentLoadFailed=function(e,t){var i={name:"documentLoadFailed",documentName:this.fileName,isPasswordRequired:e,password:t};this.trigger("documentLoadFailed",i)},i.prototype.fireAjaxRequestFailed=function(e,t){var i={name:"ajaxRequestFailed",documentName:this.fileName,errorStatusCode:e,errorMessage:t};this.trigger("ajaxRequestFailed",i)},i.prototype.firePageClick=function(e,t,i){var o={name:"pageClick",documentName:this.fileName,x:e,y:t,pageNumber:i};this.trigger("pageClick",o)},i.prototype.firePageChange=function(e){var t={name:"pageChange",documentName:this.fileName,currentPageNumber:this.viewerBase.currentPageNumber,previousPageNumber:e};this.trigger("pageChange",t)},i.prototype.fireZoomChange=function(){var e={name:"zoomChange",zoomValue:100*this.magnificationModule.zoomFactor,previousZoomValue:100*this.magnificationModule.previousZoomFactor};this.trigger("zoomChange",e)},i.prototype.fireHyperlinkClick=function(e){var t={name:"hyperlinkClick",hyperlink:e};this.trigger("hyperlinkClick",t)},V([t.Property()],i.prototype,"serviceUrl",void 0),V([t.Property()],i.prototype,"documentPath",void 0),V([t.Property("auto")],i.prototype,"height",void 0),V([t.Property("auto")],i.prototype,"width",void 0),V([t.Property(!0)],i.prototype,"enableToolbar",void 0),V([t.Property(!0)],i.prototype,"enableDownload",void 0),V([t.Property(!0)],i.prototype,"enablePrint",void 0),V([t.Property(!0)],i.prototype,"enableThumbnail",void 0),V([t.Property(!0)],i.prototype,"enableBookmark",void 0),V([t.Property(!0)],i.prototype,"enableHyperlink",void 0),V([t.Property("CurrentTab")],i.prototype,"hyperlinkOpenState",void 0),V([t.Property(!0)],i.prototype,"enableNavigation",void 0),V([t.Property(!0)],i.prototype,"enableMagnification",void 0),V([t.Property(!0)],i.prototype,"enableTextSelection",void 0),V([t.Property(!0)],i.prototype,"enableTextSearch",void 0),V([t.Property("TextSelection")],i.prototype,"interactionMode",void 0),V([t.Property({showTooltip:!0,toolbarItem:["OpenOption","UndoRedoTool","PageNavigationTool","MagnificationTool","PanTool","SelectionTool","CommentOption","TextMarkupAnnotationOption","FreeTextAnnotationOption","InkAnnotationOption","ShapeAnnotationOption","StampAnnotation","SignatureOption","SearchOption","PrintOption","DownloadOption"]})],i.prototype,"toolbarSettings",void 0),V([t.Property({load:"Load",renderPages:"RenderPdfPages",unload:"Unload",download:"Download",renderThumbnail:"RenderThumbnailImages"})],i.prototype,"serverActionSettings",void 0),V([t.Event()],i.prototype,"documentLoad",void 0),V([t.Event()],i.prototype,"documentUnload",void 0),V([t.Event()],i.prototype,"documentLoadFailed",void 0),V([t.Event()],i.prototype,"ajaxRequestFailed",void 0),V([t.Event()],i.prototype,"pageClick",void 0),V([t.Event()],i.prototype,"pageChange",void 0),V([t.Event()],i.prototype,"hyperlinkClick",void 0),V([t.Event()],i.prototype,"zoomChange",void 0),i=V([t.NotifyPropertyChanges],i)}(t.Component),B=function(){function e(e,t){var i=this;this.childNavigateCount=0,this.bookmarkClick=function(e){if(e.event.target.classList.contains("e-icons"))i.childNavigateCount++;else{var t=e.data.Id;i.childNavigateCount=0,i.pdfViewerBase.navigationPane.goBackToToolbar(),i.navigateToBookmark(t)}return!1},this.nodeClick=function(e){i.setHeight(e.node);var t=Number(e.nodeData.id);return i.navigateToBookmark(t),!1},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createRequestForBookmarks=function(){var e=this,t=this,i=new XMLHttpRequest,o={hashId:this.pdfViewerBase.hashId};i.open("POST",t.pdfViewer.serviceUrl+"/Bookmarks"),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.responseType="json",i.send(JSON.stringify(o)),i.onreadystatechange=function(t){if(4===i.readyState&&200===i.status){e.pdfViewerBase.navigationPane&&e.pdfViewerBase.navigationPane.disableBookmarkButton();var o=t.currentTarget.response;o&&("object"!=typeof o&&(o=JSON.parse(o)),e.bookmarks={bookMark:o.Bookmarks},e.bookmarksDestination={bookMarkDestination:o.BookmarksDestination}),e.pdfViewerBase.navigationPane&&(null==e.bookmarks?e.pdfViewerBase.navigationPane.disableBookmarkButton():(e.pdfViewerBase.navigationPane.enableBookmarkButton(),e.isBookmarkViewDiv=!1))}},i.onerror=function(o){e.pdfViewerBase.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},e.prototype.renderBookmarkcontent=function(){var e=this;if(!this.isBookmarkViewDiv){this.bookmarkView=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);var o=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmark_iconview",className:"e-pv-bookmark-icon-view"});if(this.pdfViewer.enableRtl){n=t.createElement("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon e-right"});o.appendChild(n)}else{var n=t.createElement("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon"});o.appendChild(n)}var r=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmark_Title",className:"e-pv-bookmark-Title"});this.pdfViewer.enableRtl?r.style.paddingRight="26px":r.style.paddingLeft="40px",r.innerText="${Title}",o.appendChild(r),this.treeObj=new i.TreeView({fields:{dataSource:this.bookmarks.bookMark,id:"Id",text:"Title",child:"Child",hasChildren:"HasChild"},nodeTemplate:o.outerHTML,nodeSelected:this.nodeClick.bind(this)}),this.pdfViewer.enableRtl&&(this.treeObj.enableRtl=!0),this.treeObj.appendTo(this.bookmarkView),["mouseover","keydown"].forEach(function(t){return e.bookmarkView.addEventListener(t,function(t){e.setHeight(t.target)})}),this.isBookmarkViewDiv=!0}this.bookmarkView.style.display="block"},e.prototype.renderBookmarkContentMobile=function(){null!=this.bookmarkView&&this.bookmarkView.remove(),this.bookmarkView=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.getElement("_bookmarks_container").appendChild(this.bookmarkView),this.bookmarkList=new l.ListView({dataSource:this.bookmarks.bookMark,fields:{id:"Id",text:"Title",child:"Child"},showHeader:!1,select:this.bookmarkClick.bind(this)}),this.bookmarkList.appendTo(this.bookmarkView)},e.prototype.setHeight=function(e){this.treeObj.fullRowSelect&&(e.classList.contains("e-treeview")?e=e.querySelector(".e-node-focus").querySelector(".e-fullrow"):e.classList.contains("e-list-parent")?e=e.querySelector(".e-fullrow"):"e-fullrow"!==e.classList.value&&e.closest(".e-list-item")&&(e=e.closest(".e-list-item").querySelector(".e-fullrow")),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))},e.prototype.setBookmarkContentHeight=function(){var e=this.treeObj.element;this.treeObj.fullRowSelect&&(e.classList.contains("e-treeview")&&(e=e.querySelector(".e-node-focus").querySelector(".e-fullrow")),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))},e.prototype.navigateToBookmark=function(e){var t=this.bookmarksDestination.bookMarkDestination[e].PageIndex,i=this.bookmarksDestination.bookMarkDestination[e].Y;this.goToBookmark(t,i)},e.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination)return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination}},e.prototype.goToBookmark=function(e,i){var o=this.pdfViewerBase.pageSize[e-1].height,n=(this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor()+(o-i)*this.pdfViewerBase.getZoomFactor()).toString();return this.pdfViewerBase.viewerContainer.scrollTop=parseInt(n),t.Browser.isDevice&&(this.pdfViewerBase.mobileScrollerContainer.style.display="",this.pdfViewerBase.updateMobileScrollerPosition()),this.pdfViewerBase.focusViewerContainer(),!1},e.prototype.clear=function(){if(this.pdfViewerBase.navigationPane&&(this.pdfViewerBase.navigationPane.disableBookmarkButton(),this.pdfViewerBase.navigationPane.updateViewerContainerOnClose()),this.bookmarks&&(this.bookmarks.bookMark=[],this.bookmarks=null),this.bookmarksDestination&&(this.bookmarksDestination.bookMarkDestination=[]),null!=this.bookmarkView)for(null!==this.bookmarkView.parentElement&&this.bookmarkView.parentElement.removeChild(this.bookmarkView);this.bookmarkView.hasChildNodes();)this.bookmarkView.removeChild(this.bookmarkView.lastChild)},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"BookmarkView"},e}(),P=function(){function e(e,t){var i=this;this.isTextSelection=!1,this.selectionStartPage=null,this.isBackwardPropagatedSelection=!1,this.selectionRangeArray=[],this.selectionAnchorTouch=null,this.selectionFocusTouch=null,this.scrollMoveTimer=0,this.isMouseLeaveSelection=!1,this.isTouchSelection=!1,this.previousScrollDifference=0,this.topStoreLeft=null,this.topStoreRight=null,this.onLeftTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onRightTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onLeftTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onRightTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onLeftTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var o=i.dropDivElementRight,n=i.isTouchedWithinContainer(e);if(o&&n){var r=o.getBoundingClientRect(),s=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,s,a,e,t)){var l=Math.sqrt((a-r.top)*(a-r.top)+(s-r.left)*(s-r.left)),h=i.isCloserTouchScroll(l),p=!1;if(a<=r.top?(i.dropElementLeft.style.transform="rotate(0deg)",i.dropElementRight.style.transform="rotate(-90deg)",p=i.selectTextByTouch(t.parentElement,s,a,!1,"left",h)):(i.dropElementLeft.style.transform="rotate(-90deg)",i.dropElementRight.style.transform="rotate(0deg)",p=i.selectTextByTouch(t.parentElement,s,a,!0,"left",h)),p){var d=i.dropDivElementLeft.getBoundingClientRect(),c=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,u=i.getClientValueTop(a,i.pdfViewerBase.currentPageNumber-1),f=s-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.dropDivElementLeft.style.top=c*i.pdfViewerBase.getZoomFactor()+u+"px",i.topStoreLeft={pageTop:c,topClientValue:i.getMagnifiedValue(u),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementLeft.style.left=s-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-d.width/2+"px",i.previousScrollDifference=l}}}},this.onRightTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var o=i.dropDivElementLeft,n=i.isTouchedWithinContainer(e);if(o&&n){var r=o.getBoundingClientRect(),s=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,s,a,e,t)){var l=Math.sqrt((a-r.top)*(a-r.top)+(s-r.left)*(s-r.left)),h=i.isCloserTouchScroll(l),p=!1;if(a>=r.top?(i.dropElementRight.style.transform="rotate(-90deg)",i.dropElementLeft.style.transform="rotate(0deg)",p=i.selectTextByTouch(t.parentElement,s,a,!0,"right",h)):(i.dropElementRight.style.transform="rotate(0deg)",i.dropElementLeft.style.transform="rotate(-90deg)",p=i.selectTextByTouch(t.parentElement,s,a,!1,"right",h)),p){var d=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,c=i.getClientValueTop(a,i.pdfViewerBase.currentPageNumber-1),u=i.dropDivElementRight.getBoundingClientRect();i.dropDivElementRight.style.top=d*i.pdfViewerBase.getZoomFactor()+c+"px";var f=s-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.topStoreRight={pageTop:d,topClientValue:i.getMagnifiedValue(c),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementRight.style.left=s-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-u.width/2+"px",i.previousScrollDifference=l}}}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.textSelectionOnMouseMove=function(e,t,i){var o=e;if(o.nodeType===o.TEXT_NODE){this.isBackwardPropagatedSelection=!1;var n=o.ownerDocument.createRange(),r=window.getSelection();if(null!==r.anchorNode){var s=r.anchorNode.compareDocumentPosition(r.focusNode);(!s&&r.anchorOffset>r.focusOffset||s===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}n.selectNodeContents(o);for(var a=0,l=n.endOffset;a<l;){n.setStart(o,a),n.setEnd(o,a+1);(p=n.getBoundingClientRect()).left<=t&&p.right>=t&&p.top<=i&&p.bottom>=i&&(null!==r.anchorNode&&r.anchorNode.parentNode.classList.contains("e-pv-text")&&n.setStart(r.anchorNode,r.anchorOffset),r.removeAllRanges(),r.addRange(n),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,this.isBackwardPropagatedSelection?r.extend(o,a):r.extend(o,a+1),n.detach()),a+=1}}else for(var h=0;h<o.childNodes.length;h++)if(o.childNodes[h].nodeType===o.TEXT_NODE){var p;(p=(n=this.getSelectionRange(h,o)).getBoundingClientRect()).left<=t&&p.right>=t&&p.top<=i&&p.bottom>=i?(n.detach(),this.textSelectionOnMouseMove(o.childNodes[h],t,i)):n.detach()}},e.prototype.textSelectionOnMouseLeave=function(e){var t=this;e.preventDefault();var i=this.pdfViewerBase.viewerContainer.offsetTop;this.pdfViewer.magnificationModule&&"fitToPage"===this.pdfViewer.magnificationModule.fitType||(e.clientY>i?this.scrollMoveTimer=setInterval(function(){t.scrollForwardOnSelection()},500):this.scrollMoveTimer=setInterval(function(){t.scrollBackwardOnSelection()},500))},e.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.clear=function(){this.scrollMoveTimer&&(this.isMouseLeaveSelection=!1,clearInterval(this.scrollMoveTimer))},e.prototype.selectAWord=function(e,t,i,o){if(e.nodeType===e.TEXT_NODE){var n=window.getSelection();(u=e.ownerDocument.createRange()).selectNodeContents(e);for(var r=0,s=u.endOffset;r<s;){u.setStart(e,r),u.setEnd(e,r+1);if((f=u.getBoundingClientRect()).left<=t&&f.right>=t&&f.top<=i&&f.bottom>=i){for(var a=e.textContent,l=[],h=void 0,p=void 0,d=0;d<a.length;d++)" "===a[d]&&l.push(d);for(var c=0;c<l.length;c++){if(r===l[c]&&(h=l[c],p=l[c]),l[0]>r){h=0,p=l[c];break}r>l[c]&&r<l[c+1]?(h=l[c],p=l[c+1]):r>l[c]&&(l[c+1]||(h=l[c]))}p||(p=a.length),0===h?u.setStart(e,h):u.setStart(e,h+1),u.setEnd(e,p),n.removeAllRanges(),n.addRange(u),this.isTextSelection=!0,this.selectionStartPage=parseInt(u.startContainer.parentElement.id.split("_text_")[1]),o&&(this.selectionAnchorTouch={anchorNode:n.anchorNode.parentElement.id,anchorOffset:n.anchorOffset},this.selectionFocusTouch={focusNode:n.focusNode.parentElement.id,focusOffset:n.focusOffset}),u.detach();break}r+=1}}else for(d=0;d<e.childNodes.length;d++){var u,f;(f=(u=this.getSelectionRange(d,e)).getBoundingClientRect()).left<=t&&f.right>=t&&f.top<=i&&f.bottom>=i?(u.detach(),this.selectAWord(e.childNodes[d],t,i,o)):u.detach()}},e.prototype.getSelectionRange=function(e,t){var i=t.childNodes[e].ownerDocument.createRange();return i.selectNodeContents(t.childNodes[e]),i},e.prototype.selectEntireLine=function(e){var t=[],i=e.target,o=i.getBoundingClientRect(),n=parseInt((o.top+o.height/2).toString()),r=parseInt(e.target.id.split("_text_")[1]),s=document.querySelectorAll('div[id*="_text_'+r+'"]');if(i.classList.contains("e-pv-text")){for(var a=0;a<s.length;a++){var l=s[a].getBoundingClientRect(),h=parseInt(l.top.toString()),p=parseInt(l.bottom.toString());if(h<=n&&p>n&&o.bottom+10>p){var d=s[a].id;""!==d&&t.push(d)}}var c=window.getSelection();c.removeAllRanges();var u=document.createRange(),f=t.length-1,m=document.getElementById(t[0]),g=document.getElementById(t[f]);g.childNodes.length>0?(u.setStart(m.childNodes[0],0),u.setEnd(g.childNodes[0],g.textContent.length)):(u.setStart(m.childNodes[0],0),u.setEnd(g,1)),this.selectionStartPage=parseInt(u.startContainer.parentElement.id.split("_text_")[1]),c.addRange(u),this.isTextSelection=!0}},e.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=!1,this.pdfViewerBase.viewerContainer.classList.remove("e-disable-text-selection"),this.pdfViewerBase.viewerContainer.classList.add("e-enable-text-selection"),this.pdfViewerBase.viewerContainer.addEventListener("selectstart",function(){return!0})},e.prototype.clearTextSelection=function(){if(this.isTextSelection){if(this.pdfViewerBase.textLayer.clearDivSelection(),window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.pdfViewer.linkAnnotationModule){var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++)this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,!1)}this.selectionRangeArray=[],this.isTextSelection=!1,this.isTouchSelection=!1,this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.contextMenuObj.close(),this.removeTouchElements()}},e.prototype.removeTouchElements=function(){this.dropDivElementLeft&&(this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft),this.dropDivElementLeft=null,this.dropElementLeft.style.transform="rotate(0deg)"),this.dropDivElementRight&&(this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight),this.dropDivElementRight=null,this.dropElementRight.style.transform="rotate(-90deg)")},e.prototype.resizeTouchElements=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var t=this.dropDivElementLeft.getBoundingClientRect(),i=0,o=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+o.left-e-t.width/2+"px",this.topStoreLeft.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}if(this.dropDivElementRight){t=this.dropDivElementRight.getBoundingClientRect(),i=0;var n=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+n.left-e-t.width/2+"px",this.topStoreRight.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}},e.prototype.textSelectionOnMouseup=function(){if(this.clear(),null!==window.getSelection().anchorNode){this.isMouseLeaveSelection=!1,this.maintainSelectionOnZoom(!0,!1);if(this.pdfViewerBase.textLayer.getTextSearchStatus()){this.pdfViewerBase.textLayer.clearDivSelection();for(var e=this.pdfViewer.textSearchModule.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),o=t;o<i;o++)this.applySelectionRangeOnScroll(o);this.pdfViewer.textSearchModule.searchAfterSelection()}else this.applySpanForSelection();this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,!1)}else this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.removeTouchElements()},e.prototype.maintainSelectionOnZoom=function(e,t){var i=window.getSelection();if("Range"===i.type||!i.type&&!i.isCollapsed){var o=this.isBackWardSelection(i);if(null!==i.anchorNode){var n=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),r=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(this.isTouchSelection&&isNaN(r)){if(i.focusNode===this.pdfViewerBase.pageContainer){var s=this.pdfViewerBase.pageContainer.lastChild;s.classList.contains("e-pv-touch-select-drop")?r=parseInt(s.previousSibling.previousSibling.id.split("_pageDiv_")[1]):s.classList.contains("e-pv-page-div")&&(r=parseInt(s.id.split("_pageDiv_")[1]))}}if(o)for(a=n;a>=r;a--)this.maintainSelectionOnScroll(a,t);else for(var a=n;a<=r;a++)this.maintainSelectionOnScroll(a,t)}e||i.removeAllRanges()}},e.prototype.isSelectionAvailableOnScroll=function(e){for(var t=!1,i=this.selectionRangeArray,o=0;o<i.length;o++)if(null!==i[o]&&e===i[o].pageNumber){t=!0,this.isTouchSelection&&!this.pdfViewerBase.getMagnified()&&(t=!1);break}return t},e.prototype.applySelectionRangeOnScroll=function(e){this.isMouseLeaveSelection?this.applySelectionMouseScroll(e):this.applySelectionRange(e)},e.prototype.getSelectionRangeFromArray=function(e){for(var t=!1,i=null,o=this.selectionRangeArray,n=0;n<o.length;n++)if(null!==o[n]&&e===o[n].pageNumber){i=o[n],t=!0;break}return{isSelectionAvailable:t,selectionRange:i}},e.prototype.applySelectionRange=function(e){var t=this.getSelectionRangeFromArray(e),i=t.isSelectionAvailable,o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(o&&i&&0!==o.childNodes.length){var n=t.selectionRange,r=void 0,s=void 0,a=void 0,l=void 0;if(n.isBackward){var h=parseInt(n.endNode.split("_text_")[1].split("_")[1]),p=parseInt(n.startNode.split("_text_")[1].split("_")[1]);h<p?(r=h,a=n.endOffset,l=n.startOffset,s=p):(r=p,a=n.startOffset,s=h,l=n.endOffset)}else r=parseInt(n.startNode.split("text_")[1].split("_")[1]),s=parseInt(n.endNode.split("text_")[1].split("_")[1]),a=n.startOffset,l=n.endOffset;window.getSelection().removeAllRanges(),this.pdfViewerBase.textLayer.applySpanForSelection(e,e,r,s,a,l),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.applySelectionMouseScroll=function(e){var t=this.getSelectionRangeFromArray(e);if(t.isSelectionAvailable){var i=t.selectionRange,o=window.getSelection(),n=document.getElementById(i.startNode).childNodes[0],r=document.getElementById(i.endNode).childNodes[0],s=document.createRange();if(null===o.anchorNode)i.isBackward?(s.setStart(r,i.endOffset),s.setEnd(n,i.startOffset)):(s.setStart(n,i.startOffset),s.setEnd(r,i.endOffset));else{var a=isNaN(parseInt(o.anchorNode.parentElement.id.split("_text_")[1]))?parseInt(o.anchorNode.id.split("_pageDiv_")[1]):parseInt(o.anchorNode.parentElement.id.split("_text_")[1]);isNaN(a)&&(a=parseInt(o.anchorNode.id.split("_text_")[1]));var l=isNaN(parseInt(o.focusNode.parentElement.id.split("_text_")[1]))?parseInt(o.focusNode.id.split("_pageDiv_")[1]):parseInt(o.focusNode.parentElement.id.split("_text_")[1]),h=parseInt(i.startNode.split("_text_")[1]);if(a===l&&a===h)i.isBackward?(s.setStart(r,i.endOffset),s.setEnd(n,i.startOffset)):(s.setStart(n,i.startOffset),s.setEnd(r,i.endOffset));else if(i.isBackward){var p=this.isBackWardSelection(o);if(a>h&&h>l&&a!==l)p?o.extend(o.focusNode,o.focusOffset):(s.setStart(o.anchorNode,o.anchorOffset),s.setEnd(o.focusNode,o.focusOffset));else if(a<h&&h<l&&a!==l)p?o.extend(o.focusNode,o.focusOffset):(s.setStart(o.anchorNode,o.anchorOffset),s.setEnd(o.focusNode,o.focusOffset));else if(a<h)p?h!==this.selectionRangeArray[0].pageNumber?this.extendCurrentSelection(r.parentElement,i.endOffset,o,s):this.extendCurrentSelection(n.parentElement,i.startOffset,o,s):h!==this.selectionRangeArray[0].pageNumber?(s.setStart(o.anchorNode,o.anchorOffset),s.setEnd(r,i.endOffset)):(s.setStart(o.anchorNode,o.anchorOffset),s.setEnd(n,i.startOffset));else if(a===h)h===l?(s.setStart(n,i.startOffset),s.setEnd(n,i.startOffset),o.removeAllRanges(),o.addRange(s),s=document.createRange(),o.extend(r,i.endOffset)):p?this.extendCurrentSelection(r.parentElement,i.endOffset,o,s):(s.setStart(r,i.endOffset),s.setEnd(o.focusNode,o.focusOffset));else if(l===h)p?o.extend(o.focusNode,o.focusOffset):(s.setStart(o.anchorNode,o.anchorOffset),s.setEnd(o.focusNode,o.focusOffset));else if(a>h){var d=parseInt(i.startNode.split("_"+h+"_")[1]),c=parseInt(i.endNode.split("_"+h+"_")[1]);p?h!==this.selectionRangeArray[0].pageNumber?d<c?this.extendCurrentSelection(n.parentElement,i.startOffset,o,s):(s.setStart(r.parentElement,i.endOffset),s.setEnd(o.anchorNode,o.anchorOffset)):this.extendCurrentSelection(r.parentElement,i.endOffset,o,s):d<c?(s.setStart(n,i.startOffset),s.setEnd(o.focusNode,o.focusOffset)):(s.setStart(r,i.endOffset),s.setEnd(o.focusNode,o.focusOffset))}}else a<h&&h<l&&a!==l?(s.setStart(o.anchorNode,o.anchorOffset),s.setEnd(o.focusNode,o.focusOffset)):a<h?(s.setStart(o.anchorNode,o.anchorOffset),s.setEnd(r,i.endOffset)):(s.setStart(n,i.startOffset),s.setEnd(o.focusNode,o.focusOffset))}""!==s.toString()&&(o.removeAllRanges(),o.addRange(s))}},e.prototype.maintainSelectionOnScroll=function(e,t){var i=this.isSelectionAvailableOnScroll(e);this.isTextSelection&&!i&&this.maintainSelection(e,t)},e.prototype.maintainSelection=function(e,t){var i=window.getSelection();if(this.isTextSelection&&("Range"===i.type||!i.type&&!i.isCollapsed)){var o=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(isNaN(n)&&null!==i.anchorNode){if(this.isBackWardSelection(i))n=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split("_pageDiv_")[1]);else{var r=this.pdfViewerBase.pageContainer.lastChild;n=r.classList.contains("e-pv-touch-select-drop")?parseInt(r.previousSibling.previousSibling.id.split("_pageDiv_")[1]):parseInt(r.id.split("_pageDiv_")[1])}}var s=this.isBackWardSelection(i);if(this.isTouchSelection&&e>n&&e>o)return;if(o===n){var a=null,l=this.getSelectionBounds(i.getRangeAt(0),e),h=1===this.getNodeElementFromNode(i.anchorNode).childNodes.length?i.anchorOffset:this.getCorrectOffset(i.anchorNode,i.anchorOffset),p=1===this.getNodeElementFromNode(i.focusNode).childNodes.length?i.focusOffset:this.getCorrectOffset(i.focusNode,i.focusOffset);a={isBackward:s,startNode:this.getNodeElementFromNode(i.anchorNode).id,startOffset:h,endNode:this.getNodeElementFromNode(i.focusNode).id,endOffset:p,textContent:i.toString(),pageNumber:e,bounds:l},this.pushSelectionRangeObject(a,e)}else{(a=this.createRangeObjectOnScroll(e,o,n))&&(this.pushSelectionRangeObject(a,e),t&&this.stichSelection(s,i,e))}}},e.prototype.getCorrectOffset=function(e,t){for(var i=0,o=this.getNodeElementFromNode(e),n=0;n<o.childNodes.length;n++){if(o.childNodes[n]===e){i+=t;break}i+=o.childNodes[n].textContent.length}return i},e.prototype.pushSelectionRangeObject=function(e,t){if(this.isTouchSelection){var i=this.selectionRangeArray.filter(function(e){return e.pageNumber===t});if(i.length>0){var o=this.selectionRangeArray.indexOf(i[0]);return void this.selectionRangeArray.splice(o,1,e)}}var n=this.selectionRangeArray.filter(function(e){return e.pageNumber===t+1});if(0===n.length)if(this.isTouchSelection&&0!==this.selectionRangeArray.length){var r=this.selectionRangeArray.filter(function(e){return e.pageNumber===t-1});if(0!==r.length){var s=this.selectionRangeArray.indexOf(r[0]);this.selectionRangeArray.splice(s+1,0,e)}else{var a=this.selectionRangeArray[0];t<a.pageNumber?this.selectionRangeArray.splice(0,0,e):this.selectionRangeArray.push(e)}}else this.selectionRangeArray.push(e);else{var l=this.selectionRangeArray.indexOf(n[0]);this.selectionRangeArray.splice(l,0,e)}},e.prototype.extendCurrentSelection=function(e,t,i,o){var n=i.focusOffset,r=i.focusNode.parentElement.id,s=isNaN(parseInt(r.split("_text_")[1]))?parseInt(i.focusNode.id.split("_pageDiv_")[1]):parseInt(r.split("_text_")[1]);isNaN(parseInt(r.split("_text_")[1]))&&(r=this.pdfViewerBase.getElement("_textLayer_"+(s+1)).firstChild.id),o.setStart(e.childNodes[0],t),o.setEnd(e.childNodes[0],t),i.removeAllRanges(),i.addRange(o),i.extend(document.getElementById(r).childNodes[0],n)},e.prototype.stichSelection=function(e,t,i){var o,n=document.createRange();if(e)if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-1))){(r=o.lastChild)?this.extendCurrentSelection(r,this.getTextLastLength(r),t,n):(r=(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-2))).lastChild,this.extendCurrentSelection(r,this.getTextLastLength(r),t,n))}else{var r=(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))).firstChild;this.extendCurrentSelection(r,0,t,n)}else if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))){var s=o.firstChild;s?n.setStart(s.childNodes[0],0):(s=(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+2))).firstChild,n.setStart(s.childNodes[0],0)),n.setEnd(t.focusNode,t.focusOffset),t.removeAllRanges(),t.addRange(n)}},e.prototype.textSelectionOnMouseWheel=function(e){this.isMouseLeaveSelection=!0,this.stichSelectionOnScroll(e)},e.prototype.stichSelectionOnScroll=function(e){var t=window.getSelection();if(this.isTextSelection){var i=parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]),n=void 0;if(i!==e&&o!==e){if(this.isBackWardSelection(t)){if(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1))){(r=n.firstChild)&&this.extendSelectionStich(r.childNodes[0],0,t)}}else if(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1))){var r;if(r=n.lastChild)this.extendSelectionStich(r.childNodes[0],this.getTextLastLength(r),t);else{var s=(n=this.pdfViewerBase.getElement("_textLayer_"+e)).firstChild;this.extendSelectionStich(s.childNodes[0],0,t)}}}this.maintainSelectionArray()}},e.prototype.extendSelectionStich=function(e,t,i){i.extend&&i.extend(e,t)},e.prototype.createRangeObjectOnScroll=function(e,t,i){var o=window.getSelection();if(null!==o.anchorNode){var n=this.isBackWardSelection(o),r=void 0,s=void 0,a=void 0,l=void 0,h=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(h.childNodes){if(n)e===t?(r=this.getNodeElementFromNode(o.anchorNode),s=h.firstChild,a=this.getCorrectOffset(o.anchorNode,o.anchorOffset),l=0):e<t&&e>i?(r=h.firstChild,s=h.lastChild,a=0,l=this.getTextLastLength(s)):e===i&&(r=this.getNodeElementFromNode(o.focusNode),s=h.lastChild,a=this.getCorrectOffset(o.focusNode,o.focusOffset),l=this.getTextLastLength(s));else if(e===t)r=this.getNodeElementFromNode(o.anchorNode),s=h.lastChild,a=this.getCorrectOffset(o.anchorNode,o.anchorOffset),l=this.getTextLastLength(s);else if(e>t&&e<i)r=h.firstChild,s=h.lastChild,a=0,l=this.getTextLastLength(s);else if(e===i){r=h.firstChild;-1!==this.getNodeElementFromNode(o.focusNode).id.indexOf(i.toString())?(s=this.getNodeElementFromNode(o.focusNode),l=this.getCorrectOffset(o.focusNode,o.focusOffset)):(s=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+i).lastChild,l=this.getTextLastLength(s)),a=0}if(r&&s){var p=this.getSelectionRangeObject(r.id,a,s.id,l,e),d=p.toString(),c=this.getSelectionBounds(p,e);return{isBackward:n,startNode:r.id,startOffset:a,endNode:s.id,endOffset:l,textContent:d,pageNumber:e,bounds:c}}return null}}return null},e.prototype.getSelectionRangeObject=function(e,t,i,o,n){var r=document.getElementById(e).childNodes[0],s=document.getElementById(i).childNodes[0],a=parseInt(e.split("_"+n+"_")[1]),l=parseInt(i.split("_"+n+"_")[1]),h=document.createRange();return a<l?(h.setStart(r,t),h.setEnd(s,o)):(h.setStart(s,o),h.setEnd(r,t)),h},e.prototype.getSelectionBounds=function(e,t){var i=[];if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer)){var o=document.createRange(),n=this.createRangeForSelection(e.startContainer,e.endContainer,e.startOffset,e.endOffset,o);i.push(this.normalizeBounds(n.getBoundingClientRect(),t))}else i.push(this.normalizeBounds(e.getBoundingClientRect(),t));return i},e.prototype.getTextId=function(e){var t=e.lastIndexOf("_"),i=e.substring(t+1,e.length);return parseInt(i)},e.prototype.normalizeBounds=function(e,t){var i=this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect();return{bottom:this.getMagnifiedValue(e.bottom-i.top),height:this.getMagnifiedValue(e.height),left:this.getMagnifiedValue(e.left-i.left),top:this.getMagnifiedValue(e.top-i.top),right:this.getMagnifiedValue(e.right-i.left),width:this.getMagnifiedValue(e.height)}},e.prototype.getMagnifiedValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getCurrentSelectionBounds=function(e){for(var t=null,i=this.selectionRangeArray,o=0;o<i.length;o++)null!==i[o]&&e===i[o].pageNumber&&(t=i[o].bounds);return t},e.prototype.createRangeForSelection=function(e,t,i,o,n){return n.setStart(e,i),n.setEnd(t,o),n},e.prototype.maintainSelectionArray=function(){var e=this;if(0!==this.selectionRangeArray.length){var t=window.getSelection(),i=this.isBackWardSelection(t),o=isNaN(parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]))?parseInt(t.anchorNode.id.split("_pageDiv_")[1]):parseInt(t.anchorNode.parentElement.id.split("_text_")[1]);isNaN(o)&&(o=parseInt(t.anchorNode.id.split("_text_")[1]));var n=isNaN(parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_pageDiv_")[1]):parseInt(t.focusNode.parentElement.id.split("_text_")[1]);isNaN(n)&&(n=isNaN(parseInt(t.focusNode.id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_textLayer_")[1]):parseInt(t.focusNode.id.split("_text_")[1]));var r=[];if((r=i?this.selectionRangeArray.filter(function(t){return!(n<t.pageNumber&&t.pageNumber<=e.selectionStartPage)}):this.selectionRangeArray.filter(function(t){return!(e.selectionStartPage<=t.pageNumber&&t.pageNumber<n)})).length>0){for(var s=0;s<r.length;s++){var a=this.selectionRangeArray.indexOf(r[s]);-1!==a&&this.selectionRangeArray.splice(a,1)}1===this.selectionRangeArray.length&&(this.selectionRangeArray[0].pageNumber!==o&&this.selectionRangeArray[0].pageNumber!==n||(r=[]))}}},e.prototype.isBackWardSelection=function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode),i=!1;return(!t&&e.anchorOffset>e.focusOffset||t===Node.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i},e.prototype.applySpanForSelection=function(){var e=window.getSelection();if(null!==e.anchorNode&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(e.anchorNode))){var t=void 0,i=void 0,o=void 0,n=void 0,r=void 0,s=void 0;if(this.isBackWardSelection(e))t=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1]),i=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1].split("_")[1]),n=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1].split("_")[1]),r=e.focusOffset,s=e.anchorOffset;else{var a=this.getNodeElementFromNode(e.anchorNode),l=this.getNodeElementFromNode(e.focusNode);t=-1!==a.id.indexOf("text_")?parseInt(a.id.split("text_")[1]):parseInt(a.id.split("_textLayer_")[1]),i=-1!==l.id.indexOf("text_")?parseInt(l.id.split("text_")[1]):parseInt(l.id.split("_textLayer_")[1]);var h=!1;if(this.isTouchSelection&&e.focusNode===this.pdfViewerBase.pageContainer){var p=this.pdfViewerBase.pageContainer.lastChild;if(p.classList.contains("e-pv-touch-select-drop")){var d=p.previousSibling.previousSibling;i=parseInt(d.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,h=!0}else if(p.classList.contains("e-pv-page-div")){d=p;i=parseInt(d.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,h=!0}}a.classList.contains("e-pv-maintaincontent")&&(a=this.getNodeElementFromNode(a),t=parseInt(a.id.split("text_")[1])),l.classList.contains("e-pv-maintaincontent")&&(l=this.getNodeElementFromNode(l),i=parseInt(l.id.split("text_")[1])),t===i&&(a.contains(l)&&(a=l),l.contains(a)&&(l=a)),o=a.id.split("text_")[1]?parseInt(a.id.split("text_")[1].split("_")[1]):null,n=l.id.split("text_")[1]?parseInt(l.id.split("text_")[1].split("_")[1]):null,o=isNaN(o)?n:o,n=isNaN(n)?o:n,r=e.anchorOffset,s=h?l.textContent.length:e.focusOffset}e.removeAllRanges(),this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.textLayer.applySpanForSelection(t,i,o,n,r,s),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.initiateTouchSelection=function(e,t,i){var o=e.target,n=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY);0!==n.length&&n[0].classList.contains("e-pv-hyperlink")&&n[1].classList.contains("e-pv-text")&&(o=n[1]),this.selectAWord(o,t,i,!0),this.createTouchSelectElement(e),this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection()},e.prototype.selectTextByTouch=function(e,t,i,o,n,r){var s=!1;if(e.nodeType===e.TEXT_NODE){var a=e.ownerDocument.createRange(),l=window.getSelection();a.selectNodeContents(e);for(var h=0,p=a.endOffset;h<p;){a.setStart(e,h),a.setEnd(e,h+1);if((u=a.getBoundingClientRect()).left<=t&&u.right>=t&&u.top<=i&&u.bottom>=i)return null!=l.anchorNode&&(o&&a.setStart(l.anchorNode,l.anchorOffset),a=this.setTouchSelectionStartPosition(l,a,o,n,e,h,r),o&&l.extend(e,h),s=!0),a.detach(),s;h+=1}}else for(var d=0;d<e.childNodes.length;d++){var c=e.childNodes[d].ownerDocument.createRange();c.selectNodeContents(e.childNodes[d]);var u;if((u=c.getBoundingClientRect()).left<=t&&u.right>=t&&u.top<=i&&u.bottom>=i)return c.detach(),this.selectTextByTouch(e.childNodes[d],t,i,o,n,r);c.detach()}return s},e.prototype.setTouchSelectionStartPosition=function(e,t,i,o,n,r,s){if(i){if("left"===o){var a=this.getTouchFocusElement(e,!0);t.setStart(a.focusNode,a.focusOffset),t.setEnd(n,r),this.selectionAnchorTouch={anchorNode:t.endContainer.parentElement.id,anchorOffset:t.endOffset}}else if("right"===o){a=this.getTouchAnchorElement(e,!1);t.setStart(a.anchorNode,a.anchorOffset),t.setEnd(n,r),this.selectionFocusTouch={focusNode:t.endContainer.parentElement.id,focusOffset:t.endOffset}}}else if("left"===o)if(s)t.setStart(n,r),t.setEnd(e.focusNode,e.focusOffset),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset};else{a=this.getTouchFocusElement(e,!1);t.setStart(n,r),t.setEnd(a.focusNode,a.focusOffset),""===t.toString()&&(t.setStart(n,r),t.setEnd(e.focusNode,e.focusOffset)),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}}else if("right"===o){a=this.getTouchAnchorElement(e,!0);t.setStart(n,r),t.setEnd(a.anchorNode,a.anchorOffset),""===t.toString()&&(t.setStart(a.anchorNode,a.anchorOffset),t.setEnd(n,r)),this.selectionFocusTouch={focusNode:t.startContainer.parentElement.id,focusOffset:t.startOffset}}return e.removeAllRanges(),e.addRange(t),t},e.prototype.getTouchAnchorElement=function(e,t){var i=document.getElementById(this.selectionAnchorTouch.anchorNode.toString()),o=null,n=0;return i?(o=i.childNodes[0],n=parseInt(this.selectionAnchorTouch.anchorOffset.toString())):t?(o=e.focusNode,n=e.focusOffset):(o=e.anchorNode,n=e.anchorOffset),{anchorNode:o,anchorOffset:n}},e.prototype.getTouchFocusElement=function(e,t){var i=document.getElementById(this.selectionFocusTouch.focusNode.toString()),o=null,n=0;return i?(o=i.childNodes[0],n=parseInt(this.selectionFocusTouch.focusOffset.toString())):t?(o=e.anchorNode,n=e.anchorOffset):(o=e.focusNode,n=e.focusOffset),{focusNode:o,focusOffset:n}},e.prototype.createTouchSelectElement=function(e){this.isTouchSelection=!0;var i=window.getSelection();if("Range"===i.type){this.dropDivElementLeft=t.createElement("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_left",className:"e-pv-touch-select-drop"}),this.dropDivElementRight=t.createElement("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_right",className:"e-pv-touch-select-drop"}),this.dropElementLeft=t.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivElementLeft.appendChild(this.dropElementLeft),this.dropElementRight=t.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropDivElementRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var o=i.getRangeAt(0).getBoundingClientRect(),n=this.dropDivElementLeft.getBoundingClientRect(),r=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,s=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left,a=this.getClientValueTop(o.top,this.pdfViewerBase.currentPageNumber-1),l=a+r*this.pdfViewerBase.getZoomFactor()+n.height/2*this.pdfViewerBase.getZoomFactor()+"px";this.dropDivElementLeft.style.top=l,this.dropDivElementLeft.style.left=o.left-(s+n.width)+"px",this.dropDivElementRight.style.top=l,this.dropDivElementRight.style.left=o.left+o.width-s+"px";var h=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,p=o.left-h;this.topStoreLeft={pageTop:r,topClientValue:this.getMagnifiedValue(a),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(p),isHeightNeeded:!0},this.topStoreRight={pageTop:r,topClientValue:this.getMagnifiedValue(a),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(p+o.width),isHeightNeeded:!0},this.dropDivElementLeft.addEventListener("touchstart",this.onLeftTouchSelectElementTouchStart),this.dropDivElementLeft.addEventListener("touchmove",this.onLeftTouchSelectElementTouchMove),this.dropDivElementLeft.addEventListener("touchend",this.onLeftTouchSelectElementTouchEnd),this.dropDivElementRight.addEventListener("touchstart",this.onRightTouchSelectElementTouchStart),this.dropDivElementRight.addEventListener("touchmove",this.onRightTouchSelectElementTouchMove),this.dropDivElementRight.addEventListener("touchend",this.onRightTouchSelectElementTouchEnd),this.pdfViewerBase.contextMenuModule.contextMenuObj.open(e.touches[0].clientY-this.pdfViewerBase.viewerContainer.offsetTop,e.touches[0].clientX-this.pdfViewerBase.viewerContainer.clientLeft,this.pdfViewerBase.viewerContainer)}},e.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.contextMenuModule.contextMenuObj.close();var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++){var o=this.pdfViewerBase.getElement("_textLayer_"+i);o&&null!==o.childNodes&&this.applySelectionMouseScroll(i)}},e.prototype.terminateSelectionByTouch=function(e){this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection(),this.pdfViewerBase.contextMenuModule.contextMenuObj.open(e.changedTouches[0].clientY-this.pdfViewerBase.viewerContainer.offsetTop+this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight,e.changedTouches[0].clientX-this.pdfViewerBase.viewerContainer.offsetLeft,this.pdfViewerBase.viewerContainer)},e.prototype.getNodeElement=function(e,t,i,o,n){if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t,i),n=this.onTouchElementScroll(e,n,i,o);else if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(t,i),s=document.caretPositionFromPoint(t,i);(e=document.createRange()).setStart(r.offsetNode,r.offset),e.setEnd(s.offsetNode,s.offset),n=this.onTouchElementScroll(e,n,i,o)}return n},e.prototype.isTouchedWithinContainer=function(e){var t=!1;return 0!==document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY).length&&(t=!0),t},e.prototype.onTouchElementScroll=function(e,t,i,o){var n=this.pdfViewerBase.viewerContainer.scrollTop;if(null!=e){t=e.startContainer;var r=this.isScrolledOnScrollBar(o);this.pdfViewerBase.viewerContainer.contains(t.parentElement)&&!r||(i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=n-30:this.pdfViewerBase.viewerContainer.scrollTop=n+30)}else i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=n-30:this.pdfViewerBase.viewerContainer.scrollTop=n+30;return t},e.prototype.isCloserTouchScroll=function(e){var t=!1;return this.previousScrollDifference>e&&(t=!0),t},e.prototype.getClientValueTop=function(e,t){return e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top},e.prototype.isScrolledOnScrollBar=function(e){var t=!1;return this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<e.touches[0].clientY&&e.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop&&(t=!0),t},e.prototype.getTextLastLength=function(e){return e?e.textContent.length:0},e.prototype.getNodeElementFromNode=function(e){return e.parentElement?e.parentElement:e.parentNode},e.prototype.copyText=function(){var e="";if(this.maintainSelectionOnZoom(!0,!1),this.selectionRangeArray.length>0)for(var t=0;t<this.selectionRangeArray.length;t++)e+=this.selectionRangeArray[t].textContent;if(e.length>0){var i=document.createElement("textarea");i.contentEditable="true",i.textContent=e,i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{i&&document.body.removeChild(i)}}},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"TextSelection"},e}(),E=function(){function e(e,t){var i=this;this.isTextSearch=!1,this.searchIndex=0,this.currentSearchIndex=0,this.searchPageIndex=null,this.searchString=null,this.isMatchCase=!1,this.textContents=new Array,this.searchMatches=new Array,this.searchCollection=new Array,this.searchedPages=[],this.isPrevSearch=!1,this.tempElementStorage=new Array,this.isMessagePopupOpened=!1,this.checkBoxOnChange=function(e){if(e.checked?i.isMatchCase=!0:i.isMatchCase=!1,i.isTextSearch){i.resetVariables(),i.clearAllOccurrences();var t=i.searchInput.value;i.searchIndex=0,i.textSearch(t)}},this.searchKeypressHandler=function(e){i.enableNextButton(!0),i.enablePrevButton(!0),13===e.which?(i.initiateTextSearch(i.searchInput),i.updateSearchInputIcon(!1)):i.resetVariables()},this.searchClickHandler=function(e){i.searchButtonClick(i.searchBtn,i.searchInput)},this.nextButtonOnClick=function(e){i.nextSearch()},this.prevButtonOnClick=function(e){i.prevSearch()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createTextSearchBox=function(){var e=this;this.searchBox=t.createElement("div",{id:this.pdfViewer.element.id+"_search_box",className:"e-pv-search-bar"});var i=t.createElement("div",{id:this.pdfViewer.element.id+"_search_box_elements",className:"e-pv-search-bar-elements"}),o=t.createElement("div",{id:this.pdfViewer.element.id+"_search_input_container",className:"e-input-group e-pv-search-input"});this.searchInput=t.createElement("input",{id:this.pdfViewer.element.id+"_search_input",className:"e-input"}),this.searchInput.type="text",this.searchInput.placeholder=this.pdfViewer.localeObj.getConstant("Find in document"),this.searchBtn=t.createElement("span",{id:this.pdfViewer.element.id+"_search_box-icon",className:"e-input-group-icon e-input-search-group-icon e-pv-search-icon"}),o.appendChild(this.searchInput),o.appendChild(this.searchBtn),i.appendChild(o),this.pdfViewer.enableRtl?this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-next-search"):this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-prev-search"),i.appendChild(this.prevSearchBtn),this.pdfViewer.enableRtl?this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-prev-search"):this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-next-search"),i.appendChild(this.nextSearchBtn);var n=t.createElement("div",{id:this.pdfViewer.element.id+"_match_case_container",className:"e-pv-match-case-container"}),r=t.createElement("input",{id:this.pdfViewer.element.id+"_match_case"});r.type="checkbox",n.appendChild(r),this.searchBox.appendChild(i),this.searchBox.appendChild(n),this.pdfViewerBase.mainContainer.appendChild(this.searchBox),this.checkBox=new h.CheckBox({cssClass:"e-pv-match-case",label:this.pdfViewer.localeObj.getConstant("Match case"),change:this.checkBoxOnChange.bind(this)}),this.checkBox.appendTo(r),this.showSearchBox(!1),this.pdfViewer.enableRtl?(this.searchBox.classList.add("e-rtl"),this.searchBox.style.left="88.3px"):(this.searchBox.classList.remove("e-rtl"),this.searchBox.style.right="88.3px"),this.searchInput.addEventListener("focus",function(){e.searchInput.parentElement.classList.add("e-input-focus")}),this.searchInput.addEventListener("blur",function(){e.searchInput.parentElement.classList.remove("e-input-focus")}),this.searchInput.addEventListener("keypress",this.searchKeypressHandler.bind(this)),this.searchBtn.addEventListener("click",this.searchClickHandler.bind(this)),this.nextSearchBtn.addEventListener("click",this.nextButtonOnClick.bind(this)),this.prevSearchBtn.addEventListener("click",this.prevButtonOnClick.bind(this))},e.prototype.textSearchBoxOnResize=function(){this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth?(this.searchBox.style.right="0px",this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px",this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px"):(this.searchBox.style.right="88.3px",this.searchBox.style.width="",this.searchInput.style.width="")},e.prototype.showSearchBox=function(e){this.searchBox.style.display=e?"block":"none",this.onTextSearchClose()},e.prototype.searchAfterSelection=function(){this.isTextSearch&&(this.initSearch(this.searchPageIndex,!0),this.highlightOthers())},e.prototype.initiateTextSearch=function(e){var t=e.value;this.initiateSearch(t)},e.prototype.initiateSearch=function(e){e!==this.searchString&&(this.isTextSearch=!1,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1),this.clearAllOccurrences(),""!==e&&(this.searchCollection[this.searchPageIndex]&&e===this.searchString?0===this.searchCollection[this.searchPageIndex].length?this.initSearch(this.searchPageIndex,!1):this.nextSearch():(this.resetVariables(),this.searchIndex=0,this.textSearch(e)))},e.prototype.textSearch=function(e){(""!==e||e)&&(this.searchString=e,this.isTextSearch=!0,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1,this.initSearch(this.searchPageIndex,!1),this.highlightOthers())},e.prototype.nextSearch=function(){this.isPrevSearch=!1,this.isTextSearch=!0,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex+1,this.searchCollection[this.searchPageIndex]?(this.searchIndex>=this.searchCollection[this.searchPageIndex].length||this.searchPageIndex!==this.pdfViewerBase.currentPageNumber-1?(this.searchIndex=0,this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.initSearch(this.searchPageIndex,!1)):this.highlightSearchedTexts(this.searchPageIndex,!1),this.highlightOthers()):this.initiateTextSearch(this.searchInput)):this.initiateTextSearch(this.searchInput)},e.prototype.prevSearch=function(){if(this.isPrevSearch=!0,this.isTextSearch=!0,this.searchString)this.clearAllOccurrences(),this.searchIndex=this.searchIndex-1,this.searchIndex<0?(this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.initSearch(this.searchPageIndex,!1)):this.highlightSearchedTexts(this.searchPageIndex,!1),this.highlightOthers();else{this.searchIndex=this.searchIndex-1,this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;var e=this.searchInput.value;this.textSearch(e)}},e.prototype.initSearch=function(e,t){var i=this.pdfViewerBase.getStoredData(e),o=null,n=null;i?(o=i.pageText,n=i.textContent,this.textContents[e]=n,this.getPossibleMatches(e,this.searchString,o,n,t)):t||this.createRequestForSearch(e)},e.prototype.getPossibleMatches=function(e,t,i,o,n){var r=i,s=t,a=t.length;this.isMatchCase||(s=t.toLowerCase(),r=i.toLowerCase());for(var l=[],h=-a;0!==h&&""!==s&&" "!==s&&s&&-1!==(h=r.indexOf(s,h+a));)l.push(h);if(this.searchMatches[e]=l,n||(-1===this.searchedPages.indexOf(e)&&this.searchedPages.push(e),this.updateSearchInputIcon(!1)),0!==this.searchMatches[e].length)n||(this.isPrevSearch&&(this.searchIndex=this.searchMatches[e].length-1),this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex&&(this.searchCollection.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&this.searchPageIndex===this.currentSearchIndex&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[]),this.pdfViewerBase.updateScrollTop(this.searchPageIndex))),this.convertMatches(e,a,o,n);else if(!n)if(this.isPrevSearch?this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1:this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,-1===this.searchedPages.indexOf(this.searchPageIndex)&&this.searchedPages.length!==this.pdfViewerBase.pageCount)this.initSearch(this.searchPageIndex,!1);else{var p=this.getSearchPage(e);this.searchCollection[this.searchPageIndex]||0!==this.searchCollection.length||this.searchedPages.length!==this.pdfViewerBase.pageCount?this.searchCollection.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&p===this.currentSearchIndex&&(this.isPrevSearch?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[],this.searchIndex=-1):(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[],this.searchIndex=0),this.highlightSearchedTexts(this.searchPageIndex,n)):this.isMessagePopupOpened||this.onMessageBoxOpen()}},e.prototype.getSearchPage=function(e){var t=null;if(this.isPrevSearch){for(var i=e;i>=0;i--)if(i!==e&&this.searchCollection[i]){t=i;break}if(!t)for(var o=this.pdfViewerBase.pageCount-1;o>e;o--)if(this.searchCollection[o]){t=o;break}}else{for(i=e;i<this.pdfViewerBase.pageCount;i++)if(i!==e&&this.searchCollection[i]){t=i;break}if(!t)for(o=0;o<e;o++)if(this.searchCollection[o]){t=o;break}}return t},e.prototype.convertMatches=function(e,t,i,o){for(var n=0,r=this.searchMatches[e],s=0,a=i.length-1,l=[],h=0;h<r.length;h++){for(var p=r[h];n!==a&&p>=s+i[n].split("\r\n")[0].length;)s+=i[n].split("\r\n")[0].length,n++;var d={begin:{divId:n,offsetValue:p-s}};for(p+=t;n!==a&&p>s+i[n].length;)s+=i[n].length,n++;d.end={divId:n,offsetValue:p-s},l.push(d)}0===this.searchCollection.length&&(this.currentSearchIndex=e),this.searchCollection[e]=l,this.highlightSearchedTexts(e,o)},e.prototype.highlightSearchedTexts=function(e,t){for(var i,o,n=this.searchCollection[e],r=null,s={y:-100,x:-100},a=0;a<n.length;a++){var l=n[a],h=l.begin,p=l.end;if(a===this.searchIndex&&e===this.searchPageIndex?(o="e-pv-search-text-highlight",i=h.divId):o="e-pv-search-text-highlightother",r&&h.divId===r.divId?this.addSpanForSearch(e,parseFloat(r.divId.toString()),parseFloat(r.offsetValue.toString()),parseFloat(h.offsetValue.toString()),null):(null!==r&&this.addSpanForSearch(e,parseFloat(r.divId.toString()),parseFloat(r.offsetValue.toString()),void 0,null),this.beginText(h,e,null)),h.divId===p.divId)this.addSpanForSearch(e,h.divId,h.offsetValue,p.offsetValue,o);else{this.addSpanForSearch(e,h.divId,h.offsetValue,void 0,o);for(var d=h.divId+1;d<p.divId;d++)this.addSpanForSearch(e,d,0,void 0,o+" middle");this.beginText(p,e,o)}r=p}if(r&&this.addSpanForSearch(e,parseFloat(r.divId.toString()),parseFloat(r.offsetValue.toString()),void 0,null),e===this.searchPageIndex&&!t){var c=this.pdfViewerBase.getElement("_text_"+e+"_"+i);if(c){var u=this.getScrollElement(c);this.scrollToSearchStr(u,s)}else{this.pdfViewerBase.updateScrollTop(e);var f=this.pdfViewerBase.getElement("_text_"+e+"_"+i);u=this.getScrollElement(f);this.scrollToSearchStr(u,s)}}},e.prototype.beginText=function(e,t,i){var o=parseFloat(e.divId),n=this.pdfViewerBase.getElement("_text_"+t+"_"+o);if(n){this.tempElementStorage=new Array;for(var r=0;r<n.childNodes.length;r++){var s={text:n.childNodes[r].textContent,classString:n.childNodes[r].className};this.tempElementStorage.push(s)}n.textContent="",this.addSpanForSearch(t,o,0,e.offsetValue,i)}},e.prototype.addSpanForSearch=function(e,t,i,o,n){var r,s=this.pdfViewerBase.getElement("_text_"+e+"_"+t);if(s){r=this.textContents[e][t].substring(i,o);var a=document.createTextNode(r);if(n){var l=document.createElement("span");l.className=n,l.classList.contains("middle")&&(s.textContent=""),l.appendChild(a),s.appendChild(l)}else this.pdfViewer.textSelectionModule.isTextSelection?this.searchOnSelection(s,a,r):s.appendChild(a)}},e.prototype.isClassAvailable=function(){for(var e=!1,t=0;t<this.tempElementStorage.length;t++)if(this.tempElementStorage[t].classString&&("e-pv-search-text-highlight"===this.tempElementStorage[t].classString||"e-pv-search-text-highlightother"===this.tempElementStorage[t].classString)){e=!0;break}return e},e.prototype.addSpan=function(e,t){var i=document.createTextNode(e),o=document.createElement("span");o.className="e-pv-maintaincontent",o.appendChild(i),t.appendChild(o)},e.prototype.searchOnSelection=function(e,t,i){if(1===this.tempElementStorage.length)this.tempElementStorage[0].classString?-1!==this.tempElementStorage[0].classString.indexOf("e-pv-maintaincontent")&&this.addSpan(t.textContent,e):e.appendChild(t);else if(this.tempElementStorage.length>1)for(var o=0;o<this.tempElementStorage.length;o++)if(this.tempElementStorage[o].classString){if(-1!==this.tempElementStorage[o].classString.indexOf("e-pv-maintaincontent")){if(this.tempElementStorage[o].text===t.textContent){this.addSpan(t.textContent,e);break}if(this.tempElementStorage[o].text!==t.textContent){var n=t.textContent,r=(this.isClassAvailable(),void 0);if(r=i.substring(0,this.tempElementStorage[o].text.length),-1!==this.tempElementStorage[o].text.indexOf(n)&&!this.tempElementStorage[o].classString){this.addSpan(n,e);break}if(-1!==this.tempElementStorage[o].text.indexOf(r)&&this.tempElementStorage[o].classString&&""!==r){if(-1!==this.tempElementStorage[o].classString.indexOf("e-pv-maintaincontent")){this.addSpan(r,e);var s=i.substring(this.tempElementStorage[o].text.length,i.length);this.tempElementStorage[o+1]&&(-1===this.tempElementStorage[o+1].text.indexOf(s)||this.tempElementStorage[o+1].classString||""===s||(t.textContent=s,e.appendChild(t)));break}}else if(this.tempElementStorage[o+1]){if(i===this.tempElementStorage[o].text+this.tempElementStorage[o+1].text){this.addSpan(this.tempElementStorage[o].text,e),t.textContent=this.tempElementStorage[o+1].text,e.appendChild(t);break}if(-1!==this.tempElementStorage[o].text.indexOf(i)){this.addSpan(i,e);break}var a=this.tempElementStorage[o].text.substring(e.textContent.length,n.length);if(-1!==this.tempElementStorage[o].text.indexOf(a)&&this.tempElementStorage[o].classString&&""!==a&&!this.tempElementStorage[o+1].classString&&-1!==i.indexOf(a)){this.addSpan(a,e);continue}}else{if(-1!==this.tempElementStorage[o].text.indexOf(i)){this.addSpan(t.textContent,e);break}-1!==this.tempElementStorage[o].text.indexOf(i.replace("\r\n",""))&&this.addSpan(i,e)}}}}else if(this.tempElementStorage[o].text!==t.textContent){if(""!==(n=t.textContent)){r=void 0;if((r=this.isClassAvailable()?i.substring(0,this.tempElementStorage[o].text.length):i.substring(0,this.tempElementStorage[o].text.length-e.textContent.length))===n&&!this.tempElementStorage[o].classString&&-1!==this.tempElementStorage[o].text.indexOf(r)){t.textContent=r,e.appendChild(t);break}if(-1!==this.tempElementStorage[o].text.indexOf(r)&&this.tempElementStorage[o].classString){if(-1!==this.tempElementStorage[o].classString.indexOf("e-pv-maintaincontent")){this.addSpan(r,e);break}}else if(this.tempElementStorage[o+1]){var l=n.substring(this.tempElementStorage[o].text.length,n.length),h=this.tempElementStorage[o+1].text.substring(0,l.length);if(n===r+this.tempElementStorage[o+1].text){t.textContent=r,e.appendChild(t),this.addSpan(this.tempElementStorage[o+1].text,e);break}if(n===r+h&&""!==h){t.textContent=r,e.appendChild(t),this.addSpan(l,e);break}if(-1!==this.tempElementStorage[o].text.indexOf(r)&&!this.tempElementStorage[o].classString&&""!==r){var p=i.substring(0,r.length);t.textContent=p,e.appendChild(t);var d=i.substring(r.length,i.length);""!==d&&-1!==this.tempElementStorage[o+1].text.indexOf(d)&&this.tempElementStorage[o+1].classString&&this.addSpan(d,e);break}}else{if(-1!==this.tempElementStorage[o].text.indexOf(n)&&!this.tempElementStorage[o].classString){t.textContent=n,e.appendChild(t);break}if(-1!==this.tempElementStorage[o].text.indexOf(n.replace("\r\n",""))&&!this.tempElementStorage[o].classString){t.textContent=n,e.appendChild(t);break}if(-1!==i.indexOf(this.tempElementStorage[o].text)){t.textContent=this.tempElementStorage[o].text,e.appendChild(t);break}}}}else e.appendChild(t);else e.appendChild(t)},e.prototype.getScrollElement=function(e){var t=e;if(e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].classList&&e.childNodes[i].classList.contains("e-pv-search-text-highlight")&&(t=e.childNodes[i]);return t},e.prototype.scrollToSearchStr=function(e,i){for(var o=e.offsetParent,n=e.offsetTop+e.clientTop,r=e.offsetLeft+e.clientLeft;o.id!==this.pdfViewerBase.viewerContainer.id;)n+=o.offsetTop,r+=o.offsetLeft,o=o.offsetParent;i&&(n+=i.y,r+=i.x,t.Browser.isDevice?o.scrollLeft=r:this.pdfViewerBase.getZoomFactor()>1.5&&(o.scrollLeft=r)),o.scrollTop=n,this.pdfViewerBase.updateMobileScrollerPosition()},e.prototype.highlightOtherOccurrences=function(e){this.initSearch(e,!0)},e.prototype.highlightOthers=function(){for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),o=t;o<=i;o++)this.highlightOtherOccurrences(o)},e.prototype.clearAllOccurrences=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.applyTextSelection()},e.prototype.getIndexes=function(){var e=this.pdfViewerBase.currentPageNumber-3;e=e>0?e:0;var t=this.pdfViewerBase.currentPageNumber+1;return t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1,{lowerPageValue:e,higherPageValue:t}},e.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled)for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),o=t;o<=i;o++)this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(o)},e.prototype.resetTextSearch=function(){this.resetVariables(),this.onTextSearchClose(),this.searchPageIndex=null,this.searchIndex=0,this.updateSearchInputIcon(!0),this.enableNextButton(!1),this.enablePrevButton(!1)},e.prototype.onTextSearchClose=function(){this.isPrevSearch=!1,this.isTextSearch=!1,this.pdfViewerBase.pageCount>0&&this.clearAllOccurrences()},e.prototype.createRequestForSearch=function(e){var t,i=this;t={xCoordinate:0,yCoordinate:0,pageNumber:e,documentId:this.pdfViewerBase.getDocumentId(),hashId:this.pdfViewerBase.hashId,zoomFactor:this.pdfViewerBase.getZoomFactor()};var o=new XMLHttpRequest;o.open("POST",this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderPages),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.responseType="json",o.send(JSON.stringify(t)),o.onreadystatechange=function(t){var n=i.pdfViewerBase;if(4===o.readyState&&200===o.status){var r=t.currentTarget.response;"object"!=typeof r&&(r=JSON.parse(r)),r&&r.pageText&&(n.storeWinData(r,e),i.initSearch(e,!1))}else 4===o.readyState&&400===o.status&&i.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)},o.onerror=function(e){i.pdfViewerBase.openNotificationPopup(),i.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)}},e.prototype.createSearchBoxButtons=function(e,i){var o=t.createElement("button",{id:this.pdfViewer.element.id+"_"+e,className:"e-btn e-icon-btn e-pv-search-btn "+i}),n=t.createElement("span",{id:this.pdfViewer.element.id+"_"+e+"Icon",className:"e-pv-icon-search "+i+"-icon"});return this.pdfViewer.enableRtl&&"e-pv-prev-search"===i&&(n.style.paddingRight="5px"),o.disabled=!0,o.appendChild(n),o},e.prototype.enablePrevButton=function(e){t.Browser.isDevice||(e?this.prevSearchBtn.removeAttribute("disabled"):this.prevSearchBtn.disabled=!0)},e.prototype.enableNextButton=function(e){t.Browser.isDevice||(e?this.nextSearchBtn.removeAttribute("disabled"):this.nextSearchBtn.disabled=!0)},e.prototype.resetVariables=function(){this.searchedPages=[],this.searchMatches=new Array,this.searchCollection=new Array},e.prototype.searchButtonClick=function(e,t){e.classList.contains("e-pv-search-icon")?this.initiateTextSearch(t):e.classList.contains("e-pv-search-close")&&(t.value="",this.resetTextSearch(),t.focus())},e.prototype.updateSearchInputIcon=function(e){this.searchBtn&&(e?(this.searchBtn.classList.remove("e-pv-search-close"),this.searchBtn.classList.add("e-pv-search-icon")):(this.searchBtn.classList.remove("e-pv-search-icon"),this.searchBtn.classList.add("e-pv-search-close")))},e.prototype.onMessageBoxOpen=function(){this.pdfViewerBase.getElement("_search_input").blur(),this.isMessagePopupOpened=!0,t.Browser.isDevice?this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant("No Text Found")):this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches"))},e.prototype.searchText=function(e,t){this.searchString=e,this.isMatchCase=t,this.searchIndex=0,this.textSearch(e)},e.prototype.searchNext=function(){this.nextSearch()},e.prototype.searchPrevious=function(){this.prevSearch()},e.prototype.cancelTextSearch=function(){this.resetTextSearch()},e.prototype.destroy=function(){this.searchCollection=void 0},e.prototype.getModuleName=function(){return"TextSearch"},e}(),I=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.print=function(){var e,i=this;this.pdfViewerBase.pageCount>0&&(this.printViewerContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_print_viewer_container",className:"e-pv-print-viewer-container"}),this.pdfViewerBase.showPrintLoadingIndicator(!0),this.iframe=document.createElement("iframe"),this.iframe.className="iframeprint",this.iframe.id="iframePrint",this.iframe.style.position="absolute",this.iframe.style.top="-100000000px",document.body.appendChild(this.iframe),this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument,this.frameDoc.document.open(),setTimeout(function(){for(e=0;e<=i.pdfViewerBase.pageCount;e++)if(e<i.pdfViewerBase.pageCount){var t=i.pdfViewerBase.pageSize[e].width,o=i.pdfViewerBase.pageSize[e].height;i.pdfViewer.printModule.createRequestForPrint(e,t,o,i.pdfViewerBase.pageCount)}else i.printWindowOpen()},100))},e.prototype.createRequestForPrint=function(e,i,o,n){var r=new XMLHttpRequest,s={pageNumber:e,documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:1};r.open("POST",this.pdfViewer.serviceUrl+"/PrintImages",!1),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(JSON.stringify(s));var a=r.responseText,l=new Image;l.src=a,l.height=o,l.width=i,this.printImageContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_print_image_container"+e}),o<i&&(this.printImageContainer.style.height=i+"px",l.height=i,this.printImageContainer.style.width=o+"px",l.width=o),this.printImageContainer.appendChild(l),this.printViewerContainer.appendChild(this.printImageContainer)},e.prototype.printWindowOpen=function(){var e=this,t=navigator.userAgent;-1!==t.indexOf("Chrome")||-1!==t.indexOf("Safari")||-1!==t.indexOf("Firefox")?(this.frameDoc.document.write("<!DOCTYPE html>"),this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; } img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class="loader">')):(this.frameDoc.document.write("<!DOCTYPE html>"),this.frameDoc.document.write("<html><head><style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>")),this.frameDoc.document.write(this.printViewerContainer.outerHTML),this.pdfViewerBase.showPrintLoadingIndicator(!1),setTimeout(function(){e.iframe.contentWindow.print(),e.iframe.contentWindow.focus(),document.body.removeChild(e.iframe)},200)},e.prototype.destroy=function(){this.printViewerContainer=void 0,this.frameDoc=void 0},e.prototype.getModuleName=function(){return"Print"},e}();e.LinkAnnotation=p,e.NavigationPane=d,e.PdfViewerBase=f,e.TextLayer=m,e.ContextMenu=g,e.Magnification=w,e.Navigation=v,e.ThumbnailView=b,e.Toolbar=C,e.ToolbarSettings=S,e.ServerActionSettings=x,e.PdfViewer=T,e.BookmarkView=B,e.TextSelection=P,e.TextSearch=E,e.Print=I,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-pdfviewer.umd.min.js.map
